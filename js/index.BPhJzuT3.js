import{o as t,c as de,r as X,h as dt,d as Ke,a as re,e as Be,b as s,f as e,g as H,w as D,i as N,t as v,F as q,j as G,k as I,l as ie,m as Re,n as ye,p as Je,q as qe,u as ut,s as Qe,P as Xe,v as fe,x as ee,y as te,z as $e,T as me,A as o,B as ct,C as x,D as R,E as mt,G as le,H as Ze,I as he,J as Ue,K as _e,L as Oe,M as ge,N as we,O as xe,Q as Pe,R as Ye,S as ft,U as pt,V as vt,W as Ve,X as gt,Y as bt}from"./vendor-CSWx9gYS-chunk.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))_(g);new MutationObserver(g=>{for(const F of g)if(F.type==="childList")for(const T of F.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&_(T)}).observe(document,{childList:!0,subtree:!0});function $(g){const F={};return g.integrity&&(F.integrity=g.integrity),g.referrerPolicy&&(F.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?F.credentials="include":g.crossOrigin==="anonymous"?F.credentials="omit":F.credentials="same-origin",F}function _(g){if(g.ep)return;g.ep=!0;const F=$(g);fetch(g.href,F)}})();const yt={__name:"App",setup(i){return(d,$)=>{const _=X("router-view");return t(),de(_)}}};function et(){const i=z=>{var j;let S=z,L=S.response,Q="";if(!S.response)return z.message;if(L.status===500){if(typeof L.data=="string")return L.data;if(L.data.content)return L.data.content;if(L.data.detail)return L.data.detail}if(L.status===401){const B=`${window.location.pathname}${window.location.search}`;Q=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(B)}`}'>here</a> to login.`}else if(L.status===400){let B=S.response.data.errors;Q=S.response.data.title||S.response.data,B&&(Q+="<ul>");for(let b in B){let M=B[b];for(let h in B[b]){let W=M[h];Q+=`<li>${W}</li>`}}B&&(Q+="</ul>"),Q||(Q=S.message),Q&&Q.content&&(Q=Q.content)}else L.status===404?Q=((j=L==null?void 0:L.data)==null?void 0:j.title)||(L==null?void 0:L.data)||"Record not found.":typeof L.data=="string"&&(Q=S.message,Q===""&&(Q=`Error <b>Http ${L.status}</b>.<br/>Please contact the System Administrator.`));return Q},d=z=>JSON.parse(JSON.stringify(z)),$=z=>{if(typeof z!="number")return z;var S=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return S.format(z)},_=(z,S,L)=>{const j={value:S,expiry:new Date().getTime()+L};debugger;localStorage.setItem(z,JSON.stringify(j))},g=z=>{debugger;const S=localStorage.getItem(z);if(!S)return null;const L=JSON.parse(S);return new Date().getTime()>L.expiry?(localStorage.removeItem(z),null):L.value},F="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:i,clone:d,toCurrency:$,moment:dt,localStorageSetWithExpiry:_,localStorageGetWithExpiry:g,setPageTab:(z,S)=>{var L=localStorage.getItem(F);L?L=JSON.parse(L):L={},L[z]=S,localStorage.setItem(F,JSON.stringify(L))},getPageTab:z=>{var S=localStorage.getItem(F);return S?S=JSON.parse(S):S={},S[z]}}}const $t=et(),tt=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(tt.exp*1e3),ht=wt.isAfter()?tt:null,be=Ke({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(i){try{this.user=i,localStorage.setItem("user",JSON.stringify(i))}catch(d){debugger;alert(d)}},logout(){this.user=null,localStorage.removeItem("user"),lt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),_t="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(_t));const kt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ne=kt,st=Ke("msal",()=>{const i=re({auth:{clientId:Ne.VITE_AUTH_CLIENT_ID,authority:Ne.VITE_AUTH_AUTHORITY_URL,redirectUri:Ne.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),d=re("");return{msalConfig:i,accessToken:d,setAccessToken:_=>{d.value=_}}}),ze={$on:(...i)=>Be.on(...i),$once:(...i)=>Be.once(...i),$off:(...i)=>Be.off(...i),$emit:(...i)=>Be.emit(...i)};function St(){const i=(F,T,Y,z)=>{ze.$emit("toast-message",{title:F,message:T,type:Y,options:z})};return{success:(F,T,Y={})=>{i(F,T,"success",Y)},warning:(F,T,Y={})=>{i(F,T,"warning",Y)},info:(F,T,Y={})=>{i(F,T,"info",Y)},error:(F,T,Y={})=>{i(F,T,"danger",Y)}}}const Se=(i,d)=>{const $=i.__vccOpts||i;for(const[_,g]of d)$[_]=g;return $},Tt={data(){return{notifications:[],messages:[]}},async created(){const i=this;i.$bus.$on("event:notification-received",()=>{i.getUnreadNotifications()}),i.$bus.$on("event:notification-marked-as-read",d=>{i.notifications.some(_=>_.notificationId===d)&&i.getUnreadNotifications()}),i.$bus.$on("event:notification-removed",d=>{i.notifications.some(_=>_.notificationId===d)&&i.getUnreadNotifications()}),i.$bus.$on("event:chat-marked-as-read",i.onChatMarkedAsRead),i.$bus.$on("event:chat-message-received",i.onChatMessageReceived)},async mounted(){const i=this,d=i.$refs.notifications,$=i.$refs.messages;d&&d.offsetParent,$&&$.offsetParent&&await i.getUnreadChats()},methods:{async logout(){const i=this;try{await i.$util.axios.post("/api/accounts/logout").then(d=>{const $="/";i.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){i.$util.href($)}})})}catch(d){i.$util.handleError(d)}},async onChatMarkedAsRead(i){let d=this,$=d.messages.find(_=>_.chatId===i);if($){let _=d.messages.indexOf($);d.messages.splice(_,1)}},async onChatMessageReceived(i){let d=this,$=d.messages.find(g=>g.chatId===i.chatId);if($)$.lastMessageText=i.content;else{var _={chatId:i.chatId,isRead:!1,lastDateSent:i.dateSent,lastMessageText:i.content,senderFirstLastName:`${i.sender.firstName} ${i.sender.lastName}`,senderInitials:i.sender.initials,senderProfilePicture32:i.sender.profilePicture32,urlPicture:d.$util.getProfilePictureUrl(i.sender.profilePicture32,i.sender.initials)};d.messages.push(_)}},async getUnreadNotifications(){const i=this;try{await i.$util.axios.get("api/accounts/unread-notifications").then(d=>{i.notifications=d.data})}catch(d){i.$util.handleError(d)}},async getUnreadChats(){const i=this;try{await i.$util.axios.get("api/accounts/unread-chats").then(d=>{i.messages=d.data;for(let $ in i.messages){let _=i.messages[$];i.$set(_,"urlPicture",i.$util.getProfilePictureUrl(_.senderProfilePicture32,_.senderInitials))}})}catch(d){i.$util.handleError(d)}},viewNotification(i){this.$bus.$emit("event:open-notification",i)},viewChat(i){this.$bus.$emit("event:open-chat",i)},showHiddenElements(){let d=this.$el.getElementsByClassName("initialHidden");for(let $=0;$<d.length;$++)d[$].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const d=be().user;return{user:d,username:d?d.nameFull:"Guest"}},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1},async openModalSearchUser747(i){this.$refs.refModalSearchUser747.open(i)}}},Ct={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},It={class:"container-md"},xt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Pt={class:"navbar-nav"},Vt={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ot={class:"nav-item dropdown"},At={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"navbar-nav ms-auto"},Et={class:"nav-item dropdown"},Ht={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Lt={class:"d-inline d-sm-none d-md-inline"},Bt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},qt={class:"text-capitalize"};function Nt(i,d,$,_,g,F){const T=X("router-link");return t(),s("nav",Ct,[e("div",It,[H(T,{class:"navbar-brand",to:"/member"},{default:D(()=>[N(v($.appName),1)]),_:1}),d[14]||(d[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",xt,[e("ul",Pt,[e("li",Vt,[d[3]||(d[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ut,[e("li",null,[H(T,{class:"dropdown-item",to:"/member/announcements"},{default:D(()=>d[0]||(d[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),N(" Announcements ")])),_:1})]),e("li",null,[H(T,{class:"dropdown-item",to:"/member/posts"},{default:D(()=>d[1]||(d[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),N(" Posts ")])),_:1})]),e("li",null,[H(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:D(()=>d[2]||(d[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),N(" Yellow Pages ")])),_:1})])])]),e("li",Ot,[d[5]||(d[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",At,[e("li",null,[H(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:D(()=>d[4]||(d[4]=[N(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Dt,[e("li",Et,[e("a",Ht,[e("span",null,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Lt,v(g.username),1)])]),e("ul",Bt,[d[9]||(d[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),d[10]||(d[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),d[11]||(d[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),d[12]||(d[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),g.user&&g.user.roles.length>1?(t(!0),s(q,{key:0},G(g.user.roles,Y=>(t(),s("li",null,[H(T,{to:`/${Y.toLowerCase()}`,class:"dropdown-item"},{default:D(()=>[e("span",qt,v(Y),1)]),_:2},1032,["to"])]))),256)):I("",!0),e("li",null,[H(T,{to:"/",class:"dropdown-item"},{default:D(()=>d[7]||(d[7]=[N(" Main ")])),_:1})]),d[13]||(d[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[H(T,{to:"/account/logout",class:"dropdown-item"},{default:D(()=>d[8]||(d[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),N("Logout ")])),_:1})])])])])])])])}const Rt=Se(Mt,[["render",Nt]]),zt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const i=document.getElementById("top");i&&i.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let i=this;if(!i.$el.getElementsByClassName)return;let d=i.$el.getElementsByClassName("initialHidden");for(let $=0;$<d.length;$++){let _=d[$];_.classList.remove("invisible"),_.classList.remove("d-none")}},close(){const i=this,d=document.referrer.toLowerCase();d&&d.includes("/account/login")?i.$router.go(-2):i.$router.go(-1)},toggle(i){const d=this;d.toggles[i]=!d.toggles[i],localStorage.setItem(d.togglesKey,JSON.stringify(d.toggles))}}},Ft={mixins:[zt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1}}},jt={class:"footer sticky-bottom"},Gt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(i,d,$,_,g,F){const T=X("router-link");return t(),s("footer",jt,[e("div",Gt,[e("div",Yt,[e("span",Wt,"©"+v(g.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[d[3]||(d[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[H(T,{class:"dropdown-item",to:"/member/announcements"},{default:D(()=>d[0]||(d[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),N(" Announcements ")])),_:1})]),e("li",null,[H(T,{class:"dropdown-item",to:"/member/posts"},{default:D(()=>d[1]||(d[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),N(" Posts ")])),_:1})]),e("li",null,[H(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:D(()=>d[2]||(d[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),N(" Yellow Pages ")])),_:1})])])]),e("li",es,[d[5]||(d[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[H(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:D(()=>d[4]||(d[4]=[N(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Se(Ft,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const d=this.$config;document.title=`Account - ${d.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(i,d,$,_,g,F){const T=X("Toasts"),Y=X("router-view");return t(),s("div",ls,[H(T),H(Y,{class:"flex-grow-1 mb-2"})])}const rs=Se(as,[["render",ns]]),is={__name:"index",setup(i){return be().user,ie(()=>{}),($,_)=>(t(),s("div",null,_[0]||(_[0]=[Re('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){ye("$config");const i=us.VITE_API_URL,d=Je.create({baseURL:i});return qe.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),d.interceptors.request.use($=>{qe.start();const{user:_}=be();return _&&_.token&&($.headers?($.headers.Authorization||($.headers.Authorization=`Bearer ${_.token}`),$.headers["Access-Control-Allow-Origin"]||($.headers["Access-Control-Allow-Origin"]="*")):$.headers={Authorization:`Bearer ${_.token}`,"Access-Control-Allow-Origin":"*"}),$}),d.interceptors.response.use($=>(qe.done(),$),$=>{throw qe.done(),$}),d}function pe(i){if(!i.appTitle)throw Error("App Title is required.");if(!i.pageTitle)throw Error("Page Title is required.");const d=ut(),$=Qe(),_=cs(),g=et(),F=St(),Y=be().user,z=()=>Y&&Y.roles&&Y.roles.includes("System"),S=()=>Y&&Y.roles&&Y.roles.includes("administrator"),L=()=>Y&&Y.roles&&Y.roles.includes("employee"),Q=()=>Y&&Y.roles&&Y.roles.includes("Member"),j=()=>{let l=d.path;return d.query.returnUrl&&(l=d.query.returnUrl),l=`?returnUrl=${encodeURIComponent(l)}`,l},B=async()=>{const l=document.referrer.toLowerCase();l&&l.includes("/accounts/login")?await $.go(-2):await $.go(-1)},b=l=>{var A;const E=d.path,a=(A=d.query)==null?void 0:A.returnUrl;a&&!(E.startsWith(a)||a.startsWith(E))?$.push(a):$.push(l)},M=i.appTitle,h=i.pageTitle,W=re(!1),K=re(new Map),r=re(""),c=re(""),U=re("");return{appTitle:M,pageTitle:h,busy:W,validations:K,infoMessage:r,warningMessage:c,errorMessage:U,router:$,route:d,axios:_,utils:g,toasts:F,close:B,closeWithReturnUrl:b,generateReturnUrl:j,security:{userId:Y?Y.userId:"",isSystem:z(),isAdministrator:S(),isEmployee:L(),isMember:Q()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(i){ye("$config");const d=be(),$=st(),_=new Xe($.msalConfig),g=fe({username:"",password:""}),F={username:{required:ee.withMessage("Username is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0}},T=$e(F,g),{appTitle:Y,pageTitle:z,busy:S,isDirty:L,validations:Q,infoMessage:j,warningMessage:B,errorMessage:b,router:M,route:h,axios:W,utils:K,toasts:r,close:c,security:U}=pe({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ie(async()=>{await _.initialize()});const l=async()=>{await _.loginPopup({}).then(()=>{debugger;const A=_.getAllAccounts()[0];_.setActiveAccount(A)}).catch(a=>{console.error(`error during authentication: ${a}`)});var E={account:_.getActiveAccount(),scopes:[]};await _.acquireTokenSilent(E).then(a=>{debugger;const f=a.account.idToken,n=ct(f);if(n.token=a.accessToken,console.log(a),!n.roles){debugger;n.roles=[]}n.userId=n.sub,d.login(n);var p=h.query.returnUrl;p?M.push(decodeURIComponent(p)):n.roles.length===1?M.push(`/${n.roles[0].toLowerCase()}`):M.push("/")}).catch(a=>{console.error(`error during acquireTokenSilent: ${a}`)})};return(E,a)=>(t(),de(me,null,{default:D(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,v(o(Y)),1),e("div",null,[o(b)?(t(),s("div",vs,[a[1]||(a[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(b)},null,8,gs)])):I("",!0),o(T).$error?(t(),s("div",bs,[a[2]||(a[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(T).$errors,A=>(t(),s("li",{key:A.$uid},v(A.$message),1))),128))])])):I("",!0)]),e("button",{onClick:a[0]||(a[0]=A=>l()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Se(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(i){const d=be();return d.user,ie(async()=>{d.logoutWithRedirect()}),($,_)=>(t(),s("div",ws,_[0]||(_[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[N(" You have logged out from HOA MS."),e("br"),N(" Click "),e("a",{href:"/",class:"d-inline"},"here"),N(" to go back to home page. ")])],-1)])))}},_s={class:"h-100 d-flex align-items-center justify-content-center"},ks={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Cs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Is=["innerHTML"],xs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ps={class:"row row-cols-1 row-cols-sm-3"},Vs={class:"col-sm"},Us={class:"form-group"},Os={key:0,class:"d-block invalid-feedback"},As={class:"col-sm"},Ds={class:"form-group"},Es={key:0,class:"d-block invalid-feedback"},Hs={class:"col-sm"},Ls={class:"form-group"},Bs={key:0,class:"d-block invalid-feedback"},qs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Fs={class:"col"},js={class:"form-group"},Gs={key:0,class:"d-block invalid-feedback"},Ys={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(i){const d=fe({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),$=(U,l)=>U===l.password,_={firstName:{required:ee.withMessage("First name is required.",te),$autoDirty:!0,$lazy:!0},middleName:{required:ee.withMessage("Middle name is required.",te),$autoDirty:!0,$lazy:!0},lastName:{required:ee.withMessage("Last name is required.",te),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ee.withMessage("Phone number is required.",te),$autoDirty:!0,$lazy:!0},email:{required:ee.withMessage("Email is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ee.withMessage("Confirm password is required.",te),confirmSamePassword:ee.withMessage("Password and confirm passwrod are different.",$),$autoDirty:!0,$lazy:!0}},g=$e(_,d),{appTitle:F,pageTitle:T,busy:Y,isDirty:z,validations:S,infoMessage:L,warningMessage:Q,errorMessage:j,router:B,axios:b,utils:M,toasts:h,close:W,security:K}=pe({appTitle:"HOA MS",pageTitle:"Register User"}),r=ye("$config");ie(()=>{});const c=async()=>{const U=d;if(Y.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}j.value=null;try{Y.value=!0;const E=M.clone(U);E.tenantid=r.tenantId;debugger;await b({method:"post",url:"/api/v1/accounts/register",data:E}).then(a=>{h.success("Register","Registration was successfull.",{onClose:async()=>{await B.push("/accounts/login")}})})}catch(E){j.value=M.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{Y.value=!1}};return(U,l)=>{const E=X("router-link");return t(),de(me,null,{default:D(()=>[e("div",_s,[e("div",ks,[e("h4",Ss,v(o(T)),1),e("div",Ts,[e("div",Ms,[o(j)?(t(),s("div",Cs,[l[8]||(l[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,Is)])):I("",!0),o(g).$error?(t(),s("div",xs,[l[9]||(l[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(g).$errors,a=>(t(),s("li",{key:a.$uid},v(a.$message),1))),128))])])):I("",!0)]),e("div",Ps,[e("div",Vs,[e("div",Us,[l[10]||(l[10]=e("label",null,"First Name",-1)),x(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>d.firstName=a),type:"text",class:"form-control"},null,512),[[R,d.firstName]]),o(g).firstName.$error?(t(),s("div",Os,[(t(!0),s(q,null,G(o(g).firstName.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])]),e("div",As,[e("div",Ds,[l[11]||(l[11]=e("label",null,"Middle Name",-1)),x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>d.middleName=a),type:"text",class:"form-control"},null,512),[[R,d.middleName]]),o(g).middleName.$error?(t(),s("div",Es,[(t(!0),s(q,null,G(o(g).middleName.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])]),e("div",Hs,[e("div",Ls,[l[12]||(l[12]=e("label",null,"Last Name",-1)),x(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>d.lastName=a),type:"text",class:"form-control"},null,512),[[R,d.lastName]]),o(g).lastName.$error?(t(),s("div",Bs,[(t(!0),s(q,null,G(o(g).lastName.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])])]),e("div",qs,[e("div",Ns,[e("div",Rs,[l[13]||(l[13]=e("label",null,"Phone Number",-1)),x(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>d.phoneNumber=a),type:"tel",class:"form-control"},null,512),[[R,d.phoneNumber]]),o(g).phoneNumber.$error?(t(),s("div",zs,[(t(!0),s(q,null,G(o(g).phoneNumber.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])]),e("div",Fs,[e("div",js,[l[14]||(l[14]=e("label",null,"Email",-1)),x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>d.email=a),type:"email",class:"form-control"},null,512),[[R,d.email]]),o(g).email.$error?(t(),s("div",Gs,[(t(!0),s(q,null,G(o(g).email.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])])]),e("div",Ys,[e("div",Ws,[e("div",Ks,[l[15]||(l[15]=e("label",null,"Password",-1)),x(e("input",{"onUpdate:modelValue":l[5]||(l[5]=a=>d.password=a),type:"password",class:"form-control"},null,512),[[R,d.password]]),o(g).password.$error?(t(),s("div",Js,[(t(!0),s(q,null,G(o(g).password.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])]),e("div",Qs,[e("div",Xs,[l[16]||(l[16]=e("label",null,"Confirm Password",-1)),x(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>d.confirmPassword=a),type:"password",class:"form-control"},null,512),[[R,d.confirmPassword]]),o(g).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(q,null,G(o(g).confirmPassword.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):I("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:l[7]||(l[7]=a=>c()),class:"btn btn-primary w-100"},l[17]||(l[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),N("Register ")]),8,so)]),e("div",oo,[H(E,{to:"/",class:"btn btn-outline-primary w-100"},{default:D(()=>l[18]||(l[18]=[N("Home")])),_:1})]),e("div",ao,[H(E,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:D(()=>l[19]||(l[19]=[N("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function ot(){const i=Qe(),d=z=>window.location.href.indexOf(z)>-1,$=z=>localStorage.getItem("data-bs-theme")||z,_=z=>{document.documentElement.setAttribute("data-bs-theme",z),localStorage.setItem("data-bs-theme",z)},g=async()=>await Je.get("https://bootswatch.com/api/5.json").then(z=>z.data),F=z=>{const S=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");S&&z?(S.setAttribute("href",z),localStorage.setItem("bootswatch-theme",z)):alert("cannot query css link")},T=z=>{Y(),i.push(z)},Y=()=>{if(screen.width<576){const S=document.getElementById("navbarCollapse");if(S){const L=mt.getInstance(S);L&&L.hide()}}};return{isActive:d,getCurrentBsTheme:$,changeBsTheme:_,getBootswatch:g,changeTheme:F,navigate:T,collapseNavbar:Y}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],_o={class:"nav-item dropdown"},ko={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Co={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Io={key:0},xo={key:1},Po={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(i){const d=st(),{isActive:$,getCurrentBsTheme:_,changeBsTheme:g,getBootswatch:F,changeTheme:T,navigate:Y,collapseNavbar:z}=ot(),S=be(),L=S.user,Q=fe({user:L,username:L?L.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});ie(async()=>{const M=Q;M.bootswatch=await F();const h=_(M.bsTheme);h&&(M.bsTheme=h,g(M.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(M.currentTheme=W,T(W))});const j=M=>{T(M),Q.currentTheme=M,z()},B=M=>{g(M),Q.bsTheme=M,z()},b=async()=>{S.logoutWithRedirect();const M=new Xe(d.msalConfig);await M.initialize();const h={mainWindowRedirectUri:"/"};await M.logoutPopup(h)};return(M,h)=>{const W=X("router-link");return t(),de(me,null,{default:D(()=>[e("nav",ro,[e("div",io,[H(W,{class:"navbar-brand",to:"/administrator"},{default:D(()=>[N(v(i.appName),1)]),_:1}),h[18]||(h[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[H(W,{to:"/videos",onClick:o(z),class:"nav-link"},{default:D(()=>h[3]||(h[3]=[e("span",{class:"fas fa-fw fa-file-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[h[6]||(h[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[H(W,{to:"/source-groups",onClick:o(z),class:"dropdown-item"},{default:D(()=>h[4]||(h[4]=[N(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[H(W,{to:"/source-locations",onClick:o(z),class:"dropdown-item"},{default:D(()=>h[5]||(h[5]=[N(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[H(W,{to:"/vod-sources",onClick:o(z),class:"nav-link"},{default:D(()=>h[7]||(h[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[h[10]||(h[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[H(W,{to:"/program-templates",onClick:o(z),class:"dropdown-item"},{default:D(()=>h[8]||(h[8]=[N(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[H(W,{to:"/channels",onClick:o(z),class:"dropdown-item"},{default:D(()=>h[9]||(h[9]=[N(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[h[14]||(h[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[Q.bsTheme==="dark"?(t(),s("button",{key:0,onClick:h[0]||(h[0]=K=>B("light")),class:"dropdown-item"},h[11]||(h[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),N("Dark Mode ")]))):(t(),s("button",{key:1,onClick:h[1]||(h[1]=K=>B("dark")),class:"dropdown-item"},h[12]||(h[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),N("Light Mode ")])))]),h[13]||(h[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(q,null,G(Q.bootswatch.themes,K=>(t(),s("li",null,[e("button",{onClick:r=>j(K.cssCdn),class:le(["dropdown-item",{active:Q.currentTheme===K.cssCdn}])},v(K.name),11,ho)]))),256))])]),e("li",_o,[e("a",ko,[e("span",null,[h[15]||(h[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(L)?(t(),s("span",To,v(o(L).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Co,[o(L)?(t(),s("li",Io,[e("button",{onClick:h[2]||(h[2]=K=>b()),class:"dropdown-item"},h[16]||(h[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),N("Logout ")]))])):(t(),s("li",xo,[H(W,{to:"/accounts/login",class:"dropdown-item"},{default:D(()=>h[17]||(h[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),N("Login ")])),_:1})]))])])])])])])]),_:1})}}},Vo={class:"footer sticky-bottom"},Uo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Oo={class:"container-md"},Ao={class:"navbar-text small p-0"},Do={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(i){ot();const d=ye("$config"),_=be().user;let F=new Date().getFullYear();const T=fe({user:_,username:_?_.nameFull:"Guest",copyright:`2020-${F} ${d.appName}`});return ie(async()=>{}),(Y,z)=>(t(),s("footer",Vo,[e("div",Uo,[e("div",Oo,[e("span",Ao,"©"+v(T.copyright),1)])])]))}},Eo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){ze.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(i){i.message&&this.addMessage(i.title,i.message,i.type,i.options)},async addMessage(i,d,$,_={}){var g={id:this.count++,title:i,message:d,type:$,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};g=Object.assign({},g,_),this.messages.unshift(g),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),g.timeOut>0&&await this.startTimeout(g)},async startTimeout(i,d=0){const $=this,_=performance.now(),g=async()=>{i.animationFrame=requestAnimationFrame(async F=>{const T=F+d-_;if(!$.exists(i)||i.paused){cancelAnimationFrame(i.animationFrame);return}else if(T<i.timeOut){const Y=T/i.timeOut;i.progress=Y,await g()}else{i.progress=1,cancelAnimationFrame(i.animationFrame),$.remove(i);return}})};await g()},pauseProgress(i){i.timeOut<=0||(i.paused=!0)},async resumeProgress(i){i.timeOut<=0||(i.paused=!1,await this.startTimeout(i,i.timeOut*i.progress))},getCurrentProgress(i){return Math.round(i.progress*100)===100?100:i.progress*100},getIconClass(i){const d=i.type;let $="";switch(d){case"success":$="fas fa-fw fa-circle-check";break;case"info":$="fas fa-fw fa-circle-info";break;case"warning":$="fas fa-fw fa-circle-exclamation";break;case"danger":$="fas fa-fw fa-triangle-exclamation";break}let _=$;return i.rtl?"icon-right "+_:"icon-left "+_},async remove(i){const d=this.messages.findIndex($=>$.id===i.id);this.messages.splice(d,1),typeof i.onClose=="function"&&await i.onClose()},exists(i){return this.messages.findIndex($=>$.id===i.id)!==-1}}},Ho={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Lo=["onMouseover","onMouseout"],Bo={class:"me-auto text-white"},qo=["onClick"],No={class:"toast-body"},Ro=["innerHTML"],zo={key:0,class:"progress m-1",style:{height:"4px"}};function Fo(i,d,$,_,g,F){return t(),de(me,null,{default:D(()=>[e("div",Ho,[H(he,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:D(()=>[(t(!0),s(q,null,G(g.messages,T=>(t(),s("div",{key:T.id,class:le(["toast show mb-2 ms-auto",`border-${T.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Y=>F.pauseProgress(T),onMouseout:Y=>F.resumeProgress(T)},[e("div",{class:le(["toast-header",`bg-${T.type}`])},[e("strong",Bo,[e("i",{class:le([F.getIconClass(T),"me-1"])},null,2),N(v(T.title),1)]),T.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Y=>F.remove(T)},d[0]||(d[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,qo)):I("",!0)],2),e("div",No,[e("div",{innerHTML:T.message},null,8,Ro)]),T.timeOut>0&&T.showProgress?(t(),s("div",zo,[e("div",{class:le(`bg-${T.type}`),style:Ze({width:F.getCurrentProgress(T)+"%"})},null,6)])):I("",!0)],42,Lo))),128))]),_:1})])]),_:1})}const jo=Se(Eo,[["render",Fo],["__scopeId","data-v-5272bd9a"]]),Go={name:"AdminLayout",components:{TopNav:Po,BottomNav:Do},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Yo={class:"d-flex flex-column vh-100"};function Wo(i,d,$,_,g,F){const T=X("Toasts"),Y=X("TopNav"),z=X("router-view"),S=X("BottomNav");return t(),s("div",Yo,[H(T),H(Y),H(z,{class:"flex-grow-1 mb-2"}),d[0]||(d[0]=e("div",{class:"pt-2"},null,-1)),H(S)])}const Ko=Se(Go,[["render",Wo]]),Jo={class:"d-flex flex-row justify-content-end"},Qo={class:"mt-2 container-md"},Xo={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Zo=["innerHTML"],ea={class:"text-center"},ta={class:"row mt-3"},sa={class:"col-12 col-sm-6 offset-sm-3"},oa={class:"card"},aa={class:"card-body"},la={class:"card card-body mb-2 d-none"},na={key:0,class:"fas fa-fw fa-circle-check text-success"},ra={key:1,class:"fas fa-fw fa-times-circle text-danger"},ia={key:0,class:"fas fa-fw fa-circle-check text-success"},da={key:1,class:"fas fa-fw fa-times-circle text-danger"},ua={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},ca={class:"col"},ma={class:"card h-100 shadow-sm"},fa={class:"card-body"},pa={class:"col"},va={class:"card h-100 shadow-sm"},ga={class:"card-body"},ba={__name:"Index",setup(i){const{appTitle:d,pageTitle:$,busy:_,isDirty:g,validations:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,generateReturnUrl:b,security:M}=pe({appTitle:"ARC AIO",pageTitle:"Dashboard"});ye("$config"),be().user;const W=fe({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),ie(async()=>{});const K=async()=>{const U=W;if(!_.value)try{_.value=!0;const l="/api/v1/dashboard/administrators/";U.item=[],await L.get(l).then(E=>{U.item=E.data})}catch(l){z.value=Q.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},r=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await L.get("/api/v1/channels/reset/").then(E=>{j.success("Reset All Data","Reset data was successful.")})}catch(l){z.value=Q.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{await K()};return(U,l)=>{const E=X("PageHeader"),a=X("router-link");return t(),de(me,null,{default:D(()=>[e("div",null,[H(E,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",Jo,[e("button",{onClick:l[0]||(l[0]=A=>c()),class:"ms-2 btn btn-secondary"},l[2]||(l[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Qo,[o(z)?(t(),s("div",Xo,[l[3]||(l[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(z))},null,8,Zo)])):I("",!0),l[26]||(l[26]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),N("UNDER CONSTRUCTION ")],-1)),e("div",ea,[e("button",{onClick:l[1]||(l[1]=A=>r()),class:"btn btn-warning btn-lg"},l[4]||(l[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),N("Reset All Data ")]))]),e("div",ta,[e("div",sa,[e("div",oa,[l[14]||(l[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",aa,[e("ol",null,[l[8]||(l[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[H(a,{to:`/videos/add/${o(b)()}`},{default:D(()=>l[5]||(l[5]=[N(" Create a Video. ")])),_:1},8,["to"])]),l[9]||(l[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[H(a,{to:"/program-templates/add"},{default:D(()=>l[6]||(l[6]=[N(" Create Program Template. ")])),_:1}),l[7]||(l[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),l[10]||(l[10]=e("li",null,[N(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),l[11]||(l[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),l[12]||(l[12]=e("li",null," Publish Channel. ",-1)),l[13]||(l[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",la,[l[17]||(l[17]=N(" Security ")),e("ul",null,[e("li",null,[o(M).isAdministrator?(t(),s("span",na)):(t(),s("span",ra)),l[15]||(l[15]=N(" Administrator "))]),e("li",null,[o(M).isEmployee?(t(),s("span",ia)):(t(),s("span",da)),l[16]||(l[16]=N(" Employee "))])])]),e("div",ua,[e("div",ca,[e("div",ma,[l[19]||(l[19]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),N("Human Resources ")])],-1)),e("div",fa,[e("ul",null,[e("li",null,[H(a,{to:"/movies"},{default:D(()=>l[18]||(l[18]=[N(" Employees ")])),_:1})])])])])]),e("div",pa,[e("div",va,[l[25]||(l[25]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),N("TBD ")])],-1)),e("div",ga,[e("ul",null,[e("li",null,[H(a,{to:"/media-videos"},{default:D(()=>l[20]||(l[20]=[N(" TBD ")])),_:1})]),e("li",null,[H(a,{to:"/movies"},{default:D(()=>l[21]||(l[21]=[N(" TBD ")])),_:1})]),e("li",null,[H(a,{to:"/movies"},{default:D(()=>l[22]||(l[22]=[N(" TBD ")])),_:1})]),e("li",null,[H(a,{to:"/movies"},{default:D(()=>l[23]||(l[23]=[N(" TBD ")])),_:1})]),e("li",null,[H(a,{to:"/movies"},{default:D(()=>l[24]||(l[24]=[N(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},ya={class:"d-flex justify-content-end"},$a=["disabled"],wa={class:"input-group"},ha={class:"row row-cols-1 row-cols-sm-2 mt-3"},_a={class:"col text-center mb-2"},ka=["src"],Sa={class:"col"},Ta={class:"form-floating mb-2"},Ma={key:0,class:"d-block invalid-feedback"},Ca={class:"form-floating mb-2"},Ia={class:"row row-cols-sm-2"},xa={class:"col"},Pa={class:"form-floating mb-2"},Va={class:"col"},Ua={class:"form-floating mb-2"},Oa={class:"row row-cols-sm-2"},Aa={class:"col"},Da={class:"form-floating mb-2"},Ea={class:"col"},Ha={class:"form-floating mb-2"},La={class:"col"},Ba={class:"form-floating mb-2"},qa={class:"col"},Na={class:"form-floating mb-2"},We="YYYY-MM-DD HH:mm",Ra={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"ARC AIO",pageTitle:"Add User"}),B=i,b=S.moment().local();b.format(We),b.add(24,"hours").format(We);const M=re("a22de760-358d-4a0e-83ad-2624a5c11f73"),h=fe({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),W={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},K=$e(W,h);ie(async()=>{});const r=async()=>{const U=h;if(!_.value)try{_.value=!0,U.item=null;const l=`/api/v1/users/get-from-entra-id/${M.value}`;await z.get(l).then(E=>{U.item=E.data})}catch(l){T.value=S.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{const U=h;if(_.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="",await z.post(`/api/v1/users/add-from-entra-id/${U.item.userId}`).then(E=>{L.success("Add User","User added",{onClose:async()=>{const a=`${B.urlView}/${E.data}`;await Y.push(a)}})})}catch(E){T.value=S.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{_.value=!1}};return(U,l)=>{const E=X("router-link"),a=X("PageHeader"),A=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",ya,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:l[0]||(l[0]=f=>c()),class:"btn btn-primary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$a),H(E,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(A,{errorMessage:o(T),vuelidate:o(K)},{default:D(()=>[e("div",null,[e("div",null,[e("div",wa,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>M.value=f),onKeyup:l[2]||(l[2]=Ue(f=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[R,M.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[3]||(l[3]=f=>r())},l[14]||(l[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",ha,[e("div",_a,[e("img",{src:h.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,ka)]),e("div",Sa,[e("div",Ta,[x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=f=>h.item.userId=f),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[R,h.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1)),o(K).item.userId.$error?(t(),s("div",Ma,[(t(!0),s(q,null,G(o(K).item.userId.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):I("",!0)]),e("div",Ca,[x(e("input",{"onUpdate:modelValue":l[5]||(l[5]=f=>h.item.displayName=f),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[R,h.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Ia,[e("div",xa,[e("div",Pa,[x(e("input",{"onUpdate:modelValue":l[6]||(l[6]=f=>h.item.givenName=f),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[R,h.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Va,[e("div",Ua,[x(e("input",{"onUpdate:modelValue":l[7]||(l[7]=f=>h.item.surname=f),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[R,h.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Oa,[e("div",Aa,[e("div",Da,[x(e("input",{"onUpdate:modelValue":l[8]||(l[8]=f=>h.item.email=f),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[R,h.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Ea,[e("div",Ha,[x(e("input",{"onUpdate:modelValue":l[9]||(l[9]=f=>h.item.mobilePhone=f),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[R,h.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",La,[e("div",Ba,[x(e("input",{"onUpdate:modelValue":l[10]||(l[10]=f=>h.item.principalName=f),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[R,h.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",qa,[e("div",Na,[x(e("input",{"onUpdate:modelValue":l[11]||(l[11]=f=>h.item.jobTitle=f),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[R,h.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Ae(i){if(!i.cacheKey)throw Error("Cache Key required.");if(!i.baseUrl)throw Error("Base Url required.");const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,closeWithReturnUrl:j,generateReturnUrl:B,security:b}=pe({appTitle:i.appTitle,pageTitle:i.pageTitle}),M=JSON.parse(JSON.stringify(i.filter));M.pageIndex=M.pageIndex||1,M.pageSize=M.pageSize||15,M.sortField=M.sortField||"",M.sortOrder=M.sortOrder||1,M.updateUrl=M.updateUrl||!1,M.items=M.items||[],M.query=M.query||{},M.query.criteria=M.query.criteria||"";const h=re(M),W=()=>{var n;if(_.value){console.log("Paginated search is currently busy.");return}const a=JSON.parse(localStorage.getItem(i.cacheKey))||{},A=new URLSearchParams(window.location.search),f=h.value;f.query.criteria=A.get("c")||a.criteria||f.query.criteria||"",f.pageIndex=parseInt(A.get("p"),10)||a.pageIndex||f.pageIndex||1,f.pageSize=parseInt(A.get("s"),10)||a.pageSize||f.pageSize||5,f.sortField=A.get("sf")||a.sortField||f.sortField||"",f.sortOrder=parseInt(A.get("so"),10)||a.sortOrder||f.sortOrder||1,f.visible=a.visible||f.visible,(n=i.initializeFilter)==null||n.call(i,h,i.cacheKey)},K=()=>{if(i.getQuery)return i.getQuery(h.value);{const a=h.value;return["?c=",encodeURIComponent(a.query.criteria),"&p=",a.pageIndex,"&s=",a.pageSize,"&sf=",a.sortField,"&so=",a.sortOrder].join("")}},r=()=>{if(i.saveQuery)i.saveQuery(h.value,i.cacheKey);else{const a=h.value;localStorage.setItem(i.cacheKey,JSON.stringify({criteria:a.query.criteria,pageIndex:a.pageIndex,pageSize:a.pageSize,sortField:a.sortField,sortOrder:a.sortOrder,visible:a.visible}))}};return{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,closeWithReturnUrl:j,generateReturnUrl:B,security:b,filter:h,initializeFilter:W,getQuery:K,saveQuery:r,search:async a=>{var f;let A=h.value;if(_.value){console.log("Paginated search is currently busy.");return}a>0&&(A.pageIndex=a);try{_.value=!0,T.value="";const n=K();A.selected=null,await z(`${i.baseUrl}/${n}`).then(async p=>{var y;Array.isArray(p.data)?A.items=p.data:A=Object.assign(A,p.data);let m=location.pathname;m.endsWith("/")?m+=n:m+="/"+n,A.updateUrl&&window.history.replaceState(n,`${d}-search`,m),A.items.forEach(w=>{w.expand=!1}),r(),(y=i.successAction)==null||y.call(i,h.value)})}catch(n){if(localStorage.removeItem(i.cacheKey),i.failAction)i.failAction(n);else{const p=S.getErrorMessageAsHtml(n);T.value=p,L.error("Error Occured",p)}}finally{_.value=!1,(f=i.finalAction)==null||f.call(i)}},getRowNumber:a=>{const A=h.value;return(A.pageIndex-1)*A.pageSize+(a+1)},setSelected:a=>{const A=h.value;A.selected&&a&&A.selected===a?A.selected=null:(A.selected&&(A.selected.expand=!1),A.selected=a,A.selected.expand=!0)},isSelected:a=>{const A=h.value;return a===null||A.selected===null?!1:a===A.selected}}}const za={class:"d-flex justify-content-end"},Fa={key:0},ja={class:"ms-1"},Ga={class:"input-group"},Ya={class:"table-responsive"},Wa={class:"table table-hover mb-0"},Ka=["textContent"],Ja=["src"],Qa="/api/v1/users/search",Xa={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,security:b,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:r,getRowNumber:c,setSelected:U,isSelected:l}=Ae({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${$==null?void 0:$.userId}/users/search`,baseUrl:Qa,filter:{updateUrl:!0}});return ie(async()=>{h(),await r()}),(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("m-pagination"),p=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-users",pageTitle:o(g)},{default:D(()=>[e("div",za,[o(b).isAdministrator?(t(),s("div",Fa,[H(A,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):I("",!0),e("div",ja,[e("div",Ga,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(r)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(p,{errorMessage:o(z)},{default:D(()=>[e("div",Ya,[e("table",Wa,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(M).items,(m,y)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:v(o(c)(y)),class:"text-center"},null,8,Ka),e("td",null,[m.photoBase64?(t(),s("img",{key:0,src:m.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ja)):I("",!0)]),e("td",null,[H(A,{to:`${i.urlView}/${m.userId}`,class:"d-inline-block text-truncate"},{default:D(()=>[N(v(m.displayName),1)]),_:2},1032,["to"])]),e("td",null,v(m.email),1),e("td",null,v(m.jobTitle),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),H(n,{filter:o(M),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Za={class:"d-flex flex-row justify-content-end"},el={key:0},tl={class:"row row-cols-1 row-cols-sm-2 mt-3"},sl={class:"col text-center mb-2"},ol=["src"],al={class:"col"},ll={class:"form-floating mb-2"},nl={class:"form-floating mb-2"},rl={class:"row row-cols-sm-2"},il={class:"col"},dl={class:"form-floating mb-2"},ul={class:"col"},cl={class:"form-floating mb-2"},ml={class:"row row-cols-sm-2"},fl={class:"col"},pl={class:"form-floating mb-2"},vl={class:"col"},gl={class:"form-floating mb-2"},bl={class:"col"},yl={class:"form-floating mb-2"},$l={class:"col"},wl={class:"form-floating mb-2"},hl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"ARC CMS",pageTitle:"View User"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null});ie(async()=>{await c()});const c=async()=>{const E=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const a=`/api/v1/users/get-from-db/${d.id}/`;await Q.get(a).then(A=>{E.item=A.data})}catch(a){S.value=j.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}},U=async()=>{await c()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/users/${d.id}/`).then(a=>{B.warning("Delete User","User was deleted.",{async onClose(){await L.push(d.urlMain)}})})}catch(a){S.value=j.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}}};return(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-user",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",Za,[o(W).isAdministrator?(t(),s(q,{key:0},[H(A,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:D(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=p=>l()),class:"ms-1 btn btn-warning"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):I("",!0),e("button",{onClick:a[1]||(a[1]=p=>U()),class:"ms-2 btn btn-secondary"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=p=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(n,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",el,[e("div",null,[e("div",tl,[e("div",sl,[e("img",{src:r.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,ol)]),e("div",al,[e("div",ll,[x(e("input",{"onUpdate:modelValue":a[3]||(a[3]=p=>r.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[R,r.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",nl,[x(e("input",{"onUpdate:modelValue":a[4]||(a[4]=p=>r.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[R,r.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",rl,[e("div",il,[e("div",dl,[x(e("input",{"onUpdate:modelValue":a[5]||(a[5]=p=>r.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[R,r.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",ul,[e("div",cl,[x(e("input",{"onUpdate:modelValue":a[6]||(a[6]=p=>r.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[R,r.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",ml,[e("div",fl,[e("div",pl,[x(e("input",{"onUpdate:modelValue":a[7]||(a[7]=p=>r.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[R,r.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",vl,[e("div",gl,[x(e("input",{"onUpdate:modelValue":a[8]||(a[8]=p=>r.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[R,r.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",bl,[e("div",yl,[x(e("input",{"onUpdate:modelValue":a[9]||(a[9]=p=>r.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[R,r.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",$l,[e("div",wl,[x(e("input",{"onUpdate:modelValue":a[10]||(a[10]=p=>r.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[R,r.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):I("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},_l={class:"d-flex justify-content-end"},kl=["disabled"],Sl={class:"row row-cols-1 row-cols-sm-2"},Tl={class:"col"},Ml={class:"form-floating mb-2"},Cl={key:0,class:"d-block invalid-feedback"},Il={class:"col"},xl={class:"form-floating"},Pl={class:"col"},Vl={class:"form-floating mb-2"},Ul={class:""},Ol={class:"col"},Al={class:"form-floating mb-2"},Dl={key:0,class:"d-block invalid-feedback"},El={class:"col"},Hl={class:"form-floating mb-2"},Ll={key:0,class:"d-block invalid-feedback"},Bl={class:""},ql={class:"col"},Nl={class:"form-floating mb-2"},Rl={key:0,class:"d-block invalid-feedback"},zl={class:"col"},Fl={class:"input-group mb-2"},jl={class:"form-floating"},Gl=["href"],Yl={key:0,class:"d-block invalid-feedback"},Wl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),B=i,b=fe({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),M={item:{title:{title:ee.withMessage("title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ee.withMessage("durationInMillis is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:ee.withMessage("rawBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},rawPath:{title:ee.withMessage("rawPath is required.",te),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:ee.withMessage("hlsBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},hlsPath:{title:ee.withMessage("hlsPath is required.",te),$autoDirty:!0,$lazy:!0}}},h=$e(M,b),W=Oe(()=>{const c=S.moment;if(b.durationTime&&b.durationTime!=="00:00:00"&&K(b.durationTime)){const U=c().startOf("day"),l=U.format("YYYY-MM-DD ")+b.durationTime,a=c(l).subtract(U);return b.item.durationInMillis=a.valueOf(),b.item.durationInMillis}return 0}),K=c=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(c);ie(async()=>{});const r=async()=>{const c=b;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const l=S.clone(c.item);l.durationInMillis=W.value;debugger;await z.post("/api/v1/videos/",l).then(E=>{L.success("Add Video","Video added",{onClose:async()=>{const a=`${B.urlView}/${E.data}`;await Y.push(a)}})})}catch(l){T.value=S.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}};return(c,U)=>{const l=X("router-link"),E=X("PageHeader"),a=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(E,{"page-icon":"fas fa-fw fa-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",_l,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:U[0]||(U[0]=A=>r()),class:"btn btn-primary"},U[8]||(U[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,kl),H(l,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>U[9]||(U[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(a,{errorMessage:o(T),vuelidate:o(h)},{default:D(()=>[e("div",null,[e("div",Sl,[e("div",Tl,[e("div",Ml,[x(e("input",{"onUpdate:modelValue":U[1]||(U[1]=A=>b.item.title=A),id:"name",class:"form-control",placeholder:"Title"},null,512),[[R,b.item.title]]),U[10]||(U[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Cl,[(t(!0),s(q,null,G(o(h).item.title.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):I("",!0)])]),e("div",Il,[e("div",xl,[x(e("input",{"onUpdate:modelValue":U[2]||(U[2]=A=>b.durationTime=A),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[R,b.durationTime]]),U[11]||(U[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Pl,[e("div",Vl,[x(e("textarea",{"onUpdate:modelValue":U[3]||(U[3]=A=>b.item.description=A),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[R,b.item.description]]),U[12]||(U[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Ul,[U[15]||(U[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Ol,[e("div",Al,[x(e("input",{"onUpdate:modelValue":U[4]||(U[4]=A=>b.item.rawBaseUrl=A),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[R,b.item.rawBaseUrl]]),U[13]||(U[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.rawBaseUrl.$error?(t(),s("div",Dl,[(t(!0),s(q,null,G(o(h).item.rawBaseUrl.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):I("",!0)])]),e("div",El,[e("div",Hl,[x(e("input",{"onUpdate:modelValue":U[5]||(U[5]=A=>b.item.rawPath=A),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[R,b.item.rawPath]]),U[14]||(U[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(h).item.rawPath.$error?(t(),s("div",Ll,[(t(!0),s(q,null,G(o(h).item.rawPath.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):I("",!0)])]),e("div",Bl,[U[19]||(U[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",ql,[e("div",Nl,[x(e("input",{"onUpdate:modelValue":U[6]||(U[6]=A=>b.item.hlsBaseUrl=A),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[R,b.item.hlsBaseUrl]]),U[16]||(U[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.hlsBaseUrl.$error?(t(),s("div",Rl,[(t(!0),s(q,null,G(o(h).item.hlsBaseUrl.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):I("",!0)])]),e("div",zl,[e("div",Fl,[e("div",jl,[x(e("input",{"onUpdate:modelValue":U[7]||(U[7]=A=>b.item.hlsPath=A),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[R,b.item.hlsPath]]),U[17]||(U[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),b.item.hlsBaseUrl&&b.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(b.item.hlsBaseUrl+b.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},U[18]||(U[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),N("View ")],-1)]),8,Gl)):I("",!0)]),o(h).item.hlsPath.$error?(t(),s("div",Yl,[(t(!0),s(q,null,G(o(h).item.hlsPath.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):I("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Kl={key:0,class:"d-flex justify-content-end"},Jl=["disabled"],Ql={key:0},Xl={class:"row row-cols-1 row-cols-sm-2"},Zl={class:"col"},en={class:"form-floating mb-2"},tn={key:0,class:"d-block invalid-feedback"},sn={class:"col"},on={class:"form-floating mb-2"},an={key:0,class:"d-block invalid-feedback"},ln={class:"row row-cols-sm-2"},nn={class:"col"},rn={class:"form-floating mb-2"},dn={class:"form-floating mb-2"},un={key:0,class:"d-block invalid-feedback"},cn={class:"form-floating mb-2"},mn={key:0,class:"d-block invalid-feedback"},fn={class:"col"},pn={class:"form-floating mb-2"},Le={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),B=i,b=fe({editorElementId:"editor",htmlContent:"",item:null}),M={item:{title:{required:ee.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},eidr:{required:ee.withMessage("eidr is required.",te),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ee.withMessage("eidrPrefix is required.",te),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ee.withMessage("Content is required.",te),$autoDirty:!0,$lazy:!0}},h=$e(M,b);ie(async()=>{await r()});const W=()=>{const U=b;var l=document.getElementById(U.editorElementId);l.innerHTML=U.htmlContent},K=U=>{const l=b;l.htmlContent=U.target.innerHTML;var E=document.getElementById(l.editorElementId);E.value=l.htmlContent},r=async()=>{const U=b;if(!_.value)try{_.value=!0,b.item=null,await z.get(`/api/v1/movies/${B.id}`).then(l=>{U.item=l.data,U.htmlContent=U.item.description}),W()}catch(l){T.value=S.getErrorMessageAsHtml(l)}finally{_.value=!1}},c=async()=>{const U=b;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const E=S.clone(U.item);E.description=U.htmlContent,await z.put("/api/v1/movies",E).then(a=>{L.success("Edit Movie","Movie edited",{onClose:async()=>{const A=`${B.urlView}/${B.id}`;await Y.push(A)}})})}catch(E){T.value=S.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{_.value=!1}};return(U,l)=>{const E=X("router-link"),a=X("PageHeader"),A=X("PageBody");return t(),s("div",null,[H(a,{"page-icon":"fas fa-fw fa-film",pageTitle:o($),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[b.item?(t(),s("div",Kl,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:l[0]||(l[0]=f=>c()),class:"btn btn-primary"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Jl),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),H(E,{to:`${B.urlView}/${B.id}`,class:"ms-1 btn btn-secondary"},{default:D(()=>l[9]||(l[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):I("",!0)]),_:1},8,["pageTitle"]),H(A,{errorMessage:o(T),vuelidate:o(h)},{default:D(()=>[b.item?(t(),s("div",Ql,[e("div",Xl,[e("div",Zl,[e("div",en,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>b.item.eidrPrefix=f),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[R,b.item.eidrPrefix]]),l[10]||(l[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(h).item.eidrPrefix.$error?(t(),s("div",tn,[(t(!0),s(q,null,G(o(h).item.eidrPrefix.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):I("",!0)])]),e("div",sn,[e("div",on,[x(e("input",{"onUpdate:modelValue":l[2]||(l[2]=f=>b.item.eidr=f),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[R,b.item.eidr]]),l[11]||(l[11]=e("label",{for:"title"},"Eidr",-1)),o(h).item.eidr.$error?(t(),s("div",an,[(t(!0),s(q,null,G(o(h).item.eidr.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):I("",!0)])])]),e("div",ln,[e("div",nn,[e("div",rn,[x(e("input",{"onUpdate:modelValue":l[3]||(l[3]=f=>b.item.releaseYear=f),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[R,b.item.releaseYear]]),l[12]||(l[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",dn,[x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=f=>b.item.title=f),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[R,b.item.title]]),l[13]||(l[13]=e("label",{for:"title"},"Title",-1)),o(h).item.title.$error?(t(),s("div",un,[(t(!0),s(q,null,G(o(h).item.title.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):I("",!0)])])]),e("div",null,[e("div",cn,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:l[5]||(l[5]=f=>K(f))},null,32),l[14]||(l[14]=e("label",{for:"editor"},"Content",-1)),o(h).htmlContent.$error?(t(),s("div",mn,[(t(!0),s(q,null,G(o(h).htmlContent.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):I("",!0)])]),e("div",fn,[e("div",pn,[x(e("textarea",{"onUpdate:modelValue":l[6]||(l[6]=f=>b.item.metadata=f),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[R,b.item.metadata]]),l[15]||(l[15]=e("label",{for:"title"},"Metadata",-1))])])])):I("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},vn={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function gn(i,d,$,_,g,F){const T=X("Page");return t(),de(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const bn=Se(vn,[["render",gn]]),yn={class:"d-flex justify-content-end"},$n={class:"ms-1"},wn={class:"input-group"},hn={class:"table-responsive"},_n={class:"table table-hover mb-0"},kn=["textContent"],Sn={class:"text-end ms-sm-5 pe-sm-5"},Tn="/api/v1/videos/search",Mn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,security:b,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:r,getRowNumber:c,setSelected:U,isSelected:l}=Ae({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${$==null?void 0:$.userId}/videos/search`,baseUrl:Tn,filter:{updateUrl:!0}});return ie(async()=>{h(),await r()}),(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("m-pagination"),p=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(g)},{default:D(()=>[e("div",yn,[H(A,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",$n,[e("div",wn,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(r)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(p,{errorMessage:o(z)},{default:D(()=>[e("div",hn,[e("table",_n,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(M).items,(m,y)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:v(o(c)(y)),class:"text-center"},null,8,kn),e("td",null,[H(A,{to:`${i.urlView}/${m.videoId}`,class:"d-inline-block text-truncate"},{default:D(()=>[N(v(m.title),1)]),_:2},1032,["to"])]),e("td",null,v(m.description),1),e("td",Sn,[e("div",null,v(o(Q).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),H(n,{filter:o(M),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Cn={class:"d-flex flex-row justify-content-end"},In={key:0},xn={class:"row row-cols-sm-2"},Pn={class:"col"},Vn={class:"form-floating mb-2"},Un={class:"col"},On={class:"form-floating mb-2"},An={class:"col"},Dn={class:"form-floating mb-2"},En={class:"row row-cols-sm-2"},Hn={class:"col"},Ln={class:"form-floating mb-2"},Bn={class:"col"},qn={class:"form-floating mb-2"},Nn={class:"row row-cols-sm-2"},Rn={class:"col"},zn={class:"form-floating mb-2"},Fn={class:"col"},jn={class:"form-floating mb-2"},Gn={class:"row row-cols-sm-2"},Yn={class:"col"},Wn={class:"form-floating mb-2"},Kn={class:"col"},Jn={class:"form-floating mb-2"},Qn={class:"table-responsive"},Xn={class:"table table-hover mb-0 caption-top"},Zn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null});ie(async()=>{await c()});const c=async()=>{const E=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const a=`/api/v1/videos/${d.id}/`;await Q.get(a).then(A=>{E.item=A.data,E.item.duration=j.moment.utc(E.item.durationInMillis).format("HH:mm:ss")})}catch(a){S.value=j.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}},U=async()=>{await c()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/users/${d.id}/`).then(a=>{B.warning("Delete User","User was deleted.",{async onClose(){await L.push(d.urlMain)}})})}catch(a){S.value=j.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}}};return(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",Cn,[o(W).isAdministrator?(t(),s(q,{key:0},[H(A,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:D(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=p=>l()),class:"ms-1 btn btn-warning"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):I("",!0),e("button",{onClick:a[1]||(a[1]=p=>U()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=p=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(n,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",In,[e("div",null,[e("div",xn,[e("div",Pn,[e("div",Vn,[x(e("input",{"onUpdate:modelValue":a[3]||(a[3]=p=>r.item.title=p),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[R,r.item.title]]),a[16]||(a[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",Un,[e("div",On,[x(e("input",{"onUpdate:modelValue":a[4]||(a[4]=p=>r.item.duration=p),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[R,r.item.duration]]),a[17]||(a[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",An,[e("div",Dn,[x(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=p=>r.item.description=p),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[R,r.item.description]]),a[18]||(a[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",En,[e("div",Hn,[e("div",Ln,[x(e("input",{"onUpdate:modelValue":a[6]||(a[6]=p=>r.item.rawBaseUrl=p),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[R,r.item.rawBaseUrl]]),a[19]||(a[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Bn,[e("div",qn,[x(e("input",{"onUpdate:modelValue":a[7]||(a[7]=p=>r.item.rawPath=p),class:"form-control",id:"rawPath",disabled:""},null,512),[[R,r.item.rawPath]]),a[20]||(a[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Nn,[e("div",Rn,[e("div",zn,[x(e("input",{"onUpdate:modelValue":a[8]||(a[8]=p=>r.item.hlsBaseUrl=p),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[R,r.item.hlsBaseUrl]]),a[21]||(a[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Fn,[e("div",jn,[x(e("input",{"onUpdate:modelValue":a[9]||(a[9]=p=>r.item.hlsPath=p),class:"form-control",id:"hlsPath",disabled:""},null,512),[[R,r.item.hlsPath]]),a[22]||(a[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",Gn,[e("div",Yn,[e("div",Wn,[x(e("input",{"onUpdate:modelValue":a[10]||(a[10]=p=>r.item.dashBaseUrl=p),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[R,r.item.dashBaseUrl]]),a[23]||(a[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Kn,[e("div",Jn,[x(e("input",{"onUpdate:modelValue":a[11]||(a[11]=p=>r.item.dashPath=p),class:"form-control",id:"dashPath",disabled:""},null,512),[[R,r.item.dashPath]]),a[24]||(a[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Qn,[e("table",Xn,[a[25]||(a[25]=e("caption",null,"VOD Sources",-1)),a[26]||(a[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.vodSources,(p,m)=>(t(),s("tr",{key:p.vodSourceId},[e("td",null,v(m+1),1),e("td",null,[H(A,{to:`${d.urlViewVodSource}/${encodeURIComponent(p.vodSourceId)}/${o(h)()}`},{default:D(()=>[N(v(p.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[_e,r.item.vodSources.length>0]])])])])):I("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},er={class:"d-flex justify-content-end"},tr=["disabled"],sr={class:"form-floating mb-2"},or={key:0,class:"d-block invalid-feedback"},ar={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),B=i,b=fe({lookups:{},item:{name:null}}),M={item:{name:{required:ee.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0}}},h=$e(M,b);ie(async()=>{});const W=async()=>{const K=b;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const c=S.clone(K.item);await z.post("/api/v1/sourcegroups/",c).then(U=>{L.success("Add Source Group","Source group added.",{onClose:async()=>{const l=`${B.urlView}/${U.data}`;await Y.push(l)}})})}catch(c){T.value=S.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}};return(K,r)=>{const c=X("router-link"),U=X("PageHeader"),l=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(U,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",er,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:r[0]||(r[0]=E=>W()),class:"btn btn-primary"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,tr),H(c,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(l,{errorMessage:o(T),vuelidate:o(h)},{default:D(()=>[e("div",null,[e("div",sr,[x(e("input",{"onUpdate:modelValue":r[1]||(r[1]=E=>b.item.name=E),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[R,b.item.name]]),r[4]||(r[4]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",or,[(t(!0),s(q,null,G(o(h).item.name.$errors,E=>(t(),s("div",{key:E.$uid},v(E.$message),1))),128))])):I("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},lr={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function nr(i,d,$,_,g,F){const T=X("Page");return t(),de(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const rr=Se(lr,[["render",nr]]),ir={class:"d-flex justify-content-end"},dr={class:"ms-1"},ur={class:"input-group"},cr={class:"table-responsive"},mr={class:"table table-hover mb-0"},fr=["textContent"],pr={key:0,class:"fas fa-fw fa-check-circle text-success"},vr="/api/v1/sourcegroups/search",gr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,security:b,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:r,getRowNumber:c,setSelected:U,isSelected:l}=Ae({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${$==null?void 0:$.userId}/source-groups/search`,baseUrl:vr,filter:{updateUrl:!0}});return ie(async()=>{h(),await r()}),(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("m-pagination"),p=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(g)},{default:D(()=>[e("div",ir,[H(A,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",dr,[e("div",ur,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(r)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(p,{errorMessage:o(z)},{default:D(()=>[e("div",cr,[e("table",mr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(M).items,(m,y)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:v(o(c)(y)),class:"text-center"},null,8,fr),e("td",null,[H(A,{to:`${i.urlView}/${m.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:D(()=>[m.arn?(t(),s("span",pr)):I("",!0),N(" "+v(m.name),1)]),_:2},1032,["to"])]),e("td",null,v(m.channelOutputs),1),e("td",null,v(m.packageConfigurations),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),H(n,{filter:o(M),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},br={class:"d-flex flex-row justify-content-end"},yr={key:0},$r={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},wr={class:"nav-item",role:"presentation"},hr={class:"nav-item",role:"presentation"},_r={class:"nav-item",role:"presentation"},kr={class:"tab-content",id:"myTabContent"},Sr={class:"mt-2"},Tr={class:"col"},Mr={class:"form-floating mb-2"},Cr={class:"mt-2"},Ir={class:"table-responsive border"},xr={class:"table table-hover mb-0"},Pr={class:"mt-2"},Vr={class:"table-responsive border"},Ur={class:"table table-hover mb-0"},Or={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null}),c=re();ie(async()=>{await a(),c.value=j.getPageTab("sourceGroup")||"information-tab"});const U=n=>{j.setPageTab("sourceGroup",n),c.value=n},l=n=>n!==c.value?"":"active",E=n=>n!==c.value?"":"show active",a=async()=>{const n=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const p=`/api/v1/sourcegroups/${d.id}/`;await Q.get(p).then(m=>{n.item=m.data})}catch(p){S.value=j.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{g.value=!1}},A=async()=>{if(!g.value)try{g.value=!0,S.value="";const n=`/api/v1/sourcegroups/${d.id}/`;await Q.delete(n).then(p=>{B.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const m=`${d.urlMain}/`;await L.push(m)}})})}catch(n){S.value=j.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{g.value=!1}},f=async()=>{await a()};return(n,p)=>{const m=X("PageHeader"),y=X("router-link"),w=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(m,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",br,[e("button",{onClick:p[0]||(p[0]=C=>A()),class:"ms-1 btn btn-warning"},p[7]||(p[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:p[1]||(p[1]=C=>f()),class:"ms-2 btn btn-secondary"},p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:p[2]||(p[2]=C=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},p[9]||(p[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(w,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",yr,[e("div",null,[e("ul",$r,[e("li",wr,[e("button",{onClick:p[3]||(p[3]=C=>U("information-tab")),class:le([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",hr,[e("button",{onClick:p[4]||(p[4]=C=>U("channelOutputs-tab")),class:le([l("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",_r,[e("button",{onClick:p[5]||(p[5]=C=>U("packageConfigurations-tab")),class:le([l("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",kr,[e("div",{class:le([E("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Sr,[e("div",Tr,[e("div",Mr,[x(e("input",{"onUpdate:modelValue":p[6]||(p[6]=C=>r.item.name=C),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.name]]),p[10]||(p[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:le([E("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Cr,[e("div",Ir,[e("table",xr,[p[11]||(p[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.channelOutputs,(C,P)=>(t(),s("tr",{key:C.channelOutputId},[e("td",null,v(P+1),1),e("td",null,[H(y,{to:`${i.urlViewChannel}/${C.channelId}/${o(h)()}`},{default:D(()=>[N(v(C.manifestName),1)]),_:2},1032,["to"])]),e("td",null,v(C.outputType),1)]))),128))]),_:1},512),[[_e,r.item.channelOutputs.length>0]])])])])],2),e("div",{class:le([E("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Pr,[e("div",Vr,[e("table",Ur,[p[12]||(p[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.packageConfigurations,(C,P)=>(t(),s("tr",{key:C.packageConfigurationId},[e("td",null,v(P+1),1),e("td",null,[H(y,{to:`${i.urlViewVodSource}/${C.vodSourceId}/${o(h)()}`},{default:D(()=>[N(v(C.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,v(C.path),1),e("td",null,v(C.type),1)]))),128))]),_:1},512),[[_e,r.item.packageConfigurations.length>0]])])])])],2)])])])):I("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Ar={class:"d-flex justify-content-end"},Dr=["disabled"],Er={class:"form-floating mb-2"},Hr={key:0,class:"d-block invalid-feedback"},Lr={class:"form-floating mb-2"},Br={key:0,class:"d-block invalid-feedback"},qr={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),B=i,b=fe({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),M={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:ee.withMessage("HTTP Configuration Base Url is required.",te),$autoDirty:!0,$lazy:!0}}},h=$e(M,b);ie(async()=>{});const W=async()=>{const K=b;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const c=S.clone(K.item);await z.post("/api/v1/sourcelocations/",c).then(U=>{L.success("Add Source Location","Source location added.",{onClose:async()=>{const l=`${B.urlView}/${U.data}`;await Y.push(l)}})})}catch(c){T.value=S.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}};return(K,r)=>{const c=X("router-link"),U=X("PageHeader"),l=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(U,{"page-icon":"fas fa-fw fa-building",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",Ar,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:r[0]||(r[0]=E=>W()),class:"btn btn-primary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Dr),H(c,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(l,{errorMessage:o(T),vuelidate:o(h)},{default:D(()=>[e("div",null,[e("div",Er,[x(e("input",{"onUpdate:modelValue":r[1]||(r[1]=E=>b.item.name=E),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[R,b.item.name]]),r[5]||(r[5]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Hr,[(t(!0),s(q,null,G(o(h).item.name.$errors,E=>(t(),s("div",{key:E.$uid},v(E.$message),1))),128))])):I("",!0)]),e("div",Lr,[x(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=E=>b.item.httpConfigurationBaseUrl=E),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[R,b.item.httpConfigurationBaseUrl]]),r[6]||(r[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(h).item.httpConfigurationBaseUrl.$error?(t(),s("div",Br,[(t(!0),s(q,null,G(o(h).item.httpConfigurationBaseUrl.$errors,E=>(t(),s("div",{key:E.$uid},v(E.$message),1))),128))])):I("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Nr={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Rr(i,d,$,_,g,F){const T=X("Page");return t(),de(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const zr=Se(Nr,[["render",Rr]]),Fr={class:"d-flex justify-content-end"},jr={class:"ms-1"},Gr={class:"input-group"},Yr={class:"table-responsive"},Wr={class:"table table-hover mb-0"},Kr=["textContent"],Jr={key:0,class:"fas fa-fw fa-check-circle text-success"},Qr="/api/v1/sourcelocations/search",Xr={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,security:b,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:r,getRowNumber:c,setSelected:U,isSelected:l}=Ae({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${$==null?void 0:$.userId}/source-locations/search`,baseUrl:Qr,filter:{updateUrl:!0}});return ie(async()=>{h(),await r()}),(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("m-pagination"),p=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-building",pageTitle:o(g)},{default:D(()=>[e("div",Fr,[H(A,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",jr,[e("div",Gr,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(r)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(p,{errorMessage:o(z)},{default:D(()=>[e("div",Yr,[e("table",Wr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(M).items,(m,y)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:v(o(c)(y)),class:"text-center"},null,8,Kr),e("td",null,[H(A,{to:`${i.urlView}/${m.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:D(()=>[m.arn?(t(),s("span",Jr)):I("",!0),N(" "+v(m.name),1)]),_:2},1032,["to"])]),e("td",null,v(m.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),H(n,{filter:o(M),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Zr={class:"d-flex flex-row justify-content-end"},ei={key:0},ti={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},si={class:"nav-item",role:"presentation"},oi={class:"nav-item",role:"presentation"},ai={class:"nav-item",role:"presentation"},li={class:"tab-content",id:"myTabContent"},ni={class:"mt-2"},ri={class:"col"},ii={class:"form-floating mb-2"},di={class:"col"},ui={class:"form-floating mb-2"},ci={class:"mt-2"},mi={class:"table-responsive border"},fi={class:"table table-hover mb-0"},pi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},vi={class:"mt-2"},gi={class:"table-responsive border"},bi={class:"table table-hover mb-0"},yi={key:0,class:"fas fa-fw fa-check-circle text-success"},$i={class:"badge bg-info"},wi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null}),c=re();ie(async()=>{await a(),c.value=j.getPageTab("sourceLocation")||"information-tab"});const U=p=>{j.setPageTab("sourceLocation",p),c.value=p},l=p=>p!==c.value?"":"active",E=p=>p!==c.value?"":"show active",a=async()=>{const p=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const m=`/api/v1/sourcelocations/${d.id}/`;await Q.get(m).then(y=>{p.item=y.data})}catch(m){S.value=j.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{g.value=!1}},A=async()=>{await a()},f=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!g.value){S.value=null;try{g.value=!0,await Q.post(`/api/v1/sourcelocations/${d.id}/publish/`).then(m=>{B.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),g.value=!1,await A()}catch(m){S.value=j.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{g.value=!1}}},n=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/sourcelocations/${d.id}/unpublish/`).then(m=>{B.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),g.value=!1,await A()}catch(m){S.value=j.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{g.value=!1}}};return(p,m)=>{const y=X("PageHeader"),w=X("router-link"),C=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",Zr,[r.item?(t(),s(q,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=P=>n()),class:"ms-1 btn btn-warning"},m[9]||(m[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=P=>f()),class:"ms-1 btn btn-primary"},m[10]||(m[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):I("",!0),e("button",{onClick:m[2]||(m[2]=P=>A()),class:"ms-2 btn btn-secondary"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=P=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(C,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",ei,[e("div",null,[e("ul",ti,[e("li",si,[e("button",{onClick:m[4]||(m[4]=P=>U("information-tab")),class:le([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",oi,[e("button",{onClick:m[5]||(m[5]=P=>U("vodSources-tab")),class:le([l("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",ai,[e("button",{onClick:m[6]||(m[6]=P=>U("programs-tab")),class:le([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",li,[e("div",{class:le([E("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ni,[e("div",ri,[e("div",ii,[x(e("input",{"onUpdate:modelValue":m[7]||(m[7]=P=>r.item.name=P),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.name]]),m[13]||(m[13]=e("label",{for:"name"},"Name",-1))])]),e("div",di,[e("div",ui,[x(e("input",{"onUpdate:modelValue":m[8]||(m[8]=P=>r.item.httpConfigurationBaseUrl=P),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[R,r.item.httpConfigurationBaseUrl]]),m[14]||(m[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:le([E("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",ci,[e("div",mi,[e("table",fi,[m[15]||(m[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.vodSources,(P,oe)=>(t(),s("tr",{key:P.vodSourceId},[e("td",null,v(oe+1),1),e("td",null,[P.arn?(t(),s("span",pi)):I("",!0),H(w,{to:`${d.urlViewVodSource}/${encodeURIComponent(P.vodSourceId)}/${o(h)()}`},{default:D(()=>[N(v(P.name),1)]),_:2},1032,["to"])]),e("td",null,[H(w,{to:`${d.urlViewVideo}/${encodeURIComponent(P.video.videoId)}/${o(h)()}`},{default:D(()=>[N(v(P.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,v(o(j).moment.utc(P.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[_e,r.item.vodSources.length>0]])])])])],2),e("div",{class:le([E("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",vi,[e("div",gi,[e("table",bi,[m[17]||(m[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.programs,(P,oe)=>(t(),s("tr",{key:P.programId},[e("td",null,v(oe+1),1),e("td",null,[H(w,{to:`${d.urlViewChannel}/${encodeURIComponent(P.channel.channelId)}/${o(h)()}`},{default:D(()=>[N(v(P.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[P.arn?(t(),s("span",yi)):I("",!0),N(" "+v(P.name)+" ",1),e("div",null," Start: "+v(o(j).moment.utc(P.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+v(o(j).moment.utc(P.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[N(v(o(j).moment(P.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",$i,v(o(j).moment(P.dateScheduledStart).fromNow()),1)])]),m[16]||(m[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[_e,r.item.programs.length>0]])])])])],2)])])])):I("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},hi={class:"d-flex justify-content-end"},_i=["disabled"],ki={class:"col"},Si={class:"form-floating mb-2"},Ti={key:0,class:"d-block invalid-feedback"},Mi={class:"row row-cols-1 row-cols-sm-2"},Ci={class:"col"},Ii={class:"form-floating mb-2"},xi=["value"],Pi={key:0,class:"d-block invalid-feedback"},Vi={class:"col"},Ui={class:"form-floating mb-2"},Oi=["disabled"],Ai=["value"],Di={key:0,class:"d-block invalid-feedback"},Ei={key:0},Hi={class:"d-flex flex-row justify-content-between"},Li={key:0,class:"d-inline invalid-feedback"},Bi={class:"table-responsive border mt-1"},qi={class:"table mb-0 caption-top"},Ni={class:"input-group mb-1"},Ri=["onUpdate:modelValue"],zi=["onUpdate:modelValue"],Fi=["value"],ji=["onUpdate:modelValue"],Gi=["onClick"],Yi={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),B=i,b=fe({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),M=(A,f,n)=>A.length>0,h={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:ee.withMessage("Video is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("Source Locaton is required.",te),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ee.withMessage("PackageConfigurations is required.",M),$each:ee.forEach({path:{required:ee.withMessage("Path is required.",te)},sourceGroupId:{required:ee.withMessage("Source Group is required.",te)}}),$autoDirty:!0,$lazy:!0}}},W=$e(h,b);ie(async()=>{await K(),await r()});const K=async()=>{try{await z.get("/api/v1/sourcegroups/lookup/").then(f=>{b.lookups.sourceGroups=f.data})}catch(A){T.value=S.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},r=async()=>{try{if(await z.get("/api/v1/sourcelocations/lookup/").then(f=>{b.lookups.sourceLocations=f.data}),b.lookups.sourceLocations.length===1){const f=b.lookups.sourceLocations[0];b.selected.sourceLocation=f,await c()}}catch(A){T.value=S.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},c=async()=>{const A=b.selected.sourceLocation;b.item.sourceLocationId=A.id,await U(A.baseUrl)},U=async A=>{try{const f=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(A)}`;await z.get(f).then(n=>{b.lookups.videos=n.data,b.lookups.videos.length===1&&(b.item.videoId=b.lookups.videos[0].id)})}catch(f){T.value=S.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},l=async()=>{const A=b;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const n=S.clone(A.item);n.videoId=n.video.id,delete n.video,await z.post("/api/v1/vodSources/",n).then(p=>{debugger;L.success("Add VOD Source","VOD source added",{onClose:async()=>{const m=`${B.urlView}/${p.data}`;await Y.push(m)}})})}catch(n){T.value=S.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}},E=()=>{const A={path:"",sourceGroupId:null,type:"HLS"},f=b.item.video;f&&(A.path=f.hlsPath),b.item.packageConfigurations.push(A)},a=A=>{b.item.packageConfigurations.splice(A,1)};return(A,f)=>{const n=X("router-link"),p=X("PageHeader"),m=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(p,{"page-icon":"fas fa-fw fa-tag",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",hi,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:f[0]||(f[0]=y=>l()),class:"btn btn-primary"},f[6]||(f[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_i),H(n,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(m,{errorMessage:o(T),vuelidate:o(W)},{default:D(()=>[e("div",null,[e("div",ki,[e("div",Si,[x(e("input",{"onUpdate:modelValue":f[1]||(f[1]=y=>b.item.name=y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,b.item.name]]),f[8]||(f[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Ti,[(t(!0),s(q,null,G(o(W).item.name.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):I("",!0)])]),e("div",Mi,[e("div",Ci,[e("div",Ii,[x(e("select",{"onUpdate:modelValue":f[2]||(f[2]=y=>b.selected.sourceLocation=y),onChange:f[3]||(f[3]=y=>c()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,G(b.lookups.sourceLocations,y=>(t(),s("option",{value:y},v(y.name),9,xi))),256))],544),[[ge,b.selected.sourceLocation]]),f[9]||(f[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Pi,[(t(!0),s(q,null,G(o(W).item.sourceLocationId.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):I("",!0)])]),e("div",Vi,[e("div",Ui,[x(e("select",{"onUpdate:modelValue":f[4]||(f[4]=y=>b.item.video=y),onChange:f[5]||(f[5]=y=>b.item.videoId=b.item.video.id),class:"form-select",id:"videoId",disabled:b.item.packageConfigurations.length>0},[(t(!0),s(q,null,G(b.lookups.videos,y=>(t(),s("option",{value:y},v(y.name),9,Ai))),256))],40,Oi),[[ge,b.item.video]]),f[10]||(f[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",Di,[(t(!0),s(q,null,G(o(W).item.videoId.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):I("",!0)])])]),f[17]||(f[17]=e("hr",null,null,-1)),b.item.videoId?(t(),s("div",Ei,[e("div",Hi,[e("fieldset",null,[e("legend",null,[f[12]||(f[12]=N(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Li,f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):I("",!0)])]),e("button",{onClick:E,class:"btn btn-outline-primary"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),N("Package Configuration ")]))]),e("div",Bi,[e("table",qi,[f[16]||(f[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,G(b.item.packageConfigurations,(y,w)=>(t(),s("tr",null,[e("td",null,v(w+1),1),e("td",null,[e("div",Ni,[x(e("input",{"onUpdate:modelValue":C=>y.path=C,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Ri),[[R,y.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(q,{key:0},G(o(W).item.packageConfigurations.$each.$response.$errors[w].path,C=>(t(),s("div",{key:C,class:"d-block invalid-feedback"},v(C.$message),1))),128)):I("",!0)]),e("td",null,[e("div",null,[x(e("select",{"onUpdate:modelValue":C=>y.sourceGroupId=C,class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,G(b.lookups.sourceGroups,C=>(t(),s("option",{value:C.id},v(C.name),9,Fi))),256))],8,zi),[[ge,y.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(q,{key:0},G(o(W).item.packageConfigurations.$each.$response.$errors[w].path,C=>(t(),s("div",{key:C,class:"d-block invalid-feedback"},v(C.$message),1))),128)):I("",!0)])]),e("td",null,[x(e("select",{"onUpdate:modelValue":C=>y.type=C,class:"form-select",id:"type"},f[14]||(f[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,ji),[[ge,y.type]])]),e("td",null,[e("button",{onClick:C=>a(w),class:"btn btn-outline-warning"},f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gi)])]))),256))])])])])):I("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Wi={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ki(i,d,$,_,g,F){const T=X("Page");return t(),de(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const Ji=Se(Wi,[["render",Ki]]),Qi={class:"d-flex justify-content-end"},Xi={key:0},Zi={class:"ms-1"},ed={class:"input-group"},td={class:"table-responsive"},sd={class:"table table-hover mb-0"},od=["textContent"],ad={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ld={class:"small"},nd="/api/v1/vodsources/search",rd={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,closeWithReturnUrl:b,generateReturnUrl:M,security:h,filter:W,initializeFilter:K,getQuery:r,saveQuery:c,search:U,getRowNumber:l,setSelected:E,isSelected:a}=Ae({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${$==null?void 0:$.userId}/vod-sources/search`,baseUrl:nd,filter:{updateUrl:!0}});return ie(async()=>{K(),await U()}),(A,f)=>{const n=X("router-link"),p=X("PageHeader"),m=X("m-pagination"),y=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(p,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(g)},{default:D(()=>[e("div",Qi,[o(h).isAdministrator?(t(),s("div",Xi,[H(n,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):I("",!0),H(n,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>f[4]||(f[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zi,[e("div",ed,[x(e("input",{"onUpdate:modelValue":f[0]||(f[0]=w=>o(W).query.criteria=w),onKeyup:f[1]||(f[1]=Ue(w=>o(U)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:f[2]||(f[2]=w=>o(U)(1))},f[5]||(f[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(y,{errorMessage:o(z)},{default:D(()=>[e("div",td,[e("table",sd,[f[6]||(f[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(W).items,(w,C)=>(t(),s("tr",{key:w.movieId},[e("td",{textContent:v(o(l)(C)),class:"text-center"},null,8,od),e("td",null,[H(n,{to:`${i.urlView}/${w.vodSourceId}`,class:"d-inline-block text-truncate"},{default:D(()=>[w.arn?(t(),s("span",ad)):I("",!0),N(v(w.name),1)]),_:2},1032,["to"])]),e("td",null,[H(n,{to:`${i.urlViewVideo}/${encodeURIComponent(w.video.videoId)}/${o(M)()}`},{default:D(()=>[N(v(w.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",ld,"Duration: "+v(o(Q).moment.utc(w.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[_e,o(W).items.length>0]])])]),H(m,{filter:o(W),search:o(U),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},id=["id"],dd={class:"modal-dialog modal-xl modal-fullscreen-md-down"},ud={class:"modal-content"},cd={class:"modal-header bg-primary text-white"},md={class:"modal-title",id:"exampleModalLabel"},fd={class:"modal-body"},pd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vd=["innerHTML"],gd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bd={class:"container"},yd={class:"col"},$d={class:"form-floating mb-2"},wd=["value"],hd={key:0,class:"d-block invalid-feedback"},_d={class:"col"},kd={class:"form-floating mb-2"},Sd={key:0,class:"d-block invalid-feedback"},Td={class:"col"},Md={class:"form-floating mb-2"},Cd={key:0,class:"d-block invalid-feedback"},Id={class:"modal-footer"},xd=["disabled"],Pd={__name:"_addPackageConfiguration",emits:["refresh"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=$;re();const K=re("modalAddChannelOutput"),r=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),c={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("VOD Source is required.",te),$autoDirty:!0,$lazy:!0},path:{required:ee.withMessage("Path is required.",te),$autoDirty:!0,$lazy:!0},type:{required:ee.withMessage("Type is required.",te),$autoDirty:!0,$lazy:!0}}},U=$e(c,r);ie(async()=>{U.value.$reset()});const l=async()=>{await E()},E=async()=>{try{await j.get("/api/v1/sourceGroups/lookup/").then(p=>{r.lookups.sourceGroups=p.data,r.lookups.sourceGroups.length===1&&(r.item.sourceGroupId=r.lookups.sourceGroups[0].id)})}catch(n){L.value=B.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},a=async n=>{const p=r;Y.value.clear(),L.value="",p.lookups={sourceGroups:[]},p.item={sourceGroupId:null,vodSourceId:n,path:null,type:null},await l(),U.value.$reset();var m=document.getElementById(K.value),y=we.getOrCreateInstance(m);y.show()},A=async()=>{var n=document.getElementById(K.value),p=we.getOrCreateInstance(n);p.hide(),W("refresh")},f=async()=>{const n=r;if(F.value)return;const p=await U.value.$validate();debugger;if(!p){window.scrollTo(0,0);return}try{F.value=!0,L.value="";const m=n.item;await j.post("/api/v1/vodSources/package-configurations/",m).then(y=>{b.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await A()}catch(m){L.value=B.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{F.value=!1}};return d({open:a,close:A}),(n,p)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",dd,[e("div",ud,[e("div",cd,[e("h5",md,v(o(_))+" - "+v(o(g)),1),p[4]||(p[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",fd,[o(L)?(t(),s("div",pd,[p[5]||(p[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,vd)])):I("",!0),o(Y).size>0?(t(),s("div",gd,[p[6]||(p[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),m=>(t(),s("li",null,v(m),1))),256))])])):I("",!0),e("div",bd,[e("div",yd,[e("div",$d,[x(e("select",{"onUpdate:modelValue":p[0]||(p[0]=m=>r.item.sourceGroupId=m),class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,G(r.lookups.sourceGroups,m=>(t(),s("option",{value:m.id},v(m.name),9,wd))),256))],512),[[ge,r.item.sourceGroupId]]),p[7]||(p[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(U).item.sourceGroupId.$error?(t(),s("div",hd,[(t(!0),s(q,null,G(o(U).item.sourceGroupId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):I("",!0)])]),e("div",_d,[e("div",kd,[x(e("select",{"onUpdate:modelValue":p[1]||(p[1]=m=>r.item.type=m),class:"form-select",id:"type"},p[8]||(p[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ge,r.item.type]]),p[9]||(p[9]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(U).item.type.$error?(t(),s("div",Sd,[(t(!0),s(q,null,G(o(U).item.type.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):I("",!0)])]),e("div",Td,[e("div",Md,[x(e("input",{"onUpdate:modelValue":p[2]||(p[2]=m=>r.item.path=m),class:"form-control",id:"path"},null,512),[[R,r.item.path]]),p[10]||(p[10]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(U).item.path.$error?(t(),s("div",Cd,[(t(!0),s(q,null,G(o(U).item.path.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):I("",!0)])])])]),e("div",Id,[e("button",{disabled:o(U).$dirty&&o(U).$invalid,onClick:p[3]||(p[3]=m=>f()),class:"btn btn-primary",type:"button"},p[11]||(p[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xd),p[12]||(p[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,id))}},Vd=["id"],Ud={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Od={class:"modal-content"},Ad={class:"modal-header bg-primary text-white"},Dd={class:"modal-title",id:"exampleModalLabel"},Ed={class:"modal-body"},Hd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ld=["innerHTML"],Bd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qd={class:"container"},Nd={class:"col"},Rd={class:"form-floating mb-2"},zd={class:"col"},Fd={class:"form-floating mb-2"},jd={key:0,class:"d-block invalid-feedback"},Gd={class:"col"},Yd={class:"form-floating mb-2"},Wd={key:0,class:"d-block invalid-feedback"},Kd={class:"col"},Jd={class:"form-floating mb-2"},Qd={key:0,class:"d-block invalid-feedback"},Xd={class:"modal-footer"},Zd=["disabled"],eu={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=$,K=re(),r=re("modalAddPlaybackConfiguration"),c=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),U={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},l=$e(U,c);ie(async()=>{l.value.$reset()});const E=async(f,n)=>{K.value=f;const p=c;Y.value.clear(),L.value="";const m=n,y=m.lastIndexOf("/"),w=m.substring(0,y),C="ad_campaign_"+m.substring(y+1).replace(".","_");p.item={name:C,originalVideoContentSourceUrl:n,videoContentSourceUrl:w,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var P=document.getElementById(r.value),oe=we.getOrCreateInstance(P);oe.show()},a=async()=>{var f=document.getElementById(r.value),n=we.getOrCreateInstance(f);n.hide(),W("refresh")},A=async()=>{const f=c;if(F.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{F.value=!0,L.value="";const p=f.item;p.vodSourceId=K.value,await j.post("/api/v1/playbackconfigurations/vodsource",p).then(m=>{b.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await a()}catch(p){L.value=B.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{F.value=!1}};return d({open:E,close:a}),(f,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ud,[e("div",Od,[e("div",Ad,[e("h5",Dd,v(o(_))+" - "+v(o(g)),1),n[5]||(n[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Ed,[o(L)?(t(),s("div",Hd,[n[6]||(n[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,Ld)])):I("",!0),o(Y).size>0?(t(),s("div",Bd,[n[7]||(n[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),p=>(t(),s("li",null,v(p),1))),256))])])):I("",!0),e("div",qd,[e("div",Nd,[e("div",Rd,[x(e("input",{"onUpdate:modelValue":n[0]||(n[0]=p=>c.item.originalVideoContentSourceUrl=p),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[R,c.item.originalVideoContentSourceUrl]]),n[8]||(n[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",zd,[e("div",Fd,[x(e("input",{"onUpdate:modelValue":n[1]||(n[1]=p=>c.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,c.item.name]]),n[9]||(n[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",jd,[(t(!0),s(q,null,G(o(l).item.name.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):I("",!0)])]),e("div",Gd,[e("div",Yd,[x(e("input",{"onUpdate:modelValue":n[2]||(n[2]=p=>c.item.videoContentSourceUrl=p),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[R,c.item.videoContentSourceUrl]]),n[10]||(n[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),n[11]||(n[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",Wd,[(t(!0),s(q,null,G(o(l).item.videoContentSourceUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):I("",!0)])]),e("div",Kd,[e("div",Jd,[x(e("textarea",{"onUpdate:modelValue":n[3]||(n[3]=p=>c.item.adDecisionServerUrl=p),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[R,c.item.adDecisionServerUrl]]),n[12]||(n[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",Qd,[(t(!0),s(q,null,G(o(l).item.adDecisionServerUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):I("",!0)])])])]),e("div",Xd,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:n[4]||(n[4]=p=>A()),class:"btn btn-primary",type:"button"},n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zd),n[14]||(n[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vd))}},tu={class:"d-flex flex-row justify-content-end"},su={key:0},ou={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},au={class:"nav-item",role:"presentation"},lu={class:"nav-item",role:"presentation"},nu={class:"nav-item",role:"presentation"},ru={class:"nav-item",role:"presentation"},iu={class:"nav-item",role:"presentation"},du={class:"nav-item",role:"presentation"},uu={class:"tab-content",id:"myTabContent"},cu={class:"mt-2"},mu={class:"col"},fu={class:"form-floating mb-2"},pu={key:0,class:"table-responsive border mt-2"},vu={class:"table mb-0"},gu={class:"row"},bu={class:"col-sm-9"},yu={key:0,class:"fas fa-fw fa-check-circle text-success"},$u={class:"col-sm-9"},wu={class:"col-sm-9"},hu={class:"text-break border p-2"},_u={class:"col-sm-9"},ku={class:"text-break border p-2"},Su={class:"col-sm-9"},Tu={class:"text-break border p-2"},Mu={class:"d-flex flex-row"},Cu=["onClick"],Iu=["onClick"],xu=["onClick"],Pu={class:"mt-2"},Vu={class:"row row-cols-sm-2"},Uu={class:"col"},Ou={class:"form-floating mb-2"},Au={class:"col"},Du={class:"form-floating mb-2"},Eu={class:"row row-cols-sm-2"},Hu={class:"col"},Lu={class:"form-floating mb-2"},Bu={class:"col"},qu={class:"input-group mb-2"},Nu={class:"form-floating"},Ru={class:"row row-cols-sm-2"},zu={class:"col"},Fu={class:"form-floating mb-2"},ju={class:"col"},Gu={class:"input-group mb-2"},Yu={class:"form-floating"},Wu={class:"row row-cols-sm-2"},Ku={class:"col"},Ju={class:"form-floating mb-2"},Qu={class:"col"},Xu={class:"input-group mb-2"},Zu={class:"form-floating"},ec={class:"mt-2"},tc={class:"mt-2 text-end"},sc={class:"table-responsive border mt-2"},oc={class:"table table-hover mb-0 caption-top"},ac={class:"text-end"},lc=["onClick"],nc={class:"mt-2"},rc={class:"text-end"},ic={class:"mt-1"},dc=["id"],uc={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null}),c=re();re(null);const U=re();ie(async()=>{await A(),c.value=j.getPageTab("vodSource")||"information-tab"});const l=O=>{j.setPageTab("vodSource",O),c.value=O},E=O=>O!==c.value?"":"active",a=O=>O!==c.value?"":"show active",A=async()=>{const O=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const V=`/api/v1/vodsources/${d.id}/`;await Q.get(V).then(ae=>{O.item=ae.data;const ve=O.item,se=j.moment.utc(O.item.video.durationInMillis).format("HH:mm:ss");ve.video.duration=se;const ke=ve.video.hlsPath,Te=ke.substring(ke.lastIndexOf("/")+1)})}catch(V){S.value=j.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{g.value=!1}},f=async()=>{await A()},n=()=>{U.value.open(d.id)},p=O=>{},m=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!g.value){S.value=null;try{g.value=!0,await Q.post(`/api/v1/vodsources/${d.id}/publish/`).then(V=>{B.success("Publish VOD","VOD was published.",{async onClose(){}})}),g.value=!1,await f()}catch(V){S.value=j.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{g.value=!1}}},y=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/vodsources/${d.id}/unpublish/`).then(V=>{B.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),g.value=!1,await f()}catch(V){S.value=j.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{g.value=!1}}},w=async O=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!g.value){S.value=null;try{g.value=!0,await Q.post(`/api/v1/playbackconfigurations/${O}/vodsource/publish/`).then(ae=>{B.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),g.value=!1,await f()}catch(ae){S.value=j.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},C=async O=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/playbackconfigurations/${O}/vodsource/unpublish/`).then(ae=>{B.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),g.value=!1,await f()}catch(ae){S.value=j.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},P=async O=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/vodSources/package-configurations/${O}/`).then(ae=>{B.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),g.value=!1,await f()}catch(ae){S.value=j.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},oe=async O=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/playbackconfigurations/${O}/vodsource/`).then(ae=>{B.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),g.value=!1,await f()}catch(ae){S.value=j.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},J=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const V=`video-${r.item.vodSourceId}`;var O=document.getElementById(V);const ae=r.item.video.hlsBaseUrl+r.item.video.hlsPath;u(O,ae),B.success("View VOD Source Stream","VOD Source stream started.")}},u=(O,V)=>{var ae=new Hls;ae.on(Hls.Events.MEDIA_ATTACHED,function(){console.log("video and hls.js are now bound together !")}),ae.on(Hls.Events.MANIFEST_PARSED,function(ve,se){console.log("manifest loaded, found "+se.levels.length+" quality level"),O.play()}),ae.on(Hls.Events.ERROR,function(ve,se){if(se.fatal)switch(se.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),ae.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",se);break;default:ae.destroy();break}}),ae.loadSource(V),ae.attachMedia(O)};return(O,V)=>{const ae=X("PageHeader"),ve=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(ae,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",tu,[r.item?(t(),s(q,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:V[0]||(V[0]=se=>y()),class:"ms-1 btn btn-danger"},V[23]||(V[23]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:V[1]||(V[1]=se=>m()),class:"ms-1 btn btn-primary"},V[24]||(V[24]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):I("",!0),e("button",{onClick:V[2]||(V[2]=se=>f()),class:"ms-2 btn btn-secondary"},V[25]||(V[25]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:V[3]||(V[3]=se=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},V[26]||(V[26]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(ve,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",su,[e("div",null,[e("ul",ou,[e("li",au,[e("button",{onClick:V[4]||(V[4]=se=>l("information-tab")),class:le([E("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",lu,[e("button",{onClick:V[5]||(V[5]=se=>l("packageConfigurations-tab")),class:le([E("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",nu,[e("button",{onClick:V[6]||(V[6]=se=>l("viewStream-tab")),class:le([E("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View Stream ",2)]),e("li",ru,[e("button",{onClick:V[7]||(V[7]=se=>l("channels-tab")),class:le([E("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"}," Channels ",2)]),e("li",iu,[e("button",{onClick:V[8]||(V[8]=se=>l("programs-tab")),class:le([E("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)]),e("li",du,[e("button",{onClick:V[9]||(V[9]=se=>l("programTemplates-tab")),class:le([E("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"}," Program Templates ",2)])]),e("div",uu,[e("div",{class:le([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",cu,[e("div",mu,[e("div",fu,[x(e("input",{"onUpdate:modelValue":V[10]||(V[10]=se=>r.item.name=se),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.name]]),V[27]||(V[27]=e("label",{for:"name"},"Name",-1))])]),r.item.playbackConfigurations?(t(),s("div",pu,[V[37]||(V[37]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),e("table",vu,[V[36]||(V[36]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.playbackConfigurations,(se,ke)=>(t(),s("tr",{key:se.playbackConfigurationId},[e("td",null,v(ke+1),1),e("td",null,[e("dl",gu,[V[30]||(V[30]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",bu,[se.arn?(t(),s("span",yu)):I("",!0),N(v(se.name),1)]),V[31]||(V[31]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",$u,v(se.videoContentSourceUrl),1),V[32]||(V[32]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",wu,[e("div",hu,v(se.adDecisionServerUrl),1)]),r.item.video.dashPath&&se.dashConfigurationManifestEndpointPrefix?(t(),s(q,{key:0},[V[28]||(V[28]=e("dt",{class:"col-sm-3"},[e("div",{class:"d-flex flex-row justify-content-between"},[e("div",null," DASH Endpoint ")])],-1)),e("dd",_u,[e("div",ku,v(se.dashConfigurationManifestEndpointPrefix),1)])],64)):I("",!0),r.item.video.hlsPath&&se.hlsConfigurationManifestEndpointPrefix?(t(),s(q,{key:1},[V[29]||(V[29]=e("dt",{class:"col-sm-3"},[e("div",{class:"d-flex flex-row justify-content-between"},[e("div",null," HLS Endpoint ")])],-1)),e("dd",Su,[e("div",Tu,v(se.hlsConfigurationManifestEndpointPrefix),1)])],64)):I("",!0)])]),e("td",null,[e("div",Mu,[se.arn?(t(),s("button",{key:0,onClick:Te=>C(se.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},V[33]||(V[33]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,Cu)):(t(),s("button",{key:1,onClick:Te=>w(se.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},V[34]||(V[34]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Iu)),se.arn?I("",!0):(t(),s("button",{key:2,onClick:Te=>oe(se.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},V[35]||(V[35]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,xu))])])]))),128))]),_:1},512),[[_e,r.item.playbackConfigurations.length>0]])])])):I("",!0),e("div",Pu,[V[47]||(V[47]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Vu,[e("div",Uu,[e("div",Ou,[x(e("input",{"onUpdate:modelValue":V[11]||(V[11]=se=>r.item.video.title=se),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[R,r.item.video.title]]),V[38]||(V[38]=e("label",{for:"title"},"Title",-1))])]),e("div",Au,[e("div",Du,[x(e("input",{"onUpdate:modelValue":V[12]||(V[12]=se=>r.item.video.duration=se),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[R,r.item.video.duration]]),V[39]||(V[39]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Eu,[e("div",Hu,[e("div",Lu,[x(e("input",{"onUpdate:modelValue":V[13]||(V[13]=se=>r.item.video.rawBaseUrl=se),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[R,r.item.video.rawBaseUrl]]),V[40]||(V[40]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Bu,[e("div",qu,[e("div",Nu,[x(e("input",{"onUpdate:modelValue":V[14]||(V[14]=se=>r.item.video.rawPath=se),class:"form-control",id:"rawPath",disabled:""},null,512),[[R,r.item.video.rawPath]]),V[41]||(V[41]=e("label",{for:"rawPath"},"Raw Path",-1))])])])]),e("div",Ru,[e("div",zu,[e("div",Fu,[x(e("input",{"onUpdate:modelValue":V[15]||(V[15]=se=>r.item.video.hlsBaseUrl=se),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[R,r.item.video.hlsBaseUrl]]),V[42]||(V[42]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",ju,[e("div",Gu,[e("div",Yu,[x(e("input",{"onUpdate:modelValue":V[16]||(V[16]=se=>r.item.video.hlsPath=se),class:"form-control",id:"hlsPath",disabled:""},null,512),[[R,r.item.video.hlsPath]]),V[43]||(V[43]=e("label",{for:"hlsPath"},"HLS Path",-1))])])])]),e("div",Wu,[e("div",Ku,[e("div",Ju,[x(e("input",{"onUpdate:modelValue":V[17]||(V[17]=se=>r.item.video.dashBaseUrl=se),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[R,r.item.video.dashBaseUrl]]),V[44]||(V[44]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Qu,[e("div",Xu,[e("div",Zu,[x(e("input",{"onUpdate:modelValue":V[18]||(V[18]=se=>r.item.video.dashPath=se),class:"form-control",id:"dashPath",disabled:""},null,512),[[R,r.item.video.dashPath]]),V[45]||(V[45]=e("label",{for:"dashPath"},"DASH Path",-1))]),r.item.video.dashPath?(t(),s("button",{key:0,onClick:V[19]||(V[19]=se=>p()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},V[46]||(V[46]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),N("Playback Configuration ")]))):I("",!0)])])])])])])],2),e("div",{class:le([a("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",ec,[e("div",tc,[e("button",{onClick:V[20]||(V[20]=se=>n()),class:"btn btn-primary"},V[48]||(V[48]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),N("Add ")]))]),e("div",sc,[e("table",oc,[V[50]||(V[50]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.packageConfigurations,(se,ke)=>(t(),s("tr",{key:se.packageConfigurationId},[e("td",null,v(ke+1),1),e("td",null,v(se.path),1),e("td",null,v(se.sourceGroup.name),1),e("td",null,v(se.type),1),e("td",ac,[e("button",{onClick:Te=>P(se.packageConfigurationId),class:"btn btn-outline-warning"},V[49]||(V[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,lc)])]))),128))]),_:1},512),[[_e,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:le([a("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",nc,[e("div",rc,[e("button",{onClick:V[21]||(V[21]=se=>J()),class:"btn btn-primary"},V[51]||(V[51]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),N("View ")]))]),e("div",ic,[e("video",{id:`video-${r.item.vodSourceId}`,class:"card-img-top object-fit-contain border"},null,8,dc)])])],2),e("div",{class:le([a("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},V[52]||(V[52]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:le([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},V[53]||(V[53]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:le([a("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},V[54]||(V[54]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):I("",!0)]),_:1},8,["errorMessage"]),H(Pd,{ref_key:"modalAddPackageConfiguration",ref:U,onRefresh:f},null,512),H(eu,{ref:"modalAddPlaybackConfiguration",onRefresh:V[22]||(V[22]=se=>f())},null,512)])]),_:1})}}},cc={class:"d-flex justify-content-end"},mc=["disabled"],fc={class:"container"},pc={class:"row row-cols-1"},vc={class:"col"},gc={class:"form-floating mb-2"},bc={key:0,class:"d-block invalid-feedback"},yc={class:"row row-cols-sm-2"},$c={class:"col"},wc={class:"form-floating mb-2"},hc=["value"],_c={key:0,class:"d-block invalid-feedback"},kc={class:"col"},Sc={class:"form-floating mb-2"},Tc=["disabled"],Mc=["value"],Cc={key:0,class:"d-block invalid-feedback"},Ic={key:0,class:"row row-cols-1 row-cols-sm-2"},xc={class:"col"},Pc={class:"form-floating"},Vc={key:0},Uc={key:1},Oc={key:2},Ac={key:3,class:"d-block invalid-feedback"},Dc={class:"col"},Ec={class:"form-floating"},Hc={key:0},Lc={key:1},Bc={key:2,class:"d-block invalid-feedback"},qc={key:1,class:"mt-3"},Nc={class:"d-flex flex-row justify-content-between"},Rc={class:"badge bg-info"},zc={class:"table-responsive border mt-1"},Fc={class:"table table-borderless table-sm mb-0"},jc=["onUpdate:modelValue","onChange"],Gc={key:0},Yc=["onUpdate:modelValue","onChange"],Wc={class:"text-end"},Kc=["onClick"],Jc={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),B=i,b=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),M={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},h=$e(M,b),W=Oe(()=>{const w=S.moment;if(b.startOffsetTime&&b.startOffsetTime!=="00:00:00"&&r(b.startOffsetTime)){const C=w().startOf("day"),P=C.format("YYYY-MM-DD ")+b.startOffsetTime,J=w(P).subtract(C);return b.item.startOffsetMillis=J.valueOf(),b.item.startOffsetMillis}return 0}),K=Oe(()=>{const w=S.moment;if(b.endOffsetTime&&b.endOffsetTime!=="00:00:00"&&r(b.endOffsetTime)){const C=w().startOf("day"),P=C.format("YYYY-MM-DD ")+b.endOffsetTime,J=w(P).subtract(C);return b.item.endOffsetMillis=J.valueOf(),b.item.endOffsetMillis}return 0}),r=w=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(w),c=Oe(()=>{const w=b.item.adBreaks;return w&&w.length>0?w.reduce((P,oe,J)=>P+oe.durationInMillis,0):0});ie(async()=>{await U()});const U=async()=>{await l(),await A()},l=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(C=>{b.lookups.sourceLocations=C.data,b.item.sourceLocationId=b.lookups.sourceLocations[0].id}),b.item.sourceLocationId&&await E(b.item.sourceLocationId)}catch(w){T.value=S.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},E=async w=>{try{const C=`/api/v1/vodSources/lookup/source-location/${w}/`;await z.get(C).then(P=>{b.lookups.vodSources=P.data})}catch(C){T.value=S.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},a=async()=>{const w=b.selected.vodSource;b.item.vodSourceId=w.id,b.endOffsetTime=S.moment.utc(w.durationInMillis).format("HH:mm:ss")},A=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(C=>{b.lookups.adBreakSourceLocations=C.data})}catch(w){T.value=S.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},f=()=>{const w={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};b.item.adBreaks.push(w)},n=w=>{b.item.adBreaks.splice(w,1)},p=w=>{const C=S.moment,P=C().startOf("day"),oe=P.format("YYYY-MM-DD ")+w.offsetTime,u=C(oe).subtract(P);w.offsetMillis=u.valueOf()},m=w=>{const C=S.moment,P=C().startOf("day"),oe=P.format("YYYY-MM-DD ")+w.durationTime,u=C(oe).subtract(P);w.durationInMillis=u.valueOf()},y=async()=>{const w=b;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const P=S.clone(w.item);debugger;await z.post("/api/v1/programtemplates/",P).then(oe=>{L.success("Add Program Template","Program template added.",{onClose:async()=>{const J=`${B.urlView}/${oe.data}`;await Y.push(J)}})})}catch(P){T.value=S.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{_.value=!1}};return(w,C)=>{const P=X("router-link"),oe=X("PageHeader"),J=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(oe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",cc,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:C[0]||(C[0]=u=>y()),class:"btn btn-primary"},C[8]||(C[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mc),H(P,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>C[9]||(C[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(J,{errorMessage:o(T),vuelidate:o(h)},{default:D(()=>[e("div",null,[e("div",fc,[e("div",pc,[e("div",vc,[e("div",gc,[x(e("input",{"onUpdate:modelValue":C[1]||(C[1]=u=>b.item.name=u),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,b.item.name]]),C[10]||(C[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",bc,[(t(!0),s(q,null,G(o(h).item.name.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])])]),e("div",yc,[e("div",$c,[e("div",wc,[x(e("select",{"onUpdate:modelValue":C[2]||(C[2]=u=>b.item.sourceLocationId=u),onChange:C[3]||(C[3]=u=>E(b.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,G(b.lookups.sourceLocations,u=>(t(),s("option",{value:u.id},v(u.name),9,hc))),256))],544),[[ge,b.item.sourceLocationId]]),C[11]||(C[11]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.sourceLocationId.$error?(t(),s("div",_c,[(t(!0),s(q,null,G(o(h).item.sourceLocationId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])]),e("div",kc,[e("div",Sc,[x(e("select",{"onUpdate:modelValue":C[4]||(C[4]=u=>b.selected.vodSource=u),onChange:C[5]||(C[5]=u=>a()),class:"form-select",id:"vodSourceId",disabled:b.item.adBreaks.length>0},[(t(!0),s(q,null,G(b.lookups.vodSources,u=>(t(),s("option",{value:u},v(o(S).moment.utc(u.durationInMillis).format("HH:mm:ss"))+" - "+v(u.name),9,Mc))),256))],40,Tc),[[ge,b.selected.vodSource]]),C[12]||(C[12]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.vodSourceId.$error?(t(),s("div",Cc,[(t(!0),s(q,null,G(o(h).item.vodSourceId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])])]),b.item.vodSourceId?(t(),s("div",Ic,[e("div",xc,[e("div",Pc,[x(e("input",{"onUpdate:modelValue":C[6]||(C[6]=u=>b.startOffsetTime=u),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[R,b.startOffsetTime]]),C[13]||(C[13]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Vc,C[14]||(C[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):I("",!0),W.value>K.value&&K.value>0?(t(),s("div",Uc,C[15]||(C[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):I("",!0),b.selected.vodSource&&W.value>=b.selected.vodSource.durationInMillis?(t(),s("div",Oc,C[16]||(C[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):I("",!0),o(h).item.startOffsetMillis.$error?(t(),s("div",Ac,[(t(!0),s(q,null,G(o(h).item.startOffsetMillis.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)]),e("div",Dc,[e("div",Ec,[x(e("input",{"onUpdate:modelValue":C[7]||(C[7]=u=>b.endOffsetTime=u),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[R,b.endOffsetTime]]),C[17]||(C[17]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Hc,C[18]||(C[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):I("",!0),b.selected.vodSource&&K.value>b.selected.vodSource.durationInMillis?(t(),s("div",Lc,C[19]||(C[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):I("",!0),o(h).item.endOffsetMillis.$error?(t(),s("div",Bc,[(t(!0),s(q,null,G(o(h).item.endOffsetMillis.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])])):I("",!0),b.item.vodSourceId?(t(),s("div",qc,[e("div",Nc,[e("fieldset",null,[e("legend",null,[C[20]||(C[20]=N(" Total AdBreak Duration ")),e("span",Rc,v(o(S).moment.utc(c.value).format("HH:mm:ss")),1)])]),e("button",{onClick:f,class:"btn btn-outline-primary"},C[21]||(C[21]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),N("Ad Break ")]))]),e("div",zc,[e("table",Fc,[C[24]||(C[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,G(b.item.adBreaks,(u,O)=>(t(),s("tr",null,[e("td",null,v(O+1),1),e("td",null,[x(e("input",{"onUpdate:modelValue":V=>u.offsetTime=V,onChange:V=>p(u),type:"time",step:"1",class:"form-control"},null,40,jc),[[R,u.offsetTime]]),u.offsetMillis>=b.selected.vodSource.durationInMillis?(t(),s("div",Gc,C[22]||(C[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):I("",!0)]),e("td",null,[x(e("input",{"onUpdate:modelValue":V=>u.durationTime=V,onChange:V=>m(u),type:"time",step:"1",class:"form-control"},null,40,Yc),[[R,u.durationTime]])]),e("td",Wc,[e("button",{onClick:V=>n(O),class:"btn btn-outline-warning"},C[23]||(C[23]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Kc)])]))),256))])]),C[25]||(C[25]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),N(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):I("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Qc={class:"d-flex justify-content-end"},Xc=["disabled"],Zc={class:"container"},em={class:"row row-cols-1"},tm={class:"col"},sm={class:"form-floating mb-2"},om={key:0,class:"d-block invalid-feedback"},am={class:"row row-cols-sm-2"},lm={class:"col"},nm={class:"form-floating mb-2"},rm=["value"],im={key:0,class:"d-block invalid-feedback"},dm={class:"col"},um={class:"form-floating mb-2"},cm=["value"],mm={key:0,class:"d-block invalid-feedback"},fm={key:0,class:"row row-cols-1 row-cols-sm-2"},pm={class:"col"},vm={class:"form-floating"},gm={key:0},bm={key:1},ym={key:2},$m={key:3,class:"d-block invalid-feedback"},wm={class:"col"},hm={class:"form-floating"},_m={key:0},km={key:1},Sm={key:2,class:"d-block invalid-feedback"},Tm={key:1,class:"mt-2"},Mm={class:"table-responsive border mt-1"},Cm={class:"table"},Im=["onUpdate:modelValue","onChange"],xm={key:0},Pm=["onUpdate:modelValue","onChange"],Vm=["onClick"],Um={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,closeWithReturnUrl:j,security:B}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),b=i,M=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),h={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},W=$e(h,M),K=Oe(()=>{const C=S.moment;if(M.startOffsetTime&&M.startOffsetTime!=="00:00:00"&&c(M.startOffsetTime)){const P=C().startOf("day"),oe=P.format("YYYY-MM-DD ")+M.startOffsetTime,u=C(oe).subtract(P);return M.item.startOffsetMillis=u.valueOf(),M.item.startOffsetMillis}return 0}),r=Oe(()=>{const C=S.moment;if(M.endOffsetTime&&M.endOffsetTime!=="00:00:00"&&c(M.endOffsetTime)){const P=C().startOf("day"),oe=P.format("YYYY-MM-DD ")+M.endOffsetTime,u=C(oe).subtract(P);return M.item.endOffsetMillis=u.valueOf(),M.item.endOffsetMillis}return 0}),c=C=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(C);ie(async()=>{await U()});const U=async()=>{await l(),await E()},l=async()=>{try{const C=`/api/v1/programtemplates/${b.id}/`;await z.get(C).then(P=>{M.item=P.data,M.startOffsetTime=S.moment.utc(M.item.startOffsetMillis).format("HH:mm:ss"),M.endOffsetTime=S.moment.utc(M.item.endOffsetMillis).format("HH:mm:ss"),M.item.adBreaks.forEach(oe=>{oe.offsetTime=S.moment.utc(oe.offsetMillis).format("HH:mm:ss"),oe.durationTime=S.moment.utc(oe.durationInMillis).format("HH:mm:ss")})})}catch(C){T.value=S.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},E=async()=>{await a()},a=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(P=>{M.lookups.sourceLocations=P.data}),M.item.sourceLocationId&&await A(M.item.sourceLocationId)}catch(C){T.value=S.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},A=async C=>{try{const P=`/api/v1/vodSources/lookup/source-location/${C}/`;await z.get(P).then(J=>{M.lookups.vodSources=J.data});const oe=M.lookups.vodSources.find(J=>J.id==M.item.vodSourceId);M.selected.vodSource=oe,await f()}catch(P){T.value=S.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},f=async()=>{const C=M.selected.vodSource;M.item.vodSourceId=C.id,M.endOffsetTime=S.moment.utc(C.durationInMillis).format("HH:mm:ss")},n=()=>{const C={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};M.item.adBreaks.push(C)},p=C=>{M.item.adBreaks.splice(C,1)},m=C=>{const P=S.moment,oe=P().startOf("day"),J=oe.format("YYYY-MM-DD ")+C.offsetTime,O=P(J).subtract(oe);C.offsetMillis=O.valueOf()},y=C=>{const P=S.moment,oe=P().startOf("day"),J=oe.format("YYYY-MM-DD ")+C.durationTime,O=P(J).subtract(oe);C.durationInMillis=O.valueOf()},w=async()=>{const C=M;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const oe=S.clone(C.item);debugger;oe.startOffsetMillis=K.value,oe.endOffsetMillis=r.value,await z.put("/api/v1/programtemplates/",oe).then(J=>{L.success("Edit Program Template","Program template edit.",{onClose:async()=>{const u=`${b.urlView}/${b.id}`;await Y.push(u)}})})}catch(oe){T.value=S.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{_.value=!1}};return(C,P)=>{const oe=X("PageHeader"),J=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(oe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",Qc,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:P[0]||(P[0]=u=>w()),class:"btn btn-primary"},P[10]||(P[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xc),e("button",{onClick:P[1]||(P[1]=u=>U()),class:"btn btn-secondary ms-2"},P[11]||(P[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:P[2]||(P[2]=u=>o(j)(b.urlMain)),class:"btn btn-secondary ms-1"},P[12]||(P[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(J,{errorMessage:o(T),vuelidate:o(W)},{default:D(()=>[e("div",null,[e("div",Zc,[e("div",em,[e("div",tm,[e("div",sm,[x(e("input",{"onUpdate:modelValue":P[3]||(P[3]=u=>M.item.name=u),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,M.item.name]]),P[13]||(P[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",om,[(t(!0),s(q,null,G(o(W).item.name.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])])]),e("div",am,[e("div",lm,[e("div",nm,[x(e("select",{"onUpdate:modelValue":P[4]||(P[4]=u=>M.item.sourceLocationId=u),onChange:P[5]||(P[5]=u=>A(M.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,G(M.lookups.sourceLocations,u=>(t(),s("option",{value:u.id},v(u.name),9,rm))),256))],544),[[ge,M.item.sourceLocationId]]),P[14]||(P[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",im,[(t(!0),s(q,null,G(o(W).item.sourceLocationId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])]),e("div",dm,[e("div",um,[x(e("select",{"onUpdate:modelValue":P[6]||(P[6]=u=>M.selected.vodSource=u),onChange:P[7]||(P[7]=u=>f()),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,G(M.lookups.vodSources,u=>(t(),s("option",{value:u},v(o(S).moment.utc(u.durationInMillis).format("HH:mm:ss"))+" - "+v(u.name),9,cm))),256))],544),[[ge,M.selected.vodSource]]),P[15]||(P[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",mm,[(t(!0),s(q,null,G(o(W).item.vodSourceId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])])]),M.item.vodSourceId?(t(),s("div",fm,[e("div",pm,[N(" ["+v(K.value)+"] x ["+v(M.startOffsetMillis)+"] ",1),e("div",vm,[x(e("input",{"onUpdate:modelValue":P[8]||(P[8]=u=>M.startOffsetTime=u),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[R,M.startOffsetTime]]),P[16]||(P[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",gm,P[17]||(P[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):I("",!0),K.value>r.value&&r.value>0?(t(),s("div",bm,P[18]||(P[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):I("",!0),M.selected.vodSource&&K.value>=M.selected.vodSource.durationInMillis?(t(),s("div",ym,P[19]||(P[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):I("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",$m,[(t(!0),s(q,null,G(o(W).item.startOffsetMillis.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)]),e("div",wm,[e("div",hm,[x(e("input",{"onUpdate:modelValue":P[9]||(P[9]=u=>M.endOffsetTime=u),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[R,M.endOffsetTime]]),P[20]||(P[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),r.value>0&&r.value<3e4?(t(),s("div",_m,P[21]||(P[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):I("",!0),M.selected.vodSource&&r.value>M.selected.vodSource.durationInMillis?(t(),s("div",km,P[22]||(P[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):I("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",Sm,[(t(!0),s(q,null,G(o(W).item.endOffsetMillis.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):I("",!0)])])):I("",!0),M.selected.vodSource?(t(),s("div",Tm,[e("div",{class:"d-flex flex-row justify-content-between"},[P[24]||(P[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:n,class:"btn btn-outline-primary"},P[23]||(P[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),N("Ad Break ")]))]),e("div",Mm,[e("table",Cm,[P[28]||(P[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,G(M.item.adBreaks,(u,O)=>(t(),s("tr",null,[e("td",null,v(O+1),1),e("td",null,[x(e("input",{"onUpdate:modelValue":V=>u.offsetTime=V,onChange:V=>m(u),type:"time",step:"1",class:"form-control"},null,40,Im),[[R,u.offsetTime]]),u.offsetMillis>=M.selected.vodSource.durationInMillis?(t(),s("div",xm,P[25]||(P[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):I("",!0)]),e("td",null,[x(e("input",{"onUpdate:modelValue":V=>u.durationTime=V,onChange:V=>y(u),type:"time",step:"1",class:"form-control"},null,40,Pm),[[R,u.durationTime]])]),P[27]||(P[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),N(" Source Location and Vod source will be defined in Program Instance. "),e("br"),N(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:V=>p(O),class:"btn btn-outline-warning"},P[26]||(P[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Vm)])]))),256))])])])])):I("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Om={class:"d-flex justify-content-end"},Am={class:"ms-1"},Dm={class:"input-group"},Em={class:"table-responsive"},Hm={class:"table table-hover mb-0"},Lm=["textContent"],Bm={key:0,class:"fas fa-fw fa-check-circle text-success"},qm={class:"text-end"},Nm={class:"border-top"},Rm="/api/v1/programTemplates/search",zm={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,security:b,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:r,getRowNumber:c,setSelected:U,isSelected:l}=Ae({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${$==null?void 0:$.userId}/program-templates/search`,baseUrl:Rm,filter:{updateUrl:!0}});return ie(async()=>{h(),await r()}),(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("m-pagination"),p=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(g)},{default:D(()=>[e("div",Om,[H(A,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Am,[e("div",Dm,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(r)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(p,{errorMessage:o(z)},{default:D(()=>[e("div",Em,[e("table",Hm,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(M).items,(m,y)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:v(o(c)(y)),class:"text-center"},null,8,Lm),e("td",null,[H(A,{to:`${i.urlView}/${m.programTemplateId}`,class:"d-inline-block text-truncate"},{default:D(()=>[m.arn?(t(),s("span",Bm)):I("",!0),N(" "+v(m.name),1)]),_:2},1032,["to"])]),e("td",qm,v(o(Q).moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[N(v(m.sourceLocation.name)+" ",1),e("div",Nm,v(m.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,v(m.vodSource.name),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),H(n,{filter:o(M),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Fm={class:"d-flex flex-row justify-content-end"},jm={key:0},Gm={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Ym={class:"nav-item",role:"presentation"},Wm={class:"nav-item",role:"presentation"},Km={class:"nav-item",role:"presentation"},Jm={class:"tab-content",id:"myTabContent"},Qm={class:"mt-2"},Xm={class:"row row-cols-1 row-cols-sm-3"},Zm={class:"col"},ef={class:"form-floating mb-2"},tf={class:"col"},sf={class:"form-floating mb-2"},of={class:"col"},af={class:"form-floating mb-2"},lf={class:"row row-cols-1 row-cols-sm-3"},nf={class:"col"},rf={class:"form-floating mb-2"},df={class:"col"},uf={class:"form-floating mb-2"},cf={class:"col"},mf={class:"form-floating mb-2"},ff={class:"row row-cols-1 row-cols-sm-2"},pf={class:"col-sm-4"},vf={class:"form-floating mb-2"},gf={class:"col-sm-8"},bf={class:"form-floating mb-2"},yf={class:""},$f={class:"col"},wf={class:"form-floating mb-2"},hf={class:"row row-cols-1 row-cols-sm-2"},_f={class:"col"},kf={class:"form-floating mb-2"},Sf={class:"col"},Tf={class:"form-floating mb-2"},Mf={class:"row row-cols-1 row-cols-sm-2"},Cf={class:"col"},If={class:"form-floating mb-2"},xf={class:"col"},Pf={class:"form-floating mb-2"},Vf={class:"row row-cols-1 row-cols-sm-2"},Uf={class:"col"},Of={class:"form-floating mb-2"},Af={class:"col"},Df={class:"form-floating mb-2"},Ef={class:"row row-cols-1 row-cols-sm-2"},Hf={class:"col"},Lf={class:"form-floating mb-2"},Bf={class:"col"},qf={class:"form-floating mb-2"},Nf={class:"mt-2"},Rf={class:"table-responsive"},zf={class:"table table-hover mb-0"},Ff={class:"text-center"},jf={class:"mt-2"},Gf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null}),c=re();ie(async()=>{await a(),c.value=j.getPageTab("programTemplate")||"information-tab"});const U=f=>{j.setPageTab("programTemplate",f),c.value=f},l=f=>f!==c.value?"":"active",E=f=>f!==c.value?"":"show active",a=async()=>{const f=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const n=`/api/v1/programTemplates/${d.id}/`;await Q.get(n).then(p=>{f.item=p.data;const m=f.item;m.startOffsetTime=j.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=j.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=j.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=j.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=j.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const y=m.vodSource.video,w=y.durationInMillis;y.durationInMillis=j.moment.utc(w).format("HH:mm:ss")})}catch(n){S.value=j.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{g.value=!1}},A=async()=>{await a()};return(f,n)=>{const p=X("router-link"),m=X("PageHeader"),y=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(m,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",Fm,[H(p,{to:`${i.urlEdit}/${i.id}/${o(h)()}`,class:"ms-2 btn btn-primary"},{default:D(()=>n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:n[0]||(n[0]=w=>A()),class:"ms-2 btn btn-secondary"},n[23]||(n[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[1]||(n[1]=w=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},n[24]||(n[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(y,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",jm,[e("div",null,[e("ul",Gm,[e("li",Ym,[e("button",{onClick:n[2]||(n[2]=w=>U("information-tab")),class:le([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Wm,[e("button",{onClick:n[3]||(n[3]=w=>U("adBreaks-tab")),class:le([l("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Km,[e("button",{onClick:n[4]||(n[4]=w=>U("programs-tab")),class:le([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Jm,[e("div",{class:le([E("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Qm,[e("div",Xm,[e("div",Zm,[e("div",ef,[x(e("input",{"onUpdate:modelValue":n[5]||(n[5]=w=>r.item.name=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.name]]),n[25]||(n[25]=e("label",{for:"name"},"Name",-1))])]),e("div",tf,[e("div",sf,[x(e("input",{"onUpdate:modelValue":n[6]||(n[6]=w=>r.item.startOffsetTime=w),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[R,r.item.startOffsetTime]]),n[26]||(n[26]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",of,[e("div",af,[x(e("input",{"onUpdate:modelValue":n[7]||(n[7]=w=>r.item.endOffsetTime=w),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[R,r.item.endOffsetTime]]),n[27]||(n[27]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),e("div",lf,[e("div",nf,[e("div",rf,[x(e("input",{"onUpdate:modelValue":n[8]||(n[8]=w=>r.item.durationTime=w),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[R,r.item.durationTime]]),n[28]||(n[28]=e("label",{for:"durationTime"},"Clip Duration",-1))])]),e("div",df,[e("div",uf,[x(e("input",{"onUpdate:modelValue":n[9]||(n[9]=w=>r.item.adBreaksDurationTime=w),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[R,r.item.adBreaksDurationTime]]),n[29]||(n[29]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",cf,[e("div",mf,[x(e("input",{"onUpdate:modelValue":n[10]||(n[10]=w=>r.item.totalProgramTemplateDurationTime=w),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[R,r.item.totalProgramTemplateDurationTime]]),n[30]||(n[30]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),n[45]||(n[45]=e("hr",null,null,-1)),e("div",null,[n[33]||(n[33]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",ff,[e("div",pf,[e("div",vf,[x(e("input",{"onUpdate:modelValue":n[11]||(n[11]=w=>r.item.sourceLocation.name=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.sourceLocation.name]]),n[31]||(n[31]=e("label",{for:"name"},"Name",-1))])]),e("div",gf,[e("div",bf,[x(e("input",{"onUpdate:modelValue":n[12]||(n[12]=w=>r.item.sourceLocation.httpConfigurationBaseUrl=w),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[R,r.item.sourceLocation.httpConfigurationBaseUrl]]),n[32]||(n[32]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),n[46]||(n[46]=e("hr",null,null,-1)),e("div",null,[n[43]||(n[43]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",yf,[e("div",$f,[e("div",wf,[x(e("input",{"onUpdate:modelValue":n[13]||(n[13]=w=>r.item.vodSource.name=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.name]]),n[34]||(n[34]=e("label",{for:"name"},"VOD Name",-1))])])]),n[44]||(n[44]=e("div",null,[e("h6",null,"Video")],-1)),e("div",hf,[e("div",_f,[e("div",kf,[x(e("input",{"onUpdate:modelValue":n[14]||(n[14]=w=>r.item.vodSource.video.title=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.title]]),n[35]||(n[35]=e("label",{for:"name"},"Video Name",-1))])]),e("div",Sf,[e("div",Tf,[x(e("input",{"onUpdate:modelValue":n[15]||(n[15]=w=>r.item.vodSource.video.durationInMillis=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.durationInMillis]]),n[36]||(n[36]=e("label",{for:"name"},"Video Duration",-1))])])]),e("div",Mf,[e("div",Cf,[e("div",If,[x(e("input",{"onUpdate:modelValue":n[16]||(n[16]=w=>r.item.vodSource.video.rawBaseUrl=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.rawBaseUrl]]),n[37]||(n[37]=e("label",{for:"name"},"Raw Base Url",-1))])]),e("div",xf,[e("div",Pf,[x(e("input",{"onUpdate:modelValue":n[17]||(n[17]=w=>r.item.vodSource.video.rawPath=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.rawPath]]),n[38]||(n[38]=e("label",{for:"name"},"Raw Path",-1))])])]),e("div",Vf,[e("div",Uf,[e("div",Of,[x(e("input",{"onUpdate:modelValue":n[18]||(n[18]=w=>r.item.vodSource.video.hlsBaseUrl=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.hlsBaseUrl]]),n[39]||(n[39]=e("label",{for:"name"},"HLS Base Url",-1))])]),e("div",Af,[e("div",Df,[x(e("input",{"onUpdate:modelValue":n[19]||(n[19]=w=>r.item.vodSource.video.hlsPath=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.hlsPath]]),n[40]||(n[40]=e("label",{for:"name"},"HLS Path",-1))])])]),e("div",Ef,[e("div",Hf,[e("div",Lf,[x(e("input",{"onUpdate:modelValue":n[20]||(n[20]=w=>r.item.vodSource.video.dashBaseUrl=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.dashBaseUrl]]),n[41]||(n[41]=e("label",{for:"name"},"DASH Base Url",-1))])]),e("div",Bf,[e("div",qf,[x(e("input",{"onUpdate:modelValue":n[21]||(n[21]=w=>r.item.vodSource.video.dashPath=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.vodSource.video.dashPath]]),n[42]||(n[42]=e("label",{for:"name"},"DASH Path",-1))])])])])])],2),e("div",{class:le([E("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Nf,[e("div",Rf,[e("table",zf,[n[47]||(n[47]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.adBreaks,(w,C)=>(t(),s("tr",{key:w.programTemplateAdBreakId},[e("td",Ff,v(C+1),1),e("td",null,v(o(j).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(j).moment.utc(w.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[_e,r.item.adBreaks.length>0]])])])])],2),e("div",{class:le([E("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",jf,[e("pre",null,v(r.item.programs),1)])],2)])])])):I("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Yf={class:"d-flex justify-content-end"},Wf=["disabled"],Kf={class:"row row-cols-1 row-cols-sm-3"},Jf={class:"col-sm-6"},Qf={class:"form-floating mb-2"},Xf={key:0,class:"d-block invalid-feedback"},Zf={class:"col-sm-3"},ep={class:"form-floating mb-2"},tp={key:0,class:"d-block invalid-feedback"},sp={class:"col-sm-3"},op={class:"form-floating mb-2"},ap={key:0,class:"d-block invalid-feedback"},lp={class:"col"},np={class:"form-floating mb-2"},rp={key:0,class:"d-block invalid-feedback"},ip={class:"row row-cols-1 row-cols-sm-2"},dp={class:"col"},up={class:"form-floating mb-2"},cp=["value"],mp={key:0,class:"d-block invalid-feedback"},fp={class:"col"},pp={class:"form-floating mb-2"},vp=["value"],gp={key:0,class:"d-block invalid-feedback"},bp={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),B=i,b=fe({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),M={item:{name:{title:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},tier:{title:ee.withMessage("Tier is required.",te),$autoDirty:!0,$lazy:!0},playbackMode:{title:ee.withMessage("PlaybackMode is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:ee.withMessage("Filler Slate Source Location is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:ee.withMessage("Filler Slate Vod Source is required.",te),$autoDirty:!0,$lazy:!0},policy:{title:ee.withMessage("Policy is required.",te),$autoDirty:!0,$lazy:!0}}},h=$e(M,b);ie(async()=>{await W()});const W=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(E=>{b.lookups.sourceLocations=E.data,b.lookups.sourceLocations.length===1&&(b.item.fillerSlateSourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await r(b.item.fillerSlateSourceLocationId)}catch(l){T.value=S.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},K=async()=>{b.item.fillerSlateVodSourceId=null,await r(b.item.fillerSlateSourceLocationId)},r=async l=>{try{let E=`/api/v1/vodSources/lookup/source-location/${l}`;await z.get(E).then(a=>{b.lookups.vodSources=a.data})}catch(E){T.value=S.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},c=()=>{if(b.item.name){const l=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${b.item.name}"}]}`;b.item.policy=l}else b.item.policy=null},U=async()=>{const l=b;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const a=S.clone(l.item);await z.post("/api/v1/channels/",a).then(A=>{L.success("Add Channel","Channel added.",{onClose:async()=>{const f=`${B.urlView}/${A.data}`;await Y.push(f)}})})}catch(a){T.value=S.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}};return(l,E)=>{const a=X("router-link"),A=X("PageHeader"),f=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(A,{"page-icon":"fas fa-fw fa-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",Yf,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:E[0]||(E[0]=n=>U()),class:"btn btn-primary"},E[9]||(E[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Wf),H(a,{to:B.urlMain,class:"btn btn-secondary ms-2"},{default:D(()=>E[10]||(E[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(f,{errorMessage:o(T),vuelidate:o(h)},{default:D(()=>[e("div",null,[e("div",Kf,[e("div",Jf,[e("div",Qf,[x(e("input",{"onUpdate:modelValue":E[1]||(E[1]=n=>b.item.name=n),onChange:E[2]||(E[2]=n=>c()),id:"name",class:"form-control",placeholder:"name"},null,544),[[R,b.item.name]]),E[11]||(E[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Xf,[(t(!0),s(q,null,G(o(h).item.name.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):I("",!0)])]),e("div",Zf,[e("div",ep,[x(e("input",{"onUpdate:modelValue":E[3]||(E[3]=n=>b.item.tier=n),id:"tier",class:"form-control",placeholder:"tier",disabled:""},null,512),[[R,b.item.tier]]),E[12]||(E[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(h).item.tier.$error?(t(),s("div",tp,[(t(!0),s(q,null,G(o(h).item.tier.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):I("",!0)])]),e("div",sp,[e("div",op,[x(e("input",{"onUpdate:modelValue":E[4]||(E[4]=n=>b.item.playbackMode=n),id:"playbackMode",class:"form-control",placeholder:"playbackMode",disabled:""},null,512),[[R,b.item.playbackMode]]),E[13]||(E[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(h).item.playbackMode.$error?(t(),s("div",ap,[(t(!0),s(q,null,G(o(h).item.playbackMode.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):I("",!0)])])]),e("div",lp,[e("div",np,[x(e("textarea",{"onUpdate:modelValue":E[5]||(E[5]=n=>b.item.policy=n),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[R,b.item.policy]]),E[14]||(E[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o(h).item.policy.$error?(t(),s("div",rp,[(t(!0),s(q,null,G(o(h).item.policy.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):I("",!0)])]),E[17]||(E[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",ip,[e("div",dp,[e("div",up,[x(e("select",{"onUpdate:modelValue":E[6]||(E[6]=n=>b.item.fillerSlateSourceLocationId=n),onChange:E[7]||(E[7]=n=>K()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(q,null,G(b.lookups.sourceLocations,n=>(t(),s("option",{value:n.id},v(n.name),9,cp))),256))],544),[[ge,b.item.fillerSlateSourceLocationId]]),E[15]||(E[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.fillerSlateSourceLocationId.$error?(t(),s("div",mp,[(t(!0),s(q,null,G(o(h).item.fillerSlateSourceLocationId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):I("",!0)])]),e("div",fp,[e("div",pp,[x(e("select",{"onUpdate:modelValue":E[8]||(E[8]=n=>b.item.fillerSlateVodSourceId=n),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(q,null,G(b.lookups.vodSources,n=>(t(),s("option",{value:n.id},v(n.name),9,vp))),256))],512),[[ge,b.item.fillerSlateVodSourceId]]),E[16]||(E[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.fillerSlateVodSourceId.$error?(t(),s("div",gp,[(t(!0),s(q,null,G(o(h).item.fillerSlateVodSourceId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):I("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yp={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function $p(i,d,$,_,g,F){const T=X("Page");return t(),de(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const wp=Se(yp,[["render",$p]]),hp={class:"d-flex justify-content-end"},_p={class:"ms-1"},kp={class:"input-group"},Sp={class:"table-responsive"},Tp={class:"table table-hover mb-0"},Mp=["textContent"],Cp="/api/v1/channels/search",Ip={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(i){ye("$config");const $=be().user,{appTitle:_,pageTitle:g,busy:F,infoMessage:T,warningMessage:Y,errorMessage:z,router:S,axios:L,utils:Q,toasts:j,close:B,security:b,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:r,getRowNumber:c,setSelected:U,isSelected:l}=Ae({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${$==null?void 0:$.userId}/Channels/search`,baseUrl:Cp,filter:{updateUrl:!0}});return ie(async()=>{h(),await r()}),(E,a)=>{const A=X("router-link"),f=X("PageHeader"),n=X("m-pagination"),p=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(f,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(g)},{default:D(()=>[e("div",hp,[H(A,{to:i.urlAdd,class:"btn btn-primary"},{default:D(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",_p,[e("div",kp,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[R,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(r)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),H(p,{errorMessage:o(z)},{default:D(()=>[e("div",Sp,[e("table",Tp,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(o(M).items,(m,y)=>(t(),s("tr",{key:m.channelId},[e("td",{textContent:v(o(c)(y)),class:"text-center"},null,8,Mp),e("td",null,[H(A,{to:`${i.urlView}/${m.channelId}`,class:"d-inline-block text-truncate"},{default:D(()=>[N(v(m.name),1)]),_:2},1032,["to"])]),e("td",null,v(m.playbackMode),1),e("td",null,v(m.tier),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),H(n,{filter:o(M),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},xp=["id"],Pp={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Vp={class:"modal-content"},Up={class:"modal-header bg-primary text-white"},Op={class:"modal-title",id:"exampleModalLabel"},Ap={class:"modal-body"},Dp={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ep=["innerHTML"],Hp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Lp={class:"container"},Bp={class:"col"},qp={class:"form-floating mb-2"},Np=["value"],Rp={class:"row row-cols-1 row-cols-sm-2"},zp={class:"col"},Fp={class:"form-floating mb-2"},jp={key:0,class:"d-block invalid-feedback"},Gp={class:"col"},Yp={class:"form-floating mb-2"},Wp={key:0,class:"d-block invalid-feedback"},Kp={key:0},Jp={class:"row row-cols-1 row-cols-sm-3"},Qp={class:"col"},Xp={class:"form-floating mb-2"},Zp={class:"col"},ev={class:"form-floating mb-2"},tv={class:"col"},sv={class:"form-floating mb-2"},ov={class:"row row-cols-1 row-cols-sm-2"},av={class:"col"},lv={class:"form-floating mb-2"},nv={class:"col"},rv={class:"form-floating mb-2"},iv={class:"row row-cols-1 row-cols-sm-2"},dv={class:"col"},uv={class:"form-floating mb-2"},cv={class:"col"},mv={class:"form-floating mb-2"},fv={key:1},pv={class:"table-responsive border mt-1"},vv={class:"table mb-0"},gv=["onUpdate:modelValue"],bv=["value"],yv={class:"modal-footer"},$v=["disabled"],wv={__name:"_addProgramFromTemplate",emits:["onClose"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=$,K=re(),r=re("modalAddProgramFromTemplate"),c=fe({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),U={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},l=$e(U,c);ie(async()=>{l.value.$reset()});const E=async(J,u,O)=>{K.value=J;const V=c;Y.value.clear(),L.value="";const ae=B.moment(O),se=ae.format("YYYY-MM-DD HH:mm"),ke=ae.format("YYYYMMDD_HHmm")+"_PRG_";V.eventId=u,V.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},V.selected={programTemplate:null},V.item={programTemplateId:null,name:ke,dateScheduledStart:se,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),await n(),l.value.$reset();var Te=document.getElementById(r.value),Ee=we.getOrCreateInstance(Te);Ee.show()},a=async J=>{const u=c.selected.channel.programs;if(J&&u.find(Ee=>Ee.name===c.item.name)){alert(`Program name = [${c.item.name}] already exists.`);return}if(!J){W("onClose",{eventId:c.eventId},J);var se=document.getElementById(r.value),ke=we.getOrCreateInstance(se);ke.hide();return}const O=c,V=B.moment(O.item.dateScheduledStart).utc().format(),ae=B.moment(O.item.dateScheduledStart).add(O.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),ve={eventId:O.eventId,programTemplateId:O.selected.programTemplate.programTemplateId,channelId:O.selected.channel.channelId,name:O.item.name,dateScheduledStart:V,dateScheduledEnd:ae,adBreaks:O.selected.programTemplate.adBreaks.map(Te=>({sourceLocationId:O.selected.programTemplate.sourceLocationId,vodSourceId:Te.vodSourceId,offsetMillis:Te.offsetMillis,durationInMillis:Te.durationInMillis}))};W("onClose",ve,J);var se=document.getElementById(r.value),ke=we.getOrCreateInstance(se);ke.hide()},A=async()=>{await a(!0)},f=async()=>{try{const J=`/api/v1/channels/${K.value}/`;await j.get(J).then(u=>{c.selected.channel=u.data})}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},n=async()=>{await w(),await oe(),await p()},p=async()=>{try{const J=`/api/v1/programTemplates/lookup/by-channel/${K.value}`;await j.get(J).then(u=>{c.lookups.programTemplates=u.data,c.lookups.programTemplates.length===1&&(c.item.programTemplateId=c.lookups.programTemplates[0].id)}),c.item.programTemplateId&&await m()}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},m=async()=>{await y(c.item.programTemplateId)},y=async J=>{try{const u=`/api/v1/programTemplates/${J}/`;await j.get(u).then(ae=>{c.selected.programTemplate=ae.data;const ve=c.selected.programTemplate;ve.startOffsetTime=B.moment.utc(ve.startOffsetMillis).format("HH:mm:ss"),ve.endOffsetTime=B.moment.utc(ve.endOffsetMillis).format("HH:mm:ss"),ve.durationTime=B.moment.utc(ve.durationInMillis).format("HH:mm:ss"),ve.adBreaksDurationTime=B.moment.utc(ve.adBreaksDurationInMillis).format("HH:mm:ss"),ve.totalProgramTemplateDurationTime=B.moment.utc(ve.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ve.adBreaks.forEach(se=>{se.vodSourceId=null})});const O=c,V=O.selected.channel.outputs[0].outputType;await P(O.selected.programTemplate.sourceLocationId,V)}catch(u){L.value=B.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},w=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(u=>{c.lookups.sourceLocations=u.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await C(c.item.sourceLocationId)}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},C=async J=>{try{let u=`/api/v1/vodSources/lookup/source-location/${J}`;await j.get(u).then(O=>{c.lookups.vodSources=O.data})}catch(u){L.value=B.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},P=async(J,u)=>{try{let O=`/api/v1/vodsources/lookup/source-location/${J}/output-type/${u}`;await j.get(O).then(V=>{c.lookups.adBreakVodSources=V.data})}catch(O){L.value=B.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},oe=async()=>{try{const J=`/api/v1/programs/lookup/?channelId=${K.value}`;await j.get(J).then(u=>{c.lookups.channelPrograms=u.data;const O=c.lookups.channelPrograms.length})}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}};return d({open:E,close:a}),(J,u)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Pp,[e("div",Vp,[e("div",Up,[e("h5",Op,v(o(_))+" - "+v(o(g)),1),e("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=O=>a(!1)),"aria-label":"Close"})]),e("div",Ap,[o(L)?(t(),s("div",Dp,[u[14]||(u[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,Ep)])):I("",!0),o(Y).size>0?(t(),s("div",Hp,[u[15]||(u[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),O=>(t(),s("li",null,v(O),1))),256))])])):I("",!0),e("div",Lp,[e("div",Bp,[e("div",qp,[x(e("select",{"onUpdate:modelValue":u[1]||(u[1]=O=>c.item.programTemplateId=O),class:"form-select",onChange:u[2]||(u[2]=O=>m()),id:"sourceLocationId"},[(t(!0),s(q,null,G(c.lookups.programTemplates,O=>(t(),s("option",{value:O.id}," ["+v(o(B).moment.utc(O.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+v(O.name),9,Np))),256))],544),[[ge,c.item.programTemplateId]]),u[16]||(u[16]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Rp,[e("div",zp,[e("div",Fp,[x(e("input",{"onUpdate:modelValue":u[3]||(u[3]=O=>c.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,c.item.name]]),u[17]||(u[17]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",jp,[(t(!0),s(q,null,G(o(l).item.name.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])]),e("div",Gp,[e("div",Yp,[x(e("input",{"onUpdate:modelValue":u[4]||(u[4]=O=>c.item.dateScheduledStart=O),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[R,c.item.dateScheduledStart]]),u[18]||(u[18]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",Wp,[(t(!0),s(q,null,G(o(l).item.dateScheduledStart.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])])]),c.selected.programTemplate?(t(),s("div",Kp,[e("div",Jp,[e("div",Qp,[e("div",Xp,[x(e("input",{"onUpdate:modelValue":u[5]||(u[5]=O=>c.selected.programTemplate.startOffsetTime=O),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[R,c.selected.programTemplate.startOffsetTime]]),u[19]||(u[19]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Zp,[e("div",ev,[x(e("input",{"onUpdate:modelValue":u[6]||(u[6]=O=>c.selected.programTemplate.endOffsetTime=O),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[R,c.selected.programTemplate.endOffsetTime]]),u[20]||(u[20]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",tv,[e("div",sv,[x(e("input",{"onUpdate:modelValue":u[7]||(u[7]=O=>c.selected.programTemplate.durationTime=O),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[R,c.selected.programTemplate.durationTime]]),u[21]||(u[21]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",ov,[e("div",av,[e("div",lv,[x(e("input",{"onUpdate:modelValue":u[8]||(u[8]=O=>c.selected.programTemplate.adBreaksDurationTime=O),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[R,c.selected.programTemplate.adBreaksDurationTime]]),u[22]||(u[22]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",nv,[e("div",rv,[x(e("input",{"onUpdate:modelValue":u[9]||(u[9]=O=>c.selected.programTemplate.totalProgramTemplateDurationTime=O),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[R,c.selected.programTemplate.totalProgramTemplateDurationTime]]),u[23]||(u[23]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",iv,[e("div",dv,[e("div",uv,[x(e("input",{"onUpdate:modelValue":u[10]||(u[10]=O=>c.selected.programTemplate.sourceLocation.name=O),id:"name",class:"form-control",disabled:""},null,512),[[R,c.selected.programTemplate.sourceLocation.name]]),u[24]||(u[24]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",cv,[e("div",mv,[x(e("input",{"onUpdate:modelValue":u[11]||(u[11]=O=>c.selected.programTemplate.vodSource.name=O),id:"name",class:"form-control",disabled:""},null,512),[[R,c.selected.programTemplate.vodSource.name]]),u[25]||(u[25]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):I("",!0),u[28]||(u[28]=e("hr",null,null,-1)),c.selected.programTemplate?(t(),s("div",fv,[u[27]||(u[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",pv,[e("table",vv,[u[26]||(u[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(q,null,G(c.selected.programTemplate.adBreaks,(O,V)=>(t(),s("tr",null,[e("td",null,v(V+1),1),e("td",null,v(o(B).moment.utc(O.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(B).moment.utc(O.durationInMillis).format("HH:mm:ss")),1),e("td",null,[x(e("select",{"onUpdate:modelValue":ae=>O.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,G(c.lookups.adBreakVodSources,ae=>(t(),s(q,null,[ae.durationInMillis===O.durationInMillis?(t(),s("option",{key:0,value:ae.id}," ["+v(o(B).moment.utc(ae.durationInMillis).format("HH:mm:ss"))+"] "+v(ae.name),9,bv)):I("",!0)],64))),256))],8,gv),[[ge,O.vodSourceId]])])]))),256))])])])])):I("",!0)])]),e("div",yv,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:u[12]||(u[12]=O=>A()),class:"btn btn-primary",type:"button"},u[29]||(u[29]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$v),e("button",{onClick:u[13]||(u[13]=O=>a(!1)),class:"btn btn-secondary ms-1"},u[30]||(u[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,xp))}},hv=["id"],_v={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},kv={class:"modal-content"},Sv={class:"modal-header bg-primary text-white"},Tv={class:"modal-title",id:"exampleModalLabel"},Mv={class:"modal-body"},Cv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Iv=["innerHTML"],xv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Pv={key:2,class:"container"},Vv={class:"row row-cols-1 row-cols-sm-3"},Uv={class:"col"},Ov={class:"form-floating mb-2"},Av={id:"name",class:"form-control",placeholder:"Name"},Dv={key:0,class:"text-wrap"},Ev={class:"badge bg-info"},Hv={key:0,class:"d-block invalid-feedback"},Lv={class:"col"},Bv={class:"form-floating mb-2"},qv={key:0,class:"d-block invalid-feedback"},Nv={class:"col"},Rv={class:"form-floating mb-2"},zv={key:0,class:"d-block invalid-feedback"},Fv={key:0},jv={class:"row row-cols-1 row-cols-sm-3"},Gv={class:"col"},Yv={class:"form-floating mb-2"},Wv={class:"col"},Kv={class:"form-floating mb-2"},Jv={class:"col"},Qv={class:"form-floating mb-2"},Xv={class:"row row-cols-1 row-cols-sm-2"},Zv={class:"col"},eg={class:"form-floating mb-2"},tg={class:"col"},sg={class:"form-floating mb-2"},og={class:"row row-cols-1 row-cols-sm-2"},ag={key:0,class:"col"},lg={class:"form-floating mb-2"},ng={key:1,class:"col"},rg={class:"form-floating mb-2"},ig={key:1},dg={class:"table-responsive border mt-1"},ug={class:"table mb-0"},cg=["onUpdate:modelValue"],mg=["value"],fg={class:"modal-footer"},pg=["disabled"],at={__name:"_editProgram",emits:["onClose"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=$,K=re(),r=re("modalEditProgram"),c=fe({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),U={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},l=$e(U,c);ie(async()=>{l.value.$reset()});const E=async(m,y)=>{K.value=m;const w=c;if(Y.value.clear(),L.value="",w.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},w.item=null,await f(),y){const u=B.moment(y).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=u}await n(),l.value.$reset();var C=document.getElementById(r.value),P=we.getOrCreateInstance(C);P.show()},a=async m=>{if(!m){W("onClose",m);var P=document.getElementById(r.value),oe=we.getOrCreateInstance(P);oe.hide();return}const y=c,w=B.moment(y.item.dateScheduledStart).utc().format(),C={programId:K.value,name:y.item.name,dateScheduledStart:w,adBreaks:y.item.adBreaks.map(J=>({sourceLocationId:y.item.sourceLocationId,vodSourceId:J.vodSourceId,offsetMillis:J.offsetMillis,durationInMillis:J.durationInMillis}))};try{await j.put("/api/v1/programs/",C).then(u=>{b.success("Edit Program","Program was edited.")})}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0);return}finally{}W("onClose",m);var P=document.getElementById(r.value),oe=we.getOrCreateInstance(P);oe.hide()},A=async()=>{await a(!0)},f=async()=>{try{const m=`/api/v1/programs/${K.value}/`;await j.get(m).then(C=>{c.item=C.data;const P=c.item,u=B.moment(P.dateScheduledStart).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=u,P.startOffsetTime=B.moment.utc(P.startOffsetMillis).format("HH:mm:ss"),P.endOffsetTime=B.moment.utc(P.endOffsetMillis).format("HH:mm:ss"),P.durationTime=B.moment.utc(P.durationInMillis).format("HH:mm:ss"),P.adBreaksDurationTime=B.moment.utc(P.adBreaksDurationInMillis).format("HH:mm:ss"),P.totalProgramTemplateDurationTime=B.moment.utc(P.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const y=c,w=y.item.channel.outputs[0].outputType;await p(y.item.sourceLocationId,w)}catch(m){L.value=B.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},n=async()=>{},p=async(m,y)=>{try{let w=`/api/v1/vodsources/lookup/source-location/${m}/output-type/${y}`;await j.get(w).then(C=>{c.lookups.adBreakVodSources=C.data})}catch(w){L.value=B.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}};return d({open:E,close:a}),(m,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",_v,[e("div",kv,[e("div",Sv,[e("h5",Tv,v(o(_))+" - "+v(o(g)),1),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=w=>a(!1)),"aria-label":"Close"})]),e("div",Mv,[o(L)?(t(),s("div",Cv,[y[12]||(y[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,Iv)])):I("",!0),o(Y).size>0?(t(),s("div",xv,[y[13]||(y[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),w=>(t(),s("li",null,v(w),1))),256))])])):I("",!0),c.item?(t(),s("div",Pv,[e("div",Vv,[e("div",Uv,[e("div",Ov,[e("div",Av,[c.item.relativeProgram?(t(),s("span",Dv,[N(v(c.item.relativeProgram.name)+" - ",1),e("span",Ev,v(o(B).moment(c.item.relativeProgram.scheduledDateStart).format("DD/MM/YYYY HH:mm a")),1)])):I("",!0)]),y[14]||(y[14]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(l).item.name.$error?(t(),s("div",Hv,[(t(!0),s(q,null,G(o(l).item.name.$errors,w=>(t(),s("div",{key:w.$uid},v(w.$message),1))),128))])):I("",!0)])]),e("div",Lv,[e("div",Bv,[x(e("input",{"onUpdate:modelValue":y[1]||(y[1]=w=>c.item.name=w),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,c.item.name]]),y[15]||(y[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",qv,[(t(!0),s(q,null,G(o(l).item.name.$errors,w=>(t(),s("div",{key:w.$uid},v(w.$message),1))),128))])):I("",!0)])]),e("div",Nv,[e("div",Rv,[x(e("input",{"onUpdate:modelValue":y[2]||(y[2]=w=>c.item.dateScheduledStart=w),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[R,c.item.dateScheduledStart]]),y[16]||(y[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",zv,[(t(!0),s(q,null,G(o(l).item.dateScheduledStart.$errors,w=>(t(),s("div",{key:w.$uid},v(w.$message),1))),128))])):I("",!0)])])]),c.item?(t(),s("div",Fv,[e("div",jv,[e("div",Gv,[e("div",Yv,[x(e("input",{"onUpdate:modelValue":y[3]||(y[3]=w=>c.item.startOffsetTime=w),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[R,c.item.startOffsetTime]]),y[17]||(y[17]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Wv,[e("div",Kv,[x(e("input",{"onUpdate:modelValue":y[4]||(y[4]=w=>c.item.endOffsetTime=w),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[R,c.item.endOffsetTime]]),y[18]||(y[18]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Jv,[e("div",Qv,[x(e("input",{"onUpdate:modelValue":y[5]||(y[5]=w=>c.item.durationTime=w),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[R,c.item.durationTime]]),y[19]||(y[19]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Xv,[e("div",Zv,[e("div",eg,[x(e("input",{"onUpdate:modelValue":y[6]||(y[6]=w=>c.item.adBreaksDurationTime=w),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[R,c.item.adBreaksDurationTime]]),y[20]||(y[20]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",tg,[e("div",sg,[x(e("input",{"onUpdate:modelValue":y[7]||(y[7]=w=>c.item.totalProgramTemplateDurationTime=w),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[R,c.item.totalProgramTemplateDurationTime]]),y[21]||(y[21]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",og,[c.item.sourceLocation?(t(),s("div",ag,[e("div",lg,[x(e("input",{"onUpdate:modelValue":y[8]||(y[8]=w=>c.item.sourceLocation.name=w),id:"name",class:"form-control",disabled:""},null,512),[[R,c.item.sourceLocation.name]]),y[22]||(y[22]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):I("",!0),c.item.vodSource?(t(),s("div",ng,[e("div",rg,[x(e("input",{"onUpdate:modelValue":y[9]||(y[9]=w=>c.item.vodSource.name=w),id:"name",class:"form-control",disabled:""},null,512),[[R,c.item.vodSource.name]]),y[23]||(y[23]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):I("",!0)])])):I("",!0),y[26]||(y[26]=e("hr",null,null,-1)),c.item?(t(),s("div",ig,[y[25]||(y[25]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",dg,[e("table",ug,[y[24]||(y[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(q,null,G(c.item.adBreaks,(w,C)=>(t(),s("tr",null,[e("td",null,v(C+1),1),e("td",null,v(o(B).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(B).moment.utc(w.durationInMillis).format("HH:mm:ss")),1),e("td",null,[x(e("select",{"onUpdate:modelValue":P=>w.vodSourceId=P,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,G(c.lookups.adBreakVodSources,P=>(t(),s(q,null,[P.durationInMillis===w.durationInMillis?(t(),s("option",{key:0,value:P.id}," ["+v(o(B).moment.utc(P.durationInMillis).format("HH:mm:ss"))+"] "+v(P.name),9,mg)):I("",!0)],64))),256))],8,cg),[[ge,w.vodSourceId]])])]))),256))])])])])):I("",!0)])):I("",!0)]),e("div",fg,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:y[10]||(y[10]=w=>A()),class:"btn btn-primary ms-2",type:"button"},y[27]||(y[27]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pg),e("button",{onClick:y[11]||(y[11]=w=>a(!1)),class:"btn btn-secondary ms-1"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,hv))}},vg={class:"d-flex justify-content-end"},gg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(i){const{appTitle:d,pageTitle:$,busy:_,infoMessage:g,warningMessage:F,errorMessage:T,router:Y,axios:z,utils:S,toasts:L,close:Q,security:j}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),B=i,b=re(null),M=re(null),h=re(null),W={viewType:"Week",cellDuration:15,startDate:Pe.DayPilot.Date.today(),onTimeRangeSelected:f=>{var n=f.control;const p={start:f.start,end:f.end,id:Pe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};n.events.add(p);var m=n.events.find(p.id);E(m)},onBeforeEventRender:f=>{if(f.data.barColor="green",!!f.data.tags)switch(f.data.tags.type){case"new":f.data.barColor="yellow";break;case"business":f.data.barColor="#3498db";break;case"personal":f.data.barColor="#2ecc71";break;case"vacation":f.data.barColor="#f1c40f";break;default:f.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:async f=>{const n=f.newStart.value,p=f.e.id(),m=S.moment(n).utc().format();try{let y="/api/v1/programs/scheduled-date-start";const w={programId:p,dateScheduledStart:m};await z.put(y,w).then(C=>{L.success("Program date scheduled start was edited.")})}catch(y){T.value=S.getErrorMessageAsHtml(y),window.scrollTo(0,0);return}finally{}await U()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async f=>{var n=f.e.id();A(n)},contextMenu:new Pe.DayPilot.Menu([{text:"Clone",onClick:async f=>{const n=f.source.id();try{let p=`/api/v1/programs/${n}/clone`;await z.post(p).then(m=>{L.success("Clone Program","Program was cloned.")})}catch(p){T.value=S.getErrorMessageAsHtml(p),window.scrollTo(0,0);return}finally{await U()}}},{text:"Delete",onClick:async f=>{if(!confirm("Do you want to remove this program?"))return;const p=f.source.id();try{let m=`/api/v1/programs/${p}/`;await z.delete(m).then(y=>{L.success("Delete Program","Program was deleted.")}),b.value.control.events.remove(f.source)}catch(m){T.value=S.getErrorMessageAsHtml(m),window.scrollTo(0,0);return}finally{await U()}}}])},K=re([]),r=()=>{b.value.control.update({events:K.value})},c=fe({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});ie(async()=>{await U()});const U=async()=>{await l(),await r()},l=async()=>{const f=c;if(!_.value)try{_.value=!0,T.value="";const n=`/api/v1/channels/${B.id}/`;await z.get(n).then(p=>{f.item=p.data;const m=f.item.outputs,y=f.item.programs.map(w=>{let C=`${w.name}`,P=`[${w.name}]`;return w.relativeProgram&&(P+=` => [${w.relativeProgram.name}]`),{start:S.moment(w.dateScheduledStart).utc(!0).format(),end:S.moment(w.dateScheduledEnd).utc(!0).format(),id:w.programId,text:C,toolTip:P}});K.value=y})}catch(n){T.value=S.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}},E=f=>{M.value.open(B.id,f.id(),f.start().value)},a=async(f,n)=>{var p=b.value,m=p.control.events.find(f.eventId);if(!n&&m){b.value.control.events.remove(m);return}p.control.events.find(J=>J.text()==f.name)&&(alert("Program already exists in this channel. Removing in the calendar."),b.value.control.events.remove(m));const w=S.moment(f.dateScheduledStart).utc(!0).format(),C=S.moment(f.dateScheduledEnd).utc(!0).format(),P=new Pe.DayPilot.Date(w),oe=new Pe.DayPilot.Date(C);m.text(f.name),m.start(new Pe.DayPilot.Date(P)),m.end(new Pe.DayPilot.Date(oe)),m.data.tags.program=f,m.commit(),b.value.control.update(),await z.post("/api/v1/programs/from-template/",f).then(J=>{L.success("Add New Program",`Program [${f.name}] was added to this channel.`)},J=>{const u=S.getErrorMessageAsHtml(J);alert(u)}),await U()},A=(f,n)=>{h.value.open(f,n)};return(f,n)=>{const p=X("router-link"),m=X("PageHeader"),y=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(m,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:D(()=>[e("div",vg,[e("button",{onClick:n[0]||(n[0]=w=>U()),class:"btn btn-secondary ms-1"},n[1]||(n[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),H(p,{to:`${i.urlView}/${i.id}`,class:"btn btn-secondary ms-1"},{default:D(()=>n[2]||(n[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),H(y,{errorMessage:o(T),vuelidate:f.v$},{default:D(()=>[e("div",null,[H(o(Pe.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:b},null,512),H(wv,{ref_key:"modalAddProgram",ref:M,onOnClose:a},null,512),H(at,{ref_key:"modalEditProgram",ref:h,onOnClose:U},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},bg=["id"],yg={class:"modal-dialog modal-xl modal-fullscreen-md-down"},$g={class:"modal-content"},wg={class:"modal-header bg-primary text-white"},hg={class:"modal-title",id:"exampleModalLabel"},_g={class:"modal-body"},kg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Sg=["innerHTML"],Tg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Mg={class:"container"},Cg={class:"row row-cols-1 row-cols-sm-3"},Ig={class:"col"},xg={class:"form-floating mb-2"},Pg=["disabled"],Vg=["value"],Ug={class:"col"},Og={class:"form-floating mb-2"},Ag={key:0,class:"d-block invalid-feedback"},Dg={class:"col"},Eg={class:"form-floating mb-2"},Hg={key:0,class:"d-block invalid-feedback"},Lg={class:"row row-cols-sm-2"},Bg={class:"col"},qg={class:"form-floating mb-2"},Ng=["value"],Rg={key:0,class:"d-block invalid-feedback"},zg={class:"col"},Fg={class:"form-floating mb-2"},jg=["value"],Gg={key:0,class:"d-block invalid-feedback"},Yg={class:"col"},Wg={class:"input-group mb-1"},Kg={class:"form-floating"},Jg={key:0,class:"input-group-text"},Qg={key:0},Xg={key:1},Zg={key:2},e1={key:3,class:"d-block invalid-feedback"},t1={class:"col"},s1={class:"input-group mb-1"},o1={class:"form-floating"},a1={key:0,class:"input-group-text"},l1={key:0},n1={key:1},r1={key:2,class:"d-block invalid-feedback"},i1={class:"table-responsive border mt-1"},d1={class:"table"},u1={class:"input-group mb-1"},c1=["onUpdate:modelValue"],m1={key:0,class:"input-group-text"},f1=["onUpdate:modelValue"],p1=["value"],v1=["onUpdate:modelValue"],g1=["value"],b1=["onClick"],y1={class:"modal-footer"},$1=["disabled"],w1={__name:"_addProgram",emits:["refresh"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=$,K=re(),r=re("modalAddProgram"),c=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),U={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},l=$e(U,c);ie(async()=>{l.value.$reset()});const E=async J=>{K.value=J;const u=c;Y.value.clear(),L.value="";const O=B.moment().local().add(2,"m"),ae=O.format("YYYY-MM-DD HH:mm"),ve=O.format("YYYY_MM_DD")+"_PROGRAM_";u.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},u.item={name:ve,relativeProgramId:null,dateScheduledStart:ae,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),l.value.$reset();var se=document.getElementById(r.value),ke=we.getOrCreateInstance(se);ke.show()},a=async()=>{var J=document.getElementById(r.value),u=we.getOrCreateInstance(J);u.hide(),W("refresh")},A=async()=>{const J=c;if(F.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{F.value=!0,L.value="";const V=J.item;delete V.vodSource,V.channelId=K.value;var O=V.dateScheduledStart;V.dateScheduledStart=B.moment(O).utc().format(),await j.post("/api/v1/programs/",V).then(ae=>{b.success("Add Program","Program added to Channel",{async onClose(){}})}),await a()}catch(V){L.value=B.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{F.value=!1}},f=async()=>{await n(),await m(),await w()},n=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(u=>{c.lookups.sourceLocations=u.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await p(c.item.sourceLocationId)}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},p=async J=>{try{let u=`/api/v1/vodSources/lookup/source-location/${J}`;await j.get(u).then(O=>{c.lookups.vodSources=O.data})}catch(u){L.value=B.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},m=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(u=>{c.lookups.adBreakSourceLocations=u.data})}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},y=async J=>{try{let u=`/api/v1/vodSources/lookup/source-location/${J}`;await j.get(u).then(O=>{c.lookups.adBreakVodSources=O.data})}catch(u){L.value=B.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},w=async()=>{try{const J=`/api/v1/programs/lookup/?channelId=${K.value}`;await j.get(J).then(u=>{if(c.lookups.channelPrograms=u.data,c.lookups.channelPrograms.length===1){const V=c.lookups.channelPrograms[0];c.item.relativeProgramId=V.id}})}catch(J){L.value=B.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},C=()=>{const J={offsetMillis:0,sourceLocationId:null,vodSourceId:null},u=c.item.adBreaks.length;if(u>0){const O=c.item.adBreaks[u-1];J.offsetMillis=O.offsetMillis+1e4}c.item.adBreaks.push(J)},P=J=>{c.item.adBreaks.splice(J,1)},oe=()=>{const J=c.item.vodSource;c.item.vodSourceId=J.id};return d({open:E,close:a}),(J,u)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",yg,[e("div",$g,[e("div",wg,[e("h5",hg,v(o(_))+" - "+v(o(g)),1),u[11]||(u[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",_g,[o(L)?(t(),s("div",kg,[u[12]||(u[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,Sg)])):I("",!0),o(Y).size>0?(t(),s("div",Tg,[u[13]||(u[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),O=>(t(),s("li",null,v(O),1))),256))])])):I("",!0),e("div",Mg,[e("div",Cg,[e("div",Ig,[e("div",xg,[x(e("select",{"onUpdate:modelValue":u[0]||(u[0]=O=>c.item.relativeProgramId=O),class:"form-select",id:"sourceLocationId",disabled:c.lookups.channelPrograms.length<=0},[(t(!0),s(q,null,G(c.lookups.channelPrograms,O=>(t(),s("option",{value:O.id},v(O.name),9,Vg))),256))],8,Pg),[[ge,c.item.relativeProgramId]]),u[14]||(u[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",Ug,[e("div",Og,[x(e("input",{"onUpdate:modelValue":u[1]||(u[1]=O=>c.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,c.item.name]]),u[15]||(u[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",Ag,[(t(!0),s(q,null,G(o(l).item.name.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])]),e("div",Dg,[e("div",Eg,[x(e("input",{"onUpdate:modelValue":u[2]||(u[2]=O=>c.item.dateScheduledStart=O),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[R,c.item.dateScheduledStart]]),u[16]||(u[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",Hg,[(t(!0),s(q,null,G(o(l).item.dateScheduledStart.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])])]),e("div",Lg,[e("div",Bg,[e("div",qg,[x(e("select",{"onUpdate:modelValue":u[3]||(u[3]=O=>c.item.sourceLocationId=O),onChange:u[4]||(u[4]=O=>p(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,G(c.lookups.sourceLocations,O=>(t(),s("option",{value:O.id},v(O.name),9,Ng))),256))],544),[[ge,c.item.sourceLocationId]]),u[17]||(u[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(l).item.sourceLocationId.$error?(t(),s("div",Rg,[(t(!0),s(q,null,G(o(l).item.sourceLocationId.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])]),e("div",zg,[e("div",Fg,[x(e("select",{"onUpdate:modelValue":u[5]||(u[5]=O=>c.item.vodSource=O),onChange:u[6]||(u[6]=O=>oe()),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,G(c.lookups.vodSources,O=>(t(),s("option",{value:O},v(O.name),9,jg))),256))],544),[[ge,c.item.vodSource]]),u[18]||(u[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(l).item.vodSourceId.$error?(t(),s("div",Gg,[(t(!0),s(q,null,G(o(l).item.vodSourceId.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])]),e("div",Yg,[e("div",Wg,[e("div",Kg,[x(e("input",{"onUpdate:modelValue":u[7]||(u[7]=O=>c.item.startOffsetMillis=O),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[R,c.item.startOffsetMillis]]),u[19]||(u[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),c.item.startOffsetMillis>0?(t(),s("span",Jg,v(o(B).moment.utc(c.item.startOffsetMillis).format("HH:mm:ss")),1)):I("",!0)]),c.item.startOffsetMillis>0&&c.item.startOffsetMillis<3e4?(t(),s("div",Qg,u[20]||(u[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):I("",!0),c.item.startOffsetMillis>c.item.endOffsetMillis&&c.item.endOffsetMillis>0?(t(),s("div",Xg,u[21]||(u[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):I("",!0),c.item.vodSource&&c.item.startOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",Zg,u[22]||(u[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):I("",!0),o(l).item.startOffsetMillis.$error?(t(),s("div",e1,[(t(!0),s(q,null,G(o(l).item.startOffsetMillis.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)]),e("div",t1,[e("div",s1,[e("div",o1,[x(e("input",{"onUpdate:modelValue":u[8]||(u[8]=O=>c.item.endOffsetMillis=O),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[R,c.item.endOffsetMillis]]),u[23]||(u[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),c.item.endOffsetMillis>0?(t(),s("span",a1,v(o(B).moment.utc(c.item.endOffsetMillis).format("HH:mm:ss")),1)):I("",!0)]),c.item.endOffsetMillis>0&&c.item.endOffsetMillis<3e4?(t(),s("div",l1,u[24]||(u[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):I("",!0),c.item.vodSource&&c.item.endOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",n1,u[25]||(u[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):I("",!0),o(l).item.endOffsetMillis.$error?(t(),s("div",r1,[(t(!0),s(q,null,G(o(l).item.endOffsetMillis.$errors,O=>(t(),s("div",{key:O.$uid},v(O.$message),1))),128))])):I("",!0)])]),u[29]||(u[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[u[26]||(u[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:C,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",i1,[e("table",d1,[u[28]||(u[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,G(c.item.adBreaks,(O,V)=>(t(),s("tr",null,[e("td",null,v(V+1),1),e("td",null,[e("div",u1,[x(e("input",{"onUpdate:modelValue":ae=>O.offsetMillis=ae,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,c1),[[R,O.offsetMillis]]),O.offsetMillis>0?(t(),s("span",m1,v(o(B).moment.utc(O.offsetMillis).format("HH:mm:ss")),1)):I("",!0)])]),e("td",null,[x(e("select",{"onUpdate:modelValue":ae=>O.sourceLocationId=ae,onChange:u[9]||(u[9]=ae=>y(c.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(q,null,G(c.lookups.adBreakSourceLocations,ae=>(t(),s("option",{value:ae.id},v(ae.name),9,p1))),256))],40,f1),[[ge,O.sourceLocationId]])]),e("td",null,[x(e("select",{"onUpdate:modelValue":ae=>O.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,G(c.lookups.adBreakVodSources,ae=>(t(),s("option",{value:ae.id},v(ae.name),9,g1))),256))],8,v1),[[ge,O.vodSourceId]])]),e("td",null,[e("button",{onClick:ae=>P(V),class:"btn btn-outline-warning"},u[27]||(u[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,b1)])]))),256))])])])])])]),e("div",y1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:u[10]||(u[10]=O=>A()),class:"btn btn-primary",type:"button"},u[30]||(u[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$1),u[31]||(u[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,bg))}},h1=["id"],_1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},k1={class:"modal-content"},S1={class:"modal-header bg-primary","data-bs-theme":"dark"},T1={class:"modal-title",id:"exampleModalLabel"},M1={class:"modal-body"},C1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},I1=["innerHTML"],x1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},P1={class:"container"},V1={class:"col"},U1={class:"form-floating mb-2"},O1={class:"col"},A1={class:"form-floating mb-2"},D1={key:0,class:"d-block invalid-feedback"},E1={class:"col"},H1={class:"form-floating mb-2 d-none"},L1={key:0,class:"d-block invalid-feedback"},B1={class:"col"},q1={class:"form-floating mb-2"},N1={key:0,class:"d-block invalid-feedback"},R1={class:"modal-footer"},z1=["disabled"],F1={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=$,K=re(),r=re("modalAddPlaybackConfiguration"),c=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),U={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},l=$e(U,c);ie(async()=>{l.value.$reset()});const E=async(f,n)=>{K.value=f;const p=c;Y.value.clear(),L.value="";const m=n;let y=m.lastIndexOf("/");const w=m.substring(0,y);let C=m.substring(y+1);y=C.lastIndexOf("."),C=C.substring(0,y)+"_ADCAMPAIGN_",p.item={name:C,originalVideoContentSourceUrl:n,videoContentSourceUrl:w,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var P=document.getElementById(r.value),oe=we.getOrCreateInstance(P);oe.show()},a=async()=>{var f=document.getElementById(r.value),n=we.getOrCreateInstance(f);n.hide(),W("refresh")},A=async()=>{const f=c;if(F.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{F.value=!0,L.value="";const p=f.item;p.channelOutputId=K.value,await j.put("/api/v1/channelOutputs/playback/",p).then(m=>{b.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await a()}catch(p){L.value=B.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{F.value=!1}};return d({open:E,close:a}),(f,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",_1,[e("div",k1,[e("div",S1,[e("h5",T1,v(o(_))+" - "+v(o(g)),1),n[5]||(n[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",M1,[o(L)?(t(),s("div",C1,[n[6]||(n[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,I1)])):I("",!0),o(Y).size>0?(t(),s("div",x1,[n[7]||(n[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),p=>(t(),s("li",null,v(p),1))),256))])])):I("",!0),e("div",P1,[e("div",V1,[e("div",U1,[x(e("textarea",{"onUpdate:modelValue":n[0]||(n[0]=p=>c.item.originalVideoContentSourceUrl=p),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[R,c.item.originalVideoContentSourceUrl]]),n[8]||(n[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",O1,[e("div",A1,[x(e("input",{"onUpdate:modelValue":n[1]||(n[1]=p=>c.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[R,c.item.name]]),n[9]||(n[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",D1,[(t(!0),s(q,null,G(o(l).item.name.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):I("",!0)])]),e("div",E1,[e("div",H1,[x(e("input",{"onUpdate:modelValue":n[2]||(n[2]=p=>c.item.videoContentSourceUrl=p),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[R,c.item.videoContentSourceUrl]]),n[10]||(n[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),n[11]||(n[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",L1,[(t(!0),s(q,null,G(o(l).item.videoContentSourceUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):I("",!0)])]),e("div",B1,[e("div",q1,[x(e("textarea",{"onUpdate:modelValue":n[3]||(n[3]=p=>c.item.adDecisionServerUrl=p),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[R,c.item.adDecisionServerUrl]]),n[12]||(n[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",N1,[(t(!0),s(q,null,G(o(l).item.adDecisionServerUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):I("",!0),n[13]||(n[13]=Re('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" disabled>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" disabled>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" disabled>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" disabled>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" disabled>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",R1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:n[4]||(n[4]=p=>A()),class:"btn btn-primary",type:"button"},n[14]||(n[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,z1),n[15]||(n[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,h1))}},j1=["id"],G1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Y1={class:"modal-content"},W1={class:"modal-header bg-primary text-white"},K1={class:"modal-title",id:"exampleModalLabel"},J1={class:"modal-body"},Q1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},X1=["innerHTML"],Z1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},eb={class:"container"},tb={class:"col"},sb={class:"form-floating mb-2"},ob=["value"],ab={key:0,class:"d-block invalid-feedback"},lb={class:"col"},nb={class:"form-floating mb-2"},rb={key:0,class:"d-block invalid-feedback"},ib={class:"col"},db={class:"form-floating mb-2"},ub={key:0,class:"d-block invalid-feedback"},cb={class:"modal-footer"},mb=["disabled"],fb={__name:"_addChannelOutput",emits:["refresh"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=$,K=re(),r=re("modalAddChannelOutput"),c=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),U={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},manifestName:{required:ee.withMessage("Manifest Name is required.",te),$autoDirty:!0,$lazy:!0},outputType:{required:ee.withMessage("Output Type is required.",te),$autoDirty:!0,$lazy:!0}}},l=$e(U,c);ie(async()=>{l.value.$reset()});const E=async()=>{await a()},a=async()=>{try{await j.get("/api/v1/sourceGroups/lookup/").then(m=>{c.lookups.sourceGroups=m.data,c.lookups.sourceGroups.length===1&&(c.item.sourceGroupId=c.lookups.sourceGroups[0].id)})}catch(p){L.value=B.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},A=async p=>{K.value=p;const m=c;Y.value.clear(),L.value="",m.lookups={sourceGroups:[]},m.item={sourceGroupId:null,outputType:null},await E(),l.value.$reset();var y=document.getElementById(r.value),w=we.getOrCreateInstance(y);w.show()},f=async()=>{var p=document.getElementById(r.value),m=we.getOrCreateInstance(p);m.hide(),W("refresh")},n=async()=>{const p=c;if(F.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{F.value=!0,L.value="";const y=p.item;y.channelId=K.value,await j.post("/api/v1/channelOutputs",y).then(w=>{b.success("Add Channel Output","Channel output added.")}),await f()}catch(y){L.value=B.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{F.value=!1}};return d({open:A,close:f}),(p,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",G1,[e("div",Y1,[e("div",W1,[e("h5",K1,v(o(_))+" - "+v(o(g)),1),m[4]||(m[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",J1,[o(L)?(t(),s("div",Q1,[m[5]||(m[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,X1)])):I("",!0),o(Y).size>0?(t(),s("div",Z1,[m[6]||(m[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),y=>(t(),s("li",null,v(y),1))),256))])])):I("",!0),e("div",eb,[e("div",tb,[e("div",sb,[x(e("select",{"onUpdate:modelValue":m[0]||(m[0]=y=>c.item.sourceGroupId=y),class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,G(c.lookups.sourceGroups,y=>(t(),s("option",{value:y.id},v(y.name),9,ob))),256))],512),[[ge,c.item.sourceGroupId]]),m[7]||(m[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(l).item.sourceGroupId.$error?(t(),s("div",ab,[(t(!0),s(q,null,G(o(l).item.sourceGroupId.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):I("",!0)])]),e("div",lb,[e("div",nb,[x(e("select",{"onUpdate:modelValue":m[1]||(m[1]=y=>c.item.outputType=y),class:"form-select",id:"outputType"},m[8]||(m[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ge,c.item.outputType]]),m[9]||(m[9]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(l).item.outputType.$error?(t(),s("div",rb,[(t(!0),s(q,null,G(o(l).item.outputType.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):I("",!0)])]),e("div",ib,[e("div",db,[x(e("input",{"onUpdate:modelValue":m[2]||(m[2]=y=>c.item.manifestName=y),class:"form-control",id:"manifestName"},null,512),[[R,c.item.manifestName]]),m[10]||(m[10]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(l).item.manifestName.$error?(t(),s("div",ub,[(t(!0),s(q,null,G(o(l).item.manifestName.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):I("",!0)])])])]),e("div",cb,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:m[3]||(m[3]=y=>n()),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mb),m[12]||(m[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,j1))}},pb=["id"],vb={class:"modal-dialog modal-xl modal-fullscreen-md-down"},gb={class:"modal-content"},bb={class:"modal-header bg-primary text-white"},yb={class:"modal-title",id:"exampleModalLabel"},$b={class:"modal-body"},wb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hb=["innerHTML"],_b={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kb={class:"container"},Sb={class:"col"},Tb={class:"form-floating mb-2"},Mb=["value"],Cb={key:0,class:"d-block invalid-feedback"},Ib={class:"col"},xb={class:"form-floating mb-2"},Pb=["value"],Vb={key:0,class:"d-block invalid-feedback"},Ub={class:"modal-footer"},Ob=["disabled"],Ab={__name:"_editFillerSlate",emits:["refresh"],setup(i,{expose:d,emit:$}){const{appTitle:_,pageTitle:g,busy:F,isDirty:T,validations:Y,infoMessage:z,warningMessage:S,errorMessage:L,router:Q,axios:j,utils:B,toasts:b,closeWithReturnUrl:M,security:h}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=$,K=re("modalEditFillerSlate"),r=fe({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null}}),c={item:{channelId:{required:ee.withMessage("channelId is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0}}},U=$e(c,r);ie(async()=>{U.value.$reset()});const l=async()=>{await E()},E=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(y=>{r.lookups.sourceLocations=y.data}),r.item.sourceLocationId&&await a(r.item.sourceLocationId)}catch(m){L.value=B.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},a=async m=>{try{let y=`/api/v1/vodSources/lookup/source-Location/${m}/`;await j.get(y).then(w=>{r.lookups.vodSources=w.data})}catch(y){L.value=B.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},A=async(m,y,w)=>{const C=r;Y.value.clear(),L.value="",C.lookups={sourceLocations:[],vodSources:[]},C.item={channelId:m,sourceLocationId:y,vodSourceId:w},await l(),U.value.$reset();var P=document.getElementById(K.value),oe=we.getOrCreateInstance(P);oe.show()},f=async()=>{var m=document.getElementById(K.value),y=we.getOrCreateInstance(m);y.hide(),W("refresh")},n=async()=>{const m=r;if(F.value)return;if(!await U.value.$validate()){window.scrollTo(0,0);return}try{F.value=!0,L.value="";const w=m.item;await j.put("/api/v1/channels/filler-slate",w).then(C=>{b.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await f()}catch(w){L.value=B.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{F.value=!1}},p=async()=>{r.item.vodSourceId=null,await a(r.item.sourceLocationId)};return d({open:A,close:f}),(m,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vb,[e("div",gb,[e("div",bb,[e("h5",yb,v(o(_))+" - "+v(o(g)),1),y[4]||(y[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",$b,[o(L)?(t(),s("div",wb,[y[5]||(y[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,hb)])):I("",!0),o(Y).size>0?(t(),s("div",_b,[y[6]||(y[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(o(Y).values(),w=>(t(),s("li",null,v(w),1))),256))])])):I("",!0),e("div",kb,[e("div",Sb,[e("div",Tb,[x(e("select",{"onUpdate:modelValue":y[0]||(y[0]=w=>r.item.sourceLocationId=w),onChange:y[1]||(y[1]=w=>p()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,G(r.lookups.sourceLocations,w=>(t(),s("option",{value:w.id},v(w.name),9,Mb))),256))],544),[[ge,r.item.sourceLocationId]]),y[7]||(y[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(U).item.sourceLocationId.$error?(t(),s("div",Cb,[(t(!0),s(q,null,G(o(U).item.sourceLocationId.$errors,w=>(t(),s("div",{key:w.$uid},v(w.$message),1))),128))])):I("",!0)])]),e("div",Ib,[e("div",xb,[x(e("select",{"onUpdate:modelValue":y[2]||(y[2]=w=>r.item.vodSourceId=w),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,G(r.lookups.vodSources,w=>(t(),s("option",{value:w.id},v(w.name),9,Pb))),256))],512),[[ge,r.item.vodSourceId]]),y[8]||(y[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(U).item.vodSourceId.$error?(t(),s("div",Vb,[(t(!0),s(q,null,G(o(U).item.vodSourceId.$errors,w=>(t(),s("div",{key:w.$uid},v(w.$message),1))),128))])):I("",!0)])])])]),e("div",Ub,[e("button",{disabled:o(U).$dirty&&o(U).$invalid,onClick:y[3]||(y[3]=w=>n()),class:"btn btn-primary",type:"button"},y[9]||(y[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ob),y[10]||(y[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,pb))}},Db={class:"d-flex flex-row justify-content-end"},Eb={key:0,class:"dropdown"},Hb={key:0,class:"fas fa-fw fa-play"},Lb={key:1,class:"fas fa-fw fa-stop"},Bb={class:"dropdown-menu"},qb={key:0},Nb={key:1},Rb={key:0},zb={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Fb={class:"nav-item",role:"presentation"},jb={class:"nav-item",role:"presentation"},Gb={class:"nav-item",role:"presentation"},Yb={key:0,class:"nav-item",role:"presentation"},Wb={class:"nav-item",role:"presentation"},Kb={class:"tab-content",id:"myTabContent"},Jb={class:"mt-2"},Qb={class:"row row-cols-1 row-cols-sm-3"},Xb={class:"col"},Zb={class:"form-floating mb-2"},ey={class:"col"},ty={class:"form-floating mb-2"},sy={class:"col"},oy={class:"form-floating mb-2"},ay={class:"d-flex flex-row justify-content-start align-items-center"},ly={key:0,class:"ms-2"},ny={class:"row row-cols-sm-2 mt-1"},ry={class:"col"},iy={class:"form-floating mb-2"},dy={class:"col"},uy={class:"form-floating mb-2"},cy={class:"col mt-2"},my={class:"form-floating mb-2"},fy={class:"mt-2"},py={class:"d-flex flex-row justify-content-start align-items-center"},vy={class:"ms-2"},gy={key:0,class:"alert bg-warning mt-2"},by={class:"table-responsive border mt-1"},yy={class:"table table-bordered1 mb-0"},$y={class:"badge bg-info"},wy={key:0,class:"text-wrap"},hy={key:1,class:"text-warning"},_y={key:0,class:"text-end"},ky={key:1,class:"text-end"},Sy=["onClick"],Ty={key:0},My={colspan:"999"},Cy={class:"d-flex flex-row justify-content-start align-items-center"},Iy={class:"ms-2"},xy={if:"item.playbackUrl"},Py=["onClick"],Vy={key:0,class:"table-responsive border mt-2"},Uy={class:"table mb-0 table-small"},Oy=["onUpdate:modelValue"],Ay={class:"text-end"},Dy=["onClick"],Ey=["onClick"],Hy={key:1,class:"mt-2"},Ly={class:"container1"},By={class:"row row-cols-1 row-cols-sm-2"},qy={class:"col-sm-3"},Ny={class:"input-group mb-2"},Ry={class:"form-floating border-success"},zy=["onUpdate:modelValue"],Fy=["onClick"],jy={class:"col-sm-9"},Gy={class:"input-group mb-2"},Yy={class:"form-floating"},Wy=["onUpdate:modelValue"],Ky=["onClick"],Jy={class:"col"},Qy={class:"form-floating mb-2"},Xy=["onUpdate:modelValue"],Zy={class:"mt-2"},e$={class:"table-responsive border"},t$={class:"table table-hover mb-0 caption-top"},s$={key:0,class:"fas fa-fw fa-check-circle text-success"},o$={class:"badge bg-info"},a$={key:0,class:""},l$={key:1,class:"mt-1"},n$={class:"mt-1"},r$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},i$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},d$={class:"badge bg-info me-1"},u$={class:"badge bg-info"},c$={class:"text-end"},m$={class:"dropdown position-static"},f$={class:"dropdown-menu"},p$=["onClick"],v$={key:0},g$=["onClick"],b$=["onClick"],y$=["onClick"],$$={class:"text-end mt-2 d-none"},w$={class:"mt-2"},h$={class:"text-end mb-2"},_$={class:"row g-4",id:"masonry"},k$={class:"col-sm-6 col-md-4 col-lg-3"},S$={class:"card h-100"},T$=["id"],M$={class:"card-body1 p-1"},C$={class:"card-title"},I$={class:"col-sm-6 col-md-4 col-lg-3"},x$={class:"card h-100"},P$=["id"],V$={class:"card-body1 p-1"},U$={class:"card-title text-truncate","bs-tooltip":"playback.name"},O$={class:"small"},A$={class:"mt-2"},D$={key:0,class:"fas fa-fw fa-check-circle text-success"},E$={key:1,class:"fas fa-fw fa-times-circle text-warning"},H$={key:0,class:"fas fa-fw fa-check-circle text-success"},L$={key:1,class:"fas fa-fw fa-times-circle text-warning"},B$={key:0,class:"fas fa-fw fa-check-circle text-success"},q$={key:1,class:"fas fa-fw fa-times-circle text-warning"},N$={key:0,class:"fas fa-fw fa-check text-warning"},R$={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},z$={key:0,class:"fas fa-fw fa-check-circle text-success"},F$={key:1,class:"fas fa-fw fa-times-circle text-warning"},j$={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(i){const d=i,{appTitle:$,pageTitle:_,busy:g,isDirty:F,validations:T,infoMessage:Y,warningMessage:z,errorMessage:S,router:L,axios:Q,utils:j,toasts:B,close:b,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});ye("$config");const K=be();K.user;const r=fe({user:K.user,item:null}),c=re(null),U=re(null),l=re(null),E=re(null),a=re(null),A=re(),f=Oe(()=>r.item&&r.item.state==="RUNNING");ie(async()=>{await y();const ne=j.getPageTab("channel")||"information-tab";n(ne)});const n=ne=>{j.setPageTab("channel",ne),A.value=ne,ne==="preview-tab"&&setTimeout(()=>{var k=document.getElementById("masonry");new Ye(k,{})},100)},p=ne=>ne===A.value?"active":"",m=ne=>ne===A.value?"show active":"",y=async()=>{const ne=r;if(!g.value)try{g.value=!0,S.value="",r.item=null;const k=`/api/v1/channels/${d.id}/`;await Q.get(k).then(ue=>{ne.item=ue.data,ne.item.outputs.forEach(Me=>{Me.playbackConfigurations.forEach(Z=>{if(Me.playbackUrl){const Ie=Me.playbackUrl,ce=Ie.lastIndexOf("/"),je=Ie.substring(0,ce),He=Ie.substring(ce+1),Ge=Z.hlsConfigurationManifestEndpointPrefix;Ge&&(Z.hlsPlaylist=Ge+He)}})})})}catch(k){S.value=j.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{g.value=!1}},w=async()=>{await y()},C=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!g.value){S.value=null;try{g.value=!0,await Q.post(`/api/v1/channels/${d.id}/publish/`).then(k=>{B.success("Publish Channel","Channel was published.")}),g.value=!1,await w()}catch(k){S.value=j.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{g.value=!1}}},P=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/channels/${d.id}/unpublish/`).then(k=>{B.warning("Remove Channel","Channel was removed.")}),g.value=!1,await w()}catch(k){S.value=j.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{g.value=!1}}},oe=()=>{c.value.open(d.id)},J=ne=>{ne.outputType==="HLS"&&U.value.open(ne.channelOutputId,ne.playbackUrl)},u=()=>{l.value.open(d.id)},O=ne=>{E.value.open(ne)},V=(ne,k)=>{a.value.open(d.id,ne,k)},ae=async ne=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/programs/${ne}/`).then(ue=>{B.success("Delete Program","Program was deleted..",{async onClose(){}})}),g.value=!1,await w()}catch(ue){S.value=j.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{g.value=!1}}},ve=async ne=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/channelOutputs/${ne}/`).then(ue=>{B.success("Delete Channel Output","Channel output was deleted..")}),g.value=!1,await w()}catch(ue){S.value=j.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{g.value=!1}}},se=async ne=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!g.value){S.value=null;try{g.value=!0,await Q.post(`/api/v1/programs/${ne}/publish/`).then(ue=>{B.success("Publish Program","Program was published..",{async onClose(){}})}),g.value=!1,await w()}catch(ue){S.value=j.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{g.value=!1}}},ke=async ne=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!g.value){S.value=null;try{g.value=!0,await Q.delete(`/api/v1/programs/${ne}/unpublish/`).then(ue=>{B.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),g.value=!1,await w()}catch(ue){S.value=j.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{g.value=!1}}},Te=async ne=>{if(!g.value){S.value=null;try{g.value=!0,await Q.put(`/api/v1/channels/${d.id}/change-state/${ne}`).then(k=>{B.success("Update Channel state","Change state was updated")}),g.value=!1,await w()}catch(k){S.value=j.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{g.value=!1}}},Ee=async ne=>{if(!g.value)try{g.value=!0,S.value="",await Q.post(`/api/v1/channelOutputs/${ne}/playback/publish/`).then(k=>{B.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),g.value=!1,await w()}catch(k){S.value=j.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{g.value=!1}},nt=async ne=>{if(confirm("Do you want to remove this Playback Configuration?")&&!g.value)try{g.value=!0,S.value="",await Q.delete(`/api/v1/channelOutputs/${ne}/playback/`).then(ue=>{B.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),g.value=!1,await w()}catch(ue){S.value=j.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{g.value=!1}},rt=ne=>{const k=`https://www.hlsplayer.org/play?url=${encodeURIComponent(ne)}`;window.open(k,"_blank")},it=()=>{Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')&&(console.log("Hello AV1 playback! AVC who?"),r.item.outputs.forEach(k=>{const ue=`video-${k.channelOutputId}`;var De=document.getElementById(ue);Fe(De,k.playbackUrl),B.success("Start Channel Stream","Main playlist started."),k.playbackConfigurations.forEach(Me=>{const Z=`video-${Me.channelOutputPlaybackConfigurationId}`;var Ie=document.getElementById(Z);try{Fe(Ie,Me.hlsPlaylist),B.success("Start Channel Stream","Playback with Server-side Ad Insertion playlist started.")}catch(ce){B.error("Failed Stream SSAI Playlist",ce)}})}),setTimeout(()=>{var k=document.getElementById("masonry");new Ye(k,{})},2e3))},Fe=(ne,k)=>{var ue=new Hls;ue.on(Hls.Events.MEDIA_ATTACHED,function(){console.log("video and hls.js are now bound together !")}),ue.on(Hls.Events.MANIFEST_PARSED,function(De,Me){console.log("manifest loaded, found "+Me.levels.length+" quality level"),ne.play()}),ue.on(Hls.Events.ERROR,function(De,Me){if(Me.fatal)switch(Me.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),ue.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",Me);break;default:ue.destroy();break}}),ue.loadSource(k),ue.attachMedia(ne)};return(ne,k)=>{const ue=X("router-link"),De=X("PageHeader"),Me=X("PageBody");return t(),de(me,null,{default:D(()=>[e("div",null,[H(De,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:D(()=>[e("div",Db,[r.item?(t(),s("div",Eb,[e("button",{class:le([[f.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[f.value?(t(),s("span",Hb)):(t(),s("span",Lb)),N(" "+v(r.item.state),1)],2),e("ul",Bb,[r.item.arn?(t(),s("li",qb,[f.value?(t(),s("button",{key:0,onClick:k[0]||(k[0]=Z=>Te("STOPPED")),class:"dropdown-item"},k[20]||(k[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),N("Stop ")]))):(t(),s("button",{key:1,onClick:k[1]||(k[1]=Z=>Te("RUNNING")),class:"dropdown-item"},k[21]||(k[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),N("Start ")])))])):I("",!0),f.value?I("",!0):(t(),s("li",Nb,[r.item.arn?(t(),s("button",{key:0,onClick:k[2]||(k[2]=Z=>P()),class:"dropdown-item"},k[22]||(k[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),N("Unpublish ")]))):(t(),s("button",{key:1,onClick:k[3]||(k[3]=Z=>C()),class:"dropdown-item"},k[23]||(k[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),N("Publish ")])))])),r.item.arn?(t(),s(q,{key:2},[k[25]||(k[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:k[4]||(k[4]=Z=>C()),class:"dropdown-item"},k[24]||(k[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),N("Republish ")]))])],64)):I("",!0)])])):I("",!0),H(ue,{to:`${i.urlSchedulePrograms}/${i.id}`,class:"ms-2 btn btn-primary"},{default:D(()=>k[26]||(k[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:k[5]||(k[5]=Z=>w()),class:"ms-2 btn btn-secondary"},k[27]||(k[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:k[6]||(k[6]=Z=>o(M)(d.urlMain)),class:"btn btn-secondary ms-1"},k[28]||(k[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),H(Me,{errorMessage:o(S)},{default:D(()=>[r.item?(t(),s("div",Rb,[e("ul",zb,[e("li",Fb,[e("button",{onClick:k[7]||(k[7]=Z=>n("information-tab")),class:le([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},k[29]||(k[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),N("Information ")]),2)]),e("li",jb,[e("button",{onClick:k[8]||(k[8]=Z=>n("outputPlayback-tab")),class:le([p("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},k[30]||(k[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),N("Output/Playback ")]),2)]),e("li",Gb,[e("button",{onClick:k[9]||(k[9]=Z=>n("programs-tab")),class:le([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},k[31]||(k[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),N("Programs ")]),2)]),f.value?(t(),s("li",Yb,[e("button",{onClick:k[10]||(k[10]=Z=>n("preview-tab")),class:le([p("preview-tab"),"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},k[32]||(k[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),N("Preview ")]),2)])):I("",!0),e("li",Wb,[e("button",{onClick:k[11]||(k[11]=Z=>n("checklist-tab")),class:le([p("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},k[33]||(k[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),N("Checklist ")]),2)])]),e("div",Kb,[e("div",{class:le([m("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Jb,[e("div",Qb,[e("div",Xb,[e("div",Zb,[x(e("input",{"onUpdate:modelValue":k[12]||(k[12]=Z=>r.item.name=Z),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[R,r.item.name]]),k[34]||(k[34]=e("label",{for:"name"},"Name",-1))])]),e("div",ey,[e("div",ty,[x(e("input",{"onUpdate:modelValue":k[13]||(k[13]=Z=>r.item.playbackMode=Z),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[R,r.item.playbackMode]]),k[35]||(k[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",sy,[e("div",oy,[x(e("input",{"onUpdate:modelValue":k[14]||(k[14]=Z=>r.item.tier=Z),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[R,r.item.tier]]),k[36]||(k[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",ay,[k[38]||(k[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),f.value?I("",!0):(t(),s("div",ly,[e("button",{onClick:k[15]||(k[15]=Z=>V(r.item.fillerSlateSourceLocation.sourceLocationId,r.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},k[37]||(k[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",ny,[e("div",ry,[e("div",iy,[H(ue,{to:`${i.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${o(h)()}`,class:le([[r.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:D(()=>[N(v(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),k[39]||(k[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",dy,[e("div",uy,[H(ue,{to:`${i.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${o(h)()}`,class:le([[r.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:D(()=>[N(v(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),k[40]||(k[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",cy,[e("div",my,[x(e("textarea",{"onUpdate:modelValue":k[16]||(k[16]=Z=>r.item.policy=Z),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[R,r.item.policy]]),k[41]||(k[41]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:le([m("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",fy,[e("div",null,[e("div",py,[k[43]||(k[43]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",vy,[e("button",{onClick:k[17]||(k[17]=Z=>u()),class:"btn btn-outline-primary btn-sm"},k[42]||(k[42]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),r.item.outputs.length<=0?(t(),s("div",gy,k[44]||(k[44]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),N("Channel Output is required ")]))):I("",!0),e("div",by,[e("table",yy,[k[58]||(k[58]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.outputs,(Z,Ie)=>(t(),s(q,{key:Z.channelOutputId},[e("tr",null,[e("td",null,v(Ie+1),1),e("td",null,[e("div",null,v(Z.manifestName),1),e("div",null,[e("span",$y,v(Z.outputType),1)])]),e("td",null,[e("div",null,[H(ue,{to:`${i.urlViewSourceGroup}/${Z.sourceGroupId}/${o(h)()}`},{default:D(()=>[N(v(Z.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[Z.playbackUrl?(t(),s("div",wy,v(Z.playbackUrl),1)):(t(),s("div",hy,k[45]||(k[45]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),N("Publish channel to get the playback url ")])))]),f.value?(t(),s("td",_y)):(t(),s("td",ky,[e("button",{onClick:ce=>ve(Z.channelOutputId),class:"btn btn-outline-warning btn-sm"},k[46]||(k[46]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Sy)]))]),Z.playbackUrl?(t(),s("tr",Ty,[k[57]||(k[57]=e("td",null,null,-1)),e("td",My,[e("div",Cy,[k[48]||(k[48]=e("h5",null,[N("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",Iy,[e("div",xy,[e("button",{onClick:ce=>J(Z),class:"btn btn-outline-primary btn-sm"},k[47]||(k[47]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,Py)])])]),Z.playbackConfigurations.length>0?(t(),s("div",Vy,[e("table",Uy,[e("tbody",null,[(t(!0),s(q,null,G(Z.playbackConfigurations,(ce,je)=>(t(),s("tr",null,[e("td",null,v(je+1),1),e("td",null,[N(v(ce.name)+" ",1),e("div",null,[x(e("textarea",{"onUpdate:modelValue":He=>ce.adDecisionServerUrl=He,class:"form-control",style:{"max-height":"4rem"},disabled:""},null,8,Oy),[[R,ce.adDecisionServerUrl]])])]),e("td",Ay,[ce.arn?I("",!0):(t(),s("button",{key:0,onClick:He=>Ee(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},k[49]||(k[49]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Dy)),e("button",{onClick:He=>nt(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},k[50]||(k[50]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ey)])]))),256))])])])):I("",!0),Z.playbackConfiguration?(t(),s("div",Hy,[e("div",Ly,[e("div",By,[e("div",qy,[e("div",Ny,[e("div",Ry,[x(e("input",{"onUpdate:modelValue":ce=>Z.playbackConfiguration.name=ce,type:"text",class:le([[Z.playbackConfiguration.arn?"is-valid":"is-invalid"],"form-control"]),id:"name",disabled:""},null,10,zy),[[R,Z.playbackConfiguration.name]]),k[51]||(k[51]=e("label",{for:"name"}," Name ",-1))]),Z.playbackConfiguration.arn?I("",!0):(t(),s("button",{key:0,onClick:ce=>ne.publishPlaybackConfiguration(Z),class:"btn btn-outline-primary btn-sm"},k[52]||(k[52]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),N("Publish ")]),8,Fy))])]),e("div",jy,[e("div",Gy,[e("div",Yy,[x(e("input",{"onUpdate:modelValue":ce=>Z.playbackConfiguration.hlsConfigurationManifestEndpointPrefix=ce,type:"text",class:"form-control",id:"playbackConfigurationhlsConfigurationManifestEndpointPrefix",disabled:""},null,8,Wy),[[R,Z.playbackConfiguration.hlsConfigurationManifestEndpointPrefix]]),k[53]||(k[53]=e("label",{for:"hlsConfigurationManifestEndpointPrefix"},"HLS Configuration Manifest Endpoint Prefix",-1))]),f.value&&Z.playbackConfiguration.hlsPlaylist?(t(),s("button",{key:0,onClick:ce=>rt(Z.playbackConfiguration.hlsPlaylist),class:"btn btn-outline-info"},k[54]||(k[54]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),N("View ")]),8,Ky)):I("",!0)])])]),k[56]||(k[56]=e("div",{class:"row row-cols-1 row-cols-sm-21"},[e("div",{class:"col"})],-1)),e("div",Jy,[e("div",Qy,[x(e("textarea",{"onUpdate:modelValue":ce=>Z.playbackConfiguration.adDecisionServerUrl=ce,class:"form-control",id:"playbackConfigurationadDecisionServerUrl",style:{height:"8rem"},disabled:""},null,8,Xy),[[R,Z.playbackConfiguration.adDecisionServerUrl]]),k[55]||(k[55]=e("label",{for:"playbackConfigurationadDecisionServerUrl"},"Ad Decision Server Url",-1))])])])])):I("",!0)])])):I("",!0)],64))),128))]),_:1},512),[[_e,r.item.outputs.length>0]])])])])])],2),e("div",{class:le([m("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Zy,[e("div",e$,[e("table",t$,[k[73]||(k[73]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),x(H(he,{tag:"tbody",name:"list",class:"table-group-divider"},{default:D(()=>[(t(!0),s(q,null,G(r.item.programs,(Z,Ie)=>(t(),s("tr",{key:Z.programId},[e("td",null,v(Ie+1),1),e("td",null,[Z.arn?(t(),s("span",s$)):I("",!0),N(" "+v(Z.name)+" ",1),k[62]||(k[62]=e("br",null,null,-1)),e("div",null,[e("div",null,[k[59]||(k[59]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),N(v(o(j).moment(Z.dateScheduledStart).format("llll")),1)]),e("div",null,[k[60]||(k[60]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),N(v(o(j).moment(Z.dateScheduledEnd).format("llll")),1)])]),Z.relativeProgram?(t(),s(q,{key:1},[k[61]||(k[61]=N(" Relative Program: ")),e("span",o$,v(Z.relativeProgram.name),1)],64)):I("",!0)]),e("td",null,[Z.totalProgramTemplateDurationInMillis!==Z.durationInMillis?(t(),s("div",a$,[k[63]||(k[63]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),N(" "+v(o(j).moment.utc(Z.startOffsetMillis).format("HH:mm:ss"))+" - "+v(o(j).moment.utc(Z.endOffsetMillis).format("HH:mm:ss")),1)])):I("",!0),Z.adBreaksDurationInMillis?(t(),s("div",l$,[k[64]||(k[64]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),N(" Ads: "+v(o(j).moment.utc(Z.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):I("",!0),e("div",n$,[k[65]||(k[65]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),N(" Total: "+v(o(j).moment.utc(Z.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[H(ue,{to:`${i.urlViewVideo}/${Z.vodSource.video.videoId}/${o(h)()}`},{default:D(()=>[N(v(Z.vodSource.video.title),1)]),_:2},1032,["to"]),k[66]||(k[66]=e("br",null,null,-1)),N(" ("+v(o(j).moment.utc(Z.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),s(q,null,G(Z.adBreaks,ce=>(t(),s("li",null,[ce.vodSource.arn?(t(),s("span",r$)):(t(),s("span",i$)),e("span",d$,v(o(j).moment.utc(ce.offsetMillis).format("HH:mm:ss")),1),e("span",u$,v(o(j).moment(Z.dateScheduledStart).add(ce.offsetMillis,"milliseconds").format("hh:mm:ss a")),1),e("div",null,[H(ue,{to:`${i.urlViewVodSource}/${ce.vodSource.vodSourceId}/${o(h)()}`},{default:D(()=>[k[67]||(k[67]=e("span",{class:"fas fa-fw fa-tag me-1"},null,-1)),N(v(ce.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])]),e("td",c$,[e("div",m$,[k[72]||(k[72]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",f$,[e("li",null,[e("button",{onClick:ce=>O(Z.programId),class:"dropdown-item"},k[68]||(k[68]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),N("Edit ")]),8,p$)]),Z.arn?(t(),s("li",v$,[e("button",{onClick:ce=>ke(Z.programId),class:"dropdown-item"},k[69]||(k[69]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),N("Unpublish ")]),8,g$)])):(t(),s(q,{key:1},[e("li",null,[e("button",{onClick:ce=>se(Z.programId),class:"dropdown-item"},k[70]||(k[70]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),N("Publish ")]),8,b$)]),e("li",null,[e("button",{onClick:ce=>ae(Z.programId),class:"dropdown-item"},k[71]||(k[71]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),N("Remove ")]),8,y$)])],64))])])])]))),128))]),_:1},512),[[_e,r.item.programs.length>0]])])]),e("div",$$,[e("button",{onClick:k[18]||(k[18]=Z=>oe()),class:"btn btn-outline-primary"},k[74]||(k[74]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),N("Program ")]))])])],2),f.value?(t(),s("div",{key:0,class:le([m("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",w$,[e("div",h$,[e("button",{onClick:k[19]||(k[19]=Z=>it()),class:"btn btn-primary"},k[75]||(k[75]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),N("Watch ")]))]),e("div",_$,[(t(!0),s(q,null,G(r.item.outputs,Z=>(t(),s(q,null,[e("div",k$,[e("div",S$,[e("video",{id:`video-${Z.channelOutputId}`,class:"card-img-top object-fit-contain"},null,8,T$),e("div",M$,[e("div",C$,[e("b",null,v(Z.manifestName),1)])])])]),(t(!0),s(q,null,G(Z.playbackConfigurations,(Ie,ce)=>(t(),s("div",I$,[e("div",x$,[e("video",{id:`video-${Ie.channelOutputPlaybackConfigurationId}`,class:"card-img-top object-fit-contain"},null,8,P$),e("div",V$,[e("div",U$,[N("#"+v(ce+1)+" ",1),e("b",O$,v(Ie.name),1)])])])]))),256))],64))),256))])])],2)):I("",!0),e("div",{class:le([m("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",A$,[k[82]||(k[82]=N(" Checklist ")),e("ul",null,[e("li",null,[r.item.fillerSlateSourceLocation.arn?(t(),s("span",D$)):(t(),s("span",E$)),k[76]||(k[76]=N(" Filler Slate Source Location "))]),e("li",null,[r.item.fillerSlateVodSource.arn?(t(),s("span",H$)):(t(),s("span",L$)),k[77]||(k[77]=N(" ni Filler Slate VOD Source "))]),e("li",null,[r.item.outputs.length>0?(t(),s("span",B$)):(t(),s("span",q$)),k[79]||(k[79]=N(" Outputs ")),e("ul",null,[e("li",null,[r.item.outputs.some(Z=>Z.playbackConfigurations.length>0)?(t(),s("span",N$)):(t(),s("span",R$)),k[78]||(k[78]=N(" Ad Insertion setup "))])])]),e("li",null,[r.item.programs.length>0?(t(),s("span",z$)):(t(),s("span",F$)),k[80]||(k[80]=N(" Programs "))]),k[81]||(k[81]=N(" > "))]),k[83]||(k[83]=N(" > "))])],2)])])):I("",!0)]),_:1},8,["errorMessage"]),H(w1,{ref_key:"modalAddProgram",ref:c,onRefresh:w},null,512),H(F1,{ref_key:"modalAddPlaybackConfiguration",ref:U,onRefresh:w},null,512),H(fb,{ref_key:"modalAddChannelOutput",ref:l,onRefresh:w},null,512),H(at,{ref_key:"modalEditProgram",ref:E,onOnClose:w},null,512),H(Ab,{ref_key:"modalEditFillerSlate",ref:a,onRefresh:w},null,512)])]),_:1})}}},G$={path:"/",component:Ko,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:ba},{path:"users/add",component:Ra},{path:"users",component:Xa},{path:"users/view/:id",component:hl,props:!0},{path:"videos/add",component:Wl},{path:"videos/edit/:id",component:bn,props:!0},{path:"videos",component:Mn},{path:"videos/view/:id",component:Zn,props:!0},{path:"source-groups/add",component:ar},{path:"source-groups/edit/:id",component:rr,props:!0},{path:"source-groups",component:gr},{path:"source-groups/view/:id",component:Or,props:!0},{path:"source-locations/add",component:qr},{path:"source-locations/edit/:id",component:zr,props:!0},{path:"source-locations",component:Xr},{path:"source-locations/view/:id",component:wi,props:!0},{path:"vod-sources/add",component:Yi},{path:"vod-sources/edit/:id",component:Ji,props:!0},{path:"vod-sources",component:rd},{path:"vod-sources/view/:id",component:uc,props:!0},{path:"channels/add",component:bp},{path:"channels/edit/:id",component:wp,props:!0},{path:"channels",component:Ip},{path:"channels/schedule-programs/:id",component:gg,props:!0},{path:"channels/view/:id",component:j$,props:!0},{path:"program-templates/add",component:Jc},{path:"program-templates/edit/:id",component:Um,props:!0},{path:"program-templates",component:zm},{path:"program-templates/view/:id",component:Gf,props:!0}]},lt=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{...G$}]}),Y$={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const i=this,$=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();$.on("onNotificationCreated",function(_){let g=_.content;_.notificationEntityClassText==="Deposit"&&(g+="<br/>",g+=`<a href="${i.urlViewDeposit}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="Withdraw"&&(g+="<br/>",g+=`<a href="${i.urlViewWithdraw}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="ManualModeOfPayment"&&(g+="<br/>",g+=`<a href="${i.urlViewManualModeOfPayment}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.iconClass;let F="secondary";switch(_.notificationType){case 1:F="success";break;case 3:F="info";break;case 3:F="success";break;case 4:F="info";break;case 5:F="warning";break;case 6:F="error";break}i.$toast[F](_.subject,g,{timeOut:1e4});const T=_.subject,S={body:g,icon:"/img/192x102.png"};new Notification(T,S)}),$.on("jobUpdated",function(_){i.$bus.$emit("event:job-updated",_)}),await $.start().then(function(){}).catch(function(_){})}}};function W$(i,d,$,_,g,F){return t(),s("div")}const K$=Se(Y$,[["render",W$],["__scopeId","data-v-5b4a9fa2"]]),J$={class:"navbar bg-light","data-bs-theme":"light"},Q$={class:"container-md"},X$={class:"col-sm-auto"},Z$={class:"navbar-brand mb-0"},ew={class:"col-sm flex-fill"},tw={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(i){return(d,$)=>(t(),de(me,null,{default:D(()=>[e("div",null,[e("nav",J$,[e("div",Q$,[e("div",{class:le([i.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",X$,[Ve(d.$slots,"title",{},()=>[e("h1",Z$,[e("i",{class:le([i.pageIcon,"me-1"])},null,2),e("span",null,v(i.pageTitle),1)])])]),e("div",ew,[Ve(d.$slots,"default")])],2)])])])]),_:3}))}},sw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ow=["innerHTML"],aw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},lw={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(d,$)=>(t(),de(me,null,{default:D(()=>[Ve(d.$slots,"default",{},()=>[i.errorMessage?(t(),s("div",sw,[$[0]||($[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),N("Error ")],-1)),e("div",{innerHTML:i.errorMessage},null,8,ow)])):I("",!0),i.vuelidate&&i.vuelidate.$error?(t(),s("div",aw,[$[1]||($[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),N("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,G(i.vuelidate.$errors,_=>(t(),s("li",{key:_.$uid},[_.$validator==="$each"?(t(),s(q,{key:0},[N(" Check errors in '"+v(_.$property)+"' ",1)],64)):(t(),s(q,{key:1},[N(v(_.$message),1)],64))]))),128))])])):I("",!0)])]),_:3}))}},nw={class:"mt-2 container-md"},rw={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(d,$)=>{const _=X("PageMessages");return t(),de(me,null,{default:D(()=>[e("div",nw,[H(_,{errorMessage:i.errorMessage,vuelidate:i.vuelidate},null,8,["errorMessage","vuelidate"]),Ve(d.$slots,"default")])]),_:3})}}},iw={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const i=this;i.busy||(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveFirst(){const i=this;if(i.busy)return;i.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveLast(){const i=this;if(i.busy)return;const d=i.filter;d.pageIndex!==d.totalPages&&(document.activeElement&&document.activeElement.blur(),await i.search(d.totalPages))},async move(i){const d=this;if(d.busy)return;const $=d.filter,_=$.pageIndex+i;_>=0&&_<=$.totalPages&&(document.activeElement&&document.activeElement.blur(),await d.search(_))}}},dw={class:"mt-2"},uw={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},cw={key:0,class:"col-sm order-2 order-sm-1"},mw={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},fw={class:"me-1 fw-bold"},pw={class:"fw-bold"},vw={class:"ms-1"},gw={class:"col-sm order-1 order-sm-2"},bw={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},yw={key:0,class:"page-item"},$w={key:1,class:"page-item"},ww={key:2,class:"page-item"},hw={class:"page-item active"},_w={class:"page-link"},kw={key:3,class:"page-item"},Sw={key:4,class:"page-item"},Tw={key:5,class:"page-item"},Mw={key:1,class:"text-info font-weight-bold text-center"},Cw={key:0},Iw={key:1};function xw(i,d,$,_,g,F){return t(),s("div",dw,[$.filter.items.length?(t(),s("div",uw,[$.showPerPage?(t(),s("div",cw,[e("div",mw,[e("div",null,[e("span",fw,v($.filter.totalCount),1),d[8]||(d[8]=N("records in ")),e("span",pw,v($.filter.totalPages),1),d[9]||(d[9]=N(" page(s) "))]),e("div",vw,[x(e("select",{"onUpdate:modelValue":d[0]||(d[0]=T=>$.filter.pageSize=T),onChange:d[1]||(d[1]=(...T)=>F.changePagination&&F.changePagination(...T)),class:"form-select form-select-sm me-1"},d[10]||(d[10]=[Re('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ge,$.filter.pageSize]])]),d[11]||(d[11]=e("div",{class:"ms-1"},"per page",-1))])])):I("",!0),e("div",gw,[e("ul",bw,[$.filter.pageIndex!==1?(t(),s("li",yw,[e("button",{class:"page-link","aria-label":"Previous",onClick:d[2]||(d[2]=(...T)=>F.moveFirst&&F.moveFirst(...T))},d[12]||(d[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):I("",!0),$.filter.pageIndex>2?(t(),s("li",$w,[e("button",{class:"page-link",onClick:d[3]||(d[3]=T=>F.move(-2))},v($.filter.pageIndex-2),1)])):I("",!0),$.filter.pageIndex>1?(t(),s("li",ww,[e("button",{class:"page-link",onClick:d[4]||(d[4]=T=>F.move(-1))},v($.filter.pageIndex-1),1)])):I("",!0),e("li",hw,[e("span",_w,v($.filter.pageIndex),1)]),$.filter.pageIndex<$.filter.totalPages?(t(),s("li",kw,[e("button",{class:"page-link",onClick:d[5]||(d[5]=T=>F.move(1))},v($.filter.pageIndex+1),1)])):I("",!0),$.filter.pageIndex<$.filter.totalPages-1?(t(),s("li",Sw,[e("button",{class:"page-link",onClick:d[6]||(d[6]=T=>F.move(2))},v($.filter.pageIndex+2),1)])):I("",!0),$.filter.pageIndex<$.filter.totalPages?(t(),s("li",Tw,[e("button",{class:"page-link","aria-label":"Next",onClick:d[7]||(d[7]=(...T)=>F.moveLast&&F.moveLast(...T))},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):I("",!0)])])])):(t(),s("div",Mw,[$.noRecords?(t(),s("div",Cw,v($.noRecords),1)):(t(),s("div",Iw,"No record(s) found."))]))])}const Pw=Se(iw,[["render",xw]]),Vw={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let i=this;if(!i.enabled)return;let d=i.filter;d.sortField===i.field?d.sortOrder===0?d.sortField=null:d.sortOrder=d.sortOrder===0?1:0:(d.sortField=i.field,d.sortOrder=1),i.$emit("search")}}},Uw={class:"align-self-center"};function Ow(i,d,$,_,g,F){return t(),s("div",{onClick:d[0]||(d[0]=(...T)=>F.click&&F.click(...T)),class:"d-flex flex-row justify-content-start align-content-center",style:Ze({cursor:$.enabled?"pointer":""})},[Ve(i.$slots,"default"),e("span",Uw,[$.showSort?(t(),s("span",{key:0,class:le([{"fa-sort text-gray-500":!F.currentSortField(),"fa-sort-up":F.currentSortField()&&F.sortUp(),"fa-sort-down":F.currentSortField()&&!F.sortUp()},"fas fa-fw mr-1"])},null,2)):I("",!0)])],4)}const Aw=Se(Vw,[["render",Ow]]),Dw={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(i){const d=this;d.setSelected(i),d.$emit("onSelectedRow",i)}}},Ew={class:"table-responsive m-0"},Hw=["href"],Lw={key:1},Bw=["onClick"],qw={class:"form-group row no-gutters"},Nw={class:"col-5 col-form-label"},Rw={class:"col align-self-center"},zw=["href"],Fw={key:1};function jw(i,d,$,_,g,F){return t(),s("div",null,[e("div",Ew,[e("table",{class:le(["table table-hover d-none d-md-table card",$.tableCss])},[e("thead",null,[Ve(i.$slots,"header",{},()=>[d[0]||(d[0]=e("th",null,"#",-1)),(t(!0),s(q,null,G($.header.columns,T=>(t(),s("th",null,v(T.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(q,null,G($.items,(T,Y)=>Ve(i.$slots,"table-row",{key:`row1-${T[$.header.key]}`,item:T,index:Y},()=>[e("td",null,v($.getRowNumber(Y)),1),(t(!0),s(q,null,G($.header.columns,z=>(t(),s("td",null,[z.href?(t(),s("a",{key:0,href:z.href(T[$.header.key]),class:"font-weight-bold"},v(T[z.field]),9,Hw)):(t(),s("span",Lw,v(T[z.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:le(["d-block d-md-none",$.rowCss])},[(t(!0),s(q,null,G($.items,(T,Y)=>(t(),s("div",{key:`row2-${T[$.header.key]}`,onClick:z=>F.onSelectedRow(T),class:"border"},[e("div",{class:le(["p-2",{"b-left":$.isSelected(T)}])},[Ve(i.$slots,"table-list",{item:T,index:Y},()=>[(t(!0),s(q,null,G($.header.columns,z=>(t(),s("div",qw,[e("label",Nw,v(z.title),1),e("div",Rw,[z.href?(t(),s("a",{key:0,href:z.href(T[$.header.key]),class:"font-weight-bold"},v(T[z.field]),9,zw)):(t(),s("span",Fw,v(T[z.field]),1))])]))),256))],!0)],2)],8,Bw))),128))],2)])}const Gw=Se(Dw,[["render",jw],["__scopeId","data-v-65929213"]]),Ce=gt(yt);Ce.use(bt());Ce.use(lt);Ce.component("m-notification",K$);Ce.component("m-pagination",Pw);Ce.component("sort-field",Aw);Ce.component("table-list",Gw);Ce.component("Toasts",jo);Ce.component("PageHeader",tw);Ce.component("PageMessages",lw);Ce.component("PageBody",rw);const Yw="https://sonyfastpoc.azurewebsites.net/",Ww="Arcadian-Sony FAST",Kw=void 0,Jw={API_URL:Yw,appName:Ww,tenantId:Kw};Ce.provide("$config",Jw);Ce.provide("$bus",ze);Ce.mount("#app");
