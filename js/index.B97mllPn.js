import{o as t,c as ie,r as Q,h as it,d as Ye,a as ae,e as Le,b as s,f as e,g as D,w as U,i as L,t as b,F as B,j,k as C,l as re,m as We,n as be,p as Ke,q as Be,u as dt,s as Je,P as Qe,v as ce,x as ee,y as te,z as ye,T as ue,A as o,B as ut,C as I,D as q,E as ct,G as oe,H as Xe,I as we,J as Ue,K as he,L as De,M as ve,N as $e,O as Ce,Q as Pe,R as mt,S as ft,U as pt,V as Ve,W as vt,X as gt}from"./vendor-DIDY8V1_-chunk.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))_(y);new MutationObserver(y=>{for(const z of y)if(z.type==="childList")for(const T of z.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&_(T)}).observe(document,{childList:!0,subtree:!0});function w(y){const z={};return y.integrity&&(z.integrity=y.integrity),y.referrerPolicy&&(z.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?z.credentials="include":y.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function _(y){if(y.ep)return;y.ep=!0;const z=w(y);fetch(y.href,z)}})();const bt={__name:"App",setup(d){return(u,w)=>{const _=Q("router-view");return t(),ie(_)}}};function Ze(){const d=R=>{var F;let k=R,E=k.response,J="";if(!k.response)return R.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const N=`${window.location.pathname}${window.location.search}`;J=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(N)}`}'>here</a> to login.`}else if(E.status===400){let N=k.response.data.errors;J=k.response.data.title||k.response.data,N&&(J+="<ul>");for(let $ in N){let M=N[$];for(let h in N[$]){let W=M[h];J+=`<li>${W}</li>`}}N&&(J+="</ul>"),J||(J=k.message),J&&J.content&&(J=J.content)}else E.status===404?J=((F=E==null?void 0:E.data)==null?void 0:F.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(J=k.message,J===""&&(J=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return J},u=R=>JSON.parse(JSON.stringify(R)),w=R=>{if(typeof R!="number")return R;var k=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return k.format(R)},_=(R,k,E)=>{const F={value:k,expiry:new Date().getTime()+E};debugger;localStorage.setItem(R,JSON.stringify(F))},y=R=>{debugger;const k=localStorage.getItem(R);if(!k)return null;const E=JSON.parse(k);return new Date().getTime()>E.expiry?(localStorage.removeItem(R),null):E.value},z="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:d,clone:u,toCurrency:w,moment:it,localStorageSetWithExpiry:_,localStorageGetWithExpiry:y,setPageTab:(R,k)=>{var E=localStorage.getItem(z);E?E=JSON.parse(E):E={},E[R]=k,localStorage.setItem(z,JSON.stringify(E))},getPageTab:R=>{var k=localStorage.getItem(z);return k?k=JSON.parse(k):k={},k[R]}}}const yt=Ze(),et=JSON.parse(localStorage.getItem("user"))||{},$t=yt.moment.utc(et.exp*1e3),wt=$t.isAfter()?et:null,ge=Ye({id:"auth",state:()=>({user:wt,returnUrl:null}),actions:{async login(d){try{this.user=d,localStorage.setItem("user",JSON.stringify(d))}catch(u){debugger;alert(u)}},logout(){this.user=null,localStorage.removeItem("user"),at.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),ht="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(ht));const _t={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},qe=_t,tt=Ye("msal",()=>{const d=ae({auth:{clientId:qe.VITE_AUTH_CLIENT_ID,authority:qe.VITE_AUTH_AUTHORITY_URL,redirectUri:qe.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),u=ae("");return{msalConfig:d,accessToken:u,setAccessToken:_=>{u.value=_}}}),Re={$on:(...d)=>Le.on(...d),$once:(...d)=>Le.once(...d),$off:(...d)=>Le.off(...d),$emit:(...d)=>Le.emit(...d)};function kt(){const d=(z,T,Y,R)=>{Re.$emit("toast-message",{title:z,message:T,type:Y,options:R})};return{success:(z,T,Y={})=>{d(z,T,"success",Y)},warning:(z,T,Y={})=>{d(z,T,"warning",Y)},info:(z,T,Y={})=>{d(z,T,"info",Y)},error:(z,T,Y={})=>{d(z,T,"danger",Y)}}}const ke=(d,u)=>{const w=d.__vccOpts||d;for(const[_,y]of u)w[_]=y;return w},St={data(){return{notifications:[],messages:[]}},async created(){const d=this;d.$bus.$on("event:notification-received",()=>{d.getUnreadNotifications()}),d.$bus.$on("event:notification-marked-as-read",u=>{d.notifications.some(_=>_.notificationId===u)&&d.getUnreadNotifications()}),d.$bus.$on("event:notification-removed",u=>{d.notifications.some(_=>_.notificationId===u)&&d.getUnreadNotifications()}),d.$bus.$on("event:chat-marked-as-read",d.onChatMarkedAsRead),d.$bus.$on("event:chat-message-received",d.onChatMessageReceived)},async mounted(){const d=this,u=d.$refs.notifications,w=d.$refs.messages;u&&u.offsetParent,w&&w.offsetParent&&await d.getUnreadChats()},methods:{async logout(){const d=this;try{await d.$util.axios.post("/api/accounts/logout").then(u=>{const w="/";d.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){d.$util.href(w)}})})}catch(u){d.$util.handleError(u)}},async onChatMarkedAsRead(d){let u=this,w=u.messages.find(_=>_.chatId===d);if(w){let _=u.messages.indexOf(w);u.messages.splice(_,1)}},async onChatMessageReceived(d){let u=this,w=u.messages.find(y=>y.chatId===d.chatId);if(w)w.lastMessageText=d.content;else{var _={chatId:d.chatId,isRead:!1,lastDateSent:d.dateSent,lastMessageText:d.content,senderFirstLastName:`${d.sender.firstName} ${d.sender.lastName}`,senderInitials:d.sender.initials,senderProfilePicture32:d.sender.profilePicture32,urlPicture:u.$util.getProfilePictureUrl(d.sender.profilePicture32,d.sender.initials)};u.messages.push(_)}},async getUnreadNotifications(){const d=this;try{await d.$util.axios.get("api/accounts/unread-notifications").then(u=>{d.notifications=u.data})}catch(u){d.$util.handleError(u)}},async getUnreadChats(){const d=this;try{await d.$util.axios.get("api/accounts/unread-chats").then(u=>{d.messages=u.data;for(let w in d.messages){let _=d.messages[w];d.$set(_,"urlPicture",d.$util.getProfilePictureUrl(_.senderProfilePicture32,_.senderInitials))}})}catch(u){d.$util.handleError(u)}},viewNotification(d){this.$bus.$emit("event:open-notification",d)},viewChat(d){this.$bus.$emit("event:open-chat",d)},showHiddenElements(){let u=this.$el.getElementsByClassName("initialHidden");for(let w=0;w<u.length;w++)u[w].classList.remove("invisible")}}},Tt={mixins:[St],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const u=ge().user;return{user:u,username:u?u.nameFull:"Guest"}},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1},async openModalSearchUser747(d){this.$refs.refModalSearchUser747.open(d)}}},Mt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},It={class:"navbar-collapse collapse",id:"navbarSideCollapse"},xt={class:"navbar-nav"},Pt={class:"nav-item dropdown"},Vt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ut={class:"nav-item dropdown"},Ot={class:"dropdown-menu","aria-labelledby":"dropdown01"},At={class:"navbar-nav ms-auto"},Dt={class:"nav-item dropdown"},Ht={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},Lt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Bt={class:"text-capitalize"};function Nt(d,u,w,_,y,z){const T=Q("router-link");return t(),s("nav",Mt,[e("div",Ct,[D(T,{class:"navbar-brand",to:"/member"},{default:U(()=>[L(b(w.appName),1)]),_:1}),u[14]||(u[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",It,[e("ul",xt,[e("li",Pt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Vt,[e("li",null,[D(T,{class:"dropdown-item",to:"/member/announcements"},{default:U(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),L(" Announcements ")])),_:1})]),e("li",null,[D(T,{class:"dropdown-item",to:"/member/posts"},{default:U(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),L(" Posts ")])),_:1})]),e("li",null,[D(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:U(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),L(" Yellow Pages ")])),_:1})])])]),e("li",Ut,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ot,[e("li",null,[D(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:U(()=>u[4]||(u[4]=[L(" Property Monthly Dues ")])),_:1})])])])]),e("ul",At,[e("li",Dt,[e("a",Ht,[e("span",null,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,b(y.username),1)])]),e("ul",Lt,[u[9]||(u[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),u[10]||(u[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),u[11]||(u[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),u[12]||(u[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),y.user&&y.user.roles.length>1?(t(!0),s(B,{key:0},j(y.user.roles,Y=>(t(),s("li",null,[D(T,{to:`/${Y.toLowerCase()}`,class:"dropdown-item"},{default:U(()=>[e("span",Bt,b(Y),1)]),_:2},1032,["to"])]))),256)):C("",!0),e("li",null,[D(T,{to:"/",class:"dropdown-item"},{default:U(()=>u[7]||(u[7]=[L(" Main ")])),_:1})]),u[13]||(u[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[D(T,{to:"/account/logout",class:"dropdown-item"},{default:U(()=>u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),L("Logout ")])),_:1})])])])])])])])}const qt=ke(Tt,[["render",Nt]]),Rt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const d=document.getElementById("top");d&&d.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let d=this;if(!d.$el.getElementsByClassName)return;let u=d.$el.getElementsByClassName("initialHidden");for(let w=0;w<u.length;w++){let _=u[w];_.classList.remove("invisible"),_.classList.remove("d-none")}},close(){const d=this,u=document.referrer.toLowerCase();u&&u.includes("/account/login")?d.$router.go(-2):d.$router.go(-1)},toggle(d){const u=this;u.toggles[d]=!u.toggles[d],localStorage.setItem(u.togglesKey,JSON.stringify(u.toggles))}}},zt={mixins:[Rt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1}}},Ft={class:"footer sticky-bottom"},jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Gt={class:"container-md"},Yt={class:"navbar-text small p-0"},Wt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Kt={class:"container-md"},Jt={class:"navbar-nav nav-fill w-100"},Qt={class:"nav-item dropup"},Xt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Zt={class:"nav-item dropup"},es={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ts(d,u,w,_,y,z){const T=Q("router-link");return t(),s("footer",Ft,[e("div",jt,[e("div",Gt,[e("span",Yt,"©"+b(y.copyright),1)])]),e("nav",Wt,[e("div",Kt,[e("ul",Jt,[e("li",Qt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Xt,[e("li",null,[D(T,{class:"dropdown-item",to:"/member/announcements"},{default:U(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),L(" Announcements ")])),_:1})]),e("li",null,[D(T,{class:"dropdown-item",to:"/member/posts"},{default:U(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),L(" Posts ")])),_:1})]),e("li",null,[D(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:U(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),L(" Yellow Pages ")])),_:1})])])]),e("li",Zt,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",es,[e("li",null,[D(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:U(()=>u[4]||(u[4]=[L(" Property Monthly Dues ")])),_:1})])])])])])])])}const ss=ke(zt,[["render",ts]]),os={name:"AdminLayout",components:{TopNav:qt,BottomNav:ss},inject:["$config"],mounted(){const u=this.$config;document.title=`Account - ${u.appName}`}},as={class:"d-flex flex-column vh-100"};function ls(d,u,w,_,y,z){const T=Q("Toasts"),Y=Q("router-view");return t(),s("div",as,[D(T),D(Y,{class:"flex-grow-1 mb-2"})])}const ns=ke(os,[["render",ls]]),rs={__name:"index",setup(d){return ge().user,re(()=>{}),(w,_)=>(t(),s("div",null,_[0]||(_[0]=[We('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},is={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},ds=is;function us(){be("$config");const d=ds.VITE_API_URL,u=Ke.create({baseURL:d});return Be.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),u.interceptors.request.use(w=>{Be.start();const{user:_}=ge();return _&&_.token&&(w.headers?(w.headers.Authorization||(w.headers.Authorization=`Bearer ${_.token}`),w.headers["Access-Control-Allow-Origin"]||(w.headers["Access-Control-Allow-Origin"]="*")):w.headers={Authorization:`Bearer ${_.token}`,"Access-Control-Allow-Origin":"*"}),w}),u.interceptors.response.use(w=>(Be.done(),w),w=>{throw Be.done(),w}),u}function me(d){if(!d.appTitle)throw Error("App Title is required.");if(!d.pageTitle)throw Error("Page Title is required.");const u=dt(),w=Je(),_=us(),y=Ze(),z=kt(),Y=ge().user,R=()=>Y&&Y.roles&&Y.roles.includes("System"),k=()=>Y&&Y.roles&&Y.roles.includes("administrator"),E=()=>Y&&Y.roles&&Y.roles.includes("employee"),J=()=>Y&&Y.roles&&Y.roles.includes("Member"),F=()=>{let n=u.path;return u.query.returnUrl&&(n=u.query.returnUrl),n=`?returnUrl=${encodeURIComponent(n)}`,n},N=async()=>{const n=document.referrer.toLowerCase();n&&n.includes("/accounts/login")?await w.go(-2):await w.go(-1)},$=n=>{var P;const O=u.path,a=(P=u.query)==null?void 0:P.returnUrl;a&&!(O.startsWith(a)||a.startsWith(O))?w.push(a):w.push(n)},M=d.appTitle,h=d.pageTitle,W=ae(!1),K=ae(new Map),i=ae(""),c=ae(""),x=ae("");return{appTitle:M,pageTitle:h,busy:W,validations:K,infoMessage:i,warningMessage:c,errorMessage:x,router:w,route:u,axios:_,utils:y,toasts:z,close:N,closeWithReturnUrl:$,generateReturnUrl:F,security:{userId:Y?Y.userId:"",isSystem:R(),isAdministrator:k(),isEmployee:E(),isMember:J()}}}const cs={class:"h-100 d-flex align-items-center justify-content-center"},ms={class:"form-signin w-100 m-auto"},fs={class:"h3 mb-3 fw-normal"},ps={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vs=["innerHTML"],gs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(d){be("$config");const u=ge(),w=tt(),_=new Qe(w.msalConfig),y=ce({username:"",password:""}),z={username:{required:ee.withMessage("Username is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0}},T=ye(z,y),{appTitle:Y,pageTitle:R,busy:k,isDirty:E,validations:J,infoMessage:F,warningMessage:N,errorMessage:$,router:M,route:h,axios:W,utils:K,toasts:i,close:c,security:x}=me({appTitle:"Sony FAST POC",pageTitle:"Sign On"});re(async()=>{await _.initialize()});const n=async()=>{await _.loginPopup({}).then(()=>{debugger;const P=_.getAllAccounts()[0];_.setActiveAccount(P)}).catch(a=>{console.error(`error during authentication: ${a}`)});var O={account:_.getActiveAccount(),scopes:[]};await _.acquireTokenSilent(O).then(a=>{debugger;const p=a.account.idToken,r=ut(p);if(r.token=a.accessToken,console.log(a),!r.roles){debugger;r.roles=[]}r.userId=r.sub,u.login(r);var v=h.query.returnUrl;v?M.push(decodeURIComponent(v)):r.roles.length===1?M.push(`/${r.roles[0].toLowerCase()}`):M.push("/")}).catch(a=>{console.error(`error during acquireTokenSilent: ${a}`)})};return(O,a)=>(t(),ie(ue,null,{default:U(()=>[e("div",cs,[e("main",ms,[e("div",null,[e("h1",fs,b(o(Y)),1),e("div",null,[o($)?(t(),s("div",ps,[a[1]||(a[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o($)},null,8,vs)])):C("",!0),o(T).$error?(t(),s("div",gs,[a[2]||(a[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(T).$errors,P=>(t(),s("li",{key:P.$uid},b(P.$message),1))),128))])])):C("",!0)]),e("button",{onClick:a[0]||(a[0]=P=>n()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},ys=ke(bs,[["__scopeId","data-v-896956d0"]]),$s={class:"h-100 d-flex align-items-center justify-content-center"},ws={__name:"logout",setup(d){const u=ge();return u.user,re(async()=>{u.logoutWithRedirect()}),(w,_)=>(t(),s("div",$s,_[0]||(_[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[L(" You have logged out from HOA MS."),e("br"),L(" Click "),e("a",{href:"/",class:"d-inline"},"here"),L(" to go back to home page. ")])],-1)])))}},hs={class:"h-100 d-flex align-items-center justify-content-center"},_s={class:"card m-3"},ks={class:"card-header"},Ss={class:"card-body"},Ts={class:"m-2"},Ms={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],Is={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},xs={class:"row row-cols-1 row-cols-sm-3"},Ps={class:"col-sm"},Vs={class:"form-group"},Us={key:0,class:"d-block invalid-feedback"},Os={class:"col-sm"},As={class:"form-group"},Ds={key:0,class:"d-block invalid-feedback"},Hs={class:"col-sm"},Es={class:"form-group"},Ls={key:0,class:"d-block invalid-feedback"},Bs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},qs={class:"form-group"},Rs={key:0,class:"d-block invalid-feedback"},zs={class:"col"},Fs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Gs={class:"row row-cols-1 row-cols-sm-3"},Ys={class:"col-sm"},Ws={class:"form-group"},Ks={key:0,class:"d-block invalid-feedback"},Js={class:"col-sm"},Qs={class:"form-group"},Xs={key:0,class:"d-block invalid-feedback"},Zs={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},eo={class:"col"},to=["disabled"],so={class:"col"},oo={class:"col"},ao={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(d){const u=ce({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),w=(x,n)=>x===n.password,_={firstName:{required:ee.withMessage("First name is required.",te),$autoDirty:!0,$lazy:!0},middleName:{required:ee.withMessage("Middle name is required.",te),$autoDirty:!0,$lazy:!0},lastName:{required:ee.withMessage("Last name is required.",te),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ee.withMessage("Phone number is required.",te),$autoDirty:!0,$lazy:!0},email:{required:ee.withMessage("Email is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ee.withMessage("Confirm password is required.",te),confirmSamePassword:ee.withMessage("Password and confirm passwrod are different.",w),$autoDirty:!0,$lazy:!0}},y=ye(_,u),{appTitle:z,pageTitle:T,busy:Y,isDirty:R,validations:k,infoMessage:E,warningMessage:J,errorMessage:F,router:N,axios:$,utils:M,toasts:h,close:W,security:K}=me({appTitle:"HOA MS",pageTitle:"Register User"}),i=be("$config");re(()=>{});const c=async()=>{const x=u;if(Y.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}F.value=null;try{Y.value=!0;const O=M.clone(x);O.tenantid=i.tenantId;debugger;await $({method:"post",url:"/api/v1/accounts/register",data:O}).then(a=>{h.success("Register","Registration was successfull.",{onClose:async()=>{await N.push("/accounts/login")}})})}catch(O){F.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{Y.value=!1}};return(x,n)=>{const O=Q("router-link");return t(),ie(ue,null,{default:U(()=>[e("div",hs,[e("div",_s,[e("h4",ks,b(o(T)),1),e("div",Ss,[e("div",Ts,[o(F)?(t(),s("div",Ms,[n[8]||(n[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(F)},null,8,Cs)])):C("",!0),o(y).$error?(t(),s("div",Is,[n[9]||(n[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(y).$errors,a=>(t(),s("li",{key:a.$uid},b(a.$message),1))),128))])])):C("",!0)]),e("div",xs,[e("div",Ps,[e("div",Vs,[n[10]||(n[10]=e("label",null,"First Name",-1)),I(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>u.firstName=a),type:"text",class:"form-control"},null,512),[[q,u.firstName]]),o(y).firstName.$error?(t(),s("div",Us,[(t(!0),s(B,null,j(o(y).firstName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",Os,[e("div",As,[n[11]||(n[11]=e("label",null,"Middle Name",-1)),I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=a=>u.middleName=a),type:"text",class:"form-control"},null,512),[[q,u.middleName]]),o(y).middleName.$error?(t(),s("div",Ds,[(t(!0),s(B,null,j(o(y).middleName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",Hs,[e("div",Es,[n[12]||(n[12]=e("label",null,"Last Name",-1)),I(e("input",{"onUpdate:modelValue":n[2]||(n[2]=a=>u.lastName=a),type:"text",class:"form-control"},null,512),[[q,u.lastName]]),o(y).lastName.$error?(t(),s("div",Ls,[(t(!0),s(B,null,j(o(y).lastName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])])]),e("div",Bs,[e("div",Ns,[e("div",qs,[n[13]||(n[13]=e("label",null,"Phone Number",-1)),I(e("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>u.phoneNumber=a),type:"tel",class:"form-control"},null,512),[[q,u.phoneNumber]]),o(y).phoneNumber.$error?(t(),s("div",Rs,[(t(!0),s(B,null,j(o(y).phoneNumber.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",zs,[e("div",Fs,[n[14]||(n[14]=e("label",null,"Email",-1)),I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=a=>u.email=a),type:"email",class:"form-control"},null,512),[[q,u.email]]),o(y).email.$error?(t(),s("div",js,[(t(!0),s(B,null,j(o(y).email.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])])]),e("div",Gs,[e("div",Ys,[e("div",Ws,[n[15]||(n[15]=e("label",null,"Password",-1)),I(e("input",{"onUpdate:modelValue":n[5]||(n[5]=a=>u.password=a),type:"password",class:"form-control"},null,512),[[q,u.password]]),o(y).password.$error?(t(),s("div",Ks,[(t(!0),s(B,null,j(o(y).password.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",Js,[e("div",Qs,[n[16]||(n[16]=e("label",null,"Confirm Password",-1)),I(e("input",{"onUpdate:modelValue":n[6]||(n[6]=a=>u.confirmPassword=a),type:"password",class:"form-control"},null,512),[[q,u.confirmPassword]]),o(y).confirmPassword.$error?(t(),s("div",Xs,[(t(!0),s(B,null,j(o(y).confirmPassword.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])])]),e("div",Zs,[e("div",eo,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:n[7]||(n[7]=a=>c()),class:"btn btn-primary w-100"},n[17]||(n[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),L("Register ")]),8,to)]),e("div",so,[D(O,{to:"/",class:"btn btn-outline-primary w-100"},{default:U(()=>n[18]||(n[18]=[L("Home")])),_:1})]),e("div",oo,[D(O,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:U(()=>n[19]||(n[19]=[L("Login")])),_:1})])])])])])]),_:1})}}},lo={path:"/accounts",component:ns,props:!1,meta:{},children:[{path:"",component:rs},{path:"login",component:ys},{path:"logout",component:ws},{path:"register",component:ao}]};function st(){const d=Je(),u=R=>window.location.href.indexOf(R)>-1,w=R=>localStorage.getItem("data-bs-theme")||R,_=R=>{document.documentElement.setAttribute("data-bs-theme",R),localStorage.setItem("data-bs-theme",R)},y=async()=>await Ke.get("https://bootswatch.com/api/5.json").then(R=>R.data),z=R=>{const k=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");k&&R?(k.setAttribute("href",R),localStorage.setItem("bootswatch-theme",R)):alert("cannot query css link")},T=R=>{Y(),d.push(R)},Y=()=>{if(screen.width<576){const k=document.getElementById("navbarCollapse");if(k){const E=ct.getInstance(k);E&&E.hide()}}};return{isActive:u,getCurrentBsTheme:w,changeBsTheme:_,getBootswatch:y,changeTheme:z,navigate:T,collapseNavbar:Y}}const no={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},ro={class:"container-md"},io={class:"navbar-collapse collapse",id:"navbarCollapse"},uo={class:"navbar-nav"},co={class:"nav-item"},mo={class:"nav-item dropdown"},fo={class:"dropdown-menu","aria-labelledby":"dropdown01"},po={class:"nav-item"},vo={class:"nav-item dropdown"},go={class:"dropdown-menu","aria-labelledby":"dropdown01"},bo={class:"navbar-nav ms-auto"},yo={class:"nav-item dropdown"},$o={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},wo=["onClick"],ho={class:"nav-item dropdown"},_o={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},ko={class:"d-sm-none d-xl-inline"},So={key:0},To={key:1},Mo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},Io={key:1},xo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(d){const u=tt(),{isActive:w,getCurrentBsTheme:_,changeBsTheme:y,getBootswatch:z,changeTheme:T,navigate:Y,collapseNavbar:R}=st(),k=ge(),E=k.user,J=ce({user:E,username:E?E.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});re(async()=>{const M=J;M.bootswatch=await z();const h=_(M.bsTheme);h&&(M.bsTheme=h,y(M.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(M.currentTheme=W,T(W))});const F=M=>{T(M),J.currentTheme=M,R()},N=M=>{y(M),J.bsTheme=M,R()},$=async()=>{k.logoutWithRedirect();const M=new Qe(u.msalConfig);await M.initialize();const h={mainWindowRedirectUri:"/"};await M.logoutPopup(h)};return(M,h)=>{const W=Q("router-link");return t(),ie(ue,null,{default:U(()=>[e("nav",no,[e("div",ro,[D(W,{class:"navbar-brand",to:"/administrator"},{default:U(()=>[L(b(d.appName),1)]),_:1}),h[18]||(h[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",io,[e("ul",uo,[e("li",co,[D(W,{to:"/videos",onClick:o(R),class:"nav-link"},{default:U(()=>h[3]||(h[3]=[e("span",{class:"fas fa-fw fa-file-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",mo,[h[6]||(h[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",fo,[e("li",null,[D(W,{to:"/source-groups",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[4]||(h[4]=[L(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/source-locations",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[5]||(h[5]=[L(" Locations ")])),_:1},8,["onClick"])])])]),e("li",po,[D(W,{to:"/vod-sources",onClick:o(R),class:"nav-link"},{default:U(()=>h[7]||(h[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",vo,[h[10]||(h[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",go,[e("li",null,[D(W,{to:"/program-templates",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[8]||(h[8]=[L(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/channels",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[9]||(h[9]=[L(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",bo,[e("li",yo,[h[14]||(h[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",$o,[e("li",null,[J.bsTheme==="dark"?(t(),s("button",{key:0,onClick:h[0]||(h[0]=K=>N("light")),class:"dropdown-item"},h[11]||(h[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),L("Dark Mode ")]))):(t(),s("button",{key:1,onClick:h[1]||(h[1]=K=>N("dark")),class:"dropdown-item"},h[12]||(h[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),L("Light Mode ")])))]),h[13]||(h[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(B,null,j(J.bootswatch.themes,K=>(t(),s("li",null,[e("button",{onClick:i=>F(K.cssCdn),class:oe(["dropdown-item",{active:J.currentTheme===K.cssCdn}])},b(K.name),11,wo)]))),256))])]),e("li",ho,[e("a",_o,[e("span",null,[h[15]||(h[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",ko,[o(E)?(t(),s("span",So,b(o(E).name),1)):(t(),s("span",To," Guest "))])])]),e("ul",Mo,[o(E)?(t(),s("li",Co,[e("button",{onClick:h[2]||(h[2]=K=>$()),class:"dropdown-item"},h[16]||(h[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),L("Logout ")]))])):(t(),s("li",Io,[D(W,{to:"/accounts/login",class:"dropdown-item"},{default:U(()=>h[17]||(h[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),L("Login ")])),_:1})]))])])])])])])]),_:1})}}},Po={class:"footer sticky-bottom"},Vo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Uo={class:"container-md"},Oo={class:"navbar-text small p-0"},Ao={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(d){st();const u=be("$config"),_=ge().user;let z=new Date().getFullYear();const T=ce({user:_,username:_?_.nameFull:"Guest",copyright:`2020-${z} ${u.appName}`});return re(async()=>{}),(Y,R)=>(t(),s("footer",Po,[e("div",Vo,[e("div",Uo,[e("span",Oo,"©"+b(T.copyright),1)])])]))}},Do={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Re.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(d){d.message&&this.addMessage(d.title,d.message,d.type,d.options)},async addMessage(d,u,w,_={}){var y={id:this.count++,title:d,message:u,type:w,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};y=Object.assign({},y,_),this.messages.unshift(y),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),y.timeOut>0&&await this.startTimeout(y)},async startTimeout(d,u=0){const w=this,_=performance.now(),y=async()=>{d.animationFrame=requestAnimationFrame(async z=>{const T=z+u-_;if(!w.exists(d)||d.paused){cancelAnimationFrame(d.animationFrame);return}else if(T<d.timeOut){const Y=T/d.timeOut;d.progress=Y,await y()}else{d.progress=1,cancelAnimationFrame(d.animationFrame),w.remove(d);return}})};await y()},pauseProgress(d){d.timeOut<=0||(d.paused=!0)},async resumeProgress(d){d.timeOut<=0||(d.paused=!1,await this.startTimeout(d,d.timeOut*d.progress))},getCurrentProgress(d){return Math.round(d.progress*100)===100?100:d.progress*100},getIconClass(d){const u=d.type;let w="";switch(u){case"success":w="fas fa-fw fa-circle-check";break;case"info":w="fas fa-fw fa-circle-info";break;case"warning":w="fas fa-fw fa-circle-exclamation";break;case"danger":w="fas fa-fw fa-triangle-exclamation";break}let _=w;return d.rtl?"icon-right "+_:"icon-left "+_},async remove(d){const u=this.messages.findIndex(w=>w.id===d.id);this.messages.splice(u,1),typeof d.onClose=="function"&&await d.onClose()},exists(d){return this.messages.findIndex(w=>w.id===d.id)!==-1}}},Ho={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Eo=["onMouseover","onMouseout"],Lo={class:"me-auto text-white"},Bo=["onClick"],No={class:"toast-body"},qo=["innerHTML"],Ro={key:0,class:"progress m-1",style:{height:"4px"}};function zo(d,u,w,_,y,z){return t(),ie(ue,null,{default:U(()=>[e("div",Ho,[D(we,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:U(()=>[(t(!0),s(B,null,j(y.messages,T=>(t(),s("div",{key:T.id,class:oe(["toast show mb-2 ms-auto",`border-${T.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Y=>z.pauseProgress(T),onMouseout:Y=>z.resumeProgress(T)},[e("div",{class:oe(["toast-header",`bg-${T.type}`])},[e("strong",Lo,[e("i",{class:oe([z.getIconClass(T),"me-1"])},null,2),L(b(T.title),1)]),T.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Y=>z.remove(T)},u[0]||(u[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Bo)):C("",!0)],2),e("div",No,[e("div",{innerHTML:T.message},null,8,qo)]),T.timeOut>0&&T.showProgress?(t(),s("div",Ro,[e("div",{class:oe(`bg-${T.type}`),style:Xe({width:z.getCurrentProgress(T)+"%"})},null,6)])):C("",!0)],42,Eo))),128))]),_:1})])]),_:1})}const Fo=ke(Do,[["render",zo],["__scopeId","data-v-5272bd9a"]]),jo={name:"AdminLayout",components:{TopNav:xo,BottomNav:Ao},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Go={class:"d-flex flex-column vh-100"};function Yo(d,u,w,_,y,z){const T=Q("Toasts"),Y=Q("TopNav"),R=Q("router-view"),k=Q("BottomNav");return t(),s("div",Go,[D(T),D(Y),D(R,{class:"flex-grow-1 mb-2"}),u[0]||(u[0]=e("div",{class:"pt-2"},null,-1)),D(k)])}const Wo=ke(jo,[["render",Yo]]),Ko={class:"d-flex flex-row justify-content-end"},Jo={class:"mt-2 container-md"},Qo={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Xo=["innerHTML"],Zo={class:"text-center"},ea={class:"row mt-3"},ta={class:"col-12 col-sm-6 offset-sm-3"},sa={class:"card"},oa={class:"card-body"},aa={class:"card card-body mb-2 d-none"},la={key:0,class:"fas fa-fw fa-circle-check text-success"},na={key:1,class:"fas fa-fw fa-times-circle text-danger"},ra={key:0,class:"fas fa-fw fa-circle-check text-success"},ia={key:1,class:"fas fa-fw fa-times-circle text-danger"},da={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},ua={class:"col"},ca={class:"card h-100 shadow-sm"},ma={class:"card-body"},fa={class:"col"},pa={class:"card h-100 shadow-sm"},va={class:"card-body"},ga={__name:"Index",setup(d){const{appTitle:u,pageTitle:w,busy:_,isDirty:y,validations:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,generateReturnUrl:$,security:M}=me({appTitle:"ARC AIO",pageTitle:"Dashboard"});be("$config"),ge().user;const W=ce({item:null});ae("805630ed-f288-4f2f-83a4-6c71312f6970"),ae(),re(async()=>{});const K=async()=>{const x=W;if(!_.value)try{_.value=!0;const n="/api/v1/dashboard/administrators/";x.item=[],await E.get(n).then(O=>{x.item=O.data})}catch(n){R.value=J.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}},i=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await E.get("/api/v1/channels/reset/").then(O=>{F.success("Reset All Data","Reset data was successful.")})}catch(n){R.value=J.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{await K()};return(x,n)=>{const O=Q("PageHeader"),a=Q("router-link");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(O,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Ko,[e("button",{onClick:n[0]||(n[0]=P=>c()),class:"ms-2 btn btn-secondary"},n[2]||(n[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Jo,[o(R)?(t(),s("div",Qo,[n[3]||(n[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(R))},null,8,Xo)])):C("",!0),n[26]||(n[26]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),L("UNDER CONSTRUCTION ")],-1)),e("div",Zo,[e("button",{onClick:n[1]||(n[1]=P=>i()),class:"btn btn-warning btn-lg"},n[4]||(n[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),L("Reset All Data ")]))]),e("div",ea,[e("div",ta,[e("div",sa,[n[14]||(n[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",oa,[e("ol",null,[n[8]||(n[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[D(a,{to:`/videos/add/${o($)()}`},{default:U(()=>n[5]||(n[5]=[L(" Create a Video. ")])),_:1},8,["to"])]),n[9]||(n[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[D(a,{to:"/program-templates/add"},{default:U(()=>n[6]||(n[6]=[L(" Create Program Template. ")])),_:1}),n[7]||(n[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),n[10]||(n[10]=e("li",null,[L(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),n[11]||(n[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),n[12]||(n[12]=e("li",null," Publish Channel. ",-1)),n[13]||(n[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",aa,[n[17]||(n[17]=L(" Security ")),e("ul",null,[e("li",null,[o(M).isAdministrator?(t(),s("span",la)):(t(),s("span",na)),n[15]||(n[15]=L(" Administrator "))]),e("li",null,[o(M).isEmployee?(t(),s("span",ra)):(t(),s("span",ia)),n[16]||(n[16]=L(" Employee "))])])]),e("div",da,[e("div",ua,[e("div",ca,[n[19]||(n[19]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),L("Human Resources ")])],-1)),e("div",ma,[e("ul",null,[e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[18]||(n[18]=[L(" Employees ")])),_:1})])])])])]),e("div",fa,[e("div",pa,[n[25]||(n[25]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),L("TBD ")])],-1)),e("div",va,[e("ul",null,[e("li",null,[D(a,{to:"/media-videos"},{default:U(()=>n[20]||(n[20]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[21]||(n[21]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[22]||(n[22]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[23]||(n[23]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[24]||(n[24]=[L(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},ba={class:"d-flex justify-content-end"},ya=["disabled"],$a={class:"input-group"},wa={class:"row row-cols-1 row-cols-sm-2 mt-3"},ha={class:"col text-center mb-2"},_a=["src"],ka={class:"col"},Sa={class:"form-floating mb-2"},Ta={key:0,class:"d-block invalid-feedback"},Ma={class:"form-floating mb-2"},Ca={class:"row row-cols-sm-2"},Ia={class:"col"},xa={class:"form-floating mb-2"},Pa={class:"col"},Va={class:"form-floating mb-2"},Ua={class:"row row-cols-sm-2"},Oa={class:"col"},Aa={class:"form-floating mb-2"},Da={class:"col"},Ha={class:"form-floating mb-2"},Ea={class:"col"},La={class:"form-floating mb-2"},Ba={class:"col"},Na={class:"form-floating mb-2"},Ge="YYYY-MM-DD HH:mm",qa={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"ARC AIO",pageTitle:"Add User"}),N=d,$=k.moment().local();$.format(Ge),$.add(24,"hours").format(Ge);const M=ae("a22de760-358d-4a0e-83ad-2624a5c11f73"),h=ce({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),W={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},K=ye(W,h);re(async()=>{});const i=async()=>{const x=h;if(!_.value)try{_.value=!0,x.item=null;const n=`/api/v1/users/get-from-entra-id/${M.value}`;await R.get(n).then(O=>{x.item=O.data})}catch(n){T.value=k.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{const x=h;if(_.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="",await R.post(`/api/v1/users/add-from-entra-id/${x.item.userId}`).then(O=>{E.success("Add User","User added",{onClose:async()=>{const a=`${N.urlView}/${O.data}`;await Y.push(a)}})})}catch(O){T.value=k.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{_.value=!1}};return(x,n)=>{const O=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",ba,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:n[0]||(n[0]=p=>c()),class:"btn btn-primary"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ya),D(O,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(P,{errorMessage:o(T),vuelidate:o(K)},{default:U(()=>[e("div",null,[e("div",null,[e("div",$a,[I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=p=>M.value=p),onKeyup:n[2]||(n[2]=Ue(p=>i(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[q,M.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:n[3]||(n[3]=p=>i())},n[14]||(n[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",wa,[e("div",ha,[e("img",{src:h.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,_a)]),e("div",ka,[e("div",Sa,[I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=p=>h.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[q,h.item.userId]]),n[15]||(n[15]=e("label",{for:"userId"},"User Id",-1)),o(K).item.userId.$error?(t(),s("div",Ta,[(t(!0),s(B,null,j(o(K).item.userId.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)]),e("div",Ma,[I(e("input",{"onUpdate:modelValue":n[5]||(n[5]=p=>h.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[q,h.item.displayName]]),n[16]||(n[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Ca,[e("div",Ia,[e("div",xa,[I(e("input",{"onUpdate:modelValue":n[6]||(n[6]=p=>h.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[q,h.item.givenName]]),n[17]||(n[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Pa,[e("div",Va,[I(e("input",{"onUpdate:modelValue":n[7]||(n[7]=p=>h.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[q,h.item.surname]]),n[18]||(n[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Ua,[e("div",Oa,[e("div",Aa,[I(e("input",{"onUpdate:modelValue":n[8]||(n[8]=p=>h.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[q,h.item.email]]),n[19]||(n[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Da,[e("div",Ha,[I(e("input",{"onUpdate:modelValue":n[9]||(n[9]=p=>h.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[q,h.item.mobilePhone]]),n[20]||(n[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Ea,[e("div",La,[I(e("input",{"onUpdate:modelValue":n[10]||(n[10]=p=>h.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[q,h.item.principalName]]),n[21]||(n[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Ba,[e("div",Na,[I(e("input",{"onUpdate:modelValue":n[11]||(n[11]=p=>h.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[q,h.item.jobTitle]]),n[22]||(n[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Oe(d){if(!d.cacheKey)throw Error("Cache Key required.");if(!d.baseUrl)throw Error("Base Url required.");const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:F,generateReturnUrl:N,security:$}=me({appTitle:d.appTitle,pageTitle:d.pageTitle}),M=JSON.parse(JSON.stringify(d.filter));M.pageIndex=M.pageIndex||1,M.pageSize=M.pageSize||15,M.sortField=M.sortField||"",M.sortOrder=M.sortOrder||1,M.updateUrl=M.updateUrl||!1,M.items=M.items||[],M.query=M.query||{},M.query.criteria=M.query.criteria||"";const h=ae(M),W=()=>{var r;if(_.value){console.log("Paginated search is currently busy.");return}const a=JSON.parse(localStorage.getItem(d.cacheKey))||{},P=new URLSearchParams(window.location.search),p=h.value;p.query.criteria=P.get("c")||a.criteria||p.query.criteria||"",p.pageIndex=parseInt(P.get("p"),10)||a.pageIndex||p.pageIndex||1,p.pageSize=parseInt(P.get("s"),10)||a.pageSize||p.pageSize||5,p.sortField=P.get("sf")||a.sortField||p.sortField||"",p.sortOrder=parseInt(P.get("so"),10)||a.sortOrder||p.sortOrder||1,p.visible=a.visible||p.visible,(r=d.initializeFilter)==null||r.call(d,h,d.cacheKey)},K=()=>{if(d.getQuery)return d.getQuery(h.value);{const a=h.value;return["?c=",encodeURIComponent(a.query.criteria),"&p=",a.pageIndex,"&s=",a.pageSize,"&sf=",a.sortField,"&so=",a.sortOrder].join("")}},i=()=>{if(d.saveQuery)d.saveQuery(h.value,d.cacheKey);else{const a=h.value;localStorage.setItem(d.cacheKey,JSON.stringify({criteria:a.query.criteria,pageIndex:a.pageIndex,pageSize:a.pageSize,sortField:a.sortField,sortOrder:a.sortOrder,visible:a.visible}))}};return{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:F,generateReturnUrl:N,security:$,filter:h,initializeFilter:W,getQuery:K,saveQuery:i,search:async a=>{var p;let P=h.value;if(_.value){console.log("Paginated search is currently busy.");return}a>0&&(P.pageIndex=a);try{_.value=!0,T.value="";const r=K();P.selected=null,await R(`${d.baseUrl}/${r}`).then(async v=>{var g;Array.isArray(v.data)?P.items=v.data:P=Object.assign(P,v.data);let m=location.pathname;m.endsWith("/")?m+=r:m+="/"+r,P.updateUrl&&window.history.replaceState(r,`${u}-search`,m),P.items.forEach(f=>{f.expand=!1}),i(),(g=d.successAction)==null||g.call(d,h.value)})}catch(r){if(localStorage.removeItem(d.cacheKey),d.failAction)d.failAction(r);else{const v=k.getErrorMessageAsHtml(r);T.value=v,E.error("Error Occured",v)}}finally{_.value=!1,(p=d.finalAction)==null||p.call(d)}},getRowNumber:a=>{const P=h.value;return(P.pageIndex-1)*P.pageSize+(a+1)},setSelected:a=>{const P=h.value;P.selected&&a&&P.selected===a?P.selected=null:(P.selected&&(P.selected.expand=!1),P.selected=a,P.selected.expand=!0)},isSelected:a=>{const P=h.value;return a===null||P.selected===null?!1:a===P.selected}}}const Ra={class:"d-flex justify-content-end"},za={key:0},Fa={class:"ms-1"},ja={class:"input-group"},Ga={class:"table-responsive"},Ya={class:"table table-hover mb-0"},Wa=["textContent"],Ka=["src"],Ja="/api/v1/users/search",Qa={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Oe({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${w==null?void 0:w.userId}/users/search`,baseUrl:Ja,filter:{updateUrl:!0}});return re(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-users",pageTitle:o(y)},{default:U(()=>[e("div",Ra,[o($).isAdministrator?(t(),s("div",za,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",Fa,[e("div",ja,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Ga,[e("table",Ya,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Wa),e("td",null,[m.photoBase64?(t(),s("img",{key:0,src:m.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ka)):C("",!0)]),e("td",null,[D(P,{to:`${d.urlView}/${m.userId}`,class:"d-inline-block text-truncate"},{default:U(()=>[L(b(m.displayName),1)]),_:2},1032,["to"])]),e("td",null,b(m.email),1),e("td",null,b(m.jobTitle),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Xa={class:"d-flex flex-row justify-content-end"},Za={key:0},el={class:"row row-cols-1 row-cols-sm-2 mt-3"},tl={class:"col text-center mb-2"},sl=["src"],ol={class:"col"},al={class:"form-floating mb-2"},ll={class:"form-floating mb-2"},nl={class:"row row-cols-sm-2"},rl={class:"col"},il={class:"form-floating mb-2"},dl={class:"col"},ul={class:"form-floating mb-2"},cl={class:"row row-cols-sm-2"},ml={class:"col"},fl={class:"form-floating mb-2"},pl={class:"col"},vl={class:"form-floating mb-2"},gl={class:"col"},bl={class:"form-floating mb-2"},yl={class:"col"},$l={class:"form-floating mb-2"},wl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"ARC CMS",pageTitle:"View User"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null});re(async()=>{await c()});const c=async()=>{const O=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const a=`/api/v1/users/get-from-db/${u.id}/`;await J.get(a).then(P=>{O.item=P.data})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},x=async()=>{await c()},n=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(a=>{N.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-user",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Xa,[o(W).isAdministrator?(t(),s(B,{key:0},[D(P,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:U(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=v=>n()),class:"ms-1 btn btn-warning"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:a[1]||(a[1]=v=>x()),class:"ms-2 btn btn-secondary"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=v=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(r,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Za,[e("div",null,[e("div",el,[e("div",tl,[e("img",{src:i.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,sl)]),e("div",ol,[e("div",al,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=v=>i.item.userId=v),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[q,i.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",ll,[I(e("input",{"onUpdate:modelValue":a[4]||(a[4]=v=>i.item.displayName=v),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[q,i.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",nl,[e("div",rl,[e("div",il,[I(e("input",{"onUpdate:modelValue":a[5]||(a[5]=v=>i.item.givenName=v),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[q,i.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",dl,[e("div",ul,[I(e("input",{"onUpdate:modelValue":a[6]||(a[6]=v=>i.item.surname=v),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[q,i.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",cl,[e("div",ml,[e("div",fl,[I(e("input",{"onUpdate:modelValue":a[7]||(a[7]=v=>i.item.email=v),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[q,i.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",pl,[e("div",vl,[I(e("input",{"onUpdate:modelValue":a[8]||(a[8]=v=>i.item.mobilePhone=v),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[q,i.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",gl,[e("div",bl,[I(e("input",{"onUpdate:modelValue":a[9]||(a[9]=v=>i.item.principalName=v),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[q,i.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",yl,[e("div",$l,[I(e("input",{"onUpdate:modelValue":a[10]||(a[10]=v=>i.item.jobTitle=v),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[q,i.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},hl={class:"d-flex justify-content-end"},_l=["disabled"],kl={class:"row row-cols-1 row-cols-sm-2"},Sl={class:"col"},Tl={class:"form-floating mb-2"},Ml={key:0,class:"d-block invalid-feedback"},Cl={class:"col"},Il={class:"form-floating"},xl={class:"col"},Pl={class:"form-floating mb-2"},Vl={class:""},Ul={class:"col"},Ol={class:"form-floating mb-2"},Al={key:0,class:"d-block invalid-feedback"},Dl={class:"col"},Hl={class:"form-floating mb-2"},El={key:0,class:"d-block invalid-feedback"},Ll={class:""},Bl={class:"col"},Nl={class:"form-floating mb-2"},ql={key:0,class:"d-block invalid-feedback"},Rl={class:"col"},zl={class:"input-group mb-2"},Fl={class:"form-floating"},jl=["href"],Gl={key:0,class:"d-block invalid-feedback"},Yl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),N=d,$=ce({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),M={item:{title:{title:ee.withMessage("title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ee.withMessage("durationInMillis is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:ee.withMessage("rawBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},rawPath:{title:ee.withMessage("rawPath is required.",te),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:ee.withMessage("hlsBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},hlsPath:{title:ee.withMessage("hlsPath is required.",te),$autoDirty:!0,$lazy:!0}}},h=ye(M,$),W=De(()=>{const c=k.moment;if($.durationTime&&$.durationTime!=="00:00:00"&&K($.durationTime)){const x=c().startOf("day"),n=x.format("YYYY-MM-DD ")+$.durationTime,a=c(n).subtract(x);return $.item.durationInMillis=a.valueOf(),$.item.durationInMillis}return 0}),K=c=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(c);re(async()=>{});const i=async()=>{const c=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const n=k.clone(c.item);n.durationInMillis=W.value;debugger;await R.post("/api/v1/videos/",n).then(O=>{E.success("Add Video","Video added",{onClose:async()=>{const a=`${N.urlView}/${O.data}`;await Y.push(a)}})})}catch(n){T.value=k.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}};return(c,x)=>{const n=Q("router-link"),O=Q("PageHeader"),a=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(O,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",hl,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:x[0]||(x[0]=P=>i()),class:"btn btn-primary"},x[8]||(x[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_l),D(n,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>x[9]||(x[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(a,{errorMessage:o(T),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",kl,[e("div",Sl,[e("div",Tl,[I(e("input",{"onUpdate:modelValue":x[1]||(x[1]=P=>$.item.title=P),id:"name",class:"form-control",placeholder:"Title"},null,512),[[q,$.item.title]]),x[10]||(x[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Ml,[(t(!0),s(B,null,j(o(h).item.title.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Cl,[e("div",Il,[I(e("input",{"onUpdate:modelValue":x[2]||(x[2]=P=>$.durationTime=P),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[q,$.durationTime]]),x[11]||(x[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",xl,[e("div",Pl,[I(e("textarea",{"onUpdate:modelValue":x[3]||(x[3]=P=>$.item.description=P),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[q,$.item.description]]),x[12]||(x[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Vl,[x[15]||(x[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Ul,[e("div",Ol,[I(e("input",{"onUpdate:modelValue":x[4]||(x[4]=P=>$.item.rawBaseUrl=P),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[q,$.item.rawBaseUrl]]),x[13]||(x[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.rawBaseUrl.$error?(t(),s("div",Al,[(t(!0),s(B,null,j(o(h).item.rawBaseUrl.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Dl,[e("div",Hl,[I(e("input",{"onUpdate:modelValue":x[5]||(x[5]=P=>$.item.rawPath=P),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[q,$.item.rawPath]]),x[14]||(x[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(h).item.rawPath.$error?(t(),s("div",El,[(t(!0),s(B,null,j(o(h).item.rawPath.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Ll,[x[19]||(x[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Bl,[e("div",Nl,[I(e("input",{"onUpdate:modelValue":x[6]||(x[6]=P=>$.item.hlsBaseUrl=P),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[q,$.item.hlsBaseUrl]]),x[16]||(x[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.hlsBaseUrl.$error?(t(),s("div",ql,[(t(!0),s(B,null,j(o(h).item.hlsBaseUrl.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Rl,[e("div",zl,[e("div",Fl,[I(e("input",{"onUpdate:modelValue":x[7]||(x[7]=P=>$.item.hlsPath=P),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[q,$.item.hlsPath]]),x[17]||(x[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),$.item.hlsBaseUrl&&$.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent($.item.hlsBaseUrl+$.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},x[18]||(x[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,jl)):C("",!0)]),o(h).item.hlsPath.$error?(t(),s("div",Gl,[(t(!0),s(B,null,j(o(h).item.hlsPath.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Wl={key:0,class:"d-flex justify-content-end"},Kl=["disabled"],Jl={key:0},Ql={class:"row row-cols-1 row-cols-sm-2"},Xl={class:"col"},Zl={class:"form-floating mb-2"},en={key:0,class:"d-block invalid-feedback"},tn={class:"col"},sn={class:"form-floating mb-2"},on={key:0,class:"d-block invalid-feedback"},an={class:"row row-cols-sm-2"},ln={class:"col"},nn={class:"form-floating mb-2"},rn={class:"form-floating mb-2"},dn={key:0,class:"d-block invalid-feedback"},un={class:"form-floating mb-2"},cn={key:0,class:"d-block invalid-feedback"},mn={class:"col"},fn={class:"form-floating mb-2"},Ee={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),N=d,$=ce({editorElementId:"editor",htmlContent:"",item:null}),M={item:{title:{required:ee.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},eidr:{required:ee.withMessage("eidr is required.",te),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ee.withMessage("eidrPrefix is required.",te),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ee.withMessage("Content is required.",te),$autoDirty:!0,$lazy:!0}},h=ye(M,$);re(async()=>{await i()});const W=()=>{const x=$;var n=document.getElementById(x.editorElementId);n.innerHTML=x.htmlContent},K=x=>{const n=$;n.htmlContent=x.target.innerHTML;var O=document.getElementById(n.editorElementId);O.value=n.htmlContent},i=async()=>{const x=$;if(!_.value)try{_.value=!0,$.item=null,await R.get(`/api/v1/movies/${N.id}`).then(n=>{x.item=n.data,x.htmlContent=x.item.description}),W()}catch(n){T.value=k.getErrorMessageAsHtml(n)}finally{_.value=!1}},c=async()=>{const x=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const O=k.clone(x.item);O.description=x.htmlContent,await R.put("/api/v1/movies",O).then(a=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const P=`${N.urlView}/${N.id}`;await Y.push(P)}})})}catch(O){T.value=k.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{_.value=!1}};return(x,n)=>{const O=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),s("div",null,[D(a,{"page-icon":"fas fa-fw fa-film",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[$.item?(t(),s("div",Wl,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:n[0]||(n[0]=p=>c()),class:"btn btn-primary"},n[7]||(n[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kl),e("button",{onClick:i,class:"ms-2 btn btn-secondary"},n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(O,{to:`${N.urlView}/${N.id}`,class:"ms-1 btn btn-secondary"},{default:U(()=>n[9]||(n[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):C("",!0)]),_:1},8,["pageTitle"]),D(P,{errorMessage:o(T),vuelidate:o(h)},{default:U(()=>[$.item?(t(),s("div",Jl,[e("div",Ql,[e("div",Xl,[e("div",Zl,[I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=p=>$.item.eidrPrefix=p),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[q,$.item.eidrPrefix]]),n[10]||(n[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(h).item.eidrPrefix.$error?(t(),s("div",en,[(t(!0),s(B,null,j(o(h).item.eidrPrefix.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])]),e("div",tn,[e("div",sn,[I(e("input",{"onUpdate:modelValue":n[2]||(n[2]=p=>$.item.eidr=p),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[q,$.item.eidr]]),n[11]||(n[11]=e("label",{for:"title"},"Eidr",-1)),o(h).item.eidr.$error?(t(),s("div",on,[(t(!0),s(B,null,j(o(h).item.eidr.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])])]),e("div",an,[e("div",ln,[e("div",nn,[I(e("input",{"onUpdate:modelValue":n[3]||(n[3]=p=>$.item.releaseYear=p),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[q,$.item.releaseYear]]),n[12]||(n[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",rn,[I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=p=>$.item.title=p),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[q,$.item.title]]),n[13]||(n[13]=e("label",{for:"title"},"Title",-1)),o(h).item.title.$error?(t(),s("div",dn,[(t(!0),s(B,null,j(o(h).item.title.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])])]),e("div",null,[e("div",un,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:n[5]||(n[5]=p=>K(p))},null,32),n[14]||(n[14]=e("label",{for:"editor"},"Content",-1)),o(h).htmlContent.$error?(t(),s("div",cn,[(t(!0),s(B,null,j(o(h).htmlContent.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])]),e("div",mn,[e("div",fn,[I(e("textarea",{"onUpdate:modelValue":n[6]||(n[6]=p=>$.item.metadata=p),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[q,$.item.metadata]]),n[15]||(n[15]=e("label",{for:"title"},"Metadata",-1))])])])):C("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},pn={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function vn(d,u,w,_,y,z){const T=Q("Page");return t(),ie(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const gn=ke(pn,[["render",vn]]),bn={class:"d-flex justify-content-end"},yn={class:"ms-1"},$n={class:"input-group"},wn={class:"table-responsive"},hn={class:"table table-hover mb-0"},_n=["textContent"],kn={class:"text-end ms-sm-5 pe-sm-5"},Sn="/api/v1/videos/search",Tn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Oe({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${w==null?void 0:w.userId}/videos/search`,baseUrl:Sn,filter:{updateUrl:!0}});return re(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:U(()=>[e("div",bn,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",yn,[e("div",$n,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",wn,[e("table",hn,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,_n),e("td",null,[D(P,{to:`${d.urlView}/${m.videoId}`,class:"d-inline-block text-truncate"},{default:U(()=>[L(b(m.title),1)]),_:2},1032,["to"])]),e("td",null,b(m.description),1),e("td",kn,[e("div",null,b(o(J).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Mn={class:"d-flex flex-row justify-content-end"},Cn={key:0},In={class:"row row-cols-sm-2"},xn={class:"col"},Pn={class:"form-floating mb-2"},Vn={class:"col"},Un={class:"form-floating mb-2"},On={class:"col"},An={class:"form-floating mb-2"},Dn={class:"row row-cols-sm-2"},Hn={class:"col"},En={class:"form-floating mb-2"},Ln={class:"col"},Bn={class:"form-floating mb-2"},Nn={class:"row row-cols-sm-2"},qn={class:"col"},Rn={class:"form-floating mb-2"},zn={class:"col"},Fn={class:"form-floating mb-2"},jn={class:"row row-cols-sm-2"},Gn={class:"col"},Yn={class:"form-floating mb-2"},Wn={class:"col"},Kn={class:"form-floating mb-2"},Jn={class:"table-responsive"},Qn={class:"table table-hover mb-0 caption-top"},Xn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null});re(async()=>{await c()});const c=async()=>{const O=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const a=`/api/v1/videos/${u.id}/`;await J.get(a).then(P=>{O.item=P.data,O.item.duration=F.moment.utc(O.item.durationInMillis).format("HH:mm:ss")})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},x=async()=>{await c()},n=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(a=>{N.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Mn,[o(W).isAdministrator?(t(),s(B,{key:0},[D(P,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:U(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=v=>n()),class:"ms-1 btn btn-warning"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:a[1]||(a[1]=v=>x()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=v=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(r,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Cn,[e("div",null,[e("div",In,[e("div",xn,[e("div",Pn,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=v=>i.item.title=v),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[q,i.item.title]]),a[16]||(a[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",Vn,[e("div",Un,[I(e("input",{"onUpdate:modelValue":a[4]||(a[4]=v=>i.item.duration=v),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[q,i.item.duration]]),a[17]||(a[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",On,[e("div",An,[I(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=v=>i.item.description=v),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[q,i.item.description]]),a[18]||(a[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",Dn,[e("div",Hn,[e("div",En,[I(e("input",{"onUpdate:modelValue":a[6]||(a[6]=v=>i.item.rawBaseUrl=v),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[q,i.item.rawBaseUrl]]),a[19]||(a[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Ln,[e("div",Bn,[I(e("input",{"onUpdate:modelValue":a[7]||(a[7]=v=>i.item.rawPath=v),class:"form-control",id:"rawPath",disabled:""},null,512),[[q,i.item.rawPath]]),a[20]||(a[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Nn,[e("div",qn,[e("div",Rn,[I(e("input",{"onUpdate:modelValue":a[8]||(a[8]=v=>i.item.hlsBaseUrl=v),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[q,i.item.hlsBaseUrl]]),a[21]||(a[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",zn,[e("div",Fn,[I(e("input",{"onUpdate:modelValue":a[9]||(a[9]=v=>i.item.hlsPath=v),class:"form-control",id:"hlsPath",disabled:""},null,512),[[q,i.item.hlsPath]]),a[22]||(a[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",jn,[e("div",Gn,[e("div",Yn,[I(e("input",{"onUpdate:modelValue":a[10]||(a[10]=v=>i.item.dashBaseUrl=v),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[q,i.item.dashBaseUrl]]),a[23]||(a[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Wn,[e("div",Kn,[I(e("input",{"onUpdate:modelValue":a[11]||(a[11]=v=>i.item.dashPath=v),class:"form-control",id:"dashPath",disabled:""},null,512),[[q,i.item.dashPath]]),a[24]||(a[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Jn,[e("table",Qn,[a[25]||(a[25]=e("caption",null,"VOD Sources",-1)),a[26]||(a[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.vodSources,(v,m)=>(t(),s("tr",{key:v.vodSourceId},[e("td",null,b(m+1),1),e("td",null,[D(P,{to:`${u.urlViewVodSource}/${encodeURIComponent(v.vodSourceId)}/${o(h)()}`},{default:U(()=>[L(b(v.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[he,i.item.vodSources.length>0]])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Zn={class:"d-flex justify-content-end"},er=["disabled"],tr={class:"form-floating mb-2"},sr={key:0,class:"d-block invalid-feedback"},or={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),N=d,$=ce({lookups:{},item:{name:null}}),M={item:{name:{required:ee.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0}}},h=ye(M,$);re(async()=>{});const W=async()=>{const K=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const c=k.clone(K.item);await R.post("/api/v1/sourcegroups/",c).then(x=>{E.success("Add Source Group","Source group added.",{onClose:async()=>{const n=`${N.urlView}/${x.data}`;await Y.push(n)}})})}catch(c){T.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}};return(K,i)=>{const c=Q("router-link"),x=Q("PageHeader"),n=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(x,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Zn,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:i[0]||(i[0]=O=>W()),class:"btn btn-primary"},i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,er),D(c,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(n,{errorMessage:o(T),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",tr,[I(e("input",{"onUpdate:modelValue":i[1]||(i[1]=O=>$.item.name=O),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[q,$.item.name]]),i[4]||(i[4]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",sr,[(t(!0),s(B,null,j(o(h).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ar={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function lr(d,u,w,_,y,z){const T=Q("Page");return t(),ie(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const nr=ke(ar,[["render",lr]]),rr={class:"d-flex justify-content-end"},ir={class:"ms-1"},dr={class:"input-group"},ur={class:"table-responsive"},cr={class:"table table-hover mb-0"},mr=["textContent"],fr={key:0,class:"fas fa-fw fa-check-circle text-success"},pr="/api/v1/sourcegroups/search",vr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Oe({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${w==null?void 0:w.userId}/source-groups/search`,baseUrl:pr,filter:{updateUrl:!0}});return re(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(y)},{default:U(()=>[e("div",rr,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ir,[e("div",dr,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",ur,[e("table",cr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,mr),e("td",null,[D(P,{to:`${d.urlView}/${m.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",fr)):C("",!0),L(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.channelOutputs),1),e("td",null,b(m.packageConfigurations),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},gr={class:"d-flex flex-row justify-content-end"},br={key:0},yr={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},$r={class:"nav-item",role:"presentation"},wr={class:"nav-item",role:"presentation"},hr={class:"nav-item",role:"presentation"},_r={class:"tab-content",id:"myTabContent"},kr={class:"mt-2"},Sr={class:"col"},Tr={class:"form-floating mb-2"},Mr={class:"mt-2"},Cr={class:"table-responsive border"},Ir={class:"table table-hover mb-0"},xr={class:"mt-2"},Pr={class:"table-responsive border"},Vr={class:"table table-hover mb-0"},Ur={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null}),c=ae();re(async()=>{await a(),c.value=F.getPageTab("sourceGroup")||"information-tab"});const x=r=>{F.setPageTab("sourceGroup",r),c.value=r},n=r=>r!==c.value?"":"active",O=r=>r!==c.value?"":"show active",a=async()=>{const r=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const v=`/api/v1/sourcegroups/${u.id}/`;await J.get(v).then(m=>{r.item=m.data})}catch(v){k.value=F.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{if(!y.value)try{y.value=!0,k.value="";const r=`/api/v1/sourcegroups/${u.id}/`;await J.delete(r).then(v=>{N.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const m=`${u.urlMain}/`;await E.push(m)}})})}catch(r){k.value=F.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{y.value=!1}},p=async()=>{await a()};return(r,v)=>{const m=Q("PageHeader"),g=Q("router-link"),f=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",gr,[e("button",{onClick:v[0]||(v[0]=G=>P()),class:"ms-1 btn btn-warning"},v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:v[1]||(v[1]=G=>p()),class:"ms-2 btn btn-secondary"},v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:v[2]||(v[2]=G=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},v[9]||(v[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(f,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",br,[e("div",null,[e("ul",yr,[e("li",$r,[e("button",{onClick:v[3]||(v[3]=G=>x("information-tab")),class:oe([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",wr,[e("button",{onClick:v[4]||(v[4]=G=>x("channelOutputs-tab")),class:oe([n("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",hr,[e("button",{onClick:v[5]||(v[5]=G=>x("packageConfigurations-tab")),class:oe([n("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",_r,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",kr,[e("div",Sr,[e("div",Tr,[I(e("input",{"onUpdate:modelValue":v[6]||(v[6]=G=>i.item.name=G),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.name]]),v[10]||(v[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:oe([O("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Mr,[e("div",Cr,[e("table",Ir,[v[11]||(v[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.channelOutputs,(G,V)=>(t(),s("tr",{key:G.channelOutputId},[e("td",null,b(V+1),1),e("td",null,[D(g,{to:`${d.urlViewChannel}/${G.channelId}/${o(h)()}`},{default:U(()=>[L(b(G.manifestName),1)]),_:2},1032,["to"])]),e("td",null,b(G.outputType),1)]))),128))]),_:1},512),[[he,i.item.channelOutputs.length>0]])])])])],2),e("div",{class:oe([O("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",xr,[e("div",Pr,[e("table",Vr,[v[12]||(v[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.packageConfigurations,(G,V)=>(t(),s("tr",{key:G.packageConfigurationId},[e("td",null,b(V+1),1),e("td",null,[D(g,{to:`${d.urlViewVodSource}/${G.vodSourceId}/${o(h)()}`},{default:U(()=>[L(b(G.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,b(G.path),1),e("td",null,b(G.type),1)]))),128))]),_:1},512),[[he,i.item.packageConfigurations.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Or={class:"d-flex justify-content-end"},Ar=["disabled"],Dr={class:"form-floating mb-2"},Hr={key:0,class:"d-block invalid-feedback"},Er={class:"form-floating mb-2"},Lr={key:0,class:"d-block invalid-feedback"},Br={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),N=d,$=ce({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),M={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:ee.withMessage("HTTP Configuration Base Url is required.",te),$autoDirty:!0,$lazy:!0}}},h=ye(M,$);re(async()=>{});const W=async()=>{const K=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const c=k.clone(K.item);await R.post("/api/v1/sourcelocations/",c).then(x=>{E.success("Add Source Location","Source location added.",{onClose:async()=>{const n=`${N.urlView}/${x.data}`;await Y.push(n)}})})}catch(c){T.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}};return(K,i)=>{const c=Q("router-link"),x=Q("PageHeader"),n=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(x,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Or,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:i[0]||(i[0]=O=>W()),class:"btn btn-primary"},i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ar),D(c,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>i[4]||(i[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(n,{errorMessage:o(T),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Dr,[I(e("input",{"onUpdate:modelValue":i[1]||(i[1]=O=>$.item.name=O),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[q,$.item.name]]),i[5]||(i[5]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Hr,[(t(!0),s(B,null,j(o(h).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):C("",!0)]),e("div",Er,[I(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=O=>$.item.httpConfigurationBaseUrl=O),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[q,$.item.httpConfigurationBaseUrl]]),i[6]||(i[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(h).item.httpConfigurationBaseUrl.$error?(t(),s("div",Lr,[(t(!0),s(B,null,j(o(h).item.httpConfigurationBaseUrl.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Nr={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function qr(d,u,w,_,y,z){const T=Q("Page");return t(),ie(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Rr=ke(Nr,[["render",qr]]),zr={class:"d-flex justify-content-end"},Fr={class:"ms-1"},jr={class:"input-group"},Gr={class:"table-responsive"},Yr={class:"table table-hover mb-0"},Wr=["textContent"],Kr={key:0,class:"fas fa-fw fa-check-circle text-success"},Jr="/api/v1/sourcelocations/search",Qr={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Oe({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${w==null?void 0:w.userId}/source-locations/search`,baseUrl:Jr,filter:{updateUrl:!0}});return re(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-building",pageTitle:o(y)},{default:U(()=>[e("div",zr,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Fr,[e("div",jr,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Gr,[e("table",Yr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Wr),e("td",null,[D(P,{to:`${d.urlView}/${m.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",Kr)):C("",!0),L(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Xr={class:"d-flex flex-row justify-content-end"},Zr={key:0},ei={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},ti={class:"nav-item",role:"presentation"},si={class:"nav-item",role:"presentation"},oi={class:"nav-item",role:"presentation"},ai={class:"tab-content",id:"myTabContent"},li={class:"mt-2"},ni={class:"col"},ri={class:"form-floating mb-2"},ii={class:"col"},di={class:"form-floating mb-2"},ui={class:"mt-2"},ci={class:"table-responsive border"},mi={class:"table table-hover mb-0"},fi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},pi={class:"mt-2"},vi={class:"table-responsive border"},gi={class:"table table-hover mb-0"},bi={key:0,class:"fas fa-fw fa-check-circle text-success"},yi={class:"badge bg-info"},$i={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null}),c=ae();re(async()=>{await a(),c.value=F.getPageTab("sourceLocation")||"information-tab"});const x=v=>{F.setPageTab("sourceLocation",v),c.value=v},n=v=>v!==c.value?"":"active",O=v=>v!==c.value?"":"show active",a=async()=>{const v=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const m=`/api/v1/sourcelocations/${u.id}/`;await J.get(m).then(g=>{v.item=g.data})}catch(m){k.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()},p=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/sourcelocations/${u.id}/publish/`).then(m=>{N.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),y.value=!1,await P()}catch(m){k.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}}},r=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/sourcelocations/unpublish/${u.id}/`).then(m=>{N.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),y.value=!1,await P()}catch(m){k.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}}};return(v,m)=>{const g=Q("PageHeader"),f=Q("router-link"),G=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(g,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Xr,[i.item?(t(),s(B,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=V=>r()),class:"ms-1 btn btn-warning"},m[9]||(m[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=V=>p()),class:"ms-1 btn btn-primary"},m[10]||(m[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:m[2]||(m[2]=V=>P()),class:"ms-2 btn btn-secondary"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=V=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(G,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Zr,[e("div",null,[e("ul",ei,[e("li",ti,[e("button",{onClick:m[4]||(m[4]=V=>x("information-tab")),class:oe([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",si,[e("button",{onClick:m[5]||(m[5]=V=>x("vodSources-tab")),class:oe([n("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",oi,[e("button",{onClick:m[6]||(m[6]=V=>x("programs-tab")),class:oe([n("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",ai,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",li,[e("div",ni,[e("div",ri,[I(e("input",{"onUpdate:modelValue":m[7]||(m[7]=V=>i.item.name=V),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.name]]),m[13]||(m[13]=e("label",{for:"name"},"Name",-1))])]),e("div",ii,[e("div",di,[I(e("input",{"onUpdate:modelValue":m[8]||(m[8]=V=>i.item.httpConfigurationBaseUrl=V),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[q,i.item.httpConfigurationBaseUrl]]),m[14]||(m[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:oe([O("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",ui,[e("div",ci,[e("table",mi,[m[15]||(m[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.vodSources,(V,se)=>(t(),s("tr",{key:V.vodSourceId},[e("td",null,b(se+1),1),e("td",null,[V.arn?(t(),s("span",fi)):C("",!0),D(f,{to:`${u.urlViewVodSource}/${encodeURIComponent(V.vodSourceId)}/${o(h)()}`},{default:U(()=>[L(b(V.name),1)]),_:2},1032,["to"])]),e("td",null,[D(f,{to:`${u.urlViewVideo}/${encodeURIComponent(V.video.videoId)}/${o(h)()}`},{default:U(()=>[L(b(V.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,b(o(F).moment.utc(V.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,i.item.vodSources.length>0]])])])])],2),e("div",{class:oe([O("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",pi,[e("div",vi,[e("table",gi,[m[17]||(m[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.programs,(V,se)=>(t(),s("tr",{key:V.programId},[e("td",null,b(se+1),1),e("td",null,[D(f,{to:`${u.urlViewChannel}/${encodeURIComponent(V.channel.channelId)}/${o(h)()}`},{default:U(()=>[L(b(V.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[V.arn?(t(),s("span",bi)):C("",!0),L(" "+b(V.name)+" ",1),e("div",null," Start: "+b(o(F).moment.utc(V.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+b(o(F).moment.utc(V.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[L(b(o(F).moment(V.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",yi,b(o(F).moment(V.dateScheduledStart).fromNow()),1)])]),m[16]||(m[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[he,i.item.programs.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},wi={class:"d-flex justify-content-end"},hi=["disabled"],_i={class:"col"},ki={class:"form-floating mb-2"},Si={key:0,class:"d-block invalid-feedback"},Ti={class:"row row-cols-1 row-cols-sm-2"},Mi={class:"col"},Ci={class:"form-floating mb-2"},Ii=["value"],xi={key:0,class:"d-block invalid-feedback"},Pi={class:"col"},Vi={class:"form-floating mb-2"},Ui=["disabled"],Oi=["value"],Ai={key:0,class:"d-block invalid-feedback"},Di={key:0},Hi={class:"d-flex flex-row justify-content-between"},Ei={key:0,class:"d-inline invalid-feedback"},Li={class:"table-responsive border mt-1"},Bi={class:"table mb-0 caption-top"},Ni={class:"input-group mb-1"},qi=["onUpdate:modelValue"],Ri=["onUpdate:modelValue"],zi=["value"],Fi=["onUpdate:modelValue"],ji=["onClick"],Gi={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),N=d,$=ce({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),M=(P,p,r)=>P.length>0,h={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:ee.withMessage("Video is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("Source Locaton is required.",te),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ee.withMessage("PackageConfigurations is required.",M),$each:ee.forEach({path:{required:ee.withMessage("Path is required.",te)},sourceGroupId:{required:ee.withMessage("Source Group is required.",te)}}),$autoDirty:!0,$lazy:!0}}},W=ye(h,$);re(async()=>{await K(),await i()});const K=async()=>{try{await R.get("/api/v1/sourcegroups/lookup/").then(p=>{$.lookups.sourceGroups=p.data})}catch(P){T.value=k.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},i=async()=>{try{if(await R.get("/api/v1/sourcelocations/lookup/").then(p=>{$.lookups.sourceLocations=p.data}),$.lookups.sourceLocations.length===1){const p=$.lookups.sourceLocations[0];$.selected.sourceLocation=p,await c()}}catch(P){T.value=k.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},c=async()=>{const P=$.selected.sourceLocation;$.item.sourceLocationId=P.id,await x(P.baseUrl)},x=async P=>{try{const p=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(P)}`;await R.get(p).then(r=>{$.lookups.videos=r.data,$.lookups.videos.length===1&&($.item.videoId=$.lookups.videos[0].id)})}catch(p){T.value=k.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},n=async()=>{const P=$;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const r=k.clone(P.item);r.videoId=r.video.id,delete r.video,await R.post("/api/v1/vodSources/",r).then(v=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const m=`${N.urlView}/${v.data}`;await Y.push(m)}})})}catch(r){T.value=k.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{_.value=!1}},O=()=>{const P={path:"",sourceGroupId:null,type:"HLS"},p=$.item.video;p&&(P.path=p.hlsPath),$.item.packageConfigurations.push(P)},a=P=>{$.item.packageConfigurations.splice(P,1)};return(P,p)=>{const r=Q("router-link"),v=Q("PageHeader"),m=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(v,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",wi,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:p[0]||(p[0]=g=>n()),class:"btn btn-primary"},p[6]||(p[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hi),D(r,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>p[7]||(p[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(m,{errorMessage:o(T),vuelidate:o(W)},{default:U(()=>[e("div",null,[e("div",_i,[e("div",ki,[I(e("input",{"onUpdate:modelValue":p[1]||(p[1]=g=>$.item.name=g),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,$.item.name]]),p[8]||(p[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Si,[(t(!0),s(B,null,j(o(W).item.name.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",Ti,[e("div",Mi,[e("div",Ci,[I(e("select",{"onUpdate:modelValue":p[2]||(p[2]=g=>$.selected.sourceLocation=g),onChange:p[3]||(p[3]=g=>c()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j($.lookups.sourceLocations,g=>(t(),s("option",{value:g},b(g.name),9,Ii))),256))],544),[[ve,$.selected.sourceLocation]]),p[9]||(p[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",xi,[(t(!0),s(B,null,j(o(W).item.sourceLocationId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",Pi,[e("div",Vi,[I(e("select",{"onUpdate:modelValue":p[4]||(p[4]=g=>$.item.video=g),onChange:p[5]||(p[5]=g=>$.item.videoId=$.item.video.id),class:"form-select",id:"videoId",disabled:$.item.packageConfigurations.length>0},[(t(!0),s(B,null,j($.lookups.videos,g=>(t(),s("option",{value:g},b(g.name),9,Oi))),256))],40,Ui),[[ve,$.item.video]]),p[10]||(p[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",Ai,[(t(!0),s(B,null,j(o(W).item.videoId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])])]),p[17]||(p[17]=e("hr",null,null,-1)),$.item.videoId?(t(),s("div",Di,[e("div",Hi,[e("fieldset",null,[e("legend",null,[p[12]||(p[12]=L(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Ei,p[11]||(p[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):C("",!0)])]),e("button",{onClick:O,class:"btn btn-outline-primary"},p[13]||(p[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Package Configuration ")]))]),e("div",Li,[e("table",Bi,[p[16]||(p[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j($.item.packageConfigurations,(g,f)=>(t(),s("tr",null,[e("td",null,b(f+1),1),e("td",null,[e("div",Ni,[I(e("input",{"onUpdate:modelValue":G=>g.path=G,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,qi),[[q,g.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[f].path,G=>(t(),s("div",{key:G,class:"d-block invalid-feedback"},b(G.$message),1))),128)):C("",!0)]),e("td",null,[e("div",null,[I(e("select",{"onUpdate:modelValue":G=>g.sourceGroupId=G,class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,j($.lookups.sourceGroups,G=>(t(),s("option",{value:G.id},b(G.name),9,zi))),256))],8,Ri),[[ve,g.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[f].path,G=>(t(),s("div",{key:G,class:"d-block invalid-feedback"},b(G.$message),1))),128)):C("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":G=>g.type=G,class:"form-select",id:"type"},p[14]||(p[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Fi),[[ve,g.type]])]),e("td",null,[e("button",{onClick:G=>a(f),class:"btn btn-outline-warning"},p[15]||(p[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ji)])]))),256))])])])])):C("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Yi={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Wi(d,u,w,_,y,z){const T=Q("Page");return t(),ie(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Ki=ke(Yi,[["render",Wi]]),Ji={class:"d-flex justify-content-end"},Qi={key:0},Xi={class:"ms-1"},Zi={class:"input-group"},ed={class:"table-responsive"},td={class:"table table-hover mb-0"},sd=["textContent"],od={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ad={class:"small"},ld="/api/v1/vodsources/search",nd={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,closeWithReturnUrl:$,generateReturnUrl:M,security:h,filter:W,initializeFilter:K,getQuery:i,saveQuery:c,search:x,getRowNumber:n,setSelected:O,isSelected:a}=Oe({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${w==null?void 0:w.userId}/vod-sources/search`,baseUrl:ld,filter:{updateUrl:!0}});return re(async()=>{K(),await x()}),(P,p)=>{const r=Q("router-link"),v=Q("PageHeader"),m=Q("m-pagination"),g=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(v,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(y)},{default:U(()=>[e("div",Ji,[o(h).isAdministrator?(t(),s("div",Qi,[D(r,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>p[3]||(p[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),D(r,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>p[4]||(p[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Xi,[e("div",Zi,[I(e("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>o(W).query.criteria=f),onKeyup:p[1]||(p[1]=Ue(f=>o(x)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:p[2]||(p[2]=f=>o(x)(1))},p[5]||(p[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(R)},{default:U(()=>[e("div",ed,[e("table",td,[p[6]||(p[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(W).items,(f,G)=>(t(),s("tr",{key:f.movieId},[e("td",{textContent:b(o(n)(G)),class:"text-center"},null,8,sd),e("td",null,[D(r,{to:`${d.urlView}/${f.vodSourceId}`,class:"d-inline-block text-truncate"},{default:U(()=>[f.arn?(t(),s("span",od)):C("",!0),L(b(f.name),1)]),_:2},1032,["to"])]),e("td",null,[D(r,{to:`${d.urlViewVideo}/${encodeURIComponent(f.video.videoId)}/${o(M)()}`},{default:U(()=>[L(b(f.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",ad,"Duration: "+b(o(J).moment.utc(f.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,o(W).items.length>0]])])]),D(m,{filter:o(W),search:o(x),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},rd=["id"],id={class:"modal-dialog modal-xl modal-fullscreen-md-down"},dd={class:"modal-content"},ud={class:"modal-header bg-primary text-white"},cd={class:"modal-title",id:"exampleModalLabel"},md={class:"modal-body"},fd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},pd=["innerHTML"],vd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},gd={class:"container"},bd={class:"col"},yd={class:"form-floating mb-2"},$d=["value"],wd={key:0,class:"d-block invalid-feedback"},hd={class:"col"},_d={class:"form-floating mb-2"},kd={key:0,class:"d-block invalid-feedback"},Sd={class:"col"},Td={class:"form-floating mb-2"},Md={key:0,class:"d-block invalid-feedback"},Cd={class:"modal-footer"},Id=["disabled"],xd={__name:"_addPackageConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=w;ae();const K=ae("modalAddChannelOutput"),i=ce({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),c={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("VOD Source is required.",te),$autoDirty:!0,$lazy:!0},path:{required:ee.withMessage("Path is required.",te),$autoDirty:!0,$lazy:!0},type:{required:ee.withMessage("Type is required.",te),$autoDirty:!0,$lazy:!0}}},x=ye(c,i);re(async()=>{x.value.$reset()});const n=async()=>{await O()},O=async()=>{try{await F.get("/api/v1/sourceGroups/lookup/").then(v=>{i.lookups.sourceGroups=v.data,i.lookups.sourceGroups.length===1&&(i.item.sourceGroupId=i.lookups.sourceGroups[0].id)})}catch(r){E.value=N.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},a=async r=>{const v=i;Y.value.clear(),E.value="",v.lookups={sourceGroups:[]},v.item={sourceGroupId:null,vodSourceId:r,path:null,type:null},await n(),x.value.$reset();var m=document.getElementById(K.value),g=$e.getOrCreateInstance(m);g.show()},P=async()=>{var r=document.getElementById(K.value),v=$e.getOrCreateInstance(r);v.hide(),W("refresh")},p=async()=>{const r=i;if(z.value)return;const v=await x.value.$validate();debugger;if(!v){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const m=r.item;await F.post("/api/v1/vodSources/package-configurations/",m).then(g=>{$.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await P()}catch(m){E.value=N.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:a,close:P}),(r,v)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",id,[e("div",dd,[e("div",ud,[e("h5",cd,b(o(_))+" - "+b(o(y)),1),v[4]||(v[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",md,[o(E)?(t(),s("div",fd,[v[5]||(v[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,pd)])):C("",!0),o(Y).size>0?(t(),s("div",vd,[v[6]||(v[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),m=>(t(),s("li",null,b(m),1))),256))])])):C("",!0),e("div",gd,[e("div",bd,[e("div",yd,[I(e("select",{"onUpdate:modelValue":v[0]||(v[0]=m=>i.item.sourceGroupId=m),class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,j(i.lookups.sourceGroups,m=>(t(),s("option",{value:m.id},b(m.name),9,$d))),256))],512),[[ve,i.item.sourceGroupId]]),v[7]||(v[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(x).item.sourceGroupId.$error?(t(),s("div",wd,[(t(!0),s(B,null,j(o(x).item.sourceGroupId.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):C("",!0)])]),e("div",hd,[e("div",_d,[I(e("select",{"onUpdate:modelValue":v[1]||(v[1]=m=>i.item.type=m),class:"form-select",id:"type"},v[8]||(v[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ve,i.item.type]]),v[9]||(v[9]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(x).item.type.$error?(t(),s("div",kd,[(t(!0),s(B,null,j(o(x).item.type.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):C("",!0)])]),e("div",Sd,[e("div",Td,[I(e("input",{"onUpdate:modelValue":v[2]||(v[2]=m=>i.item.path=m),class:"form-control",id:"path"},null,512),[[q,i.item.path]]),v[10]||(v[10]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(x).item.path.$error?(t(),s("div",Md,[(t(!0),s(B,null,j(o(x).item.path.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):C("",!0)])])])]),e("div",Cd,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:v[3]||(v[3]=m=>p()),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Id),v[12]||(v[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,rd))}},Pd=["id"],Vd={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Ud={class:"modal-content"},Od={class:"modal-header bg-primary text-white"},Ad={class:"modal-title",id:"exampleModalLabel"},Dd={class:"modal-body"},Hd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ed=["innerHTML"],Ld={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Bd={class:"container"},Nd={class:"col"},qd={class:"form-floating mb-2"},Rd={class:"col"},zd={class:"form-floating mb-2"},Fd={key:0,class:"d-block invalid-feedback"},jd={class:"col"},Gd={class:"form-floating mb-2"},Yd={key:0,class:"d-block invalid-feedback"},Wd={class:"col"},Kd={class:"form-floating mb-2"},Jd={key:0,class:"d-block invalid-feedback"},Qd={class:"modal-footer"},Xd=["disabled"],Zd={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=w,K=ae(),i=ae("modalAddPlaybackConfiguration"),c=ce({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);re(async()=>{n.value.$reset()});const O=async(p,r)=>{K.value=p;const v=c;Y.value.clear(),E.value="";const m=r,g=m.lastIndexOf("/"),f=m.substring(0,g),G="ad_campaign_"+m.substring(g+1).replace(".","_");v.item={name:G,originalVideoContentSourceUrl:r,videoContentSourceUrl:f,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},n.value.$reset();var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.show()},a=async()=>{var p=document.getElementById(i.value),r=$e.getOrCreateInstance(p);r.hide(),W("refresh")},P=async()=>{const p=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const v=p.item;v.vodSourceId=K.value,await F.post("/api/v1/playbackconfigurations/vodsource",v).then(m=>{$.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await a()}catch(v){E.value=N.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:O,close:a}),(p,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Vd,[e("div",Ud,[e("div",Od,[e("h5",Ad,b(o(_))+" - "+b(o(y)),1),r[5]||(r[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Dd,[o(E)?(t(),s("div",Hd,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Ed)])):C("",!0),o(Y).size>0?(t(),s("div",Ld,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),v=>(t(),s("li",null,b(v),1))),256))])])):C("",!0),e("div",Bd,[e("div",Nd,[e("div",qd,[I(e("input",{"onUpdate:modelValue":r[0]||(r[0]=v=>c.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[q,c.item.originalVideoContentSourceUrl]]),r[8]||(r[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",Rd,[e("div",zd,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Fd,[(t(!0),s(B,null,j(o(n).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",jd,[e("div",Gd,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>c.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[q,c.item.videoContentSourceUrl]]),r[10]||(r[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),r[11]||(r[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(n).item.videoContentSourceUrl.$error?(t(),s("div",Yd,[(t(!0),s(B,null,j(o(n).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",Wd,[e("div",Kd,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>c.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[q,c.item.adDecisionServerUrl]]),r[12]||(r[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(n).item.adDecisionServerUrl.$error?(t(),s("div",Jd,[(t(!0),s(B,null,j(o(n).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])])])]),e("div",Qd,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:r[4]||(r[4]=v=>P()),class:"btn btn-primary",type:"button"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xd),r[14]||(r[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Pd))}},eu={class:"d-flex flex-row justify-content-end"},tu={key:0},su={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},ou={class:"nav-item",role:"presentation"},au={class:"nav-item",role:"presentation"},lu={class:"nav-item",role:"presentation"},nu={class:"nav-item",role:"presentation"},ru={class:"nav-item",role:"presentation"},iu={class:"tab-content",id:"myTabContent"},du={class:"mt-2"},uu={class:"col"},cu={class:"form-floating mb-2"},mu={key:0,class:"table-responsive border mt-2"},fu={class:"table mb-0"},pu={class:"row"},vu={class:"col-sm-9"},gu={key:0,class:"fas fa-fw fa-check-circle text-success"},bu={class:"col-sm-9"},yu={class:"col-sm-9"},$u={class:"text-break border p-2"},wu={class:"col-sm-3"},hu={class:"d-flex flex-row justify-content-between"},_u=["href"],ku={class:"col-sm-9"},Su={class:"text-break border p-2"},Tu=["href"],Mu={class:"col-sm-3"},Cu={class:"d-flex flex-row justify-content-between"},Iu=["href"],xu={class:"col-sm-9"},Pu={class:"text-break border p-2"},Vu={class:"d-flex flex-row"},Uu=["onClick"],Ou=["onClick"],Au=["onClick"],Du={class:"mt-2"},Hu={class:"row row-cols-sm-2"},Eu={class:"col"},Lu={class:"form-floating mb-2"},Bu={class:"col"},Nu={class:"form-floating mb-2"},qu={class:"row row-cols-sm-2"},Ru={class:"col"},zu={class:"form-floating mb-2"},Fu={class:"col"},ju={class:"input-group mb-2"},Gu={class:"form-floating"},Yu=["href"],Wu={class:"row row-cols-sm-2"},Ku={class:"col"},Ju={class:"form-floating mb-2"},Qu={class:"col"},Xu={class:"input-group mb-2"},Zu={class:"form-floating"},ec=["href"],tc={class:"row row-cols-sm-2"},sc={class:"col"},oc={class:"form-floating mb-2"},ac={class:"col"},lc={class:"input-group mb-2"},nc={class:"form-floating"},rc={class:"mt-2"},ic={class:"mt-2 text-end"},dc={class:"table-responsive border mt-2"},uc={class:"table table-hover mb-0 caption-top"},cc={class:"text-end"},mc=["onClick"],fc={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null}),c=ae();ae(null);const x=ae();re(async()=>{await P(),c.value=F.getPageTab("vodSource")||"information-tab"});const n=H=>{F.setPageTab("vodSource",H),c.value=H},O=H=>H!==c.value?"":"active",a=H=>H!==c.value?"":"show active",P=async()=>{const H=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const l=`/api/v1/vodsources/${u.id}/`;await J.get(l).then(A=>{H.item=A.data;const ne=H.item,X=F.moment.utc(H.item.video.durationInMillis).format("HH:mm:ss");ne.video.duration=X;const pe=ne.video.hlsPath,_e=pe.substring(pe.lastIndexOf("/")+1)})}catch(l){k.value=F.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}},p=async()=>{await P()},r=()=>{x.value.open(u.id)},v=H=>{},m=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/vodsources/${u.id}/publish/`).then(l=>{N.success("Publish VOD","VOD was published.",{async onClose(){}})}),y.value=!1,await p()}catch(l){k.value=F.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}}},g=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/vodsources/${u.id}/unpublish/`).then(l=>{N.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),y.value=!1,await p()}catch(l){k.value=F.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}}},f=async H=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/playbackconfigurations/${H}/vodsource/publish/`).then(A=>{N.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),y.value=!1,await p()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},G=async H=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${H}/vodsource/unpublish/`).then(A=>{N.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await p()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},V=async H=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/vodSources/package-configurations/${H}/`).then(A=>{N.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),y.value=!1,await p()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},se=async H=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${H}/vodsource/`).then(A=>{N.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await p()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}};return(H,l)=>{const A=Q("PageHeader"),ne=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(A,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",eu,[i.item?(t(),s(B,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:l[0]||(l[0]=X=>g()),class:"ms-1 btn btn-danger"},l[21]||(l[21]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:l[1]||(l[1]=X=>m()),class:"ms-1 btn btn-primary"},l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:l[2]||(l[2]=X=>p()),class:"ms-2 btn btn-secondary"},l[23]||(l[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[3]||(l[3]=X=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},l[24]||(l[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(ne,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",tu,[e("div",null,[e("ul",su,[e("li",ou,[e("button",{onClick:l[4]||(l[4]=X=>n("information-tab")),class:oe([O("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",au,[e("button",{onClick:l[5]||(l[5]=X=>n("packageConfigurations-tab")),class:oe([O("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",lu,[e("button",{onClick:l[6]||(l[6]=X=>n("channels-tab")),class:oe([O("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"}," Channels ",2)]),e("li",nu,[e("button",{onClick:l[7]||(l[7]=X=>n("programs-tab")),class:oe([O("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)]),e("li",ru,[e("button",{onClick:l[8]||(l[8]=X=>n("programTemplates-tab")),class:oe([O("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"}," Program Templates ",2)])]),e("div",iu,[e("div",{class:oe([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",du,[e("div",uu,[e("div",cu,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=X=>i.item.name=X),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.name]]),l[25]||(l[25]=e("label",{for:"name"},"Name",-1))])]),i.item.playbackConfigurations?(t(),s("div",mu,[l[38]||(l[38]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),e("table",fu,[l[37]||(l[37]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.playbackConfigurations,(X,pe)=>(t(),s("tr",{key:X.playbackConfigurationId},[e("td",null,b(pe+1),1),e("td",null,[e("dl",pu,[l[31]||(l[31]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",vu,[X.arn?(t(),s("span",gu)):C("",!0),L(b(X.name),1)]),l[32]||(l[32]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",bu,b(X.videoContentSourceUrl),1),l[33]||(l[33]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",yu,[e("div",$u,b(X.adDecisionServerUrl),1)]),i.item.video.dashPath&&X.dashConfigurationManifestEndpointPrefix?(t(),s(B,{key:0},[e("dt",wu,[e("div",hu,[l[27]||(l[27]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},l[26]||(l[26]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),L("View DASH ")]),8,_u)])])]),e("dd",ku,[e("div",Su,b(X.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},l[28]||(l[28]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),L("View DASH ")]),8,Tu)])])],64)):C("",!0),i.item.video.hlsPath&&X.hlsConfigurationManifestEndpointPrefix?(t(),s(B,{key:1},[e("dt",Mu,[e("div",Cu,[l[30]||(l[30]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},l[29]||(l[29]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),L("View ")]),8,Iu)])])]),e("dd",xu,[e("div",Pu,b(X.hlsConfigurationManifestEndpointPrefix),1)])],64)):C("",!0)])]),e("td",null,[e("div",Vu,[X.arn?(t(),s("button",{key:0,onClick:_e=>G(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},l[34]||(l[34]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,Uu)):(t(),s("button",{key:1,onClick:_e=>f(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},l[35]||(l[35]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Ou)),X.arn?C("",!0):(t(),s("button",{key:2,onClick:_e=>se(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},l[36]||(l[36]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Au))])])]))),128))]),_:1},512),[[he,i.item.playbackConfigurations.length>0]])])])):C("",!0),e("div",Du,[l[50]||(l[50]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Hu,[e("div",Eu,[e("div",Lu,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=X=>i.item.video.title=X),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[q,i.item.video.title]]),l[39]||(l[39]=e("label",{for:"title"},"Title",-1))])]),e("div",Bu,[e("div",Nu,[I(e("input",{"onUpdate:modelValue":l[11]||(l[11]=X=>i.item.video.duration=X),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[q,i.item.video.duration]]),l[40]||(l[40]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",qu,[e("div",Ru,[e("div",zu,[I(e("input",{"onUpdate:modelValue":l[12]||(l[12]=X=>i.item.video.rawBaseUrl=X),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[q,i.item.video.rawBaseUrl]]),l[41]||(l[41]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Fu,[e("div",ju,[e("div",Gu,[I(e("input",{"onUpdate:modelValue":l[13]||(l[13]=X=>i.item.video.rawPath=X),class:"form-control",id:"rawPath",disabled:""},null,512),[[q,i.item.video.rawPath]]),l[42]||(l[42]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.video.rawBaseUrl+i.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},l[43]||(l[43]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,Yu)])])]),e("div",Wu,[e("div",Ku,[e("div",Ju,[I(e("input",{"onUpdate:modelValue":l[14]||(l[14]=X=>i.item.video.hlsBaseUrl=X),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[q,i.item.video.hlsBaseUrl]]),l[44]||(l[44]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Qu,[e("div",Xu,[e("div",Zu,[I(e("input",{"onUpdate:modelValue":l[15]||(l[15]=X=>i.item.video.hlsPath=X),class:"form-control",id:"hlsPath",disabled:""},null,512),[[q,i.item.video.hlsPath]]),l[45]||(l[45]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.video.hlsBaseUrl+i.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},l[46]||(l[46]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,ec)])])]),e("div",tc,[e("div",sc,[e("div",oc,[I(e("input",{"onUpdate:modelValue":l[16]||(l[16]=X=>i.item.video.dashBaseUrl=X),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[q,i.item.video.dashBaseUrl]]),l[47]||(l[47]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",ac,[e("div",lc,[e("div",nc,[I(e("input",{"onUpdate:modelValue":l[17]||(l[17]=X=>i.item.video.dashPath=X),class:"form-control",id:"dashPath",disabled:""},null,512),[[q,i.item.video.dashPath]]),l[48]||(l[48]=e("label",{for:"dashPath"},"DASH Path",-1))]),i.item.video.dashPath?(t(),s("button",{key:0,onClick:l[18]||(l[18]=X=>v()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},l[49]||(l[49]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Playback Configuration ")]))):C("",!0)])])])])])])],2),e("div",{class:oe([a("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",rc,[e("div",ic,[e("button",{onClick:l[19]||(l[19]=X=>r()),class:"btn btn-primary"},l[51]||(l[51]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Add ")]))]),e("div",dc,[e("table",uc,[l[53]||(l[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.packageConfigurations,(X,pe)=>(t(),s("tr",{key:X.packageConfigurationId},[e("td",null,b(pe+1),1),e("td",null,b(X.path),1),e("td",null,b(X.sourceGroup.name),1),e("td",null,b(X.type),1),e("td",cc,[e("button",{onClick:_e=>V(X.packageConfigurationId),class:"btn btn-outline-warning"},l[52]||(l[52]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,mc)])]))),128))]),_:1},512),[[he,i.item.packageConfigurations.length>0]])])])])],2),e("div",{class:oe([a("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},l[54]||(l[54]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:oe([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},l[55]||(l[55]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:oe([a("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},l[56]||(l[56]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):C("",!0)]),_:1},8,["errorMessage"]),D(xd,{ref_key:"modalAddPackageConfiguration",ref:x,onRefresh:p},null,512),D(Zd,{ref:"modalAddPlaybackConfiguration",onRefresh:l[20]||(l[20]=X=>p())},null,512)])]),_:1})}}},pc={class:"d-flex justify-content-end"},vc=["disabled"],gc={class:"container"},bc={class:"row row-cols-1"},yc={class:"col"},$c={class:"form-floating mb-2"},wc={key:0,class:"d-block invalid-feedback"},hc={class:"row row-cols-sm-2"},_c={class:"col"},kc={class:"form-floating mb-2"},Sc=["value"],Tc={key:0,class:"d-block invalid-feedback"},Mc={class:"col"},Cc={class:"form-floating mb-2"},Ic=["disabled"],xc=["value"],Pc={key:0,class:"d-block invalid-feedback"},Vc={key:0,class:"row row-cols-1 row-cols-sm-2"},Uc={class:"col"},Oc={class:"form-floating"},Ac={key:0},Dc={key:1},Hc={key:2},Ec={key:3,class:"d-block invalid-feedback"},Lc={class:"col"},Bc={class:"form-floating"},Nc={key:0},qc={key:1},Rc={key:2,class:"d-block invalid-feedback"},zc={key:1,class:"mt-3"},Fc={class:"table-responsive border mt-1"},jc={class:"table table-borderless table-sm mb-0"},Gc=["onUpdate:modelValue","onChange"],Yc={key:0},Wc=["onUpdate:modelValue","onChange"],Kc={class:"text-end"},Jc=["onClick"],Qc={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),N=d,$=ce({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),M={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0}}},h=ye(M,$),W=De(()=>{const g=k.moment;if($.startOffsetTime&&$.startOffsetTime!=="00:00:00"&&i($.startOffsetTime)){const f=g().startOf("day"),G=f.format("YYYY-MM-DD ")+$.startOffsetTime,se=g(G).subtract(f);return $.item.startOffsetMillis=se.valueOf(),$.item.startOffsetMillis}return 0}),K=De(()=>{const g=k.moment;if($.endOffsetTime&&$.endOffsetTime!=="00:00:00"&&i($.endOffsetTime)){const f=g().startOf("day"),G=f.format("YYYY-MM-DD ")+$.endOffsetTime,se=g(G).subtract(f);return $.item.endOffsetMillis=se.valueOf(),$.item.endOffsetMillis}return 0}),i=g=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(g);re(async()=>{await c()});const c=async()=>{await x(),await a()},x=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(f=>{$.lookups.sourceLocations=f.data,$.item.sourceLocationId=$.lookups.sourceLocations[0].id}),$.item.sourceLocationId&&await n($.item.sourceLocationId)}catch(g){T.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},n=async g=>{try{const f=`/api/v1/vodSources/lookup/source-location/${g}/`;await R.get(f).then(G=>{$.lookups.vodSources=G.data})}catch(f){T.value=k.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},O=async()=>{const g=$.selected.vodSource;$.item.vodSourceId=g.id,$.endOffsetTime=k.moment.utc(g.durationInMillis).format("HH:mm:ss")},a=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(f=>{$.lookups.adBreakSourceLocations=f.data})}catch(g){T.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},P=()=>{const g={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};$.item.adBreaks.push(g)},p=g=>{$.item.adBreaks.splice(g,1)},r=g=>{const f=k.moment,G=f().startOf("day"),V=G.format("YYYY-MM-DD ")+g.offsetTime,H=f(V).subtract(G);g.offsetMillis=H.valueOf()},v=g=>{const f=k.moment,G=f().startOf("day"),V=G.format("YYYY-MM-DD ")+g.durationTime,H=f(V).subtract(G);g.durationInMillis=H.valueOf()},m=async()=>{const g=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const G=k.clone(g.item);debugger;await R.post("/api/v1/programtemplates/",G).then(V=>{E.success("Add Program Template","Program template added.",{onClose:async()=>{const se=`${N.urlView}/${V.data}`;await Y.push(se)}})})}catch(G){T.value=k.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{_.value=!1}};return(g,f)=>{const G=Q("router-link"),V=Q("PageHeader"),se=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(V,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",pc,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:f[0]||(f[0]=H=>m()),class:"btn btn-primary"},f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vc),D(G,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>f[9]||(f[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(se,{errorMessage:o(T),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",gc,[e("div",bc,[e("div",yc,[e("div",$c,[I(e("input",{"onUpdate:modelValue":f[1]||(f[1]=H=>$.item.name=H),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,$.item.name]]),f[10]||(f[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",wc,[(t(!0),s(B,null,j(o(h).item.name.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])])]),e("div",hc,[e("div",_c,[e("div",kc,[I(e("select",{"onUpdate:modelValue":f[2]||(f[2]=H=>$.item.sourceLocationId=H),onChange:f[3]||(f[3]=H=>n($.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j($.lookups.sourceLocations,H=>(t(),s("option",{value:H.id},b(H.name),9,Sc))),256))],544),[[ve,$.item.sourceLocationId]]),f[11]||(f[11]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.sourceLocationId.$error?(t(),s("div",Tc,[(t(!0),s(B,null,j(o(h).item.sourceLocationId.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])]),e("div",Mc,[e("div",Cc,[I(e("select",{"onUpdate:modelValue":f[4]||(f[4]=H=>$.selected.vodSource=H),onChange:f[5]||(f[5]=H=>O()),class:"form-select",id:"vodSourceId",disabled:$.item.adBreaks.length>0},[(t(!0),s(B,null,j($.lookups.vodSources,H=>(t(),s("option",{value:H},b(o(k).moment.utc(H.durationInMillis).format("HH:mm:ss"))+" - "+b(H.name),9,xc))),256))],40,Ic),[[ve,$.selected.vodSource]]),f[12]||(f[12]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.vodSourceId.$error?(t(),s("div",Pc,[(t(!0),s(B,null,j(o(h).item.vodSourceId.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])])]),$.item.vodSourceId?(t(),s("div",Vc,[e("div",Uc,[e("div",Oc,[I(e("input",{"onUpdate:modelValue":f[6]||(f[6]=H=>$.startOffsetTime=H),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[q,$.startOffsetTime]]),f[13]||(f[13]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Ac,f[14]||(f[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),W.value>K.value&&K.value>0?(t(),s("div",Dc,f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):C("",!0),$.selected.vodSource&&W.value>=$.selected.vodSource.durationInMillis?(t(),s("div",Hc,f[16]||(f[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(h).item.startOffsetMillis.$error?(t(),s("div",Ec,[(t(!0),s(B,null,j(o(h).item.startOffsetMillis.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)]),e("div",Lc,[e("div",Bc,[I(e("input",{"onUpdate:modelValue":f[7]||(f[7]=H=>$.endOffsetTime=H),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[q,$.endOffsetTime]]),f[17]||(f[17]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Nc,f[18]||(f[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),$.selected.vodSource&&K.value>$.selected.vodSource.durationInMillis?(t(),s("div",qc,f[19]||(f[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(h).item.endOffsetMillis.$error?(t(),s("div",Rc,[(t(!0),s(B,null,j(o(h).item.endOffsetMillis.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])])):C("",!0),$.item.vodSourceId?(t(),s("div",zc,[e("div",{class:"d-flex flex-row justify-content-between"},[f[21]||(f[21]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:P,class:"btn btn-outline-primary"},f[20]||(f[20]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Ad Break ")]))]),e("div",Fc,[e("table",jc,[f[24]||(f[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j($.item.adBreaks,(H,l)=>(t(),s("tr",null,[e("td",null,b(l+1),1),e("td",null,[I(e("input",{"onUpdate:modelValue":A=>H.offsetTime=A,onChange:A=>r(H),type:"time",step:"1",class:"form-control"},null,40,Gc),[[q,H.offsetTime]]),H.offsetMillis>=$.selected.vodSource.durationInMillis?(t(),s("div",Yc,f[22]||(f[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0)]),e("td",null,[I(e("input",{"onUpdate:modelValue":A=>H.durationTime=A,onChange:A=>v(H),type:"time",step:"1",class:"form-control"},null,40,Wc),[[q,H.durationTime]])]),e("td",Kc,[e("button",{onClick:A=>p(l),class:"btn btn-outline-warning"},f[23]||(f[23]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Jc)])]))),256))])]),f[25]||(f[25]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),L(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Xc={class:"d-flex justify-content-end"},Zc=["disabled"],em={class:"container"},tm={class:"row row-cols-1"},sm={class:"col"},om={class:"form-floating mb-2"},am={key:0,class:"d-block invalid-feedback"},lm={class:"row row-cols-sm-2"},nm={class:"col"},rm={class:"form-floating mb-2"},im=["value"],dm={key:0,class:"d-block invalid-feedback"},um={class:"col"},cm={class:"form-floating mb-2"},mm=["value"],fm={key:0,class:"d-block invalid-feedback"},pm={key:0,class:"row row-cols-1 row-cols-sm-2"},vm={class:"col"},gm={class:"form-floating"},bm={key:0},ym={key:1},$m={key:2},wm={key:3,class:"d-block invalid-feedback"},hm={class:"col"},_m={class:"form-floating"},km={key:0},Sm={key:1},Tm={key:2,class:"d-block invalid-feedback"},Mm={key:1,class:"mt-2"},Cm={class:"table-responsive border mt-1"},Im={class:"table"},xm=["onUpdate:modelValue","onChange"],Pm={key:0},Vm=["onUpdate:modelValue","onChange"],Um=["onClick"],Om={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:F,security:N}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),$=d,M=ce({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),h={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0}}},W=ye(h,M),K=De(()=>{const G=k.moment;if(M.startOffsetTime&&M.startOffsetTime!=="00:00:00"&&c(M.startOffsetTime)){const V=G().startOf("day"),se=V.format("YYYY-MM-DD ")+M.startOffsetTime,l=G(se).subtract(V);return M.item.startOffsetMillis=l.valueOf(),M.item.startOffsetMillis}return 0}),i=De(()=>{const G=k.moment;if(M.endOffsetTime&&M.endOffsetTime!=="00:00:00"&&c(M.endOffsetTime)){const V=G().startOf("day"),se=V.format("YYYY-MM-DD ")+M.endOffsetTime,l=G(se).subtract(V);return M.item.endOffsetMillis=l.valueOf(),M.item.endOffsetMillis}return 0}),c=G=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(G);re(async()=>{await x()});const x=async()=>{await n(),await O()},n=async()=>{try{const G=`/api/v1/programtemplates/${$.id}/`;await R.get(G).then(V=>{M.item=V.data,M.startOffsetTime=k.moment.utc(M.item.startOffsetMillis).format("HH:mm:ss"),M.endOffsetTime=k.moment.utc(M.item.endOffsetMillis).format("HH:mm:ss"),M.item.adBreaks.forEach(se=>{se.offsetTime=k.moment.utc(se.offsetMillis).format("HH:mm:ss"),se.durationTime=k.moment.utc(se.durationInMillis).format("HH:mm:ss")})})}catch(G){T.value=k.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},O=async()=>{await a()},a=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(V=>{M.lookups.sourceLocations=V.data}),M.item.sourceLocationId&&await P(M.item.sourceLocationId)}catch(G){T.value=k.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},P=async G=>{try{const V=`/api/v1/vodSources/lookup/source-location/${G}/`;await R.get(V).then(H=>{M.lookups.vodSources=H.data});const se=M.lookups.vodSources.find(H=>H.id==M.item.vodSourceId);M.selected.vodSource=se,await p()}catch(V){T.value=k.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{}},p=async()=>{const G=M.selected.vodSource;M.item.vodSourceId=G.id,M.endOffsetTime=k.moment.utc(G.durationInMillis).format("HH:mm:ss")},r=()=>{const G={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};M.item.adBreaks.push(G)},v=G=>{M.item.adBreaks.splice(G,1)},m=G=>{const V=k.moment,se=V().startOf("day"),H=se.format("YYYY-MM-DD ")+G.offsetTime,A=V(H).subtract(se);G.offsetMillis=A.valueOf()},g=G=>{const V=k.moment,se=V().startOf("day"),H=se.format("YYYY-MM-DD ")+G.durationTime,A=V(H).subtract(se);G.durationInMillis=A.valueOf()},f=async()=>{const G=M;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const se=k.clone(G.item);debugger;se.startOffsetMillis=K.value,se.endOffsetMillis=i.value,await R.put("/api/v1/programtemplates/",se).then(H=>{E.success("Edit Program Template","Program template edit.",{onClose:async()=>{const l=`${$.urlView}/${$.id}`;await Y.push(l)}})})}catch(se){T.value=k.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{_.value=!1}};return(G,V)=>{const se=Q("PageHeader"),H=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Xc,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:V[0]||(V[0]=l=>f()),class:"btn btn-primary"},V[10]||(V[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zc),e("button",{onClick:V[1]||(V[1]=l=>x()),class:"btn btn-secondary ms-2"},V[11]||(V[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:V[2]||(V[2]=l=>o(F)($.urlMain)),class:"btn btn-secondary ms-1"},V[12]||(V[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(H,{errorMessage:o(T),vuelidate:o(W)},{default:U(()=>[e("div",null,[e("div",em,[e("div",tm,[e("div",sm,[e("div",om,[I(e("input",{"onUpdate:modelValue":V[3]||(V[3]=l=>M.item.name=l),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,M.item.name]]),V[13]||(V[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",am,[(t(!0),s(B,null,j(o(W).item.name.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])])]),e("div",lm,[e("div",nm,[e("div",rm,[I(e("select",{"onUpdate:modelValue":V[4]||(V[4]=l=>M.item.sourceLocationId=l),onChange:V[5]||(V[5]=l=>P(M.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(M.lookups.sourceLocations,l=>(t(),s("option",{value:l.id},b(l.name),9,im))),256))],544),[[ve,M.item.sourceLocationId]]),V[14]||(V[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",dm,[(t(!0),s(B,null,j(o(W).item.sourceLocationId.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])]),e("div",um,[e("div",cm,[I(e("select",{"onUpdate:modelValue":V[6]||(V[6]=l=>M.selected.vodSource=l),onChange:V[7]||(V[7]=l=>p()),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,j(M.lookups.vodSources,l=>(t(),s("option",{value:l},b(o(k).moment.utc(l.durationInMillis).format("HH:mm:ss"))+" - "+b(l.name),9,mm))),256))],544),[[ve,M.selected.vodSource]]),V[15]||(V[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",fm,[(t(!0),s(B,null,j(o(W).item.vodSourceId.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])])]),M.item.vodSourceId?(t(),s("div",pm,[e("div",vm,[L(" ["+b(K.value)+"] x ["+b(M.startOffsetMillis)+"] ",1),e("div",gm,[I(e("input",{"onUpdate:modelValue":V[8]||(V[8]=l=>M.startOffsetTime=l),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[q,M.startOffsetTime]]),V[16]||(V[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",bm,V[17]||(V[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),K.value>i.value&&i.value>0?(t(),s("div",ym,V[18]||(V[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):C("",!0),M.selected.vodSource&&K.value>=M.selected.vodSource.durationInMillis?(t(),s("div",$m,V[19]||(V[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",wm,[(t(!0),s(B,null,j(o(W).item.startOffsetMillis.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)]),e("div",hm,[e("div",_m,[I(e("input",{"onUpdate:modelValue":V[9]||(V[9]=l=>M.endOffsetTime=l),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[q,M.endOffsetTime]]),V[20]||(V[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),i.value>0&&i.value<3e4?(t(),s("div",km,V[21]||(V[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),M.selected.vodSource&&i.value>M.selected.vodSource.durationInMillis?(t(),s("div",Sm,V[22]||(V[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",Tm,[(t(!0),s(B,null,j(o(W).item.endOffsetMillis.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])])):C("",!0),M.selected.vodSource?(t(),s("div",Mm,[e("div",{class:"d-flex flex-row justify-content-between"},[V[24]||(V[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:r,class:"btn btn-outline-primary"},V[23]||(V[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Ad Break ")]))]),e("div",Cm,[e("table",Im,[V[28]||(V[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(M.item.adBreaks,(l,A)=>(t(),s("tr",null,[e("td",null,b(A+1),1),e("td",null,[I(e("input",{"onUpdate:modelValue":ne=>l.offsetTime=ne,onChange:ne=>m(l),type:"time",step:"1",class:"form-control"},null,40,xm),[[q,l.offsetTime]]),l.offsetMillis>=M.selected.vodSource.durationInMillis?(t(),s("div",Pm,V[25]||(V[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0)]),e("td",null,[I(e("input",{"onUpdate:modelValue":ne=>l.durationTime=ne,onChange:ne=>g(l),type:"time",step:"1",class:"form-control"},null,40,Vm),[[q,l.durationTime]])]),V[27]||(V[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),L(" Source Location and Vod source will be defined in Program Instance. "),e("br"),L(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:ne=>v(A),class:"btn btn-outline-warning"},V[26]||(V[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Um)])]))),256))])])])])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Am={class:"d-flex justify-content-end"},Dm={class:"ms-1"},Hm={class:"input-group"},Em={class:"table-responsive"},Lm={class:"table table-hover mb-0"},Bm=["textContent"],Nm={key:0,class:"fas fa-fw fa-check-circle text-success"},qm={class:"text-end"},Rm={class:"border-top"},zm="/api/v1/programTemplates/search",Fm={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Oe({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${w==null?void 0:w.userId}/program-templates/search`,baseUrl:zm,filter:{updateUrl:!0}});return re(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:U(()=>[e("div",Am,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Dm,[e("div",Hm,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Em,[e("table",Lm,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Bm),e("td",null,[D(P,{to:`${d.urlView}/${m.programTemplateId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",Nm)):C("",!0),L(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",qm,b(o(J).moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[L(b(m.sourceLocation.name)+" ",1),e("div",Rm,b(m.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,b(m.vodSource.name),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},jm={class:"d-flex flex-row justify-content-end"},Gm={key:0},Ym={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Wm={class:"nav-item",role:"presentation"},Km={class:"nav-item",role:"presentation"},Jm={class:"nav-item",role:"presentation"},Qm={class:"tab-content",id:"myTabContent"},Xm={class:"mt-2"},Zm={class:"row row-cols-1 row-cols-sm-3"},ef={class:"col"},tf={class:"form-floating mb-2"},sf={class:"col"},of={class:"form-floating mb-2"},af={class:"col"},lf={class:"form-floating mb-2"},nf={class:"row row-cols-1 row-cols-sm-3"},rf={class:"col"},df={class:"form-floating mb-2"},uf={class:"col"},cf={class:"form-floating mb-2"},mf={class:"col"},ff={class:"form-floating mb-2"},pf={class:"row row-cols-1 row-cols-sm-2"},vf={class:"col-sm-4"},gf={class:"form-floating mb-2"},bf={class:"col-sm-8"},yf={class:"form-floating mb-2"},$f={class:""},wf={class:"col"},hf={class:"form-floating mb-2"},_f={class:"row row-cols-1 row-cols-sm-2"},kf={class:"col"},Sf={class:"form-floating mb-2"},Tf={class:"col"},Mf={class:"form-floating mb-2"},Cf={class:"row row-cols-1 row-cols-sm-2"},If={class:"col"},xf={class:"form-floating mb-2"},Pf={class:"col"},Vf={class:"form-floating mb-2"},Uf={class:"row row-cols-1 row-cols-sm-2"},Of={class:"col"},Af={class:"form-floating mb-2"},Df={class:"col"},Hf={class:"form-floating mb-2"},Ef={class:"row row-cols-1 row-cols-sm-2"},Lf={class:"col"},Bf={class:"form-floating mb-2"},Nf={class:"col"},qf={class:"form-floating mb-2"},Rf={class:"mt-2"},zf={class:"table-responsive"},Ff={class:"table table-hover mb-0"},jf={class:"text-center"},Gf={class:"mt-2"},Yf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null}),c=ae();re(async()=>{await a(),c.value=F.getPageTab("programTemplate")||"information-tab"});const x=p=>{F.setPageTab("programTemplate",p),c.value=p},n=p=>p!==c.value?"":"active",O=p=>p!==c.value?"":"show active",a=async()=>{const p=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const r=`/api/v1/programTemplates/${u.id}/`;await J.get(r).then(v=>{p.item=v.data;const m=p.item;m.startOffsetTime=F.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=F.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=F.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=F.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=F.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const g=m.vodSource.video,f=g.durationInMillis;g.durationInMillis=F.moment.utc(f).format("HH:mm:ss")})}catch(r){k.value=F.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()};return(p,r)=>{const v=Q("router-link"),m=Q("PageHeader"),g=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",jm,[D(v,{to:`${d.urlEdit}/${d.id}/${o(h)()}`,class:"ms-2 btn btn-primary"},{default:U(()=>r[22]||(r[22]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:r[0]||(r[0]=f=>P()),class:"ms-2 btn btn-secondary"},r[23]||(r[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[1]||(r[1]=f=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},r[24]||(r[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Gm,[e("div",null,[e("ul",Ym,[e("li",Wm,[e("button",{onClick:r[2]||(r[2]=f=>x("information-tab")),class:oe([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Km,[e("button",{onClick:r[3]||(r[3]=f=>x("adBreaks-tab")),class:oe([n("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Jm,[e("button",{onClick:r[4]||(r[4]=f=>x("programs-tab")),class:oe([n("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Qm,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Xm,[e("div",Zm,[e("div",ef,[e("div",tf,[I(e("input",{"onUpdate:modelValue":r[5]||(r[5]=f=>i.item.name=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.name]]),r[25]||(r[25]=e("label",{for:"name"},"Name",-1))])]),e("div",sf,[e("div",of,[I(e("input",{"onUpdate:modelValue":r[6]||(r[6]=f=>i.item.startOffsetTime=f),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[q,i.item.startOffsetTime]]),r[26]||(r[26]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",af,[e("div",lf,[I(e("input",{"onUpdate:modelValue":r[7]||(r[7]=f=>i.item.endOffsetTime=f),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[q,i.item.endOffsetTime]]),r[27]||(r[27]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),e("div",nf,[e("div",rf,[e("div",df,[I(e("input",{"onUpdate:modelValue":r[8]||(r[8]=f=>i.item.durationTime=f),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[q,i.item.durationTime]]),r[28]||(r[28]=e("label",{for:"durationTime"},"Clip Duration",-1))])]),e("div",uf,[e("div",cf,[I(e("input",{"onUpdate:modelValue":r[9]||(r[9]=f=>i.item.adBreaksDurationTime=f),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[q,i.item.adBreaksDurationTime]]),r[29]||(r[29]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",mf,[e("div",ff,[I(e("input",{"onUpdate:modelValue":r[10]||(r[10]=f=>i.item.totalProgramTemplateDurationTime=f),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[q,i.item.totalProgramTemplateDurationTime]]),r[30]||(r[30]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),r[45]||(r[45]=e("hr",null,null,-1)),e("div",null,[r[33]||(r[33]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",pf,[e("div",vf,[e("div",gf,[I(e("input",{"onUpdate:modelValue":r[11]||(r[11]=f=>i.item.sourceLocation.name=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.sourceLocation.name]]),r[31]||(r[31]=e("label",{for:"name"},"Name",-1))])]),e("div",bf,[e("div",yf,[I(e("input",{"onUpdate:modelValue":r[12]||(r[12]=f=>i.item.sourceLocation.httpConfigurationBaseUrl=f),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[q,i.item.sourceLocation.httpConfigurationBaseUrl]]),r[32]||(r[32]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),r[46]||(r[46]=e("hr",null,null,-1)),e("div",null,[r[43]||(r[43]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",$f,[e("div",wf,[e("div",hf,[I(e("input",{"onUpdate:modelValue":r[13]||(r[13]=f=>i.item.vodSource.name=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.name]]),r[34]||(r[34]=e("label",{for:"name"},"VOD Name",-1))])])]),r[44]||(r[44]=e("div",null,[e("h6",null,"Video")],-1)),e("div",_f,[e("div",kf,[e("div",Sf,[I(e("input",{"onUpdate:modelValue":r[14]||(r[14]=f=>i.item.vodSource.video.title=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.title]]),r[35]||(r[35]=e("label",{for:"name"},"Video Name",-1))])]),e("div",Tf,[e("div",Mf,[I(e("input",{"onUpdate:modelValue":r[15]||(r[15]=f=>i.item.vodSource.video.durationInMillis=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.durationInMillis]]),r[36]||(r[36]=e("label",{for:"name"},"Video Duration",-1))])])]),e("div",Cf,[e("div",If,[e("div",xf,[I(e("input",{"onUpdate:modelValue":r[16]||(r[16]=f=>i.item.vodSource.video.rawBaseUrl=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.rawBaseUrl]]),r[37]||(r[37]=e("label",{for:"name"},"Raw Base Url",-1))])]),e("div",Pf,[e("div",Vf,[I(e("input",{"onUpdate:modelValue":r[17]||(r[17]=f=>i.item.vodSource.video.rawPath=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.rawPath]]),r[38]||(r[38]=e("label",{for:"name"},"Raw Path",-1))])])]),e("div",Uf,[e("div",Of,[e("div",Af,[I(e("input",{"onUpdate:modelValue":r[18]||(r[18]=f=>i.item.vodSource.video.hlsBaseUrl=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.hlsBaseUrl]]),r[39]||(r[39]=e("label",{for:"name"},"HLS Base Url",-1))])]),e("div",Df,[e("div",Hf,[I(e("input",{"onUpdate:modelValue":r[19]||(r[19]=f=>i.item.vodSource.video.hlsPath=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.hlsPath]]),r[40]||(r[40]=e("label",{for:"name"},"HLS Path",-1))])])]),e("div",Ef,[e("div",Lf,[e("div",Bf,[I(e("input",{"onUpdate:modelValue":r[20]||(r[20]=f=>i.item.vodSource.video.dashBaseUrl=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.dashBaseUrl]]),r[41]||(r[41]=e("label",{for:"name"},"DASH Base Url",-1))])]),e("div",Nf,[e("div",qf,[I(e("input",{"onUpdate:modelValue":r[21]||(r[21]=f=>i.item.vodSource.video.dashPath=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.vodSource.video.dashPath]]),r[42]||(r[42]=e("label",{for:"name"},"DASH Path",-1))])])])])])],2),e("div",{class:oe([O("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Rf,[e("div",zf,[e("table",Ff,[r[47]||(r[47]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.adBreaks,(f,G)=>(t(),s("tr",{key:f.programTemplateAdBreakId},[e("td",jf,b(G+1),1),e("td",null,b(o(F).moment.utc(f.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(F).moment.utc(f.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[he,i.item.adBreaks.length>0]])])])])],2),e("div",{class:oe([O("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Gf,[e("pre",null,b(i.item.programs),1)])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Wf={class:"d-flex justify-content-end"},Kf=["disabled"],Jf={class:"row row-cols-1 row-cols-sm-3"},Qf={class:"col-sm-6"},Xf={class:"form-floating mb-2"},Zf={key:0,class:"d-block invalid-feedback"},ep={class:"col-sm-3"},tp={class:"form-floating mb-2"},sp={key:0,class:"d-block invalid-feedback"},op={class:"col-sm-3"},ap={class:"form-floating mb-2"},lp={key:0,class:"d-block invalid-feedback"},np={class:"col"},rp={class:"form-floating mb-2"},ip={key:0,class:"d-block invalid-feedback"},dp={class:"row row-cols-1 row-cols-sm-2"},up={class:"col"},cp={class:"form-floating mb-2"},mp=["value"],fp={key:0,class:"d-block invalid-feedback"},pp={class:"col"},vp={class:"form-floating mb-2"},gp=["value"],bp={key:0,class:"d-block invalid-feedback"},yp={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),N=d,$=ce({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),M={item:{name:{title:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},tier:{title:ee.withMessage("Tier is required.",te),$autoDirty:!0,$lazy:!0},playbackMode:{title:ee.withMessage("PlaybackMode is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:ee.withMessage("Filler Slate Source Location is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:ee.withMessage("Filler Slate Vod Source is required.",te),$autoDirty:!0,$lazy:!0},policy:{title:ee.withMessage("Policy is required.",te),$autoDirty:!0,$lazy:!0}}},h=ye(M,$);re(async()=>{await W()});const W=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(O=>{$.lookups.sourceLocations=O.data,$.lookups.sourceLocations.length===1&&($.item.fillerSlateSourceLocationId=$.lookups.sourceLocations[0].id)}),$.item.sourceLocationId&&await i($.item.fillerSlateSourceLocationId)}catch(n){T.value=k.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},K=async()=>{$.item.fillerSlateVodSourceId=null,await i($.item.fillerSlateSourceLocationId)},i=async n=>{try{let O=`/api/v1/vodSources/lookup/source-location/${n}`;await R.get(O).then(a=>{$.lookups.vodSources=a.data})}catch(O){T.value=k.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},c=()=>{if($.item.name){const n=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${$.item.name}"}]}`;$.item.policy=n}else $.item.policy=null},x=async()=>{const n=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const a=k.clone(n.item);await R.post("/api/v1/channels/",a).then(P=>{E.success("Add Channel","Channel added.",{onClose:async()=>{const p=`${N.urlView}/${P.data}`;await Y.push(p)}})})}catch(a){T.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}};return(n,O)=>{const a=Q("router-link"),P=Q("PageHeader"),p=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(P,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Wf,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:O[0]||(O[0]=r=>x()),class:"btn btn-primary"},O[9]||(O[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kf),D(a,{to:N.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>O[10]||(O[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(T),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Jf,[e("div",Qf,[e("div",Xf,[I(e("input",{"onUpdate:modelValue":O[1]||(O[1]=r=>$.item.name=r),onChange:O[2]||(O[2]=r=>c()),id:"name",class:"form-control",placeholder:"name"},null,544),[[q,$.item.name]]),O[11]||(O[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Zf,[(t(!0),s(B,null,j(o(h).item.name.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),e("div",ep,[e("div",tp,[I(e("input",{"onUpdate:modelValue":O[3]||(O[3]=r=>$.item.tier=r),id:"tier",class:"form-control",placeholder:"tier",disabled:""},null,512),[[q,$.item.tier]]),O[12]||(O[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(h).item.tier.$error?(t(),s("div",sp,[(t(!0),s(B,null,j(o(h).item.tier.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),e("div",op,[e("div",ap,[I(e("input",{"onUpdate:modelValue":O[4]||(O[4]=r=>$.item.playbackMode=r),id:"playbackMode",class:"form-control",placeholder:"playbackMode",disabled:""},null,512),[[q,$.item.playbackMode]]),O[13]||(O[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(h).item.playbackMode.$error?(t(),s("div",lp,[(t(!0),s(B,null,j(o(h).item.playbackMode.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])])]),e("div",np,[e("div",rp,[I(e("textarea",{"onUpdate:modelValue":O[5]||(O[5]=r=>$.item.policy=r),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[q,$.item.policy]]),O[14]||(O[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o(h).item.policy.$error?(t(),s("div",ip,[(t(!0),s(B,null,j(o(h).item.policy.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),O[17]||(O[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",dp,[e("div",up,[e("div",cp,[I(e("select",{"onUpdate:modelValue":O[6]||(O[6]=r=>$.item.fillerSlateSourceLocationId=r),onChange:O[7]||(O[7]=r=>K()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(B,null,j($.lookups.sourceLocations,r=>(t(),s("option",{value:r.id},b(r.name),9,mp))),256))],544),[[ve,$.item.fillerSlateSourceLocationId]]),O[15]||(O[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.fillerSlateSourceLocationId.$error?(t(),s("div",fp,[(t(!0),s(B,null,j(o(h).item.fillerSlateSourceLocationId.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),e("div",pp,[e("div",vp,[I(e("select",{"onUpdate:modelValue":O[8]||(O[8]=r=>$.item.fillerSlateVodSourceId=r),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(B,null,j($.lookups.vodSources,r=>(t(),s("option",{value:r.id},b(r.name),9,gp))),256))],512),[[ve,$.item.fillerSlateVodSourceId]]),O[16]||(O[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.fillerSlateVodSourceId.$error?(t(),s("div",bp,[(t(!0),s(B,null,j(o(h).item.fillerSlateVodSourceId.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},$p={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function wp(d,u,w,_,y,z){const T=Q("Page");return t(),ie(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const hp=ke($p,[["render",wp]]),_p={class:"d-flex justify-content-end"},kp={class:"ms-1"},Sp={class:"input-group"},Tp={class:"table-responsive"},Mp={class:"table table-hover mb-0"},Cp=["textContent"],Ip="/api/v1/channels/search",xp={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(d){be("$config");const w=ge().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:N,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Oe({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${w==null?void 0:w.userId}/Channels/search`,baseUrl:Ip,filter:{updateUrl:!0}});return re(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),p=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(y)},{default:U(()=>[e("div",_p,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",kp,[e("div",Sp,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Ue(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[q,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Tp,[e("table",Mp,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.channelId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Cp),e("td",null,[D(P,{to:`${d.urlView}/${m.channelId}`,class:"d-inline-block text-truncate"},{default:U(()=>[L(b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.playbackMode),1),e("td",null,b(m.tier),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Pp=["id"],Vp={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Up={class:"modal-content"},Op={class:"modal-header bg-primary text-white"},Ap={class:"modal-title",id:"exampleModalLabel"},Dp={class:"modal-body"},Hp={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ep=["innerHTML"],Lp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Bp={class:"container"},Np={class:"col"},qp={class:"form-floating mb-2"},Rp=["value"],zp={class:"row row-cols-1 row-cols-sm-2"},Fp={class:"col"},jp={class:"form-floating mb-2"},Gp={key:0,class:"d-block invalid-feedback"},Yp={class:"col"},Wp={class:"form-floating mb-2"},Kp={key:0,class:"d-block invalid-feedback"},Jp={key:0},Qp={class:"row row-cols-1 row-cols-sm-3"},Xp={class:"col"},Zp={class:"form-floating mb-2"},ev={class:"col"},tv={class:"form-floating mb-2"},sv={class:"col"},ov={class:"form-floating mb-2"},av={class:"row row-cols-1 row-cols-sm-2"},lv={class:"col"},nv={class:"form-floating mb-2"},rv={class:"col"},iv={class:"form-floating mb-2"},dv={class:"row row-cols-1 row-cols-sm-2"},uv={class:"col"},cv={class:"form-floating mb-2"},mv={class:"col"},fv={class:"form-floating mb-2"},pv={key:1},vv={class:"table-responsive border mt-1"},gv={class:"table mb-0"},bv=["onUpdate:modelValue"],yv=["value"],$v={class:"modal-footer"},wv=["disabled"],hv={__name:"_addProgramFromTemplate",emits:["onClose"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=w,K=ae(),i=ae("modalAddProgramFromTemplate"),c=ce({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);re(async()=>{n.value.$reset()});const O=async(H,l,A)=>{K.value=H;const ne=c;Y.value.clear(),E.value="";const X=N.moment(A),_e=X.format("YYYY-MM-DD HH:mm"),Ie=X.format("YYYYMMDD_HHmm")+"_PRG_";ne.eventId=l,ne.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},ne.selected={programTemplate:null},ne.item={programTemplateId:null,name:Ie,dateScheduledStart:_e,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await p(),await r(),n.value.$reset();var xe=document.getElementById(i.value),He=$e.getOrCreateInstance(xe);He.show()},a=async H=>{const l=c.selected.channel.programs;if(H&&l.find(He=>He.name===c.item.name)){alert(`Program name = [${c.item.name}] already exists.`);return}if(!H){W("onClose",{eventId:c.eventId},H);var _e=document.getElementById(i.value),Ie=$e.getOrCreateInstance(_e);Ie.hide();return}const A=c,ne=N.moment(A.item.dateScheduledStart).utc().format(),X=N.moment(A.item.dateScheduledStart).add(A.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),pe={eventId:A.eventId,programTemplateId:A.selected.programTemplate.programTemplateId,channelId:A.selected.channel.channelId,name:A.item.name,dateScheduledStart:ne,dateScheduledEnd:X,adBreaks:A.selected.programTemplate.adBreaks.map(xe=>({sourceLocationId:A.selected.programTemplate.sourceLocationId,vodSourceId:xe.vodSourceId,offsetMillis:xe.offsetMillis,durationInMillis:xe.durationInMillis}))};W("onClose",pe,H);var _e=document.getElementById(i.value),Ie=$e.getOrCreateInstance(_e);Ie.hide()},P=async()=>{await a(!0)},p=async()=>{try{const H=`/api/v1/channels/${K.value}/`;await F.get(H).then(l=>{c.selected.channel=l.data})}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},r=async()=>{await f(),await se(),await v()},v=async()=>{try{const H=`/api/v1/programTemplates/lookup/by-channel/${K.value}`;await F.get(H).then(l=>{c.lookups.programTemplates=l.data,c.lookups.programTemplates.length===1&&(c.item.programTemplateId=c.lookups.programTemplates[0].id)}),c.item.programTemplateId&&await m()}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},m=async()=>{await g(c.item.programTemplateId)},g=async H=>{try{const l=`/api/v1/programTemplates/${H}/`;await F.get(l).then(X=>{c.selected.programTemplate=X.data;const pe=c.selected.programTemplate;pe.startOffsetTime=N.moment.utc(pe.startOffsetMillis).format("HH:mm:ss"),pe.endOffsetTime=N.moment.utc(pe.endOffsetMillis).format("HH:mm:ss"),pe.durationTime=N.moment.utc(pe.durationInMillis).format("HH:mm:ss"),pe.adBreaksDurationTime=N.moment.utc(pe.adBreaksDurationInMillis).format("HH:mm:ss"),pe.totalProgramTemplateDurationTime=N.moment.utc(pe.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),pe.adBreaks.forEach(_e=>{_e.vodSourceId=null})});const A=c,ne=A.selected.channel.outputs[0].outputType;await V(A.selected.programTemplate.sourceLocationId,ne)}catch(l){E.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},f=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.sourceLocations=l.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await G(c.item.sourceLocationId)}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},G=async H=>{try{let l=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(l).then(A=>{c.lookups.vodSources=A.data})}catch(l){E.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},V=async(H,l)=>{try{let A=`/api/v1/vodsources/lookup/source-location/${H}/output-type/${l}`;await F.get(A).then(ne=>{c.lookups.adBreakVodSources=ne.data})}catch(A){E.value=N.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},se=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${K.value}`;await F.get(H).then(l=>{c.lookups.channelPrograms=l.data;const A=c.lookups.channelPrograms.length})}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}};return u({open:O,close:a}),(H,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Vp,[e("div",Up,[e("div",Op,[e("h5",Ap,b(o(_))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=A=>a(!1)),"aria-label":"Close"})]),e("div",Dp,[o(E)?(t(),s("div",Hp,[l[14]||(l[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Ep)])):C("",!0),o(Y).size>0?(t(),s("div",Lp,[l[15]||(l[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),A=>(t(),s("li",null,b(A),1))),256))])])):C("",!0),e("div",Bp,[e("div",Np,[e("div",qp,[I(e("select",{"onUpdate:modelValue":l[1]||(l[1]=A=>c.item.programTemplateId=A),class:"form-select",onChange:l[2]||(l[2]=A=>m()),id:"sourceLocationId"},[(t(!0),s(B,null,j(c.lookups.programTemplates,A=>(t(),s("option",{value:A.id}," ["+b(o(N).moment.utc(A.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+b(A.name),9,Rp))),256))],544),[[ve,c.item.programTemplateId]]),l[16]||(l[16]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",zp,[e("div",Fp,[e("div",jp,[I(e("input",{"onUpdate:modelValue":l[3]||(l[3]=A=>c.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,c.item.name]]),l[17]||(l[17]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Gp,[(t(!0),s(B,null,j(o(n).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Yp,[e("div",Wp,[I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=A=>c.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[q,c.item.dateScheduledStart]]),l[18]||(l[18]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(n).item.dateScheduledStart.$error?(t(),s("div",Kp,[(t(!0),s(B,null,j(o(n).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])])]),c.selected.programTemplate?(t(),s("div",Jp,[e("div",Qp,[e("div",Xp,[e("div",Zp,[I(e("input",{"onUpdate:modelValue":l[5]||(l[5]=A=>c.selected.programTemplate.startOffsetTime=A),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[q,c.selected.programTemplate.startOffsetTime]]),l[19]||(l[19]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",ev,[e("div",tv,[I(e("input",{"onUpdate:modelValue":l[6]||(l[6]=A=>c.selected.programTemplate.endOffsetTime=A),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[q,c.selected.programTemplate.endOffsetTime]]),l[20]||(l[20]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",sv,[e("div",ov,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=A=>c.selected.programTemplate.durationTime=A),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[q,c.selected.programTemplate.durationTime]]),l[21]||(l[21]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",av,[e("div",lv,[e("div",nv,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=A=>c.selected.programTemplate.adBreaksDurationTime=A),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[q,c.selected.programTemplate.adBreaksDurationTime]]),l[22]||(l[22]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",rv,[e("div",iv,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=A=>c.selected.programTemplate.totalProgramTemplateDurationTime=A),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[q,c.selected.programTemplate.totalProgramTemplateDurationTime]]),l[23]||(l[23]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",dv,[e("div",uv,[e("div",cv,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=A=>c.selected.programTemplate.sourceLocation.name=A),id:"name",class:"form-control",disabled:""},null,512),[[q,c.selected.programTemplate.sourceLocation.name]]),l[24]||(l[24]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",mv,[e("div",fv,[I(e("input",{"onUpdate:modelValue":l[11]||(l[11]=A=>c.selected.programTemplate.vodSource.name=A),id:"name",class:"form-control",disabled:""},null,512),[[q,c.selected.programTemplate.vodSource.name]]),l[25]||(l[25]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):C("",!0),l[28]||(l[28]=e("hr",null,null,-1)),c.selected.programTemplate?(t(),s("div",pv,[l[27]||(l[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",vv,[e("table",gv,[l[26]||(l[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(c.selected.programTemplate.adBreaks,(A,ne)=>(t(),s("tr",null,[e("td",null,b(ne+1),1),e("td",null,b(o(N).moment.utc(A.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(N).moment.utc(A.durationInMillis).format("HH:mm:ss")),1),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,j(c.lookups.adBreakVodSources,X=>(t(),s(B,null,[X.durationInMillis===A.durationInMillis?(t(),s("option",{key:0,value:X.id}," ["+b(o(N).moment.utc(X.durationInMillis).format("HH:mm:ss"))+"] "+b(X.name),9,yv)):C("",!0)],64))),256))],8,bv),[[ve,A.vodSourceId]])])]))),256))])])])])):C("",!0)])]),e("div",$v,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:l[12]||(l[12]=A=>P()),class:"btn btn-primary",type:"button"},l[29]||(l[29]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wv),e("button",{onClick:l[13]||(l[13]=A=>a(!1)),class:"btn btn-secondary ms-1"},l[30]||(l[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Pp))}},_v=["id"],kv={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Sv={class:"modal-content"},Tv={class:"modal-header bg-primary text-white"},Mv={class:"modal-title",id:"exampleModalLabel"},Cv={class:"modal-body"},Iv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},xv=["innerHTML"],Pv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vv={key:2,class:"container"},Uv={class:"row row-cols-1 row-cols-sm-3"},Ov={class:"col"},Av={class:"form-floating mb-2"},Dv={id:"name",class:"form-control",placeholder:"Name"},Hv={key:0,class:"text-wrap"},Ev={class:"badge bg-info"},Lv={key:0,class:"d-block invalid-feedback"},Bv={class:"col"},Nv={class:"form-floating mb-2"},qv={key:0,class:"d-block invalid-feedback"},Rv={class:"col"},zv={class:"form-floating mb-2"},Fv={key:0,class:"d-block invalid-feedback"},jv={key:0},Gv={class:"row row-cols-1 row-cols-sm-3"},Yv={class:"col"},Wv={class:"form-floating mb-2"},Kv={class:"col"},Jv={class:"form-floating mb-2"},Qv={class:"col"},Xv={class:"form-floating mb-2"},Zv={class:"row row-cols-1 row-cols-sm-2"},eg={class:"col"},tg={class:"form-floating mb-2"},sg={class:"col"},og={class:"form-floating mb-2"},ag={class:"row row-cols-1 row-cols-sm-2"},lg={key:0,class:"col"},ng={class:"form-floating mb-2"},rg={key:1,class:"col"},ig={class:"form-floating mb-2"},dg={key:1},ug={class:"table-responsive border mt-1"},cg={class:"table mb-0"},mg=["onUpdate:modelValue"],fg=["value"],pg={class:"modal-footer"},vg=["disabled"],ot={__name:"_editProgram",emits:["onClose"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=w,K=ae(),i=ae("modalEditProgram"),c=ce({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);re(async()=>{n.value.$reset()});const O=async(m,g)=>{K.value=m;const f=c;if(Y.value.clear(),E.value="",f.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},f.item=null,await p(),g){const l=N.moment(g).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=l}await r(),n.value.$reset();var G=document.getElementById(i.value),V=$e.getOrCreateInstance(G);V.show()},a=async m=>{if(!m){W("onClose",m);var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.hide();return}const g=c,f=N.moment(g.item.dateScheduledStart).utc().format(),G={programId:K.value,name:g.item.name,dateScheduledStart:f,adBreaks:g.item.adBreaks.map(H=>({sourceLocationId:g.item.sourceLocationId,vodSourceId:H.vodSourceId,offsetMillis:H.offsetMillis,durationInMillis:H.durationInMillis}))};try{await F.put("/api/v1/programs/",G).then(l=>{$.success("Edit Program","Program was edited.")})}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0);return}finally{}W("onClose",m);var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.hide()},P=async()=>{await a(!0)},p=async()=>{try{const m=`/api/v1/programs/${K.value}/`;await F.get(m).then(G=>{c.item=G.data;const V=c.item,l=N.moment(V.dateScheduledStart).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=l,V.startOffsetTime=N.moment.utc(V.startOffsetMillis).format("HH:mm:ss"),V.endOffsetTime=N.moment.utc(V.endOffsetMillis).format("HH:mm:ss"),V.durationTime=N.moment.utc(V.durationInMillis).format("HH:mm:ss"),V.adBreaksDurationTime=N.moment.utc(V.adBreaksDurationInMillis).format("HH:mm:ss"),V.totalProgramTemplateDurationTime=N.moment.utc(V.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const g=c,f=g.item.channel.outputs[0].outputType;await v(g.item.sourceLocationId,f)}catch(m){E.value=N.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},r=async()=>{},v=async(m,g)=>{try{let f=`/api/v1/vodsources/lookup/source-location/${m}/output-type/${g}`;await F.get(f).then(G=>{c.lookups.adBreakVodSources=G.data})}catch(f){E.value=N.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}};return u({open:O,close:a}),(m,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",kv,[e("div",Sv,[e("div",Tv,[e("h5",Mv,b(o(_))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=f=>a(!1)),"aria-label":"Close"})]),e("div",Cv,[o(E)?(t(),s("div",Iv,[g[12]||(g[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,xv)])):C("",!0),o(Y).size>0?(t(),s("div",Pv,[g[13]||(g[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),f=>(t(),s("li",null,b(f),1))),256))])])):C("",!0),c.item?(t(),s("div",Vv,[e("div",Uv,[e("div",Ov,[e("div",Av,[e("div",Dv,[c.item.relativeProgram?(t(),s("span",Hv,[L(b(c.item.relativeProgram.name)+" - ",1),e("span",Ev,b(o(N).moment(c.item.relativeProgram.scheduledDateStart).format("DD/MM/YYYY HH:mm a")),1)])):C("",!0)]),g[14]||(g[14]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(n).item.name.$error?(t(),s("div",Lv,[(t(!0),s(B,null,j(o(n).item.name.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])]),e("div",Bv,[e("div",Nv,[I(e("input",{"onUpdate:modelValue":g[1]||(g[1]=f=>c.item.name=f),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,c.item.name]]),g[15]||(g[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",qv,[(t(!0),s(B,null,j(o(n).item.name.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])]),e("div",Rv,[e("div",zv,[I(e("input",{"onUpdate:modelValue":g[2]||(g[2]=f=>c.item.dateScheduledStart=f),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[q,c.item.dateScheduledStart]]),g[16]||(g[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(n).item.dateScheduledStart.$error?(t(),s("div",Fv,[(t(!0),s(B,null,j(o(n).item.dateScheduledStart.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])])]),c.item?(t(),s("div",jv,[e("div",Gv,[e("div",Yv,[e("div",Wv,[I(e("input",{"onUpdate:modelValue":g[3]||(g[3]=f=>c.item.startOffsetTime=f),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[q,c.item.startOffsetTime]]),g[17]||(g[17]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Kv,[e("div",Jv,[I(e("input",{"onUpdate:modelValue":g[4]||(g[4]=f=>c.item.endOffsetTime=f),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[q,c.item.endOffsetTime]]),g[18]||(g[18]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Qv,[e("div",Xv,[I(e("input",{"onUpdate:modelValue":g[5]||(g[5]=f=>c.item.durationTime=f),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[q,c.item.durationTime]]),g[19]||(g[19]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Zv,[e("div",eg,[e("div",tg,[I(e("input",{"onUpdate:modelValue":g[6]||(g[6]=f=>c.item.adBreaksDurationTime=f),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[q,c.item.adBreaksDurationTime]]),g[20]||(g[20]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",sg,[e("div",og,[I(e("input",{"onUpdate:modelValue":g[7]||(g[7]=f=>c.item.totalProgramTemplateDurationTime=f),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[q,c.item.totalProgramTemplateDurationTime]]),g[21]||(g[21]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",ag,[c.item.sourceLocation?(t(),s("div",lg,[e("div",ng,[I(e("input",{"onUpdate:modelValue":g[8]||(g[8]=f=>c.item.sourceLocation.name=f),id:"name",class:"form-control",disabled:""},null,512),[[q,c.item.sourceLocation.name]]),g[22]||(g[22]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):C("",!0),c.item.vodSource?(t(),s("div",rg,[e("div",ig,[I(e("input",{"onUpdate:modelValue":g[9]||(g[9]=f=>c.item.vodSource.name=f),id:"name",class:"form-control",disabled:""},null,512),[[q,c.item.vodSource.name]]),g[23]||(g[23]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):C("",!0)])])):C("",!0),g[26]||(g[26]=e("hr",null,null,-1)),c.item?(t(),s("div",dg,[g[25]||(g[25]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",ug,[e("table",cg,[g[24]||(g[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(c.item.adBreaks,(f,G)=>(t(),s("tr",null,[e("td",null,b(G+1),1),e("td",null,b(o(N).moment.utc(f.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(N).moment.utc(f.durationInMillis).format("HH:mm:ss")),1),e("td",null,[I(e("select",{"onUpdate:modelValue":V=>f.vodSourceId=V,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,j(c.lookups.adBreakVodSources,V=>(t(),s(B,null,[V.durationInMillis===f.durationInMillis?(t(),s("option",{key:0,value:V.id}," ["+b(o(N).moment.utc(V.durationInMillis).format("HH:mm:ss"))+"] "+b(V.name),9,fg)):C("",!0)],64))),256))],8,mg),[[ve,f.vodSourceId]])])]))),256))])])])])):C("",!0)])):C("",!0)]),e("div",pg,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:g[10]||(g[10]=f=>P()),class:"btn btn-primary ms-2",type:"button"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vg),e("button",{onClick:g[11]||(g[11]=f=>a(!1)),class:"btn btn-secondary ms-1"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,_v))}},gg={class:"d-flex justify-content-end"},bg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),N=d,$=ae(null),M=ae(null),h=ae(null),W={viewType:"Week",cellDuration:15,startDate:Pe.DayPilot.Date.today(),onTimeRangeSelected:p=>{var r=p.control;const v={start:p.start,end:p.end,id:Pe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};r.events.add(v);var m=r.events.find(v.id);O(m)},onBeforeEventRender:p=>{if(p.data.barColor="green",!!p.data.tags)switch(p.data.tags.type){case"new":p.data.barColor="yellow";break;case"business":p.data.barColor="#3498db";break;case"personal":p.data.barColor="#2ecc71";break;case"vacation":p.data.barColor="#f1c40f";break;default:p.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:async p=>{const r=p.newStart.value,v=p.e.id(),m=k.moment(r).utc().format();try{let g="/api/v1/programs/scheduled-date-start";const f={programId:v,dateScheduledStart:m};await R.put(g,f).then(G=>{E.success("Program date scheduled start was edited.")})}catch(g){T.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0);return}finally{}await x()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async p=>{var r=p.e.id();P(r)},contextMenu:new Pe.DayPilot.Menu([{text:"Clone",onClick:async p=>{const r=p.source.id();try{let v=`/api/v1/programs/${r}/clone`;await R.post(v).then(m=>{E.success("Clone Program","Program was cloned.")})}catch(v){T.value=k.getErrorMessageAsHtml(v),window.scrollTo(0,0);return}finally{await x()}}},{text:"Delete",onClick:async p=>{if(!confirm("Do you want to remove this program?"))return;const v=p.source.id();try{let m=`/api/v1/programs/${v}/`;await R.delete(m).then(g=>{E.success("Delete Program","Program was deleted.")}),$.value.control.events.remove(p.source)}catch(m){T.value=k.getErrorMessageAsHtml(m),window.scrollTo(0,0);return}finally{await x()}}}])},K=ae([]),i=()=>{$.value.control.update({events:K.value})},c=ce({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});re(async()=>{await x()});const x=async()=>{await n(),await i()},n=async()=>{const p=c;if(!_.value)try{_.value=!0,T.value="";const r=`/api/v1/channels/${N.id}/`;await R.get(r).then(v=>{p.item=v.data;const m=p.item.outputs,g=p.item.programs.map(f=>{let G=`${f.name}`,V=`[${f.name}]`;return f.relativeProgram&&(V+=` => [${f.relativeProgram.name}]`),{start:k.moment(f.dateScheduledStart).utc(!0).format(),end:k.moment(f.dateScheduledEnd).utc(!0).format(),id:f.programId,text:G,toolTip:V}});K.value=g})}catch(r){T.value=k.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{_.value=!1}},O=p=>{M.value.open(N.id,p.id(),p.start().value)},a=async(p,r)=>{var v=$.value,m=v.control.events.find(p.eventId);if(!r&&m){$.value.control.events.remove(m);return}v.control.events.find(H=>H.text()==p.name)&&(alert("Program already exists in this channel. Removing in the calendar."),$.value.control.events.remove(m));const f=k.moment(p.dateScheduledStart).utc(!0).format(),G=k.moment(p.dateScheduledEnd).utc(!0).format(),V=new Pe.DayPilot.Date(f),se=new Pe.DayPilot.Date(G);m.text(p.name),m.start(new Pe.DayPilot.Date(V)),m.end(new Pe.DayPilot.Date(se)),m.data.tags.program=p,m.commit(),$.value.control.update(),await R.post("/api/v1/programs/from-template/",p).then(H=>{E.success("Add New Program",`Program [${p.name}] was added to this channel.`)},H=>{const l=k.getErrorMessageAsHtml(H);alert(l)}),await x()},P=(p,r)=>{h.value.open(p,r)};return(p,r)=>{const v=Q("router-link"),m=Q("PageHeader"),g=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",gg,[e("button",{onClick:r[0]||(r[0]=f=>x()),class:"btn btn-secondary ms-1"},r[1]||(r[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(v,{to:`${d.urlView}/${d.id}`,class:"btn btn-secondary ms-1"},{default:U(()=>r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(T),vuelidate:p.v$},{default:U(()=>[e("div",null,[D(o(Pe.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:$},null,512),D(hv,{ref_key:"modalAddProgram",ref:M,onOnClose:a},null,512),D(ot,{ref_key:"modalEditProgram",ref:h,onOnClose:x},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yg=["id"],$g={class:"modal-dialog modal-xl modal-fullscreen-md-down"},wg={class:"modal-content"},hg={class:"modal-header bg-primary text-white"},_g={class:"modal-title",id:"exampleModalLabel"},kg={class:"modal-body"},Sg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Tg=["innerHTML"],Mg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Cg={class:"container"},Ig={class:"row row-cols-1 row-cols-sm-3"},xg={class:"col"},Pg={class:"form-floating mb-2"},Vg=["disabled"],Ug=["value"],Og={class:"col"},Ag={class:"form-floating mb-2"},Dg={key:0,class:"d-block invalid-feedback"},Hg={class:"col"},Eg={class:"form-floating mb-2"},Lg={key:0,class:"d-block invalid-feedback"},Bg={class:"row row-cols-sm-2"},Ng={class:"col"},qg={class:"form-floating mb-2"},Rg=["value"],zg={key:0,class:"d-block invalid-feedback"},Fg={class:"col"},jg={class:"form-floating mb-2"},Gg=["value"],Yg={key:0,class:"d-block invalid-feedback"},Wg={class:"col"},Kg={class:"input-group mb-1"},Jg={class:"form-floating"},Qg={key:0,class:"input-group-text"},Xg={key:0},Zg={key:1},e1={key:2},t1={key:3,class:"d-block invalid-feedback"},s1={class:"col"},o1={class:"input-group mb-1"},a1={class:"form-floating"},l1={key:0,class:"input-group-text"},n1={key:0},r1={key:1},i1={key:2,class:"d-block invalid-feedback"},d1={class:"table-responsive border mt-1"},u1={class:"table"},c1={class:"input-group mb-1"},m1=["onUpdate:modelValue"],f1={key:0,class:"input-group-text"},p1=["onUpdate:modelValue"],v1=["value"],g1=["onUpdate:modelValue"],b1=["value"],y1=["onClick"],$1={class:"modal-footer"},w1=["disabled"],h1={__name:"_addProgram",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=w,K=ae(),i=ae("modalAddProgram"),c=ce({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ce(0),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);re(async()=>{n.value.$reset()});const O=async H=>{K.value=H;const l=c;Y.value.clear(),E.value="";const A=N.moment().local().add(2,"m"),X=A.format("YYYY-MM-DD HH:mm"),pe=A.format("YYYY_MM_DD")+"_PROGRAM_";l.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},l.item={name:pe,relativeProgramId:null,dateScheduledStart:X,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await p(),n.value.$reset();var _e=document.getElementById(i.value),Ie=$e.getOrCreateInstance(_e);Ie.show()},a=async()=>{var H=document.getElementById(i.value),l=$e.getOrCreateInstance(H);l.hide(),W("refresh")},P=async()=>{const H=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const ne=H.item;delete ne.vodSource,ne.channelId=K.value;var A=ne.dateScheduledStart;ne.dateScheduledStart=N.moment(A).utc().format(),await F.post("/api/v1/programs/",ne).then(X=>{$.success("Add Program","Program added to Channel",{async onClose(){}})}),await a()}catch(ne){E.value=N.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{z.value=!1}},p=async()=>{await r(),await m(),await f()},r=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.sourceLocations=l.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await v(c.item.sourceLocationId)}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},v=async H=>{try{let l=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(l).then(A=>{c.lookups.vodSources=A.data})}catch(l){E.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},m=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.adBreakSourceLocations=l.data})}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},g=async H=>{try{let l=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(l).then(A=>{c.lookups.adBreakVodSources=A.data})}catch(l){E.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},f=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${K.value}`;await F.get(H).then(l=>{if(c.lookups.channelPrograms=l.data,c.lookups.channelPrograms.length===1){const ne=c.lookups.channelPrograms[0];c.item.relativeProgramId=ne.id}})}catch(H){E.value=N.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},G=()=>{const H={offsetMillis:0,sourceLocationId:null,vodSourceId:null},l=c.item.adBreaks.length;if(l>0){const A=c.item.adBreaks[l-1];H.offsetMillis=A.offsetMillis+1e4}c.item.adBreaks.push(H)},V=H=>{c.item.adBreaks.splice(H,1)},se=()=>{const H=c.item.vodSource;c.item.vodSourceId=H.id};return u({open:O,close:a}),(H,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",$g,[e("div",wg,[e("div",hg,[e("h5",_g,b(o(_))+" - "+b(o(y)),1),l[11]||(l[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",kg,[o(E)?(t(),s("div",Sg,[l[12]||(l[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Tg)])):C("",!0),o(Y).size>0?(t(),s("div",Mg,[l[13]||(l[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),A=>(t(),s("li",null,b(A),1))),256))])])):C("",!0),e("div",Cg,[e("div",Ig,[e("div",xg,[e("div",Pg,[I(e("select",{"onUpdate:modelValue":l[0]||(l[0]=A=>c.item.relativeProgramId=A),class:"form-select",id:"sourceLocationId",disabled:c.lookups.channelPrograms.length<=0},[(t(!0),s(B,null,j(c.lookups.channelPrograms,A=>(t(),s("option",{value:A.id},b(A.name),9,Ug))),256))],8,Vg),[[ve,c.item.relativeProgramId]]),l[14]||(l[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",Og,[e("div",Ag,[I(e("input",{"onUpdate:modelValue":l[1]||(l[1]=A=>c.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,c.item.name]]),l[15]||(l[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Dg,[(t(!0),s(B,null,j(o(n).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Hg,[e("div",Eg,[I(e("input",{"onUpdate:modelValue":l[2]||(l[2]=A=>c.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[q,c.item.dateScheduledStart]]),l[16]||(l[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(n).item.dateScheduledStart.$error?(t(),s("div",Lg,[(t(!0),s(B,null,j(o(n).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])])]),e("div",Bg,[e("div",Ng,[e("div",qg,[I(e("select",{"onUpdate:modelValue":l[3]||(l[3]=A=>c.item.sourceLocationId=A),onChange:l[4]||(l[4]=A=>v(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(c.lookups.sourceLocations,A=>(t(),s("option",{value:A.id},b(A.name),9,Rg))),256))],544),[[ve,c.item.sourceLocationId]]),l[17]||(l[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(n).item.sourceLocationId.$error?(t(),s("div",zg,[(t(!0),s(B,null,j(o(n).item.sourceLocationId.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Fg,[e("div",jg,[I(e("select",{"onUpdate:modelValue":l[5]||(l[5]=A=>c.item.vodSource=A),onChange:l[6]||(l[6]=A=>se()),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,j(c.lookups.vodSources,A=>(t(),s("option",{value:A},b(A.name),9,Gg))),256))],544),[[ve,c.item.vodSource]]),l[18]||(l[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(n).item.vodSourceId.$error?(t(),s("div",Yg,[(t(!0),s(B,null,j(o(n).item.vodSourceId.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Wg,[e("div",Kg,[e("div",Jg,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=A=>c.item.startOffsetMillis=A),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[q,c.item.startOffsetMillis]]),l[19]||(l[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),c.item.startOffsetMillis>0?(t(),s("span",Qg,b(o(N).moment.utc(c.item.startOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),c.item.startOffsetMillis>0&&c.item.startOffsetMillis<3e4?(t(),s("div",Xg,l[20]||(l[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),c.item.startOffsetMillis>c.item.endOffsetMillis&&c.item.endOffsetMillis>0?(t(),s("div",Zg,l[21]||(l[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):C("",!0),c.item.vodSource&&c.item.startOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",e1,l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(n).item.startOffsetMillis.$error?(t(),s("div",t1,[(t(!0),s(B,null,j(o(n).item.startOffsetMillis.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)]),e("div",s1,[e("div",o1,[e("div",a1,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=A=>c.item.endOffsetMillis=A),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[q,c.item.endOffsetMillis]]),l[23]||(l[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),c.item.endOffsetMillis>0?(t(),s("span",l1,b(o(N).moment.utc(c.item.endOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),c.item.endOffsetMillis>0&&c.item.endOffsetMillis<3e4?(t(),s("div",n1,l[24]||(l[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),c.item.vodSource&&c.item.endOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",r1,l[25]||(l[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(n).item.endOffsetMillis.$error?(t(),s("div",i1,[(t(!0),s(B,null,j(o(n).item.endOffsetMillis.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),l[29]||(l[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[l[26]||(l[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:G,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",d1,[e("table",u1,[l[28]||(l[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(c.item.adBreaks,(A,ne)=>(t(),s("tr",null,[e("td",null,b(ne+1),1),e("td",null,[e("div",c1,[I(e("input",{"onUpdate:modelValue":X=>A.offsetMillis=X,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,m1),[[q,A.offsetMillis]]),A.offsetMillis>0?(t(),s("span",f1,b(o(N).moment.utc(A.offsetMillis).format("HH:mm:ss")),1)):C("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.sourceLocationId=X,onChange:l[9]||(l[9]=X=>g(c.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(B,null,j(c.lookups.adBreakSourceLocations,X=>(t(),s("option",{value:X.id},b(X.name),9,v1))),256))],40,p1),[[ve,A.sourceLocationId]])]),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,j(c.lookups.adBreakVodSources,X=>(t(),s("option",{value:X.id},b(X.name),9,b1))),256))],8,g1),[[ve,A.vodSourceId]])]),e("td",null,[e("button",{onClick:X=>V(ne),class:"btn btn-outline-warning"},l[27]||(l[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,y1)])]))),256))])])])])])]),e("div",$1,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:l[10]||(l[10]=A=>P()),class:"btn btn-primary",type:"button"},l[30]||(l[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,w1),l[31]||(l[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,yg))}},_1=["id"],k1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},S1={class:"modal-content"},T1={class:"modal-header bg-primary","data-bs-theme":"dark"},M1={class:"modal-title",id:"exampleModalLabel"},C1={class:"modal-body"},I1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},x1=["innerHTML"],P1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},V1={class:"container"},U1={class:"col"},O1={class:"form-floating mb-2"},A1={class:"col"},D1={class:"form-floating mb-2"},H1={key:0,class:"d-block invalid-feedback"},E1={class:"col"},L1={class:"form-floating mb-2 d-none"},B1={key:0,class:"d-block invalid-feedback"},N1={class:"col"},q1={class:"form-floating mb-2"},R1={key:0,class:"d-block invalid-feedback"},z1={class:"modal-footer"},F1=["disabled"],j1={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=w,K=ae(),i=ae("modalAddPlaybackConfiguration"),c=ce({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);re(async()=>{n.value.$reset()});const O=async(p,r)=>{K.value=p;const v=c;Y.value.clear(),E.value="";const m=r,g=m.lastIndexOf("/"),f=m.substring(0,g),G=m.substring(g+1).replace(".","_")+"_ADCAMPAIGN_";v.item={name:G,originalVideoContentSourceUrl:r,videoContentSourceUrl:f,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},n.value.$reset();var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.show()},a=async()=>{var p=document.getElementById(i.value),r=$e.getOrCreateInstance(p);r.hide(),W("refresh")},P=async()=>{const p=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const v=p.item;v.channelOutputId=K.value,await F.put("/api/v1/channelOutputs/playback/",v).then(m=>{$.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await a()}catch(v){E.value=N.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:O,close:a}),(p,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",k1,[e("div",S1,[e("div",T1,[e("h5",M1,b(o(_))+" - "+b(o(y)),1),r[5]||(r[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",C1,[o(E)?(t(),s("div",I1,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,x1)])):C("",!0),o(Y).size>0?(t(),s("div",P1,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),v=>(t(),s("li",null,b(v),1))),256))])])):C("",!0),e("div",V1,[e("div",U1,[e("div",O1,[I(e("textarea",{"onUpdate:modelValue":r[0]||(r[0]=v=>c.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[q,c.item.originalVideoContentSourceUrl]]),r[8]||(r[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",A1,[e("div",D1,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[q,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",H1,[(t(!0),s(B,null,j(o(n).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",E1,[e("div",L1,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>c.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[q,c.item.videoContentSourceUrl]]),r[10]||(r[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),r[11]||(r[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(n).item.videoContentSourceUrl.$error?(t(),s("div",B1,[(t(!0),s(B,null,j(o(n).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",N1,[e("div",q1,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>c.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[q,c.item.adDecisionServerUrl]]),r[12]||(r[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(n).item.adDecisionServerUrl.$error?(t(),s("div",R1,[(t(!0),s(B,null,j(o(n).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])])])]),e("div",z1,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:r[4]||(r[4]=v=>P()),class:"btn btn-primary",type:"button"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,F1),r[14]||(r[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,_1))}},G1=["id"],Y1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},W1={class:"modal-content"},K1={class:"modal-header bg-primary text-white"},J1={class:"modal-title",id:"exampleModalLabel"},Q1={class:"modal-body"},X1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Z1=["innerHTML"],eb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},tb={class:"container"},sb={class:"col"},ob={class:"form-floating mb-2"},ab=["value"],lb={key:0,class:"d-block invalid-feedback"},nb={class:"col"},rb={class:"form-floating mb-2"},ib={key:0,class:"d-block invalid-feedback"},db={class:"col"},ub={class:"form-floating mb-2"},cb={key:0,class:"d-block invalid-feedback"},mb={class:"modal-footer"},fb=["disabled"],pb={__name:"_addChannelOutput",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=w,K=ae(),i=ae("modalAddChannelOutput"),c=ce({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),x={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},manifestName:{required:ee.withMessage("Manifest Name is required.",te),$autoDirty:!0,$lazy:!0},outputType:{required:ee.withMessage("Output Type is required.",te),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);re(async()=>{n.value.$reset()});const O=async()=>{await a()},a=async()=>{try{await F.get("/api/v1/sourceGroups/lookup/").then(m=>{c.lookups.sourceGroups=m.data,c.lookups.sourceGroups.length===1&&(c.item.sourceGroupId=c.lookups.sourceGroups[0].id)})}catch(v){E.value=N.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},P=async v=>{K.value=v;const m=c;Y.value.clear(),E.value="",m.lookups={sourceGroups:[]},m.item={sourceGroupId:null,outputType:null},await O(),n.value.$reset();var g=document.getElementById(i.value),f=$e.getOrCreateInstance(g);f.show()},p=async()=>{var v=document.getElementById(i.value),m=$e.getOrCreateInstance(v);m.hide(),W("refresh")},r=async()=>{const v=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const g=v.item;g.channelId=K.value,await F.post("/api/v1/channelOutputs",g).then(f=>{$.success("Add Channel Output","Channel output added.")}),await p()}catch(g){E.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:P,close:p}),(v,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Y1,[e("div",W1,[e("div",K1,[e("h5",J1,b(o(_))+" - "+b(o(y)),1),m[4]||(m[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Q1,[o(E)?(t(),s("div",X1,[m[5]||(m[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Z1)])):C("",!0),o(Y).size>0?(t(),s("div",eb,[m[6]||(m[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),g=>(t(),s("li",null,b(g),1))),256))])])):C("",!0),e("div",tb,[e("div",sb,[e("div",ob,[I(e("select",{"onUpdate:modelValue":m[0]||(m[0]=g=>c.item.sourceGroupId=g),class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,j(c.lookups.sourceGroups,g=>(t(),s("option",{value:g.id},b(g.name),9,ab))),256))],512),[[ve,c.item.sourceGroupId]]),m[7]||(m[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(n).item.sourceGroupId.$error?(t(),s("div",lb,[(t(!0),s(B,null,j(o(n).item.sourceGroupId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",nb,[e("div",rb,[I(e("select",{"onUpdate:modelValue":m[1]||(m[1]=g=>c.item.outputType=g),class:"form-select",id:"outputType"},m[8]||(m[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ve,c.item.outputType]]),m[9]||(m[9]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(n).item.outputType.$error?(t(),s("div",ib,[(t(!0),s(B,null,j(o(n).item.outputType.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",db,[e("div",ub,[I(e("input",{"onUpdate:modelValue":m[2]||(m[2]=g=>c.item.manifestName=g),class:"form-control",id:"manifestName"},null,512),[[q,c.item.manifestName]]),m[10]||(m[10]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(n).item.manifestName.$error?(t(),s("div",cb,[(t(!0),s(B,null,j(o(n).item.manifestName.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])])])]),e("div",mb,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:m[3]||(m[3]=g=>r()),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fb),m[12]||(m[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,G1))}},vb=["id"],gb={class:"modal-dialog modal-xl modal-fullscreen-md-down"},bb={class:"modal-content"},yb={class:"modal-header bg-primary text-white"},$b={class:"modal-title",id:"exampleModalLabel"},wb={class:"modal-body"},hb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_b=["innerHTML"],kb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Sb={class:"container"},Tb={class:"col"},Mb={class:"form-floating mb-2"},Cb=["value"],Ib={key:0,class:"d-block invalid-feedback"},xb={class:"col"},Pb={class:"form-floating mb-2"},Vb=["value"],Ub={key:0,class:"d-block invalid-feedback"},Ob={class:"modal-footer"},Ab=["disabled"],Db={__name:"_editFillerSlate",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:N,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=w,K=ae("modalEditFillerSlate"),i=ce({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null}}),c={item:{channelId:{required:ee.withMessage("channelId is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0}}},x=ye(c,i);re(async()=>{x.value.$reset()});const n=async()=>{await O()},O=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(g=>{i.lookups.sourceLocations=g.data}),i.item.sourceLocationId&&await a(i.item.sourceLocationId)}catch(m){E.value=N.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},a=async m=>{try{let g=`/api/v1/vodSources/lookup/source-Location/${m}/`;await F.get(g).then(f=>{i.lookups.vodSources=f.data})}catch(g){E.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},P=async(m,g,f)=>{const G=i;Y.value.clear(),E.value="",G.lookups={sourceLocations:[],vodSources:[]},G.item={channelId:m,sourceLocationId:g,vodSourceId:f},await n(),x.value.$reset();var V=document.getElementById(K.value),se=$e.getOrCreateInstance(V);se.show()},p=async()=>{var m=document.getElementById(K.value),g=$e.getOrCreateInstance(m);g.hide(),W("refresh")},r=async()=>{const m=i;if(z.value)return;if(!await x.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const f=m.item;await F.put("/api/v1/channels/filler-slate",f).then(G=>{$.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await p()}catch(f){E.value=N.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{z.value=!1}},v=async()=>{i.item.vodSourceId=null,await a(i.item.sourceLocationId)};return u({open:P,close:p}),(m,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",gb,[e("div",bb,[e("div",yb,[e("h5",$b,b(o(_))+" - "+b(o(y)),1),g[4]||(g[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",wb,[o(E)?(t(),s("div",hb,[g[5]||(g[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,_b)])):C("",!0),o(Y).size>0?(t(),s("div",kb,[g[6]||(g[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),f=>(t(),s("li",null,b(f),1))),256))])])):C("",!0),e("div",Sb,[e("div",Tb,[e("div",Mb,[I(e("select",{"onUpdate:modelValue":g[0]||(g[0]=f=>i.item.sourceLocationId=f),onChange:g[1]||(g[1]=f=>v()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(i.lookups.sourceLocations,f=>(t(),s("option",{value:f.id},b(f.name),9,Cb))),256))],544),[[ve,i.item.sourceLocationId]]),g[7]||(g[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(x).item.sourceLocationId.$error?(t(),s("div",Ib,[(t(!0),s(B,null,j(o(x).item.sourceLocationId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])]),e("div",xb,[e("div",Pb,[I(e("select",{"onUpdate:modelValue":g[2]||(g[2]=f=>i.item.vodSourceId=f),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,j(i.lookups.vodSources,f=>(t(),s("option",{value:f.id},b(f.name),9,Vb))),256))],512),[[ve,i.item.vodSourceId]]),g[8]||(g[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(x).item.vodSourceId.$error?(t(),s("div",Ub,[(t(!0),s(B,null,j(o(x).item.vodSourceId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])])])]),e("div",Ob,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:g[3]||(g[3]=f=>r()),class:"btn btn-primary",type:"button"},g[9]||(g[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ab),g[10]||(g[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,vb))}},Hb={class:"d-flex flex-row justify-content-end"},Eb={key:0,class:"dropdown"},Lb={key:0,class:"fas fa-fw fa-play"},Bb={key:1,class:"fas fa-fw fa-stop"},Nb={class:"dropdown-menu"},qb={key:0},Rb={key:1},zb={key:0},Fb={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},jb={class:"nav-item",role:"presentation"},Gb={class:"nav-item",role:"presentation"},Yb={class:"nav-item",role:"presentation"},Wb={class:"nav-item",role:"presentation"},Kb={class:"nav-item",role:"presentation"},Jb={class:"tab-content",id:"myTabContent"},Qb={class:"mt-2"},Xb={class:"row row-cols-1 row-cols-sm-3"},Zb={class:"col"},ey={class:"form-floating mb-2"},ty={class:"col"},sy={class:"form-floating mb-2"},oy={class:"col"},ay={class:"form-floating mb-2"},ly={class:"d-flex flex-row justify-content-start align-items-center"},ny={key:0,class:"ms-2"},ry={class:"row row-cols-sm-2 mt-1"},iy={class:"col"},dy={class:"form-floating mb-2"},uy={class:"col"},cy={class:"form-floating mb-2"},my={class:"col mt-2"},fy={class:"form-floating mb-2"},py={class:"mt-2"},vy={class:"d-flex flex-row justify-content-start align-items-center"},gy={class:"ms-2"},by={key:0,class:"alert bg-warning mt-2"},yy={class:"table-responsive border mt-1"},$y={class:"table table-bordered1 mb-0"},wy={key:0,class:"text-wrap"},hy={key:1,class:"text-warning"},_y={key:0,class:"text-end"},ky={key:1,class:"text-end"},Sy=["onClick"],Ty={key:0},My={colspan:"999"},Cy={class:"d-flex flex-row justify-content-start align-items-center"},Iy={class:"ms-2"},xy={if:"item.playbackUrl"},Py=["onClick"],Vy={key:0,class:"table-responsive border mt-2"},Uy={class:"table mb-0 table-small"},Oy={class:"text-end"},Ay=["onClick"],Dy=["onClick"],Hy={key:1,class:"mt-2"},Ey={class:"container1"},Ly={class:"row row-cols-1 row-cols-sm-2"},By={class:"col-sm-3"},Ny={class:"input-group mb-2"},qy={class:"form-floating border-success"},Ry=["onUpdate:modelValue"],zy=["onClick"],Fy={class:"col-sm-9"},jy={class:"input-group mb-2"},Gy={class:"form-floating"},Yy=["onUpdate:modelValue"],Wy=["onClick"],Ky={class:"col"},Jy={class:"form-floating mb-2"},Qy=["onUpdate:modelValue"],Xy={class:"mt-2"},Zy={class:"table-responsive border"},e$={class:"table table-hover mb-0 caption-top"},t$={key:0,class:"fas fa-fw fa-check-circle text-success"},s$={class:"badge bg-info"},o$={key:0,class:""},a$={key:1,class:"mt-1"},l$={class:"mt-1"},n$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},r$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},i$={class:"badge bg-info me-2"},d$={class:"text-end"},u$={class:"dropdown position-static"},c$={class:"dropdown-menu"},m$=["onClick"],f$={key:0},p$=["onClick"],v$=["onClick"],g$=["onClick"],b$={class:"text-end mt-2 d-none"},y$={class:"mt-2"},$$={class:"text-end"},w$={key:0},h$={class:"pt-2 row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},_$={class:"col"},k$={class:"card h-100"},S$=["id"],T$={class:"card-body"},M$={class:"card-title"},C$={class:"col h-100"},I$={class:"card"},x$=["id"],P$={class:"card-body"},V$={class:"card-title"},U$={class:"mt-2"},O$={key:0,class:"fas fa-fw fa-check-circle text-success"},A$={key:1,class:"fas fa-fw fa-times-circle text-warning"},D$={key:0,class:"fas fa-fw fa-check-circle text-success"},H$={key:1,class:"fas fa-fw fa-times-circle text-warning"},E$={key:0,class:"fas fa-fw fa-check-circle text-success"},L$={key:1,class:"fas fa-fw fa-times-circle text-warning"},B$={key:0,class:"fas fa-fw fa-check text-warning"},N$={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},q$={key:0,class:"fas fa-fw fa-check-circle text-success"},R$={key:1,class:"fas fa-fw fa-times-circle text-warning"},z$={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:N,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});be("$config");const K=ge();K.user;const i=ce({user:K.user,item:null}),c=ae(null),x=ae(null),n=ae(null),O=ae(null),a=ae(null),P=ae(),p=De(()=>i.item&&i.item.state==="RUNNING");re(async()=>{await g(),P.value=F.getPageTab("channel")||"information-tab"});const r=le=>{F.setPageTab("channel",le),P.value=le},v=le=>le===P.value?"active":"",m=le=>le===P.value?"show active":"",g=async()=>{const le=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const S=`/api/v1/channels/${u.id}/`;await J.get(S).then(de=>{le.item=de.data,le.item.outputs.forEach(Se=>{Se.playbackConfigurations.forEach(Z=>{if(Se.playbackUrl){const Me=Se.playbackUrl,fe=Me.lastIndexOf("/"),Fe=Me.substring(0,fe),Ne=Me.substring(fe+1),je=Z.hlsConfigurationManifestEndpointPrefix;je&&(Z.hlsPlaylist=je+Ne)}})})})}catch(S){k.value=F.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{y.value=!1}},f=async()=>{await g()},G=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/channels/${u.id}/publish/`).then(S=>{N.success("Publish Channel","Channel was published.")}),y.value=!1,await f()}catch(S){k.value=F.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{y.value=!1}}},V=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/channels/${u.id}/unpublish/`).then(S=>{N.warning("Remove Channel","Channel was removed.")}),y.value=!1,await f()}catch(S){k.value=F.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{y.value=!1}}},se=()=>{c.value.open(u.id)},H=le=>{le.outputType==="HLS"&&x.value.open(le.channelOutputId,le.playbackUrl)},l=()=>{n.value.open(u.id)},A=le=>{O.value.open(le)},ne=(le,S)=>{a.value.open(u.id,le,S)},X=async le=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${le}/`).then(de=>{N.success("Delete Program","Program was deleted..",{async onClose(){}})}),y.value=!1,await f()}catch(de){k.value=F.getErrorMessageAsHtml(de),window.scrollTo(0,0)}finally{y.value=!1}}},pe=async le=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/channelOutputs/${le}/`).then(de=>{N.success("Delete Channel Output","Channel output was deleted..")}),y.value=!1,await f()}catch(de){k.value=F.getErrorMessageAsHtml(de),window.scrollTo(0,0)}finally{y.value=!1}}},_e=async le=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/programs/${le}/publish/`).then(de=>{N.success("Publish Program","Program was published..",{async onClose(){}})}),y.value=!1,await f()}catch(de){k.value=F.getErrorMessageAsHtml(de),window.scrollTo(0,0)}finally{y.value=!1}}},Ie=async le=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${le}/unpublish/`).then(de=>{N.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),y.value=!1,await f()}catch(de){k.value=F.getErrorMessageAsHtml(de),window.scrollTo(0,0)}finally{y.value=!1}}},xe=async le=>{if(!y.value){k.value=null;try{y.value=!0,await J.put(`/api/v1/channels/${u.id}/change-state/${le}`).then(S=>{N.success("Update Channel state","Change state was updated")}),y.value=!1,await f()}catch(S){k.value=F.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{y.value=!1}}},He=async le=>{if(!y.value)try{y.value=!0,k.value="",await J.post(`/api/v1/channelOutputs/${le}/playback/publish/`).then(S=>{N.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),y.value=!1,await f()}catch(S){k.value=F.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{y.value=!1}},lt=async le=>{if(confirm("Do you want to remove this Playback Configuration?")&&!y.value)try{y.value=!0,k.value="",await J.delete(`/api/v1/channelOutputs/${le}/playback/`).then(de=>{N.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),y.value=!1,await f()}catch(de){k.value=F.getErrorMessageAsHtml(de),window.scrollTo(0,0)}finally{y.value=!1}},nt=le=>{const S=`https://www.hlsplayer.org/play?url=${encodeURIComponent(le)}`;window.open(S,"_blank")},rt=()=>{Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')&&(console.log("Hello AV1 playback! AVC who?"),i.item.outputs.forEach(S=>{const de=`video-${S.channelOutputId}`;var Ae=document.getElementById(de);ze(Ae,S.playbackUrl),N.success("Start Channel Stream","Main playlist started."),S.playbackConfigurations.forEach(Se=>{const Z=`video-${Se.channelOutputPlaybackConfigurationId}`;var Me=document.getElementById(Z);ze(Me,Se.hlsPlaylist),N.success("Start Channel Stream","Playback with Server-side Ad Insertion playlist started.")})}))},ze=(le,S)=>{var de=new Hls;de.on(Hls.Events.MEDIA_ATTACHED,function(){console.log("video and hls.js are now bound together !")}),de.on(Hls.Events.MANIFEST_PARSED,function(Ae,Se){console.log("manifest loaded, found "+Se.levels.length+" quality level"),le.play()}),de.on(Hls.Events.ERROR,function(Ae,Se){if(Se.fatal)switch(Se.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),de.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",Se);break;default:de.destroy();break}}),de.loadSource(S),de.attachMedia(le)};return(le,S)=>{const de=Q("router-link"),Ae=Q("PageHeader"),Se=Q("PageBody");return t(),ie(ue,null,{default:U(()=>[e("div",null,[D(Ae,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Hb,[i.item?(t(),s("div",Eb,[e("button",{class:oe([[p.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[p.value?(t(),s("span",Lb)):(t(),s("span",Bb)),L(" "+b(i.item.state),1)],2),e("ul",Nb,[i.item.arn?(t(),s("li",qb,[p.value?(t(),s("button",{key:0,onClick:S[0]||(S[0]=Z=>xe("STOPPED")),class:"dropdown-item"},S[20]||(S[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),L("Stop ")]))):(t(),s("button",{key:1,onClick:S[1]||(S[1]=Z=>xe("RUNNING")),class:"dropdown-item"},S[21]||(S[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),L("Start ")])))])):C("",!0),p.value?C("",!0):(t(),s("li",Rb,[i.item.arn?(t(),s("button",{key:0,onClick:S[2]||(S[2]=Z=>V()),class:"dropdown-item"},S[22]||(S[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),L("Unpublish ")]))):(t(),s("button",{key:1,onClick:S[3]||(S[3]=Z=>G()),class:"dropdown-item"},S[23]||(S[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")])))])),i.item.arn?(t(),s(B,{key:2},[S[25]||(S[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:S[4]||(S[4]=Z=>G()),class:"dropdown-item"},S[24]||(S[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Republish ")]))])],64)):C("",!0)])])):C("",!0),D(de,{to:`${d.urlSchedulePrograms}/${d.id}`,class:"ms-2 btn btn-primary"},{default:U(()=>S[26]||(S[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:S[5]||(S[5]=Z=>f()),class:"ms-2 btn btn-secondary"},S[27]||(S[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:S[6]||(S[6]=Z=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},S[28]||(S[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(Se,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",zb,[e("ul",Fb,[e("li",jb,[e("button",{onClick:S[7]||(S[7]=Z=>r("information-tab")),class:oe([v("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},S[29]||(S[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),L("Information ")]),2)]),e("li",Gb,[e("button",{onClick:S[8]||(S[8]=Z=>r("outputPlayback-tab")),class:oe([v("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},S[30]||(S[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),L("Output/Playback ")]),2)]),e("li",Yb,[e("button",{onClick:S[9]||(S[9]=Z=>r("programs-tab")),class:oe([v("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},S[31]||(S[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),L("Programs ")]),2)]),e("li",Wb,[e("button",{onClick:S[10]||(S[10]=Z=>r("preview-tab")),class:oe([v("preview-tab"),"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},S[32]||(S[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),L("Preview ")]),2)]),e("li",Kb,[e("button",{onClick:S[11]||(S[11]=Z=>r("checklist-tab")),class:oe([v("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},S[33]||(S[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),L("Checklist ")]),2)])]),e("div",Jb,[e("div",{class:oe([m("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Qb,[e("div",Xb,[e("div",Zb,[e("div",ey,[I(e("input",{"onUpdate:modelValue":S[12]||(S[12]=Z=>i.item.name=Z),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[q,i.item.name]]),S[34]||(S[34]=e("label",{for:"name"},"Name",-1))])]),e("div",ty,[e("div",sy,[I(e("input",{"onUpdate:modelValue":S[13]||(S[13]=Z=>i.item.playbackMode=Z),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[q,i.item.playbackMode]]),S[35]||(S[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",oy,[e("div",ay,[I(e("input",{"onUpdate:modelValue":S[14]||(S[14]=Z=>i.item.tier=Z),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[q,i.item.tier]]),S[36]||(S[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",ly,[S[38]||(S[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),p.value?C("",!0):(t(),s("div",ny,[e("button",{onClick:S[15]||(S[15]=Z=>ne(i.item.fillerSlateSourceLocation.sourceLocationId,i.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},S[37]||(S[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",ry,[e("div",iy,[e("div",dy,[D(de,{to:`${d.urlViewSourceLocation}/${i.item.fillerSlateSourceLocation.sourceLocationId}/${o(h)()}`,class:oe([[i.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:U(()=>[L(b(i.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),S[39]||(S[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",uy,[e("div",cy,[D(de,{to:`${d.urlViewVodSource}/${i.item.fillerSlateVodSource.vodSourceId}/${o(h)()}`,class:oe([[i.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:U(()=>[L(b(i.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),S[40]||(S[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",my,[e("div",fy,[I(e("textarea",{"onUpdate:modelValue":S[16]||(S[16]=Z=>i.item.policy=Z),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[q,i.item.policy]]),S[41]||(S[41]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:oe([m("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",py,[e("div",null,[e("div",vy,[S[43]||(S[43]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",gy,[e("button",{onClick:S[17]||(S[17]=Z=>l()),class:"btn btn-outline-primary btn-sm"},S[42]||(S[42]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),i.item.outputs.length<=0?(t(),s("div",by,S[44]||(S[44]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),L("Channel Output is required ")]))):C("",!0),e("div",yy,[e("table",$y,[S[58]||(S[58]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Type"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.outputs,(Z,Me)=>(t(),s(B,{key:Z.channelOutputId},[e("tr",null,[e("td",null,b(Me+1),1),e("td",null,[e("div",null,b(Z.outputType),1)]),e("td",null,[e("div",null,b(Z.manifestName),1)]),e("td",null,[e("div",null,[D(de,{to:`${d.urlViewSourceGroup}/${Z.sourceGroupId}/${o(h)()}`},{default:U(()=>[L(b(Z.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[Z.playbackUrl?(t(),s("div",wy,b(Z.playbackUrl),1)):(t(),s("div",hy,S[45]||(S[45]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),L("Publish channel to get the playback url ")])))]),p.value?(t(),s("td",_y)):(t(),s("td",ky,[e("button",{onClick:fe=>pe(Z.channelOutputId),class:"btn btn-outline-warning btn-sm"},S[46]||(S[46]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Sy)]))]),Z.playbackUrl?(t(),s("tr",Ty,[S[57]||(S[57]=e("td",null,null,-1)),e("td",My,[e("div",Cy,[S[48]||(S[48]=e("h5",null,[L("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",Iy,[e("div",xy,[e("button",{onClick:fe=>H(Z),class:"btn btn-outline-primary btn-sm"},S[47]||(S[47]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,Py)])])]),Z.playbackConfigurations.length>0?(t(),s("div",Vy,[e("table",Uy,[e("tbody",null,[(t(!0),s(B,null,j(Z.playbackConfigurations,(fe,Fe)=>(t(),s("tr",null,[e("td",null,b(Fe+1),1),e("td",null,b(fe.name),1),e("td",Oy,[fe.arn?C("",!0):(t(),s("button",{key:0,onClick:Ne=>He(fe.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},S[49]||(S[49]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Ay)),e("button",{onClick:Ne=>lt(fe.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},S[50]||(S[50]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Dy)])]))),256))])])])):C("",!0),Z.playbackConfiguration?(t(),s("div",Hy,[e("div",Ey,[e("div",Ly,[e("div",By,[e("div",Ny,[e("div",qy,[I(e("input",{"onUpdate:modelValue":fe=>Z.playbackConfiguration.name=fe,type:"text",class:oe([[Z.playbackConfiguration.arn?"is-valid":"is-invalid"],"form-control"]),id:"name",disabled:""},null,10,Ry),[[q,Z.playbackConfiguration.name]]),S[51]||(S[51]=e("label",{for:"name"}," Name ",-1))]),Z.playbackConfiguration.arn?C("",!0):(t(),s("button",{key:0,onClick:fe=>le.publishPlaybackConfiguration(Z),class:"btn btn-outline-primary btn-sm"},S[52]||(S[52]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")]),8,zy))])]),e("div",Fy,[e("div",jy,[e("div",Gy,[I(e("input",{"onUpdate:modelValue":fe=>Z.playbackConfiguration.hlsConfigurationManifestEndpointPrefix=fe,type:"text",class:"form-control",id:"playbackConfigurationhlsConfigurationManifestEndpointPrefix",disabled:""},null,8,Yy),[[q,Z.playbackConfiguration.hlsConfigurationManifestEndpointPrefix]]),S[53]||(S[53]=e("label",{for:"hlsConfigurationManifestEndpointPrefix"},"HLS Configuration Manifest Endpoint Prefix",-1))]),p.value&&Z.playbackConfiguration.hlsPlaylist?(t(),s("button",{key:0,onClick:fe=>nt(Z.playbackConfiguration.hlsPlaylist),class:"btn btn-outline-info"},S[54]||(S[54]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),L("View ")]),8,Wy)):C("",!0)])])]),S[56]||(S[56]=e("div",{class:"row row-cols-1 row-cols-sm-21"},[e("div",{class:"col"})],-1)),e("div",Ky,[e("div",Jy,[I(e("textarea",{"onUpdate:modelValue":fe=>Z.playbackConfiguration.adDecisionServerUrl=fe,class:"form-control",id:"playbackConfigurationadDecisionServerUrl",style:{height:"8rem"},disabled:""},null,8,Qy),[[q,Z.playbackConfiguration.adDecisionServerUrl]]),S[55]||(S[55]=e("label",{for:"playbackConfigurationadDecisionServerUrl"},"Ad Decision Server Url",-1))])])])])):C("",!0)])])):C("",!0)],64))),128))]),_:1},512),[[he,i.item.outputs.length>0]])])])])])],2),e("div",{class:oe([m("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Xy,[e("div",Zy,[e("table",e$,[S[72]||(S[72]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(B,null,j(i.item.programs,(Z,Me)=>(t(),s("tr",{key:Z.programId},[e("td",null,b(Me+1),1),e("td",null,[Z.arn?(t(),s("span",t$)):C("",!0),L(" "+b(Z.name)+" ",1),S[62]||(S[62]=e("br",null,null,-1)),e("div",null,[e("div",null,[S[59]||(S[59]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),L(b(o(F).moment(Z.dateScheduledStart).format("llll")),1)]),e("div",null,[S[60]||(S[60]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),L(b(o(F).moment(Z.dateScheduledEnd).format("llll")),1)])]),Z.relativeProgram?(t(),s(B,{key:1},[S[61]||(S[61]=L(" Relative Program: ")),e("span",s$,b(Z.relativeProgram.name),1)],64)):C("",!0)]),e("td",null,[Z.totalProgramTemplateDurationInMillis!==Z.durationInMillis?(t(),s("div",o$,[S[63]||(S[63]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),L(" "+b(o(F).moment.utc(Z.startOffsetMillis).format("HH:mm:ss"))+" - "+b(o(F).moment.utc(Z.endOffsetMillis).format("HH:mm:ss")),1)])):C("",!0),Z.adBreaksDurationInMillis?(t(),s("div",a$,[S[64]||(S[64]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),L(" Ads: "+b(o(F).moment.utc(Z.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):C("",!0),e("div",l$,[S[65]||(S[65]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),L(" Total: "+b(o(F).moment.utc(Z.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[L(b(Z.vodSource.video.title)+" ",1),S[66]||(S[66]=e("br",null,null,-1)),L(" ("+b(o(F).moment.utc(Z.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),s(B,null,j(Z.adBreaks,fe=>(t(),s("li",null,[fe.vodSource.arn?(t(),s("span",n$)):(t(),s("span",r$)),e("span",i$,b(o(F).moment.utc(fe.offsetMillis).format("HH:mm:ss")),1),D(de,{to:`${d.urlViewVodSource}/${fe.vodSource.vodSourceId}/${o(h)()}`},{default:U(()=>[L(b(fe.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",d$,[e("div",u$,[S[71]||(S[71]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",c$,[e("li",null,[e("button",{onClick:fe=>A(Z.programId),class:"dropdown-item"},S[67]||(S[67]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),L("Edit ")]),8,m$)]),Z.arn?(t(),s("li",f$,[e("button",{onClick:fe=>Ie(Z.programId),class:"dropdown-item"},S[68]||(S[68]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),L("Unpublish ")]),8,p$)])):(t(),s(B,{key:1},[e("li",null,[e("button",{onClick:fe=>_e(Z.programId),class:"dropdown-item"},S[69]||(S[69]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")]),8,v$)]),e("li",null,[e("button",{onClick:fe=>X(Z.programId),class:"dropdown-item"},S[70]||(S[70]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),L("Remove ")]),8,g$)])],64))])])])]))),128))]),_:1},512),[[he,i.item.programs.length>0]])])]),e("div",b$,[e("button",{onClick:S[18]||(S[18]=Z=>se()),class:"btn btn-outline-primary"},S[73]||(S[73]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Program ")]))])])],2),e("div",{class:oe([m("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",y$,[e("div",$$,[e("button",{onClick:S[19]||(S[19]=Z=>rt()),class:"btn btn-primary"},S[74]||(S[74]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),L("Preview ")]))]),p.value?(t(),s("div",w$)):C("",!0),e("div",h$,[(t(!0),s(B,null,j(i.item.outputs,Z=>(t(),s(B,null,[e("div",_$,[e("div",k$,[e("video",{id:`video-${Z.channelOutputId}`,class:"card-img-top object-fit-contain"},null,8,S$),e("div",T$,[e("h5",M$,[S[75]||(S[75]=L("MAIN: ")),e("b",null,b(Z.manifestName),1)])])])]),(t(!0),s(B,null,j(Z.playbackConfigurations,(Me,fe)=>(t(),s("div",C$,[e("div",I$,[e("video",{id:`video-${Me.channelOutputPlaybackConfigurationId}`,class:"card-img-top object-fit-contain"},null,8,x$),e("div",P$,[e("h5",V$,[L("#"+b(fe+1)+" (SSAI) ",1),e("b",null,b(Me.name),1)])])])]))),256))],64))),256))])])],2),e("div",{class:oe([m("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",U$,[S[81]||(S[81]=L(" Checklist ")),e("ul",null,[e("li",null,[i.item.fillerSlateSourceLocation.arn?(t(),s("span",O$)):(t(),s("span",A$)),S[76]||(S[76]=L(" Filler Slate Source Location "))]),e("li",null,[i.item.fillerSlateVodSource.arn?(t(),s("span",D$)):(t(),s("span",H$)),S[77]||(S[77]=L(" ni Filler Slate VOD Source "))]),e("li",null,[i.item.outputs.length>0?(t(),s("span",E$)):(t(),s("span",L$)),S[79]||(S[79]=L(" Outputs ")),e("ul",null,[e("li",null,[i.item.outputs.some(Z=>Z.playbackConfigurations.length>0)?(t(),s("span",B$)):(t(),s("span",N$)),S[78]||(S[78]=L(" Ad Insertion setup "))])])]),e("li",null,[i.item.programs.length>0?(t(),s("span",q$)):(t(),s("span",R$)),S[80]||(S[80]=L(" Programs "))])])])],2)])])):C("",!0)]),_:1},8,["errorMessage"]),D(h1,{ref_key:"modalAddProgram",ref:c,onRefresh:f},null,512),D(j1,{ref_key:"modalAddPlaybackConfiguration",ref:x,onRefresh:f},null,512),D(pb,{ref_key:"modalAddChannelOutput",ref:n,onRefresh:f},null,512),D(ot,{ref_key:"modalEditProgram",ref:O,onOnClose:f},null,512),D(Db,{ref_key:"modalEditFillerSlate",ref:a,onRefresh:f},null,512)])]),_:1})}}},F$={path:"/",component:Wo,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:ga},{path:"users/add",component:qa},{path:"users",component:Qa},{path:"users/view/:id",component:wl,props:!0},{path:"videos/add",component:Yl},{path:"videos/edit/:id",component:gn,props:!0},{path:"videos",component:Tn},{path:"videos/view/:id",component:Xn,props:!0},{path:"source-groups/add",component:or},{path:"source-groups/edit/:id",component:nr,props:!0},{path:"source-groups",component:vr},{path:"source-groups/view/:id",component:Ur,props:!0},{path:"source-locations/add",component:Br},{path:"source-locations/edit/:id",component:Rr,props:!0},{path:"source-locations",component:Qr},{path:"source-locations/view/:id",component:$i,props:!0},{path:"vod-sources/add",component:Gi},{path:"vod-sources/edit/:id",component:Ki,props:!0},{path:"vod-sources",component:nd},{path:"vod-sources/view/:id",component:fc,props:!0},{path:"channels/add",component:yp},{path:"channels/edit/:id",component:hp,props:!0},{path:"channels",component:xp},{path:"channels/schedule-programs/:id",component:bg,props:!0},{path:"channels/view/:id",component:z$,props:!0},{path:"program-templates/add",component:Qc},{path:"program-templates/edit/:id",component:Om,props:!0},{path:"program-templates",component:Fm},{path:"program-templates/view/:id",component:Yf,props:!0}]},at=mt({history:ft("/"),linkActiveClass:"active",routes:[{...lo},{path:"/administrator",redirect:"/"},{...F$}]}),j$={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const d=this,w=new pt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();w.on("onNotificationCreated",function(_){let y=_.content;_.notificationEntityClassText==="Deposit"&&(y+="<br/>",y+=`<a href="${d.urlViewDeposit}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="Withdraw"&&(y+="<br/>",y+=`<a href="${d.urlViewWithdraw}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="ManualModeOfPayment"&&(y+="<br/>",y+=`<a href="${d.urlViewManualModeOfPayment}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.iconClass;let z="secondary";switch(_.notificationType){case 1:z="success";break;case 3:z="info";break;case 3:z="success";break;case 4:z="info";break;case 5:z="warning";break;case 6:z="error";break}d.$toast[z](_.subject,y,{timeOut:1e4});const T=_.subject,k={body:y,icon:"/img/192x102.png"};new Notification(T,k)}),w.on("jobUpdated",function(_){d.$bus.$emit("event:job-updated",_)}),await w.start().then(function(){}).catch(function(_){})}}};function G$(d,u,w,_,y,z){return t(),s("div")}const Y$=ke(j$,[["render",G$],["__scopeId","data-v-5b4a9fa2"]]),W$={class:"navbar bg-light","data-bs-theme":"light"},K$={class:"container-md"},J$={class:"col-sm-auto"},Q$={class:"navbar-brand mb-0"},X$={class:"col-sm flex-fill"},Z$={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(d){return(u,w)=>(t(),ie(ue,null,{default:U(()=>[e("div",null,[e("nav",W$,[e("div",K$,[e("div",{class:oe([d.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",J$,[Ve(u.$slots,"title",{},()=>[e("h1",Q$,[e("i",{class:oe([d.pageIcon,"me-1"])},null,2),e("span",null,b(d.pageTitle),1)])])]),e("div",X$,[Ve(u.$slots,"default")])],2)])])])]),_:3}))}},ew={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},tw=["innerHTML"],sw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ow={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(u,w)=>(t(),ie(ue,null,{default:U(()=>[Ve(u.$slots,"default",{},()=>[d.errorMessage?(t(),s("div",ew,[w[0]||(w[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:d.errorMessage},null,8,tw)])):C("",!0),d.vuelidate&&d.vuelidate.$error?(t(),s("div",sw,[w[1]||(w[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(d.vuelidate.$errors,_=>(t(),s("li",{key:_.$uid},[_.$validator==="$each"?(t(),s(B,{key:0},[L(" Check errors in '"+b(_.$property)+"' ",1)],64)):(t(),s(B,{key:1},[L(b(_.$message),1)],64))]))),128))])])):C("",!0)])]),_:3}))}},aw={class:"mt-2 container-md"},lw={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(u,w)=>{const _=Q("PageMessages");return t(),ie(ue,null,{default:U(()=>[e("div",aw,[D(_,{errorMessage:d.errorMessage,vuelidate:d.vuelidate},null,8,["errorMessage","vuelidate"]),Ve(u.$slots,"default")])]),_:3})}}},nw={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const d=this;d.busy||(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveFirst(){const d=this;if(d.busy)return;d.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveLast(){const d=this;if(d.busy)return;const u=d.filter;u.pageIndex!==u.totalPages&&(document.activeElement&&document.activeElement.blur(),await d.search(u.totalPages))},async move(d){const u=this;if(u.busy)return;const w=u.filter,_=w.pageIndex+d;_>=0&&_<=w.totalPages&&(document.activeElement&&document.activeElement.blur(),await u.search(_))}}},rw={class:"mt-2"},iw={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},dw={key:0,class:"col-sm order-2 order-sm-1"},uw={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},cw={class:"me-1 fw-bold"},mw={class:"fw-bold"},fw={class:"ms-1"},pw={class:"col-sm order-1 order-sm-2"},vw={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},gw={key:0,class:"page-item"},bw={key:1,class:"page-item"},yw={key:2,class:"page-item"},$w={class:"page-item active"},ww={class:"page-link"},hw={key:3,class:"page-item"},_w={key:4,class:"page-item"},kw={key:5,class:"page-item"},Sw={key:1,class:"text-info font-weight-bold text-center"},Tw={key:0},Mw={key:1};function Cw(d,u,w,_,y,z){return t(),s("div",rw,[w.filter.items.length?(t(),s("div",iw,[w.showPerPage?(t(),s("div",dw,[e("div",uw,[e("div",null,[e("span",cw,b(w.filter.totalCount),1),u[8]||(u[8]=L("records in ")),e("span",mw,b(w.filter.totalPages),1),u[9]||(u[9]=L(" page(s) "))]),e("div",fw,[I(e("select",{"onUpdate:modelValue":u[0]||(u[0]=T=>w.filter.pageSize=T),onChange:u[1]||(u[1]=(...T)=>z.changePagination&&z.changePagination(...T)),class:"form-select form-select-sm me-1"},u[10]||(u[10]=[We('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ve,w.filter.pageSize]])]),u[11]||(u[11]=e("div",{class:"ms-1"},"per page",-1))])])):C("",!0),e("div",pw,[e("ul",vw,[w.filter.pageIndex!==1?(t(),s("li",gw,[e("button",{class:"page-link","aria-label":"Previous",onClick:u[2]||(u[2]=(...T)=>z.moveFirst&&z.moveFirst(...T))},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):C("",!0),w.filter.pageIndex>2?(t(),s("li",bw,[e("button",{class:"page-link",onClick:u[3]||(u[3]=T=>z.move(-2))},b(w.filter.pageIndex-2),1)])):C("",!0),w.filter.pageIndex>1?(t(),s("li",yw,[e("button",{class:"page-link",onClick:u[4]||(u[4]=T=>z.move(-1))},b(w.filter.pageIndex-1),1)])):C("",!0),e("li",$w,[e("span",ww,b(w.filter.pageIndex),1)]),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",hw,[e("button",{class:"page-link",onClick:u[5]||(u[5]=T=>z.move(1))},b(w.filter.pageIndex+1),1)])):C("",!0),w.filter.pageIndex<w.filter.totalPages-1?(t(),s("li",_w,[e("button",{class:"page-link",onClick:u[6]||(u[6]=T=>z.move(2))},b(w.filter.pageIndex+2),1)])):C("",!0),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",kw,[e("button",{class:"page-link","aria-label":"Next",onClick:u[7]||(u[7]=(...T)=>z.moveLast&&z.moveLast(...T))},u[13]||(u[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):C("",!0)])])])):(t(),s("div",Sw,[w.noRecords?(t(),s("div",Tw,b(w.noRecords),1)):(t(),s("div",Mw,"No record(s) found."))]))])}const Iw=ke(nw,[["render",Cw]]),xw={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let d=this;if(!d.enabled)return;let u=d.filter;u.sortField===d.field?u.sortOrder===0?u.sortField=null:u.sortOrder=u.sortOrder===0?1:0:(u.sortField=d.field,u.sortOrder=1),d.$emit("search")}}},Pw={class:"align-self-center"};function Vw(d,u,w,_,y,z){return t(),s("div",{onClick:u[0]||(u[0]=(...T)=>z.click&&z.click(...T)),class:"d-flex flex-row justify-content-start align-content-center",style:Xe({cursor:w.enabled?"pointer":""})},[Ve(d.$slots,"default"),e("span",Pw,[w.showSort?(t(),s("span",{key:0,class:oe([{"fa-sort text-gray-500":!z.currentSortField(),"fa-sort-up":z.currentSortField()&&z.sortUp(),"fa-sort-down":z.currentSortField()&&!z.sortUp()},"fas fa-fw mr-1"])},null,2)):C("",!0)])],4)}const Uw=ke(xw,[["render",Vw]]),Ow={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(d){const u=this;u.setSelected(d),u.$emit("onSelectedRow",d)}}},Aw={class:"table-responsive m-0"},Dw=["href"],Hw={key:1},Ew=["onClick"],Lw={class:"form-group row no-gutters"},Bw={class:"col-5 col-form-label"},Nw={class:"col align-self-center"},qw=["href"],Rw={key:1};function zw(d,u,w,_,y,z){return t(),s("div",null,[e("div",Aw,[e("table",{class:oe(["table table-hover d-none d-md-table card",w.tableCss])},[e("thead",null,[Ve(d.$slots,"header",{},()=>[u[0]||(u[0]=e("th",null,"#",-1)),(t(!0),s(B,null,j(w.header.columns,T=>(t(),s("th",null,b(T.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(B,null,j(w.items,(T,Y)=>Ve(d.$slots,"table-row",{key:`row1-${T[w.header.key]}`,item:T,index:Y},()=>[e("td",null,b(w.getRowNumber(Y)),1),(t(!0),s(B,null,j(w.header.columns,R=>(t(),s("td",null,[R.href?(t(),s("a",{key:0,href:R.href(T[w.header.key]),class:"font-weight-bold"},b(T[R.field]),9,Dw)):(t(),s("span",Hw,b(T[R.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:oe(["d-block d-md-none",w.rowCss])},[(t(!0),s(B,null,j(w.items,(T,Y)=>(t(),s("div",{key:`row2-${T[w.header.key]}`,onClick:R=>z.onSelectedRow(T),class:"border"},[e("div",{class:oe(["p-2",{"b-left":w.isSelected(T)}])},[Ve(d.$slots,"table-list",{item:T,index:Y},()=>[(t(!0),s(B,null,j(w.header.columns,R=>(t(),s("div",Lw,[e("label",Bw,b(R.title),1),e("div",Nw,[R.href?(t(),s("a",{key:0,href:R.href(T[w.header.key]),class:"font-weight-bold"},b(T[R.field]),9,qw)):(t(),s("span",Rw,b(T[R.field]),1))])]))),256))],!0)],2)],8,Ew))),128))],2)])}const Fw=ke(Ow,[["render",zw],["__scopeId","data-v-65929213"]]),Te=vt(bt);Te.use(gt());Te.use(at);Te.component("m-notification",Y$);Te.component("m-pagination",Iw);Te.component("sort-field",Uw);Te.component("table-list",Fw);Te.component("Toasts",Fo);Te.component("PageHeader",Z$);Te.component("PageMessages",ow);Te.component("PageBody",lw);const jw="https://sonyfastpoc.azurewebsites.net/",Gw="Arcadian-Sony FAST",Yw=void 0,Ww={API_URL:jw,appName:Gw,tenantId:Yw};Te.provide("$config",Ww);Te.provide("$bus",Re);Te.mount("#app");
