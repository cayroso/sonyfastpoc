import{o as t,c as ce,r as ee,h as Qe,u as Xe,d as Ze,a as re,e as qe,b as s,f as e,g as N,w as q,i as J,t as u,F as O,j as L,k as A,l as de,m as Fe,n as Se,p as et,q as Be,s as tt,P as st,v as me,x as se,y as oe,z as be,T as fe,A as o,B as ct,C as R,D as Z,E as mt,G as le,H as ot,I as ke,J as $e,K as He,L as ue,M as Ue,N as Te,O as Ee,Q as he,R as Ae,S as Pe,U as Je,V as ft,W as pt,X as vt,Y as Oe,Z as gt,_ as bt}from"./vendor-BfSyRqtS-chunk.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))x(h);new MutationObserver(h=>{for(const P of h)if(P.type==="childList")for(const M of P.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&x(M)}).observe(document,{childList:!0,subtree:!0});function w(h){const P={};return h.integrity&&(P.integrity=h.integrity),h.referrerPolicy&&(P.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?P.credentials="include":h.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function x(h){if(h.ep)return;h.ep=!0;const P=w(h);fetch(h.href,P)}})();const yt={__name:"App",setup(n){return(f,w)=>{const x=ee("router-view");return t(),ce(x)}}};function ze(){const n=Q=>{var I;let D=Q,U=D.response,c="";if(!D.response)return Q.message;if(U.status===500){if(typeof U.data=="string")return U.data;if(U.data.content)return U.data.content;if(U.data.detail)return U.data.detail}if(U.status===401){const g=`${window.location.pathname}${window.location.search}`;c=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(g)}`}'>here</a> to login.`}else if(U.status===400){let g=D.response.data.errors;c=D.response.data.title||D.response.data,g&&(c+="<ul>");for(let z in g){let X=g[z];for(let i in g[z]){let b=X[i];c+=`<li>${b}</li>`}}g&&(c+="</ul>"),c||(c=D.message),c&&c.content&&(c=c.content)}else U.status===404?c=((I=U==null?void 0:U.data)==null?void 0:I.title)||(U==null?void 0:U.data)||"Record not found.":typeof U.data=="string"&&(c=D.message,c===""&&(c=`Error <b>Http ${U.status}</b>.<br/>Please contact the System Administrator.`));return c},f=Q=>JSON.parse(JSON.stringify(Q)),w=Q=>{if(typeof Q!="number")return Q;var D=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return D.format(Q)},x=(Q,D,U)=>{const I={value:D,expiry:new Date().getTime()+U};debugger;localStorage.setItem(Q,JSON.stringify(I))},h=Q=>{debugger;const D=localStorage.getItem(Q);if(!D)return null;const U=JSON.parse(D);return new Date().getTime()>U.expiry?(localStorage.removeItem(Q),null):U.value},P="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:n,clone:f,toCurrency:w,moment:Qe,localStorageSetWithExpiry:x,localStorageGetWithExpiry:h,setPageTab:(Q,D)=>{var U=localStorage.getItem(P);U?U=JSON.parse(U):U={},U[Q]=D,localStorage.setItem(P,JSON.stringify(U))},getPageTab:Q=>{var D=localStorage.getItem(P);return D?D=JSON.parse(D):D={},D[Q]},createHlsStream:(Q,D,U)=>{var c=new Hls({autoStartLoad:U??!0});return c.on(Hls.Events.MEDIA_ATTACHED,function(){}),c.on(Hls.Events.MANIFEST_PARSED,function(I,g){console.log("manifest loaded, found "+g.levels.length+" quality level")}),c.on(Hls.Events.ERROR,function(I,g){if(g.fatal)switch(g.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),c.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",g);break;default:c.destroy();break}}),c.loadSource(D),c.attachMedia(Q),c},isValidTime:Q=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(Q),generateReturnUrl:()=>{const Q=Xe();let D=Q.path;return Q.query.returnUrl&&(D=Q.query.returnUrl),D=`?returnUrl=${encodeURIComponent(D)}`,D}}}const $t=ze(),at=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(at.exp*1e3),ht=wt.isAfter()?at:null,ge=Ze({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(n){try{this.user=n,localStorage.setItem("user",JSON.stringify(n))}catch(f){debugger;alert(f)}},logout(){this.user=null,localStorage.removeItem("user"),rt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),_t="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(_t));const kt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Re=kt,lt=Ze("msal",()=>{const n=re({auth:{clientId:Re.VITE_AUTH_CLIENT_ID,authority:Re.VITE_AUTH_AUTHORITY_URL,redirectUri:Re.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),f=re("");return{msalConfig:n,accessToken:f,setAccessToken:x=>{f.value=x}}}),Ge={$on:(...n)=>qe.on(...n),$once:(...n)=>qe.once(...n),$off:(...n)=>qe.off(...n),$emit:(...n)=>qe.emit(...n)};function St(){const n=(P,M,G,F)=>{Ge.$emit("toast-message",{title:P,message:M,type:G,options:F})};return{success:(P,M,G={})=>{n(P,M,"success",G)},warning:(P,M,G={})=>{n(P,M,"warning",G)},info:(P,M,G={})=>{n(P,M,"info",G)},error:(P,M,G={})=>{n(P,M,"danger",G)}}}const Me=(n,f)=>{const w=n.__vccOpts||n;for(const[x,h]of f)w[x]=h;return w},Tt={data(){return{notifications:[],messages:[]}},async created(){const n=this;n.$bus.$on("event:notification-received",()=>{n.getUnreadNotifications()}),n.$bus.$on("event:notification-marked-as-read",f=>{n.notifications.some(x=>x.notificationId===f)&&n.getUnreadNotifications()}),n.$bus.$on("event:notification-removed",f=>{n.notifications.some(x=>x.notificationId===f)&&n.getUnreadNotifications()}),n.$bus.$on("event:chat-marked-as-read",n.onChatMarkedAsRead),n.$bus.$on("event:chat-message-received",n.onChatMessageReceived)},async mounted(){const n=this,f=n.$refs.notifications,w=n.$refs.messages;f&&f.offsetParent,w&&w.offsetParent&&await n.getUnreadChats()},methods:{async logout(){const n=this;try{await n.$util.axios.post("/api/accounts/logout").then(f=>{const w="/";n.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){n.$util.href(w)}})})}catch(f){n.$util.handleError(f)}},async onChatMarkedAsRead(n){let f=this,w=f.messages.find(x=>x.chatId===n);if(w){let x=f.messages.indexOf(w);f.messages.splice(x,1)}},async onChatMessageReceived(n){let f=this,w=f.messages.find(h=>h.chatId===n.chatId);if(w)w.lastMessageText=n.content;else{var x={chatId:n.chatId,isRead:!1,lastDateSent:n.dateSent,lastMessageText:n.content,senderFirstLastName:`${n.sender.firstName} ${n.sender.lastName}`,senderInitials:n.sender.initials,senderProfilePicture32:n.sender.profilePicture32,urlPicture:f.$util.getProfilePictureUrl(n.sender.profilePicture32,n.sender.initials)};f.messages.push(x)}},async getUnreadNotifications(){const n=this;try{await n.$util.axios.get("api/accounts/unread-notifications").then(f=>{n.notifications=f.data})}catch(f){n.$util.handleError(f)}},async getUnreadChats(){const n=this;try{await n.$util.axios.get("api/accounts/unread-chats").then(f=>{n.messages=f.data;for(let w in n.messages){let x=n.messages[w];n.$set(x,"urlPicture",n.$util.getProfilePictureUrl(x.senderProfilePicture32,x.senderInitials))}})}catch(f){n.$util.handleError(f)}},viewNotification(n){this.$bus.$emit("event:open-notification",n)},viewChat(n){this.$bus.$emit("event:open-chat",n)},showHiddenElements(){let f=this.$el.getElementsByClassName("initialHidden");for(let w=0;w<f.length;w++)f[w].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const f=ge().user;return{user:f,username:f?f.nameFull:"Guest"}},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1},async openModalSearchUser747(n){this.$refs.refModalSearchUser747.open(n)}}},It={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},xt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Vt={class:"navbar-nav"},Pt={class:"nav-item dropdown"},Ot={class:"dropdown-menu","aria-labelledby":"dropdown01"},At={class:"nav-item dropdown"},Ht={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ut={class:"navbar-nav ms-auto"},Dt={class:"nav-item dropdown"},Lt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},qt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Bt={class:"text-capitalize"};function Nt(n,f,w,x,h,P){const M=ee("router-link");return t(),s("nav",It,[e("div",Ct,[N(M,{class:"navbar-brand",to:"/member"},{default:q(()=>[J(u(w.appName),1)]),_:1}),f[14]||(f[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",xt,[e("ul",Vt,[e("li",Pt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ot,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/announcements"},{default:q(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),J(" Announcements ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/posts"},{default:q(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),J(" Posts ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/yellow-pages"},{default:q(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),J(" Yellow Pages ")])),_:1})])])]),e("li",At,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ht,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:q(()=>f[4]||(f[4]=[J(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Ut,[e("li",Dt,[e("a",Lt,[e("span",null,[f[6]||(f[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,u(h.username),1)])]),e("ul",qt,[f[9]||(f[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),f[10]||(f[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),f[11]||(f[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),f[12]||(f[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),h.user&&h.user.roles.length>1?(t(!0),s(O,{key:0},L(h.user.roles,G=>(t(),s("li",null,[N(M,{to:`/${G.toLowerCase()}`,class:"dropdown-item"},{default:q(()=>[e("span",Bt,u(G),1)]),_:2},1032,["to"])]))),256)):A("",!0),e("li",null,[N(M,{to:"/",class:"dropdown-item"},{default:q(()=>f[7]||(f[7]=[J(" Main ")])),_:1})]),f[13]||(f[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[N(M,{to:"/account/logout",class:"dropdown-item"},{default:q(()=>f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),J("Logout ")])),_:1})])])])])])])])}const Rt=Me(Mt,[["render",Nt]]),Ft={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const n=document.getElementById("top");n&&n.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let n=this;if(!n.$el.getElementsByClassName)return;let f=n.$el.getElementsByClassName("initialHidden");for(let w=0;w<f.length;w++){let x=f[w];x.classList.remove("invisible"),x.classList.remove("d-none")}},close(){const n=this,f=document.referrer.toLowerCase();f&&f.includes("/account/login")?n.$router.go(-2):n.$router.go(-1)},toggle(n){const f=this;f.toggles[n]=!f.toggles[n],localStorage.setItem(f.togglesKey,JSON.stringify(f.toggles))}}},zt={mixins:[Ft],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1}}},Gt={class:"footer sticky-bottom"},jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(n,f,w,x,h,P){const M=ee("router-link");return t(),s("footer",Gt,[e("div",jt,[e("div",Yt,[e("span",Wt,"©"+u(h.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/announcements"},{default:q(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),J(" Announcements ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/posts"},{default:q(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),J(" Posts ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/yellow-pages"},{default:q(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),J(" Yellow Pages ")])),_:1})])])]),e("li",es,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:q(()=>f[4]||(f[4]=[J(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Me(zt,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const f=this.$config;document.title=`Account - ${f.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(n,f,w,x,h,P){const M=ee("Toasts"),G=ee("router-view");return t(),s("div",ls,[N(M),N(G,{class:"flex-grow-1 mb-2"})])}const rs=Me(as,[["render",ns]]),is={__name:"index",setup(n){return ge().user,de(()=>{}),(w,x)=>(t(),s("div",null,x[0]||(x[0]=[Fe('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){Se("$config");const n=us.VITE_API_URL,f=et.create({baseURL:n});return Be.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),f.interceptors.request.use(w=>{Be.start();const{user:x}=ge();return x&&x.token&&(w.headers?(w.headers.Authorization||(w.headers.Authorization=`Bearer ${x.token}`),w.headers["Access-Control-Allow-Origin"]||(w.headers["Access-Control-Allow-Origin"]="*")):w.headers={Authorization:`Bearer ${x.token}`,"Access-Control-Allow-Origin":"*"}),w}),f.interceptors.response.use(w=>(Be.done(),w),w=>{throw Be.done(),w}),f}function ve(n){if(!n.appTitle)throw Error("App Title is required.");if(!n.pageTitle)throw Error("Page Title is required.");const f=Xe(),w=tt(),x=cs(),h=ze(),P=St(),G=ge().user,F=()=>G&&G.roles&&G.roles.includes("System"),V=()=>G&&G.roles&&G.roles.includes("administrator"),j=()=>G&&G.roles&&G.roles.includes("employee"),Q=()=>G&&G.roles&&G.roles.includes("Member"),D=async()=>{const W=document.referrer.toLowerCase();W&&W.includes("/accounts/login")?await w.go(-2):await w.go(-1)},U=W=>{var v;const y=f.path,k=(v=f.query)==null?void 0:v.returnUrl;k&&!(y.startsWith(k)||k.startsWith(y))?w.push(k):w.push(W)},c=n.appTitle,I=n.pageTitle,g=re(!1),z=re(new Map),X=re(""),i=re(""),b=re("");return{appTitle:c,pageTitle:I,busy:g,validations:z,infoMessage:X,warningMessage:i,errorMessage:b,router:w,route:f,axios:x,utils:h,toasts:P,close:D,closeWithReturnUrl:U,generateReturnUrl:h.generateReturnUrl,security:{userId:G?G.userId:"",isSystem:F(),isAdministrator:V(),isEmployee:j(),isMember:Q()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(n){Se("$config");const f=ge(),w=lt(),x=new st(w.msalConfig),h=me({username:"",password:""}),P={username:{required:se.withMessage("Username is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0}},M=be(P,h),{appTitle:G,pageTitle:F,busy:V,isDirty:j,validations:Q,infoMessage:D,warningMessage:U,errorMessage:c,router:I,route:g,axios:z,utils:X,toasts:i,close:b,security:W}=ve({appTitle:"Sony FAST POC",pageTitle:"Sign On"});de(async()=>{await x.initialize()});const y=async()=>{await x.loginPopup({}).then(()=>{debugger;const _=x.getAllAccounts()[0];x.setActiveAccount(_)}).catch(v=>{console.error(`error during authentication: ${v}`)});var k={account:x.getActiveAccount(),scopes:[]};await x.acquireTokenSilent(k).then(v=>{debugger;const S=v.account.idToken,d=ct(S);if(d.token=v.accessToken,console.log(v),!d.roles){debugger;d.roles=[]}d.userId=d.sub,f.login(d);var r=g.query.returnUrl;r?I.push(decodeURIComponent(r)):d.roles.length===1?I.push(`/${d.roles[0].toLowerCase()}`):I.push("/")}).catch(v=>{console.error(`error during acquireTokenSilent: ${v}`)})};return(k,v)=>(t(),ce(fe,null,{default:q(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,u(o(G)),1),e("div",null,[o(c)?(t(),s("div",vs,[v[1]||(v[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(c)},null,8,gs)])):A("",!0),o(M).$error?(t(),s("div",bs,[v[2]||(v[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(M).$errors,_=>(t(),s("li",{key:_.$uid},u(_.$message),1))),128))])])):A("",!0)]),e("button",{onClick:v[0]||(v[0]=_=>y()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Me(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(n){const f=ge();return f.user,de(async()=>{f.logoutWithRedirect()}),(w,x)=>(t(),s("div",ws,x[0]||(x[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[J(" You have logged out from HOA MS."),e("br"),J(" Click "),e("a",{href:"/",class:"d-inline"},"here"),J(" to go back to home page. ")])],-1)])))}},_s={class:"h-100 d-flex align-items-center justify-content-center"},ks={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],xs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vs={class:"row row-cols-1 row-cols-sm-3"},Ps={class:"col-sm"},Os={class:"form-group"},As={key:0,class:"d-block invalid-feedback"},Hs={class:"col-sm"},Us={class:"form-group"},Ds={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},Fs={key:0,class:"d-block invalid-feedback"},zs={class:"col"},Gs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Ys={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(n){const f=me({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),w=(W,y)=>W===y.password,x={firstName:{required:se.withMessage("First name is required.",oe),$autoDirty:!0,$lazy:!0},middleName:{required:se.withMessage("Middle name is required.",oe),$autoDirty:!0,$lazy:!0},lastName:{required:se.withMessage("Last name is required.",oe),$autoDirty:!0,$lazy:!0},phoneNumber:{required:se.withMessage("Phone number is required.",oe),$autoDirty:!0,$lazy:!0},email:{required:se.withMessage("Email is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0},confirmPassword:{required:se.withMessage("Confirm password is required.",oe),confirmSamePassword:se.withMessage("Password and confirm passwrod are different.",w),$autoDirty:!0,$lazy:!0}},h=be(x,f),{appTitle:P,pageTitle:M,busy:G,isDirty:F,validations:V,infoMessage:j,warningMessage:Q,errorMessage:D,router:U,axios:c,utils:I,toasts:g,close:z,security:X}=ve({appTitle:"HOA MS",pageTitle:"Register User"}),i=Se("$config");de(()=>{});const b=async()=>{const W=f;if(G.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}D.value=null;try{G.value=!0;const k=I.clone(W);k.tenantid=i.tenantId;debugger;await c({method:"post",url:"/api/v1/accounts/register",data:k}).then(v=>{g.success("Register","Registration was successfull.",{onClose:async()=>{await U.push("/accounts/login")}})})}catch(k){D.value=I.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{G.value=!1}};return(W,y)=>{const k=ee("router-link");return t(),ce(fe,null,{default:q(()=>[e("div",_s,[e("div",ks,[e("h4",Ss,u(o(M)),1),e("div",Ts,[e("div",Ms,[o(D)?(t(),s("div",Is,[y[8]||(y[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(D)},null,8,Cs)])):A("",!0),o(h).$error?(t(),s("div",xs,[y[9]||(y[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(h).$errors,v=>(t(),s("li",{key:v.$uid},u(v.$message),1))),128))])])):A("",!0)]),e("div",Vs,[e("div",Ps,[e("div",Os,[y[10]||(y[10]=e("label",null,"First Name",-1)),R(e("input",{"onUpdate:modelValue":y[0]||(y[0]=v=>f.firstName=v),type:"text",class:"form-control"},null,512),[[Z,f.firstName]]),o(h).firstName.$error?(t(),s("div",As,[(t(!0),s(O,null,L(o(h).firstName.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])]),e("div",Hs,[e("div",Us,[y[11]||(y[11]=e("label",null,"Middle Name",-1)),R(e("input",{"onUpdate:modelValue":y[1]||(y[1]=v=>f.middleName=v),type:"text",class:"form-control"},null,512),[[Z,f.middleName]]),o(h).middleName.$error?(t(),s("div",Ds,[(t(!0),s(O,null,L(o(h).middleName.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])]),e("div",Ls,[e("div",Es,[y[12]||(y[12]=e("label",null,"Last Name",-1)),R(e("input",{"onUpdate:modelValue":y[2]||(y[2]=v=>f.lastName=v),type:"text",class:"form-control"},null,512),[[Z,f.lastName]]),o(h).lastName.$error?(t(),s("div",qs,[(t(!0),s(O,null,L(o(h).lastName.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])])]),e("div",Bs,[e("div",Ns,[e("div",Rs,[y[13]||(y[13]=e("label",null,"Phone Number",-1)),R(e("input",{"onUpdate:modelValue":y[3]||(y[3]=v=>f.phoneNumber=v),type:"tel",class:"form-control"},null,512),[[Z,f.phoneNumber]]),o(h).phoneNumber.$error?(t(),s("div",Fs,[(t(!0),s(O,null,L(o(h).phoneNumber.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])]),e("div",zs,[e("div",Gs,[y[14]||(y[14]=e("label",null,"Email",-1)),R(e("input",{"onUpdate:modelValue":y[4]||(y[4]=v=>f.email=v),type:"email",class:"form-control"},null,512),[[Z,f.email]]),o(h).email.$error?(t(),s("div",js,[(t(!0),s(O,null,L(o(h).email.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])])]),e("div",Ys,[e("div",Ws,[e("div",Ks,[y[15]||(y[15]=e("label",null,"Password",-1)),R(e("input",{"onUpdate:modelValue":y[5]||(y[5]=v=>f.password=v),type:"password",class:"form-control"},null,512),[[Z,f.password]]),o(h).password.$error?(t(),s("div",Js,[(t(!0),s(O,null,L(o(h).password.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])]),e("div",Qs,[e("div",Xs,[y[16]||(y[16]=e("label",null,"Confirm Password",-1)),R(e("input",{"onUpdate:modelValue":y[6]||(y[6]=v=>f.confirmPassword=v),type:"password",class:"form-control"},null,512),[[Z,f.confirmPassword]]),o(h).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(O,null,L(o(h).confirmPassword.$errors,v=>(t(),s("div",{key:v.$uid},u(v.$message),1))),128))])):A("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:y[7]||(y[7]=v=>b()),class:"btn btn-primary w-100"},y[17]||(y[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),J("Register ")]),8,so)]),e("div",oo,[N(k,{to:"/",class:"btn btn-outline-primary w-100"},{default:q(()=>y[18]||(y[18]=[J("Home")])),_:1})]),e("div",ao,[N(k,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:q(()=>y[19]||(y[19]=[J("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function je(){const n=tt(),f=F=>window.location.href.indexOf(F)>-1,w=F=>localStorage.getItem("data-bs-theme")||F,x=F=>{document.documentElement.setAttribute("data-bs-theme",F),localStorage.setItem("data-bs-theme",F)},h=async()=>await et.get("https://bootswatch.com/api/5.json").then(F=>F.data),P=F=>{const V=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");V&&F?(V.setAttribute("href",F),localStorage.setItem("bootswatch-theme",F)):alert("cannot query css link")},M=F=>{G(),n.push(F)},G=()=>{if(screen.width<576){const V=document.getElementById("navbarCollapse");if(V){const j=mt.getInstance(V);j&&j.hide()}}};return{isActive:f,getCurrentBsTheme:w,changeBsTheme:x,getBootswatch:h,changeTheme:P,navigate:M,collapseNavbar:G}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],_o={class:"nav-item dropdown"},ko={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},xo={key:1},Vo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(n){const f=lt(),{isActive:w,getCurrentBsTheme:x,changeBsTheme:h,getBootswatch:P,changeTheme:M,navigate:G,collapseNavbar:F}=je(),V=ge(),j=V.user,Q=me({user:j,username:j?j.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});de(async()=>{const I=Q;I.bootswatch=await P();const g=x(I.bsTheme);debugger;g&&(I.bsTheme=g,h(I.bsTheme));const z=localStorage.getItem("bootswatch-theme");z&&(I.currentTheme=z,M(z))});const D=I=>{M(I),Q.currentTheme=I,F()},U=I=>{h(I),Q.bsTheme=I,F()},c=async()=>{V.logoutWithRedirect();const I=new st(f.msalConfig);await I.initialize();const g={mainWindowRedirectUri:"/"};await I.logoutPopup(g)};return(I,g)=>{const z=ee("router-link");return t(),ce(fe,null,{default:q(()=>[e("nav",ro,[e("div",io,[N(z,{class:"navbar-brand",to:"/administrator"},{default:q(()=>[J(u(n.appName),1)]),_:1}),g[18]||(g[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[N(z,{to:"/videos",onClick:o(F),class:"nav-link"},{default:q(()=>g[3]||(g[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[g[6]||(g[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[N(z,{to:"/source-groups",onClick:o(F),class:"dropdown-item"},{default:q(()=>g[4]||(g[4]=[J(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[N(z,{to:"/source-locations",onClick:o(F),class:"dropdown-item"},{default:q(()=>g[5]||(g[5]=[J(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[N(z,{to:"/vod-sources",onClick:o(F),class:"nav-link"},{default:q(()=>g[7]||(g[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[g[10]||(g[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[N(z,{to:"/program-templates",onClick:o(F),class:"dropdown-item"},{default:q(()=>g[8]||(g[8]=[J(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[N(z,{to:"/channels",onClick:o(F),class:"dropdown-item"},{default:q(()=>g[9]||(g[9]=[J(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[g[14]||(g[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[Q.bsTheme==="dark"?(t(),s("button",{key:0,onClick:g[0]||(g[0]=X=>U("light")),class:"dropdown-item"},g[11]||(g[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Dark Mode ")]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=X=>U("dark")),class:"dropdown-item"},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Light Mode ")])))]),g[13]||(g[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,L(Q.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:i=>D(X.cssCdn),class:le(["dropdown-item",{active:Q.currentTheme===X.cssCdn}])},u(X.name),11,ho)]))),256))])]),e("li",_o,[e("a",ko,[e("span",null,[g[15]||(g[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(j)?(t(),s("span",To,u(o(j).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Io,[o(j)?(t(),s("li",Co,[e("button",{onClick:g[2]||(g[2]=X=>c()),class:"dropdown-item"},g[16]||(g[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),J("Logout ")]))])):(t(),s("li",xo,[N(z,{to:"/accounts/login",class:"dropdown-item"},{default:q(()=>g[17]||(g[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),J("Login ")])),_:1})]))])])])])])])]),_:1})}}},Po={id:"sideNav",class:"collapse collapse-horizontal show"},Oo={class:"text-bg-dark min-vh-100 overflow-y-auto"},Ao={class:"navbar bg-primary bg-gradient shadow","data-bs-theme":"dark"},Ho={class:"navbar-brand me-0 mb-1 px-2"},Uo={class:"d-none d-sm-inline"},Do={class:"nav nav-pills flex-column mb-auto px-1"},Lo={class:"nav-item mt-3"},Eo={class:"nav-item"},qo={class:"nav-item"},Bo={class:"nav-item"},No={class:"nav-item"},Ro={class:"nav-item"},Fo={class:"nav-item dropdown"},zo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Go=["onClick"],jo={key:0,class:"fas fa-fw fa-angle-double-left"},Yo={key:1,class:"text-expanded fas fa-fw fa-angle-double-right"},Wo={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(n){const{isActive:f,getCurrentBsTheme:w,changeBsTheme:x,getBootswatch:h,changeTheme:P,navigate:M,collapseNavbar:G}=je(),F=me({bsTheme:"dark",currentTheme:"",bootswatch:{}});de(async()=>{const I=F;I.bootswatch=await h();const g=w(I.bsTheme);g&&(I.bsTheme=g,x(I.bsTheme));const z=localStorage.getItem("bootswatch-theme");z&&(I.currentTheme=z,P(z)),D();const X=document.getElementById("sideNav");X&&(Q.value?X.classList.add("show"):X.classList.remove("show"))});const V=I=>{P(I),F.currentTheme=I,G()},j=I=>{x(I),F.bsTheme=I,G()},Q=re(!0),D=()=>{const I=localStorage.getItem("show-sideNav");Q.value=I==="true"},U=()=>{localStorage.setItem("show-sideNav",Q.value)},c=()=>{Q.value=!Q.value,U()};return(I,g)=>{const z=ee("router-link");return t(),s("div",null,[e("div",Po,[e("div",Oo,[e("nav",Ao,[N(z,{to:"/",class:"text-decoration-none w-100 text-center"},{default:q(()=>[e("h1",Ho,[g[2]||(g[2]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Uo,u(n.appName),1)])]),_:1})]),e("ul",Do,[e("li",Lo,[N(z,{to:"/videos",onClick:o(G),class:"nav-link"},{default:q(()=>g[3]||(g[3]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)])),_:1},8,["onClick"])]),e("li",Eo,[N(z,{to:"/source-groups",onClick:o(G),class:"nav-link"},{default:q(()=>g[4]||(g[4]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)])),_:1},8,["onClick"])]),e("li",qo,[N(z,{to:"/source-locations",onClick:o(G),class:"nav-link"},{default:q(()=>g[5]||(g[5]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)])),_:1},8,["onClick"])]),e("li",Bo,[N(z,{to:"/vod-sources",onClick:o(G),class:"nav-link"},{default:q(()=>g[6]||(g[6]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VODs",-1)])),_:1},8,["onClick"])]),e("li",No,[N(z,{to:"/program-templates",onClick:o(G),class:"nav-link"},{default:q(()=>g[7]||(g[7]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)])),_:1},8,["onClick"])]),e("li",Ro,[N(z,{to:"/channels",onClick:o(G),class:"nav-link"},{default:q(()=>g[8]||(g[8]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)])),_:1},8,["onClick"])]),e("li",Fo,[g[12]||(g[12]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",zo,[e("li",null,[F.bsTheme==="dark"?(t(),s("button",{key:0,onClick:g[0]||(g[0]=X=>j("light")),class:"dropdown-item"},g[9]||(g[9]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Dark Mode ")]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=X=>j("dark")),class:"dropdown-item"},g[10]||(g[10]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Light Mode ")])))]),g[11]||(g[11]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,L(F.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:i=>V(X.cssCdn),class:le(["dropdown-item",{active:F.currentTheme===X.cssCdn}])},u(X.name),11,Go)]))),256))])])])])]),e("button",{id:"sideNavToggler",onClick:c,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"1.75rem",height:"1.75rem"}},[Q.value?(t(),s("span",jo)):(t(),s("span",Yo))])])}}},Ko={class:"footer sticky-bottom"},Jo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},Qo={class:"container-md"},Xo={class:"navbar-text small p-0"},Zo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(n){je();const f=Se("$config"),x=ge().user;let P=new Date().getFullYear();const M=me({user:x,username:x?x.nameFull:"Guest",copyright:`2020-${P} ${f.appName}`});return de(async()=>{}),(G,F)=>(t(),s("footer",Ko,[e("div",Jo,[e("div",Qo,[e("span",Xo,"©"+u(M.copyright),1)])])]))}},ea={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ge.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(n){n.message&&this.addMessage(n.title,n.message,n.type,n.options)},async addMessage(n,f,w,x={}){var h={id:this.count++,title:n,message:f,type:w,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};h=Object.assign({},h,x),this.messages.unshift(h),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),h.timeOut>0&&await this.startTimeout(h)},async startTimeout(n,f=0){const w=this,x=performance.now(),h=async()=>{n.animationFrame=requestAnimationFrame(async P=>{const M=P+f-x;if(!w.exists(n)||n.paused){cancelAnimationFrame(n.animationFrame);return}else if(M<n.timeOut){const G=M/n.timeOut;n.progress=G,await h()}else{n.progress=1,cancelAnimationFrame(n.animationFrame),w.remove(n);return}})};await h()},pauseProgress(n){n.timeOut<=0||(n.paused=!0)},async resumeProgress(n){n.timeOut<=0||(n.paused=!1,await this.startTimeout(n,n.timeOut*n.progress))},getCurrentProgress(n){return Math.round(n.progress*100)===100?100:n.progress*100},getIconClass(n){const f=n.type;let w="";switch(f){case"success":w="fas fa-fw fa-circle-check";break;case"info":w="fas fa-fw fa-circle-info";break;case"warning":w="fas fa-fw fa-circle-exclamation";break;case"danger":w="fas fa-fw fa-triangle-exclamation";break}let x=w;return n.rtl?"icon-right "+x:"icon-left "+x},async remove(n){const f=this.messages.findIndex(w=>w.id===n.id);this.messages.splice(f,1),typeof n.onClose=="function"&&await n.onClose()},exists(n){return this.messages.findIndex(w=>w.id===n.id)!==-1}}},ta={"aria-live":"polite","aria-atomic":"true",class:"position-static"},sa=["onMouseover","onMouseout"],oa={class:"me-auto text-white"},aa=["onClick"],la={class:"toast-body"},na=["innerHTML"],ra={key:0,class:"progress m-1",style:{height:"4px"}};function ia(n,f,w,x,h,P){return t(),ce(fe,null,{default:q(()=>[e("div",ta,[N(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:q(()=>[(t(!0),s(O,null,L(h.messages,M=>(t(),s("div",{key:M.id,class:le(["toast show mb-2 ms-auto",`border-${M.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:G=>P.pauseProgress(M),onMouseout:G=>P.resumeProgress(M)},[e("div",{class:le(["toast-header",`bg-${M.type}`])},[e("strong",oa,[e("i",{class:le([P.getIconClass(M),"me-1"])},null,2),J(u(M.title),1)]),M.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:G=>P.remove(M)},f[0]||(f[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,aa)):A("",!0)],2),e("div",la,[e("div",{innerHTML:M.message},null,8,na)]),M.timeOut>0&&M.showProgress?(t(),s("div",ra,[e("div",{class:le(`bg-${M.type}`),style:ot({width:P.getCurrentProgress(M)+"%"})},null,6)])):A("",!0)],42,sa))),128))]),_:1})])]),_:1})}const da=Me(ea,[["render",ia],["__scopeId","data-v-5272bd9a"]]),ua={name:"AdminLayout",components:{TopNav:Vo,SideNav:Wo,BottomNav:Zo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},ca={class:"d-flex flex-row flex-nowrap vh-100"};function ma(n,f,w,x,h,P){const M=ee("Toasts"),G=ee("SideNav"),F=ee("router-view");return t(),s("div",ca,[N(M),N(G),N(F,{class:"d-flex flex-column w-100 h-100"})])}const fa=Me(ua,[["render",ma]]),pa={class:"mt-2 container-md overflow-y-auto"},va={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ga=["innerHTML"],ba={class:"row gx-2 mb-3"},ya={class:"col-md-4"},$a=["id"],wa={class:"col-md-8 overflow-x-auto"},ha={class:"d-flex flex-column align-items-start"},_a=["src"],ka={class:""},Sa={class:"d-flex flex-row"},Ta={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Ma={class:"text-center"},Ia=["src"],Ca={class:"text-end"},xa={class:"text-wrap text-truncate"},Va={class:"overflow-y-auto"},Pa={class:"badge bg-info me-2"},Oa={key:0,class:"badge bg-warning mb-1"},Aa={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,isDirty:h,validations:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,generateReturnUrl:c,security:I}=ve({appTitle:"ARC AIO",pageTitle:"Dashboard"});Se("$config"),ge().user;const z=me({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),de(async()=>{await b()});const X=async()=>{const k=z;if(!x.value)try{x.value=!0;const v="/api/v1/channels/epg/";k.item=[],await j.get(v).then(_=>{k.item=_.data}),k.item.forEach(_=>{W(_)})}catch(v){F.value=Q.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{x.value=!1}},i=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await j.get("/api/v1/channels/reset/").then(_=>{D.success("Reset All Data","Reset data was successful.")})}catch(v){F.value=Q.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{x.value=!1}},b=async()=>{await X()},W=k=>{if(k.manifestUrl&&Hls.isSupported()){y(k);var v=document.getElementById(`video-${k.id}`);if(!v)return;k.hls&&k.hls.destroy(),k.hls=Q.createHlsStream(v,k.manifestUrl);return}},y=k=>{k.outputs&&k.outputs.forEach(_=>{if(_.hls){debugger;_.hls.detachMedia(),_.hls.destroy(),delete _.hls}_.playbackConfigurations.forEach(S=>{if(S.hls){debugger;S.hls.detachMedia(),S.hls.destroy(),delete S.hls}})})};return(k,v)=>{const _=ee("PageHeader"),S=ee("router-link");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(_,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(w)},{default:q(()=>[e("div",null,[e("button",{onClick:v[0]||(v[0]=d=>i()),class:"ms-2 btn btn-danger"},v[2]||(v[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),J("Reset All Data ")])),e("button",{onClick:v[1]||(v[1]=d=>b()),class:"ms-2 btn btn-secondary"},v[3]||(v[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",pa,[o(F)?(t(),s("div",va,[v[4]||(v[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(F))},null,8,ga)])):A("",!0),(t(!0),s(O,null,L(z.item,d=>(t(),s("div",null,[e("div",ba,[e("div",ya,[d.manifestUrl?(t(),s("video",{key:0,id:`video-${d.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,$a)):A("",!0)]),e("div",wa,[e("div",ha,[e("div",null,[e("h4",null,[e("img",{src:d.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,_a),N(S,{to:`${n.urlViewChannel}/${d.id}/${o(c)()}`},{default:q(()=>[J(u(d.title),1)]),_:2},1032,["to"])])]),e("div",ka,[e("div",Sa,[(t(!0),s(O,null,L(d.programs,r=>(t(),s("div",Ta,[e("div",Ma,[e("img",{src:r.image,class:"img-fluid border",style:{height:"64px"}},null,8,Ia)]),e("div",Ca,u(o(Q).moment(r.since).format("hh:mm a"))+"-"+u(o(Q).moment(r.till).format("hh:mm a")),1),e("div",xa,u(r.title),1),e("div",Va,[(t(!0),s(O,null,L(r.genres,a=>(t(),s("span",Pa,u(a),1))),256))]),o(Q).moment().isAfter(r.since)&&o(Q).moment().isBefore(r.till)?(t(),s("span",Oa,"Now Playing")):A("",!0)]))),256))])])])])])]))),256))])])]),_:1})}}};function De(n){if(!n.cacheKey)throw Error("Cache Key required.");if(!n.baseUrl)throw Error("Base Url required.");const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,closeWithReturnUrl:D,generateReturnUrl:U,security:c}=ve({appTitle:n.appTitle,pageTitle:n.pageTitle}),I=JSON.parse(JSON.stringify(n.filter));I.pageIndex=I.pageIndex||1,I.pageSize=I.pageSize||5,I.sortField=I.sortField||"",I.sortOrder=I.sortOrder||1,I.updateUrl=I.updateUrl||!1,I.items=I.items||[],I.query=I.query||{},I.query.criteria=I.query.criteria||"";const g=re(I),z=()=>{var d;if(x.value){console.log("Paginated search is currently busy.");return}const v=JSON.parse(localStorage.getItem(n.cacheKey))||{},_=new URLSearchParams(window.location.search),S=g.value;S.query.criteria=_.get("c")||v.criteria||S.query.criteria||"",S.pageIndex=parseInt(_.get("p"),10)||v.pageIndex||S.pageIndex||1,S.pageSize=parseInt(_.get("s"),10)||v.pageSize||S.pageSize||5,S.sortField=_.get("sf")||v.sortField||S.sortField||"",S.sortOrder=parseInt(_.get("so"),10)||v.sortOrder||S.sortOrder||1,S.visible=v.visible||S.visible,(d=n.initializeFilter)==null||d.call(n,g,n.cacheKey)},X=()=>{if(n.getQuery)return n.getQuery(g.value);{const v=g.value;return["?c=",encodeURIComponent(v.query.criteria),"&p=",v.pageIndex,"&s=",v.pageSize,"&sf=",v.sortField,"&so=",v.sortOrder].join("")}},i=()=>{if(n.saveQuery)n.saveQuery(g.value,n.cacheKey);else{const v=g.value;localStorage.setItem(n.cacheKey,JSON.stringify({criteria:v.query.criteria,pageIndex:v.pageIndex,pageSize:v.pageSize,sortField:v.sortField,sortOrder:v.sortOrder,visible:v.visible}))}};return{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,closeWithReturnUrl:D,generateReturnUrl:U,security:c,filter:g,initializeFilter:z,getQuery:X,saveQuery:i,search:async v=>{var S;let _=g.value;if(x.value){console.log("Paginated search is currently busy.");return}v>0&&(_.pageIndex=v);try{x.value=!0,M.value="";const d=X();_.selected=null,await F(`${n.baseUrl}/${d}`).then(async r=>{var l;Array.isArray(r.data)?_.items=r.data:_=Object.assign(_,r.data);let a=location.pathname;a.endsWith("/")?a+=d:a+="/"+d,_.updateUrl&&window.history.replaceState(d,`${f}-search`,a),_.items.forEach(C=>{C.expand=!1}),i(),(l=n.successAction)==null||l.call(n,g.value)})}catch(d){if(localStorage.removeItem(n.cacheKey),n.failAction)n.failAction(d);else{const r=V.getErrorMessageAsHtml(d);M.value=r,j.error("Error Occured",r)}}finally{x.value=!1,(S=n.finalAction)==null||S.call(n)}},getRowNumber:v=>{const _=g.value;return(_.pageIndex-1)*_.pageSize+(v+1)},setSelected:v=>{const _=g.value;_.selected&&v&&_.selected===v?_.selected=null:(_.selected&&(_.selected.expand=!1),_.selected=v,_.selected.expand=!0)},isSelected:v=>{const _=g.value;return v===null||_.selected===null?!1:v===_.selected}}}const Ha=["disabled"],Ua={class:"row row-cols-1 row-cols-sm-3"},Da={class:"col"},La={class:"form-floating mb-2"},Ea={key:0,class:"d-block invalid-feedback"},qa={class:"col"},Ba={class:"form-floating"},Na={class:"col"},Ra={class:"form-floating"},Fa={class:"col"},za={class:"form-floating mb-2"},Ga={class:"row row-cols-1 row-cols-sm-2"},ja={class:"col"},Ya={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},Wa={class:"col"},Ka={class:"form-check"},Ja=["onUpdate:modelValue","id"],Qa=["for"],Xa={class:"col"},Za={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},el={class:"col"},tl={class:"form-check"},sl=["onUpdate:modelValue","id"],ol=["for"],al={class:"table-responsive mt-2"},ll={class:"text-end"},nl={class:"table table-sm mb-0 mt-2"},rl={class:"align-middle"},il={class:"text-center"},dl=["onUpdate:modelValue"],ul=["onUpdate:modelValue"],cl=["onUpdate:modelValue"],ml={class:"text-start"},fl=["onClick"],pl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),U=n,c=me({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:V.moment().format("YYYY-MM-DD"),formats:[]}}),I={item:{title:{title:se.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("Duration is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},g=be(I,c),z=$e(()=>{const y=V.moment;if(c.durationTime&&c.durationTime!=="00:00:00"&&V.isValidTime(c.durationTime)){const k=y().startOf("day"),v=k.format("YYYY-MM-DD ")+c.durationTime,S=y(v).subtract(k);return c.item.durationInMillis=S.valueOf(),c.item.durationInMillis}return 0});de(async()=>{await i()});const X=async()=>{const y=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const v=V.clone(y.item);v.durationInMillis=z.value;const _=V.moment(y.item.dateReleased).utc(!0).format();v.dateReleased=_;const S=c.lookups.genres.filter(r=>r.selected).map(r=>r.id);v.genres=S;const d=c.lookups.categories.filter(r=>r.selected).map(r=>r.id);v.categories=d;debugger;await F.post("/api/v1/videos/",v).then(r=>{j.success("Add Video","Video added",{onClose:async()=>{const a=`${U.urlView}/${r.data}`;await G.push(a)}})})}catch(v){M.value=V.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{x.value=!1}},i=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(y=>{const v=y.data.filter(_=>_.id!==0);c.lookups.genres=v})}catch(y){M.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},b=()=>{const y={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};c.item.formats.push(y)},W=y=>{c.item.formats.splice(y,1)};return(y,k)=>{const v=ee("router-link"),_=ee("PageHeader"),S=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(_,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:k[0]||(k[0]=d=>X()),class:"btn btn-primary"},k[6]||(k[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ha),N(v,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:q(()=>k[7]||(k[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(S,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[e("div",null,[e("div",Ua,[e("div",Da,[e("div",La,[R(e("input",{"onUpdate:modelValue":k[1]||(k[1]=d=>c.item.title=d),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,c.item.title]]),k[8]||(k[8]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(g).item.title.$error?(t(),s("div",Ea,[(t(!0),s(O,null,L(o(g).item.title.$errors,d=>(t(),s("div",{key:d.$uid},u(d.$message),1))),128))])):A("",!0)])]),e("div",qa,[e("div",Ba,[R(e("input",{"onUpdate:modelValue":k[2]||(k[2]=d=>c.item.dateReleased=d),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,c.item.dateReleased]]),k[9]||(k[9]=e("label",{for:"dateReleased",class:"small fw-bold"},"Date Released",-1))])]),e("div",Na,[e("div",Ra,[R(e("input",{"onUpdate:modelValue":k[3]||(k[3]=d=>c.durationTime=d),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,c.durationTime]]),k[10]||(k[10]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Fa,[e("div",za,[R(e("textarea",{"onUpdate:modelValue":k[4]||(k[4]=d=>c.item.description=d),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,c.item.description]]),k[11]||(k[11]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Ga,[e("div",ja,[k[12]||(k[12]=e("h5",null,"Genres",-1)),e("div",Ya,[(t(!0),s(O,null,L(c.lookups.genres,d=>(t(),s("div",Wa,[e("div",Ka,[R(e("input",{"onUpdate:modelValue":r=>d.selected=r,class:"form-check-input",type:"checkbox",id:d.name},null,8,Ja),[[He,d.selected]]),e("label",{class:"form-check-label",for:d.name},u(d.name),9,Qa)])]))),256))])]),e("div",Xa,[k[13]||(k[13]=e("h5",null,"Categories",-1)),e("div",Za,[(t(!0),s(O,null,L(c.lookups.categories,d=>(t(),s("div",el,[e("div",tl,[R(e("input",{"onUpdate:modelValue":r=>d.selected=r,class:"form-check-input",type:"checkbox",id:d.name},null,8,sl),[[He,d.selected]]),e("label",{class:"form-check-label",for:d.name},u(d.name),9,ol)])]))),256))])])]),e("div",al,[e("div",ll,[e("button",{onClick:k[5]||(k[5]=d=>b()),class:"btn btn-outline-primary btn-sm"},k[14]||(k[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",nl,[k[17]||(k[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.formats,(d,r)=>(t(),s("tr",rl,[e("td",il,u(r+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":a=>d.format=a,class:"form-control"},k[15]||(k[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,dl),[[ue,d.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":a=>d.serverUrl=a,type:"text",class:"form-control"},null,8,ul),[[Z,d.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":a=>d.path=a,type:"text",class:"form-control"},null,8,cl),[[Z,d.path]])]),e("td",ml,[e("button",{onClick:a=>W(r),class:"btn btn-outline-warning btn-sm"},k[16]||(k[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,fl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},vl=["disabled"],gl={class:"row row-cols-1 row-cols-sm-3"},bl={class:"col"},yl={class:"form-floating mb-2"},$l={key:0,class:"d-block invalid-feedback"},wl={class:"col"},hl={class:"form-floating"},_l={class:"col"},kl={class:"form-floating"},Sl={class:"col"},Tl={class:"form-floating mb-2"},Ml={class:"col"},Il={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Cl={class:"col"},xl={class:"form-check"},Vl=["onUpdate:modelValue","id"],Pl=["for"],Ol={class:"col"},Al={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Hl={class:"col"},Ul={class:"form-check"},Dl=["onUpdate:modelValue","id"],Ll=["for"],El={class:"table-responsive mt-2"},ql={class:"text-end"},Bl={class:"table table-sm mb-0 mt-2"},Nl={class:"align-middle"},Rl={class:"text-center"},Fl=["onUpdate:modelValue"],zl=["value"],Gl=["onUpdate:modelValue"],jl=["onUpdate:modelValue"],Yl={class:"text-start"},Wl=["onClick"],Kl={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),U=n,c=me({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),I={item:{title:{title:se.withMessage("title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("durationInMillis is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},g=be(I,c),z=$e(()=>{const v=V.moment;if(c.durationTime&&c.durationTime!=="00:00:00"&&V.isValidTime(c.durationTime)){const _=v().startOf("day"),S=_.format("YYYY-MM-DD ")+c.durationTime,r=v(S).subtract(_);return c.item.durationInMillis=r.valueOf(),c.item.durationInMillis}return 0});de(async()=>{await i(),await b(),await X()});const X=async()=>{try{await F.get(`/api/v1/videos/${U.id}/`).then(v=>{c.item=v.data;const _=V.moment(c.item.dateReleased).format("YYYY-MM-DD");c.item.dateReleased=_;const S=c.lookups.genres,d=c.item.genres.map(l=>l.genre);S.forEach(l=>{l.selected=d.includes(l.id)});const r=c.lookups.categories,a=c.item.categories.map(l=>l.category);r.forEach(l=>{l.selected=a.includes(l.id)})})}catch(v){M.value=V.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},i=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(v=>{const S=v.data.filter(d=>d.id!==0);c.lookups.genres=S})}catch(v){M.value=V.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},b=async()=>{try{await F.get("/api/v1/lookups/video-formats/").then(v=>{const S=v.data.filter(d=>d.id!==0);c.lookups.formats=S})}catch(v){M.value=V.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},W=async()=>{const v=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const S=V.clone(v.item);S.durationInMillis=z.value;const d=V.moment(v.item.dateReleased).utc(!0).format();S.dateReleased=d;const r=c.lookups.genres.filter(l=>l.selected).map(l=>l.id);S.genres=r;const a=c.lookups.categories.filter(l=>l.selected).map(l=>l.id);S.categories=a;debugger;await F.put("/api/v1/videos/",S).then(l=>{j.success("Edit Video","Video edited.",{onClose:async()=>{const C=`${U.urlView}/${U.id}`;await G.push(C)}})})}catch(S){M.value=V.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{x.value=!1}},y=()=>{const v={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};c.item.formats.push(v)},k=v=>{c.item.formats.splice(v,1)};return(v,_)=>{const S=ee("router-link"),d=ee("PageHeader"),r=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:_[0]||(_[0]=a=>W()),class:"btn btn-primary"},_[6]||(_[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vl),e("button",{onClick:X,class:"btn btn-secondary ms-2"},_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(S,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-2"},{default:q(()=>_[8]||(_[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(r,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[e("div",null,[e("div",gl,[e("div",bl,[e("div",yl,[R(e("input",{"onUpdate:modelValue":_[1]||(_[1]=a=>c.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,c.item.title]]),_[9]||(_[9]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(g).item.title.$error?(t(),s("div",$l,[(t(!0),s(O,null,L(o(g).item.title.$errors,a=>(t(),s("div",{key:a.$uid},u(a.$message),1))),128))])):A("",!0)])]),e("div",wl,[e("div",hl,[R(e("input",{"onUpdate:modelValue":_[2]||(_[2]=a=>c.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,c.item.dateReleased]]),_[10]||(_[10]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",_l,[e("div",kl,[R(e("input",{"onUpdate:modelValue":_[3]||(_[3]=a=>c.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,c.durationTime]]),_[11]||(_[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Sl,[e("div",Tl,[R(e("textarea",{"onUpdate:modelValue":_[4]||(_[4]=a=>c.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,c.item.description]]),_[12]||(_[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Ml,[_[13]||(_[13]=e("h5",null,"Genres",-1)),e("div",Il,[(t(!0),s(O,null,L(c.lookups.genres,a=>(t(),s("div",Cl,[e("div",xl,[R(e("input",{"onUpdate:modelValue":l=>a.selected=l,class:"form-check-input",type:"checkbox",id:a.name},null,8,Vl),[[He,a.selected]]),e("label",{class:"form-check-label",for:a.name},u(a.name),9,Pl)])]))),256))])]),e("div",Ol,[_[14]||(_[14]=e("h5",null,"Categories",-1)),e("div",Al,[(t(!0),s(O,null,L(c.lookups.categories,a=>(t(),s("div",Hl,[e("div",Ul,[R(e("input",{"onUpdate:modelValue":l=>a.selected=l,class:"form-check-input",type:"checkbox",id:a.name},null,8,Dl),[[He,a.selected]]),e("label",{class:"form-check-label",for:a.name},u(a.name),9,Ll)])]))),256))])]),e("div",El,[e("div",ql,[e("button",{onClick:_[5]||(_[5]=a=>y()),class:"btn btn-outline-primary btn-sm"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Bl,[_[17]||(_[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.formats,(a,l)=>(t(),s("tr",Nl,[e("td",Rl,u(l+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":C=>a.format=C,class:"form-control"},[(t(!0),s(O,null,L(c.lookups.formats,C=>(t(),s("option",{value:C.id},u(C.name),9,zl))),256))],8,Fl),[[ue,a.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":C=>a.serverUrl=C,type:"text",class:"form-control"},null,8,Gl),[[Z,a.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":C=>a.path=C,type:"text",class:"form-control"},null,8,jl),[[Z,a.path]])]),e("td",Yl,[e("button",{onClick:C=>k(l),class:"btn btn-outline-warning btn-sm"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Wl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Jl={class:"ms-2"},Ql={class:"input-group"},Xl=["value"],Zl={class:"ms-1"},en={class:"input-group"},tn={class:"ms-1"},sn={class:"input-group"},on={class:"table-responsive border shadow-sm"},an={class:"table table-hover mb-0"},ln=["textContent"],nn={class:"d-flex flex-row justify-content-start"},rn={class:"mt-1"},dn=["src"],un={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},cn={class:"ms-2"},mn={key:0},fn={class:"badge bg-primary me-1"},pn={key:1},vn={class:"badge bg-info me-1"},gn={class:"text-center"},bn={class:"text-end"},yn=["onClick"],$n={key:0,class:"fas fa-fw fa-chevron-circle-up"},wn={key:1,class:"fas fa-fw fa-chevron-circle-down"},hn={key:0},_n={colspan:"999"},kn={class:""},Sn={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},Tn={class:"col mb-2"},Mn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},In={class:"col col-lg-auto mb-2"},Cn={key:0},xn={class:"badge bg-secondary me-1"},Vn="/api/v1/videos/search",Pn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:x,pageTitle:h,busy:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,security:c,filter:I,initializeFilter:g,getQuery:z,saveQuery:X,search:i,getRowNumber:b,setSelected:W,isSelected:y}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${w==null?void 0:w.userId}/videos/search`,baseUrl:Vn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(v,_)=>{const S=v.value,d=new URLSearchParams(window.location.search),r=JSON.parse(localStorage.getItem(_))||{};S.query.genre=d.get("genre")||r.genre||S.query.genre||0,S.query.category=d.get("category")||r.category||S.query.category||0},getQuery:v=>["?c=",encodeURIComponent(v.query.criteria),"&p=",v.pageIndex,"&s=",v.pageSize,"&sf=",v.sortField,"&so=",v.sortOrder,"&genre=",v.query.genre,"&category=",v.query.category].join(""),saveQuery:(v,_)=>{localStorage.setItem(_,JSON.stringify({criteria:v.query.criteria,pageIndex:v.pageIndex,pageSize:v.pageSize,sortField:v.sortField,sortOrder:v.sortOrder,visible:v.visible,genre:v.query.genre,category:v.query.category}))}});de(async()=>{g(),await k(),await i()});const k=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(v=>{const _=v.data;I.value.lookups.genres=_})}catch(v){F.value=Q.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return(v,_)=>{const S=ee("router-link"),d=ee("PageHeader"),r=ee("m-pagination"),a=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(h)},{default:q(()=>[N(S,{to:n.urlAdd,class:"btn btn-primary"},{default:q(()=>_[5]||(_[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Jl,[e("div",Ql,[_[6]||(_[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":_[0]||(_[0]=l=>o(I).query.genre=l),class:"form-select"},[(t(!0),s(O,null,L(o(I).lookups.genres,l=>(t(),s("option",{value:l.id},u(l.name),9,Xl))),256))],512),[[ue,o(I).query.genre]])])]),e("div",Zl,[e("div",en,[_[8]||(_[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":_[1]||(_[1]=l=>o(I).query.category=l),class:"form-select"},_[7]||(_[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(I).query.category]])])]),e("div",tn,[e("div",sn,[R(e("input",{"onUpdate:modelValue":_[2]||(_[2]=l=>o(I).query.criteria=l),onKeyup:_[3]||(_[3]=Ue(l=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(I).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[4]||(_[4]=l=>o(i)(1))},_[9]||(_[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(a,{errorMessage:o(F)},{default:q(()=>[e("div",on,[e("table",an,[_[14]||(_[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(o(I).items,(l,C)=>(t(),s(O,{key:l.videoId},[e("tr",null,[e("td",{textContent:u(o(b)(C)),class:"text-center"},null,8,ln),e("td",null,[e("div",nn,[e("div",null,[l.thumbnails.length>0?(t(!0),s(O,{key:0},L(l.thumbnails,$=>(t(),s("div",rn,[e("img",{src:$.url,class:"img-fuild border",width:"128"},null,8,dn)]))),256)):(t(),s("img",un))]),e("div",cn,[N(S,{to:`${n.urlView}/${l.videoId}`,class:"d-inline-block text-truncate link-offset-2"},{default:q(()=>[J(u(l.title),1)]),_:2},1032,["to"]),e("div",null,[l.categories.length>0?(t(),s("div",mn,[(t(!0),s(O,null,L(l.categories,$=>(t(),s("span",fn,u($.categoryName),1))),256))])):A("",!0),l.genres.length>0?(t(),s("div",pn,[(t(!0),s(O,null,L(l.genres,$=>(t(),s("span",vn,u($.genreName),1))),256))])):A("",!0)])])])]),e("td",gn,u(o(Q).moment.utc(l.durationInMillis).format("HH:mm:ss")),1),e("td",bn,[e("button",{onClick:$=>l.expand=!l.expand,class:le([[l.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[l.expand?(t(),s("span",$n)):(t(),s("span",wn))],10,yn)])]),l.expand?(t(),s("tr",hn,[_[13]||(_[13]=e("td",null,null,-1)),e("td",_n,[e("div",kn,[e("div",Sn,[e("div",Tn,[_[10]||(_[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,u(l.description),1)]),e("div",Mn,[_[11]||(_[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,u(o(Qe).utc(l.dateReleased).format("l")),1)]),e("div",In,[_[12]||(_[12]=e("h6",{class:"fw-bold"},"Formats",-1)),l.formats.length>0?(t(),s("div",Cn,[(t(!0),s(O,null,L(l.formats,$=>(t(),s("span",xn,u($.formatName),1))),256))])):A("",!0)])])])])])):A("",!0)],64))),128))]),_:1},512),[[Te,o(I).items.length>0]])])]),N(r,{filter:o(I),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},On={key:0},An={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Hn={class:"nav-item",role:"presentation"},Un={class:"nav-item",role:"presentation"},Dn={class:"nav-item",role:"presentation"},Ln={class:"nav-item",role:"presentation"},En={class:"tab-content",id:"myTabContent"},qn={class:"mt-2"},Bn={class:"row row-cols-1 row-cols-sm-2"},Nn={class:"col"},Rn=["id"],Fn={class:"text-end"},zn={class:"col"},Gn={class:"col"},jn={class:"form-floating mb-2"},Yn={class:"row row-cols-1 row-cols-sm-2"},Wn={class:"col"},Kn={class:"form-floating mb-2"},Jn={class:"col"},Qn={class:"form-floating mb-2"},Xn={class:"col"},Zn={class:"form-floating mb-2"},er={class:"mt-1"},tr={class:"badge bg-info me-1"},sr={class:"badge bg-primary me-1"},or={class:"mt-2"},ar={class:"table-responsive border"},lr={class:"table table-hover mb-0"},nr={class:"table-group-divider"},rr={class:"align-middle"},ir={class:"text-center"},dr={class:"mt-2"},ur={class:"text-end"},cr={class:"table-responsive border mt-2"},mr={class:"table table-hover mb-0 caption-top"},fr={class:"mt-2"},pr={class:"table-responsive"},vr={class:"table table-hover mb-0 caption-top"},gr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){const f=n,{appTitle:w,pageTitle:x,busy:h,isDirty:P,validations:M,infoMessage:G,warningMessage:F,errorMessage:V,router:j,axios:Q,utils:D,toasts:U,close:c,closeWithReturnUrl:I,generateReturnUrl:g,security:z}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});Se("$config");const X=ge();X.user;const i=me({user:X.user,item:null,hls:null}),b=re();de(async()=>{await v(),b.value=D.getPageTab("video")||"information-tab"}),Ee(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const W=r=>{D.setPageTab("video",r),b.value=r},y=r=>r!==b.value?"":"active",k=r=>r!==b.value?"":"show active",v=async()=>{const r=i;if(!h.value)try{h.value=!0,V.value="",i.item=null;const a=`/api/v1/videos/${f.id}/`;await Q.get(a).then(l=>{r.item=l.data,r.item.duration=D.moment.utc(r.item.durationInMillis).format("HH:mm:ss"),r.item.dateReleased=D.moment.utc(r.item.dateReleased).format("ll")}),S()}catch(a){V.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await v()},S=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),i.hls&&i.hls.destroy();const a=`video-${i.item.videoId}`;var r=document.getElementById(a);const l=i.item.formats.find($=>$.formatName==="HLS"),C=l.serverUrl+l.path;i.hls=D.createHlsStream(r,C,!1)}},d=async()=>{if(!h.value)try{h.value=!0,V.value="";const r=`/api/v1/videos/${f.id}/get-blank-frames/`;await Q.post(r).then(a=>{}),h.value=!1,await _()}catch(r){V.value=D.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{h.value=!1}};return(r,a)=>{const l=ee("router-link"),C=ee("PageHeader"),$=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(C,{"page-icon":"fas fa-fw fa-video",pageTitle:o(x)},{default:q(()=>[N(l,{to:`${n.urlAddVodSource}/${o(g)()}&videoId=${n.id}`,class:"btn btn-primary"},{default:q(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-plus"},null,-1),J("Create VOD ")])),_:1},8,["to"]),N(l,{to:`${n.urlEdit}/${n.id}`,class:"btn btn-primary ms-1"},{default:q(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=m=>_()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=m=>o(I)(f.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N($,{errorMessage:o(V)},{default:q(()=>[i.item?(t(),s("div",On,[e("div",null,[e("ul",An,[e("li",Hn,[e("button",{onClick:a[2]||(a[2]=m=>W("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Un,[e("button",{onClick:a[3]||(a[3]=m=>W("formats-tab")),class:le([y("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",Dn,[e("button",{onClick:a[4]||(a[4]=m=>W("blankFrames-tab")),class:le([y("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",Ln,[e("button",{onClick:a[5]||(a[5]=m=>W("vodSources-tab")),class:le([y("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",En,[e("div",{class:le([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",qn,[e("div",Bn,[e("div",Nn,[e("video",{id:`video-${i.item.videoId}`,controls:"",muted:"",autoplay:"",class:"card-img-top object-fit-contain border"},null,8,Rn),e("div",Fn,[e("button",{onClick:a[6]||(a[6]=m=>i.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},a[16]||(a[16]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])]),e("div",zn,[e("div",Gn,[e("div",jn,[R(e("input",{"onUpdate:modelValue":a[7]||(a[7]=m=>i.item.title=m),type:"text",class:"form-control",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,i.item.title]]),a[17]||(a[17]=e("label",{for:"title"},"Title",-1))])]),e("div",Yn,[e("div",Wn,[e("div",Kn,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=m=>i.item.dateReleased=m),type:"text",class:"form-control",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Z,i.item.dateReleased]]),a[18]||(a[18]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Jn,[e("div",Qn,[R(e("input",{"onUpdate:modelValue":a[9]||(a[9]=m=>i.item.duration=m),type:"text",class:"form-control",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Z,i.item.duration]]),a[19]||(a[19]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Xn,[e("div",Zn,[R(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=m=>i.item.description=m),type:"text",class:"form-control",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,i.item.description]]),a[20]||(a[20]=e("label",{for:"description"},"Description",-1))])]),e("div",er,[(t(!0),s(O,null,L(i.item.genres,m=>(t(),s("span",tr,u(m.genreName),1))),256)),(t(!0),s(O,null,L(i.item.categories,m=>(t(),s("span",sr,u(m.categoryName),1))),256))])])])])],2),e("div",{class:le([k("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",or,[e("div",ar,[e("table",lr,[a[21]||(a[21]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",nr,[(t(!0),s(O,null,L(i.item.formats,(m,K)=>(t(),s("tr",rr,[e("td",ir,u(K+1),1),e("td",null,u(m.formatName),1),e("td",null,u(m.serverUrl),1),e("td",null,u(m.path),1)]))),256))])])])])],2),e("div",{class:le([k("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",dr,[e("div",null,[e("div",ur,[e("button",{onClick:a[11]||(a[11]=m=>d()),class:"btn btn-outline-primary btn-sm"},a[22]||(a[22]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),J("Process ")]))]),e("div",cr,[e("table",mr,[a[23]||(a[23]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.blankFrames,(m,K)=>(t(),s("tr",{key:m.videoBlankFrameId},[e("td",null,u(K+1),1),e("td",null,u(o(D).moment.utc(m.startInMillis).format("HH:mm:ss")),1),e("td",null,u(o(D).moment.utc(m.endInMillis).format("HH:mm:ss")),1),e("td",null,u(o(D).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,i.item.blankFrames.length>0]])])])])])],2),e("div",{class:le([k("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",fr,[e("div",pr,[e("table",vr,[a[24]||(a[24]=e("caption",null,"VOD Sources",-1)),a[25]||(a[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.vodSources,(m,K)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,u(K+1),1),e("td",null,[N(l,{to:`${f.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u(m.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,i.item.vodSources.length>0]])])])])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},br=["disabled"],yr={class:"form-floating mb-2"},$r={key:0,class:"d-block invalid-feedback"},wr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),U=n,c=me({lookups:{},item:{name:null}}),I={item:{name:{required:se.withMessage("name is required.",oe),$autoDirty:!0,$lazy:!0}}},g=be(I,c);de(async()=>{});const z=async()=>{const X=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const b=V.clone(X.item);await F.post("/api/v1/sourcegroups/",b).then(W=>{j.success("Add Source Group","Source group added.",{onClose:async()=>{const y=`${U.urlView}/${W.data}`;await G.push(y)}})})}catch(b){M.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{x.value=!1}};return(X,i)=>{const b=ee("router-link"),W=ee("PageHeader"),y=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(W,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:i[0]||(i[0]=k=>z()),class:"btn btn-primary"},i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,br),N(b,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:q(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[e("div",null,[e("div",yr,[R(e("input",{"onUpdate:modelValue":i[1]||(i[1]=k=>c.item.name=k),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,c.item.name]]),i[4]||(i[4]=e("label",{for:"name"},"Name",-1)),o(g).item.name.$error?(t(),s("div",$r,[(t(!0),s(O,null,L(o(g).item.name.$errors,k=>(t(),s("div",{key:k.$uid},u(k.$message),1))),128))])):A("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},hr={key:0,class:"d-flex justify-content-end"},_r=["disabled"],kr={key:0},Sr={class:"row row-cols-1 row-cols-sm-2"},Tr={class:"col"},Mr={class:"form-floating mb-2"},Ir={key:0,class:"d-block invalid-feedback"},Cr={class:"col"},xr={class:"form-floating mb-2"},Vr={key:0,class:"d-block invalid-feedback"},Pr={class:"row row-cols-sm-2"},Or={class:"col"},Ar={class:"form-floating mb-2"},Hr={class:"form-floating mb-2"},Ur={key:0,class:"d-block invalid-feedback"},Dr={class:"form-floating mb-2"},Lr={key:0,class:"d-block invalid-feedback"},Er={class:"col"},qr={class:"form-floating mb-2"},Ye={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),U=n,c=me({editorElementId:"editor",htmlContent:"",item:null}),I={item:{title:{required:se.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},eidr:{required:se.withMessage("eidr is required.",oe),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:se.withMessage("eidrPrefix is required.",oe),$autoDirty:!0,$lazy:!0}},htmlContent:{required:se.withMessage("Content is required.",oe),$autoDirty:!0,$lazy:!0}},g=be(I,c);de(async()=>{await i()});const z=()=>{const W=c;var y=document.getElementById(W.editorElementId);y.innerHTML=W.htmlContent},X=W=>{const y=c;y.htmlContent=W.target.innerHTML;var k=document.getElementById(y.editorElementId);k.value=y.htmlContent},i=async()=>{const W=c;if(!x.value)try{x.value=!0,c.item=null,await F.get(`/api/v1/movies/${U.id}`).then(y=>{W.item=y.data,W.htmlContent=W.item.description}),z()}catch(y){M.value=V.getErrorMessageAsHtml(y)}finally{x.value=!1}},b=async()=>{const W=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const k=V.clone(W.item);k.description=W.htmlContent,await F.put("/api/v1/movies",k).then(v=>{j.success("Edit Movie","Movie edited",{onClose:async()=>{const _=`${U.urlView}/${U.id}`;await G.push(_)}})})}catch(k){M.value=V.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{x.value=!1}};return(W,y)=>{const k=ee("router-link"),v=ee("PageHeader"),_=ee("PageBody");return t(),s("div",null,[N(v,{"page-icon":"fas fa-fw fa-film",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:q(()=>[c.item?(t(),s("div",hr,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:y[0]||(y[0]=S=>b()),class:"btn btn-primary"},y[7]||(y[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_r),e("button",{onClick:i,class:"ms-2 btn btn-secondary"},y[8]||(y[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(k,{to:`${U.urlView}/${U.id}`,class:"ms-1 btn btn-secondary"},{default:q(()=>y[9]||(y[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):A("",!0)]),_:1},8,["pageTitle"]),N(_,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[c.item?(t(),s("div",kr,[e("div",Sr,[e("div",Tr,[e("div",Mr,[R(e("input",{"onUpdate:modelValue":y[1]||(y[1]=S=>c.item.eidrPrefix=S),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Z,c.item.eidrPrefix]]),y[10]||(y[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(g).item.eidrPrefix.$error?(t(),s("div",Ir,[(t(!0),s(O,null,L(o(g).item.eidrPrefix.$errors,S=>(t(),s("div",{key:S.$uid},u(S.$message),1))),128))])):A("",!0)])]),e("div",Cr,[e("div",xr,[R(e("input",{"onUpdate:modelValue":y[2]||(y[2]=S=>c.item.eidr=S),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Z,c.item.eidr]]),y[11]||(y[11]=e("label",{for:"title"},"Eidr",-1)),o(g).item.eidr.$error?(t(),s("div",Vr,[(t(!0),s(O,null,L(o(g).item.eidr.$errors,S=>(t(),s("div",{key:S.$uid},u(S.$message),1))),128))])):A("",!0)])])]),e("div",Pr,[e("div",Or,[e("div",Ar,[R(e("input",{"onUpdate:modelValue":y[3]||(y[3]=S=>c.item.releaseYear=S),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Z,c.item.releaseYear]]),y[12]||(y[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Hr,[R(e("input",{"onUpdate:modelValue":y[4]||(y[4]=S=>c.item.title=S),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Z,c.item.title]]),y[13]||(y[13]=e("label",{for:"title"},"Title",-1)),o(g).item.title.$error?(t(),s("div",Ur,[(t(!0),s(O,null,L(o(g).item.title.$errors,S=>(t(),s("div",{key:S.$uid},u(S.$message),1))),128))])):A("",!0)])])]),e("div",null,[e("div",Dr,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:y[5]||(y[5]=S=>X(S))},null,32),y[14]||(y[14]=e("label",{for:"editor"},"Content",-1)),o(g).htmlContent.$error?(t(),s("div",Lr,[(t(!0),s(O,null,L(o(g).htmlContent.$errors,S=>(t(),s("div",{key:S.$uid},u(S.$message),1))),128))])):A("",!0)])]),e("div",Er,[e("div",qr,[R(e("textarea",{"onUpdate:modelValue":y[6]||(y[6]=S=>c.item.metadata=S),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Z,c.item.metadata]]),y[15]||(y[15]=e("label",{for:"title"},"Metadata",-1))])])])):A("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},Br={components:{Page:Ye},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Nr(n,f,w,x,h,P){const M=ee("Page");return t(),ce(M,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Rr=Me(Br,[["render",Nr]]),Fr={class:"ms-2"},zr={class:"input-group"},Gr={class:"table-responsive border shadow-sm"},jr={class:"table table-hover mb-0"},Yr=["textContent"],Wr={key:0,class:"fas fa-fw fa-check-circle text-success"},Kr="/api/v1/sourcegroups/search",Jr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:x,pageTitle:h,busy:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,security:c,filter:I,initializeFilter:g,getQuery:z,saveQuery:X,search:i,getRowNumber:b,setSelected:W,isSelected:y}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${w==null?void 0:w.userId}/source-groups/search`,baseUrl:Kr,filter:{updateUrl:!0}});return de(async()=>{g(),await i()}),(k,v)=>{const _=ee("router-link"),S=ee("PageHeader"),d=ee("m-pagination"),r=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(h)},{default:q(()=>[N(_,{to:n.urlAdd,class:"btn btn-primary"},{default:q(()=>v[3]||(v[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Fr,[e("div",zr,[R(e("input",{"onUpdate:modelValue":v[0]||(v[0]=a=>o(I).query.criteria=a),onKeyup:v[1]||(v[1]=Ue(a=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Z,o(I).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:v[2]||(v[2]=a=>o(i)(1))},v[4]||(v[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(r,{errorMessage:o(F)},{default:q(()=>[e("div",Gr,[e("table",jr,[v[5]||(v[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(o(I).items,(a,l)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:u(o(b)(l)),class:"text-center"},null,8,Yr),e("td",null,[N(_,{to:`${n.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:q(()=>[a.arn?(t(),s("span",Wr)):A("",!0),J(" "+u(a.name),1)]),_:2},1032,["to"])]),e("td",null,u(a.channelOutputs),1),e("td",null,u(a.packageConfigurations),1)]))),128))]),_:1},512),[[Te,o(I).items.length>0]])])]),N(d,{filter:o(I),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Qr={key:0},Xr={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Zr={class:"nav-item",role:"presentation"},ei={class:"nav-item",role:"presentation"},ti={class:"nav-item",role:"presentation"},si={class:"tab-content",id:"myTabContent"},oi={class:"mt-2"},ai={class:"col"},li={class:"form-floating mb-2"},ni={class:"mt-2"},ri={class:"table-responsive border"},ii={class:"table table-hover mb-0"},di={class:"mt-2"},ui={class:"table-responsive border"},ci={class:"table table-hover mb-0"},mi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const f=n,{appTitle:w,pageTitle:x,busy:h,isDirty:P,validations:M,infoMessage:G,warningMessage:F,errorMessage:V,router:j,axios:Q,utils:D,toasts:U,close:c,closeWithReturnUrl:I,generateReturnUrl:g,security:z}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});Se("$config");const X=ge();X.user;const i=me({user:X.user,item:null}),b=re();de(async()=>{await v(),b.value=D.getPageTab("sourceGroup")||"information-tab"});const W=d=>{D.setPageTab("sourceGroup",d),b.value=d},y=d=>d!==b.value?"":"active",k=d=>d!==b.value?"":"show active",v=async()=>{const d=i;if(!h.value)try{h.value=!0,V.value="",i.item=null;const r=`/api/v1/sourcegroups/${f.id}/`;await Q.get(r).then(a=>{d.item=a.data})}catch(r){V.value=D.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{if(!h.value)try{h.value=!0,V.value="";const d=`/api/v1/sourcegroups/${f.id}/`;await Q.delete(d).then(r=>{U.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${f.urlMain}/`;await j.push(a)}})})}catch(d){V.value=D.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{h.value=!1}},S=async()=>{await v()};return(d,r)=>{const a=ee("PageHeader"),l=ee("router-link"),C=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(x)},{default:q(()=>[e("button",{onClick:r[0]||(r[0]=$=>_()),class:"ms-1 btn btn-warning"},r[7]||(r[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:r[1]||(r[1]=$=>S()),class:"ms-2 btn btn-secondary"},r[8]||(r[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[2]||(r[2]=$=>o(I)(f.urlMain)),class:"btn btn-secondary ms-1"},r[9]||(r[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(C,{errorMessage:o(V)},{default:q(()=>[i.item?(t(),s("div",Qr,[e("div",null,[e("ul",Xr,[e("li",Zr,[e("button",{onClick:r[3]||(r[3]=$=>W("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ei,[e("button",{onClick:r[4]||(r[4]=$=>W("channelOutputs-tab")),class:le([y("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",ti,[e("button",{onClick:r[5]||(r[5]=$=>W("packageConfigurations-tab")),class:le([y("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",si,[e("div",{class:le([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",oi,[e("div",ai,[e("div",li,[R(e("input",{"onUpdate:modelValue":r[6]||(r[6]=$=>i.item.name=$),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.name]]),r[10]||(r[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:le([k("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",ni,[e("div",ri,[e("table",ii,[r[11]||(r[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.channelOutputs,($,m)=>(t(),s("tr",{key:$.channelOutputId},[e("td",null,u(m+1),1),e("td",null,[N(l,{to:`${n.urlViewChannel}/${$.channelId}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u($.manifestName),1)]),_:2},1032,["to"])]),e("td",null,u($.outputType),1)]))),128))]),_:1},512),[[Te,i.item.channelOutputs.length>0]])])])])],2),e("div",{class:le([k("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",di,[e("div",ui,[e("table",ci,[r[12]||(r[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.packageConfigurations,($,m)=>(t(),s("tr",{key:$.packageConfigurationId},[e("td",null,u(m+1),1),e("td",null,[N(l,{to:`${n.urlViewVodSource}/${$.vodSourceId}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u($.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,u($.path),1),e("td",null,u($.type),1)]))),128))]),_:1},512),[[Te,i.item.packageConfigurations.length>0]])])])])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},fi=["disabled"],pi={class:"form-floating mb-2"},vi={key:0,class:"d-block invalid-feedback"},gi={class:"form-floating mb-2"},bi={key:0,class:"d-block invalid-feedback"},yi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),U=n,c=me({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),I={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:se.withMessage("HTTP Configuration Base Url is required.",oe),$autoDirty:!0,$lazy:!0}}},g=be(I,c);de(async()=>{});const z=async()=>{const X=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const b=V.clone(X.item);await F.post("/api/v1/sourcelocations/",b).then(W=>{j.success("Add Source Location","Source location added.",{onClose:async()=>{const y=`${U.urlView}/${W.data}`;await G.push(y)}})})}catch(b){M.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{x.value=!1}};return(X,i)=>{const b=ee("router-link"),W=ee("PageHeader"),y=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(W,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:i[0]||(i[0]=k=>z()),class:"btn btn-primary"},i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fi),N(b,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:q(()=>i[4]||(i[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[e("div",null,[e("div",pi,[R(e("input",{"onUpdate:modelValue":i[1]||(i[1]=k=>c.item.name=k),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,c.item.name]]),i[5]||(i[5]=e("label",{for:"name"},"Name",-1)),o(g).item.name.$error?(t(),s("div",vi,[(t(!0),s(O,null,L(o(g).item.name.$errors,k=>(t(),s("div",{key:k.$uid},u(k.$message),1))),128))])):A("",!0)]),e("div",gi,[R(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=k=>c.item.httpConfigurationBaseUrl=k),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Z,c.item.httpConfigurationBaseUrl]]),i[6]||(i[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(g).item.httpConfigurationBaseUrl.$error?(t(),s("div",bi,[(t(!0),s(O,null,L(o(g).item.httpConfigurationBaseUrl.$errors,k=>(t(),s("div",{key:k.$uid},u(k.$message),1))),128))])):A("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},$i={components:{Page:Ye},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function wi(n,f,w,x,h,P){const M=ee("Page");return t(),ce(M,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const hi=Me($i,[["render",wi]]),_i={class:"ms-1"},ki={class:"input-group"},Si={class:"table-responsive border shadow-sm"},Ti={class:"table table-hover mb-0"},Mi={class:"text-center"},Ii=["textContent"],Ci={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},xi={class:"text-center"},Vi=["onUpdate:modelValue"],Pi="/api/v1/sourcelocations/search",Oi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:x,pageTitle:h,busy:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,security:c,filter:I,initializeFilter:g,getQuery:z,saveQuery:X,search:i,getRowNumber:b,setSelected:W,isSelected:y}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${w==null?void 0:w.userId}/source-locations/search`,baseUrl:Pi,filter:{updateUrl:!0}}),k=$e(()=>{const S=I.value;return S&&S.items?S.items.filter(a=>a.selected):null});de(async()=>{g(),await i()});const v=async()=>{if(!(k.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!P.value){F.value=null;try{P.value=!0;const r={sourceLocationIds:k.value.map(a=>a.sourceLocationId)};await j.post("/api/v1/sourceLocations/publish/",r).then(a=>{D.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),P.value=!1,await i()}catch(d){F.value=Q.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{P.value=!1}}},_=async()=>{if(!(k.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!P.value){F.value=null;try{P.value=!0;const r={sourceLocationIds:k.value.map(a=>a.sourceLocationId)};await j.post("/api/v1/sourceLocations/unpublish/",r).then(a=>{D.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),P.value=!1,await i()}catch(d){F.value=Q.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{P.value=!1}}};return(S,d)=>{const r=ee("router-link"),a=ee("PageHeader"),l=ee("m-pagination"),C=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(h)},{default:q(()=>[N(r,{to:n.urlAdd,class:"btn btn-primary ms-2"},{default:q(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",_i,[e("div",ki,[R(e("input",{"onUpdate:modelValue":d[0]||(d[0]=$=>o(I).query.criteria=$),onKeyup:d[1]||(d[1]=Ue($=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(I).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=$=>o(i)(1))},d[4]||(d[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(C,{errorMessage:o(F)},{default:q(()=>[e("div",Si,[e("table",Ti,[e("thead",null,[e("tr",null,[d[7]||(d[7]=e("td",{class:"text-center"},"#",-1)),d[8]||(d[8]=e("th",null,"Name",-1)),d[9]||(d[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",Mi,[k.value.length?(t(),s(O,{key:0},[e("button",{onClick:v,class:"btn btn-primary btn-sm"},d[5]||(d[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:_,class:"btn btn-warning btn-sm ms-1"},d[6]||(d[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):A("",!0)])])]),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(o(I).items,($,m)=>(t(),s("tr",{key:$.sourceLocationId},[e("td",{textContent:u(o(b)(m)),class:"text-center"},null,8,Ii),e("td",null,[N(r,{to:`${n.urlView}/${$.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:q(()=>[$.arn?(t(),s("i",Ci)):A("",!0),e("span",null,u($.name),1)]),_:2},1032,["to"])]),e("td",null,u($.httpConfigurationBaseUrl),1),e("td",xi,[R(e("input",{"onUpdate:modelValue":K=>$.selected=K,type:"checkbox",class:"form-check-input"},null,8,Vi),[[He,$.selected]])])]))),128))]),_:1},512),[[Te,o(I).items.length>0]])])]),N(l,{filter:o(I),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ai={key:0},Hi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ui={class:"nav-item",role:"presentation"},Di={class:"nav-item",role:"presentation"},Li={class:"nav-item",role:"presentation"},Ei={class:"tab-content",id:"myTabContent"},qi={class:"mt-2"},Bi={class:"col"},Ni={class:"form-floating mb-2"},Ri={class:"col"},Fi={class:"form-floating mb-2"},zi={class:"mt-2"},Gi={class:"table-responsive border"},ji={class:"table table-hover mb-0"},Yi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Wi={class:"mt-2"},Ki={class:"table-responsive border"},Ji={class:"table table-hover mb-0"},Qi={key:0,class:"fas fa-fw fa-check-circle text-success"},Xi={class:"badge bg-info"},Zi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const f=n,{appTitle:w,pageTitle:x,busy:h,isDirty:P,validations:M,infoMessage:G,warningMessage:F,errorMessage:V,router:j,axios:Q,utils:D,toasts:U,close:c,closeWithReturnUrl:I,generateReturnUrl:g,security:z}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});Se("$config");const X=ge();X.user;const i=me({user:X.user,item:null}),b=re();de(async()=>{await v(),b.value=D.getPageTab("sourceLocation")||"information-tab"});const W=r=>{D.setPageTab("sourceLocation",r),b.value=r},y=r=>r!==b.value?"":"active",k=r=>r!==b.value?"":"show active",v=async()=>{const r=i;if(!h.value)try{h.value=!0,V.value="",i.item=null;const a=`/api/v1/sourcelocations/${f.id}/`;await Q.get(a).then(l=>{r.item=l.data})}catch(a){V.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await v()},S=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!h.value){V.value=null;try{h.value=!0;const a={sourceLocationIds:[f.id]};await Q.post("/api/v1/sourcelocations/publish/",a).then(l=>{U.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),h.value=!1,await _()}catch(a){V.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!h.value){V.value=null;try{h.value=!0;const a={sourceLocationIds:[f.id]};await Q.post("/api/v1/sourcelocations/unpublish/",a).then(l=>{U.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),h.value=!1,await _()}catch(a){V.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}}};return(r,a)=>{const l=ee("PageHeader"),C=ee("router-link"),$=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(l,{"page-icon":"fas fa-fw fa-building",pageTitle:o(x)},{default:q(()=>[i.item?(t(),s(O,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=m=>d()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=m=>S()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):A("",!0),e("button",{onClick:a[2]||(a[2]=m=>_()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=m=>o(I)(f.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N($,{errorMessage:o(V)},{default:q(()=>[i.item?(t(),s("div",Ai,[e("div",null,[e("ul",Hi,[e("li",Ui,[e("button",{onClick:a[4]||(a[4]=m=>W("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Di,[e("button",{onClick:a[5]||(a[5]=m=>W("vodSources-tab")),class:le([y("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Li,[e("button",{onClick:a[6]||(a[6]=m=>W("programs-tab")),class:le([y("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Ei,[e("div",{class:le([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",qi,[e("div",Bi,[e("div",Ni,[R(e("input",{"onUpdate:modelValue":a[7]||(a[7]=m=>i.item.name=m),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Ri,[e("div",Fi,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=m=>i.item.httpConfigurationBaseUrl=m),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Z,i.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:le([k("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",zi,[e("div",Gi,[e("table",ji,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.vodSources,(m,K)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,u(K+1),1),e("td",null,[m.arn?(t(),s("span",Yi)):A("",!0),N(C,{to:`${f.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u(m.name),1)]),_:2},1032,["to"])]),e("td",null,[N(C,{to:`${f.urlViewVideo}/${encodeURIComponent(m.video.videoId)}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u(m.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,u(o(D).moment.utc(m.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Te,i.item.vodSources.length>0]])])])])],2),e("div",{class:le([k("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Wi,[e("div",Ki,[e("table",Ji,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.programs,(m,K)=>(t(),s("tr",{key:m.programId},[e("td",null,u(K+1),1),e("td",null,[N(C,{to:`${f.urlViewChannel}/${encodeURIComponent(m.channel.channelId)}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u(m.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[m.arn?(t(),s("span",Qi)):A("",!0),J(" "+u(m.name)+" ",1),e("div",null," Start: "+u(o(D).moment.utc(m.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+u(o(D).moment.utc(m.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[J(u(o(D).moment(m.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",Xi,u(o(D).moment(m.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Te,i.item.programs.length>0]])])])])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},ed=["disabled"],td={class:"col"},sd={class:"form-floating mb-2"},od={key:0,class:"d-block invalid-feedback"},ad={class:"row row-cols-1 row-cols-sm-2"},ld={class:"col"},nd={class:"form-floating mb-2"},rd=["value"],id={key:0,class:"d-block invalid-feedback"},dd={class:"col"},ud={class:"form-floating mb-2"},cd=["readonly"],md=["value"],fd={key:0,class:"d-block invalid-feedback"},pd={key:0},vd={class:"d-flex flex-row justify-content-start"},gd={key:0,class:"d-inline invalid-feedback"},bd={class:"table-responsive border mt-1"},yd={class:"table mb-0 caption-top"},$d={class:"align-middle"},wd=["onUpdate:modelValue"],hd=["value"],_d=["onUpdate:modelValue"],kd=["value"],Sd=["onClick"],Td={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,route:F,axios:V,utils:j,toasts:Q,close:D,closeWithReturnUrl:U,security:c}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),I=n,g=me({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),z=(a,l,C)=>a.length>0,X={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",z),$each:se.forEach({path:{required:se.withMessage("Path is required.",oe)},sourceGroupId:{required:se.withMessage("Source Group is required.",oe)}}),$autoDirty:!0,$lazy:!0}}},i=be(X,g);de(async()=>{await b(),await W()});const b=async()=>{try{await V.get("/api/v1/sourcegroups/lookup/").then(l=>{g.lookups.sourceGroups=l.data})}catch(a){M.value=j.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},W=async()=>{try{if(await V.get("/api/v1/sourcelocations/lookup/").then(l=>{g.lookups.sourceLocations=l.data}),g.lookups.sourceLocations.length===1){const l=g.lookups.sourceLocations[0];g.selected.sourceLocation=l,await y()}}catch(a){M.value=j.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},y=async()=>{const a=g.selected.sourceLocation;g.item.sourceLocationId=a.id,await k(a.baseUrl)},k=async a=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await V.get(l).then($=>{g.lookups.videos=$.data,g.lookups.videos.length===1&&(g.item.videoId=g.lookups.videos[0].id)});const C=F.query.videoId;if(C){const $=g.lookups.videos.find(m=>m.id==C);$&&(g.selected.video=$,await v())}}catch(l){M.value=j.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},v=async()=>{g.item.videoId=g.selected.video.id,await _(g.item.videoId)},_=async a=>{try{const l=`/api/v1/videos/${a}/formats`;await V.get(l).then(C=>{g.selected.video.formats=C.data})}catch(l){M.value=j.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},S=async()=>{const a=g;if(x.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const C=j.clone(a.item),$=a.item.packageConfigurations.filter(m=>m.selectedFormat&&m.sourceGroupId);$.forEach(m=>{const K=m.selectedFormat;m.path=K.path,m.format=K.format,delete m.selectedFormat}),C.packageConfigurations=$,delete C.video,await V.post("/api/v1/vodSources/",C).then(m=>{debugger;Q.success("Add VOD Source","VOD source added",{onClose:async()=>{const K=`${I.urlView}/${m.data}`;await G.push(K)}})})}catch(C){M.value=j.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{x.value=!1}},d=()=>{const a={sourceGroupId:null,selectedFormat:null},l=g.selected.video;if(l){const C=l.formats.find($=>$.formatName==="HLS");a.path=`${C.serverUrl}${C.path}`}g.item.packageConfigurations.push(a)},r=a=>{g.item.packageConfigurations.splice(a,1)};return(a,l)=>{const C=ee("PageHeader"),$=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(C,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:l[0]||(l[0]=m=>S()),class:"btn btn-primary"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ed),e("button",{onClick:l[1]||(l[1]=m=>o(U)(I.urlMain)),class:"btn btn-secondary ms-1"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N($,{errorMessage:o(M),vuelidate:o(i)},{default:q(()=>[e("div",null,[e("div",td,[e("div",sd,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=m=>g.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,g.item.name]]),l[8]||(l[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(i).item.name.$error?(t(),s("div",od,[(t(!0),s(O,null,L(o(i).item.name.$errors,m=>(t(),s("div",{key:m.$uid},u(m.$message),1))),128))])):A("",!0)])]),e("div",ad,[e("div",ld,[e("div",nd,[R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=m=>g.selected.sourceLocation=m),onChange:l[4]||(l[4]=m=>y()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(g.lookups.sourceLocations,m=>(t(),s("option",{value:m},u(m.name),9,rd))),256))],544),[[ue,g.selected.sourceLocation]]),l[9]||(l[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(i).item.sourceLocationId.$error?(t(),s("div",id,[(t(!0),s(O,null,L(o(i).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},u(m.$message),1))),128))])):A("",!0)])]),e("div",dd,[e("div",ud,[R(e("select",{"onUpdate:modelValue":l[5]||(l[5]=m=>g.selected.video=m),onChange:v,class:"form-select",id:"videoId",readonly:g.item.packageConfigurations.length>0},[(t(!0),s(O,null,L(g.lookups.videos,m=>(t(),s("option",{value:m},u(m.name),9,md))),256))],40,cd),[[ue,g.selected.video]]),l[10]||(l[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(i).item.videoId.$error?(t(),s("div",fd,[(t(!0),s(O,null,L(o(i).item.videoId.$errors,m=>(t(),s("div",{key:m.$uid},u(m.$message),1))),128))])):A("",!0)])])]),g.item.videoId?(t(),s("div",pd,[e("div",vd,[e("fieldset",null,[e("legend",null,[l[12]||(l[12]=J(" Package Configurations ")),o(i).item.packageConfigurations.$error?(t(),s("span",gd,l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):A("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:d,class:"btn btn-outline-primary"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",bd,[e("table",yd,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",$d,[(t(!0),s(O,null,L(g.item.packageConfigurations,(m,K)=>(t(),s("tr",null,[e("td",null,u(K+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":B=>m.selectedFormat=B,class:"form-select",id:"videoId"},[(t(!0),s(O,null,L(g.selected.video.formats,B=>(t(),s("option",{value:B},u(B.path),9,hd))),256))],8,wd),[[ue,m.selectedFormat]]),o(i).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(i).item.packageConfigurations.$each.$response.$errors[K].path,B=>(t(),s("div",{key:B,class:"d-block invalid-feedback"},u(B.$message),1))),128)):A("",!0)]),e("td",null,[m.selectedFormat?(t(),s(O,{key:0},[J(u(m.selectedFormat.formatName),1)],64)):A("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":B=>m.sourceGroupId=B,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(g.lookups.sourceGroups,B=>(t(),s("option",{value:B.id},u(B.name),9,kd))),256))],8,_d),[[ue,m.sourceGroupId]]),o(i).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(i).item.packageConfigurations.$each.$response.$errors[K].path,B=>(t(),s("div",{key:B,class:"d-block invalid-feedback"},u(B.$message),1))),128)):A("",!0)])]),e("td",null,[e("button",{onClick:B=>r(K),class:"btn btn-outline-warning"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Sd)])]))),256))])])])])):A("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Md=["disabled"],Id={key:0},Cd={class:"col"},xd={class:"form-floating mb-2"},Vd={key:0,class:"d-block invalid-feedback"},Pd={class:"row row-cols-1 row-cols-sm-2"},Od={class:"col"},Ad={class:"form-floating mb-2"},Hd=["value"],Ud={key:0,class:"d-block invalid-feedback"},Dd={class:"col"},Ld={class:"form-floating mb-2"},Ed=["disabled"],qd=["value"],Bd={key:0,class:"d-block invalid-feedback"},Nd={key:0},Rd={class:"d-flex flex-row justify-content-between mt-3"},Fd={key:0,class:"d-inline invalid-feedback"},zd={class:"table-responsive border mt-1"},Gd={class:"table mb-0 caption-top"},jd={class:"input-group mb-1"},Yd=["onUpdate:modelValue"],Wd=["onUpdate:modelValue"],Kd=["value"],Jd=["onUpdate:modelValue"],Qd=["onClick"],Xd={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),U=n,c=me({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),I=(a,l,C)=>a.length>0,g={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",I),$each:se.forEach({path:{required:se.withMessage("Path is required.",oe)},sourceGroupId:{required:se.withMessage("Source Group is required.",oe)}})}}},z=be(g,c);de(async()=>{await X(),await b(),await W()});const X=async()=>{await i()},i=async()=>{const a=c;if(!x.value)try{x.value=!0,M.value="",c.item=null;const l=`/api/v1/vodsources/${U.id}/`;await F.get(l).then(C=>{a.item=C.data;const $=a.item,m=V.moment.utc(a.item.video.durationInMillis).format("HH:mm:ss");$.video.duration=m})}catch(l){M.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{x.value=!1}},b=async()=>{try{await F.get("/api/v1/sourcegroups/lookup/").then(l=>{c.lookups.sourceGroups=l.data})}catch(a){M.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},W=async()=>{try{if(await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.sourceLocations=l.data}),c.lookups.sourceLocations.length>0){const l=c.lookups.sourceLocations.find(C=>C.id===c.item.sourceLocationId);c.selected.sourceLocation=l,await y()}}catch(a){M.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},y=async()=>{const a=c.selected.sourceLocation;c.item.sourceLocationId=a.id,await k(a.baseUrl)},k=async a=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await F.get(l).then(C=>{if(c.lookups.videos=C.data,c.lookups.videos.length>0){const $=c.lookups.videos.find(m=>m.id==c.item.videoId);c.selected.video=$}})}catch(l){M.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},v=async()=>{c.item.videoId=c.selected.video.id,await _(c.item.videoId)},_=async a=>{try{const l=`/api/v1/videos/${a}/formats`;await F.get(l).then(C=>{c.selected.video.formats=C.data;debugger})}catch(l){M.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},S=async()=>{const a=c;if(x.value)return;if(!await z.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const C=V.clone(a.item);C.videoId=c.selected.video.id,delete C.video,await F.put("/api/v1/vodsources/",C).then($=>{j.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const m=`${U.urlView}/${U.id}`;await G.push(m)}})})}catch(C){M.value=V.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{x.value=!1}},d=()=>{debugger;const a={path:"",sourceGroupId:null,type:"HLS"},l=c.item.video;if(l){const C=l.formats.find($=>$.formatName==="HLS");debugger;a.path=`${C.serverUrl}${C.path}`}c.item.packageConfigurations.push(a)},r=a=>{c.item.packageConfigurations.splice(a,1)};return(a,l)=>{const C=ee("router-link"),$=ee("PageHeader"),m=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(z).$dirty&&o(z).$invalid,onClick:l[0]||(l[0]=K=>S()),class:"btn btn-primary"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Md),e("button",{onClick:l[1]||(l[1]=K=>X()),class:"btn btn-secondary ms-2"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(C,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:q(()=>l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(m,{errorMessage:o(M),vuelidate:o(z)},{default:q(()=>[c.item?(t(),s("div",Id,[e("div",Cd,[e("div",xd,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=K=>c.item.name=K),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,c.item.name]]),l[9]||(l[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(z).item.name.$error?(t(),s("div",Vd,[(t(!0),s(O,null,L(o(z).item.name.$errors,K=>(t(),s("div",{key:K.$uid},u(K.$message),1))),128))])):A("",!0)])]),e("div",Pd,[e("div",Od,[e("div",Ad,[R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=K=>c.selected.sourceLocation=K),onChange:l[4]||(l[4]=K=>y()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(c.lookups.sourceLocations,K=>(t(),s("option",{value:K},u(K.name),9,Hd))),256))],544),[[ue,c.selected.sourceLocation]]),l[10]||(l[10]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(z).item.sourceLocationId.$error?(t(),s("div",Ud,[(t(!0),s(O,null,L(o(z).item.sourceLocationId.$errors,K=>(t(),s("div",{key:K.$uid},u(K.$message),1))),128))])):A("",!0)])]),e("div",Dd,[e("div",Ld,[R(e("select",{"onUpdate:modelValue":l[5]||(l[5]=K=>c.selected.video=K),onChange:v,class:"form-select",id:"videoId",disabled:c.item.packageConfigurations.length>0},[(t(!0),s(O,null,L(c.lookups.videos,K=>(t(),s("option",{value:K},u(K.name),9,qd))),256))],40,Ed),[[ue,c.selected.video]]),l[11]||(l[11]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(z).item.videoId.$error?(t(),s("div",Bd,[(t(!0),s(O,null,L(o(z).item.videoId.$errors,K=>(t(),s("div",{key:K.$uid},u(K.$message),1))),128))])):A("",!0)])])]),c.item.videoId?(t(),s("div",Nd,[e("div",Rd,[e("div",null,[e("h5",null,[l[13]||(l[13]=J(" Package Configurations ")),o(z).item.packageConfigurations.$error?(t(),s("span",Fd,l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):A("",!0)])]),e("button",{onClick:d,class:"btn btn-outline-primary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Package Configuration ")]))]),e("div",zd,[e("table",Gd,[l[17]||(l[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.packageConfigurations,(K,B)=>(t(),s("tr",null,[e("td",null,u(B+1),1),e("td",null,[e("div",jd,[R(e("input",{"onUpdate:modelValue":T=>K.path=T,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Yd),[[Z,K.path]])]),o(z).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(z).item.packageConfigurations.$each.$response.$errors[B].path,T=>(t(),s("div",{key:T,class:"d-block invalid-feedback"},u(T.$message),1))),128)):A("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":T=>K.sourceGroupId=T,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(c.lookups.sourceGroups,T=>(t(),s("option",{value:T.id},u(T.name),9,Kd))),256))],8,Wd),[[ue,K.sourceGroupId]]),o(z).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(z).item.packageConfigurations.$each.$response.$errors[B].path,T=>(t(),s("div",{key:T,class:"d-block invalid-feedback"},u(T.$message),1))),128)):A("",!0)])]),e("td",null,[R(e("select",{"onUpdate:modelValue":T=>K.type=T,class:"form-select",id:"type"},l[15]||(l[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Jd),[[ue,K.type]])]),e("td",null,[e("button",{onClick:T=>r(B),class:"btn btn-outline-warning"},l[16]||(l[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Qd)])]))),256))])])])])):A("",!0)])):A("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Zd={class:"ms-2"},eu={class:"input-group"},tu=["value"],su={class:"ms-1"},ou={class:"input-group"},au=["value"],lu={class:"ms-1"},nu={class:"input-group"},ru={class:"ms-1"},iu={class:"input-group"},du={class:"table-responsive border shadow-sm"},uu={class:"table table-hover mb-0"},cu={class:"text-center"},mu=["textContent"],fu={class:"d-flex flex-row justify-content-start"},pu={class:"mt-1"},vu=["src"],gu={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},bu={class:"ms-2"},yu={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},$u={class:"badge bg-primary me-1"},wu={key:0},hu={class:"badge bg-info me-1"},_u={class:"d-flex flex-row justify-content-start"},ku={class:"ms-2"},Su={class:"small"},Tu={class:"badge bg-secondary me-1"},Mu={class:"text-center"},Iu=["onUpdate:modelValue"],Cu="/api/v1/vodsources/search",xu={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:x,pageTitle:h,busy:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,closeWithReturnUrl:c,generateReturnUrl:I,security:g,filter:z,initializeFilter:X,getQuery:i,saveQuery:b,search:W,getRowNumber:y,setSelected:k,isSelected:v}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${w==null?void 0:w.userId}/vod-sources/search`,baseUrl:Cu,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(C,$)=>{const m=C.value,K=new URLSearchParams(window.location.search),B=JSON.parse(localStorage.getItem($))||{};m.query.category=K.get("category")||B.category||m.query.category||0,m.query.genre=K.get("genre")||B.genre||m.query.genre||0,m.query.sourceLocationId=K.get("slid")||B.sourceLocationId||m.query.sourceLocationId||""},getQuery:C=>["?c=",encodeURIComponent(C.query.criteria),"&p=",C.pageIndex,"&s=",C.pageSize,"&sf=",C.sortField,"&so=",C.sortOrder,"&category=",C.query.category,"&genre=",C.query.genre,"&slid=",C.query.sourceLocationId].join(""),saveQuery:(C,$)=>{localStorage.setItem($,JSON.stringify({criteria:C.query.criteria,pageIndex:C.pageIndex,pageSize:C.pageSize,sortField:C.sortField,sortOrder:C.sortOrder,visible:C.visible,category:C.query.category,genre:C.query.genre,sourceLocationId:C.query.sourceLocationId}))}}),_=$e(()=>{const C=z.value;return C&&C.items?C.items.filter(K=>K.selected):[]});de(async()=>{X(),await a(),await l(),await W()});const S=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!P.value){F.value=null;try{P.value=!0;const m={vodSourceIds:_.value.map(K=>K.vodSourceId)};await j.post("/api/v1/vodsources/publish/",m).then(K=>{D.success("Publish VODs","VODs was published.",{async onClose(){}})}),P.value=!1,await W()}catch($){F.value=Q.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{P.value=!1}}},d=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!P.value){F.value=null;try{P.value=!0;const m={vodSourceIds:_.value.map(K=>K.vodSourceId)};await j.post("/api/v1/vodsources/unpublish/",m).then(K=>{D.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),P.value=!1,await W()}catch($){F.value=Q.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{P.value=!1}}},r=()=>{const C=z.value.items;if(C.length<1)return;const $=!C[0].selected;z.value.items.forEach(m=>{m.selected=$})},a=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then($=>{z.value.lookups.sourceLocations=$.data})}catch(C){F.value=Q.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},l=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(C=>{const $=C.data;z.value.lookups.genres=$})}catch(C){F.value=Q.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}};return re(!1),(C,$)=>{const m=ee("router-link"),K=ee("PageHeader"),B=ee("m-pagination"),T=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(K,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(h)},{default:q(()=>[N(m,{to:n.urlAdd,class:"btn btn-primary"},{default:q(()=>$[6]||($[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zd,[e("div",eu,[$[8]||($[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),R(e("select",{"onUpdate:modelValue":$[0]||($[0]=p=>o(z).query.sourceLocationId=p),class:"form-select"},[$[7]||($[7]=e("option",{value:""},"All",-1)),(t(!0),s(O,null,L(o(z).lookups.sourceLocations,p=>(t(),s("option",{value:p.id},u(p.name),9,tu))),256))],512),[[ue,o(z).query.sourceLocationId]])])]),e("div",su,[e("div",ou,[$[9]||($[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":$[1]||($[1]=p=>o(z).query.genre=p),class:"form-select"},[(t(!0),s(O,null,L(o(z).lookups.genres,p=>(t(),s("option",{value:p.id},u(p.name),9,au))),256))],512),[[ue,o(z).query.genre]])])]),e("div",lu,[e("div",nu,[$[11]||($[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":$[2]||($[2]=p=>o(z).query.category=p),class:"form-select"},$[10]||($[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(z).query.category]])])]),e("div",ru,[e("div",iu,[R(e("input",{"onUpdate:modelValue":$[3]||($[3]=p=>o(z).query.criteria=p),onKeyup:$[4]||($[4]=Ue(p=>o(W)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(z).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:$[5]||($[5]=p=>o(W)(1))},$[12]||($[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(T,{errorMessage:o(F)},{default:q(()=>[e("div",du,[e("table",uu,[e("thead",null,[e("tr",null,[$[16]||($[16]=e("td",{class:"text-center"},"#",-1)),$[17]||($[17]=e("th",null,"Name",-1)),$[18]||($[18]=e("th",null,"Video Title",-1)),e("th",cu,[_.value.length?(t(),s(O,{key:0},[e("button",{onClick:S,class:"btn btn-sm btn-primary"},$[13]||($[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:d,class:"btn btn-sm btn-warning ms-1"},$[14]||($[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):A("",!0),e("button",{onClick:r,class:"btn btn-sm btn-outline-primary ms-2"},$[15]||($[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(o(z).items,(p,E)=>(t(),s("tr",{key:p.vodSourceId},[e("td",{textContent:u(o(y)(E)),class:"text-center"},null,8,mu),e("td",null,[e("div",fu,[e("div",null,[p.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(p.video.thumbnails,te=>(t(),s("div",pu,[e("img",{src:te.url,class:"img-fuild border",width:"128"},null,8,vu)]))),256)):(t(),s("img",gu))]),e("div",bu,[N(m,{to:`${n.urlView}/${p.vodSourceId}`,class:"d-inline-block text-truncate link-offset-2"},{default:q(()=>[p.arn?(t(),s("span",yu)):A("",!0),J(u(p.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,L(p.video.categories,te=>(t(),s("div",null,[e("span",$u,u(te.categoryName),1)]))),256)),p.video.genres.length>0?(t(),s("div",wu,[(t(!0),s(O,null,L(p.video.genres,te=>(t(),s("span",hu,u(te.genreName),1))),256))])):A("",!0)])])])]),e("td",null,[e("div",_u,[e("div",ku,[N(m,{to:`${n.urlViewVideo}/${encodeURIComponent(p.video.videoId)}/${o(I)()}`,class:"link-offset-2"},{default:q(()=>[J(u(p.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Su,u(o(Q).moment.utc(p.video.durationInMillis).format("HH:mm:ss")),1)]),p.video.formats.length>0?(t(!0),s(O,{key:0},L(p.video.formats,te=>(t(),s("span",Tu,u(te.formatName),1))),256)):A("",!0)])])]),e("td",Mu,[R(e("input",{"onUpdate:modelValue":te=>p.selected=te,type:"checkbox",class:"form-check-input"},null,8,Iu),[[He,p.selected]])])]))),128))]),_:1},512),[[Te,o(z).items.length>0]])])]),N(B,{filter:o(z),search:o(W),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Vu=["id"],Pu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Ou={class:"modal-content"},Au={class:"modal-header"},Hu={class:"modal-title"},Uu={class:"modal-body"},Du={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Lu=["innerHTML"],Eu={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qu={class:"container"},Bu={class:"col"},Nu={class:"form-floating mb-2"},Ru=["value"],Fu={key:0,class:"d-block invalid-feedback"},zu={class:"col"},Gu={class:"form-floating mb-2"},ju={key:0,class:"d-block invalid-feedback"},Yu={class:"col"},Wu={class:"form-floating mb-2"},Ku={key:0,class:"d-block invalid-feedback"},Ju={class:"modal-footer"},Qu=["disabled"],Xu={__name:"_addPackageConfiguration",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),z=w;re();const X=re("modalAddChannelOutput"),i=me({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),b={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("VOD Source is required.",oe),$autoDirty:!0,$lazy:!0},path:{required:se.withMessage("Path is required.",oe),$autoDirty:!0,$lazy:!0},type:{required:se.withMessage("Type is required.",oe),$autoDirty:!0,$lazy:!0}}},W=be(b,i);de(async()=>{W.value.$reset()});const y=async()=>{await k()},k=async()=>{try{await D.get("/api/v1/sourceGroups/lookup/").then(r=>{i.lookups.sourceGroups=r.data,i.lookups.sourceGroups.length===1&&(i.item.sourceGroupId=i.lookups.sourceGroups[0].id)})}catch(d){j.value=U.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},v=async d=>{const r=i;G.value.clear(),j.value="",r.lookups={sourceGroups:[]},r.item={sourceGroupId:null,vodSourceId:d,path:null,type:null},await y(),W.value.$reset();var a=document.getElementById(X.value),l=he.getOrCreateInstance(a);l.show()},_=async()=>{var d=document.getElementById(X.value),r=he.getOrCreateInstance(d);r.hide(),z("refresh")},S=async()=>{const d=i;if(P.value)return;const r=await W.value.$validate();debugger;if(!r){window.scrollTo(0,0);return}try{P.value=!0,j.value="";const a=d.item;await D.post("/api/v1/vodSources/package-configurations/",a).then(l=>{c.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await _()}catch(a){j.value=U.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:v,close:_}),(d,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Pu,[e("div",Ou,[e("div",Au,[e("h5",Hu,[r[5]||(r[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:r[0]||(r[0]=a=>_()),"aria-label":"Close"})]),e("div",Uu,[o(j)?(t(),s("div",Du,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,Lu)])):A("",!0),o(G).size>0?(t(),s("div",Eu,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),a=>(t(),s("li",null,u(a),1))),256))])])):A("",!0),e("div",qu,[e("div",Bu,[e("div",Nu,[R(e("select",{"onUpdate:modelValue":r[1]||(r[1]=a=>i.item.sourceGroupId=a),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(i.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},u(a.name),9,Ru))),256))],512),[[ue,i.item.sourceGroupId]]),r[8]||(r[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(W).item.sourceGroupId.$error?(t(),s("div",Fu,[(t(!0),s(O,null,L(o(W).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},u(a.$message),1))),128))])):A("",!0)])]),e("div",zu,[e("div",Gu,[R(e("select",{"onUpdate:modelValue":r[2]||(r[2]=a=>i.item.type=a),class:"form-select",id:"type"},r[9]||(r[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,i.item.type]]),r[10]||(r[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(W).item.type.$error?(t(),s("div",ju,[(t(!0),s(O,null,L(o(W).item.type.$errors,a=>(t(),s("div",{key:a.$uid},u(a.$message),1))),128))])):A("",!0)])]),e("div",Yu,[e("div",Wu,[R(e("input",{"onUpdate:modelValue":r[3]||(r[3]=a=>i.item.path=a),class:"form-control",id:"path"},null,512),[[Z,i.item.path]]),r[11]||(r[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(W).item.path.$error?(t(),s("div",Ku,[(t(!0),s(O,null,L(o(W).item.path.$errors,a=>(t(),s("div",{key:a.$uid},u(a.$message),1))),128))])):A("",!0)])])])]),e("div",Ju,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:r[4]||(r[4]=a=>S()),class:"btn btn-primary",type:"button"},r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qu),r[13]||(r[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vu))}},Zu=["id"],ec={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},tc={class:"modal-content"},sc={class:"modal-header"},oc={class:"modal-title"},ac={class:"modal-body"},lc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},nc=["innerHTML"],rc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ic={class:"container"},dc={class:"col"},uc={class:"form-floating mb-2"},cc={class:"col"},mc={class:"form-floating mb-2"},fc={key:0,class:"d-block invalid-feedback"},pc={class:"col"},vc={class:"form-floating mb-2"},gc={key:0,class:"d-block invalid-feedback"},bc={class:"col"},yc={class:"form-floating mb-2"},$c={key:0,class:"d-block invalid-feedback"},wc={class:"modal-footer"},hc=["disabled"],_c={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),z=w,X=re(),i=re("modalAddPlaybackConfiguration"),b=me({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),W={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},y=be(W,b);de(async()=>{y.value.$reset()});const k=async(S,d)=>{X.value=S;const r=b;G.value.clear(),j.value="";const a=d,l=a.lastIndexOf("/"),C=a.substring(0,l),$="ad_campaign_"+a.substring(l+1).replace(".","_");r.item={name:$,originalVideoContentSourceUrl:d,videoContentSourceUrl:C,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},y.value.$reset();var m=document.getElementById(i.value),K=he.getOrCreateInstance(m);K.show()},v=async()=>{var S=document.getElementById(i.value),d=he.getOrCreateInstance(S);d.hide(),z("refresh")},_=async()=>{const S=b;if(P.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,j.value="";const r=S.item;r.vodSourceId=X.value,await D.post("/api/v1/playbackconfigurations/vodsource",r).then(a=>{c.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await v()}catch(r){j.value=U.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:k,close:v}),(S,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ec,[e("div",tc,[e("div",sc,[e("h5",oc,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=r=>v()),"aria-label":"Close"})]),e("div",ac,[o(j)?(t(),s("div",lc,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,nc)])):A("",!0),o(G).size>0?(t(),s("div",rc,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),r=>(t(),s("li",null,u(r),1))),256))])])):A("",!0),e("div",ic,[e("div",dc,[e("div",uc,[R(e("input",{"onUpdate:modelValue":d[1]||(d[1]=r=>b.item.originalVideoContentSourceUrl=r),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Z,b.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",cc,[e("div",mc,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=r=>b.item.name=r),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,b.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",fc,[(t(!0),s(O,null,L(o(y).item.name.$errors,r=>(t(),s("div",{key:r.$uid},u(r.$message),1))),128))])):A("",!0)])]),e("div",pc,[e("div",vc,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=r=>b.item.videoContentSourceUrl=r),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,b.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(y).item.videoContentSourceUrl.$error?(t(),s("div",gc,[(t(!0),s(O,null,L(o(y).item.videoContentSourceUrl.$errors,r=>(t(),s("div",{key:r.$uid},u(r.$message),1))),128))])):A("",!0)])]),e("div",bc,[e("div",yc,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=r=>b.item.adDecisionServerUrl=r),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,b.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(y).item.adDecisionServerUrl.$error?(t(),s("div",$c,[(t(!0),s(O,null,L(o(y).item.adDecisionServerUrl.$errors,r=>(t(),s("div",{key:r.$uid},u(r.$message),1))),128))])):A("",!0)])])])]),e("div",wc,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:d[5]||(d[5]=r=>_()),class:"btn btn-primary",type:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hc),d[15]||(d[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Zu))}},kc={key:0},Sc={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Tc={class:"nav-item",role:"presentation"},Mc={class:"nav-item",role:"presentation"},Ic={class:"nav-item",role:"presentation"},Cc={class:"nav-item",role:"presentation"},xc={class:"nav-item",role:"presentation"},Vc={class:"nav-item",role:"presentation"},Pc={class:"tab-content",id:"myTabContent"},Oc={class:"mt-2"},Ac={class:"col"},Hc={class:"form-floating mb-2"},Uc={class:"mt-2"},Dc={class:"badge bg-info me-1"},Lc={class:"mt-2"},Ec={class:"row row-cols-sm-2"},qc={class:"col"},Bc={class:"form-floating mb-2"},Nc={class:"form-control"},Rc={class:"col"},Fc={class:"form-floating mb-2"},zc={class:"mt-1"},Gc={class:"badge bg-info me-1"},jc={class:"badge bg-primary me-1"},Yc={class:"table-responsive border mt-1"},Wc={class:"table table-hover mb-0"},Kc={class:"table-group-divider"},Jc={class:"align-middle"},Qc={class:"text-center"},Xc={class:"mt-2"},Zc={class:"mt-2 text-end"},em={class:"table-responsive border mt-2"},tm={class:"table table-hover mb-0 caption-top"},sm={class:"text-end"},om=["onClick"],am={class:"mt-2"},lm={class:"mt-1"},nm=["id"],rm={class:"text-end"},im={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){const f=n,{appTitle:w,pageTitle:x,busy:h,isDirty:P,validations:M,infoMessage:G,warningMessage:F,errorMessage:V,router:j,axios:Q,utils:D,toasts:U,close:c,closeWithReturnUrl:I,generateReturnUrl:g,security:z}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});Se("$config");const X=ge();X.user;const i=me({user:X.user,item:null,hls:null}),b=re();re(null);const W=re();de(async()=>{await _();const $=D.getPageTab("vodSource")||"information-tab";y($)}),Ee(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const y=$=>{D.setPageTab("vodSource",$),b.value=$},k=$=>$!==b.value?"":"active",v=$=>$!==b.value?"":"show active",_=async()=>{const $=i;if(!h.value)try{h.value=!0,V.value="",i.item=null;const m=`/api/v1/vodsources/${f.id}/`;await Q.get(m).then(K=>{$.item=K.data;const B=$.item,T=D.moment.utc($.item.video.durationInMillis).format("HH:mm:ss");B.video.duration=T}),C()}catch(m){V.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}},S=async()=>{await _()},d=()=>{W.value.open(f.id)},r=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!h.value){V.value=null;try{h.value=!0;const m={vodSourceIds:[f.id]};await Q.post("/api/v1/vodsources/publish/",m).then(K=>{U.success("Publish VOD","VOD was published.",{async onClose(){}})}),h.value=!1,await S()}catch(m){V.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!h.value){V.value=null;try{h.value=!0;const m={vodSourceIds:[f.id]};await Q.post("/api/v1/vodsources/unpublish/",m).then(K=>{U.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),h.value=!1,await S()}catch(m){V.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}}},l=async $=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!h.value){V.value=null;try{h.value=!0,await Q.delete(`/api/v1/vodSources/package-configurations/${$}/`).then(K=>{U.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),h.value=!1,await S()}catch(K){V.value=D.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{h.value=!1}}},C=()=>{if(Hls.isSupported()){i.hls&&i.hls.destroy();const $=`video-${i.item.vodSourceId}`,m=document.getElementById($),K=i.item.video.formats.find(T=>T.formatName==="HLS"),B=`${K.serverUrl}${K.path}`;i.hls=D.createHlsStream(m,B,!1)}};return($,m)=>{const K=ee("router-link"),B=ee("PageHeader"),T=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(B,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(x)},{default:q(()=>[i.item?(t(),s(O,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=p=>a()),class:"ms-1 btn btn-warning"},m[15]||(m[15]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=p=>r()),class:"ms-1 btn btn-primary"},m[16]||(m[16]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):A("",!0),N(K,{to:`${n.urlEdit}/${n.id}`,class:"ms-2 btn btn-primary"},{default:q(()=>m[17]||(m[17]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:m[2]||(m[2]=p=>S()),class:"ms-2 btn btn-secondary"},m[18]||(m[18]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=p=>o(I)(f.urlMain)),class:"btn btn-secondary ms-1"},m[19]||(m[19]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(T,{errorMessage:o(V)},{default:q(()=>[i.item?(t(),s("div",kc,[e("div",null,[e("ul",Sc,[e("li",Tc,[e("button",{onClick:m[4]||(m[4]=p=>y("information-tab")),class:le([k("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Mc,[e("button",{onClick:m[5]||(m[5]=p=>y("packageConfigurations-tab")),class:le([k("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Ic,[e("button",{onClick:m[6]||(m[6]=p=>y("viewStream-tab")),class:le([k("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View ",2)]),e("li",Cc,[e("button",{onClick:m[7]||(m[7]=p=>y("channels-tab")),class:le([k("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},m[20]||(m[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Channels ")]),2)]),e("li",xc,[e("button",{onClick:m[8]||(m[8]=p=>y("programs-tab")),class:le([k("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},m[21]||(m[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Programs ")]),2)]),e("li",Vc,[e("button",{onClick:m[9]||(m[9]=p=>y("programTemplates-tab")),class:le([k("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Program Templates ")]),2)])]),e("div",Pc,[e("div",{class:le([v("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Oc,[e("div",Ac,[e("div",Hc,[R(e("input",{"onUpdate:modelValue":m[10]||(m[10]=p=>i.item.name=p),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.name]]),m[23]||(m[23]=e("label",{for:"name"},"Name",-1))])]),e("div",Uc,[e("div",null,[(t(!0),s(O,null,L(i.item.types,p=>(t(),s("span",Dc,u(p.typeName),1))),256))])]),e("div",Lc,[m[27]||(m[27]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Ec,[e("div",qc,[e("div",Bc,[e("div",Nc,[N(K,{to:`${n.urlViewVideo}/${i.item.video.videoId}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u(i.item.video.title),1)]),_:1},8,["to"])]),m[24]||(m[24]=e("label",{for:"title"},"Title",-1))])]),e("div",Rc,[e("div",Fc,[R(e("input",{"onUpdate:modelValue":m[11]||(m[11]=p=>i.item.video.duration=p),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[Z,i.item.video.duration]]),m[25]||(m[25]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",zc,[(t(!0),s(O,null,L(i.item.video.genres,p=>(t(),s("span",Gc,u(p.genreName),1))),256)),(t(!0),s(O,null,L(i.item.video.categories,p=>(t(),s("span",jc,u(p.categoryName),1))),256))]),e("div",Yc,[e("table",Wc,[m[26]||(m[26]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Kc,[(t(!0),s(O,null,L(i.item.video.formats,(p,E)=>(t(),s("tr",Jc,[e("td",Qc,u(E+1),1),e("td",null,u(p.formatName),1),e("td",null,u(p.serverUrl),1),e("td",null,u(p.path),1)]))),256))])])])])])])],2),e("div",{class:le([v("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Xc,[e("div",Zc,[e("button",{onClick:m[12]||(m[12]=p=>d()),class:"btn btn-primary"},m[28]||(m[28]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Add ")]))]),e("div",em,[e("table",tm,[m[30]||(m[30]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.packageConfigurations,(p,E)=>(t(),s("tr",{key:p.packageConfigurationId,class:"align-middle"},[e("td",null,u(E+1),1),e("td",null,u(p.path),1),e("td",null,u(p.sourceGroup.name),1),e("td",null,u(p.type),1),e("td",sm,[e("button",{onClick:te=>l(p.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},m[29]||(m[29]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,om)])]))),128))]),_:1},512),[[Te,i.item.packageConfigurations.length>0]])])])])],2),e("div",{class:le([v("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",am,[e("div",lm,[e("video",{id:`video-${i.item.vodSourceId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,nm),e("div",rm,[e("button",{onClick:m[13]||(m[13]=p=>i.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:le([v("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},m[32]||(m[32]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:le([v("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},m[33]||(m[33]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:le([v("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},m[34]||(m[34]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):A("",!0)]),_:1},8,["errorMessage"]),N(Xu,{ref_key:"modalAddPackageConfiguration",ref:W,onRefresh:S},null,512),N(_c,{ref:"modalAddPlaybackConfiguration",onRefresh:m[14]||(m[14]=p=>S())},null,512)])]),_:1})}}},dm=["disabled"],um={class:"container1"},cm={class:"row"},mm={class:"col-12 col-lg-6"},fm={class:"col"},pm={class:"form-floating mb-2"},vm=["value"],gm={key:0,class:"d-block invalid-feedback"},bm={class:"col"},ym={class:"form-floating mb-2"},$m=["disabled"],wm=["value"],hm={key:0,class:"d-block invalid-feedback"},_m={class:"col-12 col-lg-6"},km={class:"col"},Sm={class:"form-floating mb-2"},Tm={key:0,class:"d-block invalid-feedback"},Mm={class:"row row-cols-1 row-cols-sm-3 mt-2"},Im={class:"col"},Cm={class:"form-floating mb-2"},xm={key:0},Vm={key:1},Pm={key:2},Om={key:3,class:"d-block invalid-feedback"},Am={class:"col"},Hm={class:"form-floating mb-2"},Um={key:0},Dm={key:1},Lm={key:2,class:"d-block invalid-feedback"},Em={class:"col"},qm={class:"form-floating mb-2"},Bm={key:0,class:"mt-3"},Nm={class:"table-responsive border mt-1"},Rm={class:"table table-borderless table-sm mb-0 align-middle"},Fm={class:"text-center"},zm=["onUpdate:modelValue","onChange"],Gm={key:0},jm=["onUpdate:modelValue","onChange"],Ym={class:"text-start"},Wm=["onClick"],Km={class:"col mt-2"},Jm={class:"row row-cols-1 row-cols-sm-2"},Qm={class:"col"},Xm={class:"form-floating mb-2"},Zm={class:"col"},ef={class:"form-floating mb-2"},tf={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),U=n,c=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),I={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},g=be(I,c),z=$e(()=>{const T=V.moment;if(c.startOffsetTime&&c.startOffsetTime!=="00:00:00"&&V.isValidTime(c.startOffsetTime)){const p=T().startOf("day"),E=p.format("YYYY-MM-DD ")+c.startOffsetTime,ne=T(E).subtract(p);return c.item.startOffsetMillis=ne.valueOf(),c.item.startOffsetMillis}return 0}),X=$e(()=>{const T=V.moment;if(c.endOffsetTime&&c.endOffsetTime!=="00:00:00"&&V.isValidTime(c.endOffsetTime)){const p=T().startOf("day"),E=p.format("YYYY-MM-DD ")+c.endOffsetTime,ne=T(E).subtract(p);return c.item.endOffsetMillis=ne.valueOf(),c.item.endOffsetMillis}return 0}),i=$e(()=>c.item.endOffsetMillis-c.item.startOffsetMillis),b=$e(()=>V.moment.utc(i.value).format("HH:mm:ss")),W=$e(()=>{const T=c.item.adBreaks;return T&&T.length>0?T.reduce((E,te,ne)=>E+te.durationInMillis,0):0}),y=$e(()=>{const T=i.value+W.value;return V.moment.utc(T).format("HH:mm:ss")}),k=$e(()=>V.moment.utc(W.value).format("HH:mm:ss"));de(async()=>{await v()}),Ee(()=>{c.hls&&(c.hls.stopLoad(),c.hls.destroy())});const v=async()=>{await _(),await l()},_=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(p=>{c.lookups.sourceLocations=p.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await S(c.item.sourceLocationId)}catch(T){M.value=V.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},S=async T=>{try{const p=`/api/v1/vodSources/lookup/source-location/${T}/?category=3`;await F.get(p).then(E=>{c.lookups.vodSources=E.data})}catch(p){M.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},d=async()=>{const T=c.selected.vodSource;c.item.vodSourceId=T.id,c.endOffsetTime=V.moment.utc(T.durationInMillis).format("HH:mm:ss"),await Promise.all([r(T.id),a(T.id)])},r=async T=>{try{let p=`/api/v1/vodSources/${T}/hls`;const E=await F.get(p).then(ne=>ne.data);if(c.hls){c.hls.loadSource(E);return}const te=document.getElementById("video-add-program-template");c.hls=V.createHlsStream(te,E,"Previewing filler slate.")}catch(p){M.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},a=async T=>{try{let p=`/api/v1/vodSources/${T}/blank-frames`;const E=await F.get(p).then(te=>te.data);E&&E.length>0&&(c.item.adBreaks=E.map(te=>{const ne=(te.endInMillis-te.startInMillis)/2+te.startInMillis;return{offsetTime:V.moment.utc(ne).format("HH:mm:ss"),offsetMillis:ne,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(p){M.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},l=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(p=>{c.lookups.adBreakSourceLocations=p.data})}catch(T){M.value=V.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},C=()=>{const T={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};c.item.adBreaks.push(T)},$=T=>{c.item.adBreaks.splice(T,1)},m=T=>{const p=V.moment,E=p().startOf("day"),te=E.format("YYYY-MM-DD ")+T.offsetTime,Y=p(te).subtract(E);T.offsetMillis=Y.valueOf()},K=T=>{const p=V.moment,E=p().startOf("day"),te=E.format("YYYY-MM-DD ")+T.durationTime,Y=p(te).subtract(E);T.durationInMillis=Y.valueOf()},B=async()=>{const T=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const E=V.clone(T.item),te=E.adBreaks.filter(ne=>ne.durationInMillis>0);E.adBreaks=te,await F.post("/api/v1/programtemplates/",E).then(ne=>{j.success("Add Program Template","Program template added.",{onClose:async()=>{const Y=`${U.urlView}/${ne.data}`;await G.push(Y)}})})}catch(E){M.value=V.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{x.value=!1}};return(T,p)=>{const E=ee("router-link"),te=ee("PageHeader"),ne=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(te,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:p[0]||(p[0]=Y=>B()),class:"btn btn-primary"},p[11]||(p[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,dm),N(E,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:q(()=>p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(ne,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[e("div",null,[e("div",um,[e("div",cm,[e("div",mm,[e("div",fm,[e("div",pm,[R(e("select",{"onUpdate:modelValue":p[1]||(p[1]=Y=>c.item.sourceLocationId=Y),onChange:p[2]||(p[2]=Y=>S(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(c.lookups.sourceLocations,Y=>(t(),s("option",{value:Y.id},u(Y.name),9,vm))),256))],544),[[ue,c.item.sourceLocationId]]),p[13]||(p[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(g).item.sourceLocationId.$error?(t(),s("div",gm,[(t(!0),s(O,null,L(o(g).item.sourceLocationId.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),e("div",bm,[e("div",ym,[R(e("select",{"onUpdate:modelValue":p[3]||(p[3]=Y=>c.selected.vodSource=Y),onChange:p[4]||(p[4]=Y=>d()),class:"form-select",id:"vodSourceId",disabled:c.item.adBreaks.length>0},[(t(!0),s(O,null,L(c.lookups.vodSources,Y=>(t(),s("option",{value:Y},u(o(V).moment.utc(Y.durationInMillis).format("HH:mm:ss"))+" - "+u(Y.name),9,wm))),256))],40,$m),[[ue,c.selected.vodSource]]),p[14]||(p[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(g).item.vodSourceId.$error?(t(),s("div",hm,[(t(!0),s(O,null,L(o(g).item.vodSourceId.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),p[15]||(p[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",_m,[e("div",km,[e("div",Sm,[R(e("input",{"onUpdate:modelValue":p[5]||(p[5]=Y=>c.item.name=Y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,c.item.name]]),p[16]||(p[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(g).item.name.$error?(t(),s("div",Tm,[(t(!0),s(O,null,L(o(g).item.name.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),e("div",Mm,[e("div",Im,[e("div",null,[e("div",Cm,[R(e("input",{"onUpdate:modelValue":p[6]||(p[6]=Y=>c.startOffsetTime=Y),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,c.startOffsetTime]]),p[17]||(p[17]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),z.value>0&&z.value<3e4?(t(),s("div",xm,p[18]||(p[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):A("",!0),z.value>X.value&&X.value>0?(t(),s("div",Vm,p[19]||(p[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):A("",!0),c.selected.vodSource&&z.value>=c.selected.vodSource.durationInMillis?(t(),s("div",Pm,p[20]||(p[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(g).item.startOffsetMillis.$error?(t(),s("div",Om,[(t(!0),s(O,null,L(o(g).item.startOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),e("div",Am,[e("div",null,[e("div",Hm,[R(e("input",{"onUpdate:modelValue":p[7]||(p[7]=Y=>c.endOffsetTime=Y),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,c.endOffsetTime]]),p[21]||(p[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),X.value>0&&X.value<3e4?(t(),s("div",Um,p[22]||(p[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):A("",!0),c.selected.vodSource&&X.value>c.selected.vodSource.durationInMillis?(t(),s("div",Dm,p[23]||(p[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(g).item.endOffsetMillis.$error?(t(),s("div",Lm,[(t(!0),s(O,null,L(o(g).item.endOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),e("div",Em,[e("div",qm,[R(e("input",{"onUpdate:modelValue":p[8]||(p[8]=Y=>b.value=Y),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,b.value]]),p[24]||(p[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),c.item.vodSourceId?(t(),s("div",Bm,[e("div",{class:"d-flex flex-row justify-content-between"},[p[26]||(p[26]=e("div",null,[e("h5",null," Ad Break ")],-1)),e("button",{onClick:C,class:"btn btn-outline-primary btn-sm"},p[25]||(p[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Nm,[e("table",Rm,[p[29]||(p[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.adBreaks,(Y,_e)=>(t(),s("tr",null,[e("td",Fm,u(_e+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>Y.offsetTime=we,onChange:we=>m(Y),type:"time",step:"1",class:"form-control"},null,40,zm),[[Z,Y.offsetTime]]),Y.offsetMillis>=c.selected.vodSource.durationInMillis?(t(),s("div",Gm,p[27]||(p[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>Y.durationTime=we,onChange:we=>K(Y),type:"time",step:"1",class:"form-control"},null,40,jm),[[Z,Y.durationTime]])]),e("td",Ym,[e("button",{onClick:we=>$(_e),class:"btn btn-outline-warning btn-sm"},p[28]||(p[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Wm)])]))),256))])]),p[30]||(p[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),J(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):A("",!0),e("div",Km,[p[33]||(p[33]=e("h5",null," Duration ",-1)),e("div",Jm,[e("div",Qm,[e("div",Xm,[R(e("input",{"onUpdate:modelValue":p[9]||(p[9]=Y=>k.value=Y),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,k.value]]),p[31]||(p[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Zm,[e("div",ef,[R(e("input",{"onUpdate:modelValue":p[10]||(p[10]=Y=>y.value=Y),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Z,y.value]]),p[32]||(p[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},sf=["disabled"],of={class:"container1"},af={class:"row"},lf={class:"col-12 col-lg-6"},nf={class:"col"},rf={class:"form-floating mb-2"},df=["value"],uf={key:0,class:"d-block invalid-feedback"},cf={class:"col"},mf={class:"form-floating mb-2"},ff=["value"],pf={key:0,class:"d-block invalid-feedback"},vf={class:"col-12 col-lg-6"},gf={class:"col"},bf={class:"form-floating mb-2"},yf={key:0,class:"d-block invalid-feedback"},$f={class:"row row-cols- row-cols-sm-3"},wf={class:"col"},hf={class:"form-floating mb-2"},_f={key:0},kf={key:1},Sf={key:2},Tf={key:3,class:"d-block invalid-feedback"},Mf={class:"col"},If={class:"form-floating"},Cf={key:0},xf={key:1},Vf={key:2,class:"d-block invalid-feedback"},Pf={class:"col"},Of={class:"form-floating mb-2"},Af={key:0,class:"mt-2"},Hf={class:"table-responsive border mt-1"},Uf={class:"table table-borderless table-sm mb-0 align-middle"},Df=["onUpdate:modelValue","onChange"],Lf={key:0},Ef=["onUpdate:modelValue","onChange"],qf=["onClick"],Bf={class:"col mt-2"},Nf={class:"row row-cols-1 row-cols-sm-2"},Rf={class:"col"},Ff={class:"form-floating mb-2"},zf={class:"col"},Gf={class:"form-floating mb-2"},jf={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,closeWithReturnUrl:D,security:U}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),c=n,I=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),g={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0}}},z=be(g,I),X=$e(()=>{if(I.startOffsetTime&&I.startOffsetTime!=="00:00:00"&&V.isValidTime(I.startOffsetTime)){const p=V.moment,E=p().startOf("day"),ne=p(I.startOffsetTime,"hh:mm:ss").diff(E);return I.item.startOffsetMillis=ne.valueOf(),I.item.startOffsetMillis}return 0}),i=$e(()=>{if(I.endOffsetTime&&I.endOffsetTime!=="00:00:00"&&V.isValidTime(I.endOffsetTime)){const p=V.moment,E=p().startOf("day"),ne=p(I.endOffsetTime,"hh:mm:ss").diff(E);return I.item.endOffsetMillis=ne.valueOf(),I.item.endOffsetMillis}return 0}),b=$e(()=>I.item.endOffsetMillis-I.item.startOffsetMillis),W=$e(()=>V.moment.utc(b.value).format("HH:mm:ss")),y=$e(()=>{const p=I.item.adBreaks;return p&&p.length>0?p.reduce((te,ne,Y)=>te+ne.durationInMillis,0):0}),k=$e(()=>{const p=b.value+y.value;return V.moment.utc(p).format("HH:mm:ss")}),v=$e(()=>V.moment.utc(y.value).format("HH:mm:ss"));de(async()=>{await _()});const _=async()=>{await S(),await d()},S=async()=>{try{const p=`/api/v1/programtemplates/${c.id}/`;await F.get(p).then(E=>{I.item=E.data,I.startOffsetTime=V.moment.utc(I.item.startOffsetMillis).format("HH:mm:ss"),I.endOffsetTime=V.moment.utc(I.item.endOffsetMillis).format("HH:mm:ss");const te=I.startOffsetTime,ne=I.endOffsetTime;I.item.adBreaks.forEach(Y=>{Y.offsetTime=V.moment.utc(Y.offsetMillis).format("HH:mm:ss"),Y.durationTime=V.moment.utc(Y.durationInMillis).format("HH:mm:ss")})})}catch(p){M.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},d=async()=>{await r()},r=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(E=>{I.lookups.sourceLocations=E.data}),I.item.sourceLocationId&&await a(I.item.sourceLocationId)}catch(p){M.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},a=async p=>{try{const E=`/api/v1/vodSources/lookup/source-location/${p}/?type=3`;await F.get(E).then(ne=>{I.lookups.vodSources=ne.data});const te=I.lookups.vodSources.find(ne=>ne.id==I.item.vodSourceId);I.selected.vodSource=te,await l()}catch(E){M.value=V.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},l=async()=>{const p=I.selected.vodSource;p&&(I.item.vodSourceId!=p.id&&(I.startOffsetTime=V.moment.utc(0).format("HH:mm:ss"),I.endOffsetTime=V.moment.utc(p.durationInMillis).format("HH:mm:ss")),I.item.vodSourceId=p.id,await C(p.id))},C=async p=>{try{let E=`/api/v1/vodSources/${p}/hls`;const te=await F.get(E).then(Y=>Y.data);I.hls&&I.hls.destroy();const ne=document.getElementById("video-edit-program-template");I.hls=V.createHlsStream(ne,te,"Previewing VOD Content.")}catch(E){M.value=V.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},$=()=>{const p={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};I.item.adBreaks.push(p)},m=p=>{I.item.adBreaks.splice(p,1)},K=p=>{const E=V.moment,te=E().startOf("day"),ne=te.format("YYYY-MM-DD ")+p.offsetTime,_e=E(ne).subtract(te);p.offsetMillis=_e.valueOf()},B=p=>{const E=V.moment,te=E().startOf("day"),ne=te.format("YYYY-MM-DD ")+p.durationTime,_e=E(ne).subtract(te);p.durationInMillis=_e.valueOf()},T=async()=>{const p=I;if(x.value)return;if(!await z.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const te=V.clone(p.item);debugger;te.startOffsetMillis=X.value,te.endOffsetMillis=i.value,await F.put("/api/v1/programtemplates/",te).then(ne=>{j.success("Edit Program Template","Program template edit.",{onClose:async()=>{const Y=`${c.urlView}/${c.id}`;await G.push(Y)}})})}catch(te){M.value=V.getErrorMessageAsHtml(te),window.scrollTo(0,0)}finally{x.value=!1}};return(p,E)=>{const te=ee("PageHeader"),ne=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(te,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(z).$dirty&&o(z).$invalid,onClick:E[0]||(E[0]=Y=>T()),class:"btn btn-primary"},E[13]||(E[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,sf),e("button",{onClick:E[1]||(E[1]=Y=>_()),class:"btn btn-secondary ms-2"},E[14]||(E[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:E[2]||(E[2]=Y=>o(D)(c.urlMain)),class:"btn btn-secondary ms-1"},E[15]||(E[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(ne,{errorMessage:o(M),vuelidate:o(z)},{default:q(()=>[e("div",null,[e("div",of,[e("div",af,[e("div",lf,[e("div",nf,[e("div",rf,[R(e("select",{"onUpdate:modelValue":E[3]||(E[3]=Y=>I.item.sourceLocationId=Y),onChange:E[4]||(E[4]=Y=>a(I.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(I.lookups.sourceLocations,Y=>(t(),s("option",{value:Y.id},u(Y.name),9,df))),256))],544),[[ue,I.item.sourceLocationId]]),E[16]||(E[16]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(z).item.sourceLocationId.$error?(t(),s("div",uf,[(t(!0),s(O,null,L(o(z).item.sourceLocationId.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),e("div",cf,[e("div",mf,[R(e("select",{"onUpdate:modelValue":E[5]||(E[5]=Y=>I.selected.vodSource=Y),onChange:E[6]||(E[6]=Y=>l()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(I.lookups.vodSources,Y=>(t(),s("option",{value:Y},u(o(V).moment.utc(Y.durationInMillis).format("HH:mm:ss"))+" - "+u(Y.name),9,ff))),256))],544),[[ue,I.selected.vodSource]]),E[17]||(E[17]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(z).item.vodSourceId.$error?(t(),s("div",pf,[(t(!0),s(O,null,L(o(z).item.vodSourceId.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),E[18]||(E[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",vf,[e("div",gf,[e("div",bf,[R(e("input",{"onUpdate:modelValue":E[7]||(E[7]=Y=>I.item.name=Y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,I.item.name]]),E[19]||(E[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(z).item.name.$error?(t(),s("div",yf,[(t(!0),s(O,null,L(o(z).item.name.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)])]),e("div",$f,[e("div",wf,[e("div",hf,[R(e("input",{"onUpdate:modelValue":E[8]||(E[8]=Y=>I.startOffsetTime=Y),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,I.startOffsetTime]]),E[20]||(E[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),X.value>0&&X.value<3e4?(t(),s("div",_f,E[21]||(E[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):A("",!0),X.value>i.value&&i.value>0?(t(),s("div",kf,E[22]||(E[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):A("",!0),I.selected.vodSource&&X.value>=I.selected.vodSource.durationInMillis?(t(),s("div",Sf,E[23]||(E[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(z).item.startOffsetMillis.$error?(t(),s("div",Tf,[(t(!0),s(O,null,L(o(z).item.startOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)]),e("div",Mf,[e("div",If,[R(e("input",{"onUpdate:modelValue":E[9]||(E[9]=Y=>I.endOffsetTime=Y),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,I.endOffsetTime]]),E[24]||(E[24]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),i.value>0&&i.value<3e4?(t(),s("div",Cf,E[25]||(E[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):A("",!0),I.selected.vodSource&&i.value>I.selected.vodSource.durationInMillis?(t(),s("div",xf,E[26]||(E[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(z).item.endOffsetMillis.$error?(t(),s("div",Vf,[(t(!0),s(O,null,L(o(z).item.endOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},u(Y.$message),1))),128))])):A("",!0)]),e("div",Pf,[e("div",Of,[R(e("input",{"onUpdate:modelValue":E[10]||(E[10]=Y=>W.value=Y),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,W.value]]),E[27]||(E[27]=e("label",{for:"durationTime"},"Clip",-1))])])]),I.selected.vodSource?(t(),s("div",Af,[e("div",{class:"d-flex flex-row justify-content-between"},[E[29]||(E[29]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:$,class:"btn btn-outline-primary btn-sm"},E[28]||(E[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Hf,[e("table",Uf,[E[32]||(E[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(I.item.adBreaks,(Y,_e)=>(t(),s("tr",null,[e("td",null,u(_e+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>Y.offsetTime=we,onChange:we=>K(Y),type:"time",step:"1",class:"form-control"},null,40,Df),[[Z,Y.offsetTime]]),Y.offsetMillis>=I.selected.vodSource.durationInMillis?(t(),s("div",Lf,E[30]||(E[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>Y.durationTime=we,onChange:we=>B(Y),type:"time",step:"1",class:"form-control"},null,40,Ef),[[Z,Y.durationTime]])]),e("td",null,[e("button",{onClick:we=>m(_e),class:"btn btn-outline-warning btn-sm"},E[31]||(E[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,qf)])]))),256))])]),E[33]||(E[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),J(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):A("",!0),e("div",Bf,[E[36]||(E[36]=e("h5",null," Duration ",-1)),e("div",Nf,[e("div",Rf,[e("div",Ff,[R(e("input",{"onUpdate:modelValue":E[11]||(E[11]=Y=>v.value=Y),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,v.value]]),E[34]||(E[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",zf,[e("div",Gf,[R(e("input",{"onUpdate:modelValue":E[12]||(E[12]=Y=>k.value=Y),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Z,k.value]]),E[35]||(E[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Yf={class:"ms-1"},Wf={class:"input-group"},Kf={class:"table-responsive border shadow-sm"},Jf={class:"table table-hover mb-0"},Qf=["textContent"],Xf={class:"d-flex flex-row"},Zf={class:""},ep={class:"mb-1"},tp=["src"],sp={class:"ms-2"},op={key:0,class:"fas fa-fw fa-check-circle text-success"},ap={class:"text-wrap text-truncate",style:{width:"20px !important"}},lp={class:"badge bg-primary me-1"},np={key:0},rp={class:"badge bg-info me-1"},ip={class:"text-end me-0 me-sm-5"},dp="/api/v1/programTemplates/search",up={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:x,pageTitle:h,busy:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,generateReturnUrl:c,security:I,filter:g,initializeFilter:z,getQuery:X,saveQuery:i,search:b,getRowNumber:W,setSelected:y,isSelected:k}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${w==null?void 0:w.userId}/program-templates/search`,baseUrl:dp,filter:{updateUrl:!0}});return de(async()=>{z(),await b()}),(v,_)=>{const S=ee("router-link"),d=ee("PageHeader"),r=ee("m-pagination"),a=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(d,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h)},{default:q(()=>[N(S,{to:n.urlAdd,class:"btn btn-primary"},{default:q(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Yf,[e("div",Wf,[R(e("input",{"onUpdate:modelValue":_[0]||(_[0]=l=>o(g).query.criteria=l),onKeyup:_[1]||(_[1]=Ue(l=>o(b)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(g).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[2]||(_[2]=l=>o(b)(1))},_[4]||(_[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(a,{errorMessage:o(F)},{default:q(()=>[e("div",Kf,[e("table",Jf,[_[5]||(_[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(o(g).items,(l,C)=>(t(),s("tr",{key:l.programTemplateId},[e("td",{textContent:u(o(W)(C)),class:"text-center"},null,8,Qf),e("td",null,[e("div",Xf,[e("div",Zf,[l.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(l.vodSource.video.thumbnails,$=>(t(),s("div",ep,[e("img",{src:$.url,class:"img-fuild border",width:"128"},null,8,tp)]))),256)):A("",!0)]),e("div",sp,[N(S,{to:`${n.urlView}/${l.programTemplateId}`,class:"d-inline-block text-truncate link-offset-2"},{default:q(()=>[l.arn?(t(),s("span",op)):A("",!0),e("span",ap,u(l.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,L(l.vodSource.video.categories,$=>(t(),s("div",null,[e("span",lp,u($.categoryName),1)]))),256)),l.vodSource.video.genres.length>0?(t(),s("div",np,[(t(!0),s(O,null,L(l.vodSource.video.genres,$=>(t(),s("span",rp,u($.genreName),1))),256))])):A("",!0)])])])]),e("td",ip,u(o(Q).moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[N(S,{to:`${n.urlViewSourceLocation}/${l.sourceLocationId}/${o(c)()}`,class:"link-offset-2"},{default:q(()=>[J(u(l.sourceLocation.name),1)]),_:2},1032,["to"])]),e("td",null,[N(S,{to:`${n.urlViewVodSource}/${l.vodSourceId}/${o(c)()}`,class:"link-offset-2"},{default:q(()=>[J(u(l.vodSource.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,o(g).items.length>0]])])]),N(r,{filter:o(g),search:o(b),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},cp={key:0},mp={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},fp={class:"nav-item",role:"presentation"},pp={class:"nav-item",role:"presentation"},vp={class:"nav-item d-none",role:"presentation"},gp={class:"tab-content",id:"myTabContent"},bp={class:"mt-2"},yp={class:""},$p={class:"row row-cols-1 row-cols-lg-2"},wp={class:"col"},hp={class:"col"},_p={class:"form-floating mb-2"},kp={class:"col"},Sp={class:"form-floating mb-2"},Tp={class:"col"},Mp={class:"col"},Ip={class:"form-floating mb-2"},Cp={class:"row row-cols-1 row-cols-sm-3"},xp={class:"col"},Vp={class:"form-floating mb-2"},Pp={class:"col"},Op={class:"form-floating mb-2"},Ap={class:"col"},Hp={class:"form-floating mb-2"},Up={class:"row row-cols-1 row-cols-sm-2"},Dp={class:"col"},Lp={class:"form-floating mb-2"},Ep={class:"col"},qp={class:"form-floating mb-2"},Bp={class:"mt-2"},Np={class:"table-responsive"},Rp={class:"table table-hover mb-0"},Fp={class:"text-center"},zp={class:"mt-2"},Gp={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const f=n,{appTitle:w,pageTitle:x,busy:h,isDirty:P,validations:M,infoMessage:G,warningMessage:F,errorMessage:V,router:j,axios:Q,utils:D,toasts:U,close:c,closeWithReturnUrl:I,generateReturnUrl:g,security:z}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});Se("$config");const X=ge();X.user;const i=me({user:X.user,item:null,hls:null}),b=re();de(async()=>{await v(),b.value=D.getPageTab("programTemplate")||"information-tab"});const W=d=>{D.setPageTab("programTemplate",d),b.value=d},y=d=>d!==b.value?"":"active",k=d=>d!==b.value?"":"show active",v=async()=>{const d=i;if(!h.value)try{h.value=!0,V.value="",i.item=null;const r=`/api/v1/programTemplates/${f.id}/`;await Q.get(r).then(a=>{d.item=a.data;const l=d.item;l.startOffsetTime=D.moment.utc(l.startOffsetMillis).format("HH:mm:ss"),l.endOffsetTime=D.moment.utc(l.endOffsetMillis).format("HH:mm:ss"),l.durationTime=D.moment.utc(l.durationInMillis).format("HH:mm:ss"),l.adBreaksDurationTime=D.moment.utc(l.adBreaksDurationInMillis).format("HH:mm:ss"),l.totalProgramTemplateDurationTime=D.moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const C=l.vodSource.video,$=C.durationInMillis;C.durationInMillis=D.moment.utc($).format("HH:mm:ss")}),i.item.vodSource&&await S(i.item.vodSourceId)}catch(r){V.value=D.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await v()},S=async d=>{try{let r=`/api/v1/vodSources/${d}/hls`;const a=await Q.get(r).then(C=>C.data);i.hls&&i.hls.destroy();const l=document.getElementById("video-view-program-template");i.hls=D.createHlsStream(l,a,"Previewing VOD.")}catch(r){V.value=D.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}};return(d,r)=>{const a=ee("router-link"),l=ee("PageHeader"),C=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(l,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(x)},{default:q(()=>[N(a,{to:`${n.urlEdit}/${n.id}/${o(g)()}`,class:"ms-2 btn btn-primary"},{default:q(()=>r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:r[0]||(r[0]=$=>_()),class:"ms-2 btn btn-secondary"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[1]||(r[1]=$=>o(I)(f.urlMain)),class:"btn btn-secondary ms-1"},r[15]||(r[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(C,{errorMessage:o(V)},{default:q(()=>[i.item?(t(),s("div",cp,[e("div",null,[e("ul",mp,[e("li",fp,[e("button",{onClick:r[2]||(r[2]=$=>W("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",pp,[e("button",{onClick:r[3]||(r[3]=$=>W("adBreaks-tab")),class:le([y("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",vp,[e("button",{onClick:r[4]||(r[4]=$=>W("programs-tab")),class:le([y("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",gp,[e("div",{class:le([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",bp,[e("div",yp,[e("div",$p,[e("div",wp,[e("div",hp,[e("div",_p,[R(e("input",{"onUpdate:modelValue":r[5]||(r[5]=$=>i.item.sourceLocation.name=$),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.sourceLocation.name]]),r[16]||(r[16]=e("label",{for:"name",class:"small fw-bold"},"Source Location",-1))])]),e("div",kp,[e("div",Sp,[R(e("input",{"onUpdate:modelValue":r[6]||(r[6]=$=>i.item.vodSource.name=$),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.vodSource.name]]),r[17]||(r[17]=e("label",{for:"name",class:"small fw-bold"},"VOD Name",-1))])]),r[18]||(r[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",Tp,[e("div",Mp,[e("div",Ip,[R(e("input",{"onUpdate:modelValue":r[7]||(r[7]=$=>i.item.name=$),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.name]]),r[19]||(r[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1))])]),e("div",Cp,[e("div",xp,[e("div",Vp,[R(e("input",{"onUpdate:modelValue":r[8]||(r[8]=$=>i.item.startOffsetTime=$),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Z,i.item.startOffsetTime]]),r[20]||(r[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start Offset",-1))])]),e("div",Pp,[e("div",Op,[R(e("input",{"onUpdate:modelValue":r[9]||(r[9]=$=>i.item.endOffsetTime=$),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Z,i.item.endOffsetTime]]),r[21]||(r[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End Offset",-1))])]),e("div",Ap,[e("div",Hp,[R(e("input",{"onUpdate:modelValue":r[10]||(r[10]=$=>i.item.durationTime=$),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,i.item.durationTime]]),r[22]||(r[22]=e("label",{for:"durationTime",class:"small fw-bold"},"Clip",-1))])])]),r[25]||(r[25]=e("h5",null," Duration ",-1)),e("div",Up,[e("div",Dp,[e("div",Lp,[R(e("input",{"onUpdate:modelValue":r[11]||(r[11]=$=>i.item.adBreaksDurationTime=$),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,i.item.adBreaksDurationTime]]),r[23]||(r[23]=e("label",{for:"adBreaksDurationTime",class:"small fw-bold"},"Total Ad Breaks",-1))])]),e("div",Ep,[e("div",qp,[R(e("input",{"onUpdate:modelValue":r[12]||(r[12]=$=>i.item.totalProgramTemplateDurationTime=$),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,i.item.totalProgramTemplateDurationTime]]),r[24]||(r[24]=e("label",{for:"totalProgramTemplateDurationTime",class:"small fw-bold"},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:le([k("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Bp,[e("div",Np,[e("table",Rp,[r[26]||(r[26]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.adBreaks,($,m)=>(t(),s("tr",{key:$.programTemplateAdBreakId},[e("td",Fp,u(m+1),1),e("td",null,u(o(D).moment.utc($.offsetMillis).format("HH:mm:ss")),1),e("td",null,u(o(D).moment.utc($.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,i.item.adBreaks.length>0]])])])])],2),e("div",{class:le([k("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",zp,[e("pre",null,u(i.item.programs),1)])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},jp=["disabled"],Yp={class:"row row-cols-1 row-cols-sm-3"},Wp={class:"col-sm-6"},Kp={class:"form-floating mb-2"},Jp={key:0,class:"d-block invalid-feedback"},Qp={class:"col-sm-3"},Xp={class:"form-floating mb-2"},Zp={key:0,class:"d-block invalid-feedback"},ev={class:"col-sm-3"},tv={class:"form-floating mb-2"},sv={key:0,class:"d-block invalid-feedback"},ov={class:"row row-cols-1 row-cols-sm-2"},av={class:"col"},lv={class:"form-floating mb-2"},nv=["value"],rv={key:0,class:"d-block invalid-feedback"},iv={class:"col"},dv={class:"form-floating mb-2"},uv=["value"],cv={key:0,class:"d-block invalid-feedback"},mv={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),U=n,c=me({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),I={item:{name:{title:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},tier:{title:se.withMessage("Tier is required.",oe),$autoDirty:!0,$lazy:!0},playbackMode:{title:se.withMessage("PlaybackMode is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:se.withMessage("Filler Slate Source Location is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:se.withMessage("Filler Slate Vod Source is required.",oe),$autoDirty:!0,$lazy:!0},policy:{title:se.withMessage("Policy is required.",oe),$autoDirty:!0,$lazy:!0}}},g=be(I,c);de(async()=>{await z()});const z=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(k=>{c.lookups.sourceLocations=k.data,c.lookups.sourceLocations.length===1&&(c.item.fillerSlateSourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.fillerSlateSourceLocationId&&await i(c.item.fillerSlateSourceLocationId)}catch(y){M.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},X=async()=>{c.item.fillerSlateVodSourceId=null,await i(c.item.fillerSlateSourceLocationId)},i=async y=>{try{let k=`/api/v1/vodSources/lookup/source-location/${y}/?category=2`;await F.get(k).then(v=>{c.lookups.vodSources=v.data})}catch(k){M.value=V.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},b=()=>{if(c.item.name){const y=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${c.item.name}"}]}`;c.item.policy=y}else c.item.policy=null},W=async()=>{const y=c;if(x.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,M.value="";const v=V.clone(y.item);await F.post("/api/v1/channels/",v).then(_=>{j.success("Add Channel","Channel added.",{onClose:async()=>{const S=`${U.urlView}/${_.data}`;await G.push(S)}})})}catch(v){M.value=V.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{x.value=!1}};return(y,k)=>{const v=ee("router-link"),_=ee("PageHeader"),S=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(_,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(w)},{default:q(()=>[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:k[0]||(k[0]=d=>W()),class:"btn btn-primary"},k[8]||(k[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jp),N(v,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:q(()=>k[9]||(k[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(S,{errorMessage:o(M),vuelidate:o(g)},{default:q(()=>[e("div",null,[e("div",Yp,[e("div",Wp,[e("div",Kp,[R(e("input",{"onUpdate:modelValue":k[1]||(k[1]=d=>c.item.name=d),onChange:k[2]||(k[2]=d=>b()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Z,c.item.name]]),k[10]||(k[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(g).item.name.$error?(t(),s("div",Jp,[(t(!0),s(O,null,L(o(g).item.name.$errors,d=>(t(),s("div",{key:d.$uid},u(d.$message),1))),128))])):A("",!0)])]),e("div",Qp,[e("div",Xp,[R(e("input",{"onUpdate:modelValue":k[3]||(k[3]=d=>c.item.tier=d),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Z,c.item.tier]]),k[11]||(k[11]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(g).item.tier.$error?(t(),s("div",Zp,[(t(!0),s(O,null,L(o(g).item.tier.$errors,d=>(t(),s("div",{key:d.$uid},u(d.$message),1))),128))])):A("",!0)])]),e("div",ev,[e("div",tv,[R(e("input",{"onUpdate:modelValue":k[4]||(k[4]=d=>c.item.playbackMode=d),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Z,c.item.playbackMode]]),k[12]||(k[12]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(g).item.playbackMode.$error?(t(),s("div",sv,[(t(!0),s(O,null,L(o(g).item.playbackMode.$errors,d=>(t(),s("div",{key:d.$uid},u(d.$message),1))),128))])):A("",!0)])])]),k[15]||(k[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",ov,[e("div",av,[e("div",lv,[R(e("select",{"onUpdate:modelValue":k[5]||(k[5]=d=>c.item.fillerSlateSourceLocationId=d),onChange:k[6]||(k[6]=d=>X()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(O,null,L(c.lookups.sourceLocations,d=>(t(),s("option",{value:d.id},u(d.name),9,nv))),256))],544),[[ue,c.item.fillerSlateSourceLocationId]]),k[13]||(k[13]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(g).item.fillerSlateSourceLocationId.$error?(t(),s("div",rv,[(t(!0),s(O,null,L(o(g).item.fillerSlateSourceLocationId.$errors,d=>(t(),s("div",{key:d.$uid},u(d.$message),1))),128))])):A("",!0)])]),e("div",iv,[e("div",dv,[R(e("select",{"onUpdate:modelValue":k[7]||(k[7]=d=>c.item.fillerSlateVodSourceId=d),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(O,null,L(c.lookups.vodSources,d=>(t(),s("option",{value:d.id},u(d.name),9,uv))),256))],512),[[ue,c.item.fillerSlateVodSourceId]]),k[14]||(k[14]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(g).item.fillerSlateVodSourceId.$error?(t(),s("div",cv,[(t(!0),s(O,null,L(o(g).item.fillerSlateVodSourceId.$errors,d=>(t(),s("div",{key:d.$uid},u(d.$message),1))),128))])):A("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},fv={components:{Page:Ye},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function pv(n,f,w,x,h,P){const M=ee("Page");return t(),ce(M,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const vv=Me(fv,[["render",pv]]),gv={class:"ms-1"},bv={class:"input-group"},yv={class:"table-responsive border shadow-sm"},$v={class:"table table-hover mb-0"},wv=["textContent"],hv={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},_v={key:0,class:"badge text-bg-success"},kv={key:1,class:"badge text-bg-secondary"},Sv="/api/v1/channels/search",Tv={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:x,pageTitle:h,busy:P,infoMessage:M,warningMessage:G,errorMessage:F,router:V,axios:j,utils:Q,toasts:D,close:U,security:c,filter:I,initializeFilter:g,getQuery:z,saveQuery:X,search:i,getRowNumber:b,setSelected:W,isSelected:y}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${w==null?void 0:w.userId}/Channels/search`,baseUrl:Sv,filter:{updateUrl:!0}});return de(async()=>{g(),await i()}),(k,v)=>{const _=ee("router-link"),S=ee("PageHeader"),d=ee("m-pagination"),r=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(h)},{default:q(()=>[N(_,{to:n.urlAdd,class:"btn btn-primary"},{default:q(()=>v[3]||(v[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",gv,[e("div",bv,[R(e("input",{"onUpdate:modelValue":v[0]||(v[0]=a=>o(I).query.criteria=a),onKeyup:v[1]||(v[1]=Ue(a=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(I).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:v[2]||(v[2]=a=>o(i)(1))},v[4]||(v[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(r,{errorMessage:o(F)},{default:q(()=>[e("div",yv,[e("table",$v,[v[5]||(v[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(o(I).items,(a,l)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:u(o(b)(l)),class:"text-center"},null,8,wv),e("td",null,[N(_,{to:`${n.urlView}/${a.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:q(()=>[a.arn?(t(),s("span",hv)):A("",!0),J(u(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",_v,u(a.state),1)):a.state==="STOPPED"?(t(),s("span",kv,u(a.state),1)):A("",!0)])]),e("td",null,u(a.playbackMode),1),e("td",null,u(a.tier),1)]))),128))]),_:1},512),[[Te,o(I).items.length>0]])])]),N(d,{filter:o(I),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Mv=["id"],Iv={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Cv={class:"modal-content"},xv={class:"modal-header"},Vv={class:"modal-title"},Pv={class:"modal-body"},Ov={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Av=["innerHTML"],Hv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Uv={class:"container"},Dv={class:"col"},Lv={class:"form-floating mb-2"},Ev=["value"],qv={class:"row row-cols-1 row-cols-sm-2"},Bv={class:"col"},Nv={class:"form-floating mb-2"},Rv={key:0,class:"d-block invalid-feedback"},Fv={class:"col"},zv={class:"form-floating mb-2"},Gv={key:0,class:"d-block invalid-feedback"},jv={key:0},Yv={class:"row row-cols-1 row-cols-sm-3"},Wv={class:"col"},Kv={class:"col"},Jv={class:"col"},Qv={class:"row row-cols-1 row-cols-sm-2"},Xv={class:"col"},Zv={class:"col"},eg={class:"row row-cols-1 row-cols-sm-2"},tg={class:"col"},sg={class:"col"},og={key:1},ag={class:"table-responsive border mt-1"},lg={class:"table mb-0"},ng=["onUpdate:modelValue"],rg=["value"],ig={class:"modal-footer"},dg=["disabled"],ug={__name:"_addProgramFromTemplate",emits:["onClose"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),z=w,X=re(),i=re("modalAddProgramFromTemplate"),b=me({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),W={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},y=be(W,b);de(async()=>{y.value.$reset()});const k=async(K,B,T)=>{X.value=K;const p=b;G.value.clear(),j.value="";const E=U.moment(T),ne=E.format("YYYY-MM-DD HH:mm"),Y=E.format("YYYYMMDD_HHmm")+"_PRG_";p.eventId=B,p.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},p.selected={programTemplate:null},p.item={programTemplateId:null,name:Y,dateScheduledStart:ne,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await S(),y.value.$reset();var _e=document.getElementById(i.value),we=he.getOrCreateInstance(_e);we.show()},v=async K=>{if(!K){z("onClose",{eventId:b.eventId},K);var te=document.getElementById(i.value),ne=he.getOrCreateInstance(te);ne.hide();return}const B=b;B.item.dateScheduledStart;const T=U.moment(B.item.dateScheduledStart).utc(!0).format(),p=U.moment(B.item.dateScheduledStart).add(B.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();debugger;const E={eventId:B.eventId,programTemplateId:B.selected.programTemplate.programTemplateId,channelId:X.value,name:B.item.name,dateScheduledStart:T,dateScheduledEnd:p,adBreaks:B.selected.programTemplate.adBreaks.map(Y=>({sourceLocationId:B.selected.programTemplate.sourceLocationId,vodSourceId:Y.vodSourceId,offsetMillis:Y.offsetMillis,durationInMillis:Y.durationInMillis}))};await D.post("/api/v1/programs/",E).then(Y=>{c.success("Add New Program",`Program [${E.name}] was added to this channel.`)},Y=>{const _e=U.getErrorMessageAsHtml(Y);alert(_e)}),z("onClose",E,K);var te=document.getElementById(i.value),ne=he.getOrCreateInstance(te);ne.hide()},_=async()=>{await v(!0)},S=async()=>{await C(),await d(),await r()},d=async()=>{try{const K=`/api/v1/channelOutputs/get-by-channel/${X.value}`;await D.get(K).then(B=>{b.lookups.channelOutputs=B.data}),b.item.programTemplateId&&await a()}catch(K){j.value=U.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},r=async()=>{try{const K=`/api/v1/programTemplates/lookup/by-channel/${X.value}`;await D.get(K).then(B=>{b.lookups.programTemplates=B.data,b.lookups.programTemplates.length===1&&(b.item.programTemplateId=b.lookups.programTemplates[0].id)}),b.item.programTemplateId&&await a()}catch(K){j.value=U.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},a=async()=>{await l(b.item.programTemplateId)},l=async K=>{try{const B=`/api/v1/programTemplates/${K}/`;await D.get(B).then(E=>{b.selected.programTemplate=E.data;const te=b.selected.programTemplate;te.startOffsetTime=U.moment.utc(te.startOffsetMillis).format("HH:mm:ss"),te.endOffsetTime=U.moment.utc(te.endOffsetMillis).format("HH:mm:ss"),te.durationTime=U.moment.utc(te.durationInMillis).format("HH:mm:ss"),te.adBreaksDurationTime=U.moment.utc(te.adBreaksDurationInMillis).format("HH:mm:ss"),te.totalProgramTemplateDurationTime=U.moment.utc(te.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),te.adBreaks.forEach(ne=>{ne.vodSourceId=null})});const T=b,p=T.lookups.channelOutputs[0].outputType;await m(T.selected.programTemplate.sourceLocationId,p)}catch(B){j.value=U.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},C=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(B=>{b.lookups.sourceLocations=B.data,b.lookups.sourceLocations.length===1&&(b.item.sourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await $(b.item.sourceLocationId)}catch(K){j.value=U.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},$=async K=>{try{let B=`/api/v1/vodSources/lookup/source-location/${K}`;await D.get(B).then(T=>{b.lookups.vodSources=T.data})}catch(B){j.value=U.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},m=async(K,B)=>{try{let T=`/api/v1/vodsources/lookup/source-location/${K}/output-type/${B}`;await D.get(T).then(p=>{b.lookups.adBreakVodSources=p.data})}catch(T){j.value=U.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}};return f({open:k,close:v}),(K,B)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-hidden":"true"},[e("div",Iv,[e("div",Cv,[e("div",xv,[e("h5",Vv,[B[7]||(B[7]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:B[0]||(B[0]=T=>v(!1)),"aria-label":"Close"})]),e("div",Pv,[o(j)?(t(),s("div",Ov,[B[8]||(B[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,Av)])):A("",!0),o(G).size>0?(t(),s("div",Hv,[B[9]||(B[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),T=>(t(),s("li",null,u(T),1))),256))])])):A("",!0),e("div",Uv,[e("div",Dv,[e("div",Lv,[R(e("select",{"onUpdate:modelValue":B[1]||(B[1]=T=>b.item.programTemplateId=T),class:"form-select",onChange:B[2]||(B[2]=T=>a()),id:"sourceLocationId"},[(t(!0),s(O,null,L(b.lookups.programTemplates,T=>(t(),s("option",{value:T.id}," ["+u(o(U).moment.utc(T.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+u(T.name),9,Ev))),256))],544),[[ue,b.item.programTemplateId]]),B[10]||(B[10]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",qv,[e("div",Bv,[e("div",Nv,[R(e("input",{"onUpdate:modelValue":B[3]||(B[3]=T=>b.item.name=T),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,b.item.name]]),B[11]||(B[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",Rv,[(t(!0),s(O,null,L(o(y).item.name.$errors,T=>(t(),s("div",{key:T.$uid},u(T.$message),1))),128))])):A("",!0)])]),e("div",Fv,[e("div",zv,[R(e("input",{"onUpdate:modelValue":B[4]||(B[4]=T=>b.item.dateScheduledStart=T),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,b.item.dateScheduledStart]]),B[12]||(B[12]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(y).item.dateScheduledStart.$error?(t(),s("div",Gv,[(t(!0),s(O,null,L(o(y).item.dateScheduledStart.$errors,T=>(t(),s("div",{key:T.$uid},u(T.$message),1))),128))])):A("",!0)])])]),b.selected.programTemplate?(t(),s("div",jv,[e("div",Yv,[e("div",Wv,[e("div",null,[B[13]||(B[13]=e("div",{class:"small text-primary-emphasis"},"Start Offset",-1)),e("div",null,u(b.selected.programTemplate.startOffsetTime),1)])]),e("div",Kv,[e("div",null,[B[14]||(B[14]=e("div",{class:"small text-primary-emphasis"},"End Offset",-1)),e("div",null,u(b.selected.programTemplate.endOffsetTime),1)])]),e("div",Jv,[e("div",null,[B[15]||(B[15]=e("div",{class:"small text-primary-emphasis"},"Clip Duration",-1)),e("div",null,u(b.selected.programTemplate.durationTime),1)])])]),e("div",Qv,[e("div",Xv,[e("div",null,[B[16]||(B[16]=e("div",{class:"small text-primary-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,u(b.selected.programTemplate.adBreaksDurationTime),1)])]),e("div",Zv,[e("div",null,[B[17]||(B[17]=e("div",{class:"small text-primary-emphasis"},"Total Program Duration",-1)),e("div",null,u(b.selected.programTemplate.totalProgramTemplateDurationTime),1)])])]),e("div",eg,[e("div",tg,[e("div",null,[B[18]||(B[18]=e("div",{class:"small text-primary-emphasis"},"Source Location",-1)),e("div",null,u(b.selected.programTemplate.sourceLocation.name),1)])]),e("div",sg,[e("div",null,[B[19]||(B[19]=e("div",{class:"small text-primary-emphasis"},"VOD Source",-1)),e("div",null,u(b.selected.programTemplate.vodSource.name),1)])])])])):A("",!0),B[22]||(B[22]=e("hr",null,null,-1)),b.selected.programTemplate?(t(),s("div",og,[B[21]||(B[21]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",ag,[e("table",lg,[B[20]||(B[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(b.selected.programTemplate.adBreaks,(T,p)=>(t(),s("tr",null,[e("td",null,u(p+1),1),e("td",null,u(o(U).moment.utc(T.offsetMillis).format("HH:mm:ss")),1),e("td",null,u(o(U).moment.utc(T.durationInMillis).format("HH:mm:ss")),1),e("td",null,[R(e("select",{"onUpdate:modelValue":E=>T.vodSourceId=E,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(b.lookups.adBreakVodSources,E=>(t(),s(O,null,[E.durationInMillis===T.durationInMillis?(t(),s("option",{key:0,value:E.id}," ["+u(o(U).moment.utc(E.durationInMillis).format("HH:mm:ss"))+"] "+u(E.name),9,rg)):A("",!0)],64))),256))],8,ng),[[ue,T.vodSourceId]])])]))),256))])])])])):A("",!0)])]),e("div",ig,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:B[5]||(B[5]=T=>_()),class:"btn btn-primary",type:"button"},B[23]||(B[23]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,dg),e("button",{onClick:B[6]||(B[6]=T=>v(!1)),class:"btn btn-secondary ms-1"},B[24]||(B[24]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Mv))}},cg=["id"],mg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},fg={class:"modal-content"},pg={class:"modal-header"},vg={class:"modal-title"},gg={class:"modal-body"},bg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},yg=["innerHTML"],$g={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},wg={key:2,class:"container"},hg={class:"row row-cols-1 row-cols-sm-2"},_g={class:"col"},kg={key:0},Sg={class:"col"},Tg={key:0},Mg={class:"row row-cols-1 row-cols-sm-3 mt-2"},Ig={class:"col"},Cg={key:0},xg={class:"col"},Vg={class:"form-floating mb-2"},Pg={key:0,class:"d-block invalid-feedback"},Og={class:"col"},Ag={class:"form-floating mb-2"},Hg={key:0,class:"d-block invalid-feedback"},Ug={class:"row row-cols-1 row-cols-sm-3"},Dg={class:"col"},Lg={class:"col"},Eg={class:"col"},qg={class:"row row-cols-1 row-cols-sm-2 mt-2"},Bg={class:"col"},Ng={class:"col"},Rg={key:0},Fg={class:"table-responsive border mt-1"},zg={class:"table mb-0"},Gg=["onUpdate:modelValue"],jg=["value"],Yg={class:"modal-footer"},Wg=["disabled"],nt={__name:"_editProgram",emits:["onClose"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),z=w,X=re(),i=re("modalEditProgram"),b=me({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),W={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},y=be(W,b);de(async()=>{y.value.$reset()});const k=async(a,l)=>{X.value=a;const C=b;G.value.clear(),j.value="",C.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},C.item=null,await S(),await d(),y.value.$reset();var $=document.getElementById(i.value),m=he.getOrCreateInstance($);m.show()},v=async a=>{if(!a){z("onClose",a);var m=document.getElementById(i.value),K=he.getOrCreateInstance(m);K.hide();return}const l=b,C=U.moment(l.item.dateScheduledStart).utc(!0).format(),$={programId:X.value,name:l.item.name,dateScheduledStart:C,adBreaks:l.item.adBreaks.map(B=>({sourceLocationId:l.item.sourceLocationId,vodSourceId:B.vodSourceId,offsetMillis:B.offsetMillis,durationInMillis:B.durationInMillis}))};try{await D.put("/api/v1/programs/",$).then(T=>{c.success("Edit Program","Program was edited.")})}catch(B){j.value=U.getErrorMessageAsHtml(B),window.scrollTo(0,0);return}finally{}z("onClose",a);var m=document.getElementById(i.value),K=he.getOrCreateInstance(m);K.hide()},_=async()=>{await v(!0)},S=async()=>{try{const a=`/api/v1/programs/${X.value}/`;await D.get(a).then($=>{b.item=$.data;const m=b.item,T=U.moment.utc(m.dateScheduledStart).format("YYYY-MM-DD HH:mm");b.item.dateScheduledStart=T,m.startOffsetTime=U.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=U.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=U.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=U.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=U.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const l=b,C=l.item.channel.outputs[0].outputType;await r(l.item.sourceLocationId,C)}catch(a){j.value=U.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},d=async()=>{},r=async(a,l)=>{try{let C=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${l}`;await D.get(C).then($=>{b.lookups.adBreakVodSources=$.data})}catch(C){j.value=U.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}};return f({open:k,close:v}),(a,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",mg,[e("div",fg,[e("div",pg,[e("h5",vg,[l[5]||(l[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=C=>v(!1)),"aria-label":"Close"})]),e("div",gg,[o(j)?(t(),s("div",bg,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,yg)])):A("",!0),o(G).size>0?(t(),s("div",$g,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),C=>(t(),s("li",null,u(C),1))),256))])])):A("",!0),b.item?(t(),s("div",wg,[e("div",hg,[e("div",_g,[e("div",null,[l[8]||(l[8]=e("div",{class:"small text-primary-emphasis"},"Source Location",-1)),b.item.sourceLocation?(t(),s("div",kg,u(b.item.sourceLocation.name),1)):A("",!0)])]),e("div",Sg,[e("div",null,[l[9]||(l[9]=e("div",{class:"small text-primary-emphasis"},"Source Location",-1)),b.item.vodSource?(t(),s("div",Tg,u(b.item.vodSource.name),1)):A("",!0)])])]),e("div",Mg,[e("div",Ig,[e("div",null,[l[10]||(l[10]=e("div",{class:"small text-primary-emphasis"},"Relative Program",-1)),b.item.relativeProgram?(t(),s("div",Cg,u(b.item.relativeProgram.name),1)):A("",!0)])]),e("div",xg,[e("div",Vg,[R(e("input",{"onUpdate:modelValue":l[1]||(l[1]=C=>b.item.name=C),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,b.item.name]]),l[11]||(l[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",Pg,[(t(!0),s(O,null,L(o(y).item.name.$errors,C=>(t(),s("div",{key:C.$uid},u(C.$message),1))),128))])):A("",!0)])]),e("div",Og,[e("div",Ag,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=C=>b.item.dateScheduledStart=C),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,b.item.dateScheduledStart]]),l[12]||(l[12]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(y).item.dateScheduledStart.$error?(t(),s("div",Hg,[(t(!0),s(O,null,L(o(y).item.dateScheduledStart.$errors,C=>(t(),s("div",{key:C.$uid},u(C.$message),1))),128))])):A("",!0)])])]),e("div",null,[e("div",Ug,[e("div",Dg,[e("div",null,[l[13]||(l[13]=e("div",{class:"small text-primary-emphasis"},"Start Offset",-1)),e("div",null,u(b.item.startOffsetTime),1)])]),e("div",Lg,[e("div",null,[l[14]||(l[14]=e("div",{class:"small text-primary-emphasis"},"End Offset",-1)),e("div",null,u(b.item.endOffsetTime),1)])]),e("div",Eg,[e("div",null,[l[15]||(l[15]=e("div",{class:"small text-primary-emphasis"},"Clip Duration",-1)),e("div",null,u(b.item.durationTime),1)])])]),e("div",qg,[e("div",Bg,[e("div",null,[l[16]||(l[16]=e("div",{class:"small text-primary-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,u(b.item.adBreaksDurationTime),1)])]),e("div",Ng,[e("div",null,[l[17]||(l[17]=e("div",{class:"small text-primary-emphasis"},"Total Program Duration",-1)),e("div",null,u(b.item.totalProgramTemplateDurationTime),1)])])])]),l[20]||(l[20]=e("hr",null,null,-1)),b.item?(t(),s("div",Rg,[l[19]||(l[19]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",Fg,[e("table",zg,[l[18]||(l[18]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(b.item.adBreaks,(C,$)=>(t(),s("tr",null,[e("td",null,u($+1),1),e("td",null,u(o(U).moment.utc(C.offsetMillis).format("HH:mm:ss")),1),e("td",null,u(o(U).moment.utc(C.durationInMillis).format("HH:mm:ss")),1),e("td",null,[R(e("select",{"onUpdate:modelValue":m=>C.vodSourceId=m,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(b.lookups.adBreakVodSources,m=>(t(),s(O,null,[m.durationInMillis===C.durationInMillis?(t(),s("option",{key:0,value:m.id}," ["+u(o(U).moment.utc(m.durationInMillis).format("HH:mm:ss"))+"] "+u(m.name),9,jg)):A("",!0)],64))),256))],8,Gg),[[ue,C.vodSourceId]])])]))),256))])])])])):A("",!0)])):A("",!0)]),e("div",Yg,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:l[3]||(l[3]=C=>_()),class:"btn btn-primary ms-2",type:"button"},l[21]||(l[21]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Wg),e("button",{onClick:l[4]||(l[4]=C=>v(!1)),class:"btn btn-secondary ms-1"},l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,cg))}},Kg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:f,pageTitle:w,busy:x,infoMessage:h,warningMessage:P,errorMessage:M,router:G,axios:F,utils:V,toasts:j,close:Q,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),U=n,c=re(null),I=re(null),g=re(null),z={viewType:"Week",cellDuration:15,startDate:Pe.DayPilot.Date.today(),onTimeRangeSelected:S=>{var d=S.control;const r={start:S.start,end:S.end,id:Pe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};d.events.add(r);var a=d.events.find(r.id);k(a)},onBeforeEventRender:S=>{if(S.data.barColor="green",!!S.data.tags)switch(S.data.tags.type){case"new":S.data.barColor="yellow";break;case"business":S.data.barColor="red";break;case"personal":S.data.barColor="greem";break;case"vacation":S.data.barColor="black";break;default:S.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async S=>{const d=S.newStart.value,r=S.e.id(),a=V.moment(d).utc(!0).format();try{let l="/api/v1/programs/scheduled-date-start";const C={programId:r,dateScheduledStart:a};await F.put(l,C).then($=>{j.success("Program date scheduled start was edited.")})}catch(l){M.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0);return}finally{}await W()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async S=>{var d=S.e.id();_(d)},contextMenu:new Pe.DayPilot.Menu([{text:"Clone",onClick:async S=>{const d=S.source.id();try{let r=`/api/v1/programs/${d}/clone`;await F.post(r).then(a=>{j.success("Clone Program","Program was cloned.")})}catch(r){M.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0);return}finally{await W()}}},{text:"Delete",onClick:async S=>{if(!confirm("Do you want to remove this program?"))return;const r=S.source.id();try{let a=`/api/v1/programs/${r}/`;await F.delete(a).then(l=>{j.success("Delete Program","Program was deleted.")}),c.value.control.events.remove(S.source)}catch(a){M.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await W()}}}])},X=re([]),i=()=>{c.value.control.update({events:X.value})},b=me({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});de(async()=>{await W()});const W=async()=>{await y(),await i()},y=async()=>{const S=b;if(!x.value)try{x.value=!0,M.value="";const d=`/api/v1/channels/${U.id}/`;await F.get(d).then(r=>{S.item=r.data;const a=S.item.outputs,l=S.item.programs.map(C=>{let $=`${C.name}`,m=`[${C.name}]`;return C.relativeProgram&&(m+=` => [${C.relativeProgram.name}]`),{start:V.moment.utc(C.dateScheduledStart).format(),end:V.moment.utc(C.dateScheduledEnd).format(),id:C.programId,text:$,toolTip:m}});X.value=l})}catch(d){M.value=V.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{x.value=!1}},k=S=>{I.value.open(U.id,S.id(),S.start().value)},v=async(S,d)=>{var r=c.value,a=r.control.events.find(S.eventId);if(!d&&a){c.value.control.events.remove(a);return}r.control.events.find(B=>B.text()==S.name)&&(alert("Program already exists in this channel. Removing in the calendar."),c.value.control.events.remove(a));const C=V.moment(S.dateScheduledStart).utc(!0).format(),$=V.moment(S.dateScheduledEnd).utc(!0).format(),m=new Pe.DayPilot.Date(C),K=new Pe.DayPilot.Date($);a.text(S.name),a.start(new Pe.DayPilot.Date(m)),a.end(new Pe.DayPilot.Date(K)),a.data.tags.program=S,a.commit(),c.value.control.update(),await W()},_=(S,d)=>{g.value.open(S,d)};return(S,d)=>{const r=ee("router-link"),a=ee("PageHeader"),l=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(w)},{default:q(()=>[e("button",{onClick:d[0]||(d[0]=C=>W()),class:"btn btn-secondary ms-1"},d[1]||(d[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(r,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:q(()=>d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(l,{errorMessage:o(M),vuelidate:S.v$},{default:q(()=>[e("div",null,[N(o(Pe.DayPilotCalendar),{id:"dp",config:z,ref_key:"calendarRef",ref:c},null,512),N(ug,{ref_key:"modalAddProgram",ref:I,onOnClose:v},null,512),N(nt,{ref_key:"modalEditProgram",ref:g,onOnClose:W},null,512)])]),_:1},8,["errorMessage","vuelidate"]),d[3]||(d[3]=J(" > "))])]),_:1})}}},Jg=["id"],Qg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Xg={class:"modal-content"},Zg={class:"modal-header"},e1={class:"modal-title"},t1={class:"modal-body"},s1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},o1=["innerHTML"],a1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},l1={class:"container"},n1={class:"row row-cols-1 row-cols-sm-3"},r1={class:"col"},i1={class:"form-floating mb-2"},d1=["disabled"],u1=["value"],c1={class:"col"},m1={class:"form-floating mb-2"},f1={key:0,class:"d-block invalid-feedback"},p1={class:"col"},v1={class:"form-floating mb-2"},g1={key:0,class:"d-block invalid-feedback"},b1={class:"row row-cols-sm-2"},y1={class:"col"},$1={class:"form-floating mb-2"},w1=["value"],h1={key:0,class:"d-block invalid-feedback"},_1={class:"col"},k1={class:"form-floating mb-2"},S1=["value"],T1={key:0,class:"d-block invalid-feedback"},M1={class:"col"},I1={class:"input-group mb-1"},C1={class:"form-floating"},x1={key:0,class:"input-group-text"},V1={key:0},P1={key:1},O1={key:2},A1={key:3,class:"d-block invalid-feedback"},H1={class:"col"},U1={class:"input-group mb-1"},D1={class:"form-floating"},L1={key:0,class:"input-group-text"},E1={key:0},q1={key:1},B1={key:2,class:"d-block invalid-feedback"},N1={class:"table-responsive border mt-1"},R1={class:"table"},F1={class:"input-group mb-1"},z1=["onUpdate:modelValue"],G1={key:0,class:"input-group-text"},j1=["onUpdate:modelValue"],Y1=["value"],W1=["onUpdate:modelValue"],K1=["value"],J1=["onClick"],Q1={class:"modal-footer"},X1=["disabled"],Z1={__name:"_addProgram",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),z=w,X=re(),i=re("modalAddProgram"),b=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),W={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},y=be(W,b);de(async()=>{y.value.$reset()});const k=async B=>{X.value=B;const T=b;G.value.clear(),j.value="";const p=U.moment().local().add(2,"m"),te=p.format("YYYY-MM-DD HH:mm"),ne=p.format("YYYY_MM_DD")+"_PROGRAM_";T.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},T.item={name:ne,relativeProgramId:null,dateScheduledStart:te,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await S(),y.value.$reset();var Y=document.getElementById(i.value),_e=he.getOrCreateInstance(Y);_e.show()},v=async()=>{var B=document.getElementById(i.value),T=he.getOrCreateInstance(B);T.hide(),z("refresh")},_=async()=>{const B=b;if(P.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,j.value="";const E=B.item;delete E.vodSource,E.channelId=X.value;var p=E.dateScheduledStart;E.dateScheduledStart=U.moment(p).utc().format(),await D.post("/api/v1/programs/",E).then(te=>{c.success("Add Program","Program added to Channel",{async onClose(){}})}),await v()}catch(E){j.value=U.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{P.value=!1}},S=async()=>{await d(),await a(),await C()},d=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(T=>{b.lookups.sourceLocations=T.data,b.lookups.sourceLocations.length===1&&(b.item.sourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await r(b.item.sourceLocationId)}catch(B){j.value=U.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},r=async B=>{try{let T=`/api/v1/vodSources/lookup/source-location/${B}`;await D.get(T).then(p=>{b.lookups.vodSources=p.data})}catch(T){j.value=U.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},a=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(T=>{b.lookups.adBreakSourceLocations=T.data})}catch(B){j.value=U.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},l=async B=>{try{let T=`/api/v1/vodSources/lookup/source-location/${B}`;await D.get(T).then(p=>{b.lookups.adBreakVodSources=p.data})}catch(T){j.value=U.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},C=async()=>{try{const B=`/api/v1/programs/lookup/?channelId=${X.value}`;await D.get(B).then(T=>{if(b.lookups.channelPrograms=T.data,b.lookups.channelPrograms.length===1){const E=b.lookups.channelPrograms[0];b.item.relativeProgramId=E.id}})}catch(B){j.value=U.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},$=()=>{const B={offsetMillis:0,sourceLocationId:null,vodSourceId:null},T=b.item.adBreaks.length;if(T>0){const p=b.item.adBreaks[T-1];B.offsetMillis=p.offsetMillis+1e4}b.item.adBreaks.push(B)},m=B=>{b.item.adBreaks.splice(B,1)},K=()=>{const B=b.item.vodSource;b.item.vodSourceId=B.id};return f({open:k,close:v}),(B,T)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Qg,[e("div",Xg,[e("div",Zg,[e("h5",e1,[T[12]||(T[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:T[0]||(T[0]=p=>v()),"aria-label":"Close"})]),e("div",t1,[o(j)?(t(),s("div",s1,[T[13]||(T[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,o1)])):A("",!0),o(G).size>0?(t(),s("div",a1,[T[14]||(T[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),p=>(t(),s("li",null,u(p),1))),256))])])):A("",!0),e("div",l1,[e("div",n1,[e("div",r1,[e("div",i1,[R(e("select",{"onUpdate:modelValue":T[1]||(T[1]=p=>b.item.relativeProgramId=p),class:"form-select",id:"sourceLocationId",disabled:b.lookups.channelPrograms.length<=0},[(t(!0),s(O,null,L(b.lookups.channelPrograms,p=>(t(),s("option",{value:p.id},u(p.name),9,u1))),256))],8,d1),[[ue,b.item.relativeProgramId]]),T[15]||(T[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",c1,[e("div",m1,[R(e("input",{"onUpdate:modelValue":T[2]||(T[2]=p=>b.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,b.item.name]]),T[16]||(T[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",f1,[(t(!0),s(O,null,L(o(y).item.name.$errors,p=>(t(),s("div",{key:p.$uid},u(p.$message),1))),128))])):A("",!0)])]),e("div",p1,[e("div",v1,[R(e("input",{"onUpdate:modelValue":T[3]||(T[3]=p=>b.item.dateScheduledStart=p),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,b.item.dateScheduledStart]]),T[17]||(T[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(y).item.dateScheduledStart.$error?(t(),s("div",g1,[(t(!0),s(O,null,L(o(y).item.dateScheduledStart.$errors,p=>(t(),s("div",{key:p.$uid},u(p.$message),1))),128))])):A("",!0)])])]),e("div",b1,[e("div",y1,[e("div",$1,[R(e("select",{"onUpdate:modelValue":T[4]||(T[4]=p=>b.item.sourceLocationId=p),onChange:T[5]||(T[5]=p=>r(b.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(b.lookups.sourceLocations,p=>(t(),s("option",{value:p.id},u(p.name),9,w1))),256))],544),[[ue,b.item.sourceLocationId]]),T[18]||(T[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(y).item.sourceLocationId.$error?(t(),s("div",h1,[(t(!0),s(O,null,L(o(y).item.sourceLocationId.$errors,p=>(t(),s("div",{key:p.$uid},u(p.$message),1))),128))])):A("",!0)])]),e("div",_1,[e("div",k1,[R(e("select",{"onUpdate:modelValue":T[6]||(T[6]=p=>b.item.vodSource=p),onChange:T[7]||(T[7]=p=>K()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(b.lookups.vodSources,p=>(t(),s("option",{value:p},u(p.name),9,S1))),256))],544),[[ue,b.item.vodSource]]),T[19]||(T[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(y).item.vodSourceId.$error?(t(),s("div",T1,[(t(!0),s(O,null,L(o(y).item.vodSourceId.$errors,p=>(t(),s("div",{key:p.$uid},u(p.$message),1))),128))])):A("",!0)])]),e("div",M1,[e("div",I1,[e("div",C1,[R(e("input",{"onUpdate:modelValue":T[8]||(T[8]=p=>b.item.startOffsetMillis=p),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Z,b.item.startOffsetMillis]]),T[20]||(T[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),b.item.startOffsetMillis>0?(t(),s("span",x1,u(o(U).moment.utc(b.item.startOffsetMillis).format("HH:mm:ss")),1)):A("",!0)]),b.item.startOffsetMillis>0&&b.item.startOffsetMillis<3e4?(t(),s("div",V1,T[21]||(T[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):A("",!0),b.item.startOffsetMillis>b.item.endOffsetMillis&&b.item.endOffsetMillis>0?(t(),s("div",P1,T[22]||(T[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):A("",!0),b.item.vodSource&&b.item.startOffsetMillis>b.item.vodSource.durationInMillis?(t(),s("div",O1,T[23]||(T[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):A("",!0),o(y).item.startOffsetMillis.$error?(t(),s("div",A1,[(t(!0),s(O,null,L(o(y).item.startOffsetMillis.$errors,p=>(t(),s("div",{key:p.$uid},u(p.$message),1))),128))])):A("",!0)]),e("div",H1,[e("div",U1,[e("div",D1,[R(e("input",{"onUpdate:modelValue":T[9]||(T[9]=p=>b.item.endOffsetMillis=p),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Z,b.item.endOffsetMillis]]),T[24]||(T[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),b.item.endOffsetMillis>0?(t(),s("span",L1,u(o(U).moment.utc(b.item.endOffsetMillis).format("HH:mm:ss")),1)):A("",!0)]),b.item.endOffsetMillis>0&&b.item.endOffsetMillis<3e4?(t(),s("div",E1,T[25]||(T[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):A("",!0),b.item.vodSource&&b.item.endOffsetMillis>b.item.vodSource.durationInMillis?(t(),s("div",q1,T[26]||(T[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):A("",!0),o(y).item.endOffsetMillis.$error?(t(),s("div",B1,[(t(!0),s(O,null,L(o(y).item.endOffsetMillis.$errors,p=>(t(),s("div",{key:p.$uid},u(p.$message),1))),128))])):A("",!0)])]),T[30]||(T[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[T[27]||(T[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:$,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",N1,[e("table",R1,[T[29]||(T[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(b.item.adBreaks,(p,E)=>(t(),s("tr",null,[e("td",null,u(E+1),1),e("td",null,[e("div",F1,[R(e("input",{"onUpdate:modelValue":te=>p.offsetMillis=te,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,z1),[[Z,p.offsetMillis]]),p.offsetMillis>0?(t(),s("span",G1,u(o(U).moment.utc(p.offsetMillis).format("HH:mm:ss")),1)):A("",!0)])]),e("td",null,[R(e("select",{"onUpdate:modelValue":te=>p.sourceLocationId=te,onChange:T[10]||(T[10]=te=>l(b.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(O,null,L(b.lookups.adBreakSourceLocations,te=>(t(),s("option",{value:te.id},u(te.name),9,Y1))),256))],40,j1),[[ue,p.sourceLocationId]])]),e("td",null,[R(e("select",{"onUpdate:modelValue":te=>p.vodSourceId=te,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(b.lookups.adBreakVodSources,te=>(t(),s("option",{value:te.id},u(te.name),9,K1))),256))],8,W1),[[ue,p.vodSourceId]])]),e("td",null,[e("button",{onClick:te=>m(E),class:"btn btn-outline-warning"},T[28]||(T[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,J1)])]))),256))])])])])])]),e("div",Q1,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:T[11]||(T[11]=p=>_()),class:"btn btn-primary",type:"button"},T[31]||(T[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,X1),T[32]||(T[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Jg))}},eb=["id"],tb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},sb={class:"modal-content"},ob={class:"modal-header"},ab={class:"modal-title"},lb={class:"modal-body"},nb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},rb=["innerHTML"],ib={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},db={class:"container"},ub={class:"col"},cb={class:"form-floating mb-2"},mb={class:"col"},fb={class:"form-floating mb-2"},pb={key:0,class:"d-block invalid-feedback"},vb={class:"col"},gb={class:"form-floating mb-2 d-none"},bb={key:0,class:"d-block invalid-feedback"},yb={class:"col"},$b={class:"form-floating mb-2"},wb={key:0,class:"d-block invalid-feedback"},hb={class:"modal-footer"},_b=["disabled"],kb={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),z=w,X=re(),i=re("modalAddPlaybackConfiguration"),b=me({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),W={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},y=be(W,b);de(async()=>{y.value.$reset()});const k=async(S,d)=>{X.value=S;const r=b;G.value.clear(),j.value="";const a=d;let l=a.lastIndexOf("/");const C=a.substring(0,l);let $=a.substring(l+1);l=$.lastIndexOf("."),$=$.substring(0,l)+"_ADCAMPAIGN_",r.item={name:$,originalVideoContentSourceUrl:d,videoContentSourceUrl:C,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},y.value.$reset();var m=document.getElementById(i.value),K=he.getOrCreateInstance(m);K.show()},v=async()=>{var S=document.getElementById(i.value),d=he.getOrCreateInstance(S);d.hide(),z("refresh")},_=async()=>{const S=b;if(P.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,j.value="";const r=S.item;r.channelOutputId=X.value,await D.put("/api/v1/channelOutputs/playback/",r).then(a=>{c.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await v()}catch(r){j.value=U.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:k,close:v}),(S,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",tb,[e("div",sb,[e("div",ob,[e("h5",ab,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=r=>v()),"aria-label":"Close"})]),e("div",lb,[o(j)?(t(),s("div",nb,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,rb)])):A("",!0),o(G).size>0?(t(),s("div",ib,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),r=>(t(),s("li",null,u(r),1))),256))])])):A("",!0),e("div",db,[e("div",ub,[e("div",cb,[R(e("textarea",{"onUpdate:modelValue":d[1]||(d[1]=r=>b.item.originalVideoContentSourceUrl=r),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Z,b.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",mb,[e("div",fb,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=r=>b.item.name=r),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,b.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",pb,[(t(!0),s(O,null,L(o(y).item.name.$errors,r=>(t(),s("div",{key:r.$uid},u(r.$message),1))),128))])):A("",!0)])]),e("div",vb,[e("div",gb,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=r=>b.item.videoContentSourceUrl=r),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,b.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(y).item.videoContentSourceUrl.$error?(t(),s("div",bb,[(t(!0),s(O,null,L(o(y).item.videoContentSourceUrl.$errors,r=>(t(),s("div",{key:r.$uid},u(r.$message),1))),128))])):A("",!0)])]),e("div",yb,[e("div",$b,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=r=>b.item.adDecisionServerUrl=r),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,b.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(y).item.adDecisionServerUrl.$error?(t(),s("div",wb,[(t(!0),s(O,null,L(o(y).item.adDecisionServerUrl.$errors,r=>(t(),s("div",{key:r.$uid},u(r.$message),1))),128))])):A("",!0),d[14]||(d[14]=Fe('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",hb,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:d[5]||(d[5]=r=>_()),class:"btn btn-primary",type:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_b),d[16]||(d[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,eb))}},Sb=["id"],Tb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mb={class:"modal-content"},Ib={class:"modal-header"},Cb={class:"modal-title"},xb={class:"modal-body"},Vb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Pb=["innerHTML"],Ob={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ab={class:"container"},Hb={class:"col"},Ub={class:"form-floating mb-2"},Db=["value"],Lb={key:0,class:"d-block invalid-feedback"},Eb={class:"col"},qb={class:"form-floating mb-2"},Bb={key:0,class:"d-block invalid-feedback"},Nb={class:"col"},Rb={class:"form-floating mb-2"},Fb={key:0,class:"d-block invalid-feedback"},zb={class:"modal-footer"},Gb=["disabled"],jb={__name:"_addChannelOutput",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),z=w,X=re(),i=re("modalAddChannelOutput"),b=me({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),W={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},manifestName:{required:se.withMessage("Manifest Name is required.",oe),$autoDirty:!0,$lazy:!0},outputType:{required:se.withMessage("Output Type is required.",oe),$autoDirty:!0,$lazy:!0}}},y=be(W,b);de(async()=>{y.value.$reset()});const k=async()=>{await v()},v=async()=>{try{await D.get("/api/v1/sourceGroups/lookup/").then(a=>{b.lookups.sourceGroups=a.data,b.lookups.sourceGroups.length===1&&(b.item.sourceGroupId=b.lookups.sourceGroups[0].id)})}catch(r){j.value=U.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},_=async r=>{X.value=r;const a=b;G.value.clear(),j.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await k(),y.value.$reset();var l=document.getElementById(i.value),C=he.getOrCreateInstance(l);C.show()},S=async()=>{var r=document.getElementById(i.value),a=he.getOrCreateInstance(r);a.hide(),z("refresh")},d=async()=>{const r=b;if(P.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,j.value="";const l=r.item;l.channelId=X.value,await D.post("/api/v1/channelOutputs",l).then(C=>{c.success("Add Channel Output","Channel output added.")}),await S()}catch(l){j.value=U.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:_,close:S}),(r,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Tb,[e("div",Mb,[e("div",Ib,[e("h5",Cb,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",xb,[o(j)?(t(),s("div",Vb,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,Pb)])):A("",!0),o(G).size>0?(t(),s("div",Ob,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),l=>(t(),s("li",null,u(l),1))),256))])])):A("",!0),e("div",Ab,[e("div",Hb,[e("div",Ub,[R(e("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>b.item.sourceGroupId=l),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(b.lookups.sourceGroups,l=>(t(),s("option",{value:l.id},u(l.name),9,Db))),256))],512),[[ue,b.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(y).item.sourceGroupId.$error?(t(),s("div",Lb,[(t(!0),s(O,null,L(o(y).item.sourceGroupId.$errors,l=>(t(),s("div",{key:l.$uid},u(l.$message),1))),128))])):A("",!0)])]),e("div",Eb,[e("div",qb,[R(e("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>b.item.outputType=l),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,b.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(y).item.outputType.$error?(t(),s("div",Bb,[(t(!0),s(O,null,L(o(y).item.outputType.$errors,l=>(t(),s("div",{key:l.$uid},u(l.$message),1))),128))])):A("",!0)])]),e("div",Nb,[e("div",Rb,[R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>b.item.manifestName=l),class:"form-control",id:"manifestName"},null,512),[[Z,b.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(y).item.manifestName.$error?(t(),s("div",Fb,[(t(!0),s(O,null,L(o(y).item.manifestName.$errors,l=>(t(),s("div",{key:l.$uid},u(l.$message),1))),128))])):A("",!0)])])])]),e("div",zb,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:a[3]||(a[3]=l=>d()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gb),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Sb))}},Yb=["id"],Wb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Kb={class:"modal-content"},Jb={class:"modal-header"},Qb={class:"modal-title"},Xb={class:"modal-body"},Zb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ey=["innerHTML"],ty={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},sy={class:"container"},oy={class:"col"},ay={class:"form-floating mb-2"},ly=["value"],ny={key:0,class:"d-block invalid-feedback"},ry={class:"col"},iy={class:"form-floating mb-2"},dy=["value"],uy={key:0,class:"d-block invalid-feedback"},cy={class:"col"},my={class:"card h-100"},fy=["id"],py={class:"modal-footer"},vy=["disabled"],gy={__name:"_editFillerSlate",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:x,pageTitle:h,busy:P,isDirty:M,validations:G,infoMessage:F,warningMessage:V,errorMessage:j,router:Q,axios:D,utils:U,toasts:c,closeWithReturnUrl:I,security:g}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),z=w,X=re("modalEditFillerSlate"),i=me({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),b={item:{channelId:{required:se.withMessage("channelId is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0}}},W=be(b,i);de(async()=>{W.value.$reset()}),Ee(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const y=async()=>{await k()},k=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then($=>{i.lookups.sourceLocations=$.data}),i.item.sourceLocationId&&await v(i.item.sourceLocationId)}catch(C){j.value=U.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},v=async C=>{try{let $=`/api/v1/vodSources/lookup/source-Location/${C}/?type=2`;await D.get($).then(m=>{i.lookups.vodSources=m.data})}catch($){j.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},_=async(C,$,m)=>{const K=i;G.value.clear(),j.value="",K.lookups={sourceLocations:[],vodSources:[]},K.item={channelId:C,sourceLocationId:$,vodSourceId:m},await y(),i.item.vodSourceId&&await l(i.item.vodSourceId),W.value.$reset();var B=document.getElementById(X.value),T=he.getOrCreateInstance(B);T.show()},S=async()=>{var C=document.getElementById(X.value),$=he.getOrCreateInstance(C);$.hide(),i.hls&&(i.hls.stopLoad(),i.hls.destroy()),z("refresh")},d=async()=>{const C=i;if(P.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,j.value="";const m=C.item;await D.put("/api/v1/channels/filler-slate",m).then(K=>{c.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await S()}catch(m){j.value=U.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{P.value=!1}},r=async()=>{i.item.vodSourceId=null,await v(i.item.sourceLocationId)},a=async()=>{await l(i.item.vodSourceId)},l=async C=>{try{let $=`/api/v1/vodSources/${C}/hls`;const m=await D.get($).then(B=>B.data);if(i.hls){i.hls.loadSource(m);return}const K=document.getElementById(`video-${i.item.channelId}`);i.hls=U.createHlsStream(K,m)}catch($){j.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return f({open:_,close:S}),(C,$)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Wb,[e("div",Kb,[e("div",Jb,[e("h5",Qb,[$[6]||($[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(u(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=m=>S()),"aria-label":"Close"})]),e("div",Xb,[o(j)?(t(),s("div",Zb,[$[7]||($[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(j)},null,8,ey)])):A("",!0),o(G).size>0?(t(),s("div",ty,[$[8]||($[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(G).values(),m=>(t(),s("li",null,u(m),1))),256))])])):A("",!0),e("div",sy,[e("div",oy,[e("div",ay,[R(e("select",{"onUpdate:modelValue":$[1]||($[1]=m=>i.item.sourceLocationId=m),onChange:$[2]||($[2]=m=>r()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(i.lookups.sourceLocations,m=>(t(),s("option",{value:m.id},u(m.name),9,ly))),256))],544),[[ue,i.item.sourceLocationId]]),$[9]||($[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",ny,[(t(!0),s(O,null,L(o(W).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},u(m.$message),1))),128))])):A("",!0)])]),e("div",ry,[e("div",iy,[R(e("select",{"onUpdate:modelValue":$[3]||($[3]=m=>i.item.vodSourceId=m),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(i.lookups.vodSources,m=>(t(),s("option",{value:m.id},u(m.name),9,dy))),256))],544),[[ue,i.item.vodSourceId]]),$[10]||($[10]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",uy,[(t(!0),s(O,null,L(o(W).item.vodSourceId.$errors,m=>(t(),s("div",{key:m.$uid},u(m.$message),1))),128))])):A("",!0)])]),e("div",cy,[e("div",my,[e("video",{id:`video-${i.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,fy)])])])]),e("div",py,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:$[4]||($[4]=m=>d()),class:"btn btn-primary",type:"button"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vy),e("button",{onClick:$[5]||($[5]=m=>S()),class:"btn btn-secondary ms-1"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Yb))}},by={class:"my-2"},yy={class:"ms-lg-5"},$y={class:"row g-2 ms-lg-5"},wy={class:"col-12 col-sm-4"},hy={class:"col-12 col-sm-8"},_y={class:"mt-2"},ky={class:"row row-cols-1 row-cols-sm-3 g-2 ms-lg-5"},Sy={class:"col-sm-3"},Ty={class:"col-sm-3"},My={class:"col-sm-6"},Iy={class:"row row-cols-1 row-cols-sm-2 g-2 ms-lg-5"},Cy={class:"col"},xy={class:"col"},Vy={class:"row row-cols-1 row-cols-sm-2 g-2 ms-lg-5"},Py={class:"col"},Oy={class:"col"},Ay={key:0,class:"col"},Hy={key:0,class:"mt-2"},Uy={class:"table-responsive border"},Dy={class:"table table-sm table-bordered1 mb-0"},Ly={class:"text-center me-1"},Ey={class:"text-center"},qy={class:"text-center"},By={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Ny={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},Ry={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(n){const f=n,{moment:w,generateReturnUrl:x}=ze();return de(()=>{f.item.value}),(h,P)=>{const M=ee("router-link");return t(),s("div",by,[e("div",null,[P[1]||(P[1]=e("h5",null," VOD ",-1)),e("div",yy,[P[0]||(P[0]=e("div",{class:"text-info-emphasis"},"Title",-1)),e("div",null,[N(M,{to:`${n.urlViewVodSource}/${n.item.vodSourceId}/${o(x)()}`,class:"link-offset-2"},{default:q(()=>[J(u(n.item.vodSource.name),1)]),_:1},8,["to"])])])]),e("div",null,[P[4]||(P[4]=e("h5",null," Video ",-1)),e("div",$y,[e("div",wy,[P[2]||(P[2]=e("div",{class:"text-info-emphasis"},"Title",-1)),e("div",null,[N(M,{to:`${n.urlViewVideo}/${n.item.vodSource.video.videoId}/${o(x)()}`,class:"link-offset-2"},{default:q(()=>[J(u(n.item.vodSource.video.title),1)]),_:1},8,["to"])])]),e("div",hy,[P[3]||(P[3]=e("div",{class:"text-info-emphasis"},"Description",-1)),e("div",null,u(n.item.vodSource.video.description),1)])])]),e("div",_y,[P[13]||(P[13]=e("h5",null," Schedule ",-1)),e("div",ky,[e("div",Sy,[P[5]||(P[5]=e("div",{class:"text-info-emphasis"},"Start Offset",-1)),e("div",null,u(o(w).utc(n.item.startOffsetMillis).format("HH:mm:ss")),1)]),e("div",Ty,[P[6]||(P[6]=e("div",{class:"text-info-emphasis"},"End Offset",-1)),e("div",null,u(o(w).utc(n.item.endOffsetMillis).format("HH:mm:ss")),1)]),e("div",My,[P[7]||(P[7]=e("div",{class:"text-info-emphasis"},"Clip",-1)),e("div",null,u(o(w).utc(n.item.durationInMillis).format("HH:mm:ss")),1)])]),e("div",Iy,[e("div",Cy,[P[8]||(P[8]=e("div",{class:"text-info-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,u(o(w).utc(n.item.adBreaksDurationInMillis).format("HH:mm:ss")),1)]),e("div",xy,[P[9]||(P[9]=e("div",{class:"text-info-emphasis"},"Total Program Duration",-1)),e("div",null,u(o(w).utc(n.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("div",Vy,[e("div",Py,[P[10]||(P[10]=e("div",{class:"text-info-emphasis"},"Program Start",-1)),e("div",null,u(o(w).utc(n.item.dateScheduledStart).format("lll")),1)]),e("div",Oy,[P[11]||(P[11]=e("div",{class:"text-info-emphasis"},"Program End",-1)),e("div",null,u(o(w).utc(n.item.dateScheduledEnd).format("lll")),1)]),n.item.relativeProgram?(t(),s("div",Ay,[P[12]||(P[12]=e("div",{class:"text-info-emphasis"},"Relative Program",-1)),e("div",null,u(n.item.relativeProgram.name),1)])):A("",!0)])]),n.item.adBreaks.length?(t(),s("div",Hy,[P[15]||(P[15]=e("h5",null," Ad Breaks ",-1)),e("div",Uy,[e("table",Dy,[e("tbody",null,[P[14]||(P[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(O,null,L(n.item.adBreaks,(G,F)=>(t(),s("tr",null,[e("td",Ly,u(F+1),1),e("td",Ey,u(o(w).utc(G.offsetMillis).format("HH:mm:ss")),1),e("td",qy,u(o(w).utc(G.durationInMillis).format("HH:mm:ss")),1),e("td",null,[N(M,{to:`${n.urlViewVodSource}/${G.vodSource.vodSourceId}/${o(x)()}`,class:"link-offset-2"},{default:q(()=>[G.vodSource.arn?(t(),s("span",By)):(t(),s("span",Ny)),J(" "+u(G.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):A("",!0)])}}},Fy={key:0,class:"dropdown"},zy={key:0,class:"fas fa-fw fa-play"},Gy={key:1,class:"fas fa-fw fa-stop"},jy={class:"dropdown-menu"},Yy={key:0},Wy={key:1},Ky={key:0},Jy={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Qy={class:"nav-item",role:"presentation"},Xy={class:"nav-item",role:"presentation"},Zy={class:"nav-item",role:"presentation"},e$={class:"nav-item",role:"presentation"},t$={class:"nav-item",role:"presentation"},s$={class:"tab-content",id:"myTabContent"},o$={class:"mt-2"},a$={class:"row row-cols-1 row-cols-sm-3"},l$={class:"col"},n$={class:"form-floating mb-2"},r$={class:"col"},i$={class:"form-floating mb-2"},d$={class:"col"},u$={class:"form-floating mb-2"},c$={class:"d-flex flex-row justify-content-start align-items-center"},m$={key:0,class:"ms-2"},f$={class:"row row-cols-sm-2 mt-1"},p$={class:"col"},v$={class:"form-floating mb-2"},g$={class:"col"},b$={class:"form-floating mb-2"},y$={class:"mt-2"},$$={class:"d-flex flex-row justify-content-start align-items-center"},w$={class:"ms-2"},h$={key:0,class:"alert bg-warning mt-2"},_$={class:"table-responsive border mt-1"},k$={class:"table table-bordered1 mb-0"},S$={class:"badge bg-info"},T$={key:0,class:"text-wrap"},M$={key:1,class:"text-warning"},I$={key:0,class:"text-end"},C$={key:1,class:"text-end"},x$=["onClick"],V$={key:0},P$={colspan:"999"},O$={class:"d-flex flex-row justify-content-start align-items-center"},A$={class:"ms-2"},H$={if:"item.playbackUrl"},U$=["onClick"],D$={key:0,class:"table-responsive mt-2"},L$={class:"table table-borderless mb-0 table-sm"},E$={class:"align-middle1"},q$={class:"badge bg-success"},B$={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},N$={class:"text-end"},R$=["onClick"],F$=["onClick"],z$={class:"mt-2"},G$={class:"table-responsive border"},j$={class:"table mb-0 table-sm table-bordered1"},Y$={class:"align-middle1"},W$={class:"text-center me-1"},K$={class:"d-flex flex-row justify-content-start"},J$={class:""},Q$={class:"mb-1"},X$=["src"],Z$={class:"ms-2"},ew={key:0,class:"fas fa-fw fa-check-circle text-success"},tw={class:"fw-lighter small"},sw={class:"fw-lighter small"},ow={class:"text-center"},aw={class:"text-center"},lw={class:"text-end"},nw={class:"btn-group position-static"},rw=["onClick"],iw={key:0,class:"fas fa-fw fa-chevron-circle-up"},dw={key:1,class:"fas fa-fw fa-chevron-circle-down"},uw={class:"dropdown-menu"},cw=["onClick"],mw={key:0},fw=["onClick"],pw=["onClick"],vw=["onClick"],gw={key:0},bw={colspan:"999"},yw={class:"text-end mt-2 d-none"},$w={class:"mt-2"},ww={class:"text-end mb-2"},hw={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},_w={class:"col"},kw={class:"card shadow-sm"},Sw=["id"],Tw={class:"p-1"},Mw={class:"card-title1 text-center"},Iw={class:"col"},Cw={class:"card shadow-sm"},xw=["id"],Vw={class:"p-1"},Pw={class:"card-title1 text-center text-truncate"},Ow={class:"small1"},Aw={class:"mt-2"},Hw={key:0,class:"fas fa-fw fa-check-circle text-success"},Uw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Dw={key:0,class:"fas fa-fw fa-check-circle text-success"},Lw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Ew={key:0,class:"fas fa-fw fa-check-circle text-success"},qw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Bw={key:0,class:"fas fa-fw fa-check text-warning"},Nw={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},Rw={key:0,class:"fas fa-fw fa-check-circle text-success"},Fw={key:1,class:"fas fa-fw fa-times-circle text-warning"},zw={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(n){const f=n,{appTitle:w,pageTitle:x,busy:h,isDirty:P,validations:M,infoMessage:G,warningMessage:F,errorMessage:V,router:j,axios:Q,utils:D,toasts:U,close:c,closeWithReturnUrl:I,generateReturnUrl:g,security:z}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});Se("$config");const X=ge();X.user;const i=me({user:X.user,item:null}),b=re(null),W=re(null),y=re(null),k=re(null),v=re(null),_=re(),S=$e(()=>i.item&&i.item.state==="RUNNING");de(async()=>{await l();const ie=D.getPageTab("channel")||"information-tab";d(ie)}),Ee(()=>{Le()});const d=ie=>{D.setPageTab("channel",ie),_.value=ie,ie==="preview-tab"&&setTimeout(()=>{var H=document.getElementById("masonry");new Je(H,{})},2e3)},r=ie=>ie===_.value?"active":"",a=ie=>ie===_.value?"show active":"",l=async()=>{const ie=i;if(Le(),!h.value)try{h.value=!0,V.value="",i.item=null;const H=`/api/v1/channels/${f.id}/`;await Q.get(H).then(pe=>{ie.item=pe.data,ie.item.outputs.forEach(Ve=>{Ve.playbackConfigurations.forEach(ae=>{if(Ve.playbackUrl){const Ce=Ve.playbackUrl,ye=Ce.lastIndexOf("/"),We=Ce.substring(0,ye),Ne=Ce.substring(ye+1),Ke=ae.hlsConfigurationManifestEndpointPrefix;Ke&&(ae.hlsPlaylist=Ke+Ne)}})})})}catch(H){V.value=D.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{h.value=!1}},C=async()=>{await l()},$=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!h.value){V.value=null;try{h.value=!0,await Q.post(`/api/v1/channels/${f.id}/publish/`).then(H=>{U.success("Publish Channel","Channel was published.")}),h.value=!1,await C()}catch(H){V.value=D.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{h.value=!1}}},m=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!h.value){V.value=null;try{h.value=!0,await Q.delete(`/api/v1/channels/${f.id}/unpublish/`).then(H=>{U.warning("Remove Channel","Channel was removed.")}),h.value=!1,await C()}catch(H){V.value=D.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{h.value=!1}}},K=()=>{b.value.open(f.id)},B=ie=>{ie.outputType==="HLS"&&W.value.open(ie.channelOutputId,ie.playbackUrl)},T=()=>{y.value.open(f.id)},p=ie=>{k.value.open(ie)},E=(ie,H)=>{v.value.open(f.id,ie,H)},te=async ie=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!h.value){V.value=null;try{h.value=!0,await Q.delete(`/api/v1/programs/${ie}/`).then(pe=>{U.success("Delete Program","Program was deleted..",{async onClose(){}})}),h.value=!1,await C()}catch(pe){V.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},ne=async ie=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!h.value){V.value=null;try{h.value=!0,await Q.delete(`/api/v1/channelOutputs/${ie}/`).then(pe=>{U.success("Delete Channel Output","Channel output was deleted..")}),h.value=!1,await C()}catch(pe){V.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},Y=async ie=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!h.value){V.value=null;try{h.value=!0,await Q.post(`/api/v1/programs/${ie}/publish/`).then(pe=>{U.success("Publish Program","Program was published..",{async onClose(){}})}),h.value=!1,await C()}catch(pe){V.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},_e=async ie=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!h.value){V.value=null;try{h.value=!0,await Q.delete(`/api/v1/programs/${ie}/unpublish/`).then(pe=>{U.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),h.value=!1,await C()}catch(pe){V.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},we=async ie=>{if(!h.value){V.value=null;try{h.value=!0,await Q.put(`/api/v1/channels/${f.id}/change-state/${ie}`).then(H=>{U.success("Update Channel state","Change state was updated")}),h.value=!1,ie==="STOPPED"&&_.value==="preview-tab"&&(Le(),d("information-tab")),await C()}catch(H){V.value=D.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{h.value=!1}}},it=async ie=>{if(!h.value)try{h.value=!0,V.value="",await Q.post(`/api/v1/channelOutputs/${ie}/playback/publish/`).then(H=>{U.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),h.value=!1,await C()}catch(H){V.value=D.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{h.value=!1}},dt=async ie=>{if(confirm("Do you want to remove this Playback Configuration?")&&!h.value)try{h.value=!0,V.value="",await Q.delete(`/api/v1/channelOutputs/${ie}/playback/`).then(pe=>{U.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),h.value=!1,await C()}catch(pe){V.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}},ut=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ie=i.item.outputs;Le(),ie.forEach(H=>{var pe=document.getElementById(`video-${H.channelOutputId}`);H.hls&&H.hls.destroy(),H.hls=D.createHlsStream(pe,H.playbackUrl,"Main playlist started."),pe.play(),H.playbackConfigurations.forEach(xe=>{if(xe.hls&&xe.hls.destroy(),xe.arn){var Ve=document.getElementById(`video-${xe.channelOutputPlaybackConfigurationId}`);try{xe.hls=D.createHlsStream(Ve,xe.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Ve.play()}catch(ae){U.error("Failed Stream SSAI Playlist",ae)}}})}),setTimeout(()=>{var H=document.getElementById("masonry");new Je(H,{})},2e3)}},Le=()=>{i.item&&i.item.outputs&&i.item.outputs.forEach(H=>{H.hls&&(H.hls.detachMedia(),H.hls.destroy(),delete H.hls),H.playbackConfigurations.forEach(pe=>{pe.hls&&(pe.hls.detachMedia(),pe.hls.destroy(),delete pe.hls)})})};return(ie,H)=>{const pe=ee("router-link"),xe=ee("PageHeader"),Ve=ee("PageBody");return t(),ce(fe,null,{default:q(()=>[e("div",null,[N(xe,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(x)},{default:q(()=>[i.item?(t(),s("div",Fy,[e("button",{class:le([[S.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[S.value?(t(),s("span",zy)):(t(),s("span",Gy)),J(" "+u(i.item.state),1)],2),e("ul",jy,[i.item.arn?(t(),s("li",Yy,[S.value?(t(),s("button",{key:0,onClick:H[0]||(H[0]=ae=>we("STOPPED")),class:"dropdown-item"},H[20]||(H[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),J("Stop ")]))):(t(),s("button",{key:1,onClick:H[1]||(H[1]=ae=>we("RUNNING")),class:"dropdown-item"},H[21]||(H[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),J("Start ")])))])):A("",!0),S.value?A("",!0):(t(),s("li",Wy,[i.item.arn?(t(),s("button",{key:0,onClick:H[2]||(H[2]=ae=>m()),class:"dropdown-item"},H[22]||(H[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),J("Unpublish ")]))):(t(),s("button",{key:1,onClick:H[3]||(H[3]=ae=>$()),class:"dropdown-item"},H[23]||(H[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Publish ")])))])),i.item.arn?(t(),s(O,{key:2},[H[25]||(H[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:H[4]||(H[4]=ae=>$()),class:"dropdown-item"},H[24]||(H[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Republish ")]))])],64)):A("",!0)])])):A("",!0),N(pe,{to:`${n.urlSchedulePrograms}/${n.id}`,class:"ms-2 btn btn-primary"},{default:q(()=>H[26]||(H[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:H[5]||(H[5]=ae=>C()),class:"ms-2 btn btn-secondary"},H[27]||(H[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:H[6]||(H[6]=ae=>o(I)(f.urlMain)),class:"btn btn-secondary ms-1"},H[28]||(H[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(Ve,{errorMessage:o(V)},{default:q(()=>[i.item?(t(),s("div",Ky,[e("ul",Jy,[e("li",Qy,[e("button",{onClick:H[7]||(H[7]=ae=>d("information-tab")),class:le([r("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},H[29]||(H[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),J("Information ")]),2)]),e("li",Xy,[e("button",{onClick:H[8]||(H[8]=ae=>d("outputPlayback-tab")),class:le([r("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},H[30]||(H[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),J("Output/Playback ")]),2)]),e("li",Zy,[e("button",{onClick:H[9]||(H[9]=ae=>d("programs-tab")),class:le([r("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},H[31]||(H[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),J("Programs ")]),2)]),e("li",e$,[e("button",{onClick:H[10]||(H[10]=ae=>d("preview-tab")),class:le([[S.value?"":"disabled",r("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},H[32]||(H[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),J("Preview ")]),2)]),e("li",t$,[e("button",{onClick:H[11]||(H[11]=ae=>d("checklist-tab")),class:le([r("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},H[33]||(H[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),J("Checklist ")]),2)])]),e("div",s$,[e("div",{class:le([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",o$,[e("div",a$,[e("div",l$,[e("div",n$,[R(e("input",{"onUpdate:modelValue":H[12]||(H[12]=ae=>i.item.name=ae),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,i.item.name]]),H[34]||(H[34]=e("label",{for:"name"},"Name",-1))])]),e("div",r$,[e("div",i$,[R(e("input",{"onUpdate:modelValue":H[13]||(H[13]=ae=>i.item.playbackMode=ae),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[Z,i.item.playbackMode]]),H[35]||(H[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",d$,[e("div",u$,[R(e("input",{"onUpdate:modelValue":H[14]||(H[14]=ae=>i.item.tier=ae),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[Z,i.item.tier]]),H[36]||(H[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",c$,[H[38]||(H[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),S.value?A("",!0):(t(),s("div",m$,[e("button",{onClick:H[15]||(H[15]=ae=>E(i.item.fillerSlateSourceLocation.sourceLocationId,i.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},H[37]||(H[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",f$,[e("div",p$,[e("div",v$,[N(pe,{to:`${n.urlViewSourceLocation}/${i.item.fillerSlateSourceLocation.sourceLocationId}/${o(g)()}`,class:le([[i.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:q(()=>[J(u(i.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),H[39]||(H[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",g$,[e("div",b$,[N(pe,{to:`${n.urlViewVodSource}/${i.item.fillerSlateVodSource.vodSourceId}/${o(g)()}`,class:le([[i.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:q(()=>[J(u(i.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),H[40]||(H[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:le([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",y$,[e("div",null,[e("div",$$,[H[42]||(H[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",w$,[e("button",{onClick:H[16]||(H[16]=ae=>T()),class:"btn btn-outline-primary btn-sm"},H[41]||(H[41]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),i.item.outputs.length<=0?(t(),s("div",h$,H[43]||(H[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),J("Channel Output is required ")]))):A("",!0),e("div",_$,[e("table",k$,[H[53]||(H[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.outputs,(ae,Ce)=>(t(),s(O,{key:ae.channelOutputId},[e("tr",null,[e("td",null,u(Ce+1),1),e("td",null,[e("div",null,u(ae.manifestName),1),e("div",null,[e("span",S$,u(ae.outputType),1)])]),e("td",null,[e("div",null,[N(pe,{to:`${n.urlViewSourceGroup}/${ae.sourceGroupId}/${o(g)()}`,class:"link-offset-2"},{default:q(()=>[J(u(ae.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[ae.playbackUrl?(t(),s("div",T$,u(ae.playbackUrl),1)):(t(),s("div",M$,H[44]||(H[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),J("Publish channel to get the playback url ")])))]),S.value?(t(),s("td",I$)):(t(),s("td",C$,[e("button",{onClick:ye=>ne(ae.channelOutputId),class:"btn btn-outline-warning btn-sm"},H[45]||(H[45]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,x$)]))]),ae.playbackUrl?(t(),s("tr",V$,[H[50]||(H[50]=e("td",null,null,-1)),H[51]||(H[51]=e("td",null,null,-1)),H[52]||(H[52]=e("td",null,null,-1)),e("td",P$,[e("div",O$,[H[47]||(H[47]=e("h5",null,[J("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",A$,[e("div",H$,[e("button",{onClick:ye=>B(ae),class:"btn btn-outline-primary btn-sm"},H[46]||(H[46]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,U$)])])]),ae.playbackConfigurations.length>0?(t(),s("div",D$,[e("table",L$,[e("tbody",null,[(t(!0),s(O,null,L(ae.playbackConfigurations,(ye,We)=>(t(),s("tr",E$,[e("td",null,u(We+1),1),e("td",null,[e("span",q$,u(ye.name),1),e("div",B$,[e("span",null,u(ye.adDecisionServerUrl),1)])]),e("td",N$,[ye.arn?A("",!0):(t(),s("button",{key:0,onClick:Ne=>it(ye.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},H[48]||(H[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,R$)),e("button",{onClick:Ne=>dt(ye.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},H[49]||(H[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,F$)])]))),256))])])])):A("",!0)])])):A("",!0)],64))),128))]),_:1},512),[[Te,i.item.outputs.length>0]])])])])])],2),e("div",{class:le([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",z$,[e("div",G$,[e("table",j$,[H[60]||(H[60]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:q(()=>[(t(!0),s(O,null,L(i.item.programs,(ae,Ce)=>(t(),s(O,{key:ae.programId},[e("tr",Y$,[e("td",W$,u(Ce+1),1),e("td",null,[e("div",K$,[e("div",J$,[ae.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(ae.vodSource.video.thumbnails,ye=>(t(),s("div",Q$,[e("img",{src:ye.url,class:"img-fuild border",width:"128"},null,8,X$)]))),256)):A("",!0)]),e("div",Z$,[e("div",null,[ae.arn?(t(),s("span",ew)):A("",!0),e("span",null,u(ae.name),1)]),e("div",null,[e("span",tw,u(o(D).moment.utc(ae.dateScheduledStart).calendar())+" (utc)",1)]),e("div",null,[e("span",sw,u(o(D).moment(ae.dateScheduledStart).calendar())+" (local)",1)])])])]),e("td",ow,u(o(D).moment.utc(ae.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",aw,u(ae.adBreaks.length),1),e("td",lw,[e("div",nw,[e("button",{onClick:ye=>ae.expand=!ae.expand,type:"button",class:le([[ae.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[ae.expand?(t(),s("span",iw)):(t(),s("span",dw))],10,rw),H[58]||(H[58]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",uw,[e("li",null,[e("button",{onClick:ye=>p(ae.programId),class:"dropdown-item"},H[54]||(H[54]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),J("Edit ")]),8,cw)]),ae.arn?(t(),s("li",mw,[e("button",{onClick:ye=>_e(ae.programId),class:"dropdown-item"},H[55]||(H[55]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),J("Unpublish ")]),8,fw)])):(t(),s(O,{key:1},[e("li",null,[e("button",{onClick:ye=>Y(ae.programId),class:"dropdown-item"},H[56]||(H[56]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Publish ")]),8,pw)]),e("li",null,[e("button",{onClick:ye=>te(ae.programId),class:"dropdown-item"},H[57]||(H[57]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),J("Remove ")]),8,vw)])],64))])])])]),ae.expand?(t(),s("tr",gw,[H[59]||(H[59]=e("td",null,null,-1)),e("td",bw,[N(Ry,{item:ae,urlViewVideo:n.urlViewVideo,urlViewVodSource:n.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):A("",!0)],64))),128))]),_:1},512),[[Te,i.item.programs.length>0]])])]),e("div",yw,[e("button",{onClick:H[17]||(H[17]=ae=>K()),class:"btn btn-outline-primary"},H[61]||(H[61]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Program ")]))])])],2),S.value?(t(),s("div",{key:0,class:le([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",$w,[e("div",ww,[i.item.outputs[0].hls?(t(),s("button",{key:1,onClick:H[19]||(H[19]=ae=>Le()),class:"btn btn-primary"},H[63]||(H[63]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:H[18]||(H[18]=ae=>ut()),class:"btn btn-primary"},H[62]||(H[62]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",hw,[(t(!0),s(O,null,L(i.item.outputs,ae=>(t(),s(O,null,[e("div",_w,[e("div",kw,[e("video",{id:`video-${ae.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,Sw),e("div",Tw,[e("div",Mw,u(ae.manifestName),1)])])]),(t(!0),s(O,null,L(ae.playbackConfigurations,(Ce,ye)=>(t(),s("div",Iw,[e("div",Cw,[e("video",{id:`video-${Ce.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,xw),e("div",Vw,[e("div",Pw,[J(" #"+u(ye+1)+" ",1),e("span",Ow,u(Ce.name),1)])])])]))),256))],64))),256))])])],2)):A("",!0),e("div",{class:le([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Aw,[H[69]||(H[69]=J(" Checklist ")),e("ul",null,[e("li",null,[i.item.fillerSlateSourceLocation.arn?(t(),s("span",Hw)):(t(),s("span",Uw)),H[64]||(H[64]=J(" Filler Slate Source Location "))]),e("li",null,[i.item.fillerSlateVodSource.arn?(t(),s("span",Dw)):(t(),s("span",Lw)),H[65]||(H[65]=J(" Filler Slate VOD Source "))]),e("li",null,[i.item.outputs.length>0?(t(),s("span",Ew)):(t(),s("span",qw)),H[67]||(H[67]=J(" Outputs ")),e("ul",null,[e("li",null,[i.item.outputs.some(ae=>ae.playbackConfigurations.length>0)?(t(),s("span",Bw)):(t(),s("span",Nw)),H[66]||(H[66]=J(" Ad Insertion setup "))])])]),e("li",null,[i.item.programs.length>0?(t(),s("span",Rw)):(t(),s("span",Fw)),H[68]||(H[68]=J(" Programs "))])])])],2)])])):A("",!0)]),_:1},8,["errorMessage"]),N(Z1,{ref_key:"modalAddProgram",ref:b,onRefresh:C},null,512),N(kb,{ref_key:"modalAddPlaybackConfiguration",ref:W,onRefresh:C},null,512),N(jb,{ref_key:"modalAddChannelOutput",ref:y,onRefresh:C},null,512),N(nt,{ref_key:"modalEditProgram",ref:k,onOnClose:C},null,512),N(gy,{ref_key:"modalEditFillerSlate",ref:v,onRefresh:C},null,512)])]),_:1})}}},Gw={path:"/",component:fa,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Aa},{path:"videos",children:[{path:"",component:Pn},{path:"view/:id",component:gr,props:!0},{path:"add",component:pl},{path:"edit/:id",component:Kl,props:!0}]},{path:"source-groups",children:[{path:"add",component:wr},{path:"edit/:id",component:Rr,props:!0},{path:"",component:Jr},{path:"view/:id",component:mi,props:!0}]},{path:"source-locations",children:[{path:"add",component:yi},{path:"edit/:id",component:hi,props:!0},{path:"",component:Oi},{path:"view/:id",component:Zi,props:!0}]},{path:"vod-sources",children:[{path:"add",component:Td},{path:"edit/:id",component:Xd,props:!0},{path:"",component:xu},{path:"view/:id",component:im,props:!0}]},{path:"channels",children:[{path:"add",component:mv},{path:"edit/:id",component:vv,props:!0},{path:"",component:Tv},{path:"schedule-programs/:id",component:Kg,props:!0},{path:"view/:id",component:zw,props:!0}]},{path:"program-templates",children:[{path:"add",component:tf},{path:"edit/:id",component:jf,props:!0},{path:"",component:up},{path:"view/:id",component:Gp,props:!0}]}]},rt=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{...Gw}]}),jw={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const n=this,w=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();w.on("onNotificationCreated",function(x){let h=x.content;x.notificationEntityClassText==="Deposit"&&(h+="<br/>",h+=`<a href="${n.urlViewDeposit}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.notificationEntityClassText==="Withdraw"&&(h+="<br/>",h+=`<a href="${n.urlViewWithdraw}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.notificationEntityClassText==="ManualModeOfPayment"&&(h+="<br/>",h+=`<a href="${n.urlViewManualModeOfPayment}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.iconClass;let P="secondary";switch(x.notificationType){case 1:P="success";break;case 3:P="info";break;case 3:P="success";break;case 4:P="info";break;case 5:P="warning";break;case 6:P="error";break}n.$toast[P](x.subject,h,{timeOut:1e4});const M=x.subject,V={body:h,icon:"/img/192x102.png"};new Notification(M,V)}),w.on("jobUpdated",function(x){n.$bus.$emit("event:job-updated",x)}),await w.start().then(function(){}).catch(function(x){})}}};function Yw(n,f,w,x,h,P){return t(),s("div")}const Ww=Me(jw,[["render",Yw],["__scopeId","data-v-5b4a9fa2"]]),Kw={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},Jw={class:"container"},Qw={class:"col-md"},Xw={class:"navbar-brand mb-0 ms-1 align-middle"},Zw={class:"col-md-auto"},eh={class:"d-flex flex-row align-items-center justify-content-end"},th={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(n){return(f,w)=>(t(),ce(fe,null,{default:q(()=>[e("nav",Kw,[e("div",Jw,[e("div",Qw,[Oe(f.$slots,"title",{},()=>[e("a",Xw,[e("i",{class:le([n.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,u(n.pageTitle),1)])],!0)]),e("div",Zw,[e("div",eh,[Oe(f.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},sh=Me(th,[["__scopeId","data-v-eb40af38"]]),oh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ah=["innerHTML"],lh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},nh={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(f,w)=>(t(),ce(fe,null,{default:q(()=>[Oe(f.$slots,"default",{},()=>[n.errorMessage?(t(),s("div",oh,[w[0]||(w[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:n.errorMessage},null,8,ah)])):A("",!0),n.vuelidate&&n.vuelidate.$error?(t(),s("div",lh,[w[1]||(w[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(n.vuelidate.$errors,x=>(t(),s("li",{key:x.$uid},[x.$validator==="$each"?(t(),s(O,{key:0},[J(" Check errors in '"+u(x.$property)+"' ",1)],64)):(t(),s(O,{key:1},[J(u(x.$message),1)],64))]))),128))])])):A("",!0)])]),_:3}))}},rh={class:"py-3 container-md flex-grow-1 overflow-y-auto"},ih={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(f,w)=>{const x=ee("PageMessages");return t(),ce(fe,null,{default:q(()=>[e("div",rh,[N(x,{errorMessage:n.errorMessage,vuelidate:n.vuelidate},null,8,["errorMessage","vuelidate"]),Oe(f.$slots,"default")])]),_:3})}}},dh={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const n=this;n.busy||(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveFirst(){const n=this;if(n.busy)return;n.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveLast(){const n=this;if(n.busy)return;const f=n.filter;f.pageIndex!==f.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(f.totalPages))},async move(n){const f=this;if(f.busy)return;const w=f.filter,x=w.pageIndex+n;x>=0&&x<=w.totalPages&&(document.activeElement&&document.activeElement.blur(),await f.search(x))}}},uh={class:"mt-2"},ch={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},mh={key:0,class:"col-sm order-2 order-sm-1"},fh={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},ph={class:"me-1 fw-bold"},vh={class:"fw-bold"},gh={class:"ms-1"},bh={class:"col-sm-auto ms-auto order-1 order-sm-2"},yh={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},$h={key:0,class:"page-item"},wh={key:1,class:"page-item"},hh={key:2,class:"page-item"},_h={class:"page-item active"},kh={class:"page-link"},Sh={key:3,class:"page-item"},Th={key:4,class:"page-item"},Mh={key:5,class:"page-item"},Ih={key:1,class:"text-info font-weight-bold text-center"},Ch={key:0},xh={key:1};function Vh(n,f,w,x,h,P){return t(),s("div",uh,[w.filter.items.length?(t(),s("div",ch,[w.showPerPage?(t(),s("div",mh,[e("div",fh,[e("div",null,[e("span",ph,u(w.filter.totalCount),1),f[8]||(f[8]=J("records in ")),e("span",vh,u(w.filter.totalPages),1),f[9]||(f[9]=J(" page(s) "))]),e("div",gh,[R(e("select",{"onUpdate:modelValue":f[0]||(f[0]=M=>w.filter.pageSize=M),onChange:f[1]||(f[1]=(...M)=>P.changePagination&&P.changePagination(...M)),class:"form-select form-select-sm me-1"},f[10]||(f[10]=[Fe('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ue,w.filter.pageSize]])]),f[11]||(f[11]=e("div",{class:"ms-1"},"per page",-1))])])):A("",!0),e("div",bh,[e("ul",yh,[w.filter.pageIndex!==1?(t(),s("li",$h,[e("button",{class:"page-link","aria-label":"Previous",onClick:f[2]||(f[2]=(...M)=>P.moveFirst&&P.moveFirst(...M))},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):A("",!0),w.filter.pageIndex>2?(t(),s("li",wh,[e("button",{class:"page-link",onClick:f[3]||(f[3]=M=>P.move(-2))},u(w.filter.pageIndex-2),1)])):A("",!0),w.filter.pageIndex>1?(t(),s("li",hh,[e("button",{class:"page-link",onClick:f[4]||(f[4]=M=>P.move(-1))},u(w.filter.pageIndex-1),1)])):A("",!0),e("li",_h,[e("span",kh,u(w.filter.pageIndex),1)]),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",Sh,[e("button",{class:"page-link",onClick:f[5]||(f[5]=M=>P.move(1))},u(w.filter.pageIndex+1),1)])):A("",!0),w.filter.pageIndex<w.filter.totalPages-1?(t(),s("li",Th,[e("button",{class:"page-link",onClick:f[6]||(f[6]=M=>P.move(2))},u(w.filter.pageIndex+2),1)])):A("",!0),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",Mh,[e("button",{class:"page-link","aria-label":"Next",onClick:f[7]||(f[7]=(...M)=>P.moveLast&&P.moveLast(...M))},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):A("",!0)])])])):(t(),s("div",Ih,[w.noRecords?(t(),s("div",Ch,u(w.noRecords),1)):(t(),s("div",xh,"No record(s) found."))]))])}const Ph=Me(dh,[["render",Vh]]),Oh={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let n=this;if(!n.enabled)return;let f=n.filter;f.sortField===n.field?f.sortOrder===0?f.sortField=null:f.sortOrder=f.sortOrder===0?1:0:(f.sortField=n.field,f.sortOrder=1),n.$emit("search")}}},Ah={class:"align-self-center"};function Hh(n,f,w,x,h,P){return t(),s("div",{onClick:f[0]||(f[0]=(...M)=>P.click&&P.click(...M)),class:"d-flex flex-row justify-content-start align-content-center",style:ot({cursor:w.enabled?"pointer":""})},[Oe(n.$slots,"default"),e("span",Ah,[w.showSort?(t(),s("span",{key:0,class:le([{"fa-sort text-gray-500":!P.currentSortField(),"fa-sort-up":P.currentSortField()&&P.sortUp(),"fa-sort-down":P.currentSortField()&&!P.sortUp()},"fas fa-fw mr-1"])},null,2)):A("",!0)])],4)}const Uh=Me(Oh,[["render",Hh]]),Dh={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(n){const f=this;f.setSelected(n),f.$emit("onSelectedRow",n)}}},Lh={class:"table-responsive m-0"},Eh=["href"],qh={key:1},Bh=["onClick"],Nh={class:"form-group row no-gutters"},Rh={class:"col-5 col-form-label"},Fh={class:"col align-self-center"},zh=["href"],Gh={key:1};function jh(n,f,w,x,h,P){return t(),s("div",null,[e("div",Lh,[e("table",{class:le(["table table-hover d-none d-md-table card",w.tableCss])},[e("thead",null,[Oe(n.$slots,"header",{},()=>[f[0]||(f[0]=e("th",null,"#",-1)),(t(!0),s(O,null,L(w.header.columns,M=>(t(),s("th",null,u(M.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(O,null,L(w.items,(M,G)=>Oe(n.$slots,"table-row",{key:`row1-${M[w.header.key]}`,item:M,index:G},()=>[e("td",null,u(w.getRowNumber(G)),1),(t(!0),s(O,null,L(w.header.columns,F=>(t(),s("td",null,[F.href?(t(),s("a",{key:0,href:F.href(M[w.header.key]),class:"font-weight-bold"},u(M[F.field]),9,Eh)):(t(),s("span",qh,u(M[F.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:le(["d-block d-md-none",w.rowCss])},[(t(!0),s(O,null,L(w.items,(M,G)=>(t(),s("div",{key:`row2-${M[w.header.key]}`,onClick:F=>P.onSelectedRow(M),class:"border"},[e("div",{class:le(["p-2",{"b-left":w.isSelected(M)}])},[Oe(n.$slots,"table-list",{item:M,index:G},()=>[(t(!0),s(O,null,L(w.header.columns,F=>(t(),s("div",Nh,[e("label",Rh,u(F.title),1),e("div",Fh,[F.href?(t(),s("a",{key:0,href:F.href(M[w.header.key]),class:"font-weight-bold"},u(M[F.field]),9,zh)):(t(),s("span",Gh,u(M[F.field]),1))])]))),256))],!0)],2)],8,Bh))),128))],2)])}const Yh=Me(Dh,[["render",jh],["__scopeId","data-v-65929213"]]),Ie=gt(yt);Ie.use(bt());Ie.use(rt);Ie.component("m-notification",Ww);Ie.component("m-pagination",Ph);Ie.component("sort-field",Uh);Ie.component("table-list",Yh);Ie.component("Toasts",da);Ie.component("PageHeader",sh);Ie.component("PageMessages",nh);Ie.component("PageBody",ih);const Wh="https://sonyfastpoc.azurewebsites.net/",Kh="Arcadian-Sony FAST",Jh=void 0,Qh={API_URL:Wh,appName:Kh,tenantId:Jh};Ie.provide("$config",Qh);Ie.provide("$bus",Ge);Ie.mount("#app");
