import{o as t,c as ue,r as X,h as dt,d as Je,a as ie,e as qe,b as s,f as e,g as D,w as O,i as L,t as v,F as B,j,k as x,l as de,m as ze,n as $e,p as Qe,q as Ne,u as ut,s as Xe,P as Ze,v as fe,x as Z,y as te,z as we,T as ce,A as o,B as ct,C as P,D as F,E as mt,G as le,H as et,I as ke,J as Ae,K as _e,L as Ce,M as ve,N as he,O as Pe,Q as Ue,R as We,S as ft,U as pt,V as vt,W as Oe,X as gt,Y as bt}from"./vendor-CSWx9gYS-chunk.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))k(g);new MutationObserver(g=>{for(const R of g)if(R.type==="childList")for(const S of R.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&k(S)}).observe(document,{childList:!0,subtree:!0});function $(g){const R={};return g.integrity&&(R.integrity=g.integrity),g.referrerPolicy&&(R.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?R.credentials="include":g.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function k(g){if(g.ep)return;g.ep=!0;const R=$(g);fetch(g.href,R)}})();const yt={__name:"App",setup(r){return(u,$)=>{const k=X("router-view");return t(),ue(k)}}};function tt(){const r=N=>{var z;let h=N,E=h.response,Q="";if(!h.response)return N.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const q=`${window.location.pathname}${window.location.search}`;Q=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(q)}`}'>here</a> to login.`}else if(E.status===400){let q=h.response.data.errors;Q=h.response.data.title||h.response.data,q&&(Q+="<ul>");for(let b in q){let M=q[b];for(let w in q[b]){let W=M[w];Q+=`<li>${W}</li>`}}q&&(Q+="</ul>"),Q||(Q=h.message),Q&&Q.content&&(Q=Q.content)}else E.status===404?Q=((z=E==null?void 0:E.data)==null?void 0:z.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(Q=h.message,Q===""&&(Q=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return Q},u=N=>JSON.parse(JSON.stringify(N)),$=N=>{if(typeof N!="number")return N;var h=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return h.format(N)},k=(N,h,E)=>{const z={value:h,expiry:new Date().getTime()+E};debugger;localStorage.setItem(N,JSON.stringify(z))},g=N=>{debugger;const h=localStorage.getItem(N);if(!h)return null;const E=JSON.parse(h);return new Date().getTime()>E.expiry?(localStorage.removeItem(N),null):E.value},R="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:r,clone:u,toCurrency:$,moment:dt,localStorageSetWithExpiry:k,localStorageGetWithExpiry:g,setPageTab:(N,h)=>{var E=localStorage.getItem(R);E?E=JSON.parse(E):E={},E[N]=h,localStorage.setItem(R,JSON.stringify(E))},getPageTab:N=>{var h=localStorage.getItem(R);return h?h=JSON.parse(h):h={},h[N]}}}const $t=tt(),st=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(st.exp*1e3),ht=wt.isAfter()?st:null,ye=Je({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(r){try{this.user=r,localStorage.setItem("user",JSON.stringify(r))}catch(u){debugger;alert(u)}},logout(){this.user=null,localStorage.removeItem("user"),nt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),kt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(kt));const _t={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Re=_t,ot=Je("msal",()=>{const r=ie({auth:{clientId:Re.VITE_AUTH_CLIENT_ID,authority:Re.VITE_AUTH_AUTHORITY_URL,redirectUri:Re.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),u=ie("");return{msalConfig:r,accessToken:u,setAccessToken:k=>{u.value=k}}}),Fe={$on:(...r)=>qe.on(...r),$once:(...r)=>qe.once(...r),$off:(...r)=>qe.off(...r),$emit:(...r)=>qe.emit(...r)};function St(){const r=(R,S,Y,N)=>{Fe.$emit("toast-message",{title:R,message:S,type:Y,options:N})};return{success:(R,S,Y={})=>{r(R,S,"success",Y)},warning:(R,S,Y={})=>{r(R,S,"warning",Y)},info:(R,S,Y={})=>{r(R,S,"info",Y)},error:(R,S,Y={})=>{r(R,S,"danger",Y)}}}const Te=(r,u)=>{const $=r.__vccOpts||r;for(const[k,g]of u)$[k]=g;return $},Tt={data(){return{notifications:[],messages:[]}},async created(){const r=this;r.$bus.$on("event:notification-received",()=>{r.getUnreadNotifications()}),r.$bus.$on("event:notification-marked-as-read",u=>{r.notifications.some(k=>k.notificationId===u)&&r.getUnreadNotifications()}),r.$bus.$on("event:notification-removed",u=>{r.notifications.some(k=>k.notificationId===u)&&r.getUnreadNotifications()}),r.$bus.$on("event:chat-marked-as-read",r.onChatMarkedAsRead),r.$bus.$on("event:chat-message-received",r.onChatMessageReceived)},async mounted(){const r=this,u=r.$refs.notifications,$=r.$refs.messages;u&&u.offsetParent,$&&$.offsetParent&&await r.getUnreadChats()},methods:{async logout(){const r=this;try{await r.$util.axios.post("/api/accounts/logout").then(u=>{const $="/";r.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){r.$util.href($)}})})}catch(u){r.$util.handleError(u)}},async onChatMarkedAsRead(r){let u=this,$=u.messages.find(k=>k.chatId===r);if($){let k=u.messages.indexOf($);u.messages.splice(k,1)}},async onChatMessageReceived(r){let u=this,$=u.messages.find(g=>g.chatId===r.chatId);if($)$.lastMessageText=r.content;else{var k={chatId:r.chatId,isRead:!1,lastDateSent:r.dateSent,lastMessageText:r.content,senderFirstLastName:`${r.sender.firstName} ${r.sender.lastName}`,senderInitials:r.sender.initials,senderProfilePicture32:r.sender.profilePicture32,urlPicture:u.$util.getProfilePictureUrl(r.sender.profilePicture32,r.sender.initials)};u.messages.push(k)}},async getUnreadNotifications(){const r=this;try{await r.$util.axios.get("api/accounts/unread-notifications").then(u=>{r.notifications=u.data})}catch(u){r.$util.handleError(u)}},async getUnreadChats(){const r=this;try{await r.$util.axios.get("api/accounts/unread-chats").then(u=>{r.messages=u.data;for(let $ in r.messages){let k=r.messages[$];r.$set(k,"urlPicture",r.$util.getProfilePictureUrl(k.senderProfilePicture32,k.senderInitials))}})}catch(u){r.$util.handleError(u)}},viewNotification(r){this.$bus.$emit("event:open-notification",r)},viewChat(r){this.$bus.$emit("event:open-chat",r)},showHiddenElements(){let u=this.$el.getElementsByClassName("initialHidden");for(let $=0;$<u.length;$++)u[$].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const u=ye().user;return{user:u,username:u?u.nameFull:"Guest"}},async mounted(){},methods:{isActive(r){return window.location.href.indexOf(r)>-1},async openModalSearchUser747(r){this.$refs.refModalSearchUser747.open(r)}}},It={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},xt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Pt={class:"navbar-nav"},Vt={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ot={class:"nav-item dropdown"},At={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"navbar-nav ms-auto"},Ht={class:"nav-item dropdown"},Et={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Lt={class:"d-inline d-sm-none d-md-inline"},Bt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},qt={class:"text-capitalize"};function Nt(r,u,$,k,g,R){const S=X("router-link");return t(),s("nav",It,[e("div",Ct,[D(S,{class:"navbar-brand",to:"/member"},{default:O(()=>[L(v($.appName),1)]),_:1}),u[14]||(u[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",xt,[e("ul",Pt,[e("li",Vt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ut,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/announcements"},{default:O(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),L(" Announcements ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/posts"},{default:O(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),L(" Posts ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/yellow-pages"},{default:O(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),L(" Yellow Pages ")])),_:1})])])]),e("li",Ot,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",At,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:O(()=>u[4]||(u[4]=[L(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Dt,[e("li",Ht,[e("a",Et,[e("span",null,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Lt,v(g.username),1)])]),e("ul",Bt,[u[9]||(u[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),u[10]||(u[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),u[11]||(u[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),u[12]||(u[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),g.user&&g.user.roles.length>1?(t(!0),s(B,{key:0},j(g.user.roles,Y=>(t(),s("li",null,[D(S,{to:`/${Y.toLowerCase()}`,class:"dropdown-item"},{default:O(()=>[e("span",qt,v(Y),1)]),_:2},1032,["to"])]))),256)):x("",!0),e("li",null,[D(S,{to:"/",class:"dropdown-item"},{default:O(()=>u[7]||(u[7]=[L(" Main ")])),_:1})]),u[13]||(u[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[D(S,{to:"/account/logout",class:"dropdown-item"},{default:O(()=>u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),L("Logout ")])),_:1})])])])])])])])}const Rt=Te(Mt,[["render",Nt]]),zt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const r=document.getElementById("top");r&&r.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let r=this;if(!r.$el.getElementsByClassName)return;let u=r.$el.getElementsByClassName("initialHidden");for(let $=0;$<u.length;$++){let k=u[$];k.classList.remove("invisible"),k.classList.remove("d-none")}},close(){const r=this,u=document.referrer.toLowerCase();u&&u.includes("/account/login")?r.$router.go(-2):r.$router.go(-1)},toggle(r){const u=this;u.toggles[r]=!u.toggles[r],localStorage.setItem(u.togglesKey,JSON.stringify(u.toggles))}}},Ft={mixins:[zt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(r){return window.location.href.indexOf(r)>-1}}},jt={class:"footer sticky-bottom"},Gt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(r,u,$,k,g,R){const S=X("router-link");return t(),s("footer",jt,[e("div",Gt,[e("div",Yt,[e("span",Wt,"©"+v(g.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/announcements"},{default:O(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),L(" Announcements ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/posts"},{default:O(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),L(" Posts ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/yellow-pages"},{default:O(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),L(" Yellow Pages ")])),_:1})])])]),e("li",es,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:O(()=>u[4]||(u[4]=[L(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Te(Ft,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const u=this.$config;document.title=`Account - ${u.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(r,u,$,k,g,R){const S=X("Toasts"),Y=X("router-view");return t(),s("div",ls,[D(S),D(Y,{class:"flex-grow-1 mb-2"})])}const rs=Te(as,[["render",ns]]),is={__name:"index",setup(r){return ye().user,de(()=>{}),($,k)=>(t(),s("div",null,k[0]||(k[0]=[ze('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){$e("$config");const r=us.VITE_API_URL,u=Qe.create({baseURL:r});return Ne.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),u.interceptors.request.use($=>{Ne.start();const{user:k}=ye();return k&&k.token&&($.headers?($.headers.Authorization||($.headers.Authorization=`Bearer ${k.token}`),$.headers["Access-Control-Allow-Origin"]||($.headers["Access-Control-Allow-Origin"]="*")):$.headers={Authorization:`Bearer ${k.token}`,"Access-Control-Allow-Origin":"*"}),$}),u.interceptors.response.use($=>(Ne.done(),$),$=>{throw Ne.done(),$}),u}function pe(r){if(!r.appTitle)throw Error("App Title is required.");if(!r.pageTitle)throw Error("Page Title is required.");const u=ut(),$=Xe(),k=cs(),g=tt(),R=St(),Y=ye().user,N=()=>Y&&Y.roles&&Y.roles.includes("System"),h=()=>Y&&Y.roles&&Y.roles.includes("administrator"),E=()=>Y&&Y.roles&&Y.roles.includes("employee"),Q=()=>Y&&Y.roles&&Y.roles.includes("Member"),z=()=>{let l=u.path;return u.query.returnUrl&&(l=u.query.returnUrl),l=`?returnUrl=${encodeURIComponent(l)}`,l},q=async()=>{const l=document.referrer.toLowerCase();l&&l.includes("/accounts/login")?await $.go(-2):await $.go(-1)},b=l=>{var U;const A=u.path,a=(U=u.query)==null?void 0:U.returnUrl;a&&!(A.startsWith(a)||a.startsWith(A))?$.push(a):$.push(l)},M=r.appTitle,w=r.pageTitle,W=ie(!1),K=ie(new Map),i=ie(""),m=ie(""),V=ie("");return{appTitle:M,pageTitle:w,busy:W,validations:K,infoMessage:i,warningMessage:m,errorMessage:V,router:$,route:u,axios:k,utils:g,toasts:R,close:q,closeWithReturnUrl:b,generateReturnUrl:z,security:{userId:Y?Y.userId:"",isSystem:N(),isAdministrator:h(),isEmployee:E(),isMember:Q()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(r){$e("$config");const u=ye(),$=ot(),k=new Ze($.msalConfig),g=fe({username:"",password:""}),R={username:{required:Z.withMessage("Username is required.",te),$autoDirty:!0,$lazy:!0},password:{required:Z.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0}},S=we(R,g),{appTitle:Y,pageTitle:N,busy:h,isDirty:E,validations:Q,infoMessage:z,warningMessage:q,errorMessage:b,router:M,route:w,axios:W,utils:K,toasts:i,close:m,security:V}=pe({appTitle:"Sony FAST POC",pageTitle:"Sign On"});de(async()=>{await k.initialize()});const l=async()=>{await k.loginPopup({}).then(()=>{debugger;const U=k.getAllAccounts()[0];k.setActiveAccount(U)}).catch(a=>{console.error(`error during authentication: ${a}`)});var A={account:k.getActiveAccount(),scopes:[]};await k.acquireTokenSilent(A).then(a=>{debugger;const f=a.account.idToken,d=ct(f);if(d.token=a.accessToken,console.log(a),!d.roles){debugger;d.roles=[]}d.userId=d.sub,u.login(d);var p=w.query.returnUrl;p?M.push(decodeURIComponent(p)):d.roles.length===1?M.push(`/${d.roles[0].toLowerCase()}`):M.push("/")}).catch(a=>{console.error(`error during acquireTokenSilent: ${a}`)})};return(A,a)=>(t(),ue(ce,null,{default:O(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,v(o(Y)),1),e("div",null,[o(b)?(t(),s("div",vs,[a[1]||(a[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(b)},null,8,gs)])):x("",!0),o(S).$error?(t(),s("div",bs,[a[2]||(a[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(S).$errors,U=>(t(),s("li",{key:U.$uid},v(U.$message),1))),128))])])):x("",!0)]),e("button",{onClick:a[0]||(a[0]=U=>l()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Te(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(r){const u=ye();return u.user,de(async()=>{u.logoutWithRedirect()}),($,k)=>(t(),s("div",ws,k[0]||(k[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[L(" You have logged out from HOA MS."),e("br"),L(" Click "),e("a",{href:"/",class:"d-inline"},"here"),L(" to go back to home page. ")])],-1)])))}},ks={class:"h-100 d-flex align-items-center justify-content-center"},_s={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],xs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ps={class:"row row-cols-1 row-cols-sm-3"},Vs={class:"col-sm"},Us={class:"form-group"},Os={key:0,class:"d-block invalid-feedback"},As={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Es={class:"col-sm"},Ls={class:"form-group"},Bs={key:0,class:"d-block invalid-feedback"},qs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Fs={class:"col"},js={class:"form-group"},Gs={key:0,class:"d-block invalid-feedback"},Ys={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(r){const u=fe({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),$=(V,l)=>V===l.password,k={firstName:{required:Z.withMessage("First name is required.",te),$autoDirty:!0,$lazy:!0},middleName:{required:Z.withMessage("Middle name is required.",te),$autoDirty:!0,$lazy:!0},lastName:{required:Z.withMessage("Last name is required.",te),$autoDirty:!0,$lazy:!0},phoneNumber:{required:Z.withMessage("Phone number is required.",te),$autoDirty:!0,$lazy:!0},email:{required:Z.withMessage("Email is required.",te),$autoDirty:!0,$lazy:!0},password:{required:Z.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0},confirmPassword:{required:Z.withMessage("Confirm password is required.",te),confirmSamePassword:Z.withMessage("Password and confirm passwrod are different.",$),$autoDirty:!0,$lazy:!0}},g=we(k,u),{appTitle:R,pageTitle:S,busy:Y,isDirty:N,validations:h,infoMessage:E,warningMessage:Q,errorMessage:z,router:q,axios:b,utils:M,toasts:w,close:W,security:K}=pe({appTitle:"HOA MS",pageTitle:"Register User"}),i=$e("$config");de(()=>{});const m=async()=>{const V=u;if(Y.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}z.value=null;try{Y.value=!0;const A=M.clone(V);A.tenantid=i.tenantId;debugger;await b({method:"post",url:"/api/v1/accounts/register",data:A}).then(a=>{w.success("Register","Registration was successfull.",{onClose:async()=>{await q.push("/accounts/login")}})})}catch(A){z.value=M.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{Y.value=!1}};return(V,l)=>{const A=X("router-link");return t(),ue(ce,null,{default:O(()=>[e("div",ks,[e("div",_s,[e("h4",Ss,v(o(S)),1),e("div",Ts,[e("div",Ms,[o(z)?(t(),s("div",Is,[l[8]||(l[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Cs)])):x("",!0),o(g).$error?(t(),s("div",xs,[l[9]||(l[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(g).$errors,a=>(t(),s("li",{key:a.$uid},v(a.$message),1))),128))])])):x("",!0)]),e("div",Ps,[e("div",Vs,[e("div",Us,[l[10]||(l[10]=e("label",null,"First Name",-1)),P(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>u.firstName=a),type:"text",class:"form-control"},null,512),[[F,u.firstName]]),o(g).firstName.$error?(t(),s("div",Os,[(t(!0),s(B,null,j(o(g).firstName.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])]),e("div",As,[e("div",Ds,[l[11]||(l[11]=e("label",null,"Middle Name",-1)),P(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>u.middleName=a),type:"text",class:"form-control"},null,512),[[F,u.middleName]]),o(g).middleName.$error?(t(),s("div",Hs,[(t(!0),s(B,null,j(o(g).middleName.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])]),e("div",Es,[e("div",Ls,[l[12]||(l[12]=e("label",null,"Last Name",-1)),P(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>u.lastName=a),type:"text",class:"form-control"},null,512),[[F,u.lastName]]),o(g).lastName.$error?(t(),s("div",Bs,[(t(!0),s(B,null,j(o(g).lastName.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])])]),e("div",qs,[e("div",Ns,[e("div",Rs,[l[13]||(l[13]=e("label",null,"Phone Number",-1)),P(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>u.phoneNumber=a),type:"tel",class:"form-control"},null,512),[[F,u.phoneNumber]]),o(g).phoneNumber.$error?(t(),s("div",zs,[(t(!0),s(B,null,j(o(g).phoneNumber.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])]),e("div",Fs,[e("div",js,[l[14]||(l[14]=e("label",null,"Email",-1)),P(e("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>u.email=a),type:"email",class:"form-control"},null,512),[[F,u.email]]),o(g).email.$error?(t(),s("div",Gs,[(t(!0),s(B,null,j(o(g).email.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])])]),e("div",Ys,[e("div",Ws,[e("div",Ks,[l[15]||(l[15]=e("label",null,"Password",-1)),P(e("input",{"onUpdate:modelValue":l[5]||(l[5]=a=>u.password=a),type:"password",class:"form-control"},null,512),[[F,u.password]]),o(g).password.$error?(t(),s("div",Js,[(t(!0),s(B,null,j(o(g).password.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])]),e("div",Qs,[e("div",Xs,[l[16]||(l[16]=e("label",null,"Confirm Password",-1)),P(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>u.confirmPassword=a),type:"password",class:"form-control"},null,512),[[F,u.confirmPassword]]),o(g).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(B,null,j(o(g).confirmPassword.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):x("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:l[7]||(l[7]=a=>m()),class:"btn btn-primary w-100"},l[17]||(l[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),L("Register ")]),8,so)]),e("div",oo,[D(A,{to:"/",class:"btn btn-outline-primary w-100"},{default:O(()=>l[18]||(l[18]=[L("Home")])),_:1})]),e("div",ao,[D(A,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:O(()=>l[19]||(l[19]=[L("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function at(){const r=Xe(),u=N=>window.location.href.indexOf(N)>-1,$=N=>localStorage.getItem("data-bs-theme")||N,k=N=>{document.documentElement.setAttribute("data-bs-theme",N),localStorage.setItem("data-bs-theme",N)},g=async()=>await Qe.get("https://bootswatch.com/api/5.json").then(N=>N.data),R=N=>{const h=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");h&&N?(h.setAttribute("href",N),localStorage.setItem("bootswatch-theme",N)):alert("cannot query css link")},S=N=>{Y(),r.push(N)},Y=()=>{if(screen.width<576){const h=document.getElementById("navbarCollapse");if(h){const E=mt.getInstance(h);E&&E.hide()}}};return{isActive:u,getCurrentBsTheme:$,changeBsTheme:k,getBootswatch:g,changeTheme:R,navigate:S,collapseNavbar:Y}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],ko={class:"nav-item dropdown"},_o={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},xo={key:1},Po={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(r){const u=ot(),{isActive:$,getCurrentBsTheme:k,changeBsTheme:g,getBootswatch:R,changeTheme:S,navigate:Y,collapseNavbar:N}=at(),h=ye(),E=h.user,Q=fe({user:E,username:E?E.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});de(async()=>{const M=Q;M.bootswatch=await R();const w=k(M.bsTheme);w&&(M.bsTheme=w,g(M.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(M.currentTheme=W,S(W))});const z=M=>{S(M),Q.currentTheme=M,N()},q=M=>{g(M),Q.bsTheme=M,N()},b=async()=>{h.logoutWithRedirect();const M=new Ze(u.msalConfig);await M.initialize();const w={mainWindowRedirectUri:"/"};await M.logoutPopup(w)};return(M,w)=>{const W=X("router-link");return t(),ue(ce,null,{default:O(()=>[e("nav",ro,[e("div",io,[D(W,{class:"navbar-brand",to:"/administrator"},{default:O(()=>[L(v(r.appName),1)]),_:1}),w[18]||(w[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[D(W,{to:"/videos",onClick:o(N),class:"nav-link"},{default:O(()=>w[3]||(w[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[w[6]||(w[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[D(W,{to:"/source-groups",onClick:o(N),class:"dropdown-item"},{default:O(()=>w[4]||(w[4]=[L(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/source-locations",onClick:o(N),class:"dropdown-item"},{default:O(()=>w[5]||(w[5]=[L(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[D(W,{to:"/vod-sources",onClick:o(N),class:"nav-link"},{default:O(()=>w[7]||(w[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[w[10]||(w[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[D(W,{to:"/program-templates",onClick:o(N),class:"dropdown-item"},{default:O(()=>w[8]||(w[8]=[L(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/channels",onClick:o(N),class:"dropdown-item"},{default:O(()=>w[9]||(w[9]=[L(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[w[14]||(w[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[Q.bsTheme==="dark"?(t(),s("button",{key:0,onClick:w[0]||(w[0]=K=>q("light")),class:"dropdown-item"},w[11]||(w[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),L("Dark Mode ")]))):(t(),s("button",{key:1,onClick:w[1]||(w[1]=K=>q("dark")),class:"dropdown-item"},w[12]||(w[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),L("Light Mode ")])))]),w[13]||(w[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(B,null,j(Q.bootswatch.themes,K=>(t(),s("li",null,[e("button",{onClick:i=>z(K.cssCdn),class:le(["dropdown-item",{active:Q.currentTheme===K.cssCdn}])},v(K.name),11,ho)]))),256))])]),e("li",ko,[e("a",_o,[e("span",null,[w[15]||(w[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(E)?(t(),s("span",To,v(o(E).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Io,[o(E)?(t(),s("li",Co,[e("button",{onClick:w[2]||(w[2]=K=>b()),class:"dropdown-item"},w[16]||(w[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),L("Logout ")]))])):(t(),s("li",xo,[D(W,{to:"/accounts/login",class:"dropdown-item"},{default:O(()=>w[17]||(w[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),L("Login ")])),_:1})]))])])])])])])]),_:1})}}},Vo={class:"footer sticky-bottom"},Uo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Oo={class:"container-md"},Ao={class:"navbar-text small p-0"},Do={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(r){at();const u=$e("$config"),k=ye().user;let R=new Date().getFullYear();const S=fe({user:k,username:k?k.nameFull:"Guest",copyright:`2020-${R} ${u.appName}`});return de(async()=>{}),(Y,N)=>(t(),s("footer",Vo,[e("div",Uo,[e("div",Oo,[e("span",Ao,"©"+v(S.copyright),1)])])]))}},Ho={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Fe.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(r){r.message&&this.addMessage(r.title,r.message,r.type,r.options)},async addMessage(r,u,$,k={}){var g={id:this.count++,title:r,message:u,type:$,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};g=Object.assign({},g,k),this.messages.unshift(g),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),g.timeOut>0&&await this.startTimeout(g)},async startTimeout(r,u=0){const $=this,k=performance.now(),g=async()=>{r.animationFrame=requestAnimationFrame(async R=>{const S=R+u-k;if(!$.exists(r)||r.paused){cancelAnimationFrame(r.animationFrame);return}else if(S<r.timeOut){const Y=S/r.timeOut;r.progress=Y,await g()}else{r.progress=1,cancelAnimationFrame(r.animationFrame),$.remove(r);return}})};await g()},pauseProgress(r){r.timeOut<=0||(r.paused=!0)},async resumeProgress(r){r.timeOut<=0||(r.paused=!1,await this.startTimeout(r,r.timeOut*r.progress))},getCurrentProgress(r){return Math.round(r.progress*100)===100?100:r.progress*100},getIconClass(r){const u=r.type;let $="";switch(u){case"success":$="fas fa-fw fa-circle-check";break;case"info":$="fas fa-fw fa-circle-info";break;case"warning":$="fas fa-fw fa-circle-exclamation";break;case"danger":$="fas fa-fw fa-triangle-exclamation";break}let k=$;return r.rtl?"icon-right "+k:"icon-left "+k},async remove(r){const u=this.messages.findIndex($=>$.id===r.id);this.messages.splice(u,1),typeof r.onClose=="function"&&await r.onClose()},exists(r){return this.messages.findIndex($=>$.id===r.id)!==-1}}},Eo={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Lo=["onMouseover","onMouseout"],Bo={class:"me-auto text-white"},qo=["onClick"],No={class:"toast-body"},Ro=["innerHTML"],zo={key:0,class:"progress m-1",style:{height:"4px"}};function Fo(r,u,$,k,g,R){return t(),ue(ce,null,{default:O(()=>[e("div",Eo,[D(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:O(()=>[(t(!0),s(B,null,j(g.messages,S=>(t(),s("div",{key:S.id,class:le(["toast show mb-2 ms-auto",`border-${S.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Y=>R.pauseProgress(S),onMouseout:Y=>R.resumeProgress(S)},[e("div",{class:le(["toast-header",`bg-${S.type}`])},[e("strong",Bo,[e("i",{class:le([R.getIconClass(S),"me-1"])},null,2),L(v(S.title),1)]),S.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Y=>R.remove(S)},u[0]||(u[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,qo)):x("",!0)],2),e("div",No,[e("div",{innerHTML:S.message},null,8,Ro)]),S.timeOut>0&&S.showProgress?(t(),s("div",zo,[e("div",{class:le(`bg-${S.type}`),style:et({width:R.getCurrentProgress(S)+"%"})},null,6)])):x("",!0)],42,Lo))),128))]),_:1})])]),_:1})}const jo=Te(Ho,[["render",Fo],["__scopeId","data-v-5272bd9a"]]),Go={name:"AdminLayout",components:{TopNav:Po,BottomNav:Do},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Yo={class:"d-flex flex-column vh-100"};function Wo(r,u,$,k,g,R){const S=X("Toasts"),Y=X("TopNav"),N=X("router-view"),h=X("BottomNav");return t(),s("div",Yo,[D(S),D(Y),D(N,{class:"flex-grow-1 mb-2"}),u[0]||(u[0]=e("div",{class:"pt-2"},null,-1)),D(h)])}const Ko=Te(Go,[["render",Wo]]),Jo={class:"d-flex flex-row justify-content-end"},Qo={class:"mt-2 container-md"},Xo={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Zo=["innerHTML"],ea={class:"text-center"},ta={class:"row mt-3"},sa={class:"col-12 col-sm-6 offset-sm-3"},oa={class:"card"},aa={class:"card-body"},la={class:"card card-body mb-2 d-none"},na={key:0,class:"fas fa-fw fa-circle-check text-success"},ra={key:1,class:"fas fa-fw fa-times-circle text-danger"},ia={key:0,class:"fas fa-fw fa-circle-check text-success"},da={key:1,class:"fas fa-fw fa-times-circle text-danger"},ua={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},ca={class:"col"},ma={class:"card h-100 shadow-sm"},fa={class:"card-body"},pa={class:"col"},va={class:"card h-100 shadow-sm"},ga={class:"card-body"},ba={__name:"Index",setup(r){const{appTitle:u,pageTitle:$,busy:k,isDirty:g,validations:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,generateReturnUrl:b,security:M}=pe({appTitle:"ARC AIO",pageTitle:"Dashboard"});$e("$config"),ye().user;const W=fe({item:null});ie("805630ed-f288-4f2f-83a4-6c71312f6970"),ie(),de(async()=>{});const K=async()=>{const V=W;if(!k.value)try{k.value=!0;const l="/api/v1/dashboard/administrators/";V.item=[],await E.get(l).then(A=>{V.item=A.data})}catch(l){N.value=Q.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{k.value=!1}},i=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await E.get("/api/v1/channels/reset/").then(A=>{z.success("Reset All Data","Reset data was successful.")})}catch(l){N.value=Q.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{k.value=!1}},m=async()=>{await K()};return(V,l)=>{const A=X("PageHeader"),a=X("router-link");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(A,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",Jo,[e("button",{onClick:l[0]||(l[0]=U=>m()),class:"ms-2 btn btn-secondary"},l[2]||(l[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Qo,[o(N)?(t(),s("div",Xo,[l[3]||(l[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(N))},null,8,Zo)])):x("",!0),e("div",ea,[e("button",{onClick:l[1]||(l[1]=U=>i()),class:"btn btn-warning btn-lg"},l[4]||(l[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),L("Reset All Data ")]))]),e("div",ta,[e("div",sa,[e("div",oa,[l[14]||(l[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",aa,[e("ol",null,[l[8]||(l[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[D(a,{to:`/videos/add/${o(b)()}`},{default:O(()=>l[5]||(l[5]=[L(" Create a Video. ")])),_:1},8,["to"])]),l[9]||(l[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[D(a,{to:"/program-templates/add"},{default:O(()=>l[6]||(l[6]=[L(" Create Program Template. ")])),_:1}),l[7]||(l[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),l[10]||(l[10]=e("li",null,[L(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),l[11]||(l[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),l[12]||(l[12]=e("li",null," Publish Channel. ",-1)),l[13]||(l[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",la,[l[17]||(l[17]=L(" Security ")),e("ul",null,[e("li",null,[o(M).isAdministrator?(t(),s("span",na)):(t(),s("span",ra)),l[15]||(l[15]=L(" Administrator "))]),e("li",null,[o(M).isEmployee?(t(),s("span",ia)):(t(),s("span",da)),l[16]||(l[16]=L(" Employee "))])])]),e("div",ua,[e("div",ca,[e("div",ma,[l[19]||(l[19]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),L("Human Resources ")])],-1)),e("div",fa,[e("ul",null,[e("li",null,[D(a,{to:"/movies"},{default:O(()=>l[18]||(l[18]=[L(" Employees ")])),_:1})])])])])]),e("div",pa,[e("div",va,[l[25]||(l[25]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),L("TBD ")])],-1)),e("div",ga,[e("ul",null,[e("li",null,[D(a,{to:"/media-videos"},{default:O(()=>l[20]||(l[20]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:O(()=>l[21]||(l[21]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:O(()=>l[22]||(l[22]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:O(()=>l[23]||(l[23]=[L(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:O(()=>l[24]||(l[24]=[L(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},ya={class:"d-flex justify-content-end"},$a=["disabled"],wa={class:"input-group"},ha={class:"row row-cols-1 row-cols-sm-2 mt-3"},ka={class:"col text-center mb-2"},_a=["src"],Sa={class:"col"},Ta={class:"form-floating mb-2"},Ma={key:0,class:"d-block invalid-feedback"},Ia={class:"form-floating mb-2"},Ca={class:"row row-cols-sm-2"},xa={class:"col"},Pa={class:"form-floating mb-2"},Va={class:"col"},Ua={class:"form-floating mb-2"},Oa={class:"row row-cols-sm-2"},Aa={class:"col"},Da={class:"form-floating mb-2"},Ha={class:"col"},Ea={class:"form-floating mb-2"},La={class:"col"},Ba={class:"form-floating mb-2"},qa={class:"col"},Na={class:"form-floating mb-2"},Ke="YYYY-MM-DD HH:mm",Ra={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"ARC AIO",pageTitle:"Add User"}),q=r,b=h.moment().local();b.format(Ke),b.add(24,"hours").format(Ke);const M=ie("a22de760-358d-4a0e-83ad-2624a5c11f73"),w=fe({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),W={item:{userId:{required:Z.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},K=we(W,w);de(async()=>{});const i=async()=>{const V=w;if(!k.value)try{k.value=!0,V.item=null;const l=`/api/v1/users/get-from-entra-id/${M.value}`;await N.get(l).then(A=>{V.item=A.data})}catch(l){S.value=h.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{k.value=!1}},m=async()=>{const V=w;if(k.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="",await N.post(`/api/v1/users/add-from-entra-id/${V.item.userId}`).then(A=>{E.success("Add User","User added",{onClose:async()=>{const a=`${q.urlView}/${A.data}`;await Y.push(a)}})})}catch(A){S.value=h.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{k.value=!1}};return(V,l)=>{const A=X("router-link"),a=X("PageHeader"),U=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",ya,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:l[0]||(l[0]=f=>m()),class:"btn btn-primary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$a),D(A,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(U,{errorMessage:o(S),vuelidate:o(K)},{default:O(()=>[e("div",null,[e("div",null,[e("div",wa,[P(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>M.value=f),onKeyup:l[2]||(l[2]=Ae(f=>i(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[F,M.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[3]||(l[3]=f=>i())},l[14]||(l[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",ha,[e("div",ka,[e("img",{src:w.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,_a)]),e("div",Sa,[e("div",Ta,[P(e("input",{"onUpdate:modelValue":l[4]||(l[4]=f=>w.item.userId=f),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[F,w.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1)),o(K).item.userId.$error?(t(),s("div",Ma,[(t(!0),s(B,null,j(o(K).item.userId.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):x("",!0)]),e("div",Ia,[P(e("input",{"onUpdate:modelValue":l[5]||(l[5]=f=>w.item.displayName=f),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[F,w.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Ca,[e("div",xa,[e("div",Pa,[P(e("input",{"onUpdate:modelValue":l[6]||(l[6]=f=>w.item.givenName=f),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[F,w.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Va,[e("div",Ua,[P(e("input",{"onUpdate:modelValue":l[7]||(l[7]=f=>w.item.surname=f),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[F,w.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Oa,[e("div",Aa,[e("div",Da,[P(e("input",{"onUpdate:modelValue":l[8]||(l[8]=f=>w.item.email=f),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[F,w.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Ha,[e("div",Ea,[P(e("input",{"onUpdate:modelValue":l[9]||(l[9]=f=>w.item.mobilePhone=f),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[F,w.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",La,[e("div",Ba,[P(e("input",{"onUpdate:modelValue":l[10]||(l[10]=f=>w.item.principalName=f),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[F,w.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",qa,[e("div",Na,[P(e("input",{"onUpdate:modelValue":l[11]||(l[11]=f=>w.item.jobTitle=f),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[F,w.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function De(r){if(!r.cacheKey)throw Error("Cache Key required.");if(!r.baseUrl)throw Error("Base Url required.");const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,closeWithReturnUrl:z,generateReturnUrl:q,security:b}=pe({appTitle:r.appTitle,pageTitle:r.pageTitle}),M=JSON.parse(JSON.stringify(r.filter));M.pageIndex=M.pageIndex||1,M.pageSize=M.pageSize||15,M.sortField=M.sortField||"",M.sortOrder=M.sortOrder||1,M.updateUrl=M.updateUrl||!1,M.items=M.items||[],M.query=M.query||{},M.query.criteria=M.query.criteria||"";const w=ie(M),W=()=>{var d;if(k.value){console.log("Paginated search is currently busy.");return}const a=JSON.parse(localStorage.getItem(r.cacheKey))||{},U=new URLSearchParams(window.location.search),f=w.value;f.query.criteria=U.get("c")||a.criteria||f.query.criteria||"",f.pageIndex=parseInt(U.get("p"),10)||a.pageIndex||f.pageIndex||1,f.pageSize=parseInt(U.get("s"),10)||a.pageSize||f.pageSize||5,f.sortField=U.get("sf")||a.sortField||f.sortField||"",f.sortOrder=parseInt(U.get("so"),10)||a.sortOrder||f.sortOrder||1,f.visible=a.visible||f.visible,(d=r.initializeFilter)==null||d.call(r,w,r.cacheKey)},K=()=>{if(r.getQuery)return r.getQuery(w.value);{const a=w.value;return["?c=",encodeURIComponent(a.query.criteria),"&p=",a.pageIndex,"&s=",a.pageSize,"&sf=",a.sortField,"&so=",a.sortOrder].join("")}},i=()=>{if(r.saveQuery)r.saveQuery(w.value,r.cacheKey);else{const a=w.value;localStorage.setItem(r.cacheKey,JSON.stringify({criteria:a.query.criteria,pageIndex:a.pageIndex,pageSize:a.pageSize,sortField:a.sortField,sortOrder:a.sortOrder,visible:a.visible}))}};return{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,closeWithReturnUrl:z,generateReturnUrl:q,security:b,filter:w,initializeFilter:W,getQuery:K,saveQuery:i,search:async a=>{var f;let U=w.value;if(k.value){console.log("Paginated search is currently busy.");return}a>0&&(U.pageIndex=a);try{k.value=!0,S.value="";const d=K();U.selected=null,await N(`${r.baseUrl}/${d}`).then(async p=>{var y;Array.isArray(p.data)?U.items=p.data:U=Object.assign(U,p.data);let c=location.pathname;c.endsWith("/")?c+=d:c+="/"+d,U.updateUrl&&window.history.replaceState(d,`${u}-search`,c),U.items.forEach(C=>{C.expand=!1}),i(),(y=r.successAction)==null||y.call(r,w.value)})}catch(d){if(localStorage.removeItem(r.cacheKey),r.failAction)r.failAction(d);else{const p=h.getErrorMessageAsHtml(d);S.value=p,E.error("Error Occured",p)}}finally{k.value=!1,(f=r.finalAction)==null||f.call(r)}},getRowNumber:a=>{const U=w.value;return(U.pageIndex-1)*U.pageSize+(a+1)},setSelected:a=>{const U=w.value;U.selected&&a&&U.selected===a?U.selected=null:(U.selected&&(U.selected.expand=!1),U.selected=a,U.selected.expand=!0)},isSelected:a=>{const U=w.value;return a===null||U.selected===null?!1:a===U.selected}}}const za={class:"d-flex justify-content-end"},Fa={key:0},ja={class:"ms-1"},Ga={class:"input-group"},Ya={class:"table-responsive"},Wa={class:"table table-hover mb-0"},Ka=["textContent"],Ja=["src"],Qa="/api/v1/users/search",Xa={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,security:b,filter:M,initializeFilter:w,getQuery:W,saveQuery:K,search:i,getRowNumber:m,setSelected:V,isSelected:l}=De({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${$==null?void 0:$.userId}/users/search`,baseUrl:Qa,filter:{updateUrl:!0}});return de(async()=>{w(),await i()}),(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("m-pagination"),p=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-users",pageTitle:o(g)},{default:O(()=>[e("div",za,[o(b).isAdministrator?(t(),s("div",Fa,[D(U,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):x("",!0),e("div",ja,[e("div",Ga,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>o(M).query.criteria=c),onKeyup:a[1]||(a[1]=Ae(c=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=c=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(N)},{default:O(()=>[e("div",Ya,[e("table",Wa,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(M).items,(c,y)=>(t(),s("tr",{key:c.movieId},[e("td",{textContent:v(o(m)(y)),class:"text-center"},null,8,Ka),e("td",null,[c.photoBase64?(t(),s("img",{key:0,src:c.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ja)):x("",!0)]),e("td",null,[D(U,{to:`${r.urlView}/${c.userId}`,class:"d-inline-block text-truncate"},{default:O(()=>[L(v(c.displayName),1)]),_:2},1032,["to"])]),e("td",null,v(c.email),1),e("td",null,v(c.jobTitle),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),D(d,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Za={class:"d-flex flex-row justify-content-end"},el={key:0},tl={class:"row row-cols-1 row-cols-sm-2 mt-3"},sl={class:"col text-center mb-2"},ol=["src"],al={class:"col"},ll={class:"form-floating mb-2"},nl={class:"form-floating mb-2"},rl={class:"row row-cols-sm-2"},il={class:"col"},dl={class:"form-floating mb-2"},ul={class:"col"},cl={class:"form-floating mb-2"},ml={class:"row row-cols-sm-2"},fl={class:"col"},pl={class:"form-floating mb-2"},vl={class:"col"},gl={class:"form-floating mb-2"},bl={class:"col"},yl={class:"form-floating mb-2"},$l={class:"col"},wl={class:"form-floating mb-2"},hl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"ARC CMS",pageTitle:"View User"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null});de(async()=>{await m()});const m=async()=>{const A=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const a=`/api/v1/users/get-from-db/${u.id}/`;await Q.get(a).then(U=>{A.item=U.data})}catch(a){h.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}},V=async()=>{await m()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/users/${u.id}/`).then(a=>{q.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){h.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}}};return(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-user",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",Za,[o(W).isAdministrator?(t(),s(B,{key:0},[D(U,{to:`${r.urlEdit}/${r.id}`,class:"ms-2 btn btn-primary d-none"},{default:O(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=p=>l()),class:"ms-1 btn btn-warning"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):x("",!0),e("button",{onClick:a[1]||(a[1]=p=>V()),class:"ms-2 btn btn-secondary"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=p=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(d,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",el,[e("div",null,[e("div",tl,[e("div",sl,[e("img",{src:i.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,ol)]),e("div",al,[e("div",ll,[P(e("input",{"onUpdate:modelValue":a[3]||(a[3]=p=>i.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[F,i.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",nl,[P(e("input",{"onUpdate:modelValue":a[4]||(a[4]=p=>i.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[F,i.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",rl,[e("div",il,[e("div",dl,[P(e("input",{"onUpdate:modelValue":a[5]||(a[5]=p=>i.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[F,i.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",ul,[e("div",cl,[P(e("input",{"onUpdate:modelValue":a[6]||(a[6]=p=>i.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[F,i.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",ml,[e("div",fl,[e("div",pl,[P(e("input",{"onUpdate:modelValue":a[7]||(a[7]=p=>i.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[F,i.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",vl,[e("div",gl,[P(e("input",{"onUpdate:modelValue":a[8]||(a[8]=p=>i.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[F,i.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",bl,[e("div",yl,[P(e("input",{"onUpdate:modelValue":a[9]||(a[9]=p=>i.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[F,i.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",$l,[e("div",wl,[P(e("input",{"onUpdate:modelValue":a[10]||(a[10]=p=>i.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[F,i.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):x("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},kl={class:"d-flex justify-content-end"},_l=["disabled"],Sl={class:"row row-cols-1 row-cols-sm-2"},Tl={class:"col"},Ml={class:"form-floating mb-2"},Il={key:0,class:"d-block invalid-feedback"},Cl={class:"col"},xl={class:"form-floating"},Pl={class:"col"},Vl={class:"form-floating mb-2"},Ul={class:""},Ol={class:"col"},Al={class:"form-floating mb-2"},Dl={key:0,class:"d-block invalid-feedback"},Hl={class:"col"},El={class:"form-floating mb-2"},Ll={key:0,class:"d-block invalid-feedback"},Bl={class:""},ql={class:"col"},Nl={class:"form-floating mb-2"},Rl={key:0,class:"d-block invalid-feedback"},zl={class:"col"},Fl={class:"input-group mb-2"},jl={class:"form-floating"},Gl=["href"],Yl={key:0,class:"d-block invalid-feedback"},Wl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),q=r,b=fe({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),M={item:{title:{title:Z.withMessage("title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:Z.withMessage("durationInMillis is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:Z.withMessage("rawBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},rawPath:{title:Z.withMessage("rawPath is required.",te),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:Z.withMessage("hlsBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},hlsPath:{title:Z.withMessage("hlsPath is required.",te),$autoDirty:!0,$lazy:!0}}},w=we(M,b),W=Ce(()=>{const m=h.moment;if(b.durationTime&&b.durationTime!=="00:00:00"&&K(b.durationTime)){const V=m().startOf("day"),l=V.format("YYYY-MM-DD ")+b.durationTime,a=m(l).subtract(V);return b.item.durationInMillis=a.valueOf(),b.item.durationInMillis}return 0}),K=m=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(m);de(async()=>{});const i=async()=>{const m=b;if(k.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const l=h.clone(m.item);l.durationInMillis=W.value;debugger;await N.post("/api/v1/videos/",l).then(A=>{E.success("Add Video","Video added",{onClose:async()=>{const a=`${q.urlView}/${A.data}`;await Y.push(a)}})})}catch(l){S.value=h.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{k.value=!1}};return(m,V)=>{const l=X("router-link"),A=X("PageHeader"),a=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(A,{"page-icon":"fas fa-fw fa-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",kl,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:V[0]||(V[0]=U=>i()),class:"btn btn-primary"},V[8]||(V[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_l),D(l,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>V[9]||(V[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(a,{errorMessage:o(S),vuelidate:o(w)},{default:O(()=>[e("div",null,[e("div",Sl,[e("div",Tl,[e("div",Ml,[P(e("input",{"onUpdate:modelValue":V[1]||(V[1]=U=>b.item.title=U),id:"name",class:"form-control",placeholder:"Title"},null,512),[[F,b.item.title]]),V[10]||(V[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(w).item.title.$error?(t(),s("div",Il,[(t(!0),s(B,null,j(o(w).item.title.$errors,U=>(t(),s("div",{key:U.$uid},v(U.$message),1))),128))])):x("",!0)])]),e("div",Cl,[e("div",xl,[P(e("input",{"onUpdate:modelValue":V[2]||(V[2]=U=>b.durationTime=U),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[F,b.durationTime]]),V[11]||(V[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Pl,[e("div",Vl,[P(e("textarea",{"onUpdate:modelValue":V[3]||(V[3]=U=>b.item.description=U),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[F,b.item.description]]),V[12]||(V[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Ul,[V[15]||(V[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Ol,[e("div",Al,[P(e("input",{"onUpdate:modelValue":V[4]||(V[4]=U=>b.item.rawBaseUrl=U),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[F,b.item.rawBaseUrl]]),V[13]||(V[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(w).item.rawBaseUrl.$error?(t(),s("div",Dl,[(t(!0),s(B,null,j(o(w).item.rawBaseUrl.$errors,U=>(t(),s("div",{key:U.$uid},v(U.$message),1))),128))])):x("",!0)])]),e("div",Hl,[e("div",El,[P(e("input",{"onUpdate:modelValue":V[5]||(V[5]=U=>b.item.rawPath=U),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[F,b.item.rawPath]]),V[14]||(V[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(w).item.rawPath.$error?(t(),s("div",Ll,[(t(!0),s(B,null,j(o(w).item.rawPath.$errors,U=>(t(),s("div",{key:U.$uid},v(U.$message),1))),128))])):x("",!0)])]),e("div",Bl,[V[19]||(V[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",ql,[e("div",Nl,[P(e("input",{"onUpdate:modelValue":V[6]||(V[6]=U=>b.item.hlsBaseUrl=U),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[F,b.item.hlsBaseUrl]]),V[16]||(V[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(w).item.hlsBaseUrl.$error?(t(),s("div",Rl,[(t(!0),s(B,null,j(o(w).item.hlsBaseUrl.$errors,U=>(t(),s("div",{key:U.$uid},v(U.$message),1))),128))])):x("",!0)])]),e("div",zl,[e("div",Fl,[e("div",jl,[P(e("input",{"onUpdate:modelValue":V[7]||(V[7]=U=>b.item.hlsPath=U),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[F,b.item.hlsPath]]),V[17]||(V[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),b.item.hlsBaseUrl&&b.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(b.item.hlsBaseUrl+b.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},V[18]||(V[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,Gl)):x("",!0)]),o(w).item.hlsPath.$error?(t(),s("div",Yl,[(t(!0),s(B,null,j(o(w).item.hlsPath.$errors,U=>(t(),s("div",{key:U.$uid},v(U.$message),1))),128))])):x("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Kl={key:0,class:"d-flex justify-content-end"},Jl=["disabled"],Ql={key:0},Xl={class:"row row-cols-1 row-cols-sm-2"},Zl={class:"col"},en={class:"form-floating mb-2"},tn={key:0,class:"d-block invalid-feedback"},sn={class:"col"},on={class:"form-floating mb-2"},an={key:0,class:"d-block invalid-feedback"},ln={class:"row row-cols-sm-2"},nn={class:"col"},rn={class:"form-floating mb-2"},dn={class:"form-floating mb-2"},un={key:0,class:"d-block invalid-feedback"},cn={class:"form-floating mb-2"},mn={key:0,class:"d-block invalid-feedback"},fn={class:"col"},pn={class:"form-floating mb-2"},Le={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),q=r,b=fe({editorElementId:"editor",htmlContent:"",item:null}),M={item:{title:{required:Z.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},eidr:{required:Z.withMessage("eidr is required.",te),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:Z.withMessage("eidrPrefix is required.",te),$autoDirty:!0,$lazy:!0}},htmlContent:{required:Z.withMessage("Content is required.",te),$autoDirty:!0,$lazy:!0}},w=we(M,b);de(async()=>{await i()});const W=()=>{const V=b;var l=document.getElementById(V.editorElementId);l.innerHTML=V.htmlContent},K=V=>{const l=b;l.htmlContent=V.target.innerHTML;var A=document.getElementById(l.editorElementId);A.value=l.htmlContent},i=async()=>{const V=b;if(!k.value)try{k.value=!0,b.item=null,await N.get(`/api/v1/movies/${q.id}`).then(l=>{V.item=l.data,V.htmlContent=V.item.description}),W()}catch(l){S.value=h.getErrorMessageAsHtml(l)}finally{k.value=!1}},m=async()=>{const V=b;if(k.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const A=h.clone(V.item);A.description=V.htmlContent,await N.put("/api/v1/movies",A).then(a=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const U=`${q.urlView}/${q.id}`;await Y.push(U)}})})}catch(A){S.value=h.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{k.value=!1}};return(V,l)=>{const A=X("router-link"),a=X("PageHeader"),U=X("PageBody");return t(),s("div",null,[D(a,{"page-icon":"fas fa-fw fa-film",pageTitle:o($),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[b.item?(t(),s("div",Kl,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:l[0]||(l[0]=f=>m()),class:"btn btn-primary"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Jl),e("button",{onClick:i,class:"ms-2 btn btn-secondary"},l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(A,{to:`${q.urlView}/${q.id}`,class:"ms-1 btn btn-secondary"},{default:O(()=>l[9]||(l[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):x("",!0)]),_:1},8,["pageTitle"]),D(U,{errorMessage:o(S),vuelidate:o(w)},{default:O(()=>[b.item?(t(),s("div",Ql,[e("div",Xl,[e("div",Zl,[e("div",en,[P(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>b.item.eidrPrefix=f),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[F,b.item.eidrPrefix]]),l[10]||(l[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(w).item.eidrPrefix.$error?(t(),s("div",tn,[(t(!0),s(B,null,j(o(w).item.eidrPrefix.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):x("",!0)])]),e("div",sn,[e("div",on,[P(e("input",{"onUpdate:modelValue":l[2]||(l[2]=f=>b.item.eidr=f),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[F,b.item.eidr]]),l[11]||(l[11]=e("label",{for:"title"},"Eidr",-1)),o(w).item.eidr.$error?(t(),s("div",an,[(t(!0),s(B,null,j(o(w).item.eidr.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):x("",!0)])])]),e("div",ln,[e("div",nn,[e("div",rn,[P(e("input",{"onUpdate:modelValue":l[3]||(l[3]=f=>b.item.releaseYear=f),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[F,b.item.releaseYear]]),l[12]||(l[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",dn,[P(e("input",{"onUpdate:modelValue":l[4]||(l[4]=f=>b.item.title=f),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[F,b.item.title]]),l[13]||(l[13]=e("label",{for:"title"},"Title",-1)),o(w).item.title.$error?(t(),s("div",un,[(t(!0),s(B,null,j(o(w).item.title.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):x("",!0)])])]),e("div",null,[e("div",cn,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:l[5]||(l[5]=f=>K(f))},null,32),l[14]||(l[14]=e("label",{for:"editor"},"Content",-1)),o(w).htmlContent.$error?(t(),s("div",mn,[(t(!0),s(B,null,j(o(w).htmlContent.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):x("",!0)])]),e("div",fn,[e("div",pn,[P(e("textarea",{"onUpdate:modelValue":l[6]||(l[6]=f=>b.item.metadata=f),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[F,b.item.metadata]]),l[15]||(l[15]=e("label",{for:"title"},"Metadata",-1))])])])):x("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},vn={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function gn(r,u,$,k,g,R){const S=X("Page");return t(),ue(S,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const bn=Te(vn,[["render",gn]]),yn={class:"d-flex justify-content-end"},$n={class:"ms-1"},wn={class:"input-group"},hn={class:"table-responsive"},kn={class:"table table-hover mb-0"},_n=["textContent"],Sn={class:"text-end ms-sm-5 pe-sm-5"},Tn="/api/v1/videos/search",Mn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,security:b,filter:M,initializeFilter:w,getQuery:W,saveQuery:K,search:i,getRowNumber:m,setSelected:V,isSelected:l}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${$==null?void 0:$.userId}/videos/search`,baseUrl:Tn,filter:{updateUrl:!0}});return de(async()=>{w(),await i()}),(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("m-pagination"),p=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-video",pageTitle:o(g)},{default:O(()=>[e("div",yn,[D(U,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",$n,[e("div",wn,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>o(M).query.criteria=c),onKeyup:a[1]||(a[1]=Ae(c=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=c=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(N)},{default:O(()=>[e("div",hn,[e("table",kn,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(M).items,(c,y)=>(t(),s("tr",{key:c.movieId},[e("td",{textContent:v(o(m)(y)),class:"text-center"},null,8,_n),e("td",null,[D(U,{to:`${r.urlView}/${c.videoId}`,class:"d-inline-block text-truncate"},{default:O(()=>[L(v(c.title),1)]),_:2},1032,["to"])]),e("td",null,v(c.description),1),e("td",Sn,[e("div",null,v(o(Q).moment.utc(c.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),D(d,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},In={class:"d-flex flex-row justify-content-end"},Cn={key:0},xn={class:"row row-cols-sm-2"},Pn={class:"col"},Vn={class:"form-floating mb-2"},Un={class:"col"},On={class:"form-floating mb-2"},An={class:"col"},Dn={class:"form-floating mb-2"},Hn={class:"row row-cols-sm-2"},En={class:"col"},Ln={class:"form-floating mb-2"},Bn={class:"col"},qn={class:"form-floating mb-2"},Nn={class:"row row-cols-sm-2"},Rn={class:"col"},zn={class:"form-floating mb-2"},Fn={class:"col"},jn={class:"form-floating mb-2"},Gn={class:"row row-cols-sm-2"},Yn={class:"col"},Wn={class:"form-floating mb-2"},Kn={class:"col"},Jn={class:"form-floating mb-2"},Qn={class:"table-responsive"},Xn={class:"table table-hover mb-0 caption-top"},Zn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null});de(async()=>{await m()});const m=async()=>{const A=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const a=`/api/v1/videos/${u.id}/`;await Q.get(a).then(U=>{A.item=U.data,A.item.duration=z.moment.utc(A.item.durationInMillis).format("HH:mm:ss")})}catch(a){h.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}},V=async()=>{await m()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/users/${u.id}/`).then(a=>{q.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){h.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{g.value=!1}}};return(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",In,[o(W).isAdministrator?(t(),s(B,{key:0},[D(U,{to:`${r.urlEdit}/${r.id}`,class:"ms-2 btn btn-primary d-none"},{default:O(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=p=>l()),class:"ms-1 btn btn-warning"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):x("",!0),e("button",{onClick:a[1]||(a[1]=p=>V()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=p=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(d,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",Cn,[e("div",null,[e("div",xn,[e("div",Pn,[e("div",Vn,[P(e("input",{"onUpdate:modelValue":a[3]||(a[3]=p=>i.item.title=p),type:"text",class:"form-control",id:"userId",placeholder:"Title",readonly:""},null,512),[[F,i.item.title]]),a[16]||(a[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",Un,[e("div",On,[P(e("input",{"onUpdate:modelValue":a[4]||(a[4]=p=>i.item.duration=p),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",readonly:""},null,512),[[F,i.item.duration]]),a[17]||(a[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",An,[e("div",Dn,[P(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=p=>i.item.description=p),type:"text",class:"form-control",id:"displayName",placeholder:"Description",readonly:"",style:{height:"5rem"}},null,512),[[F,i.item.description]]),a[18]||(a[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",Hn,[e("div",En,[e("div",Ln,[P(e("input",{"onUpdate:modelValue":a[6]||(a[6]=p=>i.item.rawBaseUrl=p),class:"form-control",id:"rawBaseUrl",readonly:""},null,512),[[F,i.item.rawBaseUrl]]),a[19]||(a[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Bn,[e("div",qn,[P(e("input",{"onUpdate:modelValue":a[7]||(a[7]=p=>i.item.rawPath=p),class:"form-control",id:"rawPath",readonly:""},null,512),[[F,i.item.rawPath]]),a[20]||(a[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Nn,[e("div",Rn,[e("div",zn,[P(e("input",{"onUpdate:modelValue":a[8]||(a[8]=p=>i.item.hlsBaseUrl=p),class:"form-control",id:"hlsBaseUrl",readonly:""},null,512),[[F,i.item.hlsBaseUrl]]),a[21]||(a[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Fn,[e("div",jn,[P(e("input",{"onUpdate:modelValue":a[9]||(a[9]=p=>i.item.hlsPath=p),class:"form-control",id:"hlsPath",readonly:""},null,512),[[F,i.item.hlsPath]]),a[22]||(a[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",Gn,[e("div",Yn,[e("div",Wn,[P(e("input",{"onUpdate:modelValue":a[10]||(a[10]=p=>i.item.dashBaseUrl=p),class:"form-control",id:"dashBaseUrl",readonly:""},null,512),[[F,i.item.dashBaseUrl]]),a[23]||(a[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Kn,[e("div",Jn,[P(e("input",{"onUpdate:modelValue":a[11]||(a[11]=p=>i.item.dashPath=p),class:"form-control",id:"dashPath",readonly:""},null,512),[[F,i.item.dashPath]]),a[24]||(a[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Qn,[e("table",Xn,[a[25]||(a[25]=e("caption",null,"VOD Sources",-1)),a[26]||(a[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.vodSources,(p,c)=>(t(),s("tr",{key:p.vodSourceId},[e("td",null,v(c+1),1),e("td",null,[D(U,{to:`${u.urlViewVodSource}/${encodeURIComponent(p.vodSourceId)}/${o(w)()}`},{default:O(()=>[L(v(p.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[_e,i.item.vodSources.length>0]])])])])):x("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},er={class:"d-flex justify-content-end"},tr=["disabled"],sr={class:"form-floating mb-2"},or={key:0,class:"d-block invalid-feedback"},ar={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),q=r,b=fe({lookups:{},item:{name:null}}),M={item:{name:{required:Z.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0}}},w=we(M,b);de(async()=>{});const W=async()=>{const K=b;if(k.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const m=h.clone(K.item);await N.post("/api/v1/sourcegroups/",m).then(V=>{E.success("Add Source Group","Source group added.",{onClose:async()=>{const l=`${q.urlView}/${V.data}`;await Y.push(l)}})})}catch(m){S.value=h.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{k.value=!1}};return(K,i)=>{const m=X("router-link"),V=X("PageHeader"),l=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(V,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",er,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:i[0]||(i[0]=A=>W()),class:"btn btn-primary"},i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,tr),D(m,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(l,{errorMessage:o(S),vuelidate:o(w)},{default:O(()=>[e("div",null,[e("div",sr,[P(e("input",{"onUpdate:modelValue":i[1]||(i[1]=A=>b.item.name=A),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[F,b.item.name]]),i[4]||(i[4]=e("label",{for:"name"},"Name",-1)),o(w).item.name.$error?(t(),s("div",or,[(t(!0),s(B,null,j(o(w).item.name.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):x("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},lr={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function nr(r,u,$,k,g,R){const S=X("Page");return t(),ue(S,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const rr=Te(lr,[["render",nr]]),ir={class:"d-flex justify-content-end"},dr={class:"ms-1"},ur={class:"input-group"},cr={class:"table-responsive"},mr={class:"table table-hover mb-0"},fr=["textContent"],pr={key:0,class:"fas fa-fw fa-check-circle text-success"},vr="/api/v1/sourcegroups/search",gr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,security:b,filter:M,initializeFilter:w,getQuery:W,saveQuery:K,search:i,getRowNumber:m,setSelected:V,isSelected:l}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${$==null?void 0:$.userId}/source-groups/search`,baseUrl:vr,filter:{updateUrl:!0}});return de(async()=>{w(),await i()}),(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("m-pagination"),p=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(g)},{default:O(()=>[e("div",ir,[D(U,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",dr,[e("div",ur,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>o(M).query.criteria=c),onKeyup:a[1]||(a[1]=Ae(c=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=c=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(N)},{default:O(()=>[e("div",cr,[e("table",mr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(M).items,(c,y)=>(t(),s("tr",{key:c.movieId},[e("td",{textContent:v(o(m)(y)),class:"text-center"},null,8,fr),e("td",null,[D(U,{to:`${r.urlView}/${c.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:O(()=>[c.arn?(t(),s("span",pr)):x("",!0),L(" "+v(c.name),1)]),_:2},1032,["to"])]),e("td",null,v(c.channelOutputs),1),e("td",null,v(c.packageConfigurations),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),D(d,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},br={class:"d-flex flex-row justify-content-end"},yr={key:0},$r={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},wr={class:"nav-item",role:"presentation"},hr={class:"nav-item",role:"presentation"},kr={class:"nav-item",role:"presentation"},_r={class:"tab-content",id:"myTabContent"},Sr={class:"mt-2"},Tr={class:"col"},Mr={class:"form-floating mb-2"},Ir={class:"mt-2"},Cr={class:"table-responsive border"},xr={class:"table table-hover mb-0"},Pr={class:"mt-2"},Vr={class:"table-responsive border"},Ur={class:"table table-hover mb-0"},Or={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null}),m=ie();de(async()=>{await a(),m.value=z.getPageTab("sourceGroup")||"information-tab"});const V=d=>{z.setPageTab("sourceGroup",d),m.value=d},l=d=>d!==m.value?"":"active",A=d=>d!==m.value?"":"show active",a=async()=>{const d=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const p=`/api/v1/sourcegroups/${u.id}/`;await Q.get(p).then(c=>{d.item=c.data})}catch(p){h.value=z.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{g.value=!1}},U=async()=>{if(!g.value)try{g.value=!0,h.value="";const d=`/api/v1/sourcegroups/${u.id}/`;await Q.delete(d).then(p=>{q.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const c=`${u.urlMain}/`;await E.push(c)}})})}catch(d){h.value=z.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{g.value=!1}},f=async()=>{await a()};return(d,p)=>{const c=X("PageHeader"),y=X("router-link"),C=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(c,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",br,[e("button",{onClick:p[0]||(p[0]=J=>U()),class:"ms-1 btn btn-warning"},p[7]||(p[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:p[1]||(p[1]=J=>f()),class:"ms-2 btn btn-secondary"},p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:p[2]||(p[2]=J=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},p[9]||(p[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(C,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",yr,[e("div",null,[e("ul",$r,[e("li",wr,[e("button",{onClick:p[3]||(p[3]=J=>V("information-tab")),class:le([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",hr,[e("button",{onClick:p[4]||(p[4]=J=>V("channelOutputs-tab")),class:le([l("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",kr,[e("button",{onClick:p[5]||(p[5]=J=>V("packageConfigurations-tab")),class:le([l("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",_r,[e("div",{class:le([A("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Sr,[e("div",Tr,[e("div",Mr,[P(e("input",{"onUpdate:modelValue":p[6]||(p[6]=J=>i.item.name=J),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.name]]),p[10]||(p[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:le([A("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Ir,[e("div",Cr,[e("table",xr,[p[11]||(p[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.channelOutputs,(J,H)=>(t(),s("tr",{key:J.channelOutputId},[e("td",null,v(H+1),1),e("td",null,[D(y,{to:`${r.urlViewChannel}/${J.channelId}/${o(w)()}`},{default:O(()=>[L(v(J.manifestName),1)]),_:2},1032,["to"])]),e("td",null,v(J.outputType),1)]))),128))]),_:1},512),[[_e,i.item.channelOutputs.length>0]])])])])],2),e("div",{class:le([A("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Pr,[e("div",Vr,[e("table",Ur,[p[12]||(p[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.packageConfigurations,(J,H)=>(t(),s("tr",{key:J.packageConfigurationId},[e("td",null,v(H+1),1),e("td",null,[D(y,{to:`${r.urlViewVodSource}/${J.vodSourceId}/${o(w)()}`},{default:O(()=>[L(v(J.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,v(J.path),1),e("td",null,v(J.type),1)]))),128))]),_:1},512),[[_e,i.item.packageConfigurations.length>0]])])])])],2)])])])):x("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Ar={class:"d-flex justify-content-end"},Dr=["disabled"],Hr={class:"form-floating mb-2"},Er={key:0,class:"d-block invalid-feedback"},Lr={class:"form-floating mb-2"},Br={key:0,class:"d-block invalid-feedback"},qr={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),q=r,b=fe({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),M={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:Z.withMessage("HTTP Configuration Base Url is required.",te),$autoDirty:!0,$lazy:!0}}},w=we(M,b);de(async()=>{});const W=async()=>{const K=b;if(k.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const m=h.clone(K.item);await N.post("/api/v1/sourcelocations/",m).then(V=>{E.success("Add Source Location","Source location added.",{onClose:async()=>{const l=`${q.urlView}/${V.data}`;await Y.push(l)}})})}catch(m){S.value=h.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{k.value=!1}};return(K,i)=>{const m=X("router-link"),V=X("PageHeader"),l=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(V,{"page-icon":"fas fa-fw fa-building",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",Ar,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:i[0]||(i[0]=A=>W()),class:"btn btn-primary"},i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Dr),D(m,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>i[4]||(i[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(l,{errorMessage:o(S),vuelidate:o(w)},{default:O(()=>[e("div",null,[e("div",Hr,[P(e("input",{"onUpdate:modelValue":i[1]||(i[1]=A=>b.item.name=A),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[F,b.item.name]]),i[5]||(i[5]=e("label",{for:"name"},"Name",-1)),o(w).item.name.$error?(t(),s("div",Er,[(t(!0),s(B,null,j(o(w).item.name.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):x("",!0)]),e("div",Lr,[P(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=A=>b.item.httpConfigurationBaseUrl=A),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[F,b.item.httpConfigurationBaseUrl]]),i[6]||(i[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(w).item.httpConfigurationBaseUrl.$error?(t(),s("div",Br,[(t(!0),s(B,null,j(o(w).item.httpConfigurationBaseUrl.$errors,A=>(t(),s("div",{key:A.$uid},v(A.$message),1))),128))])):x("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Nr={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Rr(r,u,$,k,g,R){const S=X("Page");return t(),ue(S,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const zr=Te(Nr,[["render",Rr]]),Fr={class:"d-flex justify-content-end"},jr={class:"ms-1"},Gr={class:"input-group"},Yr={class:"table-responsive"},Wr={class:"table table-hover mb-0"},Kr=["textContent"],Jr={key:0,class:"fas fa-fw fa-check-circle text-success"},Qr="/api/v1/sourcelocations/search",Xr={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,security:b,filter:M,initializeFilter:w,getQuery:W,saveQuery:K,search:i,getRowNumber:m,setSelected:V,isSelected:l}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${$==null?void 0:$.userId}/source-locations/search`,baseUrl:Qr,filter:{updateUrl:!0}});return de(async()=>{w(),await i()}),(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("m-pagination"),p=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-building",pageTitle:o(g)},{default:O(()=>[e("div",Fr,[D(U,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",jr,[e("div",Gr,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>o(M).query.criteria=c),onKeyup:a[1]||(a[1]=Ae(c=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=c=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(N)},{default:O(()=>[e("div",Yr,[e("table",Wr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(M).items,(c,y)=>(t(),s("tr",{key:c.movieId},[e("td",{textContent:v(o(m)(y)),class:"text-center"},null,8,Kr),e("td",null,[D(U,{to:`${r.urlView}/${c.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:O(()=>[c.arn?(t(),s("span",Jr)):x("",!0),L(" "+v(c.name),1)]),_:2},1032,["to"])]),e("td",null,v(c.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),D(d,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Zr={class:"d-flex flex-row justify-content-end"},ei={key:0},ti={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},si={class:"nav-item",role:"presentation"},oi={class:"nav-item",role:"presentation"},ai={class:"nav-item",role:"presentation"},li={class:"tab-content",id:"myTabContent"},ni={class:"mt-2"},ri={class:"col"},ii={class:"form-floating mb-2"},di={class:"col"},ui={class:"form-floating mb-2"},ci={class:"mt-2"},mi={class:"table-responsive border"},fi={class:"table table-hover mb-0"},pi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},vi={class:"mt-2"},gi={class:"table-responsive border"},bi={class:"table table-hover mb-0"},yi={key:0,class:"fas fa-fw fa-check-circle text-success"},$i={class:"badge bg-info"},wi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null}),m=ie();de(async()=>{await a(),m.value=z.getPageTab("sourceLocation")||"information-tab"});const V=p=>{z.setPageTab("sourceLocation",p),m.value=p},l=p=>p!==m.value?"":"active",A=p=>p!==m.value?"":"show active",a=async()=>{const p=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const c=`/api/v1/sourcelocations/${u.id}/`;await Q.get(c).then(y=>{p.item=y.data})}catch(c){h.value=z.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{g.value=!1}},U=async()=>{await a()},f=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!g.value){h.value=null;try{g.value=!0,await Q.post(`/api/v1/sourcelocations/${u.id}/publish/`).then(c=>{q.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),g.value=!1,await U()}catch(c){h.value=z.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{g.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/sourcelocations/${u.id}/unpublish/`).then(c=>{q.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),g.value=!1,await U()}catch(c){h.value=z.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{g.value=!1}}};return(p,c)=>{const y=X("PageHeader"),C=X("router-link"),J=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",Zr,[i.item?(t(),s(B,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:c[0]||(c[0]=H=>d()),class:"ms-1 btn btn-warning"},c[9]||(c[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:c[1]||(c[1]=H=>f()),class:"ms-1 btn btn-primary"},c[10]||(c[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):x("",!0),e("button",{onClick:c[2]||(c[2]=H=>U()),class:"ms-2 btn btn-secondary"},c[11]||(c[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:c[3]||(c[3]=H=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},c[12]||(c[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(J,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",ei,[e("div",null,[e("ul",ti,[e("li",si,[e("button",{onClick:c[4]||(c[4]=H=>V("information-tab")),class:le([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",oi,[e("button",{onClick:c[5]||(c[5]=H=>V("vodSources-tab")),class:le([l("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",ai,[e("button",{onClick:c[6]||(c[6]=H=>V("programs-tab")),class:le([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",li,[e("div",{class:le([A("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ni,[e("div",ri,[e("div",ii,[P(e("input",{"onUpdate:modelValue":c[7]||(c[7]=H=>i.item.name=H),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.name]]),c[13]||(c[13]=e("label",{for:"name"},"Name",-1))])]),e("div",di,[e("div",ui,[P(e("input",{"onUpdate:modelValue":c[8]||(c[8]=H=>i.item.httpConfigurationBaseUrl=H),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[F,i.item.httpConfigurationBaseUrl]]),c[14]||(c[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:le([A("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",ci,[e("div",mi,[e("table",fi,[c[15]||(c[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.vodSources,(H,ne)=>(t(),s("tr",{key:H.vodSourceId},[e("td",null,v(ne+1),1),e("td",null,[H.arn?(t(),s("span",pi)):x("",!0),D(C,{to:`${u.urlViewVodSource}/${encodeURIComponent(H.vodSourceId)}/${o(w)()}`},{default:O(()=>[L(v(H.name),1)]),_:2},1032,["to"])]),e("td",null,[D(C,{to:`${u.urlViewVideo}/${encodeURIComponent(H.video.videoId)}/${o(w)()}`},{default:O(()=>[L(v(H.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,v(o(z).moment.utc(H.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[_e,i.item.vodSources.length>0]])])])])],2),e("div",{class:le([A("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",vi,[e("div",gi,[e("table",bi,[c[17]||(c[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.programs,(H,ne)=>(t(),s("tr",{key:H.programId},[e("td",null,v(ne+1),1),e("td",null,[D(C,{to:`${u.urlViewChannel}/${encodeURIComponent(H.channel.channelId)}/${o(w)()}`},{default:O(()=>[L(v(H.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[H.arn?(t(),s("span",yi)):x("",!0),L(" "+v(H.name)+" ",1),e("div",null," Start: "+v(o(z).moment.utc(H.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+v(o(z).moment.utc(H.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[L(v(o(z).moment(H.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",$i,v(o(z).moment(H.dateScheduledStart).fromNow()),1)])]),c[16]||(c[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[_e,i.item.programs.length>0]])])])])],2)])])])):x("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},hi={class:"d-flex justify-content-end"},ki=["disabled"],_i={class:"col"},Si={class:"form-floating mb-2"},Ti={key:0,class:"d-block invalid-feedback"},Mi={class:"row row-cols-1 row-cols-sm-2"},Ii={class:"col"},Ci={class:"form-floating mb-2"},xi=["value"],Pi={key:0,class:"d-block invalid-feedback"},Vi={class:"col"},Ui={class:"form-floating mb-2"},Oi=["disabled"],Ai=["value"],Di={key:0,class:"d-block invalid-feedback"},Hi={key:0},Ei={class:"d-flex flex-row justify-content-between"},Li={key:0,class:"d-inline invalid-feedback"},Bi={class:"table-responsive border mt-1"},qi={class:"table mb-0 caption-top"},Ni={class:"input-group mb-1"},Ri=["onUpdate:modelValue"],zi=["onUpdate:modelValue"],Fi=["value"],ji=["onUpdate:modelValue"],Gi=["onClick"],Yi={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),q=r,b=fe({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),M=(U,f,d)=>U.length>0,w={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:Z.withMessage("Video is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("Source Locaton is required.",te),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:Z.withMessage("PackageConfigurations is required.",M),$each:Z.forEach({path:{required:Z.withMessage("Path is required.",te)},sourceGroupId:{required:Z.withMessage("Source Group is required.",te)}}),$autoDirty:!0,$lazy:!0}}},W=we(w,b);de(async()=>{await K(),await i()});const K=async()=>{try{await N.get("/api/v1/sourcegroups/lookup/").then(f=>{b.lookups.sourceGroups=f.data})}catch(U){S.value=h.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},i=async()=>{try{if(await N.get("/api/v1/sourcelocations/lookup/").then(f=>{b.lookups.sourceLocations=f.data}),b.lookups.sourceLocations.length===1){const f=b.lookups.sourceLocations[0];b.selected.sourceLocation=f,await m()}}catch(U){S.value=h.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},m=async()=>{const U=b.selected.sourceLocation;b.item.sourceLocationId=U.id,await V(U.baseUrl)},V=async U=>{try{const f=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(U)}`;await N.get(f).then(d=>{b.lookups.videos=d.data,b.lookups.videos.length===1&&(b.item.videoId=b.lookups.videos[0].id)})}catch(f){S.value=h.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},l=async()=>{const U=b;if(k.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const d=h.clone(U.item);d.videoId=d.video.id,delete d.video,await N.post("/api/v1/vodSources/",d).then(p=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const c=`${q.urlView}/${p.data}`;await Y.push(c)}})})}catch(d){S.value=h.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{k.value=!1}},A=()=>{const U={path:"",sourceGroupId:null,type:"HLS"},f=b.item.video;f&&(U.path=f.hlsPath),b.item.packageConfigurations.push(U)},a=U=>{b.item.packageConfigurations.splice(U,1)};return(U,f)=>{const d=X("router-link"),p=X("PageHeader"),c=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-tag",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",hi,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:f[0]||(f[0]=y=>l()),class:"btn btn-primary"},f[6]||(f[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ki),D(d,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(c,{errorMessage:o(S),vuelidate:o(W)},{default:O(()=>[e("div",null,[e("div",_i,[e("div",Si,[P(e("input",{"onUpdate:modelValue":f[1]||(f[1]=y=>b.item.name=y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,b.item.name]]),f[8]||(f[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Ti,[(t(!0),s(B,null,j(o(W).item.name.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):x("",!0)])]),e("div",Mi,[e("div",Ii,[e("div",Ci,[P(e("select",{"onUpdate:modelValue":f[2]||(f[2]=y=>b.selected.sourceLocation=y),onChange:f[3]||(f[3]=y=>m()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(b.lookups.sourceLocations,y=>(t(),s("option",{value:y},v(y.name),9,xi))),256))],544),[[ve,b.selected.sourceLocation]]),f[9]||(f[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Pi,[(t(!0),s(B,null,j(o(W).item.sourceLocationId.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):x("",!0)])]),e("div",Vi,[e("div",Ui,[P(e("select",{"onUpdate:modelValue":f[4]||(f[4]=y=>b.item.video=y),onChange:f[5]||(f[5]=y=>b.item.videoId=b.item.video.id),class:"form-select",id:"videoId",disabled:b.item.packageConfigurations.length>0},[(t(!0),s(B,null,j(b.lookups.videos,y=>(t(),s("option",{value:y},v(y.name),9,Ai))),256))],40,Oi),[[ve,b.item.video]]),f[10]||(f[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",Di,[(t(!0),s(B,null,j(o(W).item.videoId.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):x("",!0)])])]),f[17]||(f[17]=e("hr",null,null,-1)),b.item.videoId?(t(),s("div",Hi,[e("div",Ei,[e("fieldset",null,[e("legend",null,[f[12]||(f[12]=L(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Li,f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):x("",!0)])]),e("button",{onClick:A,class:"btn btn-outline-primary"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Package Configuration ")]))]),e("div",Bi,[e("table",qi,[f[16]||(f[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(b.item.packageConfigurations,(y,C)=>(t(),s("tr",null,[e("td",null,v(C+1),1),e("td",null,[e("div",Ni,[P(e("input",{"onUpdate:modelValue":J=>y.path=J,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Ri),[[F,y.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[C].path,J=>(t(),s("div",{key:J,class:"d-block invalid-feedback"},v(J.$message),1))),128)):x("",!0)]),e("td",null,[e("div",null,[P(e("select",{"onUpdate:modelValue":J=>y.sourceGroupId=J,class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,j(b.lookups.sourceGroups,J=>(t(),s("option",{value:J.id},v(J.name),9,Fi))),256))],8,zi),[[ve,y.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[C].path,J=>(t(),s("div",{key:J,class:"d-block invalid-feedback"},v(J.$message),1))),128)):x("",!0)])]),e("td",null,[P(e("select",{"onUpdate:modelValue":J=>y.type=J,class:"form-select",id:"type"},f[14]||(f[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,ji),[[ve,y.type]])]),e("td",null,[e("button",{onClick:J=>a(C),class:"btn btn-outline-warning"},f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gi)])]))),256))])])])])):x("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Wi={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ki(r,u,$,k,g,R){const S=X("Page");return t(),ue(S,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const Ji=Te(Wi,[["render",Ki]]),Qi={class:"d-flex justify-content-end"},Xi={key:0},Zi={class:"ms-1"},ed={class:"input-group"},td={class:"table-responsive"},sd={class:"table table-hover mb-0"},od=["textContent"],ad={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ld={class:"small"},nd="/api/v1/vodsources/search",rd={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,closeWithReturnUrl:b,generateReturnUrl:M,security:w,filter:W,initializeFilter:K,getQuery:i,saveQuery:m,search:V,getRowNumber:l,setSelected:A,isSelected:a}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${$==null?void 0:$.userId}/vod-sources/search`,baseUrl:nd,filter:{updateUrl:!0}});return de(async()=>{K(),await V()}),(U,f)=>{const d=X("router-link"),p=X("PageHeader"),c=X("m-pagination"),y=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(p,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(g)},{default:O(()=>[e("div",Qi,[o(w).isAdministrator?(t(),s("div",Xi,[D(d,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):x("",!0),D(d,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>f[4]||(f[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zi,[e("div",ed,[P(e("input",{"onUpdate:modelValue":f[0]||(f[0]=C=>o(W).query.criteria=C),onKeyup:f[1]||(f[1]=Ae(C=>o(V)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:f[2]||(f[2]=C=>o(V)(1))},f[5]||(f[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(y,{errorMessage:o(N)},{default:O(()=>[e("div",td,[e("table",sd,[f[6]||(f[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(W).items,(C,J)=>(t(),s("tr",{key:C.movieId},[e("td",{textContent:v(o(l)(J)),class:"text-center"},null,8,od),e("td",null,[D(d,{to:`${r.urlView}/${C.vodSourceId}`,class:"d-inline-block text-truncate"},{default:O(()=>[C.arn?(t(),s("span",ad)):x("",!0),L(v(C.name),1)]),_:2},1032,["to"])]),e("td",null,[D(d,{to:`${r.urlViewVideo}/${encodeURIComponent(C.video.videoId)}/${o(M)()}`},{default:O(()=>[L(v(C.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",ld,"Duration: "+v(o(Q).moment.utc(C.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[_e,o(W).items.length>0]])])]),D(c,{filter:o(W),search:o(V),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},id=["id"],dd={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ud={class:"modal-content"},cd={class:"modal-header"},md={class:"modal-title"},fd={class:"modal-body"},pd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vd=["innerHTML"],gd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bd={class:"container"},yd={class:"col"},$d={class:"form-floating mb-2"},wd=["value"],hd={key:0,class:"d-block invalid-feedback"},kd={class:"col"},_d={class:"form-floating mb-2"},Sd={key:0,class:"d-block invalid-feedback"},Td={class:"col"},Md={class:"form-floating mb-2"},Id={key:0,class:"d-block invalid-feedback"},Cd={class:"modal-footer"},xd=["disabled"],Pd={__name:"_addPackageConfiguration",emits:["refresh"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=$;ie();const K=ie("modalAddChannelOutput"),i=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),m={item:{sourceGroupId:{required:Z.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("VOD Source is required.",te),$autoDirty:!0,$lazy:!0},path:{required:Z.withMessage("Path is required.",te),$autoDirty:!0,$lazy:!0},type:{required:Z.withMessage("Type is required.",te),$autoDirty:!0,$lazy:!0}}},V=we(m,i);de(async()=>{V.value.$reset()});const l=async()=>{await A()},A=async()=>{try{await z.get("/api/v1/sourceGroups/lookup/").then(p=>{i.lookups.sourceGroups=p.data,i.lookups.sourceGroups.length===1&&(i.item.sourceGroupId=i.lookups.sourceGroups[0].id)})}catch(d){E.value=q.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},a=async d=>{const p=i;Y.value.clear(),E.value="",p.lookups={sourceGroups:[]},p.item={sourceGroupId:null,vodSourceId:d,path:null,type:null},await l(),V.value.$reset();var c=document.getElementById(K.value),y=he.getOrCreateInstance(c);y.show()},U=async()=>{var d=document.getElementById(K.value),p=he.getOrCreateInstance(d);p.hide(),W("refresh")},f=async()=>{const d=i;if(R.value)return;const p=await V.value.$validate();debugger;if(!p){window.scrollTo(0,0);return}try{R.value=!0,E.value="";const c=d.item;await z.post("/api/v1/vodSources/package-configurations/",c).then(y=>{b.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await U()}catch(c){E.value=q.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{R.value=!1}};return u({open:a,close:U}),(d,p)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",dd,[e("div",ud,[e("div",cd,[e("h5",md,[p[5]||(p[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:p[0]||(p[0]=c=>U()),"aria-label":"Close"})]),e("div",fd,[o(E)?(t(),s("div",pd,[p[6]||(p[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,vd)])):x("",!0),o(Y).size>0?(t(),s("div",gd,[p[7]||(p[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),c=>(t(),s("li",null,v(c),1))),256))])])):x("",!0),e("div",bd,[e("div",yd,[e("div",$d,[P(e("select",{"onUpdate:modelValue":p[1]||(p[1]=c=>i.item.sourceGroupId=c),class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,j(i.lookups.sourceGroups,c=>(t(),s("option",{value:c.id},v(c.name),9,wd))),256))],512),[[ve,i.item.sourceGroupId]]),p[8]||(p[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(V).item.sourceGroupId.$error?(t(),s("div",hd,[(t(!0),s(B,null,j(o(V).item.sourceGroupId.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):x("",!0)])]),e("div",kd,[e("div",_d,[P(e("select",{"onUpdate:modelValue":p[2]||(p[2]=c=>i.item.type=c),class:"form-select",id:"type"},p[9]||(p[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ve,i.item.type]]),p[10]||(p[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(V).item.type.$error?(t(),s("div",Sd,[(t(!0),s(B,null,j(o(V).item.type.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):x("",!0)])]),e("div",Td,[e("div",Md,[P(e("input",{"onUpdate:modelValue":p[3]||(p[3]=c=>i.item.path=c),class:"form-control",id:"path"},null,512),[[F,i.item.path]]),p[11]||(p[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(V).item.path.$error?(t(),s("div",Id,[(t(!0),s(B,null,j(o(V).item.path.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):x("",!0)])])])]),e("div",Cd,[e("button",{disabled:o(V).$dirty&&o(V).$invalid,onClick:p[4]||(p[4]=c=>f()),class:"btn btn-primary",type:"button"},p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xd),p[13]||(p[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,id))}},Vd=["id"],Ud={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Od={class:"modal-content"},Ad={class:"modal-header"},Dd={class:"modal-title"},Hd={class:"modal-body"},Ed={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ld=["innerHTML"],Bd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qd={class:"container"},Nd={class:"col"},Rd={class:"form-floating mb-2"},zd={class:"col"},Fd={class:"form-floating mb-2"},jd={key:0,class:"d-block invalid-feedback"},Gd={class:"col"},Yd={class:"form-floating mb-2"},Wd={key:0,class:"d-block invalid-feedback"},Kd={class:"col"},Jd={class:"form-floating mb-2"},Qd={key:0,class:"d-block invalid-feedback"},Xd={class:"modal-footer"},Zd=["disabled"],eu={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=$,K=ie(),i=ie("modalAddPlaybackConfiguration"),m=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),V={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:Z.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:Z.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},l=we(V,m);de(async()=>{l.value.$reset()});const A=async(f,d)=>{K.value=f;const p=m;Y.value.clear(),E.value="";const c=d,y=c.lastIndexOf("/"),C=c.substring(0,y),J="ad_campaign_"+c.substring(y+1).replace(".","_");p.item={name:J,originalVideoContentSourceUrl:d,videoContentSourceUrl:C,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var H=document.getElementById(i.value),ne=he.getOrCreateInstance(H);ne.show()},a=async()=>{var f=document.getElementById(i.value),d=he.getOrCreateInstance(f);d.hide(),W("refresh")},U=async()=>{const f=m;if(R.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,E.value="";const p=f.item;p.vodSourceId=K.value,await z.post("/api/v1/playbackconfigurations/vodsource",p).then(c=>{b.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await a()}catch(p){E.value=q.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{R.value=!1}};return u({open:A,close:a}),(f,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ud,[e("div",Od,[e("div",Ad,[e("h5",Dd,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=p=>a()),"aria-label":"Close"})]),e("div",Hd,[o(E)?(t(),s("div",Ed,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Ld)])):x("",!0),o(Y).size>0?(t(),s("div",Bd,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),p=>(t(),s("li",null,v(p),1))),256))])])):x("",!0),e("div",qd,[e("div",Nd,[e("div",Rd,[P(e("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>m.item.originalVideoContentSourceUrl=p),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[F,m.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",zd,[e("div",Fd,[P(e("input",{"onUpdate:modelValue":d[2]||(d[2]=p=>m.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,m.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",jd,[(t(!0),s(B,null,j(o(l).item.name.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):x("",!0)])]),e("div",Gd,[e("div",Yd,[P(e("input",{"onUpdate:modelValue":d[3]||(d[3]=p=>m.item.videoContentSourceUrl=p),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[F,m.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",Wd,[(t(!0),s(B,null,j(o(l).item.videoContentSourceUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):x("",!0)])]),e("div",Kd,[e("div",Jd,[P(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=p=>m.item.adDecisionServerUrl=p),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[F,m.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",Qd,[(t(!0),s(B,null,j(o(l).item.adDecisionServerUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):x("",!0)])])])]),e("div",Xd,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:d[5]||(d[5]=p=>U()),class:"btn btn-primary",type:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zd),d[15]||(d[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vd))}},tu={class:"d-flex flex-row justify-content-end"},su={key:0},ou={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},au={class:"nav-item",role:"presentation"},lu={class:"nav-item",role:"presentation"},nu={class:"nav-item",role:"presentation"},ru={class:"nav-item",role:"presentation"},iu={class:"nav-item",role:"presentation"},du={class:"nav-item",role:"presentation"},uu={class:"tab-content",id:"myTabContent"},cu={class:"mt-2"},mu={class:"col"},fu={class:"form-floating mb-2"},pu={key:0,class:"table-responsive border mt-2"},vu={class:"table mb-0"},gu={class:"row"},bu={class:"col-sm-9"},yu={key:0,class:"fas fa-fw fa-check-circle text-success"},$u={class:"col-sm-9"},wu={class:"col-sm-9"},hu={class:"text-break border p-2"},ku={class:"col-sm-9"},_u={class:"text-break border p-2"},Su={class:"col-sm-9"},Tu={class:"text-break border p-2"},Mu={class:"d-flex flex-row"},Iu=["onClick"],Cu=["onClick"],xu=["onClick"],Pu={class:"mt-2"},Vu={class:"row row-cols-sm-2"},Uu={class:"col"},Ou={class:"form-floating mb-2"},Au={class:"col"},Du={class:"form-floating mb-2"},Hu={class:"row row-cols-sm-2"},Eu={class:"col"},Lu={class:"form-floating mb-2"},Bu={class:"col"},qu={class:"input-group mb-2"},Nu={class:"form-floating"},Ru={class:"row row-cols-sm-2"},zu={class:"col"},Fu={class:"form-floating mb-2"},ju={class:"col"},Gu={class:"input-group mb-2"},Yu={class:"form-floating"},Wu={class:"row row-cols-sm-2"},Ku={class:"col"},Ju={class:"form-floating mb-2"},Qu={class:"col"},Xu={class:"input-group mb-2"},Zu={class:"form-floating"},ec={class:"mt-2"},tc={class:"mt-2 text-end"},sc={class:"table-responsive border mt-2"},oc={class:"table table-hover mb-0 caption-top"},ac={class:"text-end"},lc=["onClick"],nc={class:"mt-2"},rc={class:"text-end"},ic={class:"mt-1"},dc=["id"],uc={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null}),m=ie();ie(null);const V=ie();de(async()=>{await U(),m.value=z.getPageTab("vodSource")||"information-tab"});const l=T=>{z.setPageTab("vodSource",T),m.value=T},A=T=>T!==m.value?"":"active",a=T=>T!==m.value?"":"show active",U=async()=>{const T=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const I=`/api/v1/vodsources/${u.id}/`;await Q.get(I).then(ae=>{T.item=ae.data;const ee=T.item,oe=z.moment.utc(T.item.video.durationInMillis).format("HH:mm:ss");ee.video.duration=oe;const ge=ee.video.hlsPath,Me=ge.substring(ge.lastIndexOf("/")+1)})}catch(I){h.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{g.value=!1}},f=async()=>{await U()},d=()=>{V.value.open(u.id)},p=T=>{},c=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!g.value){h.value=null;try{g.value=!0,await Q.post(`/api/v1/vodsources/${u.id}/publish/`).then(I=>{q.success("Publish VOD","VOD was published.",{async onClose(){}})}),g.value=!1,await f()}catch(I){h.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{g.value=!1}}},y=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/vodsources/${u.id}/unpublish/`).then(I=>{q.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),g.value=!1,await f()}catch(I){h.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{g.value=!1}}},C=async T=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!g.value){h.value=null;try{g.value=!0,await Q.post(`/api/v1/playbackconfigurations/${T}/vodsource/publish/`).then(ae=>{q.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),g.value=!1,await f()}catch(ae){h.value=z.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},J=async T=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/playbackconfigurations/${T}/vodsource/unpublish/`).then(ae=>{q.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),g.value=!1,await f()}catch(ae){h.value=z.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},H=async T=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/vodSources/package-configurations/${T}/`).then(ae=>{q.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),g.value=!1,await f()}catch(ae){h.value=z.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},ne=async T=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/playbackconfigurations/${T}/vodsource/`).then(ae=>{q.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),g.value=!1,await f()}catch(ae){h.value=z.getErrorMessageAsHtml(ae),window.scrollTo(0,0)}finally{g.value=!1}}},G=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const I=`video-${i.item.vodSourceId}`;var T=document.getElementById(I);const ae=i.item.video.hlsBaseUrl+i.item.video.hlsPath;n(T,ae),q.success("View VOD Source Stream","VOD Source stream started.")}},n=(T,I)=>{var ae=new Hls;ae.on(Hls.Events.MEDIA_ATTACHED,function(){console.log("video and hls.js are now bound together !")}),ae.on(Hls.Events.MANIFEST_PARSED,function(ee,oe){console.log("manifest loaded, found "+oe.levels.length+" quality level"),T.play()}),ae.on(Hls.Events.ERROR,function(ee,oe){if(oe.fatal)switch(oe.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),ae.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",oe);break;default:ae.destroy();break}}),ae.loadSource(I),ae.attachMedia(T)};return(T,I)=>{const ae=X("PageHeader"),ee=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(ae,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",tu,[i.item?(t(),s(B,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:I[0]||(I[0]=oe=>y()),class:"ms-1 btn btn-danger"},I[23]||(I[23]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:I[1]||(I[1]=oe=>c()),class:"ms-1 btn btn-primary"},I[24]||(I[24]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):x("",!0),e("button",{onClick:I[2]||(I[2]=oe=>f()),class:"ms-2 btn btn-secondary"},I[25]||(I[25]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:I[3]||(I[3]=oe=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},I[26]||(I[26]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(ee,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",su,[e("div",null,[e("ul",ou,[e("li",au,[e("button",{onClick:I[4]||(I[4]=oe=>l("information-tab")),class:le([A("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",lu,[e("button",{onClick:I[5]||(I[5]=oe=>l("packageConfigurations-tab")),class:le([A("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",nu,[e("button",{onClick:I[6]||(I[6]=oe=>l("viewStream-tab")),class:le([A("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View Stream ",2)]),e("li",ru,[e("button",{onClick:I[7]||(I[7]=oe=>l("channels-tab")),class:le([A("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},I[27]||(I[27]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),L("Channels ")]),2)]),e("li",iu,[e("button",{onClick:I[8]||(I[8]=oe=>l("programs-tab")),class:le([A("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},I[28]||(I[28]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),L("Programs ")]),2)]),e("li",du,[e("button",{onClick:I[9]||(I[9]=oe=>l("programTemplates-tab")),class:le([A("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},I[29]||(I[29]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),L("Program Templates ")]),2)])]),e("div",uu,[e("div",{class:le([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",cu,[e("div",mu,[e("div",fu,[P(e("input",{"onUpdate:modelValue":I[10]||(I[10]=oe=>i.item.name=oe),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.name]]),I[30]||(I[30]=e("label",{for:"name"},"Name",-1))])]),i.item.playbackConfigurations?(t(),s("div",pu,[I[40]||(I[40]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),e("table",vu,[I[39]||(I[39]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.playbackConfigurations,(oe,ge)=>(t(),s("tr",{key:oe.playbackConfigurationId},[e("td",null,v(ge+1),1),e("td",null,[e("dl",gu,[I[33]||(I[33]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",bu,[oe.arn?(t(),s("span",yu)):x("",!0),L(v(oe.name),1)]),I[34]||(I[34]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",$u,v(oe.videoContentSourceUrl),1),I[35]||(I[35]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",wu,[e("div",hu,v(oe.adDecisionServerUrl),1)]),i.item.video.dashPath&&oe.dashConfigurationManifestEndpointPrefix?(t(),s(B,{key:0},[I[31]||(I[31]=e("dt",{class:"col-sm-3"},[e("div",{class:"d-flex flex-row justify-content-between"},[e("div",null," DASH Endpoint ")])],-1)),e("dd",ku,[e("div",_u,v(oe.dashConfigurationManifestEndpointPrefix),1)])],64)):x("",!0),i.item.video.hlsPath&&oe.hlsConfigurationManifestEndpointPrefix?(t(),s(B,{key:1},[I[32]||(I[32]=e("dt",{class:"col-sm-3"},[e("div",{class:"d-flex flex-row justify-content-between"},[e("div",null," HLS Endpoint ")])],-1)),e("dd",Su,[e("div",Tu,v(oe.hlsConfigurationManifestEndpointPrefix),1)])],64)):x("",!0)])]),e("td",null,[e("div",Mu,[oe.arn?(t(),s("button",{key:0,onClick:Me=>J(oe.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},I[36]||(I[36]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,Iu)):(t(),s("button",{key:1,onClick:Me=>C(oe.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},I[37]||(I[37]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Cu)),oe.arn?x("",!0):(t(),s("button",{key:2,onClick:Me=>ne(oe.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},I[38]||(I[38]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,xu))])])]))),128))]),_:1},512),[[_e,i.item.playbackConfigurations.length>0]])])])):x("",!0),e("div",Pu,[I[50]||(I[50]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Vu,[e("div",Uu,[e("div",Ou,[P(e("input",{"onUpdate:modelValue":I[11]||(I[11]=oe=>i.item.video.title=oe),type:"text",class:"form-control",id:"title",readonly:""},null,512),[[F,i.item.video.title]]),I[41]||(I[41]=e("label",{for:"title"},"Title",-1))])]),e("div",Au,[e("div",Du,[P(e("input",{"onUpdate:modelValue":I[12]||(I[12]=oe=>i.item.video.duration=oe),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[F,i.item.video.duration]]),I[42]||(I[42]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Hu,[e("div",Eu,[e("div",Lu,[P(e("input",{"onUpdate:modelValue":I[13]||(I[13]=oe=>i.item.video.rawBaseUrl=oe),class:"form-control",id:"rawBaseUrl",readonly:""},null,512),[[F,i.item.video.rawBaseUrl]]),I[43]||(I[43]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Bu,[e("div",qu,[e("div",Nu,[P(e("input",{"onUpdate:modelValue":I[14]||(I[14]=oe=>i.item.video.rawPath=oe),class:"form-control",id:"rawPath",readonly:""},null,512),[[F,i.item.video.rawPath]]),I[44]||(I[44]=e("label",{for:"rawPath"},"Raw Path",-1))])])])]),e("div",Ru,[e("div",zu,[e("div",Fu,[P(e("input",{"onUpdate:modelValue":I[15]||(I[15]=oe=>i.item.video.hlsBaseUrl=oe),class:"form-control",id:"hlsBaseUrl",readonly:""},null,512),[[F,i.item.video.hlsBaseUrl]]),I[45]||(I[45]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",ju,[e("div",Gu,[e("div",Yu,[P(e("input",{"onUpdate:modelValue":I[16]||(I[16]=oe=>i.item.video.hlsPath=oe),class:"form-control",id:"hlsPath",readonly:""},null,512),[[F,i.item.video.hlsPath]]),I[46]||(I[46]=e("label",{for:"hlsPath"},"HLS Path",-1))])])])]),e("div",Wu,[e("div",Ku,[e("div",Ju,[P(e("input",{"onUpdate:modelValue":I[17]||(I[17]=oe=>i.item.video.dashBaseUrl=oe),class:"form-control",id:"dashBaseUrl",readonly:""},null,512),[[F,i.item.video.dashBaseUrl]]),I[47]||(I[47]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Qu,[e("div",Xu,[e("div",Zu,[P(e("input",{"onUpdate:modelValue":I[18]||(I[18]=oe=>i.item.video.dashPath=oe),class:"form-control",id:"dashPath",readonly:""},null,512),[[F,i.item.video.dashPath]]),I[48]||(I[48]=e("label",{for:"dashPath"},"DASH Path",-1))]),i.item.video.dashPath?(t(),s("button",{key:0,onClick:I[19]||(I[19]=oe=>p()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},I[49]||(I[49]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Playback Configuration ")]))):x("",!0)])])])])])])],2),e("div",{class:le([a("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",ec,[e("div",tc,[e("button",{onClick:I[20]||(I[20]=oe=>d()),class:"btn btn-primary"},I[51]||(I[51]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Add ")]))]),e("div",sc,[e("table",oc,[I[53]||(I[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.packageConfigurations,(oe,ge)=>(t(),s("tr",{key:oe.packageConfigurationId},[e("td",null,v(ge+1),1),e("td",null,v(oe.path),1),e("td",null,v(oe.sourceGroup.name),1),e("td",null,v(oe.type),1),e("td",ac,[e("button",{onClick:Me=>H(oe.packageConfigurationId),class:"btn btn-outline-warning"},I[52]||(I[52]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,lc)])]))),128))]),_:1},512),[[_e,i.item.packageConfigurations.length>0]])])])])],2),e("div",{class:le([a("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",nc,[e("div",rc,[e("button",{onClick:I[21]||(I[21]=oe=>G()),class:"btn btn-primary"},I[54]||(I[54]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),L("View ")]))]),e("div",ic,[e("video",{id:`video-${i.item.vodSourceId}`,class:"card-img-top object-fit-contain border"},null,8,dc)])])],2),e("div",{class:le([a("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},I[55]||(I[55]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:le([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},I[56]||(I[56]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:le([a("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},I[57]||(I[57]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):x("",!0)]),_:1},8,["errorMessage"]),D(Pd,{ref_key:"modalAddPackageConfiguration",ref:V,onRefresh:f},null,512),D(eu,{ref:"modalAddPlaybackConfiguration",onRefresh:I[22]||(I[22]=oe=>f())},null,512)])]),_:1})}}},cc={class:"d-flex justify-content-end"},mc=["disabled"],fc={class:"container"},pc={class:"row row-cols-sm-2"},vc={class:"col"},gc={class:"form-floating mb-2"},bc=["value"],yc={key:0,class:"d-block invalid-feedback"},$c={class:"col"},wc={class:"form-floating mb-2"},hc=["disabled"],kc=["value"],_c={key:0,class:"d-block invalid-feedback"},Sc={class:"row row-cols-1 row-cols-sm-3"},Tc={class:"col"},Mc={class:"form-floating mb-2"},Ic={key:0,class:"d-block invalid-feedback"},Cc={class:"col"},xc={class:"form-floating"},Pc={key:0},Vc={key:1},Uc={key:2},Oc={key:3,class:"d-block invalid-feedback"},Ac={class:"col"},Dc={class:"form-floating"},Hc={key:0},Ec={key:1},Lc={key:2,class:"d-block invalid-feedback"},Bc={class:"row row-cols-1 row-cols-sm-3"},qc={class:"col"},Nc={class:"form-floating mb-2"},Rc={class:"col"},zc={class:"form-floating mb-2"},Fc={class:"col"},jc={class:"form-floating mb-2"},Gc={key:0,class:"mt-3"},Yc={class:"table-responsive border mt-1"},Wc={class:"table table-borderless table-sm mb-0"},Kc=["onUpdate:modelValue","onChange"],Jc={key:0},Qc=["onUpdate:modelValue","onChange"],Xc={class:"text-end"},Zc=["onClick"],em={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),q=r,b=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),M={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0}}},w=we(M,b),W=Ce(()=>{const G=h.moment;if(b.startOffsetTime&&b.startOffsetTime!=="00:00:00"&&i(b.startOffsetTime)){const n=G().startOf("day"),T=n.format("YYYY-MM-DD ")+b.startOffsetTime,ae=G(T).subtract(n);return b.item.startOffsetMillis=ae.valueOf(),b.item.startOffsetMillis}return 0}),K=Ce(()=>{const G=h.moment;if(b.endOffsetTime&&b.endOffsetTime!=="00:00:00"&&i(b.endOffsetTime)){const n=G().startOf("day"),T=n.format("YYYY-MM-DD ")+b.endOffsetTime,ae=G(T).subtract(n);return b.item.endOffsetMillis=ae.valueOf(),b.item.endOffsetMillis}return 0}),i=G=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(G),m=Ce(()=>b.item.endOffsetMillis-b.item.startOffsetMillis),V=Ce(()=>h.moment.utc(m.value).format("HH:mm:ss")),l=Ce(()=>{const G=b.item.adBreaks;return G&&G.length>0?G.reduce((T,I,ae)=>T+I.durationInMillis,0):0}),A=Ce(()=>{const G=m.value+l.value;return h.moment.utc(G).format("HH:mm:ss")}),a=Ce(()=>h.moment.utc(l.value).format("HH:mm:ss"));de(async()=>{await U()});const U=async()=>{await f(),await c()},f=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(n=>{b.lookups.sourceLocations=n.data,b.item.sourceLocationId=b.lookups.sourceLocations[0].id}),b.item.sourceLocationId&&await d(b.item.sourceLocationId)}catch(G){S.value=h.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},d=async G=>{try{const n=`/api/v1/vodSources/lookup/source-location/${G}/`;await N.get(n).then(T=>{b.lookups.vodSources=T.data})}catch(n){S.value=h.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},p=async()=>{const G=b.selected.vodSource;b.item.vodSourceId=G.id,b.endOffsetTime=h.moment.utc(G.durationInMillis).format("HH:mm:ss")},c=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(n=>{b.lookups.adBreakSourceLocations=n.data})}catch(G){S.value=h.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},y=()=>{const G={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};b.item.adBreaks.push(G)},C=G=>{b.item.adBreaks.splice(G,1)},J=G=>{const n=h.moment,T=n().startOf("day"),I=T.format("YYYY-MM-DD ")+G.offsetTime,ee=n(I).subtract(T);G.offsetMillis=ee.valueOf()},H=G=>{const n=h.moment,T=n().startOf("day"),I=T.format("YYYY-MM-DD ")+G.durationTime,ee=n(I).subtract(T);G.durationInMillis=ee.valueOf()},ne=async()=>{const G=b;if(k.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const T=h.clone(G.item);debugger;await N.post("/api/v1/programtemplates/",T).then(I=>{E.success("Add Program Template","Program template added.",{onClose:async()=>{const ae=`${q.urlView}/${I.data}`;await Y.push(ae)}})})}catch(T){S.value=h.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{k.value=!1}};return(G,n)=>{const T=X("router-link"),I=X("PageHeader"),ae=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(I,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",cc,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:n[0]||(n[0]=ee=>ne()),class:"btn btn-primary"},n[11]||(n[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mc),D(T,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(ae,{errorMessage:o(S),vuelidate:o(w)},{default:O(()=>[e("div",null,[e("div",fc,[e("div",pc,[e("div",vc,[e("div",gc,[P(e("select",{"onUpdate:modelValue":n[1]||(n[1]=ee=>b.item.sourceLocationId=ee),onChange:n[2]||(n[2]=ee=>d(b.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(b.lookups.sourceLocations,ee=>(t(),s("option",{value:ee.id},v(ee.name),9,bc))),256))],544),[[ve,b.item.sourceLocationId]]),n[13]||(n[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(w).item.sourceLocationId.$error?(t(),s("div",yc,[(t(!0),s(B,null,j(o(w).item.sourceLocationId.$errors,ee=>(t(),s("div",{key:ee.$uid},v(ee.$message),1))),128))])):x("",!0)])]),e("div",$c,[e("div",wc,[P(e("select",{"onUpdate:modelValue":n[3]||(n[3]=ee=>b.selected.vodSource=ee),onChange:n[4]||(n[4]=ee=>p()),class:"form-select",id:"vodSourceId",disabled:b.item.adBreaks.length>0},[(t(!0),s(B,null,j(b.lookups.vodSources,ee=>(t(),s("option",{value:ee},v(o(h).moment.utc(ee.durationInMillis).format("HH:mm:ss"))+" - "+v(ee.name),9,kc))),256))],40,hc),[[ve,b.selected.vodSource]]),n[14]||(n[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(w).item.vodSourceId.$error?(t(),s("div",_c,[(t(!0),s(B,null,j(o(w).item.vodSourceId.$errors,ee=>(t(),s("div",{key:ee.$uid},v(ee.$message),1))),128))])):x("",!0)])])]),e("div",Sc,[e("div",Tc,[e("div",Mc,[P(e("input",{"onUpdate:modelValue":n[5]||(n[5]=ee=>b.item.name=ee),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,b.item.name]]),n[15]||(n[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(w).item.name.$error?(t(),s("div",Ic,[(t(!0),s(B,null,j(o(w).item.name.$errors,ee=>(t(),s("div",{key:ee.$uid},v(ee.$message),1))),128))])):x("",!0)])]),e("div",Cc,[e("div",xc,[P(e("input",{"onUpdate:modelValue":n[6]||(n[6]=ee=>b.startOffsetTime=ee),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[F,b.startOffsetTime]]),n[16]||(n[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Pc,n[17]||(n[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):x("",!0),W.value>K.value&&K.value>0?(t(),s("div",Vc,n[18]||(n[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):x("",!0),b.selected.vodSource&&W.value>=b.selected.vodSource.durationInMillis?(t(),s("div",Uc,n[19]||(n[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):x("",!0),o(w).item.startOffsetMillis.$error?(t(),s("div",Oc,[(t(!0),s(B,null,j(o(w).item.startOffsetMillis.$errors,ee=>(t(),s("div",{key:ee.$uid},v(ee.$message),1))),128))])):x("",!0)]),e("div",Ac,[e("div",Dc,[P(e("input",{"onUpdate:modelValue":n[7]||(n[7]=ee=>b.endOffsetTime=ee),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[F,b.endOffsetTime]]),n[20]||(n[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Hc,n[21]||(n[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):x("",!0),b.selected.vodSource&&K.value>b.selected.vodSource.durationInMillis?(t(),s("div",Ec,n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):x("",!0),o(w).item.endOffsetMillis.$error?(t(),s("div",Lc,[(t(!0),s(B,null,j(o(w).item.endOffsetMillis.$errors,ee=>(t(),s("div",{key:ee.$uid},v(ee.$message),1))),128))])):x("",!0)])]),n[32]||(n[32]=e("h5",null," Duration ",-1)),e("div",Bc,[e("div",qc,[e("div",Nc,[P(e("input",{"onUpdate:modelValue":n[8]||(n[8]=ee=>V.value=ee),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[F,V.value]]),n[23]||(n[23]=e("label",{for:"durationTime"},"Clip",-1))])]),e("div",Rc,[e("div",zc,[P(e("input",{"onUpdate:modelValue":n[9]||(n[9]=ee=>a.value=ee),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[F,a.value]]),n[24]||(n[24]=e("label",{for:"totalAdBreakDurationTime"},"Ad Breaks",-1))])]),e("div",Fc,[e("div",jc,[P(e("input",{"onUpdate:modelValue":n[10]||(n[10]=ee=>A.value=ee),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[F,A.value]]),n[25]||(n[25]=e("label",{for:"totalProgramDuration"},"Program Total Duration",-1))])])]),b.item.vodSourceId?(t(),s("div",Gc,[e("div",{class:"d-flex flex-row justify-content-between"},[n[27]||(n[27]=e("div",null,[e("h5",null," AdBreak ")],-1)),e("button",{onClick:y,class:"btn btn-outline-primary btn-sm"},n[26]||(n[26]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Yc,[e("table",Wc,[n[30]||(n[30]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(b.item.adBreaks,(ee,oe)=>(t(),s("tr",null,[e("td",null,v(oe+1),1),e("td",null,[P(e("input",{"onUpdate:modelValue":ge=>ee.offsetTime=ge,onChange:ge=>J(ee),type:"time",step:"1",class:"form-control"},null,40,Kc),[[F,ee.offsetTime]]),ee.offsetMillis>=b.selected.vodSource.durationInMillis?(t(),s("div",Jc,n[28]||(n[28]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):x("",!0)]),e("td",null,[P(e("input",{"onUpdate:modelValue":ge=>ee.durationTime=ge,onChange:ge=>H(ee),type:"time",step:"1",class:"form-control"},null,40,Qc),[[F,ee.durationTime]])]),e("td",Xc,[e("button",{onClick:ge=>C(oe),class:"btn btn-outline-warning"},n[29]||(n[29]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Zc)])]))),256))])]),n[31]||(n[31]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),L(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):x("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},tm={class:"d-flex justify-content-end"},sm=["disabled"],om={class:"container"},am={class:"row row-cols-1"},lm={class:"col"},nm={class:"form-floating mb-2"},rm={key:0,class:"d-block invalid-feedback"},im={class:"row row-cols-sm-2"},dm={class:"col"},um={class:"form-floating mb-2"},cm=["value"],mm={key:0,class:"d-block invalid-feedback"},fm={class:"col"},pm={class:"form-floating mb-2"},vm=["value"],gm={key:0,class:"d-block invalid-feedback"},bm={key:0,class:"row row-cols-1 row-cols-sm-2"},ym={class:"col"},$m={class:"form-floating"},wm={key:0},hm={key:1},km={key:2},_m={key:3,class:"d-block invalid-feedback"},Sm={class:"col"},Tm={class:"form-floating"},Mm={key:0},Im={key:1},Cm={key:2,class:"d-block invalid-feedback"},xm={key:1,class:"mt-2"},Pm={class:"table-responsive border mt-1"},Vm={class:"table"},Um=["onUpdate:modelValue","onChange"],Om={key:0},Am=["onUpdate:modelValue","onChange"],Dm=["onClick"],Hm={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,closeWithReturnUrl:z,security:q}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),b=r,M=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),w={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0}}},W=we(w,M),K=Ce(()=>{const J=h.moment;if(M.startOffsetTime&&M.startOffsetTime!=="00:00:00"&&m(M.startOffsetTime)){const H=J().startOf("day"),ne=H.format("YYYY-MM-DD ")+M.startOffsetTime,n=J(ne).subtract(H);return M.item.startOffsetMillis=n.valueOf(),M.item.startOffsetMillis}return 0}),i=Ce(()=>{const J=h.moment;if(M.endOffsetTime&&M.endOffsetTime!=="00:00:00"&&m(M.endOffsetTime)){const H=J().startOf("day"),ne=H.format("YYYY-MM-DD ")+M.endOffsetTime,n=J(ne).subtract(H);return M.item.endOffsetMillis=n.valueOf(),M.item.endOffsetMillis}return 0}),m=J=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(J);de(async()=>{await V()});const V=async()=>{await l(),await A()},l=async()=>{try{const J=`/api/v1/programtemplates/${b.id}/`;await N.get(J).then(H=>{M.item=H.data,M.startOffsetTime=h.moment.utc(M.item.startOffsetMillis).format("HH:mm:ss"),M.endOffsetTime=h.moment.utc(M.item.endOffsetMillis).format("HH:mm:ss"),M.item.adBreaks.forEach(ne=>{ne.offsetTime=h.moment.utc(ne.offsetMillis).format("HH:mm:ss"),ne.durationTime=h.moment.utc(ne.durationInMillis).format("HH:mm:ss")})})}catch(J){S.value=h.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},A=async()=>{await a()},a=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(H=>{M.lookups.sourceLocations=H.data}),M.item.sourceLocationId&&await U(M.item.sourceLocationId)}catch(J){S.value=h.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},U=async J=>{try{const H=`/api/v1/vodSources/lookup/source-location/${J}/`;await N.get(H).then(G=>{M.lookups.vodSources=G.data});const ne=M.lookups.vodSources.find(G=>G.id==M.item.vodSourceId);M.selected.vodSource=ne,await f()}catch(H){S.value=h.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},f=async()=>{const J=M.selected.vodSource;M.item.vodSourceId=J.id,M.endOffsetTime=h.moment.utc(J.durationInMillis).format("HH:mm:ss")},d=()=>{const J={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};M.item.adBreaks.push(J)},p=J=>{M.item.adBreaks.splice(J,1)},c=J=>{const H=h.moment,ne=H().startOf("day"),G=ne.format("YYYY-MM-DD ")+J.offsetTime,T=H(G).subtract(ne);J.offsetMillis=T.valueOf()},y=J=>{const H=h.moment,ne=H().startOf("day"),G=ne.format("YYYY-MM-DD ")+J.durationTime,T=H(G).subtract(ne);J.durationInMillis=T.valueOf()},C=async()=>{const J=M;if(k.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const ne=h.clone(J.item);debugger;ne.startOffsetMillis=K.value,ne.endOffsetMillis=i.value,await N.put("/api/v1/programtemplates/",ne).then(G=>{E.success("Edit Program Template","Program template edit.",{onClose:async()=>{const n=`${b.urlView}/${b.id}`;await Y.push(n)}})})}catch(ne){S.value=h.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{k.value=!1}};return(J,H)=>{const ne=X("PageHeader"),G=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(ne,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",tm,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:H[0]||(H[0]=n=>C()),class:"btn btn-primary"},H[10]||(H[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,sm),e("button",{onClick:H[1]||(H[1]=n=>V()),class:"btn btn-secondary ms-2"},H[11]||(H[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:H[2]||(H[2]=n=>o(z)(b.urlMain)),class:"btn btn-secondary ms-1"},H[12]||(H[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(G,{errorMessage:o(S),vuelidate:o(W)},{default:O(()=>[e("div",null,[e("div",om,[e("div",am,[e("div",lm,[e("div",nm,[P(e("input",{"onUpdate:modelValue":H[3]||(H[3]=n=>M.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,M.item.name]]),H[13]||(H[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",rm,[(t(!0),s(B,null,j(o(W).item.name.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):x("",!0)])])]),e("div",im,[e("div",dm,[e("div",um,[P(e("select",{"onUpdate:modelValue":H[4]||(H[4]=n=>M.item.sourceLocationId=n),onChange:H[5]||(H[5]=n=>U(M.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(M.lookups.sourceLocations,n=>(t(),s("option",{value:n.id},v(n.name),9,cm))),256))],544),[[ve,M.item.sourceLocationId]]),H[14]||(H[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",mm,[(t(!0),s(B,null,j(o(W).item.sourceLocationId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):x("",!0)])]),e("div",fm,[e("div",pm,[P(e("select",{"onUpdate:modelValue":H[6]||(H[6]=n=>M.selected.vodSource=n),onChange:H[7]||(H[7]=n=>f()),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,j(M.lookups.vodSources,n=>(t(),s("option",{value:n},v(o(h).moment.utc(n.durationInMillis).format("HH:mm:ss"))+" - "+v(n.name),9,vm))),256))],544),[[ve,M.selected.vodSource]]),H[15]||(H[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",gm,[(t(!0),s(B,null,j(o(W).item.vodSourceId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):x("",!0)])])]),M.item.vodSourceId?(t(),s("div",bm,[e("div",ym,[e("div",$m,[P(e("input",{"onUpdate:modelValue":H[8]||(H[8]=n=>M.startOffsetTime=n),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[F,M.startOffsetTime]]),H[16]||(H[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",wm,H[17]||(H[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):x("",!0),K.value>i.value&&i.value>0?(t(),s("div",hm,H[18]||(H[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):x("",!0),M.selected.vodSource&&K.value>=M.selected.vodSource.durationInMillis?(t(),s("div",km,H[19]||(H[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):x("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",_m,[(t(!0),s(B,null,j(o(W).item.startOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):x("",!0)]),e("div",Sm,[e("div",Tm,[P(e("input",{"onUpdate:modelValue":H[9]||(H[9]=n=>M.endOffsetTime=n),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[F,M.endOffsetTime]]),H[20]||(H[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),i.value>0&&i.value<3e4?(t(),s("div",Mm,H[21]||(H[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):x("",!0),M.selected.vodSource&&i.value>M.selected.vodSource.durationInMillis?(t(),s("div",Im,H[22]||(H[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):x("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",Cm,[(t(!0),s(B,null,j(o(W).item.endOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):x("",!0)])])):x("",!0),M.selected.vodSource?(t(),s("div",xm,[e("div",{class:"d-flex flex-row justify-content-between"},[H[24]||(H[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:d,class:"btn btn-outline-primary"},H[23]||(H[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Ad Break ")]))]),e("div",Pm,[e("table",Vm,[H[28]||(H[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(M.item.adBreaks,(n,T)=>(t(),s("tr",null,[e("td",null,v(T+1),1),e("td",null,[P(e("input",{"onUpdate:modelValue":I=>n.offsetTime=I,onChange:I=>c(n),type:"time",step:"1",class:"form-control"},null,40,Um),[[F,n.offsetTime]]),n.offsetMillis>=M.selected.vodSource.durationInMillis?(t(),s("div",Om,H[25]||(H[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):x("",!0)]),e("td",null,[P(e("input",{"onUpdate:modelValue":I=>n.durationTime=I,onChange:I=>y(n),type:"time",step:"1",class:"form-control"},null,40,Am),[[F,n.durationTime]])]),H[27]||(H[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),L(" Source Location and Vod source will be defined in Program Instance. "),e("br"),L(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:I=>p(T),class:"btn btn-outline-warning"},H[26]||(H[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Dm)])]))),256))])])])])):x("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Em={class:"d-flex justify-content-end"},Lm={class:"ms-1"},Bm={class:"input-group"},qm={class:"table-responsive"},Nm={class:"table table-hover mb-0"},Rm=["textContent"],zm={key:0,class:"fas fa-fw fa-check-circle text-success"},Fm={class:"text-end"},jm={class:"border-top"},Gm="/api/v1/programTemplates/search",Ym={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,security:b,filter:M,initializeFilter:w,getQuery:W,saveQuery:K,search:i,getRowNumber:m,setSelected:V,isSelected:l}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${$==null?void 0:$.userId}/program-templates/search`,baseUrl:Gm,filter:{updateUrl:!0}});return de(async()=>{w(),await i()}),(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("m-pagination"),p=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(g)},{default:O(()=>[e("div",Em,[D(U,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Lm,[e("div",Bm,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>o(M).query.criteria=c),onKeyup:a[1]||(a[1]=Ae(c=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=c=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(N)},{default:O(()=>[e("div",qm,[e("table",Nm,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(M).items,(c,y)=>(t(),s("tr",{key:c.movieId},[e("td",{textContent:v(o(m)(y)),class:"text-center"},null,8,Rm),e("td",null,[D(U,{to:`${r.urlView}/${c.programTemplateId}`,class:"d-inline-block text-truncate"},{default:O(()=>[c.arn?(t(),s("span",zm)):x("",!0),L(" "+v(c.name),1)]),_:2},1032,["to"])]),e("td",Fm,v(o(Q).moment.utc(c.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[L(v(c.sourceLocation.name)+" ",1),e("div",jm,v(c.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,v(c.vodSource.name),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),D(d,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Wm={class:"d-flex flex-row justify-content-end"},Km={key:0},Jm={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Qm={class:"nav-item",role:"presentation"},Xm={class:"nav-item",role:"presentation"},Zm={class:"nav-item",role:"presentation"},ef={class:"tab-content",id:"myTabContent"},tf={class:"mt-2"},sf={class:"row row-cols-1 row-cols-sm-3"},of={class:"col"},af={class:"form-floating mb-2"},lf={class:"col"},nf={class:"form-floating mb-2"},rf={class:"col"},df={class:"form-floating mb-2"},uf={class:"row row-cols-1 row-cols-sm-3"},cf={class:"col"},mf={class:"form-floating mb-2"},ff={class:"col"},pf={class:"form-floating mb-2"},vf={class:"col"},gf={class:"form-floating mb-2"},bf={class:"row row-cols-1 row-cols-sm-2"},yf={class:"col-sm-4"},$f={class:"form-floating mb-2"},wf={class:"col-sm-8"},hf={class:"form-floating mb-2"},kf={class:"row mt-2"},_f={class:"col-1 col-sm-4"},Sf={class:""},Tf={class:"col"},Mf={class:"form-floating mb-2"},If={class:"col-1 col-sm-8"},Cf={class:"row row-cols-1 row-cols-sm-2"},xf={class:"col"},Pf={class:"form-floating mb-2"},Vf={class:"col"},Uf={class:"form-floating mb-2"},Of={class:"mt-2"},Af={class:"table-responsive"},Df={class:"table table-hover mb-0"},Hf={class:"text-center"},Ef={class:"mt-2"},Lf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null}),m=ie();de(async()=>{await a(),m.value=z.getPageTab("programTemplate")||"information-tab"});const V=f=>{z.setPageTab("programTemplate",f),m.value=f},l=f=>f!==m.value?"":"active",A=f=>f!==m.value?"":"show active",a=async()=>{const f=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const d=`/api/v1/programTemplates/${u.id}/`;await Q.get(d).then(p=>{f.item=p.data;const c=f.item;c.startOffsetTime=z.moment.utc(c.startOffsetMillis).format("HH:mm:ss"),c.endOffsetTime=z.moment.utc(c.endOffsetMillis).format("HH:mm:ss"),c.durationTime=z.moment.utc(c.durationInMillis).format("HH:mm:ss"),c.adBreaksDurationTime=z.moment.utc(c.adBreaksDurationInMillis).format("HH:mm:ss"),c.totalProgramTemplateDurationTime=z.moment.utc(c.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const y=c.vodSource.video,C=y.durationInMillis;y.durationInMillis=z.moment.utc(C).format("HH:mm:ss")})}catch(d){h.value=z.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{g.value=!1}},U=async()=>{await a()};return(f,d)=>{const p=X("router-link"),c=X("PageHeader"),y=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(c,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",Wm,[D(p,{to:`${r.urlEdit}/${r.id}/${o(w)()}`,class:"ms-2 btn btn-primary"},{default:O(()=>d[16]||(d[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:d[0]||(d[0]=C=>U()),class:"ms-2 btn btn-secondary"},d[17]||(d[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:d[1]||(d[1]=C=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},d[18]||(d[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(y,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",Km,[e("div",null,[e("ul",Jm,[e("li",Qm,[e("button",{onClick:d[2]||(d[2]=C=>V("information-tab")),class:le([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Xm,[e("button",{onClick:d[3]||(d[3]=C=>V("adBreaks-tab")),class:le([l("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Zm,[e("button",{onClick:d[4]||(d[4]=C=>V("programs-tab")),class:le([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",ef,[e("div",{class:le([A("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",tf,[e("div",sf,[e("div",of,[e("div",af,[P(e("input",{"onUpdate:modelValue":d[5]||(d[5]=C=>i.item.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.name]]),d[19]||(d[19]=e("label",{for:"name"},"Name",-1))])]),e("div",lf,[e("div",nf,[P(e("input",{"onUpdate:modelValue":d[6]||(d[6]=C=>i.item.startOffsetTime=C),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[F,i.item.startOffsetTime]]),d[20]||(d[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",rf,[e("div",df,[P(e("input",{"onUpdate:modelValue":d[7]||(d[7]=C=>i.item.endOffsetTime=C),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[F,i.item.endOffsetTime]]),d[21]||(d[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),d[33]||(d[33]=e("h5",null," Duration ",-1)),e("div",uf,[e("div",cf,[e("div",mf,[P(e("input",{"onUpdate:modelValue":d[8]||(d[8]=C=>i.item.durationTime=C),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[F,i.item.durationTime]]),d[22]||(d[22]=e("label",{for:"durationTime"},"Clip",-1))])]),e("div",ff,[e("div",pf,[P(e("input",{"onUpdate:modelValue":d[9]||(d[9]=C=>i.item.adBreaksDurationTime=C),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[F,i.item.adBreaksDurationTime]]),d[23]||(d[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks",-1))])]),e("div",vf,[e("div",gf,[P(e("input",{"onUpdate:modelValue":d[10]||(d[10]=C=>i.item.totalProgramTemplateDurationTime=C),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[F,i.item.totalProgramTemplateDurationTime]]),d[24]||(d[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",null,[d[27]||(d[27]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",bf,[e("div",yf,[e("div",$f,[P(e("input",{"onUpdate:modelValue":d[11]||(d[11]=C=>i.item.sourceLocation.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.sourceLocation.name]]),d[25]||(d[25]=e("label",{for:"name"},"Name",-1))])]),e("div",wf,[e("div",hf,[P(e("input",{"onUpdate:modelValue":d[12]||(d[12]=C=>i.item.sourceLocation.httpConfigurationBaseUrl=C),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[F,i.item.sourceLocation.httpConfigurationBaseUrl]]),d[26]||(d[26]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),e("div",kf,[e("div",_f,[d[29]||(d[29]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",Sf,[e("div",Tf,[e("div",Mf,[P(e("input",{"onUpdate:modelValue":d[13]||(d[13]=C=>i.item.vodSource.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.vodSource.name]]),d[28]||(d[28]=e("label",{for:"name"},"VOD Name",-1))])])])]),e("div",If,[d[32]||(d[32]=e("div",null,[e("h5",null,"Video")],-1)),e("div",Cf,[e("div",xf,[e("div",Pf,[P(e("input",{"onUpdate:modelValue":d[14]||(d[14]=C=>i.item.vodSource.video.title=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.vodSource.video.title]]),d[30]||(d[30]=e("label",{for:"name"},"Video Name",-1))])]),e("div",Vf,[e("div",Uf,[P(e("input",{"onUpdate:modelValue":d[15]||(d[15]=C=>i.item.vodSource.video.durationInMillis=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.vodSource.video.durationInMillis]]),d[31]||(d[31]=e("label",{for:"name"},"Video Duration",-1))])])])])])])],2),e("div",{class:le([A("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Of,[e("div",Af,[e("table",Df,[d[34]||(d[34]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.adBreaks,(C,J)=>(t(),s("tr",{key:C.programTemplateAdBreakId},[e("td",Hf,v(J+1),1),e("td",null,v(o(z).moment.utc(C.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(z).moment.utc(C.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[_e,i.item.adBreaks.length>0]])])])])],2),e("div",{class:le([A("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Ef,[e("pre",null,v(i.item.programs),1)])],2)])])])):x("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Bf={class:"d-flex justify-content-end"},qf=["disabled"],Nf={class:"row row-cols-1 row-cols-sm-3"},Rf={class:"col-sm-6"},zf={class:"form-floating mb-2"},Ff={key:0,class:"d-block invalid-feedback"},jf={class:"col-sm-3"},Gf={class:"form-floating mb-2"},Yf={key:0,class:"d-block invalid-feedback"},Wf={class:"col-sm-3"},Kf={class:"form-floating mb-2"},Jf={key:0,class:"d-block invalid-feedback"},Qf={class:"col"},Xf={class:"form-floating mb-2"},Zf={key:0,class:"d-block invalid-feedback"},ep={class:"row row-cols-1 row-cols-sm-2"},tp={class:"col"},sp={class:"form-floating mb-2"},op=["value"],ap={key:0,class:"d-block invalid-feedback"},lp={class:"col"},np={class:"form-floating mb-2"},rp=["value"],ip={key:0,class:"d-block invalid-feedback"},dp={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),q=r,b=fe({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),M={item:{name:{title:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},tier:{title:Z.withMessage("Tier is required.",te),$autoDirty:!0,$lazy:!0},playbackMode:{title:Z.withMessage("PlaybackMode is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:Z.withMessage("Filler Slate Source Location is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:Z.withMessage("Filler Slate Vod Source is required.",te),$autoDirty:!0,$lazy:!0},policy:{title:Z.withMessage("Policy is required.",te),$autoDirty:!0,$lazy:!0}}},w=we(M,b);de(async()=>{await W()});const W=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(A=>{b.lookups.sourceLocations=A.data,b.lookups.sourceLocations.length===1&&(b.item.fillerSlateSourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await i(b.item.fillerSlateSourceLocationId)}catch(l){S.value=h.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},K=async()=>{b.item.fillerSlateVodSourceId=null,await i(b.item.fillerSlateSourceLocationId)},i=async l=>{try{let A=`/api/v1/vodSources/lookup/source-location/${l}`;await N.get(A).then(a=>{b.lookups.vodSources=a.data})}catch(A){S.value=h.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},m=()=>{if(b.item.name){const l=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${b.item.name}"}]}`;b.item.policy=l}else b.item.policy=null},V=async()=>{const l=b;if(k.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const a=h.clone(l.item);await N.post("/api/v1/channels/",a).then(U=>{E.success("Add Channel","Channel added.",{onClose:async()=>{const f=`${q.urlView}/${U.data}`;await Y.push(f)}})})}catch(a){S.value=h.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}};return(l,A)=>{const a=X("router-link"),U=X("PageHeader"),f=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(U,{"page-icon":"fas fa-fw fa-tv",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",Bf,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:A[0]||(A[0]=d=>V()),class:"btn btn-primary"},A[9]||(A[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,qf),D(a,{to:q.urlMain,class:"btn btn-secondary ms-2"},{default:O(()=>A[10]||(A[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(f,{errorMessage:o(S),vuelidate:o(w)},{default:O(()=>[e("div",null,[e("div",Nf,[e("div",Rf,[e("div",zf,[P(e("input",{"onUpdate:modelValue":A[1]||(A[1]=d=>b.item.name=d),onChange:A[2]||(A[2]=d=>m()),id:"name",class:"form-control",placeholder:"name"},null,544),[[F,b.item.name]]),A[11]||(A[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(w).item.name.$error?(t(),s("div",Ff,[(t(!0),s(B,null,j(o(w).item.name.$errors,d=>(t(),s("div",{key:d.$uid},v(d.$message),1))),128))])):x("",!0)])]),e("div",jf,[e("div",Gf,[P(e("input",{"onUpdate:modelValue":A[3]||(A[3]=d=>b.item.tier=d),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[F,b.item.tier]]),A[12]||(A[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(w).item.tier.$error?(t(),s("div",Yf,[(t(!0),s(B,null,j(o(w).item.tier.$errors,d=>(t(),s("div",{key:d.$uid},v(d.$message),1))),128))])):x("",!0)])]),e("div",Wf,[e("div",Kf,[P(e("input",{"onUpdate:modelValue":A[4]||(A[4]=d=>b.item.playbackMode=d),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[F,b.item.playbackMode]]),A[13]||(A[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(w).item.playbackMode.$error?(t(),s("div",Jf,[(t(!0),s(B,null,j(o(w).item.playbackMode.$errors,d=>(t(),s("div",{key:d.$uid},v(d.$message),1))),128))])):x("",!0)])])]),e("div",Qf,[e("div",Xf,[P(e("textarea",{"onUpdate:modelValue":A[5]||(A[5]=d=>b.item.policy=d),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[F,b.item.policy]]),A[14]||(A[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o(w).item.policy.$error?(t(),s("div",Zf,[(t(!0),s(B,null,j(o(w).item.policy.$errors,d=>(t(),s("div",{key:d.$uid},v(d.$message),1))),128))])):x("",!0)])]),A[17]||(A[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",ep,[e("div",tp,[e("div",sp,[P(e("select",{"onUpdate:modelValue":A[6]||(A[6]=d=>b.item.fillerSlateSourceLocationId=d),onChange:A[7]||(A[7]=d=>K()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(B,null,j(b.lookups.sourceLocations,d=>(t(),s("option",{value:d.id},v(d.name),9,op))),256))],544),[[ve,b.item.fillerSlateSourceLocationId]]),A[15]||(A[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(w).item.fillerSlateSourceLocationId.$error?(t(),s("div",ap,[(t(!0),s(B,null,j(o(w).item.fillerSlateSourceLocationId.$errors,d=>(t(),s("div",{key:d.$uid},v(d.$message),1))),128))])):x("",!0)])]),e("div",lp,[e("div",np,[P(e("select",{"onUpdate:modelValue":A[8]||(A[8]=d=>b.item.fillerSlateVodSourceId=d),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(B,null,j(b.lookups.vodSources,d=>(t(),s("option",{value:d.id},v(d.name),9,rp))),256))],512),[[ve,b.item.fillerSlateVodSourceId]]),A[16]||(A[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(w).item.fillerSlateVodSourceId.$error?(t(),s("div",ip,[(t(!0),s(B,null,j(o(w).item.fillerSlateVodSourceId.$errors,d=>(t(),s("div",{key:d.$uid},v(d.$message),1))),128))])):x("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},up={components:{Page:Le},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function cp(r,u,$,k,g,R){const S=X("Page");return t(),ue(S,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const mp=Te(up,[["render",cp]]),fp={class:"d-flex justify-content-end"},pp={class:"ms-1"},vp={class:"input-group"},gp={class:"table-responsive"},bp={class:"table table-hover mb-0"},yp=["textContent"],$p="/api/v1/channels/search",wp={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(r){$e("$config");const $=ye().user,{appTitle:k,pageTitle:g,busy:R,infoMessage:S,warningMessage:Y,errorMessage:N,router:h,axios:E,utils:Q,toasts:z,close:q,security:b,filter:M,initializeFilter:w,getQuery:W,saveQuery:K,search:i,getRowNumber:m,setSelected:V,isSelected:l}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${$==null?void 0:$.userId}/Channels/search`,baseUrl:$p,filter:{updateUrl:!0}});return de(async()=>{w(),await i()}),(A,a)=>{const U=X("router-link"),f=X("PageHeader"),d=X("m-pagination"),p=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(g)},{default:O(()=>[e("div",fp,[D(U,{to:r.urlAdd,class:"btn btn-primary"},{default:O(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",pp,[e("div",vp,[P(e("input",{"onUpdate:modelValue":a[0]||(a[0]=c=>o(M).query.criteria=c),onKeyup:a[1]||(a[1]=Ae(c=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[F,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=c=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(N)},{default:O(()=>[e("div",gp,[e("table",bp,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(o(M).items,(c,y)=>(t(),s("tr",{key:c.channelId},[e("td",{textContent:v(o(m)(y)),class:"text-center"},null,8,yp),e("td",null,[D(U,{to:`${r.urlView}/${c.channelId}`,class:"d-inline-block text-truncate"},{default:O(()=>[L(v(c.name),1)]),_:2},1032,["to"])]),e("td",null,v(c.playbackMode),1),e("td",null,v(c.tier),1)]))),128))]),_:1},512),[[_e,o(M).items.length>0]])])]),D(d,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},hp=["id"],kp={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},_p={class:"modal-content"},Sp={class:"modal-header"},Tp={class:"modal-title"},Mp={class:"modal-body"},Ip={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cp=["innerHTML"],xp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Pp={class:"container"},Vp={class:"col"},Up={class:"form-floating mb-2"},Op=["value"],Ap={class:"row row-cols-1 row-cols-sm-2"},Dp={class:"col"},Hp={class:"form-floating mb-2"},Ep={key:0,class:"d-block invalid-feedback"},Lp={class:"col"},Bp={class:"form-floating mb-2"},qp={key:0,class:"d-block invalid-feedback"},Np={key:0},Rp={class:"row row-cols-1 row-cols-sm-3"},zp={class:"col"},Fp={class:"form-floating mb-2"},jp={class:"col"},Gp={class:"form-floating mb-2"},Yp={class:"col"},Wp={class:"form-floating mb-2"},Kp={class:"row row-cols-1 row-cols-sm-2"},Jp={class:"col"},Qp={class:"form-floating mb-2"},Xp={class:"col"},Zp={class:"form-floating mb-2"},ev={class:"row row-cols-1 row-cols-sm-2"},tv={class:"col"},sv={class:"form-floating mb-2"},ov={class:"col"},av={class:"form-floating mb-2"},lv={key:1},nv={class:"table-responsive border mt-1"},rv={class:"table mb-0"},iv=["onUpdate:modelValue"],dv=["value"],uv={class:"modal-footer"},cv=["disabled"],mv={__name:"_addProgramFromTemplate",emits:["onClose"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=$,K=ie(),i=ie("modalAddProgramFromTemplate"),m=fe({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),V={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0}}},l=we(V,m);de(async()=>{l.value.$reset()});const A=async(G,n,T)=>{K.value=G;const I=m;Y.value.clear(),E.value="";const ae=q.moment(T),oe=ae.format("YYYY-MM-DD HH:mm"),ge=ae.format("YYYYMMDD_HHmm")+"_PRG_";I.eventId=n,I.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},I.selected={programTemplate:null},I.item={programTemplateId:null,name:ge,dateScheduledStart:oe,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),await d(),l.value.$reset();var Me=document.getElementById(i.value),He=he.getOrCreateInstance(Me);He.show()},a=async G=>{const n=m.selected.channel.programs;if(G&&n.find(He=>He.name===m.item.name)){alert(`Program name = [${m.item.name}] already exists.`);return}if(!G){W("onClose",{eventId:m.eventId},G);var oe=document.getElementById(i.value),ge=he.getOrCreateInstance(oe);ge.hide();return}const T=m,I=q.moment(T.item.dateScheduledStart).utc().format(),ae=q.moment(T.item.dateScheduledStart).add(T.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),ee={eventId:T.eventId,programTemplateId:T.selected.programTemplate.programTemplateId,channelId:T.selected.channel.channelId,name:T.item.name,dateScheduledStart:I,dateScheduledEnd:ae,adBreaks:T.selected.programTemplate.adBreaks.map(Me=>({sourceLocationId:T.selected.programTemplate.sourceLocationId,vodSourceId:Me.vodSourceId,offsetMillis:Me.offsetMillis,durationInMillis:Me.durationInMillis}))};W("onClose",ee,G);var oe=document.getElementById(i.value),ge=he.getOrCreateInstance(oe);ge.hide()},U=async()=>{await a(!0)},f=async()=>{try{const G=`/api/v1/channels/${K.value}/`;await z.get(G).then(n=>{m.selected.channel=n.data})}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},d=async()=>{await C(),await ne(),await p()},p=async()=>{try{const G=`/api/v1/programTemplates/lookup/by-channel/${K.value}`;await z.get(G).then(n=>{m.lookups.programTemplates=n.data,m.lookups.programTemplates.length===1&&(m.item.programTemplateId=m.lookups.programTemplates[0].id)}),m.item.programTemplateId&&await c()}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},c=async()=>{await y(m.item.programTemplateId)},y=async G=>{try{const n=`/api/v1/programTemplates/${G}/`;await z.get(n).then(ae=>{m.selected.programTemplate=ae.data;const ee=m.selected.programTemplate;ee.startOffsetTime=q.moment.utc(ee.startOffsetMillis).format("HH:mm:ss"),ee.endOffsetTime=q.moment.utc(ee.endOffsetMillis).format("HH:mm:ss"),ee.durationTime=q.moment.utc(ee.durationInMillis).format("HH:mm:ss"),ee.adBreaksDurationTime=q.moment.utc(ee.adBreaksDurationInMillis).format("HH:mm:ss"),ee.totalProgramTemplateDurationTime=q.moment.utc(ee.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ee.adBreaks.forEach(oe=>{oe.vodSourceId=null})});const T=m,I=T.selected.channel.outputs[0].outputType;await H(T.selected.programTemplate.sourceLocationId,I)}catch(n){E.value=q.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},C=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(n=>{m.lookups.sourceLocations=n.data,m.lookups.sourceLocations.length===1&&(m.item.sourceLocationId=m.lookups.sourceLocations[0].id)}),m.item.sourceLocationId&&await J(m.item.sourceLocationId)}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},J=async G=>{try{let n=`/api/v1/vodSources/lookup/source-location/${G}`;await z.get(n).then(T=>{m.lookups.vodSources=T.data})}catch(n){E.value=q.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},H=async(G,n)=>{try{let T=`/api/v1/vodsources/lookup/source-location/${G}/output-type/${n}`;await z.get(T).then(I=>{m.lookups.adBreakVodSources=I.data})}catch(T){E.value=q.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},ne=async()=>{try{const G=`/api/v1/programs/lookup/?channelId=${K.value}`;await z.get(G).then(n=>{m.lookups.channelPrograms=n.data;const T=m.lookups.channelPrograms.length})}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}};return u({open:A,close:a}),(G,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-hidden":"true"},[e("div",kp,[e("div",_p,[e("div",Sp,[e("h5",Tp,[n[14]||(n[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=T=>a(!1)),"aria-label":"Close"})]),e("div",Mp,[o(E)?(t(),s("div",Ip,[n[15]||(n[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Cp)])):x("",!0),o(Y).size>0?(t(),s("div",xp,[n[16]||(n[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),T=>(t(),s("li",null,v(T),1))),256))])])):x("",!0),e("div",Pp,[e("div",Vp,[e("div",Up,[P(e("select",{"onUpdate:modelValue":n[1]||(n[1]=T=>m.item.programTemplateId=T),class:"form-select",onChange:n[2]||(n[2]=T=>c()),id:"sourceLocationId"},[(t(!0),s(B,null,j(m.lookups.programTemplates,T=>(t(),s("option",{value:T.id}," ["+v(o(q).moment.utc(T.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+v(T.name),9,Op))),256))],544),[[ve,m.item.programTemplateId]]),n[17]||(n[17]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Ap,[e("div",Dp,[e("div",Hp,[P(e("input",{"onUpdate:modelValue":n[3]||(n[3]=T=>m.item.name=T),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,m.item.name]]),n[18]||(n[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",Ep,[(t(!0),s(B,null,j(o(l).item.name.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])]),e("div",Lp,[e("div",Bp,[P(e("input",{"onUpdate:modelValue":n[4]||(n[4]=T=>m.item.dateScheduledStart=T),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[F,m.item.dateScheduledStart]]),n[19]||(n[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",qp,[(t(!0),s(B,null,j(o(l).item.dateScheduledStart.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])])]),m.selected.programTemplate?(t(),s("div",Np,[e("div",Rp,[e("div",zp,[e("div",Fp,[P(e("input",{"onUpdate:modelValue":n[5]||(n[5]=T=>m.selected.programTemplate.startOffsetTime=T),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[F,m.selected.programTemplate.startOffsetTime]]),n[20]||(n[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",jp,[e("div",Gp,[P(e("input",{"onUpdate:modelValue":n[6]||(n[6]=T=>m.selected.programTemplate.endOffsetTime=T),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[F,m.selected.programTemplate.endOffsetTime]]),n[21]||(n[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Yp,[e("div",Wp,[P(e("input",{"onUpdate:modelValue":n[7]||(n[7]=T=>m.selected.programTemplate.durationTime=T),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[F,m.selected.programTemplate.durationTime]]),n[22]||(n[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Kp,[e("div",Jp,[e("div",Qp,[P(e("input",{"onUpdate:modelValue":n[8]||(n[8]=T=>m.selected.programTemplate.adBreaksDurationTime=T),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[F,m.selected.programTemplate.adBreaksDurationTime]]),n[23]||(n[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Xp,[e("div",Zp,[P(e("input",{"onUpdate:modelValue":n[9]||(n[9]=T=>m.selected.programTemplate.totalProgramTemplateDurationTime=T),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[F,m.selected.programTemplate.totalProgramTemplateDurationTime]]),n[24]||(n[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",ev,[e("div",tv,[e("div",sv,[P(e("input",{"onUpdate:modelValue":n[10]||(n[10]=T=>m.selected.programTemplate.sourceLocation.name=T),id:"name",class:"form-control",readonly:""},null,512),[[F,m.selected.programTemplate.sourceLocation.name]]),n[25]||(n[25]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",ov,[e("div",av,[P(e("input",{"onUpdate:modelValue":n[11]||(n[11]=T=>m.selected.programTemplate.vodSource.name=T),id:"name",class:"form-control",readonly:""},null,512),[[F,m.selected.programTemplate.vodSource.name]]),n[26]||(n[26]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):x("",!0),n[29]||(n[29]=e("hr",null,null,-1)),m.selected.programTemplate?(t(),s("div",lv,[n[28]||(n[28]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",nv,[e("table",rv,[n[27]||(n[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(m.selected.programTemplate.adBreaks,(T,I)=>(t(),s("tr",null,[e("td",null,v(I+1),1),e("td",null,v(o(q).moment.utc(T.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(q).moment.utc(T.durationInMillis).format("HH:mm:ss")),1),e("td",null,[P(e("select",{"onUpdate:modelValue":ae=>T.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,j(m.lookups.adBreakVodSources,ae=>(t(),s(B,null,[ae.durationInMillis===T.durationInMillis?(t(),s("option",{key:0,value:ae.id}," ["+v(o(q).moment.utc(ae.durationInMillis).format("HH:mm:ss"))+"] "+v(ae.name),9,dv)):x("",!0)],64))),256))],8,iv),[[ve,T.vodSourceId]])])]))),256))])])])])):x("",!0)])]),e("div",uv,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:n[12]||(n[12]=T=>U()),class:"btn btn-primary",type:"button"},n[30]||(n[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,cv),e("button",{onClick:n[13]||(n[13]=T=>a(!1)),class:"btn btn-secondary ms-1"},n[31]||(n[31]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,hp))}},fv=["id"],pv={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},vv={class:"modal-content"},gv={class:"modal-header"},bv={class:"modal-title"},yv={class:"modal-body"},$v={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},wv=["innerHTML"],hv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kv={key:2,class:"container"},_v={class:"row row-cols-1 row-cols-sm-3"},Sv={class:"col"},Tv={class:"form-floating mb-2"},Mv={id:"name",class:"form-control",placeholder:"Name"},Iv={key:0,class:"text-wrap"},Cv={key:0,class:"d-block invalid-feedback"},xv={class:"col"},Pv={class:"form-floating mb-2"},Vv={key:0,class:"d-block invalid-feedback"},Uv={class:"col"},Ov={class:"form-floating mb-2"},Av={key:0,class:"d-block invalid-feedback"},Dv={key:0},Hv={class:"row row-cols-1 row-cols-sm-3"},Ev={class:"col"},Lv={class:"form-floating mb-2"},Bv={class:"col"},qv={class:"form-floating mb-2"},Nv={class:"col"},Rv={class:"form-floating mb-2"},zv={class:"row row-cols-1 row-cols-sm-2"},Fv={class:"col"},jv={class:"form-floating mb-2"},Gv={class:"col"},Yv={class:"form-floating mb-2"},Wv={class:"row row-cols-1 row-cols-sm-2"},Kv={key:0,class:"col"},Jv={class:"form-floating mb-2"},Qv={key:1,class:"col"},Xv={class:"form-floating mb-2"},Zv={key:1},eg={class:"table-responsive border mt-1"},tg={class:"table mb-0"},sg=["onUpdate:modelValue"],og=["value"],ag={class:"modal-footer"},lg=["disabled"],lt={__name:"_editProgram",emits:["onClose"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=$,K=ie(),i=ie("modalEditProgram"),m=fe({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),V={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0}}},l=we(V,m);de(async()=>{l.value.$reset()});const A=async(c,y)=>{K.value=c;const C=m;if(Y.value.clear(),E.value="",C.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},C.item=null,await f(),y){const n=q.moment(y).format("YYYY-MM-DD HH:mm");m.item.dateScheduledStart=n}await d(),l.value.$reset();var J=document.getElementById(i.value),H=he.getOrCreateInstance(J);H.show()},a=async c=>{if(!c){W("onClose",c);var H=document.getElementById(i.value),ne=he.getOrCreateInstance(H);ne.hide();return}const y=m,C=q.moment(y.item.dateScheduledStart).utc().format(),J={programId:K.value,name:y.item.name,dateScheduledStart:C,adBreaks:y.item.adBreaks.map(G=>({sourceLocationId:y.item.sourceLocationId,vodSourceId:G.vodSourceId,offsetMillis:G.offsetMillis,durationInMillis:G.durationInMillis}))};try{await z.put("/api/v1/programs/",J).then(n=>{b.success("Edit Program","Program was edited.")})}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0);return}finally{}W("onClose",c);var H=document.getElementById(i.value),ne=he.getOrCreateInstance(H);ne.hide()},U=async()=>{await a(!0)},f=async()=>{try{const c=`/api/v1/programs/${K.value}/`;await z.get(c).then(J=>{m.item=J.data;const H=m.item,n=q.moment(H.dateScheduledStart).format("YYYY-MM-DD HH:mm");m.item.dateScheduledStart=n,H.startOffsetTime=q.moment.utc(H.startOffsetMillis).format("HH:mm:ss"),H.endOffsetTime=q.moment.utc(H.endOffsetMillis).format("HH:mm:ss"),H.durationTime=q.moment.utc(H.durationInMillis).format("HH:mm:ss"),H.adBreaksDurationTime=q.moment.utc(H.adBreaksDurationInMillis).format("HH:mm:ss"),H.totalProgramTemplateDurationTime=q.moment.utc(H.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const y=m,C=y.item.channel.outputs[0].outputType;await p(y.item.sourceLocationId,C)}catch(c){E.value=q.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},d=async()=>{},p=async(c,y)=>{try{let C=`/api/v1/vodsources/lookup/source-location/${c}/output-type/${y}`;await z.get(C).then(J=>{m.lookups.adBreakVodSources=J.data})}catch(C){E.value=q.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}};return u({open:A,close:a}),(c,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",pv,[e("div",vv,[e("div",gv,[e("h5",bv,[y[12]||(y[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=C=>a(!1)),"aria-label":"Close"})]),e("div",yv,[o(E)?(t(),s("div",$v,[y[13]||(y[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,wv)])):x("",!0),o(Y).size>0?(t(),s("div",hv,[y[14]||(y[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),C=>(t(),s("li",null,v(C),1))),256))])])):x("",!0),m.item?(t(),s("div",kv,[e("div",_v,[e("div",Sv,[e("div",Tv,[e("div",Mv,[m.item.relativeProgram?(t(),s("span",Iv,v(m.item.relativeProgram.name),1)):x("",!0)]),y[15]||(y[15]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(l).item.name.$error?(t(),s("div",Cv,[(t(!0),s(B,null,j(o(l).item.name.$errors,C=>(t(),s("div",{key:C.$uid},v(C.$message),1))),128))])):x("",!0)])]),e("div",xv,[e("div",Pv,[P(e("input",{"onUpdate:modelValue":y[1]||(y[1]=C=>m.item.name=C),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,m.item.name]]),y[16]||(y[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",Vv,[(t(!0),s(B,null,j(o(l).item.name.$errors,C=>(t(),s("div",{key:C.$uid},v(C.$message),1))),128))])):x("",!0)])]),e("div",Uv,[e("div",Ov,[P(e("input",{"onUpdate:modelValue":y[2]||(y[2]=C=>m.item.dateScheduledStart=C),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[F,m.item.dateScheduledStart]]),y[17]||(y[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",Av,[(t(!0),s(B,null,j(o(l).item.dateScheduledStart.$errors,C=>(t(),s("div",{key:C.$uid},v(C.$message),1))),128))])):x("",!0)])])]),m.item?(t(),s("div",Dv,[e("div",Hv,[e("div",Ev,[e("div",Lv,[P(e("input",{"onUpdate:modelValue":y[3]||(y[3]=C=>m.item.startOffsetTime=C),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[F,m.item.startOffsetTime]]),y[18]||(y[18]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Bv,[e("div",qv,[P(e("input",{"onUpdate:modelValue":y[4]||(y[4]=C=>m.item.endOffsetTime=C),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[F,m.item.endOffsetTime]]),y[19]||(y[19]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Nv,[e("div",Rv,[P(e("input",{"onUpdate:modelValue":y[5]||(y[5]=C=>m.item.durationTime=C),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[F,m.item.durationTime]]),y[20]||(y[20]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",zv,[e("div",Fv,[e("div",jv,[P(e("input",{"onUpdate:modelValue":y[6]||(y[6]=C=>m.item.adBreaksDurationTime=C),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[F,m.item.adBreaksDurationTime]]),y[21]||(y[21]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Gv,[e("div",Yv,[P(e("input",{"onUpdate:modelValue":y[7]||(y[7]=C=>m.item.totalProgramTemplateDurationTime=C),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[F,m.item.totalProgramTemplateDurationTime]]),y[22]||(y[22]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",Wv,[m.item.sourceLocation?(t(),s("div",Kv,[e("div",Jv,[P(e("input",{"onUpdate:modelValue":y[8]||(y[8]=C=>m.item.sourceLocation.name=C),id:"name",class:"form-control",readonly:""},null,512),[[F,m.item.sourceLocation.name]]),y[23]||(y[23]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):x("",!0),m.item.vodSource?(t(),s("div",Qv,[e("div",Xv,[P(e("input",{"onUpdate:modelValue":y[9]||(y[9]=C=>m.item.vodSource.name=C),id:"name",class:"form-control",readonly:""},null,512),[[F,m.item.vodSource.name]]),y[24]||(y[24]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):x("",!0)])])):x("",!0),y[27]||(y[27]=e("hr",null,null,-1)),m.item?(t(),s("div",Zv,[y[26]||(y[26]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",eg,[e("table",tg,[y[25]||(y[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(m.item.adBreaks,(C,J)=>(t(),s("tr",null,[e("td",null,v(J+1),1),e("td",null,v(o(q).moment.utc(C.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(q).moment.utc(C.durationInMillis).format("HH:mm:ss")),1),e("td",null,[P(e("select",{"onUpdate:modelValue":H=>C.vodSourceId=H,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,j(m.lookups.adBreakVodSources,H=>(t(),s(B,null,[H.durationInMillis===C.durationInMillis?(t(),s("option",{key:0,value:H.id}," ["+v(o(q).moment.utc(H.durationInMillis).format("HH:mm:ss"))+"] "+v(H.name),9,og)):x("",!0)],64))),256))],8,sg),[[ve,C.vodSourceId]])])]))),256))])])])])):x("",!0)])):x("",!0)]),e("div",ag,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:y[10]||(y[10]=C=>U()),class:"btn btn-primary ms-2",type:"button"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,lg),e("button",{onClick:y[11]||(y[11]=C=>a(!1)),class:"btn btn-secondary ms-1"},y[29]||(y[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,fv))}},ng={class:"d-flex justify-content-end"},rg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(r){const{appTitle:u,pageTitle:$,busy:k,infoMessage:g,warningMessage:R,errorMessage:S,router:Y,axios:N,utils:h,toasts:E,close:Q,security:z}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),q=r,b=ie(null),M=ie(null),w=ie(null),W={viewType:"Week",cellDuration:15,startDate:Ue.DayPilot.Date.today(),onTimeRangeSelected:f=>{var d=f.control;const p={start:f.start,end:f.end,id:Ue.DayPilot.guid(),text:"NEW",tags:{type:"new"}};d.events.add(p);var c=d.events.find(p.id);A(c)},onBeforeEventRender:f=>{if(f.data.barColor="green",!!f.data.tags)switch(f.data.tags.type){case"new":f.data.barColor="yellow";break;case"business":f.data.barColor="#3498db";break;case"personal":f.data.barColor="#2ecc71";break;case"vacation":f.data.barColor="#f1c40f";break;default:f.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:async f=>{const d=f.newStart.value,p=f.e.id(),c=h.moment(d).utc().format();try{let y="/api/v1/programs/scheduled-date-start";const C={programId:p,dateScheduledStart:c};await N.put(y,C).then(J=>{E.success("Program date scheduled start was edited.")})}catch(y){S.value=h.getErrorMessageAsHtml(y),window.scrollTo(0,0);return}finally{}await V()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async f=>{var d=f.e.id();U(d)},contextMenu:new Ue.DayPilot.Menu([{text:"Clone",onClick:async f=>{const d=f.source.id();try{let p=`/api/v1/programs/${d}/clone`;await N.post(p).then(c=>{E.success("Clone Program","Program was cloned.")})}catch(p){S.value=h.getErrorMessageAsHtml(p),window.scrollTo(0,0);return}finally{await V()}}},{text:"Delete",onClick:async f=>{if(!confirm("Do you want to remove this program?"))return;const p=f.source.id();try{let c=`/api/v1/programs/${p}/`;await N.delete(c).then(y=>{E.success("Delete Program","Program was deleted.")}),b.value.control.events.remove(f.source)}catch(c){S.value=h.getErrorMessageAsHtml(c),window.scrollTo(0,0);return}finally{await V()}}}])},K=ie([]),i=()=>{b.value.control.update({events:K.value})},m=fe({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});de(async()=>{await V()});const V=async()=>{await l(),await i()},l=async()=>{const f=m;if(!k.value)try{k.value=!0,S.value="";const d=`/api/v1/channels/${q.id}/`;await N.get(d).then(p=>{f.item=p.data;const c=f.item.outputs,y=f.item.programs.map(C=>{let J=`${C.name}`,H=`[${C.name}]`;return C.relativeProgram&&(H+=` => [${C.relativeProgram.name}]`),{start:h.moment(C.dateScheduledStart).utc(!0).format(),end:h.moment(C.dateScheduledEnd).utc(!0).format(),id:C.programId,text:J,toolTip:H}});K.value=y})}catch(d){S.value=h.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{k.value=!1}},A=f=>{M.value.open(q.id,f.id(),f.start().value)},a=async(f,d)=>{var p=b.value,c=p.control.events.find(f.eventId);if(!d&&c){b.value.control.events.remove(c);return}p.control.events.find(G=>G.text()==f.name)&&(alert("Program already exists in this channel. Removing in the calendar."),b.value.control.events.remove(c));const C=h.moment(f.dateScheduledStart).utc(!0).format(),J=h.moment(f.dateScheduledEnd).utc(!0).format(),H=new Ue.DayPilot.Date(C),ne=new Ue.DayPilot.Date(J);c.text(f.name),c.start(new Ue.DayPilot.Date(H)),c.end(new Ue.DayPilot.Date(ne)),c.data.tags.program=f,c.commit(),b.value.control.update(),await N.post("/api/v1/programs/from-template/",f).then(G=>{E.success("Add New Program",`Program [${f.name}] was added to this channel.`)},G=>{const n=h.getErrorMessageAsHtml(G);alert(n)}),await V()},U=(f,d)=>{w.value.open(f,d)};return(f,d)=>{const p=X("router-link"),c=X("PageHeader"),y=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(c,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:O(()=>[e("div",ng,[e("button",{onClick:d[0]||(d[0]=C=>V()),class:"btn btn-secondary ms-1"},d[1]||(d[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(p,{to:`${r.urlView}/${r.id}`,class:"btn btn-secondary ms-1"},{default:O(()=>d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(y,{errorMessage:o(S),vuelidate:f.v$},{default:O(()=>[e("div",null,[D(o(Ue.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:b},null,512),D(mv,{ref_key:"modalAddProgram",ref:M,onOnClose:a},null,512),D(lt,{ref_key:"modalEditProgram",ref:w,onOnClose:V},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ig=["id"],dg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ug={class:"modal-content"},cg={class:"modal-header"},mg={class:"modal-title"},fg={class:"modal-body"},pg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vg=["innerHTML"],gg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bg={class:"container"},yg={class:"row row-cols-1 row-cols-sm-3"},$g={class:"col"},wg={class:"form-floating mb-2"},hg=["disabled"],kg=["value"],_g={class:"col"},Sg={class:"form-floating mb-2"},Tg={key:0,class:"d-block invalid-feedback"},Mg={class:"col"},Ig={class:"form-floating mb-2"},Cg={key:0,class:"d-block invalid-feedback"},xg={class:"row row-cols-sm-2"},Pg={class:"col"},Vg={class:"form-floating mb-2"},Ug=["value"],Og={key:0,class:"d-block invalid-feedback"},Ag={class:"col"},Dg={class:"form-floating mb-2"},Hg=["value"],Eg={key:0,class:"d-block invalid-feedback"},Lg={class:"col"},Bg={class:"input-group mb-1"},qg={class:"form-floating"},Ng={key:0,class:"input-group-text"},Rg={key:0},zg={key:1},Fg={key:2},jg={key:3,class:"d-block invalid-feedback"},Gg={class:"col"},Yg={class:"input-group mb-1"},Wg={class:"form-floating"},Kg={key:0,class:"input-group-text"},Jg={key:0},Qg={key:1},Xg={key:2,class:"d-block invalid-feedback"},Zg={class:"table-responsive border mt-1"},e1={class:"table"},t1={class:"input-group mb-1"},s1=["onUpdate:modelValue"],o1={key:0,class:"input-group-text"},a1=["onUpdate:modelValue"],l1=["value"],n1=["onUpdate:modelValue"],r1=["value"],i1=["onClick"],d1={class:"modal-footer"},u1=["disabled"],c1={__name:"_addProgram",emits:["refresh"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=$,K=ie(),i=ie("modalAddProgram"),m=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),V={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",te),minValue:Pe(0),$autoDirty:!0,$lazy:!0}}},l=we(V,m);de(async()=>{l.value.$reset()});const A=async G=>{K.value=G;const n=m;Y.value.clear(),E.value="";const T=q.moment().local().add(2,"m"),ae=T.format("YYYY-MM-DD HH:mm"),ee=T.format("YYYY_MM_DD")+"_PROGRAM_";n.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},n.item={name:ee,relativeProgramId:null,dateScheduledStart:ae,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),l.value.$reset();var oe=document.getElementById(i.value),ge=he.getOrCreateInstance(oe);ge.show()},a=async()=>{var G=document.getElementById(i.value),n=he.getOrCreateInstance(G);n.hide(),W("refresh")},U=async()=>{const G=m;if(R.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,E.value="";const I=G.item;delete I.vodSource,I.channelId=K.value;var T=I.dateScheduledStart;I.dateScheduledStart=q.moment(T).utc().format(),await z.post("/api/v1/programs/",I).then(ae=>{b.success("Add Program","Program added to Channel",{async onClose(){}})}),await a()}catch(I){E.value=q.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{R.value=!1}},f=async()=>{await d(),await c(),await C()},d=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(n=>{m.lookups.sourceLocations=n.data,m.lookups.sourceLocations.length===1&&(m.item.sourceLocationId=m.lookups.sourceLocations[0].id)}),m.item.sourceLocationId&&await p(m.item.sourceLocationId)}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},p=async G=>{try{let n=`/api/v1/vodSources/lookup/source-location/${G}`;await z.get(n).then(T=>{m.lookups.vodSources=T.data})}catch(n){E.value=q.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},c=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(n=>{m.lookups.adBreakSourceLocations=n.data})}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},y=async G=>{try{let n=`/api/v1/vodSources/lookup/source-location/${G}`;await z.get(n).then(T=>{m.lookups.adBreakVodSources=T.data})}catch(n){E.value=q.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},C=async()=>{try{const G=`/api/v1/programs/lookup/?channelId=${K.value}`;await z.get(G).then(n=>{if(m.lookups.channelPrograms=n.data,m.lookups.channelPrograms.length===1){const I=m.lookups.channelPrograms[0];m.item.relativeProgramId=I.id}})}catch(G){E.value=q.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},J=()=>{const G={offsetMillis:0,sourceLocationId:null,vodSourceId:null},n=m.item.adBreaks.length;if(n>0){const T=m.item.adBreaks[n-1];G.offsetMillis=T.offsetMillis+1e4}m.item.adBreaks.push(G)},H=G=>{m.item.adBreaks.splice(G,1)},ne=()=>{const G=m.item.vodSource;m.item.vodSourceId=G.id};return u({open:A,close:a}),(G,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",dg,[e("div",ug,[e("div",cg,[e("h5",mg,[n[12]||(n[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=T=>a()),"aria-label":"Close"})]),e("div",fg,[o(E)?(t(),s("div",pg,[n[13]||(n[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,vg)])):x("",!0),o(Y).size>0?(t(),s("div",gg,[n[14]||(n[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),T=>(t(),s("li",null,v(T),1))),256))])])):x("",!0),e("div",bg,[e("div",yg,[e("div",$g,[e("div",wg,[P(e("select",{"onUpdate:modelValue":n[1]||(n[1]=T=>m.item.relativeProgramId=T),class:"form-select",id:"sourceLocationId",disabled:m.lookups.channelPrograms.length<=0},[(t(!0),s(B,null,j(m.lookups.channelPrograms,T=>(t(),s("option",{value:T.id},v(T.name),9,kg))),256))],8,hg),[[ve,m.item.relativeProgramId]]),n[15]||(n[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",_g,[e("div",Sg,[P(e("input",{"onUpdate:modelValue":n[2]||(n[2]=T=>m.item.name=T),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,m.item.name]]),n[16]||(n[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",Tg,[(t(!0),s(B,null,j(o(l).item.name.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])]),e("div",Mg,[e("div",Ig,[P(e("input",{"onUpdate:modelValue":n[3]||(n[3]=T=>m.item.dateScheduledStart=T),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[F,m.item.dateScheduledStart]]),n[17]||(n[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",Cg,[(t(!0),s(B,null,j(o(l).item.dateScheduledStart.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])])]),e("div",xg,[e("div",Pg,[e("div",Vg,[P(e("select",{"onUpdate:modelValue":n[4]||(n[4]=T=>m.item.sourceLocationId=T),onChange:n[5]||(n[5]=T=>p(m.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(m.lookups.sourceLocations,T=>(t(),s("option",{value:T.id},v(T.name),9,Ug))),256))],544),[[ve,m.item.sourceLocationId]]),n[18]||(n[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(l).item.sourceLocationId.$error?(t(),s("div",Og,[(t(!0),s(B,null,j(o(l).item.sourceLocationId.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])]),e("div",Ag,[e("div",Dg,[P(e("select",{"onUpdate:modelValue":n[6]||(n[6]=T=>m.item.vodSource=T),onChange:n[7]||(n[7]=T=>ne()),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,j(m.lookups.vodSources,T=>(t(),s("option",{value:T},v(T.name),9,Hg))),256))],544),[[ve,m.item.vodSource]]),n[19]||(n[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(l).item.vodSourceId.$error?(t(),s("div",Eg,[(t(!0),s(B,null,j(o(l).item.vodSourceId.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])]),e("div",Lg,[e("div",Bg,[e("div",qg,[P(e("input",{"onUpdate:modelValue":n[8]||(n[8]=T=>m.item.startOffsetMillis=T),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[F,m.item.startOffsetMillis]]),n[20]||(n[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),m.item.startOffsetMillis>0?(t(),s("span",Ng,v(o(q).moment.utc(m.item.startOffsetMillis).format("HH:mm:ss")),1)):x("",!0)]),m.item.startOffsetMillis>0&&m.item.startOffsetMillis<3e4?(t(),s("div",Rg,n[21]||(n[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):x("",!0),m.item.startOffsetMillis>m.item.endOffsetMillis&&m.item.endOffsetMillis>0?(t(),s("div",zg,n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):x("",!0),m.item.vodSource&&m.item.startOffsetMillis>m.item.vodSource.durationInMillis?(t(),s("div",Fg,n[23]||(n[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):x("",!0),o(l).item.startOffsetMillis.$error?(t(),s("div",jg,[(t(!0),s(B,null,j(o(l).item.startOffsetMillis.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)]),e("div",Gg,[e("div",Yg,[e("div",Wg,[P(e("input",{"onUpdate:modelValue":n[9]||(n[9]=T=>m.item.endOffsetMillis=T),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[F,m.item.endOffsetMillis]]),n[24]||(n[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),m.item.endOffsetMillis>0?(t(),s("span",Kg,v(o(q).moment.utc(m.item.endOffsetMillis).format("HH:mm:ss")),1)):x("",!0)]),m.item.endOffsetMillis>0&&m.item.endOffsetMillis<3e4?(t(),s("div",Jg,n[25]||(n[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):x("",!0),m.item.vodSource&&m.item.endOffsetMillis>m.item.vodSource.durationInMillis?(t(),s("div",Qg,n[26]||(n[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):x("",!0),o(l).item.endOffsetMillis.$error?(t(),s("div",Xg,[(t(!0),s(B,null,j(o(l).item.endOffsetMillis.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):x("",!0)])]),n[30]||(n[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[n[27]||(n[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:J,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Zg,[e("table",e1,[n[29]||(n[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,j(m.item.adBreaks,(T,I)=>(t(),s("tr",null,[e("td",null,v(I+1),1),e("td",null,[e("div",t1,[P(e("input",{"onUpdate:modelValue":ae=>T.offsetMillis=ae,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,s1),[[F,T.offsetMillis]]),T.offsetMillis>0?(t(),s("span",o1,v(o(q).moment.utc(T.offsetMillis).format("HH:mm:ss")),1)):x("",!0)])]),e("td",null,[P(e("select",{"onUpdate:modelValue":ae=>T.sourceLocationId=ae,onChange:n[10]||(n[10]=ae=>y(m.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(B,null,j(m.lookups.adBreakSourceLocations,ae=>(t(),s("option",{value:ae.id},v(ae.name),9,l1))),256))],40,a1),[[ve,T.sourceLocationId]])]),e("td",null,[P(e("select",{"onUpdate:modelValue":ae=>T.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,j(m.lookups.adBreakVodSources,ae=>(t(),s("option",{value:ae.id},v(ae.name),9,r1))),256))],8,n1),[[ve,T.vodSourceId]])]),e("td",null,[e("button",{onClick:ae=>H(I),class:"btn btn-outline-warning"},n[28]||(n[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,i1)])]))),256))])])])])])]),e("div",d1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:n[11]||(n[11]=T=>U()),class:"btn btn-primary",type:"button"},n[31]||(n[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,u1),n[32]||(n[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,ig))}},m1=["id"],f1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},p1={class:"modal-content"},v1={class:"modal-header"},g1={class:"modal-title"},b1={class:"modal-body"},y1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$1=["innerHTML"],w1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},h1={class:"container"},k1={class:"col"},_1={class:"form-floating mb-2"},S1={class:"col"},T1={class:"form-floating mb-2"},M1={key:0,class:"d-block invalid-feedback"},I1={class:"col"},C1={class:"form-floating mb-2 d-none"},x1={key:0,class:"d-block invalid-feedback"},P1={class:"col"},V1={class:"form-floating mb-2"},U1={key:0,class:"d-block invalid-feedback"},O1={class:"modal-footer"},A1=["disabled"],D1={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=$,K=ie(),i=ie("modalAddPlaybackConfiguration"),m=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),V={item:{name:{required:Z.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:Z.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:Z.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},l=we(V,m);de(async()=>{l.value.$reset()});const A=async(f,d)=>{K.value=f;const p=m;Y.value.clear(),E.value="";const c=d;let y=c.lastIndexOf("/");const C=c.substring(0,y);let J=c.substring(y+1);y=J.lastIndexOf("."),J=J.substring(0,y)+"_ADCAMPAIGN_",p.item={name:J,originalVideoContentSourceUrl:d,videoContentSourceUrl:C,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var H=document.getElementById(i.value),ne=he.getOrCreateInstance(H);ne.show()},a=async()=>{var f=document.getElementById(i.value),d=he.getOrCreateInstance(f);d.hide(),W("refresh")},U=async()=>{const f=m;if(R.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,E.value="";const p=f.item;p.channelOutputId=K.value,await z.put("/api/v1/channelOutputs/playback/",p).then(c=>{b.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await a()}catch(p){E.value=q.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{R.value=!1}};return u({open:A,close:a}),(f,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",f1,[e("div",p1,[e("div",v1,[e("h5",g1,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=p=>a()),"aria-label":"Close"})]),e("div",b1,[o(E)?(t(),s("div",y1,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,$1)])):x("",!0),o(Y).size>0?(t(),s("div",w1,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),p=>(t(),s("li",null,v(p),1))),256))])])):x("",!0),e("div",h1,[e("div",k1,[e("div",_1,[P(e("textarea",{"onUpdate:modelValue":d[1]||(d[1]=p=>m.item.originalVideoContentSourceUrl=p),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[F,m.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",S1,[e("div",T1,[P(e("input",{"onUpdate:modelValue":d[2]||(d[2]=p=>m.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[F,m.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",M1,[(t(!0),s(B,null,j(o(l).item.name.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):x("",!0)])]),e("div",I1,[e("div",C1,[P(e("input",{"onUpdate:modelValue":d[3]||(d[3]=p=>m.item.videoContentSourceUrl=p),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[F,m.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",x1,[(t(!0),s(B,null,j(o(l).item.videoContentSourceUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):x("",!0)])]),e("div",P1,[e("div",V1,[P(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=p=>m.item.adDecisionServerUrl=p),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[F,m.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",U1,[(t(!0),s(B,null,j(o(l).item.adDecisionServerUrl.$errors,p=>(t(),s("div",{key:p.$uid},v(p.$message),1))),128))])):x("",!0),d[14]||(d[14]=ze('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",O1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:d[5]||(d[5]=p=>U()),class:"btn btn-primary",type:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,A1),d[16]||(d[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,m1))}},H1=["id"],E1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},L1={class:"modal-content"},B1={class:"modal-header"},q1={class:"modal-title"},N1={class:"modal-body"},R1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},z1=["innerHTML"],F1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},j1={class:"container"},G1={class:"col"},Y1={class:"form-floating mb-2"},W1=["value"],K1={key:0,class:"d-block invalid-feedback"},J1={class:"col"},Q1={class:"form-floating mb-2"},X1={key:0,class:"d-block invalid-feedback"},Z1={class:"col"},eb={class:"form-floating mb-2"},tb={key:0,class:"d-block invalid-feedback"},sb={class:"modal-footer"},ob=["disabled"],ab={__name:"_addChannelOutput",emits:["refresh"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=$,K=ie(),i=ie("modalAddChannelOutput"),m=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),V={item:{sourceGroupId:{required:Z.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},manifestName:{required:Z.withMessage("Manifest Name is required.",te),$autoDirty:!0,$lazy:!0},outputType:{required:Z.withMessage("Output Type is required.",te),$autoDirty:!0,$lazy:!0}}},l=we(V,m);de(async()=>{l.value.$reset()});const A=async()=>{await a()},a=async()=>{try{await z.get("/api/v1/sourceGroups/lookup/").then(c=>{m.lookups.sourceGroups=c.data,m.lookups.sourceGroups.length===1&&(m.item.sourceGroupId=m.lookups.sourceGroups[0].id)})}catch(p){E.value=q.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},U=async p=>{K.value=p;const c=m;Y.value.clear(),E.value="",c.lookups={sourceGroups:[]},c.item={sourceGroupId:null,outputType:null},await A(),l.value.$reset();var y=document.getElementById(i.value),C=he.getOrCreateInstance(y);C.show()},f=async()=>{var p=document.getElementById(i.value),c=he.getOrCreateInstance(p);c.hide(),W("refresh")},d=async()=>{const p=m;if(R.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,E.value="";const y=p.item;y.channelId=K.value,await z.post("/api/v1/channelOutputs",y).then(C=>{b.success("Add Channel Output","Channel output added.")}),await f()}catch(y){E.value=q.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{R.value=!1}};return u({open:U,close:f}),(p,c)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",E1,[e("div",L1,[e("div",B1,[e("h5",q1,[c[4]||(c[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),c[5]||(c[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",N1,[o(E)?(t(),s("div",R1,[c[6]||(c[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,z1)])):x("",!0),o(Y).size>0?(t(),s("div",F1,[c[7]||(c[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),y=>(t(),s("li",null,v(y),1))),256))])])):x("",!0),e("div",j1,[e("div",G1,[e("div",Y1,[P(e("select",{"onUpdate:modelValue":c[0]||(c[0]=y=>m.item.sourceGroupId=y),class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,j(m.lookups.sourceGroups,y=>(t(),s("option",{value:y.id},v(y.name),9,W1))),256))],512),[[ve,m.item.sourceGroupId]]),c[8]||(c[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(l).item.sourceGroupId.$error?(t(),s("div",K1,[(t(!0),s(B,null,j(o(l).item.sourceGroupId.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):x("",!0)])]),e("div",J1,[e("div",Q1,[P(e("select",{"onUpdate:modelValue":c[1]||(c[1]=y=>m.item.outputType=y),class:"form-select",id:"outputType"},c[9]||(c[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ve,m.item.outputType]]),c[10]||(c[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(l).item.outputType.$error?(t(),s("div",X1,[(t(!0),s(B,null,j(o(l).item.outputType.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):x("",!0)])]),e("div",Z1,[e("div",eb,[P(e("input",{"onUpdate:modelValue":c[2]||(c[2]=y=>m.item.manifestName=y),class:"form-control",id:"manifestName"},null,512),[[F,m.item.manifestName]]),c[11]||(c[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(l).item.manifestName.$error?(t(),s("div",tb,[(t(!0),s(B,null,j(o(l).item.manifestName.$errors,y=>(t(),s("div",{key:y.$uid},v(y.$message),1))),128))])):x("",!0)])])])]),e("div",sb,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:c[3]||(c[3]=y=>d()),class:"btn btn-primary",type:"button"},c[12]||(c[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ob),c[13]||(c[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,H1))}},lb=["id"],nb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},rb={class:"modal-content"},ib={class:"modal-header"},db={class:"modal-title"},ub={class:"modal-body"},cb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},mb=["innerHTML"],fb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},pb={class:"container"},vb={class:"col"},gb={class:"form-floating mb-2"},bb=["value"],yb={key:0,class:"d-block invalid-feedback"},$b={class:"col"},wb={class:"form-floating mb-2"},hb=["value"],kb={key:0,class:"d-block invalid-feedback"},_b={class:"modal-footer"},Sb=["disabled"],Tb={__name:"_editFillerSlate",emits:["refresh"],setup(r,{expose:u,emit:$}){const{appTitle:k,pageTitle:g,busy:R,isDirty:S,validations:Y,infoMessage:N,warningMessage:h,errorMessage:E,router:Q,axios:z,utils:q,toasts:b,closeWithReturnUrl:M,security:w}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=$,K=ie("modalEditFillerSlate"),i=fe({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null}}),m={item:{channelId:{required:Z.withMessage("channelId is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0}}},V=we(m,i);de(async()=>{V.value.$reset()});const l=async()=>{await A()},A=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(y=>{i.lookups.sourceLocations=y.data}),i.item.sourceLocationId&&await a(i.item.sourceLocationId)}catch(c){E.value=q.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},a=async c=>{try{let y=`/api/v1/vodSources/lookup/source-Location/${c}/`;await z.get(y).then(C=>{i.lookups.vodSources=C.data})}catch(y){E.value=q.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},U=async(c,y,C)=>{const J=i;Y.value.clear(),E.value="",J.lookups={sourceLocations:[],vodSources:[]},J.item={channelId:c,sourceLocationId:y,vodSourceId:C},await l(),V.value.$reset();var H=document.getElementById(K.value),ne=he.getOrCreateInstance(H);ne.show()},f=async()=>{var c=document.getElementById(K.value),y=he.getOrCreateInstance(c);y.hide(),W("refresh")},d=async()=>{const c=i;if(R.value)return;if(!await V.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,E.value="";const C=c.item;await z.put("/api/v1/channels/filler-slate",C).then(J=>{b.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await f()}catch(C){E.value=q.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{R.value=!1}},p=async()=>{i.item.vodSourceId=null,await a(i.item.sourceLocationId)};return u({open:U,close:f}),(c,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",nb,[e("div",rb,[e("div",ib,[e("h5",db,[y[5]||(y[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),L(v(o(g)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=C=>f()),"aria-label":"Close"})]),e("div",ub,[o(E)?(t(),s("div",cb,[y[6]||(y[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,mb)])):x("",!0),o(Y).size>0?(t(),s("div",fb,[y[7]||(y[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(o(Y).values(),C=>(t(),s("li",null,v(C),1))),256))])])):x("",!0),e("div",pb,[e("div",vb,[e("div",gb,[P(e("select",{"onUpdate:modelValue":y[1]||(y[1]=C=>i.item.sourceLocationId=C),onChange:y[2]||(y[2]=C=>p()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,j(i.lookups.sourceLocations,C=>(t(),s("option",{value:C.id},v(C.name),9,bb))),256))],544),[[ve,i.item.sourceLocationId]]),y[8]||(y[8]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(V).item.sourceLocationId.$error?(t(),s("div",yb,[(t(!0),s(B,null,j(o(V).item.sourceLocationId.$errors,C=>(t(),s("div",{key:C.$uid},v(C.$message),1))),128))])):x("",!0)])]),e("div",$b,[e("div",wb,[P(e("select",{"onUpdate:modelValue":y[3]||(y[3]=C=>i.item.vodSourceId=C),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,j(i.lookups.vodSources,C=>(t(),s("option",{value:C.id},v(C.name),9,hb))),256))],512),[[ve,i.item.vodSourceId]]),y[9]||(y[9]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(V).item.vodSourceId.$error?(t(),s("div",kb,[(t(!0),s(B,null,j(o(V).item.vodSourceId.$errors,C=>(t(),s("div",{key:C.$uid},v(C.$message),1))),128))])):x("",!0)])])])]),e("div",_b,[e("button",{disabled:o(V).$dirty&&o(V).$invalid,onClick:y[4]||(y[4]=C=>d()),class:"btn btn-primary",type:"button"},y[10]||(y[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Sb),y[11]||(y[11]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,lb))}},Mb={class:"d-flex flex-row justify-content-end"},Ib={key:0,class:"dropdown"},Cb={key:0,class:"fas fa-fw fa-play"},xb={key:1,class:"fas fa-fw fa-stop"},Pb={class:"dropdown-menu"},Vb={key:0},Ub={key:1},Ob={key:0},Ab={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Db={class:"nav-item",role:"presentation"},Hb={class:"nav-item",role:"presentation"},Eb={class:"nav-item",role:"presentation"},Lb={class:"nav-item",role:"presentation"},Bb={class:"nav-item",role:"presentation"},qb={class:"tab-content",id:"myTabContent"},Nb={class:"mt-2"},Rb={class:"row row-cols-1 row-cols-sm-3"},zb={class:"col"},Fb={class:"form-floating mb-2"},jb={class:"col"},Gb={class:"form-floating mb-2"},Yb={class:"col"},Wb={class:"form-floating mb-2"},Kb={class:"d-flex flex-row justify-content-start align-items-center"},Jb={key:0,class:"ms-2"},Qb={class:"row row-cols-sm-2 mt-1"},Xb={class:"col"},Zb={class:"form-floating mb-2"},ey={class:"col"},ty={class:"form-floating mb-2"},sy={class:"col mt-2"},oy={class:"form-floating mb-2"},ay={class:"mt-2"},ly={class:"d-flex flex-row justify-content-start align-items-center"},ny={class:"ms-2"},ry={key:0,class:"alert bg-warning mt-2"},iy={class:"table-responsive border mt-1"},dy={class:"table table-bordered1 mb-0"},uy={class:"badge bg-info"},cy={key:0,class:"text-wrap"},my={key:1,class:"text-warning"},fy={key:0,class:"text-end"},py={key:1,class:"text-end"},vy=["onClick"],gy={key:0},by={colspan:"999"},yy={class:"d-flex flex-row justify-content-start align-items-center"},$y={class:"ms-2"},wy={if:"item.playbackUrl"},hy=["onClick"],ky={key:0,class:"table-responsive border mt-2"},_y={class:"table mb-0 table-small"},Sy=["onUpdate:modelValue"],Ty={class:"text-end"},My=["onClick"],Iy=["onClick"],Cy={class:"mt-2"},xy={class:"table-responsive border"},Py={class:"table mb-0 caption-top"},Vy={key:0,class:"fas fa-fw fa-check-circle text-success"},Uy={class:"badge bg-info"},Oy={key:0,class:""},Ay={key:1,class:"mt-1"},Dy={class:"mt-1"},Hy={class:"table table-sm table-borderless small"},Ey={class:"text-end"},Ly={class:"text-end"},By={class:"text-end"},qy={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Ny={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},Ry={class:"text-end"},zy={class:"dropdown position-static"},Fy={class:"dropdown-menu"},jy=["onClick"],Gy={key:0},Yy=["onClick"],Wy=["onClick"],Ky=["onClick"],Jy={class:"text-end mt-2 d-none"},Qy={class:"mt-2"},Xy={class:"text-end mb-2"},Zy={class:"row g-4",id:"masonry"},e$={class:"col-sm-6 col-md-4 col-lg-3"},t$={class:"card h-100"},s$=["id"],o$={class:"card-body1 p-1"},a$={class:"card-title"},l$={class:"col-sm-6 col-md-4 col-lg-3"},n$={class:"card h-100"},r$=["id"],i$={class:"card-body1 p-1"},d$={class:"card-title text-truncate","bs-tooltip":"playback.name"},u$={class:"small"},c$={class:"mt-2"},m$={key:0,class:"fas fa-fw fa-check-circle text-success"},f$={key:1,class:"fas fa-fw fa-times-circle text-warning"},p$={key:0,class:"fas fa-fw fa-check-circle text-success"},v$={key:1,class:"fas fa-fw fa-times-circle text-warning"},g$={key:0,class:"fas fa-fw fa-check-circle text-success"},b$={key:1,class:"fas fa-fw fa-times-circle text-warning"},y$={key:0,class:"fas fa-fw fa-check text-warning"},$$={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},w$={key:0,class:"fas fa-fw fa-check-circle text-success"},h$={key:1,class:"fas fa-fw fa-times-circle text-warning"},k$={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(r){const u=r,{appTitle:$,pageTitle:k,busy:g,isDirty:R,validations:S,infoMessage:Y,warningMessage:N,errorMessage:h,router:E,axios:Q,utils:z,toasts:q,close:b,closeWithReturnUrl:M,generateReturnUrl:w,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});$e("$config");const K=ye();K.user;const i=fe({user:K.user,item:null}),m=ie(null),V=ie(null),l=ie(null),A=ie(null),a=ie(null),U=ie(),f=Ce(()=>i.item&&i.item.state==="RUNNING");de(async()=>{await y();const re=z.getPageTab("channel")||"information-tab";d(re)});const d=re=>{z.setPageTab("channel",re),U.value=re,re==="preview-tab"&&setTimeout(()=>{var _=document.getElementById("masonry");new We(_,{})},100)},p=re=>re===U.value?"active":"",c=re=>re===U.value?"show active":"",y=async()=>{const re=i;if(!g.value)try{g.value=!0,h.value="",i.item=null;const _=`/api/v1/channels/${u.id}/`;await Q.get(_).then(me=>{re.item=me.data,re.item.outputs.forEach(Ve=>{Ve.playbackConfigurations.forEach(se=>{if(Ve.playbackUrl){const xe=Ve.playbackUrl,be=xe.lastIndexOf("/"),Be=xe.substring(0,be),Ee=xe.substring(be+1),Ye=se.hlsConfigurationManifestEndpointPrefix;Ye&&(se.hlsPlaylist=Ye+Ee)}})})})}catch(_){h.value=z.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{g.value=!1}},C=async()=>{await y()},J=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!g.value){h.value=null;try{g.value=!0,await Q.post(`/api/v1/channels/${u.id}/publish/`).then(_=>{q.success("Publish Channel","Channel was published.")}),g.value=!1,await C()}catch(_){h.value=z.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{g.value=!1}}},H=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/channels/${u.id}/unpublish/`).then(_=>{q.warning("Remove Channel","Channel was removed.")}),g.value=!1,await C()}catch(_){h.value=z.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{g.value=!1}}},ne=()=>{m.value.open(u.id)},G=re=>{re.outputType==="HLS"&&V.value.open(re.channelOutputId,re.playbackUrl)},n=()=>{l.value.open(u.id)},T=re=>{A.value.open(re)},I=(re,_)=>{a.value.open(u.id,re,_)},ae=async re=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/programs/${re}/`).then(me=>{q.success("Delete Program","Program was deleted..",{async onClose(){}})}),g.value=!1,await C()}catch(me){h.value=z.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{g.value=!1}}},ee=async re=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/channelOutputs/${re}/`).then(me=>{q.success("Delete Channel Output","Channel output was deleted..")}),g.value=!1,await C()}catch(me){h.value=z.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{g.value=!1}}},oe=async re=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!g.value){h.value=null;try{g.value=!0,await Q.post(`/api/v1/programs/${re}/publish/`).then(me=>{q.success("Publish Program","Program was published..",{async onClose(){}})}),g.value=!1,await C()}catch(me){h.value=z.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{g.value=!1}}},ge=async re=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!g.value){h.value=null;try{g.value=!0,await Q.delete(`/api/v1/programs/${re}/unpublish/`).then(me=>{q.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),g.value=!1,await C()}catch(me){h.value=z.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{g.value=!1}}},Me=async re=>{if(!g.value){h.value=null;try{g.value=!0,await Q.put(`/api/v1/channels/${u.id}/change-state/${re}`).then(_=>{q.success("Update Channel state","Change state was updated")}),g.value=!1,re==="STOPPED"&&U.value==="preview-tab"&&(je(),d("information-tab")),await C()}catch(_){h.value=z.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{g.value=!1}}},He=async re=>{if(!g.value)try{g.value=!0,h.value="",await Q.post(`/api/v1/channelOutputs/${re}/playback/publish/`).then(_=>{q.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),g.value=!1,await C()}catch(_){h.value=z.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{g.value=!1}},rt=async re=>{if(confirm("Do you want to remove this Playback Configuration?")&&!g.value)try{g.value=!0,h.value="",await Q.delete(`/api/v1/channelOutputs/${re}/playback/`).then(me=>{q.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),g.value=!1,await C()}catch(me){h.value=z.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{g.value=!1}},it=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const re=i.item.outputs;je(),re.forEach(_=>{var me=document.getElementById(`video-${_.channelOutputId}`);_.hls=Ge(me,_.playbackUrl,"Main playlist started."),_.playbackConfigurations.forEach(Se=>{var Ve=document.getElementById(`video-${Se.channelOutputPlaybackConfigurationId}`);try{Se.hls=Ge(Ve,Se.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started.")}catch(se){q.error("Failed Stream SSAI Playlist",se)}})}),setTimeout(()=>{var _=document.getElementById("masonry");new We(_,{})},2e3)}},je=()=>{i.item.outputs.forEach(_=>{_.hls&&_.hls.destroy(),_.playbackConfigurations.forEach(me=>{me.hls&&me.hls.destroy()})})},Ge=(re,_,me)=>{var Se=new Hls;return Se.on(Hls.Events.MEDIA_ATTACHED,function(){q.success("Start Channel Stream",me)}),Se.on(Hls.Events.MANIFEST_PARSED,function(Ve,se){console.log("manifest loaded, found "+se.levels.length+" quality level"),re.play()}),Se.on(Hls.Events.ERROR,function(Ve,se){if(se.fatal)switch(se.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),Se.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",se);break;default:Se.destroy();break}}),Se.loadSource(_),Se.attachMedia(re),Se};return(re,_)=>{const me=X("router-link"),Se=X("PageHeader"),Ve=X("PageBody");return t(),ue(ce,null,{default:O(()=>[e("div",null,[D(Se,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:O(()=>[e("div",Mb,[i.item?(t(),s("div",Ib,[e("button",{class:le([[f.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[f.value?(t(),s("span",Cb)):(t(),s("span",xb)),L(" "+v(i.item.state),1)],2),e("ul",Pb,[i.item.arn?(t(),s("li",Vb,[f.value?(t(),s("button",{key:0,onClick:_[0]||(_[0]=se=>Me("STOPPED")),class:"dropdown-item"},_[20]||(_[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),L("Stop ")]))):(t(),s("button",{key:1,onClick:_[1]||(_[1]=se=>Me("RUNNING")),class:"dropdown-item"},_[21]||(_[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),L("Start ")])))])):x("",!0),f.value?x("",!0):(t(),s("li",Ub,[i.item.arn?(t(),s("button",{key:0,onClick:_[2]||(_[2]=se=>H()),class:"dropdown-item"},_[22]||(_[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),L("Unpublish ")]))):(t(),s("button",{key:1,onClick:_[3]||(_[3]=se=>J()),class:"dropdown-item"},_[23]||(_[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")])))])),i.item.arn?(t(),s(B,{key:2},[_[25]||(_[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:_[4]||(_[4]=se=>J()),class:"dropdown-item"},_[24]||(_[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Republish ")]))])],64)):x("",!0)])])):x("",!0),D(me,{to:`${r.urlSchedulePrograms}/${r.id}`,class:"ms-2 btn btn-primary"},{default:O(()=>_[26]||(_[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:_[5]||(_[5]=se=>C()),class:"ms-2 btn btn-secondary"},_[27]||(_[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:_[6]||(_[6]=se=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},_[28]||(_[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(Ve,{errorMessage:o(h)},{default:O(()=>[i.item?(t(),s("div",Ob,[e("ul",Ab,[e("li",Db,[e("button",{onClick:_[7]||(_[7]=se=>d("information-tab")),class:le([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},_[29]||(_[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),L("Information ")]),2)]),e("li",Hb,[e("button",{onClick:_[8]||(_[8]=se=>d("outputPlayback-tab")),class:le([p("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},_[30]||(_[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),L("Output/Playback ")]),2)]),e("li",Eb,[e("button",{onClick:_[9]||(_[9]=se=>d("programs-tab")),class:le([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},_[31]||(_[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),L("Programs ")]),2)]),e("li",Lb,[e("button",{onClick:_[10]||(_[10]=se=>d("preview-tab")),class:le([[f.value?"":"disabled",p("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},_[32]||(_[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),L("Preview ")]),2)]),e("li",Bb,[e("button",{onClick:_[11]||(_[11]=se=>d("checklist-tab")),class:le([p("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},_[33]||(_[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),L("Checklist ")]),2)])]),e("div",qb,[e("div",{class:le([c("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Nb,[e("div",Rb,[e("div",zb,[e("div",Fb,[P(e("input",{"onUpdate:modelValue":_[12]||(_[12]=se=>i.item.name=se),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[F,i.item.name]]),_[34]||(_[34]=e("label",{for:"name"},"Name",-1))])]),e("div",jb,[e("div",Gb,[P(e("input",{"onUpdate:modelValue":_[13]||(_[13]=se=>i.item.playbackMode=se),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[F,i.item.playbackMode]]),_[35]||(_[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",Yb,[e("div",Wb,[P(e("input",{"onUpdate:modelValue":_[14]||(_[14]=se=>i.item.tier=se),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[F,i.item.tier]]),_[36]||(_[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",Kb,[_[38]||(_[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),f.value?x("",!0):(t(),s("div",Jb,[e("button",{onClick:_[15]||(_[15]=se=>I(i.item.fillerSlateSourceLocation.sourceLocationId,i.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},_[37]||(_[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",Qb,[e("div",Xb,[e("div",Zb,[D(me,{to:`${r.urlViewSourceLocation}/${i.item.fillerSlateSourceLocation.sourceLocationId}/${o(w)()}`,class:le([[i.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:O(()=>[L(v(i.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),_[39]||(_[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",ey,[e("div",ty,[D(me,{to:`${r.urlViewVodSource}/${i.item.fillerSlateVodSource.vodSourceId}/${o(w)()}`,class:le([[i.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:O(()=>[L(v(i.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),_[40]||(_[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",sy,[e("div",oy,[P(e("textarea",{"onUpdate:modelValue":_[16]||(_[16]=se=>i.item.policy=se),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",readonly:""},null,512),[[F,i.item.policy]]),_[41]||(_[41]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:le([c("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ay,[e("div",null,[e("div",ly,[_[43]||(_[43]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",ny,[e("button",{onClick:_[17]||(_[17]=se=>n()),class:"btn btn-outline-primary btn-sm"},_[42]||(_[42]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),i.item.outputs.length<=0?(t(),s("div",ry,_[44]||(_[44]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),L("Channel Output is required ")]))):x("",!0),e("div",iy,[e("table",dy,[_[52]||(_[52]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.outputs,(se,xe)=>(t(),s(B,{key:se.channelOutputId},[e("tr",null,[e("td",null,v(xe+1),1),e("td",null,[e("div",null,v(se.manifestName),1),e("div",null,[e("span",uy,v(se.outputType),1)])]),e("td",null,[e("div",null,[D(me,{to:`${r.urlViewSourceGroup}/${se.sourceGroupId}/${o(w)()}`},{default:O(()=>[L(v(se.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[se.playbackUrl?(t(),s("div",cy,v(se.playbackUrl),1)):(t(),s("div",my,_[45]||(_[45]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),L("Publish channel to get the playback url ")])))]),f.value?(t(),s("td",fy)):(t(),s("td",py,[e("button",{onClick:be=>ee(se.channelOutputId),class:"btn btn-outline-warning btn-sm"},_[46]||(_[46]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,vy)]))]),se.playbackUrl?(t(),s("tr",gy,[_[51]||(_[51]=e("td",null,null,-1)),e("td",by,[e("div",yy,[_[48]||(_[48]=e("h5",null,[L("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",$y,[e("div",wy,[e("button",{onClick:be=>G(se),class:"btn btn-outline-primary btn-sm"},_[47]||(_[47]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,hy)])])]),se.playbackConfigurations.length>0?(t(),s("div",ky,[e("table",_y,[e("tbody",null,[(t(!0),s(B,null,j(se.playbackConfigurations,(be,Be)=>(t(),s("tr",null,[e("td",null,v(Be+1),1),e("td",null,[L(v(be.name)+" ",1),e("div",null,[P(e("textarea",{"onUpdate:modelValue":Ee=>be.adDecisionServerUrl=Ee,class:"form-control",style:{"max-height":"4rem"},readonly:""},null,8,Sy),[[F,be.adDecisionServerUrl]])])]),e("td",Ty,[be.arn?x("",!0):(t(),s("button",{key:0,onClick:Ee=>He(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},_[49]||(_[49]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,My)),e("button",{onClick:Ee=>rt(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},_[50]||(_[50]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Iy)])]))),256))])])])):x("",!0)])])):x("",!0)],64))),128))]),_:1},512),[[_e,i.item.outputs.length>0]])])])])])],2),e("div",{class:le([c("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Cy,[e("div",xy,[e("table",Py,[_[67]||(_[67]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),P(D(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:O(()=>[(t(!0),s(B,null,j(i.item.programs,(se,xe)=>(t(),s("tr",{key:se.programId},[e("td",null,v(xe+1),1),e("td",null,[se.arn?(t(),s("span",Vy)):x("",!0),L(" "+v(se.name)+" ",1),_[56]||(_[56]=e("br",null,null,-1)),e("div",null,[e("div",null,[_[53]||(_[53]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),L(v(o(z).moment(se.dateScheduledStart).format("llll")),1)]),e("div",null,[_[54]||(_[54]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),L(v(o(z).moment(se.dateScheduledEnd).format("llll")),1)])]),se.relativeProgram?(t(),s(B,{key:1},[_[55]||(_[55]=L(" Relative Program: ")),e("span",Uy,v(se.relativeProgram.name),1)],64)):x("",!0)]),e("td",null,[se.totalProgramTemplateDurationInMillis!==se.durationInMillis?(t(),s("div",Oy,[_[57]||(_[57]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),L(" "+v(o(z).moment.utc(se.startOffsetMillis).format("HH:mm:ss"))+" - "+v(o(z).moment.utc(se.endOffsetMillis).format("HH:mm:ss")),1)])):x("",!0),se.adBreaksDurationInMillis?(t(),s("div",Ay,[_[58]||(_[58]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),L(" Ads: "+v(o(z).moment.utc(se.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):x("",!0),e("div",Dy,[_[59]||(_[59]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),L(" Total: "+v(o(z).moment.utc(se.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[D(me,{to:`${r.urlViewVideo}/${se.vodSource.video.videoId}/${o(w)()}`},{default:O(()=>[L(v(se.vodSource.video.title),1)]),_:2},1032,["to"]),_[60]||(_[60]=e("br",null,null,-1)),L(" ("+v(o(z).moment.utc(se.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("table",Hy,[e("tbody",null,[_[61]||(_[61]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"VOD")],-1)),(t(!0),s(B,null,j(se.adBreaks,(be,Be)=>(t(),s("tr",null,[e("td",Ey,v(Be+1),1),e("td",Ly,v(o(z).moment.utc(be.offsetMillis).format("HH:mm:ss")),1),e("td",By,v(o(z).moment.utc(be.durationInMillis).format("HH:mm:ss")),1),e("td",null,[D(me,{to:`${r.urlViewVodSource}/${be.vodSource.vodSourceId}/${o(w)()}`},{default:O(()=>[be.vodSource.arn?(t(),s("span",qy)):(t(),s("span",Ny)),L(" "+v(be.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])]),e("td",Ry,[e("div",zy,[_[66]||(_[66]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",Fy,[e("li",null,[e("button",{onClick:be=>T(se.programId),class:"dropdown-item"},_[62]||(_[62]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),L("Edit ")]),8,jy)]),se.arn?(t(),s("li",Gy,[e("button",{onClick:be=>ge(se.programId),class:"dropdown-item"},_[63]||(_[63]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),L("Unpublish ")]),8,Yy)])):(t(),s(B,{key:1},[e("li",null,[e("button",{onClick:be=>oe(se.programId),class:"dropdown-item"},_[64]||(_[64]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")]),8,Wy)]),e("li",null,[e("button",{onClick:be=>ae(se.programId),class:"dropdown-item"},_[65]||(_[65]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),L("Remove ")]),8,Ky)])],64))])])])]))),128))]),_:1},512),[[_e,i.item.programs.length>0]])])]),e("div",Jy,[e("button",{onClick:_[18]||(_[18]=se=>ne()),class:"btn btn-outline-primary"},_[68]||(_[68]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Program ")]))])])],2),f.value?(t(),s("div",{key:0,class:le([c("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",Qy,[e("div",Xy,[e("button",{onClick:_[19]||(_[19]=se=>it()),class:"btn btn-primary"},_[69]||(_[69]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),L("Watch ")]))]),e("div",Zy,[(t(!0),s(B,null,j(i.item.outputs,se=>(t(),s(B,null,[e("div",e$,[e("div",t$,[e("video",{id:`video-${se.channelOutputId}`,class:"card-img-top object-fit-contain"},null,8,s$),e("div",o$,[e("div",a$,[e("b",null,v(se.manifestName),1)])])])]),(t(!0),s(B,null,j(se.playbackConfigurations,(xe,be)=>(t(),s("div",l$,[e("div",n$,[e("video",{id:`video-${xe.channelOutputPlaybackConfigurationId}`,class:"card-img-top object-fit-contain"},null,8,r$),e("div",i$,[e("div",d$,[L("#"+v(be+1)+" ",1),e("b",u$,v(xe.name),1)])])])]))),256))],64))),256))])])],2)):x("",!0),e("div",{class:le([c("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",c$,[_[75]||(_[75]=L(" Checklist ")),e("ul",null,[e("li",null,[i.item.fillerSlateSourceLocation.arn?(t(),s("span",m$)):(t(),s("span",f$)),_[70]||(_[70]=L(" Filler Slate Source Location "))]),e("li",null,[i.item.fillerSlateVodSource.arn?(t(),s("span",p$)):(t(),s("span",v$)),_[71]||(_[71]=L(" ni Filler Slate VOD Source "))]),e("li",null,[i.item.outputs.length>0?(t(),s("span",g$)):(t(),s("span",b$)),_[73]||(_[73]=L(" Outputs ")),e("ul",null,[e("li",null,[i.item.outputs.some(se=>se.playbackConfigurations.length>0)?(t(),s("span",y$)):(t(),s("span",$$)),_[72]||(_[72]=L(" Ad Insertion setup "))])])]),e("li",null,[i.item.programs.length>0?(t(),s("span",w$)):(t(),s("span",h$)),_[74]||(_[74]=L(" Programs "))])])])],2)])])):x("",!0)]),_:1},8,["errorMessage"]),D(c1,{ref_key:"modalAddProgram",ref:m,onRefresh:C},null,512),D(D1,{ref_key:"modalAddPlaybackConfiguration",ref:V,onRefresh:C},null,512),D(ab,{ref_key:"modalAddChannelOutput",ref:l,onRefresh:C},null,512),D(lt,{ref_key:"modalEditProgram",ref:A,onOnClose:C},null,512),D(Tb,{ref_key:"modalEditFillerSlate",ref:a,onRefresh:C},null,512)])]),_:1})}}},_$={path:"/",component:Ko,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:ba},{path:"users/add",component:Ra},{path:"users",component:Xa},{path:"users/view/:id",component:hl,props:!0},{path:"videos/add",component:Wl},{path:"videos/edit/:id",component:bn,props:!0},{path:"videos",component:Mn},{path:"videos/view/:id",component:Zn,props:!0},{path:"source-groups/add",component:ar},{path:"source-groups/edit/:id",component:rr,props:!0},{path:"source-groups",component:gr},{path:"source-groups/view/:id",component:Or,props:!0},{path:"source-locations/add",component:qr},{path:"source-locations/edit/:id",component:zr,props:!0},{path:"source-locations",component:Xr},{path:"source-locations/view/:id",component:wi,props:!0},{path:"vod-sources/add",component:Yi},{path:"vod-sources/edit/:id",component:Ji,props:!0},{path:"vod-sources",component:rd},{path:"vod-sources/view/:id",component:uc,props:!0},{path:"channels/add",component:dp},{path:"channels/edit/:id",component:mp,props:!0},{path:"channels",component:wp},{path:"channels/schedule-programs/:id",component:rg,props:!0},{path:"channels/view/:id",component:k$,props:!0},{path:"program-templates/add",component:em},{path:"program-templates/edit/:id",component:Hm,props:!0},{path:"program-templates",component:Ym},{path:"program-templates/view/:id",component:Lf,props:!0}]},nt=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{..._$}]}),S$={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const r=this,$=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();$.on("onNotificationCreated",function(k){let g=k.content;k.notificationEntityClassText==="Deposit"&&(g+="<br/>",g+=`<a href="${r.urlViewDeposit}${k.referenceId}">Click ${k.notificationEntityClassText} here</a>`),k.notificationEntityClassText==="Withdraw"&&(g+="<br/>",g+=`<a href="${r.urlViewWithdraw}${k.referenceId}">Click ${k.notificationEntityClassText} here</a>`),k.notificationEntityClassText==="ManualModeOfPayment"&&(g+="<br/>",g+=`<a href="${r.urlViewManualModeOfPayment}${k.referenceId}">Click ${k.notificationEntityClassText} here</a>`),k.iconClass;let R="secondary";switch(k.notificationType){case 1:R="success";break;case 3:R="info";break;case 3:R="success";break;case 4:R="info";break;case 5:R="warning";break;case 6:R="error";break}r.$toast[R](k.subject,g,{timeOut:1e4});const S=k.subject,h={body:g,icon:"/img/192x102.png"};new Notification(S,h)}),$.on("jobUpdated",function(k){r.$bus.$emit("event:job-updated",k)}),await $.start().then(function(){}).catch(function(k){})}}};function T$(r,u,$,k,g,R){return t(),s("div")}const M$=Te(S$,[["render",T$],["__scopeId","data-v-5b4a9fa2"]]),I$={class:"navbar bg-light","data-bs-theme":"light"},C$={class:"container-md"},x$={class:"col-sm-auto"},P$={class:"navbar-brand mb-0"},V$={class:"col-sm flex-fill"},U$={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(r){return(u,$)=>(t(),ue(ce,null,{default:O(()=>[e("div",null,[e("nav",I$,[e("div",C$,[e("div",{class:le([r.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",x$,[Oe(u.$slots,"title",{},()=>[e("h1",P$,[e("i",{class:le([r.pageIcon,"me-1"])},null,2),e("span",null,v(r.pageTitle),1)])])]),e("div",V$,[Oe(u.$slots,"default")])],2)])])])]),_:3}))}},O$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},A$=["innerHTML"],D$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},H$={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(r){return(u,$)=>(t(),ue(ce,null,{default:O(()=>[Oe(u.$slots,"default",{},()=>[r.errorMessage?(t(),s("div",O$,[$[0]||($[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:r.errorMessage},null,8,A$)])):x("",!0),r.vuelidate&&r.vuelidate.$error?(t(),s("div",D$,[$[1]||($[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,j(r.vuelidate.$errors,k=>(t(),s("li",{key:k.$uid},[k.$validator==="$each"?(t(),s(B,{key:0},[L(" Check errors in '"+v(k.$property)+"' ",1)],64)):(t(),s(B,{key:1},[L(v(k.$message),1)],64))]))),128))])])):x("",!0)])]),_:3}))}},E$={class:"mt-2 container-md"},L$={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(r){return(u,$)=>{const k=X("PageMessages");return t(),ue(ce,null,{default:O(()=>[e("div",E$,[D(k,{errorMessage:r.errorMessage,vuelidate:r.vuelidate},null,8,["errorMessage","vuelidate"]),Oe(u.$slots,"default")])]),_:3})}}},B$={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const r=this;r.busy||(document.activeElement&&document.activeElement.blur(),await r.search(1))},async moveFirst(){const r=this;if(r.busy)return;r.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await r.search(1))},async moveLast(){const r=this;if(r.busy)return;const u=r.filter;u.pageIndex!==u.totalPages&&(document.activeElement&&document.activeElement.blur(),await r.search(u.totalPages))},async move(r){const u=this;if(u.busy)return;const $=u.filter,k=$.pageIndex+r;k>=0&&k<=$.totalPages&&(document.activeElement&&document.activeElement.blur(),await u.search(k))}}},q$={class:"mt-2"},N$={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},R$={key:0,class:"col-sm order-2 order-sm-1"},z$={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},F$={class:"me-1 fw-bold"},j$={class:"fw-bold"},G$={class:"ms-1"},Y$={class:"col-sm order-1 order-sm-2"},W$={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},K$={key:0,class:"page-item"},J$={key:1,class:"page-item"},Q$={key:2,class:"page-item"},X$={class:"page-item active"},Z$={class:"page-link"},ew={key:3,class:"page-item"},tw={key:4,class:"page-item"},sw={key:5,class:"page-item"},ow={key:1,class:"text-info font-weight-bold text-center"},aw={key:0},lw={key:1};function nw(r,u,$,k,g,R){return t(),s("div",q$,[$.filter.items.length?(t(),s("div",N$,[$.showPerPage?(t(),s("div",R$,[e("div",z$,[e("div",null,[e("span",F$,v($.filter.totalCount),1),u[8]||(u[8]=L("records in ")),e("span",j$,v($.filter.totalPages),1),u[9]||(u[9]=L(" page(s) "))]),e("div",G$,[P(e("select",{"onUpdate:modelValue":u[0]||(u[0]=S=>$.filter.pageSize=S),onChange:u[1]||(u[1]=(...S)=>R.changePagination&&R.changePagination(...S)),class:"form-select form-select-sm me-1"},u[10]||(u[10]=[ze('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ve,$.filter.pageSize]])]),u[11]||(u[11]=e("div",{class:"ms-1"},"per page",-1))])])):x("",!0),e("div",Y$,[e("ul",W$,[$.filter.pageIndex!==1?(t(),s("li",K$,[e("button",{class:"page-link","aria-label":"Previous",onClick:u[2]||(u[2]=(...S)=>R.moveFirst&&R.moveFirst(...S))},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):x("",!0),$.filter.pageIndex>2?(t(),s("li",J$,[e("button",{class:"page-link",onClick:u[3]||(u[3]=S=>R.move(-2))},v($.filter.pageIndex-2),1)])):x("",!0),$.filter.pageIndex>1?(t(),s("li",Q$,[e("button",{class:"page-link",onClick:u[4]||(u[4]=S=>R.move(-1))},v($.filter.pageIndex-1),1)])):x("",!0),e("li",X$,[e("span",Z$,v($.filter.pageIndex),1)]),$.filter.pageIndex<$.filter.totalPages?(t(),s("li",ew,[e("button",{class:"page-link",onClick:u[5]||(u[5]=S=>R.move(1))},v($.filter.pageIndex+1),1)])):x("",!0),$.filter.pageIndex<$.filter.totalPages-1?(t(),s("li",tw,[e("button",{class:"page-link",onClick:u[6]||(u[6]=S=>R.move(2))},v($.filter.pageIndex+2),1)])):x("",!0),$.filter.pageIndex<$.filter.totalPages?(t(),s("li",sw,[e("button",{class:"page-link","aria-label":"Next",onClick:u[7]||(u[7]=(...S)=>R.moveLast&&R.moveLast(...S))},u[13]||(u[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):x("",!0)])])])):(t(),s("div",ow,[$.noRecords?(t(),s("div",aw,v($.noRecords),1)):(t(),s("div",lw,"No record(s) found."))]))])}const rw=Te(B$,[["render",nw]]),iw={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let r=this;if(!r.enabled)return;let u=r.filter;u.sortField===r.field?u.sortOrder===0?u.sortField=null:u.sortOrder=u.sortOrder===0?1:0:(u.sortField=r.field,u.sortOrder=1),r.$emit("search")}}},dw={class:"align-self-center"};function uw(r,u,$,k,g,R){return t(),s("div",{onClick:u[0]||(u[0]=(...S)=>R.click&&R.click(...S)),class:"d-flex flex-row justify-content-start align-content-center",style:et({cursor:$.enabled?"pointer":""})},[Oe(r.$slots,"default"),e("span",dw,[$.showSort?(t(),s("span",{key:0,class:le([{"fa-sort text-gray-500":!R.currentSortField(),"fa-sort-up":R.currentSortField()&&R.sortUp(),"fa-sort-down":R.currentSortField()&&!R.sortUp()},"fas fa-fw mr-1"])},null,2)):x("",!0)])],4)}const cw=Te(iw,[["render",uw]]),mw={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(r){const u=this;u.setSelected(r),u.$emit("onSelectedRow",r)}}},fw={class:"table-responsive m-0"},pw=["href"],vw={key:1},gw=["onClick"],bw={class:"form-group row no-gutters"},yw={class:"col-5 col-form-label"},$w={class:"col align-self-center"},ww=["href"],hw={key:1};function kw(r,u,$,k,g,R){return t(),s("div",null,[e("div",fw,[e("table",{class:le(["table table-hover d-none d-md-table card",$.tableCss])},[e("thead",null,[Oe(r.$slots,"header",{},()=>[u[0]||(u[0]=e("th",null,"#",-1)),(t(!0),s(B,null,j($.header.columns,S=>(t(),s("th",null,v(S.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(B,null,j($.items,(S,Y)=>Oe(r.$slots,"table-row",{key:`row1-${S[$.header.key]}`,item:S,index:Y},()=>[e("td",null,v($.getRowNumber(Y)),1),(t(!0),s(B,null,j($.header.columns,N=>(t(),s("td",null,[N.href?(t(),s("a",{key:0,href:N.href(S[$.header.key]),class:"font-weight-bold"},v(S[N.field]),9,pw)):(t(),s("span",vw,v(S[N.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:le(["d-block d-md-none",$.rowCss])},[(t(!0),s(B,null,j($.items,(S,Y)=>(t(),s("div",{key:`row2-${S[$.header.key]}`,onClick:N=>R.onSelectedRow(S),class:"border"},[e("div",{class:le(["p-2",{"b-left":$.isSelected(S)}])},[Oe(r.$slots,"table-list",{item:S,index:Y},()=>[(t(!0),s(B,null,j($.header.columns,N=>(t(),s("div",bw,[e("label",yw,v(N.title),1),e("div",$w,[N.href?(t(),s("a",{key:0,href:N.href(S[$.header.key]),class:"font-weight-bold"},v(S[N.field]),9,ww)):(t(),s("span",hw,v(S[N.field]),1))])]))),256))],!0)],2)],8,gw))),128))],2)])}const _w=Te(mw,[["render",kw],["__scopeId","data-v-65929213"]]),Ie=gt(yt);Ie.use(bt());Ie.use(nt);Ie.component("m-notification",M$);Ie.component("m-pagination",rw);Ie.component("sort-field",cw);Ie.component("table-list",_w);Ie.component("Toasts",jo);Ie.component("PageHeader",U$);Ie.component("PageMessages",H$);Ie.component("PageBody",L$);const Sw="https://sonyfastpoc.azurewebsites.net/",Tw="Arcadian-Sony FAST",Mw=void 0,Iw={API_URL:Sw,appName:Tw,tenantId:Mw};Ie.provide("$config",Iw);Ie.provide("$bus",Fe);Ie.mount("#app");
