import{o as t,c as ve,r as te,d as Ke,h as it,u as Qe,a as de,L as Fe,e as ze,b as s,f as e,g as F,w as z,i as W,t as f,F as L,j as B,k as H,l as me,m as Je,n as xe,p as dt,q as Ge,s as Xe,P as je,v as be,x as oe,y as le,z as Te,T as ye,A as gt,B as o,C as N,D as X,E as ut,G as ee,H as bt,I as ct,J as ke,K as Ue,M as Me,N as Ne,O as ge,Q as Le,R as Se,S as _e,U as Re,V as qe,W as rt,X as yt,Y as $t,Z as wt,_ as Be,$ as ht,a0 as _t}from"./vendor-CGMnXvqM-chunk.js";(function(){const g=document.createElement("link").relList;if(g&&g.supports&&g.supports("modulepreload"))return;for(const T of document.querySelectorAll('link[rel="modulepreload"]'))O(T);new MutationObserver(T=>{for(const D of T)if(D.type==="childList")for(const A of D.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&O(A)}).observe(document,{childList:!0,subtree:!0});function M(T){const D={};return T.integrity&&(D.integrity=T.integrity),T.referrerPolicy&&(D.referrerPolicy=T.referrerPolicy),T.crossOrigin==="use-credentials"?D.credentials="include":T.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function O(T){if(T.ep)return;T.ep=!0;const D=M(T);fetch(T.href,D)}})();const kt={__name:"App",setup(a){return(g,M)=>{const O=te("router-view");return t(),ve(O)}}},St=Ke({id:"alert",state:()=>({alert:null}),actions:{success(a){this.alert={message:a,type:"alert-success"}},error(a){this.alert={message:a,type:"alert-danger"}},clear(){this.alert=null}}});function Ze(){const a=R=>{var u;let U=R,C=U.response,h="";if(!U.response)return R.message;if(C.status===500){if(typeof C.data=="string")return C.data;if(C.data.content)return C.data.content;if(C.data.detail)return C.data.detail}if(C.status===401){const Q=`${window.location.pathname}${window.location.search}`;h=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(Q)}`}'>here</a> to login.`}else if(C.status===400){let Q=U.response.data.errors;h=U.response.data.title||U.response.data,Q&&(h+="<ul>");for(let J in Q){let d=Q[J];for(let y in Q[J]){let j=d[y];h+=`<li>${j}</li>`}}Q&&(h+="</ul>"),h||(h=U.message),h&&h.content&&(h=h.content)}else C.status===404?h=((u=C==null?void 0:C.data)==null?void 0:u.title)||(C==null?void 0:C.data)||"Record not found.":typeof C.data=="string"&&(h=U.message,h===""&&(h=`Error <b>Http ${C.status}</b>.<br/>Please contact the System Administrator.`));return h},g=R=>JSON.parse(JSON.stringify(R)),M=R=>{if(typeof R!="number")return R;var U=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return U.format(R)},O=(R,U,C)=>{const u={value:U,expiry:new Date().getTime()+C};debugger;localStorage.setItem(R,JSON.stringify(u))},T=R=>{debugger;const U=localStorage.getItem(R);if(!U)return null;const C=JSON.parse(U);return new Date().getTime()>C.expiry?(localStorage.removeItem(R),null):C.value},D="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:a,clone:g,toCurrency:M,moment:it,localStorageSetWithExpiry:O,localStorageGetWithExpiry:T,setPageTab:(R,U)=>{var C=localStorage.getItem(D);C?C=JSON.parse(C):C={},C[R]=U,localStorage.setItem(D,JSON.stringify(C))},getPageTab:R=>{var U=localStorage.getItem(D);return U?U=JSON.parse(U):U={},U[R]},createHlsStream:(R,U,C)=>{var h=new Hls({autoStartLoad:C??!0});return h.on(Hls.Events.MEDIA_ATTACHED,function(){}),h.on(Hls.Events.MANIFEST_PARSED,function(u,Q){console.log("manifest loaded, found "+Q.levels.length+" quality level")}),h.on(Hls.Events.ERROR,function(u,Q){if(Q.fatal)switch(Q.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),h.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",Q);break;default:h.destroy();break}}),h.loadSource(U),h.attachMedia(R),h},isValidTime:R=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(R),generateReturnUrl:()=>{const R=Qe();let U=R.path;return R.query.returnUrl&&(U=R.query.returnUrl),U=`?returnUrl=${encodeURIComponent(U)}`,U},getValidFeedbackCss:R=>R?"is-valid":"is-invalid"}}const Tt=Ze(),mt=JSON.parse(localStorage.getItem("user"))||{},It=Tt.moment.utc(mt.exp*1e3),Mt=It.isAfter()?mt:null,he=Ke({id:"auth",state:()=>({user:Mt,returnUrl:null}),actions:{async login(a){try{this.user=a,localStorage.setItem("user",JSON.stringify(a))}catch(g){debugger;alert(g)}},logout(){this.user=null,localStorage.removeItem("user"),at.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),xt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(xt));const Ct={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://lively-bay-00480981e.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'"},We=Ct,et=Ke("msal",()=>{const a=de({auth:{clientId:We.VITE_AUTH_CLIENT_ID,authority:We.VITE_AUTH_AUTHORITY_URL,postLogoutUri:We.VITE_AUTH_POST_LOGOUT_URI},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1},system:{loggerOptions:{logLevel:Fe.Verbose,loggerCallback:(O,T,D)=>{if(!D)switch(O){case Fe.Error:console.error(T);return;case Fe.Info:console.info(T);return;case Fe.Verbose:console.debug(T);return;case Fe.Warning:console.warn(T);return}},piiLoggingEnabled:!1}}}),g=de("");return{msalConfig:a,accessToken:g,setAccessToken:O=>{g.value=O}}}),tt={$on:(...a)=>ze.on(...a),$once:(...a)=>ze.once(...a),$off:(...a)=>ze.off(...a),$emit:(...a)=>ze.emit(...a)};function Vt(){const a=(D,A,K,Y)=>{tt.$emit("toast-message",{title:D,message:A,type:K,options:Y})};return{success:(D,A,K={})=>{a(D,A,"success",K)},warning:(D,A,K={})=>{a(D,A,"warning",K)},info:(D,A,K={})=>{a(D,A,"info",K)},error:(D,A,K={})=>{a(D,A,"danger",K)}}}const Pe=(a,g)=>{const M=a.__vccOpts||a;for(const[O,T]of g)M[O]=T;return M},Pt={data(){return{notifications:[],messages:[]}},async created(){const a=this;a.$bus.$on("event:notification-received",()=>{a.getUnreadNotifications()}),a.$bus.$on("event:notification-marked-as-read",g=>{a.notifications.some(O=>O.notificationId===g)&&a.getUnreadNotifications()}),a.$bus.$on("event:notification-removed",g=>{a.notifications.some(O=>O.notificationId===g)&&a.getUnreadNotifications()}),a.$bus.$on("event:chat-marked-as-read",a.onChatMarkedAsRead),a.$bus.$on("event:chat-message-received",a.onChatMessageReceived)},async mounted(){const a=this,g=a.$refs.notifications,M=a.$refs.messages;g&&g.offsetParent,M&&M.offsetParent&&await a.getUnreadChats()},methods:{async logout(){const a=this;try{await a.$util.axios.post("/api/accounts/logout").then(g=>{const M="/";a.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){a.$util.href(M)}})})}catch(g){a.$util.handleError(g)}},async onChatMarkedAsRead(a){let g=this,M=g.messages.find(O=>O.chatId===a);if(M){let O=g.messages.indexOf(M);g.messages.splice(O,1)}},async onChatMessageReceived(a){let g=this,M=g.messages.find(T=>T.chatId===a.chatId);if(M)M.lastMessageText=a.content;else{var O={chatId:a.chatId,isRead:!1,lastDateSent:a.dateSent,lastMessageText:a.content,senderFirstLastName:`${a.sender.firstName} ${a.sender.lastName}`,senderInitials:a.sender.initials,senderProfilePicture32:a.sender.profilePicture32,urlPicture:g.$util.getProfilePictureUrl(a.sender.profilePicture32,a.sender.initials)};g.messages.push(O)}},async getUnreadNotifications(){const a=this;try{await a.$util.axios.get("api/accounts/unread-notifications").then(g=>{a.notifications=g.data})}catch(g){a.$util.handleError(g)}},async getUnreadChats(){const a=this;try{await a.$util.axios.get("api/accounts/unread-chats").then(g=>{a.messages=g.data;for(let M in a.messages){let O=a.messages[M];a.$set(O,"urlPicture",a.$util.getProfilePictureUrl(O.senderProfilePicture32,O.senderInitials))}})}catch(g){a.$util.handleError(g)}},viewNotification(a){this.$bus.$emit("event:open-notification",a)},viewChat(a){this.$bus.$emit("event:open-chat",a)},showHiddenElements(){let g=this.$el.getElementsByClassName("initialHidden");for(let M=0;M<g.length;M++)g[M].classList.remove("invisible")}}},Ot={mixins:[Pt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const g=he().user;return{user:g,username:g?g.nameFull:"Guest"}},async mounted(){},methods:{isActive(a){return window.location.href.indexOf(a)>-1},async openModalSearchUser747(a){this.$refs.refModalSearchUser747.open(a)}}},At={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ut={class:"container-md"},Lt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Dt={class:"navbar-nav"},Ht={class:"nav-item dropdown"},Et={class:"dropdown-menu","aria-labelledby":"dropdown01"},qt={class:"nav-item dropdown"},Bt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Nt={class:"navbar-nav ms-auto"},Rt={class:"nav-item dropdown"},Ft={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},zt={class:"d-inline d-sm-none d-md-inline"},Gt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},jt={class:"text-capitalize"};function Yt(a,g,M,O,T,D){const A=te("router-link");return t(),s("nav",At,[e("div",Ut,[F(A,{class:"navbar-brand",to:"/member"},{default:z(()=>[W(f(M.appName),1)]),_:1}),g[14]||(g[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Lt,[e("ul",Dt,[e("li",Ht,[g[3]||(g[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Et,[e("li",null,[F(A,{class:"dropdown-item",to:"/member/announcements"},{default:z(()=>g[0]||(g[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),W(" Announcements ")])),_:1})]),e("li",null,[F(A,{class:"dropdown-item",to:"/member/posts"},{default:z(()=>g[1]||(g[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),W(" Posts ")])),_:1})]),e("li",null,[F(A,{class:"dropdown-item",to:"/member/yellow-pages"},{default:z(()=>g[2]||(g[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),W(" Yellow Pages ")])),_:1})])])]),e("li",qt,[g[5]||(g[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Bt,[e("li",null,[F(A,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:z(()=>g[4]||(g[4]=[W(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Nt,[e("li",Rt,[e("a",Ft,[e("span",null,[g[6]||(g[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",zt,f(T.username),1)])]),e("ul",Gt,[g[9]||(g[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),g[10]||(g[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),g[11]||(g[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),g[12]||(g[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),T.user&&T.user.roles.length>1?(t(!0),s(L,{key:0},B(T.user.roles,K=>(t(),s("li",null,[F(A,{to:`/${K.toLowerCase()}`,class:"dropdown-item"},{default:z(()=>[e("span",jt,f(K),1)]),_:2},1032,["to"])]))),256)):H("",!0),e("li",null,[F(A,{to:"/",class:"dropdown-item"},{default:z(()=>g[7]||(g[7]=[W(" Main ")])),_:1})]),g[13]||(g[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[F(A,{to:"/account/logout",class:"dropdown-item"},{default:z(()=>g[8]||(g[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),W("Logout ")])),_:1})])])])])])])])}const Wt=Pe(Ot,[["render",Yt]]),Kt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const a=document.getElementById("top");a&&a.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let a=this;if(!a.$el.getElementsByClassName)return;let g=a.$el.getElementsByClassName("initialHidden");for(let M=0;M<g.length;M++){let O=g[M];O.classList.remove("invisible"),O.classList.remove("d-none")}},close(){const a=this,g=document.referrer.toLowerCase();g&&g.includes("/account/login")?a.$router.go(-2):a.$router.go(-1)},toggle(a){const g=this;g.toggles[a]=!g.toggles[a],localStorage.setItem(g.togglesKey,JSON.stringify(g.toggles))}}},Qt={mixins:[Kt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(a){return window.location.href.indexOf(a)>-1}}},Jt={class:"footer sticky-bottom"},Xt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Zt={class:"container-md"},es={class:"navbar-text small p-0"},ts={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},ss={class:"container-md"},os={class:"navbar-nav nav-fill w-100"},as={class:"nav-item dropup"},ls={class:"dropdown-menu","aria-labelledby":"dropdown01"},ns={class:"nav-item dropup"},rs={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function is(a,g,M,O,T,D){const A=te("router-link");return t(),s("footer",Jt,[e("div",Xt,[e("div",Zt,[e("span",es,"©"+f(T.copyright),1)])]),e("nav",ts,[e("div",ss,[e("ul",os,[e("li",as,[g[3]||(g[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",ls,[e("li",null,[F(A,{class:"dropdown-item",to:"/member/announcements"},{default:z(()=>g[0]||(g[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),W(" Announcements ")])),_:1})]),e("li",null,[F(A,{class:"dropdown-item",to:"/member/posts"},{default:z(()=>g[1]||(g[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),W(" Posts ")])),_:1})]),e("li",null,[F(A,{class:"dropdown-item",to:"/member/yellow-pages"},{default:z(()=>g[2]||(g[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),W(" Yellow Pages ")])),_:1})])])]),e("li",ns,[g[5]||(g[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",rs,[e("li",null,[F(A,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:z(()=>g[4]||(g[4]=[W(" Property Monthly Dues ")])),_:1})])])])])])])])}const ds=Pe(Qt,[["render",is]]),us={name:"AdminLayout",components:{TopNav:Wt,BottomNav:ds},inject:["$config"],mounted(){const g=this.$config;document.title=`Account - ${g.appName}`}},cs={class:"d-flex flex-column vh-100"};function ms(a,g,M,O,T,D){const A=te("Toasts"),K=te("router-view");return t(),s("div",cs,[F(A),F(K,{class:"flex-grow-1 mb-2"})])}const fs=Pe(us,[["render",ms]]),ps={__name:"index",setup(a){return he().user,me(()=>{}),(M,O)=>(t(),s("div",null,O[0]||(O[0]=[Je('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},vs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://lively-bay-00480981e.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'"},gs=vs;function bs(){xe("$config");const a=gs.VITE_API_URL,g=dt.create({baseURL:a});return Ge.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),g.interceptors.request.use(M=>{Ge.start();const{user:O}=he();return O&&O.token&&(M.headers?(M.headers.Authorization||(M.headers.Authorization=`Bearer ${O.token}`),M.headers["Access-Control-Allow-Origin"]||(M.headers["Access-Control-Allow-Origin"]="*")):M.headers={Authorization:`Bearer ${O.token}`,"Access-Control-Allow-Origin":"*"}),M}),g.interceptors.response.use(M=>(Ge.done(),M),M=>{throw Ge.done(),M}),g}function we(a){if(!a.appTitle)throw Error("App Title is required.");if(!a.pageTitle)throw Error("Page Title is required.");const g=Qe(),M=Xe(),O=bs(),T=Ze(),D=Vt(),K=he().user,Y=()=>K&&K.roles&&K.roles.includes("System"),V=()=>K&&K.roles&&K.roles.includes("administrator"),G=()=>K&&K.roles&&K.roles.includes("employee"),se=()=>K&&K.roles&&K.roles.includes("Member"),R=async()=>{const j=document.referrer.toLowerCase();j&&j.includes("/accounts/login")?await M.go(-2):await M.go(-1)},U=j=>{var r;const p=g.path,x=(r=g.query)==null?void 0:r.returnUrl;x&&!(p.startsWith(x)||x.startsWith(p))?M.push(x):M.push(j)},C=a.appTitle,h=a.pageTitle,u=de(!1),Q=de(new Map),J=de(""),d=de(""),y=de("");return{appTitle:C,pageTitle:h,busy:u,validations:Q,infoMessage:J,warningMessage:d,errorMessage:y,router:M,route:g,axios:O,utils:T,toasts:D,close:R,closeWithReturnUrl:U,generateReturnUrl:T.generateReturnUrl,security:{userId:K?K.userId:"",isSystem:Y(),isAdministrator:V(),isEmployee:G(),isMember:se()}}}const ys={class:"h-100 d-flex align-items-center justify-content-center"},$s={class:"form-signin w-100 m-auto"},ws={class:"h3 mb-3 fw-normal"},hs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_s=["innerHTML"],ks={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ss=["disabled"],Ts={key:0,class:"fas fa-fw fa-sync fa-spinner fa-spin me-2"},Is={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(a){xe("$config");const g=he(),M=et(),O=new je(M.msalConfig),T=be({username:"",password:""}),D={username:{required:oe.withMessage("Username is required.",le),$autoDirty:!0,$lazy:!0},password:{required:oe.withMessage("Password is required.",le),$autoDirty:!0,$lazy:!0}},A=Te(D,T),{appTitle:K,pageTitle:Y,busy:V,isDirty:G,validations:se,infoMessage:R,warningMessage:U,errorMessage:C,router:h,route:u,axios:Q,utils:J,toasts:d,close:y,security:j}=we({appTitle:"Sony FAST POC",pageTitle:"Sign On"}),p={redirectUri:window.location.origin+"/accounts/login"};me(async()=>{V.value=!0,await O.initialize();try{const i=await O.ssoSilent(p);if(i){await r(i.account);return}}catch(i){i.errorCode!=="login_required"&&d.error("Error while Signing In",i)}await O.handleRedirectPromise().then(async i=>{if(i){const n=O.getAllAccounts();if(n.length===0){await O.loginRedirect(p);return}const v=n[0];await r(v);return}else{d.info("SignIn","No recent session. Please sign in using your AD Account.");return}}).catch(i=>{debugger;d.error("Error while Signing In",i),console.log(i)}),V.value=!1});const x=async()=>{var i={account:O.getActiveAccount(),scopes:[]};await O.acquireTokenSilent(i).then(n=>{const l=n.account.idToken,b=gt(l);b.token=n.accessToken,console.log(n),b.roles||(b.roles=[]),b.userId=b.sub,g.login(b);var m=u.query.returnUrl;m?h.push(decodeURIComponent(m)):b.roles.length===1?h.push(`/${b.roles[0].toLowerCase()}`):h.push("/")}).catch(n=>{console.error(`error during acquireTokenSilent: ${n}`)})},r=async i=>{O.setActiveAccount(i),d.success("SignIn","Sign in successful.",{onClose:async()=>{await x()}})},_=async()=>{const i=O.getAllAccounts();if(i.length===0){await O.loginRedirect(p);return}const n=i[0];await r(n)};return(i,n)=>(t(),ve(ye,null,{default:z(()=>[e("div",ys,[e("main",$s,[e("div",null,[e("h1",ws,f(o(K)),1),e("div",null,[o(C)?(t(),s("div",hs,[n[1]||(n[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(C)},null,8,_s)])):H("",!0),o(A).$error?(t(),s("div",ks,[n[2]||(n[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(A).$errors,v=>(t(),s("li",{key:v.$uid},f(v.$message),1))),128))])])):H("",!0)]),e("button",{onClick:n[0]||(n[0]=v=>_()),disabled:o(V),class:"btn btn-primary w-100 py-2"},[o(V)?(t(),s("span",Ts)):H("",!0),n[3]||(n[3]=W("Single Sign On "))],8,Ss)])])])]),_:1}))}},Ms=Pe(Is,[["__scopeId","data-v-e1d5198f"]]),xs={__name:"loginRedirect",setup(a){const g=useMsal(),M=new je(g.msalConfig);debugger;return me(async()=>{debugger;await M.initialize(),await M.handleRedirectPromise()}),(O,T)=>(t(),ve(ye,null,{default:z(()=>T[0]||(T[0]=[e("div",null," Login successful, redirecting... ",-1)])),_:1}))}},Cs={class:"h-100 d-flex align-items-center justify-content-center"},Vs={__name:"logout",setup(a){const g=he();return g.user,me(async()=>{g.logoutWithRedirect()}),(M,O)=>(t(),s("div",Cs,O[0]||(O[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[W(" You have logged out from HOA MS."),e("br"),W(" Click "),e("a",{href:"/",class:"d-inline"},"here"),W(" to go back to home page. ")])],-1)])))}},Ps={class:"h-100 d-flex align-items-center justify-content-center"},Os={class:"card m-3"},As={class:"card-header"},Us={class:"card-body"},Ls={class:"m-2"},Ds={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Hs=["innerHTML"],Es={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qs={class:"row row-cols-1 row-cols-sm-3"},Bs={class:"col-sm"},Ns={class:"form-group"},Rs={key:0,class:"d-block invalid-feedback"},Fs={class:"col-sm"},zs={class:"form-group"},Gs={key:0,class:"d-block invalid-feedback"},js={class:"col-sm"},Ys={class:"form-group"},Ws={key:0,class:"d-block invalid-feedback"},Ks={class:"row row-cols-1 row-cols-sm-3"},Qs={class:"col"},Js={class:"form-group"},Xs={key:0,class:"d-block invalid-feedback"},Zs={class:"col"},eo={class:"form-group"},to={key:0,class:"d-block invalid-feedback"},so={class:"row row-cols-1 row-cols-sm-3"},oo={class:"col-sm"},ao={class:"form-group"},lo={key:0,class:"d-block invalid-feedback"},no={class:"col-sm"},ro={class:"form-group"},io={key:0,class:"d-block invalid-feedback"},uo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},co={class:"col"},mo=["disabled"],fo={class:"col"},po={class:"col"},vo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(a){const g=be({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),M=(j,p)=>j===p.password,O={firstName:{required:oe.withMessage("First name is required.",le),$autoDirty:!0,$lazy:!0},middleName:{required:oe.withMessage("Middle name is required.",le),$autoDirty:!0,$lazy:!0},lastName:{required:oe.withMessage("Last name is required.",le),$autoDirty:!0,$lazy:!0},phoneNumber:{required:oe.withMessage("Phone number is required.",le),$autoDirty:!0,$lazy:!0},email:{required:oe.withMessage("Email is required.",le),$autoDirty:!0,$lazy:!0},password:{required:oe.withMessage("Password is required.",le),$autoDirty:!0,$lazy:!0},confirmPassword:{required:oe.withMessage("Confirm password is required.",le),confirmSamePassword:oe.withMessage("Password and confirm passwrod are different.",M),$autoDirty:!0,$lazy:!0}},T=Te(O,g),{appTitle:D,pageTitle:A,busy:K,isDirty:Y,validations:V,infoMessage:G,warningMessage:se,errorMessage:R,router:U,axios:C,utils:h,toasts:u,close:Q,security:J}=we({appTitle:"HOA MS",pageTitle:"Register User"}),d=xe("$config");me(()=>{});const y=async()=>{const j=g;if(K.value)return;if(!await T.value.$validate()){window.scrollTo(0,0);return}R.value=null;try{K.value=!0;const x=h.clone(j);x.tenantid=d.tenantId;debugger;await C({method:"post",url:"/api/v1/accounts/register",data:x}).then(r=>{u.success("Register","Registration was successfull.",{onClose:async()=>{await U.push("/accounts/login")}})})}catch(x){R.value=h.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{K.value=!1}};return(j,p)=>{const x=te("router-link");return t(),ve(ye,null,{default:z(()=>[e("div",Ps,[e("div",Os,[e("h4",As,f(o(A)),1),e("div",Us,[e("div",Ls,[o(R)?(t(),s("div",Ds,[p[8]||(p[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(R)},null,8,Hs)])):H("",!0),o(T).$error?(t(),s("div",Es,[p[9]||(p[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(T).$errors,r=>(t(),s("li",{key:r.$uid},f(r.$message),1))),128))])])):H("",!0)]),e("div",qs,[e("div",Bs,[e("div",Ns,[p[10]||(p[10]=e("label",null,"First Name",-1)),N(e("input",{"onUpdate:modelValue":p[0]||(p[0]=r=>g.firstName=r),type:"text",class:"form-control"},null,512),[[X,g.firstName]]),o(T).firstName.$error?(t(),s("div",Rs,[(t(!0),s(L,null,B(o(T).firstName.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])]),e("div",Fs,[e("div",zs,[p[11]||(p[11]=e("label",null,"Middle Name",-1)),N(e("input",{"onUpdate:modelValue":p[1]||(p[1]=r=>g.middleName=r),type:"text",class:"form-control"},null,512),[[X,g.middleName]]),o(T).middleName.$error?(t(),s("div",Gs,[(t(!0),s(L,null,B(o(T).middleName.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])]),e("div",js,[e("div",Ys,[p[12]||(p[12]=e("label",null,"Last Name",-1)),N(e("input",{"onUpdate:modelValue":p[2]||(p[2]=r=>g.lastName=r),type:"text",class:"form-control"},null,512),[[X,g.lastName]]),o(T).lastName.$error?(t(),s("div",Ws,[(t(!0),s(L,null,B(o(T).lastName.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])])]),e("div",Ks,[e("div",Qs,[e("div",Js,[p[13]||(p[13]=e("label",null,"Phone Number",-1)),N(e("input",{"onUpdate:modelValue":p[3]||(p[3]=r=>g.phoneNumber=r),type:"tel",class:"form-control"},null,512),[[X,g.phoneNumber]]),o(T).phoneNumber.$error?(t(),s("div",Xs,[(t(!0),s(L,null,B(o(T).phoneNumber.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])]),e("div",Zs,[e("div",eo,[p[14]||(p[14]=e("label",null,"Email",-1)),N(e("input",{"onUpdate:modelValue":p[4]||(p[4]=r=>g.email=r),type:"email",class:"form-control"},null,512),[[X,g.email]]),o(T).email.$error?(t(),s("div",to,[(t(!0),s(L,null,B(o(T).email.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])])]),e("div",so,[e("div",oo,[e("div",ao,[p[15]||(p[15]=e("label",null,"Password",-1)),N(e("input",{"onUpdate:modelValue":p[5]||(p[5]=r=>g.password=r),type:"password",class:"form-control"},null,512),[[X,g.password]]),o(T).password.$error?(t(),s("div",lo,[(t(!0),s(L,null,B(o(T).password.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])]),e("div",no,[e("div",ro,[p[16]||(p[16]=e("label",null,"Confirm Password",-1)),N(e("input",{"onUpdate:modelValue":p[6]||(p[6]=r=>g.confirmPassword=r),type:"password",class:"form-control"},null,512),[[X,g.confirmPassword]]),o(T).confirmPassword.$error?(t(),s("div",io,[(t(!0),s(L,null,B(o(T).confirmPassword.$errors,r=>(t(),s("div",{key:r.$uid},f(r.$message),1))),128))])):H("",!0)])])]),e("div",uo,[e("div",co,[e("button",{disabled:o(T).$dirty&&o(T).$invalid,onClick:p[7]||(p[7]=r=>y()),class:"btn btn-primary w-100"},p[17]||(p[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),W("Register ")]),8,mo)]),e("div",fo,[F(x,{to:"/",class:"btn btn-outline-primary w-100"},{default:z(()=>p[18]||(p[18]=[W("Home")])),_:1})]),e("div",po,[F(x,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:z(()=>p[19]||(p[19]=[W("Login")])),_:1})])])])])])]),_:1})}}},go={path:"/accounts",component:fs,props:!1,meta:{},children:[{path:"",component:ps},{path:"login",component:Ms},{path:"loginRedirect",component:xs},{path:"logout",component:Vs},{path:"register",component:vo}]};function st(){const a=Xe(),g=Y=>window.location.href.indexOf(Y)>-1,M=Y=>localStorage.getItem("data-bs-theme")||Y,O=Y=>{document.documentElement.setAttribute("data-bs-theme",Y),localStorage.setItem("data-bs-theme",Y)},T=async()=>await dt.get("https://bootswatch.com/api/5.json").then(Y=>Y.data),D=Y=>{const V=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");V&&Y?(V.setAttribute("href",Y),localStorage.setItem("bootswatch-theme",Y)):alert("cannot query css link")},A=Y=>{K(),a.push(Y)},K=()=>{if(screen.width<576){const V=document.getElementById("navbarCollapse");if(V){const G=ut.getInstance(V);G&&G.hide()}}};return{isActive:g,getCurrentBsTheme:M,changeBsTheme:O,getBootswatch:T,changeTheme:D,navigate:A,collapseNavbar:K}}const bo={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},yo={class:"container-md"},$o={class:"navbar-collapse collapse",id:"navbarCollapse"},wo={class:"navbar-nav"},ho={class:"nav-item"},_o={class:"nav-item dropdown"},ko={class:"dropdown-menu","aria-labelledby":"dropdown01"},So={class:"nav-item"},To={class:"nav-item dropdown"},Io={class:"dropdown-menu","aria-labelledby":"dropdown01"},Mo={class:"navbar-nav ms-auto"},xo={class:"nav-item dropdown"},Co={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Vo=["onClick"],Po={class:"nav-item dropdown"},Oo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Ao={class:"d-sm-none d-xl-inline"},Uo={key:0},Lo={key:1},Do={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Ho={key:0},Eo={key:1},qo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(a){const g=et(),{isActive:M,getCurrentBsTheme:O,changeBsTheme:T,getBootswatch:D,changeTheme:A,navigate:K,collapseNavbar:Y}=st(),V=he(),G=V.user,se=be({user:G,username:G?G.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});me(async()=>{const h=se;h.bootswatch=await D();const u=O(h.bsTheme);debugger;u&&(h.bsTheme=u,T(h.bsTheme));const Q=localStorage.getItem("bootswatch-theme");Q&&(h.currentTheme=Q,A(Q))});const R=h=>{A(h),se.currentTheme=h,Y()},U=h=>{T(h),se.bsTheme=h,Y()},C=async()=>{V.logoutWithRedirect();const h=new je(g.msalConfig);await h.initialize();const u={mainWindowRedirectUri:"/"};await h.logoutPopup(u)};return(h,u)=>{const Q=te("router-link");return t(),ve(ye,null,{default:z(()=>[e("nav",bo,[e("div",yo,[F(Q,{class:"navbar-brand",to:"/administrator"},{default:z(()=>[W(f(a.appName),1)]),_:1}),u[18]||(u[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",$o,[e("ul",wo,[e("li",ho,[F(Q,{to:"/videos",onClick:o(Y),class:"nav-link"},{default:z(()=>u[3]||(u[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",_o,[u[6]||(u[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",ko,[e("li",null,[F(Q,{to:"/source-groups",onClick:o(Y),class:"dropdown-item"},{default:z(()=>u[4]||(u[4]=[W(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[F(Q,{to:"/source-locations",onClick:o(Y),class:"dropdown-item"},{default:z(()=>u[5]||(u[5]=[W(" Locations ")])),_:1},8,["onClick"])])])]),e("li",So,[F(Q,{to:"/vod-sources",onClick:o(Y),class:"nav-link"},{default:z(()=>u[7]||(u[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",To,[u[10]||(u[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",Io,[e("li",null,[F(Q,{to:"/program-templates",onClick:o(Y),class:"dropdown-item"},{default:z(()=>u[8]||(u[8]=[W(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[F(Q,{to:"/channels",onClick:o(Y),class:"dropdown-item"},{default:z(()=>u[9]||(u[9]=[W(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",Mo,[e("li",xo,[u[14]||(u[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",Co,[e("li",null,[se.bsTheme==="dark"?(t(),s("button",{key:0,onClick:u[0]||(u[0]=J=>U("light")),class:"dropdown-item"},u[11]||(u[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),W("Dark Mode ")]))):(t(),s("button",{key:1,onClick:u[1]||(u[1]=J=>U("dark")),class:"dropdown-item"},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),W("Light Mode ")])))]),u[13]||(u[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(L,null,B(se.bootswatch.themes,J=>(t(),s("li",null,[e("button",{onClick:d=>R(J.cssCdn),class:ee(["dropdown-item",{active:se.currentTheme===J.cssCdn}])},f(J.name),11,Vo)]))),256))])]),e("li",Po,[e("a",Oo,[e("span",null,[u[15]||(u[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Ao,[o(G)?(t(),s("span",Uo,f(o(G).name),1)):(t(),s("span",Lo," Guest "))])])]),e("ul",Do,[o(G)?(t(),s("li",Ho,[e("button",{onClick:u[2]||(u[2]=J=>C()),class:"dropdown-item"},u[16]||(u[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),W("Logout ")]))])):(t(),s("li",Eo,[F(Q,{to:"/accounts/login",class:"dropdown-item"},{default:z(()=>u[17]||(u[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),W("Login ")])),_:1})]))])])])])])])]),_:1})}}},Bo={id:"sideNav",class:"collapse collapse-horizontal show"},No={class:"d-flex flex-column bg-dark min-vh-100 overflow-y-auto"},Ro={class:"navbar bg-primary bg-gradient shadow-sm","data-bs-theme":"dark"},Fo={class:"navbar-brand me-0 mb-1 px-2"},zo={class:"d-none d-sm-inline"},Go={class:"nav nav-pills flex-column px-1 mt-2",role:"tablist"},jo={class:"nav-item dropdown"},Yo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Wo={class:"nav-item dropdown"},Ko={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Qo={class:"nav-item dropdown"},Jo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Xo={class:"nav-item dropdown"},Zo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},ea=["onClick"],ta={class:"nav nav-pills flex-column mt-auto px-1 mb-3",role:"tablist"},sa={class:"nav-item dropdown"},oa={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},aa={class:"d-none d-sm-inline"},la={key:0},na={key:1},ra={class:"dropdown-menu dropdown-menu-end w-100 position-absolute","aria-labelledby":"dropdown01"},ia={key:0},da={key:1},ua={key:0,class:"fas fa-fw fa-angle-double-left"},ca={key:1,class:"fas fa-fw fa-angle-double-right"},ma={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(a){const g=et(),M=Qe(),O=Xe(),T=he(),D=T.user,{isActive:A,getCurrentBsTheme:K,changeBsTheme:Y,getBootswatch:V,changeTheme:G,navigate:se,collapseNavbar:R}=st(),U=be({user:D,username:D?D.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});me(async()=>{const x=U;x.bootswatch=await V();const r=K(x.bsTheme);r&&(x.bsTheme=r,Y(x.bsTheme));const _=localStorage.getItem("bootswatch-theme");_&&(x.currentTheme=_,G(_)),J();const i=document.getElementById("sideNav");i&&(Q.value?i.classList.add("show"):i.classList.remove("show"))});const C=x=>{G(x),U.currentTheme=x},h=x=>{Y(x),U.bsTheme=x},u=async()=>{T.logoutWithRedirect();const x=new je(g.msalConfig);await x.initialize();const r={mainWindowRedirectUri:window.location.origin};await x.logoutRedirect(r)},Q=de(!0),J=()=>{const x=localStorage.getItem("show-sideNav")||"true";Q.value=x==="true"},d=()=>{localStorage.setItem("show-sideNav",Q.value),ut.getInstance("#sideNav").toggle()},y=()=>{Q.value=!Q.value,d()},j=x=>{var r=M.path.startsWith(x);return r?"active":""},p=async(x,r)=>{const _=bt.getInstance(`#${r}`);_&&_.hide(),await O.push(x)};return(x,r)=>{const _=te("router-link");return t(),s("div",null,[e("div",Bo,[e("div",No,[e("nav",Ro,[F(_,{to:"/",class:"text-decoration-none w-100 text-center"},{default:z(()=>[e("h1",Fo,[r[9]||(r[9]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",zo,f(a.appName),1)])]),_:1})]),e("ul",Go,[e("li",jo,[e("a",{class:ee([j("/source-"),"nav-link dropdown-toggle"]),href:"#",id:"sourcesDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},r[10]||(r[10]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Sources",-1)]),2),e("ul",Yo,[e("li",null,[e("button",{onClick:r[0]||(r[0]=i=>p("/source-groups","sourcesDropdown")),class:ee([j("/source-groups"),"dropdown-item"]),role:"button"},r[11]||(r[11]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)]),2),e("button",{onClick:r[1]||(r[1]=i=>p("/source-locations","sourcesDropdown")),class:ee([j("/source-locations"),"dropdown-item"]),role:"button"},r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)]),2)])])]),e("li",Wo,[e("a",{class:ee([[j("/videos"),j("/vod-sources")],"nav-link dropdown-toggle"]),href:"#",id:"assetsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Asset Library",-1)]),2),e("ul",Ko,[e("li",null,[e("button",{onClick:r[2]||(r[2]=i=>p("/videos","assetsDropdown")),class:ee([j("/videos"),"dropdown-item"]),role:"button"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)]),2),e("button",{onClick:r[3]||(r[3]=i=>p("/vod-sources","assetsDropdown")),class:ee([j("/vod-sources"),"dropdown-item"]),role:"button"},r[15]||(r[15]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VOD",-1)]),2)])])]),e("li",Qo,[e("a",{class:ee([[j("/program-templates"),j("/channels")],"nav-link dropdown-toggle"]),href:"#",id:"assemblyDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},r[16]||(r[16]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channel Assembly",-1)]),2),e("ul",Jo,[e("li",null,[e("button",{onClick:r[4]||(r[4]=i=>p("/program-templates","assemblyDropdown")),class:ee([j("/program-templates"),"dropdown-item"]),role:"button"},r[17]||(r[17]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)]),2),e("button",{onClick:r[5]||(r[5]=i=>p("/channels","assemblyDropdown")),class:ee([j("/channels"),"dropdown-item"]),role:"button"},r[18]||(r[18]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)]),2)])])]),e("li",Xo,[r[22]||(r[22]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",Zo,[e("li",null,[U.bsTheme==="dark"?(t(),s("button",{key:0,onClick:r[6]||(r[6]=i=>h("light")),class:"dropdown-item"},r[19]||(r[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),W("Dark Mode ")]))):(t(),s("button",{key:1,onClick:r[7]||(r[7]=i=>h("dark")),class:"dropdown-item"},r[20]||(r[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),W("Light Mode ")])))]),r[21]||(r[21]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(L,null,B(U.bootswatch.themes,i=>(t(),s("li",null,[e("button",{onClick:n=>C(i.cssCdn),class:ee(["dropdown-item",{active:U.currentTheme===i.cssCdn}])},f(i.name),11,ea)]))),256))])])]),e("ul",ta,[e("li",sa,[e("a",oa,[e("span",null,[r[23]||(r[23]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",aa,[o(D)?(t(),s("span",la,f(o(D).name),1)):(t(),s("span",na," Guest "))])])]),e("ul",ra,[o(D)?(t(),s("li",ia,[e("button",{onClick:r[8]||(r[8]=i=>u()),class:"dropdown-item"},r[24]||(r[24]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),W("Logout ")]))])):(t(),s("li",da,[F(_,{to:"/accounts/login",class:"dropdown-item"},{default:z(()=>r[25]||(r[25]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),W("Login ")])),_:1})]))])])])])]),e("button",{id:"sideNavToggler",onClick:y,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"d-none btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"2rem",height:"2rem"}},[Q.value?(t(),s("span",ua)):(t(),s("span",ca))])])}}},fa={class:"footer sticky-bottom"},pa={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},va={class:"container-md"},ga={class:"navbar-text small p-0"},ba={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(a){st();const g=xe("$config"),O=he().user;let D=new Date().getFullYear();const A=be({user:O,username:O?O.nameFull:"Guest",copyright:`2020-${D} ${g.appName}`});return me(async()=>{}),(K,Y)=>(t(),s("footer",fa,[e("div",pa,[e("div",va,[e("span",ga,"©"+f(A.copyright),1)])])]))}},ya={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){tt.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(a){a.message&&this.addMessage(a.title,a.message,a.type,a.options)},async addMessage(a,g,M,O={}){var T={id:this.count++,title:a,message:g,type:M,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};T=Object.assign({},T,O),this.messages.unshift(T),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),T.timeOut>0&&await this.startTimeout(T)},async startTimeout(a,g=0){const M=this,O=performance.now(),T=async()=>{a.animationFrame=requestAnimationFrame(async D=>{const A=D+g-O;if(!M.exists(a)||a.paused){cancelAnimationFrame(a.animationFrame);return}else if(A<a.timeOut){const K=A/a.timeOut;a.progress=K,await T()}else{a.progress=1,cancelAnimationFrame(a.animationFrame),M.remove(a);return}})};await T()},pauseProgress(a){a.timeOut<=0||(a.paused=!0)},async resumeProgress(a){a.timeOut<=0||(a.paused=!1,await this.startTimeout(a,a.timeOut*a.progress))},getCurrentProgress(a){return Math.round(a.progress*100)===100?100:a.progress*100},getIconClass(a){const g=a.type;let M="";switch(g){case"success":M="fas fa-fw fa-circle-check";break;case"info":M="fas fa-fw fa-circle-info";break;case"warning":M="fas fa-fw fa-circle-exclamation";break;case"danger":M="fas fa-fw fa-triangle-exclamation";break}let O=M;return a.rtl?"icon-right "+O:"icon-left "+O},async remove(a){const g=this.messages.findIndex(M=>M.id===a.id);this.messages.splice(g,1),typeof a.onClose=="function"&&await a.onClose()},exists(a){return this.messages.findIndex(M=>M.id===a.id)!==-1}}},$a={"aria-live":"polite","aria-atomic":"true",class:"position-static"},wa=["onMouseover","onMouseout"],ha={class:"me-auto text-white"},_a=["onClick"],ka={class:"toast-body"},Sa=["innerHTML"],Ta={key:0,class:"progress m-1",style:{height:"4px"}};function Ia(a,g,M,O,T,D){return t(),ve(ye,null,{default:z(()=>[e("div",$a,[F(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:z(()=>[(t(!0),s(L,null,B(T.messages,A=>(t(),s("div",{key:A.id,class:ee(["toast show mb-2 ms-auto",`border-${A.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:K=>D.pauseProgress(A),onMouseout:K=>D.resumeProgress(A)},[e("div",{class:ee(["toast-header",`bg-${A.type}`])},[e("strong",ha,[e("i",{class:ee([D.getIconClass(A),"me-1"])},null,2),W(f(A.title),1)]),A.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:K=>D.remove(A)},g[0]||(g[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,_a)):H("",!0)],2),e("div",ka,[e("div",{innerHTML:A.message},null,8,Sa)]),A.timeOut>0&&A.showProgress?(t(),s("div",Ta,[e("div",{class:ee(`bg-${A.type}`),style:ct({width:D.getCurrentProgress(A)+"%"})},null,6)])):H("",!0)],42,wa))),128))]),_:1})])]),_:1})}const Ma=Pe(ya,[["render",Ia],["__scopeId","data-v-5272bd9a"]]),xa={name:"AdminLayout",components:{TopNav:qo,SideNav:ma,BottomNav:ba},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Ca={class:"d-flex flex-row flex-nowrap vh-100"};function Va(a,g,M,O,T,D){const A=te("Toasts"),K=te("SideNav"),Y=te("router-view");return t(),s("div",Ca,[F(A),F(K),F(Y,{class:"d-flex flex-column w-100 h-100"})])}const Pa=Pe(xa,[["render",Va]]),Oa={class:"mt-2 container overflow-y-auto"},Aa={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ua=["innerHTML"],La={class:"row mb-3"},Da={class:"col-xl-4"},Ha={class:""},Ea=["id"],qa={key:1,class:"card card-header bg-warning-subtle mb-2"},Ba={class:"col-xl-8 overflow-x-auto mt-2 mt-xl-0"},Na={class:"d-flex flex-column align-items-start"},Ra=["src"],Fa={class:""},za={class:"d-flex flex-row"},Ga={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},ja={class:"text-center"},Ya=["src"],Wa={class:"text-end"},Ka={class:"text-wrap text-truncate"},Qa={class:"overflow-y-auto"},Ja={class:"badge bg-info me-2"},Xa={key:0,class:"badge bg-warning mb-1"},Za={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,isDirty:T,validations:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,generateReturnUrl:C,security:h}=we({appTitle:"ARC AIO",pageTitle:"Dashboard"});xe("$config"),he().user;const Q=be({item:null});de("805630ed-f288-4f2f-83a4-6c71312f6970"),de(),me(async()=>{await y()}),Ue(()=>{Q.item.forEach(x=>{x.hls&&(x.hls.stopLoad(),x.hls.destroy())})});const J=async()=>{const x=Q;if(!O.value)try{O.value=!0;const r="/api/v1/channels/epg/";x.item=[],await G.get(r).then(_=>{x.item=_.data}),x.item.forEach(_=>{j(_)})}catch(r){Y.value=se.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{O.value=!1}},d=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await G.get("/api/v1/channels/reset/").then(_=>{R.success("Reset All Data","Reset data was successful.")})}catch(r){Y.value=se.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{O.value=!1}},y=async()=>{await J()},j=x=>{if(x.manifestUrl&&Hls.isSupported()){p(x);var r=document.getElementById(`video-${x.id}`);if(!r)return;x.hls&&(x.hsl.stopLoad(),x.hls.destroy());let _=x.manifestUrl;x.hls=se.createHlsStream(r,_);return}},p=x=>{x.outputs&&x.outputs.forEach(_=>{if(_.hls){debugger;_.hls.detachMedia(),_.hls.destroy(),delete _.hls}_.playbackConfigurations.forEach(i=>{if(i.hls){debugger;i.hls.detachMedia(),i.hls.destroy(),delete i.hls}})})};return(x,r)=>{const _=te("PageHeader"),i=te("router-link");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(M)},{default:z(()=>[e("div",null,[e("button",{onClick:r[0]||(r[0]=n=>d()),class:"ms-2 btn btn-danger"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),W("Reset All Data ")])),e("button",{onClick:r[1]||(r[1]=n=>y()),class:"ms-2 btn btn-secondary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Oa,[o(Y)?(t(),s("div",Aa,[r[4]||(r[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(Y))},null,8,Ua)])):H("",!0),(t(!0),s(L,null,B(Q.item,n=>(t(),s("div",null,[e("div",La,[e("div",Da,[e("div",Ha,[n.manifestUrl?(t(),s("video",{key:0,id:`video-${n.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,Ea)):(t(),s("div",qa," Channel not yet published "))])]),e("div",Ba,[e("div",Na,[e("div",null,[e("h4",null,[e("img",{src:n.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Ra),F(i,{to:`${a.urlViewChannel}/${n.id}/${o(C)()}`},{default:z(()=>[W(f(n.title),1)]),_:2},1032,["to"])])]),e("div",Fa,[e("div",za,[(t(!0),s(L,null,B(n.programs,v=>(t(),s("div",Ga,[e("div",ja,[e("img",{src:v.image,class:"img-fluid border",style:{height:"64px"}},null,8,Ya)]),e("div",Wa,f(o(se).moment(v.since).format("hh:mm a"))+"-"+f(o(se).moment(v.till).format("hh:mm a")),1),e("div",Ka,f(v.title),1),e("div",Qa,[(t(!0),s(L,null,B(v.genres,l=>(t(),s("span",Ja,f(l),1))),256))]),o(se).moment().isAfter(v.since)&&o(se).moment().isBefore(v.till)?(t(),s("span",Xa,"Now Playing")):H("",!0)]))),256))])])])])])]))),256))])])]),_:1})}}};function De(a){if(!a.cacheKey)throw Error("Cache Key required.");if(!a.baseUrl)throw Error("Base Url required.");const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,closeWithReturnUrl:R,generateReturnUrl:U,security:C}=we({appTitle:a.appTitle,pageTitle:a.pageTitle}),h=JSON.parse(JSON.stringify(a.filter));h.pageIndex=h.pageIndex||1,h.pageSize=h.pageSize||5,h.sortField=h.sortField||"",h.sortOrder=h.sortOrder||1,h.updateUrl=h.updateUrl||!1,h.items=h.items||[],h.query=h.query||{},h.query.criteria=h.query.criteria||"";const u=de(h),Q=()=>{var n;if(O.value){console.log("Paginated search is currently busy.");return}const r=JSON.parse(localStorage.getItem(a.cacheKey))||{},_=new URLSearchParams(window.location.search),i=u.value;i.query.criteria=_.get("c")||r.criteria||i.query.criteria||"",i.pageIndex=parseInt(_.get("p"),10)||r.pageIndex||i.pageIndex||1,i.pageSize=parseInt(_.get("s"),10)||r.pageSize||i.pageSize||5,i.sortField=_.get("sf")||r.sortField||i.sortField||"",i.sortOrder=parseInt(_.get("so"),10)||r.sortOrder||i.sortOrder||1,i.visible=r.visible||i.visible,(n=a.initializeFilter)==null||n.call(a,u,a.cacheKey)},J=()=>{if(a.getQuery)return a.getQuery(u.value);{const r=u.value;return["?c=",encodeURIComponent(r.query.criteria),"&p=",r.pageIndex,"&s=",r.pageSize,"&sf=",r.sortField,"&so=",r.sortOrder].join("")}},d=()=>{if(a.saveQuery)a.saveQuery(u.value,a.cacheKey);else{const r=u.value;localStorage.setItem(a.cacheKey,JSON.stringify({criteria:r.query.criteria,pageIndex:r.pageIndex,pageSize:r.pageSize,sortField:r.sortField,sortOrder:r.sortOrder,visible:r.visible}))}};return{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,closeWithReturnUrl:R,generateReturnUrl:U,security:C,filter:u,initializeFilter:Q,getQuery:J,saveQuery:d,search:async r=>{var i;let _=u.value;if(O.value){console.log("Paginated search is currently busy.");return}r>0&&(_.pageIndex=r);try{O.value=!0,A.value="";const n=J();_.selected=null,await Y(`${a.baseUrl}/${n}`).then(async v=>{var b;Array.isArray(v.data)?_.items=v.data:_=Object.assign(_,v.data);let l=location.pathname;l.endsWith("/")?l+=n:l+="/"+n,_.updateUrl&&window.history.replaceState(n,`${g}-search`,l),_.items.forEach(m=>{m.expand=!1}),d(),(b=a.successAction)==null||b.call(a,u.value)})}catch(n){if(localStorage.removeItem(a.cacheKey),a.failAction)a.failAction(n);else{const v=V.getErrorMessageAsHtml(n);A.value=v,G.error("Error Occured",v)}}finally{O.value=!1,(i=a.finalAction)==null||i.call(a)}},getRowNumber:r=>{const _=u.value;return(_.pageIndex-1)*_.pageSize+(r+1)},setSelected:r=>{const _=u.value;_.selected&&r&&_.selected===r?_.selected=null:(_.selected&&(_.selected.expand=!1),_.selected=r,_.selected.expand=!0)},isSelected:r=>{const _=u.value;return r===null||_.selected===null?!1:r===_.selected}}}const el=["disabled"],tl={class:"row row-cols-1 row-cols-sm-3"},sl={class:"col"},ol={class:"form-floating mb-2"},al={key:0,class:"d-block invalid-feedback"},ll={class:"col"},nl={class:"form-floating"},rl={class:"col"},il={class:"form-floating"},dl={class:"col"},ul={class:"form-floating mb-2"},cl={class:"row row-cols-1 row-cols-sm-2"},ml={class:"col"},fl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},pl={class:"col"},vl={class:"form-check"},gl=["onUpdate:modelValue","id"],bl=["for"],yl={class:"col"},$l={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},wl={class:"col"},hl={class:"form-check"},_l=["onUpdate:modelValue","id"],kl=["for"],Sl={class:"table-responsive mt-2"},Tl={class:"text-end"},Il={class:"table table-sm mb-0 mt-2"},Ml={class:"align-middle"},xl={class:"text-center"},Cl=["onUpdate:modelValue"],Vl=["onUpdate:modelValue"],Pl=["onUpdate:modelValue"],Ol={class:"text-start"},Al=["onClick"],Ul={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Video"}),U=a,C=be({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:V.moment().format("YYYY-MM-DD"),formats:[]}}),h={item:{title:{title:oe.withMessage("Title is required.",le),$autoDirty:!0,$lazy:!0},durationInMillis:{title:oe.withMessage("Duration is required.",le),$autoDirty:!0,$lazy:!0},dateReleased:{title:oe.withMessage("Date Released is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(h,C),Q=Me(()=>{const p=V.moment;if(C.durationTime&&C.durationTime!=="00:00:00"&&V.isValidTime(C.durationTime)){const x=p().startOf("day"),r=x.format("YYYY-MM-DD ")+C.durationTime,i=p(r).subtract(x);return C.item.durationInMillis=i.valueOf(),C.item.durationInMillis}return 0});me(async()=>{await d()});const J=async()=>{const p=C;if(O.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const r=V.clone(p.item);r.durationInMillis=Q.value;const _=V.moment(p.item.dateReleased).utc(!0).format();r.dateReleased=_;const i=C.lookups.genres.filter(v=>v.selected).map(v=>v.id);r.genres=i;const n=C.lookups.categories.filter(v=>v.selected).map(v=>v.id);r.categories=n;debugger;await Y.post("/api/v1/videos/",r).then(v=>{G.success("Add Video","Video added",{onClose:async()=>{const l=`${U.urlView}/${v.data}`;await K.push(l)}})})}catch(r){A.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{O.value=!1}},d=async()=>{try{await Y.get("/api/v1/lookups/video-genres/").then(p=>{const r=p.data.filter(_=>_.id!==0);C.lookups.genres=r})}catch(p){A.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},y=()=>{const p={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};C.item.formats.push(p)},j=p=>{C.item.formats.splice(p,1)};return(p,x)=>{const r=te("router-link"),_=te("PageHeader"),i=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-video",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:x[0]||(x[0]=n=>J()),class:"btn btn-primary"},x[6]||(x[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,el),F(r,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>x[7]||(x[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(i,{errorMessage:o(A),vuelidate:o(u)},{default:z(()=>[e("div",null,[e("div",tl,[e("div",sl,[e("div",ol,[N(e("input",{"onUpdate:modelValue":x[1]||(x[1]=n=>C.item.title=n),id:"name",class:ee([o(V).getValidFeedbackCss(C.item.title),"form-control"]),placeholder:"Title"},null,2),[[X,C.item.title]]),x[8]||(x[8]=e("label",{for:"title",class:""},"Title",-1)),o(u).item.title.$error?(t(),s("div",al,[(t(!0),s(L,null,B(o(u).item.title.$errors,n=>(t(),s("div",{key:n.$uid},f(n.$message),1))),128))])):H("",!0)])]),e("div",ll,[e("div",nl,[N(e("input",{"onUpdate:modelValue":x[2]||(x[2]=n=>C.item.dateReleased=n),type:"date",step:"1",id:"dateReleased",class:ee([o(V).getValidFeedbackCss(C.item.dateReleased),"form-control"])},null,2),[[X,C.item.dateReleased]]),x[9]||(x[9]=e("label",{for:"dateReleased",class:""},"Date Released",-1))])]),e("div",rl,[e("div",il,[N(e("input",{"onUpdate:modelValue":x[3]||(x[3]=n=>C.durationTime=n),type:"time",step:"1",id:"durationTime",class:ee([o(V).getValidFeedbackCss(C.item.durationTime),"form-control"])},null,2),[[X,C.durationTime]]),x[10]||(x[10]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",dl,[e("div",ul,[N(e("textarea",{"onUpdate:modelValue":x[4]||(x[4]=n=>C.item.description=n),id:"name",class:ee([o(V).getValidFeedbackCss(C.item.description),"form-control"]),placeholder:"Description",style:{height:"5rem"}},null,2),[[X,C.item.description]]),x[11]||(x[11]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",cl,[e("div",ml,[x[12]||(x[12]=e("h5",null,"Genres",-1)),e("div",fl,[(t(!0),s(L,null,B(C.lookups.genres,n=>(t(),s("div",pl,[e("div",vl,[N(e("input",{"onUpdate:modelValue":v=>n.selected=v,class:"form-check-input",type:"checkbox",id:n.name},null,8,gl),[[Ne,n.selected]]),e("label",{class:"form-check-label",for:n.name},f(n.name),9,bl)])]))),256))])]),e("div",yl,[x[13]||(x[13]=e("h5",null,"Categories",-1)),e("div",$l,[(t(!0),s(L,null,B(C.lookups.categories,n=>(t(),s("div",wl,[e("div",hl,[N(e("input",{"onUpdate:modelValue":v=>n.selected=v,class:"form-check-input",type:"checkbox",id:n.name},null,8,_l),[[Ne,n.selected]]),e("label",{class:"form-check-label",for:n.name},f(n.name),9,kl)])]))),256))])])]),e("div",Sl,[e("div",Tl,[e("button",{onClick:x[5]||(x[5]=n=>y()),class:"btn btn-outline-primary btn-sm"},x[14]||(x[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Il,[x[17]||(x[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(C.item.formats,(n,v)=>(t(),s("tr",Ml,[e("td",xl,f(v+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":l=>n.format=l,class:"form-control"},x[15]||(x[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,Cl),[[ge,n.format]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":l=>n.serverUrl=l,type:"text",class:"form-control"},null,8,Vl),[[X,n.serverUrl]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":l=>n.path=l,type:"text",class:"form-control"},null,8,Pl),[[X,n.path]])]),e("td",Ol,[e("button",{onClick:l=>j(v),class:"btn btn-outline-warning btn-sm"},x[16]||(x[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Al)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ll=["disabled"],Dl={class:"row row-cols-1 row-cols-sm-3"},Hl={class:"col"},El={class:"form-floating mb-2"},ql={key:0,class:"d-block invalid-feedback"},Bl={class:"col"},Nl={class:"form-floating"},Rl={class:"col"},Fl={class:"form-floating"},zl={class:"col"},Gl={class:"form-floating mb-2"},jl={class:"col"},Yl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Wl={class:"col"},Kl={class:"form-check"},Ql=["onUpdate:modelValue","id"],Jl=["for"],Xl={class:"col"},Zl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},en={class:"col"},tn={class:"form-check"},sn=["onUpdate:modelValue","id"],on=["for"],an={class:"table-responsive mt-2"},ln={class:"text-end"},nn={class:"table table-sm mb-0 mt-2 border"},rn={class:"align-middle"},dn={class:"text-center"},un=["onUpdate:modelValue"],cn=["value"],mn=["onUpdate:modelValue"],fn=["onUpdate:modelValue"],pn={class:"text-end"},vn=["onClick"],gn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Edit Video"}),U=a,C=be({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),h={item:{title:{title:oe.withMessage("title is required.",le),$autoDirty:!0,$lazy:!0},durationInMillis:{title:oe.withMessage("durationInMillis is required.",le),$autoDirty:!0,$lazy:!0},dateReleased:{title:oe.withMessage("Date Released is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(h,C),Q=Me(()=>{const r=V.moment;if(C.durationTime&&C.durationTime!=="00:00:00"&&V.isValidTime(C.durationTime)){const _=r().startOf("day"),i=_.format("YYYY-MM-DD ")+C.durationTime,v=r(i).subtract(_);return C.item.durationInMillis=v.valueOf(),C.item.durationInMillis}return 0});me(async()=>{await d(),await y(),await J()});const J=async()=>{try{await Y.get(`/api/v1/videos/${U.id}/`).then(r=>{C.item=r.data;const _=V.moment(C.item.dateReleased).format("YYYY-MM-DD");C.item.dateReleased=_;const i=C.lookups.genres,n=C.item.genres.map(b=>b.genre);i.forEach(b=>{b.selected=n.includes(b.id)});const v=C.lookups.categories,l=C.item.categories.map(b=>b.category);v.forEach(b=>{b.selected=l.includes(b.id)})})}catch(r){A.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},d=async()=>{try{await Y.get("/api/v1/lookups/video-genres/").then(r=>{const i=r.data.filter(n=>n.id!==0);C.lookups.genres=i})}catch(r){A.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},y=async()=>{try{await Y.get("/api/v1/lookups/video-formats/").then(r=>{const i=r.data.filter(n=>n.id!==0);C.lookups.formats=i})}catch(r){A.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},j=async()=>{const r=C;if(O.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const i=V.clone(r.item);i.durationInMillis=Q.value;const n=V.moment(r.item.dateReleased).utc(!0).format();i.dateReleased=n;const v=C.lookups.genres.filter(b=>b.selected).map(b=>b.id);i.genres=v;const l=C.lookups.categories.filter(b=>b.selected).map(b=>b.id);i.categories=l;debugger;await Y.put("/api/v1/videos/",i).then(b=>{G.success("Edit Video","Video edited.",{onClose:async()=>{const m=`${U.urlView}/${U.id}`;await K.push(m)}})})}catch(i){A.value=V.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{O.value=!1}},p=()=>{const r={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};C.item.formats.push(r)},x=r=>{C.item.formats.splice(r,1)};return(r,_)=>{const i=te("router-link"),n=te("PageHeader"),v=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(n,{"page-icon":"fas fa-fw fa-video",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:_[0]||(_[0]=l=>j()),class:"btn btn-primary"},_[6]||(_[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ll),e("button",{onClick:J,class:"btn btn-secondary ms-2"},_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(i,{to:`${a.urlView}/${a.id}`,class:"btn btn-secondary ms-2"},{default:z(()=>_[8]||(_[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(A),vuelidate:o(u)},{default:z(()=>[e("div",null,[e("div",Dl,[e("div",Hl,[e("div",El,[N(e("input",{"onUpdate:modelValue":_[1]||(_[1]=l=>C.item.title=l),id:"name",class:"form-control",placeholder:"Title"},null,512),[[X,C.item.title]]),_[9]||(_[9]=e("label",{for:"title",class:""},"Title",-1)),o(u).item.title.$error?(t(),s("div",ql,[(t(!0),s(L,null,B(o(u).item.title.$errors,l=>(t(),s("div",{key:l.$uid},f(l.$message),1))),128))])):H("",!0)])]),e("div",Bl,[e("div",Nl,[N(e("input",{"onUpdate:modelValue":_[2]||(_[2]=l=>C.item.dateReleased=l),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[X,C.item.dateReleased]]),_[10]||(_[10]=e("label",{for:"dateReleased",class:""},"Duration Time",-1))])]),e("div",Rl,[e("div",Fl,[N(e("input",{"onUpdate:modelValue":_[3]||(_[3]=l=>C.durationTime=l),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[X,C.durationTime]]),_[11]||(_[11]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",zl,[e("div",Gl,[N(e("textarea",{"onUpdate:modelValue":_[4]||(_[4]=l=>C.item.description=l),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[X,C.item.description]]),_[12]||(_[12]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",jl,[_[13]||(_[13]=e("b",null,"Genres",-1)),e("div",Yl,[(t(!0),s(L,null,B(C.lookups.genres,l=>(t(),s("div",Wl,[e("div",Kl,[N(e("input",{"onUpdate:modelValue":b=>l.selected=b,class:"form-check-input",type:"checkbox",id:l.name},null,8,Ql),[[Ne,l.selected]]),e("label",{class:"form-check-label",for:l.name},f(l.name),9,Jl)])]))),256))])]),e("div",Xl,[_[14]||(_[14]=e("b",null,"Categories",-1)),e("div",Zl,[(t(!0),s(L,null,B(C.lookups.categories,l=>(t(),s("div",en,[e("div",tn,[N(e("input",{"onUpdate:modelValue":b=>l.selected=b,class:"form-check-input",type:"checkbox",id:l.name},null,8,sn),[[Ne,l.selected]]),e("label",{class:"form-check-label",for:l.name},f(l.name),9,on)])]))),256))])]),e("div",an,[e("div",ln,[e("button",{onClick:_[5]||(_[5]=l=>p()),class:"btn btn-outline-primary btn-sm"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",nn,[_[17]||(_[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(C.item.formats,(l,b)=>(t(),s("tr",rn,[e("td",dn,f(b+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":m=>l.format=m,class:"form-control"},[(t(!0),s(L,null,B(C.lookups.formats,m=>(t(),s("option",{value:m.id},f(m.name),9,cn))),256))],8,un),[[ge,l.format]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":m=>l.serverUrl=m,type:"text",class:"form-control"},null,8,mn),[[X,l.serverUrl]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":m=>l.path=m,type:"text",class:"form-control"},null,8,fn),[[X,l.path]])]),e("td",pn,[e("button",{onClick:m=>x(b),class:"btn btn-outline-warning btn-sm"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,vn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},bn={class:"ms-2"},yn={class:"input-group"},$n=["value"],wn={class:"ms-1"},hn={class:"input-group"},_n={class:"ms-1"},kn={class:"input-group"},Sn={class:"table-responsive border shadow-sm"},Tn={class:"table table-hover mb-0"},In=["textContent"],Mn={class:"d-flex flex-row justify-content-start"},xn={class:"mt-1"},Cn=["src"],Vn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Pn={class:"ms-2"},On={key:0},An={class:"badge bg-primary me-1"},Un={key:1},Ln={class:"badge bg-info me-1"},Dn={class:"text-center"},Hn={class:"text-end"},En=["onClick"],qn={key:0,class:"fas fa-fw fa-chevron-circle-up"},Bn={key:1,class:"fas fa-fw fa-chevron-circle-down"},Nn={key:0},Rn={colspan:"999"},Fn={class:""},zn={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},Gn={class:"col mb-2"},jn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},Yn={class:"col col-lg-auto mb-2"},Wn={key:0},Kn={class:"badge bg-secondary me-1"},Qn="/api/v1/videos/search",Jn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(a){xe("$config");const M=he().user,{appTitle:O,pageTitle:T,busy:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,security:C,filter:h,initializeFilter:u,getQuery:Q,saveQuery:J,search:d,getRowNumber:y,setSelected:j,isSelected:p}=De({appTitle:"Arcadian-FAST",pageTitle:"Videos",cacheKey:`${M==null?void 0:M.userId}/videos/search`,baseUrl:Qn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(r,_)=>{const i=r.value,n=new URLSearchParams(window.location.search),v=JSON.parse(localStorage.getItem(_))||{};i.query.genre=n.get("genre")||v.genre||i.query.genre||0,i.query.category=n.get("category")||v.category||i.query.category||0},getQuery:r=>["?c=",encodeURIComponent(r.query.criteria),"&p=",r.pageIndex,"&s=",r.pageSize,"&sf=",r.sortField,"&so=",r.sortOrder,"&genre=",r.query.genre,"&category=",r.query.category].join(""),saveQuery:(r,_)=>{localStorage.setItem(_,JSON.stringify({criteria:r.query.criteria,pageIndex:r.pageIndex,pageSize:r.pageSize,sortField:r.sortField,sortOrder:r.sortOrder,visible:r.visible,genre:r.query.genre,category:r.query.category}))}});me(async()=>{u(),await x(),await d()});const x=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(r=>{const _=r.data;h.value.lookups.genres=_})}catch(r){Y.value=se.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}};return(r,_)=>{const i=te("router-link"),n=te("PageHeader"),v=te("m-pagination"),l=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(n,{"page-icon":"fas fa-fw fa-video",pageTitle:o(T)},{default:z(()=>[F(i,{to:a.urlAdd,class:"btn btn-primary"},{default:z(()=>_[5]||(_[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",bn,[e("div",yn,[_[6]||(_[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),N(e("select",{"onUpdate:modelValue":_[0]||(_[0]=b=>o(h).query.genre=b),class:"form-select"},[(t(!0),s(L,null,B(o(h).lookups.genres,b=>(t(),s("option",{value:b.id},f(b.name),9,$n))),256))],512),[[ge,o(h).query.genre]])])]),e("div",wn,[e("div",hn,[_[8]||(_[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),N(e("select",{"onUpdate:modelValue":_[1]||(_[1]=b=>o(h).query.category=b),class:"form-select"},_[7]||(_[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ge,o(h).query.category]])])]),e("div",_n,[e("div",kn,[N(e("input",{"onUpdate:modelValue":_[2]||(_[2]=b=>o(h).query.criteria=b),onKeyup:_[3]||(_[3]=Le(b=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[X,o(h).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[4]||(_[4]=b=>o(d)(1))},_[9]||(_[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(l,{errorMessage:o(Y)},{default:z(()=>[e("div",Sn,[e("table",Tn,[_[14]||(_[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(h).items,(b,m)=>(t(),s(L,{key:b.videoId},[e("tr",null,[e("td",{textContent:f(o(y)(m)),class:"text-center"},null,8,In),e("td",null,[e("div",Mn,[e("div",null,[b.thumbnails.length>0?(t(!0),s(L,{key:0},B(b.thumbnails,c=>(t(),s("div",xn,[e("img",{src:c.url,class:"img-fuild border",width:"128"},null,8,Cn)]))),256)):(t(),s("img",Vn))]),e("div",Pn,[F(i,{to:`${a.urlView}/${b.videoId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[W(f(b.title),1)]),_:2},1032,["to"]),e("div",null,[b.categories.length>0?(t(),s("div",On,[(t(!0),s(L,null,B(b.categories,c=>(t(),s("span",An,f(c.categoryName),1))),256))])):H("",!0),b.genres.length>0?(t(),s("div",Un,[(t(!0),s(L,null,B(b.genres,c=>(t(),s("span",Ln,f(c.genreName),1))),256))])):H("",!0)])])])]),e("td",Dn,f(o(se).moment.utc(b.durationInMillis).format("HH:mm:ss")),1),e("td",Hn,[e("button",{onClick:c=>b.expand=!b.expand,class:ee([[b.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[b.expand?(t(),s("span",qn)):(t(),s("span",Bn))],10,En)])]),b.expand?(t(),s("tr",Nn,[_[13]||(_[13]=e("td",null,null,-1)),e("td",Rn,[e("div",Fn,[e("div",zn,[e("div",Gn,[_[10]||(_[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,f(b.description),1)]),e("div",jn,[_[11]||(_[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,f(o(it).utc(b.dateReleased).format("l")),1)]),e("div",Yn,[_[12]||(_[12]=e("h6",{class:"fw-bold"},"Formats",-1)),b.formats.length>0?(t(),s("div",Wn,[(t(!0),s(L,null,B(b.formats,c=>(t(),s("span",Kn,f(c.formatName),1))),256))])):H("",!0)])])])])])):H("",!0)],64))),128))]),_:1},512),[[Se,o(h).items.length>0]])])]),F(v,{filter:o(h),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Xn={key:0},Zn={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},er={class:"nav-item",role:"presentation"},tr={class:"nav-item",role:"presentation"},sr={class:"nav-item",role:"presentation"},or={class:"nav-item",role:"presentation"},ar={class:"tab-content",id:"myTabContent"},lr={class:"mt-2"},nr={class:"row row-cols-1 row-cols-sm-2"},rr={class:"col"},ir=["id"],dr={class:"col"},ur={class:"col"},cr={class:"form-floating mb-2"},mr={class:"row row-cols-1 row-cols-sm-2"},fr={class:"col"},pr={class:"form-floating mb-2"},vr={class:"col"},gr={class:"form-floating mb-2"},br={class:"col"},yr={class:"form-floating mb-2"},$r={class:"mt-1"},wr={class:"badge bg-info me-1"},hr={class:"badge bg-primary me-1"},_r={class:"mt-2"},kr={class:"table-responsive border"},Sr={class:"table table-hover mb-0"},Tr={class:"table-group-divider"},Ir={class:"align-middle"},Mr={class:"text-center"},xr={class:"mt-2"},Cr={class:"text-end"},Vr={class:"table-responsive border mt-2"},Pr={class:"table table-hover mb-0 caption-top"},Or={class:"mt-2"},Ar={class:"table-responsive"},Ur={class:"table table-hover mb-0 caption-top"},Lr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(a){const g=a,{appTitle:M,pageTitle:O,busy:T,isDirty:D,validations:A,infoMessage:K,warningMessage:Y,errorMessage:V,router:G,axios:se,utils:R,toasts:U,close:C,closeWithReturnUrl:h,generateReturnUrl:u,security:Q}=we({appTitle:"Arcadian-FAST",pageTitle:"View Video"});xe("$config");const J=he();J.user;const d=be({user:J.user,item:null,hls:null}),y=de();me(async()=>{await r(),y.value=R.getPageTab("video")||"information-tab"}),Ue(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const j=v=>{R.setPageTab("video",v),y.value=v},p=v=>v!==y.value?"":"active",x=v=>v!==y.value?"":"show active",r=async()=>{const v=d;if(!T.value)try{T.value=!0,V.value="",d.item=null;const l=`/api/v1/videos/${g.id}/`;await se.get(l).then(b=>{v.item=b.data,v.item.duration=R.moment.utc(v.item.durationInMillis).format("HH:mm:ss"),v.item.dateReleased=R.moment.utc(v.item.dateReleased).format("ll")}),i()}catch(l){V.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{T.value=!1}},_=async()=>{await r()},i=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),d.hls&&d.hls.destroy();const l=`video-${d.item.videoId}`;var v=document.getElementById(l);const b=d.item.formats.find(c=>c.formatName==="HLS"),m=b.serverUrl+b.path;d.hls=R.createHlsStream(v,m,!1),d.hls.startLoad(-1)}},n=async()=>{if(!T.value)try{T.value=!0,V.value="";const v=`/api/v1/videos/${g.id}/get-blank-frames/`;await se.post(v).then(l=>{}),T.value=!1,await _()}catch(v){V.value=R.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{T.value=!1}};return(v,l)=>{const b=te("router-link"),m=te("PageHeader"),c=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(m,{"page-icon":"fas fa-fw fa-video",pageTitle:o(O)},{default:z(()=>[F(b,{to:`${a.urlEdit}/${a.id}`,class:"btn btn-primary ms-1"},{default:z(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=w=>_()),class:"ms-2 btn btn-secondary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[1]||(l[1]=w=>o(h)(g.urlMain)),class:"btn btn-secondary ms-1"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(c,{errorMessage:o(V)},{default:z(()=>[d.item?(t(),s("div",Xn,[e("div",null,[e("ul",Zn,[e("li",er,[e("button",{onClick:l[2]||(l[2]=w=>j("information-tab")),class:ee([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",tr,[e("button",{onClick:l[3]||(l[3]=w=>j("formats-tab")),class:ee([p("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",sr,[e("button",{onClick:l[4]||(l[4]=w=>j("blankFrames-tab")),class:ee([p("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",or,[e("button",{onClick:l[5]||(l[5]=w=>j("vodSources-tab")),class:ee([p("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",ar,[e("div",{class:ee([x("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",lr,[e("div",nr,[e("div",rr,[e("video",{id:`video-${d.item.videoId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,ir)]),e("div",dr,[e("div",ur,[e("div",cr,[N(e("input",{"onUpdate:modelValue":l[6]||(l[6]=w=>d.item.title=w),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[X,d.item.title]]),l[14]||(l[14]=e("label",{for:"title"},"Title",-1))])]),e("div",mr,[e("div",fr,[e("div",pr,[N(e("input",{"onUpdate:modelValue":l[7]||(l[7]=w=>d.item.dateReleased=w),type:"text",class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[X,d.item.dateReleased]]),l[15]||(l[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",vr,[e("div",gr,[N(e("input",{"onUpdate:modelValue":l[8]||(l[8]=w=>d.item.duration=w),type:"text",class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},null,512),[[X,d.item.duration]]),l[16]||(l[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",br,[e("div",yr,[N(e("textarea",{"onUpdate:modelValue":l[9]||(l[9]=w=>d.item.description=w),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[X,d.item.description]]),l[17]||(l[17]=e("label",{for:"description"},"Description",-1))])]),e("div",$r,[(t(!0),s(L,null,B(d.item.genres,w=>(t(),s("span",wr,f(w.genreName),1))),256)),(t(!0),s(L,null,B(d.item.categories,w=>(t(),s("span",hr,f(w.categoryName),1))),256))])])])])],2),e("div",{class:ee([x("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",_r,[e("div",kr,[e("table",Sr,[l[18]||(l[18]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Tr,[(t(!0),s(L,null,B(d.item.formats,(w,k)=>(t(),s("tr",Ir,[e("td",Mr,f(k+1),1),e("td",null,f(w.formatName),1),e("td",null,f(w.serverUrl),1),e("td",null,f(w.path),1)]))),256))])])])])],2),e("div",{class:ee([x("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",xr,[e("div",null,[e("div",Cr,[e("button",{onClick:l[10]||(l[10]=w=>n()),class:"btn btn-outline-primary btn-sm"},l[19]||(l[19]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),W("Process ")]))]),e("div",Vr,[e("table",Pr,[l[20]||(l[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.blankFrames,(w,k)=>(t(),s("tr",{key:w.videoBlankFrameId},[e("td",null,f(k+1),1),e("td",null,f(o(R).moment.utc(w.startInMillis).format("HH:mm:ss")),1),e("td",null,f(o(R).moment.utc(w.endInMillis).format("HH:mm:ss")),1),e("td",null,f(o(R).moment.utc(w.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Se,d.item.blankFrames.length>0]])])])])])],2),e("div",{class:ee([x("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Or,[e("div",Ar,[e("table",Ur,[l[21]||(l[21]=e("caption",null,"VOD Sources",-1)),l[22]||(l[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.vodSources,(w,k)=>(t(),s("tr",{key:w.vodSourceId},[e("td",null,f(k+1),1),e("td",null,[F(b,{to:`${g.urlViewVodSource}/${encodeURIComponent(w.vodSourceId)}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(w.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Se,d.item.vodSources.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Dr=["disabled"],Hr={class:"form-floating mb-2"},Er={key:0,class:"d-block invalid-feedback"},qr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Source Group"}),U=a,C=be({lookups:{},item:{name:null}}),h={item:{name:{required:oe.withMessage("name is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(h,C);me(async()=>{});const Q=async()=>{const J=C;if(O.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const y=V.clone(J.item);await Y.post("/api/v1/sourcegroups/",y).then(j=>{G.success("Add Source Group","Source group added.",{onClose:async()=>{const p=`${U.urlView}/${j.data}`;await K.push(p)}})})}catch(y){A.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{O.value=!1}};return(J,d)=>{const y=te("router-link"),j=te("PageHeader"),p=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(j,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:d[0]||(d[0]=x=>Q()),class:"btn btn-primary"},d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Dr),F(y,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(p,{errorMessage:o(A),vuelidate:o(u)},{default:z(()=>[e("div",null,[e("div",Hr,[N(e("input",{"onUpdate:modelValue":d[1]||(d[1]=x=>C.item.name=x),type:"text",class:ee([o(V).getValidFeedbackCss(C.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[X,C.item.name]]),d[4]||(d[4]=e("label",{for:"name"},"Name",-1)),o(u).item.name.$error?(t(),s("div",Er,[(t(!0),s(L,null,B(o(u).item.name.$errors,x=>(t(),s("div",{key:x.$uid},f(x.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Br={key:0,class:"d-flex justify-content-end"},Nr=["disabled"],Rr={key:0},Fr={class:"row row-cols-1 row-cols-sm-2"},zr={class:"col"},Gr={class:"form-floating mb-2"},jr={key:0,class:"d-block invalid-feedback"},Yr={class:"col"},Wr={class:"form-floating mb-2"},Kr={key:0,class:"d-block invalid-feedback"},Qr={class:"row row-cols-sm-2"},Jr={class:"col"},Xr={class:"form-floating mb-2"},Zr={class:"form-floating mb-2"},ei={key:0,class:"d-block invalid-feedback"},ti={class:"form-floating mb-2"},si={key:0,class:"d-block invalid-feedback"},oi={class:"col"},ai={class:"form-floating mb-2"},ot={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),U=a,C=be({editorElementId:"editor",htmlContent:"",item:null}),h={item:{title:{required:oe.withMessage("Title is required.",le),$autoDirty:!0,$lazy:!0},eidr:{required:oe.withMessage("eidr is required.",le),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:oe.withMessage("eidrPrefix is required.",le),$autoDirty:!0,$lazy:!0}},htmlContent:{required:oe.withMessage("Content is required.",le),$autoDirty:!0,$lazy:!0}},u=Te(h,C);me(async()=>{await d()});const Q=()=>{const j=C;var p=document.getElementById(j.editorElementId);p.innerHTML=j.htmlContent},J=j=>{const p=C;p.htmlContent=j.target.innerHTML;var x=document.getElementById(p.editorElementId);x.value=p.htmlContent},d=async()=>{const j=C;if(!O.value)try{O.value=!0,C.item=null,await Y.get(`/api/v1/movies/${U.id}`).then(p=>{j.item=p.data,j.htmlContent=j.item.description}),Q()}catch(p){A.value=V.getErrorMessageAsHtml(p)}finally{O.value=!1}},y=async()=>{const j=C;if(O.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const x=V.clone(j.item);x.description=j.htmlContent,await Y.put("/api/v1/movies",x).then(r=>{G.success("Edit Movie","Movie edited",{onClose:async()=>{const _=`${U.urlView}/${U.id}`;await K.push(_)}})})}catch(x){A.value=V.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{O.value=!1}};return(j,p)=>{const x=te("router-link"),r=te("PageHeader"),_=te("PageBody");return t(),s("div",null,[F(r,{"page-icon":"fas fa-fw fa-film",pageTitle:o(M),"header-break":"row row-cols-2 row-cols-sm-2"},{default:z(()=>[C.item?(t(),s("div",Br,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:p[0]||(p[0]=i=>y()),class:"btn btn-primary"},p[7]||(p[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Nr),e("button",{onClick:d,class:"ms-2 btn btn-secondary"},p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(x,{to:`${U.urlView}/${U.id}`,class:"ms-1 btn btn-secondary"},{default:z(()=>p[9]||(p[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):H("",!0)]),_:1},8,["pageTitle"]),F(_,{errorMessage:o(A),vuelidate:o(u)},{default:z(()=>[C.item?(t(),s("div",Rr,[e("div",Fr,[e("div",zr,[e("div",Gr,[N(e("input",{"onUpdate:modelValue":p[1]||(p[1]=i=>C.item.eidrPrefix=i),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[X,C.item.eidrPrefix]]),p[10]||(p[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(u).item.eidrPrefix.$error?(t(),s("div",jr,[(t(!0),s(L,null,B(o(u).item.eidrPrefix.$errors,i=>(t(),s("div",{key:i.$uid},f(i.$message),1))),128))])):H("",!0)])]),e("div",Yr,[e("div",Wr,[N(e("input",{"onUpdate:modelValue":p[2]||(p[2]=i=>C.item.eidr=i),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[X,C.item.eidr]]),p[11]||(p[11]=e("label",{for:"title"},"Eidr",-1)),o(u).item.eidr.$error?(t(),s("div",Kr,[(t(!0),s(L,null,B(o(u).item.eidr.$errors,i=>(t(),s("div",{key:i.$uid},f(i.$message),1))),128))])):H("",!0)])])]),e("div",Qr,[e("div",Jr,[e("div",Xr,[N(e("input",{"onUpdate:modelValue":p[3]||(p[3]=i=>C.item.releaseYear=i),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[X,C.item.releaseYear]]),p[12]||(p[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Zr,[N(e("input",{"onUpdate:modelValue":p[4]||(p[4]=i=>C.item.title=i),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[X,C.item.title]]),p[13]||(p[13]=e("label",{for:"title"},"Title",-1)),o(u).item.title.$error?(t(),s("div",ei,[(t(!0),s(L,null,B(o(u).item.title.$errors,i=>(t(),s("div",{key:i.$uid},f(i.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",ti,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:p[5]||(p[5]=i=>J(i))},null,32),p[14]||(p[14]=e("label",{for:"editor"},"Content",-1)),o(u).htmlContent.$error?(t(),s("div",si,[(t(!0),s(L,null,B(o(u).htmlContent.$errors,i=>(t(),s("div",{key:i.$uid},f(i.$message),1))),128))])):H("",!0)])]),e("div",oi,[e("div",ai,[N(e("textarea",{"onUpdate:modelValue":p[6]||(p[6]=i=>C.item.metadata=i),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[X,C.item.metadata]]),p[15]||(p[15]=e("label",{for:"title"},"Metadata",-1))])])])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},li={components:{Page:ot},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ni(a,g,M,O,T,D){const A=te("Page");return t(),ve(A,{id:M.id,urlView:M.urlView},null,8,["id","urlView"])}const ri=Pe(li,[["render",ni]]),ii={class:"ms-2"},di={class:"input-group"},ui={class:"table-responsive border shadow-sm"},ci={class:"table table-hover mb-0"},mi=["textContent"],fi={key:0,class:"fas fa-fw fa-check-circle text-success"},pi="/api/v1/sourcegroups/search",vi={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(a){xe("$config");const M=he().user,{appTitle:O,pageTitle:T,busy:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,security:C,filter:h,initializeFilter:u,getQuery:Q,saveQuery:J,search:d,getRowNumber:y,setSelected:j,isSelected:p}=De({appTitle:"Arcadian-FAST",pageTitle:"Source Groups",cacheKey:`${M==null?void 0:M.userId}/source-groups/search`,baseUrl:pi,filter:{updateUrl:!0}});return me(async()=>{u(),await d()}),(x,r)=>{const _=te("router-link"),i=te("PageHeader"),n=te("m-pagination"),v=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(i,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(T)},{default:z(()=>[F(_,{to:a.urlAdd,class:"btn btn-primary"},{default:z(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ii,[e("div",di,[N(e("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>o(h).query.criteria=l),onKeyup:r[1]||(r[1]=Le(l=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[X,o(h).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:r[2]||(r[2]=l=>o(d)(1))},r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(Y)},{default:z(()=>[e("div",ui,[e("table",ci,[r[5]||(r[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(h).items,(l,b)=>(t(),s("tr",{key:l.sourceGroupId},[e("td",{textContent:f(o(y)(b)),class:"text-center"},null,8,mi),e("td",null,[F(_,{to:`${a.urlView}/${l.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[l.arn?(t(),s("span",fi)):H("",!0),W(" "+f(l.name),1)]),_:2},1032,["to"])]),e("td",null,f(l.channelOutputs),1),e("td",null,f(l.packageConfigurations),1)]))),128))]),_:1},512),[[Se,o(h).items.length>0]])])]),F(n,{filter:o(h),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},gi={key:0},bi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},yi={class:"nav-item",role:"presentation"},$i={class:"nav-item",role:"presentation"},wi={class:"nav-item",role:"presentation"},hi={class:"tab-content",id:"myTabContent"},_i={class:"mt-2"},ki={class:"form-floating mb-2"},Si={class:"mt-2"},Ti={class:"table-responsive border"},Ii={class:"table table-hover mb-0"},Mi={class:"mt-2"},xi={class:"table-responsive border"},Ci={class:"table table-hover mb-0"},Vi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(a){const g=a,{appTitle:M,pageTitle:O,busy:T,isDirty:D,validations:A,infoMessage:K,warningMessage:Y,errorMessage:V,router:G,axios:se,utils:R,toasts:U,close:C,closeWithReturnUrl:h,generateReturnUrl:u,security:Q}=we({appTitle:"Arcadian-FAST",pageTitle:"View Source Group"});xe("$config");const J=he();J.user;const d=be({user:J.user,item:null}),y=de();me(async()=>{await r(),y.value=R.getPageTab("sourceGroup")||"information-tab"});const j=n=>{R.setPageTab("sourceGroup",n),y.value=n},p=n=>n!==y.value?"":"active",x=n=>n!==y.value?"":"show active",r=async()=>{const n=d;if(!T.value)try{T.value=!0,V.value="",d.item=null;const v=`/api/v1/sourcegroups/${g.id}/`;await se.get(v).then(l=>{n.item=l.data})}catch(v){V.value=R.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{T.value=!1}},_=async()=>{if(!T.value)try{T.value=!0,V.value="";const n=`/api/v1/sourcegroups/${g.id}/`;await se.delete(n).then(v=>{U.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const l=`${g.urlMain}/`;await G.push(l)}})})}catch(n){V.value=R.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{T.value=!1}},i=async()=>{await r()};return(n,v)=>{const l=te("PageHeader"),b=te("router-link"),m=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(l,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(O)},{default:z(()=>[e("button",{onClick:v[0]||(v[0]=c=>_()),class:"ms-1 btn btn-warning"},v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:v[1]||(v[1]=c=>i()),class:"ms-2 btn btn-secondary"},v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:v[2]||(v[2]=c=>o(h)(g.urlMain)),class:"btn btn-secondary ms-1"},v[9]||(v[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(m,{errorMessage:o(V)},{default:z(()=>[d.item?(t(),s("div",gi,[e("div",null,[e("ul",bi,[e("li",yi,[e("button",{onClick:v[3]||(v[3]=c=>j("information-tab")),class:ee([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",$i,[e("button",{onClick:v[4]||(v[4]=c=>j("channelOutputs-tab")),class:ee([p("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",wi,[e("button",{onClick:v[5]||(v[5]=c=>j("packageConfigurations-tab")),class:ee([p("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",hi,[e("div",{class:ee([x("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",_i,[e("div",ki,[N(e("input",{"onUpdate:modelValue":v[6]||(v[6]=c=>d.item.name=c),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[X,d.item.name]]),v[10]||(v[10]=e("label",{for:"name"},"Name",-1))])])],2),e("div",{class:ee([x("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Si,[e("div",Ti,[e("table",Ii,[v[11]||(v[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.channelOutputs,(c,w)=>(t(),s("tr",{key:c.channelOutputId},[e("td",null,f(w+1),1),e("td",null,[F(b,{to:`${a.urlViewChannel}/${c.channelId}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(c.manifestName),1)]),_:2},1032,["to"])]),e("td",null,f(c.outputType),1)]))),128))]),_:1},512),[[Se,d.item.channelOutputs.length>0]])])])])],2),e("div",{class:ee([x("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Mi,[e("div",xi,[e("table",Ci,[v[12]||(v[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.packageConfigurations,(c,w)=>(t(),s("tr",{key:c.packageConfigurationId},[e("td",null,f(w+1),1),e("td",null,[F(b,{to:`${a.urlViewVodSource}/${c.vodSourceId}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(c.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,f(c.path),1),e("td",null,f(c.type),1)]))),128))]),_:1},512),[[Se,d.item.packageConfigurations.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Pi=["disabled"],Oi={class:"form-floating mb-2"},Ai={key:0,class:"d-block invalid-feedback"},Ui={class:"form-floating mb-2"},Li={key:0,class:"d-block invalid-feedback"},Di={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Source Location"}),U=a,C=be({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),h={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:oe.withMessage("HTTP Configuration Base Url is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(h,C);me(async()=>{});const Q=async()=>{const J=C;if(O.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const y=V.clone(J.item);await Y.post("/api/v1/sourcelocations/",y).then(j=>{G.success("Add Source Location","Source location added.",{onClose:async()=>{const p=`${U.urlView}/${j.data}`;await K.push(p)}})})}catch(y){A.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{O.value=!1}};return(J,d)=>{const y=te("router-link"),j=te("PageHeader"),p=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(j,{"page-icon":"fas fa-fw fa-building",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:d[0]||(d[0]=x=>Q()),class:"btn btn-primary"},d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Pi),F(y,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>d[4]||(d[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(p,{errorMessage:o(A),vuelidate:o(u)},{default:z(()=>[e("div",null,[e("div",Oi,[N(e("input",{"onUpdate:modelValue":d[1]||(d[1]=x=>C.item.name=x),type:"text",class:ee([o(V).getValidFeedbackCss(C.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[X,C.item.name]]),d[5]||(d[5]=e("label",{for:"name"},"Name",-1)),o(u).item.name.$error?(t(),s("div",Ai,[(t(!0),s(L,null,B(o(u).item.name.$errors,x=>(t(),s("div",{key:x.$uid},f(x.$message),1))),128))])):H("",!0)]),e("div",Ui,[N(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=x=>C.item.httpConfigurationBaseUrl=x),type:"text",class:ee([o(V).getValidFeedbackCss(C.item.httpConfigurationBaseUrl),"form-control"]),id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,2),[[X,C.item.httpConfigurationBaseUrl]]),d[6]||(d[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(u).item.httpConfigurationBaseUrl.$error?(t(),s("div",Li,[(t(!0),s(L,null,B(o(u).item.httpConfigurationBaseUrl.$errors,x=>(t(),s("div",{key:x.$uid},f(x.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Hi={components:{Page:ot},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ei(a,g,M,O,T,D){const A=te("Page");return t(),ve(A,{id:M.id,urlView:M.urlView},null,8,["id","urlView"])}const qi=Pe(Hi,[["render",Ei]]),Bi={class:"ms-1"},Ni={class:"input-group"},Ri={class:"table-responsive border shadow-sm"},Fi={class:"table table-hover mb-0"},zi={class:"text-center"},Gi=["textContent"],ji={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Yi={class:"text-center"},Wi=["onUpdate:modelValue"],Ki="/api/v1/sourcelocations/search",Qi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(a){xe("$config");const M=he().user,{appTitle:O,pageTitle:T,busy:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,security:C,filter:h,initializeFilter:u,getQuery:Q,saveQuery:J,search:d,getRowNumber:y,setSelected:j,isSelected:p}=De({appTitle:"Arcadian-FAST",pageTitle:"Source Locations",cacheKey:`${M==null?void 0:M.userId}/source-locations/search`,baseUrl:Ki,filter:{updateUrl:!0}}),x=Me(()=>{const i=h.value;return i&&i.items?i.items.filter(l=>l.selected):null});me(async()=>{u(),await d()});const r=async()=>{if(!(x.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!D.value){Y.value=null;try{D.value=!0;const v={sourceLocationIds:x.value.map(l=>l.sourceLocationId)};await G.post("/api/v1/sourceLocations/publish/",v).then(l=>{R.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),D.value=!1,await d()}catch(n){Y.value=se.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{D.value=!1}}},_=async()=>{if(!(x.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!D.value){Y.value=null;try{D.value=!0;const v={sourceLocationIds:x.value.map(l=>l.sourceLocationId)};await G.post("/api/v1/sourceLocations/unpublish/",v).then(l=>{R.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),D.value=!1,await d()}catch(n){Y.value=se.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{D.value=!1}}};return(i,n)=>{const v=te("router-link"),l=te("PageHeader"),b=te("m-pagination"),m=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(l,{"page-icon":"fas fa-fw fa-building",pageTitle:o(T)},{default:z(()=>[F(v,{to:a.urlAdd,class:"btn btn-primary ms-2"},{default:z(()=>n[3]||(n[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Bi,[e("div",Ni,[N(e("input",{"onUpdate:modelValue":n[0]||(n[0]=c=>o(h).query.criteria=c),onKeyup:n[1]||(n[1]=Le(c=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[X,o(h).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:n[2]||(n[2]=c=>o(d)(1))},n[4]||(n[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(m,{errorMessage:o(Y)},{default:z(()=>[e("div",Ri,[e("table",Fi,[e("thead",null,[e("tr",null,[n[7]||(n[7]=e("td",{class:"text-center"},"#",-1)),n[8]||(n[8]=e("th",null,"Name",-1)),n[9]||(n[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",zi,[x.value.length?(t(),s(L,{key:0},[e("button",{onClick:r,class:"btn btn-primary btn-sm"},n[5]||(n[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:_,class:"btn btn-warning btn-sm ms-1"},n[6]||(n[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0)])])]),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(h).items,(c,w)=>(t(),s("tr",{key:c.sourceLocationId},[e("td",{textContent:f(o(y)(w)),class:"text-center"},null,8,Gi),e("td",null,[F(v,{to:`${a.urlView}/${c.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[c.arn?(t(),s("i",ji)):H("",!0),e("span",null,f(c.name),1)]),_:2},1032,["to"])]),e("td",null,f(c.httpConfigurationBaseUrl),1),e("td",Yi,[N(e("input",{"onUpdate:modelValue":k=>c.selected=k,type:"checkbox",class:"form-check-input"},null,8,Wi),[[Ne,c.selected]])])]))),128))]),_:1},512),[[Se,o(h).items.length>0]])])]),F(b,{filter:o(h),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ji={key:0},Xi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Zi={class:"nav-item",role:"presentation"},ed={class:"nav-item",role:"presentation"},td={class:"nav-item",role:"presentation"},sd={class:"tab-content",id:"myTabContent"},od={class:"mt-2"},ad={class:"col"},ld={class:"form-floating mb-2"},nd={class:"col"},rd={class:"form-floating mb-2"},id={class:"mt-2"},dd={class:"table-responsive border"},ud={class:"table table-hover mb-0"},cd={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},md={class:"mt-2"},fd={class:"table-responsive border"},pd={class:"table table-hover mb-0"},vd={key:0,class:"fas fa-fw fa-check-circle text-success"},gd={class:"badge bg-info"},bd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(a){const g=a,{appTitle:M,pageTitle:O,busy:T,isDirty:D,validations:A,infoMessage:K,warningMessage:Y,errorMessage:V,router:G,axios:se,utils:R,toasts:U,close:C,closeWithReturnUrl:h,generateReturnUrl:u,security:Q}=we({appTitle:"Arcadian-FAST",pageTitle:"View Source Location"});xe("$config");const J=he();J.user;const d=be({user:J.user,item:null}),y=de();me(async()=>{await r(),y.value=R.getPageTab("sourceLocation")||"information-tab"});const j=v=>{R.setPageTab("sourceLocation",v),y.value=v},p=v=>v!==y.value?"":"active",x=v=>v!==y.value?"":"show active",r=async()=>{const v=d;if(!T.value)try{T.value=!0,V.value="",d.item=null;const l=`/api/v1/sourcelocations/${g.id}/`;await se.get(l).then(b=>{v.item=b.data})}catch(l){V.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{T.value=!1}},_=async()=>{await r()},i=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!T.value){V.value=null;try{T.value=!0;const l={sourceLocationIds:[g.id]};await se.post("/api/v1/sourcelocations/publish/",l).then(b=>{U.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),T.value=!1,await _()}catch(l){V.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{T.value=!1}}},n=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!T.value){V.value=null;try{T.value=!0;const l={sourceLocationIds:[g.id]};await se.post("/api/v1/sourcelocations/unpublish/",l).then(b=>{U.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),T.value=!1,await _()}catch(l){V.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{T.value=!1}}};return(v,l)=>{const b=te("PageHeader"),m=te("router-link"),c=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(b,{"page-icon":"fas fa-fw fa-building",pageTitle:o(O)},{default:z(()=>[d.item?(t(),s(L,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:l[0]||(l[0]=w=>n()),class:"ms-1 btn btn-warning"},l[9]||(l[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:l[1]||(l[1]=w=>i()),class:"ms-1 btn btn-primary"},l[10]||(l[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),e("button",{onClick:l[2]||(l[2]=w=>_()),class:"ms-2 btn btn-secondary"},l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[3]||(l[3]=w=>o(h)(g.urlMain)),class:"btn btn-secondary ms-1"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(c,{errorMessage:o(V)},{default:z(()=>[d.item?(t(),s("div",Ji,[e("div",null,[e("ul",Xi,[e("li",Zi,[e("button",{onClick:l[4]||(l[4]=w=>j("information-tab")),class:ee([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ed,[e("button",{onClick:l[5]||(l[5]=w=>j("vodSources-tab")),class:ee([p("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",td,[e("button",{onClick:l[6]||(l[6]=w=>j("programs-tab")),class:ee([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",sd,[e("div",{class:ee([x("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",od,[e("div",ad,[e("div",ld,[N(e("input",{"onUpdate:modelValue":l[7]||(l[7]=w=>d.item.name=w),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[X,d.item.name]]),l[13]||(l[13]=e("label",{for:"name"},"Name",-1))])]),e("div",nd,[e("div",rd,[N(e("input",{"onUpdate:modelValue":l[8]||(l[8]=w=>d.item.httpConfigurationBaseUrl=w),type:"text",class:"form-control-plaintext",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[X,d.item.httpConfigurationBaseUrl]]),l[14]||(l[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:ee([x("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",id,[e("div",dd,[e("table",ud,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.vodSources,(w,k)=>(t(),s("tr",{key:w.vodSourceId},[e("td",null,f(k+1),1),e("td",null,[w.arn?(t(),s("span",cd)):H("",!0),F(m,{to:`${g.urlViewVodSource}/${encodeURIComponent(w.vodSourceId)}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(w.name),1)]),_:2},1032,["to"])]),e("td",null,[F(m,{to:`${g.urlViewVideo}/${encodeURIComponent(w.video.videoId)}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(w.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,f(o(R).moment.utc(w.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Se,d.item.vodSources.length>0]])])])])],2),e("div",{class:ee([x("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",md,[e("div",fd,[e("table",pd,[l[17]||(l[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.programs,(w,k)=>(t(),s("tr",{key:w.programId},[e("td",null,f(k+1),1),e("td",null,[F(m,{to:`${g.urlViewChannel}/${encodeURIComponent(w.channel.channelId)}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(w.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[w.arn?(t(),s("span",vd)):H("",!0),W(" "+f(w.name)+" ",1),e("div",null," Start: "+f(o(R).moment.utc(w.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+f(o(R).moment.utc(w.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[W(f(o(R).moment(w.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",gd,f(o(R).moment(w.dateScheduledStart).fromNow()),1)])]),l[16]||(l[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Se,d.item.programs.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},yd=["id"],$d={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},wd={class:"modal-content"},hd={class:"modal-header"},_d={class:"modal-title"},kd={class:"modal-body p-1"},Sd={class:"row row-cols-1 row-cols-sm-3"},Td={class:"col"},Id={class:"form-floating mb-2"},Md=["value"],xd={class:"col"},Cd={class:"form-floating mb-2"},Vd=["value"],Pd={class:"col"},Od={class:"input-group mb-2"},Ad={class:"form-floating"},Ud={class:"row row-cols-1 row-cols-sm-2"},Ld={class:"col-sm-4"},Dd={class:"card"},Hd={key:0,class:"mt-2"},Ed={class:"col"},qd={class:"form-floating mb-2"},Bd={class:"col ms-2 my-2"},Nd={class:"badge bg-info me-1"},Rd={class:"badge bg-primary me-1"},Fd={class:"row row-cols-1 row-cols-sm-2"},zd={class:"col"},Gd={class:"form-floating mb-2"},jd={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Yd={class:"col"},Wd={class:"form-floating mb-2"},Kd={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Qd={class:"col"},Jd={class:"form-floating mb-2"},Xd={class:"col-sm-8"},Zd={class:"table-responsive border shadow-sm"},eu={class:"table table-sm table-hover mb-0 overflow-auto"},tu=["textContent"],su={class:"d-flex flex-row justify-content-start"},ou={class:"mt-1"},au=["src"],lu={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},nu={class:"ms-2"},ru=["onClick"],iu={class:"modal-footer"},du="/api/v1/videos/search",ft={__name:"_selectVideo",emits:["close"],setup(a,{expose:g,emit:M}){const T=he().user,{appTitle:D,pageTitle:A,busy:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,security:h,filter:u,initializeFilter:Q,getQuery:J,saveQuery:d,search:y,getRowNumber:j,setSelected:p,isSelected:x}=De({appTitle:"Arcadian-FAST",pageTitle:"Select Video",cacheKey:`${T==null?void 0:T.userId}/videos/select`,baseUrl:du,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(k,$)=>{const q=k.value,S=new URLSearchParams(window.location.search),P=JSON.parse(localStorage.getItem($))||{};q.query.genre=S.get("genre")||P.genre||q.query.genre||0,q.query.category=S.get("category")||P.category||q.query.category||0},getQuery:k=>["?c=",encodeURIComponent(k.query.criteria),"&p=",k.pageIndex,"&s=",k.pageSize,"&sf=",k.sortField,"&so=",k.sortOrder,"&genre=",k.query.genreId,"&category=",k.query.categoryId,"&sourceLocationId=",k.query.sourceLocationId].join(""),saveQuery:(k,$)=>{localStorage.setItem($,JSON.stringify({criteria:k.query.criteria,pageIndex:k.pageIndex,pageSize:k.pageSize,sortField:k.sortField,sortOrder:k.sortOrder,visible:k.visible,genre:k.query.genre,category:k.query.category}))}}),r=M,_=de("modalSelectVideo"),i=be({video:null,hls:null});me(async()=>{Q(),await n()}),Ue(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const n=async()=>{await b(),await m()},v=async k=>{u.value.query.sourceLocationId=k,G.value="",await y();var $=document.getElementById(_.value),q=_e.getOrCreateInstance($);q.show()},l=async()=>{var k=document.getElementById(_.value),$=_e.getOrCreateInstance(k);$.hide(),i.hls&&(i.hls.stopLoad(),i.hls.destroy()),r("close",i.video)},b=async k=>{try{const q=await R.get("/api/v1/lookups/video-categories/").then(S=>S.data);u.value.lookups.categories=q}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},m=async k=>{try{const q=await R.get("/api/v1/lookups/video-genres/").then(S=>S.data);u.value.lookups.genres=q}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},c=k=>{i.video=k,w()},w=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var k=document.getElementById("video-select-preview");const q=i.video.formats.find(P=>P.formatName==="HLS"),S=q.serverUrl+q.path;i.hls=U.createHlsStream(k,S)}};return g({open:v,close:l}),(k,$)=>{const q=te("m-pagination"),S=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",$d,[e("div",wd,[e("div",hd,[e("h5",_d,[$[10]||($[10]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),W(f(o(A)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=P=>l()),"aria-label":"Close"})]),e("div",kd,[F(S,{errorMessage:o(G)},{default:z(()=>[e("div",Sd,[e("div",Td,[e("div",Id,[N(e("select",{"onUpdate:modelValue":$[1]||($[1]=P=>o(u).query.categoryId=P),class:"form-select",id:"category"},[(t(!0),s(L,null,B(o(u).lookups.categories,P=>(t(),s("option",{value:P.id},f(P.name),9,Md))),256))],512),[[ge,o(u).query.categoryId]]),$[11]||($[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",xd,[e("div",Cd,[N(e("select",{"onUpdate:modelValue":$[2]||($[2]=P=>o(u).query.genreId=P),class:"form-select",id:"genre"},[(t(!0),s(L,null,B(o(u).lookups.genres,P=>(t(),s("option",{value:P.id},f(P.name),9,Vd))),256))],512),[[ge,o(u).query.genreId]]),$[12]||($[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Pd,[e("div",Od,[e("div",Ad,[N(e("input",{"onUpdate:modelValue":$[3]||($[3]=P=>o(u).query.criteria=P),onKeyup:$[4]||($[4]=Le(P=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[X,o(u).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[5]||($[5]=P=>o(y)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Ud,[e("div",Ld,[e("div",Dd,[$[19]||($[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),i.video?(t(),s("div",Hd,[e("div",Ed,[e("div",qd,[N(e("input",{"onUpdate:modelValue":$[6]||($[6]=P=>i.video.title=P),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[X,i.video.title]]),$[15]||($[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Bd,[e("div",null,[(t(!0),s(L,null,B(i.video.genres,P=>(t(),s("span",Nd,f(P.genreName),1))),256)),(t(!0),s(L,null,B(i.video.categories,P=>(t(),s("span",Rd,f(P.categoryName),1))),256))])]),e("div",Fd,[e("div",zd,[e("div",Gd,[e("div",jd,f(o(U).moment(i.video.dateReleased).calendar()),1),$[16]||($[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Yd,[e("div",Wd,[e("div",Kd,f(o(U).moment.utc(i.video.durationInMillis).format("HH:mm:ss")),1),$[17]||($[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Qd,[e("div",Jd,[N(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=P=>i.video.description=P),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[X,i.video.description]]),$[18]||($[18]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])]),e("div",Xd,[e("div",Zd,[e("table",eu,[$[20]||($[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(u).items,(P,re)=>(t(),s("tr",{key:P.videoId},[e("td",{textContent:f(o(j)(re)),class:"text-center"},null,8,tu),e("td",null,[e("div",su,[e("div",null,[P.thumbnails.length>0?(t(!0),s(L,{key:0},B(P.thumbnails,fe=>(t(),s("div",ou,[e("img",{src:fe.url,class:"img-fuild border",width:"128"},null,8,au)]))),256)):(t(),s("img",lu))]),e("div",nu,[e("a",{onClick:fe=>c(P),class:"text-wrap link-offset-2",role:"button"},f(P.title),9,ru)])])])]))),128))]),_:1},512),[[Se,o(u).items.length>0]])])]),F(q,{filter:o(u),search:o(y),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",iu,[e("button",{onClick:$[8]||($[8]=P=>l()),class:"btn btn-primary",type:"button"},$[21]||($[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[9]||($[9]=P=>l()),class:"btn btn-secondary ms-1"},$[22]||($[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,yd)}}},uu=["disabled"],cu={class:"col"},mu={class:"form-floating mb-2"},fu={key:0,class:"d-block invalid-feedback"},pu={class:"row row-cols-1 row-cols-sm-2"},vu={class:"col"},gu={class:"form-floating mb-2"},bu=["value"],yu={key:0,class:"d-block invalid-feedback"},$u={class:"col"},wu={class:"input-group mb-2"},hu={class:"form-floating"},_u={key:0},ku={class:"d-flex flex-row justify-content-start"},Su={key:0,class:"d-inline invalid-feedback"},Tu={class:"table-responsive border mt-1"},Iu={class:"table mb-0 caption-top"},Mu={class:"align-middle"},xu=["onUpdate:modelValue"],Cu=["value"],Vu=["onUpdate:modelValue"],Pu=["value"],Ou=["onClick"],Au={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,route:Y,axios:V,utils:G,toasts:se,close:R,closeWithReturnUrl:U,security:C}=we({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source"}),h=a,u=be({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),Q=de(),J=(b,m,c)=>b.length>0,d={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},videoId:{required:oe.withMessage("Video is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("Source Locaton is required.",le),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:oe.withMessage("PackageConfigurations is required.",J),$each:oe.forEach({path:{required:oe.withMessage("Path is required.",le)},sourceGroupId:{required:oe.withMessage("Source Group is required.",le)}}),$autoDirty:!0,$lazy:!0}}},y=Te(d,u);me(async()=>{if(await j(),await p(),Y.query.videoId)debugger});const j=async()=>{try{await V.get("/api/v1/sourcegroups/lookup/").then(m=>{u.lookups.sourceGroups=m.data})}catch(b){A.value=G.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},p=async()=>{try{if(await V.get("/api/v1/sourcelocations/lookup/").then(m=>{u.lookups.sourceLocations=m.data}),u.lookups.sourceLocations.length===1){const m=u.lookups.sourceLocations[0];u.selected.sourceLocation=m,await x()}}catch(b){A.value=G.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},x=async()=>{const b=u.selected.sourceLocation;u.item.sourceLocationId=b.id},r=async()=>{u.item.videoId=u.selected.video.videoId,await _(u.item.videoId)},_=async b=>{try{const m=`/api/v1/videos/${b}/formats`;await V.get(m).then(c=>{u.selected.video.formats=c.data})}catch(m){A.value=G.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},i=async()=>{const b=u;if(O.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const c=G.clone(b.item),w=b.item.packageConfigurations.filter(k=>k.selectedFormat&&k.sourceGroupId);w.forEach(k=>{const $=k.selectedFormat;k.path=$.path,k.format=$.format,delete k.selectedFormat}),c.packageConfigurations=w,delete c.video,await V.post("/api/v1/vodSources/",c).then(k=>{debugger;se.success("Add VOD Source","VOD source added",{onClose:async()=>{const $=`${h.urlView}/${k.data}`;await K.push($)}})})}catch(c){A.value=G.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{O.value=!1}},n=()=>{const b={sourceGroupId:null,selectedFormat:null},m=u.selected.video;if(m){const c=m.formats.find(w=>w.formatName==="HLS");b.path=`${c.serverUrl}${c.path}`}u.item.packageConfigurations.push(b)},v=b=>{u.item.packageConfigurations.splice(b,1)},l=async b=>{b&&(u.selected.video=b,await r())};return(b,m)=>{const c=te("PageHeader"),w=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(c,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:m[0]||(m[0]=k=>i()),class:"btn btn-primary"},m[6]||(m[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,uu),e("button",{onClick:m[1]||(m[1]=k=>o(U)(h.urlMain)),class:"btn btn-secondary ms-1"},m[7]||(m[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(w,{errorMessage:o(A),vuelidate:o(y)},{default:z(()=>[e("div",null,[e("div",cu,[e("div",mu,[N(e("input",{"onUpdate:modelValue":m[2]||(m[2]=k=>u.item.name=k),id:"name",class:ee([o(G).getValidFeedbackCss(u.item.name),"form-control"]),placeholder:"Name"},null,2),[[X,u.item.name]]),m[8]||(m[8]=e("label",{for:"name",class:""},"Name",-1)),o(y).item.name.$error?(t(),s("div",fu,[(t(!0),s(L,null,B(o(y).item.name.$errors,k=>(t(),s("div",{key:k.$uid},f(k.$message),1))),128))])):H("",!0)])]),e("div",pu,[e("div",vu,[e("div",gu,[N(e("select",{"onUpdate:modelValue":m[3]||(m[3]=k=>u.selected.sourceLocation=k),onChange:m[4]||(m[4]=k=>x()),class:ee([o(G).getValidFeedbackCss(u.selected.sourceLocation),"form-select"]),id:"sourceLocationId"},[(t(!0),s(L,null,B(u.lookups.sourceLocations,k=>(t(),s("option",{value:k},f(k.name),9,bu))),256))],34),[[ge,u.selected.sourceLocation]]),m[9]||(m[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(y).item.sourceLocationId.$error?(t(),s("div",yu,[(t(!0),s(L,null,B(o(y).item.sourceLocationId.$errors,k=>(t(),s("div",{key:k.$uid},f(k.$message),1))),128))])):H("",!0)])]),e("div",$u,[e("div",wu,[e("div",hu,[e("div",{id:"video",class:ee([o(G).getValidFeedbackCss(u.selected.video),"form-control"]),placeholder:"Title"},[u.selected.video?(t(),s(L,{key:0},[W(f(o(G).moment.utc(u.selected.video.durationInMillis).format("HH:mm:ss"))+" - "+f(u.selected.video.title),1)],64)):H("",!0)],2),m[10]||(m[10]=e("label",{for:"video",class:""},"Video",-1))]),u.selected.sourceLocation?(t(),s("button",{key:0,onClick:m[5]||(m[5]=k=>Q.value.open(u.selected.sourceLocation.id)),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))):H("",!0)])])]),u.item.videoId?(t(),s("div",_u,[e("div",ku,[e("fieldset",null,[e("legend",null,[m[13]||(m[13]=W(" Package Configurations ")),o(y).item.packageConfigurations.$error?(t(),s("span",Su,m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:n,class:"btn btn-outline-primary"},m[14]||(m[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Tu,[e("table",Iu,[m[16]||(m[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",Mu,[(t(!0),s(L,null,B(u.item.packageConfigurations,(k,$)=>(t(),s("tr",null,[e("td",null,f($+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":q=>k.selectedFormat=q,class:ee([o(G).getValidFeedbackCss(k.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(L,null,B(u.selected.video.formats,q=>(t(),s("option",{value:q},f(q.path),9,Cu))),256))],10,xu),[[ge,k.selectedFormat]]),o(y).item.packageConfigurations.$each.$response?(t(!0),s(L,{key:0},B(o(y).item.packageConfigurations.$each.$response.$errors[$].path,q=>(t(),s("div",{key:q,class:"d-block invalid-feedback"},f(q.$message),1))),128)):H("",!0)]),e("td",null,[k.selectedFormat?(t(),s(L,{key:0},[W(f(k.selectedFormat.formatName),1)],64)):H("",!0)]),e("td",null,[e("div",null,[N(e("select",{"onUpdate:modelValue":q=>k.sourceGroupId=q,class:ee([o(G).getValidFeedbackCss(k.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(L,null,B(u.lookups.sourceGroups,q=>(t(),s("option",{value:q.id},f(q.name),9,Pu))),256))],10,Vu),[[ge,k.sourceGroupId]]),o(y).item.packageConfigurations.$each.$response?(t(!0),s(L,{key:0},B(o(y).item.packageConfigurations.$each.$response.$errors[$].path,q=>(t(),s("div",{key:q,class:"d-block invalid-feedback"},f(q.$message),1))),128)):H("",!0)])]),e("td",null,[e("button",{onClick:q=>v($),class:"btn btn-outline-warning"},m[15]||(m[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ou)])]))),256))])])])])):H("",!0)])]),_:1},8,["errorMessage","vuelidate"]),F(ft,{ref_key:"modalSelectVideo",ref:Q,onClose:l},null,512)])]),_:1})}}},Uu=["disabled"],Lu={key:0},Du={class:"col"},Hu={class:"form-floating mb-2"},Eu={key:0,class:"d-block invalid-feedback"},qu={class:"row row-cols-1 row-cols-sm-2"},Bu={class:"col"},Nu={class:"form-floating mb-2"},Ru=["value"],Fu={key:0,class:"d-block invalid-feedback"},zu={class:"col"},Gu={class:"col"},ju=["disabled"],Yu={class:"form-floating"},Wu={id:"video",class:"form-control",placeholder:"Title"},Ku={key:0},Qu={class:"d-flex flex-row justify-content-between mt-3"},Ju={key:0,class:"d-inline invalid-feedback"},Xu={class:"table-responsive border mt-1"},Zu={class:"table mb-0 caption-top"},ec={class:"input-group mb-1"},tc=["onUpdate:modelValue"],sc=["onUpdate:modelValue"],oc=["value"],ac=["onUpdate:modelValue"],lc=["onClick"],nc={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Edit VOD Source"}),U=a,C=de(),h=be({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),u=(b,m,c)=>b.length>0,Q={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},videoId:{required:oe.withMessage("Video is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("Source Locaton is required.",le),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:oe.withMessage("PackageConfigurations is required.",u),$each:oe.forEach({path:{required:oe.withMessage("Path is required.",le)},sourceGroupId:{required:oe.withMessage("Source Group is required.",le)}})}}},J=Te(Q,h);me(async()=>{await d(),await p(),await x()});const d=async()=>{await y(),await j()},y=async()=>{const b=h;if(!O.value)try{O.value=!0,A.value="",h.item=null;const m=`/api/v1/vodsources/${U.id}/`;await Y.get(m).then(c=>{b.item=c.data;const w=b.item,k=V.moment.utc(b.item.video.durationInMillis).format("HH:mm:ss");w.video.duration=k})}catch(m){A.value=V.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{O.value=!1}},j=async()=>{const b=h;if(!O.value)try{O.value=!0,A.value="";const m=`/api/v1/videos/${b.item.videoId}/`;await Y.get(m).then(c=>{b.selected.video=c.data})}catch(m){A.value=V.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{O.value=!1}},p=async()=>{try{await Y.get("/api/v1/sourcegroups/lookup/").then(m=>{h.lookups.sourceGroups=m.data})}catch(b){A.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},x=async()=>{try{if(await Y.get("/api/v1/sourcelocations/lookup/").then(m=>{h.lookups.sourceLocations=m.data}),h.lookups.sourceLocations.length>0){const m=h.lookups.sourceLocations.find(c=>c.id===h.item.sourceLocationId);h.selected.sourceLocation=m}}catch(b){A.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},r=async()=>{h.item.videoId=h.selected.video.videoId,await _(h.item.videoId)},_=async b=>{try{const m=`/api/v1/videos/${b}/formats`;await Y.get(m).then(c=>{h.selected.video.formats=c.data;debugger})}catch(m){A.value=V.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},i=async()=>{const b=h;if(O.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const c=V.clone(b.item);delete c.video,delete c.programs,delete c.sourceLocation,await Y.put("/api/v1/vodsources/",c).then(w=>{G.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const k=`${U.urlView}/${U.id}`;await K.push(k)}})})}catch(c){A.value=V.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{O.value=!1}},n=()=>{debugger;const b={path:"",sourceGroupId:null,type:"HLS"},m=h.selected.video;if(m){const c=m.formats.find(w=>w.formatName==="HLS");b.path=`${c.path}`}h.item.packageConfigurations.push(b)},v=b=>{h.item.packageConfigurations.splice(b,1)},l=async b=>{b&&(h.selected.video=b,h.item.packageConfigurations=[],await r())};return(b,m)=>{const c=te("router-link"),w=te("PageHeader"),k=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(w,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:m[0]||(m[0]=$=>i()),class:"btn btn-primary"},m[5]||(m[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Uu),e("button",{onClick:m[1]||(m[1]=$=>d()),class:"btn btn-secondary ms-2"},m[6]||(m[6]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(c,{to:`${a.urlView}/${a.id}`,class:"btn btn-secondary ms-1"},{default:z(()=>m[7]||(m[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(k,{errorMessage:o(A),vuelidate:o(J)},{default:z(()=>[h.item?(t(),s("div",Lu,[e("div",Du,[e("div",Hu,[N(e("input",{"onUpdate:modelValue":m[2]||(m[2]=$=>h.item.name=$),id:"name",class:"form-control",placeholder:"Name"},null,512),[[X,h.item.name]]),m[8]||(m[8]=e("label",{for:"name",class:""},"Name",-1)),o(J).item.name.$error?(t(),s("div",Eu,[(t(!0),s(L,null,B(o(J).item.name.$errors,$=>(t(),s("div",{key:$.$uid},f($.$message),1))),128))])):H("",!0)])]),e("div",qu,[e("div",Bu,[e("div",Nu,[N(e("select",{"onUpdate:modelValue":m[3]||(m[3]=$=>h.selected.sourceLocation=$),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,B(h.lookups.sourceLocations,$=>(t(),s("option",{value:$},f($.name),9,Ru))),256))],512),[[ge,h.selected.sourceLocation]]),m[9]||(m[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(J).item.sourceLocationId.$error?(t(),s("div",Fu,[(t(!0),s(L,null,B(o(J).item.sourceLocationId.$errors,$=>(t(),s("div",{key:$.$uid},f($.$message),1))),128))])):H("",!0)])]),e("div",zu,[e("div",Gu,[e("div",{class:"input-group mb-2",disabled:h.item.packageConfigurations.length>0},[e("div",Yu,[e("div",Wu,[h.selected.video?(t(),s(L,{key:0},[W(f(h.selected.video.title),1)],64)):H("",!0)]),m[10]||(m[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:m[4]||(m[4]=$=>C.value.open(h.selected.sourceLocation.id)),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))],8,ju)])])]),h.item.videoId?(t(),s("div",Ku,[e("div",Qu,[e("div",null,[e("h5",null,[m[13]||(m[13]=W(" Package Configurations ")),o(J).item.packageConfigurations.$error?(t(),s("span",Ju,m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("button",{onClick:n,class:"btn btn-outline-primary"},m[14]||(m[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),W("Package Configuration ")]))]),e("div",Xu,[e("table",Zu,[m[17]||(m[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(h.item.packageConfigurations,($,q)=>(t(),s("tr",null,[e("td",null,f(q+1),1),e("td",null,[e("div",ec,[N(e("input",{"onUpdate:modelValue":S=>$.path=S,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,tc),[[X,$.path]])]),o(J).item.packageConfigurations.$each.$response?(t(!0),s(L,{key:0},B(o(J).item.packageConfigurations.$each.$response.$errors[q].path,S=>(t(),s("div",{key:S,class:"d-block invalid-feedback"},f(S.$message),1))),128)):H("",!0)]),e("td",null,[e("div",null,[N(e("select",{"onUpdate:modelValue":S=>$.sourceGroupId=S,class:"form-select",id:"sourceGroupId"},[(t(!0),s(L,null,B(h.lookups.sourceGroups,S=>(t(),s("option",{value:S.id},f(S.name),9,oc))),256))],8,sc),[[ge,$.sourceGroupId]]),o(J).item.packageConfigurations.$each.$response?(t(!0),s(L,{key:0},B(o(J).item.packageConfigurations.$each.$response.$errors[q].path,S=>(t(),s("div",{key:S,class:"d-block invalid-feedback"},f(S.$message),1))),128)):H("",!0)])]),e("td",null,[N(e("select",{"onUpdate:modelValue":S=>$.type=S,class:"form-select",id:"type"},m[15]||(m[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,ac),[[ge,$.type]])]),e("td",null,[e("button",{onClick:S=>v(q),class:"btn btn-outline-warning"},m[16]||(m[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,lc)])]))),256))])])])])):H("",!0)])):H("",!0)]),_:1},8,["errorMessage","vuelidate"]),F(ft,{ref_key:"modalSelectVideo",ref:C,onClose:l},null,512)])]),_:1})}}},rc={class:"ms-2"},ic={class:"input-group"},dc=["value"],uc={class:"ms-1"},cc={class:"input-group"},mc=["value"],fc={class:"ms-1"},pc={class:"input-group"},vc={class:"ms-1"},gc={class:"input-group"},bc={class:"table-responsive border shadow-sm"},yc={class:"table table-hover mb-0"},$c={class:"text-center"},wc=["textContent"],hc={class:"d-flex flex-row justify-content-start"},_c={class:"mt-1"},kc=["src"],Sc={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Tc={class:"ms-2"},Ic={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Mc={class:"badge bg-primary me-1"},xc={key:0},Cc={class:"badge bg-info me-1"},Vc={class:"d-flex flex-row justify-content-start"},Pc={class:"ms-2"},Oc={class:"small"},Ac={class:"badge bg-secondary me-1"},Uc={class:"text-center"},Lc=["onUpdate:modelValue"],Dc="/api/v1/vodsources/search",Hc={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(a){xe("$config");const M=he().user,{appTitle:O,pageTitle:T,busy:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,closeWithReturnUrl:C,generateReturnUrl:h,security:u,filter:Q,initializeFilter:J,getQuery:d,saveQuery:y,search:j,getRowNumber:p,setSelected:x,isSelected:r}=De({appTitle:"Arcadian-FAST",pageTitle:"VOD Sources",cacheKey:`${M==null?void 0:M.userId}/vod-sources/search`,baseUrl:Dc,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(m,c)=>{const w=m.value,k=new URLSearchParams(window.location.search),$=JSON.parse(localStorage.getItem(c))||{};w.query.category=k.get("category")||$.category||w.query.category||0,w.query.genre=k.get("genre")||$.genre||w.query.genre||0,w.query.sourceLocationId=k.get("slid")||$.sourceLocationId||w.query.sourceLocationId||""},getQuery:m=>["?c=",encodeURIComponent(m.query.criteria),"&p=",m.pageIndex,"&s=",m.pageSize,"&sf=",m.sortField,"&so=",m.sortOrder,"&category=",m.query.category,"&genre=",m.query.genre,"&slid=",m.query.sourceLocationId].join(""),saveQuery:(m,c)=>{localStorage.setItem(c,JSON.stringify({criteria:m.query.criteria,pageIndex:m.pageIndex,pageSize:m.pageSize,sortField:m.sortField,sortOrder:m.sortOrder,visible:m.visible,category:m.query.category,genre:m.query.genre,sourceLocationId:m.query.sourceLocationId}))}}),_=Me(()=>{const m=Q.value;return m&&m.items?m.items.filter(k=>k.selected):[]});me(async()=>{J(),await l(),await b(),await j()});const i=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!D.value){Y.value=null;try{D.value=!0;const w={vodSourceIds:_.value.map(k=>k.vodSourceId)};await G.post("/api/v1/vodsources/publish/",w).then(k=>{R.success("Publish VODs","VODs was published.",{async onClose(){}})}),D.value=!1,await j()}catch(c){Y.value=se.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{D.value=!1}}},n=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!D.value){Y.value=null;try{D.value=!0;const w={vodSourceIds:_.value.map(k=>k.vodSourceId)};await G.post("/api/v1/vodsources/unpublish/",w).then(k=>{R.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),D.value=!1,await j()}catch(c){Y.value=se.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{D.value=!1}}},v=()=>{const m=Q.value.items;if(m.length<1)return;const c=!m[0].selected;Q.value.items.forEach(w=>{w.selected=c})},l=async()=>{try{await G.get("/api/v1/sourcelocations/lookup/").then(c=>{Q.value.lookups.sourceLocations=c.data})}catch(m){Y.value=se.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},b=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(m=>{const c=m.data;Q.value.lookups.genres=c})}catch(m){Y.value=se.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}};return de(!1),(m,c)=>{const w=te("router-link"),k=te("PageHeader"),$=te("m-pagination"),q=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(k,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(T)},{default:z(()=>[F(w,{to:a.urlAdd,class:"btn btn-primary"},{default:z(()=>c[6]||(c[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",rc,[e("div",ic,[c[8]||(c[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),N(e("select",{"onUpdate:modelValue":c[0]||(c[0]=S=>o(Q).query.sourceLocationId=S),class:"form-select"},[c[7]||(c[7]=e("option",{value:""},"All",-1)),(t(!0),s(L,null,B(o(Q).lookups.sourceLocations,S=>(t(),s("option",{value:S.id},f(S.name),9,dc))),256))],512),[[ge,o(Q).query.sourceLocationId]])])]),e("div",uc,[e("div",cc,[c[9]||(c[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),N(e("select",{"onUpdate:modelValue":c[1]||(c[1]=S=>o(Q).query.genre=S),class:"form-select"},[(t(!0),s(L,null,B(o(Q).lookups.genres,S=>(t(),s("option",{value:S.id},f(S.name),9,mc))),256))],512),[[ge,o(Q).query.genre]])])]),e("div",fc,[e("div",pc,[c[11]||(c[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),N(e("select",{"onUpdate:modelValue":c[2]||(c[2]=S=>o(Q).query.category=S),class:"form-select"},c[10]||(c[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ge,o(Q).query.category]])])]),e("div",vc,[e("div",gc,[N(e("input",{"onUpdate:modelValue":c[3]||(c[3]=S=>o(Q).query.criteria=S),onKeyup:c[4]||(c[4]=Le(S=>o(j)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[X,o(Q).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[5]||(c[5]=S=>o(j)(1))},c[12]||(c[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(q,{errorMessage:o(Y)},{default:z(()=>[e("div",bc,[e("table",yc,[e("thead",null,[e("tr",null,[c[16]||(c[16]=e("td",{class:"text-center"},"#",-1)),c[17]||(c[17]=e("th",null,"Name",-1)),c[18]||(c[18]=e("th",null,"Video Title",-1)),e("th",$c,[_.value.length?(t(),s(L,{key:0},[e("button",{onClick:i,class:"btn btn-sm btn-primary"},c[13]||(c[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:n,class:"btn btn-sm btn-warning ms-1"},c[14]||(c[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0),e("button",{onClick:v,class:"btn btn-sm btn-outline-primary ms-2"},c[15]||(c[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(Q).items,(S,P)=>(t(),s("tr",{key:S.vodSourceId},[e("td",{textContent:f(o(p)(P)),class:"text-center"},null,8,wc),e("td",null,[e("div",hc,[e("div",null,[S.video.thumbnails.length>0?(t(!0),s(L,{key:0},B(S.video.thumbnails,re=>(t(),s("div",_c,[e("img",{src:re.url,class:"img-fuild border",width:"128"},null,8,kc)]))),256)):(t(),s("img",Sc))]),e("div",Tc,[F(w,{to:`${a.urlView}/${S.vodSourceId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[S.arn?(t(),s("span",Ic)):H("",!0),W(f(S.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(L,null,B(S.video.categories,re=>(t(),s("div",null,[e("span",Mc,f(re.categoryName),1)]))),256)),S.video.genres.length>0?(t(),s("div",xc,[(t(!0),s(L,null,B(S.video.genres,re=>(t(),s("span",Cc,f(re.genreName),1))),256))])):H("",!0)])])])]),e("td",null,[e("div",Vc,[e("div",Pc,[F(w,{to:`${a.urlViewVideo}/${encodeURIComponent(S.video.videoId)}/${o(h)()}`,class:"link-offset-2"},{default:z(()=>[W(f(S.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Oc,f(o(se).moment.utc(S.video.durationInMillis).format("HH:mm:ss")),1)]),S.video.formats.length>0?(t(!0),s(L,{key:0},B(S.video.formats,re=>(t(),s("span",Ac,f(re.formatName),1))),256)):H("",!0)])])]),e("td",Uc,[N(e("input",{"onUpdate:modelValue":re=>S.selected=re,type:"checkbox",class:"form-check-input"},null,8,Lc),[[Ne,S.selected]])])]))),128))]),_:1},512),[[Se,o(Q).items.length>0]])])]),F($,{filter:o(Q),search:o(j),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ec=["id"],qc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Bc={class:"modal-content"},Nc={class:"modal-header"},Rc={class:"modal-title"},Fc={class:"modal-body"},zc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Gc=["innerHTML"],jc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Yc={class:"container"},Wc={class:"col"},Kc={class:"form-floating mb-2"},Qc=["value"],Jc={key:0,class:"d-block invalid-feedback"},Xc={class:"col"},Zc={class:"form-floating mb-2"},em={key:0,class:"d-block invalid-feedback"},tm={class:"col"},sm={class:"form-floating mb-2"},om=["value"],am={key:0,class:"d-block invalid-feedback"},lm={class:"modal-footer"},nm=["disabled"],rm={__name:"_addPackageConfiguration",emits:["refresh"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source Package Configuration"}),Q=M;de();const J=de("modalAddChannelOutput"),d=be({lookups:{sourceGroups:[],formats:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),y={item:{sourceGroupId:{required:oe.withMessage("Source Group is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:oe.withMessage("VOD Source is required.",le),$autoDirty:!0,$lazy:!0},path:{required:oe.withMessage("Path is required.",le),$autoDirty:!0,$lazy:!0},type:{required:oe.withMessage("Type is required.",le),$autoDirty:!0,$lazy:!0}}},j=Te(y,d);me(async()=>{j.value.$reset()});const p=async()=>{await x()},x=async()=>{try{await R.get("/api/v1/sourceGroups/lookup/").then(l=>{d.lookups.sourceGroups=l.data,d.lookups.sourceGroups.length===1&&(d.item.sourceGroupId=d.lookups.sourceGroups[0].id)})}catch(v){G.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},r=async v=>{try{const l=`/api/v1/videos/${v}/formats/`;await R.get(l).then(b=>{d.lookups.formats=b.data})}catch(l){G.value=U.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},_=async(v,l)=>{const b=d;K.value.clear(),G.value="",b.lookups={sourceGroups:[],formats:[]},b.item={sourceGroupId:null,vodSourceId:v,path:null,type:null},await p(),await r(l),j.value.$reset();var m=document.getElementById(J.value),c=_e.getOrCreateInstance(m);c.show()},i=async()=>{var v=document.getElementById(J.value),l=_e.getOrCreateInstance(v);l.hide(),Q("refresh")},n=async()=>{const v=d;if(D.value)return;const l=await j.value.$validate();debugger;if(!l){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const b=v.item;await R.post("/api/v1/vodSources/package-configurations/",b).then(m=>{C.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await i()}catch(b){G.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{D.value=!1}};return g({open:_,close:i}),(v,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",qc,[e("div",Bc,[e("div",Nc,[e("h5",Rc,[l[5]||(l[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=b=>i()),"aria-label":"Close"})]),e("div",Fc,[o(G)?(t(),s("div",zc,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Gc)])):H("",!0),o(K).size>0?(t(),s("div",jc,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),b=>(t(),s("li",null,f(b),1))),256))])])):H("",!0),e("div",Yc,[e("div",Wc,[e("div",Kc,[N(e("select",{"onUpdate:modelValue":l[1]||(l[1]=b=>d.item.sourceGroupId=b),class:ee([o(U).getValidFeedbackCss(d.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(L,null,B(d.lookups.sourceGroups,b=>(t(),s("option",{value:b.id},f(b.name),9,Qc))),256))],2),[[ge,d.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(j).item.sourceGroupId.$error?(t(),s("div",Jc,[(t(!0),s(L,null,B(o(j).item.sourceGroupId.$errors,b=>(t(),s("div",{key:b.$uid},f(b.$message),1))),128))])):H("",!0)])]),e("div",Xc,[e("div",Zc,[N(e("select",{"onUpdate:modelValue":l[2]||(l[2]=b=>d.item.type=b),class:ee([o(U).getValidFeedbackCss(d.item.type),"form-select"]),id:"type"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[ge,d.item.type]]),l[10]||(l[10]=e("label",{for:"type",class:""},"Type",-1)),o(j).item.type.$error?(t(),s("div",em,[(t(!0),s(L,null,B(o(j).item.type.$errors,b=>(t(),s("div",{key:b.$uid},f(b.$message),1))),128))])):H("",!0)])]),e("div",tm,[e("div",sm,[N(e("select",{"onUpdate:modelValue":l[3]||(l[3]=b=>d.item.path=b),class:ee([o(U).getValidFeedbackCss(d.item.path),"form-control"]),id:"path"},[(t(!0),s(L,null,B(d.lookups.formats,b=>(t(),s("option",{value:b.path},f(b.path),9,om))),256))],2),[[ge,d.item.path]]),l[11]||(l[11]=e("label",{for:"path",class:""},"Path",-1)),o(j).item.path.$error?(t(),s("div",am,[(t(!0),s(L,null,B(o(j).item.path.$errors,b=>(t(),s("div",{key:b.$uid},f(b.$message),1))),128))])):H("",!0)])])])]),e("div",lm,[e("button",{disabled:o(j).$dirty&&o(j).$invalid,onClick:l[4]||(l[4]=b=>n()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,nm),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Ec))}},im=["id"],dm={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},um={class:"modal-content"},cm={class:"modal-header"},mm={class:"modal-title"},fm={class:"modal-body"},pm={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vm=["innerHTML"],gm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bm={class:"container"},ym={class:"col"},$m={class:"form-floating mb-2"},wm={class:"col"},hm={class:"form-floating mb-2"},_m={key:0,class:"d-block invalid-feedback"},km={class:"col"},Sm={class:"form-floating mb-2"},Tm={key:0,class:"d-block invalid-feedback"},Im={class:"col"},Mm={class:"form-floating mb-2"},xm={key:0,class:"d-block invalid-feedback"},Cm={class:"modal-footer"},Vm=["disabled"],Pm={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Vod Source Playback Configuration"}),Q=M,J=de(),d=de("modalAddPlaybackConfiguration"),y=be({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),j={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:oe.withMessage("adDecisionServerUrl is required.",le),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:oe.withMessage("videoContentSourceUrl is required.",le),$autoDirty:!0,$lazy:!0}}},p=Te(j,y);me(async()=>{p.value.$reset()});const x=async(i,n)=>{J.value=i;const v=y;K.value.clear(),G.value="";const l=n,b=l.lastIndexOf("/"),m=l.substring(0,b),c="ad_campaign_"+l.substring(b+1).replace(".","_");v.item={name:c,originalVideoContentSourceUrl:n,videoContentSourceUrl:m,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},p.value.$reset();var w=document.getElementById(d.value),k=_e.getOrCreateInstance(w);k.show()},r=async()=>{var i=document.getElementById(d.value),n=_e.getOrCreateInstance(i);n.hide(),Q("refresh")},_=async()=>{const i=y;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const v=i.item;v.vodSourceId=J.value,await R.post("/api/v1/playbackconfigurations/vodsource",v).then(l=>{C.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await r()}catch(v){G.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{D.value=!1}};return g({open:x,close:r}),(i,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",dm,[e("div",um,[e("div",cm,[e("h5",mm,[n[6]||(n[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=v=>r()),"aria-label":"Close"})]),e("div",fm,[o(G)?(t(),s("div",pm,[n[7]||(n[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,vm)])):H("",!0),o(K).size>0?(t(),s("div",gm,[n[8]||(n[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),v=>(t(),s("li",null,f(v),1))),256))])])):H("",!0),e("div",bm,[e("div",ym,[e("div",$m,[N(e("input",{"onUpdate:modelValue":n[1]||(n[1]=v=>y.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[X,y.item.originalVideoContentSourceUrl]]),n[9]||(n[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",wm,[e("div",hm,[N(e("input",{"onUpdate:modelValue":n[2]||(n[2]=v=>y.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[X,y.item.name]]),n[10]||(n[10]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",_m,[(t(!0),s(L,null,B(o(p).item.name.$errors,v=>(t(),s("div",{key:v.$uid},f(v.$message),1))),128))])):H("",!0)])]),e("div",km,[e("div",Sm,[N(e("input",{"onUpdate:modelValue":n[3]||(n[3]=v=>y.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[X,y.item.videoContentSourceUrl]]),n[11]||(n[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),n[12]||(n[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(p).item.videoContentSourceUrl.$error?(t(),s("div",Tm,[(t(!0),s(L,null,B(o(p).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},f(v.$message),1))),128))])):H("",!0)])]),e("div",Im,[e("div",Mm,[N(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=v=>y.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[X,y.item.adDecisionServerUrl]]),n[13]||(n[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(p).item.adDecisionServerUrl.$error?(t(),s("div",xm,[(t(!0),s(L,null,B(o(p).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},f(v.$message),1))),128))])):H("",!0)])])])]),e("div",Cm,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:n[5]||(n[5]=v=>_()),class:"btn btn-primary",type:"button"},n[14]||(n[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Vm),n[15]||(n[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,im))}},Om={key:0},Am={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Um={class:"nav-item",role:"presentation"},Lm={class:"nav-item",role:"presentation"},Dm={class:"nav-item",role:"presentation"},Hm={class:"nav-item",role:"presentation"},Em={class:"nav-item",role:"presentation"},qm={class:"tab-content",id:"myTabContent"},Bm={class:"mt-2"},Nm={class:"row row-cols-1 row-cols-sm-2"},Rm={class:"col"},Fm=["id"],zm={class:"col"},Gm={class:"col"},jm={class:"form-floating mb-2"},Ym={class:"mt-2"},Wm={class:"row row-cols-sm-2"},Km={class:"col"},Qm={class:"form-floating mb-2"},Jm={class:"form-control-plaintext"},Xm={class:"col"},Zm={class:"form-floating mb-2"},ef={class:"mt-1"},tf={class:"badge bg-info me-1"},sf={class:"badge bg-primary me-1"},of={class:"badge bg-info me-1"},af={class:"table-responsive border mt-1"},lf={class:"table table-hover mb-0"},nf={class:"table-group-divider"},rf={class:"align-middle"},df={class:"text-center"},uf={class:"text-truncate text-wrap"},cf={class:"text-truncate text-wrap"},mf={class:"mt-2"},ff={class:"mt-2 text-end"},pf={class:"table-responsive border mt-2"},vf={class:"table table-hover mb-0 caption-top"},gf={class:"text-end"},bf=["onClick"],yf={class:"mt-2"},$f={class:"mt-1"},wf=["id"],hf={class:"text-end"},_f={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(a){const g=a,{appTitle:M,pageTitle:O,busy:T,isDirty:D,validations:A,infoMessage:K,warningMessage:Y,errorMessage:V,router:G,axios:se,utils:R,toasts:U,close:C,closeWithReturnUrl:h,generateReturnUrl:u,security:Q}=we({appTitle:"Arcadian-FAST",pageTitle:"View VOD Source"});xe("$config");const J=he();J.user;const d=be({user:J.user,item:null,hls:null}),y=de();de(null);const j=de();me(async()=>{await _();const c=R.getPageTab("vodSource")||"information-tab";p(c)}),Ue(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const p=c=>{R.setPageTab("vodSource",c),y.value=c},x=c=>c!==y.value?"":"active",r=c=>c!==y.value?"":"show active",_=async()=>{const c=d;if(!T.value)try{T.value=!0,V.value="",d.item=null;const w=`/api/v1/vodsources/${g.id}/`;await se.get(w).then(k=>{c.item=k.data;const $=c.item,q=R.moment.utc(c.item.video.durationInMillis).format("HH:mm:ss");$.video.duration=q}),m()}catch(w){V.value=R.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{T.value=!1}},i=async()=>{await _()},n=()=>{j.value.open(d.item.vodSourceId,d.item.videoId)},v=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!T.value){V.value=null;try{T.value=!0;const w={vodSourceIds:[g.id]};await se.post("/api/v1/vodsources/publish/",w).then(k=>{U.success("Publish VOD","VOD was published.",{async onClose(){}})}),T.value=!1,await i()}catch(w){V.value=R.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{T.value=!1}}},l=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!T.value){V.value=null;try{T.value=!0;const w={vodSourceIds:[g.id]};await se.post("/api/v1/vodsources/unpublish/",w).then(k=>{U.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),T.value=!1,await i()}catch(w){V.value=R.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{T.value=!1}}},b=async c=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!T.value){V.value=null;try{T.value=!0,await se.delete(`/api/v1/vodSources/package-configurations/${c}/`).then(k=>{U.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),T.value=!1,await i()}catch(k){V.value=R.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{T.value=!1}}},m=()=>{if(Hls.isSupported()){d.hls&&(d.hls.stopLoad(),d.hls.destroy());const c=`video-${d.item.vodSourceId}`,w=document.getElementById(c),k=d.item.video.formats.find(q=>q.formatName==="HLS"),$=`${k.serverUrl}${k.path}`;d.hls=R.createHlsStream(w,$)}};return(c,w)=>{const k=te("router-link"),$=te("PageHeader"),q=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(O)},{default:z(()=>[d.item?(t(),s(L,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:w[0]||(w[0]=S=>l()),class:"ms-1 btn btn-warning"},w[14]||(w[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:w[1]||(w[1]=S=>v()),class:"ms-1 btn btn-primary"},w[15]||(w[15]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),F(k,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary"},{default:z(()=>w[16]||(w[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:w[2]||(w[2]=S=>i()),class:"ms-2 btn btn-secondary"},w[17]||(w[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:w[3]||(w[3]=S=>o(h)(g.urlMain)),class:"btn btn-secondary ms-1"},w[18]||(w[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(q,{errorMessage:o(V)},{default:z(()=>[d.item?(t(),s("div",Om,[e("div",null,[e("ul",Am,[e("li",Um,[e("button",{onClick:w[4]||(w[4]=S=>p("information-tab")),class:ee([x("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Lm,[e("button",{onClick:w[5]||(w[5]=S=>p("packageConfigurations-tab")),class:ee([x("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Dm,[e("button",{onClick:w[6]||(w[6]=S=>p("channels-tab")),class:ee([x("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},w[19]||(w[19]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),W("Channels ")]),2)]),e("li",Hm,[e("button",{onClick:w[7]||(w[7]=S=>p("programs-tab")),class:ee([x("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},w[20]||(w[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),W("Programs ")]),2)]),e("li",Em,[e("button",{onClick:w[8]||(w[8]=S=>p("programTemplates-tab")),class:ee([x("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},w[21]||(w[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),W("Program Templates ")]),2)])]),e("div",qm,[e("div",{class:ee([r("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Bm,[e("div",Nm,[e("div",Rm,[e("video",{id:`video-${d.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,Fm)]),e("div",zm,[e("div",Gm,[e("div",jm,[N(e("input",{"onUpdate:modelValue":w[9]||(w[9]=S=>d.item.name=S),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[X,d.item.name]]),w[22]||(w[22]=e("label",{for:"name"},"Name",-1))])]),e("div",Ym,[w[26]||(w[26]=e("b",null," Video Information ",-1)),e("div",null,[e("div",Wm,[e("div",Km,[e("div",Qm,[e("div",Jm,[F(k,{to:`${a.urlViewVideo}/${d.item.video.videoId}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(d.item.video.title),1)]),_:1},8,["to"])]),w[23]||(w[23]=e("label",{for:"title"},"Title",-1))])]),e("div",Xm,[e("div",Zm,[N(e("input",{"onUpdate:modelValue":w[10]||(w[10]=S=>d.item.video.duration=S),type:"text",class:"form-control-plaintext",id:"duration",readonly:""},null,512),[[X,d.item.video.duration]]),w[24]||(w[24]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",ef,[(t(!0),s(L,null,B(d.item.video.genres,S=>(t(),s("span",tf,f(S.genreName),1))),256)),(t(!0),s(L,null,B(d.item.video.categories,S=>(t(),s("span",sf,f(S.categoryName),1))),256)),(t(!0),s(L,null,B(d.item.video.categories,S=>(t(),s("span",of,f(S.categoryName),1))),256))]),e("div",af,[e("table",lf,[w[25]||(w[25]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",nf,[(t(!0),s(L,null,B(d.item.video.formats,(S,P)=>(t(),s("tr",rf,[e("td",df,f(P+1),1),e("td",null,f(S.formatName),1),e("td",null,[e("div",uf,f(S.serverUrl),1)]),e("td",null,[e("div",cf,f(S.path),1)])]))),256))])])])])])])])])],2),e("div",{class:ee([r("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",mf,[e("div",ff,[e("button",{onClick:w[11]||(w[11]=S=>n()),class:"btn btn-outline-primary btn-sm"},w[27]||(w[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",pf,[e("table",vf,[w[29]||(w[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.packageConfigurations,(S,P)=>(t(),s("tr",{key:S.packageConfigurationId,class:"align-middle"},[e("td",null,f(P+1),1),e("td",null,f(S.path),1),e("td",null,f(S.sourceGroup.name),1),e("td",null,f(S.type),1),e("td",gf,[e("button",{onClick:re=>b(S.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},w[28]||(w[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,bf)])]))),128))]),_:1},512),[[Se,d.item.packageConfigurations.length>0]])])])])],2),e("div",{class:ee([r("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",yf,[e("div",$f,[e("video",{id:`video-${d.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,wf),e("div",hf,[e("button",{onClick:w[12]||(w[12]=S=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},w[30]||(w[30]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:ee([r("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},w[31]||(w[31]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:ee([r("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},w[32]||(w[32]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:ee([r("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},w[33]||(w[33]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):H("",!0)]),_:1},8,["errorMessage"]),F(rm,{ref_key:"modalAddPackageConfiguration",ref:j,onRefresh:i},null,512),F(Pm,{ref:"modalAddPlaybackConfiguration",onRefresh:w[13]||(w[13]=S=>i())},null,512)])]),_:1})}}},kf=["id"],Sf={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Tf={class:"modal-content"},If={class:"modal-header"},Mf={class:"modal-title"},xf={class:"modal-body p-1"},Cf={class:"row row-cols-1 row-cols-sm-3"},Vf={class:"col"},Pf={class:"form-floating mb-2"},Of=["value"],Af={class:"col"},Uf={class:"form-floating mb-2"},Lf=["value"],Df={class:"col"},Hf={class:"input-group mb-2"},Ef={class:"form-floating"},qf={class:"row row-cols-1 row-cols-sm-2 g-2"},Bf={class:"col-sm-4"},Nf={class:"card"},Rf={key:0,class:"mt-2"},Ff={class:"col"},zf={class:"form-floating mb-2"},Gf={class:"col ms-2 my-2"},jf={class:"badge bg-info me-1"},Yf={class:"badge bg-primary me-1"},Wf={class:"row row-cols-1 row-cols-sm-2"},Kf={class:"col"},Qf={class:"form-floating mb-2"},Jf={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Xf={class:"col"},Zf={class:"form-floating mb-2"},ep={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},tp={class:"col"},sp={class:"form-floating mb-2"},op={class:"col-sm-8"},ap={class:"table-responsive border shadow-sm"},lp={class:"table table-sm table-hover mb-0 overflow-auto"},np=["textContent"],rp={class:"d-flex flex-row justify-content-start"},ip={class:"mt-1"},dp=["src"],up={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},cp={class:"ms-2"},mp=["onClick"],fp={class:"modal-footer"},pp="/api/v1/vodSources/search",pt={__name:"_selectVodSource",emits:["close"],setup(a,{expose:g,emit:M}){const T=he().user,{appTitle:D,pageTitle:A,busy:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,security:h,filter:u,initializeFilter:Q,getQuery:J,saveQuery:d,search:y,getRowNumber:j,setSelected:p,isSelected:x}=De({appTitle:"Arcadian-FAST",pageTitle:"Select VOD Source",cacheKey:`${T==null?void 0:T.userId}/vodsources/select`,baseUrl:pp,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(k,$)=>{const q=k.value,S=new URLSearchParams(window.location.search),P=JSON.parse(localStorage.getItem($))||{};q.query.genre=S.get("genre")||P.genre||q.query.genre||0,q.query.category=S.get("category")||P.category||q.query.category||0},getQuery:k=>["?c=",encodeURIComponent(k.query.criteria),"&p=",k.pageIndex,"&s=",k.pageSize,"&sf=",k.sortField,"&so=",k.sortOrder,"&genre=",k.query.genreId,"&category=",k.query.categoryId,"&sourceLocationId=",k.query.sourceLocationId,"&withArn=true"].join(""),saveQuery:(k,$)=>{localStorage.setItem($,JSON.stringify({criteria:k.query.criteria,pageIndex:k.pageIndex,pageSize:k.pageSize,sortField:k.sortField,sortOrder:k.sortOrder,visible:k.visible,genre:k.query.genre,category:k.query.category}))}}),r=M,_=de("modalSelectVodSource"),i=be({vodSource:null,hls:null});me(async()=>{Q(),await n()}),Ue(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const n=async()=>{await b(),await m()},v=async k=>{u.value.query.sourceLocationId=k,G.value="",await y();var $=document.getElementById(_.value),q=_e.getOrCreateInstance($);q.show()},l=async()=>{var k=document.getElementById(_.value),$=_e.getOrCreateInstance(k);$.hide(),i.hls&&(i.hls.stopLoad(),i.hls.destroy()),r("close",i.vodSource)},b=async k=>{try{const q=await R.get("/api/v1/lookups/video-categories/").then(S=>S.data);u.value.lookups.categories=q}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},m=async k=>{try{const q=await R.get("/api/v1/lookups/video-genres/").then(S=>S.data);u.value.lookups.genres=q}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},c=k=>{i.vodSource=k,w()},w=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var k=document.getElementById("video-select-preview");const q=i.vodSource.video.formats.find(P=>P.formatName==="HLS"),S=q.serverUrl+q.path;i.hls=U.createHlsStream(k,S)}};return g({open:v,close:l}),(k,$)=>{const q=te("m-pagination"),S=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Sf,[e("div",Tf,[e("div",If,[e("h5",Mf,[$[10]||($[10]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(A)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=P=>l()),"aria-label":"Close"})]),e("div",xf,[F(S,{errorMessage:o(G)},{default:z(()=>[e("div",Cf,[e("div",Vf,[e("div",Pf,[N(e("select",{"onUpdate:modelValue":$[1]||($[1]=P=>o(u).query.categoryId=P),class:"form-select",id:"category"},[(t(!0),s(L,null,B(o(u).lookups.categories,P=>(t(),s("option",{value:P.id},f(P.name),9,Of))),256))],512),[[ge,o(u).query.categoryId]]),$[11]||($[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",Af,[e("div",Uf,[N(e("select",{"onUpdate:modelValue":$[2]||($[2]=P=>o(u).query.genreId=P),class:"form-select",id:"genre"},[(t(!0),s(L,null,B(o(u).lookups.genres,P=>(t(),s("option",{value:P.id},f(P.name),9,Lf))),256))],512),[[ge,o(u).query.genreId]]),$[12]||($[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Df,[e("div",Hf,[e("div",Ef,[N(e("input",{"onUpdate:modelValue":$[3]||($[3]=P=>o(u).query.criteria=P),onKeyup:$[4]||($[4]=Le(P=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[X,o(u).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[5]||($[5]=P=>o(y)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",qf,[e("div",Bf,[e("div",Nf,[$[19]||($[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),i.vodSource?(t(),s("div",Rf,[e("div",Ff,[e("div",zf,[N(e("input",{"onUpdate:modelValue":$[6]||($[6]=P=>i.vodSource.video.title=P),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[X,i.vodSource.video.title]]),$[15]||($[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Gf,[e("div",null,[(t(!0),s(L,null,B(i.vodSource.video.genres,P=>(t(),s("span",jf,f(P.genreName),1))),256)),(t(!0),s(L,null,B(i.vodSource.video.categories,P=>(t(),s("span",Yf,f(P.categoryName),1))),256))])]),e("div",Wf,[e("div",Kf,[e("div",Qf,[e("div",Jf,f(o(U).moment(i.vodSource.video.dateReleased).calendar()),1),$[16]||($[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Xf,[e("div",Zf,[e("div",ep,f(o(U).moment.utc(i.vodSource.video.durationInMillis).format("HH:mm:ss")),1),$[17]||($[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",tp,[e("div",sp,[N(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=P=>i.vodSource.video.description=P),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[X,i.vodSource.video.description]]),$[18]||($[18]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])]),e("div",op,[e("div",ap,[e("table",lp,[$[20]||($[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(u).items,(P,re)=>(t(),s("tr",{key:P.videoId},[e("td",{textContent:f(o(j)(re)),class:"text-center"},null,8,np),e("td",null,[e("div",rp,[e("div",null,[P.video.thumbnails.length>0?(t(!0),s(L,{key:0},B(P.video.thumbnails,fe=>(t(),s("div",ip,[e("img",{src:fe.url,class:"img-fuild border",width:"128"},null,8,dp)]))),256)):(t(),s("img",up))]),e("div",cp,[e("a",{onClick:fe=>c(P),class:"text-wrap link-offset-2",role:"button"},f(P.name),9,mp)])])])]))),128))]),_:1},512),[[Se,o(u).items.length>0]])])]),F(q,{filter:o(u),search:o(y),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",fp,[e("button",{onClick:$[8]||($[8]=P=>l()),class:"btn btn-primary",type:"button"},$[21]||($[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[9]||($[9]=P=>l()),class:"btn btn-secondary ms-1"},$[22]||($[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,kf)}}},vp=["disabled"],gp={class:"container1"},bp={class:"row"},yp={class:"col-12 col-lg-6"},$p={class:"col"},wp={class:"form-floating mb-2"},hp=["value"],_p={key:0,class:"d-block invalid-feedback"},kp={class:"col"},Sp={class:"input-group mb-2"},Tp={class:"form-floating"},Ip={class:"col-12 col-lg-6"},Mp={class:"col"},xp={class:"form-floating mb-2"},Cp={key:0,class:"d-block invalid-feedback"},Vp={class:"row row-cols-1 row-cols-sm-3 mt-2"},Pp={class:"col"},Op={class:"form-floating mb-2"},Ap={key:0},Up={key:1},Lp={key:2},Dp={key:3,class:"d-block invalid-feedback"},Hp={class:"col"},Ep={class:"form-floating mb-2"},qp={key:0},Bp={key:1},Np={key:2,class:"d-block invalid-feedback"},Rp={class:"col"},Fp={class:"form-floating mb-2"},zp={key:0,class:"mt-3"},Gp={class:"table-responsive border mt-1"},jp={class:"table table-borderless table-sm mb-0 align-middle"},Yp={class:"text-center"},Wp=["onUpdate:modelValue","onChange"],Kp={key:0},Qp=["onUpdate:modelValue","onChange"],Jp={class:"text-start"},Xp=["onClick"],Zp={class:"col mt-2"},ev={class:"row row-cols-1 row-cols-sm-2"},tv={class:"col"},sv={class:"form-floating mb-2"},ov={class:"col"},av={class:"form-floating mb-2"},lv={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Program Template"}),U=a,C=de(),h=be({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),u={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:oe.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:oe.withMessage("startOffsetMillis is required.",le),minValue:Re(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:oe.withMessage("endOffsetMillis is required.",le),minValue:Re(0),$autoDirty:!0,$lazy:!0}}},Q=Te(u,h),J=Me(()=>{const S=V.moment;if(h.startOffsetTime&&h.startOffsetTime!=="00:00:00"&&V.isValidTime(h.startOffsetTime)){const P=S().startOf("day"),re=P.format("YYYY-MM-DD ")+h.startOffsetTime,Z=S(re).subtract(P);return h.item.startOffsetMillis=Z.valueOf(),h.item.startOffsetMillis}return 0}),d=Me(()=>{const S=V.moment;if(h.endOffsetTime&&h.endOffsetTime!=="00:00:00"&&V.isValidTime(h.endOffsetTime)){const P=S().startOf("day"),re=P.format("YYYY-MM-DD ")+h.endOffsetTime,Z=S(re).subtract(P);return h.item.endOffsetMillis=Z.valueOf(),h.item.endOffsetMillis}return 0}),y=Me(()=>h.item.endOffsetMillis-h.item.startOffsetMillis),j=Me(()=>V.moment.utc(y.value).format("HH:mm:ss")),p=Me(()=>{const S=h.item.adBreaks;return S&&S.length>0?S.reduce((re,fe,Z)=>re+fe.durationInMillis,0):0}),x=Me(()=>{const S=y.value+p.value;return V.moment.utc(S).format("HH:mm:ss")}),r=Me(()=>V.moment.utc(p.value).format("HH:mm:ss"));me(async()=>{await _()}),Ue(()=>{h.hls&&(h.hls.stopLoad(),h.hls.destroy())});const _=async()=>{await i(),await l()},i=async()=>{try{await Y.get("/api/v1/sourcelocations/lookup/").then(P=>{h.lookups.sourceLocations=P.data,h.lookups.sourceLocations.length===1&&(h.item.sourceLocationId=h.lookups.sourceLocations[0].id)}),h.item.sourceLocationId&&await n(h.item.sourceLocationId)}catch(S){A.value=V.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{}},n=async S=>{try{const P=`/api/v1/vodSources/lookup/source-location/${S}/?category=3`;await Y.get(P).then(re=>{h.lookups.vodSources=re.data})}catch(P){A.value=V.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},v=async S=>{try{let P=`/api/v1/vodSources/${S}/blank-frames`;const re=await Y.get(P).then(fe=>fe.data);h.item.adBreaks=[],re&&re.length>0&&(h.item.adBreaks=re.map(fe=>{const Z=(fe.endInMillis-fe.startInMillis)/2+fe.startInMillis;return{offsetTime:V.moment.utc(Z).format("HH:mm:ss"),offsetMillis:Z,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(P){A.value=V.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},l=async()=>{try{await Y.get("/api/v1/sourcelocations/lookup/").then(P=>{h.lookups.adBreakSourceLocations=P.data})}catch(S){A.value=V.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{}},b=()=>{const S={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};h.item.adBreaks.push(S)},m=S=>{h.item.adBreaks.splice(S,1)},c=S=>{const P=V.moment,re=P().startOf("day"),fe=re.format("YYYY-MM-DD ")+S.offsetTime,I=P(fe).subtract(re);S.offsetMillis=I.valueOf()},w=S=>{const P=V.moment,re=P().startOf("day"),fe=re.format("YYYY-MM-DD ")+S.durationTime,I=P(fe).subtract(re);S.durationInMillis=I.valueOf()},k=async()=>{const S=h;if(O.value)return;if(!await Q.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const re=V.clone(S.item),fe=re.adBreaks.filter(Z=>Z.durationInMillis>0);re.adBreaks=fe,await Y.post("/api/v1/programtemplates/",re).then(Z=>{G.success("Add Program Template","Program template added.",{onClose:async()=>{const I=`${U.urlView}/${Z.data}`;await K.push(I)}})})}catch(re){A.value=V.getErrorMessageAsHtml(re),window.scrollTo(0,0)}finally{O.value=!1}},$=async S=>{S&&(h.selected.vodSource=S,h.item.vodSourceId=S.vodSourceId,h.endOffsetTime=V.moment.utc(S.video.durationInMillis).format("HH:mm:ss"),await v(S.vodSourceId),q())},q=()=>{if(Hls.isSupported()){h.hls&&(h.hls.stopLoad(),h.hls.destroy());var S=document.getElementById("video-add-program-template");const re=h.selected.vodSource.video.formats.find(Z=>Z.formatName==="HLS"),fe=re.serverUrl+re.path;h.hls=V.createHlsStream(S,fe)}};return(S,P)=>{const re=te("router-link"),fe=te("PageHeader"),Z=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(fe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(Q).$dirty&&o(Q).$invalid,onClick:P[0]||(P[0]=I=>k()),class:"btn btn-primary"},P[10]||(P[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vp),F(re,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>P[11]||(P[11]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(Z,{errorMessage:o(A),vuelidate:o(Q)},{default:z(()=>[e("div",null,[e("div",gp,[e("div",bp,[e("div",yp,[e("div",$p,[e("div",wp,[N(e("select",{"onUpdate:modelValue":P[1]||(P[1]=I=>h.item.sourceLocationId=I),onChange:P[2]||(P[2]=I=>n(h.item.sourceLocationId)),class:ee([o(V).getValidFeedbackCss(h.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(L,null,B(h.lookups.sourceLocations,I=>(t(),s("option",{value:I.id},f(I.name),9,hp))),256))],34),[[ge,h.item.sourceLocationId]]),P[12]||(P[12]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(Q).item.sourceLocationId.$error?(t(),s("div",_p,[(t(!0),s(L,null,B(o(Q).item.sourceLocationId.$errors,I=>(t(),s("div",{key:I.$uid},f(I.$message),1))),128))])):H("",!0)])]),e("div",kp,[e("div",Sp,[e("div",Tp,[e("div",{id:"selectedVodSource",class:ee([o(V).getValidFeedbackCss(h.selected.vodSource),"form-control"]),placeholder:"Title"},[h.selected.vodSource?(t(),s(L,{key:0},[W(" ["+f(o(V).moment.utc(h.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+f(h.selected.vodSource.name),1)],64)):H("",!0)],2),P[13]||(P[13]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),h.item.sourceLocationId?(t(),s("button",{key:0,onClick:P[3]||(P[3]=I=>C.value.open(h.sourceLocationId)),class:"btn btn-primary",type:"button"},P[14]||(P[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))):H("",!0)])]),P[15]||(P[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Ip,[e("div",Mp,[e("div",xp,[N(e("input",{"onUpdate:modelValue":P[4]||(P[4]=I=>h.item.name=I),id:"name",class:ee([o(V).getValidFeedbackCss(h.item.name),"form-control"]),placeholder:"Name"},null,2),[[X,h.item.name]]),P[16]||(P[16]=e("label",{for:"name",class:""},"Name",-1)),o(Q).item.name.$error?(t(),s("div",Cp,[(t(!0),s(L,null,B(o(Q).item.name.$errors,I=>(t(),s("div",{key:I.$uid},f(I.$message),1))),128))])):H("",!0)])]),e("div",Vp,[e("div",Pp,[e("div",null,[e("div",Op,[N(e("input",{"onUpdate:modelValue":P[5]||(P[5]=I=>h.startOffsetTime=I),type:"time",step:"1",id:"startOffsetTime",class:ee([o(V).getValidFeedbackCss(h.startOffsetTime),"form-control"])},null,2),[[X,h.startOffsetTime]]),P[17]||(P[17]=e("label",{for:"startOffsetTime",class:""}," Start OffSet Time ",-1))]),J.value>0&&J.value<3e4?(t(),s("div",Ap,P[18]||(P[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),J.value>d.value&&d.value>0?(t(),s("div",Up,P[19]||(P[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),h.selected.vodSource&&J.value>=h.selected.vodSource.durationInMillis?(t(),s("div",Lp,P[20]||(P[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(Q).item.startOffsetMillis.$error?(t(),s("div",Dp,[(t(!0),s(L,null,B(o(Q).item.startOffsetMillis.$errors,I=>(t(),s("div",{key:I.$uid},f(I.$message),1))),128))])):H("",!0)])]),e("div",Hp,[e("div",null,[e("div",Ep,[N(e("input",{"onUpdate:modelValue":P[6]||(P[6]=I=>h.endOffsetTime=I),type:"time",step:"1",id:"endOffsetTime",class:ee([o(V).getValidFeedbackCss(h.endOffsetTime),"form-control"])},null,2),[[X,h.endOffsetTime]]),P[21]||(P[21]=e("label",{for:"endOffsetTime",class:""}," End OffSet Time ",-1))]),d.value>0&&d.value<3e4?(t(),s("div",qp,P[22]||(P[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),h.selected.vodSource&&d.value>h.selected.vodSource.durationInMillis?(t(),s("div",Bp,P[23]||(P[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(Q).item.endOffsetMillis.$error?(t(),s("div",Np,[(t(!0),s(L,null,B(o(Q).item.endOffsetMillis.$errors,I=>(t(),s("div",{key:I.$uid},f(I.$message),1))),128))])):H("",!0)])]),e("div",Rp,[e("div",Fp,[N(e("input",{"onUpdate:modelValue":P[7]||(P[7]=I=>j.value=I),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[X,j.value]]),P[24]||(P[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),h.item.vodSourceId?(t(),s("div",zp,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[P[26]||(P[26]=e("div",{class:"fw-bold small"}," Ad Break ",-1)),e("div",null,[e("button",{onClick:b,class:"btn btn-outline-primary btn-sm"},P[25]||(P[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Gp,[e("table",jp,[P[29]||(P[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(h.item.adBreaks,(I,ue)=>(t(),s("tr",null,[e("td",Yp,f(ue+1),1),e("td",null,[N(e("input",{"onUpdate:modelValue":ae=>I.offsetTime=ae,onChange:ae=>c(I),type:"time",step:"1",class:"form-control"},null,40,Wp),[[X,I.offsetTime]]),I.offsetMillis>=h.selected.vodSource.durationInMillis?(t(),s("div",Kp,P[27]||(P[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[N(e("input",{"onUpdate:modelValue":ae=>I.durationTime=ae,onChange:ae=>w(I),type:"time",step:"1",class:"form-control"},null,40,Qp),[[X,I.durationTime]])]),e("td",Jp,[e("button",{onClick:ae=>m(ue),class:"btn btn-outline-warning btn-sm"},P[28]||(P[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Xp)])]))),256))])]),P[30]||(P[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),W(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0),e("div",Zp,[P[33]||(P[33]=e("div",{class:"fw-bold small"}," Duration ",-1)),e("div",ev,[e("div",tv,[e("div",sv,[N(e("input",{"onUpdate:modelValue":P[8]||(P[8]=I=>r.value=I),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[X,r.value]]),P[31]||(P[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",ov,[e("div",av,[N(e("input",{"onUpdate:modelValue":P[9]||(P[9]=I=>x.value=I),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[X,x.value]]),P[32]||(P[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"]),F(pt,{ref_key:"modalSelectVodSource",ref:C,onClose:$},null,512)])]),_:1})}}},nv=["disabled"],rv={class:"container1"},iv={class:"row"},dv={class:"col-12 col-lg-6"},uv={class:"col"},cv={class:"form-floating mb-2"},mv=["value"],fv={key:0,class:"d-block invalid-feedback"},pv={class:"col"},vv={class:"input-group mb-2"},gv={class:"form-floating"},bv={id:"selectedVodSource",class:"form-control",placeholder:"Title"},yv={class:"col-12 col-lg-6"},$v={class:"col"},wv={class:"form-floating mb-2"},hv={key:0,class:"d-block invalid-feedback"},_v={class:"row row-cols- row-cols-sm-3"},kv={class:"col"},Sv={class:"form-floating mb-2"},Tv={key:0},Iv={key:1},Mv={key:2},xv={key:3,class:"d-block invalid-feedback"},Cv={class:"col"},Vv={class:"form-floating"},Pv={key:0},Ov={key:1},Av={key:2,class:"d-block invalid-feedback"},Uv={class:"col"},Lv={class:"form-floating mb-2"},Dv={key:0,class:"mt-2"},Hv={class:"table-responsive border mt-1"},Ev={class:"table table-borderless table-sm mb-0 align-middle"},qv=["onUpdate:modelValue","onChange"],Bv={key:0},Nv=["onUpdate:modelValue","onChange"],Rv=["onClick"],Fv={class:"col mt-2"},zv={class:"row row-cols-1 row-cols-sm-2"},Gv={class:"col"},jv={class:"form-floating mb-2"},Yv={class:"col"},Wv={class:"form-floating mb-2"},Kv={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,closeWithReturnUrl:R,security:U}=we({appTitle:"Arcadian-FAST",pageTitle:"Edit Program Template"}),C=a,h=de(),u=be({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Q={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:oe.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:oe.withMessage("startOffsetMillis is required.",le),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:oe.withMessage("endOffsetMillis is required.",le),$autoDirty:!0,$lazy:!0}}},J=Te(Q,u),d=Me(()=>{if(u.startOffsetTime&&u.startOffsetTime!=="00:00:00"&&V.isValidTime(u.startOffsetTime)){const Z=V.moment,I=Z().startOf("day"),ae=Z(u.startOffsetTime,"hh:mm:ss").diff(I);return u.item.startOffsetMillis=ae.valueOf(),u.item.startOffsetMillis}return 0}),y=Me(()=>{if(u.endOffsetTime&&u.endOffsetTime!=="00:00:00"&&V.isValidTime(u.endOffsetTime)){const Z=V.moment,I=Z().startOf("day"),ae=Z(u.endOffsetTime,"hh:mm:ss").diff(I);return u.item.endOffsetMillis=ae.valueOf(),u.item.endOffsetMillis}return 0}),j=Me(()=>u.item.endOffsetMillis-u.item.startOffsetMillis),p=Me(()=>V.moment.utc(j.value).format("HH:mm:ss")),x=Me(()=>{const Z=u.item.adBreaks;return Z&&Z.length>0?Z.reduce((ue,ae,ne)=>ue+ae.durationInMillis,0):0}),r=Me(()=>{const Z=j.value+x.value;return V.moment.utc(Z).format("HH:mm:ss")}),_=Me(()=>V.moment.utc(x.value).format("HH:mm:ss"));me(async()=>{await i()});const i=async()=>{await n(),await v(),await l()},n=async()=>{try{const Z=`/api/v1/programtemplates/${C.id}/`;await Y.get(Z).then(I=>{u.item=I.data}),u.startOffsetTime=V.moment.utc(u.item.startOffsetMillis).format("HH:mm:ss"),u.endOffsetTime=V.moment.utc(u.item.endOffsetMillis).format("HH:mm:ss"),u.item.adBreaks.forEach(I=>{I.offsetTime=V.moment.utc(I.offsetMillis).format("HH:mm:ss"),I.durationTime=V.moment.utc(I.durationInMillis).format("HH:mm:ss")})}catch(Z){A.value=V.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},v=async()=>{try{const Z=`/api/v1/vodSources/${u.item.vodSourceId}/`;await Y.get(Z).then(I=>{u.selected.vodSource=I.data}),re()}catch(Z){A.value=V.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},l=async()=>{await b()},b=async()=>{try{await Y.get("/api/v1/sourcelocations/lookup/").then(I=>{u.lookups.sourceLocations=I.data}),u.item.sourceLocationId&&await m(u.item.sourceLocationId)}catch(Z){A.value=V.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},m=async Z=>{try{const I=`/api/v1/vodSources/lookup/source-location/${Z}/?type=3`;await Y.get(I).then(ue=>{u.lookups.vodSources=ue.data})}catch(I){A.value=V.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},c=async()=>{const Z=u.selected.vodSource;Z&&(u.startOffsetTime=V.moment.utc(0).format("HH:mm:ss"),u.endOffsetTime=V.moment.utc(Z.video.durationInMillis).format("HH:mm:ss"),u.item.vodSourceId=Z.vodSourceId)},w=()=>{const Z={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};u.item.adBreaks.push(Z)},k=Z=>{u.item.adBreaks.splice(Z,1)},$=Z=>{const I=V.moment,ue=I().startOf("day"),ae=ue.format("YYYY-MM-DD ")+Z.offsetTime,pe=I(ae).subtract(ue);Z.offsetMillis=pe.valueOf()},q=Z=>{const I=V.moment,ue=I().startOf("day"),ae=ue.format("YYYY-MM-DD ")+Z.durationTime,pe=I(ae).subtract(ue);Z.durationInMillis=pe.valueOf()},S=async()=>{const Z=u;if(O.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const ue=V.clone(Z.item);debugger;ue.startOffsetMillis=d.value,ue.endOffsetMillis=y.value,await Y.put("/api/v1/programtemplates/",ue).then(ae=>{G.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ne=`${C.urlView}/${C.id}`;await K.push(ne)}})})}catch(ue){A.value=V.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{O.value=!1}},P=async Z=>{if(Z){u.selected.vodSource=Z,u.item.vodSourceId=Z.vodSourceId,c();debugger;await fe(Z.vodSourceId),re()}},re=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());var Z=document.getElementById("video-edit-program-template");const ue=u.selected.vodSource.video.formats.find(ne=>ne.formatName==="HLS"),ae=ue.serverUrl+ue.path;u.hls=V.createHlsStream(Z,ae)}},fe=async Z=>{try{let I=`/api/v1/vodSources/${Z}/blank-frames`;const ue=await Y.get(I).then(ae=>ae.data);u.item.adBreaks=[],ue&&ue.length>0&&(u.item.adBreaks=ue.map(ae=>{const ne=(ae.endInMillis-ae.startInMillis)/2+ae.startInMillis;return{offsetTime:V.moment.utc(ne).format("HH:mm:ss"),offsetMillis:ne,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(I){A.value=V.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}};return(Z,I)=>{const ue=te("PageHeader"),ae=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(ue,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:I[0]||(I[0]=ne=>S()),class:"btn btn-primary"},I[12]||(I[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,nv),e("button",{onClick:I[1]||(I[1]=ne=>i()),class:"btn btn-secondary ms-2"},I[13]||(I[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:I[2]||(I[2]=ne=>o(R)(C.urlMain)),class:"btn btn-secondary ms-1"},I[14]||(I[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(ae,{errorMessage:o(A),vuelidate:o(J)},{default:z(()=>[e("div",null,[e("div",rv,[e("div",iv,[e("div",dv,[e("div",uv,[e("div",cv,[N(e("select",{"onUpdate:modelValue":I[3]||(I[3]=ne=>u.item.sourceLocationId=ne),onChange:I[4]||(I[4]=ne=>m(u.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,B(u.lookups.sourceLocations,ne=>(t(),s("option",{value:ne.id},f(ne.name),9,mv))),256))],544),[[ge,u.item.sourceLocationId]]),I[15]||(I[15]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(J).item.sourceLocationId.$error?(t(),s("div",fv,[(t(!0),s(L,null,B(o(J).item.sourceLocationId.$errors,ne=>(t(),s("div",{key:ne.$uid},f(ne.$message),1))),128))])):H("",!0)])]),e("div",pv,[e("div",vv,[e("div",gv,[e("div",bv,[u.selected.vodSource?(t(),s(L,{key:0},[W(" ["+f(o(V).moment.utc(u.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+f(u.selected.vodSource.name),1)],64)):H("",!0)]),I[16]||(I[16]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),e("button",{onClick:I[5]||(I[5]=ne=>h.value.open(u.sourceLocationId)),class:"btn btn-primary",type:"button"},I[17]||(I[17]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),I[18]||(I[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",yv,[e("div",$v,[e("div",wv,[N(e("input",{"onUpdate:modelValue":I[6]||(I[6]=ne=>u.item.name=ne),id:"name",class:ee([o(V).getValidFeedbackCss(u.item.name),"form-control"]),placeholder:"Name"},null,2),[[X,u.item.name]]),I[19]||(I[19]=e("label",{for:"name",class:""},"Name",-1)),o(J).item.name.$error?(t(),s("div",hv,[(t(!0),s(L,null,B(o(J).item.name.$errors,ne=>(t(),s("div",{key:ne.$uid},f(ne.$message),1))),128))])):H("",!0)])]),e("div",_v,[e("div",kv,[e("div",Sv,[N(e("input",{"onUpdate:modelValue":I[7]||(I[7]=ne=>u.startOffsetTime=ne),type:"time",step:"1",id:"startOffsetTime",class:ee([o(V).getValidFeedbackCss(u.startOffsetTime),"form-control"])},null,2),[[X,u.startOffsetTime]]),I[20]||(I[20]=e("label",{for:"startOffsetTime",class:""},"Start OffSet Time",-1))]),d.value>0&&d.value<3e4?(t(),s("div",Tv,I[21]||(I[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),d.value>y.value&&y.value>0?(t(),s("div",Iv,I[22]||(I[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),u.selected.vodSource&&d.value>=u.selected.vodSource.durationInMillis?(t(),s("div",Mv,I[23]||(I[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(J).item.startOffsetMillis.$error?(t(),s("div",xv,[(t(!0),s(L,null,B(o(J).item.startOffsetMillis.$errors,ne=>(t(),s("div",{key:ne.$uid},f(ne.$message),1))),128))])):H("",!0)]),e("div",Cv,[e("div",Vv,[N(e("input",{"onUpdate:modelValue":I[8]||(I[8]=ne=>u.endOffsetTime=ne),type:"time",step:"1",id:"endOffsetTime",class:ee([o(V).getValidFeedbackCss(u.endOffsetTime),"form-control"])},null,2),[[X,u.endOffsetTime]]),I[24]||(I[24]=e("label",{for:"endOffsetTime",class:""},"End OffSet Time",-1))]),y.value>0&&y.value<3e4?(t(),s("div",Pv,I[25]||(I[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),u.selected.vodSource&&y.value>u.selected.vodSource.durationInMillis?(t(),s("div",Ov,I[26]||(I[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(J).item.endOffsetMillis.$error?(t(),s("div",Av,[(t(!0),s(L,null,B(o(J).item.endOffsetMillis.$errors,ne=>(t(),s("div",{key:ne.$uid},f(ne.$message),1))),128))])):H("",!0)]),e("div",Uv,[e("div",Lv,[N(e("input",{"onUpdate:modelValue":I[9]||(I[9]=ne=>p.value=ne),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[X,p.value]]),I[27]||(I[27]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),u.selected.vodSource?(t(),s("div",Dv,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[I[29]||(I[29]=e("b",null," Ad Break ",-1)),e("div",null,[e("button",{onClick:w,class:"btn btn-outline-primary btn-sm"},I[28]||(I[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Hv,[e("table",Ev,[I[32]||(I[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(u.item.adBreaks,(ne,pe)=>(t(),s("tr",null,[e("td",null,f(pe+1),1),e("td",null,[N(e("input",{"onUpdate:modelValue":Ve=>ne.offsetTime=Ve,onChange:Ve=>$(ne),type:"time",step:"1",class:"form-control"},null,40,qv),[[X,ne.offsetTime]]),ne.offsetMillis>=u.selected.vodSource.durationInMillis?(t(),s("div",Bv,I[30]||(I[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[N(e("input",{"onUpdate:modelValue":Ve=>ne.durationTime=Ve,onChange:Ve=>q(ne),type:"time",step:"1",class:"form-control"},null,40,Nv),[[X,ne.durationTime]])]),e("td",null,[e("button",{onClick:Ve=>k(pe),class:"btn btn-outline-warning btn-sm"},I[31]||(I[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Rv)])]))),256))])]),I[33]||(I[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),W(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0),e("div",Fv,[I[36]||(I[36]=e("b",null," Duration ",-1)),e("div",zv,[e("div",Gv,[e("div",jv,[N(e("input",{"onUpdate:modelValue":I[10]||(I[10]=ne=>_.value=ne),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[X,_.value]]),I[34]||(I[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Yv,[e("div",Wv,[N(e("input",{"onUpdate:modelValue":I[11]||(I[11]=ne=>r.value=ne),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[X,r.value]]),I[35]||(I[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"]),F(pt,{ref_key:"modalSelectVodSource",ref:h,onClose:P},null,512)])]),_:1})}}},Qv={class:"ms-1"},Jv={class:"input-group"},Xv={class:"table-responsive border shadow-sm"},Zv={class:"table table-hover mb-0"},eg=["textContent"],tg={class:"d-flex flex-row"},sg={class:""},og={class:"mb-1"},ag=["src"],lg={class:"ms-2"},ng={key:0,class:"fas fa-fw fa-check-circle text-success"},rg={class:"text-wrap text-truncate",style:{width:"20px !important"}},ig={class:"badge bg-primary me-1"},dg={key:0},ug={class:"badge bg-info me-1"},cg={class:"text-end me-0 me-sm-5"},mg={class:"text-center"},fg={class:"mt-1"},pg="/api/v1/programTemplates/search",vg={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(a){xe("$config");const M=he().user,{appTitle:O,pageTitle:T,busy:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,generateReturnUrl:C,security:h,filter:u,initializeFilter:Q,getQuery:J,saveQuery:d,search:y,getRowNumber:j,setSelected:p,isSelected:x}=De({appTitle:"Arcadian-FAST",pageTitle:"Program Templates",cacheKey:`${M==null?void 0:M.userId}/program-templates/search`,baseUrl:pg,filter:{updateUrl:!0}});return me(async()=>{Q(),await y()}),(r,_)=>{const i=te("router-link"),n=te("PageHeader"),v=te("m-pagination"),l=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(n,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(T)},{default:z(()=>[F(i,{to:a.urlAdd,class:"btn btn-primary"},{default:z(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Qv,[e("div",Jv,[N(e("input",{"onUpdate:modelValue":_[0]||(_[0]=b=>o(u).query.criteria=b),onKeyup:_[1]||(_[1]=Le(b=>o(y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[X,o(u).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[2]||(_[2]=b=>o(y)(1))},_[4]||(_[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(l,{errorMessage:o(Y)},{default:z(()=>[e("div",Xv,[e("table",Zv,[_[5]||(_[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th",null,"Source")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(u).items,(b,m)=>(t(),s("tr",{key:b.programTemplateId},[e("td",{textContent:f(o(j)(m)),class:"text-center"},null,8,eg),e("td",null,[e("div",tg,[e("div",sg,[b.vodSource.video.thumbnails.length>0?(t(!0),s(L,{key:0},B(b.vodSource.video.thumbnails,c=>(t(),s("div",og,[e("img",{src:c.url,class:"img-fuild border",width:"128"},null,8,ag)]))),256)):H("",!0)]),e("div",lg,[F(i,{to:`${a.urlView}/${b.programTemplateId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[b.arn?(t(),s("span",ng)):H("",!0),e("span",rg,f(b.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(L,null,B(b.vodSource.video.categories,c=>(t(),s("div",null,[e("span",ig,f(c.categoryName),1)]))),256)),b.vodSource.video.genres.length>0?(t(),s("div",dg,[(t(!0),s(L,null,B(b.vodSource.video.genres,c=>(t(),s("span",ug,f(c.genreName),1))),256))])):H("",!0)])])])]),e("td",cg,f(o(se).moment.utc(b.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",mg,f(b.adBreaks.length),1),e("td",null,[e("div",null,[F(i,{to:`${a.urlViewSourceLocation}/${b.sourceLocationId}/${o(C)()}`,class:"link-offset-2"},{default:z(()=>[W(f(b.sourceLocation.name),1)]),_:2},1032,["to"])]),e("div",fg,[F(i,{to:`${a.urlViewVodSource}/${b.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:z(()=>[W(f(b.vodSource.name),1)]),_:2},1032,["to"])])])]))),128))]),_:1},512),[[Se,o(u).items.length>0]])])]),F(v,{filter:o(u),search:o(y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},gg={key:0},bg={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},yg={class:"nav-item",role:"presentation"},$g={class:"nav-item",role:"presentation"},wg={class:"nav-item d-none",role:"presentation"},hg={class:"tab-content",id:"myTabContent"},_g={class:"mt-2"},kg={class:""},Sg={class:"row row-cols-1 row-cols-lg-2"},Tg={class:"col"},Ig={class:"col"},Mg={class:"form-floating mb-2"},xg={id:"sourceLocation",class:"form-control-plaintext"},Cg={class:"col"},Vg={class:"form-floating mb-2"},Pg={id:"vodSource",class:"form-control-plaintext"},Og={class:"col"},Ag={class:"col"},Ug={class:"form-floating mb-2"},Lg={class:"row row-cols-1 row-cols-sm-3"},Dg={class:"col"},Hg={class:"form-floating mb-2"},Eg={class:"col"},qg={class:"form-floating mb-2"},Bg={class:"col"},Ng={class:"form-floating mb-2"},Rg={class:"row row-cols-1 row-cols-sm-3"},Fg={class:"col"},zg={class:"form-floating mb-2"},Gg={class:"col"},jg={class:"form-floating mb-2"},Yg={class:"mt-2"},Wg={class:"table-responsive"},Kg={class:"table table-hover mb-0"},Qg={class:"text-center"},Jg={class:"mt-2"},Xg={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(a){const g=a,{appTitle:M,pageTitle:O,busy:T,isDirty:D,validations:A,infoMessage:K,warningMessage:Y,errorMessage:V,router:G,axios:se,utils:R,toasts:U,close:C,closeWithReturnUrl:h,generateReturnUrl:u,security:Q}=we({appTitle:"Arcadian-FAST",pageTitle:"View Program Template"});xe("$config");const J=he();J.user;const d=be({user:J.user,item:null,hls:null}),y=de();me(async()=>{await r(),y.value=R.getPageTab("programTemplate")||"information-tab"});const j=n=>{R.setPageTab("programTemplate",n),y.value=n},p=n=>n!==y.value?"":"active",x=n=>n!==y.value?"":"show active",r=async()=>{const n=d;if(!T.value)try{T.value=!0,V.value="",d.item=null;const v=`/api/v1/programTemplates/${g.id}/`;await se.get(v).then(l=>{n.item=l.data;const b=n.item;b.startOffsetTime=R.moment.utc(b.startOffsetMillis).format("HH:mm:ss"),b.endOffsetTime=R.moment.utc(b.endOffsetMillis).format("HH:mm:ss"),b.durationTime=R.moment.utc(b.durationInMillis).format("HH:mm:ss"),b.adBreaksDurationTime=R.moment.utc(b.adBreaksDurationInMillis).format("HH:mm:ss"),b.totalProgramTemplateDurationTime=R.moment.utc(b.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const m=b.vodSource.video,c=m.durationInMillis;m.durationInMillis=R.moment.utc(c).format("HH:mm:ss")}),d.item.vodSource&&await i(d.item.vodSourceId)}catch(v){V.value=R.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{T.value=!1}},_=async()=>{await r()},i=async n=>{try{let v=`/api/v1/vodSources/${n}/hls`;const l=await se.get(v).then(m=>m.data);d.hls&&d.hls.destroy();const b=document.getElementById("video-view-program-template");d.hls=R.createHlsStream(b,l,"Previewing VOD.")}catch(v){V.value=R.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return(n,v)=>{const l=te("router-link"),b=te("PageHeader"),m=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(b,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(O)},{default:z(()=>[F(l,{to:`${a.urlEdit}/${a.id}/${o(u)()}`,class:"ms-2 btn btn-primary"},{default:z(()=>v[11]||(v[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:v[0]||(v[0]=c=>_()),class:"ms-2 btn btn-secondary"},v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:v[1]||(v[1]=c=>o(h)(g.urlMain)),class:"btn btn-secondary ms-1"},v[13]||(v[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(m,{errorMessage:o(V)},{default:z(()=>[d.item?(t(),s("div",gg,[e("div",null,[e("ul",bg,[e("li",yg,[e("button",{onClick:v[2]||(v[2]=c=>j("information-tab")),class:ee([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",$g,[e("button",{onClick:v[3]||(v[3]=c=>j("adBreaks-tab")),class:ee([p("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",wg,[e("button",{onClick:v[4]||(v[4]=c=>j("programs-tab")),class:ee([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",hg,[e("div",{class:ee([x("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",_g,[e("div",kg,[e("div",Sg,[e("div",Tg,[e("div",Ig,[e("div",Mg,[e("div",xg,[F(l,{to:`${a.urlViewSourceLocation}/${d.item.sourceLocationId}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(d.item.sourceLocation.name),1)]),_:1},8,["to"])]),v[14]||(v[14]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",Cg,[e("div",Vg,[e("div",Pg,[F(l,{to:`${a.urlViewVodSource}/${d.item.vodSourceId}/${o(u)()}`,class:"link-offset-2"},{default:z(()=>[W(f(d.item.vodSource.name),1)]),_:1},8,["to"])]),v[15]||(v[15]=e("label",{for:"vodSource",class:""},"VOD Name",-1))])]),v[16]||(v[16]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Og,[e("div",Ag,[e("div",Ug,[N(e("input",{"onUpdate:modelValue":v[5]||(v[5]=c=>d.item.name=c),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[X,d.item.name]]),v[17]||(v[17]=e("label",{for:"name",class:""},"Name",-1))])]),e("div",Lg,[e("div",Dg,[e("div",Hg,[N(e("input",{"onUpdate:modelValue":v[6]||(v[6]=c=>d.item.startOffsetTime=c),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[X,d.item.startOffsetTime]]),v[18]||(v[18]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",Eg,[e("div",qg,[N(e("input",{"onUpdate:modelValue":v[7]||(v[7]=c=>d.item.endOffsetTime=c),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[X,d.item.endOffsetTime]]),v[19]||(v[19]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",Bg,[e("div",Ng,[N(e("input",{"onUpdate:modelValue":v[8]||(v[8]=c=>d.item.durationTime=c),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[X,d.item.durationTime]]),v[20]||(v[20]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",Rg,[e("div",Fg,[e("div",zg,[N(e("input",{"onUpdate:modelValue":v[9]||(v[9]=c=>d.item.adBreaksDurationTime=c),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[X,d.item.adBreaksDurationTime]]),v[21]||(v[21]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks",-1))])]),e("div",Gg,[e("div",jg,[N(e("input",{"onUpdate:modelValue":v[10]||(v[10]=c=>d.item.totalProgramTemplateDurationTime=c),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[X,d.item.totalProgramTemplateDurationTime]]),v[22]||(v[22]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:ee([x("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Yg,[e("div",Wg,[e("table",Kg,[v[23]||(v[23]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.adBreaks,(c,w)=>(t(),s("tr",{key:c.programTemplateAdBreakId},[e("td",Qg,f(w+1),1),e("td",null,f(o(R).moment.utc(c.offsetMillis).format("HH:mm:ss")),1),e("td",null,f(o(R).moment.utc(c.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Se,d.item.adBreaks.length>0]])])])])],2),e("div",{class:ee([x("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Jg,[e("pre",null,f(d.item.programs),1)])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Zg=["disabled"],e1={class:"row row-cols-1 row-cols-sm-3"},t1={class:"col-sm-6"},s1={class:"form-floating mb-2"},o1={key:0,class:"d-block invalid-feedback"},a1={class:"col-sm-3"},l1={class:"form-floating mb-2"},n1={key:0,class:"d-block invalid-feedback"},r1={class:"col-sm-3"},i1={class:"form-floating mb-2"},d1={key:0,class:"d-block invalid-feedback"},u1={class:"row row-cols-1 row-cols-sm-2"},c1={class:"col"},m1={class:"form-floating mb-2"},f1=["value"],p1={key:0,class:"d-block invalid-feedback"},v1={class:"col"},g1={class:"form-floating mb-2"},b1=["value"],y1={key:0,class:"d-block invalid-feedback"},$1={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Channel"}),U=a,C=be({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),h={item:{name:{title:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},tier:{title:oe.withMessage("Tier is required.",le),$autoDirty:!0,$lazy:!0},playbackMode:{title:oe.withMessage("PlaybackMode is required.",le),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:oe.withMessage("Filler Slate Source Location is required.",le),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:oe.withMessage("Filler Slate Vod Source is required.",le),$autoDirty:!0,$lazy:!0},policy:{title:oe.withMessage("Policy is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(h,C);me(async()=>{await Q()});const Q=async()=>{try{await Y.get("/api/v1/sourcelocations/lookup/").then(x=>{C.lookups.sourceLocations=x.data,C.lookups.sourceLocations.length===1&&(C.item.fillerSlateSourceLocationId=C.lookups.sourceLocations[0].id)}),C.item.fillerSlateSourceLocationId&&await d(C.item.fillerSlateSourceLocationId)}catch(p){A.value=V.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},J=async()=>{C.item.fillerSlateVodSourceId=null,await d(C.item.fillerSlateSourceLocationId)},d=async p=>{try{let x=`/api/v1/vodSources/lookup/source-location/${p}/?category=2`;await Y.get(x).then(r=>{C.lookups.vodSources=r.data})}catch(x){A.value=V.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},y=()=>{if(C.item.name){const p=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${C.item.name}"}]}`;C.item.policy=p}else C.item.policy=null},j=async()=>{const p=C;if(O.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{O.value=!0,A.value="";const r=V.clone(p.item);await Y.post("/api/v1/channels/",r).then(_=>{G.success("Add Channel","Channel added.",{onClose:async()=>{const i=`${U.urlView}/${_.data}`;await K.push(i)}})})}catch(r){A.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{O.value=!1}};return(p,x)=>{const r=te("router-link"),_=te("PageHeader"),i=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(M)},{default:z(()=>[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:x[0]||(x[0]=n=>j()),class:"btn btn-primary"},x[8]||(x[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zg),F(r,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>x[9]||(x[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(i,{errorMessage:o(A),vuelidate:o(u)},{default:z(()=>[e("div",null,[e("div",e1,[e("div",t1,[e("div",s1,[N(e("input",{"onUpdate:modelValue":x[1]||(x[1]=n=>C.item.name=n),onChange:x[2]||(x[2]=n=>y()),id:"name",class:ee([o(V).getValidFeedbackCss(C.item.name),"form-control"]),placeholder:"name"},null,34),[[X,C.item.name]]),x[10]||(x[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",o1,[(t(!0),s(L,null,B(o(u).item.name.$errors,n=>(t(),s("div",{key:n.$uid},f(n.$message),1))),128))])):H("",!0)])]),e("div",a1,[e("div",l1,[N(e("input",{"onUpdate:modelValue":x[3]||(x[3]=n=>C.item.tier=n),id:"tier",class:"form-control-plaintext",placeholder:"tier",readonly:""},null,512),[[X,C.item.tier]]),x[11]||(x[11]=e("label",{for:"tier",class:""},"Tier",-1)),o(u).item.tier.$error?(t(),s("div",n1,[(t(!0),s(L,null,B(o(u).item.tier.$errors,n=>(t(),s("div",{key:n.$uid},f(n.$message),1))),128))])):H("",!0)])]),e("div",r1,[e("div",i1,[N(e("input",{"onUpdate:modelValue":x[4]||(x[4]=n=>C.item.playbackMode=n),id:"playbackMode",class:"form-control-plaintext",placeholder:"playbackMode",readonly:""},null,512),[[X,C.item.playbackMode]]),x[12]||(x[12]=e("label",{for:"playbackMode",class:""},"PlaybackMode",-1)),o(u).item.playbackMode.$error?(t(),s("div",d1,[(t(!0),s(L,null,B(o(u).item.playbackMode.$errors,n=>(t(),s("div",{key:n.$uid},f(n.$message),1))),128))])):H("",!0)])])]),x[15]||(x[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",u1,[e("div",c1,[e("div",m1,[N(e("select",{"onUpdate:modelValue":x[5]||(x[5]=n=>C.item.fillerSlateSourceLocationId=n),onChange:x[6]||(x[6]=n=>J()),class:ee([o(V).getValidFeedbackCss(C.item.fillerSlateSourceLocationId),"form-select"]),id:"fillerSlateSourceLocationId"},[(t(!0),s(L,null,B(C.lookups.sourceLocations,n=>(t(),s("option",{value:n.id},f(n.name),9,f1))),256))],34),[[ge,C.item.fillerSlateSourceLocationId]]),x[13]||(x[13]=e("label",{for:"fillerSlateSourceLocationId",class:""},"Source Location",-1)),o(u).item.fillerSlateSourceLocationId.$error?(t(),s("div",p1,[(t(!0),s(L,null,B(o(u).item.fillerSlateSourceLocationId.$errors,n=>(t(),s("div",{key:n.$uid},f(n.$message),1))),128))])):H("",!0)])]),e("div",v1,[e("div",g1,[N(e("select",{"onUpdate:modelValue":x[7]||(x[7]=n=>C.item.fillerSlateVodSourceId=n),class:ee([o(V).getValidFeedbackCss(C.item.fillerSlateVodSourceId),"form-select"]),id:"fillerSlateVodSourceId"},[(t(!0),s(L,null,B(C.lookups.vodSources,n=>(t(),s("option",{value:n.id},f(n.name),9,b1))),256))],2),[[ge,C.item.fillerSlateVodSourceId]]),x[14]||(x[14]=e("label",{for:"fillerSlateVodSourceId",class:""},"VOD Source",-1)),o(u).item.fillerSlateVodSourceId.$error?(t(),s("div",y1,[(t(!0),s(L,null,B(o(u).item.fillerSlateVodSourceId.$errors,n=>(t(),s("div",{key:n.$uid},f(n.$message),1))),128))])):H("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},w1={components:{Page:ot},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function h1(a,g,M,O,T,D){const A=te("Page");return t(),ve(A,{id:M.id,urlView:M.urlView},null,8,["id","urlView"])}const _1=Pe(w1,[["render",h1]]),k1={class:"ms-1"},S1={class:"input-group"},T1={class:"table-responsive border shadow-sm"},I1={class:"table table-hover mb-0"},M1=["textContent"],x1={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},C1={key:0,class:"badge text-bg-success"},V1={key:1,class:"badge text-bg-secondary"},P1="/api/v1/channels/search",O1={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(a){xe("$config");const M=he().user,{appTitle:O,pageTitle:T,busy:D,infoMessage:A,warningMessage:K,errorMessage:Y,router:V,axios:G,utils:se,toasts:R,close:U,security:C,filter:h,initializeFilter:u,getQuery:Q,saveQuery:J,search:d,getRowNumber:y,setSelected:j,isSelected:p}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${M==null?void 0:M.userId}/Channels/search`,baseUrl:P1,filter:{updateUrl:!0}});return me(async()=>{u(),await d()}),(x,r)=>{const _=te("router-link"),i=te("PageHeader"),n=te("m-pagination"),v=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(i,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(T)},{default:z(()=>[F(_,{to:a.urlAdd,class:"btn btn-primary"},{default:z(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",k1,[e("div",S1,[N(e("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>o(h).query.criteria=l),onKeyup:r[1]||(r[1]=Le(l=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[X,o(h).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:r[2]||(r[2]=l=>o(d)(1))},r[4]||(r[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(Y)},{default:z(()=>[e("div",T1,[e("table",I1,[r[5]||(r[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(h).items,(l,b)=>(t(),s("tr",{key:l.channelId},[e("td",{textContent:f(o(y)(b)),class:"text-center"},null,8,M1),e("td",null,[F(_,{to:`${a.urlView}/${l.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[l.arn?(t(),s("span",x1)):H("",!0),W(f(l.name),1)]),_:2},1032,["to"]),e("div",null,[l.state==="RUNNING"?(t(),s("span",C1,f(l.state),1)):l.state==="STOPPED"?(t(),s("span",V1,f(l.state),1)):H("",!0)])]),e("td",null,f(l.playbackMode),1),e("td",null,f(l.tier),1)]))),128))]),_:1},512),[[Se,o(h).items.length>0]])])]),F(n,{filter:o(h),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},A1=["id"],U1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},L1={class:"modal-content"},D1={class:"modal-header"},H1={class:"modal-title"},E1={class:"modal-body p-1"},q1={class:"row row-cols-1 row-cols-sm-2 g-2"},B1={class:"col-sm-4"},N1={class:"card"},R1={key:0,class:"mt-2"},F1={class:"col"},z1={class:"form-floating mb-2"},G1={class:"col ms-2 my-2"},j1={class:"badge bg-info me-1"},Y1={class:"badge bg-primary me-1"},W1={class:"row row-cols-1 row-cols-sm-2"},K1={class:"col"},Q1={class:"form-floating mb-2"},J1={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},X1={class:"col"},Z1={class:"form-floating mb-2"},eb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},tb={class:"col"},sb={class:"form-floating mb-2"},ob={class:"col-sm-8"},ab={class:"col"},lb={class:"input-group mb-2"},nb={class:"form-floating"},rb={class:"table-responsive border shadow-sm"},ib={class:"table table-sm table-hover mb-0 overflow-auto"},db=["textContent"],ub={class:"d-flex flex-row justify-content-start"},cb={class:"mt-1"},mb=["src"],fb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},pb={class:"ms-2"},vb=["onClick"],gb={class:"modal-footer"},bb="/api/v1/programtemplates/search",yb={__name:"_selectProgramTemplate",emits:["close"],setup(a,{expose:g,emit:M}){const T=he().user,{appTitle:D,pageTitle:A,busy:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,security:h,filter:u,initializeFilter:Q,getQuery:J,saveQuery:d,search:y,getRowNumber:j,setSelected:p,isSelected:x}=De({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${T==null?void 0:T.userId}/program-templates/select`,baseUrl:bb,filter:{updateUrl:!0,lookups:{genres:[]},query:{}}}),r=M,_=de("modalSelectProgramTemplate"),i=be({programTemplate:null,hls:null});me(async()=>{Q(),await n()}),Ue(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const n=async()=>{await b(),await m()},v=async w=>{u.value.query.sourceLocationId=w,G.value="",await y();var k=document.getElementById(_.value),$=_e.getOrCreateInstance(k);$.show()},l=async()=>{var w=document.getElementById(_.value),k=_e.getOrCreateInstance(w);k.hide(),i.hls&&(i.hls.stopLoad(),i.hls.destroy()),r("close",i.programTemplate)},b=async w=>{try{const $=await R.get("/api/v1/lookups/video-categories/").then(q=>q.data);u.value.lookups.categories=$}catch(k){G.value=U.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},m=async w=>{try{const $=await R.get("/api/v1/lookups/video-genres/").then(q=>q.data);u.value.lookups.genres=$}catch(k){G.value=U.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},c=w=>{i.programTemplate=w,l()};return g({open:v,close:l}),(w,k)=>{const $=te("m-pagination"),q=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",U1,[e("div",L1,[e("div",D1,[e("h5",H1,[k[8]||(k[8]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),W(f(o(A)),1)]),e("button",{type:"button",class:"btn-close",onClick:k[0]||(k[0]=S=>l()),"aria-label":"Close"})]),e("div",E1,[F(q,{errorMessage:o(G)},{default:z(()=>[e("div",q1,[e("div",B1,[e("div",N1,[k[13]||(k[13]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),i.programTemplate?(t(),s("div",R1,[e("div",F1,[e("div",z1,[N(e("input",{"onUpdate:modelValue":k[1]||(k[1]=S=>i.programTemplate.vodSource.video.title=S),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[X,i.programTemplate.vodSource.video.title]]),k[9]||(k[9]=e("label",{for:"title"},"Title",-1))])]),e("div",G1,[e("div",null,[(t(!0),s(L,null,B(i.programTemplate.vodSource.video.genres,S=>(t(),s("span",j1,f(S.genreName),1))),256)),(t(!0),s(L,null,B(i.programTemplate.vodSource.video.categories,S=>(t(),s("span",Y1,f(S.categoryName),1))),256))])]),e("div",W1,[e("div",K1,[e("div",Q1,[e("div",J1,f(o(U).moment(i.programTemplate.vodSource.video.dateReleased).calendar()),1),k[10]||(k[10]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",X1,[e("div",Z1,[e("div",eb,f(o(U).moment.utc(i.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),k[11]||(k[11]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",tb,[e("div",sb,[N(e("textarea",{"onUpdate:modelValue":k[2]||(k[2]=S=>i.programTemplate.vodSource.video.description=S),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[X,i.programTemplate.vodSource.video.description]]),k[12]||(k[12]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])]),e("div",ob,[e("div",ab,[e("div",lb,[e("div",nb,[N(e("input",{"onUpdate:modelValue":k[3]||(k[3]=S=>o(u).query.criteria=S),onKeyup:k[4]||(k[4]=Le(S=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[X,o(u).query.criteria]]),k[14]||(k[14]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:k[5]||(k[5]=S=>o(y)(1))},k[15]||(k[15]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",rb,[e("table",ib,[k[16]||(k[16]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(u).items,(S,P)=>(t(),s("tr",{key:S.videoId},[e("td",{textContent:f(o(j)(P)),class:"text-center"},null,8,db),e("td",null,[e("div",ub,[e("div",null,[S.vodSource.video.thumbnails.length>0?(t(!0),s(L,{key:0},B(S.vodSource.video.thumbnails,re=>(t(),s("div",cb,[e("img",{src:re.url,class:"img-fuild border",width:"128"},null,8,mb)]))),256)):(t(),s("img",fb))]),e("div",pb,[e("a",{onClick:re=>c(S),class:"text-wrap link-offset-2",role:"button"},f(S.name),9,vb)])])])]))),128))]),_:1},512),[[Se,o(u).items.length>0]])])]),F($,{filter:o(u),search:o(y),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",gb,[e("button",{onClick:k[6]||(k[6]=S=>l()),class:"btn btn-primary",type:"button"},k[17]||(k[17]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:k[7]||(k[7]=S=>l()),class:"btn btn-secondary ms-1"},k[18]||(k[18]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,A1)}}},$b={key:0,class:"modal-content"},wb={class:"modal-header"},hb={class:"modal-title"},_b={class:"modal-body1"},kb={class:"row row-cols-1 row-cols-sm-2 g-2"},Sb={class:"card"},Tb={key:0,class:"mt-2"},Ib={class:"col"},Mb={class:"form-floating mb-2"},xb={class:"col ms-2 my-2"},Cb={class:"badge bg-info me-1"},Vb={class:"badge bg-primary me-1"},Pb={class:"row row-cols-1 row-cols-sm-2"},Ob={class:"col"},Ab={class:"form-floating mb-2"},Ub={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Lb={class:"col"},Db={class:"form-floating mb-2"},Hb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Eb={class:"col"},qb={class:"form-floating mb-2"},Bb={class:"col"},Nb={class:"input-group mb-2"},Rb={class:"form-floating"},Fb={class:"table-responsive border shadow-sm"},zb={class:"table table-sm table-hover mb-0 overflow-auto"},Gb=["textContent"],jb={class:"d-flex flex-row justify-content-start"},Yb={class:"mt-1"},Wb=["src"],Kb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Qb={class:"ms-2"},Jb=["onClick"],Xb={class:"modal-footer"},Zb="/api/v1/programtemplates/search",ey={__name:"_selectProgramTemplateInline",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(a,{expose:g,emit:M}){const T=he().user,{appTitle:D,pageTitle:A,busy:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,security:h,filter:u,initializeFilter:Q,getQuery:J,saveQuery:d,search:y,getRowNumber:j,setSelected:p,isSelected:x}=De({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${T==null?void 0:T.userId}/program-templates/select`,baseUrl:Zb,filter:{updateUrl:!0,lookups:{genres:[]},query:{}},getQuery:k=>["?c=",encodeURIComponent(k.query.criteria),"&p=",k.pageIndex,"&s=",k.pageSize,"&sf=",k.sortField,"&so=",k.sortOrder,"&withArn=true"].join(""),successAction:()=>{i.programTemplate&&(i.programTemplate=null)}}),r=a,_=M;de("modalSelectProgramTemplateInline");const i=be({programTemplate:null,hls:null});me(async()=>{Q(),await n()}),Ue(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const n=async()=>{await b(),await m()},v=async k=>{u.value.query.sourceLocationId=k,G.value="",await y(),r.isOpen=!0},l=async()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy()),_("close",i.programTemplate),r.isOpen=!1},b=async k=>{try{const q=await R.get("/api/v1/lookups/video-categories/").then(S=>S.data);u.value.lookups.categories=q}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},m=async k=>{try{const q=await R.get("/api/v1/lookups/video-genres/").then(S=>S.data);u.value.lookups.genres=q}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},c=k=>{i.programTemplate=k,w()},w=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var k=document.getElementById("video-select-preview");const q=i.programTemplate.vodSource.video.formats.find(P=>P.formatName==="HLS"),S=q.serverUrl+q.path;i.hls=U.createHlsStream(k,S)}};return g({open:v,close:l}),(k,$)=>{const q=te("m-pagination"),S=te("PageBody");return t(),ve(ye,null,{default:z(()=>[a.isOpen?(t(),s("div",$b,[e("div",wb,[e("h6",hb,[$[7]||($[7]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),W(f(o(A)),1)])]),e("div",_b,[F(S,{errorMessage:o(G)},{default:z(()=>[e("div",kb,[e("div",{class:ee([i.programTemplate?"col-sm-4":"d-none"])},[e("div",Sb,[$[12]||($[12]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),i.programTemplate?(t(),s("div",Tb,[e("div",Ib,[e("div",Mb,[N(e("input",{"onUpdate:modelValue":$[0]||($[0]=P=>i.programTemplate.vodSource.video.title=P),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[X,i.programTemplate.vodSource.video.title]]),$[8]||($[8]=e("label",{for:"title"},"Title",-1))])]),e("div",xb,[e("div",null,[(t(!0),s(L,null,B(i.programTemplate.vodSource.video.genres,P=>(t(),s("span",Cb,f(P.genreName),1))),256)),(t(!0),s(L,null,B(i.programTemplate.vodSource.video.categories,P=>(t(),s("span",Vb,f(P.categoryName),1))),256))])]),e("div",Pb,[e("div",Ob,[e("div",Ab,[e("div",Ub,f(o(U).moment(i.programTemplate.vodSource.video.dateReleased).calendar()),1),$[9]||($[9]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Lb,[e("div",Db,[e("div",Hb,f(o(U).moment.utc(i.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),$[10]||($[10]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Eb,[e("div",qb,[N(e("textarea",{"onUpdate:modelValue":$[1]||($[1]=P=>i.programTemplate.vodSource.video.description=P),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[X,i.programTemplate.vodSource.video.description]]),$[11]||($[11]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])],2),e("div",{class:ee([i.programTemplate?"col-sm-8":"col-sm-12"])},[e("div",Bb,[e("div",Nb,[e("div",Rb,[N(e("input",{"onUpdate:modelValue":$[2]||($[2]=P=>o(u).query.criteria=P),onKeyup:$[3]||($[3]=Le(P=>o(y)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[X,o(u).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[4]||($[4]=P=>o(y)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Fb,[e("table",zb,[$[15]||($[15]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(o(u).items,(P,re)=>(t(),s("tr",{key:P.videoId},[e("td",{textContent:f(o(j)(re)),class:"text-center"},null,8,Gb),e("td",null,[e("div",jb,[e("div",null,[P.vodSource.video.thumbnails.length>0?(t(!0),s(L,{key:0},B(P.vodSource.video.thumbnails,fe=>(t(),s("div",Yb,[e("img",{src:fe.url,class:"img-fuild border",width:"128"},null,8,Wb)]))),256)):(t(),s("img",Kb))]),e("div",Qb,[e("a",{onClick:fe=>c(P),class:"text-wrap link-offset-2",role:"button"},f(P.name),9,Jb)])])])]))),128))]),_:1},512),[[Se,o(u).items.length>0]])])]),F(q,{filter:o(u),search:o(y),showPerPage:!0},null,8,["filter","search"])],2)])]),_:1},8,["errorMessage"])]),e("div",Xb,[e("button",{onClick:$[5]||($[5]=P=>l()),class:"btn btn-primary",type:"button"},$[16]||($[16]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[6]||($[6]=P=>l(!1)),class:"btn btn-secondary ms-1"},$[17]||($[17]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])):H("",!0)]),_:1})}}},ty=["id"],sy={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},oy={class:"modal-content"},ay={class:"modal-header"},ly={class:"modal-title"},ny={class:"modal-body"},ry={key:0},iy={class:"row row-cols-1 row-cols-sm-3"},dy={class:"col-sm-3"},uy={class:"form-floating mb-2"},cy={key:0,class:"d-block invalid-feedback"},my={class:"col-sm-3"},fy={class:"form-floating mb-2"},py={key:0,class:"d-block invalid-feedback"},vy={class:"col-sm-6"},gy={class:"input-group mb-2"},by={class:"form-floating"},yy={id:"programTemplateId",class:"form-control",placeholder:"Title"},$y={key:0,class:"d-block invalid-feedback"},wy={key:0},hy={class:"row row-cols-1 row-cols-sm-2"},_y={class:"col"},ky={class:"row row-cols-1"},Sy={class:"col"},Ty={class:"form-floating mb-2"},Iy={class:"col"},My={class:"form-floating mb-2"},xy={class:"row row-cols-1 row-cols-sm-3"},Cy={class:"col"},Vy={class:"form-floating mb-2"},Py={class:"col"},Oy={class:"form-floating mb-2"},Ay={class:"col"},Uy={class:"form-floating mb-2"},Ly={class:"row row-cols-1 row-cols-sm-3"},Dy={class:"col"},Hy={class:"form-floating mb-2"},Ey={class:"col"},qy={class:"form-floating mb-2"},By={key:1},Ny={class:"table-responsive border mt-1"},Ry={class:"table table-sm mb-0"},Fy=["onUpdate:modelValue","onChange"],zy=["value"],Gy={key:0,class:"modal-footer"},jy=["disabled"],Yy={__name:"_addProgram",emits:["onClose"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),Q=M,J=de(),d=de(),y=de(),j=de("modalAddProgramFromTemplate"),p=be({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplate:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x=(Z,I,ue)=>Z.length<=0?!0:Z.every(ne=>ne.vodSourceId),r={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},programTemplateId:{required:oe.withMessage("Program Template is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:oe.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},adBreaks:{adBreaksRequired:oe.withMessage("Ad Break is not properly configured.",x),$each:oe.forEach({vodSourceId:{required:oe.withMessage("Vod Source is required.",le)}})}}},_=Te(r,p);me(async()=>{_.value.$reset()});const i=async(Z,I,ue)=>{y.value=Z;const ae=p;K.value.clear(),G.value="";const ne=U.moment(ue),Ve=ne.format("YYYY-MM-DD HH:mm"),Ce=ne.format("YYYYMMDD_HHmm")+"_PRG_";ae.eventId=I,ae.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},ae.selected={programTemplate:null},ae.item={programTemplateId:null,name:Ce,dateScheduledStart:Ve,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await l(),_.value.$reset();var ce=document.getElementById(j.value),E=_e.getOrCreateInstance(ce);E.show()},n=async Z=>{if(!Z){Q("onClose",{eventId:p.eventId},Z);var I=document.getElementById(j.value),ue=_e.getOrCreateInstance(I);ue.hide();return}if(!await _.value.$validate()){window.scrollTo(0,0);return}const ne=p,pe=U.moment(ne.item.dateScheduledStart).utc(!0).format(),Ve=U.moment(ne.item.dateScheduledStart).add(ne.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();p.item={eventId:ne.eventId,programTemplateId:ne.selected.programTemplate.programTemplateId,channelId:y.value,name:ne.item.name,dateScheduledStart:pe,dateScheduledEnd:Ve,adBreaks:ne.selected.programTemplate.adBreaks.map(Ce=>({sourceLocationId:Ce.sourceLocationId,vodSourceId:Ce.vodSourceId,offsetMillis:Ce.offsetMillis,durationInMillis:Ce.durationInMillis}))},await R.post("/api/v1/programs/",p.item).then(Ce=>{C.success("Add New Program",`Program [${p.item.name}] was added to this channel.`),Q("onClose",p.item,Z);var ce=document.getElementById(j.value),E=_e.getOrCreateInstance(ce);E.hide()},Ce=>{G.value=U.getErrorMessageAsHtml(Ce)})},v=async()=>{await n(!0)},l=async()=>{await k(),await b(),await m()},b=async()=>{try{const Z=`/api/v1/channelOutputs/get-by-channel/${y.value}`;await R.get(Z).then(I=>{p.lookups.channelOutputs=I.data}),p.item.programTemplateId&&await c()}catch(Z){G.value=U.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},m=async()=>{try{const Z=`/api/v1/programTemplates/lookup/by-channel/${y.value}`;await R.get(Z).then(I=>{p.lookups.programTemplates=I.data,p.lookups.programTemplates.length===1&&(p.item.programTemplateId=p.lookups.programTemplates[0].id)}),p.item.programTemplateId&&await c(p.item.programTemplateId)}catch(Z){G.value=U.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},c=async Z=>{await w(Z)},w=async Z=>{try{const I=`/api/v1/programTemplates/${Z}/`;await R.get(I).then(ne=>{p.selected.programTemplate=ne.data;const pe=p.selected.programTemplate;pe.startOffsetTime=U.moment.utc(pe.startOffsetMillis).format("HH:mm:ss"),pe.endOffsetTime=U.moment.utc(pe.endOffsetMillis).format("HH:mm:ss"),pe.durationTime=U.moment.utc(pe.durationInMillis).format("HH:mm:ss"),pe.adBreaksDurationTime=U.moment.utc(pe.adBreaksDurationInMillis).format("HH:mm:ss"),pe.totalProgramTemplateDurationTime=U.moment.utc(pe.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),pe.adBreaks.forEach(Ve=>{Ve.vodSourceId=null}),p.item.programTemplateId=pe.programTemplateId,p.item.adBreaks=pe.adBreaks});const ue=p,ae=ue.lookups.channelOutputs[0].outputType;await q(ue.selected.programTemplate.sourceLocationId,ae)}catch(I){G.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},k=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(I=>{p.lookups.sourceLocations=I.data,p.lookups.sourceLocations.length===1&&(p.item.sourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.sourceLocationId&&await $(p.item.sourceLocationId)}catch(Z){G.value=U.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},$=async Z=>{try{let I=`/api/v1/vodSources/lookup/source-location/${Z}`;await R.get(I).then(ue=>{p.lookups.vodSources=ue.data})}catch(I){G.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},q=async(Z,I)=>{try{let ue=`/api/v1/vodsources/lookup/source-location/${Z}/output-type/${I}`;await R.get(ue).then(ae=>{p.lookups.adBreakVodSources=ae.data})}catch(ue){G.value=U.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{}},S=Z=>{const I=p.lookups.adBreakVodSources.find(ue=>ue.id==Z.vodSourceId);Z.sourceLocationId=I.sourceLocationId},P=async Z=>{fe.value=!1,Z&&(await c(Z.programTemplateId),re())},re=()=>{if(Hls.isSupported()){p.hls&&(p.hls.stopLoad(),p.hls.destroy());var Z=document.getElementById("video-add-program");const ue=p.selected.programTemplate.vodSource.video.formats.find(ne=>ne.formatName==="HLS"),ae=ue.serverUrl+ue.path;p.hls=U.createHlsStream(Z,ae)}},fe=de(!1);return g({open:i,close:n}),(Z,I)=>{const ue=te("PageMessages");return t(),ve(ye,null,{default:z(()=>[e("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:j.value,tabindex:"-1","aria-hidden":"true"},[e("div",sy,[e("div",oy,[e("div",ay,[e("h5",ly,[I[13]||(I[13]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:I[0]||(I[0]=ae=>n(!1)),"aria-label":"Close"})]),e("div",ny,[F(ue,{errorMessage:o(G),vuelidate:o(_)},null,8,["errorMessage","vuelidate"]),F(ey,{ref_key:"modalSelectProgramTemplateInline",ref:d,isOpen:fe.value,onClose:P},null,8,["isOpen"]),fe.value?H("",!0):(t(),s("div",ry,[e("div",iy,[e("div",dy,[e("div",uy,[N(e("input",{"onUpdate:modelValue":I[1]||(I[1]=ae=>p.item.name=ae),id:"name",class:"form-control",placeholder:"Name"},null,512),[[X,p.item.name]]),I[14]||(I[14]=e("label",{for:"name",class:""},"Name",-1)),o(_).item.name.$error?(t(),s("div",cy,[(t(!0),s(L,null,B(o(_).item.name.$errors,ae=>(t(),s("div",{key:ae.$uid},f(ae.$message),1))),128))])):H("",!0)])]),e("div",my,[e("div",fy,[N(e("input",{"onUpdate:modelValue":I[2]||(I[2]=ae=>p.item.dateScheduledStart=ae),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[X,p.item.dateScheduledStart]]),I[15]||(I[15]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(_).item.dateScheduledStart.$error?(t(),s("div",py,[(t(!0),s(L,null,B(o(_).item.dateScheduledStart.$errors,ae=>(t(),s("div",{key:ae.$uid},f(ae.$message),1))),128))])):H("",!0)])]),e("div",vy,[e("div",gy,[e("div",by,[e("div",yy,[p.selected.programTemplate?(t(),s(L,{key:0},[W(f(p.selected.programTemplate.name),1)],64)):H("",!0)]),I[16]||(I[16]=e("label",{for:"programTemplateId",class:""},"Program Template",-1))]),e("button",{onClick:I[3]||(I[3]=ae=>fe.value=!fe.value),class:"btn btn-primary",type:"button"},I[17]||(I[17]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))]),o(_).item.programTemplateId.$error?(t(),s("div",$y,[(t(!0),s(L,null,B(o(_).item.programTemplateId.$errors,ae=>(t(),s("div",{key:ae.$uid},f(ae.$message),1))),128))])):H("",!0)])]),p.selected.programTemplate?(t(),s("div",wy,[e("div",hy,[I[25]||(I[25]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1)),e("div",_y,[e("div",ky,[p.selected.programTemplate?(t(),s(L,{key:0},[e("div",Sy,[e("div",Ty,[N(e("input",{"onUpdate:modelValue":I[4]||(I[4]=ae=>p.selected.programTemplate.sourceLocation.name=ae),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[X,p.selected.programTemplate.sourceLocation.name]]),I[18]||(I[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1))])]),e("div",Iy,[e("div",My,[N(e("input",{"onUpdate:modelValue":I[5]||(I[5]=ae=>p.selected.programTemplate.vodSource.name=ae),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[X,p.selected.programTemplate.vodSource.name]]),I[19]||(I[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1))])])],64)):H("",!0)]),e("div",xy,[e("div",Cy,[e("div",Vy,[N(e("input",{"onUpdate:modelValue":I[6]||(I[6]=ae=>p.selected.programTemplate.startOffsetTime=ae),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[X,p.selected.programTemplate.startOffsetTime]]),I[20]||(I[20]=e("label",{for:"startOffsetTime"},"Total Program Duration",-1))])]),e("div",Py,[e("div",Oy,[N(e("input",{"onUpdate:modelValue":I[7]||(I[7]=ae=>p.selected.programTemplate.endOffsetTime=ae),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[X,p.selected.programTemplate.endOffsetTime]]),I[21]||(I[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Ay,[e("div",Uy,[N(e("input",{"onUpdate:modelValue":I[8]||(I[8]=ae=>p.selected.programTemplate.durationTime=ae),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[X,p.selected.programTemplate.durationTime]]),I[22]||(I[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Ly,[e("div",Dy,[e("div",Hy,[N(e("input",{"onUpdate:modelValue":I[9]||(I[9]=ae=>p.selected.programTemplate.adBreaksDurationTime=ae),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[X,p.selected.programTemplate.adBreaksDurationTime]]),I[23]||(I[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Ey,[e("div",qy,[N(e("input",{"onUpdate:modelValue":I[10]||(I[10]=ae=>p.selected.programTemplate.totalProgramTemplateDurationTime=ae),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[X,p.selected.programTemplate.totalProgramTemplateDurationTime]]),I[24]||(I[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])])])])):H("",!0),p.selected.programTemplate&&p.selected.programTemplate.adBreaks.length>0?(t(),s("div",By,[I[27]||(I[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("b",null," Ad Break ")],-1)),e("div",Ny,[e("table",Ry,[I[26]||(I[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(p.item.adBreaks,(ae,ne)=>(t(),s("tr",null,[e("td",null,f(ne+1),1),e("td",null,f(o(U).moment.utc(ae.offsetMillis).format("HH:mm:ss")),1),e("td",null,f(o(U).moment.utc(ae.durationInMillis).format("HH:mm:ss")),1),e("td",null,[p.lookups.adBreakVodSources.length>0?(t(),s(L,{key:0},[N(e("select",{"onUpdate:modelValue":pe=>ae.vodSourceId=pe,onChange:pe=>S(ae),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(L,null,B(p.lookups.adBreakVodSources,pe=>(t(),s(L,null,[pe.durationInMillis===ae.durationInMillis?(t(),s("option",{key:0,value:pe.id}," ["+f(o(U).moment.utc(pe.durationInMillis).format("HH:mm:ss"))+"] "+f(pe.name),9,zy)):H("",!0)],64))),256))],40,Fy),[[ge,ae.vodSourceId]]),o(_).item.adBreaks.$each.$response?(t(!0),s(L,{key:0},B(o(_).item.adBreaks.$each.$response.$errors[ne].vodSourceId,pe=>(t(),s("div",{key:pe,class:"d-block invalid-feedback"},f(pe.$message),1))),128)):H("",!0)],64)):H("",!0)])]))),256))])])])])):H("",!0)]))]),fe.value?H("",!0):(t(),s("div",Gy,[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:I[11]||(I[11]=ae=>v()),class:"btn btn-primary",type:"button"},I[28]||(I[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jy),e("button",{onClick:I[12]||(I[12]=ae=>n(!1)),class:"btn btn-secondary ms-1"},I[29]||(I[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))]))])]),F(yb,{ref_key:"modalSelectProgramTemplate",ref:J,onClose:P},null,512)],8,ty)]),_:1})}}},Wy=["id"],Ky={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Qy={class:"modal-content"},Jy={class:"modal-header"},Xy={class:"modal-title"},Zy={class:"modal-body"},e$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},t$=["innerHTML"],s$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},o$={key:2,class:"container"},a$={class:"row row-cols-1 row-cols-sm-2"},l$={class:"col"},n$={class:"form-floating mb-2"},r$={class:"col"},i$={class:"form-floating mb-2"},d$={class:"row row-cols-1 row-cols-sm-3 mt-2"},u$={class:"col"},c$={class:"form-floating mb-2"},m$={class:"col"},f$={class:"form-floating mb-2"},p$={key:0,class:"d-block invalid-feedback"},v$={class:"col"},g$={class:"form-floating mb-2"},b$={key:0,class:"d-block invalid-feedback"},y$={class:"row row-cols-1 row-cols-sm-3"},$$={class:"col"},w$={class:"form-floating mb-2"},h$={class:"col"},_$={class:"form-floating mb-2"},k$={class:"col"},S$={class:"form-floating mb-2"},T$={class:"row row-cols-1 row-cols-sm-3"},I$={class:"col"},M$={class:"form-floating mb-2"},x$={class:"col"},C$={class:"form-floating mb-2"},V$={key:0,class:"col"},P$={class:"form-floating mb-2"},O$={key:0},A$={class:"table-responsive border mt-1"},U$={class:"table mb-0"},L$=["onUpdate:modelValue","onChange"],D$=["value"],H$={class:"modal-footer"},E$=["disabled"],vt={__name:"_editProgram",emits:["onClose"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Edit Program"}),Q=M,J=de(),d=de("modalEditProgram"),y=be({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:oe.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:oe.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:oe.withMessage("startOffsetMillis is required.",le),minValue:Re(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:oe.withMessage("endOffsetMillis is required.",le),minValue:Re(0),$autoDirty:!0,$lazy:!0}}},p=Te(j,y);me(async()=>{p.value.$reset()});const x=async(b,m)=>{J.value=b;const c=y;K.value.clear(),G.value="",c.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},c.item=null,await i(),await n(),p.value.$reset();var w=document.getElementById(d.value),k=_e.getOrCreateInstance(w);k.show()},r=async b=>{if(!b){Q("onClose",b);var k=document.getElementById(d.value),$=_e.getOrCreateInstance(k);$.hide();return}const m=y,c=U.moment(m.item.dateScheduledStart).utc(!0).format(),w={programId:J.value,name:m.item.name,dateScheduledStart:c,adBreaks:m.item.adBreaks.map(q=>({sourceLocationId:q.sourceLocationId,vodSourceId:q.vodSourceId,offsetMillis:q.offsetMillis,durationInMillis:q.durationInMillis}))};try{await R.put("/api/v1/programs/",w).then(S=>{C.success("Edit Program","Program was edited.")})}catch(q){G.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0);return}finally{}Q("onClose",b);var k=document.getElementById(d.value),$=_e.getOrCreateInstance(k);$.hide()},_=async()=>{await r(!0)},i=async()=>{try{const b=`/api/v1/programs/${J.value}/`;await R.get(b).then(w=>{y.item=w.data;const k=y.item,S=U.moment.utc(k.dateScheduledStart).format("YYYY-MM-DD HH:mm");y.item.dateScheduledStart=S,k.startOffsetTime=U.moment.utc(k.startOffsetMillis).format("HH:mm:ss"),k.endOffsetTime=U.moment.utc(k.endOffsetMillis).format("HH:mm:ss"),k.durationTime=U.moment.utc(k.durationInMillis).format("HH:mm:ss"),k.adBreaksDurationTime=U.moment.utc(k.adBreaksDurationInMillis).format("HH:mm:ss"),k.totalProgramTemplateDurationTime=U.moment.utc(k.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const m=y,c=m.item.channel.outputs[0].outputType;await v(m.item.sourceLocationId,c)}catch(b){G.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},n=async()=>{},v=async(b,m)=>{try{let c=`/api/v1/vodsources/lookup/source-location/${b}/output-type/${m}`;await R.get(c).then(w=>{y.lookups.adBreakVodSources=w.data})}catch(c){G.value=U.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},l=b=>{const m=y.lookups.adBreakVodSources.find(c=>c.id==b.vodSourceId);b.sourceLocationId=m.sourceLocationId};return g({open:x,close:r}),(b,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ky,[e("div",Qy,[e("div",Jy,[e("h5",Xy,[m[14]||(m[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:m[0]||(m[0]=c=>r(!1)),"aria-label":"Close"})]),e("div",Zy,[o(G)?(t(),s("div",e$,[m[15]||(m[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,t$)])):H("",!0),o(K).size>0?(t(),s("div",s$,[m[16]||(m[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),c=>(t(),s("li",null,f(c),1))),256))])])):H("",!0),y.item?(t(),s("div",o$,[e("div",a$,[e("div",l$,[e("div",n$,[y.item.sourceLocation?N((t(),s("input",{key:0,"onUpdate:modelValue":m[1]||(m[1]=c=>y.item.sourceLocation.name=c),id:"sourceLocation",class:"form-control-plaintext",readonly:""},null,512)),[[X,y.item.sourceLocation.name]]):H("",!0),m[17]||(m[17]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",r$,[e("div",i$,[y.item.vodSource?N((t(),s("input",{key:0,"onUpdate:modelValue":m[2]||(m[2]=c=>y.item.vodSource.name=c),id:"vodSource",class:"form-control-plaintext",readonly:""},null,512)),[[X,y.item.vodSource.name]]):H("",!0),m[18]||(m[18]=e("label",{for:"vodSource",class:""},"VOD Source",-1))])])]),e("div",d$,[e("div",u$,[e("div",c$,[y.item.relativeProgram?N((t(),s("input",{key:0,"onUpdate:modelValue":m[3]||(m[3]=c=>y.item.relativeProgram.name=c),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512)),[[X,y.item.relativeProgram.name]]):H("",!0),m[19]||(m[19]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])]),e("div",m$,[e("div",f$,[N(e("input",{"onUpdate:modelValue":m[4]||(m[4]=c=>y.item.name=c),id:"name",class:ee([o(U).getValidFeedbackCss(y.item.name),"form-control"]),placeholder:"Name"},null,2),[[X,y.item.name]]),m[20]||(m[20]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",p$,[(t(!0),s(L,null,B(o(p).item.name.$errors,c=>(t(),s("div",{key:c.$uid},f(c.$message),1))),128))])):H("",!0)])]),e("div",v$,[e("div",g$,[N(e("input",{"onUpdate:modelValue":m[5]||(m[5]=c=>y.item.dateScheduledStart=c),type:"datetime-local",id:"dateScheduledStart",class:ee([o(U).getValidFeedbackCss(y.item.dateScheduledStart),"form-control"])},null,2),[[X,y.item.dateScheduledStart]]),m[21]||(m[21]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(p).item.dateScheduledStart.$error?(t(),s("div",b$,[(t(!0),s(L,null,B(o(p).item.dateScheduledStart.$errors,c=>(t(),s("div",{key:c.$uid},f(c.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",y$,[e("div",$$,[e("div",w$,[N(e("input",{"onUpdate:modelValue":m[6]||(m[6]=c=>y.item.startOffsetTime=c),id:"startOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[X,y.item.startOffsetTime]]),m[22]||(m[22]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",h$,[e("div",_$,[N(e("input",{"onUpdate:modelValue":m[7]||(m[7]=c=>y.item.endOffsetTime=c),id:"endOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[X,y.item.endOffsetTime]]),m[23]||(m[23]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",k$,[e("div",S$,[N(e("input",{"onUpdate:modelValue":m[8]||(m[8]=c=>y.item.durationTime=c),id:"durationTime",class:"form-control-plaintext",readonly:""},null,512),[[X,y.item.durationTime]]),m[24]||(m[24]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",T$,[e("div",I$,[e("div",M$,[N(e("input",{"onUpdate:modelValue":m[9]||(m[9]=c=>y.item.adBreaksDurationTime=c),id:"adBreaksDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[X,y.item.adBreaksDurationTime]]),m[25]||(m[25]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks Duration",-1))])]),e("div",x$,[e("div",C$,[N(e("input",{"onUpdate:modelValue":m[10]||(m[10]=c=>y.item.totalProgramTemplateDurationTime=c),id:"totalProgramTemplateDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[X,y.item.totalProgramTemplateDurationTime]]),m[26]||(m[26]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])]),y.item.relativeProgram?(t(),s("div",V$,[e("div",P$,[N(e("input",{"onUpdate:modelValue":m[11]||(m[11]=c=>y.item.relativeProgram.name=c),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512),[[X,y.item.relativeProgram.name]]),m[27]||(m[27]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])])):H("",!0)])]),m[30]||(m[30]=e("hr",null,null,-1)),y.item?(t(),s("div",O$,[m[29]||(m[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",A$,[e("table",U$,[m[28]||(m[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(y.item.adBreaks,(c,w)=>(t(),s("tr",null,[e("td",null,f(w+1),1),e("td",null,f(o(U).moment.utc(c.offsetMillis).format("HH:mm:ss")),1),e("td",null,f(o(U).moment.utc(c.durationInMillis).format("HH:mm:ss")),1),e("td",null,[N(e("select",{"onUpdate:modelValue":k=>c.vodSourceId=k,onChange:k=>l(c),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(L,null,B(y.lookups.adBreakVodSources,k=>(t(),s(L,null,[k.durationInMillis===c.durationInMillis?(t(),s("option",{key:0,value:k.id}," ["+f(o(U).moment.utc(k.durationInMillis).format("HH:mm:ss"))+"] "+f(k.name),9,D$)):H("",!0)],64))),256))],40,L$),[[ge,c.vodSourceId]])])]))),256))])])])])):H("",!0)])):H("",!0)]),e("div",H$,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:m[12]||(m[12]=c=>_()),class:"btn btn-primary ms-2",type:"button"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,E$),e("button",{onClick:m[13]||(m[13]=c=>r(!1)),class:"btn btn-secondary ms-1"},m[32]||(m[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Wy))}},q$={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(a){const{appTitle:g,pageTitle:M,busy:O,infoMessage:T,warningMessage:D,errorMessage:A,router:K,axios:Y,utils:V,toasts:G,close:se,security:R}=we({appTitle:"Arcadian-FAST",pageTitle:"Schedule Channel Programs"}),U=a,C=de(null),h=de(null),u=de(null),Q={viewType:"Week",cellDuration:15,startDate:qe.DayPilot.Date.today(),onTimeRangeSelected:i=>{var n=i.control;const v={start:i.start,end:i.end,id:qe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};n.events.add(v);var l=n.events.find(v.id);x(l)},onBeforeEventRender:i=>{if(i.data.barColor="green",!!i.data.tags)switch(i.data.tags.type){case"new":i.data.barColor="yellow";break;case"business":i.data.barColor="red";break;case"personal":i.data.barColor="greem";break;case"vacation":i.data.barColor="black";break;default:i.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async i=>{const n=i.newStart.value,v=i.e.id(),l=V.moment(n).utc(!0).format();try{let b="/api/v1/programs/scheduled-date-start";const m={programId:v,dateScheduledStart:l};await Y.put(b,m).then(c=>{G.success("Program date scheduled start was edited.")})}catch(b){A.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0);return}finally{}await j()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async i=>{var n=i.e.id();_(n)},contextMenu:new qe.DayPilot.Menu([{text:"Clone",onClick:async i=>{const n=i.source.id();try{let v=`/api/v1/programs/${n}/clone`;await Y.post(v).then(l=>{G.success("Clone Program","Program was cloned.")})}catch(v){A.value=V.getErrorMessageAsHtml(v),window.scrollTo(0,0);return}finally{await j()}}},{text:"Delete",onClick:async i=>{if(!confirm("Do you want to remove this program?"))return;const v=i.source.id();try{let l=`/api/v1/programs/${v}/`;await Y.delete(l).then(b=>{G.success("Delete Program","Program was deleted.")}),C.value.control.events.remove(i.source)}catch(l){A.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0);return}finally{await j()}}}])},J=de([]),d=()=>{C.value.control.update({events:J.value})},y=be({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});me(async()=>{await j()});const j=async()=>{await p(),await d()},p=async()=>{const i=y;if(!O.value)try{O.value=!0,A.value="";const n=`/api/v1/channels/${U.id}/`;await Y.get(n).then(v=>{i.item=v.data;const l=i.item.outputs,b=i.item.programs.map(m=>{let c=`${m.name}`,w=`[${m.name}]`;return m.relativeProgram&&(w+=` => [${m.relativeProgram.name}]`),{start:V.moment.utc(m.dateScheduledStart).format(),end:V.moment.utc(m.dateScheduledEnd).format(),id:m.programId,text:c,toolTip:w}});J.value=b})}catch(n){A.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{O.value=!1}},x=i=>{h.value.open(U.id,i.id(),i.start().value)},r=async(i,n)=>{var v=C.value,l=v.control.events.find(i.eventId);if(!n&&l){C.value.control.events.remove(l);return}v.control.events.find($=>$.text()==i.name)&&(alert("Program already exists in this channel. Removing in the calendar."),C.value.control.events.remove(l));const m=V.moment(i.dateScheduledStart).utc(!0).format(),c=V.moment(i.dateScheduledEnd).utc(!0).format(),w=new qe.DayPilot.Date(m),k=new qe.DayPilot.Date(c);l.text(i.name),l.start(new qe.DayPilot.Date(w)),l.end(new qe.DayPilot.Date(k)),l.data.tags.program=i,l.commit(),C.value.control.update(),await j()},_=(i,n)=>{u.value.open(i,n)};return(i,n)=>{const v=te("router-link"),l=te("PageHeader"),b=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(l,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(M)},{default:z(()=>[e("button",{onClick:n[0]||(n[0]=m=>j()),class:"btn btn-secondary ms-1"},n[1]||(n[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(v,{to:`${a.urlView}/${a.id}`,class:"btn btn-secondary ms-1"},{default:z(()=>n[2]||(n[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(b,{errorMessage:o(A)},{default:z(()=>[e("div",null,[F(o(qe.DayPilotCalendar),{id:"dp",config:Q,ref_key:"calendarRef",ref:C},null,512),F(Yy,{ref_key:"modalAddProgram",ref:h,onOnClose:r},null,512),F(vt,{ref_key:"modalEditProgram",ref:u,onOnClose:j},null,512)])]),_:1},8,["errorMessage"])])]),_:1})}}},B$=["id"],N$={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},R$={class:"modal-content"},F$={class:"modal-header"},z$={class:"modal-title"},G$={class:"modal-body"},j$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Y$=["innerHTML"],W$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},K$={class:"container"},Q$={class:"row row-cols-1 row-cols-sm-3"},J$={class:"col"},X$={class:"form-floating mb-2"},Z$=["disabled"],ew=["value"],tw={class:"col"},sw={class:"form-floating mb-2"},ow={key:0,class:"d-block invalid-feedback"},aw={class:"col"},lw={class:"form-floating mb-2"},nw={key:0,class:"d-block invalid-feedback"},rw={class:"row row-cols-sm-2"},iw={class:"col"},dw={class:"form-floating mb-2"},uw=["value"],cw={key:0,class:"d-block invalid-feedback"},mw={class:"col"},fw={class:"form-floating mb-2"},pw=["value"],vw={key:0,class:"d-block invalid-feedback"},gw={class:"col"},bw={class:"input-group mb-1"},yw={class:"form-floating"},$w={key:0,class:"input-group-text"},ww={key:0},hw={key:1},_w={key:2},kw={key:3,class:"d-block invalid-feedback"},Sw={class:"col"},Tw={class:"input-group mb-1"},Iw={class:"form-floating"},Mw={key:0,class:"input-group-text"},xw={key:0},Cw={key:1},Vw={key:2,class:"d-block invalid-feedback"},Pw={class:"table-responsive border mt-1"},Ow={class:"table"},Aw={class:"input-group mb-1"},Uw=["onUpdate:modelValue"],Lw={key:0,class:"input-group-text"},Dw=["onUpdate:modelValue"],Hw=["value"],Ew=["onUpdate:modelValue"],qw=["value"],Bw=["onClick"],Nw={class:"modal-footer"},Rw=["disabled"],Fw={__name:"_addProgram",emits:["refresh"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),Q=M,J=de(),d=de("modalAddProgram"),y=be({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:oe.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:oe.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:oe.withMessage("startOffsetMillis is required.",le),minValue:Re(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:oe.withMessage("endOffsetMillis is required.",le),minValue:Re(0),$autoDirty:!0,$lazy:!0}}},p=Te(j,y);me(async()=>{p.value.$reset()});const x=async $=>{J.value=$;const q=y;K.value.clear(),G.value="";const S=U.moment().local().add(2,"m"),re=S.format("YYYY-MM-DD HH:mm"),fe=S.format("YYYY_MM_DD")+"_PROGRAM_";q.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},q.item={name:fe,relativeProgramId:null,dateScheduledStart:re,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await i(),p.value.$reset();var Z=document.getElementById(d.value),I=_e.getOrCreateInstance(Z);I.show()},r=async()=>{var $=document.getElementById(d.value),q=_e.getOrCreateInstance($);q.hide(),Q("refresh")},_=async()=>{const $=y;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const P=$.item;delete P.vodSource,P.channelId=J.value;var S=P.dateScheduledStart;P.dateScheduledStart=U.moment(S).utc().format(),await R.post("/api/v1/programs/",P).then(re=>{C.success("Add Program","Program added to Channel",{async onClose(){}})}),await r()}catch(P){G.value=U.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{D.value=!1}},i=async()=>{await n(),await l(),await m()},n=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(q=>{y.lookups.sourceLocations=q.data,y.lookups.sourceLocations.length===1&&(y.item.sourceLocationId=y.lookups.sourceLocations[0].id)}),y.item.sourceLocationId&&await v(y.item.sourceLocationId)}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},v=async $=>{try{let q=`/api/v1/vodSources/lookup/source-location/${$}`;await R.get(q).then(S=>{y.lookups.vodSources=S.data})}catch(q){G.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},l=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(q=>{y.lookups.adBreakSourceLocations=q.data})}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},b=async $=>{try{let q=`/api/v1/vodSources/lookup/source-location/${$}`;await R.get(q).then(S=>{y.lookups.adBreakVodSources=S.data})}catch(q){G.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},m=async()=>{try{const $=`/api/v1/programs/lookup/?channelId=${J.value}`;await R.get($).then(q=>{if(y.lookups.channelPrograms=q.data,y.lookups.channelPrograms.length===1){const P=y.lookups.channelPrograms[0];y.item.relativeProgramId=P.id}})}catch($){G.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},c=()=>{const $={offsetMillis:0,sourceLocationId:null,vodSourceId:null},q=y.item.adBreaks.length;if(q>0){const S=y.item.adBreaks[q-1];$.offsetMillis=S.offsetMillis+1e4}y.item.adBreaks.push($)},w=$=>{y.item.adBreaks.splice($,1)},k=()=>{const $=y.item.vodSource;y.item.vodSourceId=$.id};return g({open:x,close:r}),($,q)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",N$,[e("div",R$,[e("div",F$,[e("h5",z$,[q[12]||(q[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:q[0]||(q[0]=S=>r()),"aria-label":"Close"})]),e("div",G$,[o(G)?(t(),s("div",j$,[q[13]||(q[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Y$)])):H("",!0),o(K).size>0?(t(),s("div",W$,[q[14]||(q[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),S=>(t(),s("li",null,f(S),1))),256))])])):H("",!0),e("div",K$,[e("div",Q$,[e("div",J$,[e("div",X$,[N(e("select",{"onUpdate:modelValue":q[1]||(q[1]=S=>y.item.relativeProgramId=S),class:"form-select",id:"sourceLocationId",disabled:y.lookups.channelPrograms.length<=0},[(t(!0),s(L,null,B(y.lookups.channelPrograms,S=>(t(),s("option",{value:S.id},f(S.name),9,ew))),256))],8,Z$),[[ge,y.item.relativeProgramId]]),q[15]||(q[15]=e("label",{for:"relativeProgramId",class:""},"Relative Program",-1))])]),e("div",tw,[e("div",sw,[N(e("input",{"onUpdate:modelValue":q[2]||(q[2]=S=>y.item.name=S),id:"name",class:"form-control",placeholder:"Name"},null,512),[[X,y.item.name]]),q[16]||(q[16]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",ow,[(t(!0),s(L,null,B(o(p).item.name.$errors,S=>(t(),s("div",{key:S.$uid},f(S.$message),1))),128))])):H("",!0)])]),e("div",aw,[e("div",lw,[N(e("input",{"onUpdate:modelValue":q[3]||(q[3]=S=>y.item.dateScheduledStart=S),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[X,y.item.dateScheduledStart]]),q[17]||(q[17]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(p).item.dateScheduledStart.$error?(t(),s("div",nw,[(t(!0),s(L,null,B(o(p).item.dateScheduledStart.$errors,S=>(t(),s("div",{key:S.$uid},f(S.$message),1))),128))])):H("",!0)])])]),e("div",rw,[e("div",iw,[e("div",dw,[N(e("select",{"onUpdate:modelValue":q[4]||(q[4]=S=>y.item.sourceLocationId=S),onChange:q[5]||(q[5]=S=>v(y.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,B(y.lookups.sourceLocations,S=>(t(),s("option",{value:S.id},f(S.name),9,uw))),256))],544),[[ge,y.item.sourceLocationId]]),q[18]||(q[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(p).item.sourceLocationId.$error?(t(),s("div",cw,[(t(!0),s(L,null,B(o(p).item.sourceLocationId.$errors,S=>(t(),s("div",{key:S.$uid},f(S.$message),1))),128))])):H("",!0)])]),e("div",mw,[e("div",fw,[N(e("select",{"onUpdate:modelValue":q[6]||(q[6]=S=>y.item.vodSource=S),onChange:q[7]||(q[7]=S=>k()),class:"form-select",id:"vodSourceId"},[(t(!0),s(L,null,B(y.lookups.vodSources,S=>(t(),s("option",{value:S},f(S.name),9,pw))),256))],544),[[ge,y.item.vodSource]]),q[19]||(q[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(p).item.vodSourceId.$error?(t(),s("div",vw,[(t(!0),s(L,null,B(o(p).item.vodSourceId.$errors,S=>(t(),s("div",{key:S.$uid},f(S.$message),1))),128))])):H("",!0)])]),e("div",gw,[e("div",bw,[e("div",yw,[N(e("input",{"onUpdate:modelValue":q[8]||(q[8]=S=>y.item.startOffsetMillis=S),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[X,y.item.startOffsetMillis]]),q[20]||(q[20]=e("label",{for:"startOffsetMillis",class:""},"Start OffSet Millis",-1))]),y.item.startOffsetMillis>0?(t(),s("span",$w,f(o(U).moment.utc(y.item.startOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),y.item.startOffsetMillis>0&&y.item.startOffsetMillis<3e4?(t(),s("div",ww,q[21]||(q[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),y.item.startOffsetMillis>y.item.endOffsetMillis&&y.item.endOffsetMillis>0?(t(),s("div",hw,q[22]||(q[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):H("",!0),y.item.vodSource&&y.item.startOffsetMillis>y.item.vodSource.durationInMillis?(t(),s("div",_w,q[23]||(q[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(p).item.startOffsetMillis.$error?(t(),s("div",kw,[(t(!0),s(L,null,B(o(p).item.startOffsetMillis.$errors,S=>(t(),s("div",{key:S.$uid},f(S.$message),1))),128))])):H("",!0)]),e("div",Sw,[e("div",Tw,[e("div",Iw,[N(e("input",{"onUpdate:modelValue":q[9]||(q[9]=S=>y.item.endOffsetMillis=S),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[X,y.item.endOffsetMillis]]),q[24]||(q[24]=e("label",{for:"endOffsetMillis",class:""},"End OffSet Millis",-1))]),y.item.endOffsetMillis>0?(t(),s("span",Mw,f(o(U).moment.utc(y.item.endOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),y.item.endOffsetMillis>0&&y.item.endOffsetMillis<3e4?(t(),s("div",xw,q[25]||(q[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),y.item.vodSource&&y.item.endOffsetMillis>y.item.vodSource.durationInMillis?(t(),s("div",Cw,q[26]||(q[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(p).item.endOffsetMillis.$error?(t(),s("div",Vw,[(t(!0),s(L,null,B(o(p).item.endOffsetMillis.$errors,S=>(t(),s("div",{key:S.$uid},f(S.$message),1))),128))])):H("",!0)])]),q[30]||(q[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[q[27]||(q[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:c,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Pw,[e("table",Ow,[q[29]||(q[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,B(y.item.adBreaks,(S,P)=>(t(),s("tr",null,[e("td",null,f(P+1),1),e("td",null,[e("div",Aw,[N(e("input",{"onUpdate:modelValue":re=>S.offsetMillis=re,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Uw),[[X,S.offsetMillis]]),S.offsetMillis>0?(t(),s("span",Lw,f(o(U).moment.utc(S.offsetMillis).format("HH:mm:ss")),1)):H("",!0)])]),e("td",null,[N(e("select",{"onUpdate:modelValue":re=>S.sourceLocationId=re,onChange:q[10]||(q[10]=re=>b(y.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(L,null,B(y.lookups.adBreakSourceLocations,re=>(t(),s("option",{value:re.id},f(re.name),9,Hw))),256))],40,Dw),[[ge,S.sourceLocationId]])]),e("td",null,[N(e("select",{"onUpdate:modelValue":re=>S.vodSourceId=re,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(L,null,B(y.lookups.adBreakVodSources,re=>(t(),s("option",{value:re.id},f(re.name),9,qw))),256))],8,Ew),[[ge,S.vodSourceId]])]),e("td",null,[e("button",{onClick:re=>w(P),class:"btn btn-outline-warning"},q[28]||(q[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Bw)])]))),256))])])])])])]),e("div",Nw,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:q[11]||(q[11]=S=>_()),class:"btn btn-primary",type:"button"},q[31]||(q[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Rw),q[32]||(q[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,B$))}},zw=["id"],Gw={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},jw={class:"modal-content"},Yw={class:"modal-header"},Ww={class:"modal-title"},Kw={class:"modal-body"},Qw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Jw=["innerHTML"],Xw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Zw={class:"container"},eh={class:"col"},th={class:"form-floating mb-2"},sh={class:"col"},oh={class:"form-floating mb-2"},ah={key:0,class:"d-block invalid-feedback"},lh={class:"col"},nh={class:"form-floating mb-2 d-none"},rh={key:0,class:"d-block invalid-feedback"},ih={class:"col"},dh={class:"form-floating mb-2"},uh={key:0,class:"d-block invalid-feedback"},ch={class:"modal-footer"},mh=["disabled"],fh={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output Playback Configuration"}),Q=M,J=de(),d=de("modalAddPlaybackConfiguration"),y=be({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),j={item:{name:{required:oe.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:oe.withMessage("adDecisionServerUrl is required.",le),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:oe.withMessage("videoContentSourceUrl is required.",le),$autoDirty:!0,$lazy:!0}}},p=Te(j,y);me(async()=>{p.value.$reset()});const x=async(i,n)=>{J.value=i;const v=y;K.value.clear(),G.value="";const l=n;let b=l.lastIndexOf("/");const m=l.substring(0,b);let c=l.substring(b+1);b=c.lastIndexOf("."),c=c.substring(0,b)+"_ADCAMPAIGN_",v.item={name:c,originalVideoContentSourceUrl:n,videoContentSourceUrl:m,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},p.value.$reset();var w=document.getElementById(d.value),k=_e.getOrCreateInstance(w);k.show()},r=async()=>{var i=document.getElementById(d.value),n=_e.getOrCreateInstance(i);n.hide(),Q("refresh")},_=async()=>{const i=y;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const v=i.item;v.channelOutputId=J.value,await R.put("/api/v1/channelOutputs/playback/",v).then(l=>{C.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await r()}catch(v){G.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{D.value=!1}};return g({open:x,close:r}),(i,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Gw,[e("div",jw,[e("div",Yw,[e("h5",Ww,[n[6]||(n[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=v=>r()),"aria-label":"Close"})]),e("div",Kw,[o(G)?(t(),s("div",Qw,[n[7]||(n[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Jw)])):H("",!0),o(K).size>0?(t(),s("div",Xw,[n[8]||(n[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),v=>(t(),s("li",null,f(v),1))),256))])])):H("",!0),e("div",Zw,[e("div",eh,[e("div",th,[N(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=v=>y.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[X,y.item.originalVideoContentSourceUrl]]),n[9]||(n[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",sh,[e("div",oh,[N(e("input",{"onUpdate:modelValue":n[2]||(n[2]=v=>y.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[X,y.item.name]]),n[10]||(n[10]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",ah,[(t(!0),s(L,null,B(o(p).item.name.$errors,v=>(t(),s("div",{key:v.$uid},f(v.$message),1))),128))])):H("",!0)])]),e("div",lh,[e("div",nh,[N(e("input",{"onUpdate:modelValue":n[3]||(n[3]=v=>y.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[X,y.item.videoContentSourceUrl]]),n[11]||(n[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),n[12]||(n[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(p).item.videoContentSourceUrl.$error?(t(),s("div",rh,[(t(!0),s(L,null,B(o(p).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},f(v.$message),1))),128))])):H("",!0)])]),e("div",ih,[e("div",dh,[N(e("textarea",{"onUpdate:modelValue":n[4]||(n[4]=v=>y.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[X,y.item.adDecisionServerUrl]]),n[13]||(n[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(p).item.adDecisionServerUrl.$error?(t(),s("div",uh,[(t(!0),s(L,null,B(o(p).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},f(v.$message),1))),128))])):H("",!0),n[14]||(n[14]=Je('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",ch,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:n[5]||(n[5]=v=>_()),class:"btn btn-primary",type:"button"},n[15]||(n[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mh),n[16]||(n[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,zw))}},ph=["id"],vh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},gh={class:"modal-content"},bh={class:"modal-header"},yh={class:"modal-title"},$h={class:"modal-body"},wh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hh=["innerHTML"],_h={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kh={class:"container"},Sh={class:"col"},Th={class:"form-floating mb-2"},Ih=["value"],Mh={key:0,class:"d-block invalid-feedback"},xh={class:"col"},Ch={class:"form-floating mb-2"},Vh={key:0,class:"d-block invalid-feedback"},Ph={class:"col"},Oh={class:"form-floating mb-2"},Ah={key:0,class:"d-block invalid-feedback"},Uh={class:"modal-footer"},Lh=["disabled"],Dh={__name:"_addChannelOutput",emits:["refresh"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output"}),Q=M,J=de(),d=de("modalAddChannelOutput"),y=be({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),j={item:{sourceGroupId:{required:oe.withMessage("Source Group is required.",le),$autoDirty:!0,$lazy:!0},manifestName:{required:oe.withMessage("Manifest Name is required.",le),$autoDirty:!0,$lazy:!0},outputType:{required:oe.withMessage("Output Type is required.",le),$autoDirty:!0,$lazy:!0}}},p=Te(j,y);me(async()=>{p.value.$reset()});const x=async()=>{await r()},r=async()=>{try{await R.get("/api/v1/sourceGroups/lookup/").then(l=>{y.lookups.sourceGroups=l.data,y.lookups.sourceGroups.length===1&&(y.item.sourceGroupId=y.lookups.sourceGroups[0].id)})}catch(v){G.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},_=async v=>{J.value=v;const l=y;K.value.clear(),G.value="",l.lookups={sourceGroups:[]},l.item={sourceGroupId:null,outputType:null},await x(),p.value.$reset();var b=document.getElementById(d.value),m=_e.getOrCreateInstance(b);m.show()},i=async()=>{var v=document.getElementById(d.value),l=_e.getOrCreateInstance(v);l.hide(),Q("refresh")},n=async()=>{const v=y;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const b=v.item;b.channelId=J.value,await R.post("/api/v1/channelOutputs",b).then(m=>{C.success("Add Channel Output","Channel output added.")}),await i()}catch(b){G.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{D.value=!1}};return g({open:_,close:i}),(v,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vh,[e("div",gh,[e("div",bh,[e("h5",yh,[l[4]||(l[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),l[5]||(l[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",$h,[o(G)?(t(),s("div",wh,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,hh)])):H("",!0),o(K).size>0?(t(),s("div",_h,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),b=>(t(),s("li",null,f(b),1))),256))])])):H("",!0),e("div",kh,[e("div",Sh,[e("div",Th,[N(e("select",{"onUpdate:modelValue":l[0]||(l[0]=b=>y.item.sourceGroupId=b),class:ee([o(U).getValidFeedbackCss(y.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(L,null,B(y.lookups.sourceGroups,b=>(t(),s("option",{value:b.id},f(b.name),9,Ih))),256))],2),[[ge,y.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(p).item.sourceGroupId.$error?(t(),s("div",Mh,[(t(!0),s(L,null,B(o(p).item.sourceGroupId.$errors,b=>(t(),s("div",{key:b.$uid},f(b.$message),1))),128))])):H("",!0)])]),e("div",xh,[e("div",Ch,[N(e("select",{"onUpdate:modelValue":l[1]||(l[1]=b=>y.item.outputType=b),class:ee([o(U).getValidFeedbackCss(y.item.outputType),"form-select"]),id:"outputType"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[ge,y.item.outputType]]),l[10]||(l[10]=e("label",{for:"outputType",class:""},"Output Type",-1)),o(p).item.outputType.$error?(t(),s("div",Vh,[(t(!0),s(L,null,B(o(p).item.outputType.$errors,b=>(t(),s("div",{key:b.$uid},f(b.$message),1))),128))])):H("",!0)])]),e("div",Ph,[e("div",Oh,[N(e("input",{"onUpdate:modelValue":l[2]||(l[2]=b=>y.item.manifestName=b),class:ee([o(U).getValidFeedbackCss(y.item.manifestName),"form-control"]),id:"manifestName"},null,2),[[X,y.item.manifestName]]),l[11]||(l[11]=e("label",{for:"manifestName",class:""},"Manifest Name",-1)),o(p).item.manifestName.$error?(t(),s("div",Ah,[(t(!0),s(L,null,B(o(p).item.manifestName.$errors,b=>(t(),s("div",{key:b.$uid},f(b.$message),1))),128))])):H("",!0)])])])]),e("div",Uh,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:l[3]||(l[3]=b=>n()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Lh),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,ph))}},Hh=["id"],Eh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},qh={class:"modal-content"},Bh={class:"modal-header"},Nh={class:"modal-title"},Rh={class:"modal-body"},Fh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},zh=["innerHTML"],Gh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},jh={class:"container"},Yh={class:"col"},Wh={class:"form-floating mb-2"},Kh=["value"],Qh={key:0,class:"d-block invalid-feedback"},Jh={class:"col"},Xh={class:"form-floating mb-2"},Zh=["value"],e_={key:0,class:"d-block invalid-feedback"},t_={class:"col"},s_={class:"card h-100"},o_=["id"],a_={class:"modal-footer"},l_=["disabled"],n_={__name:"_editFillerSlate",emits:["refresh"],setup(a,{expose:g,emit:M}){const{appTitle:O,pageTitle:T,busy:D,isDirty:A,validations:K,infoMessage:Y,warningMessage:V,errorMessage:G,router:se,axios:R,utils:U,toasts:C,closeWithReturnUrl:h,security:u}=we({appTitle:"Arcadian-FAST",pageTitle:"Edit Filler Slate"}),Q=M,J=de("modalEditFillerSlate"),d=be({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),y={item:{channelId:{required:oe.withMessage("channelId is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:oe.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:oe.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0}}},j=Te(y,d);me(async()=>{j.value.$reset()}),Ue(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const p=async()=>{await x()},x=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(c=>{d.lookups.sourceLocations=c.data}),d.item.sourceLocationId&&await r(d.item.sourceLocationId)}catch(m){G.value=U.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},r=async m=>{try{let c=`/api/v1/vodSources/lookup/source-Location/${m}/?type=2`;await R.get(c).then(w=>{d.lookups.vodSources=w.data})}catch(c){G.value=U.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},_=async(m,c,w)=>{const k=d;K.value.clear(),G.value="",k.lookups={sourceLocations:[],vodSources:[]},k.item={channelId:m,sourceLocationId:c,vodSourceId:w},await p(),d.item.vodSourceId&&await b(d.item.vodSourceId),j.value.$reset();var $=document.getElementById(J.value),q=_e.getOrCreateInstance($);q.show()},i=async()=>{var m=document.getElementById(J.value),c=_e.getOrCreateInstance(m);c.hide(),d.hls&&(d.hls.stopLoad(),d.hls.destroy()),Q("refresh")},n=async()=>{const m=d;if(D.value)return;if(!await j.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const w=m.item;await R.put("/api/v1/channels/filler-slate",w).then(k=>{C.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await i()}catch(w){G.value=U.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{D.value=!1}},v=async()=>{d.item.vodSourceId=null,await r(d.item.sourceLocationId)},l=async()=>{await b(d.item.vodSourceId)},b=async m=>{try{let c=`/api/v1/vodSources/${m}/hls`;const w=await R.get(c).then($=>$.data);if(d.hls){d.hls.loadSource(w);return}const k=document.getElementById(`video-${d.item.channelId}`);d.hls=U.createHlsStream(k,w)}catch(c){G.value=U.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}};return g({open:_,close:i}),(m,c)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Eh,[e("div",qh,[e("div",Bh,[e("h5",Nh,[c[6]||(c[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),W(f(o(T)),1)]),e("button",{type:"button",class:"btn-close",onClick:c[0]||(c[0]=w=>i()),"aria-label":"Close"})]),e("div",Rh,[o(G)?(t(),s("div",Fh,[c[7]||(c[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,zh)])):H("",!0),o(K).size>0?(t(),s("div",Gh,[c[8]||(c[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(o(K).values(),w=>(t(),s("li",null,f(w),1))),256))])])):H("",!0),e("div",jh,[e("div",Yh,[e("div",Wh,[N(e("select",{"onUpdate:modelValue":c[1]||(c[1]=w=>d.item.sourceLocationId=w),onChange:c[2]||(c[2]=w=>v()),class:ee([o(U).getValidFeedbackCss(d.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(L,null,B(d.lookups.sourceLocations,w=>(t(),s("option",{value:w.id},f(w.name),9,Kh))),256))],34),[[ge,d.item.sourceLocationId]]),c[9]||(c[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(j).item.sourceLocationId.$error?(t(),s("div",Qh,[(t(!0),s(L,null,B(o(j).item.sourceLocationId.$errors,w=>(t(),s("div",{key:w.$uid},f(w.$message),1))),128))])):H("",!0)])]),e("div",Jh,[e("div",Xh,[N(e("select",{"onUpdate:modelValue":c[3]||(c[3]=w=>d.item.vodSourceId=w),onChange:l,class:ee([o(U).getValidFeedbackCss(d.item.vodSourceId),"form-select"]),id:"vodSourceId"},[(t(!0),s(L,null,B(d.lookups.vodSources,w=>(t(),s("option",{value:w.id},f(w.name),9,Zh))),256))],34),[[ge,d.item.vodSourceId]]),c[10]||(c[10]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(j).item.vodSourceId.$error?(t(),s("div",e_,[(t(!0),s(L,null,B(o(j).item.vodSourceId.$errors,w=>(t(),s("div",{key:w.$uid},f(w.$message),1))),128))])):H("",!0)])]),e("div",t_,[e("div",s_,[e("video",{id:`video-${d.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,o_)])])])]),e("div",a_,[e("button",{disabled:o(j).$dirty&&o(j).$invalid,onClick:c[4]||(c[4]=w=>n()),class:"btn btn-primary",type:"button"},c[11]||(c[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,l_),e("button",{onClick:c[5]||(c[5]=w=>i()),class:"btn btn-secondary ms-1"},c[12]||(c[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Hh))}},r_={class:"my-2"},i_={class:""},d_={class:"form-floating mb-2"},u_={id:"vodSourceTitle",class:"form-control-plaintext"},c_={class:"row"},m_={class:"col-12 col-md-4"},f_={class:"form-floating mb-2"},p_={id:"vodSourceVideoTitle",class:"form-control-plaintext"},v_={class:"col-12 col-md-8"},g_={class:"form-floating mb-2"},b_={id:"vodSourceVideoDesc",class:"form-control-plaintext"},y_={class:"mt-2"},$_={class:"row row-cols-1 row-cols-sm-3"},w_={class:"col"},h_={class:"form-floating mb-2"},__={id:"startOffsetMillis",class:"form-control-plaintext"},k_={class:"col"},S_={class:"form-floating mb-2"},T_={id:"endOffsetMillis",class:"form-control-plaintext"},I_={class:"col"},M_={class:"form-floating mb-2"},x_={id:"durationInMillis",class:"form-control-plaintext"},C_={class:"row row-cols-1 row-cols-sm-3"},V_={class:"col"},P_={class:"form-floating mb-2"},O_={id:"adBreaksDurationInMillis",class:"form-control-plaintext"},A_={class:"col"},U_={class:"form-floating mb-2"},L_={id:"totalProgramTemplateDurationInMillis",class:"form-control-plaintext"},D_={class:"row row-cols-1 row-cols-sm-3"},H_={class:"col"},E_={class:"form-floating mb-2"},q_={id:"dateScheduledStart",class:"form-control-plaintext"},B_={class:"col"},N_={class:"form-floating mb-2"},R_={id:"dateScheduledEnd",class:"form-control-plaintext"},F_={key:0,class:"col"},z_={class:"form-floating mb-2"},G_={id:"relativeProgram",class:"form-control-plaintext"},j_={key:0,class:"mt-2"},Y_={class:"table-responsive border"},W_={class:"table table-sm table-bordered1 mb-0"},K_={class:"text-center me-1"},Q_={class:"text-center"},J_={class:"text-center"},X_={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Z_={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},e2={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(a){const g=a,{moment:M,generateReturnUrl:O}=Ze();return me(()=>{g.item.value}),(T,D)=>{const A=te("router-link");return t(),s("div",r_,[e("div",null,[D[1]||(D[1]=e("h5",null," VOD ",-1)),e("div",i_,[e("div",d_,[e("div",u_,[F(A,{to:`${a.urlViewVodSource}/${a.item.vodSourceId}/${o(O)()}`,class:"link-offset-2"},{default:z(()=>[W(f(a.item.vodSource.name),1)]),_:1},8,["to"])]),D[0]||(D[0]=e("label",{for:"vodSourceTitle"},"Title",-1))])])]),e("div",null,[D[4]||(D[4]=e("h5",null," Video ",-1)),e("div",c_,[e("div",m_,[e("div",f_,[e("div",p_,[F(A,{to:`${a.urlViewVideo}/${a.item.vodSource.video.videoId}/${o(O)()}`,class:"link-offset-2"},{default:z(()=>[W(f(a.item.vodSource.video.title),1)]),_:1},8,["to"])]),D[2]||(D[2]=e("label",{for:"vodSourceVideoTitle"},"Title",-1))])]),e("div",v_,[e("div",g_,[e("div",b_,f(a.item.vodSource.video.description),1),D[3]||(D[3]=e("label",{for:"vodSourceVideoDesc"},"Description",-1))])])])]),e("div",y_,[D[13]||(D[13]=e("h5",null," Schedule ",-1)),e("div",$_,[e("div",w_,[e("div",h_,[e("div",__,f(o(M).utc(a.item.startOffsetMillis).format("HH:mm:ss")),1),D[5]||(D[5]=e("label",{for:"startOffsetMillis"},"Start Offset",-1))])]),e("div",k_,[e("div",S_,[e("div",T_,f(o(M).utc(a.item.endOffsetMillis).format("HH:mm:ss")),1),D[6]||(D[6]=e("label",{for:"endOffsetMillis"},"End Offset",-1))])]),e("div",I_,[e("div",M_,[e("div",x_,f(o(M).utc(a.item.durationInMillis).format("HH:mm:ss")),1),D[7]||(D[7]=e("label",{for:"durationInMillis"},"Clip Duration",-1))])])]),e("div",C_,[e("div",V_,[e("div",P_,[e("div",O_,f(o(M).utc(a.item.adBreaksDurationInMillis).format("HH:mm:ss")),1),D[8]||(D[8]=e("label",{for:"adBreaksDurationInMillis"},"Total Ad Breaks Duration",-1))])]),e("div",A_,[e("div",U_,[e("div",L_,f(o(M).utc(a.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),D[9]||(D[9]=e("label",{for:"totalProgramTemplateDurationInMillis"},"Total Program Duration",-1))])])]),e("div",D_,[e("div",H_,[e("div",E_,[e("div",q_,f(o(M).utc(a.item.dateScheduledStart).format("lll")),1),D[10]||(D[10]=e("label",{for:"dateScheduledStart"},"Program Start",-1))])]),e("div",B_,[e("div",N_,[e("div",R_,f(o(M).utc(a.item.dateScheduledEnd).format("lll")),1),D[11]||(D[11]=e("label",{for:"dateScheduledEnd"},"Program End",-1))])]),a.item.relativeProgram?(t(),s("div",F_,[e("div",z_,[e("div",G_,f(a.item.relativeProgram.name),1),D[12]||(D[12]=e("label",{for:"relativeProgram"},"Relative Program",-1))])])):H("",!0)])]),a.item.adBreaks.length?(t(),s("div",j_,[D[15]||(D[15]=e("h5",null," Ad Breaks ",-1)),e("div",Y_,[e("table",W_,[e("tbody",null,[D[14]||(D[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(L,null,B(a.item.adBreaks,(K,Y)=>(t(),s("tr",null,[e("td",K_,f(Y+1),1),e("td",Q_,f(o(M).utc(K.offsetMillis).format("HH:mm:ss")),1),e("td",J_,f(o(M).utc(K.durationInMillis).format("HH:mm:ss")),1),e("td",null,[F(A,{to:`${a.urlViewVodSource}/${K.vodSource.vodSourceId}/${o(O)()}`,class:"link-offset-2"},{default:z(()=>[K.vodSource.arn?(t(),s("span",X_)):(t(),s("span",Z_)),W(" "+f(K.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):H("",!0)])}}},t2={key:0,class:"dropdown"},s2={key:0,class:"fas fa-fw fa-play"},o2={key:1,class:"fas fa-fw fa-stop"},a2={class:"dropdown-menu"},l2={key:0},n2={key:1},r2={key:0},i2={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},d2={class:"nav-item",role:"presentation"},u2={class:"nav-item",role:"presentation"},c2={class:"nav-item",role:"presentation"},m2={class:"nav-item",role:"presentation"},f2={class:"nav-item",role:"presentation"},p2={class:"tab-content",id:"myTabContent"},v2={class:"mt-2"},g2={class:"row row-cols-1 row-cols-sm-3"},b2={class:"col"},y2={class:"form-floating mb-2"},$2={class:"col"},w2={class:"form-floating mb-2"},h2={class:"col"},_2={class:"form-floating mb-2"},k2={class:"d-flex flex-row justify-content-start align-items-center"},S2={key:0,class:"ms-2"},T2={class:"row row-cols-sm-2 mt-1"},I2={class:"col"},M2={class:"form-floating mb-2"},x2={class:"form-control-plaintext",readonly:""},C2={class:"col"},V2={class:"form-floating mb-2"},P2={class:"form-control-plaintext",readonly:""},O2={class:"mt-2"},A2={class:"d-flex flex-row justify-content-start align-items-center"},U2={class:"ms-2"},L2={key:0,class:"alert bg-warning mt-2"},D2={class:"table-responsive border mt-1"},H2={class:"table table-bordered1 mb-0"},E2={class:"badge bg-info"},q2={key:0,class:"text-wrap"},B2={key:1,class:"text-warning"},N2={key:0,class:"text-end"},R2={key:1,class:"text-end"},F2=["onClick"],z2={key:0},G2={colspan:"999"},j2={class:"d-flex flex-row justify-content-start align-items-center"},Y2={class:"ms-2"},W2={if:"item.playbackUrl"},K2=["onClick"],Q2={key:0,class:"table-responsive mt-2"},J2={class:"table table-borderless mb-0 table-sm"},X2={class:"align-middle1"},Z2={class:"badge bg-success"},ek={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},tk={class:"text-end"},sk=["onClick"],ok=["onClick"],ak={class:"mt-2"},lk={class:"table-responsive border"},nk={class:"table mb-0 table-sm table-bordered1"},rk={class:"align-middle1"},ik={class:"text-center me-1"},dk={class:"d-flex flex-row justify-content-start"},uk={class:""},ck={class:"mb-1"},mk=["src"],fk={class:"ms-2"},pk={key:0,class:"fas fa-fw fa-check-circle text-success"},vk={class:"fw-lighter small"},gk={class:"fw-lighter small"},bk={class:"text-center"},yk={class:"text-center"},$k={class:"text-end"},wk={class:"btn-group position-static"},hk=["onClick"],_k={key:0,class:"fas fa-fw fa-chevron-circle-up"},kk={key:1,class:"fas fa-fw fa-chevron-circle-down"},Sk={class:"dropdown-menu"},Tk=["onClick"],Ik={key:0},Mk=["onClick"],xk=["onClick"],Ck=["onClick"],Vk={key:0},Pk={colspan:"999"},Ok={class:"text-end mt-2 d-none"},Ak={class:"mt-2"},Uk={class:"text-end mb-2"},Lk={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},Dk={class:"col"},Hk={class:"card shadow-sm"},Ek=["id"],qk={class:"p-1"},Bk={class:"card-title1 text-center"},Nk={class:"col"},Rk={class:"card shadow-sm"},Fk=["id"],zk={class:"p-1"},Gk={class:"card-title1 text-center text-truncate"},jk={class:"small1"},Yk={class:"mt-2"},Wk={key:0,class:"fas fa-fw fa-check-circle text-success"},Kk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Qk={key:0,class:"fas fa-fw fa-check-circle text-success"},Jk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Xk={key:0,class:"fas fa-fw fa-check-circle text-success"},Zk={key:1,class:"fas fa-fw fa-times-circle text-warning"},e0={key:0,class:"fas fa-fw fa-check text-warning"},t0={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},s0={key:0,class:"fas fa-fw fa-check-circle text-success"},o0={key:1,class:"fas fa-fw fa-times-circle text-warning"},a0={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(a){const g=a,{appTitle:M,pageTitle:O,busy:T,isDirty:D,validations:A,infoMessage:K,warningMessage:Y,errorMessage:V,router:G,axios:se,utils:R,toasts:U,close:C,closeWithReturnUrl:h,generateReturnUrl:u,security:Q}=we({appTitle:"Arcadian-FAST",pageTitle:"View Channel"});xe("$config");const J=he();J.user;const d=be({user:J.user,item:null}),y=de(null),j=de(null),p=de(null),x=de(null),r=de(null),_=de(),i=Me(()=>d.item&&d.item.state==="RUNNING");me(async()=>{await b();const ce=R.getPageTab("channel")||"information-tab";n(ce)}),Ue(()=>{Ce()});const n=ce=>{R.setPageTab("channel",ce),_.value=ce,ce==="preview-tab"&&setTimeout(()=>{var E=document.getElementById("masonry");new rt(E,{})},2e3)},v=ce=>ce===_.value?"active":"",l=ce=>ce===_.value?"show active":"",b=async()=>{const ce=d;if(Ce(),!T.value)try{T.value=!0,V.value="",d.item=null;const E=`/api/v1/channels/${g.id}/`;await se.get(E).then($e=>{ce.item=$e.data,ce.item.outputs.forEach(Ee=>{Ee.playbackConfigurations.forEach(ie=>{if(Ee.playbackUrl){const Ae=Ee.playbackUrl,Ie=Ae.lastIndexOf("/"),lt=Ae.substring(0,Ie),Ye=Ae.substring(Ie+1),nt=ie.hlsConfigurationManifestEndpointPrefix;nt&&(ie.hlsPlaylist=nt+Ye)}})})})}catch(E){V.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{T.value=!1}},m=async()=>{if(confirm("Do you want to delete this Channel?")&&!T.value)try{T.value=!0,V.value="";const E=`/api/v1/channels/${g.id}/`;await se.delete(E).then($e=>{}),h(g.urlMain)}catch(E){V.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{T.value=!1}},c=async()=>{await b()},w=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!T.value){V.value=null;try{T.value=!0,await se.post(`/api/v1/channels/${g.id}/publish/`).then(E=>{U.success("Publish Channel","Channel was published.")}),T.value=!1,await c()}catch(E){V.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{T.value=!1}}},k=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!T.value){V.value=null;try{T.value=!0,await se.delete(`/api/v1/channels/${g.id}/unpublish/`).then(E=>{U.warning("Remove Channel","Channel was removed.")}),T.value=!1,await c()}catch(E){V.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{T.value=!1}}},$=()=>{y.value.open(g.id)},q=ce=>{ce.outputType==="HLS"&&j.value.open(ce.channelOutputId,ce.playbackUrl)},S=()=>{p.value.open(g.id)},P=ce=>{x.value.open(ce)},re=(ce,E)=>{r.value.open(g.id,ce,E)},fe=async ce=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!T.value){V.value=null;try{T.value=!0,await se.delete(`/api/v1/programs/${ce}/`).then($e=>{U.success("Delete Program","Program was deleted..",{async onClose(){}})}),T.value=!1,await c()}catch($e){V.value=R.getErrorMessageAsHtml($e),window.scrollTo(0,0)}finally{T.value=!1}}},Z=async ce=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!T.value){V.value=null;try{T.value=!0,await se.delete(`/api/v1/channelOutputs/${ce}/`).then($e=>{U.success("Delete Channel Output","Channel output was deleted..")}),T.value=!1,await c()}catch($e){V.value=R.getErrorMessageAsHtml($e),window.scrollTo(0,0)}finally{T.value=!1}}},I=async ce=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!T.value){V.value=null;try{T.value=!0,await se.post(`/api/v1/programs/${ce}/publish/`).then($e=>{U.success("Publish Program","Program was published..",{async onClose(){}})}),T.value=!1,await c()}catch($e){V.value=R.getErrorMessageAsHtml($e),window.scrollTo(0,0)}finally{T.value=!1}}},ue=async ce=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!T.value){V.value=null;try{T.value=!0,await se.delete(`/api/v1/programs/${ce}/unpublish/`).then($e=>{U.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),T.value=!1,await c()}catch($e){V.value=R.getErrorMessageAsHtml($e),window.scrollTo(0,0)}finally{T.value=!1}}},ae=async ce=>{if(!T.value){V.value=null;try{T.value=!0,await se.put(`/api/v1/channels/${g.id}/change-state/${ce}`).then(E=>{U.success("Update Channel state","Change state was updated")}),T.value=!1,ce==="STOPPED"&&_.value==="preview-tab"&&(Ce(),n("information-tab")),await c()}catch(E){V.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{T.value=!1}}},ne=async ce=>{if(!T.value)try{T.value=!0,V.value="",await se.post(`/api/v1/channelOutputs/${ce}/playback/publish/`).then(E=>{U.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),T.value=!1,await c()}catch(E){V.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{T.value=!1}},pe=async ce=>{if(confirm("Do you want to remove this Playback Configuration?")&&!T.value)try{T.value=!0,V.value="",await se.delete(`/api/v1/channelOutputs/${ce}/playback/`).then($e=>{U.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),T.value=!1,await c()}catch($e){V.value=R.getErrorMessageAsHtml($e),window.scrollTo(0,0)}finally{T.value=!1}},Ve=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ce=d.item.outputs;Ce(),ce.forEach(E=>{var $e=document.getElementById(`video-${E.channelOutputId}`);E.hls&&E.hls.destroy(),E.hls=R.createHlsStream($e,E.playbackUrl,"Main playlist started."),$e.play(),E.playbackConfigurations.forEach(He=>{if(He.hls&&He.hls.destroy(),He.arn){var Ee=document.getElementById(`video-${He.channelOutputPlaybackConfigurationId}`);try{He.hls=R.createHlsStream(Ee,He.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Ee.play()}catch(ie){U.error("Failed Stream SSAI Playlist",ie)}}})}),setTimeout(()=>{var E=document.getElementById("masonry");new rt(E,{})},2e3)}},Ce=()=>{d.item&&d.item.outputs&&d.item.outputs.forEach(E=>{E.hls&&(E.hls.detachMedia(),E.hls.destroy(),delete E.hls),E.playbackConfigurations.forEach($e=>{$e.hls&&($e.hls.detachMedia(),$e.hls.destroy(),delete $e.hls)})})};return(ce,E)=>{const $e=te("router-link"),He=te("PageHeader"),Ee=te("PageBody");return t(),ve(ye,null,{default:z(()=>[e("div",null,[F(He,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(O)},{default:z(()=>[e("button",{onClick:E[0]||(E[0]=ie=>m()),class:"me-2 btn btn-danger"},E[21]||(E[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),d.item?(t(),s("div",t2,[e("button",{class:ee([[i.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[i.value?(t(),s("span",s2)):(t(),s("span",o2)),W(" "+f(d.item.state),1)],2),e("ul",a2,[d.item.arn?(t(),s("li",l2,[i.value?(t(),s("button",{key:0,onClick:E[1]||(E[1]=ie=>ae("STOPPED")),class:"dropdown-item"},E[22]||(E[22]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),W("Stop ")]))):(t(),s("button",{key:1,onClick:E[2]||(E[2]=ie=>ae("RUNNING")),class:"dropdown-item"},E[23]||(E[23]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),W("Start ")])))])):H("",!0),i.value?H("",!0):(t(),s("li",n2,[d.item.arn?(t(),s("button",{key:0,onClick:E[3]||(E[3]=ie=>k()),class:"dropdown-item"},E[24]||(E[24]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),W("Unpublish ")]))):(t(),s("button",{key:1,onClick:E[4]||(E[4]=ie=>w()),class:"dropdown-item"},E[25]||(E[25]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),W("Publish ")])))])),d.item.arn?(t(),s(L,{key:2},[E[27]||(E[27]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:E[5]||(E[5]=ie=>w()),class:"dropdown-item"},E[26]||(E[26]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),W("Republish ")]))])],64)):H("",!0)])])):H("",!0),F($e,{to:`${a.urlSchedulePrograms}/${a.id}`,class:"ms-2 btn btn-outline-primary"},{default:z(()=>E[28]||(E[28]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:E[6]||(E[6]=ie=>c()),class:"ms-2 btn btn-secondary"},E[29]||(E[29]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:E[7]||(E[7]=ie=>o(h)(g.urlMain)),class:"btn btn-secondary ms-1"},E[30]||(E[30]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(Ee,{errorMessage:o(V)},{default:z(()=>[d.item?(t(),s("div",r2,[e("ul",i2,[e("li",d2,[e("button",{onClick:E[8]||(E[8]=ie=>n("information-tab")),class:ee([v("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},E[31]||(E[31]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),W("Information ")]),2)]),e("li",u2,[e("button",{onClick:E[9]||(E[9]=ie=>n("outputPlayback-tab")),class:ee([v("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},E[32]||(E[32]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),W("Output/Playback ")]),2)]),e("li",c2,[e("button",{onClick:E[10]||(E[10]=ie=>n("programs-tab")),class:ee([v("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},E[33]||(E[33]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),W("Programs ")]),2)]),e("li",m2,[e("button",{onClick:E[11]||(E[11]=ie=>n("preview-tab")),class:ee([[i.value?"":"disabled",v("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},E[34]||(E[34]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),W("Preview ")]),2)]),e("li",f2,[e("button",{onClick:E[12]||(E[12]=ie=>n("checklist-tab")),class:ee([v("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},E[35]||(E[35]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),W("Checklist ")]),2)])]),e("div",p2,[e("div",{class:ee([l("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",v2,[e("div",g2,[e("div",b2,[e("div",y2,[N(e("input",{"onUpdate:modelValue":E[13]||(E[13]=ie=>d.item.name=ie),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[X,d.item.name]]),E[36]||(E[36]=e("label",{for:"name"},"Name",-1))])]),e("div",$2,[e("div",w2,[N(e("input",{"onUpdate:modelValue":E[14]||(E[14]=ie=>d.item.playbackMode=ie),type:"text",class:"form-control-plaintext",id:"playbackMode",readonly:""},null,512),[[X,d.item.playbackMode]]),E[37]||(E[37]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",h2,[e("div",_2,[N(e("input",{"onUpdate:modelValue":E[15]||(E[15]=ie=>d.item.tier=ie),type:"text",class:"form-control-plaintext",id:"tier",readonly:""},null,512),[[X,d.item.tier]]),E[38]||(E[38]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",k2,[E[40]||(E[40]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),i.value?H("",!0):(t(),s("div",S2,[e("button",{onClick:E[16]||(E[16]=ie=>re(d.item.fillerSlateSourceLocation.sourceLocationId,d.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},E[39]||(E[39]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",T2,[e("div",I2,[e("div",M2,[e("div",x2,[F($e,{to:`${a.urlViewSourceLocation}/${d.item.fillerSlateSourceLocation.sourceLocationId}/${o(u)()}`,class:ee([[d.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName"},{default:z(()=>[W(f(d.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"])]),E[41]||(E[41]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",C2,[e("div",V2,[e("div",P2,[F($e,{to:`${a.urlViewVodSource}/${d.item.fillerSlateVodSource.vodSourceId}/${o(u)()}`,class:ee([[d.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:z(()=>[W(f(d.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"])]),E[42]||(E[42]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:ee([l("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",O2,[e("div",null,[e("div",A2,[E[44]||(E[44]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",U2,[e("button",{onClick:E[17]||(E[17]=ie=>S()),class:"btn btn-outline-primary btn-sm"},E[43]||(E[43]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),d.item.outputs.length<=0?(t(),s("div",L2,E[45]||(E[45]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),W("Channel Output is required ")]))):H("",!0),e("div",D2,[e("table",H2,[E[55]||(E[55]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.outputs,(ie,Ae)=>(t(),s(L,{key:ie.channelOutputId},[e("tr",null,[e("td",null,f(Ae+1),1),e("td",null,[e("div",null,f(ie.manifestName),1),e("div",null,[e("span",E2,f(ie.outputType),1)])]),e("td",null,[e("div",null,[F($e,{to:`${a.urlViewSourceGroup}/${ie.sourceGroupId}/${o(u)()}`,class:"link-offset-2",tag:"button"},{default:z(()=>[W(f(ie.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[ie.playbackUrl?(t(),s("div",q2,f(ie.playbackUrl),1)):(t(),s("div",B2,E[46]||(E[46]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),W("Publish channel to get the playback url ")])))]),i.value?(t(),s("td",N2)):(t(),s("td",R2,[e("button",{onClick:Ie=>Z(ie.channelOutputId),class:"btn btn-outline-warning btn-sm"},E[47]||(E[47]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,F2)]))]),ie.playbackUrl?(t(),s("tr",z2,[E[52]||(E[52]=e("td",null,null,-1)),E[53]||(E[53]=e("td",null,null,-1)),E[54]||(E[54]=e("td",null,null,-1)),e("td",G2,[e("div",j2,[E[49]||(E[49]=e("h5",null,[W("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",Y2,[e("div",W2,[e("button",{onClick:Ie=>q(ie),class:"btn btn-outline-primary btn-sm"},E[48]||(E[48]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,K2)])])]),ie.playbackConfigurations.length>0?(t(),s("div",Q2,[e("table",J2,[e("tbody",null,[(t(!0),s(L,null,B(ie.playbackConfigurations,(Ie,lt)=>(t(),s("tr",X2,[e("td",null,f(lt+1),1),e("td",null,[e("span",Z2,f(Ie.name),1),e("div",ek,[e("span",null,f(Ie.adDecisionServerUrl),1)])]),e("td",tk,[Ie.arn?H("",!0):(t(),s("button",{key:0,onClick:Ye=>ne(Ie.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},E[50]||(E[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,sk)),e("button",{onClick:Ye=>pe(Ie.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},E[51]||(E[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ok)])]))),256))])])])):H("",!0)])])):H("",!0)],64))),128))]),_:1},512),[[Se,d.item.outputs.length>0]])])])])])],2),e("div",{class:ee([l("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",ak,[e("div",lk,[e("table",nk,[E[62]||(E[62]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),N(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(L,null,B(d.item.programs,(ie,Ae)=>(t(),s(L,{key:ie.programId},[e("tr",rk,[e("td",ik,f(Ae+1),1),e("td",null,[e("div",dk,[e("div",uk,[ie.vodSource.video.thumbnails.length>0?(t(!0),s(L,{key:0},B(ie.vodSource.video.thumbnails,Ie=>(t(),s("div",ck,[e("img",{src:Ie.url,class:"img-fuild border",width:"128"},null,8,mk)]))),256)):H("",!0)]),e("div",fk,[e("div",null,[ie.arn?(t(),s("span",pk)):H("",!0),e("span",null,f(ie.name),1)]),e("div",null,[e("span",vk,f(o(R).moment.utc(ie.dateScheduledStart).calendar())+" (utc)",1)]),e("div",null,[e("span",gk,f(o(R).moment(ie.dateScheduledStart).calendar())+" (local)",1)])])])]),e("td",bk,f(o(R).moment.utc(ie.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",yk,f(ie.adBreaks.length),1),e("td",$k,[e("div",wk,[e("button",{onClick:Ie=>ie.expand=!ie.expand,type:"button",class:ee([[ie.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[ie.expand?(t(),s("span",_k)):(t(),s("span",kk))],10,hk),E[60]||(E[60]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",Sk,[e("li",null,[e("button",{onClick:Ie=>P(ie.programId),class:"dropdown-item"},E[56]||(E[56]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),W("Edit ")]),8,Tk)]),ie.arn?(t(),s("li",Ik,[e("button",{onClick:Ie=>ue(ie.programId),class:"dropdown-item"},E[57]||(E[57]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),W("Unpublish ")]),8,Mk)])):(t(),s(L,{key:1},[e("li",null,[e("button",{onClick:Ie=>I(ie.programId),class:"dropdown-item"},E[58]||(E[58]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),W("Publish ")]),8,xk)]),e("li",null,[e("button",{onClick:Ie=>fe(ie.programId),class:"dropdown-item"},E[59]||(E[59]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),W("Remove ")]),8,Ck)])],64))])])])]),ie.expand?(t(),s("tr",Vk,[E[61]||(E[61]=e("td",null,null,-1)),e("td",Pk,[F(e2,{item:ie,urlViewVideo:a.urlViewVideo,urlViewVodSource:a.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):H("",!0)],64))),128))]),_:1},512),[[Se,d.item.programs.length>0]])])]),e("div",Ok,[e("button",{onClick:E[18]||(E[18]=ie=>$()),class:"btn btn-outline-primary"},E[63]||(E[63]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),W("Program ")]))])])],2),i.value?(t(),s("div",{key:0,class:ee([l("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",Ak,[e("div",Uk,[d.item.outputs[0].hls?(t(),s("button",{key:1,onClick:E[20]||(E[20]=ie=>Ce()),class:"btn btn-primary"},E[65]||(E[65]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:E[19]||(E[19]=ie=>Ve()),class:"btn btn-primary"},E[64]||(E[64]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",Lk,[(t(!0),s(L,null,B(d.item.outputs,ie=>(t(),s(L,null,[e("div",Dk,[e("div",Hk,[e("video",{id:`video-${ie.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,Ek),e("div",qk,[e("div",Bk,f(ie.manifestName),1)])])]),(t(!0),s(L,null,B(ie.playbackConfigurations,(Ae,Ie)=>(t(),s("div",Nk,[e("div",Rk,[e("video",{id:`video-${Ae.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,Fk),e("div",zk,[e("div",Gk,[W(" #"+f(Ie+1)+" ",1),e("span",jk,f(Ae.name),1)])])])]))),256))],64))),256))])])],2)):H("",!0),e("div",{class:ee([l("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Yk,[E[71]||(E[71]=W(" Checklist ")),e("ul",null,[e("li",null,[d.item.fillerSlateSourceLocation.arn?(t(),s("span",Wk)):(t(),s("span",Kk)),E[66]||(E[66]=W(" Filler Slate Source Location "))]),e("li",null,[d.item.fillerSlateVodSource.arn?(t(),s("span",Qk)):(t(),s("span",Jk)),E[67]||(E[67]=W(" Filler Slate VOD Source "))]),e("li",null,[d.item.outputs.length>0?(t(),s("span",Xk)):(t(),s("span",Zk)),E[69]||(E[69]=W(" Outputs ")),e("ul",null,[e("li",null,[d.item.outputs.some(ie=>ie.playbackConfigurations.length>0)?(t(),s("span",e0)):(t(),s("span",t0)),E[68]||(E[68]=W(" Ad Insertion setup "))])])]),e("li",null,[d.item.programs.length>0?(t(),s("span",s0)):(t(),s("span",o0)),E[70]||(E[70]=W(" Programs "))])])])],2)])])):H("",!0)]),_:1},8,["errorMessage"]),F(Fw,{ref_key:"modalAddProgram",ref:y,onRefresh:c},null,512),F(fh,{ref_key:"modalAddPlaybackConfiguration",ref:j,onRefresh:c},null,512),F(Dh,{ref_key:"modalAddChannelOutput",ref:p,onRefresh:c},null,512),F(vt,{ref_key:"modalEditProgram",ref:x,onOnClose:c},null,512),F(n_,{ref_key:"modalEditFillerSlate",ref:r,onRefresh:c},null,512)])]),_:1})}}},l0={path:"/",component:Pa,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Za},{path:"videos",children:[{path:"",component:Jn},{path:"view/:id",component:Lr,props:!0},{path:"add",component:Ul},{path:"edit/:id",component:gn,props:!0}]},{path:"source-groups",children:[{path:"add",component:qr},{path:"edit/:id",component:ri,props:!0},{path:"",component:vi},{path:"view/:id",component:Vi,props:!0}]},{path:"source-locations",children:[{path:"add",component:Di},{path:"edit/:id",component:qi,props:!0},{path:"",component:Qi},{path:"view/:id",component:bd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:Au},{path:"edit/:id",component:nc,props:!0},{path:"",component:Hc},{path:"view/:id",component:_f,props:!0}]},{path:"channels",children:[{path:"add",component:$1},{path:"edit/:id",component:_1,props:!0},{path:"",component:O1},{path:"schedule-programs/:id",component:q$,props:!0},{path:"view/:id",component:a0,props:!0}]},{path:"program-templates",children:[{path:"add",component:lv},{path:"edit/:id",component:Kv,props:!0},{path:"",component:vg},{path:"view/:id",component:Xg,props:!0}]}]},at=yt({history:$t("/"),linkActiveClass:"active",routes:[{...go},{path:"/administrator",redirect:"/"},{...l0}]});at.beforeEach(async a=>{St().clear();var M=a.meta;const O=["/accounts/login","/accounts/loginRedirect","/accounts/logout","/accounts/register"],T=M.requiresAuth&&!O.includes(a.path),D=he(),A=D.user;if(T&&!A)return D.returnUrl=a.fullPath,{path:"/accounts/login",query:{returnUrl:encodeURIComponent(a.fullPath)}};var K=a.meta.roles;if(K&&!D.user.roles.some(Y=>K.includes(Y)))return alert("You are not authorized to acccess this page."),{path:"/accounts/login/",query:{returnUrl:encodeURIComponent(a.fullPath)}}});const n0={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const a=this,M=new wt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();M.on("onNotificationCreated",function(O){let T=O.content;O.notificationEntityClassText==="Deposit"&&(T+="<br/>",T+=`<a href="${a.urlViewDeposit}${O.referenceId}">Click ${O.notificationEntityClassText} here</a>`),O.notificationEntityClassText==="Withdraw"&&(T+="<br/>",T+=`<a href="${a.urlViewWithdraw}${O.referenceId}">Click ${O.notificationEntityClassText} here</a>`),O.notificationEntityClassText==="ManualModeOfPayment"&&(T+="<br/>",T+=`<a href="${a.urlViewManualModeOfPayment}${O.referenceId}">Click ${O.notificationEntityClassText} here</a>`),O.iconClass;let D="secondary";switch(O.notificationType){case 1:D="success";break;case 3:D="info";break;case 3:D="success";break;case 4:D="info";break;case 5:D="warning";break;case 6:D="error";break}a.$toast[D](O.subject,T,{timeOut:1e4});const A=O.subject,V={body:T,icon:"/img/192x102.png"};new Notification(A,V)}),M.on("jobUpdated",function(O){a.$bus.$emit("event:job-updated",O)}),await M.start().then(function(){}).catch(function(O){})}}};function r0(a,g,M,O,T,D){return t(),s("div")}const i0=Pe(n0,[["render",r0],["__scopeId","data-v-5b4a9fa2"]]),d0={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},u0={class:"container"},c0={class:"col-md"},m0={class:"navbar-brand mb-0 ms-1 align-middle"},f0={class:"col-md-auto"},p0={class:"d-flex flex-row align-items-center justify-content-end"},v0={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(a){return(g,M)=>(t(),ve(ye,null,{default:z(()=>[e("nav",d0,[e("div",u0,[e("div",c0,[Be(g.$slots,"title",{},()=>[e("a",m0,[e("i",{class:ee([a.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,f(a.pageTitle),1)])],!0)]),e("div",f0,[e("div",p0,[Be(g.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},g0=Pe(v0,[["__scopeId","data-v-eb40af38"]]),b0={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},y0=["innerHTML"],$0={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},w0={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(a){return(g,M)=>(t(),ve(ye,null,{default:z(()=>[Be(g.$slots,"default",{},()=>[a.errorMessage?(t(),s("div",b0,[M[0]||(M[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),W("Error ")],-1)),e("div",{innerHTML:a.errorMessage},null,8,y0)])):H("",!0),a.vuelidate&&a.vuelidate.$error?(t(),s("div",$0,[M[1]||(M[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),W("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,B(a.vuelidate.$errors,O=>(t(),s("li",{key:O.$uid},[O.$validator==="$each"?(t(),s(L,{key:0},[W(" Check errors in '"+f(O.$property)+"' ",1)],64)):(t(),s(L,{key:1},[W(f(O.$message),1)],64))]))),128))])])):H("",!0)])]),_:3}))}},h0={class:"py-3 container flex-grow-1 overflow-y-auto"},_0={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(a){return(g,M)=>{const O=te("PageMessages");return t(),ve(ye,null,{default:z(()=>[e("div",h0,[F(O,{errorMessage:a.errorMessage,vuelidate:a.vuelidate},null,8,["errorMessage","vuelidate"]),Be(g.$slots,"default")])]),_:3})}}},k0={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const a=this;a.busy||(document.activeElement&&document.activeElement.blur(),await a.search(1))},async moveFirst(){const a=this;if(a.busy)return;a.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await a.search(1))},async moveLast(){const a=this;if(a.busy)return;const g=a.filter;g.pageIndex!==g.totalPages&&(document.activeElement&&document.activeElement.blur(),await a.search(g.totalPages))},async move(a){const g=this;if(g.busy)return;const M=g.filter,O=M.pageIndex+a;O>=0&&O<=M.totalPages&&(document.activeElement&&document.activeElement.blur(),await g.search(O))}}},S0={class:"mt-2"},T0={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},I0={key:0,class:"col-sm order-2 order-sm-1"},M0={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},x0={class:"me-1 fw-bold"},C0={class:"fw-bold"},V0={class:"ms-1"},P0={class:"col-sm-auto ms-auto order-1 order-sm-2"},O0={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},A0={key:0,class:"page-item"},U0={key:1,class:"page-item"},L0={key:2,class:"page-item"},D0={class:"page-item active"},H0={class:"page-link"},E0={key:3,class:"page-item"},q0={key:4,class:"page-item"},B0={key:5,class:"page-item"},N0={key:1,class:"text-info font-weight-bold text-center"},R0={key:0},F0={key:1};function z0(a,g,M,O,T,D){return t(),s("div",S0,[M.filter.items.length?(t(),s("div",T0,[M.showPerPage?(t(),s("div",I0,[e("div",M0,[e("div",null,[e("span",x0,f(M.filter.totalCount),1),g[8]||(g[8]=W("records in ")),e("span",C0,f(M.filter.totalPages),1),g[9]||(g[9]=W(" page(s) "))]),e("div",V0,[N(e("select",{"onUpdate:modelValue":g[0]||(g[0]=A=>M.filter.pageSize=A),onChange:g[1]||(g[1]=(...A)=>D.changePagination&&D.changePagination(...A)),class:"form-select form-select-sm me-1"},g[10]||(g[10]=[Je('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ge,M.filter.pageSize]])]),g[11]||(g[11]=e("div",{class:"ms-1"},"per page",-1))])])):H("",!0),e("div",P0,[e("ul",O0,[M.filter.pageIndex!==1?(t(),s("li",A0,[e("button",{class:"page-link","aria-label":"Previous",onClick:g[2]||(g[2]=(...A)=>D.moveFirst&&D.moveFirst(...A))},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):H("",!0),M.filter.pageIndex>2?(t(),s("li",U0,[e("button",{class:"page-link",onClick:g[3]||(g[3]=A=>D.move(-2))},f(M.filter.pageIndex-2),1)])):H("",!0),M.filter.pageIndex>1?(t(),s("li",L0,[e("button",{class:"page-link",onClick:g[4]||(g[4]=A=>D.move(-1))},f(M.filter.pageIndex-1),1)])):H("",!0),e("li",D0,[e("span",H0,f(M.filter.pageIndex),1)]),M.filter.pageIndex<M.filter.totalPages?(t(),s("li",E0,[e("button",{class:"page-link",onClick:g[5]||(g[5]=A=>D.move(1))},f(M.filter.pageIndex+1),1)])):H("",!0),M.filter.pageIndex<M.filter.totalPages-1?(t(),s("li",q0,[e("button",{class:"page-link",onClick:g[6]||(g[6]=A=>D.move(2))},f(M.filter.pageIndex+2),1)])):H("",!0),M.filter.pageIndex<M.filter.totalPages?(t(),s("li",B0,[e("button",{class:"page-link","aria-label":"Next",onClick:g[7]||(g[7]=(...A)=>D.moveLast&&D.moveLast(...A))},g[13]||(g[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):H("",!0)])])])):(t(),s("div",N0,[M.noRecords?(t(),s("div",R0,f(M.noRecords),1)):(t(),s("div",F0,"No record(s) found."))]))])}const G0=Pe(k0,[["render",z0]]),j0={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let a=this;if(!a.enabled)return;let g=a.filter;g.sortField===a.field?g.sortOrder===0?g.sortField=null:g.sortOrder=g.sortOrder===0?1:0:(g.sortField=a.field,g.sortOrder=1),a.$emit("search")}}},Y0={class:"align-self-center"};function W0(a,g,M,O,T,D){return t(),s("div",{onClick:g[0]||(g[0]=(...A)=>D.click&&D.click(...A)),class:"d-flex flex-row justify-content-start align-content-center",style:ct({cursor:M.enabled?"pointer":""})},[Be(a.$slots,"default"),e("span",Y0,[M.showSort?(t(),s("span",{key:0,class:ee([{"fa-sort text-gray-500":!D.currentSortField(),"fa-sort-up":D.currentSortField()&&D.sortUp(),"fa-sort-down":D.currentSortField()&&!D.sortUp()},"fas fa-fw mr-1"])},null,2)):H("",!0)])],4)}const K0=Pe(j0,[["render",W0]]),Q0={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(a){const g=this;g.setSelected(a),g.$emit("onSelectedRow",a)}}},J0={class:"table-responsive m-0"},X0=["href"],Z0={key:1},eS=["onClick"],tS={class:"form-group row no-gutters"},sS={class:"col-5 col-form-label"},oS={class:"col align-self-center"},aS=["href"],lS={key:1};function nS(a,g,M,O,T,D){return t(),s("div",null,[e("div",J0,[e("table",{class:ee(["table table-hover d-none d-md-table card",M.tableCss])},[e("thead",null,[Be(a.$slots,"header",{},()=>[g[0]||(g[0]=e("th",null,"#",-1)),(t(!0),s(L,null,B(M.header.columns,A=>(t(),s("th",null,f(A.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(L,null,B(M.items,(A,K)=>Be(a.$slots,"table-row",{key:`row1-${A[M.header.key]}`,item:A,index:K},()=>[e("td",null,f(M.getRowNumber(K)),1),(t(!0),s(L,null,B(M.header.columns,Y=>(t(),s("td",null,[Y.href?(t(),s("a",{key:0,href:Y.href(A[M.header.key]),class:"font-weight-bold"},f(A[Y.field]),9,X0)):(t(),s("span",Z0,f(A[Y.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:ee(["d-block d-md-none",M.rowCss])},[(t(!0),s(L,null,B(M.items,(A,K)=>(t(),s("div",{key:`row2-${A[M.header.key]}`,onClick:Y=>D.onSelectedRow(A),class:"border"},[e("div",{class:ee(["p-2",{"b-left":M.isSelected(A)}])},[Be(a.$slots,"table-list",{item:A,index:K},()=>[(t(!0),s(L,null,B(M.header.columns,Y=>(t(),s("div",tS,[e("label",sS,f(Y.title),1),e("div",oS,[Y.href?(t(),s("a",{key:0,href:Y.href(A[M.header.key]),class:"font-weight-bold"},f(A[Y.field]),9,aS)):(t(),s("span",lS,f(A[Y.field]),1))])]))),256))],!0)],2)],8,eS))),128))],2)])}const rS=Pe(Q0,[["render",nS],["__scopeId","data-v-65929213"]]),Oe=ht(kt);Oe.use(_t());Oe.use(at);Oe.component("m-notification",i0);Oe.component("m-pagination",G0);Oe.component("sort-field",K0);Oe.component("table-list",rS);Oe.component("Toasts",Ma);Oe.component("PageHeader",g0);Oe.component("PageMessages",w0);Oe.component("PageBody",_0);const iS="https://sonyfastpoc.azurewebsites.net/",dS="Arcadian-FAST",uS=void 0,cS={API_URL:iS,appName:dS,tenantId:uS};Oe.provide("$config",cS);Oe.provide("$bus",tt);Oe.mount("#app");
