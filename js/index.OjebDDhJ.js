import{o as t,c as ue,r as Z,h as dt,d as Qe,a as re,e as Ne,b as s,f as e,g as q,w as L,i as G,t as b,F as B,j as z,k as H,l as ie,m as Fe,n as he,p as Xe,q as Re,u as ut,s as Ze,P as et,v as ce,x as ee,y as te,z as $e,T as me,A as o,B as ct,C,D as Y,E as mt,G as ne,H as tt,I as _e,J as Oe,K as Te,L as we,M as Pe,N as fe,O as ke,Q as xe,R as Ue,S as Ke,U as ft,V as pt,W as vt,X as Ae,Y as gt,Z as bt}from"./vendor-Cu6xlJED-chunk.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))_(h);new MutationObserver(h=>{for(const R of h)if(R.type==="childList")for(const T of R.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&_(T)}).observe(document,{childList:!0,subtree:!0});function w(h){const R={};return h.integrity&&(R.integrity=h.integrity),h.referrerPolicy&&(R.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?R.credentials="include":h.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function _(h){if(h.ep)return;h.ep=!0;const R=w(h);fetch(h.href,R)}})();const yt={__name:"App",setup(d){return(f,w)=>{const _=Z("router-view");return t(),ue(_)}}};function st(){const d=N=>{var i;let Q=N,M=Q.response,D="";if(!Q.response)return N.message;if(M.status===500){if(typeof M.data=="string")return M.data;if(M.data.content)return M.data.content;if(M.data.detail)return M.data.detail}if(M.status===401){const S=`${window.location.pathname}${window.location.search}`;D=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(S)}`}'>here</a> to login.`}else if(M.status===400){let S=Q.response.data.errors;D=Q.response.data.title||Q.response.data,S&&(D+="<ul>");for(let $ in S){let W=S[$];for(let X in S[$]){let r=W[X];D+=`<li>${r}</li>`}}S&&(D+="</ul>"),D||(D=Q.message),D&&D.content&&(D=D.content)}else M.status===404?D=((i=M==null?void 0:M.data)==null?void 0:i.title)||(M==null?void 0:M.data)||"Record not found.":typeof M.data=="string"&&(D=Q.message,D===""&&(D=`Error <b>Http ${M.status}</b>.<br/>Please contact the System Administrator.`));return D},f=N=>JSON.parse(JSON.stringify(N)),w=N=>{if(typeof N!="number")return N;var Q=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return Q.format(N)},_=(N,Q,M)=>{const i={value:Q,expiry:new Date().getTime()+M};debugger;localStorage.setItem(N,JSON.stringify(i))},h=N=>{debugger;const Q=localStorage.getItem(N);if(!Q)return null;const M=JSON.parse(Q);return new Date().getTime()>M.expiry?(localStorage.removeItem(N),null):M.value},R="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:d,clone:f,toCurrency:w,moment:dt,localStorageSetWithExpiry:_,localStorageGetWithExpiry:h,setPageTab:(N,Q)=>{var M=localStorage.getItem(R);M?M=JSON.parse(M):M={},M[N]=Q,localStorage.setItem(R,JSON.stringify(M))},getPageTab:N=>{var Q=localStorage.getItem(R);return Q?Q=JSON.parse(Q):Q={},Q[N]},createHlsStream:(N,Q,M)=>{var D=new Hls;return D.on(Hls.Events.MEDIA_ATTACHED,function(){}),D.on(Hls.Events.MANIFEST_PARSED,function(i,S){console.log("manifest loaded, found "+S.levels.length+" quality level"),N.play()}),D.on(Hls.Events.ERROR,function(i,S){if(S.fatal)switch(S.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),D.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",S);break;default:D.destroy();break}}),D.loadSource(Q),D.attachMedia(N),D},isValidTime:N=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(N)}}const $t=st(),ot=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(ot.exp*1e3),ht=wt.isAfter()?ot:null,ye=Qe({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(d){try{this.user=d,localStorage.setItem("user",JSON.stringify(d))}catch(f){debugger;alert(f)}},logout(){this.user=null,localStorage.removeItem("user"),nt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),kt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(kt));const _t={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},ze=_t,at=Qe("msal",()=>{const d=re({auth:{clientId:ze.VITE_AUTH_CLIENT_ID,authority:ze.VITE_AUTH_AUTHORITY_URL,redirectUri:ze.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),f=re("");return{msalConfig:d,accessToken:f,setAccessToken:_=>{f.value=_}}}),Ge={$on:(...d)=>Ne.on(...d),$once:(...d)=>Ne.once(...d),$off:(...d)=>Ne.off(...d),$emit:(...d)=>Ne.emit(...d)};function St(){const d=(R,T,K,F)=>{Ge.$emit("toast-message",{title:R,message:T,type:K,options:F})};return{success:(R,T,K={})=>{d(R,T,"success",K)},warning:(R,T,K={})=>{d(R,T,"warning",K)},info:(R,T,K={})=>{d(R,T,"info",K)},error:(R,T,K={})=>{d(R,T,"danger",K)}}}const Me=(d,f)=>{const w=d.__vccOpts||d;for(const[_,h]of f)w[_]=h;return w},Tt={data(){return{notifications:[],messages:[]}},async created(){const d=this;d.$bus.$on("event:notification-received",()=>{d.getUnreadNotifications()}),d.$bus.$on("event:notification-marked-as-read",f=>{d.notifications.some(_=>_.notificationId===f)&&d.getUnreadNotifications()}),d.$bus.$on("event:notification-removed",f=>{d.notifications.some(_=>_.notificationId===f)&&d.getUnreadNotifications()}),d.$bus.$on("event:chat-marked-as-read",d.onChatMarkedAsRead),d.$bus.$on("event:chat-message-received",d.onChatMessageReceived)},async mounted(){const d=this,f=d.$refs.notifications,w=d.$refs.messages;f&&f.offsetParent,w&&w.offsetParent&&await d.getUnreadChats()},methods:{async logout(){const d=this;try{await d.$util.axios.post("/api/accounts/logout").then(f=>{const w="/";d.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){d.$util.href(w)}})})}catch(f){d.$util.handleError(f)}},async onChatMarkedAsRead(d){let f=this,w=f.messages.find(_=>_.chatId===d);if(w){let _=f.messages.indexOf(w);f.messages.splice(_,1)}},async onChatMessageReceived(d){let f=this,w=f.messages.find(h=>h.chatId===d.chatId);if(w)w.lastMessageText=d.content;else{var _={chatId:d.chatId,isRead:!1,lastDateSent:d.dateSent,lastMessageText:d.content,senderFirstLastName:`${d.sender.firstName} ${d.sender.lastName}`,senderInitials:d.sender.initials,senderProfilePicture32:d.sender.profilePicture32,urlPicture:f.$util.getProfilePictureUrl(d.sender.profilePicture32,d.sender.initials)};f.messages.push(_)}},async getUnreadNotifications(){const d=this;try{await d.$util.axios.get("api/accounts/unread-notifications").then(f=>{d.notifications=f.data})}catch(f){d.$util.handleError(f)}},async getUnreadChats(){const d=this;try{await d.$util.axios.get("api/accounts/unread-chats").then(f=>{d.messages=f.data;for(let w in d.messages){let _=d.messages[w];d.$set(_,"urlPicture",d.$util.getProfilePictureUrl(_.senderProfilePicture32,_.senderInitials))}})}catch(f){d.$util.handleError(f)}},viewNotification(d){this.$bus.$emit("event:open-notification",d)},viewChat(d){this.$bus.$emit("event:open-chat",d)},showHiddenElements(){let f=this.$el.getElementsByClassName("initialHidden");for(let w=0;w<f.length;w++)f[w].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const f=ye().user;return{user:f,username:f?f.nameFull:"Guest"}},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1},async openModalSearchUser747(d){this.$refs.refModalSearchUser747.open(d)}}},It={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},Pt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},xt={class:"navbar-nav"},Vt={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},At={class:"nav-item dropdown"},Ot={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"navbar-nav ms-auto"},Ht={class:"nav-item dropdown"},Lt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},Bt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},qt={class:"text-capitalize"};function Nt(d,f,w,_,h,R){const T=Z("router-link");return t(),s("nav",It,[e("div",Ct,[q(T,{class:"navbar-brand",to:"/member"},{default:L(()=>[G(b(w.appName),1)]),_:1}),f[14]||(f[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Pt,[e("ul",xt,[e("li",Vt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ut,[e("li",null,[q(T,{class:"dropdown-item",to:"/member/announcements"},{default:L(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),G(" Announcements ")])),_:1})]),e("li",null,[q(T,{class:"dropdown-item",to:"/member/posts"},{default:L(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),G(" Posts ")])),_:1})]),e("li",null,[q(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:L(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),G(" Yellow Pages ")])),_:1})])])]),e("li",At,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ot,[e("li",null,[q(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:L(()=>f[4]||(f[4]=[G(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Dt,[e("li",Ht,[e("a",Lt,[e("span",null,[f[6]||(f[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,b(h.username),1)])]),e("ul",Bt,[f[9]||(f[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),f[10]||(f[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),f[11]||(f[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),f[12]||(f[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),h.user&&h.user.roles.length>1?(t(!0),s(B,{key:0},z(h.user.roles,K=>(t(),s("li",null,[q(T,{to:`/${K.toLowerCase()}`,class:"dropdown-item"},{default:L(()=>[e("span",qt,b(K),1)]),_:2},1032,["to"])]))),256)):H("",!0),e("li",null,[q(T,{to:"/",class:"dropdown-item"},{default:L(()=>f[7]||(f[7]=[G(" Main ")])),_:1})]),f[13]||(f[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[q(T,{to:"/account/logout",class:"dropdown-item"},{default:L(()=>f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),G("Logout ")])),_:1})])])])])])])])}const Rt=Me(Mt,[["render",Nt]]),zt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const d=document.getElementById("top");d&&d.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let d=this;if(!d.$el.getElementsByClassName)return;let f=d.$el.getElementsByClassName("initialHidden");for(let w=0;w<f.length;w++){let _=f[w];_.classList.remove("invisible"),_.classList.remove("d-none")}},close(){const d=this,f=document.referrer.toLowerCase();f&&f.includes("/account/login")?d.$router.go(-2):d.$router.go(-1)},toggle(d){const f=this;f.toggles[d]=!f.toggles[d],localStorage.setItem(f.togglesKey,JSON.stringify(f.toggles))}}},Ft={mixins:[zt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1}}},Gt={class:"footer sticky-bottom"},jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(d,f,w,_,h,R){const T=Z("router-link");return t(),s("footer",Gt,[e("div",jt,[e("div",Yt,[e("span",Wt,"©"+b(h.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[q(T,{class:"dropdown-item",to:"/member/announcements"},{default:L(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),G(" Announcements ")])),_:1})]),e("li",null,[q(T,{class:"dropdown-item",to:"/member/posts"},{default:L(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),G(" Posts ")])),_:1})]),e("li",null,[q(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:L(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),G(" Yellow Pages ")])),_:1})])])]),e("li",es,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[q(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:L(()=>f[4]||(f[4]=[G(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Me(Ft,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const f=this.$config;document.title=`Account - ${f.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(d,f,w,_,h,R){const T=Z("Toasts"),K=Z("router-view");return t(),s("div",ls,[q(T),q(K,{class:"flex-grow-1 mb-2"})])}const rs=Me(as,[["render",ns]]),is={__name:"index",setup(d){return ye().user,ie(()=>{}),(w,_)=>(t(),s("div",null,_[0]||(_[0]=[Fe('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){he("$config");const d=us.VITE_API_URL,f=Xe.create({baseURL:d});return Re.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),f.interceptors.request.use(w=>{Re.start();const{user:_}=ye();return _&&_.token&&(w.headers?(w.headers.Authorization||(w.headers.Authorization=`Bearer ${_.token}`),w.headers["Access-Control-Allow-Origin"]||(w.headers["Access-Control-Allow-Origin"]="*")):w.headers={Authorization:`Bearer ${_.token}`,"Access-Control-Allow-Origin":"*"}),w}),f.interceptors.response.use(w=>(Re.done(),w),w=>{throw Re.done(),w}),f}function pe(d){if(!d.appTitle)throw Error("App Title is required.");if(!d.pageTitle)throw Error("Page Title is required.");const f=ut(),w=Ze(),_=cs(),h=st(),R=St(),K=ye().user,F=()=>K&&K.roles&&K.roles.includes("System"),P=()=>K&&K.roles&&K.roles.includes("administrator"),N=()=>K&&K.roles&&K.roles.includes("employee"),Q=()=>K&&K.roles&&K.roles.includes("Member"),M=()=>{let a=f.path;return f.query.returnUrl&&(a=f.query.returnUrl),a=`?returnUrl=${encodeURIComponent(a)}`,a},D=async()=>{const a=document.referrer.toLowerCase();a&&a.includes("/accounts/login")?await w.go(-2):await w.go(-1)},i=a=>{var y;const V=f.path,n=(y=f.query)==null?void 0:y.returnUrl;n&&!(V.startsWith(n)||n.startsWith(V))?w.push(n):w.push(a)},S=d.appTitle,$=d.pageTitle,W=re(!1),X=re(new Map),r=re(""),p=re(""),x=re("");return{appTitle:S,pageTitle:$,busy:W,validations:X,infoMessage:r,warningMessage:p,errorMessage:x,router:w,route:f,axios:_,utils:h,toasts:R,close:D,closeWithReturnUrl:i,generateReturnUrl:M,security:{userId:K?K.userId:"",isSystem:F(),isAdministrator:P(),isEmployee:N(),isMember:Q()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(d){he("$config");const f=ye(),w=at(),_=new et(w.msalConfig),h=ce({username:"",password:""}),R={username:{required:ee.withMessage("Username is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0}},T=$e(R,h),{appTitle:K,pageTitle:F,busy:P,isDirty:N,validations:Q,infoMessage:M,warningMessage:D,errorMessage:i,router:S,route:$,axios:W,utils:X,toasts:r,close:p,security:x}=pe({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ie(async()=>{await _.initialize()});const a=async()=>{await _.loginPopup({}).then(()=>{debugger;const y=_.getAllAccounts()[0];_.setActiveAccount(y)}).catch(n=>{console.error(`error during authentication: ${n}`)});var V={account:_.getActiveAccount(),scopes:[]};await _.acquireTokenSilent(V).then(n=>{debugger;const u=n.account.idToken,c=ct(u);if(c.token=n.accessToken,console.log(n),!c.roles){debugger;c.roles=[]}c.userId=c.sub,f.login(c);var l=$.query.returnUrl;l?S.push(decodeURIComponent(l)):c.roles.length===1?S.push(`/${c.roles[0].toLowerCase()}`):S.push("/")}).catch(n=>{console.error(`error during acquireTokenSilent: ${n}`)})};return(V,n)=>(t(),ue(me,null,{default:L(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,b(o(K)),1),e("div",null,[o(i)?(t(),s("div",vs,[n[1]||(n[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(i)},null,8,gs)])):H("",!0),o(T).$error?(t(),s("div",bs,[n[2]||(n[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(T).$errors,y=>(t(),s("li",{key:y.$uid},b(y.$message),1))),128))])])):H("",!0)]),e("button",{onClick:n[0]||(n[0]=y=>a()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Me(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(d){const f=ye();return f.user,ie(async()=>{f.logoutWithRedirect()}),(w,_)=>(t(),s("div",ws,_[0]||(_[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[G(" You have logged out from HOA MS."),e("br"),G(" Click "),e("a",{href:"/",class:"d-inline"},"here"),G(" to go back to home page. ")])],-1)])))}},ks={class:"h-100 d-flex align-items-center justify-content-center"},_s={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],Ps={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},xs={class:"row row-cols-1 row-cols-sm-3"},Vs={class:"col-sm"},Us={class:"form-group"},As={key:0,class:"d-block invalid-feedback"},Os={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},Bs={key:0,class:"d-block invalid-feedback"},qs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Fs={class:"col"},Gs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Ys={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(d){const f=ce({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),w=(x,a)=>x===a.password,_={firstName:{required:ee.withMessage("First name is required.",te),$autoDirty:!0,$lazy:!0},middleName:{required:ee.withMessage("Middle name is required.",te),$autoDirty:!0,$lazy:!0},lastName:{required:ee.withMessage("Last name is required.",te),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ee.withMessage("Phone number is required.",te),$autoDirty:!0,$lazy:!0},email:{required:ee.withMessage("Email is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ee.withMessage("Confirm password is required.",te),confirmSamePassword:ee.withMessage("Password and confirm passwrod are different.",w),$autoDirty:!0,$lazy:!0}},h=$e(_,f),{appTitle:R,pageTitle:T,busy:K,isDirty:F,validations:P,infoMessage:N,warningMessage:Q,errorMessage:M,router:D,axios:i,utils:S,toasts:$,close:W,security:X}=pe({appTitle:"HOA MS",pageTitle:"Register User"}),r=he("$config");ie(()=>{});const p=async()=>{const x=f;if(K.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}M.value=null;try{K.value=!0;const V=S.clone(x);V.tenantid=r.tenantId;debugger;await i({method:"post",url:"/api/v1/accounts/register",data:V}).then(n=>{$.success("Register","Registration was successfull.",{onClose:async()=>{await D.push("/accounts/login")}})})}catch(V){M.value=S.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{K.value=!1}};return(x,a)=>{const V=Z("router-link");return t(),ue(me,null,{default:L(()=>[e("div",ks,[e("div",_s,[e("h4",Ss,b(o(T)),1),e("div",Ts,[e("div",Ms,[o(M)?(t(),s("div",Is,[a[8]||(a[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(M)},null,8,Cs)])):H("",!0),o(h).$error?(t(),s("div",Ps,[a[9]||(a[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(h).$errors,n=>(t(),s("li",{key:n.$uid},b(n.$message),1))),128))])])):H("",!0)]),e("div",xs,[e("div",Vs,[e("div",Us,[a[10]||(a[10]=e("label",null,"First Name",-1)),C(e("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>f.firstName=n),type:"text",class:"form-control"},null,512),[[Y,f.firstName]]),o(h).firstName.$error?(t(),s("div",As,[(t(!0),s(B,null,z(o(h).firstName.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])]),e("div",Os,[e("div",Ds,[a[11]||(a[11]=e("label",null,"Middle Name",-1)),C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=n=>f.middleName=n),type:"text",class:"form-control"},null,512),[[Y,f.middleName]]),o(h).middleName.$error?(t(),s("div",Hs,[(t(!0),s(B,null,z(o(h).middleName.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])]),e("div",Ls,[e("div",Es,[a[12]||(a[12]=e("label",null,"Last Name",-1)),C(e("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>f.lastName=n),type:"text",class:"form-control"},null,512),[[Y,f.lastName]]),o(h).lastName.$error?(t(),s("div",Bs,[(t(!0),s(B,null,z(o(h).lastName.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])])]),e("div",qs,[e("div",Ns,[e("div",Rs,[a[13]||(a[13]=e("label",null,"Phone Number",-1)),C(e("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>f.phoneNumber=n),type:"tel",class:"form-control"},null,512),[[Y,f.phoneNumber]]),o(h).phoneNumber.$error?(t(),s("div",zs,[(t(!0),s(B,null,z(o(h).phoneNumber.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])]),e("div",Fs,[e("div",Gs,[a[14]||(a[14]=e("label",null,"Email",-1)),C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=n=>f.email=n),type:"email",class:"form-control"},null,512),[[Y,f.email]]),o(h).email.$error?(t(),s("div",js,[(t(!0),s(B,null,z(o(h).email.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])])]),e("div",Ys,[e("div",Ws,[e("div",Ks,[a[15]||(a[15]=e("label",null,"Password",-1)),C(e("input",{"onUpdate:modelValue":a[5]||(a[5]=n=>f.password=n),type:"password",class:"form-control"},null,512),[[Y,f.password]]),o(h).password.$error?(t(),s("div",Js,[(t(!0),s(B,null,z(o(h).password.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])]),e("div",Qs,[e("div",Xs,[a[16]||(a[16]=e("label",null,"Confirm Password",-1)),C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=n=>f.confirmPassword=n),type:"password",class:"form-control"},null,512),[[Y,f.confirmPassword]]),o(h).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(B,null,z(o(h).confirmPassword.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):H("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:a[7]||(a[7]=n=>p()),class:"btn btn-primary w-100"},a[17]||(a[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),G("Register ")]),8,so)]),e("div",oo,[q(V,{to:"/",class:"btn btn-outline-primary w-100"},{default:L(()=>a[18]||(a[18]=[G("Home")])),_:1})]),e("div",ao,[q(V,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:L(()=>a[19]||(a[19]=[G("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function je(){const d=Ze(),f=F=>window.location.href.indexOf(F)>-1,w=F=>localStorage.getItem("data-bs-theme")||F,_=F=>{document.documentElement.setAttribute("data-bs-theme",F),localStorage.setItem("data-bs-theme",F)},h=async()=>await Xe.get("https://bootswatch.com/api/5.json").then(F=>F.data),R=F=>{const P=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");P&&F?(P.setAttribute("href",F),localStorage.setItem("bootswatch-theme",F)):alert("cannot query css link")},T=F=>{K(),d.push(F)},K=()=>{if(screen.width<576){const P=document.getElementById("navbarCollapse");if(P){const N=mt.getInstance(P);N&&N.hide()}}};return{isActive:f,getCurrentBsTheme:w,changeBsTheme:_,getBootswatch:h,changeTheme:R,navigate:T,collapseNavbar:K}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],ko={class:"nav-item dropdown"},_o={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},Po={key:1},xo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(d){const f=at(),{isActive:w,getCurrentBsTheme:_,changeBsTheme:h,getBootswatch:R,changeTheme:T,navigate:K,collapseNavbar:F}=je(),P=ye(),N=P.user,Q=ce({user:N,username:N?N.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});ie(async()=>{const S=Q;S.bootswatch=await R();const $=_(S.bsTheme);$&&(S.bsTheme=$,h(S.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(S.currentTheme=W,T(W))});const M=S=>{T(S),Q.currentTheme=S,F()},D=S=>{h(S),Q.bsTheme=S,F()},i=async()=>{P.logoutWithRedirect();const S=new et(f.msalConfig);await S.initialize();const $={mainWindowRedirectUri:"/"};await S.logoutPopup($)};return(S,$)=>{const W=Z("router-link");return t(),ue(me,null,{default:L(()=>[e("nav",ro,[e("div",io,[q(W,{class:"navbar-brand",to:"/administrator"},{default:L(()=>[G(b(d.appName),1)]),_:1}),$[18]||($[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[q(W,{to:"/videos",onClick:o(F),class:"nav-link"},{default:L(()=>$[3]||($[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[$[6]||($[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[q(W,{to:"/source-groups",onClick:o(F),class:"dropdown-item"},{default:L(()=>$[4]||($[4]=[G(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[q(W,{to:"/source-locations",onClick:o(F),class:"dropdown-item"},{default:L(()=>$[5]||($[5]=[G(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[q(W,{to:"/vod-sources",onClick:o(F),class:"nav-link"},{default:L(()=>$[7]||($[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[$[10]||($[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[q(W,{to:"/program-templates",onClick:o(F),class:"dropdown-item"},{default:L(()=>$[8]||($[8]=[G(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[q(W,{to:"/channels",onClick:o(F),class:"dropdown-item"},{default:L(()=>$[9]||($[9]=[G(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[$[14]||($[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[Q.bsTheme==="dark"?(t(),s("button",{key:0,onClick:$[0]||($[0]=X=>D("light")),class:"dropdown-item"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),G("Dark Mode ")]))):(t(),s("button",{key:1,onClick:$[1]||($[1]=X=>D("dark")),class:"dropdown-item"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),G("Light Mode ")])))]),$[13]||($[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(B,null,z(Q.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:r=>M(X.cssCdn),class:ne(["dropdown-item",{active:Q.currentTheme===X.cssCdn}])},b(X.name),11,ho)]))),256))])]),e("li",ko,[e("a",_o,[e("span",null,[$[15]||($[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(N)?(t(),s("span",To,b(o(N).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Io,[o(N)?(t(),s("li",Co,[e("button",{onClick:$[2]||($[2]=X=>i()),class:"dropdown-item"},$[16]||($[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),G("Logout ")]))])):(t(),s("li",Po,[q(W,{to:"/accounts/login",class:"dropdown-item"},{default:L(()=>$[17]||($[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),G("Login ")])),_:1})]))])])])])])])]),_:1})}}},Vo={class:"d-flex flex-column bg-secondary bg-gradient",style:{"min-width":"225px"}},Uo={class:"navbar bg-primary bg-gradient shadow","data-bs-theme":"dark"},Ao={class:"navbar-brand me-0 mb-1"},Oo={class:"nav nav-pills flex-column mb-auto h-100 px-1"},Do={class:"nav-item mt-3"},Ho={class:"nav-item"},Lo={class:"nav-item"},Eo={class:"nav-item"},Bo={class:"nav-item"},qo={class:"nav-item"},No={class:"nav-item dropdown"},Ro={class:"dropdown-menu overflow-y-auto","aria-labelledby":"dropdown01"},zo=["onClick"],Fo={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(d){const{isActive:f,getCurrentBsTheme:w,changeBsTheme:_,getBootswatch:h,changeTheme:R,navigate:T,collapseNavbar:K}=je(),F=ce({bsTheme:"light",currentTheme:"",bootswatch:{}});ie(async()=>{const Q=F;Q.bootswatch=await h();const M=w(Q.bsTheme);M&&(Q.bsTheme=M,_(Q.bsTheme));const D=localStorage.getItem("bootswatch-theme");D&&(Q.currentTheme=D,R(D))});const P=Q=>{R(Q),F.currentTheme=Q,K()},N=Q=>{_(Q),F.bsTheme=Q,K()};return(Q,M)=>{const D=Z("router-link");return t(),s("div",Vo,[e("nav",Uo,[q(D,{to:"/",class:"text-decoration-none w-100 text-center"},{default:L(()=>[e("h1",Ao,[e("span",null,b(d.appName),1)])]),_:1})]),e("ul",Oo,[e("li",Do,[q(D,{to:"/videos",onClick:o(K),class:"nav-link"},{default:L(()=>M[2]||(M[2]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),G("Videos ")])),_:1},8,["onClick"])]),e("li",Ho,[q(D,{to:"/source-groups",onClick:o(K),class:"nav-link"},{default:L(()=>M[3]||(M[3]=[e("span",{class:"fas fa-fw fa-warehouse me-1"},null,-1),G("Groups ")])),_:1},8,["onClick"])]),e("li",Lo,[q(D,{to:"/source-locations",onClick:o(K),class:"nav-link"},{default:L(()=>M[4]||(M[4]=[e("span",{class:"fas fa-fw fa-building me-1"},null,-1),G("Locations ")])),_:1},8,["onClick"])]),e("li",Eo,[q(D,{to:"/vod-sources",onClick:o(K),class:"nav-link"},{default:L(()=>M[5]||(M[5]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),G("VODs ")])),_:1},8,["onClick"])]),e("li",Bo,[q(D,{to:"/program-templates",onClick:o(K),class:"nav-link"},{default:L(()=>M[6]||(M[6]=[e("span",{class:"fas fa-fw fa-file-video me-1"},null,-1),G("Program Templates ")])),_:1},8,["onClick"])]),e("li",qo,[q(D,{to:"/channels",onClick:o(K),class:"nav-link"},{default:L(()=>M[7]||(M[7]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),G("Channels ")])),_:1},8,["onClick"])]),e("li",No,[M[11]||(M[11]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",Ro,[e("li",null,[F.bsTheme==="dark"?(t(),s("button",{key:0,onClick:M[0]||(M[0]=i=>N("light")),class:"dropdown-item"},M[8]||(M[8]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),G("Dark Mode ")]))):(t(),s("button",{key:1,onClick:M[1]||(M[1]=i=>N("dark")),class:"dropdown-item"},M[9]||(M[9]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),G("Light Mode ")])))]),M[10]||(M[10]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(B,null,z(F.bootswatch.themes,i=>(t(),s("li",null,[e("button",{onClick:S=>P(i.cssCdn),class:ne(["dropdown-item",{active:F.currentTheme===i.cssCdn}])},b(i.name),11,zo)]))),256))])])])])}}},Go={class:"footer sticky-bottom"},jo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient1 py-1"},Yo={class:"container-md"},Wo={class:"navbar-text small p-0"},Ko={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(d){je();const f=he("$config"),_=ye().user;let R=new Date().getFullYear();const T=ce({user:_,username:_?_.nameFull:"Guest",copyright:`2020-${R} ${f.appName}`});return ie(async()=>{}),(K,F)=>(t(),s("footer",Go,[e("div",jo,[e("div",Yo,[e("span",Wo,"©"+b(T.copyright),1)])])]))}},Jo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ge.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(d){d.message&&this.addMessage(d.title,d.message,d.type,d.options)},async addMessage(d,f,w,_={}){var h={id:this.count++,title:d,message:f,type:w,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};h=Object.assign({},h,_),this.messages.unshift(h),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),h.timeOut>0&&await this.startTimeout(h)},async startTimeout(d,f=0){const w=this,_=performance.now(),h=async()=>{d.animationFrame=requestAnimationFrame(async R=>{const T=R+f-_;if(!w.exists(d)||d.paused){cancelAnimationFrame(d.animationFrame);return}else if(T<d.timeOut){const K=T/d.timeOut;d.progress=K,await h()}else{d.progress=1,cancelAnimationFrame(d.animationFrame),w.remove(d);return}})};await h()},pauseProgress(d){d.timeOut<=0||(d.paused=!0)},async resumeProgress(d){d.timeOut<=0||(d.paused=!1,await this.startTimeout(d,d.timeOut*d.progress))},getCurrentProgress(d){return Math.round(d.progress*100)===100?100:d.progress*100},getIconClass(d){const f=d.type;let w="";switch(f){case"success":w="fas fa-fw fa-circle-check";break;case"info":w="fas fa-fw fa-circle-info";break;case"warning":w="fas fa-fw fa-circle-exclamation";break;case"danger":w="fas fa-fw fa-triangle-exclamation";break}let _=w;return d.rtl?"icon-right "+_:"icon-left "+_},async remove(d){const f=this.messages.findIndex(w=>w.id===d.id);this.messages.splice(f,1),typeof d.onClose=="function"&&await d.onClose()},exists(d){return this.messages.findIndex(w=>w.id===d.id)!==-1}}},Qo={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Xo=["onMouseover","onMouseout"],Zo={class:"me-auto text-white"},ea=["onClick"],ta={class:"toast-body"},sa=["innerHTML"],oa={key:0,class:"progress m-1",style:{height:"4px"}};function aa(d,f,w,_,h,R){return t(),ue(me,null,{default:L(()=>[e("div",Qo,[q(_e,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:L(()=>[(t(!0),s(B,null,z(h.messages,T=>(t(),s("div",{key:T.id,class:ne(["toast show mb-2 ms-auto",`border-${T.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:K=>R.pauseProgress(T),onMouseout:K=>R.resumeProgress(T)},[e("div",{class:ne(["toast-header",`bg-${T.type}`])},[e("strong",Zo,[e("i",{class:ne([R.getIconClass(T),"me-1"])},null,2),G(b(T.title),1)]),T.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:K=>R.remove(T)},f[0]||(f[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ea)):H("",!0)],2),e("div",ta,[e("div",{innerHTML:T.message},null,8,sa)]),T.timeOut>0&&T.showProgress?(t(),s("div",oa,[e("div",{class:ne(`bg-${T.type}`),style:tt({width:R.getCurrentProgress(T)+"%"})},null,6)])):H("",!0)],42,Xo))),128))]),_:1})])]),_:1})}const la=Me(Jo,[["render",aa],["__scopeId","data-v-5272bd9a"]]),na={name:"AdminLayout",components:{TopNav:xo,SideNav:Fo,BottomNav:Ko},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},ra={class:"d-flex flex-row vh-100"},ia={class:"d-flex flex-column w-100"};function da(d,f,w,_,h,R){const T=Z("SideNav"),K=Z("router-view"),F=Z("Toasts");return t(),s("div",ra,[q(T),e("div",ia,[q(K,{class:"vh-100 overflow-y-auto"}),q(F)])])}const ua=Me(na,[["render",da]]),ca={class:"mt-2 container-md"},ma={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},fa=["innerHTML"],pa={class:"text-center"},va={class:"row mt-3"},ga={class:"col-12 col-sm-6 offset-sm-3"},ba={class:"card"},ya={class:"card-body"},$a={class:"card card-body mb-2 d-none"},wa={key:0,class:"fas fa-fw fa-circle-check text-success"},ha={key:1,class:"fas fa-fw fa-times-circle text-danger"},ka={key:0,class:"fas fa-fw fa-circle-check text-success"},_a={key:1,class:"fas fa-fw fa-times-circle text-danger"},Sa={__name:"Index",setup(d){const{appTitle:f,pageTitle:w,busy:_,isDirty:h,validations:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,generateReturnUrl:i,security:S}=pe({appTitle:"ARC AIO",pageTitle:"Dashboard"});he("$config"),ye().user;const W=ce({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),ie(async()=>{});const X=async()=>{const x=W;if(!_.value)try{_.value=!0;const a="/api/v1/dashboard/administrators/";x.item=[],await N.get(a).then(V=>{x.item=V.data})}catch(a){F.value=Q.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}},r=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await N.get("/api/v1/channels/reset/").then(V=>{M.success("Reset All Data","Reset data was successful.")})}catch(a){F.value=Q.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}},p=async()=>{await X()};return(x,a)=>{const V=Z("PageHeader"),n=Z("router-link");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(V,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(w)},{default:L(()=>[e("button",{onClick:a[0]||(a[0]=y=>p()),class:"ms-2 btn btn-secondary"},a[2]||(a[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))]),_:1},8,["pageTitle"]),e("div",ca,[o(F)?(t(),s("div",ma,[a[3]||(a[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(F))},null,8,fa)])):H("",!0),e("div",pa,[e("button",{onClick:a[1]||(a[1]=y=>r()),class:"btn btn-warning btn-lg"},a[4]||(a[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),G("Reset All Data ")]))]),e("div",va,[e("div",ga,[e("div",ba,[a[14]||(a[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",ya,[e("ol",null,[a[8]||(a[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[q(n,{to:`/videos/add/${o(i)()}`},{default:L(()=>a[5]||(a[5]=[G(" Create a Video. ")])),_:1},8,["to"])]),a[9]||(a[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[q(n,{to:"/program-templates/add"},{default:L(()=>a[6]||(a[6]=[G(" Create Program Template. ")])),_:1}),a[7]||(a[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),a[10]||(a[10]=e("li",null,[G(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),a[11]||(a[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),a[12]||(a[12]=e("li",null," Publish Channel. ",-1)),a[13]||(a[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",$a,[a[17]||(a[17]=G(" Security ")),e("ul",null,[e("li",null,[o(S).isAdministrator?(t(),s("span",wa)):(t(),s("span",ha)),a[15]||(a[15]=G(" Administrator "))]),e("li",null,[o(S).isEmployee?(t(),s("span",ka)):(t(),s("span",_a)),a[16]||(a[16]=G(" Employee "))])])])])])]),_:1})}}},Ta=["disabled"],Ma={class:"input-group"},Ia={class:"row row-cols-1 row-cols-sm-2 mt-3"},Ca={class:"col text-center mb-2"},Pa=["src"],xa={class:"col"},Va={class:"form-floating mb-2"},Ua={key:0,class:"d-block invalid-feedback"},Aa={class:"form-floating mb-2"},Oa={class:"row row-cols-sm-2"},Da={class:"col"},Ha={class:"form-floating mb-2"},La={class:"col"},Ea={class:"form-floating mb-2"},Ba={class:"row row-cols-sm-2"},qa={class:"col"},Na={class:"form-floating mb-2"},Ra={class:"col"},za={class:"form-floating mb-2"},Fa={class:"col"},Ga={class:"form-floating mb-2"},ja={class:"col"},Ya={class:"form-floating mb-2"},Je="YYYY-MM-DD HH:mm",Wa={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"ARC AIO",pageTitle:"Add User"}),D=d,i=P.moment().local();i.format(Je),i.add(24,"hours").format(Je);const S=re("a22de760-358d-4a0e-83ad-2624a5c11f73"),$=ce({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),W={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},X=$e(W,$);ie(async()=>{});const r=async()=>{const x=$;if(!_.value)try{_.value=!0,x.item=null;const a=`/api/v1/users/get-from-entra-id/${S.value}`;await F.get(a).then(V=>{x.item=V.data})}catch(a){T.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}},p=async()=>{const x=$;if(_.value)return;if(!await X.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="",await F.post(`/api/v1/users/add-from-entra-id/${x.item.userId}`).then(V=>{N.success("Add User","User added",{onClose:async()=>{const n=`${D.urlView}/${V.data}`;await K.push(n)}})})}catch(V){T.value=P.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{_.value=!1}};return(x,a)=>{const V=Z("router-link"),n=Z("PageHeader"),y=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(n,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o(X).$dirty&&o(X).$invalid,onClick:a[0]||(a[0]=u=>p()),class:"btn btn-primary"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ta),q(V,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(y,{errorMessage:o(T),vuelidate:o(X)},{default:L(()=>[e("div",null,[e("div",null,[e("div",Ma,[C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>S.value=u),onKeyup:a[2]||(a[2]=Oe(u=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[Y,S.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[3]||(a[3]=u=>r())},a[14]||(a[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Ia,[e("div",Ca,[e("img",{src:$.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,Pa)]),e("div",xa,[e("div",Va,[C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=u=>$.item.userId=u),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[Y,$.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1)),o(X).item.userId.$error?(t(),s("div",Ua,[(t(!0),s(B,null,z(o(X).item.userId.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)]),e("div",Aa,[C(e("input",{"onUpdate:modelValue":a[5]||(a[5]=u=>$.item.displayName=u),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[Y,$.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Oa,[e("div",Da,[e("div",Ha,[C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=u=>$.item.givenName=u),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[Y,$.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",La,[e("div",Ea,[C(e("input",{"onUpdate:modelValue":a[7]||(a[7]=u=>$.item.surname=u),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[Y,$.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Ba,[e("div",qa,[e("div",Na,[C(e("input",{"onUpdate:modelValue":a[8]||(a[8]=u=>$.item.email=u),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[Y,$.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Ra,[e("div",za,[C(e("input",{"onUpdate:modelValue":a[9]||(a[9]=u=>$.item.mobilePhone=u),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[Y,$.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Fa,[e("div",Ga,[C(e("input",{"onUpdate:modelValue":a[10]||(a[10]=u=>$.item.principalName=u),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[Y,$.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",ja,[e("div",Ya,[C(e("input",{"onUpdate:modelValue":a[11]||(a[11]=u=>$.item.jobTitle=u),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[Y,$.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function He(d){if(!d.cacheKey)throw Error("Cache Key required.");if(!d.baseUrl)throw Error("Base Url required.");const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,closeWithReturnUrl:M,generateReturnUrl:D,security:i}=pe({appTitle:d.appTitle,pageTitle:d.pageTitle}),S=JSON.parse(JSON.stringify(d.filter));S.pageIndex=S.pageIndex||1,S.pageSize=S.pageSize||5,S.sortField=S.sortField||"",S.sortOrder=S.sortOrder||1,S.updateUrl=S.updateUrl||!1,S.items=S.items||[],S.query=S.query||{},S.query.criteria=S.query.criteria||"";const $=re(S),W=()=>{var c;if(_.value){console.log("Paginated search is currently busy.");return}const n=JSON.parse(localStorage.getItem(d.cacheKey))||{},y=new URLSearchParams(window.location.search),u=$.value;u.query.criteria=y.get("c")||n.criteria||u.query.criteria||"",u.pageIndex=parseInt(y.get("p"),10)||n.pageIndex||u.pageIndex||1,u.pageSize=parseInt(y.get("s"),10)||n.pageSize||u.pageSize||5,u.sortField=y.get("sf")||n.sortField||u.sortField||"",u.sortOrder=parseInt(y.get("so"),10)||n.sortOrder||u.sortOrder||1,u.visible=n.visible||u.visible,(c=d.initializeFilter)==null||c.call(d,$,d.cacheKey)},X=()=>{if(d.getQuery)return d.getQuery($.value);{const n=$.value;return["?c=",encodeURIComponent(n.query.criteria),"&p=",n.pageIndex,"&s=",n.pageSize,"&sf=",n.sortField,"&so=",n.sortOrder].join("")}},r=()=>{if(d.saveQuery)d.saveQuery($.value,d.cacheKey);else{const n=$.value;localStorage.setItem(d.cacheKey,JSON.stringify({criteria:n.query.criteria,pageIndex:n.pageIndex,pageSize:n.pageSize,sortField:n.sortField,sortOrder:n.sortOrder,visible:n.visible}))}};return{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,closeWithReturnUrl:M,generateReturnUrl:D,security:i,filter:$,initializeFilter:W,getQuery:X,saveQuery:r,search:async n=>{var u;let y=$.value;if(_.value){console.log("Paginated search is currently busy.");return}n>0&&(y.pageIndex=n);try{_.value=!0,T.value="";const c=X();y.selected=null,await F(`${d.baseUrl}/${c}`).then(async l=>{var v;Array.isArray(l.data)?y.items=l.data:y=Object.assign(y,l.data);let g=location.pathname;g.endsWith("/")?g+=c:g+="/"+c,y.updateUrl&&window.history.replaceState(c,`${f}-search`,g),y.items.forEach(A=>{A.expand=!1}),r(),(v=d.successAction)==null||v.call(d,$.value)})}catch(c){if(localStorage.removeItem(d.cacheKey),d.failAction)d.failAction(c);else{const l=P.getErrorMessageAsHtml(c);T.value=l,N.error("Error Occured",l)}}finally{_.value=!1,(u=d.finalAction)==null||u.call(d)}},getRowNumber:n=>{const y=$.value;return(y.pageIndex-1)*y.pageSize+(n+1)},setSelected:n=>{const y=$.value;y.selected&&n&&y.selected===n?y.selected=null:(y.selected&&(y.selected.expand=!1),y.selected=n,y.selected.expand=!0)},isSelected:n=>{const y=$.value;return n===null||y.selected===null?!1:n===y.selected}}}const Ka={class:"ms-1"},Ja={class:"input-group"},Qa={class:"table-responsive"},Xa={class:"table table-hover mb-0"},Za=["textContent"],el=["src"],tl="/api/v1/users/search",sl={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:X,search:r,getRowNumber:p,setSelected:x,isSelected:a}=He({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${w==null?void 0:w.userId}/users/search`,baseUrl:tl,filter:{updateUrl:!0}});return ie(async()=>{$(),await r()}),(V,n)=>{const y=Z("PageHeader"),u=Z("router-link"),c=Z("m-pagination"),l=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(y,{"page-icon":"fas fa-fw fa-users",pageTitle:o(h)},{default:L(()=>[e("div",Ka,[e("div",Ja,[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=g=>o(S).query.criteria=g),onKeyup:n[1]||(n[1]=Oe(g=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Y,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:n[2]||(n[2]=g=>o(r)(1))},n[3]||(n[3]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(l,{errorMessage:o(F)},{default:L(()=>[e("div",Qa,[e("table",Xa,[n[4]||(n[4]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o(S).items,(g,v)=>(t(),s("tr",{key:g.movieId},[e("td",{textContent:b(o(p)(v)),class:"text-center"},null,8,Za),e("td",null,[g.photoBase64?(t(),s("img",{key:0,src:g.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,el)):H("",!0)]),e("td",null,[q(u,{to:`${d.urlView}/${g.userId}`,class:"d-inline-block text-truncate"},{default:L(()=>[G(b(g.displayName),1)]),_:2},1032,["to"])]),e("td",null,b(g.email),1),e("td",null,b(g.jobTitle),1)]))),128))]),_:1},512),[[Te,o(S).items.length>0]])])]),q(c,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ol={key:0},al={class:"row row-cols-1 row-cols-sm-2 mt-3"},ll={class:"col text-center mb-2"},nl=["src"],rl={class:"col"},il={class:"form-floating mb-2"},dl={class:"form-floating mb-2"},ul={class:"row row-cols-sm-2"},cl={class:"col"},ml={class:"form-floating mb-2"},fl={class:"col"},pl={class:"form-floating mb-2"},vl={class:"row row-cols-sm-2"},gl={class:"col"},bl={class:"form-floating mb-2"},yl={class:"col"},$l={class:"form-floating mb-2"},wl={class:"col"},hl={class:"form-floating mb-2"},kl={class:"col"},_l={class:"form-floating mb-2"},Sl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"ARC CMS",pageTitle:"View User"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null});ie(async()=>{await p()});const p=async()=>{const V=r;if(!h.value)try{h.value=!0,P.value="",r.item=null;const n=`/api/v1/users/get-from-db/${f.id}/`;await Q.get(n).then(y=>{V.item=y.data})}catch(n){P.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{h.value=!1}},x=async()=>{await p()},a=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!h.value){P.value=null;try{h.value=!0,await Q.delete(`/api/v1/users/${f.id}/`).then(n=>{D.warning("Delete User","User was deleted.",{async onClose(){await N.push(f.urlMain)}})})}catch(n){P.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{h.value=!1}}};return(V,n)=>{const y=Z("router-link"),u=Z("PageHeader"),c=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(u,{"page-icon":"fas fa-fw fa-user",pageTitle:o(_)},{default:L(()=>[o(W).isAdministrator?(t(),s(B,{key:0},[q(y,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:L(()=>n[11]||(n[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:n[0]||(n[0]=l=>a()),class:"ms-1 btn btn-warning"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):H("",!0),e("button",{onClick:n[1]||(n[1]=l=>x()),class:"ms-2 btn btn-secondary"},n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[2]||(n[2]=l=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},n[14]||(n[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(c,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",ol,[e("div",null,[e("div",al,[e("div",ll,[e("img",{src:r.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,nl)]),e("div",rl,[e("div",il,[C(e("input",{"onUpdate:modelValue":n[3]||(n[3]=l=>r.item.userId=l),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[Y,r.item.userId]]),n[15]||(n[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",dl,[C(e("input",{"onUpdate:modelValue":n[4]||(n[4]=l=>r.item.displayName=l),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[Y,r.item.displayName]]),n[16]||(n[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",ul,[e("div",cl,[e("div",ml,[C(e("input",{"onUpdate:modelValue":n[5]||(n[5]=l=>r.item.givenName=l),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[Y,r.item.givenName]]),n[17]||(n[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",fl,[e("div",pl,[C(e("input",{"onUpdate:modelValue":n[6]||(n[6]=l=>r.item.surname=l),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[Y,r.item.surname]]),n[18]||(n[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",vl,[e("div",gl,[e("div",bl,[C(e("input",{"onUpdate:modelValue":n[7]||(n[7]=l=>r.item.email=l),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[Y,r.item.email]]),n[19]||(n[19]=e("label",{for:"email"},"Email",-1))])]),e("div",yl,[e("div",$l,[C(e("input",{"onUpdate:modelValue":n[8]||(n[8]=l=>r.item.mobilePhone=l),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[Y,r.item.mobilePhone]]),n[20]||(n[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",wl,[e("div",hl,[C(e("input",{"onUpdate:modelValue":n[9]||(n[9]=l=>r.item.principalName=l),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[Y,r.item.principalName]]),n[21]||(n[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",kl,[e("div",_l,[C(e("input",{"onUpdate:modelValue":n[10]||(n[10]=l=>r.item.jobTitle=l),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[Y,r.item.jobTitle]]),n[22]||(n[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Tl=["disabled"],Ml={class:"row row-cols-1 row-cols-sm-3"},Il={class:"col"},Cl={class:"form-floating mb-2"},Pl={key:0,class:"d-block invalid-feedback"},xl={class:"col"},Vl={class:"form-floating"},Ul={class:"col"},Al={class:"form-floating"},Ol={class:"col"},Dl={class:"form-floating mb-2"},Hl={class:"col"},Ll={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},El={class:"col"},Bl={class:"form-check"},ql=["onUpdate:modelValue","id"],Nl=["for"],Rl={class:""},zl={class:"col"},Fl={class:"form-floating mb-2"},Gl={key:0,class:"d-block invalid-feedback"},jl={class:"col"},Yl={class:"form-floating mb-2"},Wl={key:0,class:"d-block invalid-feedback"},Kl={class:""},Jl={class:"col"},Ql={class:"form-floating mb-2"},Xl={key:0,class:"d-block invalid-feedback"},Zl={class:"col"},en={class:"input-group mb-2"},tn={class:"form-floating"},sn=["href"],on={key:0,class:"d-block invalid-feedback"},an={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),D=d,i=ce({lookups:{genres:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4,dateReleased:P.moment().format("YYYY-MM-DD")}}),S={item:{title:{title:ee.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ee.withMessage("Duration is required.",te),$autoDirty:!0,$lazy:!0},dateReleased:{title:ee.withMessage("Date Released is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:ee.withMessage("Raw Base Url is required.",te),$autoDirty:!0,$lazy:!0},rawPath:{title:ee.withMessage("Raw Path is required.",te),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:ee.withMessage("HLS Base Url is required.",te),$autoDirty:!0,$lazy:!0},hlsPath:{title:ee.withMessage("HLS Path is required.",te),$autoDirty:!0,$lazy:!0}}},$=$e(S,i),W=we(()=>{const p=P.moment;if(i.durationTime&&i.durationTime!=="00:00:00"&&P.isValidTime(i.durationTime)){const x=p().startOf("day"),a=x.format("YYYY-MM-DD ")+i.durationTime,n=p(a).subtract(x);return i.item.durationInMillis=n.valueOf(),i.item.durationInMillis}return 0});ie(async()=>{await r()});const X=async()=>{const p=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const a=P.clone(p.item);a.durationInMillis=W.value;const V=i.lookups.genres.filter(y=>y.selected).map(y=>y.id);a.genres=V;const n=P.moment(p.item.dateReleased).utc(!0).format();a.dateReleased=n;debugger;await F.post("/api/v1/videos/",a).then(y=>{N.success("Add Video","Video added",{onClose:async()=>{const u=`${D.urlView}/${y.data}`;await K.push(u)}})})}catch(a){T.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}},r=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(p=>{const a=p.data.filter(V=>V.id!==0);i.lookups.genres=a})}catch(p){T.value=P.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}};return(p,x)=>{const a=Z("router-link"),V=Z("PageHeader"),n=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(V,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:x[0]||(x[0]=y=>X()),class:"btn btn-primary"},x[9]||(x[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Tl),q(a,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>x[10]||(x[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(n,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[e("div",null,[e("div",Ml,[e("div",Il,[e("div",Cl,[C(e("input",{"onUpdate:modelValue":x[1]||(x[1]=y=>i.item.title=y),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Y,i.item.title]]),x[11]||(x[11]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o($).item.title.$error?(t(),s("div",Pl,[(t(!0),s(B,null,z(o($).item.title.$errors,y=>(t(),s("div",{key:y.$uid},b(y.$message),1))),128))])):H("",!0)])]),e("div",xl,[e("div",Vl,[C(e("input",{"onUpdate:modelValue":x[2]||(x[2]=y=>i.item.dateReleased=y),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Y,i.item.dateReleased]]),x[12]||(x[12]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",Ul,[e("div",Al,[C(e("input",{"onUpdate:modelValue":x[3]||(x[3]=y=>i.durationTime=y),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Y,i.durationTime]]),x[13]||(x[13]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Ol,[e("div",Dl,[C(e("textarea",{"onUpdate:modelValue":x[4]||(x[4]=y=>i.item.description=y),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Y,i.item.description]]),x[14]||(x[14]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Hl,[x[15]||(x[15]=e("h5",null,"Genres",-1)),e("div",Ll,[(t(!0),s(B,null,z(i.lookups.genres,y=>(t(),s("div",El,[e("div",Bl,[C(e("input",{"onUpdate:modelValue":u=>y.selected=u,class:"form-check-input",type:"checkbox",id:y.name},null,8,ql),[[Pe,y.selected]]),e("label",{class:"form-check-label",for:y.name},b(y.name),9,Nl)])]))),256))])]),e("div",Rl,[x[18]||(x[18]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",zl,[e("div",Fl,[C(e("input",{"onUpdate:modelValue":x[5]||(x[5]=y=>i.item.rawBaseUrl=y),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[Y,i.item.rawBaseUrl]]),x[16]||(x[16]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o($).item.rawBaseUrl.$error?(t(),s("div",Gl,[(t(!0),s(B,null,z(o($).item.rawBaseUrl.$errors,y=>(t(),s("div",{key:y.$uid},b(y.$message),1))),128))])):H("",!0)])]),e("div",jl,[e("div",Yl,[C(e("input",{"onUpdate:modelValue":x[6]||(x[6]=y=>i.item.rawPath=y),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[Y,i.item.rawPath]]),x[17]||(x[17]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o($).item.rawPath.$error?(t(),s("div",Wl,[(t(!0),s(B,null,z(o($).item.rawPath.$errors,y=>(t(),s("div",{key:y.$uid},b(y.$message),1))),128))])):H("",!0)])]),e("div",Kl,[x[22]||(x[22]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Jl,[e("div",Ql,[C(e("input",{"onUpdate:modelValue":x[7]||(x[7]=y=>i.item.hlsBaseUrl=y),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[Y,i.item.hlsBaseUrl]]),x[19]||(x[19]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o($).item.hlsBaseUrl.$error?(t(),s("div",Xl,[(t(!0),s(B,null,z(o($).item.hlsBaseUrl.$errors,y=>(t(),s("div",{key:y.$uid},b(y.$message),1))),128))])):H("",!0)])]),e("div",Zl,[e("div",en,[e("div",tn,[C(e("input",{"onUpdate:modelValue":x[8]||(x[8]=y=>i.item.hlsPath=y),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[Y,i.item.hlsPath]]),x[20]||(x[20]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),i.item.hlsBaseUrl&&i.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.hlsBaseUrl+i.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},x[21]||(x[21]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),G("View ")],-1)]),8,sn)):H("",!0)]),o($).item.hlsPath.$error?(t(),s("div",on,[(t(!0),s(B,null,z(o($).item.hlsPath.$errors,y=>(t(),s("div",{key:y.$uid},b(y.$message),1))),128))])):H("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ln=["disabled"],nn={class:"row row-cols-1 row-cols-sm-3"},rn={class:"col"},dn={class:"form-floating mb-2"},un={key:0,class:"d-block invalid-feedback"},cn={class:"col"},mn={class:"form-floating"},fn={class:"col"},pn={class:"form-floating"},vn={class:"col"},gn={class:"form-floating mb-2"},bn={class:"col"},yn={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},$n={class:"col"},wn={class:"form-check"},hn=["onUpdate:modelValue","id"],kn=["for"],_n={class:""},Sn={class:"col"},Tn={class:"form-floating mb-2"},Mn={key:0,class:"d-block invalid-feedback"},In={class:"col"},Cn={class:"form-floating mb-2"},Pn={key:0,class:"d-block invalid-feedback"},xn={class:""},Vn={class:"col"},Un={class:"form-floating mb-2"},An={key:0,class:"d-block invalid-feedback"},On={class:"col"},Dn={class:"input-group mb-2"},Hn={class:"form-floating"},Ln=["href"],En={key:0,class:"d-block invalid-feedback"},Bn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),D=d,i=ce({lookups:{genres:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null}}),S={item:{title:{title:ee.withMessage("title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ee.withMessage("durationInMillis is required.",te),$autoDirty:!0,$lazy:!0},dateReleased:{title:ee.withMessage("Date Released is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:ee.withMessage("rawBaseUrl is required.",te)},rawPath:{title:ee.withMessage("rawPath is required.",te)},hlsBaseUrl:{title:ee.withMessage("hlsBaseUrl is required.",te)},hlsPath:{title:ee.withMessage("hlsPath is required.",te)}}},$=$e(S,i),W=we(()=>{const x=P.moment;if(i.durationTime&&i.durationTime!=="00:00:00"&&P.isValidTime(i.durationTime)){const a=x().startOf("day"),V=a.format("YYYY-MM-DD ")+i.durationTime,y=x(V).subtract(a);return i.item.durationInMillis=y.valueOf(),i.item.durationInMillis}return 0});ie(async()=>{await r(),await X()});const X=async()=>{try{await F.get(`/api/v1/videos/${D.id}/`).then(x=>{i.item=x.data;const a=P.moment(i.item.dateReleased).format("YYYY-MM-DD");i.item.dateReleased=a;const V=i.lookups.genres,n=i.item.genres.map(y=>y.genre);V.forEach(y=>{y.selected=n.includes(y.id)})})}catch(x){T.value=P.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},r=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(x=>{const V=x.data.filter(n=>n.id!==0);i.lookups.genres=V})}catch(x){T.value=P.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},p=async()=>{const x=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const V=P.clone(x.item);V.durationInMillis=W.value;const n=i.lookups.genres.filter(u=>u.selected).map(u=>u.id);V.genres=n;const y=P.moment(x.item.dateReleased).utc(!0).format();V.dateReleased=y;debugger;await F.put("/api/v1/videos/",V).then(u=>{N.success("Edit Video","Video edited.",{onClose:async()=>{const c=`${D.urlView}/${D.id}`;await K.push(c)}})})}catch(V){T.value=P.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{_.value=!1}};return(x,a)=>{const V=Z("router-link"),n=Z("PageHeader"),y=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(n,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:a[0]||(a[0]=u=>p()),class:"btn btn-primary"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ln),e("button",{onClick:X,class:"btn btn-secondary ms-2"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),q(V,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(y,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[e("div",null,[e("div",nn,[e("div",rn,[e("div",dn,[C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>i.item.title=u),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Y,i.item.title]]),a[12]||(a[12]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o($).item.title.$error?(t(),s("div",un,[(t(!0),s(B,null,z(o($).item.title.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])]),e("div",cn,[e("div",mn,[C(e("input",{"onUpdate:modelValue":a[2]||(a[2]=u=>i.item.dateReleased=u),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Y,i.item.dateReleased]]),a[13]||(a[13]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",fn,[e("div",pn,[C(e("input",{"onUpdate:modelValue":a[3]||(a[3]=u=>i.durationTime=u),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Y,i.durationTime]]),a[14]||(a[14]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",vn,[e("div",gn,[C(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=u=>i.item.description=u),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Y,i.item.description]]),a[15]||(a[15]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",bn,[a[16]||(a[16]=e("h5",null,"Genres",-1)),e("div",yn,[(t(!0),s(B,null,z(i.lookups.genres,u=>(t(),s("div",$n,[e("div",wn,[C(e("input",{"onUpdate:modelValue":c=>u.selected=c,class:"form-check-input",type:"checkbox",id:u.name},null,8,hn),[[Pe,u.selected]]),e("label",{class:"form-check-label",for:u.name},b(u.name),9,kn)])]))),256))])]),e("div",_n,[a[19]||(a[19]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Sn,[e("div",Tn,[C(e("input",{"onUpdate:modelValue":a[5]||(a[5]=u=>i.item.rawBaseUrl=u),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[Y,i.item.rawBaseUrl]]),a[17]||(a[17]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o($).item.rawBaseUrl.$error?(t(),s("div",Mn,[(t(!0),s(B,null,z(o($).item.rawBaseUrl.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])]),e("div",In,[e("div",Cn,[C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=u=>i.item.rawPath=u),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[Y,i.item.rawPath]]),a[18]||(a[18]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o($).item.rawPath.$error?(t(),s("div",Pn,[(t(!0),s(B,null,z(o($).item.rawPath.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])]),e("div",xn,[a[23]||(a[23]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Vn,[e("div",Un,[C(e("input",{"onUpdate:modelValue":a[7]||(a[7]=u=>i.item.hlsBaseUrl=u),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[Y,i.item.hlsBaseUrl]]),a[20]||(a[20]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o($).item.hlsBaseUrl.$error?(t(),s("div",An,[(t(!0),s(B,null,z(o($).item.hlsBaseUrl.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])]),e("div",On,[e("div",Dn,[e("div",Hn,[C(e("input",{"onUpdate:modelValue":a[8]||(a[8]=u=>i.item.hlsPath=u),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[Y,i.item.hlsPath]]),a[21]||(a[21]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),i.item.hlsBaseUrl&&i.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.hlsBaseUrl+i.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},a[22]||(a[22]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),G("View ")],-1)]),8,Ln)):H("",!0)]),o($).item.hlsPath.$error?(t(),s("div",En,[(t(!0),s(B,null,z(o($).item.hlsPath.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},qn={class:"ms-2"},Nn={class:"input-group"},Rn=["value"],zn={class:"ms-1"},Fn={class:"input-group"},Gn={class:"table-responsive border shadow-sm"},jn={class:"table table-hover mb-0"},Yn=["textContent"],Wn={class:"badge bg-info me-1"},Kn={class:"text-end ms-sm-5 pe-sm-5"},Jn={class:"text-end ms-sm-5 pe-sm-5"},Qn="/api/v1/videos/search",Xn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:X,search:r,getRowNumber:p,setSelected:x,isSelected:a}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${w==null?void 0:w.userId}/videos/search`,baseUrl:Qn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0}},initializeFilter:(n,y)=>{const u=n.value,c=new URLSearchParams(window.location.search),l=JSON.parse(localStorage.getItem(y))||{};u.query.genre=c.get("genre")||l.genre||u.query.genre||0},getQuery:n=>["?c=",encodeURIComponent(n.query.criteria),"&p=",n.pageIndex,"&s=",n.pageSize,"&sf=",n.sortField,"&so=",n.sortOrder,"&genre=",n.query.genre].join(""),saveQuery:(n,y)=>{localStorage.setItem(y,JSON.stringify({criteria:n.query.criteria,pageIndex:n.pageIndex,pageSize:n.pageSize,sortField:n.sortField,sortOrder:n.sortOrder,visible:n.visible,genre:n.query.genre}))}});ie(async()=>{$(),await V(),await r()});const V=async()=>{try{await N.get("/api/v1/lookups/video-genres/").then(n=>{const y=n.data;S.value.lookups.genres=y})}catch(n){F.value=Q.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}};return(n,y)=>{const u=Z("router-link"),c=Z("PageHeader"),l=Z("m-pagination"),g=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(c,{"page-icon":"fas fa-fw fa-video",pageTitle:o(h)},{default:L(()=>[q(u,{to:d.urlAdd,class:"btn btn-primary"},{default:L(()=>y[4]||(y[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",qn,[e("div",Nn,[y[5]||(y[5]=e("span",{class:"input-group-text fw-bold"},"Type",-1)),C(e("select",{"onUpdate:modelValue":y[0]||(y[0]=v=>o(S).query.genre=v),class:"form-select"},[(t(!0),s(B,null,z(o(S).lookups.genres,v=>(t(),s("option",{value:v.id},b(v.name),9,Rn))),256))],512),[[fe,o(S).query.genre]])])]),e("div",zn,[e("div",Fn,[C(e("input",{"onUpdate:modelValue":y[1]||(y[1]=v=>o(S).query.criteria=v),onKeyup:y[2]||(y[2]=Oe(v=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Y,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:y[3]||(y[3]=v=>o(r)(1))},y[6]||(y[6]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(g,{errorMessage:o(F)},{default:L(()=>[e("div",Gn,[e("table",jn,[y[7]||(y[7]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"Released"),e("th",null,"Description")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o(S).items,(v,A)=>(t(),s("tr",{key:v.videoId},[e("td",{textContent:b(o(p)(A)),class:"text-center"},null,8,Yn),e("td",null,[q(u,{to:`${d.urlView}/${v.videoId}`,class:"d-inline-block text-truncate"},{default:L(()=>[G(b(v.title),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(B,null,z(v.genres,k=>(t(),s("span",Wn,b(k.genreName),1))),256))])]),e("td",Kn,[e("div",null,b(o(Q).moment.utc(v.durationInMillis).format("HH:mm:ss")),1)]),e("td",Jn,[e("div",null,b(o(Q).moment.utc(v.dateReleased).format("ll")),1)]),e("td",null,b(v.description),1)]))),128))]),_:1},512),[[Te,o(S).items.length>0]])])]),q(l,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Zn={key:0},er={class:"row row-cols-1 row-cols-sm-2"},tr={class:"col"},sr=["id"],or={class:"col"},ar={class:"col"},lr={class:"form-floating mb-2"},nr={class:"col"},rr={class:"form-floating mb-2"},ir={class:"col"},dr={class:"form-floating mb-2"},ur={class:"col"},cr={class:"form-floating mb-2"},mr={class:"row row-cols-sm-2"},fr={class:"col"},pr={class:"form-floating mb-2"},vr={class:"col"},gr={class:"form-floating mb-2"},br={class:"row row-cols-sm-2"},yr={class:"col"},$r={class:"form-floating mb-2"},wr={class:"col"},hr={class:"form-floating mb-2"},kr={class:"mt-2"},_r={class:"badge bg-info me-1"},Sr={class:"table-responsive"},Tr={class:"table table-hover mb-0 caption-top"},Mr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null,hls:null});ie(async()=>{await p()});const p=async()=>{const V=r;if(!h.value)try{h.value=!0,P.value="",r.item=null;const n=`/api/v1/videos/${f.id}/`;await Q.get(n).then(y=>{V.item=y.data,V.item.duration=M.moment.utc(V.item.durationInMillis).format("HH:mm:ss"),V.item.dateReleased=M.moment.utc(V.item.dateReleased).format("ll")}),a()}catch(n){P.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{h.value=!1}},x=async()=>{await p()},a=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),r.hls&&r.hls.destroy();const n=`video-${r.item.videoId}`;var V=document.getElementById(n);const y=r.item.hlsBaseUrl+r.item.hlsPath;r.hls=M.createHlsStream(V,y)}};return(V,n)=>{const y=Z("router-link"),u=Z("PageHeader"),c=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(u,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:L(()=>[q(y,{to:`${d.urlEdit}/${d.id}`,class:"btn btn-primary"},{default:L(()=>n[10]||(n[10]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:n[0]||(n[0]=l=>x()),class:"ms-2 btn btn-secondary"},n[11]||(n[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[1]||(n[1]=l=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(c,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",Zn,[e("div",null,[e("div",er,[e("div",tr,[e("video",{id:`video-${r.item.videoId}`,controls:"",class:"card-img-top object-fit-contain border"},null,8,sr)]),e("div",or,[e("div",ar,[e("div",lr,[C(e("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>r.item.title=l),type:"text",class:"form-control",id:"title",placeholder:"Title",readonly:""},null,512),[[Y,r.item.title]]),n[13]||(n[13]=e("label",{for:"title"},"Title",-1))])]),e("div",nr,[e("div",rr,[C(e("input",{"onUpdate:modelValue":n[3]||(n[3]=l=>r.item.dateReleased=l),type:"text",class:"form-control",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Y,r.item.dateReleased]]),n[14]||(n[14]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",ir,[e("div",dr,[C(e("input",{"onUpdate:modelValue":n[4]||(n[4]=l=>r.item.duration=l),type:"text",class:"form-control",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Y,r.item.duration]]),n[15]||(n[15]=e("label",{for:"duration"},"Duration",-1))])]),e("div",ur,[e("div",cr,[C(e("textarea",{"onUpdate:modelValue":n[5]||(n[5]=l=>r.item.description=l),type:"text",class:"form-control",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Y,r.item.description]]),n[16]||(n[16]=e("label",{for:"description"},"Description",-1))])])])]),e("div",mr,[e("div",fr,[e("div",pr,[C(e("input",{"onUpdate:modelValue":n[6]||(n[6]=l=>r.item.rawBaseUrl=l),class:"form-control",id:"rawBaseUrl",readonly:""},null,512),[[Y,r.item.rawBaseUrl]]),n[17]||(n[17]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",vr,[e("div",gr,[C(e("input",{"onUpdate:modelValue":n[7]||(n[7]=l=>r.item.rawPath=l),class:"form-control",id:"rawPath",readonly:""},null,512),[[Y,r.item.rawPath]]),n[18]||(n[18]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",br,[e("div",yr,[e("div",$r,[C(e("input",{"onUpdate:modelValue":n[8]||(n[8]=l=>r.item.hlsBaseUrl=l),class:"form-control",id:"hlsBaseUrl",readonly:""},null,512),[[Y,r.item.hlsBaseUrl]]),n[19]||(n[19]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",wr,[e("div",hr,[C(e("input",{"onUpdate:modelValue":n[9]||(n[9]=l=>r.item.hlsPath=l),class:"form-control",id:"hlsPath",readonly:""},null,512),[[Y,r.item.hlsPath]]),n[20]||(n[20]=e("label",{for:"hlsPath"},"HLS Path",-1))])])])]),e("div",kr,[e("div",null,[(t(!0),s(B,null,z(r.item.genres,l=>(t(),s("span",_r,b(l.genreName),1))),256))])]),e("div",Sr,[e("table",Tr,[n[21]||(n[21]=e("caption",null,"VOD Sources",-1)),n[22]||(n[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.vodSources,(l,g)=>(t(),s("tr",{key:l.vodSourceId},[e("td",null,b(g+1),1),e("td",null,[q(y,{to:`${f.urlViewVodSource}/${encodeURIComponent(l.vodSourceId)}/${o($)()}`},{default:L(()=>[G(b(l.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,r.item.vodSources.length>0]])])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Ir=["disabled"],Cr={class:"form-floating mb-2"},Pr={key:0,class:"d-block invalid-feedback"},xr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),D=d,i=ce({lookups:{},item:{name:null}}),S={item:{name:{required:ee.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0}}},$=$e(S,i);ie(async()=>{});const W=async()=>{const X=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const p=P.clone(X.item);await F.post("/api/v1/sourcegroups/",p).then(x=>{N.success("Add Source Group","Source group added.",{onClose:async()=>{const a=`${D.urlView}/${x.data}`;await K.push(a)}})})}catch(p){T.value=P.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{_.value=!1}};return(X,r)=>{const p=Z("router-link"),x=Z("PageHeader"),a=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(x,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:r[0]||(r[0]=V=>W()),class:"btn btn-primary"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ir),q(p,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(a,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[e("div",null,[e("div",Cr,[C(e("input",{"onUpdate:modelValue":r[1]||(r[1]=V=>i.item.name=V),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Y,i.item.name]]),r[4]||(r[4]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",Pr,[(t(!0),s(B,null,z(o($).item.name.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Vr={key:0,class:"d-flex justify-content-end"},Ur=["disabled"],Ar={key:0},Or={class:"row row-cols-1 row-cols-sm-2"},Dr={class:"col"},Hr={class:"form-floating mb-2"},Lr={key:0,class:"d-block invalid-feedback"},Er={class:"col"},Br={class:"form-floating mb-2"},qr={key:0,class:"d-block invalid-feedback"},Nr={class:"row row-cols-sm-2"},Rr={class:"col"},zr={class:"form-floating mb-2"},Fr={class:"form-floating mb-2"},Gr={key:0,class:"d-block invalid-feedback"},jr={class:"form-floating mb-2"},Yr={key:0,class:"d-block invalid-feedback"},Wr={class:"col"},Kr={class:"form-floating mb-2"},Ye={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),D=d,i=ce({editorElementId:"editor",htmlContent:"",item:null}),S={item:{title:{required:ee.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},eidr:{required:ee.withMessage("eidr is required.",te),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ee.withMessage("eidrPrefix is required.",te),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ee.withMessage("Content is required.",te),$autoDirty:!0,$lazy:!0}},$=$e(S,i);ie(async()=>{await r()});const W=()=>{const x=i;var a=document.getElementById(x.editorElementId);a.innerHTML=x.htmlContent},X=x=>{const a=i;a.htmlContent=x.target.innerHTML;var V=document.getElementById(a.editorElementId);V.value=a.htmlContent},r=async()=>{const x=i;if(!_.value)try{_.value=!0,i.item=null,await F.get(`/api/v1/movies/${D.id}`).then(a=>{x.item=a.data,x.htmlContent=x.item.description}),W()}catch(a){T.value=P.getErrorMessageAsHtml(a)}finally{_.value=!1}},p=async()=>{const x=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const V=P.clone(x.item);V.description=x.htmlContent,await F.put("/api/v1/movies",V).then(n=>{N.success("Edit Movie","Movie edited",{onClose:async()=>{const y=`${D.urlView}/${D.id}`;await K.push(y)}})})}catch(V){T.value=P.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{_.value=!1}};return(x,a)=>{const V=Z("router-link"),n=Z("PageHeader"),y=Z("PageBody");return t(),s("div",null,[q(n,{"page-icon":"fas fa-fw fa-film",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:L(()=>[i.item?(t(),s("div",Vr,[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:a[0]||(a[0]=u=>p()),class:"btn btn-primary"},a[7]||(a[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ur),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},a[8]||(a[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),q(V,{to:`${D.urlView}/${D.id}`,class:"ms-1 btn btn-secondary"},{default:L(()=>a[9]||(a[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):H("",!0)]),_:1},8,["pageTitle"]),q(y,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[i.item?(t(),s("div",Ar,[e("div",Or,[e("div",Dr,[e("div",Hr,[C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=u=>i.item.eidrPrefix=u),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Y,i.item.eidrPrefix]]),a[10]||(a[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o($).item.eidrPrefix.$error?(t(),s("div",Lr,[(t(!0),s(B,null,z(o($).item.eidrPrefix.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])]),e("div",Er,[e("div",Br,[C(e("input",{"onUpdate:modelValue":a[2]||(a[2]=u=>i.item.eidr=u),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Y,i.item.eidr]]),a[11]||(a[11]=e("label",{for:"title"},"Eidr",-1)),o($).item.eidr.$error?(t(),s("div",qr,[(t(!0),s(B,null,z(o($).item.eidr.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])])]),e("div",Nr,[e("div",Rr,[e("div",zr,[C(e("input",{"onUpdate:modelValue":a[3]||(a[3]=u=>i.item.releaseYear=u),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Y,i.item.releaseYear]]),a[12]||(a[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Fr,[C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=u=>i.item.title=u),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Y,i.item.title]]),a[13]||(a[13]=e("label",{for:"title"},"Title",-1)),o($).item.title.$error?(t(),s("div",Gr,[(t(!0),s(B,null,z(o($).item.title.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",jr,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:a[5]||(a[5]=u=>X(u))},null,32),a[14]||(a[14]=e("label",{for:"editor"},"Content",-1)),o($).htmlContent.$error?(t(),s("div",Yr,[(t(!0),s(B,null,z(o($).htmlContent.$errors,u=>(t(),s("div",{key:u.$uid},b(u.$message),1))),128))])):H("",!0)])]),e("div",Wr,[e("div",Kr,[C(e("textarea",{"onUpdate:modelValue":a[6]||(a[6]=u=>i.item.metadata=u),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Y,i.item.metadata]]),a[15]||(a[15]=e("label",{for:"title"},"Metadata",-1))])])])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},Jr={components:{Page:Ye},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Qr(d,f,w,_,h,R){const T=Z("Page");return t(),ue(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Xr=Me(Jr,[["render",Qr]]),Zr={class:"ms-2"},ei={class:"input-group"},ti={class:"table-responsive border shadow-sm"},si={class:"table table-hover mb-0"},oi=["textContent"],ai={key:0,class:"fas fa-fw fa-check-circle text-success"},li="/api/v1/sourcegroups/search",ni={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:X,search:r,getRowNumber:p,setSelected:x,isSelected:a}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${w==null?void 0:w.userId}/source-groups/search`,baseUrl:li,filter:{updateUrl:!0}});return ie(async()=>{$(),await r()}),(V,n)=>{const y=Z("router-link"),u=Z("PageHeader"),c=Z("m-pagination"),l=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(u,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(h)},{default:L(()=>[q(y,{to:d.urlAdd,class:"btn btn-primary"},{default:L(()=>n[3]||(n[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zr,[e("div",ei,[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=g=>o(S).query.criteria=g),onKeyup:n[1]||(n[1]=Oe(g=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Y,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:n[2]||(n[2]=g=>o(r)(1))},n[4]||(n[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(l,{errorMessage:o(F)},{default:L(()=>[e("div",ti,[e("table",si,[n[5]||(n[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o(S).items,(g,v)=>(t(),s("tr",{key:g.sourceGroupId},[e("td",{textContent:b(o(p)(v)),class:"text-center"},null,8,oi),e("td",null,[q(y,{to:`${d.urlView}/${g.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:L(()=>[g.arn?(t(),s("span",ai)):H("",!0),G(" "+b(g.name),1)]),_:2},1032,["to"])]),e("td",null,b(g.channelOutputs),1),e("td",null,b(g.packageConfigurations),1)]))),128))]),_:1},512),[[Te,o(S).items.length>0]])])]),q(c,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ri={key:0},ii={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},di={class:"nav-item",role:"presentation"},ui={class:"nav-item",role:"presentation"},ci={class:"nav-item",role:"presentation"},mi={class:"tab-content",id:"myTabContent"},fi={class:"mt-2"},pi={class:"col"},vi={class:"form-floating mb-2"},gi={class:"mt-2"},bi={class:"table-responsive border"},yi={class:"table table-hover mb-0"},$i={class:"mt-2"},wi={class:"table-responsive border"},hi={class:"table table-hover mb-0"},ki={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null}),p=re();ie(async()=>{await n(),p.value=M.getPageTab("sourceGroup")||"information-tab"});const x=c=>{M.setPageTab("sourceGroup",c),p.value=c},a=c=>c!==p.value?"":"active",V=c=>c!==p.value?"":"show active",n=async()=>{const c=r;if(!h.value)try{h.value=!0,P.value="",r.item=null;const l=`/api/v1/sourcegroups/${f.id}/`;await Q.get(l).then(g=>{c.item=g.data})}catch(l){P.value=M.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{h.value=!1}},y=async()=>{if(!h.value)try{h.value=!0,P.value="";const c=`/api/v1/sourcegroups/${f.id}/`;await Q.delete(c).then(l=>{D.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const g=`${f.urlMain}/`;await N.push(g)}})})}catch(c){P.value=M.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{h.value=!1}},u=async()=>{await n()};return(c,l)=>{const g=Z("PageHeader"),v=Z("router-link"),A=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(g,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_)},{default:L(()=>[e("button",{onClick:l[0]||(l[0]=k=>y()),class:"ms-1 btn btn-warning"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:l[1]||(l[1]=k=>u()),class:"ms-2 btn btn-secondary"},l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=k=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},l[9]||(l[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(A,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",ri,[e("div",null,[e("ul",ii,[e("li",di,[e("button",{onClick:l[3]||(l[3]=k=>x("information-tab")),class:ne([a("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ui,[e("button",{onClick:l[4]||(l[4]=k=>x("channelOutputs-tab")),class:ne([a("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",ci,[e("button",{onClick:l[5]||(l[5]=k=>x("packageConfigurations-tab")),class:ne([a("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",mi,[e("div",{class:ne([V("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",fi,[e("div",pi,[e("div",vi,[C(e("input",{"onUpdate:modelValue":l[6]||(l[6]=k=>r.item.name=k),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.name]]),l[10]||(l[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:ne([V("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",gi,[e("div",bi,[e("table",yi,[l[11]||(l[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.channelOutputs,(k,j)=>(t(),s("tr",{key:k.channelOutputId},[e("td",null,b(j+1),1),e("td",null,[q(v,{to:`${d.urlViewChannel}/${k.channelId}/${o($)()}`},{default:L(()=>[G(b(k.manifestName),1)]),_:2},1032,["to"])]),e("td",null,b(k.outputType),1)]))),128))]),_:1},512),[[Te,r.item.channelOutputs.length>0]])])])])],2),e("div",{class:ne([V("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",$i,[e("div",wi,[e("table",hi,[l[12]||(l[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.packageConfigurations,(k,j)=>(t(),s("tr",{key:k.packageConfigurationId},[e("td",null,b(j+1),1),e("td",null,[q(v,{to:`${d.urlViewVodSource}/${k.vodSourceId}/${o($)()}`},{default:L(()=>[G(b(k.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,b(k.path),1),e("td",null,b(k.type),1)]))),128))]),_:1},512),[[Te,r.item.packageConfigurations.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},_i=["disabled"],Si={class:"form-floating mb-2"},Ti={key:0,class:"d-block invalid-feedback"},Mi={class:"form-floating mb-2"},Ii={key:0,class:"d-block invalid-feedback"},Ci={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),D=d,i=ce({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),S={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:ee.withMessage("HTTP Configuration Base Url is required.",te),$autoDirty:!0,$lazy:!0}}},$=$e(S,i);ie(async()=>{});const W=async()=>{const X=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const p=P.clone(X.item);await F.post("/api/v1/sourcelocations/",p).then(x=>{N.success("Add Source Location","Source location added.",{onClose:async()=>{const a=`${D.urlView}/${x.data}`;await K.push(a)}})})}catch(p){T.value=P.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{_.value=!1}};return(X,r)=>{const p=Z("router-link"),x=Z("PageHeader"),a=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(x,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:r[0]||(r[0]=V=>W()),class:"btn btn-primary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_i),q(p,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(a,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[e("div",null,[e("div",Si,[C(e("input",{"onUpdate:modelValue":r[1]||(r[1]=V=>i.item.name=V),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Y,i.item.name]]),r[5]||(r[5]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",Ti,[(t(!0),s(B,null,z(o($).item.name.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):H("",!0)]),e("div",Mi,[C(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=V=>i.item.httpConfigurationBaseUrl=V),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Y,i.item.httpConfigurationBaseUrl]]),r[6]||(r[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o($).item.httpConfigurationBaseUrl.$error?(t(),s("div",Ii,[(t(!0),s(B,null,z(o($).item.httpConfigurationBaseUrl.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Pi={components:{Page:Ye},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function xi(d,f,w,_,h,R){const T=Z("Page");return t(),ue(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Vi=Me(Pi,[["render",xi]]),Ui={class:"ms-1"},Ai={class:"input-group"},Oi={class:"table-responsive border shadow-sm"},Di={class:"table table-hover mb-0"},Hi=["textContent"],Li={key:0,class:"fas fa-fw fa-check-circle text-success"},Ei=["onUpdate:modelValue"],Bi="/api/v1/sourcelocations/search",qi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:X,search:r,getRowNumber:p,setSelected:x,isSelected:a}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${w==null?void 0:w.userId}/source-locations/search`,baseUrl:Bi,filter:{updateUrl:!0}}),V=we(()=>{const u=S.value;return u&&u.items?u.items.filter(g=>g.selected):null});ie(async()=>{$(),await r()});const n=async()=>{if(!(V.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!R.value){F.value=null;try{R.value=!0;const l={sourceLocationIds:V.value.map(g=>g.sourceLocationId)};await N.post("/api/v1/sourceLocations/publish/",l).then(g=>{M.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),R.value=!1,await r()}catch(c){F.value=Q.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{R.value=!1}}},y=async()=>{if(!(V.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!R.value){F.value=null;try{R.value=!0;const l={sourceLocationIds:V.value.map(g=>g.sourceLocationId)};await N.post("/api/v1/sourceLocations/unpublish/",l).then(g=>{M.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),R.value=!1,await r()}catch(c){F.value=Q.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{R.value=!1}}};return(u,c)=>{const l=Z("router-link"),g=Z("PageHeader"),v=Z("m-pagination"),A=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(g,{"page-icon":"fas fa-fw fa-building",pageTitle:o(h)},{default:L(()=>[V.value.length?(t(),s(B,{key:0},[e("button",{onClick:n,class:"btn btn-primary"},c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:y,class:"btn btn-warning ms-1"},c[4]||(c[4]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0),q(l,{to:d.urlAdd,class:"btn btn-primary ms-2"},{default:L(()=>c[5]||(c[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ui,[e("div",Ai,[C(e("input",{"onUpdate:modelValue":c[0]||(c[0]=k=>o(S).query.criteria=k),onKeyup:c[1]||(c[1]=Oe(k=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Y,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[2]||(c[2]=k=>o(r)(1))},c[6]||(c[6]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(A,{errorMessage:o(F)},{default:L(()=>[e("div",Oi,[e("table",Di,[c[7]||(c[7]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url"),e("td")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o(S).items,(k,j)=>(t(),s("tr",{key:k.sourceLocationId},[e("td",{textContent:b(o(p)(j)),class:"text-center"},null,8,Hi),e("td",null,[q(l,{to:`${d.urlView}/${k.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:L(()=>[k.arn?(t(),s("span",Li)):H("",!0),G(" "+b(k.name),1)]),_:2},1032,["to"])]),e("td",null,b(k.httpConfigurationBaseUrl),1),e("td",null,[C(e("input",{"onUpdate:modelValue":E=>k.selected=E,type:"checkbox"},null,8,Ei),[[Pe,k.selected]])])]))),128))]),_:1},512),[[Te,o(S).items.length>0]])])]),q(v,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ni={key:0},Ri={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},zi={class:"nav-item",role:"presentation"},Fi={class:"nav-item",role:"presentation"},Gi={class:"nav-item",role:"presentation"},ji={class:"tab-content",id:"myTabContent"},Yi={class:"mt-2"},Wi={class:"col"},Ki={class:"form-floating mb-2"},Ji={class:"col"},Qi={class:"form-floating mb-2"},Xi={class:"mt-2"},Zi={class:"table-responsive border"},ed={class:"table table-hover mb-0"},td={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},sd={class:"mt-2"},od={class:"table-responsive border"},ad={class:"table table-hover mb-0"},ld={key:0,class:"fas fa-fw fa-check-circle text-success"},nd={class:"badge bg-info"},rd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null}),p=re();ie(async()=>{await n(),p.value=M.getPageTab("sourceLocation")||"information-tab"});const x=l=>{M.setPageTab("sourceLocation",l),p.value=l},a=l=>l!==p.value?"":"active",V=l=>l!==p.value?"":"show active",n=async()=>{const l=r;if(!h.value)try{h.value=!0,P.value="",r.item=null;const g=`/api/v1/sourcelocations/${f.id}/`;await Q.get(g).then(v=>{l.item=v.data})}catch(g){P.value=M.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{h.value=!1}},y=async()=>{await n()},u=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!h.value){P.value=null;try{h.value=!0;const g={sourceLocationIds:[f.id]};await Q.post("/api/v1/sourcelocations/publish/",g).then(v=>{D.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),h.value=!1,await y()}catch(g){P.value=M.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{h.value=!1}}},c=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!h.value){P.value=null;try{h.value=!0;const g={sourceLocationIds:[f.id]};await Q.post("/api/v1/sourcelocations/unpublish/",g).then(v=>{D.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),h.value=!1,await y()}catch(g){P.value=M.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{h.value=!1}}};return(l,g)=>{const v=Z("PageHeader"),A=Z("router-link"),k=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(v,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_)},{default:L(()=>[r.item?(t(),s(B,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:g[0]||(g[0]=j=>c()),class:"ms-1 btn btn-warning"},g[9]||(g[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=j=>u()),class:"ms-1 btn btn-primary"},g[10]||(g[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),e("button",{onClick:g[2]||(g[2]=j=>y()),class:"ms-2 btn btn-secondary"},g[11]||(g[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:g[3]||(g[3]=j=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(k,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",Ni,[e("div",null,[e("ul",Ri,[e("li",zi,[e("button",{onClick:g[4]||(g[4]=j=>x("information-tab")),class:ne([a("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Fi,[e("button",{onClick:g[5]||(g[5]=j=>x("vodSources-tab")),class:ne([a("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Gi,[e("button",{onClick:g[6]||(g[6]=j=>x("programs-tab")),class:ne([a("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",ji,[e("div",{class:ne([V("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Yi,[e("div",Wi,[e("div",Ki,[C(e("input",{"onUpdate:modelValue":g[7]||(g[7]=j=>r.item.name=j),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.name]]),g[13]||(g[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Ji,[e("div",Qi,[C(e("input",{"onUpdate:modelValue":g[8]||(g[8]=j=>r.item.httpConfigurationBaseUrl=j),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Y,r.item.httpConfigurationBaseUrl]]),g[14]||(g[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:ne([V("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Xi,[e("div",Zi,[e("table",ed,[g[15]||(g[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.vodSources,(j,E)=>(t(),s("tr",{key:j.vodSourceId},[e("td",null,b(E+1),1),e("td",null,[j.arn?(t(),s("span",td)):H("",!0),q(A,{to:`${f.urlViewVodSource}/${encodeURIComponent(j.vodSourceId)}/${o($)()}`},{default:L(()=>[G(b(j.name),1)]),_:2},1032,["to"])]),e("td",null,[q(A,{to:`${f.urlViewVideo}/${encodeURIComponent(j.video.videoId)}/${o($)()}`},{default:L(()=>[G(b(j.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,b(o(M).moment.utc(j.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Te,r.item.vodSources.length>0]])])])])],2),e("div",{class:ne([V("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",sd,[e("div",od,[e("table",ad,[g[17]||(g[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.programs,(j,E)=>(t(),s("tr",{key:j.programId},[e("td",null,b(E+1),1),e("td",null,[q(A,{to:`${f.urlViewChannel}/${encodeURIComponent(j.channel.channelId)}/${o($)()}`},{default:L(()=>[G(b(j.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[j.arn?(t(),s("span",ld)):H("",!0),G(" "+b(j.name)+" ",1),e("div",null," Start: "+b(o(M).moment.utc(j.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+b(o(M).moment.utc(j.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[G(b(o(M).moment(j.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",nd,b(o(M).moment(j.dateScheduledStart).fromNow()),1)])]),g[16]||(g[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Te,r.item.programs.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},id=["disabled"],dd={class:"col"},ud={class:"form-floating mb-2"},cd={key:0,class:"d-block invalid-feedback"},md={class:"row row-cols-1 row-cols-sm-2"},fd={class:"col"},pd={class:"form-floating mb-2"},vd=["value"],gd={key:0,class:"d-block invalid-feedback"},bd={class:"col"},yd={class:"form-floating mb-2"},$d=["disabled"],wd=["value"],hd={key:0,class:"d-block invalid-feedback"},kd={class:"row row-cols-1 row-cols-sm-3"},_d={class:"col"},Sd={class:"form-check"},Td={class:"col"},Md={class:"form-check"},Id={class:"col"},Cd={class:"form-check"},Pd={key:0},xd={class:"d-flex flex-row justify-content-between"},Vd={key:0,class:"d-inline invalid-feedback"},Ud={class:"table-responsive border mt-1"},Ad={class:"table mb-0 caption-top"},Od={class:"input-group mb-1"},Dd=["onUpdate:modelValue"],Hd=["onUpdate:modelValue"],Ld=["value"],Ed=["onUpdate:modelValue"],Bd=["onClick"],qd={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),D=d,i=ce({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[],isAdBreak:!1,isFillerSlate:!1,isContent:!1}}),S=(y,u,c)=>y.length>0,$={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:ee.withMessage("Video is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("Source Locaton is required.",te),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ee.withMessage("PackageConfigurations is required.",S),$each:ee.forEach({path:{required:ee.withMessage("Path is required.",te)},sourceGroupId:{required:ee.withMessage("Source Group is required.",te)}}),$autoDirty:!0,$lazy:!0}}},W=$e($,i);ie(async()=>{await X(),await r()});const X=async()=>{try{await F.get("/api/v1/sourcegroups/lookup/").then(u=>{i.lookups.sourceGroups=u.data})}catch(y){T.value=P.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},r=async()=>{try{if(await F.get("/api/v1/sourcelocations/lookup/").then(u=>{i.lookups.sourceLocations=u.data}),i.lookups.sourceLocations.length===1){const u=i.lookups.sourceLocations[0];i.selected.sourceLocation=u,await p()}}catch(y){T.value=P.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},p=async()=>{const y=i.selected.sourceLocation;i.item.sourceLocationId=y.id,await x(y.baseUrl)},x=async y=>{try{const u=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(y)}`;await F.get(u).then(c=>{i.lookups.videos=c.data,i.lookups.videos.length===1&&(i.item.videoId=i.lookups.videos[0].id)})}catch(u){T.value=P.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},a=async()=>{const y=i;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const c=P.clone(y.item);c.videoId=c.video.id,delete c.video,await F.post("/api/v1/vodSources/",c).then(l=>{debugger;N.success("Add VOD Source","VOD source added",{onClose:async()=>{const g=`${D.urlView}/${l.data}`;await K.push(g)}})})}catch(c){T.value=P.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}},V=()=>{const y={path:"",sourceGroupId:null,type:"HLS"},u=i.item.video;u&&(y.path=u.hlsPath),i.item.packageConfigurations.push(y)},n=y=>{i.item.packageConfigurations.splice(y,1)};return(y,u)=>{const c=Z("router-link"),l=Z("PageHeader"),g=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(l,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:u[0]||(u[0]=v=>a()),class:"btn btn-primary"},u[9]||(u[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,id),q(c,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>u[10]||(u[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(g,{errorMessage:o(T),vuelidate:o(W)},{default:L(()=>[e("div",null,[e("div",dd,[e("div",ud,[C(e("input",{"onUpdate:modelValue":u[1]||(u[1]=v=>i.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,i.item.name]]),u[11]||(u[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",cd,[(t(!0),s(B,null,z(o(W).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):H("",!0)])]),e("div",md,[e("div",fd,[e("div",pd,[C(e("select",{"onUpdate:modelValue":u[2]||(u[2]=v=>i.selected.sourceLocation=v),onChange:u[3]||(u[3]=v=>p()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,z(i.lookups.sourceLocations,v=>(t(),s("option",{value:v},b(v.name),9,vd))),256))],544),[[fe,i.selected.sourceLocation]]),u[12]||(u[12]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",gd,[(t(!0),s(B,null,z(o(W).item.sourceLocationId.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):H("",!0)])]),e("div",bd,[e("div",yd,[C(e("select",{"onUpdate:modelValue":u[4]||(u[4]=v=>i.item.video=v),onChange:u[5]||(u[5]=v=>i.item.videoId=i.item.video.id),class:"form-select",id:"videoId",disabled:i.item.packageConfigurations.length>0},[(t(!0),s(B,null,z(i.lookups.videos,v=>(t(),s("option",{value:v},b(v.name),9,wd))),256))],40,$d),[[fe,i.item.video]]),u[13]||(u[13]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",hd,[(t(!0),s(B,null,z(o(W).item.videoId.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):H("",!0)])])]),e("div",kd,[e("div",_d,[e("div",Sd,[C(e("input",{"onUpdate:modelValue":u[6]||(u[6]=v=>i.item.isAdBreak=v),class:"form-check-input",type:"checkbox",value:"",id:"isAdBreak"},null,512),[[Pe,i.item.isAdBreak]]),u[14]||(u[14]=e("label",{class:"form-check-label",for:"isAdBreak"}," Is AdBreak ",-1))])]),e("div",Td,[e("div",Md,[C(e("input",{"onUpdate:modelValue":u[7]||(u[7]=v=>i.item.isFillerSlate=v),class:"form-check-input",type:"checkbox",value:"",id:"isFillerSlate"},null,512),[[Pe,i.item.isFillerSlate]]),u[15]||(u[15]=e("label",{class:"form-check-label",for:"isFillerSlate"}," Is Filler Slate ",-1))])]),e("div",Id,[e("div",Cd,[C(e("input",{"onUpdate:modelValue":u[8]||(u[8]=v=>i.item.isContent=v),class:"form-check-input",type:"checkbox",value:"",id:"isContent"},null,512),[[Pe,i.item.isContent]]),u[16]||(u[16]=e("label",{class:"form-check-label",for:"isContent"}," Is Content ",-1))])])]),u[23]||(u[23]=e("hr",null,null,-1)),i.item.videoId?(t(),s("div",Pd,[e("div",xd,[e("fieldset",null,[e("legend",null,[u[18]||(u[18]=G(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Vd,u[17]||(u[17]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("button",{onClick:V,class:"btn btn-outline-primary"},u[19]||(u[19]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),G("Package Configuration ")]))]),e("div",Ud,[e("table",Ad,[u[22]||(u[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(i.item.packageConfigurations,(v,A)=>(t(),s("tr",null,[e("td",null,b(A+1),1),e("td",null,[e("div",Od,[C(e("input",{"onUpdate:modelValue":k=>v.path=k,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Dd),[[Y,v.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},z(o(W).item.packageConfigurations.$each.$response.$errors[A].path,k=>(t(),s("div",{key:k,class:"d-block invalid-feedback"},b(k.$message),1))),128)):H("",!0)]),e("td",null,[e("div",null,[C(e("select",{"onUpdate:modelValue":k=>v.sourceGroupId=k,class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,z(i.lookups.sourceGroups,k=>(t(),s("option",{value:k.id},b(k.name),9,Ld))),256))],8,Hd),[[fe,v.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},z(o(W).item.packageConfigurations.$each.$response.$errors[A].path,k=>(t(),s("div",{key:k,class:"d-block invalid-feedback"},b(k.$message),1))),128)):H("",!0)])]),e("td",null,[C(e("select",{"onUpdate:modelValue":k=>v.type=k,class:"form-select",id:"type"},u[20]||(u[20]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Ed),[[fe,v.type]])]),e("td",null,[e("button",{onClick:k=>n(A),class:"btn btn-outline-warning"},u[21]||(u[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Bd)])]))),256))])])])])):H("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Nd=["disabled"],Rd={key:0},zd={class:"col"},Fd={class:"form-floating mb-2"},Gd={key:0,class:"d-block invalid-feedback"},jd={class:"row row-cols-1 row-cols-sm-2"},Yd={class:"col"},Wd={class:"form-floating mb-2"},Kd=["value"],Jd={key:0,class:"d-block invalid-feedback"},Qd={class:"col"},Xd={class:"form-floating mb-2"},Zd=["disabled"],eu=["value"],tu={key:0,class:"d-block invalid-feedback"},su={class:"row row-cols-1 row-cols-sm-3"},ou={class:"col"},au={class:"form-check"},lu={class:"col"},nu={class:"form-check"},ru={class:"col"},iu={class:"form-check"},du={key:0},uu={class:"d-flex flex-row justify-content-between mt-3"},cu={key:0,class:"d-inline invalid-feedback"},mu={class:"table-responsive border mt-1"},fu={class:"table mb-0 caption-top"},pu={class:"input-group mb-1"},vu=["onUpdate:modelValue"],gu=["onUpdate:modelValue"],bu=["value"],yu=["onUpdate:modelValue"],$u=["onClick"],wu={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),D=d,i=ce({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[],isAdBreak:!1,isFillerSlate:!1,isContent:!1}}),S=(c,l,g)=>c.length>0,$={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:ee.withMessage("Video is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("Source Locaton is required.",te),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ee.withMessage("PackageConfigurations is required.",S),$each:ee.forEach({path:{required:ee.withMessage("Path is required.",te)},sourceGroupId:{required:ee.withMessage("Source Group is required.",te)}})}}},W=$e($,i);ie(async()=>{await X(),await p(),await x()});const X=async()=>{await r()},r=async()=>{const c=i;if(!_.value)try{_.value=!0,T.value="",i.item=null;const l=`/api/v1/vodsources/${D.id}/`;await F.get(l).then(g=>{c.item=g.data;const v=c.item,A=P.moment.utc(c.item.video.durationInMillis).format("HH:mm:ss");v.video.duration=A;const k=v.video.hlsPath,j=k.substring(k.lastIndexOf("/")+1);i.item.isAdBreak=i.item.types.some(E=>E.type===1),i.item.isFillerSlate=i.item.types.some(E=>E.type===2),i.item.isContent=i.item.types.some(E=>E.type===3)})}catch(l){T.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},p=async()=>{try{await F.get("/api/v1/sourcegroups/lookup/").then(l=>{i.lookups.sourceGroups=l.data})}catch(c){T.value=P.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},x=async()=>{try{if(await F.get("/api/v1/sourcelocations/lookup/").then(l=>{i.lookups.sourceLocations=l.data}),i.lookups.sourceLocations.length>0){const l=i.lookups.sourceLocations.find(g=>g.id===i.item.sourceLocationId);i.selected.sourceLocation=l,await a()}}catch(c){T.value=P.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},a=async()=>{const c=i.selected.sourceLocation;i.item.sourceLocationId=c.id,await V(c.baseUrl)},V=async c=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(c)}`;await F.get(l).then(g=>{if(i.lookups.videos=g.data,i.lookups.videos.length>0){const v=i.lookups.videos.find(A=>A.id==i.item.videoId);i.selected.video=v}})}catch(l){T.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},n=async()=>{const c=i;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const g=P.clone(c.item);g.videoId=i.selected.video.id,delete g.video,await F.put("/api/v1/vodsources/",g).then(v=>{N.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const A=`${D.urlView}/${D.id}`;await K.push(A)}})})}catch(g){T.value=P.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}},y=()=>{const c={path:"",sourceGroupId:null,type:"HLS"},l=i.item.video;l&&(c.path=l.hlsPath),i.item.packageConfigurations.push(c)},u=c=>{i.item.packageConfigurations.splice(c,1)};return(c,l)=>{const g=Z("router-link"),v=Z("PageHeader"),A=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(v,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:l[0]||(l[0]=k=>n()),class:"btn btn-primary"},l[9]||(l[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Nd),e("button",{onClick:l[1]||(l[1]=k=>X()),class:"btn btn-secondary ms-2"},l[10]||(l[10]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),q(g,{to:`${d.urlView}/${d.id}`,class:"btn btn-secondary ms-1"},{default:L(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(A,{errorMessage:o(T),vuelidate:o(W)},{default:L(()=>[i.item?(t(),s("div",Rd,[e("div",zd,[e("div",Fd,[C(e("input",{"onUpdate:modelValue":l[2]||(l[2]=k=>i.item.name=k),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,i.item.name]]),l[12]||(l[12]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Gd,[(t(!0),s(B,null,z(o(W).item.name.$errors,k=>(t(),s("div",{key:k.$uid},b(k.$message),1))),128))])):H("",!0)])]),e("div",jd,[e("div",Yd,[e("div",Wd,[C(e("select",{"onUpdate:modelValue":l[3]||(l[3]=k=>i.selected.sourceLocation=k),onChange:l[4]||(l[4]=k=>a()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,z(i.lookups.sourceLocations,k=>(t(),s("option",{value:k},b(k.name),9,Kd))),256))],544),[[fe,i.selected.sourceLocation]]),l[13]||(l[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Jd,[(t(!0),s(B,null,z(o(W).item.sourceLocationId.$errors,k=>(t(),s("div",{key:k.$uid},b(k.$message),1))),128))])):H("",!0)])]),e("div",Qd,[e("div",Xd,[C(e("select",{"onUpdate:modelValue":l[5]||(l[5]=k=>i.selected.video=k),class:"form-select",id:"videoId",disabled:i.item.packageConfigurations.length>0},[(t(!0),s(B,null,z(i.lookups.videos,k=>(t(),s("option",{value:k},b(k.name),9,eu))),256))],8,Zd),[[fe,i.selected.video]]),l[14]||(l[14]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",tu,[(t(!0),s(B,null,z(o(W).item.videoId.$errors,k=>(t(),s("div",{key:k.$uid},b(k.$message),1))),128))])):H("",!0)])])]),l[24]||(l[24]=e("h5",null," Type ",-1)),e("div",su,[e("div",ou,[e("div",au,[C(e("input",{"onUpdate:modelValue":l[6]||(l[6]=k=>i.item.isAdBreak=k),class:"form-check-input",type:"checkbox",value:"",id:"isAdBreak"},null,512),[[Pe,i.item.isAdBreak]]),l[15]||(l[15]=e("label",{class:"form-check-label",for:"isAdBreak"}," Is AdBreak ",-1))])]),e("div",lu,[e("div",nu,[C(e("input",{"onUpdate:modelValue":l[7]||(l[7]=k=>i.item.isFillerSlate=k),class:"form-check-input",type:"checkbox",value:"",id:"isFillerSlate"},null,512),[[Pe,i.item.isFillerSlate]]),l[16]||(l[16]=e("label",{class:"form-check-label",for:"isFillerSlate"}," Is Filler Slate ",-1))])]),e("div",ru,[e("div",iu,[C(e("input",{"onUpdate:modelValue":l[8]||(l[8]=k=>i.item.isContent=k),class:"form-check-input",type:"checkbox",value:"",id:"isContent"},null,512),[[Pe,i.item.isContent]]),l[17]||(l[17]=e("label",{class:"form-check-label",for:"isContent"}," Is Content ",-1))])])]),i.item.videoId?(t(),s("div",du,[e("div",uu,[e("div",null,[e("h5",null,[l[19]||(l[19]=G(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",cu,l[18]||(l[18]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("button",{onClick:y,class:"btn btn-outline-primary"},l[20]||(l[20]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),G("Package Configuration ")]))]),e("div",mu,[e("table",fu,[l[23]||(l[23]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(i.item.packageConfigurations,(k,j)=>(t(),s("tr",null,[e("td",null,b(j+1),1),e("td",null,[e("div",pu,[C(e("input",{"onUpdate:modelValue":E=>k.path=E,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,vu),[[Y,k.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},z(o(W).item.packageConfigurations.$each.$response.$errors[j].path,E=>(t(),s("div",{key:E,class:"d-block invalid-feedback"},b(E.$message),1))),128)):H("",!0)]),e("td",null,[e("div",null,[C(e("select",{"onUpdate:modelValue":E=>k.sourceGroupId=E,class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,z(i.lookups.sourceGroups,E=>(t(),s("option",{value:E.id},b(E.name),9,bu))),256))],8,gu),[[fe,k.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(B,{key:0},z(o(W).item.packageConfigurations.$each.$response.$errors[j].path,E=>(t(),s("div",{key:E,class:"d-block invalid-feedback"},b(E.$message),1))),128)):H("",!0)])]),e("td",null,[C(e("select",{"onUpdate:modelValue":E=>k.type=E,class:"form-select",id:"type"},l[21]||(l[21]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,yu),[[fe,k.type]])]),e("td",null,[e("button",{onClick:E=>u(j),class:"btn btn-outline-warning"},l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,$u)])]))),256))])])])])):H("",!0)])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},hu={class:"ms-1"},ku={class:"input-group"},_u=["value"],Su={class:"ms-1"},Tu={class:"input-group"},Mu={class:"ms-1"},Iu={class:"input-group"},Cu={class:"table-responsive border shadow-sm"},Pu={class:"table table-hover mb-0"},xu=["textContent"],Vu={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Uu={class:"badge bg-info me-1"},Au={class:"small"},Ou={class:"text-center"},Du=["onUpdate:modelValue"],Hu="/api/v1/vodsources/search",Lu={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,closeWithReturnUrl:i,generateReturnUrl:S,security:$,filter:W,initializeFilter:X,getQuery:r,saveQuery:p,search:x,getRowNumber:a,setSelected:V,isSelected:n}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${w==null?void 0:w.userId}/vod-sources/search`,baseUrl:Hu,filter:{updateUrl:!0,lookups:{sourceLocations:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(v,A)=>{const k=v.value,j=new URLSearchParams(window.location.search),E=JSON.parse(localStorage.getItem(A))||{};k.query.type=j.get("type")||E.type||k.query.type||0,k.query.sourceLocationId=j.get("slid")||E.sourceLocationId||k.query.sourceLocationId||""},getQuery:v=>["?c=",encodeURIComponent(v.query.criteria),"&p=",v.pageIndex,"&s=",v.pageSize,"&sf=",v.sortField,"&so=",v.sortOrder,"&type=",v.query.type,"&slid=",v.query.sourceLocationId].join(""),saveQuery:(v,A)=>{localStorage.setItem(A,JSON.stringify({criteria:v.query.criteria,pageIndex:v.pageIndex,pageSize:v.pageSize,sortField:v.sortField,sortOrder:v.sortOrder,visible:v.visible,type:v.query.type,sourceLocationId:v.query.sourceLocationId}))}}),y=we(()=>{const v=W.value;return v&&v.items?v.items.filter(j=>j.selected):[]});ie(async()=>{X(),await g(),await x()});const u=async()=>{if(!(y.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!R.value){F.value=null;try{R.value=!0;const k={vodSourceIds:y.value.map(j=>j.vodSourceId)};await N.post("/api/v1/vodsources/publish/",k).then(j=>{M.success("Publish VODs","VODs was published.",{async onClose(){}})}),R.value=!1,await x()}catch(A){F.value=Q.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{R.value=!1}}},c=async()=>{if(!(y.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!R.value){F.value=null;try{R.value=!0;const k={vodSourceIds:y.value.map(j=>j.vodSourceId)};await N.post("/api/v1/vodsources/unpublish/",k).then(j=>{M.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),R.value=!1,await x()}catch(A){F.value=Q.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{R.value=!1}}},l=()=>{const v=W.value.items;if(v.length<1)return;const A=!v[0].selected;W.value.items.forEach(k=>{k.selected=A})},g=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(A=>{W.value.lookups.sourceLocations=A.data})}catch(v){F.value=Q.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return(v,A)=>{const k=Z("router-link"),j=Z("PageHeader"),E=Z("m-pagination"),J=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(j,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(h)},{default:L(()=>[y.value.length?(t(),s(B,{key:0},[e("button",{onClick:u,class:"btn btn-primary"},A[5]||(A[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:c,class:"btn btn-warning ms-1"},A[6]||(A[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0),q(k,{to:d.urlAdd,class:"btn btn-primary mx-2"},{default:L(()=>A[7]||(A[7]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",hu,[e("div",ku,[A[9]||(A[9]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),C(e("select",{"onUpdate:modelValue":A[0]||(A[0]=m=>o(W).query.sourceLocationId=m),class:"form-select"},[A[8]||(A[8]=e("option",{value:""},"All",-1)),(t(!0),s(B,null,z(o(W).lookups.sourceLocations,m=>(t(),s("option",{value:m.id},b(m.name),9,_u))),256))],512),[[fe,o(W).query.sourceLocationId]])])]),e("div",Su,[e("div",Tu,[A[11]||(A[11]=e("span",{class:"input-group-text fw-bold"},"Type",-1)),C(e("select",{"onUpdate:modelValue":A[1]||(A[1]=m=>o(W).query.type=m),class:"form-select"},A[10]||(A[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[fe,o(W).query.type]])])]),e("div",Mu,[e("div",Iu,[C(e("input",{"onUpdate:modelValue":A[2]||(A[2]=m=>o(W).query.criteria=m),onKeyup:A[3]||(A[3]=Oe(m=>o(x)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Y,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:A[4]||(A[4]=m=>o(x)(1))},A[12]||(A[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(J,{errorMessage:o(F)},{default:L(()=>[e("div",Cu,[e("table",Pu,[e("thead",null,[e("tr",null,[A[14]||(A[14]=e("td",{class:"text-center"},"#",-1)),A[15]||(A[15]=e("th",null,"Name",-1)),A[16]||(A[16]=e("th",null,"Video Title",-1)),e("th",{class:"text-center"},[e("button",{onClick:l,class:"btn btn-sm btn-outline-primary"},A[13]||(A[13]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o(W).items,(m,I)=>(t(),s("tr",{key:m.vodSourceId},[e("td",{textContent:b(o(a)(I)),class:"text-center"},null,8,xu),e("td",null,[q(k,{to:`${d.urlView}/${m.vodSourceId}`,class:"d-inline-block text-truncate"},{default:L(()=>[m.arn?(t(),s("span",Vu)):H("",!0),G(b(m.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(B,null,z(m.types,O=>(t(),s("span",Uu,b(O.typeName),1))),256))])]),e("td",null,[q(k,{to:`${d.urlViewVideo}/${encodeURIComponent(m.video.videoId)}/${o(S)()}`},{default:L(()=>[G(b(m.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Au,"Duration: "+b(o(Q).moment.utc(m.video.durationInMillis).format("HH:mm:ss")),1)])]),e("td",Ou,[C(e("input",{"onUpdate:modelValue":O=>m.selected=O,type:"checkbox"},null,8,Du),[[Pe,m.selected]])])]))),128))]),_:1},512),[[Te,o(W).items.length>0]])])]),q(E,{filter:o(W),search:o(x),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Eu=["id"],Bu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},qu={class:"modal-content"},Nu={class:"modal-header"},Ru={class:"modal-title"},zu={class:"modal-body"},Fu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Gu=["innerHTML"],ju={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Yu={class:"container"},Wu={class:"col"},Ku={class:"form-floating mb-2"},Ju=["value"],Qu={key:0,class:"d-block invalid-feedback"},Xu={class:"col"},Zu={class:"form-floating mb-2"},ec={key:0,class:"d-block invalid-feedback"},tc={class:"col"},sc={class:"form-floating mb-2"},oc={key:0,class:"d-block invalid-feedback"},ac={class:"modal-footer"},lc=["disabled"],nc={__name:"_addPackageConfiguration",emits:["refresh"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=w;re();const X=re("modalAddChannelOutput"),r=ce({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),p={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("VOD Source is required.",te),$autoDirty:!0,$lazy:!0},path:{required:ee.withMessage("Path is required.",te),$autoDirty:!0,$lazy:!0},type:{required:ee.withMessage("Type is required.",te),$autoDirty:!0,$lazy:!0}}},x=$e(p,r);ie(async()=>{x.value.$reset()});const a=async()=>{await V()},V=async()=>{try{await M.get("/api/v1/sourceGroups/lookup/").then(l=>{r.lookups.sourceGroups=l.data,r.lookups.sourceGroups.length===1&&(r.item.sourceGroupId=r.lookups.sourceGroups[0].id)})}catch(c){N.value=D.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},n=async c=>{const l=r;K.value.clear(),N.value="",l.lookups={sourceGroups:[]},l.item={sourceGroupId:null,vodSourceId:c,path:null,type:null},await a(),x.value.$reset();var g=document.getElementById(X.value),v=ke.getOrCreateInstance(g);v.show()},y=async()=>{var c=document.getElementById(X.value),l=ke.getOrCreateInstance(c);l.hide(),W("refresh")},u=async()=>{const c=r;if(R.value)return;const l=await x.value.$validate();debugger;if(!l){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const g=c.item;await M.post("/api/v1/vodSources/package-configurations/",g).then(v=>{i.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await y()}catch(g){N.value=D.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:n,close:y}),(c,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Bu,[e("div",qu,[e("div",Nu,[e("h5",Ru,[l[5]||(l[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=g=>y()),"aria-label":"Close"})]),e("div",zu,[o(N)?(t(),s("div",Fu,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Gu)])):H("",!0),o(K).size>0?(t(),s("div",ju,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),g=>(t(),s("li",null,b(g),1))),256))])])):H("",!0),e("div",Yu,[e("div",Wu,[e("div",Ku,[C(e("select",{"onUpdate:modelValue":l[1]||(l[1]=g=>r.item.sourceGroupId=g),class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,z(r.lookups.sourceGroups,g=>(t(),s("option",{value:g.id},b(g.name),9,Ju))),256))],512),[[fe,r.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(x).item.sourceGroupId.$error?(t(),s("div",Qu,[(t(!0),s(B,null,z(o(x).item.sourceGroupId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):H("",!0)])]),e("div",Xu,[e("div",Zu,[C(e("select",{"onUpdate:modelValue":l[2]||(l[2]=g=>r.item.type=g),class:"form-select",id:"type"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[fe,r.item.type]]),l[10]||(l[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(x).item.type.$error?(t(),s("div",ec,[(t(!0),s(B,null,z(o(x).item.type.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):H("",!0)])]),e("div",tc,[e("div",sc,[C(e("input",{"onUpdate:modelValue":l[3]||(l[3]=g=>r.item.path=g),class:"form-control",id:"path"},null,512),[[Y,r.item.path]]),l[11]||(l[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(x).item.path.$error?(t(),s("div",oc,[(t(!0),s(B,null,z(o(x).item.path.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):H("",!0)])])])]),e("div",ac,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:l[4]||(l[4]=g=>u()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,lc),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Eu))}},rc=["id"],ic={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},dc={class:"modal-content"},uc={class:"modal-header"},cc={class:"modal-title"},mc={class:"modal-body"},fc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},pc=["innerHTML"],vc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},gc={class:"container"},bc={class:"col"},yc={class:"form-floating mb-2"},$c={class:"col"},wc={class:"form-floating mb-2"},hc={key:0,class:"d-block invalid-feedback"},kc={class:"col"},_c={class:"form-floating mb-2"},Sc={key:0,class:"d-block invalid-feedback"},Tc={class:"col"},Mc={class:"form-floating mb-2"},Ic={key:0,class:"d-block invalid-feedback"},Cc={class:"modal-footer"},Pc=["disabled"],xc={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=w,X=re(),r=re("modalAddPlaybackConfiguration"),p=ce({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},a=$e(x,p);ie(async()=>{a.value.$reset()});const V=async(u,c)=>{X.value=u;const l=p;K.value.clear(),N.value="";const g=c,v=g.lastIndexOf("/"),A=g.substring(0,v),k="ad_campaign_"+g.substring(v+1).replace(".","_");l.item={name:k,originalVideoContentSourceUrl:c,videoContentSourceUrl:A,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},a.value.$reset();var j=document.getElementById(r.value),E=ke.getOrCreateInstance(j);E.show()},n=async()=>{var u=document.getElementById(r.value),c=ke.getOrCreateInstance(u);c.hide(),W("refresh")},y=async()=>{const u=p;if(R.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const l=u.item;l.vodSourceId=X.value,await M.post("/api/v1/playbackconfigurations/vodsource",l).then(g=>{i.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await n()}catch(l){N.value=D.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:V,close:n}),(u,c)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ic,[e("div",dc,[e("div",uc,[e("h5",cc,[c[6]||(c[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:c[0]||(c[0]=l=>n()),"aria-label":"Close"})]),e("div",mc,[o(N)?(t(),s("div",fc,[c[7]||(c[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,pc)])):H("",!0),o(K).size>0?(t(),s("div",vc,[c[8]||(c[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),l=>(t(),s("li",null,b(l),1))),256))])])):H("",!0),e("div",gc,[e("div",bc,[e("div",yc,[C(e("input",{"onUpdate:modelValue":c[1]||(c[1]=l=>p.item.originalVideoContentSourceUrl=l),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Y,p.item.originalVideoContentSourceUrl]]),c[9]||(c[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",$c,[e("div",wc,[C(e("input",{"onUpdate:modelValue":c[2]||(c[2]=l=>p.item.name=l),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,p.item.name]]),c[10]||(c[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",hc,[(t(!0),s(B,null,z(o(a).item.name.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):H("",!0)])]),e("div",kc,[e("div",_c,[C(e("input",{"onUpdate:modelValue":c[3]||(c[3]=l=>p.item.videoContentSourceUrl=l),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Y,p.item.videoContentSourceUrl]]),c[11]||(c[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),c[12]||(c[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(a).item.videoContentSourceUrl.$error?(t(),s("div",Sc,[(t(!0),s(B,null,z(o(a).item.videoContentSourceUrl.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):H("",!0)])]),e("div",Tc,[e("div",Mc,[C(e("textarea",{"onUpdate:modelValue":c[4]||(c[4]=l=>p.item.adDecisionServerUrl=l),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Y,p.item.adDecisionServerUrl]]),c[13]||(c[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(a).item.adDecisionServerUrl.$error?(t(),s("div",Ic,[(t(!0),s(B,null,z(o(a).item.adDecisionServerUrl.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):H("",!0)])])])]),e("div",Cc,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:c[5]||(c[5]=l=>y()),class:"btn btn-primary",type:"button"},c[14]||(c[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Pc),c[15]||(c[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,rc))}},Vc={key:0},Uc={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ac={class:"nav-item",role:"presentation"},Oc={class:"nav-item",role:"presentation"},Dc={class:"nav-item",role:"presentation"},Hc={class:"nav-item",role:"presentation"},Lc={class:"nav-item",role:"presentation"},Ec={class:"nav-item",role:"presentation"},Bc={class:"tab-content",id:"myTabContent"},qc={class:"mt-2"},Nc={class:"col"},Rc={class:"form-floating mb-2"},zc={class:"mt-2"},Fc={class:"badge bg-info me-1"},Gc={class:"mt-2"},jc={class:"row row-cols-sm-2"},Yc={class:"col"},Wc={class:"form-floating mb-2"},Kc={class:"form-control"},Jc={class:"col"},Qc={class:"form-floating mb-2"},Xc={class:"row row-cols-sm-2"},Zc={class:"col"},em={class:"form-floating mb-2"},tm={class:"col"},sm={class:"input-group mb-2"},om={class:"form-floating"},am={class:"row row-cols-sm-2"},lm={class:"col"},nm={class:"form-floating mb-2"},rm={class:"col"},im={class:"input-group mb-2"},dm={class:"form-floating"},um={class:"row row-cols-sm-2"},cm={class:"col"},mm={class:"form-floating mb-2"},fm={class:"col"},pm={class:"input-group mb-2"},vm={class:"form-floating"},gm={class:"mt-2"},bm={class:"mt-2 text-end"},ym={class:"table-responsive border mt-2"},$m={class:"table table-hover mb-0 caption-top"},wm={class:"text-end"},hm=["onClick"],km={class:"mt-2"},_m={class:"text-end"},Sm={class:"mt-1"},Tm=["id"],Mm={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null,hls:null}),p=re();re(null);const x=re();ie(async()=>{await y(),p.value=M.getPageTab("vodSource")||"information-tab"});const a=j=>{M.setPageTab("vodSource",j),p.value=j},V=j=>j!==p.value?"":"active",n=j=>j!==p.value?"":"show active",y=async()=>{const j=r;if(!h.value)try{h.value=!0,P.value="",r.item=null;const E=`/api/v1/vodsources/${f.id}/`;await Q.get(E).then(J=>{j.item=J.data;const m=j.item,I=M.moment.utc(j.item.video.durationInMillis).format("HH:mm:ss");m.video.duration=I;const O=m.video.hlsPath,oe=O.substring(O.lastIndexOf("/")+1)})}catch(E){P.value=M.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{h.value=!1}},u=async()=>{await y()},c=()=>{x.value.open(f.id)},l=j=>{},g=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!h.value){P.value=null;try{h.value=!0;const E={vodSourceIds:[f.id]};await Q.post("/api/v1/vodsources/publish/",E).then(J=>{D.success("Publish VOD","VOD was published.",{async onClose(){}})}),h.value=!1,await u()}catch(E){P.value=M.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{h.value=!1}}},v=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!h.value){P.value=null;try{h.value=!0;const E={vodSourceIds:[f.id]};await Q.post("/api/v1/vodsources/unpublish/",E).then(J=>{D.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),h.value=!1,await u()}catch(E){P.value=M.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{h.value=!1}}},A=async j=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!h.value){P.value=null;try{h.value=!0,await Q.delete(`/api/v1/vodSources/package-configurations/${j}/`).then(J=>{D.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),h.value=!1,await u()}catch(J){P.value=M.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{h.value=!1}}},k=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),r.hls&&r.hls.destroy();const E=`video-${r.item.vodSourceId}`;var j=document.getElementById(E);const J=r.item.video.hlsBaseUrl+r.item.video.hlsPath;r.hls=M.createHlsStream(j,J),D.success("View VOD Source Stream","VOD Source stream started.")}};return(j,E)=>{const J=Z("router-link"),m=Z("PageHeader"),I=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(m,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_)},{default:L(()=>[r.item?(t(),s(B,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:E[0]||(E[0]=O=>v()),class:"ms-1 btn btn-warning"},E[22]||(E[22]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:E[1]||(E[1]=O=>g()),class:"ms-1 btn btn-primary"},E[23]||(E[23]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),q(J,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary"},{default:L(()=>E[24]||(E[24]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:E[2]||(E[2]=O=>u()),class:"ms-2 btn btn-secondary"},E[25]||(E[25]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:E[3]||(E[3]=O=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},E[26]||(E[26]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(I,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",Vc,[e("div",null,[e("ul",Uc,[e("li",Ac,[e("button",{onClick:E[4]||(E[4]=O=>a("information-tab")),class:ne([V("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Oc,[e("button",{onClick:E[5]||(E[5]=O=>a("packageConfigurations-tab")),class:ne([V("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Dc,[e("button",{onClick:E[6]||(E[6]=O=>a("viewStream-tab")),class:ne([V("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View ",2)]),e("li",Hc,[e("button",{onClick:E[7]||(E[7]=O=>a("channels-tab")),class:ne([V("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},E[27]||(E[27]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),G("Channels ")]),2)]),e("li",Lc,[e("button",{onClick:E[8]||(E[8]=O=>a("programs-tab")),class:ne([V("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},E[28]||(E[28]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),G("Programs ")]),2)]),e("li",Ec,[e("button",{onClick:E[9]||(E[9]=O=>a("programTemplates-tab")),class:ne([V("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},E[29]||(E[29]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),G("Program Templates ")]),2)])]),e("div",Bc,[e("div",{class:ne([n("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",qc,[e("div",Nc,[e("div",Rc,[C(e("input",{"onUpdate:modelValue":E[10]||(E[10]=O=>r.item.name=O),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.name]]),E[30]||(E[30]=e("label",{for:"name"},"Name",-1))])]),e("div",zc,[e("div",null,[(t(!0),s(B,null,z(r.item.types,O=>(t(),s("span",Fc,b(O.typeName),1))),256))])]),e("div",Gc,[E[40]||(E[40]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",jc,[e("div",Yc,[e("div",Wc,[e("div",Kc,[q(J,{to:`${d.urlViewVideo}/${r.item.video.videoId}/${o($)()}`},{default:L(()=>[G(b(r.item.video.title),1)]),_:1},8,["to"])]),E[31]||(E[31]=e("label",{for:"title"},"Title",-1))])]),e("div",Jc,[e("div",Qc,[C(e("input",{"onUpdate:modelValue":E[11]||(E[11]=O=>r.item.video.duration=O),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[Y,r.item.video.duration]]),E[32]||(E[32]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Xc,[e("div",Zc,[e("div",em,[C(e("input",{"onUpdate:modelValue":E[12]||(E[12]=O=>r.item.video.rawBaseUrl=O),class:"form-control",id:"rawBaseUrl",readonly:""},null,512),[[Y,r.item.video.rawBaseUrl]]),E[33]||(E[33]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",tm,[e("div",sm,[e("div",om,[C(e("input",{"onUpdate:modelValue":E[13]||(E[13]=O=>r.item.video.rawPath=O),class:"form-control",id:"rawPath",readonly:""},null,512),[[Y,r.item.video.rawPath]]),E[34]||(E[34]=e("label",{for:"rawPath"},"Raw Path",-1))])])])]),e("div",am,[e("div",lm,[e("div",nm,[C(e("input",{"onUpdate:modelValue":E[14]||(E[14]=O=>r.item.video.hlsBaseUrl=O),class:"form-control",id:"hlsBaseUrl",readonly:""},null,512),[[Y,r.item.video.hlsBaseUrl]]),E[35]||(E[35]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",rm,[e("div",im,[e("div",dm,[C(e("input",{"onUpdate:modelValue":E[15]||(E[15]=O=>r.item.video.hlsPath=O),class:"form-control",id:"hlsPath",readonly:""},null,512),[[Y,r.item.video.hlsPath]]),E[36]||(E[36]=e("label",{for:"hlsPath"},"HLS Path",-1))])])])]),e("div",um,[e("div",cm,[e("div",mm,[C(e("input",{"onUpdate:modelValue":E[16]||(E[16]=O=>r.item.video.dashBaseUrl=O),class:"form-control",id:"dashBaseUrl",readonly:""},null,512),[[Y,r.item.video.dashBaseUrl]]),E[37]||(E[37]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",fm,[e("div",pm,[e("div",vm,[C(e("input",{"onUpdate:modelValue":E[17]||(E[17]=O=>r.item.video.dashPath=O),class:"form-control",id:"dashPath",readonly:""},null,512),[[Y,r.item.video.dashPath]]),E[38]||(E[38]=e("label",{for:"dashPath"},"DASH Path",-1))]),r.item.video.dashPath?(t(),s("button",{key:0,onClick:E[18]||(E[18]=O=>l()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},E[39]||(E[39]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),G("Playback Configuration ")]))):H("",!0)])])])])])])],2),e("div",{class:ne([n("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",gm,[e("div",bm,[e("button",{onClick:E[19]||(E[19]=O=>c()),class:"btn btn-primary"},E[41]||(E[41]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),G("Add ")]))]),e("div",ym,[e("table",$m,[E[43]||(E[43]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.packageConfigurations,(O,oe)=>(t(),s("tr",{key:O.packageConfigurationId},[e("td",null,b(oe+1),1),e("td",null,b(O.path),1),e("td",null,b(O.sourceGroup.name),1),e("td",null,b(O.type),1),e("td",wm,[e("button",{onClick:se=>A(O.packageConfigurationId),class:"btn btn-outline-warning"},E[42]||(E[42]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,hm)])]))),128))]),_:1},512),[[Te,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:ne([n("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",km,[e("div",_m,[e("button",{onClick:E[20]||(E[20]=O=>k()),class:"btn btn-primary"},E[44]||(E[44]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]))]),e("div",Sm,[e("video",{id:`video-${r.item.vodSourceId}`,controls:"",class:"card-img-top object-fit-contain border"},null,8,Tm)])])],2),e("div",{class:ne([n("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},E[45]||(E[45]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:ne([n("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},E[46]||(E[46]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:ne([n("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},E[47]||(E[47]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):H("",!0)]),_:1},8,["errorMessage"]),q(nc,{ref_key:"modalAddPackageConfiguration",ref:x,onRefresh:u},null,512),q(xc,{ref:"modalAddPlaybackConfiguration",onRefresh:E[21]||(E[21]=O=>u())},null,512)])]),_:1})}}},Im=["disabled"],Cm={class:"container1"},Pm={class:"row"},xm={class:"col-12 col-sm-6"},Vm={class:"col"},Um={class:"form-floating mb-2"},Am=["value"],Om={key:0,class:"d-block invalid-feedback"},Dm={class:"col"},Hm={class:"form-floating mb-2"},Lm=["disabled"],Em=["value"],Bm={key:0,class:"d-block invalid-feedback"},qm={class:"col-12 col-sm-6"},Nm={class:"col"},Rm={class:"form-floating mb-2"},zm={key:0,class:"d-block invalid-feedback"},Fm={class:"mt-2"},Gm={class:"col"},jm={class:"form-floating mb-2"},Ym={key:0},Wm={key:1},Km={key:2},Jm={key:3,class:"d-block invalid-feedback"},Qm={class:"col"},Xm={class:"form-floating mb-2"},Zm={key:0},ef={key:1},tf={key:2,class:"d-block invalid-feedback"},sf={class:"col"},of={class:""},af={class:"col"},lf={class:"form-floating mb-2"},nf={class:"col"},rf={class:"form-floating mb-2"},df={class:"col"},uf={class:"form-floating mb-2"},cf={key:0,class:"mt-3"},mf={class:"table-responsive border mt-1"},ff={class:"table table-borderless table-sm mb-0 align-middle"},pf=["onUpdate:modelValue","onChange"],vf={key:0},gf=["onUpdate:modelValue","onChange"],bf={class:"text-start"},yf=["onClick"],$f={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),D=d,i=ce({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),S={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},$=$e(S,i),W=we(()=>{const J=P.moment;if(i.startOffsetTime&&i.startOffsetTime!=="00:00:00"&&P.isValidTime(i.startOffsetTime)){const m=J().startOf("day"),I=m.format("YYYY-MM-DD ")+i.startOffsetTime,oe=J(I).subtract(m);return i.item.startOffsetMillis=oe.valueOf(),i.item.startOffsetMillis}return 0}),X=we(()=>{const J=P.moment;if(i.endOffsetTime&&i.endOffsetTime!=="00:00:00"&&P.isValidTime(i.endOffsetTime)){const m=J().startOf("day"),I=m.format("YYYY-MM-DD ")+i.endOffsetTime,oe=J(I).subtract(m);return i.item.endOffsetMillis=oe.valueOf(),i.item.endOffsetMillis}return 0}),r=we(()=>i.item.endOffsetMillis-i.item.startOffsetMillis),p=we(()=>P.moment.utc(r.value).format("HH:mm:ss")),x=we(()=>{const J=i.item.adBreaks;return J&&J.length>0?J.reduce((I,O,oe)=>I+O.durationInMillis,0):0}),a=we(()=>{const J=r.value+x.value;return P.moment.utc(J).format("HH:mm:ss")}),V=we(()=>P.moment.utc(x.value).format("HH:mm:ss"));ie(async()=>{await n()});const n=async()=>{await y(),await g()},y=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(m=>{i.lookups.sourceLocations=m.data,i.lookups.sourceLocations.length===1&&(i.item.sourceLocationId=i.lookups.sourceLocations[0].id)}),i.item.sourceLocationId&&await u(i.item.sourceLocationId)}catch(J){T.value=P.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},u=async J=>{try{const m=`/api/v1/vodSources/lookup/source-location/${J}/?type=3`;await F.get(m).then(I=>{i.lookups.vodSources=I.data})}catch(m){T.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},c=async()=>{const J=i.selected.vodSource;i.item.vodSourceId=J.id,i.endOffsetTime=P.moment.utc(J.durationInMillis).format("HH:mm:ss"),await l(J.id)},l=async J=>{try{let m=`/api/v1/vodSources/${J}/hls`;const I=await F.get(m).then(oe=>oe.data);i.hls&&i.hls.destroy();const O=document.getElementById("video-add-program-template");i.hls=P.createHlsStream(O,I,"Previewing filler slate.")}catch(m){T.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},g=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(m=>{i.lookups.adBreakSourceLocations=m.data})}catch(J){T.value=P.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},v=()=>{const J={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};i.item.adBreaks.push(J)},A=J=>{i.item.adBreaks.splice(J,1)},k=J=>{const m=P.moment,I=m().startOf("day"),O=I.format("YYYY-MM-DD ")+J.offsetTime,se=m(O).subtract(I);J.offsetMillis=se.valueOf()},j=J=>{const m=P.moment,I=m().startOf("day"),O=I.format("YYYY-MM-DD ")+J.durationTime,se=m(O).subtract(I);J.durationInMillis=se.valueOf()},E=async()=>{const J=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const I=P.clone(J.item);debugger;await F.post("/api/v1/programtemplates/",I).then(O=>{N.success("Add Program Template","Program template added.",{onClose:async()=>{const oe=`${D.urlView}/${O.data}`;await K.push(oe)}})})}catch(I){T.value=P.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{_.value=!1}};return(J,m)=>{const I=Z("router-link"),O=Z("PageHeader"),oe=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(O,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:m[0]||(m[0]=se=>E()),class:"btn btn-primary"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Im),q(I,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(oe,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[e("div",null,[e("div",Cm,[e("div",Pm,[e("div",xm,[e("div",Vm,[e("div",Um,[C(e("select",{"onUpdate:modelValue":m[1]||(m[1]=se=>i.item.sourceLocationId=se),onChange:m[2]||(m[2]=se=>u(i.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,z(i.lookups.sourceLocations,se=>(t(),s("option",{value:se.id},b(se.name),9,Am))),256))],544),[[fe,i.item.sourceLocationId]]),m[13]||(m[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o($).item.sourceLocationId.$error?(t(),s("div",Om,[(t(!0),s(B,null,z(o($).item.sourceLocationId.$errors,se=>(t(),s("div",{key:se.$uid},b(se.$message),1))),128))])):H("",!0)])]),e("div",Dm,[e("div",Hm,[C(e("select",{"onUpdate:modelValue":m[3]||(m[3]=se=>i.selected.vodSource=se),onChange:m[4]||(m[4]=se=>c()),class:"form-select",id:"vodSourceId",disabled:i.item.adBreaks.length>0},[(t(!0),s(B,null,z(i.lookups.vodSources,se=>(t(),s("option",{value:se},b(o(P).moment.utc(se.durationInMillis).format("HH:mm:ss"))+" - "+b(se.name),9,Em))),256))],40,Lm),[[fe,i.selected.vodSource]]),m[14]||(m[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o($).item.vodSourceId.$error?(t(),s("div",Bm,[(t(!0),s(B,null,z(o($).item.vodSourceId.$errors,se=>(t(),s("div",{key:se.$uid},b(se.$message),1))),128))])):H("",!0)])]),m[15]||(m[15]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-add-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",qm,[e("div",Nm,[e("div",Rm,[C(e("input",{"onUpdate:modelValue":m[5]||(m[5]=se=>i.item.name=se),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,i.item.name]]),m[16]||(m[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o($).item.name.$error?(t(),s("div",zm,[(t(!0),s(B,null,z(o($).item.name.$errors,se=>(t(),s("div",{key:se.$uid},b(se.$message),1))),128))])):H("",!0)])]),e("div",Fm,[e("div",Gm,[e("div",null,[e("div",jm,[C(e("input",{"onUpdate:modelValue":m[6]||(m[6]=se=>i.startOffsetTime=se),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Y,i.startOffsetTime]]),m[17]||(m[17]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Ym,m[18]||(m[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),W.value>X.value&&X.value>0?(t(),s("div",Wm,m[19]||(m[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),i.selected.vodSource&&W.value>=i.selected.vodSource.durationInMillis?(t(),s("div",Km,m[20]||(m[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o($).item.startOffsetMillis.$error?(t(),s("div",Jm,[(t(!0),s(B,null,z(o($).item.startOffsetMillis.$errors,se=>(t(),s("div",{key:se.$uid},b(se.$message),1))),128))])):H("",!0)])]),e("div",Qm,[e("div",null,[e("div",Xm,[C(e("input",{"onUpdate:modelValue":m[7]||(m[7]=se=>i.endOffsetTime=se),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Y,i.endOffsetTime]]),m[21]||(m[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),X.value>0&&X.value<3e4?(t(),s("div",Zm,m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),i.selected.vodSource&&X.value>i.selected.vodSource.durationInMillis?(t(),s("div",ef,m[23]||(m[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o($).item.endOffsetMillis.$error?(t(),s("div",tf,[(t(!0),s(B,null,z(o($).item.endOffsetMillis.$errors,se=>(t(),s("div",{key:se.$uid},b(se.$message),1))),128))])):H("",!0)])])]),e("div",sf,[m[27]||(m[27]=e("h5",null," Duration ",-1)),e("div",of,[e("div",af,[e("div",lf,[C(e("input",{"onUpdate:modelValue":m[8]||(m[8]=se=>p.value=se),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Y,p.value]]),m[24]||(m[24]=e("label",{for:"durationTime"},"Clip",-1))])]),e("div",nf,[e("div",rf,[C(e("input",{"onUpdate:modelValue":m[9]||(m[9]=se=>V.value=se),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Y,V.value]]),m[25]||(m[25]=e("label",{for:"totalAdBreakDurationTime"},"Ad Breaks",-1))])]),e("div",df,[e("div",uf,[C(e("input",{"onUpdate:modelValue":m[10]||(m[10]=se=>a.value=se),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Y,a.value]]),m[26]||(m[26]=e("label",{for:"totalProgramDuration"},"Program Total Duration",-1))])])])])])]),i.item.vodSourceId?(t(),s("div",cf,[e("div",{class:"d-flex flex-row justify-content-between"},[m[29]||(m[29]=e("div",null,[e("h5",null," Ad Break ")],-1)),e("button",{onClick:v,class:"btn btn-outline-primary btn-sm"},m[28]||(m[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",mf,[e("table",ff,[m[32]||(m[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(i.item.adBreaks,(se,ae)=>(t(),s("tr",null,[e("td",null,b(ae+1),1),e("td",null,[C(e("input",{"onUpdate:modelValue":ge=>se.offsetTime=ge,onChange:ge=>k(se),type:"time",step:"1",class:"form-control"},null,40,pf),[[Y,se.offsetTime]]),se.offsetMillis>=i.selected.vodSource.durationInMillis?(t(),s("div",vf,m[30]||(m[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[C(e("input",{"onUpdate:modelValue":ge=>se.durationTime=ge,onChange:ge=>j(se),type:"time",step:"1",class:"form-control"},null,40,gf),[[Y,se.durationTime]])]),e("td",bf,[e("button",{onClick:ge=>A(ae),class:"btn btn-outline-warning btn-sm"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yf)])]))),256))])]),m[33]||(m[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),G(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},wf=["disabled"],hf={class:"container1"},kf={class:"row"},_f={class:"col-12 col-sm-6"},Sf={class:"col"},Tf={class:"form-floating mb-2"},Mf=["value"],If={key:0,class:"d-block invalid-feedback"},Cf={class:"col"},Pf={class:"form-floating mb-2"},xf=["value"],Vf={key:0,class:"d-block invalid-feedback"},Uf={class:"col-12 col-sm-6"},Af={class:"col"},Of={class:"form-floating mb-2"},Df={key:0,class:"d-block invalid-feedback"},Hf={class:"col"},Lf={class:"form-floating mb-2"},Ef={key:0},Bf={key:1},qf={key:2},Nf={key:3,class:"d-block invalid-feedback"},Rf={class:"col"},zf={class:"form-floating"},Ff={key:0},Gf={key:1},jf={key:2,class:"d-block invalid-feedback"},Yf={class:"col"},Wf={class:""},Kf={class:"col"},Jf={class:"form-floating mb-2"},Qf={class:"col"},Xf={class:"form-floating mb-2"},Zf={class:"col"},ep={class:"form-floating mb-2"},tp={key:0,class:"mt-2"},sp={class:"table-responsive border mt-1"},op={class:"table table-borderless table-sm mb-0 align-middle"},ap=["onUpdate:modelValue","onChange"],lp={key:0},np=["onUpdate:modelValue","onChange"],rp=["onClick"],ip={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,closeWithReturnUrl:M,security:D}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),i=d,S=ce({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),$={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},W=$e($,S),X=we(()=>{const I=P.moment;if(S.startOffsetTime&&S.startOffsetTime!=="00:00:00"&&P.isValidTime(S.startOffsetTime)){const O=I().startOf("day"),oe=O.format("YYYY-MM-DD ")+S.startOffsetTime,ae=I(oe).subtract(O);return S.item.startOffsetMillis=ae.valueOf(),S.item.startOffsetMillis}return 0}),r=we(()=>{const I=P.moment;if(S.endOffsetTime&&S.endOffsetTime!=="00:00:00"&&P.isValidTime(S.endOffsetTime)){const O=I().startOf("day"),oe=O.format("YYYY-MM-DD ")+S.endOffsetTime,ae=I(oe).subtract(O);return S.item.endOffsetMillis=ae.valueOf(),S.item.endOffsetMillis}return 0}),p=we(()=>S.item.endOffsetMillis-S.item.startOffsetMillis),x=we(()=>P.moment.utc(p.value).format("HH:mm:ss")),a=we(()=>{const I=S.item.adBreaks;return I&&I.length>0?I.reduce((oe,se,ae)=>oe+se.durationInMillis,0):0}),V=we(()=>{const I=p.value+a.value;return P.moment.utc(I).format("HH:mm:ss")}),n=we(()=>P.moment.utc(a.value).format("HH:mm:ss"));ie(async()=>{await y()});const y=async()=>{await u(),await c()},u=async()=>{try{const I=`/api/v1/programtemplates/${i.id}/`;await F.get(I).then(O=>{S.item=O.data,S.startOffsetTime=P.moment.utc(S.item.startOffsetMillis).format("HH:mm:ss"),S.endOffsetTime=P.moment.utc(S.item.endOffsetMillis).format("HH:mm:ss"),S.item.adBreaks.forEach(oe=>{oe.offsetTime=P.moment.utc(oe.offsetMillis).format("HH:mm:ss"),oe.durationTime=P.moment.utc(oe.durationInMillis).format("HH:mm:ss")})})}catch(I){T.value=P.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},c=async()=>{await l()},l=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(O=>{S.lookups.sourceLocations=O.data}),S.item.sourceLocationId&&await g(S.item.sourceLocationId)}catch(I){T.value=P.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},g=async I=>{try{const O=`/api/v1/vodSources/lookup/source-location/${I}/?type=3`;await F.get(O).then(se=>{S.lookups.vodSources=se.data});const oe=S.lookups.vodSources.find(se=>se.id==S.item.vodSourceId);S.selected.vodSource=oe,await v()}catch(O){T.value=P.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},v=async()=>{const I=S.selected.vodSource;S.item.vodSourceId=I.id,S.endOffsetTime=P.moment.utc(I.durationInMillis).format("HH:mm:ss"),await A(I.id)},A=async I=>{try{let O=`/api/v1/vodSources/${I}/hls`;const oe=await F.get(O).then(ae=>ae.data);S.hls&&S.hls.destroy();const se=document.getElementById("video-edit-program-template");S.hls=P.createHlsStream(se,oe,"Previewing VOD Content.")}catch(O){T.value=P.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},k=()=>{const I={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};S.item.adBreaks.push(I)},j=I=>{S.item.adBreaks.splice(I,1)},E=I=>{const O=P.moment,oe=O().startOf("day"),se=oe.format("YYYY-MM-DD ")+I.offsetTime,ge=O(se).subtract(oe);I.offsetMillis=ge.valueOf()},J=I=>{const O=P.moment,oe=O().startOf("day"),se=oe.format("YYYY-MM-DD ")+I.durationTime,ge=O(se).subtract(oe);I.durationInMillis=ge.valueOf()},m=async()=>{const I=S;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const oe=P.clone(I.item);debugger;oe.startOffsetMillis=X.value,oe.endOffsetMillis=r.value,await F.put("/api/v1/programtemplates/",oe).then(se=>{N.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ae=`${i.urlView}/${i.id}`;await K.push(ae)}})})}catch(oe){T.value=P.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{_.value=!1}};return(I,O)=>{const oe=Z("PageHeader"),se=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(oe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:O[0]||(O[0]=ae=>m()),class:"btn btn-primary"},O[13]||(O[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wf),e("button",{onClick:O[1]||(O[1]=ae=>y()),class:"btn btn-secondary ms-2"},O[14]||(O[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:O[2]||(O[2]=ae=>o(M)(i.urlMain)),class:"btn btn-secondary ms-1"},O[15]||(O[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(se,{errorMessage:o(T),vuelidate:o(W)},{default:L(()=>[e("div",null,[e("div",hf,[e("div",kf,[e("div",_f,[e("div",Sf,[e("div",Tf,[C(e("select",{"onUpdate:modelValue":O[3]||(O[3]=ae=>S.item.sourceLocationId=ae),onChange:O[4]||(O[4]=ae=>g(S.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,z(S.lookups.sourceLocations,ae=>(t(),s("option",{value:ae.id},b(ae.name),9,Mf))),256))],544),[[fe,S.item.sourceLocationId]]),O[16]||(O[16]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",If,[(t(!0),s(B,null,z(o(W).item.sourceLocationId.$errors,ae=>(t(),s("div",{key:ae.$uid},b(ae.$message),1))),128))])):H("",!0)])]),e("div",Cf,[e("div",Pf,[C(e("select",{"onUpdate:modelValue":O[5]||(O[5]=ae=>S.selected.vodSource=ae),onChange:O[6]||(O[6]=ae=>v()),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,z(S.lookups.vodSources,ae=>(t(),s("option",{value:ae},b(o(P).moment.utc(ae.durationInMillis).format("HH:mm:ss"))+" - "+b(ae.name),9,xf))),256))],544),[[fe,S.selected.vodSource]]),O[17]||(O[17]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",Vf,[(t(!0),s(B,null,z(o(W).item.vodSourceId.$errors,ae=>(t(),s("div",{key:ae.$uid},b(ae.$message),1))),128))])):H("",!0)])]),O[18]||(O[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",Uf,[e("div",Af,[e("div",Of,[C(e("input",{"onUpdate:modelValue":O[7]||(O[7]=ae=>S.item.name=ae),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,S.item.name]]),O[19]||(O[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Df,[(t(!0),s(B,null,z(o(W).item.name.$errors,ae=>(t(),s("div",{key:ae.$uid},b(ae.$message),1))),128))])):H("",!0)])]),e("div",Hf,[e("div",Lf,[C(e("input",{"onUpdate:modelValue":O[8]||(O[8]=ae=>S.startOffsetTime=ae),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Y,S.startOffsetTime]]),O[20]||(O[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),X.value>0&&X.value<3e4?(t(),s("div",Ef,O[21]||(O[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),X.value>r.value&&r.value>0?(t(),s("div",Bf,O[22]||(O[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),S.selected.vodSource&&X.value>=S.selected.vodSource.durationInMillis?(t(),s("div",qf,O[23]||(O[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",Nf,[(t(!0),s(B,null,z(o(W).item.startOffsetMillis.$errors,ae=>(t(),s("div",{key:ae.$uid},b(ae.$message),1))),128))])):H("",!0)]),e("div",Rf,[e("div",zf,[C(e("input",{"onUpdate:modelValue":O[9]||(O[9]=ae=>S.endOffsetTime=ae),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Y,S.endOffsetTime]]),O[24]||(O[24]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),r.value>0&&r.value<3e4?(t(),s("div",Ff,O[25]||(O[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),S.selected.vodSource&&r.value>S.selected.vodSource.durationInMillis?(t(),s("div",Gf,O[26]||(O[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",jf,[(t(!0),s(B,null,z(o(W).item.endOffsetMillis.$errors,ae=>(t(),s("div",{key:ae.$uid},b(ae.$message),1))),128))])):H("",!0)]),e("div",Yf,[O[30]||(O[30]=e("h5",null," Duration ",-1)),e("div",Wf,[e("div",Kf,[e("div",Jf,[C(e("input",{"onUpdate:modelValue":O[10]||(O[10]=ae=>x.value=ae),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Y,x.value]]),O[27]||(O[27]=e("label",{for:"durationTime"},"Clip",-1))])]),e("div",Qf,[e("div",Xf,[C(e("input",{"onUpdate:modelValue":O[11]||(O[11]=ae=>n.value=ae),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Y,n.value]]),O[28]||(O[28]=e("label",{for:"totalAdBreakDurationTime"},"Ad Breaks",-1))])]),e("div",Zf,[e("div",ep,[C(e("input",{"onUpdate:modelValue":O[12]||(O[12]=ae=>V.value=ae),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Y,V.value]]),O[29]||(O[29]=e("label",{for:"totalProgramDuration"},"Program Total Duration",-1))])])])])])]),S.selected.vodSource?(t(),s("div",tp,[e("div",{class:"d-flex flex-row justify-content-between"},[O[32]||(O[32]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:k,class:"btn btn-outline-primary btn-sm"},O[31]||(O[31]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",sp,[e("table",op,[O[35]||(O[35]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(S.item.adBreaks,(ae,ge)=>(t(),s("tr",null,[e("td",null,b(ge+1),1),e("td",null,[C(e("input",{"onUpdate:modelValue":Se=>ae.offsetTime=Se,onChange:Se=>E(ae),type:"time",step:"1",class:"form-control"},null,40,ap),[[Y,ae.offsetTime]]),ae.offsetMillis>=S.selected.vodSource.durationInMillis?(t(),s("div",lp,O[33]||(O[33]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[C(e("input",{"onUpdate:modelValue":Se=>ae.durationTime=Se,onChange:Se=>J(ae),type:"time",step:"1",class:"form-control"},null,40,np),[[Y,ae.durationTime]])]),e("td",null,[e("button",{onClick:Se=>j(ge),class:"btn btn-outline-warning btn-sm"},O[34]||(O[34]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,rp)])]))),256))])]),O[36]||(O[36]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),G(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},dp={class:"ms-1"},up={class:"input-group"},cp={class:"table-responsive border shadow-sm"},mp={class:"table table-hover mb-0"},fp=["textContent"],pp={key:0,class:"fas fa-fw fa-check-circle text-success"},vp={class:"text-end me-0 me-sm-5"},gp="/api/v1/programTemplates/search",bp={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,generateReturnUrl:i,security:S,filter:$,initializeFilter:W,getQuery:X,saveQuery:r,search:p,getRowNumber:x,setSelected:a,isSelected:V}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${w==null?void 0:w.userId}/program-templates/search`,baseUrl:gp,filter:{updateUrl:!0}});return ie(async()=>{W(),await p()}),(n,y)=>{const u=Z("router-link"),c=Z("PageHeader"),l=Z("m-pagination"),g=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(c,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h)},{default:L(()=>[q(u,{to:d.urlAdd,class:"btn btn-primary"},{default:L(()=>y[3]||(y[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",dp,[e("div",up,[C(e("input",{"onUpdate:modelValue":y[0]||(y[0]=v=>o($).query.criteria=v),onKeyup:y[1]||(y[1]=Oe(v=>o(p)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Y,o($).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:y[2]||(y[2]=v=>o(p)(1))},y[4]||(y[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(g,{errorMessage:o(F)},{default:L(()=>[e("div",cp,[e("table",mp,[y[5]||(y[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o($).items,(v,A)=>(t(),s("tr",{key:v.programTemplateId},[e("td",{textContent:b(o(x)(A)),class:"text-center"},null,8,fp),e("td",null,[q(u,{to:`${d.urlView}/${v.programTemplateId}`,class:"d-inline-block text-truncate"},{default:L(()=>[v.arn?(t(),s("span",pp)):H("",!0),G(" "+b(v.name),1)]),_:2},1032,["to"])]),e("td",vp,b(o(Q).moment.utc(v.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[q(u,{to:`${d.urlViewSourceLocation}/${v.sourceLocationId}/${o(i)()}`},{default:L(()=>[G(b(v.sourceLocation.name),1)]),_:2},1032,["to"])]),e("td",null,[q(u,{to:`${d.urlViewVodSource}/${v.vodSourceId}/${o(i)()}`},{default:L(()=>[G(b(v.vodSource.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,o($).items.length>0]])])]),q(l,{filter:o($),search:o(p),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},yp={key:0},$p={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},wp={class:"nav-item",role:"presentation"},hp={class:"nav-item",role:"presentation"},kp={class:"nav-item d-none",role:"presentation"},_p={class:"tab-content",id:"myTabContent"},Sp={class:"mt-2"},Tp={class:""},Mp={class:"row row-cols-1 row-cols-sm-2"},Ip={class:"col"},Cp={class:"col"},Pp={class:"form-floating mb-2"},xp={class:"col"},Vp={class:"form-floating mb-2"},Up={class:"col"},Ap={class:"col"},Op={class:"form-floating mb-2"},Dp={class:"col"},Hp={class:"form-floating mb-2"},Lp={class:"col"},Ep={class:"form-floating mb-2"},Bp={class:"row row-cols-1"},qp={class:"col"},Np={class:"form-floating mb-2"},Rp={class:"col"},zp={class:"form-floating mb-2"},Fp={class:"col"},Gp={class:"form-floating mb-2"},jp={class:"mt-2"},Yp={class:"table-responsive"},Wp={class:"table table-hover mb-0"},Kp={class:"text-center"},Jp={class:"mt-2"},Qp={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null,hls:null}),p=re();ie(async()=>{await n(),p.value=M.getPageTab("programTemplate")||"information-tab"});const x=c=>{M.setPageTab("programTemplate",c),p.value=c},a=c=>c!==p.value?"":"active",V=c=>c!==p.value?"":"show active",n=async()=>{const c=r;if(!h.value)try{h.value=!0,P.value="",r.item=null;const l=`/api/v1/programTemplates/${f.id}/`;await Q.get(l).then(g=>{c.item=g.data;const v=c.item;v.startOffsetTime=M.moment.utc(v.startOffsetMillis).format("HH:mm:ss"),v.endOffsetTime=M.moment.utc(v.endOffsetMillis).format("HH:mm:ss"),v.durationTime=M.moment.utc(v.durationInMillis).format("HH:mm:ss"),v.adBreaksDurationTime=M.moment.utc(v.adBreaksDurationInMillis).format("HH:mm:ss"),v.totalProgramTemplateDurationTime=M.moment.utc(v.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const A=v.vodSource.video,k=A.durationInMillis;A.durationInMillis=M.moment.utc(k).format("HH:mm:ss")}),r.item.vodSource&&await u(r.item.vodSourceId)}catch(l){P.value=M.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{h.value=!1}},y=async()=>{await n()},u=async c=>{try{let l=`/api/v1/vodSources/${c}/hls`;const g=await Q.get(l).then(A=>A.data);r.hls&&r.hls.destroy();const v=document.getElementById("video-view-program-template");r.hls=M.createHlsStream(v,g,"Previewing VOD.")}catch(l){P.value=M.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}};return(c,l)=>{const g=Z("router-link"),v=Z("PageHeader"),A=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(v,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:L(()=>[q(g,{to:`${d.urlEdit}/${d.id}/${o($)()}`,class:"ms-2 btn btn-primary"},{default:L(()=>l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=k=>y()),class:"ms-2 btn btn-secondary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[1]||(l[1]=k=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},l[15]||(l[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(A,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",yp,[e("div",null,[e("ul",$p,[e("li",wp,[e("button",{onClick:l[2]||(l[2]=k=>x("information-tab")),class:ne([a("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",hp,[e("button",{onClick:l[3]||(l[3]=k=>x("adBreaks-tab")),class:ne([a("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",kp,[e("button",{onClick:l[4]||(l[4]=k=>x("programs-tab")),class:ne([a("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",_p,[e("div",{class:ne([V("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Sp,[e("div",Tp,[e("div",Mp,[e("div",Ip,[e("div",Cp,[e("div",Pp,[C(e("input",{"onUpdate:modelValue":l[5]||(l[5]=k=>r.item.sourceLocation.name=k),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.sourceLocation.name]]),l[16]||(l[16]=e("label",{for:"name",class:"small fw-bold"},"Source Location",-1))])]),e("div",xp,[e("div",Vp,[C(e("input",{"onUpdate:modelValue":l[6]||(l[6]=k=>r.item.vodSource.name=k),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.vodSource.name]]),l[17]||(l[17]=e("label",{for:"name",class:"small fw-bold"},"VOD Name",-1))])]),l[18]||(l[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",Up,[e("div",Ap,[e("div",Op,[C(e("input",{"onUpdate:modelValue":l[7]||(l[7]=k=>r.item.name=k),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.name]]),l[19]||(l[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1))])]),e("div",Dp,[e("div",Hp,[C(e("input",{"onUpdate:modelValue":l[8]||(l[8]=k=>r.item.startOffsetTime=k),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Y,r.item.startOffsetTime]]),l[20]||(l[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start Offset",-1))])]),e("div",Lp,[e("div",Ep,[C(e("input",{"onUpdate:modelValue":l[9]||(l[9]=k=>r.item.endOffsetTime=k),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Y,r.item.endOffsetTime]]),l[21]||(l[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End Offset",-1))])]),l[25]||(l[25]=e("h5",null," Duration ",-1)),e("div",Bp,[e("div",qp,[e("div",Np,[C(e("input",{"onUpdate:modelValue":l[10]||(l[10]=k=>r.item.durationTime=k),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Y,r.item.durationTime]]),l[22]||(l[22]=e("label",{for:"durationTime",class:"small fw-bold"},"Clip",-1))])]),e("div",Rp,[e("div",zp,[C(e("input",{"onUpdate:modelValue":l[11]||(l[11]=k=>r.item.adBreaksDurationTime=k),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Y,r.item.adBreaksDurationTime]]),l[23]||(l[23]=e("label",{for:"adBreaksDurationTime",class:"small fw-bold"},"Ad Breaks",-1))])]),e("div",Fp,[e("div",Gp,[C(e("input",{"onUpdate:modelValue":l[12]||(l[12]=k=>r.item.totalProgramTemplateDurationTime=k),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Y,r.item.totalProgramTemplateDurationTime]]),l[24]||(l[24]=e("label",{for:"totalProgramTemplateDurationTime",class:"small fw-bold"},"Program Total Duration",-1))])])])])])])])],2),e("div",{class:ne([V("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",jp,[e("div",Yp,[e("table",Wp,[l[26]||(l[26]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.adBreaks,(k,j)=>(t(),s("tr",{key:k.programTemplateAdBreakId},[e("td",Kp,b(j+1),1),e("td",null,b(o(M).moment.utc(k.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(M).moment.utc(k.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,r.item.adBreaks.length>0]])])])])],2),e("div",{class:ne([V("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Jp,[e("pre",null,b(r.item.programs),1)])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Xp=["disabled"],Zp={class:"row row-cols-1 row-cols-sm-3"},ev={class:"col-sm-6"},tv={class:"form-floating mb-2"},sv={key:0,class:"d-block invalid-feedback"},ov={class:"col-sm-3"},av={class:"form-floating mb-2"},lv={key:0,class:"d-block invalid-feedback"},nv={class:"col-sm-3"},rv={class:"form-floating mb-2"},iv={key:0,class:"d-block invalid-feedback"},dv={class:"col"},uv={class:"form-floating mb-2"},cv={key:0,class:"d-block invalid-feedback"},mv={class:"row row-cols-1 row-cols-sm-2"},fv={class:"col"},pv={class:"form-floating mb-2"},vv=["value"],gv={key:0,class:"d-block invalid-feedback"},bv={class:"col"},yv={class:"form-floating mb-2"},$v=["value"],wv={key:0,class:"d-block invalid-feedback"},hv={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),D=d,i=ce({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),S={item:{name:{title:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},tier:{title:ee.withMessage("Tier is required.",te),$autoDirty:!0,$lazy:!0},playbackMode:{title:ee.withMessage("PlaybackMode is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:ee.withMessage("Filler Slate Source Location is required.",te),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:ee.withMessage("Filler Slate Vod Source is required.",te),$autoDirty:!0,$lazy:!0},policy:{title:ee.withMessage("Policy is required.",te),$autoDirty:!0,$lazy:!0}}},$=$e(S,i);ie(async()=>{await W()});const W=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(V=>{i.lookups.sourceLocations=V.data,i.lookups.sourceLocations.length===1&&(i.item.fillerSlateSourceLocationId=i.lookups.sourceLocations[0].id)}),i.item.sourceLocationId&&await r(i.item.fillerSlateSourceLocationId)}catch(a){T.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},X=async()=>{i.item.fillerSlateVodSourceId=null,await r(i.item.fillerSlateSourceLocationId)},r=async a=>{try{let V=`/api/v1/vodSources/lookup/source-location/${a}`;await F.get(V).then(n=>{i.lookups.vodSources=n.data})}catch(V){T.value=P.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{}},p=()=>{if(i.item.name){const a=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${i.item.name}"}]}`;i.item.policy=a}else i.item.policy=null},x=async()=>{const a=i;if(_.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,T.value="";const n=P.clone(a.item);await F.post("/api/v1/channels/",n).then(y=>{N.success("Add Channel","Channel added.",{onClose:async()=>{const u=`${D.urlView}/${y.data}`;await K.push(u)}})})}catch(n){T.value=P.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{_.value=!1}};return(a,V)=>{const n=Z("router-link"),y=Z("PageHeader"),u=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(y,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(w)},{default:L(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:V[0]||(V[0]=c=>x()),class:"btn btn-primary"},V[9]||(V[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xp),q(n,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>V[10]||(V[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(u,{errorMessage:o(T),vuelidate:o($)},{default:L(()=>[e("div",null,[e("div",Zp,[e("div",ev,[e("div",tv,[C(e("input",{"onUpdate:modelValue":V[1]||(V[1]=c=>i.item.name=c),onChange:V[2]||(V[2]=c=>p()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Y,i.item.name]]),V[11]||(V[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o($).item.name.$error?(t(),s("div",sv,[(t(!0),s(B,null,z(o($).item.name.$errors,c=>(t(),s("div",{key:c.$uid},b(c.$message),1))),128))])):H("",!0)])]),e("div",ov,[e("div",av,[C(e("input",{"onUpdate:modelValue":V[3]||(V[3]=c=>i.item.tier=c),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Y,i.item.tier]]),V[12]||(V[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o($).item.tier.$error?(t(),s("div",lv,[(t(!0),s(B,null,z(o($).item.tier.$errors,c=>(t(),s("div",{key:c.$uid},b(c.$message),1))),128))])):H("",!0)])]),e("div",nv,[e("div",rv,[C(e("input",{"onUpdate:modelValue":V[4]||(V[4]=c=>i.item.playbackMode=c),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Y,i.item.playbackMode]]),V[13]||(V[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o($).item.playbackMode.$error?(t(),s("div",iv,[(t(!0),s(B,null,z(o($).item.playbackMode.$errors,c=>(t(),s("div",{key:c.$uid},b(c.$message),1))),128))])):H("",!0)])])]),e("div",dv,[e("div",uv,[C(e("textarea",{"onUpdate:modelValue":V[5]||(V[5]=c=>i.item.policy=c),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[Y,i.item.policy]]),V[14]||(V[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o($).item.policy.$error?(t(),s("div",cv,[(t(!0),s(B,null,z(o($).item.policy.$errors,c=>(t(),s("div",{key:c.$uid},b(c.$message),1))),128))])):H("",!0)])]),V[17]||(V[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",mv,[e("div",fv,[e("div",pv,[C(e("select",{"onUpdate:modelValue":V[6]||(V[6]=c=>i.item.fillerSlateSourceLocationId=c),onChange:V[7]||(V[7]=c=>X()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(B,null,z(i.lookups.sourceLocations,c=>(t(),s("option",{value:c.id},b(c.name),9,vv))),256))],544),[[fe,i.item.fillerSlateSourceLocationId]]),V[15]||(V[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o($).item.fillerSlateSourceLocationId.$error?(t(),s("div",gv,[(t(!0),s(B,null,z(o($).item.fillerSlateSourceLocationId.$errors,c=>(t(),s("div",{key:c.$uid},b(c.$message),1))),128))])):H("",!0)])]),e("div",bv,[e("div",yv,[C(e("select",{"onUpdate:modelValue":V[8]||(V[8]=c=>i.item.fillerSlateVodSourceId=c),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(B,null,z(i.lookups.vodSources,c=>(t(),s("option",{value:c.id},b(c.name),9,$v))),256))],512),[[fe,i.item.fillerSlateVodSourceId]]),V[16]||(V[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o($).item.fillerSlateVodSourceId.$error?(t(),s("div",wv,[(t(!0),s(B,null,z(o($).item.fillerSlateVodSourceId.$errors,c=>(t(),s("div",{key:c.$uid},b(c.$message),1))),128))])):H("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},kv={components:{Page:Ye},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function _v(d,f,w,_,h,R){const T=Z("Page");return t(),ue(T,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Sv=Me(kv,[["render",_v]]),Tv={class:"ms-1"},Mv={class:"input-group"},Iv={class:"table-responsive border shadow-sm"},Cv={class:"table table-hover mb-0"},Pv=["textContent"],xv="/api/v1/channels/search",Vv={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(d){he("$config");const w=ye().user,{appTitle:_,pageTitle:h,busy:R,infoMessage:T,warningMessage:K,errorMessage:F,router:P,axios:N,utils:Q,toasts:M,close:D,security:i,filter:S,initializeFilter:$,getQuery:W,saveQuery:X,search:r,getRowNumber:p,setSelected:x,isSelected:a}=He({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${w==null?void 0:w.userId}/Channels/search`,baseUrl:xv,filter:{updateUrl:!0}});return ie(async()=>{$(),await r()}),(V,n)=>{const y=Z("router-link"),u=Z("PageHeader"),c=Z("m-pagination"),l=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(u,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(h)},{default:L(()=>[q(y,{to:d.urlAdd,class:"btn btn-primary"},{default:L(()=>n[3]||(n[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Tv,[e("div",Mv,[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=g=>o(S).query.criteria=g),onKeyup:n[1]||(n[1]=Oe(g=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Y,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:n[2]||(n[2]=g=>o(r)(1))},n[4]||(n[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),q(l,{errorMessage:o(F)},{default:L(()=>[e("div",Iv,[e("table",Cv,[n[5]||(n[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(o(S).items,(g,v)=>(t(),s("tr",{key:g.channelId},[e("td",{textContent:b(o(p)(v)),class:"text-center"},null,8,Pv),e("td",null,[q(y,{to:`${d.urlView}/${g.channelId}`,class:"d-inline-block text-truncate"},{default:L(()=>[G(b(g.name),1)]),_:2},1032,["to"])]),e("td",null,b(g.playbackMode),1),e("td",null,b(g.tier),1)]))),128))]),_:1},512),[[Te,o(S).items.length>0]])])]),q(c,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Uv=["id"],Av={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Ov={class:"modal-content"},Dv={class:"modal-header"},Hv={class:"modal-title"},Lv={class:"modal-body"},Ev={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Bv=["innerHTML"],qv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Nv={class:"container"},Rv={class:"col"},zv={class:"form-floating mb-2"},Fv=["value"],Gv={class:"row row-cols-1 row-cols-sm-2"},jv={class:"col"},Yv={class:"form-floating mb-2"},Wv={key:0,class:"d-block invalid-feedback"},Kv={class:"col"},Jv={class:"form-floating mb-2"},Qv={key:0,class:"d-block invalid-feedback"},Xv={key:0},Zv={class:"row row-cols-1 row-cols-sm-3"},eg={class:"col"},tg={class:"form-floating mb-2"},sg={class:"col"},og={class:"form-floating mb-2"},ag={class:"col"},lg={class:"form-floating mb-2"},ng={class:"row row-cols-1 row-cols-sm-2"},rg={class:"col"},ig={class:"form-floating mb-2"},dg={class:"col"},ug={class:"form-floating mb-2"},cg={class:"row row-cols-1 row-cols-sm-2"},mg={class:"col"},fg={class:"form-floating mb-2"},pg={class:"col"},vg={class:"form-floating mb-2"},gg={key:1},bg={class:"table-responsive border mt-1"},yg={class:"table mb-0"},$g=["onUpdate:modelValue"],wg=["value"],hg={class:"modal-footer"},kg=["disabled"],_g={__name:"_addProgramFromTemplate",emits:["onClose"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=w,X=re(),r=re("modalAddProgramFromTemplate"),p=ce({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},a=$e(x,p);ie(async()=>{a.value.$reset()});const V=async(J,m,I)=>{X.value=J;const O=p;K.value.clear(),N.value="";const oe=D.moment(I),ae=oe.format("YYYY-MM-DD HH:mm"),ge=oe.format("YYYYMMDD_HHmm")+"_PRG_";O.eventId=m,O.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},O.selected={programTemplate:null},O.item={programTemplateId:null,name:ge,dateScheduledStart:ae,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await u(),await c(),a.value.$reset();var Se=document.getElementById(r.value),Le=ke.getOrCreateInstance(Se);Le.show()},n=async J=>{const m=p.selected.channel.programs;if(J&&m.find(Le=>Le.name===p.item.name)){alert(`Program name = [${p.item.name}] already exists.`);return}if(!J){W("onClose",{eventId:p.eventId},J);var ae=document.getElementById(r.value),ge=ke.getOrCreateInstance(ae);ge.hide();return}const I=p,O=D.moment(I.item.dateScheduledStart).utc().format(),oe=D.moment(I.item.dateScheduledStart).add(I.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),se={eventId:I.eventId,programTemplateId:I.selected.programTemplate.programTemplateId,channelId:I.selected.channel.channelId,name:I.item.name,dateScheduledStart:O,dateScheduledEnd:oe,adBreaks:I.selected.programTemplate.adBreaks.map(Se=>({sourceLocationId:I.selected.programTemplate.sourceLocationId,vodSourceId:Se.vodSourceId,offsetMillis:Se.offsetMillis,durationInMillis:Se.durationInMillis}))};W("onClose",se,J);var ae=document.getElementById(r.value),ge=ke.getOrCreateInstance(ae);ge.hide()},y=async()=>{await n(!0)},u=async()=>{try{const J=`/api/v1/channels/${X.value}/`;await M.get(J).then(m=>{p.selected.channel=m.data})}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},c=async()=>{await A(),await E(),await l()},l=async()=>{try{const J=`/api/v1/programTemplates/lookup/by-channel/${X.value}`;await M.get(J).then(m=>{p.lookups.programTemplates=m.data,p.lookups.programTemplates.length===1&&(p.item.programTemplateId=p.lookups.programTemplates[0].id)}),p.item.programTemplateId&&await g()}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},g=async()=>{await v(p.item.programTemplateId)},v=async J=>{try{const m=`/api/v1/programTemplates/${J}/`;await M.get(m).then(oe=>{p.selected.programTemplate=oe.data;const se=p.selected.programTemplate;se.startOffsetTime=D.moment.utc(se.startOffsetMillis).format("HH:mm:ss"),se.endOffsetTime=D.moment.utc(se.endOffsetMillis).format("HH:mm:ss"),se.durationTime=D.moment.utc(se.durationInMillis).format("HH:mm:ss"),se.adBreaksDurationTime=D.moment.utc(se.adBreaksDurationInMillis).format("HH:mm:ss"),se.totalProgramTemplateDurationTime=D.moment.utc(se.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),se.adBreaks.forEach(ae=>{ae.vodSourceId=null})});const I=p,O=I.selected.channel.outputs[0].outputType;await j(I.selected.programTemplate.sourceLocationId,O)}catch(m){N.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},A=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(m=>{p.lookups.sourceLocations=m.data,p.lookups.sourceLocations.length===1&&(p.item.sourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.sourceLocationId&&await k(p.item.sourceLocationId)}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},k=async J=>{try{let m=`/api/v1/vodSources/lookup/source-location/${J}`;await M.get(m).then(I=>{p.lookups.vodSources=I.data})}catch(m){N.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},j=async(J,m)=>{try{let I=`/api/v1/vodsources/lookup/source-location/${J}/output-type/${m}`;await M.get(I).then(O=>{p.lookups.adBreakVodSources=O.data})}catch(I){N.value=D.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},E=async()=>{try{const J=`/api/v1/programs/lookup/?channelId=${X.value}`;await M.get(J).then(m=>{p.lookups.channelPrograms=m.data;const I=p.lookups.channelPrograms.length})}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}};return f({open:V,close:n}),(J,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-hidden":"true"},[e("div",Av,[e("div",Ov,[e("div",Dv,[e("h5",Hv,[m[14]||(m[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:m[0]||(m[0]=I=>n(!1)),"aria-label":"Close"})]),e("div",Lv,[o(N)?(t(),s("div",Ev,[m[15]||(m[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Bv)])):H("",!0),o(K).size>0?(t(),s("div",qv,[m[16]||(m[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),I=>(t(),s("li",null,b(I),1))),256))])])):H("",!0),e("div",Nv,[e("div",Rv,[e("div",zv,[C(e("select",{"onUpdate:modelValue":m[1]||(m[1]=I=>p.item.programTemplateId=I),class:"form-select",onChange:m[2]||(m[2]=I=>g()),id:"sourceLocationId"},[(t(!0),s(B,null,z(p.lookups.programTemplates,I=>(t(),s("option",{value:I.id}," ["+b(o(D).moment.utc(I.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+b(I.name),9,Fv))),256))],544),[[fe,p.item.programTemplateId]]),m[17]||(m[17]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Gv,[e("div",jv,[e("div",Yv,[C(e("input",{"onUpdate:modelValue":m[3]||(m[3]=I=>p.item.name=I),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,p.item.name]]),m[18]||(m[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",Wv,[(t(!0),s(B,null,z(o(a).item.name.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])]),e("div",Kv,[e("div",Jv,[C(e("input",{"onUpdate:modelValue":m[4]||(m[4]=I=>p.item.dateScheduledStart=I),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Y,p.item.dateScheduledStart]]),m[19]||(m[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(a).item.dateScheduledStart.$error?(t(),s("div",Qv,[(t(!0),s(B,null,z(o(a).item.dateScheduledStart.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])])]),p.selected.programTemplate?(t(),s("div",Xv,[e("div",Zv,[e("div",eg,[e("div",tg,[C(e("input",{"onUpdate:modelValue":m[5]||(m[5]=I=>p.selected.programTemplate.startOffsetTime=I),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Y,p.selected.programTemplate.startOffsetTime]]),m[20]||(m[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",sg,[e("div",og,[C(e("input",{"onUpdate:modelValue":m[6]||(m[6]=I=>p.selected.programTemplate.endOffsetTime=I),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Y,p.selected.programTemplate.endOffsetTime]]),m[21]||(m[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",ag,[e("div",lg,[C(e("input",{"onUpdate:modelValue":m[7]||(m[7]=I=>p.selected.programTemplate.durationTime=I),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Y,p.selected.programTemplate.durationTime]]),m[22]||(m[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",ng,[e("div",rg,[e("div",ig,[C(e("input",{"onUpdate:modelValue":m[8]||(m[8]=I=>p.selected.programTemplate.adBreaksDurationTime=I),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Y,p.selected.programTemplate.adBreaksDurationTime]]),m[23]||(m[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",dg,[e("div",ug,[C(e("input",{"onUpdate:modelValue":m[9]||(m[9]=I=>p.selected.programTemplate.totalProgramTemplateDurationTime=I),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Y,p.selected.programTemplate.totalProgramTemplateDurationTime]]),m[24]||(m[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",cg,[e("div",mg,[e("div",fg,[C(e("input",{"onUpdate:modelValue":m[10]||(m[10]=I=>p.selected.programTemplate.sourceLocation.name=I),id:"name",class:"form-control",readonly:""},null,512),[[Y,p.selected.programTemplate.sourceLocation.name]]),m[25]||(m[25]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",pg,[e("div",vg,[C(e("input",{"onUpdate:modelValue":m[11]||(m[11]=I=>p.selected.programTemplate.vodSource.name=I),id:"name",class:"form-control",readonly:""},null,512),[[Y,p.selected.programTemplate.vodSource.name]]),m[26]||(m[26]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):H("",!0),m[29]||(m[29]=e("hr",null,null,-1)),p.selected.programTemplate?(t(),s("div",gg,[m[28]||(m[28]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",bg,[e("table",yg,[m[27]||(m[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(p.selected.programTemplate.adBreaks,(I,O)=>(t(),s("tr",null,[e("td",null,b(O+1),1),e("td",null,b(o(D).moment.utc(I.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(D).moment.utc(I.durationInMillis).format("HH:mm:ss")),1),e("td",null,[C(e("select",{"onUpdate:modelValue":oe=>I.vodSourceId=oe,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,z(p.lookups.adBreakVodSources,oe=>(t(),s(B,null,[oe.durationInMillis===I.durationInMillis?(t(),s("option",{key:0,value:oe.id}," ["+b(o(D).moment.utc(oe.durationInMillis).format("HH:mm:ss"))+"] "+b(oe.name),9,wg)):H("",!0)],64))),256))],8,$g),[[fe,I.vodSourceId]])])]))),256))])])])])):H("",!0)])]),e("div",hg,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:m[12]||(m[12]=I=>y()),class:"btn btn-primary",type:"button"},m[30]||(m[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,kg),e("button",{onClick:m[13]||(m[13]=I=>n(!1)),class:"btn btn-secondary ms-1"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Uv))}},Sg=["id"],Tg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mg={class:"modal-content"},Ig={class:"modal-header"},Cg={class:"modal-title"},Pg={class:"modal-body"},xg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Vg=["innerHTML"],Ug={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ag={key:2,class:"container"},Og={class:"row row-cols-1 row-cols-sm-2"},Dg={key:0,class:"col"},Hg={class:"form-floating mb-2"},Lg={key:1,class:"col"},Eg={class:"form-floating mb-2"},Bg={class:"row row-cols-1 row-cols-sm-3"},qg={class:"col"},Ng={class:"form-floating mb-2"},Rg={id:"name",class:"form-control",placeholder:"Name"},zg={key:0,class:"text-wrap"},Fg={key:0,class:"d-block invalid-feedback"},Gg={class:"col"},jg={class:"form-floating mb-2"},Yg={key:0,class:"d-block invalid-feedback"},Wg={class:"col"},Kg={class:"form-floating mb-2"},Jg={key:0,class:"d-block invalid-feedback"},Qg={class:"row row-cols-1 row-cols-sm-3"},Xg={class:"col"},Zg={class:"form-floating mb-2"},e1={class:"col"},t1={class:"form-floating mb-2"},s1={class:"col"},o1={class:"form-floating mb-2"},a1={class:"row row-cols-1 row-cols-sm-2"},l1={class:"col"},n1={class:"form-floating mb-2"},r1={class:"col"},i1={class:"form-floating mb-2"},d1={key:0},u1={class:"table-responsive border mt-1"},c1={class:"table mb-0"},m1=["onUpdate:modelValue"],f1=["value"],p1={class:"modal-footer"},v1=["disabled"],lt={__name:"_editProgram",emits:["onClose"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=w,X=re(),r=re("modalEditProgram"),p=ce({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},a=$e(x,p);ie(async()=>{a.value.$reset()});const V=async(g,v)=>{X.value=g;const A=p;K.value.clear(),N.value="",A.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},A.item=null,await u(),p.item.dateScheduledStart=null,await c(),a.value.$reset();var k=document.getElementById(r.value),j=ke.getOrCreateInstance(k);j.show()},n=async g=>{if(!g){W("onClose",g);var j=document.getElementById(r.value),E=ke.getOrCreateInstance(j);E.hide();return}const v=p,A=D.moment(v.item.dateScheduledStart).utc().format(),k={programId:X.value,name:v.item.name,dateScheduledStart:A,adBreaks:v.item.adBreaks.map(J=>({sourceLocationId:v.item.sourceLocationId,vodSourceId:J.vodSourceId,offsetMillis:J.offsetMillis,durationInMillis:J.durationInMillis}))};try{await M.put("/api/v1/programs/",k).then(m=>{i.success("Edit Program","Program was edited.")})}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0);return}finally{}W("onClose",g);var j=document.getElementById(r.value),E=ke.getOrCreateInstance(j);E.hide()},y=async()=>{await n(!0)},u=async()=>{try{const g=`/api/v1/programs/${X.value}/`;await M.get(g).then(k=>{p.item=k.data;const j=p.item,m=D.moment(j.dateScheduledStart).format("YYYY-MM-DD HH:mm");p.item.dateScheduledStart=m,j.startOffsetTime=D.moment.utc(j.startOffsetMillis).format("HH:mm:ss"),j.endOffsetTime=D.moment.utc(j.endOffsetMillis).format("HH:mm:ss"),j.durationTime=D.moment.utc(j.durationInMillis).format("HH:mm:ss"),j.adBreaksDurationTime=D.moment.utc(j.adBreaksDurationInMillis).format("HH:mm:ss"),j.totalProgramTemplateDurationTime=D.moment.utc(j.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const v=p,A=v.item.channel.outputs[0].outputType;await l(v.item.sourceLocationId,A)}catch(g){N.value=D.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},c=async()=>{},l=async(g,v)=>{try{let A=`/api/v1/vodsources/lookup/source-location/${g}/output-type/${v}`;await M.get(A).then(k=>{p.lookups.adBreakVodSources=k.data})}catch(A){N.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}};return f({open:V,close:n}),(g,v)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Tg,[e("div",Mg,[e("div",Ig,[e("h5",Cg,[v[12]||(v[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:v[0]||(v[0]=A=>n(!1)),"aria-label":"Close"})]),e("div",Pg,[o(N)?(t(),s("div",xg,[v[13]||(v[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Vg)])):H("",!0),o(K).size>0?(t(),s("div",Ug,[v[14]||(v[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),A=>(t(),s("li",null,b(A),1))),256))])])):H("",!0),p.item?(t(),s("div",Ag,[e("div",Og,[p.item.sourceLocation?(t(),s("div",Dg,[e("div",Hg,[C(e("input",{"onUpdate:modelValue":v[1]||(v[1]=A=>p.item.sourceLocation.name=A),id:"name",class:"form-control",readonly:""},null,512),[[Y,p.item.sourceLocation.name]]),v[15]||(v[15]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):H("",!0),p.item.vodSource?(t(),s("div",Lg,[e("div",Eg,[C(e("input",{"onUpdate:modelValue":v[2]||(v[2]=A=>p.item.vodSource.name=A),id:"name",class:"form-control",readonly:""},null,512),[[Y,p.item.vodSource.name]]),v[16]||(v[16]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):H("",!0)]),e("div",Bg,[e("div",qg,[e("div",Ng,[e("div",Rg,[p.item.relativeProgram?(t(),s("span",zg,b(p.item.relativeProgram.name),1)):H("",!0)]),v[17]||(v[17]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(a).item.name.$error?(t(),s("div",Fg,[(t(!0),s(B,null,z(o(a).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):H("",!0)])]),e("div",Gg,[e("div",jg,[C(e("input",{"onUpdate:modelValue":v[3]||(v[3]=A=>p.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,p.item.name]]),v[18]||(v[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",Yg,[(t(!0),s(B,null,z(o(a).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):H("",!0)])]),e("div",Wg,[e("div",Kg,[C(e("input",{"onUpdate:modelValue":v[4]||(v[4]=A=>p.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Y,p.item.dateScheduledStart]]),v[19]||(v[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(a).item.dateScheduledStart.$error?(t(),s("div",Jg,[(t(!0),s(B,null,z(o(a).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",Qg,[e("div",Xg,[e("div",Zg,[C(e("input",{"onUpdate:modelValue":v[5]||(v[5]=A=>p.item.startOffsetTime=A),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Y,p.item.startOffsetTime]]),v[20]||(v[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",e1,[e("div",t1,[C(e("input",{"onUpdate:modelValue":v[6]||(v[6]=A=>p.item.endOffsetTime=A),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Y,p.item.endOffsetTime]]),v[21]||(v[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",s1,[e("div",o1,[C(e("input",{"onUpdate:modelValue":v[7]||(v[7]=A=>p.item.durationTime=A),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Y,p.item.durationTime]]),v[22]||(v[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",a1,[e("div",l1,[e("div",n1,[C(e("input",{"onUpdate:modelValue":v[8]||(v[8]=A=>p.item.adBreaksDurationTime=A),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Y,p.item.adBreaksDurationTime]]),v[23]||(v[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",r1,[e("div",i1,[C(e("input",{"onUpdate:modelValue":v[9]||(v[9]=A=>p.item.totalProgramTemplateDurationTime=A),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Y,p.item.totalProgramTemplateDurationTime]]),v[24]||(v[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])]),v[27]||(v[27]=e("hr",null,null,-1)),p.item?(t(),s("div",d1,[v[26]||(v[26]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",u1,[e("table",c1,[v[25]||(v[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(p.item.adBreaks,(A,k)=>(t(),s("tr",null,[e("td",null,b(k+1),1),e("td",null,b(o(D).moment.utc(A.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(D).moment.utc(A.durationInMillis).format("HH:mm:ss")),1),e("td",null,[C(e("select",{"onUpdate:modelValue":j=>A.vodSourceId=j,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,z(p.lookups.adBreakVodSources,j=>(t(),s(B,null,[j.durationInMillis===A.durationInMillis?(t(),s("option",{key:0,value:j.id}," ["+b(o(D).moment.utc(j.durationInMillis).format("HH:mm:ss"))+"] "+b(j.name),9,f1)):H("",!0)],64))),256))],8,m1),[[fe,A.vodSourceId]])])]))),256))])])])])):H("",!0)])):H("",!0)]),e("div",p1,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:v[10]||(v[10]=A=>y()),class:"btn btn-primary ms-2",type:"button"},v[28]||(v[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,v1),e("button",{onClick:v[11]||(v[11]=A=>n(!1)),class:"btn btn-secondary ms-1"},v[29]||(v[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Sg))}},g1={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:f,pageTitle:w,busy:_,infoMessage:h,warningMessage:R,errorMessage:T,router:K,axios:F,utils:P,toasts:N,close:Q,security:M}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),D=d,i=re(null),S=re(null),$=re(null),W={viewType:"Week",cellDuration:15,startDate:Ue.DayPilot.Date.today(),onTimeRangeSelected:u=>{var c=u.control;const l={start:u.start,end:u.end,id:Ue.DayPilot.guid(),text:"NEW",tags:{type:"new"}};c.events.add(l);var g=c.events.find(l.id);V(g)},onBeforeEventRender:u=>{if(u.data.barColor="green",!!u.data.tags)switch(u.data.tags.type){case"new":u.data.barColor="yellow";break;case"business":u.data.barColor="red";break;case"personal":u.data.barColor="greem";break;case"vacation":u.data.barColor="black";break;default:u.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async u=>{const c=u.newStart.value,l=u.e.id(),g=P.moment(c).utc().format();try{let v="/api/v1/programs/scheduled-date-start";const A={programId:l,dateScheduledStart:g};await F.put(v,A).then(k=>{N.success("Program date scheduled start was edited.")})}catch(v){T.value=P.getErrorMessageAsHtml(v),window.scrollTo(0,0);return}finally{}await x()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async u=>{var c=u.e.id();y(c)},contextMenu:new Ue.DayPilot.Menu([{text:"Clone",onClick:async u=>{const c=u.source.id();try{let l=`/api/v1/programs/${c}/clone`;await F.post(l).then(g=>{N.success("Clone Program","Program was cloned.")})}catch(l){T.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0);return}finally{await x()}}},{text:"Delete",onClick:async u=>{if(!confirm("Do you want to remove this program?"))return;const l=u.source.id();try{let g=`/api/v1/programs/${l}/`;await F.delete(g).then(v=>{N.success("Delete Program","Program was deleted.")}),i.value.control.events.remove(u.source)}catch(g){T.value=P.getErrorMessageAsHtml(g),window.scrollTo(0,0);return}finally{await x()}}}])},X=re([]),r=()=>{i.value.control.update({events:X.value})},p=ce({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});ie(async()=>{await x()});const x=async()=>{await a(),await r()},a=async()=>{const u=p;if(!_.value)try{_.value=!0,T.value="";const c=`/api/v1/channels/${D.id}/`;await F.get(c).then(l=>{u.item=l.data;const g=u.item.outputs,v=u.item.programs.map(A=>{let k=`${A.name}`,j=`[${A.name}]`;return A.relativeProgram&&(j+=` => [${A.relativeProgram.name}]`),{start:P.moment(A.dateScheduledStart).utc(!0).format(),end:P.moment(A.dateScheduledEnd).utc(!0).format(),id:A.programId,text:k,toolTip:j}});X.value=v})}catch(c){T.value=P.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}},V=u=>{S.value.open(D.id,u.id(),u.start().value)},n=async(u,c)=>{var l=i.value,g=l.control.events.find(u.eventId);if(!c&&g){i.value.control.events.remove(g);return}l.control.events.find(J=>J.text()==u.name)&&(alert("Program already exists in this channel. Removing in the calendar."),i.value.control.events.remove(g));const A=P.moment(u.dateScheduledStart).utc(!0).format(),k=P.moment(u.dateScheduledEnd).utc(!0).format(),j=new Ue.DayPilot.Date(A),E=new Ue.DayPilot.Date(k);g.text(u.name),g.start(new Ue.DayPilot.Date(j)),g.end(new Ue.DayPilot.Date(E)),g.data.tags.program=u,g.commit(),i.value.control.update(),await F.post("/api/v1/programs/from-template/",u).then(J=>{N.success("Add New Program",`Program [${u.name}] was added to this channel.`)},J=>{const m=P.getErrorMessageAsHtml(J);alert(m)}),await x()},y=(u,c)=>{$.value.open(u,c)};return(u,c)=>{const l=Z("router-link"),g=Z("PageHeader"),v=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(g,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(w)},{default:L(()=>[e("button",{onClick:c[0]||(c[0]=A=>x()),class:"btn btn-secondary ms-1"},c[1]||(c[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),q(l,{to:`${d.urlView}/${d.id}`,class:"btn btn-secondary ms-1"},{default:L(()=>c[2]||(c[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),q(v,{errorMessage:o(T),vuelidate:u.v$},{default:L(()=>[e("div",null,[q(o(Ue.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:i},null,512),q(_g,{ref_key:"modalAddProgram",ref:S,onOnClose:n},null,512),q(lt,{ref_key:"modalEditProgram",ref:$,onOnClose:x},null,512)])]),_:1},8,["errorMessage","vuelidate"]),c[3]||(c[3]=G(" > "))])]),_:1})}}},b1=["id"],y1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},$1={class:"modal-content"},w1={class:"modal-header"},h1={class:"modal-title"},k1={class:"modal-body"},_1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},S1=["innerHTML"],T1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},M1={class:"container"},I1={class:"row row-cols-1 row-cols-sm-3"},C1={class:"col"},P1={class:"form-floating mb-2"},x1=["disabled"],V1=["value"],U1={class:"col"},A1={class:"form-floating mb-2"},O1={key:0,class:"d-block invalid-feedback"},D1={class:"col"},H1={class:"form-floating mb-2"},L1={key:0,class:"d-block invalid-feedback"},E1={class:"row row-cols-sm-2"},B1={class:"col"},q1={class:"form-floating mb-2"},N1=["value"],R1={key:0,class:"d-block invalid-feedback"},z1={class:"col"},F1={class:"form-floating mb-2"},G1=["value"],j1={key:0,class:"d-block invalid-feedback"},Y1={class:"col"},W1={class:"input-group mb-1"},K1={class:"form-floating"},J1={key:0,class:"input-group-text"},Q1={key:0},X1={key:1},Z1={key:2},eb={key:3,class:"d-block invalid-feedback"},tb={class:"col"},sb={class:"input-group mb-1"},ob={class:"form-floating"},ab={key:0,class:"input-group-text"},lb={key:0},nb={key:1},rb={key:2,class:"d-block invalid-feedback"},ib={class:"table-responsive border mt-1"},db={class:"table"},ub={class:"input-group mb-1"},cb=["onUpdate:modelValue"],mb={key:0,class:"input-group-text"},fb=["onUpdate:modelValue"],pb=["value"],vb=["onUpdate:modelValue"],gb=["value"],bb=["onClick"],yb={class:"modal-footer"},$b=["disabled"],wb={__name:"_addProgram",emits:["refresh"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=w,X=re(),r=re("modalAddProgram"),p=ce({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},a=$e(x,p);ie(async()=>{a.value.$reset()});const V=async J=>{X.value=J;const m=p;K.value.clear(),N.value="";const I=D.moment().local().add(2,"m"),oe=I.format("YYYY-MM-DD HH:mm"),se=I.format("YYYY_MM_DD")+"_PROGRAM_";m.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},m.item={name:se,relativeProgramId:null,dateScheduledStart:oe,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await u(),a.value.$reset();var ae=document.getElementById(r.value),ge=ke.getOrCreateInstance(ae);ge.show()},n=async()=>{var J=document.getElementById(r.value),m=ke.getOrCreateInstance(J);m.hide(),W("refresh")},y=async()=>{const J=p;if(R.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const O=J.item;delete O.vodSource,O.channelId=X.value;var I=O.dateScheduledStart;O.dateScheduledStart=D.moment(I).utc().format(),await M.post("/api/v1/programs/",O).then(oe=>{i.success("Add Program","Program added to Channel",{async onClose(){}})}),await n()}catch(O){N.value=D.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{R.value=!1}},u=async()=>{await c(),await g(),await A()},c=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(m=>{p.lookups.sourceLocations=m.data,p.lookups.sourceLocations.length===1&&(p.item.sourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.sourceLocationId&&await l(p.item.sourceLocationId)}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},l=async J=>{try{let m=`/api/v1/vodSources/lookup/source-location/${J}`;await M.get(m).then(I=>{p.lookups.vodSources=I.data})}catch(m){N.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},g=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(m=>{p.lookups.adBreakSourceLocations=m.data})}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},v=async J=>{try{let m=`/api/v1/vodSources/lookup/source-location/${J}`;await M.get(m).then(I=>{p.lookups.adBreakVodSources=I.data})}catch(m){N.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},A=async()=>{try{const J=`/api/v1/programs/lookup/?channelId=${X.value}`;await M.get(J).then(m=>{if(p.lookups.channelPrograms=m.data,p.lookups.channelPrograms.length===1){const O=p.lookups.channelPrograms[0];p.item.relativeProgramId=O.id}})}catch(J){N.value=D.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},k=()=>{const J={offsetMillis:0,sourceLocationId:null,vodSourceId:null},m=p.item.adBreaks.length;if(m>0){const I=p.item.adBreaks[m-1];J.offsetMillis=I.offsetMillis+1e4}p.item.adBreaks.push(J)},j=J=>{p.item.adBreaks.splice(J,1)},E=()=>{const J=p.item.vodSource;p.item.vodSourceId=J.id};return f({open:V,close:n}),(J,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",y1,[e("div",$1,[e("div",w1,[e("h5",h1,[m[12]||(m[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:m[0]||(m[0]=I=>n()),"aria-label":"Close"})]),e("div",k1,[o(N)?(t(),s("div",_1,[m[13]||(m[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,S1)])):H("",!0),o(K).size>0?(t(),s("div",T1,[m[14]||(m[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),I=>(t(),s("li",null,b(I),1))),256))])])):H("",!0),e("div",M1,[e("div",I1,[e("div",C1,[e("div",P1,[C(e("select",{"onUpdate:modelValue":m[1]||(m[1]=I=>p.item.relativeProgramId=I),class:"form-select",id:"sourceLocationId",disabled:p.lookups.channelPrograms.length<=0},[(t(!0),s(B,null,z(p.lookups.channelPrograms,I=>(t(),s("option",{value:I.id},b(I.name),9,V1))),256))],8,x1),[[fe,p.item.relativeProgramId]]),m[15]||(m[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",U1,[e("div",A1,[C(e("input",{"onUpdate:modelValue":m[2]||(m[2]=I=>p.item.name=I),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,p.item.name]]),m[16]||(m[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",O1,[(t(!0),s(B,null,z(o(a).item.name.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])]),e("div",D1,[e("div",H1,[C(e("input",{"onUpdate:modelValue":m[3]||(m[3]=I=>p.item.dateScheduledStart=I),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Y,p.item.dateScheduledStart]]),m[17]||(m[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(a).item.dateScheduledStart.$error?(t(),s("div",L1,[(t(!0),s(B,null,z(o(a).item.dateScheduledStart.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])])]),e("div",E1,[e("div",B1,[e("div",q1,[C(e("select",{"onUpdate:modelValue":m[4]||(m[4]=I=>p.item.sourceLocationId=I),onChange:m[5]||(m[5]=I=>l(p.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,z(p.lookups.sourceLocations,I=>(t(),s("option",{value:I.id},b(I.name),9,N1))),256))],544),[[fe,p.item.sourceLocationId]]),m[18]||(m[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(a).item.sourceLocationId.$error?(t(),s("div",R1,[(t(!0),s(B,null,z(o(a).item.sourceLocationId.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])]),e("div",z1,[e("div",F1,[C(e("select",{"onUpdate:modelValue":m[6]||(m[6]=I=>p.item.vodSource=I),onChange:m[7]||(m[7]=I=>E()),class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,z(p.lookups.vodSources,I=>(t(),s("option",{value:I},b(I.name),9,G1))),256))],544),[[fe,p.item.vodSource]]),m[19]||(m[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(a).item.vodSourceId.$error?(t(),s("div",j1,[(t(!0),s(B,null,z(o(a).item.vodSourceId.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])]),e("div",Y1,[e("div",W1,[e("div",K1,[C(e("input",{"onUpdate:modelValue":m[8]||(m[8]=I=>p.item.startOffsetMillis=I),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Y,p.item.startOffsetMillis]]),m[20]||(m[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),p.item.startOffsetMillis>0?(t(),s("span",J1,b(o(D).moment.utc(p.item.startOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),p.item.startOffsetMillis>0&&p.item.startOffsetMillis<3e4?(t(),s("div",Q1,m[21]||(m[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),p.item.startOffsetMillis>p.item.endOffsetMillis&&p.item.endOffsetMillis>0?(t(),s("div",X1,m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):H("",!0),p.item.vodSource&&p.item.startOffsetMillis>p.item.vodSource.durationInMillis?(t(),s("div",Z1,m[23]||(m[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(a).item.startOffsetMillis.$error?(t(),s("div",eb,[(t(!0),s(B,null,z(o(a).item.startOffsetMillis.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)]),e("div",tb,[e("div",sb,[e("div",ob,[C(e("input",{"onUpdate:modelValue":m[9]||(m[9]=I=>p.item.endOffsetMillis=I),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Y,p.item.endOffsetMillis]]),m[24]||(m[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),p.item.endOffsetMillis>0?(t(),s("span",ab,b(o(D).moment.utc(p.item.endOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),p.item.endOffsetMillis>0&&p.item.endOffsetMillis<3e4?(t(),s("div",lb,m[25]||(m[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),p.item.vodSource&&p.item.endOffsetMillis>p.item.vodSource.durationInMillis?(t(),s("div",nb,m[26]||(m[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(a).item.endOffsetMillis.$error?(t(),s("div",rb,[(t(!0),s(B,null,z(o(a).item.endOffsetMillis.$errors,I=>(t(),s("div",{key:I.$uid},b(I.$message),1))),128))])):H("",!0)])]),m[30]||(m[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[m[27]||(m[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:k,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",ib,[e("table",db,[m[29]||(m[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(B,null,z(p.item.adBreaks,(I,O)=>(t(),s("tr",null,[e("td",null,b(O+1),1),e("td",null,[e("div",ub,[C(e("input",{"onUpdate:modelValue":oe=>I.offsetMillis=oe,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,cb),[[Y,I.offsetMillis]]),I.offsetMillis>0?(t(),s("span",mb,b(o(D).moment.utc(I.offsetMillis).format("HH:mm:ss")),1)):H("",!0)])]),e("td",null,[C(e("select",{"onUpdate:modelValue":oe=>I.sourceLocationId=oe,onChange:m[10]||(m[10]=oe=>v(p.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(B,null,z(p.lookups.adBreakSourceLocations,oe=>(t(),s("option",{value:oe.id},b(oe.name),9,pb))),256))],40,fb),[[fe,I.sourceLocationId]])]),e("td",null,[C(e("select",{"onUpdate:modelValue":oe=>I.vodSourceId=oe,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(B,null,z(p.lookups.adBreakVodSources,oe=>(t(),s("option",{value:oe.id},b(oe.name),9,gb))),256))],8,vb),[[fe,I.vodSourceId]])]),e("td",null,[e("button",{onClick:oe=>j(O),class:"btn btn-outline-warning"},m[28]||(m[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,bb)])]))),256))])])])])])]),e("div",yb,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:m[11]||(m[11]=I=>y()),class:"btn btn-primary",type:"button"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$b),m[32]||(m[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,b1))}},hb=["id"],kb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},_b={class:"modal-content"},Sb={class:"modal-header"},Tb={class:"modal-title"},Mb={class:"modal-body"},Ib={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cb=["innerHTML"],Pb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},xb={class:"container"},Vb={class:"col"},Ub={class:"form-floating mb-2"},Ab={class:"col"},Ob={class:"form-floating mb-2"},Db={key:0,class:"d-block invalid-feedback"},Hb={class:"col"},Lb={class:"form-floating mb-2 d-none"},Eb={key:0,class:"d-block invalid-feedback"},Bb={class:"col"},qb={class:"form-floating mb-2"},Nb={key:0,class:"d-block invalid-feedback"},Rb={class:"modal-footer"},zb=["disabled"],Fb={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=w,X=re(),r=re("modalAddPlaybackConfiguration"),p=ce({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},a=$e(x,p);ie(async()=>{a.value.$reset()});const V=async(u,c)=>{X.value=u;const l=p;K.value.clear(),N.value="";const g=c;let v=g.lastIndexOf("/");const A=g.substring(0,v);let k=g.substring(v+1);v=k.lastIndexOf("."),k=k.substring(0,v)+"_ADCAMPAIGN_",l.item={name:k,originalVideoContentSourceUrl:c,videoContentSourceUrl:A,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},a.value.$reset();var j=document.getElementById(r.value),E=ke.getOrCreateInstance(j);E.show()},n=async()=>{var u=document.getElementById(r.value),c=ke.getOrCreateInstance(u);c.hide(),W("refresh")},y=async()=>{const u=p;if(R.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const l=u.item;l.channelOutputId=X.value,await M.put("/api/v1/channelOutputs/playback/",l).then(g=>{i.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await n()}catch(l){N.value=D.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:V,close:n}),(u,c)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",kb,[e("div",_b,[e("div",Sb,[e("h5",Tb,[c[6]||(c[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:c[0]||(c[0]=l=>n()),"aria-label":"Close"})]),e("div",Mb,[o(N)?(t(),s("div",Ib,[c[7]||(c[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Cb)])):H("",!0),o(K).size>0?(t(),s("div",Pb,[c[8]||(c[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),l=>(t(),s("li",null,b(l),1))),256))])])):H("",!0),e("div",xb,[e("div",Vb,[e("div",Ub,[C(e("textarea",{"onUpdate:modelValue":c[1]||(c[1]=l=>p.item.originalVideoContentSourceUrl=l),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Y,p.item.originalVideoContentSourceUrl]]),c[9]||(c[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",Ab,[e("div",Ob,[C(e("input",{"onUpdate:modelValue":c[2]||(c[2]=l=>p.item.name=l),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Y,p.item.name]]),c[10]||(c[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",Db,[(t(!0),s(B,null,z(o(a).item.name.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):H("",!0)])]),e("div",Hb,[e("div",Lb,[C(e("input",{"onUpdate:modelValue":c[3]||(c[3]=l=>p.item.videoContentSourceUrl=l),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Y,p.item.videoContentSourceUrl]]),c[11]||(c[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),c[12]||(c[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(a).item.videoContentSourceUrl.$error?(t(),s("div",Eb,[(t(!0),s(B,null,z(o(a).item.videoContentSourceUrl.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):H("",!0)])]),e("div",Bb,[e("div",qb,[C(e("textarea",{"onUpdate:modelValue":c[4]||(c[4]=l=>p.item.adDecisionServerUrl=l),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Y,p.item.adDecisionServerUrl]]),c[13]||(c[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(a).item.adDecisionServerUrl.$error?(t(),s("div",Nb,[(t(!0),s(B,null,z(o(a).item.adDecisionServerUrl.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):H("",!0),c[14]||(c[14]=Fe('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",Rb,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:c[5]||(c[5]=l=>y()),class:"btn btn-primary",type:"button"},c[15]||(c[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,zb),c[16]||(c[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,hb))}},Gb=["id"],jb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Yb={class:"modal-content"},Wb={class:"modal-header"},Kb={class:"modal-title"},Jb={class:"modal-body"},Qb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Xb=["innerHTML"],Zb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ey={class:"container"},ty={class:"col"},sy={class:"form-floating mb-2"},oy=["value"],ay={key:0,class:"d-block invalid-feedback"},ly={class:"col"},ny={class:"form-floating mb-2"},ry={key:0,class:"d-block invalid-feedback"},iy={class:"col"},dy={class:"form-floating mb-2"},uy={key:0,class:"d-block invalid-feedback"},cy={class:"modal-footer"},my=["disabled"],fy={__name:"_addChannelOutput",emits:["refresh"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=w,X=re(),r=re("modalAddChannelOutput"),p=ce({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),x={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},manifestName:{required:ee.withMessage("Manifest Name is required.",te),$autoDirty:!0,$lazy:!0},outputType:{required:ee.withMessage("Output Type is required.",te),$autoDirty:!0,$lazy:!0}}},a=$e(x,p);ie(async()=>{a.value.$reset()});const V=async()=>{await n()},n=async()=>{try{await M.get("/api/v1/sourceGroups/lookup/").then(g=>{p.lookups.sourceGroups=g.data,p.lookups.sourceGroups.length===1&&(p.item.sourceGroupId=p.lookups.sourceGroups[0].id)})}catch(l){N.value=D.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},y=async l=>{X.value=l;const g=p;K.value.clear(),N.value="",g.lookups={sourceGroups:[]},g.item={sourceGroupId:null,outputType:null},await V(),a.value.$reset();var v=document.getElementById(r.value),A=ke.getOrCreateInstance(v);A.show()},u=async()=>{var l=document.getElementById(r.value),g=ke.getOrCreateInstance(l);g.hide(),W("refresh")},c=async()=>{const l=p;if(R.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const v=l.item;v.channelId=X.value,await M.post("/api/v1/channelOutputs",v).then(A=>{i.success("Add Channel Output","Channel output added.")}),await u()}catch(v){N.value=D.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:y,close:u}),(l,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",jb,[e("div",Yb,[e("div",Wb,[e("h5",Kb,[g[4]||(g[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),g[5]||(g[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Jb,[o(N)?(t(),s("div",Qb,[g[6]||(g[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Xb)])):H("",!0),o(K).size>0?(t(),s("div",Zb,[g[7]||(g[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),v=>(t(),s("li",null,b(v),1))),256))])])):H("",!0),e("div",ey,[e("div",ty,[e("div",sy,[C(e("select",{"onUpdate:modelValue":g[0]||(g[0]=v=>p.item.sourceGroupId=v),class:"form-select",id:"sourceGroupId"},[(t(!0),s(B,null,z(p.lookups.sourceGroups,v=>(t(),s("option",{value:v.id},b(v.name),9,oy))),256))],512),[[fe,p.item.sourceGroupId]]),g[8]||(g[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(a).item.sourceGroupId.$error?(t(),s("div",ay,[(t(!0),s(B,null,z(o(a).item.sourceGroupId.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):H("",!0)])]),e("div",ly,[e("div",ny,[C(e("select",{"onUpdate:modelValue":g[1]||(g[1]=v=>p.item.outputType=v),class:"form-select",id:"outputType"},g[9]||(g[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[fe,p.item.outputType]]),g[10]||(g[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(a).item.outputType.$error?(t(),s("div",ry,[(t(!0),s(B,null,z(o(a).item.outputType.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):H("",!0)])]),e("div",iy,[e("div",dy,[C(e("input",{"onUpdate:modelValue":g[2]||(g[2]=v=>p.item.manifestName=v),class:"form-control",id:"manifestName"},null,512),[[Y,p.item.manifestName]]),g[11]||(g[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(a).item.manifestName.$error?(t(),s("div",uy,[(t(!0),s(B,null,z(o(a).item.manifestName.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):H("",!0)])])])]),e("div",cy,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:g[3]||(g[3]=v=>c()),class:"btn btn-primary",type:"button"},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,my),g[13]||(g[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Gb))}},py=["id"],vy={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},gy={class:"modal-content"},by={class:"modal-header"},yy={class:"modal-title"},$y={class:"modal-body"},wy={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hy=["innerHTML"],ky={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},_y={class:"container"},Sy={class:"col"},Ty={class:"form-floating mb-2"},My=["value"],Iy={key:0,class:"d-block invalid-feedback"},Cy={class:"col"},Py={class:"form-floating mb-2"},xy=["value"],Vy={key:0,class:"d-block invalid-feedback"},Uy={class:"col"},Ay={class:"card h-100"},Oy=["id"],Dy={class:"modal-footer"},Hy=["disabled"],Ly={__name:"_editFillerSlate",emits:["refresh"],setup(d,{expose:f,emit:w}){const{appTitle:_,pageTitle:h,busy:R,isDirty:T,validations:K,infoMessage:F,warningMessage:P,errorMessage:N,router:Q,axios:M,utils:D,toasts:i,closeWithReturnUrl:S,security:$}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=w,X=re("modalEditFillerSlate"),r=ce({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),p={item:{channelId:{required:ee.withMessage("channelId is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0}}},x=$e(p,r);ie(async()=>{x.value.$reset()});const a=async()=>{await V()},V=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(k=>{r.lookups.sourceLocations=k.data}),r.item.sourceLocationId&&await n(r.item.sourceLocationId)}catch(A){N.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},n=async A=>{try{let k=`/api/v1/vodSources/lookup/source-Location/${A}/?type=2`;await M.get(k).then(j=>{r.lookups.vodSources=j.data})}catch(k){N.value=D.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},y=async(A,k,j)=>{const E=r;K.value.clear(),N.value="",E.lookups={sourceLocations:[],vodSources:[]},E.item={channelId:A,sourceLocationId:k,vodSourceId:j},await a(),r.item.vodSourceId&&await v(r.item.vodSourceId),x.value.$reset();var J=document.getElementById(X.value),m=ke.getOrCreateInstance(J);m.show()},u=async()=>{var A=document.getElementById(X.value),k=ke.getOrCreateInstance(A);k.hide(),W("refresh")},c=async()=>{const A=r;if(R.value)return;if(!await x.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const j=A.item;await M.put("/api/v1/channels/filler-slate",j).then(E=>{i.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await u()}catch(j){N.value=D.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{R.value=!1}},l=async()=>{r.item.vodSourceId=null,await n(r.item.sourceLocationId)},g=async()=>{await v(r.item.vodSourceId)},v=async A=>{try{let k=`/api/v1/vodSources/${A}/hls`;const j=await M.get(k).then(J=>J.data);r.hls&&r.hls.destroy();const E=document.getElementById(`video-${r.item.channelId}`);r.hls=D.createHlsStream(E,j,"Previewing filler slate.")}catch(k){N.value=D.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}};return f({open:y,close:u}),(A,k)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vy,[e("div",gy,[e("div",by,[e("h5",yy,[k[5]||(k[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),G(b(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:k[0]||(k[0]=j=>u()),"aria-label":"Close"})]),e("div",$y,[o(N)?(t(),s("div",wy,[k[6]||(k[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,hy)])):H("",!0),o(K).size>0?(t(),s("div",ky,[k[7]||(k[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(o(K).values(),j=>(t(),s("li",null,b(j),1))),256))])])):H("",!0),e("div",_y,[e("div",Sy,[e("div",Ty,[C(e("select",{"onUpdate:modelValue":k[1]||(k[1]=j=>r.item.sourceLocationId=j),onChange:k[2]||(k[2]=j=>l()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(B,null,z(r.lookups.sourceLocations,j=>(t(),s("option",{value:j.id},b(j.name),9,My))),256))],544),[[fe,r.item.sourceLocationId]]),k[8]||(k[8]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(x).item.sourceLocationId.$error?(t(),s("div",Iy,[(t(!0),s(B,null,z(o(x).item.sourceLocationId.$errors,j=>(t(),s("div",{key:j.$uid},b(j.$message),1))),128))])):H("",!0)])]),e("div",Cy,[e("div",Py,[C(e("select",{"onUpdate:modelValue":k[3]||(k[3]=j=>r.item.vodSourceId=j),onChange:g,class:"form-select",id:"vodSourceId"},[(t(!0),s(B,null,z(r.lookups.vodSources,j=>(t(),s("option",{value:j.id},b(j.name),9,xy))),256))],544),[[fe,r.item.vodSourceId]]),k[9]||(k[9]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(x).item.vodSourceId.$error?(t(),s("div",Vy,[(t(!0),s(B,null,z(o(x).item.vodSourceId.$errors,j=>(t(),s("div",{key:j.$uid},b(j.$message),1))),128))])):H("",!0)])]),e("div",Uy,[e("div",Ay,[e("video",{id:`video-${r.item.channelId}`,class:"card-img-top object-fit-contain"},null,8,Oy)])])])]),e("div",Dy,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:k[4]||(k[4]=j=>c()),class:"btn btn-primary",type:"button"},k[10]||(k[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Hy),k[11]||(k[11]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,py))}},Ey={key:0,class:"dropdown"},By={key:0,class:"fas fa-fw fa-play"},qy={key:1,class:"fas fa-fw fa-stop"},Ny={class:"dropdown-menu"},Ry={key:0},zy={key:1},Fy={key:0},Gy={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},jy={class:"nav-item",role:"presentation"},Yy={class:"nav-item",role:"presentation"},Wy={class:"nav-item",role:"presentation"},Ky={class:"nav-item",role:"presentation"},Jy={class:"nav-item",role:"presentation"},Qy={class:"tab-content",id:"myTabContent"},Xy={class:"mt-2"},Zy={class:"row row-cols-1 row-cols-sm-3"},e$={class:"col"},t$={class:"form-floating mb-2"},s$={class:"col"},o$={class:"form-floating mb-2"},a$={class:"col"},l$={class:"form-floating mb-2"},n$={class:"d-flex flex-row justify-content-start align-items-center"},r$={key:0,class:"ms-2"},i$={class:"row row-cols-sm-2 mt-1"},d$={class:"col"},u$={class:"form-floating mb-2"},c$={class:"col"},m$={class:"form-floating mb-2"},f$={class:"col mt-2"},p$={class:"form-floating mb-2"},v$={class:"mt-2"},g$={class:"d-flex flex-row justify-content-start align-items-center"},b$={class:"ms-2"},y$={key:0,class:"alert bg-warning mt-2"},$$={class:"table-responsive border mt-1"},w$={class:"table table-bordered1 mb-0"},h$={class:"badge bg-info"},k$={key:0,class:"text-wrap"},_$={key:1,class:"text-warning"},S$={key:0,class:"text-end"},T$={key:1,class:"text-end"},M$=["onClick"],I$={key:0},C$={colspan:"999"},P$={class:"d-flex flex-row justify-content-start align-items-center"},x$={class:"ms-2"},V$={if:"item.playbackUrl"},U$=["onClick"],A$={key:0,class:"table-responsive border mt-2"},O$={class:"table mb-0 table-small"},D$=["onUpdate:modelValue"],H$={class:"text-end"},L$=["onClick"],E$=["onClick"],B$={class:"mt-2"},q$={class:"table-responsive border"},N$={class:"table mb-0 caption-top"},R$={key:0,class:"fas fa-fw fa-check-circle text-success"},z$={class:"badge bg-info"},F$={key:0,class:""},G$={key:1,class:"mt-1"},j$={class:"mt-1"},Y$={class:"table table-sm table-borderless small"},W$={class:"text-end"},K$={class:"text-end"},J$={class:"text-end"},Q$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},X$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},Z$={class:"text-end"},ew={class:"dropdown position-static"},tw={class:"dropdown-menu"},sw=["onClick"],ow={key:0},aw=["onClick"],lw=["onClick"],nw=["onClick"],rw={class:"text-end mt-2 d-none"},iw={class:"mt-2"},dw={class:"text-end mb-2"},uw={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},cw={class:"col"},mw={class:"card shadow-sm"},fw=["id"],pw={class:"p-1"},vw={class:"card-title1 text-center"},gw={class:"col"},bw={class:"card shadow-sm"},yw=["id"],$w={class:"p-1"},ww={class:"card-title1 text-center text-truncate"},hw={class:"small1"},kw={class:"mt-2"},_w={key:0,class:"fas fa-fw fa-check-circle text-success"},Sw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Tw={key:0,class:"fas fa-fw fa-check-circle text-success"},Mw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Iw={key:0,class:"fas fa-fw fa-check-circle text-success"},Cw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Pw={key:0,class:"fas fa-fw fa-check text-warning"},xw={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},Vw={key:0,class:"fas fa-fw fa-check-circle text-success"},Uw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Aw={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(d){const f=d,{appTitle:w,pageTitle:_,busy:h,isDirty:R,validations:T,infoMessage:K,warningMessage:F,errorMessage:P,router:N,axios:Q,utils:M,toasts:D,close:i,closeWithReturnUrl:S,generateReturnUrl:$,security:W}=pe({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});he("$config");const X=ye();X.user;const r=ce({user:X.user,item:null}),p=re(null),x=re(null),a=re(null),V=re(null),n=re(null),y=re(),u=we(()=>r.item&&r.item.state==="RUNNING");ie(async()=>{await v();const de=M.getPageTab("channel")||"information-tab";c(de)});const c=de=>{M.setPageTab("channel",de),y.value=de,de==="preview-tab"&&setTimeout(()=>{var U=document.getElementById("masonry");new Ke(U,{})},2e3)},l=de=>de===y.value?"active":"",g=de=>de===y.value?"show active":"",v=async()=>{const de=r;if(Be(),!h.value)try{h.value=!0,P.value="",r.item=null;const U=`/api/v1/channels/${f.id}/`;await Q.get(U).then(ve=>{de.item=ve.data,de.item.outputs.forEach(De=>{De.playbackConfigurations.forEach(le=>{if(De.playbackUrl){const Ce=De.playbackUrl,be=Ce.lastIndexOf("/"),qe=Ce.substring(0,be),Ee=Ce.substring(be+1),We=le.hlsConfigurationManifestEndpointPrefix;We&&(le.hlsPlaylist=We+Ee)}})})})}catch(U){P.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{h.value=!1}},A=async()=>{await v()},k=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!h.value){P.value=null;try{h.value=!0,await Q.post(`/api/v1/channels/${f.id}/publish/`).then(U=>{D.success("Publish Channel","Channel was published.")}),h.value=!1,await A()}catch(U){P.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{h.value=!1}}},j=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!h.value){P.value=null;try{h.value=!0,await Q.delete(`/api/v1/channels/${f.id}/unpublish/`).then(U=>{D.warning("Remove Channel","Channel was removed.")}),h.value=!1,await A()}catch(U){P.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{h.value=!1}}},E=()=>{p.value.open(f.id)},J=de=>{de.outputType==="HLS"&&x.value.open(de.channelOutputId,de.playbackUrl)},m=()=>{a.value.open(f.id)},I=de=>{V.value.open(de)},O=(de,U)=>{n.value.open(f.id,de,U)},oe=async de=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!h.value){P.value=null;try{h.value=!0,await Q.delete(`/api/v1/programs/${de}/`).then(ve=>{D.success("Delete Program","Program was deleted..",{async onClose(){}})}),h.value=!1,await A()}catch(ve){P.value=M.getErrorMessageAsHtml(ve),window.scrollTo(0,0)}finally{h.value=!1}}},se=async de=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!h.value){P.value=null;try{h.value=!0,await Q.delete(`/api/v1/channelOutputs/${de}/`).then(ve=>{D.success("Delete Channel Output","Channel output was deleted..")}),h.value=!1,await A()}catch(ve){P.value=M.getErrorMessageAsHtml(ve),window.scrollTo(0,0)}finally{h.value=!1}}},ae=async de=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!h.value){P.value=null;try{h.value=!0,await Q.post(`/api/v1/programs/${de}/publish/`).then(ve=>{D.success("Publish Program","Program was published..",{async onClose(){}})}),h.value=!1,await A()}catch(ve){P.value=M.getErrorMessageAsHtml(ve),window.scrollTo(0,0)}finally{h.value=!1}}},ge=async de=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!h.value){P.value=null;try{h.value=!0,await Q.delete(`/api/v1/programs/${de}/unpublish/`).then(ve=>{D.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),h.value=!1,await A()}catch(ve){P.value=M.getErrorMessageAsHtml(ve),window.scrollTo(0,0)}finally{h.value=!1}}},Se=async de=>{if(!h.value){P.value=null;try{h.value=!0,await Q.put(`/api/v1/channels/${f.id}/change-state/${de}`).then(U=>{D.success("Update Channel state","Change state was updated")}),h.value=!1,de==="STOPPED"&&y.value==="preview-tab"&&(Be(),c("information-tab")),await A()}catch(U){P.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{h.value=!1}}},Le=async de=>{if(!h.value)try{h.value=!0,P.value="",await Q.post(`/api/v1/channelOutputs/${de}/playback/publish/`).then(U=>{D.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),h.value=!1,await A()}catch(U){P.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{h.value=!1}},rt=async de=>{if(confirm("Do you want to remove this Playback Configuration?")&&!h.value)try{h.value=!0,P.value="",await Q.delete(`/api/v1/channelOutputs/${de}/playback/`).then(ve=>{D.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),h.value=!1,await A()}catch(ve){P.value=M.getErrorMessageAsHtml(ve),window.scrollTo(0,0)}finally{h.value=!1}},it=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const de=r.item.outputs;Be(),de.forEach(U=>{var ve=document.getElementById(`video-${U.channelOutputId}`);U.hls&&U.hls.destroy(),U.hls=M.createHlsStream(ve,U.playbackUrl,"Main playlist started."),U.playbackConfigurations.forEach(Ve=>{if(Ve.hls&&Ve.hls.destroy(),Ve.arn){var De=document.getElementById(`video-${Ve.channelOutputPlaybackConfigurationId}`);try{Ve.hls=M.createHlsStream(De,Ve.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started.")}catch(le){D.error("Failed Stream SSAI Playlist",le)}}})}),setTimeout(()=>{var U=document.getElementById("masonry");new Ke(U,{})},2e3)}},Be=()=>{r.item&&r.item.outputs&&r.item.outputs.forEach(U=>{U.hls&&(U.hls.detachMedia(),U.hls.destroy(),delete U.hls),U.playbackConfigurations.forEach(ve=>{ve.hls&&(ve.hls.detachMedia(),ve.hls.destroy(),delete ve.hls)})})};return(de,U)=>{const ve=Z("router-link"),Ve=Z("PageHeader"),De=Z("PageBody");return t(),ue(me,null,{default:L(()=>[e("div",null,[q(Ve,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(_)},{default:L(()=>[r.item?(t(),s("div",Ey,[e("button",{class:ne([[u.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[u.value?(t(),s("span",By)):(t(),s("span",qy)),G(" "+b(r.item.state),1)],2),e("ul",Ny,[r.item.arn?(t(),s("li",Ry,[u.value?(t(),s("button",{key:0,onClick:U[0]||(U[0]=le=>Se("STOPPED")),class:"dropdown-item"},U[21]||(U[21]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),G("Stop ")]))):(t(),s("button",{key:1,onClick:U[1]||(U[1]=le=>Se("RUNNING")),class:"dropdown-item"},U[22]||(U[22]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),G("Start ")])))])):H("",!0),u.value?H("",!0):(t(),s("li",zy,[r.item.arn?(t(),s("button",{key:0,onClick:U[2]||(U[2]=le=>j()),class:"dropdown-item"},U[23]||(U[23]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),G("Unpublish ")]))):(t(),s("button",{key:1,onClick:U[3]||(U[3]=le=>k()),class:"dropdown-item"},U[24]||(U[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),G("Publish ")])))])),r.item.arn?(t(),s(B,{key:2},[U[26]||(U[26]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:U[4]||(U[4]=le=>k()),class:"dropdown-item"},U[25]||(U[25]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),G("Republish ")]))])],64)):H("",!0)])])):H("",!0),q(ve,{to:`${d.urlSchedulePrograms}/${d.id}`,class:"ms-2 btn btn-primary"},{default:L(()=>U[27]||(U[27]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:U[5]||(U[5]=le=>A()),class:"ms-2 btn btn-secondary"},U[28]||(U[28]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:U[6]||(U[6]=le=>o(S)(f.urlMain)),class:"btn btn-secondary ms-1"},U[29]||(U[29]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),q(De,{errorMessage:o(P)},{default:L(()=>[r.item?(t(),s("div",Fy,[e("ul",Gy,[e("li",jy,[e("button",{onClick:U[7]||(U[7]=le=>c("information-tab")),class:ne([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},U[30]||(U[30]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),G("Information ")]),2)]),e("li",Yy,[e("button",{onClick:U[8]||(U[8]=le=>c("outputPlayback-tab")),class:ne([l("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},U[31]||(U[31]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),G("Output/Playback ")]),2)]),e("li",Wy,[e("button",{onClick:U[9]||(U[9]=le=>c("programs-tab")),class:ne([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},U[32]||(U[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),G("Programs ")]),2)]),e("li",Ky,[e("button",{onClick:U[10]||(U[10]=le=>c("preview-tab")),class:ne([[u.value?"":"disabled",l("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},U[33]||(U[33]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),G("Preview ")]),2)]),e("li",Jy,[e("button",{onClick:U[11]||(U[11]=le=>c("checklist-tab")),class:ne([l("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},U[34]||(U[34]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),G("Checklist ")]),2)])]),e("div",Qy,[e("div",{class:ne([g("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Xy,[e("div",Zy,[e("div",e$,[e("div",t$,[C(e("input",{"onUpdate:modelValue":U[12]||(U[12]=le=>r.item.name=le),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Y,r.item.name]]),U[35]||(U[35]=e("label",{for:"name"},"Name",-1))])]),e("div",s$,[e("div",o$,[C(e("input",{"onUpdate:modelValue":U[13]||(U[13]=le=>r.item.playbackMode=le),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[Y,r.item.playbackMode]]),U[36]||(U[36]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",a$,[e("div",l$,[C(e("input",{"onUpdate:modelValue":U[14]||(U[14]=le=>r.item.tier=le),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[Y,r.item.tier]]),U[37]||(U[37]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",n$,[U[39]||(U[39]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),u.value?H("",!0):(t(),s("div",r$,[e("button",{onClick:U[15]||(U[15]=le=>O(r.item.fillerSlateSourceLocation.sourceLocationId,r.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},U[38]||(U[38]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",i$,[e("div",d$,[e("div",u$,[q(ve,{to:`${d.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${o($)()}`,class:ne([[r.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:L(()=>[G(b(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),U[40]||(U[40]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",c$,[e("div",m$,[q(ve,{to:`${d.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${o($)()}`,class:ne([[r.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:L(()=>[G(b(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),U[41]||(U[41]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",f$,[e("div",p$,[C(e("textarea",{"onUpdate:modelValue":U[16]||(U[16]=le=>r.item.policy=le),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",readonly:""},null,512),[[Y,r.item.policy]]),U[42]||(U[42]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:ne([g("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",v$,[e("div",null,[e("div",g$,[U[44]||(U[44]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",b$,[e("button",{onClick:U[17]||(U[17]=le=>m()),class:"btn btn-outline-primary btn-sm"},U[43]||(U[43]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),r.item.outputs.length<=0?(t(),s("div",y$,U[45]||(U[45]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),G("Channel Output is required ")]))):H("",!0),e("div",$$,[e("table",w$,[U[53]||(U[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.outputs,(le,Ce)=>(t(),s(B,{key:le.channelOutputId},[e("tr",null,[e("td",null,b(Ce+1),1),e("td",null,[e("div",null,b(le.manifestName),1),e("div",null,[e("span",h$,b(le.outputType),1)])]),e("td",null,[e("div",null,[q(ve,{to:`${d.urlViewSourceGroup}/${le.sourceGroupId}/${o($)()}`},{default:L(()=>[G(b(le.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[le.playbackUrl?(t(),s("div",k$,b(le.playbackUrl),1)):(t(),s("div",_$,U[46]||(U[46]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),G("Publish channel to get the playback url ")])))]),u.value?(t(),s("td",S$)):(t(),s("td",T$,[e("button",{onClick:be=>se(le.channelOutputId),class:"btn btn-outline-warning btn-sm"},U[47]||(U[47]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,M$)]))]),le.playbackUrl?(t(),s("tr",I$,[U[52]||(U[52]=e("td",null,null,-1)),e("td",C$,[e("div",P$,[U[49]||(U[49]=e("h5",null,[G("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",x$,[e("div",V$,[e("button",{onClick:be=>J(le),class:"btn btn-outline-primary btn-sm"},U[48]||(U[48]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,U$)])])]),le.playbackConfigurations.length>0?(t(),s("div",A$,[e("table",O$,[e("tbody",null,[(t(!0),s(B,null,z(le.playbackConfigurations,(be,qe)=>(t(),s("tr",null,[e("td",null,b(qe+1),1),e("td",null,[G(b(be.name)+" ",1),e("div",null,[C(e("textarea",{"onUpdate:modelValue":Ee=>be.adDecisionServerUrl=Ee,class:"form-control",style:{"max-height":"4rem"},readonly:""},null,8,D$),[[Y,be.adDecisionServerUrl]])])]),e("td",H$,[be.arn?H("",!0):(t(),s("button",{key:0,onClick:Ee=>Le(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},U[50]||(U[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,L$)),e("button",{onClick:Ee=>rt(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},U[51]||(U[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,E$)])]))),256))])])])):H("",!0)])])):H("",!0)],64))),128))]),_:1},512),[[Te,r.item.outputs.length>0]])])])])])],2),e("div",{class:ne([g("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",B$,[e("div",q$,[e("table",N$,[U[68]||(U[68]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),C(q(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(B,null,z(r.item.programs,(le,Ce)=>(t(),s("tr",{key:le.programId},[e("td",null,b(Ce+1),1),e("td",null,[le.arn?(t(),s("span",R$)):H("",!0),G(" "+b(le.name)+" ",1),U[57]||(U[57]=e("br",null,null,-1)),e("div",null,[e("div",null,[U[54]||(U[54]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),G(b(o(M).moment(le.dateScheduledStart).format("llll")),1)]),e("div",null,[U[55]||(U[55]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),G(b(o(M).moment(le.dateScheduledEnd).format("llll")),1)])]),le.relativeProgram?(t(),s(B,{key:1},[U[56]||(U[56]=G(" Relative Program: ")),e("span",z$,b(le.relativeProgram.name),1)],64)):H("",!0)]),e("td",null,[le.totalProgramTemplateDurationInMillis!==le.durationInMillis?(t(),s("div",F$,[U[58]||(U[58]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),G(" "+b(o(M).moment.utc(le.startOffsetMillis).format("HH:mm:ss"))+" - "+b(o(M).moment.utc(le.endOffsetMillis).format("HH:mm:ss")),1)])):H("",!0),le.adBreaksDurationInMillis?(t(),s("div",G$,[U[59]||(U[59]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),G(" Ads: "+b(o(M).moment.utc(le.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):H("",!0),e("div",j$,[U[60]||(U[60]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),G(" Total: "+b(o(M).moment.utc(le.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[q(ve,{to:`${d.urlViewVideo}/${le.vodSource.video.videoId}/${o($)()}`},{default:L(()=>[G(b(le.vodSource.video.title),1)]),_:2},1032,["to"]),U[61]||(U[61]=e("br",null,null,-1)),G(" ("+b(o(M).moment.utc(le.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("table",Y$,[e("tbody",null,[U[62]||(U[62]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"VOD")],-1)),(t(!0),s(B,null,z(le.adBreaks,(be,qe)=>(t(),s("tr",null,[e("td",W$,b(qe+1),1),e("td",K$,b(o(M).moment.utc(be.offsetMillis).format("HH:mm:ss")),1),e("td",J$,b(o(M).moment.utc(be.durationInMillis).format("HH:mm:ss")),1),e("td",null,[q(ve,{to:`${d.urlViewVodSource}/${be.vodSource.vodSourceId}/${o($)()}`},{default:L(()=>[be.vodSource.arn?(t(),s("span",Q$)):(t(),s("span",X$)),G(" "+b(be.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])]),e("td",Z$,[e("div",ew,[U[67]||(U[67]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",tw,[e("li",null,[e("button",{onClick:be=>I(le.programId),class:"dropdown-item"},U[63]||(U[63]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),G("Edit ")]),8,sw)]),le.arn?(t(),s("li",ow,[e("button",{onClick:be=>ge(le.programId),class:"dropdown-item"},U[64]||(U[64]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),G("Unpublish ")]),8,aw)])):(t(),s(B,{key:1},[e("li",null,[e("button",{onClick:be=>ae(le.programId),class:"dropdown-item"},U[65]||(U[65]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),G("Publish ")]),8,lw)]),e("li",null,[e("button",{onClick:be=>oe(le.programId),class:"dropdown-item"},U[66]||(U[66]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),G("Remove ")]),8,nw)])],64))])])])]))),128))]),_:1},512),[[Te,r.item.programs.length>0]])])]),e("div",rw,[e("button",{onClick:U[18]||(U[18]=le=>E()),class:"btn btn-outline-primary"},U[69]||(U[69]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),G("Program ")]))])])],2),u.value?(t(),s("div",{key:0,class:ne([g("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",iw,[e("div",dw,[r.item.outputs[0].hls?(t(),s("button",{key:1,onClick:U[20]||(U[20]=le=>Be()),class:"btn btn-primary"},U[71]||(U[71]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:U[19]||(U[19]=le=>it()),class:"btn btn-primary"},U[70]||(U[70]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",uw,[(t(!0),s(B,null,z(r.item.outputs,le=>(t(),s(B,null,[e("div",cw,[e("div",mw,[e("video",{id:`video-${le.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,fw),e("div",pw,[e("div",vw,b(le.manifestName),1)])])]),(t(!0),s(B,null,z(le.playbackConfigurations,(Ce,be)=>(t(),s("div",gw,[e("div",bw,[e("video",{id:`video-${Ce.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,yw),e("div",$w,[e("div",ww,[G(" #"+b(be+1)+" ",1),e("span",hw,b(Ce.name),1)])])])]))),256))],64))),256))])])],2)):H("",!0),e("div",{class:ne([g("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",kw,[U[77]||(U[77]=G(" Checklist ")),e("ul",null,[e("li",null,[r.item.fillerSlateSourceLocation.arn?(t(),s("span",_w)):(t(),s("span",Sw)),U[72]||(U[72]=G(" Filler Slate Source Location "))]),e("li",null,[r.item.fillerSlateVodSource.arn?(t(),s("span",Tw)):(t(),s("span",Mw)),U[73]||(U[73]=G(" ni Filler Slate VOD Source "))]),e("li",null,[r.item.outputs.length>0?(t(),s("span",Iw)):(t(),s("span",Cw)),U[75]||(U[75]=G(" Outputs ")),e("ul",null,[e("li",null,[r.item.outputs.some(le=>le.playbackConfigurations.length>0)?(t(),s("span",Pw)):(t(),s("span",xw)),U[74]||(U[74]=G(" Ad Insertion setup "))])])]),e("li",null,[r.item.programs.length>0?(t(),s("span",Vw)):(t(),s("span",Uw)),U[76]||(U[76]=G(" Programs "))])])])],2)])])):H("",!0)]),_:1},8,["errorMessage"]),q(wb,{ref_key:"modalAddProgram",ref:p,onRefresh:A},null,512),q(Fb,{ref_key:"modalAddPlaybackConfiguration",ref:x,onRefresh:A},null,512),q(fy,{ref_key:"modalAddChannelOutput",ref:a,onRefresh:A},null,512),q(lt,{ref_key:"modalEditProgram",ref:V,onOnClose:A},null,512),q(Ly,{ref_key:"modalEditFillerSlate",ref:n,onRefresh:A},null,512)])]),_:1})}}},Ow={path:"/",component:ua,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Sa},{path:"users/add",component:Wa},{path:"users",component:sl},{path:"users/view/:id",component:Sl,props:!0},{path:"videos/add",component:an},{path:"videos/edit/:id",component:Bn,props:!0},{path:"videos",component:Xn},{path:"videos/view/:id",component:Mr,props:!0},{path:"source-groups/add",component:xr},{path:"source-groups/edit/:id",component:Xr,props:!0},{path:"source-groups",component:ni},{path:"source-groups/view/:id",component:ki,props:!0},{path:"source-locations/add",component:Ci},{path:"source-locations/edit/:id",component:Vi,props:!0},{path:"source-locations",component:qi},{path:"source-locations/view/:id",component:rd,props:!0},{path:"vod-sources/add",component:qd},{path:"vod-sources/edit/:id",component:wu,props:!0},{path:"vod-sources",component:Lu},{path:"vod-sources/view/:id",component:Mm,props:!0},{path:"channels/add",component:hv},{path:"channels/edit/:id",component:Sv,props:!0},{path:"channels",component:Vv},{path:"channels/schedule-programs/:id",component:g1,props:!0},{path:"channels/view/:id",component:Aw,props:!0},{path:"program-templates/add",component:$f},{path:"program-templates/edit/:id",component:ip,props:!0},{path:"program-templates",component:bp},{path:"program-templates/view/:id",component:Qp,props:!0}]},nt=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{...Ow}]}),Dw={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const d=this,w=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();w.on("onNotificationCreated",function(_){let h=_.content;_.notificationEntityClassText==="Deposit"&&(h+="<br/>",h+=`<a href="${d.urlViewDeposit}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="Withdraw"&&(h+="<br/>",h+=`<a href="${d.urlViewWithdraw}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="ManualModeOfPayment"&&(h+="<br/>",h+=`<a href="${d.urlViewManualModeOfPayment}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.iconClass;let R="secondary";switch(_.notificationType){case 1:R="success";break;case 3:R="info";break;case 3:R="success";break;case 4:R="info";break;case 5:R="warning";break;case 6:R="error";break}d.$toast[R](_.subject,h,{timeOut:1e4});const T=_.subject,P={body:h,icon:"/img/192x102.png"};new Notification(T,P)}),w.on("jobUpdated",function(_){d.$bus.$emit("event:job-updated",_)}),await w.start().then(function(){}).catch(function(_){})}}};function Hw(d,f,w,_,h,R){return t(),s("div")}const Lw=Me(Dw,[["render",Hw],["__scopeId","data-v-5b4a9fa2"]]),Ew={class:"navbar bg-dark bg-gradient shadow","data-bs-theme":"dark"},Bw={class:"container"},qw={class:"col-sm-auto"},Nw={class:"navbar-brand mb-0"},Rw={class:"col-sm"},zw={class:"d-flex align-items-center justify-content-end"},Fw={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(d){return(f,w)=>(t(),ue(me,null,{default:L(()=>[e("nav",Ew,[e("div",Bw,[e("div",qw,[Ae(f.$slots,"title",{},()=>[e("h1",Nw,[e("i",{class:ne([d.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,b(d.pageTitle),1)])])]),e("div",Rw,[e("div",zw,[Ae(f.$slots,"default")])])])])]),_:3}))}},Gw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},jw=["innerHTML"],Yw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ww={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(f,w)=>(t(),ue(me,null,{default:L(()=>[Ae(f.$slots,"default",{},()=>[d.errorMessage?(t(),s("div",Gw,[w[0]||(w[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),G("Error ")],-1)),e("div",{innerHTML:d.errorMessage},null,8,jw)])):H("",!0),d.vuelidate&&d.vuelidate.$error?(t(),s("div",Yw,[w[1]||(w[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),G("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(B,null,z(d.vuelidate.$errors,_=>(t(),s("li",{key:_.$uid},[_.$validator==="$each"?(t(),s(B,{key:0},[G(" Check errors in '"+b(_.$property)+"' ",1)],64)):(t(),s(B,{key:1},[G(b(_.$message),1)],64))]))),128))])])):H("",!0)])]),_:3}))}},Kw={class:"my-3 container-md container"},Jw={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(f,w)=>{const _=Z("PageMessages");return t(),ue(me,null,{default:L(()=>[e("div",Kw,[q(_,{errorMessage:d.errorMessage,vuelidate:d.vuelidate},null,8,["errorMessage","vuelidate"]),Ae(f.$slots,"default")])]),_:3})}}},Qw={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const d=this;d.busy||(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveFirst(){const d=this;if(d.busy)return;d.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveLast(){const d=this;if(d.busy)return;const f=d.filter;f.pageIndex!==f.totalPages&&(document.activeElement&&document.activeElement.blur(),await d.search(f.totalPages))},async move(d){const f=this;if(f.busy)return;const w=f.filter,_=w.pageIndex+d;_>=0&&_<=w.totalPages&&(document.activeElement&&document.activeElement.blur(),await f.search(_))}}},Xw={class:"mt-2"},Zw={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},eh={key:0,class:"col-sm order-2 order-sm-1"},th={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},sh={class:"me-1 fw-bold"},oh={class:"fw-bold"},ah={class:"ms-1"},lh={class:"col-sm order-1 order-sm-2"},nh={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},rh={key:0,class:"page-item"},ih={key:1,class:"page-item"},dh={key:2,class:"page-item"},uh={class:"page-item active"},ch={class:"page-link"},mh={key:3,class:"page-item"},fh={key:4,class:"page-item"},ph={key:5,class:"page-item"},vh={key:1,class:"text-info font-weight-bold text-center"},gh={key:0},bh={key:1};function yh(d,f,w,_,h,R){return t(),s("div",Xw,[w.filter.items.length?(t(),s("div",Zw,[w.showPerPage?(t(),s("div",eh,[e("div",th,[e("div",null,[e("span",sh,b(w.filter.totalCount),1),f[8]||(f[8]=G("records in ")),e("span",oh,b(w.filter.totalPages),1),f[9]||(f[9]=G(" page(s) "))]),e("div",ah,[C(e("select",{"onUpdate:modelValue":f[0]||(f[0]=T=>w.filter.pageSize=T),onChange:f[1]||(f[1]=(...T)=>R.changePagination&&R.changePagination(...T)),class:"form-select form-select-sm me-1"},f[10]||(f[10]=[Fe('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[fe,w.filter.pageSize]])]),f[11]||(f[11]=e("div",{class:"ms-1"},"per page",-1))])])):H("",!0),e("div",lh,[e("ul",nh,[w.filter.pageIndex!==1?(t(),s("li",rh,[e("button",{class:"page-link","aria-label":"Previous",onClick:f[2]||(f[2]=(...T)=>R.moveFirst&&R.moveFirst(...T))},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):H("",!0),w.filter.pageIndex>2?(t(),s("li",ih,[e("button",{class:"page-link",onClick:f[3]||(f[3]=T=>R.move(-2))},b(w.filter.pageIndex-2),1)])):H("",!0),w.filter.pageIndex>1?(t(),s("li",dh,[e("button",{class:"page-link",onClick:f[4]||(f[4]=T=>R.move(-1))},b(w.filter.pageIndex-1),1)])):H("",!0),e("li",uh,[e("span",ch,b(w.filter.pageIndex),1)]),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",mh,[e("button",{class:"page-link",onClick:f[5]||(f[5]=T=>R.move(1))},b(w.filter.pageIndex+1),1)])):H("",!0),w.filter.pageIndex<w.filter.totalPages-1?(t(),s("li",fh,[e("button",{class:"page-link",onClick:f[6]||(f[6]=T=>R.move(2))},b(w.filter.pageIndex+2),1)])):H("",!0),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",ph,[e("button",{class:"page-link","aria-label":"Next",onClick:f[7]||(f[7]=(...T)=>R.moveLast&&R.moveLast(...T))},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):H("",!0)])])])):(t(),s("div",vh,[w.noRecords?(t(),s("div",gh,b(w.noRecords),1)):(t(),s("div",bh,"No record(s) found."))]))])}const $h=Me(Qw,[["render",yh]]),wh={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let d=this;if(!d.enabled)return;let f=d.filter;f.sortField===d.field?f.sortOrder===0?f.sortField=null:f.sortOrder=f.sortOrder===0?1:0:(f.sortField=d.field,f.sortOrder=1),d.$emit("search")}}},hh={class:"align-self-center"};function kh(d,f,w,_,h,R){return t(),s("div",{onClick:f[0]||(f[0]=(...T)=>R.click&&R.click(...T)),class:"d-flex flex-row justify-content-start align-content-center",style:tt({cursor:w.enabled?"pointer":""})},[Ae(d.$slots,"default"),e("span",hh,[w.showSort?(t(),s("span",{key:0,class:ne([{"fa-sort text-gray-500":!R.currentSortField(),"fa-sort-up":R.currentSortField()&&R.sortUp(),"fa-sort-down":R.currentSortField()&&!R.sortUp()},"fas fa-fw mr-1"])},null,2)):H("",!0)])],4)}const _h=Me(wh,[["render",kh]]),Sh={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(d){const f=this;f.setSelected(d),f.$emit("onSelectedRow",d)}}},Th={class:"table-responsive m-0"},Mh=["href"],Ih={key:1},Ch=["onClick"],Ph={class:"form-group row no-gutters"},xh={class:"col-5 col-form-label"},Vh={class:"col align-self-center"},Uh=["href"],Ah={key:1};function Oh(d,f,w,_,h,R){return t(),s("div",null,[e("div",Th,[e("table",{class:ne(["table table-hover d-none d-md-table card",w.tableCss])},[e("thead",null,[Ae(d.$slots,"header",{},()=>[f[0]||(f[0]=e("th",null,"#",-1)),(t(!0),s(B,null,z(w.header.columns,T=>(t(),s("th",null,b(T.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(B,null,z(w.items,(T,K)=>Ae(d.$slots,"table-row",{key:`row1-${T[w.header.key]}`,item:T,index:K},()=>[e("td",null,b(w.getRowNumber(K)),1),(t(!0),s(B,null,z(w.header.columns,F=>(t(),s("td",null,[F.href?(t(),s("a",{key:0,href:F.href(T[w.header.key]),class:"font-weight-bold"},b(T[F.field]),9,Mh)):(t(),s("span",Ih,b(T[F.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:ne(["d-block d-md-none",w.rowCss])},[(t(!0),s(B,null,z(w.items,(T,K)=>(t(),s("div",{key:`row2-${T[w.header.key]}`,onClick:F=>R.onSelectedRow(T),class:"border"},[e("div",{class:ne(["p-2",{"b-left":w.isSelected(T)}])},[Ae(d.$slots,"table-list",{item:T,index:K},()=>[(t(!0),s(B,null,z(w.header.columns,F=>(t(),s("div",Ph,[e("label",xh,b(F.title),1),e("div",Vh,[F.href?(t(),s("a",{key:0,href:F.href(T[w.header.key]),class:"font-weight-bold"},b(T[F.field]),9,Uh)):(t(),s("span",Ah,b(T[F.field]),1))])]))),256))],!0)],2)],8,Ch))),128))],2)])}const Dh=Me(Sh,[["render",Oh],["__scopeId","data-v-65929213"]]),Ie=gt(yt);Ie.use(bt());Ie.use(nt);Ie.component("m-notification",Lw);Ie.component("m-pagination",$h);Ie.component("sort-field",_h);Ie.component("table-list",Dh);Ie.component("Toasts",la);Ie.component("PageHeader",Fw);Ie.component("PageMessages",Ww);Ie.component("PageBody",Jw);const Hh="https://sonyfastpoc.azurewebsites.net/",Lh="Arcadian-Sony FAST",Eh=void 0,Bh={API_URL:Hh,appName:Lh,tenantId:Eh};Ie.provide("$config",Bh);Ie.provide("$bus",Ge);Ie.mount("#app");
