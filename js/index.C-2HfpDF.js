import{o as t,c as ie,r as Q,h as nt,d as Ye,a as ae,e as Le,b as s,f as e,g as D,w as U,i as B,t as b,F as q,j,k as C,l as ne,m as We,n as be,p as Ke,q as Be,u as rt,s as Je,P as Qe,v as ue,x as Z,y as ee,z as ye,T as de,A as o,B as it,C as I,D as N,E as dt,G as oe,H as Xe,I as we,J as Pe,K as he,L as Oe,M as pe,N as $e,O as Te,Q as Ie,R as ut,S as ct,U as mt,V as xe,W as ft,X as pt}from"./vendor-DIDY8V1_-chunk.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))k(y);new MutationObserver(y=>{for(const z of y)if(z.type==="childList")for(const S of z.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&k(S)}).observe(document,{childList:!0,subtree:!0});function w(y){const z={};return y.integrity&&(z.integrity=y.integrity),y.referrerPolicy&&(z.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?z.credentials="include":y.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function k(y){if(y.ep)return;y.ep=!0;const z=w(y);fetch(y.href,z)}})();const vt={__name:"App",setup(d){return(u,w)=>{const k=Q("router-view");return t(),ie(k)}}};function Ze(){const d=R=>{var F;let _=R,E=_.response,J="";if(!_.response)return R.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const L=`${window.location.pathname}${window.location.search}`;J=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(L)}`}'>here</a> to login.`}else if(E.status===400){let L=_.response.data.errors;J=_.response.data.title||_.response.data,L&&(J+="<ul>");for(let $ in L){let M=L[$];for(let h in L[$]){let W=M[h];J+=`<li>${W}</li>`}}L&&(J+="</ul>"),J||(J=_.message),J&&J.content&&(J=J.content)}else E.status===404?J=((F=E==null?void 0:E.data)==null?void 0:F.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(J=_.message,J===""&&(J=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return J},u=R=>JSON.parse(JSON.stringify(R)),w=R=>{if(typeof R!="number")return R;var _=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return _.format(R)},k=(R,_,E)=>{const F={value:_,expiry:new Date().getTime()+E};debugger;localStorage.setItem(R,JSON.stringify(F))},y=R=>{debugger;const _=localStorage.getItem(R);if(!_)return null;const E=JSON.parse(_);return new Date().getTime()>E.expiry?(localStorage.removeItem(R),null):E.value},z="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:d,clone:u,toCurrency:w,moment:nt,localStorageSetWithExpiry:k,localStorageGetWithExpiry:y,setPageTab:(R,_)=>{var E=localStorage.getItem(z);E?E=JSON.parse(E):E={},E[R]=_,localStorage.setItem(z,JSON.stringify(E))},getPageTab:R=>{var _=localStorage.getItem(z);return _?_=JSON.parse(_):_={},_[R]}}}const gt=Ze(),et=JSON.parse(localStorage.getItem("user"))||{},bt=gt.moment.utc(et.exp*1e3),yt=bt.isAfter()?et:null,ve=Ye({id:"auth",state:()=>({user:yt,returnUrl:null}),actions:{async login(d){try{this.user=d,localStorage.setItem("user",JSON.stringify(d))}catch(u){debugger;alert(u)}},logout(){this.user=null,localStorage.removeItem("user"),at.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),$t="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem($t));const wt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ne=wt,tt=Ye("msal",()=>{const d=ae({auth:{clientId:Ne.VITE_AUTH_CLIENT_ID,authority:Ne.VITE_AUTH_AUTHORITY_URL,redirectUri:Ne.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),u=ae("");return{msalConfig:d,accessToken:u,setAccessToken:k=>{u.value=k}}}),Re={$on:(...d)=>Le.on(...d),$once:(...d)=>Le.once(...d),$off:(...d)=>Le.off(...d),$emit:(...d)=>Le.emit(...d)};function ht(){const d=(z,S,Y,R)=>{Re.$emit("toast-message",{title:z,message:S,type:Y,options:R})};return{success:(z,S,Y={})=>{d(z,S,"success",Y)},warning:(z,S,Y={})=>{d(z,S,"warning",Y)},info:(z,S,Y={})=>{d(z,S,"info",Y)},error:(z,S,Y={})=>{d(z,S,"danger",Y)}}}const _e=(d,u)=>{const w=d.__vccOpts||d;for(const[k,y]of u)w[k]=y;return w},kt={data(){return{notifications:[],messages:[]}},async created(){const d=this;d.$bus.$on("event:notification-received",()=>{d.getUnreadNotifications()}),d.$bus.$on("event:notification-marked-as-read",u=>{d.notifications.some(k=>k.notificationId===u)&&d.getUnreadNotifications()}),d.$bus.$on("event:notification-removed",u=>{d.notifications.some(k=>k.notificationId===u)&&d.getUnreadNotifications()}),d.$bus.$on("event:chat-marked-as-read",d.onChatMarkedAsRead),d.$bus.$on("event:chat-message-received",d.onChatMessageReceived)},async mounted(){const d=this,u=d.$refs.notifications,w=d.$refs.messages;u&&u.offsetParent,w&&w.offsetParent&&await d.getUnreadChats()},methods:{async logout(){const d=this;try{await d.$util.axios.post("/api/accounts/logout").then(u=>{const w="/";d.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){d.$util.href(w)}})})}catch(u){d.$util.handleError(u)}},async onChatMarkedAsRead(d){let u=this,w=u.messages.find(k=>k.chatId===d);if(w){let k=u.messages.indexOf(w);u.messages.splice(k,1)}},async onChatMessageReceived(d){let u=this,w=u.messages.find(y=>y.chatId===d.chatId);if(w)w.lastMessageText=d.content;else{var k={chatId:d.chatId,isRead:!1,lastDateSent:d.dateSent,lastMessageText:d.content,senderFirstLastName:`${d.sender.firstName} ${d.sender.lastName}`,senderInitials:d.sender.initials,senderProfilePicture32:d.sender.profilePicture32,urlPicture:u.$util.getProfilePictureUrl(d.sender.profilePicture32,d.sender.initials)};u.messages.push(k)}},async getUnreadNotifications(){const d=this;try{await d.$util.axios.get("api/accounts/unread-notifications").then(u=>{d.notifications=u.data})}catch(u){d.$util.handleError(u)}},async getUnreadChats(){const d=this;try{await d.$util.axios.get("api/accounts/unread-chats").then(u=>{d.messages=u.data;for(let w in d.messages){let k=d.messages[w];d.$set(k,"urlPicture",d.$util.getProfilePictureUrl(k.senderProfilePicture32,k.senderInitials))}})}catch(u){d.$util.handleError(u)}},viewNotification(d){this.$bus.$emit("event:open-notification",d)},viewChat(d){this.$bus.$emit("event:open-chat",d)},showHiddenElements(){let u=this.$el.getElementsByClassName("initialHidden");for(let w=0;w<u.length;w++)u[w].classList.remove("invisible")}}},_t={mixins:[kt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const u=ve().user;return{user:u,username:u?u.nameFull:"Guest"}},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1},async openModalSearchUser747(d){this.$refs.refModalSearchUser747.open(d)}}},St={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Tt={class:"container-md"},Mt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Ct={class:"navbar-nav"},It={class:"nav-item dropdown"},xt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Pt={class:"nav-item dropdown"},Vt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ut={class:"navbar-nav ms-auto"},Ot={class:"nav-item dropdown"},At={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Dt={class:"d-inline d-sm-none d-md-inline"},Ht={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Et={class:"text-capitalize"};function Lt(d,u,w,k,y,z){const S=Q("router-link");return t(),s("nav",St,[e("div",Tt,[D(S,{class:"navbar-brand",to:"/member"},{default:U(()=>[B(b(w.appName),1)]),_:1}),u[14]||(u[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Mt,[e("ul",Ct,[e("li",It,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",xt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/announcements"},{default:U(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),B(" Announcements ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/posts"},{default:U(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),B(" Posts ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/yellow-pages"},{default:U(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),B(" Yellow Pages ")])),_:1})])])]),e("li",Pt,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Vt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:U(()=>u[4]||(u[4]=[B(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Ut,[e("li",Ot,[e("a",At,[e("span",null,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Dt,b(y.username),1)])]),e("ul",Ht,[u[9]||(u[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),u[10]||(u[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),u[11]||(u[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),u[12]||(u[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),y.user&&y.user.roles.length>1?(t(!0),s(q,{key:0},j(y.user.roles,Y=>(t(),s("li",null,[D(S,{to:`/${Y.toLowerCase()}`,class:"dropdown-item"},{default:U(()=>[e("span",Et,b(Y),1)]),_:2},1032,["to"])]))),256)):C("",!0),e("li",null,[D(S,{to:"/",class:"dropdown-item"},{default:U(()=>u[7]||(u[7]=[B(" Main ")])),_:1})]),u[13]||(u[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[D(S,{to:"/account/logout",class:"dropdown-item"},{default:U(()=>u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),B("Logout ")])),_:1})])])])])])])])}const Bt=_e(_t,[["render",Lt]]),qt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const d=document.getElementById("top");d&&d.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let d=this;if(!d.$el.getElementsByClassName)return;let u=d.$el.getElementsByClassName("initialHidden");for(let w=0;w<u.length;w++){let k=u[w];k.classList.remove("invisible"),k.classList.remove("d-none")}},close(){const d=this,u=document.referrer.toLowerCase();u&&u.includes("/account/login")?d.$router.go(-2):d.$router.go(-1)},toggle(d){const u=this;u.toggles[d]=!u.toggles[d],localStorage.setItem(u.togglesKey,JSON.stringify(u.toggles))}}},Nt={mixins:[qt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1}}},Rt={class:"footer sticky-bottom"},zt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Ft={class:"container-md"},jt={class:"navbar-text small p-0"},Gt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-nav nav-fill w-100"},Kt={class:"nav-item dropup"},Jt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Qt={class:"nav-item dropup"},Xt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function Zt(d,u,w,k,y,z){const S=Q("router-link");return t(),s("footer",Rt,[e("div",zt,[e("div",Ft,[e("span",jt,"©"+b(y.copyright),1)])]),e("nav",Gt,[e("div",Yt,[e("ul",Wt,[e("li",Kt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Jt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/announcements"},{default:U(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),B(" Announcements ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/posts"},{default:U(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),B(" Posts ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/yellow-pages"},{default:U(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),B(" Yellow Pages ")])),_:1})])])]),e("li",Qt,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",Xt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:U(()=>u[4]||(u[4]=[B(" Property Monthly Dues ")])),_:1})])])])])])])])}const es=_e(Nt,[["render",Zt]]),ts={name:"AdminLayout",components:{TopNav:Bt,BottomNav:es},inject:["$config"],mounted(){const u=this.$config;document.title=`Account - ${u.appName}`}},ss={class:"d-flex flex-column vh-100"};function os(d,u,w,k,y,z){const S=Q("Toasts"),Y=Q("router-view");return t(),s("div",ss,[D(S),D(Y,{class:"flex-grow-1 mb-2"})])}const as=_e(ts,[["render",os]]),ls={__name:"index",setup(d){return ve().user,ne(()=>{}),(w,k)=>(t(),s("div",null,k[0]||(k[0]=[We('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ns={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},rs=ns;function is(){be("$config");const d=rs.VITE_API_URL,u=Ke.create({baseURL:d});return Be.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),u.interceptors.request.use(w=>{Be.start();const{user:k}=ve();return k&&k.token&&(w.headers?(w.headers.Authorization||(w.headers.Authorization=`Bearer ${k.token}`),w.headers["Access-Control-Allow-Origin"]||(w.headers["Access-Control-Allow-Origin"]="*")):w.headers={Authorization:`Bearer ${k.token}`,"Access-Control-Allow-Origin":"*"}),w}),u.interceptors.response.use(w=>(Be.done(),w),w=>{throw Be.done(),w}),u}function me(d){if(!d.appTitle)throw Error("App Title is required.");if(!d.pageTitle)throw Error("Page Title is required.");const u=rt(),w=Je(),k=is(),y=Ze(),z=ht(),Y=ve().user,R=()=>Y&&Y.roles&&Y.roles.includes("System"),_=()=>Y&&Y.roles&&Y.roles.includes("administrator"),E=()=>Y&&Y.roles&&Y.roles.includes("employee"),J=()=>Y&&Y.roles&&Y.roles.includes("Member"),F=()=>{let n=u.path;return u.query.returnUrl&&(n=u.query.returnUrl),n=`?returnUrl=${encodeURIComponent(n)}`,n},L=async()=>{const n=document.referrer.toLowerCase();n&&n.includes("/accounts/login")?await w.go(-2):await w.go(-1)},$=n=>{var P;const O=u.path,a=(P=u.query)==null?void 0:P.returnUrl;a&&!(O.startsWith(a)||a.startsWith(O))?w.push(a):w.push(n)},M=d.appTitle,h=d.pageTitle,W=ae(!1),K=ae(new Map),i=ae(""),c=ae(""),x=ae("");return{appTitle:M,pageTitle:h,busy:W,validations:K,infoMessage:i,warningMessage:c,errorMessage:x,router:w,route:u,axios:k,utils:y,toasts:z,close:L,closeWithReturnUrl:$,generateReturnUrl:F,security:{userId:Y?Y.userId:"",isSystem:R(),isAdministrator:_(),isEmployee:E(),isMember:J()}}}const ds={class:"h-100 d-flex align-items-center justify-content-center"},us={class:"form-signin w-100 m-auto"},cs={class:"h3 mb-3 fw-normal"},ms={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},fs=["innerHTML"],ps={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},vs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(d){be("$config");const u=ve(),w=tt(),k=new Qe(w.msalConfig),y=ue({username:"",password:""}),z={username:{required:Z.withMessage("Username is required.",ee),$autoDirty:!0,$lazy:!0},password:{required:Z.withMessage("Password is required.",ee),$autoDirty:!0,$lazy:!0}},S=ye(z,y),{appTitle:Y,pageTitle:R,busy:_,isDirty:E,validations:J,infoMessage:F,warningMessage:L,errorMessage:$,router:M,route:h,axios:W,utils:K,toasts:i,close:c,security:x}=me({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ne(async()=>{await k.initialize()});const n=async()=>{await k.loginPopup({}).then(()=>{debugger;const P=k.getAllAccounts()[0];k.setActiveAccount(P)}).catch(a=>{console.error(`error during authentication: ${a}`)});var O={account:k.getActiveAccount(),scopes:[]};await k.acquireTokenSilent(O).then(a=>{debugger;const f=a.account.idToken,r=it(f);if(r.token=a.accessToken,console.log(a),!r.roles){debugger;r.roles=[]}r.userId=r.sub,u.login(r);var v=h.query.returnUrl;v?M.push(decodeURIComponent(v)):r.roles.length===1?M.push(`/${r.roles[0].toLowerCase()}`):M.push("/")}).catch(a=>{console.error(`error during acquireTokenSilent: ${a}`)})};return(O,a)=>(t(),ie(de,null,{default:U(()=>[e("div",ds,[e("main",us,[e("div",null,[e("h1",cs,b(o(Y)),1),e("div",null,[o($)?(t(),s("div",ms,[a[1]||(a[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o($)},null,8,fs)])):C("",!0),o(S).$error?(t(),s("div",ps,[a[2]||(a[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(S).$errors,P=>(t(),s("li",{key:P.$uid},b(P.$message),1))),128))])])):C("",!0)]),e("button",{onClick:a[0]||(a[0]=P=>n()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},gs=_e(vs,[["__scopeId","data-v-896956d0"]]),bs={class:"h-100 d-flex align-items-center justify-content-center"},ys={__name:"logout",setup(d){const u=ve();return u.user,ne(async()=>{u.logoutWithRedirect()}),(w,k)=>(t(),s("div",bs,k[0]||(k[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[B(" You have logged out from HOA MS."),e("br"),B(" Click "),e("a",{href:"/",class:"d-inline"},"here"),B(" to go back to home page. ")])],-1)])))}},$s={class:"h-100 d-flex align-items-center justify-content-center"},ws={class:"card m-3"},hs={class:"card-header"},ks={class:"card-body"},_s={class:"m-2"},Ss={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ts=["innerHTML"],Ms={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Cs={class:"row row-cols-1 row-cols-sm-3"},Is={class:"col-sm"},xs={class:"form-group"},Ps={key:0,class:"d-block invalid-feedback"},Vs={class:"col-sm"},Us={class:"form-group"},Os={key:0,class:"d-block invalid-feedback"},As={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Es={class:"row row-cols-1 row-cols-sm-3"},Ls={class:"col"},Bs={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Ns={class:"col"},Rs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Fs={class:"row row-cols-1 row-cols-sm-3"},js={class:"col-sm"},Gs={class:"form-group"},Ys={key:0,class:"d-block invalid-feedback"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},Xs={class:"col"},Zs=["disabled"],eo={class:"col"},to={class:"col"},so={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(d){const u=ue({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),w=(x,n)=>x===n.password,k={firstName:{required:Z.withMessage("First name is required.",ee),$autoDirty:!0,$lazy:!0},middleName:{required:Z.withMessage("Middle name is required.",ee),$autoDirty:!0,$lazy:!0},lastName:{required:Z.withMessage("Last name is required.",ee),$autoDirty:!0,$lazy:!0},phoneNumber:{required:Z.withMessage("Phone number is required.",ee),$autoDirty:!0,$lazy:!0},email:{required:Z.withMessage("Email is required.",ee),$autoDirty:!0,$lazy:!0},password:{required:Z.withMessage("Password is required.",ee),$autoDirty:!0,$lazy:!0},confirmPassword:{required:Z.withMessage("Confirm password is required.",ee),confirmSamePassword:Z.withMessage("Password and confirm passwrod are different.",w),$autoDirty:!0,$lazy:!0}},y=ye(k,u),{appTitle:z,pageTitle:S,busy:Y,isDirty:R,validations:_,infoMessage:E,warningMessage:J,errorMessage:F,router:L,axios:$,utils:M,toasts:h,close:W,security:K}=me({appTitle:"HOA MS",pageTitle:"Register User"}),i=be("$config");ne(()=>{});const c=async()=>{const x=u;if(Y.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}F.value=null;try{Y.value=!0;const O=M.clone(x);O.tenantid=i.tenantId;debugger;await $({method:"post",url:"/api/v1/accounts/register",data:O}).then(a=>{h.success("Register","Registration was successfull.",{onClose:async()=>{await L.push("/accounts/login")}})})}catch(O){F.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{Y.value=!1}};return(x,n)=>{const O=Q("router-link");return t(),ie(de,null,{default:U(()=>[e("div",$s,[e("div",ws,[e("h4",hs,b(o(S)),1),e("div",ks,[e("div",_s,[o(F)?(t(),s("div",Ss,[n[8]||(n[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(F)},null,8,Ts)])):C("",!0),o(y).$error?(t(),s("div",Ms,[n[9]||(n[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(y).$errors,a=>(t(),s("li",{key:a.$uid},b(a.$message),1))),128))])])):C("",!0)]),e("div",Cs,[e("div",Is,[e("div",xs,[n[10]||(n[10]=e("label",null,"First Name",-1)),I(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>u.firstName=a),type:"text",class:"form-control"},null,512),[[N,u.firstName]]),o(y).firstName.$error?(t(),s("div",Ps,[(t(!0),s(q,null,j(o(y).firstName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",Vs,[e("div",Us,[n[11]||(n[11]=e("label",null,"Middle Name",-1)),I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=a=>u.middleName=a),type:"text",class:"form-control"},null,512),[[N,u.middleName]]),o(y).middleName.$error?(t(),s("div",Os,[(t(!0),s(q,null,j(o(y).middleName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",As,[e("div",Ds,[n[12]||(n[12]=e("label",null,"Last Name",-1)),I(e("input",{"onUpdate:modelValue":n[2]||(n[2]=a=>u.lastName=a),type:"text",class:"form-control"},null,512),[[N,u.lastName]]),o(y).lastName.$error?(t(),s("div",Hs,[(t(!0),s(q,null,j(o(y).lastName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])])]),e("div",Es,[e("div",Ls,[e("div",Bs,[n[13]||(n[13]=e("label",null,"Phone Number",-1)),I(e("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>u.phoneNumber=a),type:"tel",class:"form-control"},null,512),[[N,u.phoneNumber]]),o(y).phoneNumber.$error?(t(),s("div",qs,[(t(!0),s(q,null,j(o(y).phoneNumber.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",Ns,[e("div",Rs,[n[14]||(n[14]=e("label",null,"Email",-1)),I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=a=>u.email=a),type:"email",class:"form-control"},null,512),[[N,u.email]]),o(y).email.$error?(t(),s("div",zs,[(t(!0),s(q,null,j(o(y).email.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])])]),e("div",Fs,[e("div",js,[e("div",Gs,[n[15]||(n[15]=e("label",null,"Password",-1)),I(e("input",{"onUpdate:modelValue":n[5]||(n[5]=a=>u.password=a),type:"password",class:"form-control"},null,512),[[N,u.password]]),o(y).password.$error?(t(),s("div",Ys,[(t(!0),s(q,null,j(o(y).password.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])]),e("div",Ws,[e("div",Ks,[n[16]||(n[16]=e("label",null,"Confirm Password",-1)),I(e("input",{"onUpdate:modelValue":n[6]||(n[6]=a=>u.confirmPassword=a),type:"password",class:"form-control"},null,512),[[N,u.confirmPassword]]),o(y).confirmPassword.$error?(t(),s("div",Js,[(t(!0),s(q,null,j(o(y).confirmPassword.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):C("",!0)])])]),e("div",Qs,[e("div",Xs,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:n[7]||(n[7]=a=>c()),class:"btn btn-primary w-100"},n[17]||(n[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),B("Register ")]),8,Zs)]),e("div",eo,[D(O,{to:"/",class:"btn btn-outline-primary w-100"},{default:U(()=>n[18]||(n[18]=[B("Home")])),_:1})]),e("div",to,[D(O,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:U(()=>n[19]||(n[19]=[B("Login")])),_:1})])])])])])]),_:1})}}},oo={path:"/accounts",component:as,props:!1,meta:{},children:[{path:"",component:ls},{path:"login",component:gs},{path:"logout",component:ys},{path:"register",component:so}]};function st(){const d=Je(),u=R=>window.location.href.indexOf(R)>-1,w=R=>localStorage.getItem("data-bs-theme")||R,k=R=>{document.documentElement.setAttribute("data-bs-theme",R),localStorage.setItem("data-bs-theme",R)},y=async()=>await Ke.get("https://bootswatch.com/api/5.json").then(R=>R.data),z=R=>{const _=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");_&&R?(_.setAttribute("href",R),localStorage.setItem("bootswatch-theme",R)):alert("cannot query css link")},S=R=>{Y(),d.push(R)},Y=()=>{if(screen.width<576){const _=document.getElementById("navbarCollapse");if(_){const E=dt.getInstance(_);E&&E.hide()}}};return{isActive:u,getCurrentBsTheme:w,changeBsTheme:k,getBootswatch:y,changeTheme:z,navigate:S,collapseNavbar:Y}}const ao={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},lo={class:"container-md"},no={class:"navbar-collapse collapse",id:"navbarCollapse"},ro={class:"navbar-nav"},io={class:"nav-item"},uo={class:"nav-item dropdown"},co={class:"dropdown-menu","aria-labelledby":"dropdown01"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"navbar-nav ms-auto"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},yo=["onClick"],$o={class:"nav-item dropdown"},wo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},ho={class:"d-sm-none d-xl-inline"},ko={key:0},_o={key:1},So={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},To={key:0},Mo={key:1},Co={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(d){const u=tt(),{isActive:w,getCurrentBsTheme:k,changeBsTheme:y,getBootswatch:z,changeTheme:S,navigate:Y,collapseNavbar:R}=st(),_=ve(),E=_.user,J=ue({user:E,username:E?E.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});ne(async()=>{const M=J;M.bootswatch=await z();const h=k(M.bsTheme);h&&(M.bsTheme=h,y(M.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(M.currentTheme=W,S(W))});const F=M=>{S(M),J.currentTheme=M,R()},L=M=>{y(M),J.bsTheme=M,R()},$=async()=>{_.logoutWithRedirect();const M=new Qe(u.msalConfig);await M.initialize();const h={mainWindowRedirectUri:"/"};await M.logoutPopup(h)};return(M,h)=>{const W=Q("router-link");return t(),ie(de,null,{default:U(()=>[e("nav",ao,[e("div",lo,[D(W,{class:"navbar-brand",to:"/administrator"},{default:U(()=>[B(b(d.appName),1)]),_:1}),h[18]||(h[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",no,[e("ul",ro,[e("li",io,[D(W,{to:"/videos",onClick:o(R),class:"nav-link"},{default:U(()=>h[3]||(h[3]=[e("span",{class:"fas fa-fw fa-file-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",uo,[h[6]||(h[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",co,[e("li",null,[D(W,{to:"/source-groups",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[4]||(h[4]=[B(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/source-locations",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[5]||(h[5]=[B(" Locations ")])),_:1},8,["onClick"])])])]),e("li",mo,[D(W,{to:"/vod-sources",onClick:o(R),class:"nav-link"},{default:U(()=>h[7]||(h[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",fo,[h[10]||(h[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",po,[e("li",null,[D(W,{to:"/program-templates",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[8]||(h[8]=[B(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/channels",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[9]||(h[9]=[B(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",vo,[e("li",go,[h[14]||(h[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",bo,[e("li",null,[J.bsTheme==="dark"?(t(),s("button",{key:0,onClick:h[0]||(h[0]=K=>L("light")),class:"dropdown-item"},h[11]||(h[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),B("Dark Mode ")]))):(t(),s("button",{key:1,onClick:h[1]||(h[1]=K=>L("dark")),class:"dropdown-item"},h[12]||(h[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),B("Light Mode ")])))]),h[13]||(h[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(q,null,j(J.bootswatch.themes,K=>(t(),s("li",null,[e("button",{onClick:i=>F(K.cssCdn),class:oe(["dropdown-item",{active:J.currentTheme===K.cssCdn}])},b(K.name),11,yo)]))),256))])]),e("li",$o,[e("a",wo,[e("span",null,[h[15]||(h[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",ho,[o(E)?(t(),s("span",ko,b(o(E).name),1)):(t(),s("span",_o," Guest "))])])]),e("ul",So,[o(E)?(t(),s("li",To,[e("button",{onClick:h[2]||(h[2]=K=>$()),class:"dropdown-item"},h[16]||(h[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),B("Logout ")]))])):(t(),s("li",Mo,[D(W,{to:"/accounts/login",class:"dropdown-item"},{default:U(()=>h[17]||(h[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),B("Login ")])),_:1})]))])])])])])])]),_:1})}}},Io={class:"footer sticky-bottom"},xo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Po={class:"container-md"},Vo={class:"navbar-text small p-0"},Uo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(d){st();const u=be("$config"),k=ve().user;let z=new Date().getFullYear();const S=ue({user:k,username:k?k.nameFull:"Guest",copyright:`2020-${z} ${u.appName}`});return ne(async()=>{}),(Y,R)=>(t(),s("footer",Io,[e("div",xo,[e("div",Po,[e("span",Vo,"©"+b(S.copyright),1)])])]))}},Oo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Re.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(d){d.message&&this.addMessage(d.title,d.message,d.type,d.options)},async addMessage(d,u,w,k={}){var y={id:this.count++,title:d,message:u,type:w,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};y=Object.assign({},y,k),this.messages.unshift(y),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),y.timeOut>0&&await this.startTimeout(y)},async startTimeout(d,u=0){const w=this,k=performance.now(),y=async()=>{d.animationFrame=requestAnimationFrame(async z=>{const S=z+u-k;if(!w.exists(d)||d.paused){cancelAnimationFrame(d.animationFrame);return}else if(S<d.timeOut){const Y=S/d.timeOut;d.progress=Y,await y()}else{d.progress=1,cancelAnimationFrame(d.animationFrame),w.remove(d);return}})};await y()},pauseProgress(d){d.timeOut<=0||(d.paused=!0)},async resumeProgress(d){d.timeOut<=0||(d.paused=!1,await this.startTimeout(d,d.timeOut*d.progress))},getCurrentProgress(d){return Math.round(d.progress*100)===100?100:d.progress*100},getIconClass(d){const u=d.type;let w="";switch(u){case"success":w="fas fa-fw fa-circle-check";break;case"info":w="fas fa-fw fa-circle-info";break;case"warning":w="fas fa-fw fa-circle-exclamation";break;case"danger":w="fas fa-fw fa-triangle-exclamation";break}let k=w;return d.rtl?"icon-right "+k:"icon-left "+k},async remove(d){const u=this.messages.findIndex(w=>w.id===d.id);this.messages.splice(u,1),typeof d.onClose=="function"&&await d.onClose()},exists(d){return this.messages.findIndex(w=>w.id===d.id)!==-1}}},Ao={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Do=["onMouseover","onMouseout"],Ho={class:"me-auto text-white"},Eo=["onClick"],Lo={class:"toast-body"},Bo=["innerHTML"],qo={key:0,class:"progress m-1",style:{height:"4px"}};function No(d,u,w,k,y,z){return t(),ie(de,null,{default:U(()=>[e("div",Ao,[D(we,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:U(()=>[(t(!0),s(q,null,j(y.messages,S=>(t(),s("div",{key:S.id,class:oe(["toast show mb-2 ms-auto",`border-${S.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Y=>z.pauseProgress(S),onMouseout:Y=>z.resumeProgress(S)},[e("div",{class:oe(["toast-header",`bg-${S.type}`])},[e("strong",Ho,[e("i",{class:oe([z.getIconClass(S),"me-1"])},null,2),B(b(S.title),1)]),S.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Y=>z.remove(S)},u[0]||(u[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Eo)):C("",!0)],2),e("div",Lo,[e("div",{innerHTML:S.message},null,8,Bo)]),S.timeOut>0&&S.showProgress?(t(),s("div",qo,[e("div",{class:oe(`bg-${S.type}`),style:Xe({width:z.getCurrentProgress(S)+"%"})},null,6)])):C("",!0)],42,Do))),128))]),_:1})])]),_:1})}const Ro=_e(Oo,[["render",No],["__scopeId","data-v-5272bd9a"]]),zo={name:"AdminLayout",components:{TopNav:Co,BottomNav:Uo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Fo={class:"d-flex flex-column vh-100"};function jo(d,u,w,k,y,z){const S=Q("Toasts"),Y=Q("TopNav"),R=Q("router-view"),_=Q("BottomNav");return t(),s("div",Fo,[D(S),D(Y),D(R,{class:"flex-grow-1 mb-2"}),u[0]||(u[0]=e("div",{class:"pt-2"},null,-1)),D(_)])}const Go=_e(zo,[["render",jo]]),Yo={class:"d-flex flex-row justify-content-end"},Wo={class:"mt-2 container-md"},Ko={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Jo=["innerHTML"],Qo={class:"text-center"},Xo={class:"row mt-3"},Zo={class:"col-12 col-sm-6 offset-sm-3"},ea={class:"card"},ta={class:"card-body"},sa={class:"card card-body mb-2 d-none"},oa={key:0,class:"fas fa-fw fa-circle-check text-success"},aa={key:1,class:"fas fa-fw fa-times-circle text-danger"},la={key:0,class:"fas fa-fw fa-circle-check text-success"},na={key:1,class:"fas fa-fw fa-times-circle text-danger"},ra={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},ia={class:"col"},da={class:"card h-100 shadow-sm"},ua={class:"card-body"},ca={class:"col"},ma={class:"card h-100 shadow-sm"},fa={class:"card-body"},pa={__name:"Index",setup(d){const{appTitle:u,pageTitle:w,busy:k,isDirty:y,validations:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,generateReturnUrl:$,security:M}=me({appTitle:"ARC AIO",pageTitle:"Dashboard"});be("$config"),ve().user;const W=ue({item:null});ae("805630ed-f288-4f2f-83a4-6c71312f6970"),ae(),ne(async()=>{});const K=async()=>{const x=W;if(!k.value)try{k.value=!0;const n="/api/v1/dashboard/administrators/";x.item=[],await E.get(n).then(O=>{x.item=O.data})}catch(n){R.value=J.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}},i=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await E.get("/api/v1/channels/reset/").then(O=>{F.success("Reset All Data","Reset data was successful.")})}catch(n){R.value=J.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}},c=async()=>{await K()};return(x,n)=>{const O=Q("PageHeader"),a=Q("router-link");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(O,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Yo,[e("button",{onClick:n[0]||(n[0]=P=>c()),class:"ms-2 btn btn-secondary"},n[2]||(n[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Wo,[o(R)?(t(),s("div",Ko,[n[3]||(n[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(R))},null,8,Jo)])):C("",!0),n[26]||(n[26]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),B("UNDER CONSTRUCTION ")],-1)),e("div",Qo,[e("button",{onClick:n[1]||(n[1]=P=>i()),class:"btn btn-warning btn-lg"},n[4]||(n[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),B("Reset All Data ")]))]),e("div",Xo,[e("div",Zo,[e("div",ea,[n[14]||(n[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",ta,[e("ol",null,[n[8]||(n[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[D(a,{to:`/videos/add/${o($)()}`},{default:U(()=>n[5]||(n[5]=[B(" Create a Video. ")])),_:1},8,["to"])]),n[9]||(n[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[D(a,{to:"/program-templates/add"},{default:U(()=>n[6]||(n[6]=[B(" Create Program Template. ")])),_:1}),n[7]||(n[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),n[10]||(n[10]=e("li",null,[B(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),n[11]||(n[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),n[12]||(n[12]=e("li",null," Publish Channel. ",-1)),n[13]||(n[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",sa,[n[17]||(n[17]=B(" Security ")),e("ul",null,[e("li",null,[o(M).isAdministrator?(t(),s("span",oa)):(t(),s("span",aa)),n[15]||(n[15]=B(" Administrator "))]),e("li",null,[o(M).isEmployee?(t(),s("span",la)):(t(),s("span",na)),n[16]||(n[16]=B(" Employee "))])])]),e("div",ra,[e("div",ia,[e("div",da,[n[19]||(n[19]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),B("Human Resources ")])],-1)),e("div",ua,[e("ul",null,[e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[18]||(n[18]=[B(" Employees ")])),_:1})])])])])]),e("div",ca,[e("div",ma,[n[25]||(n[25]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),B("TBD ")])],-1)),e("div",fa,[e("ul",null,[e("li",null,[D(a,{to:"/media-videos"},{default:U(()=>n[20]||(n[20]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[21]||(n[21]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[22]||(n[22]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[23]||(n[23]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>n[24]||(n[24]=[B(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},va={class:"d-flex justify-content-end"},ga=["disabled"],ba={class:"input-group"},ya={class:"row row-cols-1 row-cols-sm-2 mt-3"},$a={class:"col text-center mb-2"},wa=["src"],ha={class:"col"},ka={class:"form-floating mb-2"},_a={key:0,class:"d-block invalid-feedback"},Sa={class:"form-floating mb-2"},Ta={class:"row row-cols-sm-2"},Ma={class:"col"},Ca={class:"form-floating mb-2"},Ia={class:"col"},xa={class:"form-floating mb-2"},Pa={class:"row row-cols-sm-2"},Va={class:"col"},Ua={class:"form-floating mb-2"},Oa={class:"col"},Aa={class:"form-floating mb-2"},Da={class:"col"},Ha={class:"form-floating mb-2"},Ea={class:"col"},La={class:"form-floating mb-2"},Ge="YYYY-MM-DD HH:mm",Ba={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"ARC AIO",pageTitle:"Add User"}),L=d,$=_.moment().local();$.format(Ge),$.add(24,"hours").format(Ge);const M=ae("a22de760-358d-4a0e-83ad-2624a5c11f73"),h=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),W={item:{userId:{required:Z.withMessage("User Id is required.",ee),$autoDirty:!0,$lazy:!0}}},K=ye(W,h);ne(async()=>{});const i=async()=>{const x=h;if(!k.value)try{k.value=!0,x.item=null;const n=`/api/v1/users/get-from-entra-id/${M.value}`;await R.get(n).then(O=>{x.item=O.data})}catch(n){S.value=_.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}},c=async()=>{const x=h;if(k.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="",await R.post(`/api/v1/users/add-from-entra-id/${x.item.userId}`).then(O=>{E.success("Add User","User added",{onClose:async()=>{const a=`${L.urlView}/${O.data}`;await Y.push(a)}})})}catch(O){S.value=_.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}};return(x,n)=>{const O=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",va,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:n[0]||(n[0]=f=>c()),class:"btn btn-primary"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ga),D(O,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(P,{errorMessage:o(S),vuelidate:o(K)},{default:U(()=>[e("div",null,[e("div",null,[e("div",ba,[I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=f=>M.value=f),onKeyup:n[2]||(n[2]=Pe(f=>i(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[N,M.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:n[3]||(n[3]=f=>i())},n[14]||(n[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",ya,[e("div",$a,[e("img",{src:h.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,wa)]),e("div",ha,[e("div",ka,[I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=f=>h.item.userId=f),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[N,h.item.userId]]),n[15]||(n[15]=e("label",{for:"userId"},"User Id",-1)),o(K).item.userId.$error?(t(),s("div",_a,[(t(!0),s(q,null,j(o(K).item.userId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)]),e("div",Sa,[I(e("input",{"onUpdate:modelValue":n[5]||(n[5]=f=>h.item.displayName=f),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[N,h.item.displayName]]),n[16]||(n[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Ta,[e("div",Ma,[e("div",Ca,[I(e("input",{"onUpdate:modelValue":n[6]||(n[6]=f=>h.item.givenName=f),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[N,h.item.givenName]]),n[17]||(n[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Ia,[e("div",xa,[I(e("input",{"onUpdate:modelValue":n[7]||(n[7]=f=>h.item.surname=f),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[N,h.item.surname]]),n[18]||(n[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Pa,[e("div",Va,[e("div",Ua,[I(e("input",{"onUpdate:modelValue":n[8]||(n[8]=f=>h.item.email=f),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[N,h.item.email]]),n[19]||(n[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Oa,[e("div",Aa,[I(e("input",{"onUpdate:modelValue":n[9]||(n[9]=f=>h.item.mobilePhone=f),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[N,h.item.mobilePhone]]),n[20]||(n[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Da,[e("div",Ha,[I(e("input",{"onUpdate:modelValue":n[10]||(n[10]=f=>h.item.principalName=f),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[N,h.item.principalName]]),n[21]||(n[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Ea,[e("div",La,[I(e("input",{"onUpdate:modelValue":n[11]||(n[11]=f=>h.item.jobTitle=f),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[N,h.item.jobTitle]]),n[22]||(n[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Ue(d){if(!d.cacheKey)throw Error("Cache Key required.");if(!d.baseUrl)throw Error("Base Url required.");const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,closeWithReturnUrl:F,generateReturnUrl:L,security:$}=me({appTitle:d.appTitle,pageTitle:d.pageTitle}),M=JSON.parse(JSON.stringify(d.filter));M.pageIndex=M.pageIndex||1,M.pageSize=M.pageSize||15,M.sortField=M.sortField||"",M.sortOrder=M.sortOrder||1,M.updateUrl=M.updateUrl||!1,M.items=M.items||[],M.query=M.query||{},M.query.criteria=M.query.criteria||"";const h=ae(M),W=()=>{var r;if(k.value){console.log("Paginated search is currently busy.");return}const a=JSON.parse(localStorage.getItem(d.cacheKey))||{},P=new URLSearchParams(window.location.search),f=h.value;f.query.criteria=P.get("c")||a.criteria||f.query.criteria||"",f.pageIndex=parseInt(P.get("p"),10)||a.pageIndex||f.pageIndex||1,f.pageSize=parseInt(P.get("s"),10)||a.pageSize||f.pageSize||5,f.sortField=P.get("sf")||a.sortField||f.sortField||"",f.sortOrder=parseInt(P.get("so"),10)||a.sortOrder||f.sortOrder||1,f.visible=a.visible||f.visible,(r=d.initializeFilter)==null||r.call(d,h,d.cacheKey)},K=()=>{if(d.getQuery)return d.getQuery(h.value);{const a=h.value;return["?c=",encodeURIComponent(a.query.criteria),"&p=",a.pageIndex,"&s=",a.pageSize,"&sf=",a.sortField,"&so=",a.sortOrder].join("")}},i=()=>{if(d.saveQuery)d.saveQuery(h.value,d.cacheKey);else{const a=h.value;localStorage.setItem(d.cacheKey,JSON.stringify({criteria:a.query.criteria,pageIndex:a.pageIndex,pageSize:a.pageSize,sortField:a.sortField,sortOrder:a.sortOrder,visible:a.visible}))}};return{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,closeWithReturnUrl:F,generateReturnUrl:L,security:$,filter:h,initializeFilter:W,getQuery:K,saveQuery:i,search:async a=>{var f;let P=h.value;if(k.value){console.log("Paginated search is currently busy.");return}a>0&&(P.pageIndex=a);try{k.value=!0,S.value="";const r=K();P.selected=null,await R(`${d.baseUrl}/${r}`).then(async v=>{var g;Array.isArray(v.data)?P.items=v.data:P=Object.assign(P,v.data);let m=location.pathname;m.endsWith("/")?m+=r:m+="/"+r,P.updateUrl&&window.history.replaceState(r,`${u}-search`,m),P.items.forEach(p=>{p.expand=!1}),i(),(g=d.successAction)==null||g.call(d,h.value)})}catch(r){if(localStorage.removeItem(d.cacheKey),d.failAction)d.failAction(r);else{const v=_.getErrorMessageAsHtml(r);S.value=v,E.error("Error Occured",v)}}finally{k.value=!1,(f=d.finalAction)==null||f.call(d)}},getRowNumber:a=>{const P=h.value;return(P.pageIndex-1)*P.pageSize+(a+1)},setSelected:a=>{const P=h.value;P.selected&&a&&P.selected===a?P.selected=null:(P.selected&&(P.selected.expand=!1),P.selected=a,P.selected.expand=!0)},isSelected:a=>{const P=h.value;return a===null||P.selected===null?!1:a===P.selected}}}const qa={class:"d-flex justify-content-end"},Na={key:0},Ra={class:"ms-1"},za={class:"input-group"},Fa={class:"table-responsive"},ja={class:"table table-hover mb-0"},Ga=["textContent"],Ya=["src"],Wa="/api/v1/users/search",Ka={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Ue({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${w==null?void 0:w.userId}/users/search`,baseUrl:Wa,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-users",pageTitle:o(y)},{default:U(()=>[e("div",qa,[o($).isAdministrator?(t(),s("div",Na,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",Ra,[e("div",za,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Fa,[e("table",ja,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Ga),e("td",null,[m.photoBase64?(t(),s("img",{key:0,src:m.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ya)):C("",!0)]),e("td",null,[D(P,{to:`${d.urlView}/${m.userId}`,class:"d-inline-block text-truncate"},{default:U(()=>[B(b(m.displayName),1)]),_:2},1032,["to"])]),e("td",null,b(m.email),1),e("td",null,b(m.jobTitle),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ja={class:"d-flex flex-row justify-content-end"},Qa={key:0},Xa={class:"row row-cols-1 row-cols-sm-2 mt-3"},Za={class:"col text-center mb-2"},el=["src"],tl={class:"col"},sl={class:"form-floating mb-2"},ol={class:"form-floating mb-2"},al={class:"row row-cols-sm-2"},ll={class:"col"},nl={class:"form-floating mb-2"},rl={class:"col"},il={class:"form-floating mb-2"},dl={class:"row row-cols-sm-2"},ul={class:"col"},cl={class:"form-floating mb-2"},ml={class:"col"},fl={class:"form-floating mb-2"},pl={class:"col"},vl={class:"form-floating mb-2"},gl={class:"col"},bl={class:"form-floating mb-2"},yl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"ARC CMS",pageTitle:"View User"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null});ne(async()=>{await c()});const c=async()=>{const O=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const a=`/api/v1/users/get-from-db/${u.id}/`;await J.get(a).then(P=>{O.item=P.data})}catch(a){_.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},x=async()=>{await c()},n=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(a=>{L.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){_.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-user",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Ja,[o(W).isAdministrator?(t(),s(q,{key:0},[D(P,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:U(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=v=>n()),class:"ms-1 btn btn-warning"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:a[1]||(a[1]=v=>x()),class:"ms-2 btn btn-secondary"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=v=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(r,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",Qa,[e("div",null,[e("div",Xa,[e("div",Za,[e("img",{src:i.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,el)]),e("div",tl,[e("div",sl,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=v=>i.item.userId=v),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[N,i.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",ol,[I(e("input",{"onUpdate:modelValue":a[4]||(a[4]=v=>i.item.displayName=v),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[N,i.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",al,[e("div",ll,[e("div",nl,[I(e("input",{"onUpdate:modelValue":a[5]||(a[5]=v=>i.item.givenName=v),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[N,i.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",rl,[e("div",il,[I(e("input",{"onUpdate:modelValue":a[6]||(a[6]=v=>i.item.surname=v),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[N,i.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",dl,[e("div",ul,[e("div",cl,[I(e("input",{"onUpdate:modelValue":a[7]||(a[7]=v=>i.item.email=v),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[N,i.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",ml,[e("div",fl,[I(e("input",{"onUpdate:modelValue":a[8]||(a[8]=v=>i.item.mobilePhone=v),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[N,i.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",pl,[e("div",vl,[I(e("input",{"onUpdate:modelValue":a[9]||(a[9]=v=>i.item.principalName=v),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[N,i.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",gl,[e("div",bl,[I(e("input",{"onUpdate:modelValue":a[10]||(a[10]=v=>i.item.jobTitle=v),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[N,i.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},$l={class:"d-flex justify-content-end"},wl=["disabled"],hl={class:"row row-cols-1 row-cols-sm-2"},kl={class:"col"},_l={class:"form-floating mb-2"},Sl={key:0,class:"d-block invalid-feedback"},Tl={class:"col"},Ml={class:"form-floating"},Cl={class:"col"},Il={class:"form-floating mb-2"},xl={class:""},Pl={class:"col"},Vl={class:"form-floating mb-2"},Ul={key:0,class:"d-block invalid-feedback"},Ol={class:"col"},Al={class:"form-floating mb-2"},Dl={key:0,class:"d-block invalid-feedback"},Hl={class:""},El={class:"col"},Ll={class:"form-floating mb-2"},Bl={key:0,class:"d-block invalid-feedback"},ql={class:"col"},Nl={class:"input-group mb-2"},Rl={class:"form-floating"},zl=["href"],Fl={key:0,class:"d-block invalid-feedback"},jl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),L=d,$=ue({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),M={item:{title:{title:Z.withMessage("title is required.",ee),$autoDirty:!0,$lazy:!0},durationInMillis:{title:Z.withMessage("durationInMillis is required.",ee),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:Z.withMessage("rawBaseUrl is required.",ee),$autoDirty:!0,$lazy:!0},rawPath:{title:Z.withMessage("rawPath is required.",ee),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:Z.withMessage("hlsBaseUrl is required.",ee),$autoDirty:!0,$lazy:!0},hlsPath:{title:Z.withMessage("hlsPath is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(M,$),W=Oe(()=>{const c=_.moment;if($.durationTime&&$.durationTime!=="00:00:00"&&K($.durationTime)){const x=c().startOf("day"),n=x.format("YYYY-MM-DD ")+$.durationTime,a=c(n).subtract(x);return $.item.durationInMillis=a.valueOf(),$.item.durationInMillis}return 0}),K=c=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(c);ne(async()=>{});const i=async()=>{const c=$;if(k.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const n=_.clone(c.item);n.durationInMillis=W.value;debugger;await R.post("/api/v1/videos/",n).then(O=>{E.success("Add Video","Video added",{onClose:async()=>{const a=`${L.urlView}/${O.data}`;await Y.push(a)}})})}catch(n){S.value=_.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}};return(c,x)=>{const n=Q("router-link"),O=Q("PageHeader"),a=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(O,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",$l,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:x[0]||(x[0]=P=>i()),class:"btn btn-primary"},x[8]||(x[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wl),D(n,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>x[9]||(x[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(a,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",hl,[e("div",kl,[e("div",_l,[I(e("input",{"onUpdate:modelValue":x[1]||(x[1]=P=>$.item.title=P),id:"name",class:"form-control",placeholder:"Title"},null,512),[[N,$.item.title]]),x[10]||(x[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Sl,[(t(!0),s(q,null,j(o(h).item.title.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Tl,[e("div",Ml,[I(e("input",{"onUpdate:modelValue":x[2]||(x[2]=P=>$.durationTime=P),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[N,$.durationTime]]),x[11]||(x[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Cl,[e("div",Il,[I(e("textarea",{"onUpdate:modelValue":x[3]||(x[3]=P=>$.item.description=P),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[N,$.item.description]]),x[12]||(x[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",xl,[x[15]||(x[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Pl,[e("div",Vl,[I(e("input",{"onUpdate:modelValue":x[4]||(x[4]=P=>$.item.rawBaseUrl=P),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[N,$.item.rawBaseUrl]]),x[13]||(x[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.rawBaseUrl.$error?(t(),s("div",Ul,[(t(!0),s(q,null,j(o(h).item.rawBaseUrl.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Ol,[e("div",Al,[I(e("input",{"onUpdate:modelValue":x[5]||(x[5]=P=>$.item.rawPath=P),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[N,$.item.rawPath]]),x[14]||(x[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(h).item.rawPath.$error?(t(),s("div",Dl,[(t(!0),s(q,null,j(o(h).item.rawPath.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",Hl,[x[19]||(x[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",El,[e("div",Ll,[I(e("input",{"onUpdate:modelValue":x[6]||(x[6]=P=>$.item.hlsBaseUrl=P),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[N,$.item.hlsBaseUrl]]),x[16]||(x[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.hlsBaseUrl.$error?(t(),s("div",Bl,[(t(!0),s(q,null,j(o(h).item.hlsBaseUrl.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])]),e("div",ql,[e("div",Nl,[e("div",Rl,[I(e("input",{"onUpdate:modelValue":x[7]||(x[7]=P=>$.item.hlsPath=P),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[N,$.item.hlsPath]]),x[17]||(x[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),$.item.hlsBaseUrl&&$.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent($.item.hlsBaseUrl+$.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},x[18]||(x[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),B("View ")],-1)]),8,zl)):C("",!0)]),o(h).item.hlsPath.$error?(t(),s("div",Fl,[(t(!0),s(q,null,j(o(h).item.hlsPath.$errors,P=>(t(),s("div",{key:P.$uid},b(P.$message),1))),128))])):C("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Gl={key:0,class:"d-flex justify-content-end"},Yl=["disabled"],Wl={key:0},Kl={class:"row row-cols-1 row-cols-sm-2"},Jl={class:"col"},Ql={class:"form-floating mb-2"},Xl={key:0,class:"d-block invalid-feedback"},Zl={class:"col"},en={class:"form-floating mb-2"},tn={key:0,class:"d-block invalid-feedback"},sn={class:"row row-cols-sm-2"},on={class:"col"},an={class:"form-floating mb-2"},ln={class:"form-floating mb-2"},nn={key:0,class:"d-block invalid-feedback"},rn={class:"form-floating mb-2"},dn={key:0,class:"d-block invalid-feedback"},un={class:"col"},cn={class:"form-floating mb-2"},He={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),L=d,$=ue({editorElementId:"editor",htmlContent:"",item:null}),M={item:{title:{required:Z.withMessage("Title is required.",ee),$autoDirty:!0,$lazy:!0},eidr:{required:Z.withMessage("eidr is required.",ee),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:Z.withMessage("eidrPrefix is required.",ee),$autoDirty:!0,$lazy:!0}},htmlContent:{required:Z.withMessage("Content is required.",ee),$autoDirty:!0,$lazy:!0}},h=ye(M,$);ne(async()=>{await i()});const W=()=>{const x=$;var n=document.getElementById(x.editorElementId);n.innerHTML=x.htmlContent},K=x=>{const n=$;n.htmlContent=x.target.innerHTML;var O=document.getElementById(n.editorElementId);O.value=n.htmlContent},i=async()=>{const x=$;if(!k.value)try{k.value=!0,$.item=null,await R.get(`/api/v1/movies/${L.id}`).then(n=>{x.item=n.data,x.htmlContent=x.item.description}),W()}catch(n){S.value=_.getErrorMessageAsHtml(n)}finally{k.value=!1}},c=async()=>{const x=$;if(k.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const O=_.clone(x.item);O.description=x.htmlContent,await R.put("/api/v1/movies",O).then(a=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const P=`${L.urlView}/${L.id}`;await Y.push(P)}})})}catch(O){S.value=_.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}};return(x,n)=>{const O=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),s("div",null,[D(a,{"page-icon":"fas fa-fw fa-film",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[$.item?(t(),s("div",Gl,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:n[0]||(n[0]=f=>c()),class:"btn btn-primary"},n[7]||(n[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yl),e("button",{onClick:i,class:"ms-2 btn btn-secondary"},n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(O,{to:`${L.urlView}/${L.id}`,class:"ms-1 btn btn-secondary"},{default:U(()=>n[9]||(n[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):C("",!0)]),_:1},8,["pageTitle"]),D(P,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[$.item?(t(),s("div",Wl,[e("div",Kl,[e("div",Jl,[e("div",Ql,[I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=f=>$.item.eidrPrefix=f),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[N,$.item.eidrPrefix]]),n[10]||(n[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(h).item.eidrPrefix.$error?(t(),s("div",Xl,[(t(!0),s(q,null,j(o(h).item.eidrPrefix.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])]),e("div",Zl,[e("div",en,[I(e("input",{"onUpdate:modelValue":n[2]||(n[2]=f=>$.item.eidr=f),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[N,$.item.eidr]]),n[11]||(n[11]=e("label",{for:"title"},"Eidr",-1)),o(h).item.eidr.$error?(t(),s("div",tn,[(t(!0),s(q,null,j(o(h).item.eidr.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])])]),e("div",sn,[e("div",on,[e("div",an,[I(e("input",{"onUpdate:modelValue":n[3]||(n[3]=f=>$.item.releaseYear=f),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[N,$.item.releaseYear]]),n[12]||(n[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",ln,[I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=f=>$.item.title=f),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[N,$.item.title]]),n[13]||(n[13]=e("label",{for:"title"},"Title",-1)),o(h).item.title.$error?(t(),s("div",nn,[(t(!0),s(q,null,j(o(h).item.title.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])])]),e("div",null,[e("div",rn,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:n[5]||(n[5]=f=>K(f))},null,32),n[14]||(n[14]=e("label",{for:"editor"},"Content",-1)),o(h).htmlContent.$error?(t(),s("div",dn,[(t(!0),s(q,null,j(o(h).htmlContent.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):C("",!0)])]),e("div",un,[e("div",cn,[I(e("textarea",{"onUpdate:modelValue":n[6]||(n[6]=f=>$.item.metadata=f),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[N,$.item.metadata]]),n[15]||(n[15]=e("label",{for:"title"},"Metadata",-1))])])])):C("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},mn={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function fn(d,u,w,k,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const pn=_e(mn,[["render",fn]]),vn={class:"d-flex justify-content-end"},gn={class:"ms-1"},bn={class:"input-group"},yn={class:"table-responsive"},$n={class:"table table-hover mb-0"},wn=["textContent"],hn={class:"text-end ms-sm-5 pe-sm-5"},kn="/api/v1/videos/search",_n={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${w==null?void 0:w.userId}/videos/search`,baseUrl:kn,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:U(()=>[e("div",vn,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",gn,[e("div",bn,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",yn,[e("table",$n,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,wn),e("td",null,[D(P,{to:`${d.urlView}/${m.videoId}`,class:"d-inline-block text-truncate"},{default:U(()=>[B(b(m.title),1)]),_:2},1032,["to"])]),e("td",null,b(m.description),1),e("td",hn,[e("div",null,b(o(J).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Sn={class:"d-flex flex-row justify-content-end"},Tn={key:0},Mn={class:"row row-cols-sm-2"},Cn={class:"col"},In={class:"form-floating mb-2"},xn={class:"col"},Pn={class:"form-floating mb-2"},Vn={class:"col"},Un={class:"form-floating mb-2"},On={class:"row row-cols-sm-2"},An={class:"col"},Dn={class:"form-floating mb-2"},Hn={class:"col"},En={class:"form-floating mb-2"},Ln={class:"row row-cols-sm-2"},Bn={class:"col"},qn={class:"form-floating mb-2"},Nn={class:"col"},Rn={class:"form-floating mb-2"},zn={class:"row row-cols-sm-2"},Fn={class:"col"},jn={class:"form-floating mb-2"},Gn={class:"col"},Yn={class:"form-floating mb-2"},Wn={class:"table-responsive"},Kn={class:"table table-hover mb-0 caption-top"},Jn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null});ne(async()=>{await c()});const c=async()=>{const O=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const a=`/api/v1/videos/${u.id}/`;await J.get(a).then(P=>{O.item=P.data,O.item.duration=F.moment.utc(O.item.durationInMillis).format("HH:mm:ss")})}catch(a){_.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},x=async()=>{await c()},n=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(a=>{L.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){_.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Sn,[o(W).isAdministrator?(t(),s(q,{key:0},[D(P,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:U(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=v=>n()),class:"ms-1 btn btn-warning"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:a[1]||(a[1]=v=>x()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=v=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(r,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",Tn,[e("div",null,[e("div",Mn,[e("div",Cn,[e("div",In,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=v=>i.item.title=v),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[N,i.item.title]]),a[16]||(a[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",xn,[e("div",Pn,[I(e("input",{"onUpdate:modelValue":a[4]||(a[4]=v=>i.item.duration=v),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[N,i.item.duration]]),a[17]||(a[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",Vn,[e("div",Un,[I(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=v=>i.item.description=v),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[N,i.item.description]]),a[18]||(a[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",On,[e("div",An,[e("div",Dn,[I(e("input",{"onUpdate:modelValue":a[6]||(a[6]=v=>i.item.rawBaseUrl=v),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[N,i.item.rawBaseUrl]]),a[19]||(a[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Hn,[e("div",En,[I(e("input",{"onUpdate:modelValue":a[7]||(a[7]=v=>i.item.rawPath=v),class:"form-control",id:"rawPath",disabled:""},null,512),[[N,i.item.rawPath]]),a[20]||(a[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Ln,[e("div",Bn,[e("div",qn,[I(e("input",{"onUpdate:modelValue":a[8]||(a[8]=v=>i.item.hlsBaseUrl=v),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[N,i.item.hlsBaseUrl]]),a[21]||(a[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Nn,[e("div",Rn,[I(e("input",{"onUpdate:modelValue":a[9]||(a[9]=v=>i.item.hlsPath=v),class:"form-control",id:"hlsPath",disabled:""},null,512),[[N,i.item.hlsPath]]),a[22]||(a[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",zn,[e("div",Fn,[e("div",jn,[I(e("input",{"onUpdate:modelValue":a[10]||(a[10]=v=>i.item.dashBaseUrl=v),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[N,i.item.dashBaseUrl]]),a[23]||(a[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Gn,[e("div",Yn,[I(e("input",{"onUpdate:modelValue":a[11]||(a[11]=v=>i.item.dashPath=v),class:"form-control",id:"dashPath",disabled:""},null,512),[[N,i.item.dashPath]]),a[24]||(a[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Wn,[e("table",Kn,[a[25]||(a[25]=e("caption",null,"VOD Sources",-1)),a[26]||(a[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.vodSources,(v,m)=>(t(),s("tr",{key:v.vodSourceId},[e("td",null,b(m+1),1),e("td",null,[D(P,{to:`${u.urlViewVodSource}/${encodeURIComponent(v.vodSourceId)}/${o(h)()}`},{default:U(()=>[B(b(v.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[he,i.item.vodSources.length>0]])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Qn={class:"d-flex justify-content-end"},Xn=["disabled"],Zn={class:"form-floating mb-2"},er={key:0,class:"d-block invalid-feedback"},tr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),L=d,$=ue({lookups:{},item:{name:null}}),M={item:{name:{required:Z.withMessage("name is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(M,$);ne(async()=>{});const W=async()=>{const K=$;if(k.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const c=_.clone(K.item);await R.post("/api/v1/sourcegroups/",c).then(x=>{E.success("Add Source Group","Source group added.",{onClose:async()=>{const n=`${L.urlView}/${x.data}`;await Y.push(n)}})})}catch(c){S.value=_.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{k.value=!1}};return(K,i)=>{const c=Q("router-link"),x=Q("PageHeader"),n=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(x,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Qn,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:i[0]||(i[0]=O=>W()),class:"btn btn-primary"},i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xn),D(c,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(n,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Zn,[I(e("input",{"onUpdate:modelValue":i[1]||(i[1]=O=>$.item.name=O),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[N,$.item.name]]),i[4]||(i[4]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",er,[(t(!0),s(q,null,j(o(h).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},sr={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function or(d,u,w,k,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const ar=_e(sr,[["render",or]]),lr={class:"d-flex justify-content-end"},nr={class:"ms-1"},rr={class:"input-group"},ir={class:"table-responsive"},dr={class:"table table-hover mb-0"},ur=["textContent"],cr={key:0,class:"fas fa-fw fa-check-circle text-success"},mr="/api/v1/sourcegroups/search",fr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${w==null?void 0:w.userId}/source-groups/search`,baseUrl:mr,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(y)},{default:U(()=>[e("div",lr,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",nr,[e("div",rr,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",ir,[e("table",dr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,ur),e("td",null,[D(P,{to:`${d.urlView}/${m.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",cr)):C("",!0),B(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.channelOutputs),1),e("td",null,b(m.packageConfigurations),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},pr={class:"d-flex flex-row justify-content-end"},vr={key:0},gr={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},br={class:"nav-item",role:"presentation"},yr={class:"nav-item",role:"presentation"},$r={class:"nav-item",role:"presentation"},wr={class:"tab-content",id:"myTabContent"},hr={class:"mt-2"},kr={class:"col"},_r={class:"form-floating mb-2"},Sr={class:"mt-2"},Tr={class:"table-responsive border"},Mr={class:"table table-hover mb-0"},Cr={class:"mt-2"},Ir={class:"table-responsive border"},xr={class:"table table-hover mb-0"},Pr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ne(async()=>{await a(),c.value=F.getPageTab("sourceGroup")||"information-tab"});const x=r=>{F.setPageTab("sourceGroup",r),c.value=r},n=r=>r!==c.value?"":"active",O=r=>r!==c.value?"":"show active",a=async()=>{const r=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const v=`/api/v1/sourcegroups/${u.id}/`;await J.get(v).then(m=>{r.item=m.data})}catch(v){_.value=F.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{if(!y.value)try{y.value=!0,_.value="";const r=`/api/v1/sourcegroups/${u.id}/`;await J.delete(r).then(v=>{L.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const m=`${u.urlMain}/`;await E.push(m)}})})}catch(r){_.value=F.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{y.value=!1}},f=async()=>{await a()};return(r,v)=>{const m=Q("PageHeader"),g=Q("router-link"),p=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",pr,[e("button",{onClick:v[0]||(v[0]=G=>P()),class:"ms-1 btn btn-warning"},v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:v[1]||(v[1]=G=>f()),class:"ms-2 btn btn-secondary"},v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:v[2]||(v[2]=G=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},v[9]||(v[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",vr,[e("div",null,[e("ul",gr,[e("li",br,[e("button",{onClick:v[3]||(v[3]=G=>x("information-tab")),class:oe([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",yr,[e("button",{onClick:v[4]||(v[4]=G=>x("channelOutputs-tab")),class:oe([n("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",$r,[e("button",{onClick:v[5]||(v[5]=G=>x("packageConfigurations-tab")),class:oe([n("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",wr,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",hr,[e("div",kr,[e("div",_r,[I(e("input",{"onUpdate:modelValue":v[6]||(v[6]=G=>i.item.name=G),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),v[10]||(v[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:oe([O("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Sr,[e("div",Tr,[e("table",Mr,[v[11]||(v[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.channelOutputs,(G,V)=>(t(),s("tr",{key:G.channelOutputId},[e("td",null,b(V+1),1),e("td",null,[D(g,{to:`${d.urlViewChannel}/${G.channelId}/${o(h)()}`},{default:U(()=>[B(b(G.manifestName),1)]),_:2},1032,["to"])]),e("td",null,b(G.outputType),1)]))),128))]),_:1},512),[[he,i.item.channelOutputs.length>0]])])])])],2),e("div",{class:oe([O("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Cr,[e("div",Ir,[e("table",xr,[v[12]||(v[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.packageConfigurations,(G,V)=>(t(),s("tr",{key:G.packageConfigurationId},[e("td",null,b(V+1),1),e("td",null,[D(g,{to:`${d.urlViewVodSource}/${G.vodSourceId}/${o(h)()}`},{default:U(()=>[B(b(G.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,b(G.path),1),e("td",null,b(G.type),1)]))),128))]),_:1},512),[[he,i.item.packageConfigurations.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Vr={class:"d-flex justify-content-end"},Ur=["disabled"],Or={class:"form-floating mb-2"},Ar={key:0,class:"d-block invalid-feedback"},Dr={class:"form-floating mb-2"},Hr={key:0,class:"d-block invalid-feedback"},Er={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),L=d,$=ue({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),M={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:Z.withMessage("HTTP Configuration Base Url is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(M,$);ne(async()=>{});const W=async()=>{const K=$;if(k.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const c=_.clone(K.item);await R.post("/api/v1/sourcelocations/",c).then(x=>{E.success("Add Source Location","Source location added.",{onClose:async()=>{const n=`${L.urlView}/${x.data}`;await Y.push(n)}})})}catch(c){S.value=_.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{k.value=!1}};return(K,i)=>{const c=Q("router-link"),x=Q("PageHeader"),n=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(x,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Vr,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:i[0]||(i[0]=O=>W()),class:"btn btn-primary"},i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ur),D(c,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>i[4]||(i[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(n,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Or,[I(e("input",{"onUpdate:modelValue":i[1]||(i[1]=O=>$.item.name=O),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[N,$.item.name]]),i[5]||(i[5]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Ar,[(t(!0),s(q,null,j(o(h).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):C("",!0)]),e("div",Dr,[I(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=O=>$.item.httpConfigurationBaseUrl=O),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[N,$.item.httpConfigurationBaseUrl]]),i[6]||(i[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(h).item.httpConfigurationBaseUrl.$error?(t(),s("div",Hr,[(t(!0),s(q,null,j(o(h).item.httpConfigurationBaseUrl.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Lr={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Br(d,u,w,k,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const qr=_e(Lr,[["render",Br]]),Nr={class:"d-flex justify-content-end"},Rr={class:"ms-1"},zr={class:"input-group"},Fr={class:"table-responsive"},jr={class:"table table-hover mb-0"},Gr=["textContent"],Yr={key:0,class:"fas fa-fw fa-check-circle text-success"},Wr="/api/v1/sourcelocations/search",Kr={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${w==null?void 0:w.userId}/source-locations/search`,baseUrl:Wr,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-building",pageTitle:o(y)},{default:U(()=>[e("div",Nr,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Rr,[e("div",zr,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Fr,[e("table",jr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Gr),e("td",null,[D(P,{to:`${d.urlView}/${m.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",Yr)):C("",!0),B(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Jr={class:"d-flex flex-row justify-content-end"},Qr={key:0},Xr={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Zr={class:"nav-item",role:"presentation"},ei={class:"nav-item",role:"presentation"},ti={class:"nav-item",role:"presentation"},si={class:"tab-content",id:"myTabContent"},oi={class:"mt-2"},ai={class:"col"},li={class:"form-floating mb-2"},ni={class:"col"},ri={class:"form-floating mb-2"},ii={class:"mt-2"},di={class:"table-responsive border"},ui={class:"table table-hover mb-0"},ci={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},mi={class:"mt-2"},fi={class:"table-responsive border"},pi={class:"table table-hover mb-0"},vi={key:0,class:"fas fa-fw fa-check-circle text-success"},gi={class:"badge bg-info"},bi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ne(async()=>{await a(),c.value=F.getPageTab("sourceLocation")||"information-tab"});const x=v=>{F.setPageTab("sourceLocation",v),c.value=v},n=v=>v!==c.value?"":"active",O=v=>v!==c.value?"":"show active",a=async()=>{const v=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const m=`/api/v1/sourcelocations/${u.id}/`;await J.get(m).then(g=>{v.item=g.data})}catch(m){_.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()},f=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!y.value){_.value=null;try{y.value=!0,await J.post(`/api/v1/sourcelocations/${u.id}/publish/`).then(m=>{L.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),y.value=!1,await P()}catch(m){_.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}}},r=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/sourcelocations/unpublish/${u.id}/`).then(m=>{L.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),y.value=!1,await P()}catch(m){_.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}}};return(v,m)=>{const g=Q("PageHeader"),p=Q("router-link"),G=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(g,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Jr,[i.item?(t(),s(q,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=V=>r()),class:"ms-1 btn btn-warning"},m[9]||(m[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=V=>f()),class:"ms-1 btn btn-primary"},m[10]||(m[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:m[2]||(m[2]=V=>P()),class:"ms-2 btn btn-secondary"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=V=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(G,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",Qr,[e("div",null,[e("ul",Xr,[e("li",Zr,[e("button",{onClick:m[4]||(m[4]=V=>x("information-tab")),class:oe([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ei,[e("button",{onClick:m[5]||(m[5]=V=>x("vodSources-tab")),class:oe([n("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",ti,[e("button",{onClick:m[6]||(m[6]=V=>x("programs-tab")),class:oe([n("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",si,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",oi,[e("div",ai,[e("div",li,[I(e("input",{"onUpdate:modelValue":m[7]||(m[7]=V=>i.item.name=V),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),m[13]||(m[13]=e("label",{for:"name"},"Name",-1))])]),e("div",ni,[e("div",ri,[I(e("input",{"onUpdate:modelValue":m[8]||(m[8]=V=>i.item.httpConfigurationBaseUrl=V),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[N,i.item.httpConfigurationBaseUrl]]),m[14]||(m[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:oe([O("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",ii,[e("div",di,[e("table",ui,[m[15]||(m[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.vodSources,(V,se)=>(t(),s("tr",{key:V.vodSourceId},[e("td",null,b(se+1),1),e("td",null,[V.arn?(t(),s("span",ci)):C("",!0),D(p,{to:`${u.urlViewVodSource}/${encodeURIComponent(V.vodSourceId)}/${o(h)()}`},{default:U(()=>[B(b(V.name),1)]),_:2},1032,["to"])]),e("td",null,[D(p,{to:`${u.urlViewVideo}/${encodeURIComponent(V.video.videoId)}/${o(h)()}`},{default:U(()=>[B(b(V.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,b(o(F).moment.utc(V.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,i.item.vodSources.length>0]])])])])],2),e("div",{class:oe([O("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",mi,[e("div",fi,[e("table",pi,[m[17]||(m[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.programs,(V,se)=>(t(),s("tr",{key:V.programId},[e("td",null,b(se+1),1),e("td",null,[D(p,{to:`${u.urlViewChannel}/${encodeURIComponent(V.channel.channelId)}/${o(h)()}`},{default:U(()=>[B(b(V.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[V.arn?(t(),s("span",vi)):C("",!0),B(" "+b(V.name)+" ",1),e("div",null," Start: "+b(o(F).moment.utc(V.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+b(o(F).moment.utc(V.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[B(b(o(F).moment(V.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",gi,b(o(F).moment(V.dateScheduledStart).fromNow()),1)])]),m[16]||(m[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[he,i.item.programs.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},yi={class:"d-flex justify-content-end"},$i=["disabled"],wi={class:"col"},hi={class:"form-floating mb-2"},ki={key:0,class:"d-block invalid-feedback"},_i={class:"row row-cols-1 row-cols-sm-2"},Si={class:"col"},Ti={class:"form-floating mb-2"},Mi=["value"],Ci={key:0,class:"d-block invalid-feedback"},Ii={class:"col"},xi={class:"form-floating mb-2"},Pi=["disabled"],Vi=["value"],Ui={key:0,class:"d-block invalid-feedback"},Oi={key:0},Ai={class:"d-flex flex-row justify-content-between"},Di={key:0,class:"d-inline invalid-feedback"},Hi={class:"table-responsive border mt-1"},Ei={class:"table mb-0 caption-top"},Li={class:"input-group mb-1"},Bi=["onUpdate:modelValue"],qi=["onUpdate:modelValue"],Ni=["value"],Ri=["onUpdate:modelValue"],zi=["onClick"],Fi={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),L=d,$=ue({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),M=(P,f,r)=>P.length>0,h={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},videoId:{required:Z.withMessage("Video is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("Source Locaton is required.",ee),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:Z.withMessage("PackageConfigurations is required.",M),$each:Z.forEach({path:{required:Z.withMessage("Path is required.",ee)},sourceGroupId:{required:Z.withMessage("Source Group is required.",ee)}}),$autoDirty:!0,$lazy:!0}}},W=ye(h,$);ne(async()=>{await K(),await i()});const K=async()=>{try{await R.get("/api/v1/sourcegroups/lookup/").then(f=>{$.lookups.sourceGroups=f.data})}catch(P){S.value=_.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},i=async()=>{try{if(await R.get("/api/v1/sourcelocations/lookup/").then(f=>{$.lookups.sourceLocations=f.data}),$.lookups.sourceLocations.length===1){const f=$.lookups.sourceLocations[0];$.selected.sourceLocation=f,await c()}}catch(P){S.value=_.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},c=async()=>{const P=$.selected.sourceLocation;$.item.sourceLocationId=P.id,await x(P.baseUrl)},x=async P=>{try{const f=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(P)}`;await R.get(f).then(r=>{$.lookups.videos=r.data,$.lookups.videos.length===1&&($.item.videoId=$.lookups.videos[0].id)})}catch(f){S.value=_.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},n=async()=>{const P=$;if(k.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const r=_.clone(P.item);r.videoId=r.video.id,delete r.video,await R.post("/api/v1/vodSources/",r).then(v=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const m=`${L.urlView}/${v.data}`;await Y.push(m)}})})}catch(r){S.value=_.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{k.value=!1}},O=()=>{const P={path:"",sourceGroupId:null,type:"HLS"},f=$.item.video;f&&(P.path=f.hlsPath),$.item.packageConfigurations.push(P)},a=P=>{$.item.packageConfigurations.splice(P,1)};return(P,f)=>{const r=Q("router-link"),v=Q("PageHeader"),m=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(v,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",yi,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:f[0]||(f[0]=g=>n()),class:"btn btn-primary"},f[6]||(f[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$i),D(r,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(m,{errorMessage:o(S),vuelidate:o(W)},{default:U(()=>[e("div",null,[e("div",wi,[e("div",hi,[I(e("input",{"onUpdate:modelValue":f[1]||(f[1]=g=>$.item.name=g),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,$.item.name]]),f[8]||(f[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",ki,[(t(!0),s(q,null,j(o(W).item.name.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",_i,[e("div",Si,[e("div",Ti,[I(e("select",{"onUpdate:modelValue":f[2]||(f[2]=g=>$.selected.sourceLocation=g),onChange:f[3]||(f[3]=g=>c()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j($.lookups.sourceLocations,g=>(t(),s("option",{value:g},b(g.name),9,Mi))),256))],544),[[pe,$.selected.sourceLocation]]),f[9]||(f[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Ci,[(t(!0),s(q,null,j(o(W).item.sourceLocationId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",Ii,[e("div",xi,[I(e("select",{"onUpdate:modelValue":f[4]||(f[4]=g=>$.item.video=g),onChange:f[5]||(f[5]=g=>$.item.videoId=$.item.video.id),class:"form-select",id:"videoId",disabled:$.item.packageConfigurations.length>0},[(t(!0),s(q,null,j($.lookups.videos,g=>(t(),s("option",{value:g},b(g.name),9,Vi))),256))],40,Pi),[[pe,$.item.video]]),f[10]||(f[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",Ui,[(t(!0),s(q,null,j(o(W).item.videoId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])])]),f[17]||(f[17]=e("hr",null,null,-1)),$.item.videoId?(t(),s("div",Oi,[e("div",Ai,[e("fieldset",null,[e("legend",null,[f[12]||(f[12]=B(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Di,f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):C("",!0)])]),e("button",{onClick:O,class:"btn btn-outline-primary"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Package Configuration ")]))]),e("div",Hi,[e("table",Ei,[f[16]||(f[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j($.item.packageConfigurations,(g,p)=>(t(),s("tr",null,[e("td",null,b(p+1),1),e("td",null,[e("div",Li,[I(e("input",{"onUpdate:modelValue":G=>g.path=G,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Bi),[[N,g.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(q,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[p].path,G=>(t(),s("div",{key:G,class:"d-block invalid-feedback"},b(G.$message),1))),128)):C("",!0)]),e("td",null,[e("div",null,[I(e("select",{"onUpdate:modelValue":G=>g.sourceGroupId=G,class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,j($.lookups.sourceGroups,G=>(t(),s("option",{value:G.id},b(G.name),9,Ni))),256))],8,qi),[[pe,g.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(q,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[p].path,G=>(t(),s("div",{key:G,class:"d-block invalid-feedback"},b(G.$message),1))),128)):C("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":G=>g.type=G,class:"form-select",id:"type"},f[14]||(f[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Ri),[[pe,g.type]])]),e("td",null,[e("button",{onClick:G=>a(p),class:"btn btn-outline-warning"},f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,zi)])]))),256))])])])])):C("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ji={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Gi(d,u,w,k,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Yi=_e(ji,[["render",Gi]]),Wi={class:"d-flex justify-content-end"},Ki={key:0},Ji={class:"ms-1"},Qi={class:"input-group"},Xi={class:"table-responsive"},Zi={class:"table table-hover mb-0"},ed=["textContent"],td={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},sd={class:"small"},od="/api/v1/vodsources/search",ad={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,closeWithReturnUrl:$,generateReturnUrl:M,security:h,filter:W,initializeFilter:K,getQuery:i,saveQuery:c,search:x,getRowNumber:n,setSelected:O,isSelected:a}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${w==null?void 0:w.userId}/vod-sources/search`,baseUrl:od,filter:{updateUrl:!0}});return ne(async()=>{K(),await x()}),(P,f)=>{const r=Q("router-link"),v=Q("PageHeader"),m=Q("m-pagination"),g=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(v,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(y)},{default:U(()=>[e("div",Wi,[o(h).isAdministrator?(t(),s("div",Ki,[D(r,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),D(r,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>f[4]||(f[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ji,[e("div",Qi,[I(e("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>o(W).query.criteria=p),onKeyup:f[1]||(f[1]=Pe(p=>o(x)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:f[2]||(f[2]=p=>o(x)(1))},f[5]||(f[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(R)},{default:U(()=>[e("div",Xi,[e("table",Zi,[f[6]||(f[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(W).items,(p,G)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(n)(G)),class:"text-center"},null,8,ed),e("td",null,[D(r,{to:`${d.urlView}/${p.vodSourceId}`,class:"d-inline-block text-truncate"},{default:U(()=>[p.arn?(t(),s("span",td)):C("",!0),B(b(p.name),1)]),_:2},1032,["to"])]),e("td",null,[D(r,{to:`${d.urlViewVideo}/${encodeURIComponent(p.video.videoId)}/${o(M)()}`},{default:U(()=>[B(b(p.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",sd,"Duration: "+b(o(J).moment.utc(p.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,o(W).items.length>0]])])]),D(m,{filter:o(W),search:o(x),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ld=["id"],nd={class:"modal-dialog modal-xl modal-fullscreen-md-down"},rd={class:"modal-content"},id={class:"modal-header bg-primary text-white"},dd={class:"modal-title",id:"exampleModalLabel"},ud={class:"modal-body"},cd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},md=["innerHTML"],fd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},pd={class:"container"},vd={class:"col"},gd={class:"form-floating mb-2"},bd=["value"],yd={key:0,class:"d-block invalid-feedback"},$d={class:"col"},wd={class:"form-floating mb-2"},hd={key:0,class:"d-block invalid-feedback"},kd={class:"col"},_d={class:"form-floating mb-2"},Sd={key:0,class:"d-block invalid-feedback"},Td={class:"modal-footer"},Md=["disabled"],Cd={__name:"_addPackageConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=w;ae();const K=ae("modalAddChannelOutput"),i=ue({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),c={item:{sourceGroupId:{required:Z.withMessage("Source Group is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("VOD Source is required.",ee),$autoDirty:!0,$lazy:!0},path:{required:Z.withMessage("Path is required.",ee),$autoDirty:!0,$lazy:!0},type:{required:Z.withMessage("Type is required.",ee),$autoDirty:!0,$lazy:!0}}},x=ye(c,i);ne(async()=>{x.value.$reset()});const n=async()=>{await O()},O=async()=>{try{await F.get("/api/v1/sourceGroups/lookup/").then(v=>{i.lookups.sourceGroups=v.data,i.lookups.sourceGroups.length===1&&(i.item.sourceGroupId=i.lookups.sourceGroups[0].id)})}catch(r){E.value=L.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},a=async r=>{const v=i;Y.value.clear(),E.value="",v.lookups={sourceGroups:[]},v.item={sourceGroupId:null,vodSourceId:r,path:null,type:null},await n(),x.value.$reset();var m=document.getElementById(K.value),g=$e.getOrCreateInstance(m);g.show()},P=async()=>{var r=document.getElementById(K.value),v=$e.getOrCreateInstance(r);v.hide(),W("refresh")},f=async()=>{const r=i;if(z.value)return;const v=await x.value.$validate();debugger;if(!v){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const m=r.item;await F.post("/api/v1/vodSources/package-configurations/",m).then(g=>{$.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await P()}catch(m){E.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:a,close:P}),(r,v)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",nd,[e("div",rd,[e("div",id,[e("h5",dd,b(o(k))+" - "+b(o(y)),1),v[4]||(v[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",ud,[o(E)?(t(),s("div",cd,[v[5]||(v[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,md)])):C("",!0),o(Y).size>0?(t(),s("div",fd,[v[6]||(v[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),m=>(t(),s("li",null,b(m),1))),256))])])):C("",!0),e("div",pd,[e("div",vd,[e("div",gd,[I(e("select",{"onUpdate:modelValue":v[0]||(v[0]=m=>i.item.sourceGroupId=m),class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,j(i.lookups.sourceGroups,m=>(t(),s("option",{value:m.id},b(m.name),9,bd))),256))],512),[[pe,i.item.sourceGroupId]]),v[7]||(v[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(x).item.sourceGroupId.$error?(t(),s("div",yd,[(t(!0),s(q,null,j(o(x).item.sourceGroupId.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):C("",!0)])]),e("div",$d,[e("div",wd,[I(e("select",{"onUpdate:modelValue":v[1]||(v[1]=m=>i.item.type=m),class:"form-select",id:"type"},v[8]||(v[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,i.item.type]]),v[9]||(v[9]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(x).item.type.$error?(t(),s("div",hd,[(t(!0),s(q,null,j(o(x).item.type.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):C("",!0)])]),e("div",kd,[e("div",_d,[I(e("input",{"onUpdate:modelValue":v[2]||(v[2]=m=>i.item.path=m),class:"form-control",id:"path"},null,512),[[N,i.item.path]]),v[10]||(v[10]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(x).item.path.$error?(t(),s("div",Sd,[(t(!0),s(q,null,j(o(x).item.path.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):C("",!0)])])])]),e("div",Td,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:v[3]||(v[3]=m=>f()),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Md),v[12]||(v[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,ld))}},Id=["id"],xd={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Pd={class:"modal-content"},Vd={class:"modal-header bg-primary text-white"},Ud={class:"modal-title",id:"exampleModalLabel"},Od={class:"modal-body"},Ad={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Dd=["innerHTML"],Hd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ed={class:"container"},Ld={class:"col"},Bd={class:"form-floating mb-2"},qd={class:"col"},Nd={class:"form-floating mb-2"},Rd={key:0,class:"d-block invalid-feedback"},zd={class:"col"},Fd={class:"form-floating mb-2"},jd={key:0,class:"d-block invalid-feedback"},Gd={class:"col"},Yd={class:"form-floating mb-2"},Wd={key:0,class:"d-block invalid-feedback"},Kd={class:"modal-footer"},Jd=["disabled"],Qd={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=w,K=ae(),i=ae("modalAddPlaybackConfiguration"),c=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:Z.withMessage("adDecisionServerUrl is required.",ee),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:Z.withMessage("videoContentSourceUrl is required.",ee),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);ne(async()=>{n.value.$reset()});const O=async(f,r)=>{K.value=f;const v=c;Y.value.clear(),E.value="";const m=r,g=m.lastIndexOf("/"),p=m.substring(0,g),G="ad_campaign_"+m.substring(g+1).replace(".","_");v.item={name:G,originalVideoContentSourceUrl:r,videoContentSourceUrl:p,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},n.value.$reset();var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.show()},a=async()=>{var f=document.getElementById(i.value),r=$e.getOrCreateInstance(f);r.hide(),W("refresh")},P=async()=>{const f=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const v=f.item;v.vodSourceId=K.value,await F.post("/api/v1/playbackconfigurations/vodsource",v).then(m=>{$.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await a()}catch(v){E.value=L.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:O,close:a}),(f,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",xd,[e("div",Pd,[e("div",Vd,[e("h5",Ud,b(o(k))+" - "+b(o(y)),1),r[5]||(r[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Od,[o(E)?(t(),s("div",Ad,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Dd)])):C("",!0),o(Y).size>0?(t(),s("div",Hd,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),v=>(t(),s("li",null,b(v),1))),256))])])):C("",!0),e("div",Ed,[e("div",Ld,[e("div",Bd,[I(e("input",{"onUpdate:modelValue":r[0]||(r[0]=v=>c.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[N,c.item.originalVideoContentSourceUrl]]),r[8]||(r[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",qd,[e("div",Nd,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Rd,[(t(!0),s(q,null,j(o(n).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",zd,[e("div",Fd,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>c.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[N,c.item.videoContentSourceUrl]]),r[10]||(r[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),r[11]||(r[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(n).item.videoContentSourceUrl.$error?(t(),s("div",jd,[(t(!0),s(q,null,j(o(n).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",Gd,[e("div",Yd,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>c.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[N,c.item.adDecisionServerUrl]]),r[12]||(r[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(n).item.adDecisionServerUrl.$error?(t(),s("div",Wd,[(t(!0),s(q,null,j(o(n).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])])])]),e("div",Kd,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:r[4]||(r[4]=v=>P()),class:"btn btn-primary",type:"button"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Jd),r[14]||(r[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Id))}},Xd={class:"d-flex flex-row justify-content-end"},Zd={key:0},eu={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},tu={class:"nav-item",role:"presentation"},su={class:"nav-item",role:"presentation"},ou={class:"nav-item",role:"presentation"},au={class:"nav-item",role:"presentation"},lu={class:"nav-item",role:"presentation"},nu={class:"tab-content",id:"myTabContent"},ru={class:"mt-2"},iu={class:"col"},du={class:"form-floating mb-2"},uu={key:0,class:"table-responsive border mt-2"},cu={class:"table mb-0"},mu={class:"row"},fu={class:"col-sm-9"},pu={key:0,class:"fas fa-fw fa-check-circle text-success"},vu={class:"col-sm-9"},gu={class:"col-sm-9"},bu={class:"text-break border p-2"},yu={class:"col-sm-3"},$u={class:"d-flex flex-row justify-content-between"},wu=["href"],hu={class:"col-sm-9"},ku={class:"text-break border p-2"},_u=["href"],Su={class:"col-sm-3"},Tu={class:"d-flex flex-row justify-content-between"},Mu=["href"],Cu={class:"col-sm-9"},Iu={class:"text-break border p-2"},xu={class:"d-flex flex-row"},Pu=["onClick"],Vu=["onClick"],Uu=["onClick"],Ou={class:"mt-2"},Au={class:"row row-cols-sm-2"},Du={class:"col"},Hu={class:"form-floating mb-2"},Eu={class:"col"},Lu={class:"form-floating mb-2"},Bu={class:"row row-cols-sm-2"},qu={class:"col"},Nu={class:"form-floating mb-2"},Ru={class:"col"},zu={class:"input-group mb-2"},Fu={class:"form-floating"},ju=["href"],Gu={class:"row row-cols-sm-2"},Yu={class:"col"},Wu={class:"form-floating mb-2"},Ku={class:"col"},Ju={class:"input-group mb-2"},Qu={class:"form-floating"},Xu=["href"],Zu={class:"row row-cols-sm-2"},ec={class:"col"},tc={class:"form-floating mb-2"},sc={class:"col"},oc={class:"input-group mb-2"},ac={class:"form-floating"},lc={class:"mt-2"},nc={class:"mt-2 text-end"},rc={class:"table-responsive border mt-2"},ic={class:"table table-hover mb-0 caption-top"},dc={class:"text-end"},uc=["onClick"],cc={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ae(null);const x=ae();ne(async()=>{await P(),c.value=F.getPageTab("vodSource")||"information-tab"});const n=H=>{F.setPageTab("vodSource",H),c.value=H},O=H=>H!==c.value?"":"active",a=H=>H!==c.value?"":"show active",P=async()=>{const H=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const l=`/api/v1/vodsources/${u.id}/`;await J.get(l).then(A=>{H.item=A.data;const le=H.item,X=F.moment.utc(H.item.video.durationInMillis).format("HH:mm:ss");le.video.duration=X;const fe=le.video.hlsPath,ke=fe.substring(fe.lastIndexOf("/")+1)})}catch(l){_.value=F.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}},f=async()=>{await P()},r=()=>{x.value.open(u.id)},v=H=>{},m=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!y.value){_.value=null;try{y.value=!0,await J.post(`/api/v1/vodsources/${u.id}/publish/`).then(l=>{L.success("Publish VOD","VOD was published.",{async onClose(){}})}),y.value=!1,await f()}catch(l){_.value=F.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}}},g=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/vodsources/${u.id}/unpublish/`).then(l=>{L.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),y.value=!1,await f()}catch(l){_.value=F.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}}},p=async H=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!y.value){_.value=null;try{y.value=!0,await J.post(`/api/v1/playbackconfigurations/${H}/vodsource/publish/`).then(A=>{L.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),y.value=!1,await f()}catch(A){_.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},G=async H=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${H}/vodsource/unpublish/`).then(A=>{L.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await f()}catch(A){_.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},V=async H=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/vodSources/package-configurations/${H}/`).then(A=>{L.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),y.value=!1,await f()}catch(A){_.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},se=async H=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${H}/vodsource/`).then(A=>{L.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await f()}catch(A){_.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}};return(H,l)=>{const A=Q("PageHeader"),le=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(A,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Xd,[i.item?(t(),s(q,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:l[0]||(l[0]=X=>g()),class:"ms-1 btn btn-danger"},l[21]||(l[21]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:l[1]||(l[1]=X=>m()),class:"ms-1 btn btn-primary"},l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:l[2]||(l[2]=X=>f()),class:"ms-2 btn btn-secondary"},l[23]||(l[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[3]||(l[3]=X=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},l[24]||(l[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(le,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",Zd,[e("div",null,[e("ul",eu,[e("li",tu,[e("button",{onClick:l[4]||(l[4]=X=>n("information-tab")),class:oe([O("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",su,[e("button",{onClick:l[5]||(l[5]=X=>n("packageConfigurations-tab")),class:oe([O("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",ou,[e("button",{onClick:l[6]||(l[6]=X=>n("channels-tab")),class:oe([O("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"}," Channels ",2)]),e("li",au,[e("button",{onClick:l[7]||(l[7]=X=>n("programs-tab")),class:oe([O("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)]),e("li",lu,[e("button",{onClick:l[8]||(l[8]=X=>n("programTemplates-tab")),class:oe([O("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"}," Program Templates ",2)])]),e("div",nu,[e("div",{class:oe([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ru,[e("div",iu,[e("div",du,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=X=>i.item.name=X),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),l[25]||(l[25]=e("label",{for:"name"},"Name",-1))])]),i.item.playbackConfigurations?(t(),s("div",uu,[l[38]||(l[38]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),e("table",cu,[l[37]||(l[37]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.playbackConfigurations,(X,fe)=>(t(),s("tr",{key:X.playbackConfigurationId},[e("td",null,b(fe+1),1),e("td",null,[e("dl",mu,[l[31]||(l[31]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",fu,[X.arn?(t(),s("span",pu)):C("",!0),B(b(X.name),1)]),l[32]||(l[32]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",vu,b(X.videoContentSourceUrl),1),l[33]||(l[33]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",gu,[e("div",bu,b(X.adDecisionServerUrl),1)]),i.item.video.dashPath&&X.dashConfigurationManifestEndpointPrefix?(t(),s(q,{key:0},[e("dt",yu,[e("div",$u,[l[27]||(l[27]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},l[26]||(l[26]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),B("View DASH ")]),8,wu)])])]),e("dd",hu,[e("div",ku,b(X.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},l[28]||(l[28]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),B("View DASH ")]),8,_u)])])],64)):C("",!0),i.item.video.hlsPath&&X.hlsConfigurationManifestEndpointPrefix?(t(),s(q,{key:1},[e("dt",Su,[e("div",Tu,[l[30]||(l[30]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},l[29]||(l[29]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),B("View ")]),8,Mu)])])]),e("dd",Cu,[e("div",Iu,b(X.hlsConfigurationManifestEndpointPrefix),1)])],64)):C("",!0)])]),e("td",null,[e("div",xu,[X.arn?(t(),s("button",{key:0,onClick:ke=>G(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},l[34]||(l[34]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,Pu)):(t(),s("button",{key:1,onClick:ke=>p(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},l[35]||(l[35]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Vu)),X.arn?C("",!0):(t(),s("button",{key:2,onClick:ke=>se(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},l[36]||(l[36]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Uu))])])]))),128))]),_:1},512),[[he,i.item.playbackConfigurations.length>0]])])])):C("",!0),e("div",Ou,[l[50]||(l[50]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Au,[e("div",Du,[e("div",Hu,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=X=>i.item.video.title=X),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[N,i.item.video.title]]),l[39]||(l[39]=e("label",{for:"title"},"Title",-1))])]),e("div",Eu,[e("div",Lu,[I(e("input",{"onUpdate:modelValue":l[11]||(l[11]=X=>i.item.video.duration=X),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[N,i.item.video.duration]]),l[40]||(l[40]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Bu,[e("div",qu,[e("div",Nu,[I(e("input",{"onUpdate:modelValue":l[12]||(l[12]=X=>i.item.video.rawBaseUrl=X),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[N,i.item.video.rawBaseUrl]]),l[41]||(l[41]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Ru,[e("div",zu,[e("div",Fu,[I(e("input",{"onUpdate:modelValue":l[13]||(l[13]=X=>i.item.video.rawPath=X),class:"form-control",id:"rawPath",disabled:""},null,512),[[N,i.item.video.rawPath]]),l[42]||(l[42]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.video.rawBaseUrl+i.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},l[43]||(l[43]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),B("View ")],-1)]),8,ju)])])]),e("div",Gu,[e("div",Yu,[e("div",Wu,[I(e("input",{"onUpdate:modelValue":l[14]||(l[14]=X=>i.item.video.hlsBaseUrl=X),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[N,i.item.video.hlsBaseUrl]]),l[44]||(l[44]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Ku,[e("div",Ju,[e("div",Qu,[I(e("input",{"onUpdate:modelValue":l[15]||(l[15]=X=>i.item.video.hlsPath=X),class:"form-control",id:"hlsPath",disabled:""},null,512),[[N,i.item.video.hlsPath]]),l[45]||(l[45]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.video.hlsBaseUrl+i.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},l[46]||(l[46]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),B("View ")],-1)]),8,Xu)])])]),e("div",Zu,[e("div",ec,[e("div",tc,[I(e("input",{"onUpdate:modelValue":l[16]||(l[16]=X=>i.item.video.dashBaseUrl=X),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[N,i.item.video.dashBaseUrl]]),l[47]||(l[47]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",sc,[e("div",oc,[e("div",ac,[I(e("input",{"onUpdate:modelValue":l[17]||(l[17]=X=>i.item.video.dashPath=X),class:"form-control",id:"dashPath",disabled:""},null,512),[[N,i.item.video.dashPath]]),l[48]||(l[48]=e("label",{for:"dashPath"},"DASH Path",-1))]),i.item.video.dashPath?(t(),s("button",{key:0,onClick:l[18]||(l[18]=X=>v()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},l[49]||(l[49]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Playback Configuration ")]))):C("",!0)])])])])])])],2),e("div",{class:oe([a("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",lc,[e("div",nc,[e("button",{onClick:l[19]||(l[19]=X=>r()),class:"btn btn-primary"},l[51]||(l[51]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Add ")]))]),e("div",rc,[e("table",ic,[l[53]||(l[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.packageConfigurations,(X,fe)=>(t(),s("tr",{key:X.packageConfigurationId},[e("td",null,b(fe+1),1),e("td",null,b(X.path),1),e("td",null,b(X.sourceGroup.name),1),e("td",null,b(X.type),1),e("td",dc,[e("button",{onClick:ke=>V(X.packageConfigurationId),class:"btn btn-outline-warning"},l[52]||(l[52]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,uc)])]))),128))]),_:1},512),[[he,i.item.packageConfigurations.length>0]])])])])],2),e("div",{class:oe([a("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},l[54]||(l[54]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:oe([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},l[55]||(l[55]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:oe([a("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},l[56]||(l[56]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):C("",!0)]),_:1},8,["errorMessage"]),D(Cd,{ref_key:"modalAddPackageConfiguration",ref:x,onRefresh:f},null,512),D(Qd,{ref:"modalAddPlaybackConfiguration",onRefresh:l[20]||(l[20]=X=>f())},null,512)])]),_:1})}}},mc={class:"d-flex justify-content-end"},fc=["disabled"],pc={class:"container"},vc={class:"row row-cols-1"},gc={class:"col"},bc={class:"form-floating mb-2"},yc={key:0,class:"d-block invalid-feedback"},$c={class:"row row-cols-sm-2"},wc={class:"col"},hc={class:"form-floating mb-2"},kc=["value"],_c={key:0,class:"d-block invalid-feedback"},Sc={class:"col"},Tc={class:"form-floating mb-2"},Mc=["disabled"],Cc=["value"],Ic={key:0,class:"d-block invalid-feedback"},xc={key:0,class:"row row-cols-1 row-cols-sm-2"},Pc={class:"col"},Vc={class:"form-floating"},Uc={key:0},Oc={key:1},Ac={key:2},Dc={key:3,class:"d-block invalid-feedback"},Hc={class:"col"},Ec={class:"form-floating"},Lc={key:0},Bc={key:1},qc={key:2,class:"d-block invalid-feedback"},Nc={key:1,class:"mt-3"},Rc={class:"table-responsive border mt-1"},zc={class:"table table-borderless table-sm mb-0"},Fc=["onUpdate:modelValue","onChange"],jc={key:0},Gc=["onUpdate:modelValue","onChange"],Yc={class:"text-end"},Wc=["onClick"],Kc={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),L=d,$=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),M={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},h=ye(M,$),W=Oe(()=>{const g=_.moment;if($.startOffsetTime&&$.startOffsetTime!=="00:00:00"&&i($.startOffsetTime)){const p=g().startOf("day"),G=p.format("YYYY-MM-DD ")+$.startOffsetTime,se=g(G).subtract(p);return $.item.startOffsetMillis=se.valueOf(),$.item.startOffsetMillis}return 0}),K=Oe(()=>{const g=_.moment;if($.endOffsetTime&&$.endOffsetTime!=="00:00:00"&&i($.endOffsetTime)){const p=g().startOf("day"),G=p.format("YYYY-MM-DD ")+$.endOffsetTime,se=g(G).subtract(p);return $.item.endOffsetMillis=se.valueOf(),$.item.endOffsetMillis}return 0}),i=g=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(g);ne(async()=>{await c()});const c=async()=>{await x(),await a()},x=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(p=>{$.lookups.sourceLocations=p.data,$.item.sourceLocationId=$.lookups.sourceLocations[0].id}),$.item.sourceLocationId&&await n($.item.sourceLocationId)}catch(g){S.value=_.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},n=async g=>{try{const p=`/api/v1/vodSources/lookup/source-location/${g}/`;await R.get(p).then(G=>{$.lookups.vodSources=G.data})}catch(p){S.value=_.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},O=async()=>{const g=$.selected.vodSource;$.item.vodSourceId=g.id,$.endOffsetTime=_.moment.utc(g.durationInMillis).format("HH:mm:ss")},a=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(p=>{$.lookups.adBreakSourceLocations=p.data})}catch(g){S.value=_.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},P=()=>{const g={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};$.item.adBreaks.push(g)},f=g=>{$.item.adBreaks.splice(g,1)},r=g=>{const p=_.moment,G=p().startOf("day"),V=G.format("YYYY-MM-DD ")+g.offsetTime,H=p(V).subtract(G);g.offsetMillis=H.valueOf()},v=g=>{const p=_.moment,G=p().startOf("day"),V=G.format("YYYY-MM-DD ")+g.durationTime,H=p(V).subtract(G);g.durationInMillis=H.valueOf()},m=async()=>{const g=$;if(k.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const G=_.clone(g.item);debugger;await R.post("/api/v1/programtemplates/",G).then(V=>{E.success("Add Program Template","Program template added.",{onClose:async()=>{const se=`${L.urlView}/${V.data}`;await Y.push(se)}})})}catch(G){S.value=_.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{k.value=!1}};return(g,p)=>{const G=Q("router-link"),V=Q("PageHeader"),se=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(V,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",mc,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:p[0]||(p[0]=H=>m()),class:"btn btn-primary"},p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fc),D(G,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>p[9]||(p[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(se,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",pc,[e("div",vc,[e("div",gc,[e("div",bc,[I(e("input",{"onUpdate:modelValue":p[1]||(p[1]=H=>$.item.name=H),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,$.item.name]]),p[10]||(p[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",yc,[(t(!0),s(q,null,j(o(h).item.name.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])])]),e("div",$c,[e("div",wc,[e("div",hc,[I(e("select",{"onUpdate:modelValue":p[2]||(p[2]=H=>$.item.sourceLocationId=H),onChange:p[3]||(p[3]=H=>n($.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j($.lookups.sourceLocations,H=>(t(),s("option",{value:H.id},b(H.name),9,kc))),256))],544),[[pe,$.item.sourceLocationId]]),p[11]||(p[11]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.sourceLocationId.$error?(t(),s("div",_c,[(t(!0),s(q,null,j(o(h).item.sourceLocationId.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])]),e("div",Sc,[e("div",Tc,[I(e("select",{"onUpdate:modelValue":p[4]||(p[4]=H=>$.selected.vodSource=H),onChange:p[5]||(p[5]=H=>O()),class:"form-select",id:"vodSourceId",disabled:$.item.adBreaks.length>0},[(t(!0),s(q,null,j($.lookups.vodSources,H=>(t(),s("option",{value:H},b(o(_).moment.utc(H.durationInMillis).format("HH:mm:ss"))+" - "+b(H.name),9,Cc))),256))],40,Mc),[[pe,$.selected.vodSource]]),p[12]||(p[12]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.vodSourceId.$error?(t(),s("div",Ic,[(t(!0),s(q,null,j(o(h).item.vodSourceId.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])])]),$.item.vodSourceId?(t(),s("div",xc,[e("div",Pc,[e("div",Vc,[I(e("input",{"onUpdate:modelValue":p[6]||(p[6]=H=>$.startOffsetTime=H),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[N,$.startOffsetTime]]),p[13]||(p[13]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Uc,p[14]||(p[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),W.value>K.value&&K.value>0?(t(),s("div",Oc,p[15]||(p[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):C("",!0),$.selected.vodSource&&W.value>=$.selected.vodSource.durationInMillis?(t(),s("div",Ac,p[16]||(p[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(h).item.startOffsetMillis.$error?(t(),s("div",Dc,[(t(!0),s(q,null,j(o(h).item.startOffsetMillis.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)]),e("div",Hc,[e("div",Ec,[I(e("input",{"onUpdate:modelValue":p[7]||(p[7]=H=>$.endOffsetTime=H),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[N,$.endOffsetTime]]),p[17]||(p[17]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Lc,p[18]||(p[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),$.selected.vodSource&&K.value>$.selected.vodSource.durationInMillis?(t(),s("div",Bc,p[19]||(p[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(h).item.endOffsetMillis.$error?(t(),s("div",qc,[(t(!0),s(q,null,j(o(h).item.endOffsetMillis.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):C("",!0)])])):C("",!0),$.item.vodSourceId?(t(),s("div",Nc,[e("div",{class:"d-flex flex-row justify-content-between"},[p[21]||(p[21]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:P,class:"btn btn-outline-primary"},p[20]||(p[20]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Ad Break ")]))]),e("div",Rc,[e("table",zc,[p[24]||(p[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j($.item.adBreaks,(H,l)=>(t(),s("tr",null,[e("td",null,b(l+1),1),e("td",null,[I(e("input",{"onUpdate:modelValue":A=>H.offsetTime=A,onChange:A=>r(H),type:"time",step:"1",class:"form-control"},null,40,Fc),[[N,H.offsetTime]]),H.offsetMillis>=$.selected.vodSource.durationInMillis?(t(),s("div",jc,p[22]||(p[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0)]),e("td",null,[I(e("input",{"onUpdate:modelValue":A=>H.durationTime=A,onChange:A=>v(H),type:"time",step:"1",class:"form-control"},null,40,Gc),[[N,H.durationTime]])]),e("td",Yc,[e("button",{onClick:A=>f(l),class:"btn btn-outline-warning"},p[23]||(p[23]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Wc)])]))),256))])]),p[25]||(p[25]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),B(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Jc={class:"d-flex justify-content-end"},Qc=["disabled"],Xc={class:"container"},Zc={class:"row row-cols-1"},em={class:"col"},tm={class:"form-floating mb-2"},sm={key:0,class:"d-block invalid-feedback"},om={class:"row row-cols-sm-2"},am={class:"col"},lm={class:"form-floating mb-2"},nm=["value"],rm={key:0,class:"d-block invalid-feedback"},im={class:"col"},dm={class:"form-floating mb-2"},um=["value"],cm={key:0,class:"d-block invalid-feedback"},mm={key:0,class:"row row-cols-1 row-cols-sm-2"},fm={class:"col"},pm={class:"form-floating"},vm={key:0},gm={key:1},bm={key:2},ym={key:3,class:"d-block invalid-feedback"},$m={class:"col"},wm={class:"form-floating"},hm={key:0},km={key:1},_m={key:2,class:"d-block invalid-feedback"},Sm={key:1,class:"mt-2"},Tm={class:"table-responsive border mt-1"},Mm={class:"table"},Cm=["onUpdate:modelValue","onChange"],Im={key:0},xm=["onUpdate:modelValue","onChange"],Pm=["onClick"],Vm={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,closeWithReturnUrl:F,security:L}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),$=d,M=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),h={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},W=ye(h,M),K=Oe(()=>{const G=_.moment;if(M.startOffsetTime&&M.startOffsetTime!=="00:00:00"&&c(M.startOffsetTime)){const V=G().startOf("day"),se=V.format("YYYY-MM-DD ")+M.startOffsetTime,l=G(se).subtract(V);return M.item.startOffsetMillis=l.valueOf(),M.item.startOffsetMillis}return 0}),i=Oe(()=>{const G=_.moment;if(M.endOffsetTime&&M.endOffsetTime!=="00:00:00"&&c(M.endOffsetTime)){const V=G().startOf("day"),se=V.format("YYYY-MM-DD ")+M.endOffsetTime,l=G(se).subtract(V);return M.item.endOffsetMillis=l.valueOf(),M.item.endOffsetMillis}return 0}),c=G=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(G);ne(async()=>{await x()});const x=async()=>{await n(),await O()},n=async()=>{try{const G=`/api/v1/programtemplates/${$.id}/`;await R.get(G).then(V=>{M.item=V.data,M.startOffsetTime=_.moment.utc(M.item.startOffsetMillis).format("HH:mm:ss"),M.endOffsetTime=_.moment.utc(M.item.endOffsetMillis).format("HH:mm:ss"),M.item.adBreaks.forEach(se=>{se.offsetTime=_.moment.utc(se.offsetMillis).format("HH:mm:ss"),se.durationTime=_.moment.utc(se.durationInMillis).format("HH:mm:ss")})})}catch(G){S.value=_.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},O=async()=>{await a()},a=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(V=>{M.lookups.sourceLocations=V.data}),M.item.sourceLocationId&&await P(M.item.sourceLocationId)}catch(G){S.value=_.getErrorMessageAsHtml(G),window.scrollTo(0,0)}finally{}},P=async G=>{try{const V=`/api/v1/vodSources/lookup/source-location/${G}/`;await R.get(V).then(H=>{M.lookups.vodSources=H.data});const se=M.lookups.vodSources.find(H=>H.id==M.item.vodSourceId);M.selected.vodSource=se,await f()}catch(V){S.value=_.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{}},f=async()=>{const G=M.selected.vodSource;M.item.vodSourceId=G.id,M.endOffsetTime=_.moment.utc(G.durationInMillis).format("HH:mm:ss")},r=()=>{const G={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};M.item.adBreaks.push(G)},v=G=>{M.item.adBreaks.splice(G,1)},m=G=>{const V=_.moment,se=V().startOf("day"),H=se.format("YYYY-MM-DD ")+G.offsetTime,A=V(H).subtract(se);G.offsetMillis=A.valueOf()},g=G=>{const V=_.moment,se=V().startOf("day"),H=se.format("YYYY-MM-DD ")+G.durationTime,A=V(H).subtract(se);G.durationInMillis=A.valueOf()},p=async()=>{const G=M;if(k.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const se=_.clone(G.item);debugger;se.startOffsetMillis=K.value,se.endOffsetMillis=i.value,await R.put("/api/v1/programtemplates/",se).then(H=>{E.success("Edit Program Template","Program template edit.",{onClose:async()=>{const l=`${$.urlView}/${$.id}`;await Y.push(l)}})})}catch(se){S.value=_.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{k.value=!1}};return(G,V)=>{const se=Q("PageHeader"),H=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Jc,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:V[0]||(V[0]=l=>p()),class:"btn btn-primary"},V[10]||(V[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qc),e("button",{onClick:V[1]||(V[1]=l=>x()),class:"btn btn-secondary ms-2"},V[11]||(V[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:V[2]||(V[2]=l=>o(F)($.urlMain)),class:"btn btn-secondary ms-1"},V[12]||(V[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(H,{errorMessage:o(S),vuelidate:o(W)},{default:U(()=>[e("div",null,[e("div",Xc,[e("div",Zc,[e("div",em,[e("div",tm,[I(e("input",{"onUpdate:modelValue":V[3]||(V[3]=l=>M.item.name=l),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,M.item.name]]),V[13]||(V[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",sm,[(t(!0),s(q,null,j(o(W).item.name.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])])]),e("div",om,[e("div",am,[e("div",lm,[I(e("select",{"onUpdate:modelValue":V[4]||(V[4]=l=>M.item.sourceLocationId=l),onChange:V[5]||(V[5]=l=>P(M.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j(M.lookups.sourceLocations,l=>(t(),s("option",{value:l.id},b(l.name),9,nm))),256))],544),[[pe,M.item.sourceLocationId]]),V[14]||(V[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",rm,[(t(!0),s(q,null,j(o(W).item.sourceLocationId.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])]),e("div",im,[e("div",dm,[I(e("select",{"onUpdate:modelValue":V[6]||(V[6]=l=>M.selected.vodSource=l),onChange:V[7]||(V[7]=l=>f()),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,j(M.lookups.vodSources,l=>(t(),s("option",{value:l},b(o(_).moment.utc(l.durationInMillis).format("HH:mm:ss"))+" - "+b(l.name),9,um))),256))],544),[[pe,M.selected.vodSource]]),V[15]||(V[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",cm,[(t(!0),s(q,null,j(o(W).item.vodSourceId.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])])]),M.item.vodSourceId?(t(),s("div",mm,[e("div",fm,[B(" ["+b(K.value)+"] x ["+b(M.startOffsetMillis)+"] ",1),e("div",pm,[I(e("input",{"onUpdate:modelValue":V[8]||(V[8]=l=>M.startOffsetTime=l),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[N,M.startOffsetTime]]),V[16]||(V[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",vm,V[17]||(V[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),K.value>i.value&&i.value>0?(t(),s("div",gm,V[18]||(V[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):C("",!0),M.selected.vodSource&&K.value>=M.selected.vodSource.durationInMillis?(t(),s("div",bm,V[19]||(V[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",ym,[(t(!0),s(q,null,j(o(W).item.startOffsetMillis.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)]),e("div",$m,[e("div",wm,[I(e("input",{"onUpdate:modelValue":V[9]||(V[9]=l=>M.endOffsetTime=l),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[N,M.endOffsetTime]]),V[20]||(V[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),i.value>0&&i.value<3e4?(t(),s("div",hm,V[21]||(V[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),M.selected.vodSource&&i.value>M.selected.vodSource.durationInMillis?(t(),s("div",km,V[22]||(V[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",_m,[(t(!0),s(q,null,j(o(W).item.endOffsetMillis.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):C("",!0)])])):C("",!0),M.selected.vodSource?(t(),s("div",Sm,[e("div",{class:"d-flex flex-row justify-content-between"},[V[24]||(V[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:r,class:"btn btn-outline-primary"},V[23]||(V[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Ad Break ")]))]),e("div",Tm,[e("table",Mm,[V[28]||(V[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(M.item.adBreaks,(l,A)=>(t(),s("tr",null,[e("td",null,b(A+1),1),e("td",null,[I(e("input",{"onUpdate:modelValue":le=>l.offsetTime=le,onChange:le=>m(l),type:"time",step:"1",class:"form-control"},null,40,Cm),[[N,l.offsetTime]]),l.offsetMillis>=M.selected.vodSource.durationInMillis?(t(),s("div",Im,V[25]||(V[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0)]),e("td",null,[I(e("input",{"onUpdate:modelValue":le=>l.durationTime=le,onChange:le=>g(l),type:"time",step:"1",class:"form-control"},null,40,xm),[[N,l.durationTime]])]),V[27]||(V[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),B(" Source Location and Vod source will be defined in Program Instance. "),e("br"),B(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:le=>v(A),class:"btn btn-outline-warning"},V[26]||(V[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Pm)])]))),256))])])])])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Um={class:"d-flex justify-content-end"},Om={class:"ms-1"},Am={class:"input-group"},Dm={class:"table-responsive"},Hm={class:"table table-hover mb-0"},Em=["textContent"],Lm={key:0,class:"fas fa-fw fa-check-circle text-success"},Bm={class:"text-end"},qm={class:"border-top"},Nm="/api/v1/programTemplates/search",Rm={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${w==null?void 0:w.userId}/program-templates/search`,baseUrl:Nm,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:U(()=>[e("div",Um,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Om,[e("div",Am,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Dm,[e("table",Hm,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Em),e("td",null,[D(P,{to:`${d.urlView}/${m.programTemplateId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",Lm)):C("",!0),B(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",Bm,b(o(J).moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[B(b(m.sourceLocation.name)+" ",1),e("div",qm,b(m.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,b(m.vodSource.name),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},zm={class:"d-flex flex-row justify-content-end"},Fm={key:0},jm={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Gm={class:"nav-item",role:"presentation"},Ym={class:"nav-item",role:"presentation"},Wm={class:"nav-item",role:"presentation"},Km={class:"tab-content",id:"myTabContent"},Jm={class:"mt-2"},Qm={class:"row row-cols-1 row-cols-sm-3"},Xm={class:"col"},Zm={class:"form-floating mb-2"},ef={class:"col"},tf={class:"form-floating mb-2"},sf={class:"col"},of={class:"form-floating mb-2"},af={class:"row row-cols-1 row-cols-sm-3"},lf={class:"col"},nf={class:"form-floating mb-2"},rf={class:"col"},df={class:"form-floating mb-2"},uf={class:"col"},cf={class:"form-floating mb-2"},mf={class:"row row-cols-1 row-cols-sm-2"},ff={class:"col-sm-4"},pf={class:"form-floating mb-2"},vf={class:"col-sm-8"},gf={class:"form-floating mb-2"},bf={class:""},yf={class:"col"},$f={class:"form-floating mb-2"},wf={class:"row row-cols-1 row-cols-sm-2"},hf={class:"col"},kf={class:"form-floating mb-2"},_f={class:"col"},Sf={class:"form-floating mb-2"},Tf={class:"row row-cols-1 row-cols-sm-2"},Mf={class:"col"},Cf={class:"form-floating mb-2"},If={class:"col"},xf={class:"form-floating mb-2"},Pf={class:"row row-cols-1 row-cols-sm-2"},Vf={class:"col"},Uf={class:"form-floating mb-2"},Of={class:"col"},Af={class:"form-floating mb-2"},Df={class:"row row-cols-1 row-cols-sm-2"},Hf={class:"col"},Ef={class:"form-floating mb-2"},Lf={class:"col"},Bf={class:"form-floating mb-2"},qf={class:"mt-2"},Nf={class:"table-responsive"},Rf={class:"table table-hover mb-0"},zf={class:"text-center"},Ff={class:"mt-2"},jf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ne(async()=>{await a(),c.value=F.getPageTab("programTemplate")||"information-tab"});const x=f=>{F.setPageTab("programTemplate",f),c.value=f},n=f=>f!==c.value?"":"active",O=f=>f!==c.value?"":"show active",a=async()=>{const f=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const r=`/api/v1/programTemplates/${u.id}/`;await J.get(r).then(v=>{f.item=v.data;const m=f.item;m.startOffsetTime=F.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=F.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=F.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=F.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=F.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const g=m.vodSource.video,p=g.durationInMillis;g.durationInMillis=F.moment.utc(p).format("HH:mm:ss")})}catch(r){_.value=F.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()};return(f,r)=>{const v=Q("router-link"),m=Q("PageHeader"),g=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",zm,[D(v,{to:`${d.urlEdit}/${d.id}/${o(h)()}`,class:"ms-2 btn btn-primary"},{default:U(()=>r[22]||(r[22]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:r[0]||(r[0]=p=>P()),class:"ms-2 btn btn-secondary"},r[23]||(r[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[1]||(r[1]=p=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},r[24]||(r[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",Fm,[e("div",null,[e("ul",jm,[e("li",Gm,[e("button",{onClick:r[2]||(r[2]=p=>x("information-tab")),class:oe([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ym,[e("button",{onClick:r[3]||(r[3]=p=>x("adBreaks-tab")),class:oe([n("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Wm,[e("button",{onClick:r[4]||(r[4]=p=>x("programs-tab")),class:oe([n("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Km,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Jm,[e("div",Qm,[e("div",Xm,[e("div",Zm,[I(e("input",{"onUpdate:modelValue":r[5]||(r[5]=p=>i.item.name=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),r[25]||(r[25]=e("label",{for:"name"},"Name",-1))])]),e("div",ef,[e("div",tf,[I(e("input",{"onUpdate:modelValue":r[6]||(r[6]=p=>i.item.startOffsetTime=p),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[N,i.item.startOffsetTime]]),r[26]||(r[26]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",sf,[e("div",of,[I(e("input",{"onUpdate:modelValue":r[7]||(r[7]=p=>i.item.endOffsetTime=p),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[N,i.item.endOffsetTime]]),r[27]||(r[27]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),e("div",af,[e("div",lf,[e("div",nf,[I(e("input",{"onUpdate:modelValue":r[8]||(r[8]=p=>i.item.durationTime=p),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[N,i.item.durationTime]]),r[28]||(r[28]=e("label",{for:"durationTime"},"Clip Duration",-1))])]),e("div",rf,[e("div",df,[I(e("input",{"onUpdate:modelValue":r[9]||(r[9]=p=>i.item.adBreaksDurationTime=p),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[N,i.item.adBreaksDurationTime]]),r[29]||(r[29]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",uf,[e("div",cf,[I(e("input",{"onUpdate:modelValue":r[10]||(r[10]=p=>i.item.totalProgramTemplateDurationTime=p),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[N,i.item.totalProgramTemplateDurationTime]]),r[30]||(r[30]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),r[45]||(r[45]=e("hr",null,null,-1)),e("div",null,[r[33]||(r[33]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",mf,[e("div",ff,[e("div",pf,[I(e("input",{"onUpdate:modelValue":r[11]||(r[11]=p=>i.item.sourceLocation.name=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.sourceLocation.name]]),r[31]||(r[31]=e("label",{for:"name"},"Name",-1))])]),e("div",vf,[e("div",gf,[I(e("input",{"onUpdate:modelValue":r[12]||(r[12]=p=>i.item.sourceLocation.httpConfigurationBaseUrl=p),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[N,i.item.sourceLocation.httpConfigurationBaseUrl]]),r[32]||(r[32]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),r[46]||(r[46]=e("hr",null,null,-1)),e("div",null,[r[43]||(r[43]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",bf,[e("div",yf,[e("div",$f,[I(e("input",{"onUpdate:modelValue":r[13]||(r[13]=p=>i.item.vodSource.name=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.name]]),r[34]||(r[34]=e("label",{for:"name"},"VOD Name",-1))])])]),r[44]||(r[44]=e("div",null,[e("h6",null,"Video")],-1)),e("div",wf,[e("div",hf,[e("div",kf,[I(e("input",{"onUpdate:modelValue":r[14]||(r[14]=p=>i.item.vodSource.video.title=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.title]]),r[35]||(r[35]=e("label",{for:"name"},"Video Name",-1))])]),e("div",_f,[e("div",Sf,[I(e("input",{"onUpdate:modelValue":r[15]||(r[15]=p=>i.item.vodSource.video.durationInMillis=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.durationInMillis]]),r[36]||(r[36]=e("label",{for:"name"},"Video Duration",-1))])])]),e("div",Tf,[e("div",Mf,[e("div",Cf,[I(e("input",{"onUpdate:modelValue":r[16]||(r[16]=p=>i.item.vodSource.video.rawBaseUrl=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.rawBaseUrl]]),r[37]||(r[37]=e("label",{for:"name"},"Raw Base Url",-1))])]),e("div",If,[e("div",xf,[I(e("input",{"onUpdate:modelValue":r[17]||(r[17]=p=>i.item.vodSource.video.rawPath=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.rawPath]]),r[38]||(r[38]=e("label",{for:"name"},"Raw Path",-1))])])]),e("div",Pf,[e("div",Vf,[e("div",Uf,[I(e("input",{"onUpdate:modelValue":r[18]||(r[18]=p=>i.item.vodSource.video.hlsBaseUrl=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.hlsBaseUrl]]),r[39]||(r[39]=e("label",{for:"name"},"HLS Base Url",-1))])]),e("div",Of,[e("div",Af,[I(e("input",{"onUpdate:modelValue":r[19]||(r[19]=p=>i.item.vodSource.video.hlsPath=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.hlsPath]]),r[40]||(r[40]=e("label",{for:"name"},"HLS Path",-1))])])]),e("div",Df,[e("div",Hf,[e("div",Ef,[I(e("input",{"onUpdate:modelValue":r[20]||(r[20]=p=>i.item.vodSource.video.dashBaseUrl=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.dashBaseUrl]]),r[41]||(r[41]=e("label",{for:"name"},"DASH Base Url",-1))])]),e("div",Lf,[e("div",Bf,[I(e("input",{"onUpdate:modelValue":r[21]||(r[21]=p=>i.item.vodSource.video.dashPath=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.dashPath]]),r[42]||(r[42]=e("label",{for:"name"},"DASH Path",-1))])])])])])],2),e("div",{class:oe([O("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",qf,[e("div",Nf,[e("table",Rf,[r[47]||(r[47]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.adBreaks,(p,G)=>(t(),s("tr",{key:p.programTemplateAdBreakId},[e("td",zf,b(G+1),1),e("td",null,b(o(F).moment.utc(p.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(F).moment.utc(p.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[he,i.item.adBreaks.length>0]])])])])],2),e("div",{class:oe([O("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Ff,[e("pre",null,b(i.item.programs),1)])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Gf={class:"d-flex justify-content-end"},Yf=["disabled"],Wf={class:"row row-cols-1 row-cols-sm-3"},Kf={class:"col-sm-6"},Jf={class:"form-floating mb-2"},Qf={key:0,class:"d-block invalid-feedback"},Xf={class:"col-sm-3"},Zf={class:"form-floating mb-2"},ep={key:0,class:"d-block invalid-feedback"},tp={class:"col-sm-3"},sp={class:"form-floating mb-2"},op={key:0,class:"d-block invalid-feedback"},ap={class:"col"},lp={class:"form-floating mb-2"},np={key:0,class:"d-block invalid-feedback"},rp={class:"row row-cols-1 row-cols-sm-2"},ip={class:"col"},dp={class:"form-floating mb-2"},up=["value"],cp={key:0,class:"d-block invalid-feedback"},mp={class:"col"},fp={class:"form-floating mb-2"},pp=["value"],vp={key:0,class:"d-block invalid-feedback"},gp={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),L=d,$=ue({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),M={item:{name:{title:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},tier:{title:Z.withMessage("Tier is required.",ee),$autoDirty:!0,$lazy:!0},playbackMode:{title:Z.withMessage("PlaybackMode is required.",ee),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:Z.withMessage("Filler Slate Source Location is required.",ee),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:Z.withMessage("Filler Slate Vod Source is required.",ee),$autoDirty:!0,$lazy:!0},policy:{title:Z.withMessage("Policy is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(M,$);ne(async()=>{await W()});const W=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(O=>{$.lookups.sourceLocations=O.data,$.lookups.sourceLocations.length===1&&($.item.fillerSlateSourceLocationId=$.lookups.sourceLocations[0].id)}),$.item.sourceLocationId&&await i($.item.fillerSlateSourceLocationId)}catch(n){S.value=_.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},K=async()=>{$.item.fillerSlateVodSourceId=null,await i($.item.fillerSlateSourceLocationId)},i=async n=>{try{let O=`/api/v1/vodSources/lookup/source-location/${n}`;await R.get(O).then(a=>{$.lookups.vodSources=a.data})}catch(O){S.value=_.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},c=()=>{if($.item.name){const n=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${$.item.name}"}]}`;$.item.policy=n}else $.item.policy=null},x=async()=>{const n=$;if(k.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{k.value=!0,S.value="";const a=_.clone(n.item);await R.post("/api/v1/channels/",a).then(P=>{E.success("Add Channel","Channel added.",{onClose:async()=>{const f=`${L.urlView}/${P.data}`;await Y.push(f)}})})}catch(a){S.value=_.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}};return(n,O)=>{const a=Q("router-link"),P=Q("PageHeader"),f=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(P,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Gf,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:O[0]||(O[0]=r=>x()),class:"btn btn-primary"},O[9]||(O[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yf),D(a,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>O[10]||(O[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(f,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Wf,[e("div",Kf,[e("div",Jf,[I(e("input",{"onUpdate:modelValue":O[1]||(O[1]=r=>$.item.name=r),onChange:O[2]||(O[2]=r=>c()),id:"name",class:"form-control",placeholder:"name"},null,544),[[N,$.item.name]]),O[11]||(O[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Qf,[(t(!0),s(q,null,j(o(h).item.name.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),e("div",Xf,[e("div",Zf,[I(e("input",{"onUpdate:modelValue":O[3]||(O[3]=r=>$.item.tier=r),id:"tier",class:"form-control",placeholder:"tier",disabled:""},null,512),[[N,$.item.tier]]),O[12]||(O[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(h).item.tier.$error?(t(),s("div",ep,[(t(!0),s(q,null,j(o(h).item.tier.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),e("div",tp,[e("div",sp,[I(e("input",{"onUpdate:modelValue":O[4]||(O[4]=r=>$.item.playbackMode=r),id:"playbackMode",class:"form-control",placeholder:"playbackMode",disabled:""},null,512),[[N,$.item.playbackMode]]),O[13]||(O[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(h).item.playbackMode.$error?(t(),s("div",op,[(t(!0),s(q,null,j(o(h).item.playbackMode.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])])]),e("div",ap,[e("div",lp,[I(e("textarea",{"onUpdate:modelValue":O[5]||(O[5]=r=>$.item.policy=r),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[N,$.item.policy]]),O[14]||(O[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o(h).item.policy.$error?(t(),s("div",np,[(t(!0),s(q,null,j(o(h).item.policy.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),O[17]||(O[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",rp,[e("div",ip,[e("div",dp,[I(e("select",{"onUpdate:modelValue":O[6]||(O[6]=r=>$.item.fillerSlateSourceLocationId=r),onChange:O[7]||(O[7]=r=>K()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(q,null,j($.lookups.sourceLocations,r=>(t(),s("option",{value:r.id},b(r.name),9,up))),256))],544),[[pe,$.item.fillerSlateSourceLocationId]]),O[15]||(O[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.fillerSlateSourceLocationId.$error?(t(),s("div",cp,[(t(!0),s(q,null,j(o(h).item.fillerSlateSourceLocationId.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])]),e("div",mp,[e("div",fp,[I(e("select",{"onUpdate:modelValue":O[8]||(O[8]=r=>$.item.fillerSlateVodSourceId=r),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(q,null,j($.lookups.vodSources,r=>(t(),s("option",{value:r.id},b(r.name),9,pp))),256))],512),[[pe,$.item.fillerSlateVodSourceId]]),O[16]||(O[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.fillerSlateVodSourceId.$error?(t(),s("div",vp,[(t(!0),s(q,null,j(o(h).item.fillerSlateVodSourceId.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):C("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},bp={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function yp(d,u,w,k,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const $p=_e(bp,[["render",yp]]),wp={class:"d-flex justify-content-end"},hp={class:"ms-1"},kp={class:"input-group"},_p={class:"table-responsive"},Sp={class:"table table-hover mb-0"},Tp=["textContent"],Mp="/api/v1/channels/search",Cp={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(d){be("$config");const w=ve().user,{appTitle:k,pageTitle:y,busy:z,infoMessage:S,warningMessage:Y,errorMessage:R,router:_,axios:E,utils:J,toasts:F,close:L,security:$,filter:M,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:x,isSelected:n}=Ue({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${w==null?void 0:w.userId}/Channels/search`,baseUrl:Mp,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const P=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(y)},{default:U(()=>[e("div",wp,[D(P,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",hp,[e("div",kp,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(M).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(M).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",_p,[e("table",Sp,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(M).items,(m,g)=>(t(),s("tr",{key:m.channelId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Tp),e("td",null,[D(P,{to:`${d.urlView}/${m.channelId}`,class:"d-inline-block text-truncate"},{default:U(()=>[B(b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.playbackMode),1),e("td",null,b(m.tier),1)]))),128))]),_:1},512),[[he,o(M).items.length>0]])])]),D(r,{filter:o(M),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ip=["id"],xp={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Pp={class:"modal-content"},Vp={class:"modal-header bg-primary text-white"},Up={class:"modal-title",id:"exampleModalLabel"},Op={class:"modal-body"},Ap={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Dp=["innerHTML"],Hp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ep={class:"container"},Lp={class:"col"},Bp={class:"form-floating mb-2"},qp=["value"],Np={class:"row row-cols-1 row-cols-sm-2"},Rp={class:"col"},zp={class:"form-floating mb-2"},Fp={key:0,class:"d-block invalid-feedback"},jp={class:"col"},Gp={class:"form-floating mb-2"},Yp={key:0,class:"d-block invalid-feedback"},Wp={key:0},Kp={class:"row row-cols-1 row-cols-sm-3"},Jp={class:"col"},Qp={class:"form-floating mb-2"},Xp={class:"col"},Zp={class:"form-floating mb-2"},ev={class:"col"},tv={class:"form-floating mb-2"},sv={class:"row row-cols-1 row-cols-sm-2"},ov={class:"col"},av={class:"form-floating mb-2"},lv={class:"col"},nv={class:"form-floating mb-2"},rv={class:"row row-cols-1 row-cols-sm-2"},iv={class:"col"},dv={class:"form-floating mb-2"},uv={class:"col"},cv={class:"form-floating mb-2"},mv={key:1},fv={class:"table-responsive border mt-1"},pv={class:"table mb-0"},vv=["onUpdate:modelValue"],gv=["value"],bv={class:"modal-footer"},yv=["disabled"],$v={__name:"_addProgramFromTemplate",emits:["onClose"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=w,K=ae(),i=ae("modalAddProgramFromTemplate"),c=ue({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);ne(async()=>{n.value.$reset()});const O=async(H,l,A)=>{K.value=H;const le=c;Y.value.clear(),E.value="";const X=L.moment(A),ke=X.format("YYYY-MM-DD HH:mm"),Me=X.format("YYYYMMDD_HHmm")+"_PRG_";le.eventId=l,le.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},le.selected={programTemplate:null},le.item={programTemplateId:null,name:Me,dateScheduledStart:ke,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),await r(),n.value.$reset();var Ce=document.getElementById(i.value),Ae=$e.getOrCreateInstance(Ce);Ae.show()},a=async H=>{const l=c.selected.channel.programs;if(H&&l.find(Ae=>Ae.name===c.item.name)){alert(`Program name = [${c.item.name}] already exists.`);return}if(!H){W("onClose",{eventId:c.eventId},H);var ke=document.getElementById(i.value),Me=$e.getOrCreateInstance(ke);Me.hide();return}const A=c,le=L.moment(A.item.dateScheduledStart).utc().format(),X=L.moment(A.item.dateScheduledStart).add(A.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),fe={eventId:A.eventId,programTemplateId:A.selected.programTemplate.programTemplateId,channelId:A.selected.channel.channelId,name:A.item.name,dateScheduledStart:le,dateScheduledEnd:X,adBreaks:A.selected.programTemplate.adBreaks.map(Ce=>({sourceLocationId:A.selected.programTemplate.sourceLocationId,vodSourceId:Ce.vodSourceId,offsetMillis:Ce.offsetMillis,durationInMillis:Ce.durationInMillis}))};W("onClose",fe,H);var ke=document.getElementById(i.value),Me=$e.getOrCreateInstance(ke);Me.hide()},P=async()=>{await a(!0)},f=async()=>{try{const H=`/api/v1/channels/${K.value}/`;await F.get(H).then(l=>{c.selected.channel=l.data})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},r=async()=>{await p(),await se(),await v()},v=async()=>{try{const H=`/api/v1/programTemplates/lookup/by-channel/${K.value}`;await F.get(H).then(l=>{c.lookups.programTemplates=l.data,c.lookups.programTemplates.length===1&&(c.item.programTemplateId=c.lookups.programTemplates[0].id)}),c.item.programTemplateId&&await m()}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},m=async()=>{await g(c.item.programTemplateId)},g=async H=>{try{const l=`/api/v1/programTemplates/${H}/`;await F.get(l).then(X=>{c.selected.programTemplate=X.data;const fe=c.selected.programTemplate;fe.startOffsetTime=L.moment.utc(fe.startOffsetMillis).format("HH:mm:ss"),fe.endOffsetTime=L.moment.utc(fe.endOffsetMillis).format("HH:mm:ss"),fe.durationTime=L.moment.utc(fe.durationInMillis).format("HH:mm:ss"),fe.adBreaksDurationTime=L.moment.utc(fe.adBreaksDurationInMillis).format("HH:mm:ss"),fe.totalProgramTemplateDurationTime=L.moment.utc(fe.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),fe.adBreaks.forEach(ke=>{ke.vodSourceId=null})});const A=c,le=A.selected.channel.outputs[0].outputType;await V(A.selected.programTemplate.sourceLocationId,le)}catch(l){E.value=L.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},p=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.sourceLocations=l.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await G(c.item.sourceLocationId)}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},G=async H=>{try{let l=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(l).then(A=>{c.lookups.vodSources=A.data})}catch(l){E.value=L.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},V=async(H,l)=>{try{let A=`/api/v1/vodsources/lookup/source-location/${H}/output-type/${l}`;await F.get(A).then(le=>{c.lookups.adBreakVodSources=le.data})}catch(A){E.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},se=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${K.value}`;await F.get(H).then(l=>{c.lookups.channelPrograms=l.data;const A=c.lookups.channelPrograms.length})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}};return u({open:O,close:a}),(H,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",xp,[e("div",Pp,[e("div",Vp,[e("h5",Up,b(o(k))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=A=>a(!1)),"aria-label":"Close"})]),e("div",Op,[o(E)?(t(),s("div",Ap,[l[14]||(l[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Dp)])):C("",!0),o(Y).size>0?(t(),s("div",Hp,[l[15]||(l[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),A=>(t(),s("li",null,b(A),1))),256))])])):C("",!0),e("div",Ep,[e("div",Lp,[e("div",Bp,[I(e("select",{"onUpdate:modelValue":l[1]||(l[1]=A=>c.item.programTemplateId=A),class:"form-select",onChange:l[2]||(l[2]=A=>m()),id:"sourceLocationId"},[(t(!0),s(q,null,j(c.lookups.programTemplates,A=>(t(),s("option",{value:A.id}," ["+b(o(L).moment.utc(A.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+b(A.name),9,qp))),256))],544),[[pe,c.item.programTemplateId]]),l[16]||(l[16]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Np,[e("div",Rp,[e("div",zp,[I(e("input",{"onUpdate:modelValue":l[3]||(l[3]=A=>c.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),l[17]||(l[17]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Fp,[(t(!0),s(q,null,j(o(n).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",jp,[e("div",Gp,[I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=A=>c.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[N,c.item.dateScheduledStart]]),l[18]||(l[18]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(n).item.dateScheduledStart.$error?(t(),s("div",Yp,[(t(!0),s(q,null,j(o(n).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])])]),c.selected.programTemplate?(t(),s("div",Wp,[e("div",Kp,[e("div",Jp,[e("div",Qp,[I(e("input",{"onUpdate:modelValue":l[5]||(l[5]=A=>c.selected.programTemplate.startOffsetTime=A),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[N,c.selected.programTemplate.startOffsetTime]]),l[19]||(l[19]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Xp,[e("div",Zp,[I(e("input",{"onUpdate:modelValue":l[6]||(l[6]=A=>c.selected.programTemplate.endOffsetTime=A),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[N,c.selected.programTemplate.endOffsetTime]]),l[20]||(l[20]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",ev,[e("div",tv,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=A=>c.selected.programTemplate.durationTime=A),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[N,c.selected.programTemplate.durationTime]]),l[21]||(l[21]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",sv,[e("div",ov,[e("div",av,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=A=>c.selected.programTemplate.adBreaksDurationTime=A),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[N,c.selected.programTemplate.adBreaksDurationTime]]),l[22]||(l[22]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",lv,[e("div",nv,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=A=>c.selected.programTemplate.totalProgramTemplateDurationTime=A),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[N,c.selected.programTemplate.totalProgramTemplateDurationTime]]),l[23]||(l[23]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",rv,[e("div",iv,[e("div",dv,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=A=>c.selected.programTemplate.sourceLocation.name=A),id:"name",class:"form-control",disabled:""},null,512),[[N,c.selected.programTemplate.sourceLocation.name]]),l[24]||(l[24]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",uv,[e("div",cv,[I(e("input",{"onUpdate:modelValue":l[11]||(l[11]=A=>c.selected.programTemplate.vodSource.name=A),id:"name",class:"form-control",disabled:""},null,512),[[N,c.selected.programTemplate.vodSource.name]]),l[25]||(l[25]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):C("",!0),l[28]||(l[28]=e("hr",null,null,-1)),c.selected.programTemplate?(t(),s("div",mv,[l[27]||(l[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",fv,[e("table",pv,[l[26]||(l[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(c.selected.programTemplate.adBreaks,(A,le)=>(t(),s("tr",null,[e("td",null,b(le+1),1),e("td",null,b(o(L).moment.utc(A.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(L).moment.utc(A.durationInMillis).format("HH:mm:ss")),1),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,j(c.lookups.adBreakVodSources,X=>(t(),s(q,null,[X.durationInMillis===A.durationInMillis?(t(),s("option",{key:0,value:X.id}," ["+b(o(L).moment.utc(X.durationInMillis).format("HH:mm:ss"))+"] "+b(X.name),9,gv)):C("",!0)],64))),256))],8,vv),[[pe,A.vodSourceId]])])]))),256))])])])])):C("",!0)])]),e("div",bv,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:l[12]||(l[12]=A=>P()),class:"btn btn-primary",type:"button"},l[29]||(l[29]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,yv),e("button",{onClick:l[13]||(l[13]=A=>a(!1)),class:"btn btn-secondary ms-1"},l[30]||(l[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Ip))}},wv=["id"],hv={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},kv={class:"modal-content"},_v={class:"modal-header bg-primary text-white"},Sv={class:"modal-title",id:"exampleModalLabel"},Tv={class:"modal-body"},Mv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cv=["innerHTML"],Iv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},xv={key:2,class:"container"},Pv={class:"row row-cols-1 row-cols-sm-3"},Vv={class:"col"},Uv={class:"form-floating mb-2"},Ov={id:"name",class:"form-control",placeholder:"Name"},Av={key:0,class:"text-wrap"},Dv={class:"badge bg-info"},Hv={key:0,class:"d-block invalid-feedback"},Ev={class:"col"},Lv={class:"form-floating mb-2"},Bv={key:0,class:"d-block invalid-feedback"},qv={class:"col"},Nv={class:"form-floating mb-2"},Rv={key:0,class:"d-block invalid-feedback"},zv={key:0},Fv={class:"row row-cols-1 row-cols-sm-3"},jv={class:"col"},Gv={class:"form-floating mb-2"},Yv={class:"col"},Wv={class:"form-floating mb-2"},Kv={class:"col"},Jv={class:"form-floating mb-2"},Qv={class:"row row-cols-1 row-cols-sm-2"},Xv={class:"col"},Zv={class:"form-floating mb-2"},eg={class:"col"},tg={class:"form-floating mb-2"},sg={class:"row row-cols-1 row-cols-sm-2"},og={key:0,class:"col"},ag={class:"form-floating mb-2"},lg={key:1,class:"col"},ng={class:"form-floating mb-2"},rg={key:1},ig={class:"table-responsive border mt-1"},dg={class:"table mb-0"},ug=["onUpdate:modelValue"],cg=["value"],mg={class:"modal-footer"},fg=["disabled"],ot={__name:"_editProgram",emits:["onClose"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=w,K=ae(),i=ae("modalEditProgram"),c=ue({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);ne(async()=>{n.value.$reset()});const O=async(m,g)=>{K.value=m;const p=c;if(Y.value.clear(),E.value="",p.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},p.item=null,await f(),g){const l=L.moment(g).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=l}await r(),n.value.$reset();var G=document.getElementById(i.value),V=$e.getOrCreateInstance(G);V.show()},a=async m=>{if(!m){W("onClose",m);var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.hide();return}const g=c,p=L.moment(g.item.dateScheduledStart).utc().format(),G={programId:K.value,name:g.item.name,dateScheduledStart:p,adBreaks:g.item.adBreaks.map(H=>({sourceLocationId:g.item.sourceLocationId,vodSourceId:H.vodSourceId,offsetMillis:H.offsetMillis,durationInMillis:H.durationInMillis}))};try{await F.put("/api/v1/programs/",G).then(l=>{$.success("Edit Program","Program was edited.")})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0);return}finally{}W("onClose",m);var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.hide()},P=async()=>{await a(!0)},f=async()=>{try{const m=`/api/v1/programs/${K.value}/`;await F.get(m).then(G=>{c.item=G.data;const V=c.item,l=L.moment(V.dateScheduledStart).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=l,V.startOffsetTime=L.moment.utc(V.startOffsetMillis).format("HH:mm:ss"),V.endOffsetTime=L.moment.utc(V.endOffsetMillis).format("HH:mm:ss"),V.durationTime=L.moment.utc(V.durationInMillis).format("HH:mm:ss"),V.adBreaksDurationTime=L.moment.utc(V.adBreaksDurationInMillis).format("HH:mm:ss"),V.totalProgramTemplateDurationTime=L.moment.utc(V.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const g=c,p=g.item.channel.outputs[0].outputType;await v(g.item.sourceLocationId,p)}catch(m){E.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},r=async()=>{},v=async(m,g)=>{try{let p=`/api/v1/vodsources/lookup/source-location/${m}/output-type/${g}`;await F.get(p).then(G=>{c.lookups.adBreakVodSources=G.data})}catch(p){E.value=L.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}};return u({open:O,close:a}),(m,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",hv,[e("div",kv,[e("div",_v,[e("h5",Sv,b(o(k))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=p=>a(!1)),"aria-label":"Close"})]),e("div",Tv,[o(E)?(t(),s("div",Mv,[g[12]||(g[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Cv)])):C("",!0),o(Y).size>0?(t(),s("div",Iv,[g[13]||(g[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),p=>(t(),s("li",null,b(p),1))),256))])])):C("",!0),c.item?(t(),s("div",xv,[e("div",Pv,[e("div",Vv,[e("div",Uv,[e("div",Ov,[c.item.relativeProgram?(t(),s("span",Av,[B(b(c.item.relativeProgram.name)+" - ",1),e("span",Dv,b(o(L).moment(c.item.relativeProgram.scheduledDateStart).format("DD/MM/YYYY HH:mm a")),1)])):C("",!0)]),g[14]||(g[14]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(n).item.name.$error?(t(),s("div",Hv,[(t(!0),s(q,null,j(o(n).item.name.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])]),e("div",Ev,[e("div",Lv,[I(e("input",{"onUpdate:modelValue":g[1]||(g[1]=p=>c.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),g[15]||(g[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Bv,[(t(!0),s(q,null,j(o(n).item.name.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])]),e("div",qv,[e("div",Nv,[I(e("input",{"onUpdate:modelValue":g[2]||(g[2]=p=>c.item.dateScheduledStart=p),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[N,c.item.dateScheduledStart]]),g[16]||(g[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(n).item.dateScheduledStart.$error?(t(),s("div",Rv,[(t(!0),s(q,null,j(o(n).item.dateScheduledStart.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])])]),c.item?(t(),s("div",zv,[e("div",Fv,[e("div",jv,[e("div",Gv,[I(e("input",{"onUpdate:modelValue":g[3]||(g[3]=p=>c.item.startOffsetTime=p),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[N,c.item.startOffsetTime]]),g[17]||(g[17]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Yv,[e("div",Wv,[I(e("input",{"onUpdate:modelValue":g[4]||(g[4]=p=>c.item.endOffsetTime=p),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[N,c.item.endOffsetTime]]),g[18]||(g[18]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Kv,[e("div",Jv,[I(e("input",{"onUpdate:modelValue":g[5]||(g[5]=p=>c.item.durationTime=p),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[N,c.item.durationTime]]),g[19]||(g[19]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Qv,[e("div",Xv,[e("div",Zv,[I(e("input",{"onUpdate:modelValue":g[6]||(g[6]=p=>c.item.adBreaksDurationTime=p),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[N,c.item.adBreaksDurationTime]]),g[20]||(g[20]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",eg,[e("div",tg,[I(e("input",{"onUpdate:modelValue":g[7]||(g[7]=p=>c.item.totalProgramTemplateDurationTime=p),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[N,c.item.totalProgramTemplateDurationTime]]),g[21]||(g[21]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",sg,[c.item.sourceLocation?(t(),s("div",og,[e("div",ag,[I(e("input",{"onUpdate:modelValue":g[8]||(g[8]=p=>c.item.sourceLocation.name=p),id:"name",class:"form-control",disabled:""},null,512),[[N,c.item.sourceLocation.name]]),g[22]||(g[22]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):C("",!0),c.item.vodSource?(t(),s("div",lg,[e("div",ng,[I(e("input",{"onUpdate:modelValue":g[9]||(g[9]=p=>c.item.vodSource.name=p),id:"name",class:"form-control",disabled:""},null,512),[[N,c.item.vodSource.name]]),g[23]||(g[23]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):C("",!0)])])):C("",!0),g[26]||(g[26]=e("hr",null,null,-1)),c.item?(t(),s("div",rg,[g[25]||(g[25]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",ig,[e("table",dg,[g[24]||(g[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(c.item.adBreaks,(p,G)=>(t(),s("tr",null,[e("td",null,b(G+1),1),e("td",null,b(o(L).moment.utc(p.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(L).moment.utc(p.durationInMillis).format("HH:mm:ss")),1),e("td",null,[I(e("select",{"onUpdate:modelValue":V=>p.vodSourceId=V,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,j(c.lookups.adBreakVodSources,V=>(t(),s(q,null,[V.durationInMillis===p.durationInMillis?(t(),s("option",{key:0,value:V.id}," ["+b(o(L).moment.utc(V.durationInMillis).format("HH:mm:ss"))+"] "+b(V.name),9,cg)):C("",!0)],64))),256))],8,ug),[[pe,p.vodSourceId]])])]))),256))])])])])):C("",!0)])):C("",!0)]),e("div",mg,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:g[10]||(g[10]=p=>P()),class:"btn btn-primary ms-2",type:"button"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fg),e("button",{onClick:g[11]||(g[11]=p=>a(!1)),class:"btn btn-secondary ms-1"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,wv))}},pg={class:"d-flex justify-content-end"},vg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:u,pageTitle:w,busy:k,infoMessage:y,warningMessage:z,errorMessage:S,router:Y,axios:R,utils:_,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),L=d,$=ae(null),M=ae(null),h=ae(null),W={viewType:"Week",cellDuration:15,startDate:Ie.DayPilot.Date.today(),onTimeRangeSelected:f=>{var r=f.control;const v={start:f.start,end:f.end,id:Ie.DayPilot.guid(),text:"NEW",tags:{type:"new"}};r.events.add(v);var m=r.events.find(v.id);O(m)},onBeforeEventRender:f=>{if(f.data.barColor="green",!!f.data.tags)switch(f.data.tags.type){case"new":f.data.barColor="yellow";break;case"business":f.data.barColor="#3498db";break;case"personal":f.data.barColor="#2ecc71";break;case"vacation":f.data.barColor="#f1c40f";break;default:f.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:async f=>{const r=f.newStart.value,v=f.e.id(),m=_.moment(r).utc().format();try{let g="/api/v1/programs/scheduled-date-start";const p={programId:v,dateScheduledStart:m};await R.put(g,p).then(G=>{E.success("Program date scheduled start was edited.")})}catch(g){S.value=_.getErrorMessageAsHtml(g),window.scrollTo(0,0);return}finally{}await x()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async f=>{var r=f.e.id();P(r)},contextMenu:new Ie.DayPilot.Menu([{text:"Clone",onClick:async f=>{const r=f.source.id();try{let v=`/api/v1/programs/${r}/clone`;await R.post(v).then(m=>{E.success("Clone Program","Program was cloned.")})}catch(v){S.value=_.getErrorMessageAsHtml(v),window.scrollTo(0,0);return}finally{await x()}}},{text:"Delete",onClick:async f=>{if(!confirm("Do you want to remove this program?"))return;const v=f.source.id();try{let m=`/api/v1/programs/${v}/`;await R.delete(m).then(g=>{E.success("Delete Program","Program was deleted.")}),$.value.control.events.remove(f.source)}catch(m){S.value=_.getErrorMessageAsHtml(m),window.scrollTo(0,0);return}finally{await x()}}}])},K=ae([]),i=()=>{$.value.control.update({events:K.value})},c=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});ne(async()=>{await x()});const x=async()=>{await n(),await i()},n=async()=>{const f=c;if(!k.value)try{k.value=!0,S.value="";const r=`/api/v1/channels/${L.id}/`;await R.get(r).then(v=>{f.item=v.data;const m=f.item.outputs,g=f.item.programs.map(p=>{let G=`${p.name}`,V=`[${p.name}]`;return p.relativeProgram&&(V+=` => [${p.relativeProgram.name}]`),{start:_.moment(p.dateScheduledStart).utc(!0).format(),end:_.moment(p.dateScheduledEnd).utc(!0).format(),id:p.programId,text:G,toolTip:V}});K.value=g})}catch(r){S.value=_.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{k.value=!1}},O=f=>{M.value.open(L.id,f.id(),f.start().value)},a=async(f,r)=>{var v=$.value,m=v.control.events.find(f.eventId);if(!r&&m){$.value.control.events.remove(m);return}v.control.events.find(H=>H.text()==f.name)&&(alert("Program already exists in this channel. Removing in the calendar."),$.value.control.events.remove(m));const p=_.moment(f.dateScheduledStart).utc(!0).format(),G=_.moment(f.dateScheduledEnd).utc(!0).format(),V=new Ie.DayPilot.Date(p),se=new Ie.DayPilot.Date(G);m.text(f.name),m.start(new Ie.DayPilot.Date(V)),m.end(new Ie.DayPilot.Date(se)),m.data.tags.program=f,m.commit(),$.value.control.update(),await R.post("/api/v1/programs/from-template/",f).then(H=>{E.success("Add New Program",`Program [${f.name}] was added to this channel.`)},H=>{const l=_.getErrorMessageAsHtml(H);alert(l)}),await x()},P=(f,r)=>{h.value.open(f,r)};return(f,r)=>{const v=Q("router-link"),m=Q("PageHeader"),g=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",pg,[e("button",{onClick:r[0]||(r[0]=p=>x()),class:"btn btn-secondary ms-1"},r[1]||(r[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(v,{to:`${d.urlView}/${d.id}`,class:"btn btn-secondary ms-1"},{default:U(()=>r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(S),vuelidate:f.v$},{default:U(()=>[e("div",null,[D(o(Ie.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:$},null,512),D($v,{ref_key:"modalAddProgram",ref:M,onOnClose:a},null,512),D(ot,{ref_key:"modalEditProgram",ref:h,onOnClose:x},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},gg=["id"],bg={class:"modal-dialog modal-xl modal-fullscreen-md-down"},yg={class:"modal-content"},$g={class:"modal-header bg-primary text-white"},wg={class:"modal-title",id:"exampleModalLabel"},hg={class:"modal-body"},kg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_g=["innerHTML"],Sg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Tg={class:"container"},Mg={class:"row row-cols-1 row-cols-sm-3"},Cg={class:"col"},Ig={class:"form-floating mb-2"},xg=["disabled"],Pg=["value"],Vg={class:"col"},Ug={class:"form-floating mb-2"},Og={key:0,class:"d-block invalid-feedback"},Ag={class:"col"},Dg={class:"form-floating mb-2"},Hg={key:0,class:"d-block invalid-feedback"},Eg={class:"row row-cols-sm-2"},Lg={class:"col"},Bg={class:"form-floating mb-2"},qg=["value"],Ng={key:0,class:"d-block invalid-feedback"},Rg={class:"col"},zg={class:"form-floating mb-2"},Fg=["value"],jg={key:0,class:"d-block invalid-feedback"},Gg={class:"col"},Yg={class:"input-group mb-1"},Wg={class:"form-floating"},Kg={key:0,class:"input-group-text"},Jg={key:0},Qg={key:1},Xg={key:2},Zg={key:3,class:"d-block invalid-feedback"},e1={class:"col"},t1={class:"input-group mb-1"},s1={class:"form-floating"},o1={key:0,class:"input-group-text"},a1={key:0},l1={key:1},n1={key:2,class:"d-block invalid-feedback"},r1={class:"table-responsive border mt-1"},i1={class:"table"},d1={class:"input-group mb-1"},u1=["onUpdate:modelValue"],c1={key:0,class:"input-group-text"},m1=["onUpdate:modelValue"],f1=["value"],p1=["onUpdate:modelValue"],v1=["value"],g1=["onClick"],b1={class:"modal-footer"},y1=["disabled"],$1={__name:"_addProgram",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=w,K=ae(),i=ae("modalAddProgram"),c=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);ne(async()=>{n.value.$reset()});const O=async H=>{K.value=H;const l=c;Y.value.clear(),E.value="";const A=L.moment().local().add(2,"m"),X=A.format("YYYY-MM-DD HH:mm"),fe=A.format("YYYY_MM_DD")+"_PROGRAM_";l.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},l.item={name:fe,relativeProgramId:null,dateScheduledStart:X,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),n.value.$reset();var ke=document.getElementById(i.value),Me=$e.getOrCreateInstance(ke);Me.show()},a=async()=>{var H=document.getElementById(i.value),l=$e.getOrCreateInstance(H);l.hide(),W("refresh")},P=async()=>{const H=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const le=H.item;delete le.vodSource,le.channelId=K.value;var A=le.dateScheduledStart;le.dateScheduledStart=L.moment(A).utc().format(),await F.post("/api/v1/programs/",le).then(X=>{$.success("Add Program","Program added to Channel",{async onClose(){}})}),await a()}catch(le){E.value=L.getErrorMessageAsHtml(le),window.scrollTo(0,0)}finally{z.value=!1}},f=async()=>{await r(),await m(),await p()},r=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.sourceLocations=l.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await v(c.item.sourceLocationId)}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},v=async H=>{try{let l=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(l).then(A=>{c.lookups.vodSources=A.data})}catch(l){E.value=L.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},m=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{c.lookups.adBreakSourceLocations=l.data})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},g=async H=>{try{let l=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(l).then(A=>{c.lookups.adBreakVodSources=A.data})}catch(l){E.value=L.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},p=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${K.value}`;await F.get(H).then(l=>{if(c.lookups.channelPrograms=l.data,c.lookups.channelPrograms.length===1){const le=c.lookups.channelPrograms[0];c.item.relativeProgramId=le.id}})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},G=()=>{const H={offsetMillis:0,sourceLocationId:null,vodSourceId:null},l=c.item.adBreaks.length;if(l>0){const A=c.item.adBreaks[l-1];H.offsetMillis=A.offsetMillis+1e4}c.item.adBreaks.push(H)},V=H=>{c.item.adBreaks.splice(H,1)},se=()=>{const H=c.item.vodSource;c.item.vodSourceId=H.id};return u({open:O,close:a}),(H,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",bg,[e("div",yg,[e("div",$g,[e("h5",wg,b(o(k))+" - "+b(o(y)),1),l[11]||(l[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",hg,[o(E)?(t(),s("div",kg,[l[12]||(l[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,_g)])):C("",!0),o(Y).size>0?(t(),s("div",Sg,[l[13]||(l[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),A=>(t(),s("li",null,b(A),1))),256))])])):C("",!0),e("div",Tg,[e("div",Mg,[e("div",Cg,[e("div",Ig,[I(e("select",{"onUpdate:modelValue":l[0]||(l[0]=A=>c.item.relativeProgramId=A),class:"form-select",id:"sourceLocationId",disabled:c.lookups.channelPrograms.length<=0},[(t(!0),s(q,null,j(c.lookups.channelPrograms,A=>(t(),s("option",{value:A.id},b(A.name),9,Pg))),256))],8,xg),[[pe,c.item.relativeProgramId]]),l[14]||(l[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",Vg,[e("div",Ug,[I(e("input",{"onUpdate:modelValue":l[1]||(l[1]=A=>c.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),l[15]||(l[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",Og,[(t(!0),s(q,null,j(o(n).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Ag,[e("div",Dg,[I(e("input",{"onUpdate:modelValue":l[2]||(l[2]=A=>c.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[N,c.item.dateScheduledStart]]),l[16]||(l[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(n).item.dateScheduledStart.$error?(t(),s("div",Hg,[(t(!0),s(q,null,j(o(n).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])])]),e("div",Eg,[e("div",Lg,[e("div",Bg,[I(e("select",{"onUpdate:modelValue":l[3]||(l[3]=A=>c.item.sourceLocationId=A),onChange:l[4]||(l[4]=A=>v(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j(c.lookups.sourceLocations,A=>(t(),s("option",{value:A.id},b(A.name),9,qg))),256))],544),[[pe,c.item.sourceLocationId]]),l[17]||(l[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(n).item.sourceLocationId.$error?(t(),s("div",Ng,[(t(!0),s(q,null,j(o(n).item.sourceLocationId.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Rg,[e("div",zg,[I(e("select",{"onUpdate:modelValue":l[5]||(l[5]=A=>c.item.vodSource=A),onChange:l[6]||(l[6]=A=>se()),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,j(c.lookups.vodSources,A=>(t(),s("option",{value:A},b(A.name),9,Fg))),256))],544),[[pe,c.item.vodSource]]),l[18]||(l[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(n).item.vodSourceId.$error?(t(),s("div",jg,[(t(!0),s(q,null,j(o(n).item.vodSourceId.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),e("div",Gg,[e("div",Yg,[e("div",Wg,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=A=>c.item.startOffsetMillis=A),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[N,c.item.startOffsetMillis]]),l[19]||(l[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),c.item.startOffsetMillis>0?(t(),s("span",Kg,b(o(L).moment.utc(c.item.startOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),c.item.startOffsetMillis>0&&c.item.startOffsetMillis<3e4?(t(),s("div",Jg,l[20]||(l[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),c.item.startOffsetMillis>c.item.endOffsetMillis&&c.item.endOffsetMillis>0?(t(),s("div",Qg,l[21]||(l[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):C("",!0),c.item.vodSource&&c.item.startOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",Xg,l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(n).item.startOffsetMillis.$error?(t(),s("div",Zg,[(t(!0),s(q,null,j(o(n).item.startOffsetMillis.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)]),e("div",e1,[e("div",t1,[e("div",s1,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=A=>c.item.endOffsetMillis=A),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[N,c.item.endOffsetMillis]]),l[23]||(l[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),c.item.endOffsetMillis>0?(t(),s("span",o1,b(o(L).moment.utc(c.item.endOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),c.item.endOffsetMillis>0&&c.item.endOffsetMillis<3e4?(t(),s("div",a1,l[24]||(l[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),c.item.vodSource&&c.item.endOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",l1,l[25]||(l[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(n).item.endOffsetMillis.$error?(t(),s("div",n1,[(t(!0),s(q,null,j(o(n).item.endOffsetMillis.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):C("",!0)])]),l[29]||(l[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[l[26]||(l[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:G,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",r1,[e("table",i1,[l[28]||(l[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(c.item.adBreaks,(A,le)=>(t(),s("tr",null,[e("td",null,b(le+1),1),e("td",null,[e("div",d1,[I(e("input",{"onUpdate:modelValue":X=>A.offsetMillis=X,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,u1),[[N,A.offsetMillis]]),A.offsetMillis>0?(t(),s("span",c1,b(o(L).moment.utc(A.offsetMillis).format("HH:mm:ss")),1)):C("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.sourceLocationId=X,onChange:l[9]||(l[9]=X=>g(c.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(q,null,j(c.lookups.adBreakSourceLocations,X=>(t(),s("option",{value:X.id},b(X.name),9,f1))),256))],40,m1),[[pe,A.sourceLocationId]])]),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,j(c.lookups.adBreakVodSources,X=>(t(),s("option",{value:X.id},b(X.name),9,v1))),256))],8,p1),[[pe,A.vodSourceId]])]),e("td",null,[e("button",{onClick:X=>V(le),class:"btn btn-outline-warning"},l[27]||(l[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,g1)])]))),256))])])])])])]),e("div",b1,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:l[10]||(l[10]=A=>P()),class:"btn btn-primary",type:"button"},l[30]||(l[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,y1),l[31]||(l[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,gg))}},w1=["id"],h1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},k1={class:"modal-content"},_1={class:"modal-header bg-primary","data-bs-theme":"dark"},S1={class:"modal-title",id:"exampleModalLabel"},T1={class:"modal-body"},M1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},C1=["innerHTML"],I1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},x1={class:"container"},P1={class:"col"},V1={class:"form-floating mb-2"},U1={class:"col"},O1={class:"form-floating mb-2"},A1={key:0,class:"d-block invalid-feedback"},D1={class:"col"},H1={class:"form-floating mb-2 d-none"},E1={key:0,class:"d-block invalid-feedback"},L1={class:"col"},B1={class:"form-floating mb-2"},q1={key:0,class:"d-block invalid-feedback"},N1={class:"modal-footer"},R1=["disabled"],z1={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=w,K=ae(),i=ae("modalAddPlaybackConfiguration"),c=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:Z.withMessage("adDecisionServerUrl is required.",ee),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:Z.withMessage("videoContentSourceUrl is required.",ee),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);ne(async()=>{n.value.$reset()});const O=async(f,r)=>{K.value=f;const v=c;Y.value.clear(),E.value="";const m=r,g=m.lastIndexOf("/"),p=m.substring(0,g),G=m.substring(g+1).replace(".","_");v.item={name:G,originalVideoContentSourceUrl:r,videoContentSourceUrl:p,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},n.value.$reset();var V=document.getElementById(i.value),se=$e.getOrCreateInstance(V);se.show()},a=async()=>{var f=document.getElementById(i.value),r=$e.getOrCreateInstance(f);r.hide(),W("refresh")},P=async()=>{const f=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const v=f.item;v.channelOutputId=K.value,await F.put("/api/v1/channelOutputs/playback/",v).then(m=>{$.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await a()}catch(v){E.value=L.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:O,close:a}),(f,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",h1,[e("div",k1,[e("div",_1,[e("h5",S1,b(o(k))+" - "+b(o(y)),1),r[5]||(r[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",T1,[o(E)?(t(),s("div",M1,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,C1)])):C("",!0),o(Y).size>0?(t(),s("div",I1,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),v=>(t(),s("li",null,b(v),1))),256))])])):C("",!0),e("div",x1,[e("div",P1,[e("div",V1,[I(e("textarea",{"onUpdate:modelValue":r[0]||(r[0]=v=>c.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[N,c.item.originalVideoContentSourceUrl]]),r[8]||(r[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",U1,[e("div",O1,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(n).item.name.$error?(t(),s("div",A1,[(t(!0),s(q,null,j(o(n).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",D1,[e("div",H1,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>c.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[N,c.item.videoContentSourceUrl]]),r[10]||(r[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),r[11]||(r[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(n).item.videoContentSourceUrl.$error?(t(),s("div",E1,[(t(!0),s(q,null,j(o(n).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])]),e("div",L1,[e("div",B1,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>c.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[N,c.item.adDecisionServerUrl]]),r[12]||(r[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(n).item.adDecisionServerUrl.$error?(t(),s("div",q1,[(t(!0),s(q,null,j(o(n).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):C("",!0)])])])]),e("div",N1,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:r[4]||(r[4]=v=>P()),class:"btn btn-primary",type:"button"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,R1),r[14]||(r[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,w1))}},F1=["id"],j1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},G1={class:"modal-content"},Y1={class:"modal-header bg-primary text-white"},W1={class:"modal-title",id:"exampleModalLabel"},K1={class:"modal-body"},J1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Q1=["innerHTML"],X1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Z1={class:"container"},eb={class:"col"},tb={class:"form-floating mb-2"},sb=["value"],ob={key:0,class:"d-block invalid-feedback"},ab={class:"col"},lb={class:"form-floating mb-2"},nb={key:0,class:"d-block invalid-feedback"},rb={class:"col"},ib={class:"form-floating mb-2"},db={key:0,class:"d-block invalid-feedback"},ub={class:"modal-footer"},cb=["disabled"],mb={__name:"_addChannelOutput",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=w,K=ae(),i=ae("modalAddChannelOutput"),c=ue({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),x={item:{sourceGroupId:{required:Z.withMessage("Source Group is required.",ee),$autoDirty:!0,$lazy:!0},manifestName:{required:Z.withMessage("Manifest Name is required.",ee),$autoDirty:!0,$lazy:!0},outputType:{required:Z.withMessage("Output Type is required.",ee),$autoDirty:!0,$lazy:!0}}},n=ye(x,c);ne(async()=>{n.value.$reset()});const O=async()=>{await a()},a=async()=>{try{await F.get("/api/v1/sourceGroups/lookup/").then(m=>{c.lookups.sourceGroups=m.data,c.lookups.sourceGroups.length===1&&(c.item.sourceGroupId=c.lookups.sourceGroups[0].id)})}catch(v){E.value=L.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},P=async v=>{K.value=v;const m=c;Y.value.clear(),E.value="",m.lookups={sourceGroups:[]},m.item={sourceGroupId:null,outputType:null},await O(),n.value.$reset();var g=document.getElementById(i.value),p=$e.getOrCreateInstance(g);p.show()},f=async()=>{var v=document.getElementById(i.value),m=$e.getOrCreateInstance(v);m.hide(),W("refresh")},r=async()=>{const v=c;if(z.value)return;if(!await n.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const g=v.item;g.channelId=K.value,await F.post("/api/v1/channelOutputs",g).then(p=>{$.success("Add Channel Output","Channel output added.")}),await f()}catch(g){E.value=L.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:P,close:f}),(v,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",j1,[e("div",G1,[e("div",Y1,[e("h5",W1,b(o(k))+" - "+b(o(y)),1),m[4]||(m[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",K1,[o(E)?(t(),s("div",J1,[m[5]||(m[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Q1)])):C("",!0),o(Y).size>0?(t(),s("div",X1,[m[6]||(m[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),g=>(t(),s("li",null,b(g),1))),256))])])):C("",!0),e("div",Z1,[e("div",eb,[e("div",tb,[I(e("select",{"onUpdate:modelValue":m[0]||(m[0]=g=>c.item.sourceGroupId=g),class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,j(c.lookups.sourceGroups,g=>(t(),s("option",{value:g.id},b(g.name),9,sb))),256))],512),[[pe,c.item.sourceGroupId]]),m[7]||(m[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(n).item.sourceGroupId.$error?(t(),s("div",ob,[(t(!0),s(q,null,j(o(n).item.sourceGroupId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",ab,[e("div",lb,[I(e("select",{"onUpdate:modelValue":m[1]||(m[1]=g=>c.item.outputType=g),class:"form-select",id:"outputType"},m[8]||(m[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,c.item.outputType]]),m[9]||(m[9]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(n).item.outputType.$error?(t(),s("div",nb,[(t(!0),s(q,null,j(o(n).item.outputType.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])]),e("div",rb,[e("div",ib,[I(e("input",{"onUpdate:modelValue":m[2]||(m[2]=g=>c.item.manifestName=g),class:"form-control",id:"manifestName"},null,512),[[N,c.item.manifestName]]),m[10]||(m[10]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(n).item.manifestName.$error?(t(),s("div",db,[(t(!0),s(q,null,j(o(n).item.manifestName.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):C("",!0)])])])]),e("div",ub,[e("button",{disabled:o(n).$dirty&&o(n).$invalid,onClick:m[3]||(m[3]=g=>r()),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,cb),m[12]||(m[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,F1))}},fb=["id"],pb={class:"modal-dialog modal-xl modal-fullscreen-md-down"},vb={class:"modal-content"},gb={class:"modal-header bg-primary text-white"},bb={class:"modal-title",id:"exampleModalLabel"},yb={class:"modal-body"},$b={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},wb=["innerHTML"],hb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kb={class:"container"},_b={class:"col"},Sb={class:"form-floating mb-2"},Tb=["value"],Mb={key:0,class:"d-block invalid-feedback"},Cb={class:"col"},Ib={class:"form-floating mb-2"},xb=["value"],Pb={key:0,class:"d-block invalid-feedback"},Vb={class:"modal-footer"},Ub=["disabled"],Ob={__name:"_editFillerSlate",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:k,pageTitle:y,busy:z,isDirty:S,validations:Y,infoMessage:R,warningMessage:_,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:M,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=w,K=ae("modalEditFillerSlate"),i=ue({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null}}),c={item:{channelId:{required:Z.withMessage("channelId is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0}}},x=ye(c,i);ne(async()=>{x.value.$reset()});const n=async()=>{await O()},O=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(g=>{i.lookups.sourceLocations=g.data}),i.item.sourceLocationId&&await a(i.item.sourceLocationId)}catch(m){E.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},a=async m=>{try{let g=`/api/v1/vodSources/lookup/source-Location/${m}/`;await F.get(g).then(p=>{i.lookups.vodSources=p.data})}catch(g){E.value=L.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},P=async(m,g,p)=>{const G=i;Y.value.clear(),E.value="",G.lookups={sourceLocations:[],vodSources:[]},G.item={channelId:m,sourceLocationId:g,vodSourceId:p},await n(),x.value.$reset();var V=document.getElementById(K.value),se=$e.getOrCreateInstance(V);se.show()},f=async()=>{var m=document.getElementById(K.value),g=$e.getOrCreateInstance(m);g.hide(),W("refresh")},r=async()=>{const m=i;if(z.value)return;if(!await x.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const p=m.item;await F.put("/api/v1/channels/filler-slate",p).then(G=>{$.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await f()}catch(p){E.value=L.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{z.value=!1}},v=async()=>{i.item.vodSourceId=null,await a(i.item.sourceLocationId)};return u({open:P,close:f}),(m,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",pb,[e("div",vb,[e("div",gb,[e("h5",bb,b(o(k))+" - "+b(o(y)),1),g[4]||(g[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",yb,[o(E)?(t(),s("div",$b,[g[5]||(g[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,wb)])):C("",!0),o(Y).size>0?(t(),s("div",hb,[g[6]||(g[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(Y).values(),p=>(t(),s("li",null,b(p),1))),256))])])):C("",!0),e("div",kb,[e("div",_b,[e("div",Sb,[I(e("select",{"onUpdate:modelValue":g[0]||(g[0]=p=>i.item.sourceLocationId=p),onChange:g[1]||(g[1]=p=>v()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j(i.lookups.sourceLocations,p=>(t(),s("option",{value:p.id},b(p.name),9,Tb))),256))],544),[[pe,i.item.sourceLocationId]]),g[7]||(g[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(x).item.sourceLocationId.$error?(t(),s("div",Mb,[(t(!0),s(q,null,j(o(x).item.sourceLocationId.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])]),e("div",Cb,[e("div",Ib,[I(e("select",{"onUpdate:modelValue":g[2]||(g[2]=p=>i.item.vodSourceId=p),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,j(i.lookups.vodSources,p=>(t(),s("option",{value:p.id},b(p.name),9,xb))),256))],512),[[pe,i.item.vodSourceId]]),g[8]||(g[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(x).item.vodSourceId.$error?(t(),s("div",Pb,[(t(!0),s(q,null,j(o(x).item.vodSourceId.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):C("",!0)])])])]),e("div",Vb,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:g[3]||(g[3]=p=>r()),class:"btn btn-primary",type:"button"},g[9]||(g[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ub),g[10]||(g[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,fb))}},Ab={class:"d-flex flex-row justify-content-end"},Db={key:0,class:"dropdown"},Hb={key:0,class:"fas fa-fw fa-play"},Eb={key:1,class:"fas fa-fw fa-stop"},Lb={class:"dropdown-menu"},Bb={key:0},qb={key:1},Nb={key:0},Rb={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},zb={class:"nav-item",role:"presentation"},Fb={class:"nav-item",role:"presentation"},jb={class:"nav-item",role:"presentation"},Gb={class:"nav-item",role:"presentation"},Yb={class:"tab-content",id:"myTabContent"},Wb={class:"mt-2"},Kb={class:"row row-cols-1 row-cols-sm-3"},Jb={class:"col"},Qb={class:"form-floating mb-2"},Xb={class:"col"},Zb={class:"form-floating mb-2"},ey={class:"col"},ty={class:"form-floating mb-2"},sy={class:"d-flex flex-row justify-content-start align-items-center"},oy={key:0,class:"ms-2"},ay={class:"row row-cols-sm-2 mt-1"},ly={class:"col"},ny={class:"form-floating mb-2"},ry={class:"col"},iy={class:"form-floating mb-2"},dy={class:"col mt-2"},uy={class:"form-floating mb-2"},cy={class:"mt-2"},my={class:"d-flex flex-row justify-content-start align-items-center"},fy={class:"ms-2"},py={key:0,class:"alert bg-warning mt-2"},vy={class:"table-responsive border mt-1"},gy={class:"table table-bordered1 mb-0"},by={key:0,class:"text-wrap"},yy={key:1,class:"text-warning"},$y={key:0,class:"text-end"},wy=["onClick"],hy={key:1,class:"text-end"},ky=["onClick"],_y={key:0},Sy={colspan:"999"},Ty={class:"d-flex flex-row justify-content-start align-items-center"},My={class:"ms-2"},Cy={if:"item.playbackUrl"},Iy=["onClick"],xy={key:0,class:"table-responsive border mt-2"},Py={class:"table mb-0 table-small"},Vy={class:"text-end"},Uy=["onClick"],Oy=["onClick"],Ay=["onClick"],Dy={key:1,class:"mt-2"},Hy={class:"container1"},Ey={class:"row row-cols-1 row-cols-sm-2"},Ly={class:"col-sm-3"},By={class:"input-group mb-2"},qy={class:"form-floating border-success"},Ny=["onUpdate:modelValue"],Ry=["onClick"],zy={class:"col-sm-9"},Fy={class:"input-group mb-2"},jy={class:"form-floating"},Gy=["onUpdate:modelValue"],Yy=["onClick"],Wy={class:"col"},Ky={class:"form-floating mb-2"},Jy=["onUpdate:modelValue"],Qy={class:"mt-2"},Xy={class:"table-responsive border"},Zy={class:"table table-hover mb-0 caption-top"},e$={key:0,class:"fas fa-fw fa-check-circle text-success"},t$={class:"badge bg-info"},s$={key:0,class:""},o$={key:1,class:"mt-1"},a$={class:"mt-1"},l$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},n$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},r$={class:"badge bg-info me-2"},i$={class:"text-end"},d$={class:"dropdown position-static"},u$={class:"dropdown-menu"},c$=["onClick"],m$={key:0},f$=["onClick"],p$=["onClick"],v$=["onClick"],g$={class:"text-end mt-2 d-none"},b$={class:"mt-2"},y$={key:0,class:"fas fa-fw fa-check-circle text-success"},$$={key:1,class:"fas fa-fw fa-times-circle text-warning"},w$={key:0,class:"fas fa-fw fa-check-circle text-success"},h$={key:1,class:"fas fa-fw fa-times-circle text-warning"},k$={key:0,class:"fas fa-fw fa-check-circle text-success"},_$={key:1,class:"fas fa-fw fa-times-circle text-warning"},S$={key:0,class:"fas fa-fw fa-check text-warning"},T$={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},M$={key:0,class:"fas fa-fw fa-check-circle text-success"},C$={key:1,class:"fas fa-fw fa-times-circle text-warning"},I$={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(d){const u=d,{appTitle:w,pageTitle:k,busy:y,isDirty:z,validations:S,infoMessage:Y,warningMessage:R,errorMessage:_,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:M,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae(null),x=ae(null),n=ae(null),O=ae(null),a=ae(null),P=ae(),f=Oe(()=>i.item&&i.item.state==="RUNNING");ne(async()=>{await g(),P.value=F.getPageTab("channel")||"information-tab"});const r=re=>{F.setPageTab("channel",re),P.value=re},v=re=>re===P.value?"active":"",m=re=>re===P.value?"show active":"",g=async()=>{const re=i;if(!y.value)try{y.value=!0,_.value="",i.item=null;const T=`/api/v1/channels/${u.id}/`;await J.get(T).then(ge=>{re.item=ge.data,re.item.outputs.forEach(De=>{De.playbackConfigurations.forEach(te=>{if(De.playbackUrl){const Ve=De.playbackUrl,ce=Ve.lastIndexOf("/"),Fe=Ve.substring(0,ce),Ee=Ve.substring(ce+1),je=te.hlsConfigurationManifestEndpointPrefix;je&&(te.hlsPlaylist=je+Ee)}})})})}catch(T){_.value=F.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{y.value=!1}},p=async()=>{await g()},G=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!y.value){_.value=null;try{y.value=!0,await J.post(`/api/v1/channels/${u.id}/publish/`).then(T=>{L.success("Publish Channel","Channel was published.")}),y.value=!1,await p()}catch(T){_.value=F.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{y.value=!1}}},V=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/channels/${u.id}/unpublish/`).then(T=>{L.warning("Remove Channel","Channel was removed.")}),y.value=!1,await p()}catch(T){_.value=F.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{y.value=!1}}},se=()=>{c.value.open(u.id)},H=re=>{re.outputType==="HLS"&&x.value.open(re.channelOutputId,re.playbackUrl)},l=()=>{n.value.open(u.id)},A=re=>{O.value.open(re)},le=(re,T)=>{a.value.open(u.id,re,T)},X=async re=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${re}/`).then(ge=>{L.success("Delete Program","Program was deleted..",{async onClose(){}})}),y.value=!1,await p()}catch(ge){_.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},fe=async re=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/channelOutputs/${re}/`).then(ge=>{L.success("Delete Channel Output","Channel output was deleted..")}),y.value=!1,await p()}catch(ge){_.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},ke=async re=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!y.value){_.value=null;try{y.value=!0,await J.post(`/api/v1/programs/${re}/publish/`).then(ge=>{L.success("Publish Program","Program was published..",{async onClose(){}})}),y.value=!1,await p()}catch(ge){_.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Me=async re=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!y.value){_.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${re}/unpublish/`).then(ge=>{L.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),y.value=!1,await p()}catch(ge){_.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Ce=async re=>{if(!y.value){_.value=null;try{y.value=!0,await J.put(`/api/v1/channels/${u.id}/change-state/${re}`).then(T=>{L.success("Update Channel state","Change state was updated")}),y.value=!1,await p()}catch(T){_.value=F.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{y.value=!1}}},Ae=async re=>{if(!y.value)try{y.value=!0,_.value="",await J.post(`/api/v1/channelOutputs/${re}/playback/publish/`).then(T=>{L.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),y.value=!1,await p()}catch(T){_.value=F.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{y.value=!1}},lt=async re=>{if(confirm("Do you want to remove this Playback Configuration?")&&!y.value)try{y.value=!0,_.value="",await J.delete(`/api/v1/channelOutputs/${re}/playback/`).then(ge=>{L.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),y.value=!1,await p()}catch(ge){_.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}},qe=re=>{const T=`https://www.hlsplayer.org/play?url=${encodeURIComponent(re)}`;window.open(T,"_blank")};return(re,T)=>{const ge=Q("router-link"),ze=Q("PageHeader"),De=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(ze,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Ab,[i.item?(t(),s("div",Db,[e("button",{class:oe([[f.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[f.value?(t(),s("span",Hb)):(t(),s("span",Eb)),B(" "+b(i.item.state),1)],2),e("ul",Lb,[i.item.arn?(t(),s("li",Bb,[f.value?(t(),s("button",{key:0,onClick:T[0]||(T[0]=te=>Ce("STOPPED")),class:"dropdown-item"},T[18]||(T[18]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),B("Stop ")]))):(t(),s("button",{key:1,onClick:T[1]||(T[1]=te=>Ce("RUNNING")),class:"dropdown-item"},T[19]||(T[19]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),B("Start ")])))])):C("",!0),f.value?C("",!0):(t(),s("li",qb,[i.item.arn?(t(),s("button",{key:0,onClick:T[2]||(T[2]=te=>V()),class:"dropdown-item"},T[20]||(T[20]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),B("Unpublish ")]))):(t(),s("button",{key:1,onClick:T[3]||(T[3]=te=>G()),class:"dropdown-item"},T[21]||(T[21]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Publish ")])))])),i.item.arn?(t(),s(q,{key:2},[T[23]||(T[23]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:T[4]||(T[4]=te=>G()),class:"dropdown-item"},T[22]||(T[22]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Republish ")]))])],64)):C("",!0)])])):C("",!0),D(ge,{to:`${d.urlSchedulePrograms}/${d.id}`,class:"ms-2 btn btn-primary"},{default:U(()=>T[24]||(T[24]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:T[5]||(T[5]=te=>p()),class:"ms-2 btn btn-secondary"},T[25]||(T[25]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:T[6]||(T[6]=te=>o(M)(u.urlMain)),class:"btn btn-secondary ms-1"},T[26]||(T[26]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(De,{errorMessage:o(_)},{default:U(()=>[i.item?(t(),s("div",Nb,[e("ul",Rb,[e("li",zb,[e("button",{onClick:T[7]||(T[7]=te=>r("information-tab")),class:oe([v("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},T[27]||(T[27]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),B("Information ")]),2)]),e("li",Fb,[e("button",{onClick:T[8]||(T[8]=te=>r("outputPlayback-tab")),class:oe([v("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},T[28]||(T[28]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),B("Output/Playback ")]),2)]),e("li",jb,[e("button",{onClick:T[9]||(T[9]=te=>r("programs-tab")),class:oe([v("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},T[29]||(T[29]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),B("Programs ")]),2)]),e("li",Gb,[e("button",{onClick:T[10]||(T[10]=te=>r("checklist-tab")),class:oe([v("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},T[30]||(T[30]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),B("Checklist ")]),2)])]),e("div",Yb,[e("div",{class:oe([m("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Wb,[e("div",Kb,[e("div",Jb,[e("div",Qb,[I(e("input",{"onUpdate:modelValue":T[11]||(T[11]=te=>i.item.name=te),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),T[31]||(T[31]=e("label",{for:"name"},"Name",-1))])]),e("div",Xb,[e("div",Zb,[I(e("input",{"onUpdate:modelValue":T[12]||(T[12]=te=>i.item.playbackMode=te),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[N,i.item.playbackMode]]),T[32]||(T[32]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",ey,[e("div",ty,[I(e("input",{"onUpdate:modelValue":T[13]||(T[13]=te=>i.item.tier=te),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[N,i.item.tier]]),T[33]||(T[33]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",sy,[T[35]||(T[35]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),f.value?C("",!0):(t(),s("div",oy,[e("button",{onClick:T[14]||(T[14]=te=>le(i.item.fillerSlateSourceLocation.sourceLocationId,i.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},T[34]||(T[34]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",ay,[e("div",ly,[e("div",ny,[D(ge,{to:`${d.urlViewSourceLocation}/${i.item.fillerSlateSourceLocation.sourceLocationId}/${o(h)()}`,class:oe([[i.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:U(()=>[B(b(i.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),T[36]||(T[36]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",ry,[e("div",iy,[D(ge,{to:`${d.urlViewVodSource}/${i.item.fillerSlateVodSource.vodSourceId}/${o(h)()}`,class:oe([[i.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:U(()=>[B(b(i.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),T[37]||(T[37]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",dy,[e("div",uy,[I(e("textarea",{"onUpdate:modelValue":T[15]||(T[15]=te=>i.item.policy=te),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[N,i.item.policy]]),T[38]||(T[38]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:oe([m("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",cy,[e("div",null,[e("div",my,[T[40]||(T[40]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",fy,[e("button",{onClick:T[16]||(T[16]=te=>l()),class:"btn btn-outline-primary btn-sm"},T[39]||(T[39]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),i.item.outputs.length<=0?(t(),s("div",py,T[41]||(T[41]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),B("Channel Output is required ")]))):C("",!0),e("div",vy,[e("table",gy,[T[57]||(T[57]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Type"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.outputs,(te,Ve)=>(t(),s(q,{key:te.channelOutputId},[e("tr",null,[e("td",null,b(Ve+1),1),e("td",null,[e("div",null,b(te.outputType),1)]),e("td",null,[e("div",null,b(te.manifestName),1)]),e("td",null,[e("div",null,[D(ge,{to:`${d.urlViewSourceGroup}/${te.sourceGroupId}/${o(h)()}`},{default:U(()=>[B(b(te.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[te.playbackUrl?(t(),s("div",by,b(te.playbackUrl),1)):(t(),s("div",yy,T[42]||(T[42]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),B("Publish channel to get the playback url ")])))]),f.value?(t(),s("td",$y,[e("div",null,[f.value?(t(),s("button",{key:0,onClick:ce=>qe(te.playbackUrl),class:"btn btn-outline-info btn-sm"},T[43]||(T[43]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]),8,wy)):C("",!0)])])):(t(),s("td",hy,[e("button",{onClick:ce=>fe(te.channelOutputId),class:"btn btn-outline-warning btn-sm"},T[44]||(T[44]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ky)]))]),te.playbackUrl?(t(),s("tr",_y,[T[56]||(T[56]=e("td",null,null,-1)),e("td",Sy,[e("div",Ty,[T[46]||(T[46]=e("h5",null,[B("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",My,[e("div",Cy,[e("button",{onClick:ce=>H(te),class:"btn btn-outline-primary btn-sm"},T[45]||(T[45]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,Iy)])])]),te.playbackConfigurations.length>0?(t(),s("div",xy,[e("table",Py,[e("tbody",null,[(t(!0),s(q,null,j(te.playbackConfigurations,(ce,Fe)=>(t(),s("tr",null,[e("td",null,b(Fe+1),1),e("td",null,b(ce.name),1),e("td",Vy,[f.value&&ce.hlsPlaylist?(t(),s("button",{key:0,onClick:Ee=>qe(ce.hlsPlaylist),class:"btn btn-outline-info btn-sm"},T[47]||(T[47]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]),8,Uy)):C("",!0),ce.arn?C("",!0):(t(),s("button",{key:1,onClick:Ee=>Ae(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},T[48]||(T[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Oy)),e("button",{onClick:Ee=>lt(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},T[49]||(T[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ay)])]))),256))])])])):C("",!0),te.playbackConfiguration?(t(),s("div",Dy,[e("div",Hy,[e("div",Ey,[e("div",Ly,[e("div",By,[e("div",qy,[I(e("input",{"onUpdate:modelValue":ce=>te.playbackConfiguration.name=ce,type:"text",class:oe([[te.playbackConfiguration.arn?"is-valid":"is-invalid"],"form-control"]),id:"name",disabled:""},null,10,Ny),[[N,te.playbackConfiguration.name]]),T[50]||(T[50]=e("label",{for:"name"}," Name ",-1))]),te.playbackConfiguration.arn?C("",!0):(t(),s("button",{key:0,onClick:ce=>re.publishPlaybackConfiguration(te),class:"btn btn-outline-primary btn-sm"},T[51]||(T[51]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Publish ")]),8,Ry))])]),e("div",zy,[e("div",Fy,[e("div",jy,[I(e("input",{"onUpdate:modelValue":ce=>te.playbackConfiguration.hlsConfigurationManifestEndpointPrefix=ce,type:"text",class:"form-control",id:"playbackConfigurationhlsConfigurationManifestEndpointPrefix",disabled:""},null,8,Gy),[[N,te.playbackConfiguration.hlsConfigurationManifestEndpointPrefix]]),T[52]||(T[52]=e("label",{for:"hlsConfigurationManifestEndpointPrefix"},"HLS Configuration Manifest Endpoint Prefix",-1))]),f.value&&te.playbackConfiguration.hlsPlaylist?(t(),s("button",{key:0,onClick:ce=>qe(te.playbackConfiguration.hlsPlaylist),class:"btn btn-outline-info"},T[53]||(T[53]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),B("View ")]),8,Yy)):C("",!0)])])]),T[55]||(T[55]=e("div",{class:"row row-cols-1 row-cols-sm-21"},[e("div",{class:"col"})],-1)),e("div",Wy,[e("div",Ky,[I(e("textarea",{"onUpdate:modelValue":ce=>te.playbackConfiguration.adDecisionServerUrl=ce,class:"form-control",id:"playbackConfigurationadDecisionServerUrl",style:{height:"8rem"},disabled:""},null,8,Jy),[[N,te.playbackConfiguration.adDecisionServerUrl]]),T[54]||(T[54]=e("label",{for:"playbackConfigurationadDecisionServerUrl"},"Ad Decision Server Url",-1))])])])])):C("",!0)])])):C("",!0)],64))),128))]),_:1},512),[[he,i.item.outputs.length>0]])])])])])],2),e("div",{class:oe([m("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Qy,[e("div",Xy,[e("table",Zy,[T[71]||(T[71]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.programs,(te,Ve)=>(t(),s("tr",{key:te.programId},[e("td",null,b(Ve+1),1),e("td",null,[te.arn?(t(),s("span",e$)):C("",!0),B(" "+b(te.name)+" ",1),T[61]||(T[61]=e("br",null,null,-1)),e("div",null,[e("div",null,[T[58]||(T[58]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),B(b(o(F).moment(te.dateScheduledStart).format("llll")),1)]),e("div",null,[T[59]||(T[59]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),B(b(o(F).moment(te.dateScheduledEnd).format("llll")),1)])]),te.relativeProgram?(t(),s(q,{key:1},[T[60]||(T[60]=B(" Relative Program: ")),e("span",t$,b(te.relativeProgram.name),1)],64)):C("",!0)]),e("td",null,[te.totalProgramTemplateDurationInMillis!==te.durationInMillis?(t(),s("div",s$,[T[62]||(T[62]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),B(" "+b(o(F).moment.utc(te.startOffsetMillis).format("HH:mm:ss"))+" - "+b(o(F).moment.utc(te.endOffsetMillis).format("HH:mm:ss")),1)])):C("",!0),te.adBreaksDurationInMillis?(t(),s("div",o$,[T[63]||(T[63]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),B(" Ads: "+b(o(F).moment.utc(te.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):C("",!0),e("div",a$,[T[64]||(T[64]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),B(" Total: "+b(o(F).moment.utc(te.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[B(b(te.vodSource.video.title)+" ",1),T[65]||(T[65]=e("br",null,null,-1)),B(" ("+b(o(F).moment.utc(te.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),s(q,null,j(te.adBreaks,ce=>(t(),s("li",null,[ce.vodSource.arn?(t(),s("span",l$)):(t(),s("span",n$)),e("span",r$,b(o(F).moment.utc(ce.offsetMillis).format("HH:mm:ss")),1),D(ge,{to:`${d.urlViewVodSource}/${ce.vodSource.vodSourceId}/${o(h)()}`},{default:U(()=>[B(b(ce.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",i$,[e("div",d$,[T[70]||(T[70]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",u$,[e("li",null,[e("button",{onClick:ce=>A(te.programId),class:"dropdown-item"},T[66]||(T[66]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),B("Edit ")]),8,c$)]),te.arn?(t(),s("li",m$,[e("button",{onClick:ce=>Me(te.programId),class:"dropdown-item"},T[67]||(T[67]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),B("Unpublish ")]),8,f$)])):(t(),s(q,{key:1},[e("li",null,[e("button",{onClick:ce=>ke(te.programId),class:"dropdown-item"},T[68]||(T[68]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Publish ")]),8,p$)]),e("li",null,[e("button",{onClick:ce=>X(te.programId),class:"dropdown-item"},T[69]||(T[69]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),B("Remove ")]),8,v$)])],64))])])])]))),128))]),_:1},512),[[he,i.item.programs.length>0]])])]),e("div",g$,[e("button",{onClick:T[17]||(T[17]=te=>se()),class:"btn btn-outline-primary"},T[72]||(T[72]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Program ")]))])])],2),e("div",{class:oe([m("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",b$,[T[79]||(T[79]=B(" Checklist ")),e("ul",null,[e("li",null,[i.item.fillerSlateSourceLocation.arn?(t(),s("span",y$)):(t(),s("span",$$)),T[73]||(T[73]=B(" Filler Slate Source Location "))]),e("li",null,[i.item.fillerSlateVodSource.arn?(t(),s("span",w$)):(t(),s("span",h$)),T[74]||(T[74]=B(" Filler Slate VOD Source "))]),e("li",null,[i.item.outputs.length>0?(t(),s("span",k$)):(t(),s("span",_$)),T[76]||(T[76]=B(" Outputs ")),e("ul",null,[e("li",null,[i.item.outputs.some(te=>te.playbackConfigurations.length>0)?(t(),s("span",S$)):(t(),s("span",T$)),T[75]||(T[75]=B(" Ad Insertion setup "))])])]),e("li",null,[i.item.programs.length>0?(t(),s("span",M$)):(t(),s("span",C$)),T[77]||(T[77]=B(" Programs "))]),T[78]||(T[78]=B(" u l "))])])],2)])])):C("",!0)]),_:1},8,["errorMessage"]),D($1,{ref_key:"modalAddProgram",ref:c,onRefresh:p},null,512),D(z1,{ref_key:"modalAddPlaybackConfiguration",ref:x,onRefresh:p},null,512),D(mb,{ref_key:"modalAddChannelOutput",ref:n,onRefresh:p},null,512),D(ot,{ref_key:"modalEditProgram",ref:O,onOnClose:p},null,512),D(Ob,{ref_key:"modalEditFillerSlate",ref:a,onRefresh:p},null,512)])]),_:1})}}},x$={path:"/",component:Go,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:pa},{path:"users/add",component:Ba},{path:"users",component:Ka},{path:"users/view/:id",component:yl,props:!0},{path:"videos/add",component:jl},{path:"videos/edit/:id",component:pn,props:!0},{path:"videos",component:_n},{path:"videos/view/:id",component:Jn,props:!0},{path:"source-groups/add",component:tr},{path:"source-groups/edit/:id",component:ar,props:!0},{path:"source-groups",component:fr},{path:"source-groups/view/:id",component:Pr,props:!0},{path:"source-locations/add",component:Er},{path:"source-locations/edit/:id",component:qr,props:!0},{path:"source-locations",component:Kr},{path:"source-locations/view/:id",component:bi,props:!0},{path:"vod-sources/add",component:Fi},{path:"vod-sources/edit/:id",component:Yi,props:!0},{path:"vod-sources",component:ad},{path:"vod-sources/view/:id",component:cc,props:!0},{path:"channels/add",component:gp},{path:"channels/edit/:id",component:$p,props:!0},{path:"channels",component:Cp},{path:"channels/schedule-programs/:id",component:vg,props:!0},{path:"channels/view/:id",component:I$,props:!0},{path:"program-templates/add",component:Kc},{path:"program-templates/edit/:id",component:Vm,props:!0},{path:"program-templates",component:Rm},{path:"program-templates/view/:id",component:jf,props:!0}]},at=ut({history:ct("/"),linkActiveClass:"active",routes:[{...oo},{path:"/administrator",redirect:"/"},{...x$}]}),P$={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const d=this,w=new mt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();w.on("onNotificationCreated",function(k){let y=k.content;k.notificationEntityClassText==="Deposit"&&(y+="<br/>",y+=`<a href="${d.urlViewDeposit}${k.referenceId}">Click ${k.notificationEntityClassText} here</a>`),k.notificationEntityClassText==="Withdraw"&&(y+="<br/>",y+=`<a href="${d.urlViewWithdraw}${k.referenceId}">Click ${k.notificationEntityClassText} here</a>`),k.notificationEntityClassText==="ManualModeOfPayment"&&(y+="<br/>",y+=`<a href="${d.urlViewManualModeOfPayment}${k.referenceId}">Click ${k.notificationEntityClassText} here</a>`),k.iconClass;let z="secondary";switch(k.notificationType){case 1:z="success";break;case 3:z="info";break;case 3:z="success";break;case 4:z="info";break;case 5:z="warning";break;case 6:z="error";break}d.$toast[z](k.subject,y,{timeOut:1e4});const S=k.subject,_={body:y,icon:"/img/192x102.png"};new Notification(S,_)}),w.on("jobUpdated",function(k){d.$bus.$emit("event:job-updated",k)}),await w.start().then(function(){}).catch(function(k){})}}};function V$(d,u,w,k,y,z){return t(),s("div")}const U$=_e(P$,[["render",V$],["__scopeId","data-v-5b4a9fa2"]]),O$={class:"navbar bg-light","data-bs-theme":"light"},A$={class:"container-md"},D$={class:"col-sm-auto"},H$={class:"navbar-brand mb-0"},E$={class:"col-sm flex-fill"},L$={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(d){return(u,w)=>(t(),ie(de,null,{default:U(()=>[e("div",null,[e("nav",O$,[e("div",A$,[e("div",{class:oe([d.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",D$,[xe(u.$slots,"title",{},()=>[e("h1",H$,[e("i",{class:oe([d.pageIcon,"me-1"])},null,2),e("span",null,b(d.pageTitle),1)])])]),e("div",E$,[xe(u.$slots,"default")])],2)])])])]),_:3}))}},B$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},q$=["innerHTML"],N$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},R$={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(u,w)=>(t(),ie(de,null,{default:U(()=>[xe(u.$slots,"default",{},()=>[d.errorMessage?(t(),s("div",B$,[w[0]||(w[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:d.errorMessage},null,8,q$)])):C("",!0),d.vuelidate&&d.vuelidate.$error?(t(),s("div",N$,[w[1]||(w[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(d.vuelidate.$errors,k=>(t(),s("li",{key:k.$uid},[k.$validator==="$each"?(t(),s(q,{key:0},[B(" Check errors in '"+b(k.$property)+"' ",1)],64)):(t(),s(q,{key:1},[B(b(k.$message),1)],64))]))),128))])])):C("",!0)])]),_:3}))}},z$={class:"mt-2 container-md"},F$={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(u,w)=>{const k=Q("PageMessages");return t(),ie(de,null,{default:U(()=>[e("div",z$,[D(k,{errorMessage:d.errorMessage,vuelidate:d.vuelidate},null,8,["errorMessage","vuelidate"]),xe(u.$slots,"default")])]),_:3})}}},j$={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const d=this;d.busy||(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveFirst(){const d=this;if(d.busy)return;d.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveLast(){const d=this;if(d.busy)return;const u=d.filter;u.pageIndex!==u.totalPages&&(document.activeElement&&document.activeElement.blur(),await d.search(u.totalPages))},async move(d){const u=this;if(u.busy)return;const w=u.filter,k=w.pageIndex+d;k>=0&&k<=w.totalPages&&(document.activeElement&&document.activeElement.blur(),await u.search(k))}}},G$={class:"mt-2"},Y$={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},W$={key:0,class:"col-sm order-2 order-sm-1"},K$={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},J$={class:"me-1 fw-bold"},Q$={class:"fw-bold"},X$={class:"ms-1"},Z$={class:"col-sm order-1 order-sm-2"},ew={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},tw={key:0,class:"page-item"},sw={key:1,class:"page-item"},ow={key:2,class:"page-item"},aw={class:"page-item active"},lw={class:"page-link"},nw={key:3,class:"page-item"},rw={key:4,class:"page-item"},iw={key:5,class:"page-item"},dw={key:1,class:"text-info font-weight-bold text-center"},uw={key:0},cw={key:1};function mw(d,u,w,k,y,z){return t(),s("div",G$,[w.filter.items.length?(t(),s("div",Y$,[w.showPerPage?(t(),s("div",W$,[e("div",K$,[e("div",null,[e("span",J$,b(w.filter.totalCount),1),u[8]||(u[8]=B("records in ")),e("span",Q$,b(w.filter.totalPages),1),u[9]||(u[9]=B(" page(s) "))]),e("div",X$,[I(e("select",{"onUpdate:modelValue":u[0]||(u[0]=S=>w.filter.pageSize=S),onChange:u[1]||(u[1]=(...S)=>z.changePagination&&z.changePagination(...S)),class:"form-select form-select-sm me-1"},u[10]||(u[10]=[We('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[pe,w.filter.pageSize]])]),u[11]||(u[11]=e("div",{class:"ms-1"},"per page",-1))])])):C("",!0),e("div",Z$,[e("ul",ew,[w.filter.pageIndex!==1?(t(),s("li",tw,[e("button",{class:"page-link","aria-label":"Previous",onClick:u[2]||(u[2]=(...S)=>z.moveFirst&&z.moveFirst(...S))},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):C("",!0),w.filter.pageIndex>2?(t(),s("li",sw,[e("button",{class:"page-link",onClick:u[3]||(u[3]=S=>z.move(-2))},b(w.filter.pageIndex-2),1)])):C("",!0),w.filter.pageIndex>1?(t(),s("li",ow,[e("button",{class:"page-link",onClick:u[4]||(u[4]=S=>z.move(-1))},b(w.filter.pageIndex-1),1)])):C("",!0),e("li",aw,[e("span",lw,b(w.filter.pageIndex),1)]),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",nw,[e("button",{class:"page-link",onClick:u[5]||(u[5]=S=>z.move(1))},b(w.filter.pageIndex+1),1)])):C("",!0),w.filter.pageIndex<w.filter.totalPages-1?(t(),s("li",rw,[e("button",{class:"page-link",onClick:u[6]||(u[6]=S=>z.move(2))},b(w.filter.pageIndex+2),1)])):C("",!0),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",iw,[e("button",{class:"page-link","aria-label":"Next",onClick:u[7]||(u[7]=(...S)=>z.moveLast&&z.moveLast(...S))},u[13]||(u[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):C("",!0)])])])):(t(),s("div",dw,[w.noRecords?(t(),s("div",uw,b(w.noRecords),1)):(t(),s("div",cw,"No record(s) found."))]))])}const fw=_e(j$,[["render",mw]]),pw={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let d=this;if(!d.enabled)return;let u=d.filter;u.sortField===d.field?u.sortOrder===0?u.sortField=null:u.sortOrder=u.sortOrder===0?1:0:(u.sortField=d.field,u.sortOrder=1),d.$emit("search")}}},vw={class:"align-self-center"};function gw(d,u,w,k,y,z){return t(),s("div",{onClick:u[0]||(u[0]=(...S)=>z.click&&z.click(...S)),class:"d-flex flex-row justify-content-start align-content-center",style:Xe({cursor:w.enabled?"pointer":""})},[xe(d.$slots,"default"),e("span",vw,[w.showSort?(t(),s("span",{key:0,class:oe([{"fa-sort text-gray-500":!z.currentSortField(),"fa-sort-up":z.currentSortField()&&z.sortUp(),"fa-sort-down":z.currentSortField()&&!z.sortUp()},"fas fa-fw mr-1"])},null,2)):C("",!0)])],4)}const bw=_e(pw,[["render",gw]]),yw={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(d){const u=this;u.setSelected(d),u.$emit("onSelectedRow",d)}}},$w={class:"table-responsive m-0"},ww=["href"],hw={key:1},kw=["onClick"],_w={class:"form-group row no-gutters"},Sw={class:"col-5 col-form-label"},Tw={class:"col align-self-center"},Mw=["href"],Cw={key:1};function Iw(d,u,w,k,y,z){return t(),s("div",null,[e("div",$w,[e("table",{class:oe(["table table-hover d-none d-md-table card",w.tableCss])},[e("thead",null,[xe(d.$slots,"header",{},()=>[u[0]||(u[0]=e("th",null,"#",-1)),(t(!0),s(q,null,j(w.header.columns,S=>(t(),s("th",null,b(S.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(q,null,j(w.items,(S,Y)=>xe(d.$slots,"table-row",{key:`row1-${S[w.header.key]}`,item:S,index:Y},()=>[e("td",null,b(w.getRowNumber(Y)),1),(t(!0),s(q,null,j(w.header.columns,R=>(t(),s("td",null,[R.href?(t(),s("a",{key:0,href:R.href(S[w.header.key]),class:"font-weight-bold"},b(S[R.field]),9,ww)):(t(),s("span",hw,b(S[R.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:oe(["d-block d-md-none",w.rowCss])},[(t(!0),s(q,null,j(w.items,(S,Y)=>(t(),s("div",{key:`row2-${S[w.header.key]}`,onClick:R=>z.onSelectedRow(S),class:"border"},[e("div",{class:oe(["p-2",{"b-left":w.isSelected(S)}])},[xe(d.$slots,"table-list",{item:S,index:Y},()=>[(t(!0),s(q,null,j(w.header.columns,R=>(t(),s("div",_w,[e("label",Sw,b(R.title),1),e("div",Tw,[R.href?(t(),s("a",{key:0,href:R.href(S[w.header.key]),class:"font-weight-bold"},b(S[R.field]),9,Mw)):(t(),s("span",Cw,b(S[R.field]),1))])]))),256))],!0)],2)],8,kw))),128))],2)])}const xw=_e(yw,[["render",Iw],["__scopeId","data-v-65929213"]]),Se=ft(vt);Se.use(pt());Se.use(at);Se.component("m-notification",U$);Se.component("m-pagination",fw);Se.component("sort-field",bw);Se.component("table-list",xw);Se.component("Toasts",Ro);Se.component("PageHeader",L$);Se.component("PageMessages",R$);Se.component("PageBody",F$);const Pw="https://sonyfastpoc.azurewebsites.net/",Vw="Arcadian-Sony FAST",Uw=void 0,Ow={API_URL:Pw,appName:Vw,tenantId:Uw};Se.provide("$config",Ow);Se.provide("$bus",Re);Se.mount("#app");
