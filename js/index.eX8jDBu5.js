import{o as t,c as ne,r as Q,h as tt,d as Re,a as re,e as Ae,b as s,f as e,g as V,w as I,i as q,t as p,F as L,j as W,k as C,l as ie,m as ze,n as be,p as je,q as Ee,u as st,s as Fe,P as Ye,v as ue,x as te,y as se,z as we,T as de,A as o,B as ot,C as x,D,E as at,G as oe,H as Ge,I as ye,J as Me,K as $e,L as Ue,M as pe,N as _e,O as Te,Q as xe,R as lt,S as nt,U as it,V as Ce,W as rt,X as dt}from"./vendor-DIDY8V1_-chunk.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))w(y);new MutationObserver(y=>{for(const N of y)if(N.type==="childList")for(const T of N.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&w(T)}).observe(document,{childList:!0,subtree:!0});function b(y){const N={};return y.integrity&&(N.integrity=y.integrity),y.referrerPolicy&&(N.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?N.credentials="include":y.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function w(y){if(y.ep)return;y.ep=!0;const N=b(y);fetch(y.href,N)}})();const ut={__name:"App",setup(i){return(r,b)=>{const w=Q("router-view");return t(),ne(w)}}};function We(){const i=H=>{var z;let M=H,B=M.response,X="";if(!M.response)return H.message;if(B.status===500){if(typeof B.data=="string")return B.data;if(B.data.content)return B.data.content;if(B.data.detail)return B.data.detail}if(B.status===401){const R=`${window.location.pathname}${window.location.search}`;X=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(R)}`}'>here</a> to login.`}else if(B.status===400){let R=M.response.data.errors;X=M.response.data.title||M.response.data,R&&(X+="<ul>");for(let h in R){let S=R[h];for(let g in R[h]){let G=S[g];X+=`<li>${G}</li>`}}R&&(X+="</ul>"),X||(X=M.message),X&&X.content&&(X=X.content)}else B.status===404?X=((z=B==null?void 0:B.data)==null?void 0:z.title)||(B==null?void 0:B.data)||"Record not found.":typeof B.data=="string"&&(X=M.message,X===""&&(X=`Error <b>Http ${B.status}</b>.<br/>Please contact the System Administrator.`));return X},r=H=>JSON.parse(JSON.stringify(H)),b=H=>{if(typeof H!="number")return H;var M=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return M.format(H)},w=(H,M,B)=>{const z={value:M,expiry:new Date().getTime()+B};debugger;localStorage.setItem(H,JSON.stringify(z))},y=H=>{debugger;const M=localStorage.getItem(H);if(!M)return null;const B=JSON.parse(M);return new Date().getTime()>B.expiry?(localStorage.removeItem(H),null):B.value},N="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:i,clone:r,toCurrency:b,moment:tt,localStorageSetWithExpiry:w,localStorageGetWithExpiry:y,setPageTab:(H,M)=>{var B=localStorage.getItem(N);B?B=JSON.parse(B):B={},B[H]=M,localStorage.setItem(N,JSON.stringify(B))},getPageTab:H=>{var M=localStorage.getItem(N);return M?M=JSON.parse(M):M={},M[H]}}}const ct=We(),Ke=JSON.parse(localStorage.getItem("user"))||{},mt=ct.moment.utc(Ke.exp*1e3),ft=mt.isAfter()?Ke:null,fe=Re({id:"auth",state:()=>({user:ft,returnUrl:null}),actions:{async login(i){try{this.user=i,localStorage.setItem("user",JSON.stringify(i))}catch(r){debugger;alert(r)}},logout(){this.user=null,localStorage.removeItem("user"),Xe.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),pt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(pt));const vt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Be=vt,Je=Re("msal",()=>{const i=re({auth:{clientId:Be.VITE_AUTH_CLIENT_ID,authority:Be.VITE_AUTH_AUTHORITY_URL,redirectUri:Be.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),r=re("");return{msalConfig:i,accessToken:r,setAccessToken:w=>{r.value=w}}}),He={$on:(...i)=>Ae.on(...i),$once:(...i)=>Ae.once(...i),$off:(...i)=>Ae.off(...i),$emit:(...i)=>Ae.emit(...i)};function gt(){const i=(N,T,K,H)=>{He.$emit("toast-message",{title:N,message:T,type:K,options:H})};return{success:(N,T,K={})=>{i(N,T,"success",K)},warning:(N,T,K={})=>{i(N,T,"warning",K)},info:(N,T,K={})=>{i(N,T,"info",K)},error:(N,T,K={})=>{i(N,T,"danger",K)}}}const he=(i,r)=>{const b=i.__vccOpts||i;for(const[w,y]of r)b[w]=y;return b},bt={data(){return{notifications:[],messages:[]}},async created(){const i=this;i.$bus.$on("event:notification-received",()=>{i.getUnreadNotifications()}),i.$bus.$on("event:notification-marked-as-read",r=>{i.notifications.some(w=>w.notificationId===r)&&i.getUnreadNotifications()}),i.$bus.$on("event:notification-removed",r=>{i.notifications.some(w=>w.notificationId===r)&&i.getUnreadNotifications()}),i.$bus.$on("event:chat-marked-as-read",i.onChatMarkedAsRead),i.$bus.$on("event:chat-message-received",i.onChatMessageReceived)},async mounted(){const i=this,r=i.$refs.notifications,b=i.$refs.messages;r&&r.offsetParent,b&&b.offsetParent&&await i.getUnreadChats()},methods:{async logout(){const i=this;try{await i.$util.axios.post("/api/accounts/logout").then(r=>{const b="/";i.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){i.$util.href(b)}})})}catch(r){i.$util.handleError(r)}},async onChatMarkedAsRead(i){let r=this,b=r.messages.find(w=>w.chatId===i);if(b){let w=r.messages.indexOf(b);r.messages.splice(w,1)}},async onChatMessageReceived(i){let r=this,b=r.messages.find(y=>y.chatId===i.chatId);if(b)b.lastMessageText=i.content;else{var w={chatId:i.chatId,isRead:!1,lastDateSent:i.dateSent,lastMessageText:i.content,senderFirstLastName:`${i.sender.firstName} ${i.sender.lastName}`,senderInitials:i.sender.initials,senderProfilePicture32:i.sender.profilePicture32,urlPicture:r.$util.getProfilePictureUrl(i.sender.profilePicture32,i.sender.initials)};r.messages.push(w)}},async getUnreadNotifications(){const i=this;try{await i.$util.axios.get("api/accounts/unread-notifications").then(r=>{i.notifications=r.data})}catch(r){i.$util.handleError(r)}},async getUnreadChats(){const i=this;try{await i.$util.axios.get("api/accounts/unread-chats").then(r=>{i.messages=r.data;for(let b in i.messages){let w=i.messages[b];i.$set(w,"urlPicture",i.$util.getProfilePictureUrl(w.senderProfilePicture32,w.senderInitials))}})}catch(r){i.$util.handleError(r)}},viewNotification(i){this.$bus.$emit("event:open-notification",i)},viewChat(i){this.$bus.$emit("event:open-chat",i)},showHiddenElements(){let r=this.$el.getElementsByClassName("initialHidden");for(let b=0;b<r.length;b++)r[b].classList.remove("invisible")}}},yt={mixins:[bt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const r=fe().user;return{user:r,username:r?r.nameFull:"Guest"}},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1},async openModalSearchUser747(i){this.$refs.refModalSearchUser747.open(i)}}},$t={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},wt={class:"container-md"},ht={class:"navbar-collapse collapse",id:"navbarSideCollapse"},_t={class:"navbar-nav"},kt={class:"nav-item dropdown"},St={class:"dropdown-menu","aria-labelledby":"dropdown01"},Tt={class:"nav-item dropdown"},Mt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ct={class:"navbar-nav ms-auto"},xt={class:"nav-item dropdown"},It={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Pt={class:"d-inline d-sm-none d-md-inline"},Ut={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Vt={class:"text-capitalize"};function Ot(i,r,b,w,y,N){const T=Q("router-link");return t(),s("nav",$t,[e("div",wt,[V(T,{class:"navbar-brand",to:"/member"},{default:I(()=>[q(p(b.appName),1)]),_:1}),r[14]||(r[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",ht,[e("ul",_t,[e("li",kt,[r[3]||(r[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",St,[e("li",null,[V(T,{class:"dropdown-item",to:"/member/announcements"},{default:I(()=>r[0]||(r[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),q(" Announcements ")])),_:1})]),e("li",null,[V(T,{class:"dropdown-item",to:"/member/posts"},{default:I(()=>r[1]||(r[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),q(" Posts ")])),_:1})]),e("li",null,[V(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:I(()=>r[2]||(r[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),q(" Yellow Pages ")])),_:1})])])]),e("li",Tt,[r[5]||(r[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Mt,[e("li",null,[V(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:I(()=>r[4]||(r[4]=[q(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Ct,[e("li",xt,[e("a",It,[e("span",null,[r[6]||(r[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Pt,p(y.username),1)])]),e("ul",Ut,[r[9]||(r[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),r[10]||(r[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),r[11]||(r[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),r[12]||(r[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),y.user&&y.user.roles.length>1?(t(!0),s(L,{key:0},W(y.user.roles,K=>(t(),s("li",null,[V(T,{to:`/${K.toLowerCase()}`,class:"dropdown-item"},{default:I(()=>[e("span",Vt,p(K),1)]),_:2},1032,["to"])]))),256)):C("",!0),e("li",null,[V(T,{to:"/",class:"dropdown-item"},{default:I(()=>r[7]||(r[7]=[q(" Main ")])),_:1})]),r[13]||(r[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[V(T,{to:"/account/logout",class:"dropdown-item"},{default:I(()=>r[8]||(r[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),q("Logout ")])),_:1})])])])])])])])}const At=he(yt,[["render",Ot]]),Et={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const i=document.getElementById("top");i&&i.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let i=this;if(!i.$el.getElementsByClassName)return;let r=i.$el.getElementsByClassName("initialHidden");for(let b=0;b<r.length;b++){let w=r[b];w.classList.remove("invisible"),w.classList.remove("d-none")}},close(){const i=this,r=document.referrer.toLowerCase();r&&r.includes("/account/login")?i.$router.go(-2):i.$router.go(-1)},toggle(i){const r=this;r.toggles[i]=!r.toggles[i],localStorage.setItem(r.togglesKey,JSON.stringify(r.toggles))}}},Dt={mixins:[Et],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1}}},Bt={class:"footer sticky-bottom"},Ht={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Lt={class:"container-md"},Nt={class:"navbar-text small p-0"},qt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Rt={class:"container-md"},zt={class:"navbar-nav nav-fill w-100"},jt={class:"nav-item dropup"},Ft={class:"dropdown-menu","aria-labelledby":"dropdown01"},Yt={class:"nav-item dropup"},Gt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function Wt(i,r,b,w,y,N){const T=Q("router-link");return t(),s("footer",Bt,[e("div",Ht,[e("div",Lt,[e("span",Nt,"©"+p(y.copyright),1)])]),e("nav",qt,[e("div",Rt,[e("ul",zt,[e("li",jt,[r[3]||(r[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Ft,[e("li",null,[V(T,{class:"dropdown-item",to:"/member/announcements"},{default:I(()=>r[0]||(r[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),q(" Announcements ")])),_:1})]),e("li",null,[V(T,{class:"dropdown-item",to:"/member/posts"},{default:I(()=>r[1]||(r[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),q(" Posts ")])),_:1})]),e("li",null,[V(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:I(()=>r[2]||(r[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),q(" Yellow Pages ")])),_:1})])])]),e("li",Yt,[r[5]||(r[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",Gt,[e("li",null,[V(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:I(()=>r[4]||(r[4]=[q(" Property Monthly Dues ")])),_:1})])])])])])])])}const Kt=he(Dt,[["render",Wt]]),Jt={name:"AdminLayout",components:{TopNav:At,BottomNav:Kt},inject:["$config"],mounted(){const r=this.$config;document.title=`Account - ${r.appName}`}},Qt={class:"d-flex flex-column vh-100"};function Xt(i,r,b,w,y,N){const T=Q("Toasts"),K=Q("router-view");return t(),s("div",Qt,[V(T),V(K,{class:"flex-grow-1 mb-2"})])}const Zt=he(Jt,[["render",Xt]]),es={__name:"index",setup(i){return fe().user,ie(()=>{}),(b,w)=>(t(),s("div",null,w[0]||(w[0]=[ze('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ts={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},ss=ts;function os(){be("$config");const i=ss.VITE_API_URL,r=je.create({baseURL:i});return Ee.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),r.interceptors.request.use(b=>{Ee.start();const{user:w}=fe();return w&&w.token&&(b.headers?(b.headers.Authorization||(b.headers.Authorization=`Bearer ${w.token}`),b.headers["Access-Control-Allow-Origin"]||(b.headers["Access-Control-Allow-Origin"]="*")):b.headers={Authorization:`Bearer ${w.token}`,"Access-Control-Allow-Origin":"*"}),b}),r.interceptors.response.use(b=>(Ee.done(),b),b=>{throw Ee.done(),b}),r}function ce(i){if(!i.appTitle)throw Error("App Title is required.");if(!i.pageTitle)throw Error("Page Title is required.");const r=st(),b=Fe(),w=os(),y=We(),N=gt(),K=fe().user,H=()=>K&&K.roles&&K.roles.includes("System"),M=()=>K&&K.roles&&K.roles.includes("administrator"),B=()=>K&&K.roles&&K.roles.includes("employee"),X=()=>K&&K.roles&&K.roles.includes("Member"),z=()=>{let l=r.path;return r.query.returnUrl&&(l=r.query.returnUrl),l=`?returnUrl=${encodeURIComponent(l)}`,l},R=async()=>{const l=document.referrer.toLowerCase();l&&l.includes("/accounts/login")?await b.go(-2):await b.go(-1)},h=l=>{var P;const j=r.path,a=(P=r.query)==null?void 0:P.returnUrl;a&&!(j.startsWith(a)||a.startsWith(j))?b.push(a):b.push(l)},S=i.appTitle,g=i.pageTitle,G=re(!1),J=re(new Map),n=re(""),u=re(""),F=re("");return{appTitle:S,pageTitle:g,busy:G,validations:J,infoMessage:n,warningMessage:u,errorMessage:F,router:b,route:r,axios:w,utils:y,toasts:N,close:R,closeWithReturnUrl:h,generateReturnUrl:z,security:{userId:K?K.userId:"",isSystem:H(),isAdministrator:M(),isEmployee:B(),isMember:X()}}}const as={class:"h-100 d-flex align-items-center justify-content-center"},ls={class:"form-signin w-100 m-auto"},ns={class:"h3 mb-3 fw-normal"},is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},rs=["innerHTML"],ds={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},us={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(i){be("$config");const r=fe(),b=Je(),w=new Ye(b.msalConfig),y=ue({username:"",password:""}),N={username:{required:te.withMessage("Username is required.",se),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",se),$autoDirty:!0,$lazy:!0}},T=we(N,y),{appTitle:K,pageTitle:H,busy:M,isDirty:B,validations:X,infoMessage:z,warningMessage:R,errorMessage:h,router:S,route:g,axios:G,utils:J,toasts:n,close:u,security:F}=ce({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ie(async()=>{await w.initialize()});const l=async()=>{await w.loginPopup({}).then(()=>{debugger;const P=w.getAllAccounts()[0];w.setActiveAccount(P)}).catch(a=>{console.error(`error during authentication: ${a}`)});var j={account:w.getActiveAccount(),scopes:[]};await w.acquireTokenSilent(j).then(a=>{debugger;const c=a.account.idToken,d=ot(c);if(d.token=a.accessToken,console.log(a),!d.roles){debugger;d.roles=[]}d.userId=d.sub,r.login(d);var _=g.query.returnUrl;_?S.push(decodeURIComponent(_)):d.roles.length===1?S.push(`/${d.roles[0].toLowerCase()}`):S.push("/")}).catch(a=>{console.error(`error during acquireTokenSilent: ${a}`)})};return(j,a)=>(t(),ne(de,null,{default:I(()=>[e("div",as,[e("main",ls,[e("div",null,[e("h1",ns,p(o(K)),1),e("div",null,[o(h)?(t(),s("div",is,[a[1]||(a[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(h)},null,8,rs)])):C("",!0),o(T).$error?(t(),s("div",ds,[a[2]||(a[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(T).$errors,P=>(t(),s("li",{key:P.$uid},p(P.$message),1))),128))])])):C("",!0)]),e("button",{onClick:a[0]||(a[0]=P=>l()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},cs=he(us,[["__scopeId","data-v-896956d0"]]),ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={__name:"logout",setup(i){const r=fe();return r.user,ie(async()=>{r.logoutWithRedirect()}),(b,w)=>(t(),s("div",ms,w[0]||(w[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[q(" You have logged out from HOA MS."),e("br"),q(" Click "),e("a",{href:"/",class:"d-inline"},"here"),q(" to go back to home page. ")])],-1)])))}},ps={class:"h-100 d-flex align-items-center justify-content-center"},vs={class:"card m-3"},gs={class:"card-header"},bs={class:"card-body"},ys={class:"m-2"},$s={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ws=["innerHTML"],hs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},_s={class:"row row-cols-1 row-cols-sm-3"},ks={class:"col-sm"},Ss={class:"form-group"},Ts={key:0,class:"d-block invalid-feedback"},Ms={class:"col-sm"},Cs={class:"form-group"},xs={key:0,class:"d-block invalid-feedback"},Is={class:"col-sm"},Ps={class:"form-group"},Us={key:0,class:"d-block invalid-feedback"},Vs={class:"row row-cols-1 row-cols-sm-3"},Os={class:"col"},As={class:"form-group"},Es={key:0,class:"d-block invalid-feedback"},Ds={class:"col"},Bs={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Ls={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col-sm"},qs={class:"form-group"},Rs={key:0,class:"d-block invalid-feedback"},zs={class:"col-sm"},js={class:"form-group"},Fs={key:0,class:"d-block invalid-feedback"},Ys={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},Gs={class:"col"},Ws=["disabled"],Ks={class:"col"},Js={class:"col"},Qs={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(i){const r=ue({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),b=(F,l)=>F===l.password,w={firstName:{required:te.withMessage("First name is required.",se),$autoDirty:!0,$lazy:!0},middleName:{required:te.withMessage("Middle name is required.",se),$autoDirty:!0,$lazy:!0},lastName:{required:te.withMessage("Last name is required.",se),$autoDirty:!0,$lazy:!0},phoneNumber:{required:te.withMessage("Phone number is required.",se),$autoDirty:!0,$lazy:!0},email:{required:te.withMessage("Email is required.",se),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",se),$autoDirty:!0,$lazy:!0},confirmPassword:{required:te.withMessage("Confirm password is required.",se),confirmSamePassword:te.withMessage("Password and confirm passwrod are different.",b),$autoDirty:!0,$lazy:!0}},y=we(w,r),{appTitle:N,pageTitle:T,busy:K,isDirty:H,validations:M,infoMessage:B,warningMessage:X,errorMessage:z,router:R,axios:h,utils:S,toasts:g,close:G,security:J}=ce({appTitle:"HOA MS",pageTitle:"Register User"}),n=be("$config");ie(()=>{});const u=async()=>{const F=r;if(K.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}z.value=null;try{K.value=!0;const j=S.clone(F);j.tenantid=n.tenantId;debugger;await h({method:"post",url:"/api/v1/accounts/register",data:j}).then(a=>{g.success("Register","Registration was successfull.",{onClose:async()=>{await R.push("/accounts/login")}})})}catch(j){z.value=S.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{K.value=!1}};return(F,l)=>{const j=Q("router-link");return t(),ne(de,null,{default:I(()=>[e("div",ps,[e("div",vs,[e("h4",gs,p(o(T)),1),e("div",bs,[e("div",ys,[o(z)?(t(),s("div",$s,[l[8]||(l[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,ws)])):C("",!0),o(y).$error?(t(),s("div",hs,[l[9]||(l[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(y).$errors,a=>(t(),s("li",{key:a.$uid},p(a.$message),1))),128))])])):C("",!0)]),e("div",_s,[e("div",ks,[e("div",Ss,[l[10]||(l[10]=e("label",null,"First Name",-1)),x(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>r.firstName=a),type:"text",class:"form-control"},null,512),[[D,r.firstName]]),o(y).firstName.$error?(t(),s("div",Ts,[(t(!0),s(L,null,W(o(y).firstName.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",Ms,[e("div",Cs,[l[11]||(l[11]=e("label",null,"Middle Name",-1)),x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>r.middleName=a),type:"text",class:"form-control"},null,512),[[D,r.middleName]]),o(y).middleName.$error?(t(),s("div",xs,[(t(!0),s(L,null,W(o(y).middleName.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",Is,[e("div",Ps,[l[12]||(l[12]=e("label",null,"Last Name",-1)),x(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>r.lastName=a),type:"text",class:"form-control"},null,512),[[D,r.lastName]]),o(y).lastName.$error?(t(),s("div",Us,[(t(!0),s(L,null,W(o(y).lastName.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])])]),e("div",Vs,[e("div",Os,[e("div",As,[l[13]||(l[13]=e("label",null,"Phone Number",-1)),x(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>r.phoneNumber=a),type:"tel",class:"form-control"},null,512),[[D,r.phoneNumber]]),o(y).phoneNumber.$error?(t(),s("div",Es,[(t(!0),s(L,null,W(o(y).phoneNumber.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",Ds,[e("div",Bs,[l[14]||(l[14]=e("label",null,"Email",-1)),x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>r.email=a),type:"email",class:"form-control"},null,512),[[D,r.email]]),o(y).email.$error?(t(),s("div",Hs,[(t(!0),s(L,null,W(o(y).email.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])])]),e("div",Ls,[e("div",Ns,[e("div",qs,[l[15]||(l[15]=e("label",null,"Password",-1)),x(e("input",{"onUpdate:modelValue":l[5]||(l[5]=a=>r.password=a),type:"password",class:"form-control"},null,512),[[D,r.password]]),o(y).password.$error?(t(),s("div",Rs,[(t(!0),s(L,null,W(o(y).password.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",zs,[e("div",js,[l[16]||(l[16]=e("label",null,"Confirm Password",-1)),x(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>r.confirmPassword=a),type:"password",class:"form-control"},null,512),[[D,r.confirmPassword]]),o(y).confirmPassword.$error?(t(),s("div",Fs,[(t(!0),s(L,null,W(o(y).confirmPassword.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])])]),e("div",Ys,[e("div",Gs,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:l[7]||(l[7]=a=>u()),class:"btn btn-primary w-100"},l[17]||(l[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),q("Register ")]),8,Ws)]),e("div",Ks,[V(j,{to:"/",class:"btn btn-outline-primary w-100"},{default:I(()=>l[18]||(l[18]=[q("Home")])),_:1})]),e("div",Js,[V(j,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:I(()=>l[19]||(l[19]=[q("Login")])),_:1})])])])])])]),_:1})}}},Xs={path:"/accounts",component:Zt,props:!1,meta:{},children:[{path:"",component:es},{path:"login",component:cs},{path:"logout",component:fs},{path:"register",component:Qs}]};function Qe(){const i=Fe(),r=H=>window.location.href.indexOf(H)>-1,b=H=>localStorage.getItem("data-bs-theme")||H,w=H=>{document.documentElement.setAttribute("data-bs-theme",H),localStorage.setItem("data-bs-theme",H)},y=async()=>await je.get("https://bootswatch.com/api/5.json").then(H=>H.data),N=H=>{const M=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");M&&H?(M.setAttribute("href",H),localStorage.setItem("bootswatch-theme",H)):alert("cannot query css link")},T=H=>{K(),i.push(H)},K=()=>{if(screen.width<576){const M=document.getElementById("navbarCollapse");if(M){const B=at.getInstance(M);B&&B.hide()}}};return{isActive:r,getCurrentBsTheme:b,changeBsTheme:w,getBootswatch:y,changeTheme:N,navigate:T,collapseNavbar:K}}const Zs={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},eo={class:"container-md"},to={class:"navbar-collapse collapse",id:"navbarCollapse"},so={class:"navbar-nav"},oo={class:"nav-item"},ao={class:"nav-item dropdown"},lo={class:"dropdown-menu","aria-labelledby":"dropdown01"},no={class:"nav-item"},io={class:"nav-item dropdown"},ro={class:"dropdown-menu","aria-labelledby":"dropdown01"},uo={class:"nav-item dropdown d-none"},co={class:"dropdown-menu","aria-labelledby":"dropdown01"},mo={class:"nav-item dropdown d-none"},fo={class:"dropdown-menu","aria-labelledby":"dropdown01"},po={class:"navbar-nav ms-auto"},vo={class:"nav-item dropdown"},go={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},bo=["onClick"],yo={class:"nav-item dropdown"},$o={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},wo={class:"d-inline d-sm-none d-md-inline"},ho={key:0},_o={key:1},ko={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},So={key:0},To={key:1},Mo={__name:"topNav",props:{appName:{type:String,default:"Sony FAST"}},setup(i){const r=Je(),{isActive:b,getCurrentBsTheme:w,changeBsTheme:y,getBootswatch:N,changeTheme:T,navigate:K,collapseNavbar:H}=Qe(),M=fe(),B=M.user,X=ue({user:B,username:B?B.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});ie(async()=>{const S=X;S.bootswatch=await N();const g=w(S.bsTheme);g&&(S.bsTheme=g,y(S.bsTheme));const G=localStorage.getItem("bootswatch-theme");G&&(S.currentTheme=G,T(G))});const z=S=>{T(S),X.currentTheme=S,H()},R=S=>{y(S),X.bsTheme=S,H()},h=async()=>{M.logoutWithRedirect();const S=new Ye(r.msalConfig);await S.initialize();const g={mainWindowRedirectUri:"/"};await S.logoutPopup(g)};return(S,g)=>{const G=Q("router-link");return t(),ne(de,null,{default:I(()=>[e("nav",Zs,[e("div",eo,[V(G,{class:"navbar-brand",to:"/administrator"},{default:I(()=>[q(p(i.appName),1)]),_:1}),g[27]||(g[27]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",to,[e("ul",so,[e("li",oo,[V(G,{to:"/videos",onClick:o(H),class:"nav-link"},{default:I(()=>g[3]||(g[3]=[q(" Videos ")])),_:1},8,["onClick"])]),e("li",ao,[g[6]||(g[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"}," Sources ",-1)),e("ul",lo,[e("li",null,[V(G,{to:"/source-groups",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[4]||(g[4]=[q(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/source-locations",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[5]||(g[5]=[q(" Locations ")])),_:1},8,["onClick"])])])]),e("li",no,[V(G,{to:"/vod-sources",onClick:o(H),class:"nav-link"},{default:I(()=>g[7]||(g[7]=[q(" Video on Demand (VOD) ")])),_:1},8,["onClick"])]),e("li",io,[g[10]||(g[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"}," Channel Assembly ",-1)),e("ul",ro,[e("li",null,[V(G,{to:"/program-templates",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[8]||(g[8]=[q(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/channels",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[9]||(g[9]=[q(" Channels ")])),_:1},8,["onClick"])])])]),e("li",uo,[g[14]||(g[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-film me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Movies")])],-1)),e("ul",co,[e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[11]||(g[11]=[q(" Movies ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[12]||(g[12]=[q(" Movie Alphas ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[13]||(g[13]=[q(" Movie Alpha Media ")])),_:1},8,["onClick"])])])]),e("li",mo,[g[19]||(g[19]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-tv me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Series")])],-1)),e("ul",fo,[e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[15]||(g[15]=[q(" Series ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[16]||(g[16]=[q(" Seasons ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[17]||(g[17]=[q(" Episodes ")])),_:1},8,["onClick"])]),e("li",null,[V(G,{to:"/movies",onClick:o(H),class:"dropdown-item"},{default:I(()=>g[18]||(g[18]=[q(" Episode Alphas ")])),_:1},8,["onClick"])])])])]),e("ul",po,[e("li",vo,[g[23]||(g[23]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),q("Themes ")],-1)),e("ul",go,[e("li",null,[X.bsTheme==="dark"?(t(),s("button",{key:0,onClick:g[0]||(g[0]=J=>R("light")),class:"dropdown-item"},g[20]||(g[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),q("Dark Mode ")]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=J=>R("dark")),class:"dropdown-item"},g[21]||(g[21]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),q("Light Mode ")])))]),g[22]||(g[22]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(L,null,W(X.bootswatch.themes,J=>(t(),s("li",null,[e("button",{onClick:n=>z(J.cssCdn),class:oe(["dropdown-item",{active:X.currentTheme===J.cssCdn}])},p(J.name),11,bo)]))),256))])]),e("li",yo,[e("a",$o,[e("span",null,[g[24]||(g[24]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",wo,[o(B)?(t(),s("span",ho,p(o(B).name),1)):(t(),s("span",_o," Guest "))])])]),e("ul",ko,[o(B)?(t(),s("li",So,[e("button",{onClick:g[2]||(g[2]=J=>h()),class:"dropdown-item"},g[25]||(g[25]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),q("Logout ")]))])):(t(),s("li",To,[V(G,{to:"/accounts/login",class:"dropdown-item"},{default:I(()=>g[26]||(g[26]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),q("Login ")])),_:1})]))])])])])])])]),_:1})}}},Co={class:"footer sticky-bottom"},xo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Io={class:"container-md"},Po={class:"navbar-text small p-0"},Uo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(i){Qe();const r=be("$config"),w=fe().user;let N=new Date().getFullYear();const T=ue({user:w,username:w?w.nameFull:"Guest",copyright:`2020-${N} ${r.appName}`});return ie(async()=>{}),(K,H)=>(t(),s("footer",Co,[e("div",xo,[e("div",Io,[e("span",Po,"©"+p(T.copyright),1)])])]))}},Vo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){He.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(i){i.message&&this.addMessage(i.title,i.message,i.type,i.options)},async addMessage(i,r,b,w={}){var y={id:this.count++,title:i,message:r,type:b,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};y=Object.assign({},y,w),this.messages.unshift(y),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),y.timeOut>0&&await this.startTimeout(y)},async startTimeout(i,r=0){const b=this,w=performance.now(),y=async()=>{i.animationFrame=requestAnimationFrame(async N=>{const T=N+r-w;if(!b.exists(i)||i.paused){cancelAnimationFrame(i.animationFrame);return}else if(T<i.timeOut){const K=T/i.timeOut;i.progress=K,await y()}else{i.progress=1,cancelAnimationFrame(i.animationFrame),b.remove(i);return}})};await y()},pauseProgress(i){i.timeOut<=0||(i.paused=!0)},async resumeProgress(i){i.timeOut<=0||(i.paused=!1,await this.startTimeout(i,i.timeOut*i.progress))},getCurrentProgress(i){return Math.round(i.progress*100)===100?100:i.progress*100},getIconClass(i){const r=i.type;let b="";switch(r){case"success":b="fas fa-fw fa-circle-check";break;case"info":b="fas fa-fw fa-circle-info";break;case"warning":b="fas fa-fw fa-circle-exclamation";break;case"danger":b="fas fa-fw fa-triangle-exclamation";break}let w=b;return i.rtl?"icon-right "+w:"icon-left "+w},async remove(i){const r=this.messages.findIndex(b=>b.id===i.id);this.messages.splice(r,1),typeof i.onClose=="function"&&await i.onClose()},exists(i){return this.messages.findIndex(b=>b.id===i.id)!==-1}}},Oo={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Ao=["onMouseover","onMouseout"],Eo={class:"me-auto text-white"},Do=["onClick"],Bo={class:"toast-body"},Ho=["innerHTML"],Lo={key:0,class:"progress m-1",style:{height:"4px"}};function No(i,r,b,w,y,N){return t(),ne(de,null,{default:I(()=>[e("div",Oo,[V(ye,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:I(()=>[(t(!0),s(L,null,W(y.messages,T=>(t(),s("div",{key:T.id,class:oe(["toast show mb-2 ms-auto",`border-${T.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:K=>N.pauseProgress(T),onMouseout:K=>N.resumeProgress(T)},[e("div",{class:oe(["toast-header",`bg-${T.type}`])},[e("strong",Eo,[e("i",{class:oe([N.getIconClass(T),"me-1"])},null,2),q(p(T.title),1)]),T.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:K=>N.remove(T)},r[0]||(r[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Do)):C("",!0)],2),e("div",Bo,[e("div",{innerHTML:T.message},null,8,Ho)]),T.timeOut>0&&T.showProgress?(t(),s("div",Lo,[e("div",{class:oe(`bg-${T.type}`),style:Ge({width:N.getCurrentProgress(T)+"%"})},null,6)])):C("",!0)],42,Ao))),128))]),_:1})])]),_:1})}const qo=he(Vo,[["render",No],["__scopeId","data-v-5272bd9a"]]),Ro={name:"AdminLayout",components:{TopNav:Mo,BottomNav:Uo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},zo={class:"d-flex flex-column vh-100"};function jo(i,r,b,w,y,N){const T=Q("Toasts"),K=Q("TopNav"),H=Q("router-view"),M=Q("BottomNav");return t(),s("div",zo,[V(T),V(K),V(H,{class:"flex-grow-1 mb-2"}),r[0]||(r[0]=e("div",{class:"pt-2"},null,-1)),V(M)])}const Fo=he(Ro,[["render",jo]]),Yo={class:"d-flex flex-row justify-content-end"},Go={class:"mt-2 container-md"},Wo={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ko=["innerHTML"],Jo={class:"text-center"},Qo={class:"card card-body mb-2 d-none"},Xo={key:0,class:"fas fa-fw fa-circle-check text-success"},Zo={key:1,class:"fas fa-fw fa-times-circle text-danger"},ea={key:0,class:"fas fa-fw fa-circle-check text-success"},ta={key:1,class:"fas fa-fw fa-times-circle text-danger"},sa={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},oa={class:"col"},aa={class:"card h-100 shadow-sm"},la={class:"card-body"},na={class:"col"},ia={class:"card h-100 shadow-sm"},ra={class:"card-body"},da={__name:"Index",setup(i){const{appTitle:r,pageTitle:b,busy:w,isDirty:y,validations:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,generateReturnUrl:h,security:S}=ce({appTitle:"ARC AIO",pageTitle:"Dashboard"});be("$config"),fe().user;const G=ue({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),ie(async()=>{});const J=async()=>{const F=G;if(!w.value)try{w.value=!0;const l="/api/v1/dashboard/administrators/";F.item=[],await B.get(l).then(j=>{F.item=j.data})}catch(l){H.value=X.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}},n=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await B.get("/api/v1/channels/reset/").then(j=>{z.success("Reset All Data","Reset data was successful.")})}catch(l){H.value=X.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}},u=async()=>{await J()};return(F,l)=>{const j=Q("PageHeader"),a=Q("router-link");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(j,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",Yo,[e("button",{onClick:l[0]||(l[0]=P=>u()),class:"ms-2 btn btn-secondary"},l[2]||(l[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Go,[o(H)?(t(),s("div",Wo,[l[3]||(l[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(H))},null,8,Ko)])):C("",!0),l[16]||(l[16]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),q("UNDER CONSTRUCTION ")],-1)),e("div",Jo,[e("button",{onClick:l[1]||(l[1]=P=>n()),class:"btn btn-warning"},l[4]||(l[4]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),q("Reset All Data ")]))]),e("div",Qo,[l[7]||(l[7]=q(" Security ")),e("ul",null,[e("li",null,[o(S).isAdministrator?(t(),s("span",Xo)):(t(),s("span",Zo)),l[5]||(l[5]=q(" Administrator "))]),e("li",null,[o(S).isEmployee?(t(),s("span",ea)):(t(),s("span",ta)),l[6]||(l[6]=q(" Employee "))])])]),e("div",sa,[e("div",oa,[e("div",aa,[l[9]||(l[9]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),q("Human Resources ")])],-1)),e("div",la,[e("ul",null,[e("li",null,[V(a,{to:"/movies"},{default:I(()=>l[8]||(l[8]=[q(" Employees ")])),_:1})])])])])]),e("div",na,[e("div",ia,[l[15]||(l[15]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),q("TBD ")])],-1)),e("div",ra,[e("ul",null,[e("li",null,[V(a,{to:"/media-videos"},{default:I(()=>l[10]||(l[10]=[q(" TBD ")])),_:1})]),e("li",null,[V(a,{to:"/movies"},{default:I(()=>l[11]||(l[11]=[q(" TBD ")])),_:1})]),e("li",null,[V(a,{to:"/movies"},{default:I(()=>l[12]||(l[12]=[q(" TBD ")])),_:1})]),e("li",null,[V(a,{to:"/movies"},{default:I(()=>l[13]||(l[13]=[q(" TBD ")])),_:1})]),e("li",null,[V(a,{to:"/movies"},{default:I(()=>l[14]||(l[14]=[q(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},ua={class:"d-flex justify-content-end"},ca=["disabled"],ma={class:"input-group"},fa={class:"row row-cols-1 row-cols-sm-2 mt-3"},pa={class:"col text-center mb-2"},va=["src"],ga={class:"col"},ba={class:"form-floating mb-2"},ya={key:0,class:"d-block invalid-feedback"},$a={class:"form-floating mb-2"},wa={class:"row row-cols-sm-2"},ha={class:"col"},_a={class:"form-floating mb-2"},ka={class:"col"},Sa={class:"form-floating mb-2"},Ta={class:"row row-cols-sm-2"},Ma={class:"col"},Ca={class:"form-floating mb-2"},xa={class:"col"},Ia={class:"form-floating mb-2"},Pa={class:"col"},Ua={class:"form-floating mb-2"},Va={class:"col"},Oa={class:"form-floating mb-2"},Ne="YYYY-MM-DD HH:mm",Aa={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"ARC AIO",pageTitle:"Add User"}),R=i,h=M.moment().local();h.format(Ne),h.add(24,"hours").format(Ne);const S=re("a22de760-358d-4a0e-83ad-2624a5c11f73"),g=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),G={item:{userId:{required:te.withMessage("User Id is required.",se),$autoDirty:!0,$lazy:!0}}},J=we(G,g);ie(async()=>{});const n=async()=>{const F=g;if(!w.value)try{w.value=!0,F.item=null;const l=`/api/v1/users/get-from-entra-id/${S.value}`;await H.get(l).then(j=>{F.item=j.data})}catch(l){T.value=M.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}},u=async()=>{const F=g;if(w.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="",await H.post(`/api/v1/users/add-from-entra-id/${F.item.userId}`).then(j=>{B.success("Add User","User added",{onClose:async()=>{const a=`${R.urlView}/${j.data}`;await K.push(a)}})})}catch(j){T.value=M.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{w.value=!1}};return(F,l)=>{const j=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",ua,[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:l[0]||(l[0]=c=>u()),class:"btn btn-primary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ca),V(j,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(P,{errorMessage:o(T),vuelidate:o(J)},{default:I(()=>[e("div",null,[e("div",null,[e("div",ma,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>S.value=c),onKeyup:l[2]||(l[2]=Me(c=>n(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[D,S.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[3]||(l[3]=c=>n())},l[14]||(l[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",fa,[e("div",pa,[e("img",{src:g.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,va)]),e("div",ga,[e("div",ba,[x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=c=>g.item.userId=c),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[D,g.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1)),o(J).item.userId.$error?(t(),s("div",ya,[(t(!0),s(L,null,W(o(J).item.userId.$errors,c=>(t(),s("div",{key:c.$uid},p(c.$message),1))),128))])):C("",!0)]),e("div",$a,[x(e("input",{"onUpdate:modelValue":l[5]||(l[5]=c=>g.item.displayName=c),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[D,g.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",wa,[e("div",ha,[e("div",_a,[x(e("input",{"onUpdate:modelValue":l[6]||(l[6]=c=>g.item.givenName=c),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[D,g.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",ka,[e("div",Sa,[x(e("input",{"onUpdate:modelValue":l[7]||(l[7]=c=>g.item.surname=c),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[D,g.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Ta,[e("div",Ma,[e("div",Ca,[x(e("input",{"onUpdate:modelValue":l[8]||(l[8]=c=>g.item.email=c),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[D,g.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",xa,[e("div",Ia,[x(e("input",{"onUpdate:modelValue":l[9]||(l[9]=c=>g.item.mobilePhone=c),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[D,g.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Pa,[e("div",Ua,[x(e("input",{"onUpdate:modelValue":l[10]||(l[10]=c=>g.item.principalName=c),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[D,g.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Va,[e("div",Oa,[x(e("input",{"onUpdate:modelValue":l[11]||(l[11]=c=>g.item.jobTitle=c),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[D,g.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Ie(i){if(!i.cacheKey)throw Error("Cache Key required.");if(!i.baseUrl)throw Error("Base Url required.");const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,closeWithReturnUrl:z,generateReturnUrl:R,security:h}=ce({appTitle:i.appTitle,pageTitle:i.pageTitle}),S=JSON.parse(JSON.stringify(i.filter));S.pageIndex=S.pageIndex||1,S.pageSize=S.pageSize||15,S.sortField=S.sortField||"",S.sortOrder=S.sortOrder||1,S.updateUrl=S.updateUrl||!1,S.items=S.items||[],S.query=S.query||{},S.query.criteria=S.query.criteria||"";const g=re(S),G=()=>{var d;if(w.value){console.log("Paginated search is currently busy.");return}const a=JSON.parse(localStorage.getItem(i.cacheKey))||{},P=new URLSearchParams(window.location.search),c=g.value;c.query.criteria=P.get("c")||a.criteria||c.query.criteria||"",c.pageIndex=parseInt(P.get("p"),10)||a.pageIndex||c.pageIndex||1,c.pageSize=parseInt(P.get("s"),10)||a.pageSize||c.pageSize||5,c.sortField=P.get("sf")||a.sortField||c.sortField||"",c.sortOrder=parseInt(P.get("so"),10)||a.sortOrder||c.sortOrder||1,c.visible=a.visible||c.visible,(d=i.initializeFilter)==null||d.call(i,g,i.cacheKey)},J=()=>{if(i.getQuery)return i.getQuery(g.value);{const a=g.value;return["?c=",encodeURIComponent(a.query.criteria),"&p=",a.pageIndex,"&s=",a.pageSize,"&sf=",a.sortField,"&so=",a.sortOrder].join("")}},n=()=>{if(i.saveQuery)i.saveQuery(g.value,i.cacheKey);else{const a=g.value;localStorage.setItem(i.cacheKey,JSON.stringify({criteria:a.query.criteria,pageIndex:a.pageIndex,pageSize:a.pageSize,sortField:a.sortField,sortOrder:a.sortOrder,visible:a.visible}))}};return{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,closeWithReturnUrl:z,generateReturnUrl:R,security:h,filter:g,initializeFilter:G,getQuery:J,saveQuery:n,search:async a=>{var c;let P=g.value;if(w.value){console.log("Paginated search is currently busy.");return}a>0&&(P.pageIndex=a);try{w.value=!0,T.value="";const d=J();P.selected=null,await H(`${i.baseUrl}/${d}`).then(async _=>{var U;Array.isArray(_.data)?P.items=_.data:P=Object.assign(P,_.data);let k=location.pathname;k.endsWith("/")?k+=d:k+="/"+d,P.updateUrl&&window.history.replaceState(d,`${r}-search`,k),P.items.forEach($=>{$.expand=!1}),n(),(U=i.successAction)==null||U.call(i,g.value)})}catch(d){if(localStorage.removeItem(i.cacheKey),i.failAction)i.failAction(d);else{const _=M.getErrorMessageAsHtml(d);T.value=_,B.error("Error Occured",_)}}finally{w.value=!1,(c=i.finalAction)==null||c.call(i)}},getRowNumber:a=>{const P=g.value;return(P.pageIndex-1)*P.pageSize+(a+1)},setSelected:a=>{const P=g.value;P.selected&&a&&P.selected===a?P.selected=null:(P.selected&&(P.selected.expand=!1),P.selected=a,P.selected.expand=!0)},isSelected:a=>{const P=g.value;return a===null||P.selected===null?!1:a===P.selected}}}const Ea={class:"d-flex justify-content-end"},Da={key:0},Ba={class:"ms-1"},Ha={class:"input-group"},La={class:"table-responsive"},Na={class:"table table-hover mb-0"},qa=["textContent"],Ra=["src"],za="/api/v1/users/search",ja={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,security:h,filter:S,initializeFilter:g,getQuery:G,saveQuery:J,search:n,getRowNumber:u,setSelected:F,isSelected:l}=Ie({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${b==null?void 0:b.userId}/users/search`,baseUrl:za,filter:{updateUrl:!0}});return ie(async()=>{g(),await n()}),(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("m-pagination"),_=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-users",pageTitle:o(y)},{default:I(()=>[e("div",Ea,[o(h).isAdministrator?(t(),s("div",Da,[V(P,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",Ba,[e("div",Ha,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=k=>o(S).query.criteria=k),onKeyup:a[1]||(a[1]=Me(k=>o(n)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=k=>o(n)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(_,{errorMessage:o(H)},{default:I(()=>[e("div",La,[e("table",Na,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(S).items,(k,U)=>(t(),s("tr",{key:k.movieId},[e("td",{textContent:p(o(u)(U)),class:"text-center"},null,8,qa),e("td",null,[k.photoBase64?(t(),s("img",{key:0,src:k.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ra)):C("",!0)]),e("td",null,[V(P,{to:`${i.urlView}/${k.userId}`,class:"d-inline-block text-truncate"},{default:I(()=>[q(p(k.displayName),1)]),_:2},1032,["to"])]),e("td",null,p(k.email),1),e("td",null,p(k.jobTitle),1)]))),128))]),_:1},512),[[$e,o(S).items.length>0]])])]),V(d,{filter:o(S),search:o(n),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Fa={class:"d-flex flex-row justify-content-end"},Ya={key:0},Ga={class:"row row-cols-1 row-cols-sm-2 mt-3"},Wa={class:"col text-center mb-2"},Ka=["src"],Ja={class:"col"},Qa={class:"form-floating mb-2"},Xa={class:"form-floating mb-2"},Za={class:"row row-cols-sm-2"},el={class:"col"},tl={class:"form-floating mb-2"},sl={class:"col"},ol={class:"form-floating mb-2"},al={class:"row row-cols-sm-2"},ll={class:"col"},nl={class:"form-floating mb-2"},il={class:"col"},rl={class:"form-floating mb-2"},dl={class:"col"},ul={class:"form-floating mb-2"},cl={class:"col"},ml={class:"form-floating mb-2"},fl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"ARC CMS",pageTitle:"View User"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null});ie(async()=>{await u()});const u=async()=>{const j=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const a=`/api/v1/users/get-from-db/${r.id}/`;await X.get(a).then(P=>{j.item=P.data})}catch(a){M.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},F=async()=>{await u()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/users/${r.id}/`).then(a=>{R.warning("Delete User","User was deleted.",{async onClose(){await B.push(r.urlMain)}})})}catch(a){M.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-user",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",Fa,[o(G).isAdministrator?(t(),s(L,{key:0},[V(P,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:I(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=_=>l()),class:"ms-1 btn btn-warning"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:a[1]||(a[1]=_=>F()),class:"ms-2 btn btn-secondary"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=_=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(d,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",Ya,[e("div",null,[e("div",Ga,[e("div",Wa,[e("img",{src:n.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,Ka)]),e("div",Ja,[e("div",Qa,[x(e("input",{"onUpdate:modelValue":a[3]||(a[3]=_=>n.item.userId=_),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[D,n.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",Xa,[x(e("input",{"onUpdate:modelValue":a[4]||(a[4]=_=>n.item.displayName=_),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[D,n.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Za,[e("div",el,[e("div",tl,[x(e("input",{"onUpdate:modelValue":a[5]||(a[5]=_=>n.item.givenName=_),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[D,n.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",sl,[e("div",ol,[x(e("input",{"onUpdate:modelValue":a[6]||(a[6]=_=>n.item.surname=_),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[D,n.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",al,[e("div",ll,[e("div",nl,[x(e("input",{"onUpdate:modelValue":a[7]||(a[7]=_=>n.item.email=_),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[D,n.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",il,[e("div",rl,[x(e("input",{"onUpdate:modelValue":a[8]||(a[8]=_=>n.item.mobilePhone=_),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[D,n.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",dl,[e("div",ul,[x(e("input",{"onUpdate:modelValue":a[9]||(a[9]=_=>n.item.principalName=_),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[D,n.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",cl,[e("div",ml,[x(e("input",{"onUpdate:modelValue":a[10]||(a[10]=_=>n.item.jobTitle=_),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[D,n.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},pl={class:"d-flex justify-content-end"},vl=["disabled"],gl={class:"row row-cols-1 row-cols-sm-2"},bl={class:"col"},yl={class:"form-floating mb-2"},$l={key:0,class:"d-block invalid-feedback"},wl={class:"col"},hl={class:"form-floating"},_l={class:"col"},kl={class:"form-floating mb-2"},Sl={class:""},Tl={class:"col"},Ml={class:"form-floating mb-2"},Cl={key:0,class:"d-block invalid-feedback"},xl={class:"col"},Il={class:"form-floating mb-2"},Pl={key:0,class:"d-block invalid-feedback"},Ul={class:""},Vl={class:"col"},Ol={class:"form-floating mb-2"},Al={key:0,class:"d-block invalid-feedback"},El={class:"col"},Dl={class:"input-group mb-2"},Bl={class:"form-floating"},Hl=["href"],Ll={key:0,class:"d-block invalid-feedback"},Nl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"Sony FAST",pageTitle:"Add Video"}),R=i,h=ue({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),S={item:{title:{title:te.withMessage("title is required.",se),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("durationInMillis is required.",se),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:te.withMessage("rawBaseUrl is required.",se),$autoDirty:!0,$lazy:!0},rawPath:{title:te.withMessage("rawPath is required.",se),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:te.withMessage("hlsBaseUrl is required.",se),$autoDirty:!0,$lazy:!0},hlsPath:{title:te.withMessage("hlsPath is required.",se),$autoDirty:!0,$lazy:!0}}},g=we(S,h);Ue(()=>{const n=M.moment;if(h.durationTime&&h.durationTime!=="00:00:00"&&G(h.durationTime)){const u=n().startOf("day"),F=u.format("YYYY-MM-DD ")+h.durationTime,j=n(F).subtract(u);return h.item.durationInMillis=j.valueOf(),h.item.durationInMillis}return 0});const G=n=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(n);ie(async()=>{});const J=async()=>{const n=h;if(w.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const F=M.clone(n.item);debugger;await H.post("/api/v1/videos/",F).then(l=>{B.success("Add Video","Video added",{onClose:async()=>{const j=`${R.urlView}/${l.data}`;await K.push(j)}})})}catch(F){T.value=M.getErrorMessageAsHtml(F),window.scrollTo(0,0)}finally{w.value=!1}};return(n,u)=>{const F=Q("router-link"),l=Q("PageHeader"),j=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(l,{"page-icon":"fas fa-fw fa-video",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",pl,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:u[0]||(u[0]=a=>J()),class:"btn btn-primary"},u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vl),V(F,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>u[9]||(u[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(j,{errorMessage:o(T),vuelidate:o(g)},{default:I(()=>[e("div",null,[e("div",gl,[e("div",bl,[e("div",yl,[x(e("input",{"onUpdate:modelValue":u[1]||(u[1]=a=>h.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[D,h.item.title]]),u[10]||(u[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(g).item.title.$error?(t(),s("div",$l,[(t(!0),s(L,null,W(o(g).item.title.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",wl,[e("div",hl,[x(e("input",{"onUpdate:modelValue":u[2]||(u[2]=a=>h.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[D,h.durationTime]]),u[11]||(u[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",_l,[e("div",kl,[x(e("textarea",{"onUpdate:modelValue":u[3]||(u[3]=a=>h.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[D,h.item.description]]),u[12]||(u[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Sl,[u[15]||(u[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Tl,[e("div",Ml,[x(e("input",{"onUpdate:modelValue":u[4]||(u[4]=a=>h.item.rawBaseUrl=a),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[D,h.item.rawBaseUrl]]),u[13]||(u[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(g).item.rawBaseUrl.$error?(t(),s("div",Cl,[(t(!0),s(L,null,W(o(g).item.rawBaseUrl.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",xl,[e("div",Il,[x(e("input",{"onUpdate:modelValue":u[5]||(u[5]=a=>h.item.rawPath=a),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[D,h.item.rawPath]]),u[14]||(u[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(g).item.rawPath.$error?(t(),s("div",Pl,[(t(!0),s(L,null,W(o(g).item.rawPath.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",Ul,[u[19]||(u[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Vl,[e("div",Ol,[x(e("input",{"onUpdate:modelValue":u[6]||(u[6]=a=>h.item.hlsBaseUrl=a),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[D,h.item.hlsBaseUrl]]),u[16]||(u[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(g).item.hlsBaseUrl.$error?(t(),s("div",Al,[(t(!0),s(L,null,W(o(g).item.hlsBaseUrl.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])]),e("div",El,[e("div",Dl,[e("div",Bl,[x(e("input",{"onUpdate:modelValue":u[7]||(u[7]=a=>h.item.hlsPath=a),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[D,h.item.hlsPath]]),u[17]||(u[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),h.item.hlsBaseUrl&&h.item.hlsPath?(t(),s("a",{key:0,href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(h.item.hlsBaseUrl+h.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},u[18]||(u[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),q("View ")],-1)]),8,Hl)):C("",!0)]),o(g).item.hlsPath.$error?(t(),s("div",Ll,[(t(!0),s(L,null,W(o(g).item.hlsPath.$errors,a=>(t(),s("div",{key:a.$uid},p(a.$message),1))),128))])):C("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ql={key:0,class:"d-flex justify-content-end"},Rl=["disabled"],zl={key:0},jl={class:"row row-cols-1 row-cols-sm-2"},Fl={class:"col"},Yl={class:"form-floating mb-2"},Gl={key:0,class:"d-block invalid-feedback"},Wl={class:"col"},Kl={class:"form-floating mb-2"},Jl={key:0,class:"d-block invalid-feedback"},Ql={class:"row row-cols-sm-2"},Xl={class:"col"},Zl={class:"form-floating mb-2"},en={class:"form-floating mb-2"},tn={key:0,class:"d-block invalid-feedback"},sn={class:"form-floating mb-2"},on={key:0,class:"d-block invalid-feedback"},an={class:"col"},ln={class:"form-floating mb-2"},Oe={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),R=i,h=ue({editorElementId:"editor",htmlContent:"",item:null}),S={item:{title:{required:te.withMessage("Title is required.",se),$autoDirty:!0,$lazy:!0},eidr:{required:te.withMessage("eidr is required.",se),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:te.withMessage("eidrPrefix is required.",se),$autoDirty:!0,$lazy:!0}},htmlContent:{required:te.withMessage("Content is required.",se),$autoDirty:!0,$lazy:!0}},g=we(S,h);ie(async()=>{await n()});const G=()=>{const F=h;var l=document.getElementById(F.editorElementId);l.innerHTML=F.htmlContent},J=F=>{const l=h;l.htmlContent=F.target.innerHTML;var j=document.getElementById(l.editorElementId);j.value=l.htmlContent},n=async()=>{const F=h;if(!w.value)try{w.value=!0,h.item=null,await H.get(`/api/v1/movies/${R.id}`).then(l=>{F.item=l.data,F.htmlContent=F.item.description}),G()}catch(l){T.value=M.getErrorMessageAsHtml(l)}finally{w.value=!1}},u=async()=>{const F=h;if(w.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const j=M.clone(F.item);j.description=F.htmlContent,await H.put("/api/v1/movies",j).then(a=>{B.success("Edit Movie","Movie edited",{onClose:async()=>{const P=`${R.urlView}/${R.id}`;await K.push(P)}})})}catch(j){T.value=M.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{w.value=!1}};return(F,l)=>{const j=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),s("div",null,[V(a,{"page-icon":"fas fa-fw fa-film",pageTitle:o(b),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[h.item?(t(),s("div",ql,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:l[0]||(l[0]=c=>u()),class:"btn btn-primary"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Rl),e("button",{onClick:n,class:"ms-2 btn btn-secondary"},l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),V(j,{to:`${R.urlView}/${R.id}`,class:"ms-1 btn btn-secondary"},{default:I(()=>l[9]||(l[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):C("",!0)]),_:1},8,["pageTitle"]),V(P,{errorMessage:o(T),vuelidate:o(g)},{default:I(()=>[h.item?(t(),s("div",zl,[e("div",jl,[e("div",Fl,[e("div",Yl,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>h.item.eidrPrefix=c),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[D,h.item.eidrPrefix]]),l[10]||(l[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(g).item.eidrPrefix.$error?(t(),s("div",Gl,[(t(!0),s(L,null,W(o(g).item.eidrPrefix.$errors,c=>(t(),s("div",{key:c.$uid},p(c.$message),1))),128))])):C("",!0)])]),e("div",Wl,[e("div",Kl,[x(e("input",{"onUpdate:modelValue":l[2]||(l[2]=c=>h.item.eidr=c),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[D,h.item.eidr]]),l[11]||(l[11]=e("label",{for:"title"},"Eidr",-1)),o(g).item.eidr.$error?(t(),s("div",Jl,[(t(!0),s(L,null,W(o(g).item.eidr.$errors,c=>(t(),s("div",{key:c.$uid},p(c.$message),1))),128))])):C("",!0)])])]),e("div",Ql,[e("div",Xl,[e("div",Zl,[x(e("input",{"onUpdate:modelValue":l[3]||(l[3]=c=>h.item.releaseYear=c),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[D,h.item.releaseYear]]),l[12]||(l[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",en,[x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=c=>h.item.title=c),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[D,h.item.title]]),l[13]||(l[13]=e("label",{for:"title"},"Title",-1)),o(g).item.title.$error?(t(),s("div",tn,[(t(!0),s(L,null,W(o(g).item.title.$errors,c=>(t(),s("div",{key:c.$uid},p(c.$message),1))),128))])):C("",!0)])])]),e("div",null,[e("div",sn,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:l[5]||(l[5]=c=>J(c))},null,32),l[14]||(l[14]=e("label",{for:"editor"},"Content",-1)),o(g).htmlContent.$error?(t(),s("div",on,[(t(!0),s(L,null,W(o(g).htmlContent.$errors,c=>(t(),s("div",{key:c.$uid},p(c.$message),1))),128))])):C("",!0)])]),e("div",an,[e("div",ln,[x(e("textarea",{"onUpdate:modelValue":l[6]||(l[6]=c=>h.item.metadata=c),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[D,h.item.metadata]]),l[15]||(l[15]=e("label",{for:"title"},"Metadata",-1))])])])):C("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},nn={components:{Page:Oe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function rn(i,r,b,w,y,N){const T=Q("Page");return t(),ne(T,{id:b.id,urlView:b.urlView},null,8,["id","urlView"])}const dn=he(nn,[["render",rn]]),un={class:"d-flex justify-content-end"},cn={class:"ms-1"},mn={class:"input-group"},fn={class:"table-responsive"},pn={class:"table table-hover mb-0"},vn=["textContent"],gn={class:"text-end ms-sm-5 pe-sm-5"},bn="/api/v1/videos/search",yn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,security:h,filter:S,initializeFilter:g,getQuery:G,saveQuery:J,search:n,getRowNumber:u,setSelected:F,isSelected:l}=Ie({appTitle:"Sony FAST",pageTitle:"Videos",cacheKey:`${b==null?void 0:b.userId}/videos/search`,baseUrl:bn,filter:{updateUrl:!0}});return ie(async()=>{g(),await n()}),(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("m-pagination"),_=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:I(()=>[e("div",un,[V(P,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",cn,[e("div",mn,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=k=>o(S).query.criteria=k),onKeyup:a[1]||(a[1]=Me(k=>o(n)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=k=>o(n)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(_,{errorMessage:o(H)},{default:I(()=>[e("div",fn,[e("table",pn,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(S).items,(k,U)=>(t(),s("tr",{key:k.movieId},[e("td",{textContent:p(o(u)(U)),class:"text-center"},null,8,vn),e("td",null,[V(P,{to:`${i.urlView}/${k.videoId}`,class:"d-inline-block text-truncate"},{default:I(()=>[q(p(k.title),1)]),_:2},1032,["to"])]),e("td",null,p(k.description),1),e("td",gn,[e("div",null,p(o(X).moment.utc(k.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[$e,o(S).items.length>0]])])]),V(d,{filter:o(S),search:o(n),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},$n={class:"d-flex flex-row justify-content-end"},wn={key:0},hn={class:"row row-cols-sm-2"},_n={class:"col"},kn={class:"form-floating mb-2"},Sn={class:"col"},Tn={class:"form-floating mb-2"},Mn={class:"col"},Cn={class:"form-floating mb-2"},xn={class:"row row-cols-sm-2"},In={class:"col"},Pn={class:"form-floating mb-2"},Un={class:"col"},Vn={class:"form-floating mb-2"},On={class:"row row-cols-sm-2"},An={class:"col"},En={class:"form-floating mb-2"},Dn={class:"col"},Bn={class:"form-floating mb-2"},Hn={class:"row row-cols-sm-2"},Ln={class:"col"},Nn={class:"form-floating mb-2"},qn={class:"col"},Rn={class:"form-floating mb-2"},zn={class:"table-responsive"},jn={class:"table table-hover mb-0 caption-top"},Fn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"Sony FAST",pageTitle:"View Video"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null});ie(async()=>{await u()});const u=async()=>{const j=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const a=`/api/v1/videos/${r.id}/`;await X.get(a).then(P=>{j.item=P.data,j.item.duration=z.moment.utc(j.item.durationInMillis).format("HH:mm:ss")})}catch(a){M.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},F=async()=>{await u()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/users/${r.id}/`).then(a=>{R.warning("Delete User","User was deleted.",{async onClose(){await B.push(r.urlMain)}})})}catch(a){M.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",$n,[o(G).isAdministrator?(t(),s(L,{key:0},[V(P,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:I(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=_=>l()),class:"ms-1 btn btn-warning"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:a[1]||(a[1]=_=>F()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=_=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(d,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",wn,[e("div",null,[e("div",hn,[e("div",_n,[e("div",kn,[x(e("input",{"onUpdate:modelValue":a[3]||(a[3]=_=>n.item.title=_),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[D,n.item.title]]),a[16]||(a[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",Sn,[e("div",Tn,[x(e("input",{"onUpdate:modelValue":a[4]||(a[4]=_=>n.item.duration=_),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[D,n.item.duration]]),a[17]||(a[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",Mn,[e("div",Cn,[x(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=_=>n.item.description=_),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[D,n.item.description]]),a[18]||(a[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",xn,[e("div",In,[e("div",Pn,[x(e("input",{"onUpdate:modelValue":a[6]||(a[6]=_=>n.item.rawBaseUrl=_),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[D,n.item.rawBaseUrl]]),a[19]||(a[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Un,[e("div",Vn,[x(e("input",{"onUpdate:modelValue":a[7]||(a[7]=_=>n.item.rawPath=_),class:"form-control",id:"rawPath",disabled:""},null,512),[[D,n.item.rawPath]]),a[20]||(a[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",On,[e("div",An,[e("div",En,[x(e("input",{"onUpdate:modelValue":a[8]||(a[8]=_=>n.item.hlsBaseUrl=_),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[D,n.item.hlsBaseUrl]]),a[21]||(a[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Dn,[e("div",Bn,[x(e("input",{"onUpdate:modelValue":a[9]||(a[9]=_=>n.item.hlsPath=_),class:"form-control",id:"hlsPath",disabled:""},null,512),[[D,n.item.hlsPath]]),a[22]||(a[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",Hn,[e("div",Ln,[e("div",Nn,[x(e("input",{"onUpdate:modelValue":a[10]||(a[10]=_=>n.item.dashBaseUrl=_),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[D,n.item.dashBaseUrl]]),a[23]||(a[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",qn,[e("div",Rn,[x(e("input",{"onUpdate:modelValue":a[11]||(a[11]=_=>n.item.dashPath=_),class:"form-control",id:"dashPath",disabled:""},null,512),[[D,n.item.dashPath]]),a[24]||(a[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",zn,[e("table",jn,[a[25]||(a[25]=e("caption",null,"VOD Sources",-1)),a[26]||(a[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.vodSources,(_,k)=>(t(),s("tr",{key:_.vodSourceId},[e("td",null,p(k+1),1),e("td",null,[V(P,{to:`${r.urlViewVodSource}/${encodeURIComponent(_.vodSourceId)}/${o(g)()}`},{default:I(()=>[q(p(_.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[$e,n.item.vodSources.length>0]])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Yn={class:"d-flex justify-content-end"},Gn=["disabled"],Wn={class:"form-floating mb-2"},Kn={key:0,class:"d-block invalid-feedback"},Jn={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"Sony FAST",pageTitle:"Add Source Group"}),R=i,h=ue({lookups:{},item:{name:null}}),S={item:{name:{required:te.withMessage("name is required.",se),$autoDirty:!0,$lazy:!0}}},g=we(S,h);ie(async()=>{});const G=async()=>{const J=h;if(w.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const u=M.clone(J.item);await H.post("/api/v1/sourcegroups/",u).then(F=>{B.success("Add Source Group","Source group added.",{onClose:async()=>{const l=`${R.urlView}/${F.data}`;await K.push(l)}})})}catch(u){T.value=M.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{w.value=!1}};return(J,n)=>{const u=Q("router-link"),F=Q("PageHeader"),l=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(F,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",Yn,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:n[0]||(n[0]=j=>G()),class:"btn btn-primary"},n[2]||(n[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gn),V(u,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>n[3]||(n[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(l,{errorMessage:o(T),vuelidate:o(g)},{default:I(()=>[e("div",null,[e("div",Wn,[x(e("input",{"onUpdate:modelValue":n[1]||(n[1]=j=>h.item.name=j),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[D,h.item.name]]),n[4]||(n[4]=e("label",{for:"name"},"Name",-1)),o(g).item.name.$error?(t(),s("div",Kn,[(t(!0),s(L,null,W(o(g).item.name.$errors,j=>(t(),s("div",{key:j.$uid},p(j.$message),1))),128))])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Qn={components:{Page:Oe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Xn(i,r,b,w,y,N){const T=Q("Page");return t(),ne(T,{id:b.id,urlView:b.urlView},null,8,["id","urlView"])}const Zn=he(Qn,[["render",Xn]]),ei={class:"d-flex justify-content-end"},ti={class:"ms-1"},si={class:"input-group"},oi={class:"table-responsive"},ai={class:"table table-hover mb-0"},li=["textContent"],ni={key:0,class:"fas fa-fw fa-check-circle text-success"},ii="/api/v1/sourcegroups/search",ri={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,security:h,filter:S,initializeFilter:g,getQuery:G,saveQuery:J,search:n,getRowNumber:u,setSelected:F,isSelected:l}=Ie({appTitle:"Sony FAST",pageTitle:"Source Groups",cacheKey:`${b==null?void 0:b.userId}/source-groups/search`,baseUrl:ii,filter:{updateUrl:!0}});return ie(async()=>{g(),await n()}),(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("m-pagination"),_=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(y)},{default:I(()=>[e("div",ei,[V(P,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ti,[e("div",si,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=k=>o(S).query.criteria=k),onKeyup:a[1]||(a[1]=Me(k=>o(n)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=k=>o(n)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(_,{errorMessage:o(H)},{default:I(()=>[e("div",oi,[e("table",ai,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(S).items,(k,U)=>(t(),s("tr",{key:k.movieId},[e("td",{textContent:p(o(u)(U)),class:"text-center"},null,8,li),e("td",null,[V(P,{to:`${i.urlView}/${k.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:I(()=>[k.arn?(t(),s("span",ni)):C("",!0),q(" "+p(k.name),1)]),_:2},1032,["to"])]),e("td",null,p(k.channelOutputs),1),e("td",null,p(k.packageConfigurations),1)]))),128))]),_:1},512),[[$e,o(S).items.length>0]])])]),V(d,{filter:o(S),search:o(n),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},di={class:"d-flex flex-row justify-content-end"},ui={key:0},ci={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},mi={class:"nav-item",role:"presentation"},fi={class:"nav-item",role:"presentation"},pi={class:"nav-item",role:"presentation"},vi={class:"tab-content",id:"myTabContent"},gi={class:"mt-2"},bi={class:"col"},yi={class:"form-floating mb-2"},$i={class:"mt-2"},wi={class:"table-responsive border"},hi={class:"table table-hover mb-0"},_i={class:"mt-2"},ki={class:"table-responsive border"},Si={class:"table table-hover mb-0"},Ti={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"Sony FAST",pageTitle:"View Source Group"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null}),u=re();ie(async()=>{await a(),u.value=z.getPageTab("sourceGroup")||"information-tab"});const F=c=>{z.setPageTab("sourceGroup",c),u.value=c},l=c=>c!==u.value?"":"active",j=c=>c!==u.value?"":"show active",a=async()=>{const c=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const d=`/api/v1/sourcegroups/${r.id}/`;await X.get(d).then(_=>{c.item=_.data})}catch(d){M.value=z.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()};return(c,d)=>{const _=Q("router-link"),k=Q("PageHeader"),U=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(k,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",di,[o(G).isAdministrator?(t(),s(L,{key:0},[V(_,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:I(()=>d[9]||(d[9]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:d[0]||(d[0]=$=>c.remove()),class:"ms-1 btn btn-warning"},d[10]||(d[10]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),n.item?(t(),s(L,{key:1},[n.item.arn?(t(),s("button",{key:0,onClick:d[1]||(d[1]=$=>c.unpublish()),class:"ms-1 btn btn-warning"},d[11]||(d[11]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:d[2]||(d[2]=$=>c.publish()),class:"ms-1 btn btn-primary"},d[12]||(d[12]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:d[3]||(d[3]=$=>P()),class:"ms-2 btn btn-secondary"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:d[4]||(d[4]=$=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(U,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",ui,[e("div",null,[e("ul",ci,[e("li",mi,[e("button",{onClick:d[5]||(d[5]=$=>F("information-tab")),class:oe([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",fi,[e("button",{onClick:d[6]||(d[6]=$=>F("channelOutputs-tab")),class:oe([l("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",pi,[e("button",{onClick:d[7]||(d[7]=$=>F("packageConfigurations-tab")),class:oe([l("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",vi,[e("div",{class:oe([j("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",gi,[e("div",bi,[e("div",yi,[x(e("input",{"onUpdate:modelValue":d[8]||(d[8]=$=>n.item.name=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.name]]),d[15]||(d[15]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:oe([j("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",$i,[e("div",wi,[e("table",hi,[d[16]||(d[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.channelOutputs,($,Y)=>(t(),s("tr",{key:$.channelOutputId},[e("td",null,p(Y+1),1),e("td",null,[V(_,{to:`${i.urlViewChannel}/${$.channelId}/${o(g)()}`},{default:I(()=>[q(p($.manifestName),1)]),_:2},1032,["to"])]),e("td",null,p($.outputType),1)]))),128))]),_:1},512),[[$e,n.item.channelOutputs.length>0]])])])])],2),e("div",{class:oe([j("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",_i,[e("div",ki,[e("table",Si,[d[17]||(d[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Vod"),e("th",null,"Type")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.packageConfigurations,($,Y)=>(t(),s("tr",{key:$.packageConfigurationId},[e("td",null,p(Y+1),1),e("td",null,[V(_,{to:`${i.urlViewVodSource}/${$.vodSourceId}/${o(g)()}`},{default:I(()=>[q(p($.path),1)]),_:2},1032,["to"])]),e("td",null,p($.type),1)]))),128))]),_:1},512),[[$e,n.item.packageConfigurations.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Mi={class:"d-flex justify-content-end"},Ci=["disabled"],xi={class:"form-floating mb-2"},Ii={key:0,class:"d-block invalid-feedback"},Pi={class:"form-floating mb-2"},Ui={key:0,class:"d-block invalid-feedback"},Vi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"Sony FAST",pageTitle:"Add Source Location"}),R=i,h=ue({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),S={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:te.withMessage("HTTP Configuration Base Url is required.",se),$autoDirty:!0,$lazy:!0}}},g=we(S,h);ie(async()=>{});const G=async()=>{const J=h;if(w.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const u=M.clone(J.item);await H.post("/api/v1/sourcelocations/",u).then(F=>{B.success("Add Source Location","Source location added.",{onClose:async()=>{const l=`${R.urlView}/${F.data}`;await K.push(l)}})})}catch(u){T.value=M.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{w.value=!1}};return(J,n)=>{const u=Q("router-link"),F=Q("PageHeader"),l=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(F,{"page-icon":"fas fa-fw fa-building",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",Mi,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:n[0]||(n[0]=j=>G()),class:"btn btn-primary"},n[3]||(n[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ci),V(u,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>n[4]||(n[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(l,{errorMessage:o(T),vuelidate:o(g)},{default:I(()=>[e("div",null,[e("div",xi,[x(e("input",{"onUpdate:modelValue":n[1]||(n[1]=j=>h.item.name=j),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[D,h.item.name]]),n[5]||(n[5]=e("label",{for:"name"},"Name",-1)),o(g).item.name.$error?(t(),s("div",Ii,[(t(!0),s(L,null,W(o(g).item.name.$errors,j=>(t(),s("div",{key:j.$uid},p(j.$message),1))),128))])):C("",!0)]),e("div",Pi,[x(e("textarea",{"onUpdate:modelValue":n[2]||(n[2]=j=>h.item.httpConfigurationBaseUrl=j),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[D,h.item.httpConfigurationBaseUrl]]),n[6]||(n[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(g).item.httpConfigurationBaseUrl.$error?(t(),s("div",Ui,[(t(!0),s(L,null,W(o(g).item.httpConfigurationBaseUrl.$errors,j=>(t(),s("div",{key:j.$uid},p(j.$message),1))),128))])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Oi={components:{Page:Oe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ai(i,r,b,w,y,N){const T=Q("Page");return t(),ne(T,{id:b.id,urlView:b.urlView},null,8,["id","urlView"])}const Ei=he(Oi,[["render",Ai]]),Di={class:"d-flex justify-content-end"},Bi={class:"ms-1"},Hi={class:"input-group"},Li={class:"table-responsive"},Ni={class:"table table-hover mb-0"},qi=["textContent"],Ri={key:0,class:"fas fa-fw fa-check-circle text-success"},zi="/api/v1/sourcelocations/search",ji={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,security:h,filter:S,initializeFilter:g,getQuery:G,saveQuery:J,search:n,getRowNumber:u,setSelected:F,isSelected:l}=Ie({appTitle:"Sony FAST",pageTitle:"Source Locations",cacheKey:`${b==null?void 0:b.userId}/source-locations/search`,baseUrl:zi,filter:{updateUrl:!0}});return ie(async()=>{g(),await n()}),(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("m-pagination"),_=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-building",pageTitle:o(y)},{default:I(()=>[e("div",Di,[V(P,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Bi,[e("div",Hi,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=k=>o(S).query.criteria=k),onKeyup:a[1]||(a[1]=Me(k=>o(n)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=k=>o(n)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(_,{errorMessage:o(H)},{default:I(()=>[e("div",Li,[e("table",Ni,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(S).items,(k,U)=>(t(),s("tr",{key:k.movieId},[e("td",{textContent:p(o(u)(U)),class:"text-center"},null,8,qi),e("td",null,[V(P,{to:`${i.urlView}/${k.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:I(()=>[k.arn?(t(),s("span",Ri)):C("",!0),q(" "+p(k.name),1)]),_:2},1032,["to"])]),e("td",null,p(k.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[$e,o(S).items.length>0]])])]),V(d,{filter:o(S),search:o(n),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Fi={class:"d-flex flex-row justify-content-end"},Yi={key:0},Gi={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Wi={class:"nav-item",role:"presentation"},Ki={class:"nav-item",role:"presentation"},Ji={class:"nav-item",role:"presentation"},Qi={class:"tab-content",id:"myTabContent"},Xi={class:"mt-2"},Zi={class:"col"},er={class:"form-floating mb-2"},tr={class:"col"},sr={class:"form-floating mb-2"},or={class:"mt-2"},ar={class:"table-responsive border"},lr={class:"table table-hover mb-0"},nr={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ir={class:"mt-2"},rr={class:"table-responsive border"},dr={class:"table table-hover mb-0"},ur={key:0,class:"fas fa-fw fa-check-circle text-success"},cr={key:1},mr={key:2},fr={key:0},pr={class:"badge bg-info"},vr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"Sony FAST",pageTitle:"View Source Location"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null}),u=re();ie(async()=>{await a(),u.value=z.getPageTab("sourceLocation")||"information-tab"});const F=_=>{z.setPageTab("sourceLocation",_),u.value=_},l=_=>_!==u.value?"":"active",j=_=>_!==u.value?"":"show active",a=async()=>{const _=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const k=`/api/v1/sourcelocations/${r.id}/`;await X.get(k).then(U=>{_.item=U.data})}catch(k){M.value=z.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()},c=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!y.value){M.value=null;try{y.value=!0,await X.post(`/api/v1/sourcelocations/${r.id}/publish/`).then(k=>{R.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),y.value=!1,await P()}catch(k){M.value=z.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{y.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/sourcelocations/unpublish/${r.id}/`).then(k=>{R.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),y.value=!1,await P()}catch(k){M.value=z.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{y.value=!1}}};return(_,k)=>{const U=Q("router-link"),$=Q("PageHeader"),Y=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V($,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",Fi,[o(G).isAdministrator?(t(),s(L,{key:0},[V(U,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:I(()=>k[10]||(k[10]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:k[0]||(k[0]=f=>_.remove()),class:"ms-1 btn btn-warning"},k[11]||(k[11]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),n.item?(t(),s(L,{key:1},[n.item.arn?(t(),s("button",{key:0,onClick:k[1]||(k[1]=f=>d()),class:"ms-1 btn btn-warning"},k[12]||(k[12]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:k[2]||(k[2]=f=>c()),class:"ms-1 btn btn-primary"},k[13]||(k[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:k[3]||(k[3]=f=>P()),class:"ms-2 btn btn-secondary"},k[14]||(k[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:k[4]||(k[4]=f=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},k[15]||(k[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(Y,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",Yi,[e("div",null,[e("ul",Gi,[e("li",Wi,[e("button",{onClick:k[5]||(k[5]=f=>F("information-tab")),class:oe([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ki,[e("button",{onClick:k[6]||(k[6]=f=>F("vodSources-tab")),class:oe([l("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Ji,[e("button",{onClick:k[7]||(k[7]=f=>F("programs-tab")),class:oe([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Qi,[e("div",{class:oe([j("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Xi,[e("div",Zi,[e("div",er,[x(e("input",{"onUpdate:modelValue":k[8]||(k[8]=f=>n.item.name=f),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.name]]),k[16]||(k[16]=e("label",{for:"name"},"Name",-1))])]),e("div",tr,[e("div",sr,[x(e("input",{"onUpdate:modelValue":k[9]||(k[9]=f=>n.item.httpConfigurationBaseUrl=f),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[D,n.item.httpConfigurationBaseUrl]]),k[17]||(k[17]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:oe([j("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",or,[e("div",ar,[e("table",lr,[k[18]||(k[18]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.vodSources,(f,v)=>(t(),s("tr",{key:f.vodSourceId},[e("td",null,p(v+1),1),e("td",null,[f.arn?(t(),s("span",nr)):C("",!0),V(U,{to:`${r.urlViewVodSource}/${encodeURIComponent(f.vodSourceId)}/${o(g)()}`},{default:I(()=>[q(p(f.name),1)]),_:2},1032,["to"])]),e("td",null,[V(U,{to:`${r.urlViewVideo}/${encodeURIComponent(f.video.videoId)}/${o(g)()}`},{default:I(()=>[q(p(f.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,p(o(z).moment.utc(f.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[$e,n.item.vodSources.length>0]])])])])],2),e("div",{class:oe([j("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",ir,[e("div",rr,[e("table",dr,[k[19]||(k[19]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Relative Program"),e("th",null,"Date Scheduled Start"),e("th",null,"Channel")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.programs,(f,v)=>(t(),s("tr",{key:f.programId},[e("td",null,p(v+1),1),e("td",null,[f.arn?(t(),s("span",ur)):C("",!0),q(" "+p(f.name)+" ("+p(f.transitionType)+") ",1),f.startOffsetMillis>0?(t(),s("div",cr," Start Offset: "+p(f.startOffsetMillis/6e4)+" seconds ",1)):C("",!0),f.endOffsetMillis>0?(t(),s("div",mr," End Offset: "+p(f.endOffsetMillis/6e4)+" seconds ",1)):C("",!0)]),e("td",null,[f.relativeProgram?(t(),s("div",fr,p(f.relativeProgram.name)+" ["+p(f.relativePosition)+"] ",1)):C("",!0)]),e("td",null,[q(p(o(z).moment(f.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",pr,p(o(z).moment(f.dateScheduledStart).fromNow()),1)])]),e("td",null,[V(U,{to:`${r.urlViewChannel}/${encodeURIComponent(f.channel.channelId)}/${o(g)()}`},{default:I(()=>[q(p(f.channel.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[$e,n.item.programs.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},gr={class:"d-flex justify-content-end"},br=["disabled"],yr={class:"col"},$r={class:"form-floating mb-2"},wr={key:0,class:"d-block invalid-feedback"},hr={class:"row row-cols-1 row-cols-sm-2"},_r={class:"col"},kr={class:"form-floating mb-2"},Sr=["value"],Tr={key:0,class:"d-block invalid-feedback"},Mr={class:"col"},Cr={class:"form-floating mb-2"},xr=["disabled"],Ir=["value"],Pr={key:0,class:"d-block invalid-feedback"},Ur={key:0},Vr={class:"d-flex flex-row justify-content-between"},Or={key:0,class:"d-inline invalid-feedback"},Ar={class:"table-responsive border mt-1"},Er={class:"table mb-0 caption-top"},Dr={class:"input-group mb-1"},Br=["onUpdate:modelValue"],Hr=["onUpdate:modelValue"],Lr=["value"],Nr=["onUpdate:modelValue"],qr=["onClick"],Rr={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"Sony FAST",pageTitle:"Add VOD Source"}),R=i,h=ue({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),S=(P,c,d)=>P.length>0,g={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",se),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",S),$each:te.forEach({path:{required:te.withMessage("Path is required.",se)},sourceGroupId:{required:te.withMessage("Source Group is required.",se)}}),$autoDirty:!0,$lazy:!0}}},G=we(g,h);ie(async()=>{await J(),await n()});const J=async()=>{try{await H.get("/api/v1/sourcegroups/lookup/").then(c=>{h.lookups.sourceGroups=c.data})}catch(P){T.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},n=async()=>{try{if(await H.get("/api/v1/sourcelocations/lookup/").then(c=>{h.lookups.sourceLocations=c.data}),h.lookups.sourceLocations.length===1){const c=h.lookups.sourceLocations[0];h.selected.sourceLocation=c,await u()}}catch(P){T.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},u=async()=>{const P=h.selected.sourceLocation;h.item.sourceLocationId=P.id,await F(P.baseUrl)},F=async P=>{try{const c=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(P)}`;await H.get(c).then(d=>{h.lookups.videos=d.data,h.lookups.videos.length===1&&(h.item.videoId=h.lookups.videos[0].id)})}catch(c){T.value=M.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},l=async()=>{const P=h;if(w.value)return;if(!await G.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const d=M.clone(P.item);d.videoId=d.video.id,delete d.video,await H.post("/api/v1/vodSources/",d).then(_=>{debugger;B.success("Add VOD Source","VOD source added",{onClose:async()=>{const k=`${R.urlView}/${_.data}`;await K.push(k)}})})}catch(d){T.value=M.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{w.value=!1}},j=()=>{const P={path:"",sourceGroupId:null,type:"HLS"},c=h.item.video;c&&(P.path=c.hlsPath),h.item.packageConfigurations.push(P)},a=P=>{h.item.packageConfigurations.splice(P,1)};return(P,c)=>{const d=Q("router-link"),_=Q("PageHeader"),k=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(_,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",gr,[e("button",{disabled:o(G).$dirty&&o(G).$invalid,onClick:c[0]||(c[0]=U=>l()),class:"btn btn-primary"},c[6]||(c[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,br),V(d,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>c[7]||(c[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(k,{errorMessage:o(T),vuelidate:o(G)},{default:I(()=>[e("div",null,[e("div",yr,[e("div",$r,[x(e("input",{"onUpdate:modelValue":c[1]||(c[1]=U=>h.item.name=U),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,h.item.name]]),c[8]||(c[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(G).item.name.$error?(t(),s("div",wr,[(t(!0),s(L,null,W(o(G).item.name.$errors,U=>(t(),s("div",{key:U.$uid},p(U.$message),1))),128))])):C("",!0)])]),e("div",hr,[e("div",_r,[e("div",kr,[x(e("select",{"onUpdate:modelValue":c[2]||(c[2]=U=>h.selected.sourceLocation=U),onChange:c[3]||(c[3]=U=>u()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,W(h.lookups.sourceLocations,U=>(t(),s("option",{value:U},p(U.name),9,Sr))),256))],544),[[pe,h.selected.sourceLocation]]),c[9]||(c[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(G).item.sourceLocationId.$error?(t(),s("div",Tr,[(t(!0),s(L,null,W(o(G).item.sourceLocationId.$errors,U=>(t(),s("div",{key:U.$uid},p(U.$message),1))),128))])):C("",!0)])]),e("div",Mr,[e("div",Cr,[x(e("select",{"onUpdate:modelValue":c[4]||(c[4]=U=>h.item.video=U),onChange:c[5]||(c[5]=U=>h.item.videoId=h.item.video.id),class:"form-select",id:"videoId",disabled:h.item.packageConfigurations.length>0},[(t(!0),s(L,null,W(h.lookups.videos,U=>(t(),s("option",{value:U},p(U.name),9,Ir))),256))],40,xr),[[pe,h.item.video]]),c[10]||(c[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(G).item.videoId.$error?(t(),s("div",Pr,[(t(!0),s(L,null,W(o(G).item.videoId.$errors,U=>(t(),s("div",{key:U.$uid},p(U.$message),1))),128))])):C("",!0)])])]),c[17]||(c[17]=e("hr",null,null,-1)),h.item.videoId?(t(),s("div",Ur,[e("div",Vr,[e("fieldset",null,[e("legend",null,[c[12]||(c[12]=q(" Package Configurations ")),o(G).item.packageConfigurations.$error?(t(),s("span",Or,c[11]||(c[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):C("",!0)])]),e("button",{onClick:j,class:"btn btn-outline-primary"},c[13]||(c[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),q("Package Configuration ")]))]),e("div",Ar,[e("table",Er,[c[16]||(c[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,W(h.item.packageConfigurations,(U,$)=>(t(),s("tr",null,[e("td",null,p($+1),1),e("td",null,[e("div",Dr,[x(e("input",{"onUpdate:modelValue":Y=>U.path=Y,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Br),[[D,U.path]])]),o(G).item.packageConfigurations.$each.$response?(t(!0),s(L,{key:0},W(o(G).item.packageConfigurations.$each.$response.$errors[$].path,Y=>(t(),s("div",{key:Y,class:"d-block invalid-feedback"},p(Y.$message),1))),128)):C("",!0)]),e("td",null,[e("div",null,[x(e("select",{"onUpdate:modelValue":Y=>U.sourceGroupId=Y,class:"form-select",id:"sourceGroupId"},[(t(!0),s(L,null,W(h.lookups.sourceGroups,Y=>(t(),s("option",{value:Y.id},p(Y.name),9,Lr))),256))],8,Hr),[[pe,U.sourceGroupId]]),o(G).item.packageConfigurations.$each.$response?(t(!0),s(L,{key:0},W(o(G).item.packageConfigurations.$each.$response.$errors[$].path,Y=>(t(),s("div",{key:Y,class:"d-block invalid-feedback"},p(Y.$message),1))),128)):C("",!0)])]),e("td",null,[x(e("select",{"onUpdate:modelValue":Y=>U.type=Y,class:"form-select",id:"type"},c[14]||(c[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Nr),[[pe,U.type]])]),e("td",null,[e("button",{onClick:Y=>a($),class:"btn btn-outline-warning"},c[15]||(c[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,qr)])]))),256))])])])])):C("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},zr={components:{Page:Oe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function jr(i,r,b,w,y,N){const T=Q("Page");return t(),ne(T,{id:b.id,urlView:b.urlView},null,8,["id","urlView"])}const Fr=he(zr,[["render",jr]]),Yr={class:"d-flex justify-content-end"},Gr={key:0},Wr={class:"ms-1"},Kr={class:"input-group"},Jr={class:"table-responsive"},Qr={class:"table table-hover mb-0"},Xr=["textContent"],Zr={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ed={class:"small"},td="/api/v1/vodsources/search",sd={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,closeWithReturnUrl:h,generateReturnUrl:S,security:g,filter:G,initializeFilter:J,getQuery:n,saveQuery:u,search:F,getRowNumber:l,setSelected:j,isSelected:a}=Ie({appTitle:"Sony FAST",pageTitle:"VOD Sources",cacheKey:`${b==null?void 0:b.userId}/vod-sources/search`,baseUrl:td,filter:{updateUrl:!0}});return ie(async()=>{J(),await F()}),(P,c)=>{const d=Q("router-link"),_=Q("PageHeader"),k=Q("m-pagination"),U=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(_,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(y)},{default:I(()=>[e("div",Yr,[o(g).isAdministrator?(t(),s("div",Gr,[V(d,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),V(d,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>c[4]||(c[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Wr,[e("div",Kr,[x(e("input",{"onUpdate:modelValue":c[0]||(c[0]=$=>o(G).query.criteria=$),onKeyup:c[1]||(c[1]=Me($=>o(F)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(G).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[2]||(c[2]=$=>o(F)(1))},c[5]||(c[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(U,{errorMessage:o(H)},{default:I(()=>[e("div",Jr,[e("table",Qr,[c[6]||(c[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(G).items,($,Y)=>(t(),s("tr",{key:$.movieId},[e("td",{textContent:p(o(l)(Y)),class:"text-center"},null,8,Xr),e("td",null,[V(d,{to:`${i.urlView}/${$.vodSourceId}`,class:"d-inline-block text-truncate"},{default:I(()=>[$.arn?(t(),s("span",Zr)):C("",!0),q(p($.name),1)]),_:2},1032,["to"])]),e("td",null,[V(d,{to:`${i.urlViewVideo}/${encodeURIComponent($.video.videoId)}/${o(S)()}`},{default:I(()=>[q(p($.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",ed,"Duration: "+p(o(X).moment.utc($.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[$e,o(G).items.length>0]])])]),V(k,{filter:o(G),search:o(F),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},od=["id"],ad={class:"modal-dialog modal-xl modal-fullscreen-md-down"},ld={class:"modal-content"},nd={class:"modal-header bg-primary text-white"},id={class:"modal-title",id:"exampleModalLabel"},rd={class:"modal-body"},dd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ud=["innerHTML"],cd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},md={class:"container"},fd={class:"col"},pd={class:"form-floating mb-2"},vd={class:"col"},gd={class:"form-floating mb-2"},bd={key:0,class:"d-block invalid-feedback"},yd={class:"col"},$d={class:"form-floating mb-2"},wd={key:0,class:"d-block invalid-feedback"},hd={class:"col"},_d={class:"form-floating mb-2"},kd={key:0,class:"d-block invalid-feedback"},Sd={class:"modal-footer"},Td=["disabled"],Md={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:r,emit:b}){const{appTitle:w,pageTitle:y,busy:N,isDirty:T,validations:K,infoMessage:H,warningMessage:M,errorMessage:B,router:X,axios:z,utils:R,toasts:h,closeWithReturnUrl:S,security:g}=ce({appTitle:"Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),G=b,J=re(),n=re("modalAddPlaybackConfiguration"),u=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),F={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",se),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",se),$autoDirty:!0,$lazy:!0}}},l=we(F,u);ie(async()=>{l.value.$reset()});const j=async(c,d)=>{J.value=c;const _=u;K.value.clear(),B.value="";const k=d,U=k.lastIndexOf("/"),$=k.substring(0,U),Y="ad_campaign_"+k.substring(U+1).replace(".","_");_.item={name:Y,originalVideoContentSourceUrl:d,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var f=document.getElementById(n.value),v=_e.getOrCreateInstance(f);v.show()},a=async()=>{var c=document.getElementById(n.value),d=_e.getOrCreateInstance(c);d.hide(),G("refresh")},P=async()=>{const c=u;if(N.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{N.value=!0,B.value="";const _=c.item;_.vodSourceId=J.value,await z.post("/api/v1/playbackconfigurations/vodsource",_).then(k=>{h.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await a()}catch(_){B.value=R.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{N.value=!1}};return r({open:j,close:a}),(c,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:n.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ad,[e("div",ld,[e("div",nd,[e("h5",id,p(o(w))+" - "+p(o(y)),1),d[5]||(d[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",rd,[o(B)?(t(),s("div",dd,[d[6]||(d[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,ud)])):C("",!0),o(K).size>0?(t(),s("div",cd,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(K).values(),_=>(t(),s("li",null,p(_),1))),256))])])):C("",!0),e("div",md,[e("div",fd,[e("div",pd,[x(e("input",{"onUpdate:modelValue":d[0]||(d[0]=_=>u.item.originalVideoContentSourceUrl=_),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[D,u.item.originalVideoContentSourceUrl]]),d[8]||(d[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",vd,[e("div",gd,[x(e("input",{"onUpdate:modelValue":d[1]||(d[1]=_=>u.item.name=_),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,u.item.name]]),d[9]||(d[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",bd,[(t(!0),s(L,null,W(o(l).item.name.$errors,_=>(t(),s("div",{key:_.$uid},p(_.$message),1))),128))])):C("",!0)])]),e("div",yd,[e("div",$d,[x(e("input",{"onUpdate:modelValue":d[2]||(d[2]=_=>u.item.videoContentSourceUrl=_),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[D,u.item.videoContentSourceUrl]]),d[10]||(d[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[11]||(d[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",wd,[(t(!0),s(L,null,W(o(l).item.videoContentSourceUrl.$errors,_=>(t(),s("div",{key:_.$uid},p(_.$message),1))),128))])):C("",!0)])]),e("div",hd,[e("div",_d,[x(e("textarea",{"onUpdate:modelValue":d[3]||(d[3]=_=>u.item.adDecisionServerUrl=_),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[D,u.item.adDecisionServerUrl]]),d[12]||(d[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",kd,[(t(!0),s(L,null,W(o(l).item.adDecisionServerUrl.$errors,_=>(t(),s("div",{key:_.$uid},p(_.$message),1))),128))])):C("",!0)])])])]),e("div",Sd,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:d[4]||(d[4]=_=>P()),class:"btn btn-primary",type:"button"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Td),d[14]||(d[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,od))}},Cd={class:"d-flex flex-row justify-content-end"},xd={key:0},Id={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Pd={class:"nav-item",role:"presentation"},Ud={class:"nav-item",role:"presentation"},Vd={class:"nav-item",role:"presentation"},Od={class:"tab-content",id:"myTabContent"},Ad={class:"mt-2"},Ed={class:"col"},Dd={class:"form-floating mb-2"},Bd={key:0,class:"table-responsive border mt-2"},Hd={class:"table mb-0"},Ld={class:"row"},Nd={class:"col-sm-9"},qd={key:0,class:"fas fa-fw fa-check-circle text-success"},Rd={class:"col-sm-9"},zd={class:"col-sm-9"},jd={class:"text-break border p-2"},Fd={class:"col-sm-3"},Yd={class:"d-flex flex-row justify-content-between"},Gd=["href"],Wd={class:"col-sm-9"},Kd={class:"text-break border p-2"},Jd=["href"],Qd={class:"col-sm-3"},Xd={class:"d-flex flex-row justify-content-between"},Zd=["href"],eu={class:"col-sm-9"},tu={class:"text-break border p-2"},su={class:"d-flex flex-row"},ou=["onClick"],au=["onClick"],lu=["onClick"],nu={class:"mt-2"},iu={class:"table-responsive border mt-2"},ru={class:"table table-hover mb-0 caption-top"},du={class:"mt-2"},uu={class:"row row-cols-sm-2"},cu={class:"col"},mu={class:"form-floating mb-2"},fu={class:"col"},pu={class:"form-floating mb-2"},vu={class:"row row-cols-sm-2"},gu={class:"col"},bu={class:"form-floating mb-2"},yu={class:"col"},$u={class:"input-group mb-2"},wu={class:"form-floating"},hu=["href"],_u={class:"row row-cols-sm-2"},ku={class:"col"},Su={class:"form-floating mb-2"},Tu={class:"col"},Mu={class:"input-group mb-2"},Cu={class:"form-floating"},xu=["href"],Iu={class:"row row-cols-sm-2"},Pu={class:"col"},Uu={class:"form-floating mb-2"},Vu={class:"col"},Ou={class:"input-group mb-2"},Au={class:"form-floating"},Eu={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"Sony FAST",pageTitle:"View VOD Source"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null}),u=re(),F=re();ie(async()=>{await P(),u.value=z.getPageTab("vodSource")||"information-tab"});const l=f=>{z.setPageTab("vodSource",f),u.value=f},j=f=>f!==u.value?"":"active",a=f=>f!==u.value?"":"show active",P=async()=>{const f=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const v=`/api/v1/vodsources/${r.id}/`;await X.get(v).then(E=>{f.item=E.data;const m=f.item,O=z.moment.utc(f.item.video.durationInMillis).format("HH:mm:ss");m.video.duration=O;const Z=m.video.hlsPath,ae=Z.substring(Z.lastIndexOf("/")+1)})}catch(v){M.value=z.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{y.value=!1}},c=async()=>{await P()},d=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!y.value){M.value=null;try{y.value=!0,await X.post(`/api/v1/vodsources/${r.id}/publish/`).then(v=>{R.success("Publish VOD","VOD was published.",{async onClose(){}})}),y.value=!1,await c()}catch(v){M.value=z.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{y.value=!1}}},_=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/vodsources/${r.id}/unpublish/`).then(v=>{R.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),y.value=!1,await c()}catch(v){M.value=z.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{y.value=!1}}},k=f=>{if(f==="HLS"){const v=n.item.video.hlsBaseUrl+n.item.video.hlsPath;F.value.open(r.id,v)}},U=async f=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!y.value){M.value=null;try{y.value=!0,await X.post(`/api/v1/playbackconfigurations/${f}/vodsource/publish/`).then(E=>{R.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),y.value=!1,await c()}catch(E){M.value=z.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{y.value=!1}}},$=async f=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/playbackconfigurations/${f}/vodsource/unpublish/`).then(E=>{R.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await c()}catch(E){M.value=z.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{y.value=!1}}},Y=async f=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/playbackconfigurations/${f}/vodsource/`).then(E=>{R.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await c()}catch(E){M.value=z.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{y.value=!1}}};return(f,v)=>{const E=Q("router-link"),m=Q("PageHeader"),O=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(m,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",Cd,[o(G).isAdministrator?(t(),s(L,{key:0},[V(E,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:I(()=>v[20]||(v[20]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:v[0]||(v[0]=Z=>f.remove()),class:"ms-1 btn btn-warning"},v[21]||(v[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),n.item?(t(),s(L,{key:1},[n.item.arn?(t(),s("button",{key:0,onClick:v[1]||(v[1]=Z=>_()),class:"ms-1 btn btn-danger"},v[22]||(v[22]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:v[2]||(v[2]=Z=>d()),class:"ms-1 btn btn-primary"},v[23]||(v[23]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:v[3]||(v[3]=Z=>c()),class:"ms-2 btn btn-secondary"},v[24]||(v[24]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:v[4]||(v[4]=Z=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},v[25]||(v[25]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(O,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",xd,[e("div",null,[e("ul",Id,[e("li",Pd,[e("button",{onClick:v[5]||(v[5]=Z=>l("information-tab")),class:oe([j("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ud,[e("button",{onClick:v[6]||(v[6]=Z=>l("packageConfigurations-tab")),class:oe([j("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Vd,[e("button",{onClick:v[7]||(v[7]=Z=>l("video-tab")),class:oe([j("video-tab"),"nav-link"]),id:"video-tab","data-bs-toggle":"tab","data-bs-target":"#video",type:"button",role:"tab","aria-controls":"video","aria-selected":"false"}," Video ",2)])]),e("div",Od,[e("div",{class:oe([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Ad,[e("div",Ed,[e("div",Dd,[x(e("input",{"onUpdate:modelValue":v[8]||(v[8]=Z=>n.item.name=Z),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.name]]),v[26]||(v[26]=e("label",{for:"name"},"Name",-1))])]),v[39]||(v[39]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),n.item.playbackConfigurations?(t(),s("div",Bd,[e("table",Hd,[v[38]||(v[38]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.playbackConfigurations,(Z,ae)=>(t(),s("tr",{key:Z.playbackConfigurationId},[e("td",null,p(ae+1),1),e("td",null,[e("dl",Ld,[v[32]||(v[32]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",Nd,[Z.arn?(t(),s("span",qd)):C("",!0),q(p(Z.name),1)]),v[33]||(v[33]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",Rd,p(Z.videoContentSourceUrl),1),v[34]||(v[34]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",zd,[e("div",jd,p(Z.adDecisionServerUrl),1)]),n.item.video.dashPath&&Z.dashConfigurationManifestEndpointPrefix?(t(),s(L,{key:0},[e("dt",Fd,[e("div",Yd,[v[28]||(v[28]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/dashjs?streamUrl=${encodeURIComponent(Z.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},v[27]||(v[27]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),q("View DASH ")]),8,Gd)])])]),e("dd",Wd,[e("div",Kd,p(Z.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(Z.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},v[29]||(v[29]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),q("View DASH ")]),8,Jd)])])],64)):C("",!0),n.item.video.hlsPath&&Z.hlsConfigurationManifestEndpointPrefix?(t(),s(L,{key:1},[e("dt",Qd,[e("div",Xd,[v[31]||(v[31]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(Z.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},v[30]||(v[30]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),q("View ")]),8,Zd)])])]),e("dd",eu,[e("div",tu,p(Z.hlsConfigurationManifestEndpointPrefix),1)])],64)):C("",!0)])]),e("td",null,[e("div",su,[Z.arn?(t(),s("button",{key:0,onClick:ve=>$(Z.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},v[35]||(v[35]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,ou)):(t(),s("button",{key:1,onClick:ve=>U(Z.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},v[36]||(v[36]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,au)),Z.arn?C("",!0):(t(),s("button",{key:2,onClick:ve=>Y(Z.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},v[37]||(v[37]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,lu))])])]))),128))]),_:1},512),[[$e,n.item.playbackConfigurations.length>0]])])])):C("",!0)])],2),e("div",{class:oe([a("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",nu,[e("div",iu,[e("table",ru,[v[40]||(v[40]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.packageConfigurations,(Z,ae)=>(t(),s("tr",{key:Z.packageConfigurationId},[e("td",null,p(ae+1),1),e("td",null,p(Z.path),1),e("td",null,p(Z.sourceGroup.name),1),e("td",null,p(Z.type),1)]))),128))]),_:1},512),[[$e,n.item.packageConfigurations.length>0]])])])])],2),e("div",{class:oe([a("video-tab"),"tab-pane fade"]),id:"video",role:"tabpanel","aria-labelledby":"video-tab"},[e("div",du,[e("div",null,[e("div",uu,[e("div",cu,[e("div",mu,[x(e("input",{"onUpdate:modelValue":v[9]||(v[9]=Z=>n.item.video.title=Z),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[D,n.item.video.title]]),v[41]||(v[41]=e("label",{for:"title"},"Title",-1))])]),e("div",fu,[e("div",pu,[x(e("input",{"onUpdate:modelValue":v[10]||(v[10]=Z=>n.item.video.duration=Z),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[D,n.item.video.duration]]),v[42]||(v[42]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",vu,[e("div",gu,[e("div",bu,[x(e("input",{"onUpdate:modelValue":v[11]||(v[11]=Z=>n.item.video.rawBaseUrl=Z),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[D,n.item.video.rawBaseUrl]]),v[43]||(v[43]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",yu,[e("div",$u,[e("div",wu,[x(e("input",{"onUpdate:modelValue":v[12]||(v[12]=Z=>n.item.video.rawPath=Z),class:"form-control",id:"rawPath",disabled:""},null,512),[[D,n.item.video.rawPath]]),v[44]||(v[44]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(n.item.video.rawBaseUrl+n.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},v[45]||(v[45]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),q("View ")],-1)]),8,hu)])])]),e("div",_u,[e("div",ku,[e("div",Su,[x(e("input",{"onUpdate:modelValue":v[13]||(v[13]=Z=>n.item.video.hlsBaseUrl=Z),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[D,n.item.video.hlsBaseUrl]]),v[46]||(v[46]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Tu,[e("div",Mu,[e("div",Cu,[x(e("input",{"onUpdate:modelValue":v[14]||(v[14]=Z=>n.item.video.hlsPath=Z),class:"form-control",id:"hlsPath",disabled:""},null,512),[[D,n.item.video.hlsPath]]),v[47]||(v[47]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(n.item.video.hlsBaseUrl+n.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},v[48]||(v[48]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),q("View ")],-1)]),8,xu),n.item.video.hlsPath?(t(),s("button",{key:0,onClick:v[15]||(v[15]=Z=>k("HLS")),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},v[49]||(v[49]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),q("Playback Config ")]))):C("",!0)])])]),e("div",Iu,[e("div",Pu,[e("div",Uu,[x(e("input",{"onUpdate:modelValue":v[16]||(v[16]=Z=>n.item.video.dashBaseUrl=Z),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[D,n.item.video.dashBaseUrl]]),v[50]||(v[50]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Vu,[e("div",Ou,[e("div",Au,[x(e("input",{"onUpdate:modelValue":v[17]||(v[17]=Z=>n.item.video.dashPath=Z),class:"form-control",id:"dashPath",disabled:""},null,512),[[D,n.item.video.dashPath]]),v[51]||(v[51]=e("label",{for:"dashPath"},"DASH Path",-1))]),n.item.video.dashPath?(t(),s("button",{key:0,onClick:v[18]||(v[18]=Z=>k()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},v[52]||(v[52]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),q("Playback Configuration ")]))):C("",!0)])])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"]),V(Md,{ref_key:"modalAddPlaybackConfiguration",ref:F,onRefresh:v[19]||(v[19]=Z=>c())},null,512)])]),_:1})}}},Du={class:"d-flex justify-content-end"},Bu=["disabled"],Hu={class:"container"},Lu={class:"row row-cols-1"},Nu={class:"col"},qu={class:"form-floating mb-2"},Ru={key:0,class:"d-block invalid-feedback"},zu={class:"row row-cols-sm-2"},ju={class:"col"},Fu={class:"form-floating mb-2"},Yu=["value"],Gu={key:0,class:"d-block invalid-feedback"},Wu={class:"col"},Ku={class:"form-floating mb-2"},Ju=["disabled"],Qu=["value"],Xu={key:0,class:"d-block invalid-feedback"},Zu={key:0,class:"row row-cols-1 row-cols-sm-2"},ec={class:"col"},tc={class:"form-floating"},sc={key:0},oc={key:1},ac={key:2},lc={key:3,class:"d-block invalid-feedback"},nc={class:"col"},ic={class:"form-floating"},rc={key:0},dc={key:1},uc={key:2,class:"d-block invalid-feedback"},cc={key:1,class:"mt-3"},mc={class:"table-responsive border mt-1"},fc={class:"table table-borderless table-sm mb-0"},pc=["onUpdate:modelValue","onChange"],vc={key:0},gc=["onUpdate:modelValue","onChange"],bc={class:"text-end"},yc=["onClick"],$c={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"Sony FAST",pageTitle:"Add Program Template"}),R=i,h=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),S={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},g=we(S,h),G=Ue(()=>{const U=M.moment;if(h.startOffsetTime&&h.startOffsetTime!=="00:00:00"&&n(h.startOffsetTime)){const $=U().startOf("day"),Y=$.format("YYYY-MM-DD ")+h.startOffsetTime,v=U(Y).subtract($);return h.item.startOffsetMillis=v.valueOf(),h.item.startOffsetMillis}return 0}),J=Ue(()=>{const U=M.moment;if(h.endOffsetTime&&h.endOffsetTime!=="00:00:00"&&n(h.endOffsetTime)){const $=U().startOf("day"),Y=$.format("YYYY-MM-DD ")+h.endOffsetTime,v=U(Y).subtract($);return h.item.endOffsetMillis=v.valueOf(),h.item.endOffsetMillis}return 0}),n=U=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(U);ie(async()=>{await u()});const u=async()=>{await F(),await a()},F=async()=>{try{await H.get("/api/v1/sourcelocations/lookup/").then($=>{h.lookups.sourceLocations=$.data,h.item.sourceLocationId=h.lookups.sourceLocations[0].id}),h.item.sourceLocationId&&await l(h.item.sourceLocationId)}catch(U){T.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},l=async U=>{try{const $=`/api/v1/vodSources/lookup/source-location/${U}/`;await H.get($).then(Y=>{h.lookups.vodSources=Y.data})}catch($){T.value=M.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},j=async()=>{const U=h.selected.vodSource;h.item.vodSourceId=U.id,h.endOffsetTime=M.moment.utc(U.durationInMillis).format("HH:mm:ss")},a=async()=>{try{await H.get("/api/v1/sourcelocations/lookup/").then($=>{h.lookups.adBreakSourceLocations=$.data})}catch(U){T.value=M.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},P=()=>{const U={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};h.item.adBreaks.push(U)},c=U=>{h.item.adBreaks.splice(U,1)},d=U=>{const $=M.moment,Y=$().startOf("day"),f=Y.format("YYYY-MM-DD ")+U.offsetTime,E=$(f).subtract(Y);U.offsetMillis=E.valueOf()},_=U=>{const $=M.moment,Y=$().startOf("day"),f=Y.format("YYYY-MM-DD ")+U.durationTime,E=$(f).subtract(Y);U.durationInMillis=E.valueOf()},k=async()=>{const U=h;if(w.value)return;if(!await g.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const Y=M.clone(U.item);debugger;await H.post("/api/v1/programtemplates/",Y).then(f=>{B.success("Add Program Template","Program template added.",{onClose:async()=>{const v=`${R.urlView}/${f.data}`;await K.push(v)}})})}catch(Y){T.value=M.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{w.value=!1}};return(U,$)=>{const Y=Q("router-link"),f=Q("PageHeader"),v=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",Du,[e("button",{disabled:o(g).$dirty&&o(g).$invalid,onClick:$[0]||($[0]=E=>k()),class:"btn btn-primary"},$[8]||($[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Bu),V(Y,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>$[9]||($[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(v,{errorMessage:o(T),vuelidate:o(g)},{default:I(()=>[e("div",null,[e("div",Hu,[e("div",Lu,[e("div",Nu,[e("div",qu,[x(e("input",{"onUpdate:modelValue":$[1]||($[1]=E=>h.item.name=E),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,h.item.name]]),$[10]||($[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(g).item.name.$error?(t(),s("div",Ru,[(t(!0),s(L,null,W(o(g).item.name.$errors,E=>(t(),s("div",{key:E.$uid},p(E.$message),1))),128))])):C("",!0)])])]),e("div",zu,[e("div",ju,[e("div",Fu,[x(e("select",{"onUpdate:modelValue":$[2]||($[2]=E=>h.item.sourceLocationId=E),onChange:$[3]||($[3]=E=>l(h.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,W(h.lookups.sourceLocations,E=>(t(),s("option",{value:E.id},p(E.name),9,Yu))),256))],544),[[pe,h.item.sourceLocationId]]),$[11]||($[11]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(g).item.sourceLocationId.$error?(t(),s("div",Gu,[(t(!0),s(L,null,W(o(g).item.sourceLocationId.$errors,E=>(t(),s("div",{key:E.$uid},p(E.$message),1))),128))])):C("",!0)])]),e("div",Wu,[e("div",Ku,[x(e("select",{"onUpdate:modelValue":$[4]||($[4]=E=>h.selected.vodSource=E),onChange:$[5]||($[5]=E=>j()),class:"form-select",id:"vodSourceId",disabled:h.item.adBreaks.length>0},[(t(!0),s(L,null,W(h.lookups.vodSources,E=>(t(),s("option",{value:E},p(o(M).moment.utc(E.durationInMillis).format("HH:mm:ss"))+" - "+p(E.name),9,Qu))),256))],40,Ju),[[pe,h.selected.vodSource]]),$[12]||($[12]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(g).item.vodSourceId.$error?(t(),s("div",Xu,[(t(!0),s(L,null,W(o(g).item.vodSourceId.$errors,E=>(t(),s("div",{key:E.$uid},p(E.$message),1))),128))])):C("",!0)])])]),h.item.vodSourceId?(t(),s("div",Zu,[e("div",ec,[e("div",tc,[x(e("input",{"onUpdate:modelValue":$[6]||($[6]=E=>h.startOffsetTime=E),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[D,h.startOffsetTime]]),$[13]||($[13]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),G.value>0&&G.value<3e4?(t(),s("div",sc,$[14]||($[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),G.value>J.value&&J.value>0?(t(),s("div",oc,$[15]||($[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):C("",!0),h.selected.vodSource&&G.value>=h.selected.vodSource.durationInMillis?(t(),s("div",ac,$[16]||($[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(g).item.startOffsetMillis.$error?(t(),s("div",lc,[(t(!0),s(L,null,W(o(g).item.startOffsetMillis.$errors,E=>(t(),s("div",{key:E.$uid},p(E.$message),1))),128))])):C("",!0)]),e("div",nc,[e("div",ic,[x(e("input",{"onUpdate:modelValue":$[7]||($[7]=E=>h.endOffsetTime=E),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[D,h.endOffsetTime]]),$[17]||($[17]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),J.value>0&&J.value<3e4?(t(),s("div",rc,$[18]||($[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),h.selected.vodSource&&J.value>h.selected.vodSource.durationInMillis?(t(),s("div",dc,$[19]||($[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(g).item.endOffsetMillis.$error?(t(),s("div",uc,[(t(!0),s(L,null,W(o(g).item.endOffsetMillis.$errors,E=>(t(),s("div",{key:E.$uid},p(E.$message),1))),128))])):C("",!0)])])):C("",!0),h.item.vodSourceId?(t(),s("div",cc,[e("div",{class:"d-flex flex-row justify-content-between"},[$[21]||($[21]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:P,class:"btn btn-outline-primary"},$[20]||($[20]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),q("Ad Break ")]))]),e("div",mc,[e("table",fc,[$[24]||($[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,W(h.item.adBreaks,(E,m)=>(t(),s("tr",null,[e("td",null,p(m+1),1),e("td",null,[x(e("input",{"onUpdate:modelValue":O=>E.offsetTime=O,onChange:O=>d(E),type:"time",step:"1",class:"form-control"},null,40,pc),[[D,E.offsetTime]]),E.offsetMillis>=h.selected.vodSource.durationInMillis?(t(),s("div",vc,$[22]||($[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0)]),e("td",null,[x(e("input",{"onUpdate:modelValue":O=>E.durationTime=O,onChange:O=>_(E),type:"time",step:"1",class:"form-control"},null,40,gc),[[D,E.durationTime]])]),e("td",bc,[e("button",{onClick:O=>c(m),class:"btn btn-outline-warning"},$[23]||($[23]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yc)])]))),256))])]),$[25]||($[25]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),q(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},wc={class:"d-flex justify-content-end"},hc=["disabled"],_c={class:"container"},kc={class:"row row-cols-1"},Sc={class:"col"},Tc={class:"form-floating mb-2"},Mc={key:0,class:"d-block invalid-feedback"},Cc={class:"row row-cols-sm-2"},xc={class:"col"},Ic={class:"form-floating mb-2"},Pc=["value"],Uc={key:0,class:"d-block invalid-feedback"},Vc={class:"col"},Oc={class:"form-floating mb-2"},Ac=["value"],Ec={key:0,class:"d-block invalid-feedback"},Dc={key:0,class:"row row-cols-1 row-cols-sm-2"},Bc={class:"col"},Hc={class:"form-floating"},Lc={key:0},Nc={key:1},qc={key:2},Rc={key:3,class:"d-block invalid-feedback"},zc={class:"col"},jc={class:"form-floating"},Fc={key:0},Yc={key:1},Gc={key:2,class:"d-block invalid-feedback"},Wc={key:1,class:"mt-2"},Kc={class:"table-responsive border mt-1"},Jc={class:"table"},Qc=["onUpdate:modelValue","onChange"],Xc={key:0},Zc=["onUpdate:modelValue","onChange"],em=["onClick"],tm={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,closeWithReturnUrl:z,security:R}=ce({appTitle:"Sony FAST",pageTitle:"Edit Program Template"}),h=i,S=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),g={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},G=we(g,S),J=Ue(()=>{const Y=M.moment;if(S.startOffsetTime&&S.startOffsetTime!=="00:00:00"&&u(S.startOffsetTime)){const f=Y().startOf("day"),v=f.format("YYYY-MM-DD ")+S.startOffsetTime,m=Y(v).subtract(f);return S.item.startOffsetMillis=m.valueOf(),S.item.startOffsetMillis}return 0}),n=Ue(()=>{const Y=M.moment;if(S.endOffsetTime&&S.endOffsetTime!=="00:00:00"&&u(S.endOffsetTime)){const f=Y().startOf("day"),v=f.format("YYYY-MM-DD ")+S.endOffsetTime,m=Y(v).subtract(f);return S.item.endOffsetMillis=m.valueOf(),S.item.endOffsetMillis}return 0}),u=Y=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(Y);ie(async()=>{await F()});const F=async()=>{await l(),await j()},l=async()=>{try{const Y=`/api/v1/programtemplates/${h.id}/`;await H.get(Y).then(f=>{S.item=f.data,S.startOffsetTime=M.moment.utc(S.item.startOffsetMillis).format("HH:mm:ss"),S.endOffsetTime=M.moment.utc(S.item.endOffsetMillis).format("HH:mm:ss"),S.item.adBreaks.forEach(v=>{v.offsetTime=M.moment.utc(v.offsetMillis).format("HH:mm:ss"),v.durationTime=M.moment.utc(v.durationInMillis).format("HH:mm:ss")})})}catch(Y){T.value=M.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{}},j=async()=>{await a()},a=async()=>{try{await H.get("/api/v1/sourcelocations/lookup/").then(f=>{S.lookups.sourceLocations=f.data}),S.item.sourceLocationId&&await P(S.item.sourceLocationId)}catch(Y){T.value=M.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{}},P=async Y=>{try{const f=`/api/v1/vodSources/lookup/source-location/${Y}/`;await H.get(f).then(E=>{S.lookups.vodSources=E.data});const v=S.lookups.vodSources.find(E=>E.id==S.item.vodSourceId);S.selected.vodSource=v,await c()}catch(f){T.value=M.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},c=async()=>{const Y=S.selected.vodSource;S.item.vodSourceId=Y.id,S.endOffsetTime=M.moment.utc(Y.durationInMillis).format("HH:mm:ss")},d=()=>{const Y={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};S.item.adBreaks.push(Y)},_=Y=>{S.item.adBreaks.splice(Y,1)},k=Y=>{const f=M.moment,v=f().startOf("day"),E=v.format("YYYY-MM-DD ")+Y.offsetTime,O=f(E).subtract(v);Y.offsetMillis=O.valueOf()},U=Y=>{const f=M.moment,v=f().startOf("day"),E=v.format("YYYY-MM-DD ")+Y.durationTime,O=f(E).subtract(v);Y.durationInMillis=O.valueOf()},$=async()=>{const Y=S;if(w.value)return;if(!await G.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="";const v=M.clone(Y.item);debugger;v.startOffsetMillis=J.value,v.endOffsetMillis=n.value,await H.put("/api/v1/programtemplates/",v).then(E=>{B.success("Edit Program Template","Program template edit.",{onClose:async()=>{const m=`${h.urlView}/${h.id}`;await K.push(m)}})})}catch(v){T.value=M.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{w.value=!1}};return(Y,f)=>{const v=Q("PageHeader"),E=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(v,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",wc,[e("button",{onClick:f[0]||(f[0]=m=>F()),class:"btn btn-outline-primary"},f[10]||(f[10]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{disabled:o(G).$dirty&&o(G).$invalid,onClick:f[1]||(f[1]=m=>$()),class:"btn btn-primary ms-1"},f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hc),e("button",{onClick:f[2]||(f[2]=m=>o(z)(h.urlMain)),class:"btn btn-secondary ms-1"},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(E,{errorMessage:o(T),vuelidate:o(G)},{default:I(()=>[e("div",null,[e("div",_c,[e("div",kc,[e("div",Sc,[e("div",Tc,[x(e("input",{"onUpdate:modelValue":f[3]||(f[3]=m=>S.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,S.item.name]]),f[13]||(f[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(G).item.name.$error?(t(),s("div",Mc,[(t(!0),s(L,null,W(o(G).item.name.$errors,m=>(t(),s("div",{key:m.$uid},p(m.$message),1))),128))])):C("",!0)])])]),e("div",Cc,[e("div",xc,[e("div",Ic,[x(e("select",{"onUpdate:modelValue":f[4]||(f[4]=m=>S.item.sourceLocationId=m),onChange:f[5]||(f[5]=m=>P(S.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,W(S.lookups.sourceLocations,m=>(t(),s("option",{value:m.id},p(m.name),9,Pc))),256))],544),[[pe,S.item.sourceLocationId]]),f[14]||(f[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(G).item.sourceLocationId.$error?(t(),s("div",Uc,[(t(!0),s(L,null,W(o(G).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},p(m.$message),1))),128))])):C("",!0)])]),e("div",Vc,[e("div",Oc,[x(e("select",{"onUpdate:modelValue":f[6]||(f[6]=m=>S.selected.vodSource=m),onChange:f[7]||(f[7]=m=>c()),class:"form-select",id:"vodSourceId"},[(t(!0),s(L,null,W(S.lookups.vodSources,m=>(t(),s("option",{value:m},p(o(M).moment.utc(m.durationInMillis).format("HH:mm:ss"))+" - "+p(m.name),9,Ac))),256))],544),[[pe,S.selected.vodSource]]),f[15]||(f[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(G).item.vodSourceId.$error?(t(),s("div",Ec,[(t(!0),s(L,null,W(o(G).item.vodSourceId.$errors,m=>(t(),s("div",{key:m.$uid},p(m.$message),1))),128))])):C("",!0)])])]),S.item.vodSourceId?(t(),s("div",Dc,[e("div",Bc,[q(" ["+p(J.value)+"] x ["+p(S.startOffsetMillis)+"] ",1),e("div",Hc,[x(e("input",{"onUpdate:modelValue":f[8]||(f[8]=m=>S.startOffsetTime=m),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[D,S.startOffsetTime]]),f[16]||(f[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),J.value>0&&J.value<3e4?(t(),s("div",Lc,f[17]||(f[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),J.value>n.value&&n.value>0?(t(),s("div",Nc,f[18]||(f[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):C("",!0),S.selected.vodSource&&J.value>=S.selected.vodSource.durationInMillis?(t(),s("div",qc,f[19]||(f[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(G).item.startOffsetMillis.$error?(t(),s("div",Rc,[(t(!0),s(L,null,W(o(G).item.startOffsetMillis.$errors,m=>(t(),s("div",{key:m.$uid},p(m.$message),1))),128))])):C("",!0)]),e("div",zc,[e("div",jc,[x(e("input",{"onUpdate:modelValue":f[9]||(f[9]=m=>S.endOffsetTime=m),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[D,S.endOffsetTime]]),f[20]||(f[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),n.value>0&&n.value<3e4?(t(),s("div",Fc,f[21]||(f[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),S.selected.vodSource&&n.value>S.selected.vodSource.durationInMillis?(t(),s("div",Yc,f[22]||(f[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0),o(G).item.endOffsetMillis.$error?(t(),s("div",Gc,[(t(!0),s(L,null,W(o(G).item.endOffsetMillis.$errors,m=>(t(),s("div",{key:m.$uid},p(m.$message),1))),128))])):C("",!0)])])):C("",!0),S.selected.vodSource?(t(),s("div",Wc,[e("div",{class:"d-flex flex-row justify-content-between"},[f[24]||(f[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:d,class:"btn btn-outline-primary"},f[23]||(f[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),q("Ad Break ")]))]),e("div",Kc,[e("table",Jc,[f[28]||(f[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,W(S.item.adBreaks,(m,O)=>(t(),s("tr",null,[e("td",null,p(O+1),1),e("td",null,[x(e("input",{"onUpdate:modelValue":Z=>m.offsetTime=Z,onChange:Z=>k(m),type:"time",step:"1",class:"form-control"},null,40,Qc),[[D,m.offsetTime]]),m.offsetMillis>=S.selected.vodSource.durationInMillis?(t(),s("div",Xc,f[25]||(f[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):C("",!0)]),e("td",null,[x(e("input",{"onUpdate:modelValue":Z=>m.durationTime=Z,onChange:Z=>U(m),type:"time",step:"1",class:"form-control"},null,40,Zc),[[D,m.durationTime]])]),f[27]||(f[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),q(" Source Location and Vod source will be defined in Program Instance. "),e("br"),q(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:Z=>_(O),class:"btn btn-outline-warning"},f[26]||(f[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,em)])]))),256))])])])])):C("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},sm={class:"d-flex justify-content-end"},om={class:"ms-1"},am={class:"input-group"},lm={class:"table-responsive"},nm={class:"table table-hover mb-0"},im=["textContent"],rm={key:0,class:"fas fa-fw fa-check-circle text-success"},dm={class:"text-end"},um={class:"border-top"},cm="/api/v1/programTemplates/search",mm={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,security:h,filter:S,initializeFilter:g,getQuery:G,saveQuery:J,search:n,getRowNumber:u,setSelected:F,isSelected:l}=Ie({appTitle:"Sony FAST",pageTitle:"Program Templates",cacheKey:`${b==null?void 0:b.userId}/program-templates/search`,baseUrl:cm,filter:{updateUrl:!0}});return ie(async()=>{g(),await n()}),(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("m-pagination"),_=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:I(()=>[e("div",sm,[V(P,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",om,[e("div",am,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=k=>o(S).query.criteria=k),onKeyup:a[1]||(a[1]=Me(k=>o(n)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=k=>o(n)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(_,{errorMessage:o(H)},{default:I(()=>[e("div",lm,[e("table",nm,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(S).items,(k,U)=>(t(),s("tr",{key:k.movieId},[e("td",{textContent:p(o(u)(U)),class:"text-center"},null,8,im),e("td",null,[V(P,{to:`${i.urlView}/${k.programTemplateId}`,class:"d-inline-block text-truncate"},{default:I(()=>[k.arn?(t(),s("span",rm)):C("",!0),q(" "+p(k.name),1)]),_:2},1032,["to"])]),e("td",dm,p(o(X).moment.utc(k.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[q(p(k.sourceLocation.name)+" ",1),e("div",um,p(k.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,p(k.vodSource.name),1)]))),128))]),_:1},512),[[$e,o(S).items.length>0]])])]),V(d,{filter:o(S),search:o(n),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},fm={class:"d-flex flex-row justify-content-end"},pm={key:0},vm={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},gm={class:"nav-item",role:"presentation"},bm={class:"nav-item",role:"presentation"},ym={class:"nav-item",role:"presentation"},$m={class:"tab-content",id:"myTabContent"},wm={class:"mt-2"},hm={class:"row row-cols-1 row-cols-sm-3"},_m={class:"col"},km={class:"form-floating mb-2"},Sm={class:"col"},Tm={class:"form-floating mb-2"},Mm={class:"col"},Cm={class:"form-floating mb-2"},xm={class:"row row-cols-1 row-cols-sm-3"},Im={class:"col"},Pm={class:"form-floating mb-2"},Um={class:"col"},Vm={class:"form-floating mb-2"},Om={class:"col"},Am={class:"form-floating mb-2"},Em={class:"row row-cols-1 row-cols-sm-2"},Dm={class:"col-sm-4"},Bm={class:"form-floating mb-2"},Hm={class:"col-sm-8"},Lm={class:"form-floating mb-2"},Nm={class:""},qm={class:"col"},Rm={class:"form-floating mb-2"},zm={class:"row row-cols-1 row-cols-sm-2"},jm={class:"col"},Fm={class:"form-floating mb-2"},Ym={class:"col"},Gm={class:"form-floating mb-2"},Wm={class:"row row-cols-1 row-cols-sm-2"},Km={class:"col"},Jm={class:"form-floating mb-2"},Qm={class:"col"},Xm={class:"form-floating mb-2"},Zm={class:"row row-cols-1 row-cols-sm-2"},ef={class:"col"},tf={class:"form-floating mb-2"},sf={class:"col"},of={class:"form-floating mb-2"},af={class:"row row-cols-1 row-cols-sm-2"},lf={class:"col"},nf={class:"form-floating mb-2"},rf={class:"col"},df={class:"form-floating mb-2"},uf={class:"mt-2"},cf={class:"table-responsive"},mf={class:"table table-hover mb-0"},ff={class:"text-center"},pf={class:"mt-2"},vf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"Sony FAST",pageTitle:"View Program Template"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null}),u=re();ie(async()=>{await a(),u.value=z.getPageTab("programTemplate")||"information-tab"});const F=c=>{z.setPageTab("programTemplate",c),u.value=c},l=c=>c!==u.value?"":"active",j=c=>c!==u.value?"":"show active",a=async()=>{const c=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const d=`/api/v1/programTemplates/${r.id}/`;await X.get(d).then(_=>{c.item=_.data;const k=c.item;k.startOffsetTime=z.moment.utc(k.startOffsetMillis).format("HH:mm:ss"),k.endOffsetTime=z.moment.utc(k.endOffsetMillis).format("HH:mm:ss"),k.durationTime=z.moment.utc(k.durationInMillis).format("HH:mm:ss"),k.adBreaksDurationTime=z.moment.utc(k.adBreaksDurationInMillis).format("HH:mm:ss"),k.totalProgramTemplateDurationTime=z.moment.utc(k.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const U=k.vodSource.video,$=U.durationInMillis;U.durationInMillis=z.moment.utc($).format("HH:mm:ss")})}catch(d){M.value=z.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await a()};return(c,d)=>{const _=Q("router-link"),k=Q("PageHeader"),U=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(k,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",fm,[V(_,{to:`${i.urlEdit}/${i.id}/${o(g)()}`,class:"ms-2 btn btn-primary"},{default:I(()=>d[22]||(d[22]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:d[0]||(d[0]=$=>P()),class:"ms-2 btn btn-secondary"},d[23]||(d[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:d[1]||(d[1]=$=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},d[24]||(d[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(U,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",pm,[e("div",null,[e("ul",vm,[e("li",gm,[e("button",{onClick:d[2]||(d[2]=$=>F("information-tab")),class:oe([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",bm,[e("button",{onClick:d[3]||(d[3]=$=>F("adBreaks-tab")),class:oe([l("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",ym,[e("button",{onClick:d[4]||(d[4]=$=>F("programs-tab")),class:oe([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",$m,[e("div",{class:oe([j("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",wm,[e("div",hm,[e("div",_m,[e("div",km,[x(e("input",{"onUpdate:modelValue":d[5]||(d[5]=$=>n.item.name=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.name]]),d[25]||(d[25]=e("label",{for:"name"},"Name",-1))])]),e("div",Sm,[e("div",Tm,[x(e("input",{"onUpdate:modelValue":d[6]||(d[6]=$=>n.item.startOffsetTime=$),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[D,n.item.startOffsetTime]]),d[26]||(d[26]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Mm,[e("div",Cm,[x(e("input",{"onUpdate:modelValue":d[7]||(d[7]=$=>n.item.endOffsetTime=$),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[D,n.item.endOffsetTime]]),d[27]||(d[27]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),e("div",xm,[e("div",Im,[e("div",Pm,[x(e("input",{"onUpdate:modelValue":d[8]||(d[8]=$=>n.item.durationTime=$),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[D,n.item.durationTime]]),d[28]||(d[28]=e("label",{for:"durationTime"},"Clip Duration",-1))])]),e("div",Um,[e("div",Vm,[x(e("input",{"onUpdate:modelValue":d[9]||(d[9]=$=>n.item.adBreaksDurationTime=$),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[D,n.item.adBreaksDurationTime]]),d[29]||(d[29]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Om,[e("div",Am,[x(e("input",{"onUpdate:modelValue":d[10]||(d[10]=$=>n.item.totalProgramTemplateDurationTime=$),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[D,n.item.totalProgramTemplateDurationTime]]),d[30]||(d[30]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),d[45]||(d[45]=e("hr",null,null,-1)),e("div",null,[d[33]||(d[33]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",Em,[e("div",Dm,[e("div",Bm,[x(e("input",{"onUpdate:modelValue":d[11]||(d[11]=$=>n.item.sourceLocation.name=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.sourceLocation.name]]),d[31]||(d[31]=e("label",{for:"name"},"Name",-1))])]),e("div",Hm,[e("div",Lm,[x(e("input",{"onUpdate:modelValue":d[12]||(d[12]=$=>n.item.sourceLocation.httpConfigurationBaseUrl=$),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[D,n.item.sourceLocation.httpConfigurationBaseUrl]]),d[32]||(d[32]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),d[46]||(d[46]=e("hr",null,null,-1)),e("div",null,[d[43]||(d[43]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",Nm,[e("div",qm,[e("div",Rm,[x(e("input",{"onUpdate:modelValue":d[13]||(d[13]=$=>n.item.vodSource.name=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.name]]),d[34]||(d[34]=e("label",{for:"name"},"VOD Name",-1))])])]),d[44]||(d[44]=e("div",null,[e("h6",null,"Video")],-1)),e("div",zm,[e("div",jm,[e("div",Fm,[x(e("input",{"onUpdate:modelValue":d[14]||(d[14]=$=>n.item.vodSource.video.title=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.title]]),d[35]||(d[35]=e("label",{for:"name"},"Video Name",-1))])]),e("div",Ym,[e("div",Gm,[x(e("input",{"onUpdate:modelValue":d[15]||(d[15]=$=>n.item.vodSource.video.durationInMillis=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.durationInMillis]]),d[36]||(d[36]=e("label",{for:"name"},"Video Duration",-1))])])]),e("div",Wm,[e("div",Km,[e("div",Jm,[x(e("input",{"onUpdate:modelValue":d[16]||(d[16]=$=>n.item.vodSource.video.rawBaseUrl=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.rawBaseUrl]]),d[37]||(d[37]=e("label",{for:"name"},"Raw Base Url",-1))])]),e("div",Qm,[e("div",Xm,[x(e("input",{"onUpdate:modelValue":d[17]||(d[17]=$=>n.item.vodSource.video.rawPath=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.rawPath]]),d[38]||(d[38]=e("label",{for:"name"},"Raw Path",-1))])])]),e("div",Zm,[e("div",ef,[e("div",tf,[x(e("input",{"onUpdate:modelValue":d[18]||(d[18]=$=>n.item.vodSource.video.hlsBaseUrl=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.hlsBaseUrl]]),d[39]||(d[39]=e("label",{for:"name"},"HLS Base Url",-1))])]),e("div",sf,[e("div",of,[x(e("input",{"onUpdate:modelValue":d[19]||(d[19]=$=>n.item.vodSource.video.hlsPath=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.hlsPath]]),d[40]||(d[40]=e("label",{for:"name"},"HLS Path",-1))])])]),e("div",af,[e("div",lf,[e("div",nf,[x(e("input",{"onUpdate:modelValue":d[20]||(d[20]=$=>n.item.vodSource.video.dashBaseUrl=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.dashBaseUrl]]),d[41]||(d[41]=e("label",{for:"name"},"DASH Base Url",-1))])]),e("div",rf,[e("div",df,[x(e("input",{"onUpdate:modelValue":d[21]||(d[21]=$=>n.item.vodSource.video.dashPath=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.vodSource.video.dashPath]]),d[42]||(d[42]=e("label",{for:"name"},"DASH Path",-1))])])])])])],2),e("div",{class:oe([j("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",uf,[e("div",cf,[e("table",mf,[d[47]||(d[47]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.adBreaks,($,Y)=>(t(),s("tr",{key:$.programTemplateAdBreakId},[e("td",ff,p(Y+1),1),e("td",null,p(o(z).moment.utc($.offsetMillis).format("HH:mm:ss")),1),e("td",null,p(o(z).moment.utc($.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[$e,n.item.adBreaks.length>0]])])])])],2),e("div",{class:oe([j("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",pf,[e("pre",null,p(n.item.programs),1)])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},gf={class:"d-flex justify-content-end"},bf=["disabled"],yf={class:"input-group"},$f={class:"row row-cols-1 row-cols-sm-2 mt-3"},wf={class:"col text-center mb-2"},hf=["src"],_f={class:"col"},kf={class:"form-floating mb-2"},Sf={key:0,class:"d-block invalid-feedback"},Tf={class:"form-floating mb-2"},Mf={class:"row row-cols-sm-2"},Cf={class:"col"},xf={class:"form-floating mb-2"},If={class:"col"},Pf={class:"form-floating mb-2"},Uf={class:"row row-cols-sm-2"},Vf={class:"col"},Of={class:"form-floating mb-2"},Af={class:"col"},Ef={class:"form-floating mb-2"},Df={class:"col"},Bf={class:"form-floating mb-2"},Hf={class:"col"},Lf={class:"form-floating mb-2"},qe="YYYY-MM-DD HH:mm",Nf={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"ARC AIO",pageTitle:"Add User"}),R=i,h=M.moment().local();h.format(qe),h.add(24,"hours").format(qe);const S=re("a22de760-358d-4a0e-83ad-2624a5c11f73"),g=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),G={item:{userId:{required:te.withMessage("User Id is required.",se),$autoDirty:!0,$lazy:!0}}},J=we(G,g);ie(async()=>{});const n=async()=>{const F=g;if(!w.value)try{w.value=!0,F.item=null;const l=`/api/v1/users/get-from-entra-id/${S.value}`;await H.get(l).then(j=>{F.item=j.data})}catch(l){T.value=M.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{w.value=!1}},u=async()=>{const F=g;if(w.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{w.value=!0,T.value="",await H.post(`/api/v1/users/add-from-entra-id/${F.item.userId}`).then(j=>{B.success("Add User","User added",{onClose:async()=>{const a=`${R.urlView}/${j.data}`;await K.push(a)}})})}catch(j){T.value=M.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{w.value=!1}};return(F,l)=>{const j=Q("router-link"),a=Q("PageHeader"),P=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",gf,[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:l[0]||(l[0]=c=>u()),class:"btn btn-primary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,bf),V(j,{to:R.urlMain,class:"btn btn-secondary ms-2"},{default:I(()=>l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(P,{errorMessage:o(T),vuelidate:o(J)},{default:I(()=>[e("div",null,[e("div",null,[e("div",yf,[x(e("input",{"onUpdate:modelValue":l[1]||(l[1]=c=>S.value=c),onKeyup:l[2]||(l[2]=Me(c=>n(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[D,S.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[3]||(l[3]=c=>n())},l[14]||(l[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",$f,[e("div",wf,[e("img",{src:g.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,hf)]),e("div",_f,[e("div",kf,[x(e("input",{"onUpdate:modelValue":l[4]||(l[4]=c=>g.item.userId=c),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[D,g.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1)),o(J).item.userId.$error?(t(),s("div",Sf,[(t(!0),s(L,null,W(o(J).item.userId.$errors,c=>(t(),s("div",{key:c.$uid},p(c.$message),1))),128))])):C("",!0)]),e("div",Tf,[x(e("input",{"onUpdate:modelValue":l[5]||(l[5]=c=>g.item.displayName=c),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[D,g.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Mf,[e("div",Cf,[e("div",xf,[x(e("input",{"onUpdate:modelValue":l[6]||(l[6]=c=>g.item.givenName=c),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[D,g.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",If,[e("div",Pf,[x(e("input",{"onUpdate:modelValue":l[7]||(l[7]=c=>g.item.surname=c),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[D,g.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Uf,[e("div",Vf,[e("div",Of,[x(e("input",{"onUpdate:modelValue":l[8]||(l[8]=c=>g.item.email=c),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[D,g.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Af,[e("div",Ef,[x(e("input",{"onUpdate:modelValue":l[9]||(l[9]=c=>g.item.mobilePhone=c),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[D,g.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Df,[e("div",Bf,[x(e("input",{"onUpdate:modelValue":l[10]||(l[10]=c=>g.item.principalName=c),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[D,g.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Hf,[e("div",Lf,[x(e("input",{"onUpdate:modelValue":l[11]||(l[11]=c=>g.item.jobTitle=c),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[D,g.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},qf={components:{Page:Oe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Rf(i,r,b,w,y,N){const T=Q("Page");return t(),ne(T,{id:b.id,urlView:b.urlView},null,8,["id","urlView"])}const zf=he(qf,[["render",Rf]]),jf={class:"d-flex justify-content-end"},Ff={key:0},Yf={class:"ms-1"},Gf={class:"input-group"},Wf={class:"table-responsive"},Kf={class:"table table-hover mb-0"},Jf=["textContent"],Qf="/api/v1/channels/search",Xf={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(i){be("$config");const b=fe().user,{appTitle:w,pageTitle:y,busy:N,infoMessage:T,warningMessage:K,errorMessage:H,router:M,axios:B,utils:X,toasts:z,close:R,security:h,filter:S,initializeFilter:g,getQuery:G,saveQuery:J,search:n,getRowNumber:u,setSelected:F,isSelected:l}=Ie({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${b==null?void 0:b.userId}/Channels/search`,baseUrl:Qf,filter:{updateUrl:!0}});return ie(async()=>{g(),await n()}),(j,a)=>{const P=Q("router-link"),c=Q("PageHeader"),d=Q("m-pagination"),_=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(c,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(y)},{default:I(()=>[e("div",jf,[o(h).isAdministrator?(t(),s("div",Ff,[V(P,{to:i.urlAdd,class:"btn btn-primary"},{default:I(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",Yf,[e("div",Gf,[x(e("input",{"onUpdate:modelValue":a[0]||(a[0]=k=>o(S).query.criteria=k),onKeyup:a[1]||(a[1]=Me(k=>o(n)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[D,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=k=>o(n)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),V(_,{errorMessage:o(H)},{default:I(()=>[e("div",Wf,[e("table",Kf,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(o(S).items,(k,U)=>(t(),s("tr",{key:k.channelId},[e("td",{textContent:p(o(u)(U)),class:"text-center"},null,8,Jf),e("td",null,[V(P,{to:`${i.urlView}/${k.channelId}`,class:"d-inline-block text-truncate"},{default:I(()=>[q(p(k.name),1)]),_:2},1032,["to"])]),e("td",null,p(k.playbackMode),1),e("td",null,p(k.tier),1)]))),128))]),_:1},512),[[$e,o(S).items.length>0]])])]),V(d,{filter:o(S),search:o(n),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Zf=["id"],ep={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},tp={class:"modal-content"},sp={class:"modal-header bg-primary text-white"},op={class:"modal-title",id:"exampleModalLabel"},ap={class:"modal-body"},lp={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},np=["innerHTML"],ip={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},rp={class:"container"},dp={class:"col"},up={class:"form-floating mb-2"},cp=["value"],mp={class:"row row-cols-1 row-cols-sm-3"},fp={key:0,class:"col"},pp={class:"form-floating mb-2"},vp=["disabled"],gp=["value"],bp={class:"col"},yp={class:"form-floating mb-2"},$p={key:0,class:"d-block invalid-feedback"},wp={class:"col"},hp={class:"form-floating mb-2"},_p={key:0,class:"d-block invalid-feedback"},kp={key:0},Sp={class:"row row-cols-1 row-cols-sm-3"},Tp={class:"col"},Mp={class:"form-floating mb-2"},Cp={class:"col"},xp={class:"form-floating mb-2"},Ip={class:"col"},Pp={class:"form-floating mb-2"},Up={class:"row row-cols-1 row-cols-sm-2"},Vp={class:"col"},Op={class:"form-floating mb-2"},Ap={class:"col"},Ep={class:"form-floating mb-2"},Dp={class:"row row-cols-1 row-cols-sm-2"},Bp={class:"col"},Hp={class:"form-floating mb-2"},Lp={class:"col"},Np={class:"form-floating mb-2"},qp={key:1},Rp={class:"table-responsive border mt-1"},zp={class:"table mb-0"},jp=["onUpdate:modelValue"],Fp=["value"],Yp={class:"modal-footer"},Gp=["disabled"],Wp={__name:"_addProgramFromTemplate",emits:["onClose"],setup(i,{expose:r,emit:b}){const{appTitle:w,pageTitle:y,busy:N,isDirty:T,validations:K,infoMessage:H,warningMessage:M,errorMessage:B,router:X,axios:z,utils:R,toasts:h,closeWithReturnUrl:S,security:g}=ce({appTitle:"Sony FAST",pageTitle:"Add Program from Template"}),G=b,J=re(),n=re("modalAddProgramFromTemplate"),u=ue({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),F={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},l=we(F,u);ie(async()=>{l.value.$reset()});const j=async(E,m,O)=>{J.value=E;const Z=u;K.value.clear(),B.value="";const ae=R.moment(O),Se=ae.format("YYYY-MM-DD HH:mm"),le=ae.format("YYYYMMDD_HHmm")+"_PRG_";Z.eventId=m,Z.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},Z.selected={programTemplate:null},Z.item={programTemplateId:null,name:le,relativeProgramId:null,dateScheduledStart:Se,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await c(),await d(),l.value.$reset();var A=document.getElementById(n.value),ge=_e.getOrCreateInstance(A);ge.show()},a=async E=>{const m=u.selected.channel.programs;if(E&&m.find(ge=>ge.name===u.item.name)){alert(`Program name = [${u.item.name}] already exists.`);return}if(!E){G("onClose",{eventId:u.eventId},E);var Se=document.getElementById(n.value),le=_e.getOrCreateInstance(Se);le.hide();return}const O=u,Z=R.moment(O.item.dateScheduledStart).utc().format(),ae=R.moment(O.item.dateScheduledStart).add(O.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),ve={eventId:O.eventId,programTemplateId:O.selected.programTemplate.programTemplateId,channelId:O.selected.channel.channelId,name:O.item.name,dateScheduledStart:Z,dateScheduledEnd:ae,relativeProgramId:O.item.relativeProgramId,adBreaks:O.selected.programTemplate.adBreaks.map(A=>({offsetMillis:A.offsetMillis,sourceLocationId:O.selected.programTemplate.sourceLocationId,vodSourceId:A.vodSourceId}))};G("onClose",ve,E);var Se=document.getElementById(n.value),le=_e.getOrCreateInstance(Se);le.hide()},P=async()=>{await a(!0)},c=async()=>{try{const E=`/api/v1/channels/${J.value}/`;await z.get(E).then(m=>{u.selected.channel=m.data})}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},d=async()=>{await $(),await v(),await _()},_=async()=>{try{const E=`/api/v1/programTemplates/lookup/by-channel/${J.value}`;await z.get(E).then(m=>{u.lookups.programTemplates=m.data})}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},k=async()=>{await U(u.item.programTemplateId)},U=async E=>{try{const m=`/api/v1/programTemplates/${E}/`;await z.get(m).then(ae=>{u.selected.programTemplate=ae.data;const ve=u.selected.programTemplate;ve.startOffsetTime=R.moment.utc(ve.startOffsetMillis).format("HH:mm:ss"),ve.endOffsetTime=R.moment.utc(ve.endOffsetMillis).format("HH:mm:ss"),ve.durationTime=R.moment.utc(ve.durationInMillis).format("HH:mm:ss"),ve.adBreaksDurationTime=R.moment.utc(ve.adBreaksDurationInMillis).format("HH:mm:ss"),ve.totalProgramTemplateDurationTime=R.moment.utc(ve.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ve.adBreaks.forEach(Se=>{Se.vodSourceId=null})});const O=u,Z=O.selected.channel.outputs[0].outputType;await f(O.selected.programTemplate.sourceLocationId,Z)}catch(m){B.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},$=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(m=>{u.lookups.sourceLocations=m.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await Y(u.item.sourceLocationId)}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},Y=async E=>{try{let m=`/api/v1/vodSources/lookup/source-location/${E}`;await z.get(m).then(O=>{u.lookups.vodSources=O.data})}catch(m){B.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},f=async(E,m)=>{try{let O=`/api/v1/vodsources/lookup/source-location/${E}/output-type/${m}`;await z.get(O).then(Z=>{u.lookups.adBreakVodSources=Z.data})}catch(O){B.value=R.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},v=async()=>{try{const E=`/api/v1/programs/lookup/?channelId=${J.value}`;await z.get(E).then(m=>{u.lookups.channelPrograms=m.data;const O=u.lookups.channelPrograms.length})}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}};return r({open:j,close:a}),(E,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:n.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ep,[e("div",tp,[e("div",sp,[e("h5",op,p(o(w))+" - "+p(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:m[0]||(m[0]=O=>a(!1)),"aria-label":"Close"})]),e("div",ap,[o(B)?(t(),s("div",lp,[m[15]||(m[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,np)])):C("",!0),o(K).size>0?(t(),s("div",ip,[m[16]||(m[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(K).values(),O=>(t(),s("li",null,p(O),1))),256))])])):C("",!0),e("div",rp,[e("div",dp,[e("div",up,[x(e("select",{"onUpdate:modelValue":m[1]||(m[1]=O=>u.item.programTemplateId=O),class:"form-select",onChange:m[2]||(m[2]=O=>k()),id:"sourceLocationId"},[(t(!0),s(L,null,W(u.lookups.programTemplates,O=>(t(),s("option",{value:O.id}," ["+p(o(R).moment.utc(O.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+p(O.name),9,cp))),256))],544),[[pe,u.item.programTemplateId]]),m[17]||(m[17]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Program Template",-1))])]),e("div",mp,[u.selected.channel?(t(),s("div",fp,[e("div",pp,[x(e("select",{"onUpdate:modelValue":m[3]||(m[3]=O=>u.item.relativeProgramId=O),class:"form-select",id:"xxx",disabled:u.selected.channel.programs.length<=0},[(t(!0),s(L,null,W(u.lookups.channelPrograms,O=>(t(),s("option",{value:O.id},p(O.name),9,gp))),256))],8,vp),[[pe,u.item.relativeProgramId]]),m[18]||(m[18]=e("label",{for:"xxx",class:"small fw-bold"},"Relative Program",-1))])])):C("",!0),e("div",bp,[e("div",yp,[x(e("input",{"onUpdate:modelValue":m[4]||(m[4]=O=>u.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,u.item.name]]),m[19]||(m[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",$p,[(t(!0),s(L,null,W(o(l).item.name.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])]),e("div",wp,[e("div",hp,[x(e("input",{"onUpdate:modelValue":m[5]||(m[5]=O=>u.item.dateScheduledStart=O),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[D,u.item.dateScheduledStart]]),m[20]||(m[20]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",_p,[(t(!0),s(L,null,W(o(l).item.dateScheduledStart.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])])]),u.selected.programTemplate?(t(),s("div",kp,[e("div",Sp,[e("div",Tp,[e("div",Mp,[x(e("input",{"onUpdate:modelValue":m[6]||(m[6]=O=>u.selected.programTemplate.startOffsetTime=O),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[D,u.selected.programTemplate.startOffsetTime]]),m[21]||(m[21]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Cp,[e("div",xp,[x(e("input",{"onUpdate:modelValue":m[7]||(m[7]=O=>u.selected.programTemplate.endOffsetTime=O),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[D,u.selected.programTemplate.endOffsetTime]]),m[22]||(m[22]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Ip,[e("div",Pp,[x(e("input",{"onUpdate:modelValue":m[8]||(m[8]=O=>u.selected.programTemplate.durationTime=O),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[D,u.selected.programTemplate.durationTime]]),m[23]||(m[23]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Up,[e("div",Vp,[e("div",Op,[x(e("input",{"onUpdate:modelValue":m[9]||(m[9]=O=>u.selected.programTemplate.adBreaksDurationTime=O),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[D,u.selected.programTemplate.adBreaksDurationTime]]),m[24]||(m[24]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Ap,[e("div",Ep,[x(e("input",{"onUpdate:modelValue":m[10]||(m[10]=O=>u.selected.programTemplate.totalProgramTemplateDurationTime=O),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[D,u.selected.programTemplate.totalProgramTemplateDurationTime]]),m[25]||(m[25]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",Dp,[e("div",Bp,[e("div",Hp,[x(e("input",{"onUpdate:modelValue":m[11]||(m[11]=O=>u.selected.programTemplate.sourceLocation.name=O),id:"name",class:"form-control",disabled:""},null,512),[[D,u.selected.programTemplate.sourceLocation.name]]),m[26]||(m[26]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",Lp,[e("div",Np,[x(e("input",{"onUpdate:modelValue":m[12]||(m[12]=O=>u.selected.programTemplate.vodSource.name=O),id:"name",class:"form-control",disabled:""},null,512),[[D,u.selected.programTemplate.vodSource.name]]),m[27]||(m[27]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):C("",!0),m[30]||(m[30]=e("hr",null,null,-1)),u.selected.programTemplate?(t(),s("div",qp,[m[29]||(m[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",Rp,[e("table",zp,[m[28]||(m[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(L,null,W(u.selected.programTemplate.adBreaks,(O,Z)=>(t(),s("tr",null,[e("td",null,p(Z+1),1),e("td",null,p(o(R).moment.utc(O.offsetMillis).format("HH:mm:ss")),1),e("td",null,p(o(R).moment.utc(O.durationInMillis).format("HH:mm:ss")),1),e("td",null,[x(e("select",{"onUpdate:modelValue":ae=>O.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(L,null,W(u.lookups.adBreakVodSources,ae=>(t(),s(L,null,[ae.durationInMillis===O.durationInMillis?(t(),s("option",{key:0,value:ae.id}," ["+p(o(R).moment.utc(ae.durationInMillis).format("HH:mm:ss"))+"] "+p(ae.name),9,Fp)):C("",!0)],64))),256))],8,jp),[[pe,O.vodSourceId]])])]))),256))])])])])):C("",!0)])]),e("div",Yp,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:m[13]||(m[13]=O=>P()),class:"btn btn-primary",type:"button"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gp),e("button",{onClick:m[14]||(m[14]=O=>a(!1)),class:"btn btn-secondary ms-1"},m[32]||(m[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Zf))}},Kp={class:"d-flex justify-content-end"},Jp={__name:"scheduleProgram",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(i){const{appTitle:r,pageTitle:b,busy:w,infoMessage:y,warningMessage:N,errorMessage:T,router:K,axios:H,utils:M,toasts:B,close:X,security:z}=ce({appTitle:"Sony FAST",pageTitle:"Schedule Channel Programs"}),R=i,h=re(null),S=re(null),g={viewType:"WorkWeek",cellDuration:60,startDate:xe.DayPilot.Date.today(),onTimeRangeSelected:P=>{var c=P.control;const d={start:P.start,end:P.end,id:xe.DayPilot.guid(),text:P.start+"-"+P.end,tags:{type:"new"}};c.events.add(d);var _=c.events.find(d.id);l(_)},onBeforeEventRender:P=>{if(P.data.barColor="green",!!P.data.tags)switch(P.data.tags.type){case"new":P.data.barColor="yellow";break;case"business":P.data.barColor="#3498db";break;case"personal":P.data.barColor="#2ecc71";break;case"vacation":P.data.barColor="#f1c40f";break;default:P.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:()=>{console.log("Event moved")},onEventResized:()=>{console.log("Event resized")},onEventClicked:async P=>{alert("TODO")}},G=re([]),J=()=>{h.value.control.update({events:G.value})},n=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});ie(async()=>{await u()});const u=async()=>{await F(),await J()},F=async()=>{const P=n;if(!w.value)try{w.value=!0,T.value="";const c=`/api/v1/channels/${R.id}/`;await H.get(c).then(d=>{P.item=d.data,P.item.outputs.forEach(U=>{const $=U.playbackUrl,Y=$.lastIndexOf("/"),f=$.substring(0,Y),v=$.substring(Y+1),E=U.playbackConfiguration,m=E.hlsConfigurationManifestEndpointPrefix;E.hlsPlaylist=m+v});const k=P.item.programs.map(U=>({start:M.moment(U.dateScheduledStart).utc(!0).format(),end:M.moment(U.dateScheduledEnd).utc(!0).format(),id:U.programId,text:U.name}));G.value=k})}catch(c){T.value=M.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{w.value=!1}},l=P=>{S.value.open(R.id,P.id(),P.start().value)},j=(P,c)=>{var d=h.value,_=d.control.events.find(P.eventId);if(!c&&_){h.value.control.events.remove(_);return}d.control.events.find(v=>v.text()==P.name)&&(alert("Program already exists in this channel. Removing in the calendar."),h.value.control.events.remove(_));const U=M.moment(P.dateScheduledStart).utc(!0).format(),$=M.moment(P.dateScheduledEnd).utc(!0).format(),Y=new xe.DayPilot.Date(U),f=new xe.DayPilot.Date($);_.text(P.name),_.start(new xe.DayPilot.Date(Y)),_.end(new xe.DayPilot.Date(f)),_.data.tags.program=P,_.commit(),h.value.control.update()},a=async()=>{if(!w.value){try{w.value=!0,T.value="",await G.value.filter(_=>_.tags&&_.tags.type==="new").map(_=>_.tags.program).forEach(async _=>{const k=M.moment(_.dateScheduledStart).local().toISOString(),U=M.moment(_.dateScheduledEnd).local().toISOString();debugger;await H.post("/api/v1/programs/from-template/",_).then($=>{B.success("Add New Program",`Program [${_.name}] was added to this channel`)},$=>{const Y=M.getErrorMessageAsHtml($);alert(Y)})})}catch(P){const c=M.getErrorMessageAsHtml(P);alert(c),window.scrollTo(0,0)}finally{w.value=!1}await u()}};return(P,c)=>{const d=Q("router-link"),_=Q("PageHeader"),k=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(_,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(b),"header-break":"row row-cols-2"},{default:I(()=>[e("div",Kp,[e("button",{onClick:c[0]||(c[0]=U=>a()),class:"btn btn-primary"},c[2]||(c[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)])),e("button",{onClick:c[1]||(c[1]=U=>u()),class:"btn btn-outline-primary ms-1"},c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),V(d,{to:`${i.urlView}/${i.id}`,class:"btn btn-secondary ms-2"},{default:I(()=>c[4]||(c[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),V(k,{errorMessage:o(T),vuelidate:P.v$},{default:I(()=>[e("div",null,[V(o(xe.DayPilotCalendar),{id:"dp",config:g,ref_key:"calendarRef",ref:h},null,512),V(Wp,{ref_key:"modalAddProgram",ref:S,onOnClose:j},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Qp=["id"],Xp={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Zp={class:"modal-content"},ev={class:"modal-header bg-primary text-white"},tv={class:"modal-title",id:"exampleModalLabel"},sv={class:"modal-body"},ov={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},av=["innerHTML"],lv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},nv={class:"container"},iv={class:"row row-cols-1 row-cols-sm-3"},rv={class:"col"},dv={class:"form-floating mb-2"},uv=["disabled"],cv=["value"],mv={class:"col"},fv={class:"form-floating mb-2"},pv={key:0,class:"d-block invalid-feedback"},vv={class:"col"},gv={class:"form-floating mb-2"},bv={key:0,class:"d-block invalid-feedback"},yv={class:"row row-cols-sm-2"},$v={class:"col"},wv={class:"form-floating mb-2"},hv=["value"],_v={key:0,class:"d-block invalid-feedback"},kv={class:"col"},Sv={class:"form-floating mb-2"},Tv=["value"],Mv={key:0,class:"d-block invalid-feedback"},Cv={class:"col"},xv={class:"input-group mb-1"},Iv={class:"form-floating"},Pv={key:0,class:"input-group-text"},Uv={key:0},Vv={key:1},Ov={key:2},Av={key:3,class:"d-block invalid-feedback"},Ev={class:"col"},Dv={class:"input-group mb-1"},Bv={class:"form-floating"},Hv={key:0,class:"input-group-text"},Lv={key:0},Nv={key:1},qv={key:2,class:"d-block invalid-feedback"},Rv={class:"table-responsive border mt-1"},zv={class:"table"},jv={class:"input-group mb-1"},Fv=["onUpdate:modelValue"],Yv={key:0,class:"input-group-text"},Gv=["onUpdate:modelValue"],Wv=["value"],Kv=["onUpdate:modelValue"],Jv=["value"],Qv=["onClick"],Xv={class:"modal-footer"},Zv=["disabled"],eg={__name:"_addProgram",emits:["refresh"],setup(i,{expose:r,emit:b}){const{appTitle:w,pageTitle:y,busy:N,isDirty:T,validations:K,infoMessage:H,warningMessage:M,errorMessage:B,router:X,axios:z,utils:R,toasts:h,closeWithReturnUrl:S,security:g}=ce({appTitle:"Sony FAST",pageTitle:"Add Program"}),G=b,J=re(),n=re("modalAddProgram"),u=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),F={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},l=we(F,u);ie(async()=>{l.value.$reset()});const j=async E=>{J.value=E;const m=u;K.value.clear(),B.value="";const O=R.moment().local().add(2,"m"),ae=O.format("YYYY-MM-DD HH:mm"),ve=O.format("YYYY_MM_DD")+"_PROGRAM_";m.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},m.item={name:ve,relativeProgramId:null,dateScheduledStart:ae,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await c(),l.value.$reset();var Se=document.getElementById(n.value),le=_e.getOrCreateInstance(Se);le.show()},a=async()=>{var E=document.getElementById(n.value),m=_e.getOrCreateInstance(E);m.hide(),G("refresh")},P=async()=>{const E=u;if(N.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{N.value=!0,B.value="";const Z=E.item;delete Z.vodSource,Z.channelId=J.value;var O=Z.dateScheduledStart;Z.dateScheduledStart=R.moment(O).utc().format(),await z.post("/api/v1/programs/",Z).then(ae=>{h.success("Add Program","Program added to Channel",{async onClose(){}})}),await a()}catch(Z){B.value=R.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{N.value=!1}},c=async()=>{await d(),await k(),await $()},d=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(m=>{u.lookups.sourceLocations=m.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await _(u.item.sourceLocationId)}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},_=async E=>{try{let m=`/api/v1/vodSources/lookup/source-location/${E}`;await z.get(m).then(O=>{u.lookups.vodSources=O.data})}catch(m){B.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},k=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(m=>{u.lookups.adBreakSourceLocations=m.data})}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},U=async E=>{try{let m=`/api/v1/vodSources/lookup/source-location/${E}`;await z.get(m).then(O=>{u.lookups.adBreakVodSources=O.data})}catch(m){B.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},$=async()=>{try{const E=`/api/v1/programs/lookup/?channelId=${J.value}`;await z.get(E).then(m=>{if(u.lookups.channelPrograms=m.data,u.lookups.channelPrograms.length===1){const Z=u.lookups.channelPrograms[0];u.item.relativeProgramId=Z.id}})}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},Y=()=>{const E={offsetMillis:0,sourceLocationId:null,vodSourceId:null},m=u.item.adBreaks.length;if(m>0){const O=u.item.adBreaks[m-1];E.offsetMillis=O.offsetMillis+1e4}u.item.adBreaks.push(E)},f=E=>{u.item.adBreaks.splice(E,1)},v=()=>{const E=u.item.vodSource;u.item.vodSourceId=E.id};return r({open:j,close:a}),(E,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:n.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Xp,[e("div",Zp,[e("div",ev,[e("h5",tv,p(o(w))+" - "+p(o(y)),1),m[11]||(m[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",sv,[o(B)?(t(),s("div",ov,[m[12]||(m[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,av)])):C("",!0),o(K).size>0?(t(),s("div",lv,[m[13]||(m[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(K).values(),O=>(t(),s("li",null,p(O),1))),256))])])):C("",!0),e("div",nv,[e("div",iv,[e("div",rv,[e("div",dv,[x(e("select",{"onUpdate:modelValue":m[0]||(m[0]=O=>u.item.relativeProgramId=O),class:"form-select",id:"sourceLocationId",disabled:u.lookups.channelPrograms.length<=0},[(t(!0),s(L,null,W(u.lookups.channelPrograms,O=>(t(),s("option",{value:O.id},p(O.name),9,cv))),256))],8,uv),[[pe,u.item.relativeProgramId]]),m[14]||(m[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",mv,[e("div",fv,[x(e("input",{"onUpdate:modelValue":m[1]||(m[1]=O=>u.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,u.item.name]]),m[15]||(m[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",pv,[(t(!0),s(L,null,W(o(l).item.name.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])]),e("div",vv,[e("div",gv,[x(e("input",{"onUpdate:modelValue":m[2]||(m[2]=O=>u.item.dateScheduledStart=O),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[D,u.item.dateScheduledStart]]),m[16]||(m[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",bv,[(t(!0),s(L,null,W(o(l).item.dateScheduledStart.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])])]),e("div",yv,[e("div",$v,[e("div",wv,[x(e("select",{"onUpdate:modelValue":m[3]||(m[3]=O=>u.item.sourceLocationId=O),onChange:m[4]||(m[4]=O=>_(u.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,W(u.lookups.sourceLocations,O=>(t(),s("option",{value:O.id},p(O.name),9,hv))),256))],544),[[pe,u.item.sourceLocationId]]),m[17]||(m[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(l).item.sourceLocationId.$error?(t(),s("div",_v,[(t(!0),s(L,null,W(o(l).item.sourceLocationId.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])]),e("div",kv,[e("div",Sv,[x(e("select",{"onUpdate:modelValue":m[5]||(m[5]=O=>u.item.vodSource=O),onChange:m[6]||(m[6]=O=>v()),class:"form-select",id:"vodSourceId"},[(t(!0),s(L,null,W(u.lookups.vodSources,O=>(t(),s("option",{value:O},p(O.name),9,Tv))),256))],544),[[pe,u.item.vodSource]]),m[18]||(m[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(l).item.vodSourceId.$error?(t(),s("div",Mv,[(t(!0),s(L,null,W(o(l).item.vodSourceId.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])]),e("div",Cv,[e("div",xv,[e("div",Iv,[x(e("input",{"onUpdate:modelValue":m[7]||(m[7]=O=>u.item.startOffsetMillis=O),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[D,u.item.startOffsetMillis]]),m[19]||(m[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),u.item.startOffsetMillis>0?(t(),s("span",Pv,p(o(R).moment.utc(u.item.startOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),u.item.startOffsetMillis>0&&u.item.startOffsetMillis<3e4?(t(),s("div",Uv,m[20]||(m[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),u.item.startOffsetMillis>u.item.endOffsetMillis&&u.item.endOffsetMillis>0?(t(),s("div",Vv,m[21]||(m[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):C("",!0),u.item.vodSource&&u.item.startOffsetMillis>u.item.vodSource.durationInMillis?(t(),s("div",Ov,m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(l).item.startOffsetMillis.$error?(t(),s("div",Av,[(t(!0),s(L,null,W(o(l).item.startOffsetMillis.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)]),e("div",Ev,[e("div",Dv,[e("div",Bv,[x(e("input",{"onUpdate:modelValue":m[8]||(m[8]=O=>u.item.endOffsetMillis=O),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[D,u.item.endOffsetMillis]]),m[23]||(m[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),u.item.endOffsetMillis>0?(t(),s("span",Hv,p(o(R).moment.utc(u.item.endOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),u.item.endOffsetMillis>0&&u.item.endOffsetMillis<3e4?(t(),s("div",Lv,m[24]||(m[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),u.item.vodSource&&u.item.endOffsetMillis>u.item.vodSource.durationInMillis?(t(),s("div",Nv,m[25]||(m[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(l).item.endOffsetMillis.$error?(t(),s("div",qv,[(t(!0),s(L,null,W(o(l).item.endOffsetMillis.$errors,O=>(t(),s("div",{key:O.$uid},p(O.$message),1))),128))])):C("",!0)])]),m[29]||(m[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[m[26]||(m[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:Y,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Rv,[e("table",zv,[m[28]||(m[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,W(u.item.adBreaks,(O,Z)=>(t(),s("tr",null,[e("td",null,p(Z+1),1),e("td",null,[e("div",jv,[x(e("input",{"onUpdate:modelValue":ae=>O.offsetMillis=ae,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Fv),[[D,O.offsetMillis]]),O.offsetMillis>0?(t(),s("span",Yv,p(o(R).moment.utc(O.offsetMillis).format("HH:mm:ss")),1)):C("",!0)])]),e("td",null,[x(e("select",{"onUpdate:modelValue":ae=>O.sourceLocationId=ae,onChange:m[9]||(m[9]=ae=>U(u.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(L,null,W(u.lookups.adBreakSourceLocations,ae=>(t(),s("option",{value:ae.id},p(ae.name),9,Wv))),256))],40,Gv),[[pe,O.sourceLocationId]])]),e("td",null,[x(e("select",{"onUpdate:modelValue":ae=>O.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(L,null,W(u.lookups.adBreakVodSources,ae=>(t(),s("option",{value:ae.id},p(ae.name),9,Jv))),256))],8,Kv),[[pe,O.vodSourceId]])]),e("td",null,[e("button",{onClick:ae=>f(Z),class:"btn btn-outline-warning"},m[27]||(m[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Qv)])]))),256))])])])])])]),e("div",Xv,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:m[10]||(m[10]=O=>P()),class:"btn btn-primary",type:"button"},m[30]||(m[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zv),m[31]||(m[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Qp))}},tg=["id"],sg={class:"modal-dialog modal-xl modal-fullscreen-md-down"},og={class:"modal-content"},ag={class:"modal-header bg-primary","data-bs-theme":"dark"},lg={class:"modal-title",id:"exampleModalLabel"},ng={class:"modal-body"},ig={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},rg=["innerHTML"],dg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ug={class:"container"},cg={class:"col"},mg={class:"form-floating mb-2"},fg={class:"col"},pg={class:"form-floating mb-2"},vg={key:0,class:"d-block invalid-feedback"},gg={class:"col"},bg={class:"form-floating mb-2"},yg={key:0,class:"d-block invalid-feedback"},$g={class:"col"},wg={class:"form-floating mb-2"},hg={key:0,class:"d-block invalid-feedback"},_g={class:"modal-footer"},kg=["disabled"],Sg={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:r,emit:b}){const{appTitle:w,pageTitle:y,busy:N,isDirty:T,validations:K,infoMessage:H,warningMessage:M,errorMessage:B,router:X,axios:z,utils:R,toasts:h,closeWithReturnUrl:S,security:g}=ce({appTitle:"Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),G=b,J=re(),n=re("modalAddPlaybackConfiguration"),u=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),F={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",se),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",se),$autoDirty:!0,$lazy:!0}}},l=we(F,u);ie(async()=>{l.value.$reset()});const j=async(c,d)=>{J.value=c;const _=u;K.value.clear(),B.value="";const k=d,U=k.lastIndexOf("/"),$=k.substring(0,U),Y=k.substring(U+1).replace(".","_");_.item={name:Y,originalVideoContentSourceUrl:d,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var f=document.getElementById(n.value),v=_e.getOrCreateInstance(f);v.show()},a=async()=>{var c=document.getElementById(n.value),d=_e.getOrCreateInstance(c);d.hide(),G("refresh")},P=async()=>{const c=u;if(N.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{N.value=!0,B.value="";const _=c.item;_.channelOutputId=J.value,await z.post("/api/v1/channels/output/playback/",_).then(k=>{h.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await a()}catch(_){B.value=R.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{N.value=!1}};return r({open:j,close:a}),(c,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:n.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",sg,[e("div",og,[e("div",ag,[e("h5",lg,p(o(w))+" - "+p(o(y)),1),d[5]||(d[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",ng,[o(B)?(t(),s("div",ig,[d[6]||(d[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,rg)])):C("",!0),o(K).size>0?(t(),s("div",dg,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(K).values(),_=>(t(),s("li",null,p(_),1))),256))])])):C("",!0),e("div",ug,[e("div",cg,[e("div",mg,[x(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=_=>u.item.originalVideoContentSourceUrl=_),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[D,u.item.originalVideoContentSourceUrl]]),d[8]||(d[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",fg,[e("div",pg,[x(e("input",{"onUpdate:modelValue":d[1]||(d[1]=_=>u.item.name=_),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,u.item.name]]),d[9]||(d[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",vg,[(t(!0),s(L,null,W(o(l).item.name.$errors,_=>(t(),s("div",{key:_.$uid},p(_.$message),1))),128))])):C("",!0)])]),e("div",gg,[e("div",bg,[x(e("input",{"onUpdate:modelValue":d[2]||(d[2]=_=>u.item.videoContentSourceUrl=_),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[D,u.item.videoContentSourceUrl]]),d[10]||(d[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[11]||(d[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",yg,[(t(!0),s(L,null,W(o(l).item.videoContentSourceUrl.$errors,_=>(t(),s("div",{key:_.$uid},p(_.$message),1))),128))])):C("",!0)])]),e("div",$g,[e("div",wg,[x(e("textarea",{"onUpdate:modelValue":d[3]||(d[3]=_=>u.item.adDecisionServerUrl=_),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[D,u.item.adDecisionServerUrl]]),d[12]||(d[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",hg,[(t(!0),s(L,null,W(o(l).item.adDecisionServerUrl.$errors,_=>(t(),s("div",{key:_.$uid},p(_.$message),1))),128))])):C("",!0)])])])]),e("div",_g,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:d[4]||(d[4]=_=>P()),class:"btn btn-primary",type:"button"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,kg),d[14]||(d[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,tg))}},Tg=["id"],Mg={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Cg={class:"modal-content"},xg={class:"modal-header bg-primary text-white"},Ig={class:"modal-title",id:"exampleModalLabel"},Pg={class:"modal-body"},Ug={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Vg=["innerHTML"],Og={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ag={class:"container"},Eg={class:"row row-cols-1 row-cols-sm-3"},Dg={class:"col"},Bg={class:"form-floating mb-2"},Hg=["value"],Lg={key:0,class:"d-block invalid-feedback"},Ng={class:"col"},qg={class:"form-floating mb-2"},Rg={key:0,class:"d-block invalid-feedback"},zg={class:"col"},jg={class:"form-floating mb-2"},Fg={key:0,class:"d-block invalid-feedback"},Yg={class:"row row-cols-sm-2"},Gg={class:"col"},Wg={class:"input-group mb-1"},Kg={class:"form-floating"},Jg={key:0,class:"input-group-text"},Qg={key:0},Xg={key:1},Zg={key:2},e1={key:3,class:"d-block invalid-feedback"},t1={class:"col"},s1={class:"input-group mb-1"},o1={class:"form-floating"},a1={key:0,class:"input-group-text"},l1={key:0},n1={key:1},i1={key:2,class:"d-block invalid-feedback"},r1={class:"table-responsive border mt-1"},d1={class:"table"},u1={class:"input-group mb-1"},c1=["onUpdate:modelValue"],m1={key:0,class:"input-group-text"},f1=["onUpdate:modelValue"],p1=["value"],v1=["onUpdate:modelValue"],g1=["value"],b1=["onClick"],y1={class:"modal-footer"},$1=["disabled"],w1={__name:"_editProgram",emits:["refresh"],setup(i,{expose:r,emit:b}){const{appTitle:w,pageTitle:y,busy:N,isDirty:T,validations:K,infoMessage:H,warningMessage:M,errorMessage:B,router:X,axios:z,utils:R,toasts:h,closeWithReturnUrl:S,security:g}=ce({appTitle:"Sony FAST",pageTitle:"Edit Program"}),G=b,J=re("modalEditProgram"),n=ue({lookups:{adBreakSourceLocations:[],adBreakVodSources:[],channels:[]},item:{programId:null,channelId:null,name:null,dateScheduledStart:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),u={item:{programId:{required:te.withMessage("programId is required.",se),$autoDirty:!0,$lazy:!0},channelId:{required:te.withMessage("channelId is required.",se),$autoDirty:!0,$lazy:!0},name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},F=we(u,n);ie(async()=>{F.value.$reset()});const l=async Y=>{const f=n;K.value.clear(),B.value="",f.lookups={adBreakSourceLocations:[],adBreakVodSources:[],channels:[]},f.item={programId:null,channelId:null,name:null,dateScheduledStart:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await a(Y),await c(),F.value.$reset();var v=document.getElementById(J.value),E=_e.getOrCreateInstance(v);E.show()},j=async()=>{var Y=document.getElementById(J.value),f=_e.getOrCreateInstance(Y);f.hide(),G("refresh")},a=async Y=>{const f=n;if(!N.value)try{N.value=!0,B.value="",await z.get(`/api/v1/programs/${Y}`).then(v=>{f.item=v.data;const O=R.moment().local().add(2,"m").format("YYYY-MM-DD HH:mm");f.item.dateScheduledStart=O})}catch(v){B.value=R.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{N.value=!1}},P=async()=>{const Y=n;if(N.value)return;if(!await F.value.$validate()){window.scrollTo(0,0);return}try{N.value=!0,B.value="";const E=R.clone(Y.item);var v=E.dateScheduledStart;E.dateScheduledStart=R.moment(v).utc().format(),await z.put("/api/v1/programs/",E).then(m=>{h.success("Edit Program","Program was edited.")}),await j()}catch(E){B.value=R.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{N.value=!1}},c=async()=>{await d(),await k()},d=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(v=>{n.lookups.adBreakSourceLocations=v.data});const f=n.lookups.adBreakSourceLocations.length}catch(Y){B.value=R.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{}},_=async Y=>{try{let f="/api/v1/vodSources/lookup/";Y&&(f+=`?sourceLocationId=${Y}`),await z.get(f).then(v=>{n.lookups.adBreakVodSources=v.data})}catch(f){B.value=R.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},k=async()=>{try{await z.get("/api/v1/channels/lookup/").then(f=>{n.lookups.channels=f.data})}catch(Y){B.value=R.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{}},U=()=>{const Y={offsetMillis:0,sourceLocationId:null,vodSourceId:null},f=n.item.adBreaks.length;if(f>0){const v=n.item.adBreaks[f-1];Y.offsetMillis=v.offsetMillis+1e4}n.item.adBreaks.push(Y)},$=Y=>{n.item.adBreaks.splice(Y,1)};return r({open:l,close:j}),(Y,f)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Mg,[e("div",Cg,[e("div",xg,[e("h5",Ig,p(o(w))+" - "+p(o(y)),1),f[7]||(f[7]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Pg,[o(B)?(t(),s("div",Ug,[f[8]||(f[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,Vg)])):C("",!0),o(K).size>0?(t(),s("div",Og,[f[9]||(f[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(K).values(),v=>(t(),s("li",null,p(v),1))),256))])])):C("",!0),e("div",Ag,[e("div",Eg,[e("div",Dg,[e("div",Bg,[x(e("select",{"onUpdate:modelValue":f[0]||(f[0]=v=>n.item.channelId=v),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,W(n.lookups.channels,v=>(t(),s("option",{value:v.id},p(v.name),9,Hg))),256))],512),[[pe,n.item.channelId]]),f[10]||(f[10]=e("label",{for:"channelId",class:"small fw-bold"},"Channel",-1)),o(F).item.channelId.$error?(t(),s("div",Lg,[(t(!0),s(L,null,W(o(F).item.channelId.$errors,v=>(t(),s("div",{key:v.$uid},p(v.$message),1))),128))])):C("",!0)])]),e("div",Ng,[e("div",qg,[x(e("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>n.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[D,n.item.name]]),f[11]||(f[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(F).item.name.$error?(t(),s("div",Rg,[(t(!0),s(L,null,W(o(F).item.name.$errors,v=>(t(),s("div",{key:v.$uid},p(v.$message),1))),128))])):C("",!0)])]),e("div",zg,[e("div",jg,[x(e("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>n.item.dateScheduledStart=v),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[D,n.item.dateScheduledStart]]),f[12]||(f[12]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(F).item.dateScheduledStart.$error?(t(),s("div",Fg,[(t(!0),s(L,null,W(o(F).item.dateScheduledStart.$errors,v=>(t(),s("div",{key:v.$uid},p(v.$message),1))),128))])):C("",!0)])])]),e("div",Yg,[e("div",Gg,[e("div",Wg,[e("div",Kg,[x(e("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>n.item.startOffsetMillis=v),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[D,n.item.startOffsetMillis]]),f[13]||(f[13]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),n.item.startOffsetMillis>0?(t(),s("span",Jg,p(o(R).moment.utc(n.item.startOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),n.item.startOffsetMillis>0&&n.item.startOffsetMillis<3e4?(t(),s("div",Qg,f[14]||(f[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),n.item.startOffsetMillis>n.item.endOffsetMillis&&n.item.endOffsetMillis>0?(t(),s("div",Xg,f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):C("",!0),n.item.vodSource&&n.item.startOffsetMillis>n.item.vodSource.durationInMillis?(t(),s("div",Zg,f[16]||(f[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(F).item.startOffsetMillis.$error?(t(),s("div",e1,[(t(!0),s(L,null,W(o(F).item.startOffsetMillis.$errors,v=>(t(),s("div",{key:v.$uid},p(v.$message),1))),128))])):C("",!0)]),e("div",t1,[e("div",s1,[e("div",o1,[x(e("input",{"onUpdate:modelValue":f[4]||(f[4]=v=>n.item.endOffsetMillis=v),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[D,n.item.endOffsetMillis]]),f[17]||(f[17]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),n.item.endOffsetMillis>0?(t(),s("span",a1,p(o(R).moment.utc(n.item.endOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),n.item.endOffsetMillis>0&&n.item.endOffsetMillis<3e4?(t(),s("div",l1,f[18]||(f[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),n.item.vodSource&&n.item.endOffsetMillis>n.item.vodSource.durationInMillis?(t(),s("div",n1,f[19]||(f[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),o(F).item.endOffsetMillis.$error?(t(),s("div",i1,[(t(!0),s(L,null,W(o(F).item.endOffsetMillis.$errors,v=>(t(),s("div",{key:v.$uid},p(v.$message),1))),128))])):C("",!0)])]),f[23]||(f[23]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[f[20]||(f[20]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:U,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",r1,[e("table",d1,[f[22]||(f[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(L,null,W(n.item.adBreaks,(v,E)=>(t(),s("tr",null,[e("td",null,p(E+1),1),e("td",null,[e("div",u1,[x(e("input",{"onUpdate:modelValue":m=>v.offsetMillis=m,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,c1),[[D,v.offsetMillis]]),v.offsetMillis>0?(t(),s("span",m1,p(o(R).moment.utc(v.offsetMillis).format("HH:mm:ss")),1)):C("",!0)])]),e("td",null,[x(e("select",{"onUpdate:modelValue":m=>v.sourceLocationId=m,onChange:f[5]||(f[5]=m=>_(n.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(L,null,W(n.lookups.adBreakSourceLocations,m=>(t(),s("option",{value:m.id},p(m.name),9,p1))),256))],40,f1),[[pe,v.sourceLocationId]])]),e("td",null,[x(e("select",{"onUpdate:modelValue":m=>v.vodSourceId=m,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(L,null,W(n.lookups.adBreakVodSources,m=>(t(),s("option",{value:m.id},p(m.name),9,g1))),256))],8,v1),[[pe,v.vodSourceId]])]),e("td",null,[e("button",{onClick:m=>$(E),class:"btn btn-outline-warning"},f[21]||(f[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,b1)])]))),256))])])])])])]),e("div",y1,[e("button",{disabled:o(F).$dirty&&o(F).$invalid,onClick:f[6]||(f[6]=v=>P()),class:"btn btn-primary",type:"button"},f[24]||(f[24]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$1),f[25]||(f[25]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Tg))}},h1=["id"],_1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},k1={class:"modal-content"},S1={class:"modal-header bg-primary text-white"},T1={class:"modal-title",id:"exampleModalLabel"},M1={class:"modal-body"},C1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},x1=["innerHTML"],I1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},P1={class:"container"},U1={class:"col"},V1={class:"form-floating mb-2"},O1=["value"],A1={key:0,class:"d-block invalid-feedback"},E1={class:"col"},D1={class:"form-floating mb-2"},B1=["value"],H1={key:0,class:"d-block invalid-feedback"},L1={class:"modal-footer"},N1=["disabled"],q1={__name:"_editFillerSlate",emits:["refresh"],setup(i,{expose:r,emit:b}){const{appTitle:w,pageTitle:y,busy:N,isDirty:T,validations:K,infoMessage:H,warningMessage:M,errorMessage:B,router:X,axios:z,utils:R,toasts:h,closeWithReturnUrl:S,security:g}=ce({appTitle:"Sony FAST",pageTitle:"Edit Filler Slate"}),G=b,J=re(),n=re("modalEditFillerSlate"),u=ue({lookups:{sourceLocations:[],vodSources:[]},item:{sourceLocationId:null,vodSourceId:null}}),F={item:{sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0}}},l=we(F,u);ie(async()=>{l.value.$reset()});const j=async()=>{await a()},a=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(U=>{u.lookups.sourceLocations=U.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await P(u.item.sourceLocationId)}catch(k){B.value=R.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},P=async k=>{try{let U="/api/v1/vodSources/lookup/";k&&(U+=`?sourceLocationId=${k}`),await z.get(U).then($=>{u.lookups.vodSources=$.data})}catch(U){B.value=R.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},c=async k=>{J.value=k;const U=u;K.value.clear(),B.value="",U.lookups={sourceLocations:[],vodSources:[]},U.item={sourceLocationId:null,vodSourceId:null},await j(),l.value.$reset();var $=document.getElementById(n.value),Y=_e.getOrCreateInstance($);Y.show()},d=async()=>{var k=document.getElementById(n.value),U=_e.getOrCreateInstance(k);U.hide(),G("refresh")},_=async()=>{const k=u;if(N.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{N.value=!0,B.value="";const $=k.item;$.channelId=J.value,await z.put("/api/v1/channels/filler-slate",$).then(Y=>{h.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await d()}catch($){B.value=R.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{N.value=!1}};return r({open:c,close:d}),(k,U)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:n.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",_1,[e("div",k1,[e("div",S1,[e("h5",T1,p(o(w))+" - "+p(o(y)),1),U[4]||(U[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",M1,[o(B)?(t(),s("div",C1,[U[5]||(U[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,x1)])):C("",!0),o(K).size>0?(t(),s("div",I1,[U[6]||(U[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(o(K).values(),$=>(t(),s("li",null,p($),1))),256))])])):C("",!0),e("div",P1,[e("div",U1,[e("div",V1,[x(e("select",{"onUpdate:modelValue":U[0]||(U[0]=$=>u.item.sourceLocationId=$),onChange:U[1]||(U[1]=$=>P(u.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(L,null,W(u.lookups.sourceLocations,$=>(t(),s("option",{value:$.id},p($.name),9,O1))),256))],544),[[pe,u.item.sourceLocationId]]),U[7]||(U[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(l).item.sourceLocationId.$error?(t(),s("div",A1,[(t(!0),s(L,null,W(o(l).item.sourceLocationId.$errors,$=>(t(),s("div",{key:$.$uid},p($.$message),1))),128))])):C("",!0)])]),e("div",E1,[e("div",D1,[x(e("select",{"onUpdate:modelValue":U[2]||(U[2]=$=>u.item.vodSourceId=$),class:"form-select",id:"vodSourceId"},[(t(!0),s(L,null,W(u.lookups.vodSources,$=>(t(),s("option",{value:$.id},p($.name),9,B1))),256))],512),[[pe,u.item.vodSourceId]]),U[8]||(U[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(l).item.vodSourceId.$error?(t(),s("div",H1,[(t(!0),s(L,null,W(o(l).item.vodSourceId.$errors,$=>(t(),s("div",{key:$.$uid},p($.$message),1))),128))])):C("",!0)])])])]),e("div",L1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:U[3]||(U[3]=$=>_()),class:"btn btn-primary",type:"button"},U[9]||(U[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,N1),U[10]||(U[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,h1))}},R1={class:"d-flex flex-row justify-content-end"},z1={key:0},j1={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},F1={class:"nav-item",role:"presentation"},Y1={class:"nav-item",role:"presentation"},G1={class:"nav-item",role:"presentation"},W1={class:"tab-content",id:"myTabContent"},K1={class:"mt-2"},J1={class:"row row-cols-1 row-cols-sm-3"},Q1={class:"col"},X1={class:"form-floating mb-2"},Z1={class:"col"},eb={class:"form-floating mb-2"},tb={class:"col"},sb={class:"form-floating mb-2"},ob={class:"d-flex flex-row justify-content-between align-items-center"},ab={key:0},lb={class:"row row-cols-sm-2 mt-1"},nb={class:"col"},ib={class:"form-floating mb-2"},rb={class:"col"},db={class:"form-floating mb-2"},ub={class:"col mt-2"},cb={class:"form-floating mb-2"},mb={class:"table-responsive border mt-1"},fb={class:"table table-bordered1 mb-0"},pb={class:"badge bg-info"},vb={key:0,class:"text-wrap"},gb={key:1,class:"text-warning"},bb={key:0},yb=["onClick"],$b={key:0},wb={colspan:"999"},hb={class:"d-flex flex-row justify-content-between align-items-center"},_b={class:"ms-2"},kb={if:"item.playbackUrl"},Sb=["onClick"],Tb={key:0,class:"mt-2"},Mb={class:"container1"},Cb={class:"row1 1row-cols-1"},xb={class:"col"},Ib={class:"input-group mb-2"},Pb={class:"form-floating border-success"},Ub=["onUpdate:modelValue"],Vb={for:"name"},Ob={key:0,class:"fas fa-fw fa-circle-check text-success me-1"},Ab=["onClick"],Eb={class:"col"},Db={class:"form-floating mb-2"},Bb=["onUpdate:modelValue"],Hb={class:"col"},Lb={class:"input-group mb-2"},Nb={class:"form-floating"},qb=["onUpdate:modelValue"],Rb=["onClick"],zb={class:"col"},jb={class:"form-floating mb-2"},Fb=["onUpdate:modelValue"],Yb={class:"col"},Gb={class:"form-floating mb-2"},Wb=["onUpdate:modelValue"],Kb={class:"mt-2"},Jb={class:"table-responsive border"},Qb={class:"table table-hover mb-0 caption-top"},Xb={key:0,class:"fas fa-fw fa-check-circle text-success"},Zb={class:"badge bg-info"},ey={key:0,class:""},ty={key:1,class:"mt-1"},sy={class:"mt-1"},oy={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ay={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},ly={class:"badge bg-info me-2"},ny={class:"text-end"},iy=["onClick"],ry=["onClick"],dy=["onClick"],uy=["onClick"],cy={class:"text-end mt-2 d-none"},my={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(i){const r=i,{appTitle:b,pageTitle:w,busy:y,isDirty:N,validations:T,infoMessage:K,warningMessage:H,errorMessage:M,router:B,axios:X,utils:z,toasts:R,close:h,closeWithReturnUrl:S,generateReturnUrl:g,security:G}=ce({appTitle:"Sony FAST",pageTitle:"View Channel"});be("$config");const J=fe();J.user;const n=ue({user:J.user,item:null}),u=re(null),F=re(null),l=re(null),j=re(null),a=re(),P=Ue(()=>n.item&&n.item.state==="RUNNING");ie(async()=>{await k(),a.value=z.getPageTab("channel")||"information-tab"});const c=le=>{z.setPageTab("channel",le),a.value=le},d=le=>le===a.value?"active":"",_=le=>le===a.value?"show active":"",k=async()=>{const le=n;if(!y.value)try{y.value=!0,M.value="",n.item=null;const A=`/api/v1/channels/${r.id}/`;await X.get(A).then(ge=>{le.item=ge.data,le.item.outputs.forEach(Ve=>{if(Ve.playbackUrl){const ee=Ve.playbackUrl,Pe=ee.lastIndexOf("/"),me=ee.substring(0,Pe),Ze=ee.substring(Pe+1),De=Ve.playbackConfiguration;if(De){const et=De.hlsConfigurationManifestEndpointPrefix;De.hlsPlaylist=et+Ze}}})})}catch(A){M.value=z.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}},U=async()=>{await k()},$=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!y.value){M.value=null;try{y.value=!0,await X.post(`/api/v1/channels/${r.id}/publish/`).then(A=>{R.success("Publish Channel","Channel was published.")}),y.value=!1,await U()}catch(A){M.value=z.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},Y=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/channels/${r.id}/unpublish/`).then(A=>{R.warning("Remove Channel","Channel was removed.")}),y.value=!1,await U()}catch(A){M.value=z.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},f=()=>{u.value.open(r.id)},v=le=>{le.outputType==="HLS"&&F.value.open(le.channelOutputId,le.playbackUrl)},E=le=>{l.value.open(le)},m=async le=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/programs/${le}/`).then(ge=>{R.success("Delete Program","Program was deleted..",{async onClose(){}})}),y.value=!1,await U()}catch(ge){M.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},O=async le=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!y.value){M.value=null;try{y.value=!0,await X.post(`/api/v1/programs/${le}/publish/`).then(ge=>{R.success("Publish Program","Program was published..",{async onClose(){}})}),y.value=!1,await U()}catch(ge){M.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Z=async le=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!y.value){M.value=null;try{y.value=!0,await X.delete(`/api/v1/programs/${le}/unpublish/`).then(ge=>{R.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),y.value=!1,await U()}catch(ge){M.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},ae=async le=>{if(!y.value){M.value=null;try{y.value=!0,await X.put(`/api/v1/channels/${r.id}/change-state/${le}`).then(A=>{R.success("Update Channel state","Change state was updated")}),y.value=!1,await U()}catch(A){M.value=z.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},ve=async le=>{if(!y.value)try{y.value=!0,M.value="",await X.post(`/api/v1/channels/output/${le.channelOutputId}/playback/publish/`).then(A=>{R.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),y.value=!1,await U()}catch(A){M.value=z.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}},Se=le=>{const A=`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(le)}`;window.open(A,"_blank")};return(le,A)=>{const ge=Q("router-link"),Le=Q("PageHeader"),Ve=Q("PageBody");return t(),ne(de,null,{default:I(()=>[e("div",null,[V(Le,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:I(()=>[e("div",R1,[(o(G).isAdministrator,C("",!0)),n.item?(t(),s(L,{key:1},[n.item.arn?(t(),s(L,{key:0},[P.value?P.value?(t(),s("button",{key:1,onClick:A[2]||(A[2]=ee=>ae("STOPPED")),class:"ms-1 btn btn-warning"},A[20]||(A[20]=[e("span",{class:"fas fa-fw fa-stop"},null,-1)]))):C("",!0):(t(),s("button",{key:0,onClick:A[1]||(A[1]=ee=>ae("RUNNING")),class:"ms-1 btn btn-success"},A[19]||(A[19]=[e("span",{class:"fas fa-fw fa-play"},null,-1)])))],64)):C("",!0),n.item.arn&&!P.value?(t(),s("button",{key:1,onClick:A[3]||(A[3]=ee=>$()),class:"ms-1 btn btn-primary"},A[21]||(A[21]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),q("Republish ")]))):C("",!0),P.value?C("",!0):(t(),s(L,{key:2},[n.item.arn?(t(),s("button",{key:0,onClick:A[4]||(A[4]=ee=>Y()),class:"ms-1 btn btn-danger"},A[22]||(A[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),q("Unpublish ")]))):(t(),s("button",{key:1,onClick:A[5]||(A[5]=ee=>$()),class:"ms-1 btn btn-primary"},A[23]||(A[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),q("Publish ")])))],64))],64)):C("",!0),V(ge,{to:`${i.urlSchedulePrograms}/${i.id}`,class:"ms-2 btn btn-primary"},{default:I(()=>A[24]||(A[24]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:A[6]||(A[6]=ee=>U()),class:"ms-2 btn btn-secondary"},A[25]||(A[25]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:A[7]||(A[7]=ee=>o(S)(r.urlMain)),class:"btn btn-secondary ms-1"},A[26]||(A[26]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),V(Ve,{errorMessage:o(M)},{default:I(()=>[n.item?(t(),s("div",z1,[e("ul",j1,[e("li",F1,[e("button",{onClick:A[8]||(A[8]=ee=>c("information-tab")),class:oe([d("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},A[27]||(A[27]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),q("Information ")]),2)]),e("li",Y1,[e("button",{onClick:A[9]||(A[9]=ee=>c("outputPlayback-tab")),class:oe([d("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},A[28]||(A[28]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),q("Output/Playback ")]),2)]),e("li",G1,[e("button",{onClick:A[10]||(A[10]=ee=>c("programs-tab")),class:oe([d("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},A[29]||(A[29]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),q("Programs ")]),2)])]),e("div",W1,[e("div",{class:oe([_("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",K1,[e("div",J1,[e("div",Q1,[e("div",X1,[x(e("input",{"onUpdate:modelValue":A[11]||(A[11]=ee=>n.item.name=ee),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[D,n.item.name]]),A[30]||(A[30]=e("label",{for:"name"},"Name",-1))])]),e("div",Z1,[e("div",eb,[x(e("input",{"onUpdate:modelValue":A[12]||(A[12]=ee=>n.item.playbackMode=ee),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[D,n.item.playbackMode]]),A[31]||(A[31]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",tb,[e("div",sb,[x(e("input",{"onUpdate:modelValue":A[13]||(A[13]=ee=>n.item.tier=ee),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[D,n.item.tier]]),A[32]||(A[32]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",ob,[A[34]||(A[34]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),P.value?C("",!0):(t(),s("div",ab,[e("button",{onClick:A[14]||(A[14]=ee=>v()),class:"btn btn-outline-primary btn-sm"},A[33]||(A[33]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),q("Edit ")]))]))]),e("div",lb,[e("div",nb,[e("div",ib,[V(ge,{to:`${i.urlViewSourceLocation}/${n.item.fillerSlateSourceLocation.sourceLocationId}/${o(g)()}`,class:oe([[n.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:I(()=>[q(p(n.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),A[35]||(A[35]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",rb,[e("div",db,[V(ge,{to:`${i.urlViewVodSource}/${n.item.fillerSlateVodSource.vodSourceId}/${o(g)()}`,class:oe([[n.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:I(()=>[q(p(n.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),A[36]||(A[36]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",ub,[e("div",cb,[x(e("textarea",{"onUpdate:modelValue":A[15]||(A[15]=ee=>n.item.policy=ee),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[D,n.item.policy]]),A[37]||(A[37]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:oe([_("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",null,[e("div",null,[A[50]||(A[50]=e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",mb,[e("table",fb,[A[49]||(A[49]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.outputs,(ee,Pe)=>(t(),s(L,{key:ee.channelOutputId},[e("tr",null,[e("td",null,p(Pe+1),1),e("td",null,[e("div",null,p(ee.sourceGroup.name),1),e("span",pb,p(ee.outputType),1)]),e("td",null,[ee.playbackUrl?(t(),s("div",vb,p(ee.playbackUrl),1)):(t(),s("div",gb,A[38]||(A[38]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),q("Publish channel to get the playback url ")])))]),P.value?(t(),s("td",bb,[e("div",null,[P.value?(t(),s("button",{key:0,onClick:me=>Se(ee.playbackUrl),class:"btn btn-outline-info btn-sm"},A[39]||(A[39]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),q("View ")]),8,yb)):C("",!0)])])):C("",!0)]),ee.playbackUrl?(t(),s("tr",$b,[e("td",wb,[e("div",hb,[A[41]||(A[41]=e("h4",null,[q("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",_b,[e("div",kb,[e("button",{onClick:me=>v(ee),class:"btn btn-primary btn-sm"},A[40]||(A[40]=[e("span",{class:"fas fa-fw fa-cog me-1"},null,-1),q("Setup ")]),8,Sb)])])]),ee.playbackConfiguration?(t(),s("div",Tb,[e("div",Mb,[e("div",Cb,[e("div",xb,[e("div",Ib,[e("div",Pb,[x(e("input",{"onUpdate:modelValue":me=>ee.playbackConfiguration.name=me,type:"text",class:oe([[ee.playbackConfiguration.arn?"is-valid":"is-invalid"],"form-control"]),id:"name",disabled:""},null,10,Ub),[[D,ee.playbackConfiguration.name]]),e("label",Vb,[ee.playbackConfiguration.arn?(t(),s("span",Ob)):C("",!0),A[42]||(A[42]=q("Name "))])]),ee.playbackConfiguration.arn?C("",!0):(t(),s("button",{key:0,onClick:me=>ve(ee),class:"btn btn-outline-primary btn-sm"},A[43]||(A[43]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),q("Publish ")]),8,Ab))])]),e("div",Eb,[e("div",Db,[x(e("input",{"onUpdate:modelValue":me=>ee.playbackConfiguration.videoContentSourceUrl=me,type:"text",class:"form-control",id:"playbackConfigurationvideoContentSourceUrl",disabled:""},null,8,Bb),[[D,ee.playbackConfiguration.videoContentSourceUrl]]),A[44]||(A[44]=e("label",{for:"videoContentSourceUrl"},"Video Content Source Url",-1))])]),e("div",Hb,[e("div",Lb,[e("div",Nb,[x(e("input",{"onUpdate:modelValue":me=>ee.playbackConfiguration.hlsConfigurationManifestEndpointPrefix=me,type:"text",class:"form-control",id:"playbackConfigurationhlsConfigurationManifestEndpointPrefix",disabled:""},null,8,qb),[[D,ee.playbackConfiguration.hlsConfigurationManifestEndpointPrefix]]),A[45]||(A[45]=e("label",{for:"hlsConfigurationManifestEndpointPrefix"},"HLS Configuration Manifest Endpoint Prefix",-1))]),P.value?(t(),s("button",{key:0,onClick:me=>Se(ee.playbackConfiguration.hlsPlaylist),class:"btn btn-outline-info"},A[46]||(A[46]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),q("View ")]),8,Rb)):C("",!0)])]),e("div",zb,[e("div",jb,[x(e("input",{"onUpdate:modelValue":me=>ee.playbackConfiguration.dashConfigurationManifestEndpointPrefix=me,type:"text",class:"form-control text-wrap",id:"playbackConfigurationdashConfigurationManifestEndpointPrefix",disabled:""},null,8,Fb),[[D,ee.playbackConfiguration.dashConfigurationManifestEndpointPrefix]]),A[47]||(A[47]=e("label",{for:"playbackConfigurationdashConfigurationManifestEndpointPrefix"},"DASH Configuration Manifest Endpoint Prefix",-1))])]),e("div",Yb,[e("div",Gb,[x(e("textarea",{"onUpdate:modelValue":me=>ee.playbackConfiguration.adDecisionServerUrl=me,class:"form-control",id:"playbackConfigurationadDecisionServerUrl",style:{height:"8rem"},disabled:""},null,8,Wb),[[D,ee.playbackConfiguration.adDecisionServerUrl]]),A[48]||(A[48]=e("label",{for:"playbackConfigurationadDecisionServerUrl"},"Ad Decision Server Url",-1))])])])])])):C("",!0)])])):C("",!0)],64))),128))]),_:1},512),[[$e,n.item.outputs.length>0]])])])])])],2),e("div",{class:oe([_("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Kb,[e("div",Jb,[e("table",Qb,[A[64]||(A[64]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),x(V(ye,{tag:"tbody",name:"list",class:"table-group-divider"},{default:I(()=>[(t(!0),s(L,null,W(n.item.programs,(ee,Pe)=>(t(),s("tr",{key:ee.programId},[e("td",null,p(Pe+1),1),e("td",null,[ee.arn?(t(),s("span",Xb)):C("",!0),q(" "+p(ee.name)+" ",1),A[55]||(A[55]=e("br",null,null,-1)),e("div",null,[e("div",null,[A[51]||(A[51]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),q(p(o(z).moment(ee.dateScheduledStart).format("llll")),1)]),e("div",null,[A[52]||(A[52]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),q(p(o(z).moment(ee.dateScheduledEnd).format("llll")),1)])]),ee.relativeProgram?(t(),s(L,{key:1},[A[53]||(A[53]=e("br",null,null,-1)),A[54]||(A[54]=q(" Relative Program: ")),e("span",Zb,p(ee.relativeProgram.name),1)],64)):C("",!0)]),e("td",null,[ee.totalProgramTemplateDurationInMillis!==ee.durationInMillis?(t(),s("div",ey,[A[56]||(A[56]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),q(" "+p(o(z).moment.utc(ee.startOffsetMillis).format("HH:mm:ss"))+" - "+p(o(z).moment.utc(ee.endOffsetMillis).format("HH:mm:ss")),1)])):C("",!0),ee.adBreaksDurationInMillis?(t(),s("div",ty,[A[57]||(A[57]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),q(" Ads: "+p(o(z).moment.utc(ee.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):C("",!0),e("div",sy,[A[58]||(A[58]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),q(" Total: "+p(o(z).moment.utc(ee.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[q(p(ee.vodSource.video.title)+" ",1),A[59]||(A[59]=e("br",null,null,-1)),q(" ("+p(o(z).moment.utc(ee.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),s(L,null,W(ee.adBreaks,me=>(t(),s("li",null,[me.vodSource.arn?(t(),s("span",oy)):(t(),s("span",ay)),e("span",ly,p(o(z).moment.utc(me.offsetMillis).format("HH:mm:ss")),1),V(ge,{to:`${i.urlViewVodSource}/${me.vodSource.vodSourceId}/${o(g)()}`},{default:I(()=>[q(p(me.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",ny,[ee.arn?(t(),s("button",{key:0,onClick:me=>Z(ee.programId),class:"btn btn-sm btn-outline-warning"},A[60]||(A[60]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,iy)):(t(),s(L,{key:1},[e("button",{onClick:me=>O(ee.programId),class:"btn btn-sm btn-outline-primary ms-1"},A[61]||(A[61]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,ry),e("button",{onClick:me=>m(ee.programId),class:"btn btn-sm btn-outline-danger ms-1"},A[62]||(A[62]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,dy)],64)),e("button",{onClick:me=>E(ee.programId),class:"btn btn-sm btn-outline-primary ms-2"},A[63]||(A[63]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]),8,uy)])]))),128))]),_:1},512),[[$e,n.item.programs.length>0]])])]),e("div",cy,[e("button",{onClick:A[16]||(A[16]=ee=>f()),class:"btn btn-outline-primary"},A[65]||(A[65]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),q("Program ")]))])])],2)])])):C("",!0)]),_:1},8,["errorMessage"]),V(eg,{ref_key:"modalAddProgram",ref:u,onRefresh:U},null,512),V(Sg,{ref_key:"modalAddPlaybackConfiguration",ref:F,onRefresh:U},null,512),V(w1,{ref_key:"modalEditProgram",ref:l,onRefresh:U},null,512),V(q1,{ref_key:"modalEditFillerSlate",ref:j,onRefresh:U},null,512)])]),_:1})}}},fy={path:"/",component:Fo,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:da},{path:"users/add",component:Aa},{path:"users",component:ja},{path:"users/view/:id",component:fl,props:!0},{path:"videos/add",component:Nl},{path:"videos/edit/:id",component:dn,props:!0},{path:"videos",component:yn},{path:"videos/view/:id",component:Fn,props:!0},{path:"source-groups/add",component:Jn},{path:"source-groups/edit/:id",component:Zn,props:!0},{path:"source-groups",component:ri},{path:"source-groups/view/:id",component:Ti,props:!0},{path:"source-locations/add",component:Vi},{path:"source-locations/edit/:id",component:Ei,props:!0},{path:"source-locations",component:ji},{path:"source-locations/view/:id",component:vr,props:!0},{path:"vod-sources/add",component:Rr},{path:"vod-sources/edit/:id",component:Fr,props:!0},{path:"vod-sources",component:sd},{path:"vod-sources/view/:id",component:Eu,props:!0},{path:"channels/add",component:Nf},{path:"channels/edit/:id",component:zf,props:!0},{path:"channels",component:Xf},{path:"channels/schedule-programs/:id",component:Jp,props:!0},{path:"channels/view/:id",component:my,props:!0},{path:"program-templates/add",component:$c},{path:"program-templates/edit/:id",component:tm,props:!0},{path:"program-templates",component:mm},{path:"program-templates/view/:id",component:vf,props:!0}]},Xe=lt({history:nt("/"),linkActiveClass:"active",routes:[{...Xs},{path:"/administrator",redirect:"/"},{...fy}]}),py={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const i=this,b=new it().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();b.on("onNotificationCreated",function(w){let y=w.content;w.notificationEntityClassText==="Deposit"&&(y+="<br/>",y+=`<a href="${i.urlViewDeposit}${w.referenceId}">Click ${w.notificationEntityClassText} here</a>`),w.notificationEntityClassText==="Withdraw"&&(y+="<br/>",y+=`<a href="${i.urlViewWithdraw}${w.referenceId}">Click ${w.notificationEntityClassText} here</a>`),w.notificationEntityClassText==="ManualModeOfPayment"&&(y+="<br/>",y+=`<a href="${i.urlViewManualModeOfPayment}${w.referenceId}">Click ${w.notificationEntityClassText} here</a>`),w.iconClass;let N="secondary";switch(w.notificationType){case 1:N="success";break;case 3:N="info";break;case 3:N="success";break;case 4:N="info";break;case 5:N="warning";break;case 6:N="error";break}i.$toast[N](w.subject,y,{timeOut:1e4});const T=w.subject,M={body:y,icon:"/img/192x102.png"};new Notification(T,M)}),b.on("jobUpdated",function(w){i.$bus.$emit("event:job-updated",w)}),await b.start().then(function(){}).catch(function(w){})}}};function vy(i,r,b,w,y,N){return t(),s("div")}const gy=he(py,[["render",vy],["__scopeId","data-v-5b4a9fa2"]]),by={class:"navbar bg-light","data-bs-theme":"light"},yy={class:"container-md"},$y={class:"col-sm-auto"},wy={class:"navbar-brand mb-0"},hy={class:"col-sm flex-fill"},_y={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(i){return(r,b)=>(t(),ne(de,null,{default:I(()=>[e("div",null,[e("nav",by,[e("div",yy,[e("div",{class:oe([i.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",$y,[Ce(r.$slots,"title",{},()=>[e("h1",wy,[e("i",{class:oe([i.pageIcon,"me-1"])},null,2),e("span",null,p(i.pageTitle),1)])])]),e("div",hy,[Ce(r.$slots,"default")])],2)])])])]),_:3}))}},ky={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Sy=["innerHTML"],Ty={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},My={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(r,b)=>(t(),ne(de,null,{default:I(()=>[Ce(r.$slots,"default",{},()=>[i.errorMessage?(t(),s("div",ky,[b[0]||(b[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),q("Error ")],-1)),e("div",{innerHTML:i.errorMessage},null,8,Sy)])):C("",!0),i.vuelidate&&i.vuelidate.$error?(t(),s("div",Ty,[b[1]||(b[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(L,null,W(i.vuelidate.$errors,w=>(t(),s("li",{key:w.$uid},[w.$validator==="$each"?(t(),s(L,{key:0},[q(" Check errors in '"+p(w.$property)+"' ",1)],64)):(t(),s(L,{key:1},[q(p(w.$message),1)],64))]))),128))])])):C("",!0)])]),_:3}))}},Cy={class:"mt-2 container-md"},xy={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(r,b)=>{const w=Q("PageMessages");return t(),ne(de,null,{default:I(()=>[e("div",Cy,[V(w,{errorMessage:i.errorMessage,vuelidate:i.vuelidate},null,8,["errorMessage","vuelidate"]),Ce(r.$slots,"default")])]),_:3})}}},Iy={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const i=this;i.busy||(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveFirst(){const i=this;if(i.busy)return;i.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveLast(){const i=this;if(i.busy)return;const r=i.filter;r.pageIndex!==r.totalPages&&(document.activeElement&&document.activeElement.blur(),await i.search(r.totalPages))},async move(i){const r=this;if(r.busy)return;const b=r.filter,w=b.pageIndex+i;w>=0&&w<=b.totalPages&&(document.activeElement&&document.activeElement.blur(),await r.search(w))}}},Py={class:"mt-2"},Uy={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},Vy={key:0,class:"col-sm order-2 order-sm-1"},Oy={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Ay={class:"me-1 fw-bold"},Ey={class:"fw-bold"},Dy={class:"ms-1"},By={class:"col-sm order-1 order-sm-2"},Hy={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Ly={key:0,class:"page-item"},Ny={key:1,class:"page-item"},qy={key:2,class:"page-item"},Ry={class:"page-item active"},zy={class:"page-link"},jy={key:3,class:"page-item"},Fy={key:4,class:"page-item"},Yy={key:5,class:"page-item"},Gy={key:1,class:"text-info font-weight-bold text-center"},Wy={key:0},Ky={key:1};function Jy(i,r,b,w,y,N){return t(),s("div",Py,[b.filter.items.length?(t(),s("div",Uy,[b.showPerPage?(t(),s("div",Vy,[e("div",Oy,[e("div",null,[e("span",Ay,p(b.filter.totalCount),1),r[8]||(r[8]=q("records in ")),e("span",Ey,p(b.filter.totalPages),1),r[9]||(r[9]=q(" page(s) "))]),e("div",Dy,[x(e("select",{"onUpdate:modelValue":r[0]||(r[0]=T=>b.filter.pageSize=T),onChange:r[1]||(r[1]=(...T)=>N.changePagination&&N.changePagination(...T)),class:"form-select form-select-sm me-1"},r[10]||(r[10]=[ze('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[pe,b.filter.pageSize]])]),r[11]||(r[11]=e("div",{class:"ms-1"},"per page",-1))])])):C("",!0),e("div",By,[e("ul",Hy,[b.filter.pageIndex!==1?(t(),s("li",Ly,[e("button",{class:"page-link","aria-label":"Previous",onClick:r[2]||(r[2]=(...T)=>N.moveFirst&&N.moveFirst(...T))},r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):C("",!0),b.filter.pageIndex>2?(t(),s("li",Ny,[e("button",{class:"page-link",onClick:r[3]||(r[3]=T=>N.move(-2))},p(b.filter.pageIndex-2),1)])):C("",!0),b.filter.pageIndex>1?(t(),s("li",qy,[e("button",{class:"page-link",onClick:r[4]||(r[4]=T=>N.move(-1))},p(b.filter.pageIndex-1),1)])):C("",!0),e("li",Ry,[e("span",zy,p(b.filter.pageIndex),1)]),b.filter.pageIndex<b.filter.totalPages?(t(),s("li",jy,[e("button",{class:"page-link",onClick:r[5]||(r[5]=T=>N.move(1))},p(b.filter.pageIndex+1),1)])):C("",!0),b.filter.pageIndex<b.filter.totalPages-1?(t(),s("li",Fy,[e("button",{class:"page-link",onClick:r[6]||(r[6]=T=>N.move(2))},p(b.filter.pageIndex+2),1)])):C("",!0),b.filter.pageIndex<b.filter.totalPages?(t(),s("li",Yy,[e("button",{class:"page-link","aria-label":"Next",onClick:r[7]||(r[7]=(...T)=>N.moveLast&&N.moveLast(...T))},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):C("",!0)])])])):(t(),s("div",Gy,[b.noRecords?(t(),s("div",Wy,p(b.noRecords),1)):(t(),s("div",Ky,"No record(s) found."))]))])}const Qy=he(Iy,[["render",Jy]]),Xy={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let i=this;if(!i.enabled)return;let r=i.filter;r.sortField===i.field?r.sortOrder===0?r.sortField=null:r.sortOrder=r.sortOrder===0?1:0:(r.sortField=i.field,r.sortOrder=1),i.$emit("search")}}},Zy={class:"align-self-center"};function e$(i,r,b,w,y,N){return t(),s("div",{onClick:r[0]||(r[0]=(...T)=>N.click&&N.click(...T)),class:"d-flex flex-row justify-content-start align-content-center",style:Ge({cursor:b.enabled?"pointer":""})},[Ce(i.$slots,"default"),e("span",Zy,[b.showSort?(t(),s("span",{key:0,class:oe([{"fa-sort text-gray-500":!N.currentSortField(),"fa-sort-up":N.currentSortField()&&N.sortUp(),"fa-sort-down":N.currentSortField()&&!N.sortUp()},"fas fa-fw mr-1"])},null,2)):C("",!0)])],4)}const t$=he(Xy,[["render",e$]]),s$={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(i){const r=this;r.setSelected(i),r.$emit("onSelectedRow",i)}}},o$={class:"table-responsive m-0"},a$=["href"],l$={key:1},n$=["onClick"],i$={class:"form-group row no-gutters"},r$={class:"col-5 col-form-label"},d$={class:"col align-self-center"},u$=["href"],c$={key:1};function m$(i,r,b,w,y,N){return t(),s("div",null,[e("div",o$,[e("table",{class:oe(["table table-hover d-none d-md-table card",b.tableCss])},[e("thead",null,[Ce(i.$slots,"header",{},()=>[r[0]||(r[0]=e("th",null,"#",-1)),(t(!0),s(L,null,W(b.header.columns,T=>(t(),s("th",null,p(T.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(L,null,W(b.items,(T,K)=>Ce(i.$slots,"table-row",{key:`row1-${T[b.header.key]}`,item:T,index:K},()=>[e("td",null,p(b.getRowNumber(K)),1),(t(!0),s(L,null,W(b.header.columns,H=>(t(),s("td",null,[H.href?(t(),s("a",{key:0,href:H.href(T[b.header.key]),class:"font-weight-bold"},p(T[H.field]),9,a$)):(t(),s("span",l$,p(T[H.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:oe(["d-block d-md-none",b.rowCss])},[(t(!0),s(L,null,W(b.items,(T,K)=>(t(),s("div",{key:`row2-${T[b.header.key]}`,onClick:H=>N.onSelectedRow(T),class:"border"},[e("div",{class:oe(["p-2",{"b-left":b.isSelected(T)}])},[Ce(i.$slots,"table-list",{item:T,index:K},()=>[(t(!0),s(L,null,W(b.header.columns,H=>(t(),s("div",i$,[e("label",r$,p(H.title),1),e("div",d$,[H.href?(t(),s("a",{key:0,href:H.href(T[b.header.key]),class:"font-weight-bold"},p(T[H.field]),9,u$)):(t(),s("span",c$,p(T[H.field]),1))])]))),256))],!0)],2)],8,n$))),128))],2)])}const f$=he(s$,[["render",m$],["__scopeId","data-v-65929213"]]),ke=rt(ut);ke.use(dt());ke.use(Xe);ke.component("m-notification",gy);ke.component("m-pagination",Qy);ke.component("sort-field",t$);ke.component("table-list",f$);ke.component("Toasts",qo);ke.component("PageHeader",_y);ke.component("PageMessages",My);ke.component("PageBody",xy);const p$="https://sonyfastpoc.azurewebsites.net/",v$="Sony FAST",g$=void 0,b$={API_URL:p$,appName:v$,tenantId:g$};ke.provide("$config",b$);ke.provide("$bus",He);ke.mount("#app");
