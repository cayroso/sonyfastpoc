import{r as ae,o as t,c as ve,d as Ke,h as rt,u as Qe,a as fe,L as qe,e as Be,b as s,f as e,g as z,w as F,i as K,t as m,F as U,j as B,k as H,l as me,m as Je,n as Me,p as it,q as Ne,s as Xe,P as ze,v as ge,x as ne,y as ie,z as Se,A as ft,B as o,T as be,C as R,D as ee,E as We,G as te,H as dt,I as _e,J as Ae,K as Ie,M as De,N as pe,O as Le,Q as ke,R as he,S as Ve,U as Ee,V as Re,W as nt,X as pt,Y as vt,Z as gt,_ as He,$ as bt,a0 as yt,a1 as $t}from"./vendor-DtZVdVFy-chunk.js";(function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))C(_);new MutationObserver(_=>{for(const D of _)if(D.type==="childList")for(const P of D.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&C(P)}).observe(document,{childList:!0,subtree:!0});function k(_){const D={};return _.integrity&&(D.integrity=_.integrity),_.referrerPolicy&&(D.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?D.credentials="include":_.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function C(_){if(_.ep)return;_.ep=!0;const D=k(_);fetch(_.href,D)}})();const ht={__name:"App",setup(n){return(v,k)=>{const C=ae("router-view");return t(),ve(C)}}},wt=Ke({id:"alert",state:()=>({alert:null}),actions:{success(n){this.alert={message:n,type:"alert-success"}},error(n){this.alert={message:n,type:"alert-danger"}},clear(){this.alert=null}}});function Ze(){const n=N=>{var y;let O=N,u=O.response,S="";if(!O.response)return N.message;if(u.status===500){if(typeof u.data=="string")return u.data;if(u.data.content)return u.data.content;if(u.data.detail)return u.data.detail}if(u.status===401){const W=`${window.location.pathname}${window.location.search}`;S=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(W)}`}'>here</a> to login.`}else if(u.status===400){let W=O.response.data.errors;S=O.response.data.title||O.response.data,W&&(S+="<ul>");for(let X in W){let f=W[X];for(let b in W[X]){let Y=f[b];S+=`<li>${Y}</li>`}}W&&(S+="</ul>"),S||(S=O.message),S&&S.content&&(S=S.content)}else u.status===404?S=((y=u==null?void 0:u.data)==null?void 0:y.title)||(u==null?void 0:u.data)||"Record not found.":typeof u.data=="string"&&(S=O.message,S===""&&(S=`Error <b>Http ${u.status}</b>.<br/>Please contact the System Administrator.`));return S},v=N=>JSON.parse(JSON.stringify(N)),k=N=>{if(typeof N!="number")return N;var O=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return O.format(N)},C=(N,O,u)=>{const y={value:O,expiry:new Date().getTime()+u};debugger;localStorage.setItem(N,JSON.stringify(y))},_=N=>{debugger;const O=localStorage.getItem(N);if(!O)return null;const u=JSON.parse(O);return new Date().getTime()>u.expiry?(localStorage.removeItem(N),null):u.value},D="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:n,clone:v,toCurrency:k,moment:rt,localStorageSetWithExpiry:C,localStorageGetWithExpiry:_,setPageTab:(N,O)=>{var u=localStorage.getItem(D);u?u=JSON.parse(u):u={},u[N]=O,localStorage.setItem(D,JSON.stringify(u))},getPageTab:N=>{var O=localStorage.getItem(D);return O?O=JSON.parse(O):O={},O[N]},createHlsStream:(N,O,u)=>{var S=new Hls({autoStartLoad:u??!0});return S.on(Hls.Events.MEDIA_ATTACHED,function(){}),S.on(Hls.Events.MANIFEST_PARSED,function(y,W){console.log("manifest loaded, found "+W.levels.length+" quality level")}),S.on(Hls.Events.ERROR,function(y,W){if(W.fatal)switch(W.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),S.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",W);break;default:S.destroy();break}}),S.loadSource(O),S.attachMedia(N),S},isValidTime:N=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(N),generateReturnUrl:()=>{const N=Qe();let O=N.path;return N.query.returnUrl&&(O=N.query.returnUrl),O=`?returnUrl=${encodeURIComponent(O)}`,O},getValidFeedbackCss:N=>N?"is-valid":"is-invalid"}}const _t=Ze(),ut=JSON.parse(localStorage.getItem("user"))||{},kt=_t.moment.utc(ut.exp*1e3),St=kt.isAfter()?ut:null,$e=Ke({id:"auth",state:()=>({user:St,returnUrl:null}),actions:{async login(n){try{this.user=n,localStorage.setItem("user",JSON.stringify(n))}catch(v){debugger;alert(v)}},logout(){this.user=null,localStorage.removeItem("user"),ot.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),Tt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(Tt));const It={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://lively-bay-00480981e.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'"},Ye=It,Ge=Ke("msal",()=>{const n=fe({auth:{clientId:Ye.VITE_AUTH_CLIENT_ID,authority:Ye.VITE_AUTH_AUTHORITY_URL,postLogoutUri:Ye.VITE_AUTH_POST_LOGOUT_URI},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1},system:{loggerOptions:{logLevel:qe.Verbose,loggerCallback:(C,_,D)=>{if(!D)switch(C){case qe.Error:console.error(_);return;case qe.Info:console.info(_);return;case qe.Verbose:console.debug(_);return;case qe.Warning:console.warn(_);return}},piiLoggingEnabled:!1}}}),v=fe("");return{msalConfig:n,accessToken:v,setAccessToken:C=>{v.value=C}}}),et={$on:(...n)=>Be.on(...n),$once:(...n)=>Be.once(...n),$off:(...n)=>Be.off(...n),$emit:(...n)=>Be.emit(...n)};function Mt(){const n=(D,P,Q,j)=>{et.$emit("toast-message",{title:D,message:P,type:Q,options:j})};return{success:(D,P,Q={})=>{n(D,P,"success",Q)},warning:(D,P,Q={})=>{n(D,P,"warning",Q)},info:(D,P,Q={})=>{n(D,P,"info",Q)},error:(D,P,Q={})=>{n(D,P,"danger",Q)}}}const xe=(n,v)=>{const k=n.__vccOpts||n;for(const[C,_]of v)k[C]=_;return k},xt={data(){return{notifications:[],messages:[]}},async created(){const n=this;n.$bus.$on("event:notification-received",()=>{n.getUnreadNotifications()}),n.$bus.$on("event:notification-marked-as-read",v=>{n.notifications.some(C=>C.notificationId===v)&&n.getUnreadNotifications()}),n.$bus.$on("event:notification-removed",v=>{n.notifications.some(C=>C.notificationId===v)&&n.getUnreadNotifications()}),n.$bus.$on("event:chat-marked-as-read",n.onChatMarkedAsRead),n.$bus.$on("event:chat-message-received",n.onChatMessageReceived)},async mounted(){const n=this,v=n.$refs.notifications,k=n.$refs.messages;v&&v.offsetParent,k&&k.offsetParent&&await n.getUnreadChats()},methods:{async logout(){const n=this;try{await n.$util.axios.post("/api/accounts/logout").then(v=>{const k="/";n.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){n.$util.href(k)}})})}catch(v){n.$util.handleError(v)}},async onChatMarkedAsRead(n){let v=this,k=v.messages.find(C=>C.chatId===n);if(k){let C=v.messages.indexOf(k);v.messages.splice(C,1)}},async onChatMessageReceived(n){let v=this,k=v.messages.find(_=>_.chatId===n.chatId);if(k)k.lastMessageText=n.content;else{var C={chatId:n.chatId,isRead:!1,lastDateSent:n.dateSent,lastMessageText:n.content,senderFirstLastName:`${n.sender.firstName} ${n.sender.lastName}`,senderInitials:n.sender.initials,senderProfilePicture32:n.sender.profilePicture32,urlPicture:v.$util.getProfilePictureUrl(n.sender.profilePicture32,n.sender.initials)};v.messages.push(C)}},async getUnreadNotifications(){const n=this;try{await n.$util.axios.get("api/accounts/unread-notifications").then(v=>{n.notifications=v.data})}catch(v){n.$util.handleError(v)}},async getUnreadChats(){const n=this;try{await n.$util.axios.get("api/accounts/unread-chats").then(v=>{n.messages=v.data;for(let k in n.messages){let C=n.messages[k];n.$set(C,"urlPicture",n.$util.getProfilePictureUrl(C.senderProfilePicture32,C.senderInitials))}})}catch(v){n.$util.handleError(v)}},viewNotification(n){this.$bus.$emit("event:open-notification",n)},viewChat(n){this.$bus.$emit("event:open-chat",n)},showHiddenElements(){let v=this.$el.getElementsByClassName("initialHidden");for(let k=0;k<v.length;k++)v[k].classList.remove("invisible")}}},Ct={mixins:[xt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const v=$e().user;return{user:v,username:v?v.nameFull:"Guest"}},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1},async openModalSearchUser747(n){this.$refs.refModalSearchUser747.open(n)}}},Vt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Pt={class:"container-md"},Ot={class:"navbar-collapse collapse",id:"navbarSideCollapse"},At={class:"navbar-nav"},Lt={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ht={class:"nav-item dropdown"},Dt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Et={class:"navbar-nav ms-auto"},qt={class:"nav-item dropdown"},Bt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Nt={class:"d-inline d-sm-none d-md-inline"},Rt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Ft={class:"text-capitalize"};function zt(n,v,k,C,_,D){const P=ae("router-link");return t(),s("nav",Vt,[e("div",Pt,[z(P,{class:"navbar-brand",to:"/member"},{default:F(()=>[K(m(k.appName),1)]),_:1}),v[14]||(v[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Ot,[e("ul",At,[e("li",Lt,[v[3]||(v[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ut,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/announcements"},{default:F(()=>v[0]||(v[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),K(" Announcements ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/posts"},{default:F(()=>v[1]||(v[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),K(" Posts ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/yellow-pages"},{default:F(()=>v[2]||(v[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),K(" Yellow Pages ")])),_:1})])])]),e("li",Ht,[v[5]||(v[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Dt,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:F(()=>v[4]||(v[4]=[K(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Et,[e("li",qt,[e("a",Bt,[e("span",null,[v[6]||(v[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Nt,m(_.username),1)])]),e("ul",Rt,[v[9]||(v[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),v[10]||(v[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),v[11]||(v[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),v[12]||(v[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),_.user&&_.user.roles.length>1?(t(!0),s(U,{key:0},B(_.user.roles,Q=>(t(),s("li",null,[z(P,{to:`/${Q.toLowerCase()}`,class:"dropdown-item"},{default:F(()=>[e("span",Ft,m(Q),1)]),_:2},1032,["to"])]))),256)):H("",!0),e("li",null,[z(P,{to:"/",class:"dropdown-item"},{default:F(()=>v[7]||(v[7]=[K(" Main ")])),_:1})]),v[13]||(v[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[z(P,{to:"/account/logout",class:"dropdown-item"},{default:F(()=>v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),K("Logout ")])),_:1})])])])])])])])}const Gt=xe(Ct,[["render",zt]]),jt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const n=document.getElementById("top");n&&n.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let n=this;if(!n.$el.getElementsByClassName)return;let v=n.$el.getElementsByClassName("initialHidden");for(let k=0;k<v.length;k++){let C=v[k];C.classList.remove("invisible"),C.classList.remove("d-none")}},close(){const n=this,v=document.referrer.toLowerCase();v&&v.includes("/account/login")?n.$router.go(-2):n.$router.go(-1)},toggle(n){const v=this;v.toggles[n]=!v.toggles[n],localStorage.setItem(v.togglesKey,JSON.stringify(v.toggles))}}},Yt={mixins:[jt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1}}},Wt={class:"footer sticky-bottom"},Kt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Qt={class:"container-md"},Jt={class:"navbar-text small p-0"},Xt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Zt={class:"container-md"},es={class:"navbar-nav nav-fill w-100"},ts={class:"nav-item dropup"},ss={class:"dropdown-menu","aria-labelledby":"dropdown01"},os={class:"nav-item dropup"},as={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ls(n,v,k,C,_,D){const P=ae("router-link");return t(),s("footer",Wt,[e("div",Kt,[e("div",Qt,[e("span",Jt,"©"+m(_.copyright),1)])]),e("nav",Xt,[e("div",Zt,[e("ul",es,[e("li",ts,[v[3]||(v[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",ss,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/announcements"},{default:F(()=>v[0]||(v[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),K(" Announcements ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/posts"},{default:F(()=>v[1]||(v[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),K(" Posts ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/yellow-pages"},{default:F(()=>v[2]||(v[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),K(" Yellow Pages ")])),_:1})])])]),e("li",os,[v[5]||(v[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",as,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:F(()=>v[4]||(v[4]=[K(" Property Monthly Dues ")])),_:1})])])])])])])])}const ns=xe(Yt,[["render",ls]]),rs={name:"AdminLayout",components:{TopNav:Gt,BottomNav:ns},inject:["$config"],mounted(){const v=this.$config;document.title=`Account - ${v.appName}`}},is={class:"d-flex flex-column vh-100"};function ds(n,v,k,C,_,D){const P=ae("Toasts"),Q=ae("router-view");return t(),s("div",is,[z(P),z(Q,{class:"flex-grow-1 mb-2"})])}const us=xe(rs,[["render",ds]]),cs={__name:"index",setup(n){return $e().user,me(()=>{}),(k,C)=>(t(),s("div",null,C[0]||(C[0]=[Je('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ms={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://lively-bay-00480981e.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'"},fs=ms;function ps(){Me("$config");const n=fs.VITE_API_URL,v=it.create({baseURL:n});return Ne.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),v.interceptors.request.use(k=>{Ne.start();const{user:C}=$e();return C&&C.token&&(k.headers?(k.headers.Authorization||(k.headers.Authorization=`Bearer ${C.token}`),k.headers["Access-Control-Allow-Origin"]||(k.headers["Access-Control-Allow-Origin"]="*")):k.headers={Authorization:`Bearer ${C.token}`,"Access-Control-Allow-Origin":"*"}),k}),v.interceptors.response.use(k=>(Ne.done(),k),k=>{throw Ne.done(),k}),v}function ye(n){if(!n.appTitle)throw Error("App Title is required.");if(!n.pageTitle)throw Error("Page Title is required.");const v=Qe(),k=Xe(),C=ps(),_=Ze(),D=Mt(),Q=$e().user,j=()=>Q&&Q.roles&&Q.roles.includes("System"),I=()=>Q&&Q.roles&&Q.roles.includes("administrator"),G=()=>Q&&Q.roles&&Q.roles.includes("employee"),le=()=>Q&&Q.roles&&Q.roles.includes("Member"),N=async()=>{const Y=document.referrer.toLowerCase();Y&&Y.includes("/accounts/login")?await k.go(-2):await k.go(-1)},O=Y=>{var r;const p=v.path,T=(r=v.query)==null?void 0:r.returnUrl;T&&!(p.startsWith(T)||T.startsWith(p))?k.push(T):k.push(Y)},u=n.appTitle,S=n.pageTitle,y=fe(!1),W=fe(new Map),X=fe(""),f=fe(""),b=fe("");return{appTitle:u,pageTitle:S,busy:y,validations:W,infoMessage:X,warningMessage:f,errorMessage:b,router:k,route:v,axios:C,utils:_,toasts:D,close:N,closeWithReturnUrl:O,generateReturnUrl:_.generateReturnUrl,security:{userId:Q?Q.userId:"",isSystem:j(),isAdministrator:I(),isEmployee:G(),isMember:le()}}}const vs={class:"h-100 d-flex align-items-center justify-content-center"},gs={class:"form-signin w-100 m-auto"},bs={class:"h3 mb-3 fw-normal"},ys={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$s=["innerHTML"],hs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ws=["disabled"],_s={key:0,class:"fas fa-fw fa-sync fa-spinner fa-spin me-2"},ks={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(n){Me("$config");const v=$e(),k=Ge(),C=new ze(k.msalConfig),_=ge({username:"",password:""}),D={username:{required:ne.withMessage("Username is required.",ie),$autoDirty:!0,$lazy:!0},password:{required:ne.withMessage("Password is required.",ie),$autoDirty:!0,$lazy:!0}},P=Se(D,_),{appTitle:Q,pageTitle:j,busy:I,isDirty:G,validations:le,infoMessage:N,warningMessage:O,errorMessage:u,router:S,route:y,axios:W,utils:X,toasts:f,close:b,security:Y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Sign On"}),p={redirectUri:window.location.origin+"/accounts/loginRedirect"};me(async()=>{I.value=!0,await C.initialize();try{const w=await C.ssoSilent(p);if(w){await f.success("SSO Active Session Check","Active session found, redirecting to home page.",{onClose:async()=>{await r(w.account)}});return}}catch(w){w.errorCode=="login_required"?f.info("SSO Active Session Check","No active session found, please signin."):f.warn("Error while Signing In",w)}I.value=!1});const T=async()=>{var w={account:C.getActiveAccount(),scopes:[]};await C.acquireTokenSilent(w).then(d=>{const l=d.account.idToken,a=ft(l);a.token=d.accessToken,console.log(d),a.roles||(a.roles=[]),a.userId=a.sub,v.login(a);var L=y.query.returnUrl;L?S.push(decodeURIComponent(L)):a.roles.length===1?S.push(`/${a.roles[0].toLowerCase()}`):S.push("/")}).catch(d=>{console.error(`error during acquireTokenSilent: ${d}`)})},r=async w=>{C.setActiveAccount(w),await T(),f.success("SignIn","Sign in successful.",{onClose:async()=>{await T()}})},c=async()=>{const w=C.getAllAccounts();if(w.length===0){await C.loginRedirect(p);return}const d=w[0];await r(d)};return(w,d)=>(t(),ve(be,null,{default:F(()=>[e("div",vs,[e("main",gs,[e("div",null,[e("h1",bs,m(o(Q)),1),e("div",null,[o(u)?(t(),s("div",ys,[d[1]||(d[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(u)},null,8,$s)])):H("",!0),o(P).$error?(t(),s("div",hs,[d[2]||(d[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(P).$errors,i=>(t(),s("li",{key:i.$uid},m(i.$message),1))),128))])])):H("",!0)]),e("button",{onClick:d[0]||(d[0]=i=>c()),disabled:o(I),class:"btn btn-primary w-100 py-2"},[o(I)?(t(),s("span",_s)):H("",!0),d[3]||(d[3]=K("Single Sign On "))],8,ws)])])])]),_:1}))}},Ss=xe(ks,[["__scopeId","data-v-90a9674b"]]),Ts={__name:"loginRedirect",setup(n){$e();const v=Ge(),k=new ze(v.msalConfig);return me(async()=>{await k.initialize(),await k.handleRedirectPromise().then(C=>{debugger}).catch(C=>{debugger})}),(C,_)=>(t(),ve(be,null,{default:F(()=>_[0]||(_[0]=[e("div",null," Login successful, redirecting... ",-1)])),_:1}))}},Is={class:"h-100 d-flex align-items-center justify-content-center"},Ms={__name:"logout",setup(n){const v=$e();return v.user,me(async()=>{v.logoutWithRedirect()}),(k,C)=>(t(),s("div",Is,C[0]||(C[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[K(" You have logged out from HOA MS."),e("br"),K(" Click "),e("a",{href:"/",class:"d-inline"},"here"),K(" to go back to home page. ")])],-1)])))}},xs={class:"h-100 d-flex align-items-center justify-content-center"},Cs={class:"card m-3"},Vs={class:"card-header"},Ps={class:"card-body"},Os={class:"m-2"},As={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ls=["innerHTML"],Us={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Hs={class:"row row-cols-1 row-cols-sm-3"},Ds={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"col-sm"},Ns={class:"form-group"},Rs={key:0,class:"d-block invalid-feedback"},Fs={class:"col-sm"},zs={class:"form-group"},Gs={key:0,class:"d-block invalid-feedback"},js={class:"row row-cols-1 row-cols-sm-3"},Ys={class:"col"},Ws={class:"form-group"},Ks={key:0,class:"d-block invalid-feedback"},Qs={class:"col"},Js={class:"form-group"},Xs={key:0,class:"d-block invalid-feedback"},Zs={class:"row row-cols-1 row-cols-sm-3"},eo={class:"col-sm"},to={class:"form-group"},so={key:0,class:"d-block invalid-feedback"},oo={class:"col-sm"},ao={class:"form-group"},lo={key:0,class:"d-block invalid-feedback"},no={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},ro={class:"col"},io=["disabled"],uo={class:"col"},co={class:"col"},mo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(n){const v=ge({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),k=(Y,p)=>Y===p.password,C={firstName:{required:ne.withMessage("First name is required.",ie),$autoDirty:!0,$lazy:!0},middleName:{required:ne.withMessage("Middle name is required.",ie),$autoDirty:!0,$lazy:!0},lastName:{required:ne.withMessage("Last name is required.",ie),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ne.withMessage("Phone number is required.",ie),$autoDirty:!0,$lazy:!0},email:{required:ne.withMessage("Email is required.",ie),$autoDirty:!0,$lazy:!0},password:{required:ne.withMessage("Password is required.",ie),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ne.withMessage("Confirm password is required.",ie),confirmSamePassword:ne.withMessage("Password and confirm passwrod are different.",k),$autoDirty:!0,$lazy:!0}},_=Se(C,v),{appTitle:D,pageTitle:P,busy:Q,isDirty:j,validations:I,infoMessage:G,warningMessage:le,errorMessage:N,router:O,axios:u,utils:S,toasts:y,close:W,security:X}=ye({appTitle:"HOA MS",pageTitle:"Register User"}),f=Me("$config");me(()=>{});const b=async()=>{const Y=v;if(Q.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}N.value=null;try{Q.value=!0;const T=S.clone(Y);T.tenantid=f.tenantId;debugger;await u({method:"post",url:"/api/v1/accounts/register",data:T}).then(r=>{y.success("Register","Registration was successfull.",{onClose:async()=>{await O.push("/accounts/login")}})})}catch(T){N.value=S.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{Q.value=!1}};return(Y,p)=>{const T=ae("router-link");return t(),ve(be,null,{default:F(()=>[e("div",xs,[e("div",Cs,[e("h4",Vs,m(o(P)),1),e("div",Ps,[e("div",Os,[o(N)?(t(),s("div",As,[p[8]||(p[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Ls)])):H("",!0),o(_).$error?(t(),s("div",Us,[p[9]||(p[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(_).$errors,r=>(t(),s("li",{key:r.$uid},m(r.$message),1))),128))])])):H("",!0)]),e("div",Hs,[e("div",Ds,[e("div",Es,[p[10]||(p[10]=e("label",null,"First Name",-1)),R(e("input",{"onUpdate:modelValue":p[0]||(p[0]=r=>v.firstName=r),type:"text",class:"form-control"},null,512),[[ee,v.firstName]]),o(_).firstName.$error?(t(),s("div",qs,[(t(!0),s(U,null,B(o(_).firstName.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])]),e("div",Bs,[e("div",Ns,[p[11]||(p[11]=e("label",null,"Middle Name",-1)),R(e("input",{"onUpdate:modelValue":p[1]||(p[1]=r=>v.middleName=r),type:"text",class:"form-control"},null,512),[[ee,v.middleName]]),o(_).middleName.$error?(t(),s("div",Rs,[(t(!0),s(U,null,B(o(_).middleName.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])]),e("div",Fs,[e("div",zs,[p[12]||(p[12]=e("label",null,"Last Name",-1)),R(e("input",{"onUpdate:modelValue":p[2]||(p[2]=r=>v.lastName=r),type:"text",class:"form-control"},null,512),[[ee,v.lastName]]),o(_).lastName.$error?(t(),s("div",Gs,[(t(!0),s(U,null,B(o(_).lastName.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])])]),e("div",js,[e("div",Ys,[e("div",Ws,[p[13]||(p[13]=e("label",null,"Phone Number",-1)),R(e("input",{"onUpdate:modelValue":p[3]||(p[3]=r=>v.phoneNumber=r),type:"tel",class:"form-control"},null,512),[[ee,v.phoneNumber]]),o(_).phoneNumber.$error?(t(),s("div",Ks,[(t(!0),s(U,null,B(o(_).phoneNumber.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])]),e("div",Qs,[e("div",Js,[p[14]||(p[14]=e("label",null,"Email",-1)),R(e("input",{"onUpdate:modelValue":p[4]||(p[4]=r=>v.email=r),type:"email",class:"form-control"},null,512),[[ee,v.email]]),o(_).email.$error?(t(),s("div",Xs,[(t(!0),s(U,null,B(o(_).email.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])])]),e("div",Zs,[e("div",eo,[e("div",to,[p[15]||(p[15]=e("label",null,"Password",-1)),R(e("input",{"onUpdate:modelValue":p[5]||(p[5]=r=>v.password=r),type:"password",class:"form-control"},null,512),[[ee,v.password]]),o(_).password.$error?(t(),s("div",so,[(t(!0),s(U,null,B(o(_).password.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])]),e("div",oo,[e("div",ao,[p[16]||(p[16]=e("label",null,"Confirm Password",-1)),R(e("input",{"onUpdate:modelValue":p[6]||(p[6]=r=>v.confirmPassword=r),type:"password",class:"form-control"},null,512),[[ee,v.confirmPassword]]),o(_).confirmPassword.$error?(t(),s("div",lo,[(t(!0),s(U,null,B(o(_).confirmPassword.$errors,r=>(t(),s("div",{key:r.$uid},m(r.$message),1))),128))])):H("",!0)])])]),e("div",no,[e("div",ro,[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:p[7]||(p[7]=r=>b()),class:"btn btn-primary w-100"},p[17]||(p[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),K("Register ")]),8,io)]),e("div",uo,[z(T,{to:"/",class:"btn btn-outline-primary w-100"},{default:F(()=>p[18]||(p[18]=[K("Home")])),_:1})]),e("div",co,[z(T,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:F(()=>p[19]||(p[19]=[K("Login")])),_:1})])])])])])]),_:1})}}},fo={path:"/accounts",component:us,props:!1,meta:{},children:[{path:"",component:cs},{path:"login",component:Ss},{path:"loginRedirect",component:Ts},{path:"logout",component:Ms},{path:"register",component:mo}]};function tt(){const n=Xe(),v=j=>window.location.href.indexOf(j)>-1,k=j=>localStorage.getItem("data-bs-theme")||j,C=j=>{document.documentElement.setAttribute("data-bs-theme",j),localStorage.setItem("data-bs-theme",j)},_=async()=>await it.get("https://bootswatch.com/api/5.json").then(j=>j.data),D=j=>{const I=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");I&&j?(I.setAttribute("href",j),localStorage.setItem("bootswatch-theme",j)):alert("cannot query css link")},P=j=>{Q(),n.push(j)},Q=()=>{if(screen.width<576){const I=document.getElementById("navbarCollapse");if(I){const G=We.getInstance(I);G&&G.hide()}}};return{isActive:v,getCurrentBsTheme:k,changeBsTheme:C,getBootswatch:_,changeTheme:D,navigate:P,collapseNavbar:Q}}const po={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},vo={class:"container-md"},go={class:"navbar-collapse collapse",id:"navbarCollapse"},bo={class:"navbar-nav"},yo={class:"nav-item"},$o={class:"nav-item dropdown"},ho={class:"dropdown-menu","aria-labelledby":"dropdown01"},wo={class:"nav-item"},_o={class:"nav-item dropdown"},ko={class:"dropdown-menu","aria-labelledby":"dropdown01"},So={class:"navbar-nav ms-auto"},To={class:"nav-item dropdown"},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Mo=["onClick"],xo={class:"nav-item dropdown"},Co={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Vo={class:"d-sm-none d-xl-inline"},Po={key:0},Oo={key:1},Ao={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Lo={key:0},Uo={key:1},Ho={__name:"topNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(n){const v=Ge(),{isActive:k,getCurrentBsTheme:C,changeBsTheme:_,getBootswatch:D,changeTheme:P,navigate:Q,collapseNavbar:j}=tt(),I=$e(),G=I.user,le=ge({user:G,username:G?G.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});me(async()=>{const S=le;S.bootswatch=await D();const y=C(S.bsTheme);debugger;y&&(S.bsTheme=y,_(S.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(S.currentTheme=W,P(W))});const N=S=>{P(S),le.currentTheme=S,j()},O=S=>{_(S),le.bsTheme=S,j()},u=async()=>{I.logoutWithRedirect();const S=new ze(v.msalConfig);await S.initialize();const y={mainWindowRedirectUri:"/"};await S.logoutPopup(y)};return(S,y)=>{const W=ae("router-link");return t(),ve(be,null,{default:F(()=>[e("nav",po,[e("div",vo,[z(W,{class:"navbar-brand",to:"/administrator"},{default:F(()=>[K(m(n.appName),1)]),_:1}),y[18]||(y[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",go,[e("ul",bo,[e("li",yo,[z(W,{to:"/videos",onClick:o(j),class:"nav-link"},{default:F(()=>y[3]||(y[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",$o,[y[6]||(y[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",ho,[e("li",null,[z(W,{to:"/source-groups",onClick:o(j),class:"dropdown-item"},{default:F(()=>y[4]||(y[4]=[K(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[z(W,{to:"/source-locations",onClick:o(j),class:"dropdown-item"},{default:F(()=>y[5]||(y[5]=[K(" Locations ")])),_:1},8,["onClick"])])])]),e("li",wo,[z(W,{to:"/vod-sources",onClick:o(j),class:"nav-link"},{default:F(()=>y[7]||(y[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",_o,[y[10]||(y[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",ko,[e("li",null,[z(W,{to:"/program-templates",onClick:o(j),class:"dropdown-item"},{default:F(()=>y[8]||(y[8]=[K(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[z(W,{to:"/channels",onClick:o(j),class:"dropdown-item"},{default:F(()=>y[9]||(y[9]=[K(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",So,[e("li",To,[y[14]||(y[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",Io,[e("li",null,[le.bsTheme==="dark"?(t(),s("button",{key:0,onClick:y[0]||(y[0]=X=>O("light")),class:"dropdown-item"},y[11]||(y[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Dark Mode ")]))):(t(),s("button",{key:1,onClick:y[1]||(y[1]=X=>O("dark")),class:"dropdown-item"},y[12]||(y[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Light Mode ")])))]),y[13]||(y[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(U,null,B(le.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:f=>N(X.cssCdn),class:te(["dropdown-item",{active:le.currentTheme===X.cssCdn}])},m(X.name),11,Mo)]))),256))])]),e("li",xo,[e("a",Co,[e("span",null,[y[15]||(y[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Vo,[o(G)?(t(),s("span",Po,m(o(G).name),1)):(t(),s("span",Oo," Guest "))])])]),e("ul",Ao,[o(G)?(t(),s("li",Lo,[e("button",{onClick:y[2]||(y[2]=X=>u()),class:"dropdown-item"},y[16]||(y[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),K("Logout ")]))])):(t(),s("li",Uo,[z(W,{to:"/accounts/login",class:"dropdown-item"},{default:F(()=>y[17]||(y[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),K("Login ")])),_:1})]))])])])])])])]),_:1})}}},Do={id:"sideNav",class:"collapse collapse-horizontal show"},Eo={class:"d-flex flex-column bg-dark min-vh-100 overflow-y-auto"},qo={class:"navbar bg-primary bg-gradient shadow-sm","data-bs-theme":"dark"},Bo={class:"navbar-brand me-0 mb-1 px-2"},No={class:"d-none d-sm-inline"},Ro={class:"nav nav-pills flex-column px-1 mt-2",role:"tablist"},Fo={class:"nav-item"},zo={id:"sources",class:"list-group collapse"},Go={class:"nav-item"},jo={id:"assets",class:"list-group collapse"},Yo={class:"nav-item"},Wo={id:"assembly",class:"list-group collapse"},Ko={class:"nav nav-pills flex-column mt-auto px-1 mb-3",role:"tablist"},Qo={class:"nav-item"},Jo={id:"themes",class:"list-group collapse"},Xo={class:"list-group-item border-bottom"},Zo=["onClick"],ea={class:"nav-item dropdown"},ta={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},sa={class:"d-none d-sm-inline"},oa={key:0},aa={key:1},la={class:"dropdown-menu dropdown-menu-end w-100 position-absolute","aria-labelledby":"dropdown01"},na={key:0},ra={key:1},ia={key:0,class:"fas fa-fw fa-angle-double-left"},da={key:1,class:"fas fa-fw fa-angle-double-right"},ua={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(n){const v=Ge(),k=Qe(),C=Xe(),_=$e(),D=_.user,{isActive:P,getCurrentBsTheme:Q,changeBsTheme:j,getBootswatch:I,changeTheme:G,navigate:le,collapseNavbar:N}=tt(),O=ge({user:D,username:D?D.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});me(async()=>{const r=O;r.bootswatch=await I();const c=Q(r.bsTheme);c&&(r.bsTheme=c,j(r.bsTheme));const w=localStorage.getItem("bootswatch-theme");w&&(r.currentTheme=w,G(w)),X();const d=document.getElementById("sideNav");d&&(W.value?d.classList.add("show"):d.classList.remove("show"))});const u=r=>{G(r),O.currentTheme=r,T("themes")},S=r=>{j(r),O.bsTheme=r,T("themes")},y=async()=>{_.logoutWithRedirect();const r=new ze(v.msalConfig);await r.initialize();const c={mainWindowRedirectUri:window.location.origin};try{await r.logoutRedirect(c)}catch(w){JSON.parse(JSON.stringify(w));debugger}},W=fe(!0),X=()=>{const r=localStorage.getItem("show-sideNav")||"true";W.value=r==="true"},f=()=>{localStorage.setItem("show-sideNav",W.value),We.getInstance("#sideNav").toggle()},b=()=>{W.value=!W.value,f()},Y=(r,c)=>{var w=k.path.startsWith(r);return w?c||"active":""},p=async(r,c)=>{T(c),await C.push(r)},T=r=>{const c=We.getInstance(`#${r}`);c&&c.hide()};return(r,c)=>{const w=ae("router-link");return t(),s("div",null,[e("div",Do,[e("div",Eo,[e("nav",qo,[z(w,{to:"/",class:"text-decoration-none w-100 text-center"},{default:F(()=>[e("h1",Bo,[c[9]||(c[9]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",No,m(n.appName),1)])]),_:1})]),e("ul",Ro,[e("li",Fo,[e("a",{href:"#",class:te([Y("/source-","text-bg-secondary"),"nav-link dropdown-toggle collapsed"]),"data-bs-toggle":"collapse","data-bs-target":"#sources","aria-expanded":"false","aria-controls":"sources"},c[10]||(c[10]=[e("span",{class:"fas fa-fw fa-boxes-packing"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Sources",-1)]),2),e("ul",zo,[e("li",{class:te([Y("/source-groups"),"list-group-item"])},[e("button",{onClick:c[0]||(c[0]=d=>p("/source-groups","sources")),class:"dropdown-item",role:"button"},c[11]||(c[11]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)]))],2),e("li",{class:te([Y("/source-locations"),"list-group-item"])},[e("button",{onClick:c[1]||(c[1]=d=>p("/source-locations","sources")),class:"dropdown-item",role:"button"},c[12]||(c[12]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)]))],2)])]),e("li",Go,[e("a",{href:"#",class:te([[Y("/videos","text-bg-secondary"),Y("/vod-sources","text-bg-secondary")],"nav-link dropdown-toggle collapsed"]),"data-bs-toggle":"collapse","data-bs-target":"#assets","aria-expanded":"false","aria-controls":"sources"},c[13]||(c[13]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Assets",-1)]),2),e("ul",jo,[e("li",{class:te([Y("/videos"),"list-group-item"])},[e("button",{onClick:c[2]||(c[2]=d=>p("/videos","assets")),class:"dropdown-item",role:"button"},c[14]||(c[14]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)]))],2),e("li",{class:te([Y("/vod-sources"),"list-group-item"])},[e("button",{onClick:c[3]||(c[3]=d=>p("/vod-sources","assets")),class:"dropdown-item",role:"button"},c[15]||(c[15]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VOD",-1)]))],2)])]),e("li",Yo,[e("a",{href:"#",class:te([[Y("/program-templates","text-bg-secondary"),Y("/channels","text-bg-secondary")],"nav-link dropdown-toggle collapsed"]),"data-bs-toggle":"collapse","data-bs-target":"#assembly","aria-expanded":"false","aria-controls":"sources"},c[16]||(c[16]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Assembly",-1)]),2),e("ul",Wo,[e("li",{class:te([Y("/program-templates"),"list-group-item"])},[e("button",{onClick:c[4]||(c[4]=d=>p("/program-templates","assembly")),class:"dropdown-item",role:"button"},c[17]||(c[17]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)]))],2),e("li",{class:te([Y("/channels"),"list-group-item"])},[e("button",{onClick:c[5]||(c[5]=d=>p("/channels","assembly")),class:"dropdown-item",role:"button"},c[18]||(c[18]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)]))],2)])])]),e("ul",Ko,[e("li",Qo,[c[21]||(c[21]=e("a",{href:"#",class:"nav-link dropdown-toggle collapsed","data-bs-toggle":"collapse","data-bs-target":"#themes","aria-expanded":"false","aria-controls":"themes"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",Jo,[e("li",Xo,[O.bsTheme==="dark"?(t(),s("button",{key:0,onClick:c[6]||(c[6]=d=>S("light")),class:"dropdown-item"},c[19]||(c[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Dark Mode ")]))):(t(),s("button",{key:1,onClick:c[7]||(c[7]=d=>S("dark")),class:"dropdown-item"},c[20]||(c[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Light Mode ")])))]),(t(!0),s(U,null,B(O.bootswatch.themes,d=>(t(),s("li",{class:te([{active:O.currentTheme===d.cssCdn},"list-group-item"])},[e("button",{onClick:i=>u(d.cssCdn),class:"dropdown-item"},m(d.name),9,Zo)],2))),256))])]),e("li",ea,[e("a",ta,[e("span",null,[c[22]||(c[22]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",sa,[o(D)?(t(),s("span",oa,m(o(D).name),1)):(t(),s("span",aa," Guest "))])])]),e("ul",la,[o(D)?(t(),s("li",na,[e("button",{onClick:c[8]||(c[8]=d=>y()),class:"dropdown-item"},c[23]||(c[23]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),K("Logout ")]))])):(t(),s("li",ra,[z(w,{to:"/accounts/login",class:"dropdown-item"},{default:F(()=>c[24]||(c[24]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),K("Login ")])),_:1})]))])])])])]),e("button",{id:"sideNavToggler",onClick:b,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"d-none btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"2rem",height:"2rem"}},[W.value?(t(),s("span",ia)):(t(),s("span",da))])])}}},ca={class:"footer sticky-bottom"},ma={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},fa={class:"container-md"},pa={class:"navbar-text small p-0"},va={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(n){tt();const v=Me("$config"),C=$e().user;let D=new Date().getFullYear();const P=ge({user:C,username:C?C.nameFull:"Guest",copyright:`2020-${D} ${v.appName}`});return me(async()=>{}),(Q,j)=>(t(),s("footer",ca,[e("div",ma,[e("div",fa,[e("span",pa,"©"+m(P.copyright),1)])])]))}},ga={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){et.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(n){n.message&&this.addMessage(n.title,n.message,n.type,n.options)},async addMessage(n,v,k,C={}){var _={id:this.count++,title:n,message:v,type:k,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};_=Object.assign({},_,C),this.messages.unshift(_),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),_.timeOut>0&&await this.startTimeout(_)},async startTimeout(n,v=0){const k=this,C=performance.now(),_=async()=>{n.animationFrame=requestAnimationFrame(async D=>{const P=D+v-C;if(!k.exists(n)||n.paused){cancelAnimationFrame(n.animationFrame);return}else if(P<n.timeOut){const Q=P/n.timeOut;n.progress=Q,await _()}else{n.progress=1,cancelAnimationFrame(n.animationFrame),k.remove(n);return}})};await _()},pauseProgress(n){n.timeOut<=0||(n.paused=!0)},async resumeProgress(n){n.timeOut<=0||(n.paused=!1,await this.startTimeout(n,n.timeOut*n.progress))},getCurrentProgress(n){return Math.round(n.progress*100)===100?100:n.progress*100},getIconClass(n){const v=n.type;let k="";switch(v){case"success":k="fas fa-fw fa-circle-check";break;case"info":k="fas fa-fw fa-circle-info";break;case"warning":k="fas fa-fw fa-circle-exclamation";break;case"danger":k="fas fa-fw fa-triangle-exclamation";break}let C=k;return n.rtl?"icon-right "+C:"icon-left "+C},async remove(n){const v=this.messages.findIndex(k=>k.id===n.id);this.messages.splice(v,1),typeof n.onClose=="function"&&await n.onClose()},exists(n){return this.messages.findIndex(k=>k.id===n.id)!==-1}}},ba={"aria-live":"polite","aria-atomic":"true",class:"position-static"},ya=["onMouseover","onMouseout"],$a={class:"me-auto text-white"},ha=["onClick"],wa={class:"toast-body"},_a=["innerHTML"],ka={key:0,class:"progress m-1",style:{height:"4px"}};function Sa(n,v,k,C,_,D){return t(),ve(be,null,{default:F(()=>[e("div",ba,[z(_e,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:F(()=>[(t(!0),s(U,null,B(_.messages,P=>(t(),s("div",{key:P.id,class:te(["toast show mb-2 ms-auto",`border-${P.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Q=>D.pauseProgress(P),onMouseout:Q=>D.resumeProgress(P)},[e("div",{class:te(["toast-header",`bg-${P.type}`])},[e("strong",$a,[e("i",{class:te([D.getIconClass(P),"me-1"])},null,2),K(m(P.title),1)]),P.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Q=>D.remove(P)},v[0]||(v[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ha)):H("",!0)],2),e("div",wa,[e("div",{innerHTML:P.message},null,8,_a)]),P.timeOut>0&&P.showProgress?(t(),s("div",ka,[e("div",{class:te(`bg-${P.type}`),style:dt({width:D.getCurrentProgress(P)+"%"})},null,6)])):H("",!0)],42,ya))),128))]),_:1})])]),_:1})}const Ta=xe(ga,[["render",Sa],["__scopeId","data-v-5272bd9a"]]),Ia={name:"AdminLayout",components:{TopNav:Ho,SideNav:ua,BottomNav:va},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Ma={class:"d-flex flex-row flex-nowrap vh-100"};function xa(n,v,k,C,_,D){const P=ae("Toasts"),Q=ae("SideNav"),j=ae("router-view"),I=ae("DialogsWrapper");return t(),s("div",Ma,[z(P),z(Q),z(j,{class:"d-flex flex-column w-100 h-100"}),z(I)])}const Ca=xe(Ia,[["render",xa]]),Va={class:"mt-2 container overflow-y-auto"},Pa={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Oa=["innerHTML"],Aa={class:"row mb-3"},La={class:"col-xl-4"},Ua={class:""},Ha=["id"],Da={key:1,class:"card card-header bg-warning-subtle mb-2"},Ea={class:"col-xl-8 overflow-x-auto mt-2 mt-xl-0"},qa={class:"d-flex flex-column align-items-start"},Ba=["src"],Na={class:""},Ra={class:"d-flex flex-row"},Fa={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},za={class:"text-center"},Ga=["src"],ja={key:0,class:"text-end"},Ya={class:"text-wrap text-truncate"},Wa={class:"overflow-y-auto"},Ka={class:"badge bg-info me-2"},Qa={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,isDirty:_,validations:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,generateReturnUrl:u,security:S}=ye({appTitle:"ARC AIO",pageTitle:"Dashboard"});Me("$config"),$e().user;const W=ge({item:null});fe("805630ed-f288-4f2f-83a4-6c71312f6970"),fe(),me(async()=>{await b()}),Ae(()=>{W.item.forEach(T=>{T.hls&&(T.hls.stopLoad(),T.hls.destroy())})});const X=async()=>{const T=W;if(!C.value)try{C.value=!0;const r="/api/v1/epg/";T.item=[],await G.get(r).then(c=>{T.item=c.data}),T.item.forEach(c=>{Y(c)})}catch(r){j.value=le.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{C.value=!1}},f=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await G.get("/api/v1/channels/reset/").then(c=>{N.success("Reset All Data","Reset data was successful.")})}catch(r){j.value=le.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{C.value=!1}},b=async()=>{await X()},Y=T=>{if(T.manifestUrl&&Hls.isSupported()){p(T);var r=document.getElementById(`video-${T.id}`);if(!r)return;T.hls&&(T.hsl.stopLoad(),T.hls.destroy());let c=T.manifestUrl;T.hls=le.createHlsStream(r,c);return}},p=T=>{T.outputs&&T.outputs.forEach(c=>{if(c.hls){debugger;c.hls.detachMedia(),c.hls.destroy(),delete c.hls}c.playbackConfigurations.forEach(w=>{if(w.hls){debugger;w.hls.detachMedia(),w.hls.destroy(),delete w.hls}})})};return(T,r)=>{const c=ae("PageHeader"),w=ae("router-link");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(c,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(k)},{default:F(()=>[e("div",null,[e("button",{onClick:r[0]||(r[0]=d=>f()),class:"ms-2 btn btn-danger"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),K("Reset All Data ")])),e("button",{onClick:r[1]||(r[1]=d=>b()),class:"ms-2 btn btn-secondary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Va,[o(j)?(t(),s("div",Pa,[r[4]||(r[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(j))},null,8,Oa)])):H("",!0),(t(!0),s(U,null,B(W.item,d=>(t(),s("div",null,[e("div",Aa,[e("div",La,[e("div",Ua,[d.manifestUrl?(t(),s("video",{key:0,id:`video-${d.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,Ha)):(t(),s("div",Da," Channel not yet published "))])]),e("div",Ea,[e("div",qa,[e("div",null,[e("h4",null,[e("img",{src:d.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Ba),z(w,{to:`${n.urlViewChannel}/${d.id}/${o(u)()}`},{default:F(()=>[K(m(d.title),1)]),_:2},1032,["to"])])]),e("div",Na,[e("div",Ra,[(t(!0),s(U,null,B(d.programs,i=>(t(),s("div",Fa,[e("div",za,[e("img",{src:i.image,class:"img-fluid border",style:{height:"64px"}},null,8,Ga)]),d.playbackMode==="LINEAR"?(t(),s("div",ja,m(o(le).moment(i.since).format("hh:mm a"))+"-"+m(o(le).moment(i.till).format("hh:mm a")),1)):H("",!0),e("div",Ya,m(i.title),1),e("div",Wa,[(t(!0),s(U,null,B(i.genres,l=>(t(),s("span",Ka,m(l),1))),256))])]))),256))])])])])])]))),256))])])]),_:1})}}};function Ue(n){if(!n.cacheKey)throw Error("Cache Key required.");if(!n.baseUrl)throw Error("Base Url required.");const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,closeWithReturnUrl:N,generateReturnUrl:O,security:u}=ye({appTitle:n.appTitle,pageTitle:n.pageTitle}),S=JSON.parse(JSON.stringify(n.filter));S.pageIndex=S.pageIndex||1,S.pageSize=S.pageSize||5,S.sortField=S.sortField||"",S.sortOrder=S.sortOrder||1,S.updateUrl=S.updateUrl||!1,S.items=S.items||[],S.query=S.query||{},S.query.criteria=S.query.criteria||"";const y=fe(S),W=()=>{var d;if(C.value){console.log("Paginated search is currently busy.");return}const r=JSON.parse(localStorage.getItem(n.cacheKey))||{},c=new URLSearchParams(window.location.search),w=y.value;w.query.criteria=c.get("c")||r.criteria||w.query.criteria||"",w.pageIndex=parseInt(c.get("p"),10)||r.pageIndex||w.pageIndex||1,w.pageSize=parseInt(c.get("s"),10)||r.pageSize||w.pageSize||5,w.sortField=c.get("sf")||r.sortField||w.sortField||"",w.sortOrder=parseInt(c.get("so"),10)||r.sortOrder||w.sortOrder||1,w.visible=r.visible||w.visible,(d=n.initializeFilter)==null||d.call(n,y,n.cacheKey)},X=()=>{if(n.getQuery)return n.getQuery(y.value);{const r=y.value;return["?c=",encodeURIComponent(r.query.criteria),"&p=",r.pageIndex,"&s=",r.pageSize,"&sf=",r.sortField,"&so=",r.sortOrder].join("")}},f=()=>{if(n.saveQuery)n.saveQuery(y.value,n.cacheKey);else{const r=y.value;localStorage.setItem(n.cacheKey,JSON.stringify({criteria:r.query.criteria,pageIndex:r.pageIndex,pageSize:r.pageSize,sortField:r.sortField,sortOrder:r.sortOrder,visible:r.visible}))}};return{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,closeWithReturnUrl:N,generateReturnUrl:O,security:u,filter:y,initializeFilter:W,getQuery:X,saveQuery:f,search:async r=>{var w;let c=y.value;if(C.value){console.log("Paginated search is currently busy.");return}r>0&&(c.pageIndex=r);try{C.value=!0,P.value="";const d=X();c.selected=null,await j(`${n.baseUrl}/${d}`).then(async i=>{var a;Array.isArray(i.data)?c.items=i.data:c=Object.assign(c,i.data);let l=location.pathname;l.endsWith("/")?l+=d:l+="/"+d,c.updateUrl&&window.history.replaceState(d,`${v}-search`,l),c.items.forEach(L=>{L.expand=!1}),f(),(a=n.successAction)==null||a.call(n,y.value)})}catch(d){if(localStorage.removeItem(n.cacheKey),n.failAction)n.failAction(d);else{const i=I.getErrorMessageAsHtml(d);P.value=i,G.error("Error Occured",i)}}finally{C.value=!1,(w=n.finalAction)==null||w.call(n)}},getRowNumber:r=>{const c=y.value;return(c.pageIndex-1)*c.pageSize+(r+1)},setSelected:r=>{const c=y.value;c.selected&&r&&c.selected===r?c.selected=null:(c.selected&&(c.selected.expand=!1),c.selected=r,c.selected.expand=!0)},isSelected:r=>{const c=y.value;return r===null||c.selected===null?!1:r===c.selected}}}const Ja=["disabled"],Xa={class:"row row-cols-1 row-cols-sm-3"},Za={class:"col"},el={class:"form-floating mb-2"},tl={key:0,class:"d-block invalid-feedback"},sl={class:"col"},ol={class:"form-floating"},al={class:"col"},ll={class:"form-floating"},nl={class:"col"},rl={class:"form-floating mb-2"},il={class:"row row-cols-1 row-cols-sm-2"},dl={class:"col-sm-8"},ul={class:"ps-2"},cl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border"},ml={class:"col"},fl={class:"form-check"},pl=["onUpdate:modelValue","id"],vl=["for"],gl={class:"col-sm-4"},bl={class:"border p-2"},yl={class:"form-check"},$l=["onUpdate:modelValue","id"],hl=["for"],wl={class:"table-responsive mt-2"},_l={class:"text-end"},kl={class:"table table-sm mb-0 mt-2"},Sl={class:"align-middle"},Tl={class:"text-center"},Il=["onUpdate:modelValue"],Ml=["onUpdate:modelValue"],xl=["onUpdate:modelValue"],Cl={class:"text-start"},Vl=["onClick"],Pl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Video"}),O=n,u=ge({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:I.moment().format("YYYY-MM-DD"),formats:[]}}),S={item:{title:{title:ne.withMessage("Title is required.",ie),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ne.withMessage("Duration is required.",ie),$autoDirty:!0,$lazy:!0},dateReleased:{title:ne.withMessage("Date Released is required.",ie),$autoDirty:!0,$lazy:!0}}},y=Se(S,u),W=Ie(()=>{const p=I.moment;if(u.durationTime&&u.durationTime!=="00:00:00"&&I.isValidTime(u.durationTime)){const T=p().startOf("day"),r=T.format("YYYY-MM-DD ")+u.durationTime,w=p(r).subtract(T);return u.item.durationInMillis=w.valueOf(),u.item.durationInMillis}return 0});me(async()=>{await f()});const X=async()=>{const p=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const r=I.clone(p.item);r.durationInMillis=W.value;const c=I.moment(p.item.dateReleased).utc(!0).format();r.dateReleased=c;const w=u.lookups.genres.filter(i=>i.selected).map(i=>i.id);r.genres=w;const d=u.lookups.categories.filter(i=>i.selected).map(i=>i.id);r.categories=d;debugger;await j.post("/api/v1/videos/",r).then(i=>{G.success("Add Video","Video added",{onClose:async()=>{const l=`${O.urlView}/${i.data}`;await Q.push(l)}})})}catch(r){P.value=I.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{C.value=!1}},f=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(p=>{const r=p.data.filter(c=>c.id!==0);u.lookups.genres=r})}catch(p){P.value=I.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},b=()=>{const p={format:"HLS",serverUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",path:"/ads/10seconds/10seconds.m3u8"};u.item.formats.push(p)},Y=p=>{u.item.formats.splice(p,1)};return(p,T)=>{const r=ae("router-link"),c=ae("PageHeader"),w=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(c,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:T[0]||(T[0]=d=>X()),class:"btn btn-primary"},T[6]||(T[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ja),z(r,{to:O.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>T[7]||(T[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(w,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[e("div",null,[e("div",Xa,[e("div",Za,[e("div",el,[R(e("input",{"onUpdate:modelValue":T[1]||(T[1]=d=>u.item.title=d),id:"name",class:te([o(I).getValidFeedbackCss(u.item.title),"form-control"]),placeholder:"Title"},null,2),[[ee,u.item.title]]),T[8]||(T[8]=e("label",{for:"title",class:""},"Title",-1)),o(y).item.title.$error?(t(),s("div",tl,[(t(!0),s(U,null,B(o(y).item.title.$errors,d=>(t(),s("div",{key:d.$uid},m(d.$message),1))),128))])):H("",!0)])]),e("div",sl,[e("div",ol,[R(e("input",{"onUpdate:modelValue":T[2]||(T[2]=d=>u.item.dateReleased=d),type:"date",step:"1",id:"dateReleased",class:te([o(I).getValidFeedbackCss(u.item.dateReleased),"form-control"])},null,2),[[ee,u.item.dateReleased]]),T[9]||(T[9]=e("label",{for:"dateReleased",class:""},"Date Released",-1))])]),e("div",al,[e("div",ll,[R(e("input",{"onUpdate:modelValue":T[3]||(T[3]=d=>u.durationTime=d),type:"time",step:"1",id:"durationTime",class:te([o(I).getValidFeedbackCss(u.item.durationTime),"form-control"])},null,2),[[ee,u.durationTime]]),T[10]||(T[10]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",nl,[e("div",rl,[R(e("textarea",{"onUpdate:modelValue":T[4]||(T[4]=d=>u.item.description=d),id:"name",class:te([o(I).getValidFeedbackCss(u.item.description),"form-control"]),placeholder:"Description",style:{height:"5rem"}},null,2),[[ee,u.item.description]]),T[11]||(T[11]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",il,[e("div",dl,[T[12]||(T[12]=e("b",null,"Genres",-1)),e("div",ul,[e("div",cl,[(t(!0),s(U,null,B(u.lookups.genres,d=>(t(),s("div",ml,[e("div",fl,[R(e("input",{"onUpdate:modelValue":i=>d.selected=i,class:"form-check-input",type:"checkbox",id:d.name},null,8,pl),[[De,d.selected]]),e("label",{class:"form-check-label",for:d.name},m(d.name),9,vl)])]))),256))])])]),e("div",gl,[T[13]||(T[13]=e("b",null,"Categories",-1)),e("div",bl,[(t(!0),s(U,null,B(u.lookups.categories,d=>(t(),s("div",yl,[R(e("input",{"onUpdate:modelValue":i=>d.selected=i,class:"form-check-input",type:"checkbox",id:d.name},null,8,$l),[[De,d.selected]]),e("label",{class:"form-check-label",for:d.name},m(d.name),9,hl)]))),256))])])]),e("div",wl,[e("div",_l,[e("button",{onClick:T[5]||(T[5]=d=>b()),class:"btn btn-outline-primary btn-sm"},T[14]||(T[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",kl,[T[17]||(T[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,B(u.item.formats,(d,i)=>(t(),s("tr",Sl,[e("td",Tl,m(i+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":l=>d.format=l,class:"form-control"},T[15]||(T[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,Il),[[pe,d.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":l=>d.serverUrl=l,type:"text",class:"form-control"},null,8,Ml),[[ee,d.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":l=>d.path=l,type:"text",class:"form-control"},null,8,xl),[[ee,d.path]])]),e("td",Cl,[e("button",{onClick:l=>Y(i),class:"btn btn-outline-warning btn-sm"},T[16]||(T[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Vl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ol=["disabled"],Al={class:"row row-cols-1 row-cols-sm-3"},Ll={class:"col"},Ul={class:"form-floating mb-2"},Hl={key:0,class:"d-block invalid-feedback"},Dl={class:"col"},El={class:"form-floating"},ql={class:"col"},Bl={class:"form-floating"},Nl={class:"col"},Rl={class:"form-floating mb-2"},Fl={class:"row row-cols-1 row-cols-sm-2"},zl={class:"col-sm-8"},Gl={class:"ps-2"},jl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border"},Yl={class:"col"},Wl={class:"form-check"},Kl=["onUpdate:modelValue","id"],Ql=["for"],Jl={class:"col-sm-4"},Xl={class:"border p-2"},Zl={class:"form-check"},en=["onUpdate:modelValue","id"],tn=["for"],sn={class:"table-responsive mt-2"},on={class:"text-end"},an={class:"table table-sm mb-0 mt-2 border1"},ln={class:"align-middle"},nn={class:"text-center"},rn=["onUpdate:modelValue"],dn=["value"],un=["onUpdate:modelValue"],cn=["onUpdate:modelValue"],mn={class:"text-end"},fn=["onClick"],pn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Edit Video"}),O=n,u=ge({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),S={item:{title:{title:ne.withMessage("title is required.",ie),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ne.withMessage("durationInMillis is required.",ie),$autoDirty:!0,$lazy:!0},dateReleased:{title:ne.withMessage("Date Released is required.",ie),$autoDirty:!0,$lazy:!0}}},y=Se(S,u),W=Ie(()=>{const r=I.moment;if(u.durationTime&&u.durationTime!=="00:00:00"&&I.isValidTime(u.durationTime)){const c=r().startOf("day"),w=c.format("YYYY-MM-DD ")+u.durationTime,i=r(w).subtract(c);return u.item.durationInMillis=i.valueOf(),u.item.durationInMillis}return 0});me(async()=>{await f(),await b(),await X()});const X=async()=>{try{await j.get(`/api/v1/videos/${O.id}/`).then(r=>{u.item=r.data;const c=I.moment(u.item.dateReleased).format("YYYY-MM-DD");u.item.dateReleased=c;const w=u.lookups.genres,d=u.item.genres.map(a=>a.genre);w.forEach(a=>{a.selected=d.includes(a.id)});const i=u.lookups.categories,l=u.item.categories.map(a=>a.category);i.forEach(a=>{a.selected=l.includes(a.id)})})}catch(r){P.value=I.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},f=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(r=>{const w=r.data.filter(d=>d.id!==0);u.lookups.genres=w})}catch(r){P.value=I.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},b=async()=>{try{await j.get("/api/v1/lookups/video-formats/").then(r=>{const w=r.data.filter(d=>d.id!==0);u.lookups.formats=w})}catch(r){P.value=I.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},Y=async()=>{const r=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const w=I.clone(r.item);w.durationInMillis=W.value;const d=I.moment(r.item.dateReleased).utc(!0).format();w.dateReleased=d;const i=u.lookups.genres.filter(a=>a.selected).map(a=>a.id);w.genres=i;const l=u.lookups.categories.filter(a=>a.selected).map(a=>a.id);w.categories=l;debugger;await j.put("/api/v1/videos/",w).then(a=>{G.success("Edit Video","Video edited.",{onClose:async()=>{const L=`${O.urlView}/${O.id}`;await Q.push(L)}})})}catch(w){P.value=I.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{C.value=!1}},p=()=>{const r={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};u.item.formats.push(r)},T=r=>{u.item.formats.splice(r,1)};return(r,c)=>{const w=ae("router-link"),d=ae("PageHeader"),i=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:c[0]||(c[0]=l=>Y()),class:"btn btn-primary"},c[6]||(c[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ol),e("button",{onClick:X,class:"btn btn-secondary ms-2"},c[7]||(c[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(w,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-2"},{default:F(()=>c[8]||(c[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(i,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[e("div",null,[e("div",Al,[e("div",Ll,[e("div",Ul,[R(e("input",{"onUpdate:modelValue":c[1]||(c[1]=l=>u.item.title=l),id:"name",class:te([o(I).getValidFeedbackCss(u.item.title),"form-control"]),placeholder:"Title"},null,2),[[ee,u.item.title]]),c[9]||(c[9]=e("label",{for:"title",class:""},"Title",-1)),o(y).item.title.$error?(t(),s("div",Hl,[(t(!0),s(U,null,B(o(y).item.title.$errors,l=>(t(),s("div",{key:l.$uid},m(l.$message),1))),128))])):H("",!0)])]),e("div",Dl,[e("div",El,[R(e("input",{"onUpdate:modelValue":c[2]||(c[2]=l=>u.item.dateReleased=l),type:"date",step:"1",id:"dateReleased",class:te([o(I).getValidFeedbackCss(u.item.dateReleased),"form-control"])},null,2),[[ee,u.item.dateReleased]]),c[10]||(c[10]=e("label",{for:"dateReleased",class:""},"Duration Time",-1))])]),e("div",ql,[e("div",Bl,[R(e("input",{"onUpdate:modelValue":c[3]||(c[3]=l=>u.durationTime=l),type:"time",step:"1",id:"durationTime",class:te([o(I).getValidFeedbackCss(u.item.ddurationTime),"form-control"])},null,2),[[ee,u.durationTime]]),c[11]||(c[11]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Nl,[e("div",Rl,[R(e("textarea",{"onUpdate:modelValue":c[4]||(c[4]=l=>u.item.description=l),id:"name",class:"form-control is-valid",placeholder:"Description",style:{height:"5rem"}},null,512),[[ee,u.item.description]]),c[12]||(c[12]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",Fl,[e("div",zl,[c[13]||(c[13]=e("b",null,"Genres",-1)),e("div",Gl,[e("div",jl,[(t(!0),s(U,null,B(u.lookups.genres,l=>(t(),s("div",Yl,[e("div",Wl,[R(e("input",{"onUpdate:modelValue":a=>l.selected=a,class:"form-check-input",type:"checkbox",id:l.name},null,8,Kl),[[De,l.selected]]),e("label",{class:"form-check-label",for:l.name},m(l.name),9,Ql)])]))),256))])])]),e("div",Jl,[c[14]||(c[14]=e("b",null,"Categories",-1)),e("div",Xl,[(t(!0),s(U,null,B(u.lookups.categories,l=>(t(),s("div",Zl,[R(e("input",{"onUpdate:modelValue":a=>l.selected=a,class:"form-check-input",type:"checkbox",id:l.name},null,8,en),[[De,l.selected]]),e("label",{class:"form-check-label",for:l.name},m(l.name),9,tn)]))),256))])])]),e("div",sn,[e("div",on,[e("button",{onClick:c[5]||(c[5]=l=>p()),class:"btn btn-outline-primary btn-sm"},c[15]||(c[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",an,[c[17]||(c[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,B(u.item.formats,(l,a)=>(t(),s("tr",ln,[e("td",nn,m(a+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":L=>l.format=L,class:"form-control"},[(t(!0),s(U,null,B(u.lookups.formats,L=>(t(),s("option",{value:L.id},m(L.name),9,dn))),256))],8,rn),[[pe,l.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":L=>l.serverUrl=L,type:"text",class:"form-control"},null,8,un),[[ee,l.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":L=>l.path=L,type:"text",class:"form-control"},null,8,cn),[[ee,l.path]])]),e("td",mn,[e("button",{onClick:L=>T(a),class:"btn btn-outline-warning btn-sm"},c[16]||(c[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,fn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},vn={class:"ms-2"},gn={class:"input-group"},bn=["value"],yn={class:"ms-1"},$n={class:"input-group"},hn={class:"ms-1"},wn={class:"input-group"},_n={class:"table-responsive border shadow-sm"},kn={class:"table table-hover mb-0"},Sn=["textContent"],Tn={class:"d-flex flex-column flex-md-row justify-content-start"},In={class:"mt-1"},Mn=["src"],xn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Cn={class:"ms-md-2"},Vn={key:0},Pn={class:"badge bg-primary me-1"},On={key:1},An={class:"badge bg-info me-1"},Ln={class:"text-center"},Un={class:"text-end"},Hn=["onClick"],Dn={key:0,class:"fas fa-fw fa-chevron-circle-up"},En={key:1,class:"fas fa-fw fa-chevron-circle-down"},qn={key:0},Bn={colspan:"999"},Nn={class:""},Rn={class:"d-flex flex-column flex-md-row justify-content-start"},Fn={class:"col mb-2"},zn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},Gn={class:"col col-lg-auto mb-2"},jn={key:0},Yn={class:"badge bg-secondary me-1"},Wn="/api/v1/videos/search",Kn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(n){Me("$config");const k=$e().user,{appTitle:C,pageTitle:_,busy:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,security:u,filter:S,initializeFilter:y,getQuery:W,saveQuery:X,search:f,getRowNumber:b,setSelected:Y,isSelected:p}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Videos",cacheKey:`${k==null?void 0:k.userId}/videos/search`,baseUrl:Wn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(r,c)=>{const w=r.value,d=new URLSearchParams(window.location.search),i=JSON.parse(localStorage.getItem(c))||{};w.query.genre=d.get("genre")||i.genre||w.query.genre||0,w.query.category=d.get("category")||i.category||w.query.category||0},getQuery:r=>["?c=",encodeURIComponent(r.query.criteria),"&p=",r.pageIndex,"&s=",r.pageSize,"&sf=",r.sortField,"&so=",r.sortOrder,"&genre=",r.query.genre,"&category=",r.query.category].join(""),saveQuery:(r,c)=>{localStorage.setItem(c,JSON.stringify({criteria:r.query.criteria,pageIndex:r.pageIndex,pageSize:r.pageSize,sortField:r.sortField,sortOrder:r.sortOrder,visible:r.visible,genre:r.query.genre,category:r.query.category}))}});me(async()=>{y(),await T(),await f()});const T=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(r=>{const c=r.data;S.value.lookups.genres=c})}catch(r){j.value=le.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}};return(r,c)=>{const w=ae("router-link"),d=ae("PageHeader"),i=ae("m-pagination"),l=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:F(()=>[z(w,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>c[5]||(c[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",vn,[e("div",gn,[c[6]||(c[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":c[0]||(c[0]=a=>o(S).query.genre=a),class:"form-select"},[(t(!0),s(U,null,B(o(S).lookups.genres,a=>(t(),s("option",{value:a.id},m(a.name),9,bn))),256))],512),[[pe,o(S).query.genre]])])]),e("div",yn,[e("div",$n,[c[8]||(c[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":c[1]||(c[1]=a=>o(S).query.category=a),class:"form-select"},c[7]||(c[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[pe,o(S).query.category]])])]),e("div",hn,[e("div",wn,[R(e("input",{"onUpdate:modelValue":c[2]||(c[2]=a=>o(S).query.criteria=a),onKeyup:c[3]||(c[3]=Le(a=>o(f)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[ee,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[4]||(c[4]=a=>o(f)(1))},c[9]||(c[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(l,{errorMessage:o(j)},{default:F(()=>[e("div",_n,[e("table",kn,[c[14]||(c[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(S).items,(a,L)=>(t(),s(U,{key:a.videoId},[e("tr",null,[e("td",{textContent:m(o(b)(L)),class:"text-center"},null,8,Sn),e("td",null,[e("div",Tn,[e("div",null,[a.thumbnails.length>0?(t(!0),s(U,{key:0},B(a.thumbnails,M=>(t(),s("div",In,[e("img",{src:M.url,class:"img-fuild border",width:"128"},null,8,Mn)]))),256)):(t(),s("img",xn))]),e("div",Cn,[z(w,{to:`${n.urlView}/${a.videoId}`,class:"d-inline-block text-wrap link-offset-2"},{default:F(()=>[K(m(a.title),1)]),_:2},1032,["to"]),e("div",null,[a.categories.length>0?(t(),s("div",Vn,[(t(!0),s(U,null,B(a.categories,M=>(t(),s("span",Pn,m(M.categoryName),1))),256))])):H("",!0),a.genres.length>0?(t(),s("div",On,[(t(!0),s(U,null,B(a.genres,M=>(t(),s("span",An,m(M.genreName),1))),256))])):H("",!0)])])])]),e("td",Ln,m(o(le).moment.utc(a.durationInMillis).format("HH:mm:ss")),1),e("td",Un,[e("button",{onClick:M=>a.expand=!a.expand,class:te([[a.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[a.expand?(t(),s("span",Dn)):(t(),s("span",En))],10,Hn)])]),a.expand?(t(),s("tr",qn,[c[13]||(c[13]=e("td",null,null,-1)),e("td",Bn,[e("div",Nn,[e("div",Rn,[e("div",Fn,[c[10]||(c[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,m(a.description),1)]),e("div",zn,[c[11]||(c[11]=e("label",{class:"form-label"},"Date Released",-1)),e("div",null,m(o(rt).utc(a.dateReleased).format("l")),1)]),e("div",Gn,[c[12]||(c[12]=e("label",{class:"form-label"},"Formats",-1)),a.formats.length>0?(t(),s("div",jn,[(t(!0),s(U,null,B(a.formats,M=>(t(),s("span",Yn,m(M.formatName),1))),256))])):H("",!0)])])])])])):H("",!0)],64))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(i,{filter:o(S),search:o(f),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Qn={key:0},Jn={class:"nav nav-tabs",id:"myTab",role:"tablist"},Xn={class:"nav-item",role:"presentation"},Zn={class:"nav-item",role:"presentation"},er={class:"nav-item",role:"presentation"},tr={class:"nav-item",role:"presentation"},sr={class:"tab-content",id:"myTabContent"},or={class:""},ar={class:"row row-cols-1 row-cols-sm-2"},lr={class:"col"},nr=["id"],rr={class:"col"},ir={class:"col"},dr={class:"form-floating mb-2"},ur={class:"row row-cols-1 row-cols-sm-2"},cr={class:"col"},mr={class:"form-floating mb-2"},fr={class:"col"},pr={class:"form-floating mb-2"},vr={class:"col"},gr={class:"form-floating mb-2"},br={class:"mt-1"},yr={class:"badge bg-info me-1"},$r={class:"badge bg-primary me-1"},hr={class:""},wr={class:"table-responsive border"},_r={class:"table table-hover mb-0"},kr={class:"table-group-divider"},Sr={class:"align-middle"},Tr={class:"text-center"},Ir={class:""},Mr={class:"text-end"},xr={class:"table-responsive border mt-2"},Cr={class:"table table-hover mb-0 caption-top"},Vr={class:""},Pr={class:"table-responsive"},Or={class:"table table-hover mb-0 caption-top"},Ar={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){const v=n,{appTitle:k,pageTitle:C,busy:_,isDirty:D,validations:P,infoMessage:Q,warningMessage:j,errorMessage:I,router:G,axios:le,utils:N,toasts:O,close:u,closeWithReturnUrl:S,generateReturnUrl:y,security:W}=ye({appTitle:"Arcadian-FAST",pageTitle:"View Video"});Me("$config");const X=$e();X.user;const f=ge({user:X.user,item:null,hls:null}),b=fe();me(async()=>{await r(),b.value=N.getPageTab("video")||"information-tab"}),Ae(()=>{f.hls&&(f.hls.stopLoad(),f.hls.destroy())});const Y=i=>{N.setPageTab("video",i),b.value=i},p=i=>i!==b.value?"":"active",T=i=>i!==b.value?"":"show active",r=async()=>{const i=f;if(!_.value)try{_.value=!0,I.value="",f.item=null;const l=`/api/v1/videos/${v.id}/`;await le.get(l).then(a=>{i.item=a.data,i.item.duration=N.moment.utc(i.item.durationInMillis).format("HH:mm:ss"),i.item.dateReleased=N.moment.utc(i.item.dateReleased).format("ll")}),w()}catch(l){I.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{await r()},w=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),f.hls&&f.hls.destroy();const l=`video-${f.item.videoId}`;var i=document.getElementById(l);const a=f.item.formats.find(M=>M.formatName==="HLS"),L=a.serverUrl+a.path;f.hls=N.createHlsStream(i,L,!1),f.hls.startLoad(-1)}},d=async()=>{if(!_.value)try{_.value=!0,I.value="";const i=`/api/v1/videos/${v.id}/get-blank-frames/`;await le.post(i).then(l=>{}),_.value=!1,await c()}catch(i){I.value=N.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{_.value=!1}};return(i,l)=>{const a=ae("router-link"),L=ae("PageHeader"),M=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(L,{"page-icon":"fas fa-fw fa-video",pageTitle:o(C)},{default:F(()=>[z(a,{to:`${n.urlEdit}/${n.id}`,class:"btn btn-primary ms-1"},{default:F(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=g=>c()),class:"ms-2 btn btn-secondary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[1]||(l[1]=g=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(M,{errorMessage:o(I)},{default:F(()=>[f.item?(t(),s("div",Qn,[e("div",null,[e("ul",Jn,[e("li",Xn,[e("button",{onClick:l[2]||(l[2]=g=>Y("information-tab")),class:te([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Zn,[e("button",{onClick:l[3]||(l[3]=g=>Y("formats-tab")),class:te([p("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",er,[e("button",{onClick:l[4]||(l[4]=g=>Y("blankFrames-tab")),class:te([p("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",tr,[e("button",{onClick:l[5]||(l[5]=g=>Y("vodSources-tab")),class:te([p("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",sr,[e("div",{class:te([T("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",or,[e("div",ar,[e("div",lr,[e("video",{id:`video-${f.item.videoId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,nr)]),e("div",rr,[e("div",ir,[e("div",dr,[R(e("input",{"onUpdate:modelValue":l[6]||(l[6]=g=>f.item.title=g),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[ee,f.item.title]]),l[14]||(l[14]=e("label",{for:"title"},"Title",-1))])]),e("div",ur,[e("div",cr,[e("div",mr,[R(e("input",{"onUpdate:modelValue":l[7]||(l[7]=g=>f.item.dateReleased=g),type:"text",class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[ee,f.item.dateReleased]]),l[15]||(l[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",fr,[e("div",pr,[R(e("input",{"onUpdate:modelValue":l[8]||(l[8]=g=>f.item.duration=g),type:"text",class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},null,512),[[ee,f.item.duration]]),l[16]||(l[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",vr,[e("div",gr,[R(e("textarea",{"onUpdate:modelValue":l[9]||(l[9]=g=>f.item.description=g),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[ee,f.item.description]]),l[17]||(l[17]=e("label",{for:"description"},"Description",-1))])]),e("div",br,[(t(!0),s(U,null,B(f.item.genres,g=>(t(),s("span",yr,m(g.genreName),1))),256)),(t(!0),s(U,null,B(f.item.categories,g=>(t(),s("span",$r,m(g.categoryName),1))),256))])])])])],2),e("div",{class:te([T("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",hr,[e("div",wr,[e("table",_r,[l[18]||(l[18]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",kr,[(t(!0),s(U,null,B(f.item.formats,(g,q)=>(t(),s("tr",Sr,[e("td",Tr,m(q+1),1),e("td",null,m(g.formatName),1),e("td",null,m(g.serverUrl),1),e("td",null,m(g.path),1)]))),256))])])])])],2),e("div",{class:te([T("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",Ir,[e("div",null,[e("div",Mr,[e("button",{onClick:l[10]||(l[10]=g=>d()),class:"btn btn-outline-primary btn-sm"},l[19]||(l[19]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),K("Process ")]))]),e("div",xr,[e("table",Cr,[l[20]||(l[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.blankFrames,(g,q)=>(t(),s("tr",{key:g.videoBlankFrameId},[e("td",null,m(q+1),1),e("td",null,m(o(N).moment.utc(g.startInMillis).format("HH:mm:ss")),1),e("td",null,m(o(N).moment.utc(g.endInMillis).format("HH:mm:ss")),1),e("td",null,m(o(N).moment.utc(g.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[ke,f.item.blankFrames.length>0]])])])])])],2),e("div",{class:te([T("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Vr,[e("div",Pr,[e("table",Or,[l[21]||(l[21]=e("caption",null,"VOD Sources",-1)),l[22]||(l[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.vodSources,(g,q)=>(t(),s("tr",{key:g.vodSourceId},[e("td",null,m(q+1),1),e("td",null,[z(a,{to:`${v.urlViewVodSource}/${encodeURIComponent(g.vodSourceId)}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(g.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[ke,f.item.vodSources.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Lr=["disabled"],Ur={class:"form-floating mb-2"},Hr={key:0,class:"d-block invalid-feedback"},Dr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Source Group"}),O=n,u=ge({lookups:{},item:{name:null}}),S={item:{name:{required:ne.withMessage("name is required.",ie),$autoDirty:!0,$lazy:!0}}},y=Se(S,u);me(async()=>{});const W=async()=>{const X=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const b=I.clone(X.item);await j.post("/api/v1/sourcegroups/",b).then(Y=>{G.success("Add Source Group","Source group added.",{onClose:async()=>{const p=`${O.urlView}/${Y.data}`;await Q.push(p)}})})}catch(b){P.value=I.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{C.value=!1}};return(X,f)=>{const b=ae("router-link"),Y=ae("PageHeader"),p=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(Y,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:f[0]||(f[0]=T=>W()),class:"btn btn-primary"},f[2]||(f[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Lr),z(b,{to:O.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(p,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[e("div",null,[e("div",Ur,[R(e("input",{"onUpdate:modelValue":f[1]||(f[1]=T=>u.item.name=T),type:"text",class:te([o(I).getValidFeedbackCss(u.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[ee,u.item.name]]),f[4]||(f[4]=e("label",{for:"name"},"Name",-1)),o(y).item.name.$error?(t(),s("div",Hr,[(t(!0),s(U,null,B(o(y).item.name.$errors,T=>(t(),s("div",{key:T.$uid},m(T.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Er={key:0,class:"d-flex justify-content-end"},qr=["disabled"],Br={key:0},Nr={class:"row row-cols-1 row-cols-sm-2"},Rr={class:"col"},Fr={class:"form-floating mb-2"},zr={key:0,class:"d-block invalid-feedback"},Gr={class:"col"},jr={class:"form-floating mb-2"},Yr={key:0,class:"d-block invalid-feedback"},Wr={class:"row row-cols-sm-2"},Kr={class:"col"},Qr={class:"form-floating mb-2"},Jr={class:"form-floating mb-2"},Xr={key:0,class:"d-block invalid-feedback"},Zr={class:"form-floating mb-2"},ei={key:0,class:"d-block invalid-feedback"},ti={class:"col"},si={class:"form-floating mb-2"},st={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),O=n,u=ge({editorElementId:"editor",htmlContent:"",item:null}),S={item:{title:{required:ne.withMessage("Title is required.",ie),$autoDirty:!0,$lazy:!0},eidr:{required:ne.withMessage("eidr is required.",ie),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ne.withMessage("eidrPrefix is required.",ie),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ne.withMessage("Content is required.",ie),$autoDirty:!0,$lazy:!0}},y=Se(S,u);me(async()=>{await f()});const W=()=>{const Y=u;var p=document.getElementById(Y.editorElementId);p.innerHTML=Y.htmlContent},X=Y=>{const p=u;p.htmlContent=Y.target.innerHTML;var T=document.getElementById(p.editorElementId);T.value=p.htmlContent},f=async()=>{const Y=u;if(!C.value)try{C.value=!0,u.item=null,await j.get(`/api/v1/movies/${O.id}`).then(p=>{Y.item=p.data,Y.htmlContent=Y.item.description}),W()}catch(p){P.value=I.getErrorMessageAsHtml(p)}finally{C.value=!1}},b=async()=>{const Y=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const T=I.clone(Y.item);T.description=Y.htmlContent,await j.put("/api/v1/movies",T).then(r=>{G.success("Edit Movie","Movie edited",{onClose:async()=>{const c=`${O.urlView}/${O.id}`;await Q.push(c)}})})}catch(T){P.value=I.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{C.value=!1}};return(Y,p)=>{const T=ae("router-link"),r=ae("PageHeader"),c=ae("PageBody");return t(),s("div",null,[z(r,{"page-icon":"fas fa-fw fa-film",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:F(()=>[u.item?(t(),s("div",Er,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:p[0]||(p[0]=w=>b()),class:"btn btn-primary"},p[7]||(p[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,qr),e("button",{onClick:f,class:"ms-2 btn btn-secondary"},p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(T,{to:`${O.urlView}/${O.id}`,class:"ms-1 btn btn-secondary"},{default:F(()=>p[9]||(p[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):H("",!0)]),_:1},8,["pageTitle"]),z(c,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[u.item?(t(),s("div",Br,[e("div",Nr,[e("div",Rr,[e("div",Fr,[R(e("input",{"onUpdate:modelValue":p[1]||(p[1]=w=>u.item.eidrPrefix=w),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[ee,u.item.eidrPrefix]]),p[10]||(p[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(y).item.eidrPrefix.$error?(t(),s("div",zr,[(t(!0),s(U,null,B(o(y).item.eidrPrefix.$errors,w=>(t(),s("div",{key:w.$uid},m(w.$message),1))),128))])):H("",!0)])]),e("div",Gr,[e("div",jr,[R(e("input",{"onUpdate:modelValue":p[2]||(p[2]=w=>u.item.eidr=w),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[ee,u.item.eidr]]),p[11]||(p[11]=e("label",{for:"title"},"Eidr",-1)),o(y).item.eidr.$error?(t(),s("div",Yr,[(t(!0),s(U,null,B(o(y).item.eidr.$errors,w=>(t(),s("div",{key:w.$uid},m(w.$message),1))),128))])):H("",!0)])])]),e("div",Wr,[e("div",Kr,[e("div",Qr,[R(e("input",{"onUpdate:modelValue":p[3]||(p[3]=w=>u.item.releaseYear=w),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[ee,u.item.releaseYear]]),p[12]||(p[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Jr,[R(e("input",{"onUpdate:modelValue":p[4]||(p[4]=w=>u.item.title=w),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[ee,u.item.title]]),p[13]||(p[13]=e("label",{for:"title"},"Title",-1)),o(y).item.title.$error?(t(),s("div",Xr,[(t(!0),s(U,null,B(o(y).item.title.$errors,w=>(t(),s("div",{key:w.$uid},m(w.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",Zr,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:p[5]||(p[5]=w=>X(w))},null,32),p[14]||(p[14]=e("label",{for:"editor"},"Content",-1)),o(y).htmlContent.$error?(t(),s("div",ei,[(t(!0),s(U,null,B(o(y).htmlContent.$errors,w=>(t(),s("div",{key:w.$uid},m(w.$message),1))),128))])):H("",!0)])]),e("div",ti,[e("div",si,[R(e("textarea",{"onUpdate:modelValue":p[6]||(p[6]=w=>u.item.metadata=w),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[ee,u.item.metadata]]),p[15]||(p[15]=e("label",{for:"title"},"Metadata",-1))])])])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},oi={components:{Page:st},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ai(n,v,k,C,_,D){const P=ae("Page");return t(),ve(P,{id:k.id,urlView:k.urlView},null,8,["id","urlView"])}const li=xe(oi,[["render",ai]]),ni={class:"ms-2"},ri={class:"input-group"},ii={class:"table-responsive border shadow-sm"},di={class:"table table-hover mb-0"},ui=["textContent"],ci={key:0,class:"fas fa-fw fa-check-circle text-success"},mi="/api/v1/sourcegroups/search",fi={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(n){Me("$config");const k=$e().user,{appTitle:C,pageTitle:_,busy:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,security:u,filter:S,initializeFilter:y,getQuery:W,saveQuery:X,search:f,getRowNumber:b,setSelected:Y,isSelected:p}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Source Groups",cacheKey:`${k==null?void 0:k.userId}/source-groups/search`,baseUrl:mi,filter:{updateUrl:!0}});return me(async()=>{y(),await f()}),(T,r)=>{const c=ae("router-link"),w=ae("PageHeader"),d=ae("m-pagination"),i=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(w,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_)},{default:F(()=>[z(c,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ni,[e("div",ri,[R(e("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>o(S).query.criteria=l),onKeyup:r[1]||(r[1]=Le(l=>o(f)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[ee,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:r[2]||(r[2]=l=>o(f)(1))},r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(i,{errorMessage:o(j)},{default:F(()=>[e("div",ii,[e("table",di,[r[5]||(r[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(S).items,(l,a)=>(t(),s("tr",{key:l.sourceGroupId},[e("td",{textContent:m(o(b)(a)),class:"text-center"},null,8,ui),e("td",null,[z(c,{to:`${n.urlView}/${l.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:F(()=>[l.arn?(t(),s("span",ci)):H("",!0),K(" "+m(l.name),1)]),_:2},1032,["to"])]),e("td",null,m(l.channelOutputs),1),e("td",null,m(l.packageConfigurations),1)]))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(d,{filter:o(S),search:o(f),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},pi={key:0},vi={class:"nav nav-tabs",id:"myTab",role:"tablist"},gi={class:"nav-item",role:"presentation"},bi={class:"nav-item",role:"presentation"},yi={class:"nav-item",role:"presentation"},$i={class:"tab-content",id:"myTabContent"},hi={class:""},wi={class:"form-floating mb-2"},_i={class:""},ki={class:"table-responsive border"},Si={class:"table table-hover mb-0"},Ti={class:""},Ii={class:"table-responsive border"},Mi={class:"table table-hover mb-0"},xi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const v=n,{appTitle:k,pageTitle:C,busy:_,isDirty:D,validations:P,infoMessage:Q,warningMessage:j,errorMessage:I,router:G,axios:le,utils:N,toasts:O,close:u,closeWithReturnUrl:S,generateReturnUrl:y,security:W}=ye({appTitle:"Arcadian-FAST",pageTitle:"View Source Group"});Me("$config");const X=$e();X.user;const f=ge({user:X.user,item:null}),b=fe();me(async()=>{await r(),b.value=N.getPageTab("sourceGroup")||"information-tab"});const Y=d=>{N.setPageTab("sourceGroup",d),b.value=d},p=d=>d!==b.value?"":"active",T=d=>d!==b.value?"":"show active",r=async()=>{const d=f;if(!_.value)try{_.value=!0,I.value="",f.item=null;const i=`/api/v1/sourcegroups/${v.id}/`;await le.get(i).then(l=>{d.item=l.data})}catch(i){I.value=N.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{if(!_.value)try{_.value=!0,I.value="";const d=`/api/v1/sourcegroups/${v.id}/`;await le.delete(d).then(i=>{O.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const l=`${v.urlMain}/`;await G.push(l)}})})}catch(d){I.value=N.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{_.value=!1}},w=async()=>{await r()};return(d,i)=>{const l=ae("PageHeader"),a=ae("router-link"),L=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(C)},{default:F(()=>[e("button",{onClick:i[0]||(i[0]=M=>c()),class:"ms-1 btn btn-warning"},i[7]||(i[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:i[1]||(i[1]=M=>w()),class:"ms-2 btn btn-secondary"},i[8]||(i[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:i[2]||(i[2]=M=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},i[9]||(i[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(L,{errorMessage:o(I)},{default:F(()=>[f.item?(t(),s("div",pi,[e("div",null,[e("ul",vi,[e("li",gi,[e("button",{onClick:i[3]||(i[3]=M=>Y("information-tab")),class:te([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",bi,[e("button",{onClick:i[4]||(i[4]=M=>Y("channelOutputs-tab")),class:te([p("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",yi,[e("button",{onClick:i[5]||(i[5]=M=>Y("packageConfigurations-tab")),class:te([p("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",$i,[e("div",{class:te([T("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",hi,[e("div",wi,[R(e("input",{"onUpdate:modelValue":i[6]||(i[6]=M=>f.item.name=M),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[ee,f.item.name]]),i[10]||(i[10]=e("label",{for:"name"},"Name",-1))])])],2),e("div",{class:te([T("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",_i,[e("div",ki,[e("table",Si,[i[11]||(i[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.channelOutputs,(M,g)=>(t(),s("tr",{key:M.channelOutputId},[e("td",null,m(g+1),1),e("td",null,[z(a,{to:`${n.urlViewChannel}/${M.channelId}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(M.manifestName),1)]),_:2},1032,["to"])]),e("td",null,m(M.outputType),1)]))),128))]),_:1},512),[[ke,f.item.channelOutputs.length>0]])])])])],2),e("div",{class:te([T("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Ti,[e("div",Ii,[e("table",Mi,[i[12]||(i[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.packageConfigurations,(M,g)=>(t(),s("tr",{key:M.packageConfigurationId},[e("td",null,m(g+1),1),e("td",null,[z(a,{to:`${n.urlViewVodSource}/${M.vodSourceId}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(M.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,m(M.path),1),e("td",null,m(M.type),1)]))),128))]),_:1},512),[[ke,f.item.packageConfigurations.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Ci=["disabled"],Vi={class:"form-floating mb-2"},Pi={key:0,class:"d-block invalid-feedback"},Oi={class:"form-floating mb-2"},Ai={key:0,class:"d-block invalid-feedback"},Li={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Source Location"}),O=n,u=ge({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),S={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:ne.withMessage("HTTP Configuration Base Url is required.",ie),$autoDirty:!0,$lazy:!0}}},y=Se(S,u);me(async()=>{});const W=async()=>{const X=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const b=I.clone(X.item);await j.post("/api/v1/sourcelocations/",b).then(Y=>{G.success("Add Source Location","Source location added.",{onClose:async()=>{const p=`${O.urlView}/${Y.data}`;await Q.push(p)}})})}catch(b){P.value=I.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{C.value=!1}};return(X,f)=>{const b=ae("router-link"),Y=ae("PageHeader"),p=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(Y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:f[0]||(f[0]=T=>W()),class:"btn btn-primary"},f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ci),z(b,{to:O.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>f[4]||(f[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(p,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[e("div",null,[e("div",Vi,[R(e("input",{"onUpdate:modelValue":f[1]||(f[1]=T=>u.item.name=T),type:"text",class:te([o(I).getValidFeedbackCss(u.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[ee,u.item.name]]),f[5]||(f[5]=e("label",{for:"name"},"Name",-1)),o(y).item.name.$error?(t(),s("div",Pi,[(t(!0),s(U,null,B(o(y).item.name.$errors,T=>(t(),s("div",{key:T.$uid},m(T.$message),1))),128))])):H("",!0)]),e("div",Oi,[R(e("textarea",{"onUpdate:modelValue":f[2]||(f[2]=T=>u.item.httpConfigurationBaseUrl=T),type:"text",class:te([o(I).getValidFeedbackCss(u.item.httpConfigurationBaseUrl),"form-control"]),id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,2),[[ee,u.item.httpConfigurationBaseUrl]]),f[6]||(f[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(y).item.httpConfigurationBaseUrl.$error?(t(),s("div",Ai,[(t(!0),s(U,null,B(o(y).item.httpConfigurationBaseUrl.$errors,T=>(t(),s("div",{key:T.$uid},m(T.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ui={components:{Page:st},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Hi(n,v,k,C,_,D){const P=ae("Page");return t(),ve(P,{id:k.id,urlView:k.urlView},null,8,["id","urlView"])}const Di=xe(Ui,[["render",Hi]]),Ei={class:"ms-1"},qi={class:"input-group"},Bi={class:"table-responsive border shadow-sm"},Ni={class:"table table-hover mb-0"},Ri={class:"text-center"},Fi=["textContent"],zi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Gi={class:"text-center"},ji=["onUpdate:modelValue"],Yi="/api/v1/sourcelocations/search",Wi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(n){Me("$config");const k=$e().user,{appTitle:C,pageTitle:_,busy:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,security:u,filter:S,initializeFilter:y,getQuery:W,saveQuery:X,search:f,getRowNumber:b,setSelected:Y,isSelected:p}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Source Locations",cacheKey:`${k==null?void 0:k.userId}/source-locations/search`,baseUrl:Yi,filter:{updateUrl:!0}}),T=Ie(()=>{const w=S.value;return w&&w.items?w.items.filter(l=>l.selected):null});me(async()=>{y(),await f()});const r=async()=>{if(!(T.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!D.value){j.value=null;try{D.value=!0;const i={sourceLocationIds:T.value.map(l=>l.sourceLocationId)};await G.post("/api/v1/sourceLocations/publish/",i).then(l=>{N.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),D.value=!1,await f()}catch(d){j.value=le.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{D.value=!1}}},c=async()=>{if(!(T.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!D.value){j.value=null;try{D.value=!0;const i={sourceLocationIds:T.value.map(l=>l.sourceLocationId)};await G.post("/api/v1/sourceLocations/unpublish/",i).then(l=>{N.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),D.value=!1,await f()}catch(d){j.value=le.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{D.value=!1}}};return(w,d)=>{const i=ae("router-link"),l=ae("PageHeader"),a=ae("m-pagination"),L=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_)},{default:F(()=>[z(i,{to:n.urlAdd,class:"btn btn-primary ms-2"},{default:F(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ei,[e("div",qi,[R(e("input",{"onUpdate:modelValue":d[0]||(d[0]=M=>o(S).query.criteria=M),onKeyup:d[1]||(d[1]=Le(M=>o(f)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[ee,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=M=>o(f)(1))},d[4]||(d[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(L,{errorMessage:o(j)},{default:F(()=>[e("div",Bi,[e("table",Ni,[e("thead",null,[e("tr",null,[d[7]||(d[7]=e("td",{class:"text-center"},"#",-1)),d[8]||(d[8]=e("th",null,"Name",-1)),d[9]||(d[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",Ri,[T.value.length?(t(),s(U,{key:0},[e("button",{onClick:r,class:"btn btn-primary btn-sm"},d[5]||(d[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:c,class:"btn btn-warning btn-sm ms-1"},d[6]||(d[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0)])])]),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(S).items,(M,g)=>(t(),s("tr",{key:M.sourceLocationId},[e("td",{textContent:m(o(b)(g)),class:"text-center"},null,8,Fi),e("td",null,[z(i,{to:`${n.urlView}/${M.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:F(()=>[M.arn?(t(),s("i",zi)):H("",!0),e("span",null,m(M.name),1)]),_:2},1032,["to"])]),e("td",null,m(M.httpConfigurationBaseUrl),1),e("td",Gi,[R(e("input",{"onUpdate:modelValue":q=>M.selected=q,type:"checkbox",class:"form-check-input"},null,8,ji),[[De,M.selected]])])]))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(a,{filter:o(S),search:o(f),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ki={key:0},Qi={class:"nav nav-tabs",id:"myTab",role:"tablist"},Ji={class:"nav-item",role:"presentation"},Xi={class:"nav-item",role:"presentation"},Zi={class:"nav-item",role:"presentation"},ed={class:"tab-content",id:"myTabContent"},td={class:""},sd={class:"col"},od={class:"form-floating mb-2"},ad={class:"col"},ld={class:"form-floating mb-2"},nd={class:""},rd={class:"table-responsive border"},id={class:"table table-hover mb-0"},dd={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ud={class:""},cd={class:"table-responsive border"},md={class:"table table-hover mb-0"},fd={key:0,class:"fas fa-fw fa-check-circle text-success"},pd={class:"badge bg-info"},vd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const v=n,{appTitle:k,pageTitle:C,busy:_,isDirty:D,validations:P,infoMessage:Q,warningMessage:j,errorMessage:I,router:G,axios:le,utils:N,toasts:O,close:u,closeWithReturnUrl:S,generateReturnUrl:y,security:W}=ye({appTitle:"Arcadian-FAST",pageTitle:"View Source Location"});Me("$config");const X=$e();X.user;const f=ge({user:X.user,item:null}),b=fe();me(async()=>{await r(),b.value=N.getPageTab("sourceLocation")||"information-tab"});const Y=i=>{N.setPageTab("sourceLocation",i),b.value=i},p=i=>i!==b.value?"":"active",T=i=>i!==b.value?"":"show active",r=async()=>{const i=f;if(!_.value)try{_.value=!0,I.value="",f.item=null;const l=`/api/v1/sourcelocations/${v.id}/`;await le.get(l).then(a=>{i.item=a.data})}catch(l){I.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{await r()},w=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!_.value){I.value=null;try{_.value=!0;const l={sourceLocationIds:[v.id]};await le.post("/api/v1/sourcelocations/publish/",l).then(a=>{O.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),_.value=!1,await c()}catch(l){I.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!_.value){I.value=null;try{_.value=!0;const l={sourceLocationIds:[v.id]};await le.post("/api/v1/sourcelocations/unpublish/",l).then(a=>{O.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),_.value=!1,await c()}catch(l){I.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}}};return(i,l)=>{const a=ae("PageHeader"),L=ae("router-link"),M=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(C)},{default:F(()=>[f.item?(t(),s(U,{key:0},[f.item.arn?(t(),s("button",{key:0,onClick:l[0]||(l[0]=g=>d()),class:"ms-1 btn btn-warning"},l[9]||(l[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:l[1]||(l[1]=g=>w()),class:"ms-1 btn btn-primary"},l[10]||(l[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),e("button",{onClick:l[2]||(l[2]=g=>c()),class:"ms-2 btn btn-secondary"},l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[3]||(l[3]=g=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(M,{errorMessage:o(I)},{default:F(()=>[f.item?(t(),s("div",Ki,[e("div",null,[e("ul",Qi,[e("li",Ji,[e("button",{onClick:l[4]||(l[4]=g=>Y("information-tab")),class:te([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Xi,[e("button",{onClick:l[5]||(l[5]=g=>Y("vodSources-tab")),class:te([p("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Zi,[e("button",{onClick:l[6]||(l[6]=g=>Y("programs-tab")),class:te([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",ed,[e("div",{class:te([T("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",td,[e("div",sd,[e("div",od,[R(e("input",{"onUpdate:modelValue":l[7]||(l[7]=g=>f.item.name=g),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[ee,f.item.name]]),l[13]||(l[13]=e("label",{for:"name"},"Name",-1))])]),e("div",ad,[e("div",ld,[R(e("input",{"onUpdate:modelValue":l[8]||(l[8]=g=>f.item.httpConfigurationBaseUrl=g),type:"text",class:"form-control-plaintext",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[ee,f.item.httpConfigurationBaseUrl]]),l[14]||(l[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:te([T("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",nd,[e("div",rd,[e("table",id,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.vodSources,(g,q)=>(t(),s("tr",{key:g.vodSourceId},[e("td",null,m(q+1),1),e("td",null,[g.arn?(t(),s("span",dd)):H("",!0),z(L,{to:`${v.urlViewVodSource}/${encodeURIComponent(g.vodSourceId)}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(g.name),1)]),_:2},1032,["to"])]),e("td",null,[z(L,{to:`${v.urlViewVideo}/${encodeURIComponent(g.video.videoId)}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(g.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,m(o(N).moment.utc(g.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[ke,f.item.vodSources.length>0]])])])])],2),e("div",{class:te([T("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",ud,[e("div",cd,[e("table",md,[l[17]||(l[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.programs,(g,q)=>(t(),s("tr",{key:g.programId},[e("td",null,m(q+1),1),e("td",null,[z(L,{to:`${v.urlViewChannel}/${encodeURIComponent(g.channel.channelId)}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(g.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[g.arn?(t(),s("span",fd)):H("",!0),K(" "+m(g.name)+" ",1),e("div",null," Start: "+m(o(N).moment.utc(g.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+m(o(N).moment.utc(g.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[K(m(o(N).moment(g.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",pd,m(o(N).moment(g.dateScheduledStart).fromNow()),1)])]),l[16]||(l[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[ke,f.item.programs.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},gd=["id"],bd={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},yd={class:"modal-content"},$d={class:"modal-header"},hd={class:"modal-title"},wd={class:"modal-body p-1"},_d={class:"row row-cols-1 row-cols-sm-3"},kd={class:"col"},Sd={class:"form-floating mb-2"},Td=["value"],Id={class:"col"},Md={class:"form-floating mb-2"},xd=["value"],Cd={class:"col"},Vd={class:"input-group mb-2"},Pd={class:"form-floating"},Od={class:"row row-cols-1 row-cols-sm-2"},Ad={class:"col-sm-4"},Ld={class:"card"},Ud={key:0,class:"mt-2"},Hd={class:"col"},Dd={class:"form-floating mb-2"},Ed={class:"col ms-2 my-2"},qd={class:"badge bg-info me-1"},Bd={class:"badge bg-primary me-1"},Nd={class:"row row-cols-1 row-cols-sm-2"},Rd={class:"col"},Fd={class:"form-floating mb-2"},zd={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Gd={class:"col"},jd={class:"form-floating mb-2"},Yd={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Wd={class:"col"},Kd={class:"form-floating mb-2"},Qd={class:"col-sm-8"},Jd={class:"table-responsive border shadow-sm"},Xd={class:"table table-sm table-hover mb-0 overflow-auto"},Zd=["textContent"],eu={class:"d-flex flex-row justify-content-start"},tu={class:"mt-1"},su=["src"],ou={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},au={class:"ms-2"},lu=["onClick"],nu={class:"modal-footer"},ru="/api/v1/videos/search",ct={__name:"_selectVideo",props:{sourceLocationId:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const _=$e().user,{appTitle:D,pageTitle:P,busy:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,security:S,filter:y,initializeFilter:W,getQuery:X,saveQuery:f,search:b,getRowNumber:Y,setSelected:p,isSelected:T}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Select Video",cacheKey:`${_==null?void 0:_.userId}/videos/select`,baseUrl:ru,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(A,$)=>{const E=A.value,Z=new URLSearchParams(window.location.search),V=JSON.parse(localStorage.getItem($))||{};E.query.genreId=Z.get("genre")||V.genreId||E.query.genreId||0,E.query.categoryId=Z.get("category")||V.categoryId||E.query.categoryId||0},getQuery:A=>["?c=",encodeURIComponent(A.query.criteria),"&p=",A.pageIndex,"&s=",A.pageSize,"&sf=",A.sortField,"&so=",A.sortOrder,"&genre=",A.query.genreId,"&category=",A.query.categoryId,"&sourceLocationId=",A.query.sourceLocationId].join(""),saveQuery:(A,$)=>{localStorage.setItem($,JSON.stringify({criteria:A.query.criteria,pageIndex:A.pageIndex,pageSize:A.pageSize,sortField:A.sortField,sortOrder:A.sortOrder,visible:A.visible,genreId:A.query.genreId,category:A.query.categoryId}))}}),r=k,c=n,w=fe("modalSelectVideo"),d=ge({video:null,hls:null});me(async()=>{W(),await i(),await l(),await b(1)}),Ae(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const i=async()=>{await L(),await M()},l=async()=>{y.value.query.sourceLocationId=c.sourceLocationId,G.value="";var A=document.getElementById(w.value),$=he.getOrCreateInstance(A);$.show()},a=async A=>{var $=document.getElementById(w.value),E=he.getOrCreateInstance($);E.hide(),d.hls&&(d.hls.stopLoad(),d.hls.destroy()),r(A?"confirm":"cancel",A?d.video:null)},L=async A=>{try{const E=await N.get("/api/v1/lookups/video-categories/").then(Z=>Z.data);y.value.lookups.categories=E}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},M=async A=>{try{const E=await N.get("/api/v1/lookups/video-genres/").then(Z=>Z.data);y.value.lookups.genres=E}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},g=A=>{d.video=A,q()},q=()=>{if(Hls.isSupported()){d.hls&&(d.hls.stopLoad(),d.hls.destroy());var A=document.getElementById("video-select-preview");const E=d.video.formats.find(V=>V.formatName==="HLS"),Z=E.serverUrl+E.path;d.hls=O.createHlsStream(A,Z)}};return v({open:l,close:a}),(A,$)=>{const E=ae("m-pagination"),Z=ae("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:w.value,tabindex:"-1","aria-hidden":"true"},[e("div",bd,[e("div",yd,[e("div",$d,[e("h5",hd,[$[10]||($[10]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),K(m(o(P)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=V=>a(!1)),"aria-label":"Close"})]),e("div",wd,[z(Z,{errorMessage:o(G)},{default:F(()=>[e("div",_d,[e("div",kd,[e("div",Sd,[R(e("select",{"onUpdate:modelValue":$[1]||($[1]=V=>o(y).query.categoryId=V),class:"form-select",id:"category"},[(t(!0),s(U,null,B(o(y).lookups.categories,V=>(t(),s("option",{value:V.id},m(V.name),9,Td))),256))],512),[[pe,o(y).query.categoryId]]),$[11]||($[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",Id,[e("div",Md,[R(e("select",{"onUpdate:modelValue":$[2]||($[2]=V=>o(y).query.genreId=V),class:"form-select",id:"genre"},[(t(!0),s(U,null,B(o(y).lookups.genres,V=>(t(),s("option",{value:V.id},m(V.name),9,xd))),256))],512),[[pe,o(y).query.genreId]]),$[12]||($[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Cd,[e("div",Vd,[e("div",Pd,[R(e("input",{"onUpdate:modelValue":$[3]||($[3]=V=>o(y).query.criteria=V),onKeyup:$[4]||($[4]=Le(V=>o(b)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[ee,o(y).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[5]||($[5]=V=>o(b)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Od,[e("div",Ad,[e("div",Ld,[$[19]||($[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),d.video?(t(),s("div",Ud,[e("div",Hd,[e("div",Dd,[R(e("input",{"onUpdate:modelValue":$[6]||($[6]=V=>d.video.title=V),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[ee,d.video.title]]),$[15]||($[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Ed,[e("div",null,[(t(!0),s(U,null,B(d.video.genres,V=>(t(),s("span",qd,m(V.genreName),1))),256)),(t(!0),s(U,null,B(d.video.categories,V=>(t(),s("span",Bd,m(V.categoryName),1))),256))])]),e("div",Nd,[e("div",Rd,[e("div",Fd,[e("div",zd,m(o(O).moment(d.video.dateReleased).calendar()),1),$[16]||($[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Gd,[e("div",jd,[e("div",Yd,m(o(O).moment.utc(d.video.durationInMillis).format("HH:mm:ss")),1),$[17]||($[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Wd,[e("div",Kd,[R(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=V=>d.video.description=V),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[ee,d.video.description]]),$[18]||($[18]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])]),e("div",Qd,[e("div",Jd,[e("table",Xd,[$[20]||($[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(y).items,(V,re)=>(t(),s("tr",{key:V.videoId},[e("td",{textContent:m(o(Y)(re)),class:"text-center"},null,8,Zd),e("td",null,[e("div",eu,[e("div",null,[V.thumbnails.length>0?(t(!0),s(U,{key:0},B(V.thumbnails,J=>(t(),s("div",tu,[e("img",{src:J.url,class:"img-fuild border",width:"128"},null,8,su)]))),256)):(t(),s("img",ou))]),e("div",au,[e("a",{onClick:J=>g(V),class:"text-wrap link-offset-2",role:"button"},m(V.title),9,lu)])])])]))),128))]),_:1},512),[[ke,o(y).items.length>0]])])]),z(E,{filter:o(y),search:o(b),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",nu,[e("button",{onClick:$[8]||($[8]=V=>a(!0)),class:"btn btn-primary",type:"button"},$[21]||($[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[9]||($[9]=V=>a(!1)),class:"btn btn-secondary ms-1"},$[22]||($[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,gd)}}},iu=["disabled"],du={class:"col"},uu={class:"form-floating mb-2"},cu={key:0,class:"d-block invalid-feedback"},mu={class:"row row-cols-1 row-cols-sm-2"},fu={class:"col"},pu={class:"form-floating mb-2"},vu=["value"],gu={key:0,class:"d-block invalid-feedback"},bu={class:"col"},yu={class:"input-group mb-2"},$u={class:"form-floating"},hu={key:0},wu={class:"d-flex flex-row justify-content-start align-items-center"},_u={key:0,class:"d-inline invalid-feedback"},ku={class:"table-responsive border mt-1"},Su={class:"table table-sm mb-0 caption-top"},Tu={class:"align-middle"},Iu=["onUpdate:modelValue"],Mu=["value"],xu=["onUpdate:modelValue"],Cu=["value"],Vu=["onClick"],Pu={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,route:j,axios:I,utils:G,toasts:le,close:N,closeWithReturnUrl:O,security:u}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source"}),S=n,y=ge({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),W=(l,a,L)=>l.length>0,X={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},videoId:{required:ne.withMessage("Video is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("Source Locaton is required.",ie),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ne.withMessage("PackageConfigurations is required.",W),$each:ne.forEach({path:{required:ne.withMessage("Path is required.",ie)},sourceGroupId:{required:ne.withMessage("Source Group is required.",ie)}}),$autoDirty:!0,$lazy:!0}}},f=Se(X,y);me(async()=>{if(await b(),await Y(),j.query.videoId)debugger});const b=async()=>{try{await I.get("/api/v1/sourcegroups/lookup/").then(a=>{y.lookups.sourceGroups=a.data})}catch(l){P.value=G.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},Y=async()=>{try{if(await I.get("/api/v1/sourcelocations/lookup/").then(a=>{y.lookups.sourceLocations=a.data}),y.lookups.sourceLocations.length===1){const a=y.lookups.sourceLocations[0];y.selected.sourceLocation=a,await p()}}catch(l){P.value=G.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},p=async()=>{const l=y.selected.sourceLocation;y.item.sourceLocationId=l.id},T=async()=>{y.item.videoId=y.selected.video.videoId,await r(y.item.videoId)},r=async l=>{try{const a=`/api/v1/videos/${l}/formats`;await I.get(a).then(L=>{y.selected.video.formats=L.data})}catch(a){P.value=G.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},c=async()=>{const l=y;if(C.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const L=G.clone(l.item),M=l.item.packageConfigurations.filter(g=>g.selectedFormat&&g.sourceGroupId);M.forEach(g=>{const q=g.selectedFormat;g.path=q.path,g.format=q.format,delete g.selectedFormat}),L.packageConfigurations=M,delete L.video,await I.post("/api/v1/vodSources/",L).then(g=>{debugger;le.success("Add VOD Source","VOD source added",{onClose:async()=>{const q=`${S.urlView}/${g.data}`;await Q.push(q)}})})}catch(L){P.value=G.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{C.value=!1}},w=()=>{const l={sourceGroupId:null,selectedFormat:null},a=y.selected.video;if(a){const L=a.formats.find(M=>M.formatName==="HLS");l.path=`${L.serverUrl}${L.path}`}y.item.packageConfigurations.push(l)},d=l=>{y.item.packageConfigurations.splice(l,1)},i=async()=>{const l=Ve(ct,{sourceLocationId:y.selected.sourceLocation.id},{chore:!0,keepInitial:!1}),{data:a,isCanceled:L}=await l.reveal();l.closeAll(),!L&&a&&(y.selected.video=a,await T())};return(l,a)=>{const L=ae("PageHeader"),M=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(L,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:a[0]||(a[0]=g=>c()),class:"btn btn-primary"},a[6]||(a[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,iu),e("button",{onClick:a[1]||(a[1]=g=>o(O)(S.urlMain)),class:"btn btn-secondary ms-1"},a[7]||(a[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(M,{errorMessage:o(P),vuelidate:o(f)},{default:F(()=>[e("div",null,[e("div",du,[e("div",uu,[R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=g=>y.item.name=g),id:"name",class:te([o(G).getValidFeedbackCss(y.item.name),"form-control"]),placeholder:"Name"},null,2),[[ee,y.item.name]]),a[8]||(a[8]=e("label",{for:"name",class:""},"Name",-1)),o(f).item.name.$error?(t(),s("div",cu,[(t(!0),s(U,null,B(o(f).item.name.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):H("",!0)])]),e("div",mu,[e("div",fu,[e("div",pu,[R(e("select",{"onUpdate:modelValue":a[3]||(a[3]=g=>y.selected.sourceLocation=g),onChange:a[4]||(a[4]=g=>p()),class:te([o(G).getValidFeedbackCss(y.selected.sourceLocation),"form-select"]),id:"sourceLocationId"},[(t(!0),s(U,null,B(y.lookups.sourceLocations,g=>(t(),s("option",{value:g},m(g.name),9,vu))),256))],34),[[pe,y.selected.sourceLocation]]),a[9]||(a[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(f).item.sourceLocationId.$error?(t(),s("div",gu,[(t(!0),s(U,null,B(o(f).item.sourceLocationId.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):H("",!0)])]),e("div",bu,[e("div",yu,[e("div",$u,[e("div",{id:"video",class:te([o(G).getValidFeedbackCss(y.selected.video),"form-control"]),placeholder:"Title"},[y.selected.video?(t(),s(U,{key:0},[K(m(o(G).moment.utc(y.selected.video.durationInMillis).format("HH:mm:ss"))+" - "+m(y.selected.video.title),1)],64)):H("",!0)],2),a[10]||(a[10]=e("label",{for:"video",class:""},"Video",-1))]),y.selected.sourceLocation?(t(),s("button",{key:0,onClick:a[5]||(a[5]=g=>i()),class:"btn btn-primary",type:"button"},a[11]||(a[11]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):H("",!0)])])]),y.item.videoId?(t(),s("div",hu,[e("div",wu,[e("fieldset",null,[e("legend",null,[a[13]||(a[13]=K(" Package Configurations ")),o(f).item.packageConfigurations.$error?(t(),s("span",_u,a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:w,class:"btn btn-outline-primary btn-sm"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",ku,[e("table",Su,[a[16]||(a[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",Tu,[(t(!0),s(U,null,B(y.item.packageConfigurations,(g,q)=>(t(),s("tr",null,[e("td",null,m(q+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":A=>g.selectedFormat=A,class:te([o(G).getValidFeedbackCss(g.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(U,null,B(y.selected.video.formats,A=>(t(),s("option",{value:A},m(A.path),9,Mu))),256))],10,Iu),[[pe,g.selectedFormat]]),o(f).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},B(o(f).item.packageConfigurations.$each.$response.$errors[q].path,A=>(t(),s("div",{key:A,class:"d-block invalid-feedback"},m(A.$message),1))),128)):H("",!0)]),e("td",null,[g.selectedFormat?(t(),s(U,{key:0},[K(m(g.selectedFormat.formatName),1)],64)):H("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":A=>g.sourceGroupId=A,class:te([o(G).getValidFeedbackCss(g.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(U,null,B(y.lookups.sourceGroups,A=>(t(),s("option",{value:A.id},m(A.name),9,Cu))),256))],10,xu),[[pe,g.sourceGroupId]]),o(f).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},B(o(f).item.packageConfigurations.$each.$response.$errors[q].path,A=>(t(),s("div",{key:A,class:"d-block invalid-feedback"},m(A.$message),1))),128)):H("",!0)])]),e("td",null,[e("button",{onClick:A=>d(q),class:"btn btn-outline-warning btn-sm"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Vu)])]))),256))])])])])):H("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ou=["disabled"],Au={key:0},Lu={class:"col"},Uu={class:"form-floating mb-2"},Hu={key:0,class:"d-block invalid-feedback"},Du={class:"row row-cols-1 row-cols-sm-2"},Eu={class:"col"},qu={class:"form-floating mb-2"},Bu=["value"],Nu={key:0,class:"d-block invalid-feedback"},Ru={class:"col"},Fu={class:"col"},zu=["disabled"],Gu={class:"form-floating"},ju={id:"video",class:"form-control",placeholder:"Title"},Yu={key:0},Wu={class:"d-flex flex-row justify-content-between mt-3"},Ku={key:0,class:"d-inline invalid-feedback"},Qu={class:"table-responsive border mt-1"},Ju={class:"table table-sm mb-0"},Xu={class:"align-middle"},Zu=["onUpdate:modelValue"],ec=["value"],tc=["onUpdate:modelValue"],sc=["value"],oc={class:"text-end"},ac=["onClick"],lc={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Edit VOD Source"}),O=n,u=ge({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),S=(l,a,L)=>l.length>0,y={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},videoId:{required:ne.withMessage("Video is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("Source Locaton is required.",ie),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ne.withMessage("PackageConfigurations is required.",S),$each:ne.forEach({path:{required:ne.withMessage("Path is required.",ie)},sourceGroupId:{required:ne.withMessage("Source Group is required.",ie)}})}}},W=Se(y,u);me(async()=>{await X(),await Y(),await p()});const X=async()=>{await f(),await b()},f=async()=>{const l=u;if(!C.value)try{C.value=!0,P.value="",u.item=null;const a=`/api/v1/vodsources/${O.id}/`;await j.get(a).then(L=>{l.item=L.data;const M=l.item,g=I.moment.utc(l.item.video.durationInMillis).format("HH:mm:ss");M.video.duration=g})}catch(a){P.value=I.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{C.value=!1}},b=async()=>{const l=u;if(!C.value)try{C.value=!0,P.value="";const a=`/api/v1/videos/${l.item.videoId}/`;await j.get(a).then(L=>{l.selected.video=L.data})}catch(a){P.value=I.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{C.value=!1}},Y=async()=>{try{await j.get("/api/v1/sourcegroups/lookup/").then(a=>{u.lookups.sourceGroups=a.data})}catch(l){P.value=I.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},p=async()=>{try{if(await j.get("/api/v1/sourcelocations/lookup/").then(a=>{u.lookups.sourceLocations=a.data}),u.lookups.sourceLocations.length>0){const a=u.lookups.sourceLocations.find(L=>L.id===u.item.sourceLocationId);u.selected.sourceLocation=a}}catch(l){P.value=I.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},T=async()=>{u.item.videoId=u.selected.video.videoId,u.item.packageConfigurations=[],await r(u.item.videoId)},r=async l=>{try{const a=`/api/v1/videos/${l}/formats`;await j.get(a).then(L=>{u.selected.video.formats=L.data;debugger})}catch(a){P.value=I.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},c=async()=>{const l=u;if(C.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const L=I.clone(l.item);delete L.video,delete L.programs,delete L.sourceLocation,await j.put("/api/v1/vodsources/",L).then(M=>{G.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const g=`${O.urlView}/${O.id}`;await Q.push(g)}})})}catch(L){P.value=I.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{C.value=!1}},w=()=>{debugger;const l={path:"",sourceGroupId:null,type:"HLS"},a=u.selected.video;if(a){const L=a.formats.find(M=>M.formatName==="HLS");l.path=`${L.path}`}u.item.packageConfigurations.push(l)},d=l=>{u.item.packageConfigurations.splice(l,1)},i=async()=>{const l=Ve(ct,{sourceLocationId:u.selected.sourceLocation.id},{chore:!0,keepInitial:!1}),{data:a,isCanceled:L}=await l.reveal();l.close(),!L&&a&&(u.selected.video=a,await T())};return(l,a)=>{const L=ae("router-link"),M=ae("PageHeader"),g=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(M,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:a[0]||(a[0]=q=>c()),class:"btn btn-primary"},a[5]||(a[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ou),e("button",{onClick:a[1]||(a[1]=q=>X()),class:"btn btn-secondary ms-2"},a[6]||(a[6]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(L,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:F(()=>a[7]||(a[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(g,{errorMessage:o(P),vuelidate:o(W)},{default:F(()=>[u.item?(t(),s("div",Au,[e("div",Lu,[e("div",Uu,[R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=q=>u.item.name=q),id:"name",class:"form-control",placeholder:"Name"},null,512),[[ee,u.item.name]]),a[8]||(a[8]=e("label",{for:"name",class:""},"Name",-1)),o(W).item.name.$error?(t(),s("div",Hu,[(t(!0),s(U,null,B(o(W).item.name.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):H("",!0)])]),e("div",Du,[e("div",Eu,[e("div",qu,[R(e("select",{"onUpdate:modelValue":a[3]||(a[3]=q=>u.selected.sourceLocation=q),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,B(u.lookups.sourceLocations,q=>(t(),s("option",{value:q},m(q.name),9,Bu))),256))],512),[[pe,u.selected.sourceLocation]]),a[9]||(a[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Nu,[(t(!0),s(U,null,B(o(W).item.sourceLocationId.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):H("",!0)])]),e("div",Ru,[e("div",Fu,[e("div",{class:"input-group mb-2",disabled:u.item.packageConfigurations.length>0},[e("div",Gu,[e("div",ju,[u.selected.video?(t(),s(U,{key:0},[K(m(u.selected.video.title),1)],64)):H("",!0)]),a[10]||(a[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:a[4]||(a[4]=q=>i()),class:"btn btn-primary",type:"button"},a[11]||(a[11]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))],8,zu)])])]),u.item.videoId?(t(),s("div",Yu,[e("div",Wu,[e("div",null,[e("h5",null,[a[13]||(a[13]=K(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Ku,a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("button",{onClick:w,class:"btn btn-outline-primary btn-sm"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Qu,[e("table",Ju,[a[16]||(a[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",Xu,[(t(!0),s(U,null,B(u.item.packageConfigurations,(q,A)=>(t(),s("tr",null,[e("td",null,m(A+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":$=>q.selectedFormat=$,class:te([o(I).getValidFeedbackCss(q.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(U,null,B(u.selected.video.formats,$=>(t(),s("option",{value:$},m($.path),9,ec))),256))],10,Zu),[[pe,q.selectedFormat]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},B(o(W).item.packageConfigurations.$each.$response.$errors[A].path,$=>(t(),s("div",{key:$,class:"d-block invalid-feedback"},m($.$message),1))),128)):H("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":$=>q.sourceGroupId=$,class:"form-select",id:"sourceGroupId"},[(t(!0),s(U,null,B(u.lookups.sourceGroups,$=>(t(),s("option",{value:$.id},m($.name),9,sc))),256))],8,tc),[[pe,q.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},B(o(W).item.packageConfigurations.$each.$response.$errors[A].path,$=>(t(),s("div",{key:$,class:"d-block invalid-feedback"},m($.$message),1))),128)):H("",!0)])]),e("td",null,[q.selectedFormat?(t(),s(U,{key:0},[K(m(q.selectedFormat.formatName),1)],64)):H("",!0)]),e("td",oc,[e("button",{onClick:$=>d(A),class:"btn btn-outline-warning btn-sm"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ac)])]))),256))])])])])):H("",!0)])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},nc={class:"ms-2"},rc={class:"input-group"},ic=["value"],dc={class:"ms-1"},uc={class:"input-group"},cc=["value"],mc={class:"ms-1"},fc={class:"input-group"},pc={class:"ms-1"},vc={class:"input-group"},gc={class:"table-responsive border shadow-sm"},bc={class:"table table-hover mb-0"},yc={class:"text-center"},$c=["textContent"],hc={class:"d-flex flex-column flex-md-row justify-content-start"},wc={class:""},_c=["src"],kc={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Sc={class:"ms-md-2"},Tc={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Ic={class:"badge bg-primary me-1"},Mc={key:0},xc={class:"badge bg-info me-1"},Cc={class:"d-flex flex-row justify-content-start"},Vc={class:"ms-2"},Pc={class:"small"},Oc={class:"badge bg-secondary me-1"},Ac={class:"text-center"},Lc=["onUpdate:modelValue"],Uc="/api/v1/vodsources/search",Hc={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){Me("$config");const k=$e().user,{appTitle:C,pageTitle:_,busy:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,closeWithReturnUrl:u,generateReturnUrl:S,security:y,filter:W,initializeFilter:X,getQuery:f,saveQuery:b,search:Y,getRowNumber:p,setSelected:T,isSelected:r}=Ue({appTitle:"Arcadian-FAST",pageTitle:"VOD Sources",cacheKey:`${k==null?void 0:k.userId}/vod-sources/search`,baseUrl:Uc,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(L,M)=>{const g=L.value,q=new URLSearchParams(window.location.search),A=JSON.parse(localStorage.getItem(M))||{};g.query.category=q.get("category")||A.category||g.query.category||0,g.query.genre=q.get("genre")||A.genre||g.query.genre||0,g.query.sourceLocationId=q.get("slid")||A.sourceLocationId||g.query.sourceLocationId||""},getQuery:L=>["?c=",encodeURIComponent(L.query.criteria),"&p=",L.pageIndex,"&s=",L.pageSize,"&sf=",L.sortField,"&so=",L.sortOrder,"&category=",L.query.category,"&genre=",L.query.genre,"&slid=",L.query.sourceLocationId].join(""),saveQuery:(L,M)=>{localStorage.setItem(M,JSON.stringify({criteria:L.query.criteria,pageIndex:L.pageIndex,pageSize:L.pageSize,sortField:L.sortField,sortOrder:L.sortOrder,visible:L.visible,category:L.query.category,genre:L.query.genre,sourceLocationId:L.query.sourceLocationId}))}}),c=Ie(()=>{const L=W.value;return L&&L.items?L.items.filter(q=>q.selected):[]});me(async()=>{X(),await l(),await a(),await Y()});const w=async()=>{if(!(c.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!D.value){j.value=null;try{D.value=!0;const g={vodSourceIds:c.value.map(q=>q.vodSourceId)};await G.post("/api/v1/vodsources/publish/",g).then(q=>{N.success("Publish VODs","VODs was published.",{async onClose(){}})}),D.value=!1,await Y()}catch(M){j.value=le.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{D.value=!1}}},d=async()=>{if(!(c.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!D.value){j.value=null;try{D.value=!0;const g={vodSourceIds:c.value.map(q=>q.vodSourceId)};await G.post("/api/v1/vodsources/unpublish/",g).then(q=>{N.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),D.value=!1,await Y()}catch(M){j.value=le.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{D.value=!1}}},i=()=>{const L=W.value.items;if(L.length<1)return;const M=!L[0].selected;W.value.items.forEach(g=>{g.selected=M})},l=async()=>{try{await G.get("/api/v1/sourcelocations/lookup/").then(M=>{W.value.lookups.sourceLocations=M.data})}catch(L){j.value=le.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{}},a=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(L=>{const M=L.data;W.value.lookups.genres=M})}catch(L){j.value=le.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{}};return fe(!1),(L,M)=>{const g=ae("router-link"),q=ae("PageHeader"),A=ae("m-pagination"),$=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(q,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(_)},{default:F(()=>[z(g,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>M[6]||(M[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",nc,[e("div",rc,[M[8]||(M[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),R(e("select",{"onUpdate:modelValue":M[0]||(M[0]=E=>o(W).query.sourceLocationId=E),class:"form-select"},[M[7]||(M[7]=e("option",{value:""},"All",-1)),(t(!0),s(U,null,B(o(W).lookups.sourceLocations,E=>(t(),s("option",{value:E.id},m(E.name),9,ic))),256))],512),[[pe,o(W).query.sourceLocationId]])])]),e("div",dc,[e("div",uc,[M[9]||(M[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":M[1]||(M[1]=E=>o(W).query.genre=E),class:"form-select"},[(t(!0),s(U,null,B(o(W).lookups.genres,E=>(t(),s("option",{value:E.id},m(E.name),9,cc))),256))],512),[[pe,o(W).query.genre]])])]),e("div",mc,[e("div",fc,[M[11]||(M[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":M[2]||(M[2]=E=>o(W).query.category=E),class:"form-select"},M[10]||(M[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[pe,o(W).query.category]])])]),e("div",pc,[e("div",vc,[R(e("input",{"onUpdate:modelValue":M[3]||(M[3]=E=>o(W).query.criteria=E),onKeyup:M[4]||(M[4]=Le(E=>o(Y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[ee,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:M[5]||(M[5]=E=>o(Y)(1))},M[12]||(M[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z($,{errorMessage:o(j)},{default:F(()=>[e("div",gc,[e("table",bc,[e("thead",null,[e("tr",null,[M[16]||(M[16]=e("td",{class:"text-center"},"#",-1)),M[17]||(M[17]=e("th",null,"Name",-1)),M[18]||(M[18]=e("th",null,"Video Title",-1)),e("th",yc,[c.value.length?(t(),s(U,{key:0},[e("button",{onClick:w,class:"btn btn-sm btn-primary"},M[13]||(M[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:d,class:"btn btn-sm btn-warning ms-1"},M[14]||(M[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0),e("button",{onClick:i,class:"btn btn-sm btn-outline-primary ms-2"},M[15]||(M[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(W).items,(E,Z)=>(t(),s("tr",{key:E.vodSourceId},[e("td",{textContent:m(o(p)(Z)),class:"text-center"},null,8,$c),e("td",null,[e("div",hc,[e("div",null,[E.video.thumbnails.length>0?(t(!0),s(U,{key:0},B(E.video.thumbnails,V=>(t(),s("div",wc,[e("img",{src:V.url,class:"img-fuild border",width:"128"},null,8,_c)]))),256)):(t(),s("img",kc))]),e("div",Sc,[z(g,{to:`${n.urlView}/${E.vodSourceId}`,class:"d-inline-block text-wrap link-offset-2"},{default:F(()=>[E.arn?(t(),s("span",Tc)):H("",!0),K(m(E.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(U,null,B(E.video.categories,V=>(t(),s("div",null,[e("span",Ic,m(V.categoryName),1)]))),256)),E.video.genres.length>0?(t(),s("div",Mc,[(t(!0),s(U,null,B(E.video.genres,V=>(t(),s("span",xc,m(V.genreName),1))),256))])):H("",!0)])])])]),e("td",null,[e("div",Cc,[e("div",Vc,[z(g,{to:`${n.urlViewVideo}/${encodeURIComponent(E.video.videoId)}/${o(S)()}`,class:"link-offset-2"},{default:F(()=>[K(m(E.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Pc,m(o(le).moment.utc(E.video.durationInMillis).format("HH:mm:ss")),1)]),E.video.formats.length>0?(t(!0),s(U,{key:0},B(E.video.formats,V=>(t(),s("span",Oc,m(V.formatName),1))),256)):H("",!0)])])]),e("td",Ac,[R(e("input",{"onUpdate:modelValue":V=>E.selected=V,type:"checkbox",class:"form-check-input"},null,8,Lc),[[De,E.selected]])])]))),128))]),_:1},512),[[ke,o(W).items.length>0]])])]),z(A,{filter:o(W),search:o(Y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Dc=["id"],Ec={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},qc={class:"modal-content"},Bc={class:"modal-header"},Nc={class:"modal-title"},Rc={class:"modal-body"},Fc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},zc=["innerHTML"],Gc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},jc={class:"container"},Yc={class:"col"},Wc={class:"form-floating mb-2"},Kc=["value"],Qc={key:0,class:"d-block invalid-feedback"},Jc={class:"col"},Xc={class:"form-floating mb-2"},Zc={key:0,class:"d-block invalid-feedback"},em={class:"col"},tm={class:"form-floating mb-2"},sm=["value"],om={key:0,class:"d-block invalid-feedback"},am={class:"modal-footer"},lm=["disabled"],nm={__name:"_addPackageConfiguration",emits:["refresh"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source Package Configuration"}),W=k;fe();const X=fe("modalAddChannelOutput"),f=ge({lookups:{sourceGroups:[],formats:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),b={item:{sourceGroupId:{required:ne.withMessage("Source Group is required.",ie),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ne.withMessage("VOD Source is required.",ie),$autoDirty:!0,$lazy:!0},path:{required:ne.withMessage("Path is required.",ie),$autoDirty:!0,$lazy:!0},type:{required:ne.withMessage("Type is required.",ie),$autoDirty:!0,$lazy:!0}}},Y=Se(b,f);me(async()=>{Y.value.$reset()});const p=async()=>{await T()},T=async()=>{try{await N.get("/api/v1/sourceGroups/lookup/").then(l=>{f.lookups.sourceGroups=l.data,f.lookups.sourceGroups.length===1&&(f.item.sourceGroupId=f.lookups.sourceGroups[0].id)})}catch(i){G.value=O.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}},r=async i=>{try{const l=`/api/v1/videos/${i}/formats/`;await N.get(l).then(a=>{f.lookups.formats=a.data})}catch(l){G.value=O.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},c=async(i,l)=>{const a=f;Q.value.clear(),G.value="",a.lookups={sourceGroups:[],formats:[]},a.item={sourceGroupId:null,vodSourceId:i,path:null,type:null},await p(),await r(l),Y.value.$reset();var L=document.getElementById(X.value),M=he.getOrCreateInstance(L);M.show()},w=async()=>{var i=document.getElementById(X.value),l=he.getOrCreateInstance(i);l.hide(),W("refresh")},d=async()=>{const i=f;if(D.value)return;const l=await Y.value.$validate();debugger;if(!l){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const a=i.item;await N.post("/api/v1/vodSources/package-configurations/",a).then(L=>{u.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await w()}catch(a){G.value=O.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{D.value=!1}};return v({open:c,close:w}),(i,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ec,[e("div",qc,[e("div",Bc,[e("h5",Nc,[l[5]||(l[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=a=>w()),"aria-label":"Close"})]),e("div",Rc,[o(G)?(t(),s("div",Fc,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,zc)])):H("",!0),o(Q).size>0?(t(),s("div",Gc,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),a=>(t(),s("li",null,m(a),1))),256))])])):H("",!0),e("div",jc,[e("div",Yc,[e("div",Wc,[R(e("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>f.item.sourceGroupId=a),class:te([o(O).getValidFeedbackCss(f.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(U,null,B(f.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},m(a.name),9,Kc))),256))],2),[[pe,f.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(Y).item.sourceGroupId.$error?(t(),s("div",Qc,[(t(!0),s(U,null,B(o(Y).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):H("",!0)])]),e("div",Jc,[e("div",Xc,[R(e("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>f.item.type=a),class:te([o(O).getValidFeedbackCss(f.item.type),"form-select"]),id:"type"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[pe,f.item.type]]),l[10]||(l[10]=e("label",{for:"type",class:""},"Type",-1)),o(Y).item.type.$error?(t(),s("div",Zc,[(t(!0),s(U,null,B(o(Y).item.type.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):H("",!0)])]),e("div",em,[e("div",tm,[R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=a=>f.item.path=a),class:te([o(O).getValidFeedbackCss(f.item.path),"form-control"]),id:"path"},[(t(!0),s(U,null,B(f.lookups.formats,a=>(t(),s("option",{value:a.path},m(a.path),9,sm))),256))],2),[[pe,f.item.path]]),l[11]||(l[11]=e("label",{for:"path",class:""},"Path",-1)),o(Y).item.path.$error?(t(),s("div",om,[(t(!0),s(U,null,B(o(Y).item.path.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):H("",!0)])])])]),e("div",am,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:l[4]||(l[4]=a=>d()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,lm),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Dc))}},rm=["id"],im={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},dm={class:"modal-content"},um={class:"modal-header"},cm={class:"modal-title"},mm={class:"modal-body"},fm={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},pm=["innerHTML"],vm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},gm={class:"container"},bm={class:"col"},ym={class:"form-floating mb-2"},$m={class:"col"},hm={class:"form-floating mb-2"},wm={key:0,class:"d-block invalid-feedback"},_m={class:"col"},km={class:"form-floating mb-2"},Sm={key:0,class:"d-block invalid-feedback"},Tm={class:"col"},Im={class:"form-floating mb-2"},Mm={key:0,class:"d-block invalid-feedback"},xm={class:"modal-footer"},Cm=["disabled"],Vm={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=k,X=fe(),f=fe("modalAddPlaybackConfiguration"),b=ge({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ne.withMessage("adDecisionServerUrl is required.",ie),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ne.withMessage("videoContentSourceUrl is required.",ie),$autoDirty:!0,$lazy:!0}}},p=Se(Y,b);me(async()=>{p.value.$reset()});const T=async(w,d)=>{X.value=w;const i=b;Q.value.clear(),G.value="";const l=d,a=l.lastIndexOf("/"),L=l.substring(0,a),M="ad_campaign_"+l.substring(a+1).replace(".","_");i.item={name:M,originalVideoContentSourceUrl:d,videoContentSourceUrl:L,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},p.value.$reset();var g=document.getElementById(f.value),q=he.getOrCreateInstance(g);q.show()},r=async()=>{var w=document.getElementById(f.value),d=he.getOrCreateInstance(w);d.hide(),W("refresh")},c=async()=>{const w=b;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const i=w.item;i.vodSourceId=X.value,await N.post("/api/v1/playbackconfigurations/vodsource",i).then(l=>{u.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await r()}catch(i){G.value=O.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{D.value=!1}};return v({open:T,close:r}),(w,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:f.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",im,[e("div",dm,[e("div",um,[e("h5",cm,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=i=>r()),"aria-label":"Close"})]),e("div",mm,[o(G)?(t(),s("div",fm,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,pm)])):H("",!0),o(Q).size>0?(t(),s("div",vm,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),i=>(t(),s("li",null,m(i),1))),256))])])):H("",!0),e("div",gm,[e("div",bm,[e("div",ym,[R(e("input",{"onUpdate:modelValue":d[1]||(d[1]=i=>b.item.originalVideoContentSourceUrl=i),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[ee,b.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",$m,[e("div",hm,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=i=>b.item.name=i),id:"name",class:"form-control",placeholder:"Name"},null,512),[[ee,b.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",wm,[(t(!0),s(U,null,B(o(p).item.name.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",_m,[e("div",km,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=i=>b.item.videoContentSourceUrl=i),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[ee,b.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(p).item.videoContentSourceUrl.$error?(t(),s("div",Sm,[(t(!0),s(U,null,B(o(p).item.videoContentSourceUrl.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",Tm,[e("div",Im,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=i=>b.item.adDecisionServerUrl=i),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[ee,b.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(p).item.adDecisionServerUrl.$error?(t(),s("div",Mm,[(t(!0),s(U,null,B(o(p).item.adDecisionServerUrl.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])])])]),e("div",xm,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:d[5]||(d[5]=i=>c()),class:"btn btn-primary",type:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Cm),d[15]||(d[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,rm))}},Pm={key:0},Om={class:"nav nav-tabs",id:"myTab",role:"tablist"},Am={class:"nav-item",role:"presentation"},Lm={class:"nav-item",role:"presentation"},Um={class:"nav-item",role:"presentation"},Hm={class:"nav-item",role:"presentation"},Dm={class:"nav-item",role:"presentation"},Em={class:"tab-content",id:"myTabContent"},qm={class:""},Bm={class:"row row-cols-1 row-cols-sm-2"},Nm={class:"col"},Rm=["id"],Fm={class:"col"},zm={class:"col"},Gm={class:"form-floating mb-2"},jm={class:"mt-2"},Ym={class:"row row-cols-sm-2"},Wm={class:"col"},Km={class:"form-floating mb-2"},Qm={class:"form-control-plaintext"},Jm={class:"col"},Xm={class:"form-floating mb-2"},Zm={class:"mt-2"},ef={class:"badge bg-info me-1"},tf={class:"badge bg-primary me-1"},sf={class:"badge bg-info me-1"},of={class:"table-responsive border mt-2"},af={class:"table table-hover mb-0"},lf={class:"table-group-divider"},nf={class:"align-middle"},rf={class:"text-center"},df={class:"text-truncate text-wrap"},uf={class:"text-truncate text-wrap"},cf={class:""},mf={class:"mt-2 text-end"},ff={class:"table-responsive border mt-2"},pf={class:"table table-hover mb-0 caption-top"},vf={class:"text-end"},gf=["onClick"],bf={class:""},yf={class:"mt-1"},$f=["id"],hf={class:"text-end"},wf={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){const v=n,{appTitle:k,pageTitle:C,busy:_,isDirty:D,validations:P,infoMessage:Q,warningMessage:j,errorMessage:I,router:G,axios:le,utils:N,toasts:O,close:u,closeWithReturnUrl:S,generateReturnUrl:y,security:W}=ye({appTitle:"Arcadian-FAST",pageTitle:"View VOD Source"});Me("$config");const X=$e();X.user;const f=ge({user:X.user,item:null,hls:null}),b=fe();fe(null);const Y=fe();me(async()=>{await c();const M=N.getPageTab("vodSource")||"information-tab";p(M)}),Ae(()=>{f.hls&&(f.hls.stopLoad(),f.hls.destroy())});const p=M=>{N.setPageTab("vodSource",M),b.value=M},T=M=>M!==b.value?"":"active",r=M=>M!==b.value?"":"show active",c=async()=>{const M=f;if(!_.value)try{_.value=!0,I.value="",f.item=null;const g=`/api/v1/vodsources/${v.id}/`;await le.get(g).then(q=>{M.item=q.data;const A=M.item,$=N.moment.utc(M.item.video.durationInMillis).format("HH:mm:ss");A.video.duration=$}),L()}catch(g){I.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}},w=async()=>{await c()},d=()=>{Y.value.open(f.item.vodSourceId,f.item.videoId)},i=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!_.value){I.value=null;try{_.value=!0;const g={vodSourceIds:[v.id]};await le.post("/api/v1/vodsources/publish/",g).then(q=>{O.success("Publish VOD","VOD was published.",{async onClose(){}})}),_.value=!1,await w()}catch(g){I.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}}},l=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!_.value){I.value=null;try{_.value=!0;const g={vodSourceIds:[v.id]};await le.post("/api/v1/vodsources/unpublish/",g).then(q=>{O.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),_.value=!1,await w()}catch(g){I.value=N.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}}},a=async M=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!_.value){I.value=null;try{_.value=!0,await le.delete(`/api/v1/vodSources/package-configurations/${M}/`).then(q=>{O.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),_.value=!1,await w()}catch(q){I.value=N.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{_.value=!1}}},L=()=>{if(Hls.isSupported()){f.hls&&(f.hls.stopLoad(),f.hls.destroy());const M=`video-${f.item.vodSourceId}`,g=document.getElementById(M),q=f.item.video.formats.find($=>$.formatName==="HLS"),A=`${q.serverUrl}${q.path}`;f.hls=N.createHlsStream(g,A)}};return(M,g)=>{const q=ae("router-link"),A=ae("PageHeader"),$=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(A,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(C)},{default:F(()=>[f.item?(t(),s(U,{key:0},[f.item.arn?(t(),s("button",{key:0,onClick:g[0]||(g[0]=E=>l()),class:"ms-1 btn btn-warning"},g[14]||(g[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=E=>i()),class:"ms-1 btn btn-primary"},g[15]||(g[15]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),z(q,{to:`${n.urlEdit}/${n.id}`,class:"ms-2 btn btn-primary"},{default:F(()=>g[16]||(g[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:g[2]||(g[2]=E=>w()),class:"ms-2 btn btn-secondary"},g[17]||(g[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:g[3]||(g[3]=E=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},g[18]||(g[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z($,{errorMessage:o(I)},{default:F(()=>[f.item?(t(),s("div",Pm,[e("div",null,[e("ul",Om,[e("li",Am,[e("button",{onClick:g[4]||(g[4]=E=>p("information-tab")),class:te([T("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Lm,[e("button",{onClick:g[5]||(g[5]=E=>p("packageConfigurations-tab")),class:te([T("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Um,[e("button",{onClick:g[6]||(g[6]=E=>p("channels-tab")),class:te([T("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},g[19]||(g[19]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),K("Channels ")]),2)]),e("li",Hm,[e("button",{onClick:g[7]||(g[7]=E=>p("programs-tab")),class:te([T("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},g[20]||(g[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),K("Programs ")]),2)]),e("li",Dm,[e("button",{onClick:g[8]||(g[8]=E=>p("programTemplates-tab")),class:te([T("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},g[21]||(g[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),K("Program Templates ")]),2)])]),e("div",Em,[e("div",{class:te([r("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",qm,[e("div",Bm,[e("div",Nm,[e("video",{id:`video-${f.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,Rm)]),e("div",Fm,[e("div",zm,[e("div",Gm,[R(e("input",{"onUpdate:modelValue":g[9]||(g[9]=E=>f.item.name=E),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[ee,f.item.name]]),g[22]||(g[22]=e("label",{for:"name"},"Name",-1))])]),e("div",jm,[g[26]||(g[26]=e("b",null," Video Information ",-1)),e("div",null,[e("div",Ym,[e("div",Wm,[e("div",Km,[e("div",Qm,[z(q,{to:`${n.urlViewVideo}/${f.item.video.videoId}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(f.item.video.title),1)]),_:1},8,["to"])]),g[23]||(g[23]=e("label",{for:"title"},"Title",-1))])]),e("div",Jm,[e("div",Xm,[R(e("input",{"onUpdate:modelValue":g[10]||(g[10]=E=>f.item.video.duration=E),type:"text",class:"form-control-plaintext",id:"duration",readonly:""},null,512),[[ee,f.item.video.duration]]),g[24]||(g[24]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Zm,[(t(!0),s(U,null,B(f.item.video.genres,E=>(t(),s("span",ef,m(E.genreName),1))),256)),(t(!0),s(U,null,B(f.item.video.categories,E=>(t(),s("span",tf,m(E.categoryName),1))),256)),(t(!0),s(U,null,B(f.item.video.categories,E=>(t(),s("span",sf,m(E.categoryName),1))),256))]),e("div",of,[e("table",af,[g[25]||(g[25]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",lf,[(t(!0),s(U,null,B(f.item.video.formats,(E,Z)=>(t(),s("tr",nf,[e("td",rf,m(Z+1),1),e("td",null,m(E.formatName),1),e("td",null,[e("div",df,m(E.serverUrl),1)]),e("td",null,[e("div",uf,m(E.path),1)])]))),256))])])])])])])])])],2),e("div",{class:te([r("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",cf,[e("div",mf,[e("button",{onClick:g[11]||(g[11]=E=>d()),class:"btn btn-outline-primary btn-sm"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",ff,[e("table",pf,[g[29]||(g[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.packageConfigurations,(E,Z)=>(t(),s("tr",{key:E.packageConfigurationId,class:"align-middle"},[e("td",null,m(Z+1),1),e("td",null,m(E.path),1),e("td",null,m(E.sourceGroup.name),1),e("td",null,m(E.type),1),e("td",vf,[e("button",{onClick:V=>a(E.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,gf)])]))),128))]),_:1},512),[[ke,f.item.packageConfigurations.length>0]])])])])],2),e("div",{class:te([r("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",bf,[e("div",yf,[e("video",{id:`video-${f.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,$f),e("div",hf,[e("button",{onClick:g[12]||(g[12]=E=>f.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},g[30]||(g[30]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:te([r("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},g[31]||(g[31]=[e("div",{class:""}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:te([r("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},g[32]||(g[32]=[e("div",{class:""}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:te([r("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},g[33]||(g[33]=[e("div",{class:""}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):H("",!0)]),_:1},8,["errorMessage"]),z(nm,{ref_key:"modalAddPackageConfiguration",ref:Y,onRefresh:w},null,512),z(Vm,{ref:"modalAddPlaybackConfiguration",onRefresh:g[13]||(g[13]=E=>w())},null,512)])]),_:1})}}},_f=["id"],kf={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Sf={class:"modal-content"},Tf={class:"modal-header"},If={class:"modal-title"},Mf={class:"modal-body p-1"},xf={class:"row row-cols-1 row-cols-sm-3"},Cf={class:"col"},Vf={class:"form-floating mb-2"},Pf=["value","disabled"],Of={class:"col"},Af={class:"form-floating mb-2"},Lf=["value"],Uf={class:"col"},Hf={class:"input-group mb-2"},Df={class:"form-floating"},Ef={class:"row row-cols-1 row-cols-sm-2 g-2"},qf={class:"col-sm-4"},Bf={class:"card"},Nf={key:0,class:"mt-2"},Rf={class:"col"},Ff={class:"form-floating mb-2"},zf={class:"col ms-2 my-2"},Gf={class:"badge bg-info me-1"},jf={class:"badge bg-primary me-1"},Yf={class:"row row-cols-1 row-cols-sm-2"},Wf={class:"col"},Kf={class:"form-floating mb-2"},Qf={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Jf={class:"col"},Xf={class:"form-floating mb-2"},Zf={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},ep={class:"col"},tp={class:"form-floating mb-2"},sp={class:"col-sm-8"},op={class:"table-responsive border shadow-sm"},ap={class:"table table-sm table-hover mb-0 overflow-auto"},lp=["textContent"],np={class:"d-flex flex-row justify-content-start"},rp={class:"mt-1"},ip=["src"],dp={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},up={class:"ms-2"},cp=["onClick"],mp={class:"modal-footer"},fp="/api/v1/vodSources/search",Fe={__name:"_selectVodSource",props:{sourceLocationId:{type:String,required:!0},genreId:{type:String},categoryId:{type:String},durationInMillis:{type:String},withArn:{type:String}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const _=$e().user,{appTitle:D,pageTitle:P,busy:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,security:S,filter:y,initializeFilter:W,getQuery:X,saveQuery:f,search:b,getRowNumber:Y,setSelected:p,isSelected:T}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Select VOD Source",cacheKey:`${_==null?void 0:_.userId}/vodsources/select`,baseUrl:fp,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null,durationInMillis:0}},initializeFilter:(A,$)=>{A.value,new URLSearchParams(window.location.search),JSON.parse(localStorage.getItem($)),A.value.query.sourceLocationId=c.sourceLocationId||null,A.value.query.genreId=c.genreId||0,A.value.query.categoryId=c.categoryId||0,A.value.query.durationInMillis=c.durationInMillis||0,A.value.query.withArn=c.withArn||!1},getQuery:A=>["?c=",encodeURIComponent(A.query.criteria),"&p=",A.pageIndex,"&s=",A.pageSize,"&sf=",A.sortField,"&so=",A.sortOrder,"&slid=",A.query.sourceLocationId,"&genre=",A.query.genreId,"&category=",A.query.categoryId,"&durationInMillis=",A.query.durationInMillis,"&withArn=true"].join(""),saveQuery:(A,$)=>{localStorage.setItem($,JSON.stringify({criteria:A.query.criteria,pageIndex:A.pageIndex,pageSize:A.pageSize,sortField:A.sortField,sortOrder:A.sortOrder,visible:A.visible}))}}),r=k,c=n,w=fe("modalSelectVodSource"),d=ge({vodSource:null,hls:null});me(async()=>{W(),await i(),await l()}),Ae(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const i=async()=>{await L(),await M()},l=async()=>{G.value="",await b();var A=document.getElementById(w.value),$=he.getOrCreateInstance(A);$.show()},a=async A=>{var $=document.getElementById(w.value),E=he.getOrCreateInstance($);E.hide(),d.hls&&(d.hls.stopLoad(),d.hls.destroy()),r(A?"confirm":"cancel",A?d.vodSource:null)},L=async A=>{try{const E=await N.get("/api/v1/lookups/video-categories/").then(Z=>Z.data);y.value.lookups.categories=E}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},M=async A=>{try{const E=await N.get("/api/v1/lookups/video-genres/").then(Z=>Z.data);y.value.lookups.genres=E}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},g=A=>{d.vodSource=A,q()},q=()=>{if(Hls.isSupported()){d.hls&&(d.hls.stopLoad(),d.hls.destroy());var A=document.getElementById("video-select-preview");const E=d.vodSource.video.formats.find(V=>V.formatName==="HLS"),Z=E.serverUrl+E.path;d.hls=O.createHlsStream(A,Z)}};return v({open:l,close:a}),(A,$)=>{const E=ae("m-pagination"),Z=ae("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:w.value,tabindex:"-1","aria-hidden":"true"},[e("div",kf,[e("div",Sf,[e("div",Tf,[e("h5",If,[$[10]||($[10]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(P)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=V=>a(!1)),"aria-label":"Close"})]),e("div",Mf,[z(Z,{errorMessage:o(G)},{default:F(()=>[e("div",xf,[e("div",Cf,[e("div",Vf,[R(e("select",{"onUpdate:modelValue":$[1]||($[1]=V=>o(y).query.categoryId=V),class:"form-select",id:"category"},[(t(!0),s(U,null,B(o(y).lookups.categories,V=>(t(),s("option",{value:V.id,disabled:c.categoryId>0},m(V.name),9,Pf))),256))],512),[[pe,o(y).query.categoryId]]),$[11]||($[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",Of,[e("div",Af,[R(e("select",{"onUpdate:modelValue":$[2]||($[2]=V=>o(y).query.genreId=V),class:"form-select",id:"genre"},[(t(!0),s(U,null,B(o(y).lookups.genres,V=>(t(),s("option",{value:V.id},m(V.name),9,Lf))),256))],512),[[pe,o(y).query.genreId]]),$[12]||($[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Uf,[e("div",Hf,[e("div",Df,[R(e("input",{"onUpdate:modelValue":$[3]||($[3]=V=>o(y).query.criteria=V),onKeyup:$[4]||($[4]=Le(V=>o(b)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[ee,o(y).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[5]||($[5]=V=>o(b)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Ef,[e("div",qf,[e("div",Bf,[$[19]||($[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),d.vodSource?(t(),s("div",Nf,[e("div",Rf,[e("div",Ff,[R(e("input",{"onUpdate:modelValue":$[6]||($[6]=V=>d.vodSource.video.title=V),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[ee,d.vodSource.video.title]]),$[15]||($[15]=e("label",{for:"title"},"Title",-1))])]),e("div",zf,[e("div",null,[(t(!0),s(U,null,B(d.vodSource.video.genres,V=>(t(),s("span",Gf,m(V.genreName),1))),256)),(t(!0),s(U,null,B(d.vodSource.video.categories,V=>(t(),s("span",jf,m(V.categoryName),1))),256))])]),e("div",Yf,[e("div",Wf,[e("div",Kf,[e("div",Qf,m(o(O).moment(d.vodSource.video.dateReleased).calendar()),1),$[16]||($[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Jf,[e("div",Xf,[e("div",Zf,m(o(O).moment.utc(d.vodSource.video.durationInMillis).format("HH:mm:ss")),1),$[17]||($[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",ep,[e("div",tp,[R(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=V=>d.vodSource.video.description=V),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[ee,d.vodSource.video.description]]),$[18]||($[18]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])]),e("div",sp,[e("div",op,[e("table",ap,[$[20]||($[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(y).items,(V,re)=>(t(),s("tr",{key:V.videoId},[e("td",{textContent:m(o(Y)(re)),class:"text-center"},null,8,lp),e("td",null,[e("div",np,[e("div",null,[V.video.thumbnails.length>0?(t(!0),s(U,{key:0},B(V.video.thumbnails,J=>(t(),s("div",rp,[e("img",{src:J.url,class:"img-fuild border",width:"128"},null,8,ip)]))),256)):(t(),s("img",dp))]),e("div",up,[e("a",{onClick:J=>g(V),class:"text-wrap link-offset-2",role:"button"},m(V.name),9,cp)])])])]))),128))]),_:1},512),[[ke,o(y).items.length>0]])])]),z(E,{filter:o(y),search:o(b),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",mp,[e("button",{onClick:$[8]||($[8]=V=>a(!0)),class:"btn btn-primary",type:"button"},$[21]||($[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[9]||($[9]=V=>a(!1)),class:"btn btn-secondary ms-1"},$[22]||($[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,_f)}}},pp=["disabled"],vp={class:"container1"},gp={class:"row"},bp={class:"col-12 col-lg-5"},yp={class:"col"},$p={class:"form-floating mb-2"},hp=["value"],wp={key:0,class:"d-block invalid-feedback"},_p={class:"col"},kp={class:"form-floating"},Sp={key:0,class:"btn btn-primary",type:"button"},Tp={class:"col-12 col-lg-7"},Ip={class:"col"},Mp={class:"form-floating mb-2"},xp={key:0,class:"d-block invalid-feedback"},Cp={class:"row row-cols-1 row-cols-sm-3 mt-2"},Vp={class:"col"},Pp={class:"form-floating mb-2"},Op={key:0},Ap={key:1},Lp={key:2},Up={key:3,class:"d-block invalid-feedback"},Hp={class:"col"},Dp={class:"form-floating mb-2"},Ep={key:0},qp={key:1},Bp={key:2,class:"d-block invalid-feedback"},Np={class:"col"},Rp={class:"form-floating mb-2"},Fp={key:0,class:"mt-3"},zp={class:"table-responsive border mt-1"},Gp={class:"table table-sm mb-0 align-middle"},jp={class:"table-group-divider"},Yp={class:"text-center"},Wp=["onUpdate:modelValue","onChange"],Kp={key:0},Qp=["onUpdate:modelValue","onChange"],Jp={key:0},Xp={key:1},Zp={class:"text-start"},ev={class:"d-flex flex-row justify-content-end align-items-baseline"},tv=["onClick"],sv=["onClick"],ov={class:"col mt-2"},av={class:"row row-cols-1 row-cols-sm-2"},lv={class:"col"},nv={class:"form-floating mb-2"},rv={class:"col"},iv={class:"form-floating mb-2"},dv={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Program Template"}),O=n,u=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},startOffsetTime:null,endOffsetTime:null,item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),S={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("sourceLocationId is required.",ie),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ne.withMessage("vodSourceId is required.",ie),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ne.withMessage("startOffsetMillis is required.",ie),minValue:Ee(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ne.withMessage("endOffsetMillis is required.",ie),minValue:Ee(0),$autoDirty:!0,$lazy:!0}}},y=Se(S,u),W=Ie(()=>{const Z=I.moment;if(u.startOffsetTime&&u.startOffsetTime!=="00:00:00"&&I.isValidTime(u.startOffsetTime)){const V=Z().startOf("day"),re=V.format("YYYY-MM-DD ")+u.startOffsetTime,oe=Z(re).subtract(V);return u.item.startOffsetMillis=oe.valueOf(),u.item.startOffsetMillis}return 0}),X=Ie(()=>{const Z=I.moment;if(u.endOffsetTime&&u.endOffsetTime!=="00:00:00"&&I.isValidTime(u.endOffsetTime)){const V=Z().startOf("day"),re=V.format("YYYY-MM-DD ")+u.endOffsetTime,oe=Z(re).subtract(V);return u.item.endOffsetMillis=oe.valueOf(),u.item.endOffsetMillis}return 0}),f=Ie(()=>u.item.endOffsetMillis-u.item.startOffsetMillis),b=Ie(()=>I.moment.utc(f.value).format("HH:mm:ss")),Y=Ie(()=>{const Z=u.item.adBreaks;return Z&&Z.length>0?Z.reduce((re,J,oe)=>re+J.durationInMillis,0):0}),p=Ie(()=>{const Z=f.value+Y.value;return I.moment.utc(Z).format("HH:mm:ss")}),T=Ie(()=>I.moment.utc(Y.value).format("HH:mm:ss"));me(async()=>{await r()}),Ae(()=>{u.hls&&(u.hls.stopLoad(),u.hls.destroy())});const r=async()=>{await c(),await l()},c=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(V=>{u.lookups.sourceLocations=V.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await w(u.item.sourceLocationId)}catch(Z){P.value=I.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},w=async Z=>{try{const V=`/api/v1/vodSources/lookup/source-location/${Z}/?category=3`;await j.get(V).then(re=>{u.lookups.vodSources=re.data}),u.selected.vodSource=null,d()}catch(V){P.value=I.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{}},d=async()=>{const Z=u.selected.vodSource;Z?(u.item.vodSourceId=Z.id,u.endOffsetTime=I.moment.utc(Z.durationInMillis).format("HH:mm:ss"),await i(Z.vodSourceId),A()):(u.selected.vodSource=null,u.item.vodSourceId=null,u.startOffsetTime=null,u.endOffsetTime=null,u.hls&&(u.hls.stopLoad(),u.hls.destroy()))},i=async Z=>{try{let V=`/api/v1/vodSources/${Z}/blank-frames`;const re=await j.get(V).then(J=>J.data);u.item.adBreaks=[],re&&re.length>0&&(u.item.adBreaks=re.map(J=>{const oe=(J.endInMillis-J.startInMillis)/2+J.startInMillis;return{offsetTime:I.moment.utc(oe).format("HH:mm:ss"),offsetMillis:oe,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch{}finally{}},l=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(V=>{u.lookups.adBreakSourceLocations=V.data})}catch(Z){P.value=I.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},a=()=>{const Z={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};u.item.adBreaks.push(Z)},L=Z=>{u.item.adBreaks.splice(Z,1)},M=Z=>{const V=I.moment,re=V().startOf("day"),J=re.format("YYYY-MM-DD ")+Z.offsetTime,x=V(J).subtract(re);Z.offsetMillis=x.valueOf()},g=Z=>{const V=I.moment,re=V().startOf("day"),J=re.format("YYYY-MM-DD ")+Z.durationTime,x=V(J).subtract(re);Z.durationInMillis=x.valueOf()},q=async()=>{const Z=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const re=I.clone(Z.item),J=re.adBreaks.filter(oe=>oe.durationInMillis>0).map(oe=>({offsetMillis:oe.offsetMillis,durationInMillis:oe.durationInMillis,vodSourceId:oe.vodSource?oe.vodSource.vodSourceId:null}));re.adBreaks=J,await j.post("/api/v1/programtemplates/",re).then(oe=>{G.success("Add Program Template","Program template added.",{onClose:async()=>{const x=`${O.urlView}/${oe.data}`;await Q.push(x)}})})}catch(re){P.value=I.getErrorMessageAsHtml(re),window.scrollTo(0,0)}finally{C.value=!1}},A=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());var Z=document.getElementById("video-add-program-template");const re=u.selected.vodSource.video.formats.find(oe=>oe.formatName==="HLS"),J=re.serverUrl+re.path;u.hls=I.createHlsStream(Z,J)}},$=async()=>{const Z=Ve(Fe,{sourceLocationId:u.item.sourceLocationId,genreId:0,categoryId:3,withArn:!0},{chore:!0,keepInitial:!1}),{data:V,isCanceled:re}=await Z.reveal();if(Z.closeAll(),!re&&V){const J=V;u.selected.vodSource=J,u.item.vodSourceId=J.vodSourceId,u.startOffsetTime="00:00:00",u.endOffsetTime=I.moment.utc(J.video.durationInMillis).format("HH:mm:ss"),await i(J.vodSourceId),A()}},E=async Z=>{const V=Ve(Fe,{sourceLocationId:null,genreId:0,categoryId:1,durationInMillis:Z.durationInMillis,withArn:!0},{chore:!0,keepInitial:!1}),{data:re,isCanceled:J}=await V.reveal();V.closeAll(),!J&&re&&(Z.vodSource=re)};return(Z,V)=>{const re=ae("router-link"),J=ae("PageHeader"),oe=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(J,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:V[0]||(V[0]=x=>q()),class:"btn btn-primary"},V[9]||(V[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pp),z(re,{to:O.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>V[10]||(V[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(oe,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[e("div",null,[e("div",vp,[e("div",gp,[e("div",bp,[e("div",yp,[e("div",$p,[R(e("select",{"onUpdate:modelValue":V[1]||(V[1]=x=>u.item.sourceLocationId=x),onChange:V[2]||(V[2]=x=>w(u.item.sourceLocationId)),class:te([o(I).getValidFeedbackCss(u.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(U,null,B(u.lookups.sourceLocations,x=>(t(),s("option",{value:x.id},m(x.name),9,hp))),256))],34),[[pe,u.item.sourceLocationId]]),V[11]||(V[11]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(y).item.sourceLocationId.$error?(t(),s("div",wp,[(t(!0),s(U,null,B(o(y).item.sourceLocationId.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),e("div",_p,[e("div",{onClick:$,class:"input-group mb-2"},[e("div",kp,[e("div",{id:"selectedVodSource",class:te([o(I).getValidFeedbackCss(u.selected.vodSource),"form-control"]),placeholder:"Title"},[u.selected.vodSource?(t(),s(U,{key:0},[K(" ["+m(o(I).moment.utc(u.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(u.selected.vodSource.name),1)],64)):H("",!0)],2),V[12]||(V[12]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),u.item.sourceLocationId?(t(),s("button",Sp,V[13]||(V[13]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):H("",!0)])]),V[14]||(V[14]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Tp,[e("div",Ip,[e("div",Mp,[R(e("input",{"onUpdate:modelValue":V[3]||(V[3]=x=>u.item.name=x),id:"name",class:te([o(I).getValidFeedbackCss(u.item.name),"form-control"]),placeholder:"Name"},null,2),[[ee,u.item.name]]),V[15]||(V[15]=e("label",{for:"name",class:""},"Name",-1)),o(y).item.name.$error?(t(),s("div",xp,[(t(!0),s(U,null,B(o(y).item.name.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),e("div",Cp,[e("div",Vp,[e("div",null,[e("div",Pp,[R(e("input",{"onUpdate:modelValue":V[4]||(V[4]=x=>u.startOffsetTime=x),type:"time",step:"1",id:"startOffsetTime",class:te([o(I).getValidFeedbackCss(u.startOffsetTime),"form-control"])},null,2),[[ee,u.startOffsetTime]]),V[16]||(V[16]=e("label",{for:"startOffsetTime",class:""}," Start OffSet Time ",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Op,V[17]||(V[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),W.value>X.value&&X.value>0?(t(),s("div",Ap,V[18]||(V[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),u.selected.vodSource&&W.value>=u.selected.vodSource.durationInMillis?(t(),s("div",Lp,V[19]||(V[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(y).item.startOffsetMillis.$error?(t(),s("div",Up,[(t(!0),s(U,null,B(o(y).item.startOffsetMillis.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),e("div",Hp,[e("div",null,[e("div",Dp,[R(e("input",{"onUpdate:modelValue":V[5]||(V[5]=x=>u.endOffsetTime=x),type:"time",step:"1",id:"endOffsetTime",class:te([o(I).getValidFeedbackCss(u.endOffsetTime),"form-control"])},null,2),[[ee,u.endOffsetTime]]),V[20]||(V[20]=e("label",{for:"endOffsetTime",class:""}," End OffSet Time ",-1))]),X.value>0&&X.value<3e4?(t(),s("div",Ep,V[21]||(V[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),u.selected.vodSource&&X.value>u.selected.vodSource.durationInMillis?(t(),s("div",qp,V[22]||(V[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(y).item.endOffsetMillis.$error?(t(),s("div",Bp,[(t(!0),s(U,null,B(o(y).item.endOffsetMillis.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),e("div",Np,[e("div",Rp,[R(e("input",{"onUpdate:modelValue":V[6]||(V[6]=x=>b.value=x),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[ee,b.value]]),V[23]||(V[23]=e("label",{for:"durationTime"},"Clip",-1))])])]),u.item.vodSourceId?(t(),s("div",Fp,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[V[25]||(V[25]=e("div",{class:"fw-bold small"}," Ad Break ",-1)),e("div",null,[e("button",{onClick:a,class:"btn btn-outline-primary btn-sm"},V[24]||(V[24]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",zp,[e("table",Gp,[V[29]||(V[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",jp,[(t(!0),s(U,null,B(u.item.adBreaks,(x,ue)=>(t(),s("tr",null,[e("td",Yp,m(ue+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":se=>x.offsetTime=se,onChange:se=>M(x),type:"time",step:"1",class:te([o(I).getValidFeedbackCss(x.offsetTime),"form-control"])},null,42,Wp),[[ee,x.offsetTime]]),x.offsetMillis>=u.selected.vodSource.durationInMillis?(t(),s("div",Kp,V[26]||(V[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":se=>x.durationTime=se,onChange:se=>g(x),type:"time",step:"1",class:te([o(I).getValidFeedbackCss(x.durationTime),"form-control"])},null,42,Qp),[[ee,x.durationTime]])]),e("td",null,[x.vodSource?(t(),s("span",Jp,m(x.vodSource.name),1)):H("",!0),x.durationInMillis<=0?(t(),s("span",Xp," Specify the Ad Break Duration Time to configure the VOD to assign ")):H("",!0)]),e("td",Zp,[e("div",ev,[x.durationInMillis>0?(t(),s("button",{key:0,onClick:se=>E(x),class:"btn btn-outline-info btn-sm"},V[27]||(V[27]=[e("span",{class:"fas fa-fw fa-cog"},null,-1)]),8,tv)):H("",!0),e("button",{onClick:se=>L(ue),class:"btn btn-outline-warning btn-sm ms-2"},V[28]||(V[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,sv)])])]))),256))])]),V[30]||(V[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),K(" Vod source can also be defined during creation of Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0),e("div",ov,[V[33]||(V[33]=e("div",{class:"fw-bold small"}," Duration ",-1)),e("div",av,[e("div",lv,[e("div",nv,[R(e("input",{"onUpdate:modelValue":V[7]||(V[7]=x=>T.value=x),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[ee,T.value]]),V[31]||(V[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",rv,[e("div",iv,[R(e("input",{"onUpdate:modelValue":V[8]||(V[8]=x=>p.value=x),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[ee,p.value]]),V[32]||(V[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},uv=["disabled"],cv={class:"container1"},mv={class:"row"},fv={class:"col-12 col-lg-5"},pv={class:"col"},vv={class:"form-floating mb-2"},gv=["value"],bv={key:0,class:"d-block invalid-feedback"},yv={class:"col"},$v={class:"form-floating"},hv={id:"selectedVodSource",class:"form-control",placeholder:"Title"},wv={class:"col-12 col-lg-7"},_v={class:"col"},kv={class:"form-floating mb-2"},Sv={key:0,class:"d-block invalid-feedback"},Tv={class:"row row-cols- row-cols-sm-3"},Iv={class:"col"},Mv={class:"form-floating mb-2"},xv={key:0},Cv={key:1},Vv={key:2},Pv={key:3,class:"d-block invalid-feedback"},Ov={class:"col"},Av={class:"form-floating"},Lv={key:0},Uv={key:1},Hv={key:2,class:"d-block invalid-feedback"},Dv={class:"col"},Ev={class:"form-floating mb-2"},qv={key:0,class:"mt-2"},Bv={class:"table-responsive border mt-1"},Nv={class:"table table-sm mb-0 align-middle"},Rv={class:"table-group-divider"},Fv=["onUpdate:modelValue","onChange"],zv={key:0},Gv=["onUpdate:modelValue","onChange"],jv={key:0},Yv=["onClick"],Wv={key:1},Kv={class:"text-start"},Qv={class:"d-flex flex-row justify-content-end align-items-baseline"},Jv=["onClick"],Xv=["onClick"],Zv={class:"col mt-2"},eg={class:"row row-cols-1 row-cols-sm-2"},tg={class:"col"},sg={class:"form-floating mb-2"},og={class:"col"},ag={class:"form-floating mb-2"},lg={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,closeWithReturnUrl:N,security:O}=ye({appTitle:"Arcadian-FAST",pageTitle:"Edit Program Template"}),u=n,S=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),y=fe(!0),W={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("sourceLocationId is required.",ie),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ne.withMessage("vodSourceId is required.",ie),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ne.withMessage("startOffsetMillis is required.",ie),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ne.withMessage("endOffsetMillis is required.",ie),$autoDirty:!0,$lazy:!0}}},X=Se(W,S),f=Ie(()=>{if(S.startOffsetTime&&S.startOffsetTime!=="00:00:00"&&I.isValidTime(S.startOffsetTime)){const oe=I.moment,x=oe().startOf("day"),se=oe(S.startOffsetTime,"hh:mm:ss").diff(x);return S.item.startOffsetMillis=se.valueOf(),S.item.startOffsetMillis}return 0}),b=Ie(()=>{if(S.endOffsetTime&&S.endOffsetTime!=="00:00:00"&&I.isValidTime(S.endOffsetTime)){const oe=I.moment,x=oe().startOf("day"),se=oe(S.endOffsetTime,"hh:mm:ss").diff(x);return S.item.endOffsetMillis=se.valueOf(),S.item.endOffsetMillis}return 0}),Y=Ie(()=>S.item.endOffsetMillis-S.item.startOffsetMillis),p=Ie(()=>I.moment.utc(Y.value).format("HH:mm:ss")),T=Ie(()=>{const oe=S.item.adBreaks;return oe&&oe.length>0?oe.reduce((ue,se,h)=>ue+se.durationInMillis,0):0}),r=Ie(()=>{const oe=Y.value+T.value;return I.moment.utc(oe).format("HH:mm:ss")}),c=Ie(()=>I.moment.utc(T.value).format("HH:mm:ss"));me(async()=>{await w()});const w=async()=>{y.value=!0,await d(),await i(),await l()},d=async()=>{try{const oe=`/api/v1/programtemplates/${u.id}/`;await j.get(oe).then(x=>{S.item=x.data}),S.startOffsetTime=I.moment.utc(S.item.startOffsetMillis).format("HH:mm:ss"),S.endOffsetTime=I.moment.utc(S.item.endOffsetMillis).format("HH:mm:ss"),S.item.adBreaks.forEach(x=>{x.offsetTime=I.moment.utc(x.offsetMillis).format("HH:mm:ss"),x.durationTime=I.moment.utc(x.durationInMillis).format("HH:mm:ss")})}catch(oe){P.value=I.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{}},i=async()=>{try{const oe=`/api/v1/vodSources/${S.item.vodSourceId}/`;await j.get(oe).then(x=>{S.selected.vodSource=x.data}),Z()}catch(oe){P.value=I.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{}},l=async()=>{await a()},a=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(x=>{S.lookups.sourceLocations=x.data}),S.item.sourceLocationId&&await L(S.item.sourceLocationId)}catch(oe){P.value=I.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{}},L=async oe=>{try{const x=`/api/v1/vodSources/lookup/source-location/${oe}/?type=3`;if(await j.get(x).then(ue=>{S.lookups.vodSources=ue.data}),y.value){y.value=!1;return}S.selected.vodSource=null,M()}catch(x){P.value=I.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},M=async()=>{const oe=S.selected.vodSource;if(oe){debugger;S.item.vodSourceId=oe.vodSourceId,S.startOffsetTime=I.moment.utc(0).format("HH:mm:ss"),S.endOffsetTime=I.moment.utc(oe.video.durationInMillis).format("HH:mm:ss"),Z()}else S.selected.vodSource=null,S.item.vodSourceId=null,S.startOffsetTime=null,S.endOffsetTime=null,S.hls&&(S.hls.stopLoad(),S.hls.destroy())},g=()=>{const oe={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};S.item.adBreaks.push(oe)},q=oe=>{S.item.adBreaks.splice(oe,1)},A=oe=>{const x=I.moment,ue=x().startOf("day"),se=ue.format("YYYY-MM-DD ")+oe.offsetTime,ce=x(se).subtract(ue);oe.offsetMillis=ce.valueOf()},$=oe=>{const x=I.moment,ue=x().startOf("day"),se=ue.format("YYYY-MM-DD ")+oe.durationTime,ce=x(se).subtract(ue);oe.durationInMillis=ce.valueOf()},E=async()=>{const oe=S;if(C.value)return;if(!await X.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const ue=I.clone(oe.item);debugger;const se=ue.adBreaks.filter(h=>h.durationInMillis>0).map(h=>{debugger;return{offsetMillis:h.offsetMillis,durationInMillis:h.durationInMillis,vodSourceId:h.vodSource?h.vodSource.vodSourceId:null}});ue.adBreaks=se,await j.put("/api/v1/programtemplates/",ue).then(h=>{G.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ce=`${u.urlView}/${u.id}`;await Q.push(ce)}})})}catch(ue){P.value=I.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{C.value=!1}},Z=()=>{if(Hls.isSupported()){S.hls&&(S.hls.stopLoad(),S.hls.destroy());var oe=document.getElementById("video-edit-program-template");const ue=S.selected.vodSource.video.formats.find(h=>h.formatName==="HLS"),se=ue.serverUrl+ue.path;S.hls=I.createHlsStream(oe,se)}},V=async oe=>{try{let x=`/api/v1/vodSources/${oe}/blank-frames`;const ue=await j.get(x).then(se=>se.data);S.item.adBreaks=[],ue&&ue.length>0&&(S.item.adBreaks=ue.map(se=>{const h=(se.endInMillis-se.startInMillis)/2+se.startInMillis;return{offsetTime:I.moment.utc(h).format("HH:mm:ss"),offsetMillis:h,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(x){P.value=I.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},re=async()=>{const oe=Ve(Fe,{sourceLocationId:S.sourceLocationId,genreId:0,categoryId:3,withArn:!0},{chore:!0,keepInitial:!1}),{data:x,isCanceled:ue}=await oe.reveal();if(oe.closeAll(),!ue&&x){const se=x;S.selected.vodSource=se,S.item.vodSourceId=se.vodSourceId,M(),await V(se.vodSourceId)}},J=async oe=>{const x=Ve(Fe,{sourceLocationId:null,genreId:0,categoryId:1,durationInMillis:oe.durationInMillis,withArn:!0},{chore:!0,keepInitial:!1}),{data:ue,isCanceled:se}=await x.reveal();x.closeAll(),!se&&ue&&(oe.vodSource=ue)};return(oe,x)=>{const ue=ae("PageHeader"),se=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(ue,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(X).$dirty&&o(X).$invalid,onClick:x[0]||(x[0]=h=>E()),class:"btn btn-primary"},x[11]||(x[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,uv),e("button",{onClick:x[1]||(x[1]=h=>w()),class:"btn btn-secondary ms-2"},x[12]||(x[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:x[2]||(x[2]=h=>o(N)(u.urlMain)),class:"btn btn-secondary ms-1"},x[13]||(x[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(se,{errorMessage:o(P),vuelidate:o(X)},{default:F(()=>[e("div",null,[e("div",cv,[e("div",mv,[e("div",fv,[e("div",pv,[e("div",vv,[R(e("select",{"onUpdate:modelValue":x[3]||(x[3]=h=>S.item.sourceLocationId=h),onChange:x[4]||(x[4]=h=>L(S.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,B(S.lookups.sourceLocations,h=>(t(),s("option",{value:h.id},m(h.name),9,gv))),256))],544),[[pe,S.item.sourceLocationId]]),x[14]||(x[14]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(X).item.sourceLocationId.$error?(t(),s("div",bv,[(t(!0),s(U,null,B(o(X).item.sourceLocationId.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):H("",!0)])]),e("div",yv,[e("div",{onClick:re,class:"input-group mb-2"},[e("div",$v,[e("div",hv,[S.selected.vodSource?(t(),s(U,{key:0},[K(" ["+m(o(I).moment.utc(S.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(S.selected.vodSource.name),1)],64)):H("",!0)]),x[15]||(x[15]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),x[16]||(x[16]=e("button",{class:"btn btn-primary",type:"button"},[e("i",{class:"fa-solid fa-filter"})],-1))])]),x[17]||(x[17]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",wv,[e("div",_v,[e("div",kv,[R(e("input",{"onUpdate:modelValue":x[5]||(x[5]=h=>S.item.name=h),id:"name",class:te([o(I).getValidFeedbackCss(S.item.name),"form-control"]),placeholder:"Name"},null,2),[[ee,S.item.name]]),x[18]||(x[18]=e("label",{for:"name",class:""},"Name",-1)),o(X).item.name.$error?(t(),s("div",Sv,[(t(!0),s(U,null,B(o(X).item.name.$errors,h=>(t(),s("div",{key:h.$uid},' d" '+m(h.$message),1))),128))])):H("",!0)])]),e("div",Tv,[e("div",Iv,[e("div",Mv,[R(e("input",{"onUpdate:modelValue":x[6]||(x[6]=h=>S.startOffsetTime=h),type:"time",step:"1",id:"startOffsetTime",class:te([o(I).getValidFeedbackCss(S.startOffsetTime),"form-control"])},null,2),[[ee,S.startOffsetTime]]),x[19]||(x[19]=e("label",{for:"startOffsetTime",class:""},"Start OffSet Time",-1))]),f.value>0&&f.value<3e4?(t(),s("div",xv,x[20]||(x[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),f.value>b.value&&b.value>0?(t(),s("div",Cv,x[21]||(x[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),S.selected.vodSource&&f.value>=S.selected.vodSource.durationInMillis?(t(),s("div",Vv,x[22]||(x[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(X).item.startOffsetMillis.$error?(t(),s("div",Pv,[(t(!0),s(U,null,B(o(X).item.startOffsetMillis.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):H("",!0)]),e("div",Ov,[e("div",Av,[R(e("input",{"onUpdate:modelValue":x[7]||(x[7]=h=>S.endOffsetTime=h),type:"time",step:"1",id:"endOffsetTime",class:te([o(I).getValidFeedbackCss(S.endOffsetTime),"form-control"])},null,2),[[ee,S.endOffsetTime]]),x[23]||(x[23]=e("label",{for:"endOffsetTime",class:""},"End OffSet Time",-1))]),b.value>0&&b.value<3e4?(t(),s("div",Lv,x[24]||(x[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),S.selected.vodSource&&b.value>S.selected.vodSource.durationInMillis?(t(),s("div",Uv,x[25]||(x[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(X).item.endOffsetMillis.$error?(t(),s("div",Hv,[(t(!0),s(U,null,B(o(X).item.endOffsetMillis.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):H("",!0)]),e("div",Dv,[e("div",Ev,[R(e("input",{"onUpdate:modelValue":x[8]||(x[8]=h=>p.value=h),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[ee,p.value]]),x[26]||(x[26]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),S.selected.vodSource?(t(),s("div",qv,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[x[28]||(x[28]=e("b",null," Ad Break ",-1)),e("div",null,[e("button",{onClick:g,class:"btn btn-outline-primary btn-sm"},x[27]||(x[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Bv,[e("table",Nv,[x[33]||(x[33]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",Rv,[(t(!0),s(U,null,B(S.item.adBreaks,(h,ce)=>(t(),s("tr",null,[e("td",null,m(ce+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>h.offsetTime=we,onChange:we=>A(h),type:"time",step:"1",class:"form-control"},null,40,Fv),[[ee,h.offsetTime]]),h.offsetMillis>=S.selected.vodSource.durationInMillis?(t(),s("div",zv,x[29]||(x[29]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>h.durationTime=we,onChange:we=>$(h),type:"time",step:"1",class:"form-control"},null,40,Gv),[[ee,h.durationTime]])]),e("td",null,[h.vodSource?(t(),s("span",jv,[e("button",{onClick:we=>h.vodSource=null,class:"btn btn-outline-warning btn-sm me-1"},x[30]||(x[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]),8,Yv),K(m(h.vodSource.name),1)])):H("",!0),h.durationInMillis<=0?(t(),s("span",Wv," Specify the Ad Break Duration Time to configure the VOD to assign ")):H("",!0)]),e("td",Kv,[e("div",Qv,[h.durationInMillis>0?(t(),s("button",{key:0,onClick:we=>J(h),class:"btn btn-outline-info btn-sm"},x[31]||(x[31]=[e("span",{class:"fas fa-fw fa-cog"},null,-1)]),8,Jv)):H("",!0),e("button",{onClick:we=>q(ce),class:"btn btn-outline-warning btn-sm ms-2"},x[32]||(x[32]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Xv)])])]))),256))])]),x[34]||(x[34]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),K(" Vod source can also be defined during creation of Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0),e("div",Zv,[x[37]||(x[37]=e("b",null," Duration ",-1)),e("div",eg,[e("div",tg,[e("div",sg,[R(e("input",{"onUpdate:modelValue":x[9]||(x[9]=h=>c.value=h),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[ee,c.value]]),x[35]||(x[35]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",og,[e("div",ag,[R(e("input",{"onUpdate:modelValue":x[10]||(x[10]=h=>r.value=h),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[ee,r.value]]),x[36]||(x[36]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ng={class:"ms-1"},rg={class:"input-group"},ig={class:"table-responsive border shadow-sm"},dg={class:"table table-hover mb-0"},ug=["textContent"],cg={class:"d-flex flex-column flex-lg-row justify-content-start"},mg={class:""},fg={class:"mb-11"},pg=["src"],vg={class:"ms-lg-2"},gg={key:0,class:"fas fa-fw fa-check-circle text-success"},bg={class:"text-wrap text-truncate",style:{width:"20px !important"}},yg={class:"badge bg-primary me-1"},$g={key:0},hg={class:"badge bg-info me-1"},wg={class:"text-end me-0 me-sm-5"},_g={class:"text-center"},kg={class:"mt-3 mt-lg-2"},Sg="/api/v1/programTemplates/search",Tg={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){Me("$config");const k=$e().user,{appTitle:C,pageTitle:_,busy:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,generateReturnUrl:u,security:S,filter:y,initializeFilter:W,getQuery:X,saveQuery:f,search:b,getRowNumber:Y,setSelected:p,isSelected:T}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Program Templates",cacheKey:`${k==null?void 0:k.userId}/program-templates/search`,baseUrl:Sg,filter:{updateUrl:!0}});return me(async()=>{W(),await b()}),(r,c)=>{const w=ae("router-link"),d=ae("PageHeader"),i=ae("m-pagination"),l=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(d,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:F(()=>[z(w,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ng,[e("div",rg,[R(e("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>o(y).query.criteria=a),onKeyup:c[1]||(c[1]=Le(a=>o(b)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[ee,o(y).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[2]||(c[2]=a=>o(b)(1))},c[4]||(c[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(l,{errorMessage:o(j)},{default:F(()=>[e("div",ig,[e("table",dg,[c[5]||(c[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th",null,"Source")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(y).items,(a,L)=>(t(),s("tr",{key:a.programTemplateId},[e("td",{textContent:m(o(Y)(L)),class:"text-center"},null,8,ug),e("td",null,[e("div",cg,[e("div",mg,[a.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},B(a.vodSource.video.thumbnails,M=>(t(),s("div",fg,[e("img",{src:M.url,class:"img-fuild border",width:"128"},null,8,pg)]))),256)):H("",!0)]),e("div",vg,[z(w,{to:`${n.urlView}/${a.programTemplateId}`,class:"d-inline-block text-wrap link-offset-2"},{default:F(()=>[a.arn?(t(),s("span",gg)):H("",!0),e("span",bg,m(a.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(U,null,B(a.vodSource.video.categories,M=>(t(),s("div",null,[e("span",yg,m(M.categoryName),1)]))),256)),a.vodSource.video.genres.length>0?(t(),s("div",$g,[(t(!0),s(U,null,B(a.vodSource.video.genres,M=>(t(),s("span",hg,m(M.genreName),1))),256))])):H("",!0)])])])]),e("td",wg,m(o(le).moment.utc(a.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",_g,m(a.adBreaks.length),1),e("td",null,[e("div",null,[z(w,{to:`${n.urlViewSourceLocation}/${a.sourceLocationId}/${o(u)()}`,class:"link-offset-2"},{default:F(()=>[K(m(a.sourceLocation.name),1)]),_:2},1032,["to"])]),e("div",kg,[z(w,{to:`${n.urlViewVodSource}/${a.vodSourceId}/${o(u)()}`,class:"link-offset-2"},{default:F(()=>[K(m(a.vodSource.name),1)]),_:2},1032,["to"])])])]))),128))]),_:1},512),[[ke,o(y).items.length>0]])])]),z(i,{filter:o(y),search:o(b),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ig={key:0},Mg={class:"nav nav-tabs",id:"myTab",role:"tablist"},xg={class:"nav-item",role:"presentation"},Cg={class:"nav-item",role:"presentation"},Vg={class:"nav-item d-none",role:"presentation"},Pg={class:"tab-content",id:"myTabContent"},Og={class:""},Ag={class:""},Lg={class:"row row-cols-1 row-cols-lg-2"},Ug={class:"col"},Hg={class:"col"},Dg={class:"form-floating mb-2"},Eg={id:"sourceLocation",class:"form-control-plaintext"},qg={class:"col"},Bg={class:"form-floating mb-2"},Ng={id:"vodSource",class:"form-control-plaintext"},Rg={class:"col"},Fg={class:"col"},zg={class:"form-floating mb-2"},Gg={class:"row row-cols-1 row-cols-sm-3"},jg={class:"col"},Yg={class:"form-floating mb-2"},Wg={class:"col"},Kg={class:"form-floating mb-2"},Qg={class:"col"},Jg={class:"form-floating mb-2"},Xg={class:"row row-cols-1 row-cols-sm-3"},Zg={class:"col"},e1={class:"form-floating mb-2"},t1={class:"col"},s1={class:"form-floating mb-2"},o1={class:""},a1={class:"table-responsive border"},l1={class:"table table-hover mb-0"},n1={class:"text-center"},r1={key:0},i1={class:"mt-2"},d1={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const v=n,{appTitle:k,pageTitle:C,busy:_,isDirty:D,validations:P,infoMessage:Q,warningMessage:j,errorMessage:I,router:G,axios:le,utils:N,toasts:O,close:u,closeWithReturnUrl:S,generateReturnUrl:y,security:W}=ye({appTitle:"Arcadian-FAST",pageTitle:"View Program Template"});Me("$config");const X=$e();X.user;const f=ge({user:X.user,item:null,hls:null}),b=fe();me(async()=>{await r(),b.value=N.getPageTab("programTemplate")||"information-tab"});const Y=d=>{N.setPageTab("programTemplate",d),b.value=d},p=d=>d!==b.value?"":"active",T=d=>d!==b.value?"":"show active",r=async()=>{const d=f;if(!_.value)try{_.value=!0,I.value="",f.item=null;const i=`/api/v1/programTemplates/${v.id}/`;await le.get(i).then(l=>{d.item=l.data;const a=d.item;a.startOffsetTime=N.moment.utc(a.startOffsetMillis).format("HH:mm:ss"),a.endOffsetTime=N.moment.utc(a.endOffsetMillis).format("HH:mm:ss"),a.durationTime=N.moment.utc(a.durationInMillis).format("HH:mm:ss"),a.adBreaksDurationTime=N.moment.utc(a.adBreaksDurationInMillis).format("HH:mm:ss"),a.totalProgramTemplateDurationTime=N.moment.utc(a.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const L=a.vodSource.video,M=L.durationInMillis;L.durationInMillis=N.moment.utc(M).format("HH:mm:ss")}),f.item.vodSource&&await w(f.item.vodSourceId)}catch(i){I.value=N.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{await r()},w=async d=>{try{let i=`/api/v1/vodSources/${d}/hls`;const l=await le.get(i).then(L=>L.data);f.hls&&f.hls.destroy();const a=document.getElementById("video-view-program-template");f.hls=N.createHlsStream(a,l,"Previewing VOD.")}catch(i){I.value=N.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}};return(d,i)=>{const l=ae("router-link"),a=ae("PageHeader"),L=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(C)},{default:F(()=>[z(l,{to:`${n.urlEdit}/${n.id}/${o(y)()}`,class:"ms-2 btn btn-primary"},{default:F(()=>i[11]||(i[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:i[0]||(i[0]=M=>c()),class:"ms-2 btn btn-secondary"},i[12]||(i[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:i[1]||(i[1]=M=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},i[13]||(i[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(L,{errorMessage:o(I)},{default:F(()=>[f.item?(t(),s("div",Ig,[e("div",null,[e("ul",Mg,[e("li",xg,[e("button",{onClick:i[2]||(i[2]=M=>Y("information-tab")),class:te([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Cg,[e("button",{onClick:i[3]||(i[3]=M=>Y("adBreaks-tab")),class:te([p("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Vg,[e("button",{onClick:i[4]||(i[4]=M=>Y("programs-tab")),class:te([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Pg,[e("div",{class:te([T("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Og,[e("div",Ag,[e("div",Lg,[e("div",Ug,[e("div",Hg,[e("div",Dg,[e("div",Eg,[z(l,{to:`${n.urlViewSourceLocation}/${f.item.sourceLocationId}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(f.item.sourceLocation.name),1)]),_:1},8,["to"])]),i[14]||(i[14]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",qg,[e("div",Bg,[e("div",Ng,[z(l,{to:`${n.urlViewVodSource}/${f.item.vodSourceId}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(f.item.vodSource.name),1)]),_:1},8,["to"])]),i[15]||(i[15]=e("label",{for:"vodSource",class:""},"VOD Name",-1))])]),i[16]||(i[16]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Rg,[e("div",Fg,[e("div",zg,[R(e("input",{"onUpdate:modelValue":i[5]||(i[5]=M=>f.item.name=M),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[ee,f.item.name]]),i[17]||(i[17]=e("label",{for:"name",class:""},"Name",-1))])]),e("div",Gg,[e("div",jg,[e("div",Yg,[R(e("input",{"onUpdate:modelValue":i[6]||(i[6]=M=>f.item.startOffsetTime=M),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[ee,f.item.startOffsetTime]]),i[18]||(i[18]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",Wg,[e("div",Kg,[R(e("input",{"onUpdate:modelValue":i[7]||(i[7]=M=>f.item.endOffsetTime=M),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[ee,f.item.endOffsetTime]]),i[19]||(i[19]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",Qg,[e("div",Jg,[R(e("input",{"onUpdate:modelValue":i[8]||(i[8]=M=>f.item.durationTime=M),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[ee,f.item.durationTime]]),i[20]||(i[20]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",Xg,[e("div",Zg,[e("div",e1,[R(e("input",{"onUpdate:modelValue":i[9]||(i[9]=M=>f.item.adBreaksDurationTime=M),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[ee,f.item.adBreaksDurationTime]]),i[21]||(i[21]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks",-1))])]),e("div",t1,[e("div",s1,[R(e("input",{"onUpdate:modelValue":i[10]||(i[10]=M=>f.item.totalProgramTemplateDurationTime=M),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[ee,f.item.totalProgramTemplateDurationTime]]),i[22]||(i[22]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:te([T("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",o1,[e("div",a1,[e("table",l1,[i[23]||(i[23]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"Vod Source")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.adBreaks,(M,g)=>(t(),s("tr",{key:M.programTemplateAdBreakId},[e("td",n1,m(g+1),1),e("td",null,m(o(N).moment.utc(M.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(N).moment.utc(M.durationInMillis).format("HH:mm:ss")),1),e("td",null,[M.vodSource?(t(),s("span",r1,[z(l,{to:`${n.urlViewVodSource}/${M.vodSourceId}/${o(y)()}`,class:"link-offset-2"},{default:F(()=>[K(m(M.vodSource.name),1)]),_:2},1032,["to"])])):H("",!0)])]))),128))]),_:1},512),[[ke,f.item.adBreaks.length>0]])])])])],2),e("div",{class:te([T("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",i1,[e("pre",null,m(f.item.programs),1)])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},u1=["disabled"],c1={class:"row row-cols-1 row-cols-sm-3"},m1={class:"col-sm-6"},f1={class:"form-floating mb-2"},p1={key:0,class:"d-block invalid-feedback"},v1={class:"col-sm-3"},g1={class:"form-floating mb-2"},b1={key:0,class:"d-block invalid-feedback"},y1={class:"col-sm-3"},$1={class:"form-floating mb-2"},h1=["disabled"],w1={key:0,class:"d-block invalid-feedback"},_1={class:"row row-cols-1 row-cols-sm-2"},k1={class:"col"},S1={class:"form-floating mb-2"},T1=["value"],I1={key:0,class:"d-block invalid-feedback"},M1={class:"col"},x1={class:"form-floating mb-2"},C1=["value"],V1={key:0,class:"d-block invalid-feedback"},P1={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Channel"}),O=n,u=ge({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),S={item:{name:{title:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},tier:{title:ne.withMessage("Tier is required.",ie),$autoDirty:!0,$lazy:!0},playbackMode:{title:ne.withMessage("PlaybackMode is required.",ie),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:ne.withMessage("Filler Slate Source Location is required.",ie),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:ne.withMessage("Filler Slate Vod Source is required.",ie),$autoDirty:!0,$lazy:!0},policy:{title:ne.withMessage("Policy is required.",ie),$autoDirty:!0,$lazy:!0}}},y=Se(S,u);me(async()=>{await W()});const W=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(r=>{u.lookups.sourceLocations=r.data,u.lookups.sourceLocations.length===1&&(u.item.fillerSlateSourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.fillerSlateSourceLocationId&&await f(u.item.fillerSlateSourceLocationId)}catch(T){P.value=I.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},X=async()=>{u.item.fillerSlateVodSourceId=null,await f(u.item.fillerSlateSourceLocationId)},f=async T=>{try{let r=`/api/v1/vodSources/lookup/source-location/${T}/?category=2`;await j.get(r).then(c=>{u.lookups.vodSources=c.data})}catch(r){P.value=I.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},b=()=>{if(u.item.name){const T=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${u.item.name}"}]}`;u.item.policy=T}else u.item.policy=null},Y=async()=>{const T=u;if(C.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,P.value="";const c=I.clone(T.item);await j.post("/api/v1/channels/",c).then(w=>{G.success("Add Channel","Channel added.",{onClose:async()=>{const d=`${O.urlView}/${w.data}`;await Q.push(d)}})})}catch(c){P.value=I.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{C.value=!1}},p=()=>{u.item.playbackMode==="LOOP"&&u.item.tier!=="BASIC"&&(u.item.tier="BASIC")};return(T,r)=>{const c=ae("router-link"),w=ae("PageHeader"),d=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(w,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k)},{default:F(()=>[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:r[0]||(r[0]=i=>Y()),class:"btn btn-primary"},r[9]||(r[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,u1),z(c,{to:O.urlMain,class:"btn btn-secondary ms-2"},{default:F(()=>r[10]||(r[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(d,{errorMessage:o(P),vuelidate:o(y)},{default:F(()=>[e("div",null,[e("div",c1,[e("div",m1,[e("div",f1,[R(e("input",{"onUpdate:modelValue":r[1]||(r[1]=i=>u.item.name=i),onChange:r[2]||(r[2]=i=>b()),id:"name",class:te([o(I).getValidFeedbackCss(u.item.name),"form-control"]),placeholder:"name"},null,34),[[ee,u.item.name]]),r[11]||(r[11]=e("label",{for:"name",class:""},"Name",-1)),o(y).item.name.$error?(t(),s("div",p1,[(t(!0),s(U,null,B(o(y).item.name.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",v1,[e("div",g1,[R(e("select",{"onUpdate:modelValue":r[3]||(r[3]=i=>u.item.playbackMode=i),onChange:r[4]||(r[4]=i=>p()),id:"playbackMode",class:"form-control",placeholder:"playbackMode"},r[12]||(r[12]=[e("option",{value:"LINEAR"},"LINEAR",-1),e("option",{value:"LOOP"},"LOOP",-1)]),544),[[pe,u.item.playbackMode]]),r[13]||(r[13]=e("label",{for:"playbackMode",class:""},"PlaybackMode",-1)),o(y).item.playbackMode.$error?(t(),s("div",b1,[(t(!0),s(U,null,B(o(y).item.playbackMode.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",y1,[e("div",$1,[R(e("select",{"onUpdate:modelValue":r[5]||(r[5]=i=>u.item.tier=i),id:"tier",class:"form-control",placeholder:"Tier",disabled:u.item.playbackMode==="LOOP"},r[14]||(r[14]=[e("option",{value:"BASIC"},"BASIC",-1),e("option",{value:"STANDARD"},"STANDARD",-1)]),8,h1),[[pe,u.item.tier]]),r[15]||(r[15]=e("label",{for:"tier",class:""},"Tier",-1)),o(y).item.tier.$error?(t(),s("div",w1,[(t(!0),s(U,null,B(o(y).item.tier.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])])]),r[18]||(r[18]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",_1,[e("div",k1,[e("div",S1,[R(e("select",{"onUpdate:modelValue":r[6]||(r[6]=i=>u.item.fillerSlateSourceLocationId=i),onChange:r[7]||(r[7]=i=>X()),class:te([o(I).getValidFeedbackCss(u.item.fillerSlateSourceLocationId),"form-select"]),id:"fillerSlateSourceLocationId"},[(t(!0),s(U,null,B(u.lookups.sourceLocations,i=>(t(),s("option",{value:i.id},m(i.name),9,T1))),256))],34),[[pe,u.item.fillerSlateSourceLocationId]]),r[16]||(r[16]=e("label",{for:"fillerSlateSourceLocationId",class:""},"Source Location",-1)),o(y).item.fillerSlateSourceLocationId.$error?(t(),s("div",I1,[(t(!0),s(U,null,B(o(y).item.fillerSlateSourceLocationId.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",M1,[e("div",x1,[R(e("select",{"onUpdate:modelValue":r[8]||(r[8]=i=>u.item.fillerSlateVodSourceId=i),class:te([o(I).getValidFeedbackCss(u.item.fillerSlateVodSourceId),"form-select"]),id:"fillerSlateVodSourceId"},[(t(!0),s(U,null,B(u.lookups.vodSources,i=>(t(),s("option",{value:i.id},m(i.name),9,C1))),256))],2),[[pe,u.item.fillerSlateVodSourceId]]),r[17]||(r[17]=e("label",{for:"fillerSlateVodSourceId",class:""},"VOD Source",-1)),o(y).item.fillerSlateVodSourceId.$error?(t(),s("div",V1,[(t(!0),s(U,null,B(o(y).item.fillerSlateVodSourceId.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},O1={components:{Page:st},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function A1(n,v,k,C,_,D){const P=ae("Page");return t(),ve(P,{id:k.id,urlView:k.urlView},null,8,["id","urlView"])}const L1=xe(O1,[["render",A1]]),U1={class:"ms-1"},H1={class:"input-group"},D1={class:"table-responsive border shadow-sm"},E1={class:"table table-hover mb-0"},q1=["textContent"],B1={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},N1={key:0,class:"badge text-bg-success"},R1={key:1,class:"badge text-bg-secondary"},F1="/api/v1/channels/search",z1={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(n){Me("$config");const k=$e().user,{appTitle:C,pageTitle:_,busy:D,infoMessage:P,warningMessage:Q,errorMessage:j,router:I,axios:G,utils:le,toasts:N,close:O,security:u,filter:S,initializeFilter:y,getQuery:W,saveQuery:X,search:f,getRowNumber:b,setSelected:Y,isSelected:p}=Ue({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${k==null?void 0:k.userId}/Channels/search`,baseUrl:F1,filter:{updateUrl:!0}});return me(async()=>{y(),await f()}),(T,r)=>{const c=ae("router-link"),w=ae("PageHeader"),d=ae("m-pagination"),i=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(w,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(_)},{default:F(()=>[z(c,{to:n.urlAdd,class:"btn btn-primary"},{default:F(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",U1,[e("div",H1,[R(e("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>o(S).query.criteria=l),onKeyup:r[1]||(r[1]=Le(l=>o(f)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[ee,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:r[2]||(r[2]=l=>o(f)(1))},r[4]||(r[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(i,{errorMessage:o(j)},{default:F(()=>[e("div",D1,[e("table",E1,[r[5]||(r[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(S).items,(l,a)=>(t(),s("tr",{key:l.channelId},[e("td",{textContent:m(o(b)(a)),class:"text-center"},null,8,q1),e("td",null,[z(c,{to:`${n.urlView}/${l.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:F(()=>[l.arn?(t(),s("span",B1)):H("",!0),K(m(l.name),1)]),_:2},1032,["to"]),e("div",null,[l.state==="RUNNING"?(t(),s("span",N1,m(l.state),1)):l.state==="STOPPED"?(t(),s("span",R1,m(l.state),1)):H("",!0)])]),e("td",null,m(l.playbackMode),1),e("td",null,m(l.tier),1)]))),128))]),_:1},512),[[ke,o(S).items.length>0]])])]),z(d,{filter:o(S),search:o(f),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},G1=["id"],j1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Y1={class:"modal-content"},W1={class:"modal-header"},K1={class:"modal-title"},Q1={class:"modal-body p-1"},J1={class:"row row-cols-1 row-cols-sm-2 g-2"},X1={class:"col-sm-4"},Z1={class:"card"},eb={key:0,class:"mt-2"},tb={class:"col"},sb={class:"form-floating mb-2"},ob={class:"col ms-2 my-2"},ab={class:"badge bg-info me-1"},lb={class:"badge bg-primary me-1"},nb={class:"row row-cols-1 row-cols-sm-2"},rb={class:"col"},ib={class:"form-floating mb-2"},db={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},ub={class:"col"},cb={class:"form-floating mb-2"},mb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},fb={class:"col"},pb={class:"form-floating mb-2"},vb={class:"col-sm-8"},gb={class:"col"},bb={class:"input-group mb-2"},yb={class:"form-floating"},$b={class:"table-responsive border shadow-sm"},hb={class:"table table-sm table-hover mb-0 overflow-auto"},wb=["textContent"],_b={class:"d-flex flex-row justify-content-start"},kb={class:"mt-1"},Sb=["src"],Tb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Ib={class:"ms-2"},Mb=["onClick"],xb={class:"modal-footer"},Cb="/api/v1/programtemplates/search",Vb={__name:"_selectProgramTemplate",emits:["close"],setup(n,{expose:v,emit:k}){const _=$e().user,{appTitle:D,pageTitle:P,busy:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,security:S,filter:y,initializeFilter:W,getQuery:X,saveQuery:f,search:b,getRowNumber:Y,setSelected:p,isSelected:T}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${_==null?void 0:_.userId}/program-templates/select`,baseUrl:Cb,filter:{updateUrl:!0,lookups:{genres:[]},query:{}}}),r=k,c=fe("modalSelectProgramTemplate"),w=ge({programTemplate:null,hls:null});me(async()=>{W(),await d()}),Ae(()=>{w.hls&&(w.hls.stopLoad(),w.hls.destroy())});const d=async()=>{await a(),await L()},i=async g=>{y.value.query.sourceLocationId=g,G.value="",await b();var q=document.getElementById(c.value),A=he.getOrCreateInstance(q);A.show()},l=async()=>{var g=document.getElementById(c.value),q=he.getOrCreateInstance(g);q.hide(),w.hls&&(w.hls.stopLoad(),w.hls.destroy()),r("close",w.programTemplate)},a=async g=>{try{const A=await N.get("/api/v1/lookups/video-categories/").then($=>$.data);y.value.lookups.categories=A}catch(q){G.value=O.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},L=async g=>{try{const A=await N.get("/api/v1/lookups/video-genres/").then($=>$.data);y.value.lookups.genres=A}catch(q){G.value=O.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},M=g=>{w.programTemplate=g,l()};return v({open:i,close:l}),(g,q)=>{const A=ae("m-pagination"),$=ae("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:c.value,tabindex:"-1","aria-hidden":"true"},[e("div",j1,[e("div",Y1,[e("div",W1,[e("h5",K1,[q[8]||(q[8]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),K(m(o(P)),1)]),e("button",{type:"button",class:"btn-close",onClick:q[0]||(q[0]=E=>l()),"aria-label":"Close"})]),e("div",Q1,[z($,{errorMessage:o(G)},{default:F(()=>[e("div",J1,[e("div",X1,[e("div",Z1,[q[13]||(q[13]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),w.programTemplate?(t(),s("div",eb,[e("div",tb,[e("div",sb,[R(e("input",{"onUpdate:modelValue":q[1]||(q[1]=E=>w.programTemplate.vodSource.video.title=E),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[ee,w.programTemplate.vodSource.video.title]]),q[9]||(q[9]=e("label",{for:"title"},"Title",-1))])]),e("div",ob,[e("div",null,[(t(!0),s(U,null,B(w.programTemplate.vodSource.video.genres,E=>(t(),s("span",ab,m(E.genreName),1))),256)),(t(!0),s(U,null,B(w.programTemplate.vodSource.video.categories,E=>(t(),s("span",lb,m(E.categoryName),1))),256))])]),e("div",nb,[e("div",rb,[e("div",ib,[e("div",db,m(o(O).moment(w.programTemplate.vodSource.video.dateReleased).calendar()),1),q[10]||(q[10]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",ub,[e("div",cb,[e("div",mb,m(o(O).moment.utc(w.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),q[11]||(q[11]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",fb,[e("div",pb,[R(e("textarea",{"onUpdate:modelValue":q[2]||(q[2]=E=>w.programTemplate.vodSource.video.description=E),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[ee,w.programTemplate.vodSource.video.description]]),q[12]||(q[12]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])]),e("div",vb,[e("div",gb,[e("div",bb,[e("div",yb,[R(e("input",{"onUpdate:modelValue":q[3]||(q[3]=E=>o(y).query.criteria=E),onKeyup:q[4]||(q[4]=Le(E=>o(b)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[ee,o(y).query.criteria]]),q[14]||(q[14]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:q[5]||(q[5]=E=>o(b)(1))},q[15]||(q[15]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",$b,[e("table",hb,[q[16]||(q[16]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(y).items,(E,Z)=>(t(),s("tr",{key:E.videoId},[e("td",{textContent:m(o(Y)(Z)),class:"text-center"},null,8,wb),e("td",null,[e("div",_b,[e("div",null,[E.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},B(E.vodSource.video.thumbnails,V=>(t(),s("div",kb,[e("img",{src:V.url,class:"img-fuild border",width:"128"},null,8,Sb)]))),256)):(t(),s("img",Tb))]),e("div",Ib,[e("a",{onClick:V=>M(E),class:"text-wrap link-offset-2",role:"button"},m(E.name),9,Mb)])])])]))),128))]),_:1},512),[[ke,o(y).items.length>0]])])]),z(A,{filter:o(y),search:o(b),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",xb,[e("button",{onClick:q[6]||(q[6]=E=>l()),class:"btn btn-primary",type:"button"},q[17]||(q[17]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:q[7]||(q[7]=E=>l()),class:"btn btn-secondary ms-1"},q[18]||(q[18]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,G1)}}},Pb={key:0,class:"modal-content"},Ob={class:"modal-header p-2"},Ab={class:"modal-title"},Lb={class:"modal-body container-fluid py-1 overflow-y-auto"},Ub=["errorMessage"],Hb={class:"row row-cols-1 row-cols-sm-2"},Db={class:"card"},Eb={key:0,class:"mt-2"},qb={class:"col"},Bb={class:"form-floating mb-2"},Nb={class:"col ms-2 my-2"},Rb={class:"badge bg-info me-1"},Fb={class:"badge bg-primary me-1"},zb={class:"row row-cols-1 row-cols-sm-2"},Gb={class:"col"},jb={class:"form-floating mb-2"},Yb={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Wb={class:"col"},Kb={class:"form-floating mb-2"},Qb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Jb={class:"col"},Xb={class:"form-floating mb-2"},Zb={class:"col"},ey={class:"input-group mb-2"},ty={class:"form-floating"},sy={class:"table-responsive border shadow-sm"},oy={class:"table table-sm table-hover mb-0 overflow-auto"},ay=["textContent"],ly={class:"d-flex flex-row justify-content-start"},ny={class:"mt-1"},ry=["src"],iy={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},dy={class:"ms-2"},uy=["onClick"],cy={class:"modal-footer p-1"},my="/api/v1/programtemplates/search",fy={__name:"_selectProgramTemplateInline",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(n,{expose:v,emit:k}){const _=$e().user,{appTitle:D,pageTitle:P,busy:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,security:S,filter:y,initializeFilter:W,getQuery:X,saveQuery:f,search:b,getRowNumber:Y,setSelected:p,isSelected:T}=Ue({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${_==null?void 0:_.userId}/program-templates/select`,baseUrl:my,filter:{updateUrl:!1,lookups:{genres:[]},query:{}},initializeFilter:(q,A)=>{q.value,new URLSearchParams(window.location.search),JSON.parse(localStorage.getItem(A))},getQuery:q=>["?c=",encodeURIComponent(q.query.criteria),"&p=",q.pageIndex,"&s=",q.pageSize,"&sf=",q.sortField,"&so=",q.sortOrder,"&withArn=true"].join(""),saveQuery:(q,A)=>{},successAction:()=>{w.programTemplate&&(w.programTemplate=null)}}),r=n,c=k;fe("modalSelectProgramTemplateInline");const w=ge({programTemplate:null,hls:null});me(async()=>{W(),await d()}),Ae(()=>{w.hls&&(w.hls.stopLoad(),w.hls.destroy())});const d=async()=>{await a(),await L()},i=async q=>{debugger;y.value.query.sourceLocationId=q,G.value="",await b(),r.isOpen=!0},l=async()=>{w.hls&&(w.hls.stopLoad(),w.hls.destroy()),c("close",w.programTemplate),r.isOpen=!1},a=async q=>{try{const $=await N.get("/api/v1/lookups/video-categories/").then(E=>E.data);y.value.lookups.categories=$}catch(A){G.value=O.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},L=async q=>{try{const $=await N.get("/api/v1/lookups/video-genres/").then(E=>E.data);y.value.lookups.genres=$}catch(A){G.value=O.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},M=q=>{w.programTemplate=q,g()},g=()=>{if(Hls.isSupported()){w.hls&&(w.hls.stopLoad(),w.hls.destroy());var q=document.getElementById("video-select-preview");const $=w.programTemplate.vodSource.video.formats.find(Z=>Z.formatName==="HLS"),E=$.serverUrl+$.path;w.hls=O.createHlsStream(q,E)}};return v({open:i,close:l}),(q,A)=>{const $=ae("PageMessages"),E=ae("m-pagination");return t(),ve(be,null,{default:F(()=>[n.isOpen?(t(),s("div",Pb,[e("div",Ob,[e("h6",Ab,[A[7]||(A[7]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),K(m(o(P)),1)])]),e("div",Lb,[z($,{errorMessage:o(G)},null,8,["errorMessage"]),e("div",{errorMessage:o(G),class:""},[e("div",Hb,[e("div",{class:te([w.programTemplate?"col-sm-4":"d-none"])},[e("div",Db,[A[12]||(A[12]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),w.programTemplate?(t(),s("div",Eb,[e("div",qb,[e("div",Bb,[R(e("input",{"onUpdate:modelValue":A[0]||(A[0]=Z=>w.programTemplate.vodSource.video.title=Z),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[ee,w.programTemplate.vodSource.video.title]]),A[8]||(A[8]=e("label",{for:"title"},"Title",-1))])]),e("div",Nb,[e("div",null,[(t(!0),s(U,null,B(w.programTemplate.vodSource.video.genres,Z=>(t(),s("span",Rb,m(Z.genreName),1))),256)),(t(!0),s(U,null,B(w.programTemplate.vodSource.video.categories,Z=>(t(),s("span",Fb,m(Z.categoryName),1))),256))])]),e("div",zb,[e("div",Gb,[e("div",jb,[e("div",Yb,m(o(O).moment(w.programTemplate.vodSource.video.dateReleased).calendar()),1),A[9]||(A[9]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Wb,[e("div",Kb,[e("div",Qb,m(o(O).moment.utc(w.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),A[10]||(A[10]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Jb,[e("div",Xb,[R(e("textarea",{"onUpdate:modelValue":A[1]||(A[1]=Z=>w.programTemplate.vodSource.video.description=Z),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[ee,w.programTemplate.vodSource.video.description]]),A[11]||(A[11]=e("label",{for:"description"},"Description",-1))])])])):H("",!0)])],2),e("div",{class:te([[w.programTemplate?"col-sm-8":"col-sm-12"],"mt-2 mt-sm-0"])},[e("div",Zb,[e("div",ey,[e("div",ty,[R(e("input",{"onUpdate:modelValue":A[2]||(A[2]=Z=>o(y).query.criteria=Z),onKeyup:A[3]||(A[3]=Le(Z=>o(b)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[ee,o(y).query.criteria]]),A[13]||(A[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:A[4]||(A[4]=Z=>o(b)(1))},A[14]||(A[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",sy,[e("table",oy,[A[15]||(A[15]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(o(y).items,(Z,V)=>(t(),s("tr",{key:Z.videoId},[e("td",{textContent:m(o(Y)(V)),class:"text-center"},null,8,ay),e("td",null,[e("div",ly,[e("div",null,[Z.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},B(Z.vodSource.video.thumbnails,re=>(t(),s("div",ny,[e("img",{src:re.url,class:"img-fuild border",width:"128"},null,8,ry)]))),256)):(t(),s("img",iy))]),e("div",dy,[e("a",{onClick:re=>M(Z),class:"text-wrap link-offset-2",role:"button"},m(Z.name),9,uy)])])])]))),128))]),_:1},512),[[ke,o(y).items.length>0]])])]),z(E,{filter:o(y),search:o(b),showPerPage:!0},null,8,["filter","search"])],2)])],8,Ub)]),e("div",cy,[e("button",{onClick:A[5]||(A[5]=Z=>l()),class:"btn btn-primary btn-sm",type:"button"},A[16]||(A[16]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:A[6]||(A[6]=Z=>l(!1)),class:"btn btn-secondary btn-sm ms-1"},A[17]||(A[17]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])):H("",!0)]),_:1})}}},py=["id"],vy={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},gy={class:"modal-content"},by={class:"modal-header"},yy={class:"modal-title"},$y={class:"modal-body"},hy={key:0},wy={class:"row row-cols-1 row-cols-sm-3"},_y={class:"col-sm-3"},ky={class:"form-floating mb-2"},Sy={key:0,class:"d-block invalid-feedback"},Ty={class:"col-sm-3"},Iy={class:"form-floating mb-2"},My={key:0,class:"d-block invalid-feedback"},xy={class:"col-sm-6"},Cy={class:"form-floating"},Vy={id:"programTemplateId",class:"form-control",placeholder:"Title"},Py={key:0,class:"d-block invalid-feedback"},Oy={key:0},Ay={class:"row row-cols-1 row-cols-sm-2"},Ly={class:"col"},Uy={class:"row row-cols-1"},Hy={class:"col"},Dy={class:"form-floating mb-2"},Ey={class:"col"},qy={class:"form-floating mb-2"},By={class:"row row-cols-1 row-cols-sm-3"},Ny={class:"col"},Ry={class:"form-floating mb-2"},Fy={class:"col"},zy={class:"form-floating mb-2"},Gy={class:"col"},jy={class:"form-floating mb-2"},Yy={class:"row row-cols-1 row-cols-sm-3"},Wy={class:"col"},Ky={class:"form-floating mb-2"},Qy={class:"col"},Jy={class:"form-floating mb-2"},Xy={key:1},Zy={class:"table-responsive border mt-1"},e$={class:"table table-sm mb-0"},t$=["onUpdate:modelValue","onChange"],s$=["value"],o$={key:0,class:"modal-footer"},a$=["disabled"],l$={__name:"_addProgram",props:{channelId:{type:String,required:!0},eventId:{type:String,required:!0},dateScheduledStart:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),W=k,X=n,f=fe(),b=fe(),Y=fe("modalAddProgramFromTemplate"),p=ge({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplate:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),T=(re,J,oe)=>re.length<=0?!0:re.every(ue=>ue.vodSourceId),r={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},programTemplateId:{required:ne.withMessage("Program Template is required.",ie),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ne.withMessage("Date Scheduled Start is required.",ie),$autoDirty:!0,$lazy:!0},adBreaks:{adBreaksRequired:ne.withMessage("Ad Break is not properly configured.",T),$each:ne.forEach({vodSourceId:{required:ne.withMessage("Vod Source is required.",ie)}})}}},c=Se(r,p);me(async()=>{w()});const w=async()=>{const re=p;Q.value.clear(),G.value="";const J=O.moment(X.dateScheduledStart),x=J.format("YYYY-MM-DD HH:mm"),ue=J.format("YYYYMMDD_HHmm")+"_PRG_";re.eventId=X.eventId,re.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},re.selected={programTemplate:null},re.item={programTemplateId:null,name:ue,dateScheduledStart:x,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await i(),c.value.$reset();var se=document.getElementById(Y.value),h=he.getOrCreateInstance(se);h.show()},d=async re=>{if(!re){var J=document.getElementById(Y.value),oe=he.getOrCreateInstance(J);oe.hide(),W("cancel");return}if(!await c.value.$validate()){window.scrollTo(0,0);return}const ue=p,se=O.moment(ue.item.dateScheduledStart).utc(!0).format(),h=O.moment(ue.item.dateScheduledStart).add(ue.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();p.item={eventId:X.eventId,programTemplateId:ue.selected.programTemplate.programTemplateId,channelId:X.channelId,name:ue.item.name,dateScheduledStart:se,dateScheduledEnd:h,adBreaks:ue.selected.programTemplate.adBreaks.map(ce=>({sourceLocationId:ce.sourceLocationId,vodSourceId:ce.vodSourceId,offsetMillis:ce.offsetMillis,durationInMillis:ce.durationInMillis}))};try{await N.post("/api/v1/programs/",p.item).then(Pe=>{u.success("Add New Program",`Program [${p.item.name}] was added to this channel.`)});var J=document.getElementById(Y.value),oe=he.getOrCreateInstance(J);oe.hide(),W("confirm",p.item)}catch(ce){G.value=O.getErrorMessageAsHtml(ce)}},i=async()=>{await g(),await l(),await a()},l=async()=>{try{const re=`/api/v1/channelOutputs/get-by-channel/${X.channelId}`;await N.get(re).then(J=>{p.lookups.channelOutputs=J.data}),p.item.programTemplateId&&await L()}catch(re){G.value=O.getErrorMessageAsHtml(re),window.scrollTo(0,0)}finally{}},a=async()=>{try{const re=`/api/v1/programTemplates/lookup/by-channel/${X.channelId}`;await N.get(re).then(J=>{p.lookups.programTemplates=J.data,p.lookups.programTemplates.length===1&&(p.item.programTemplateId=p.lookups.programTemplates[0].id)}),p.item.programTemplateId&&await L(p.item.programTemplateId)}catch(re){G.value=O.getErrorMessageAsHtml(re),window.scrollTo(0,0)}finally{}},L=async re=>{await M(re)},M=async re=>{try{const J=`/api/v1/programTemplates/${re}/`;await N.get(J).then(ue=>{p.selected.programTemplate=ue.data;const se=p.selected.programTemplate;se.startOffsetTime=O.moment.utc(se.startOffsetMillis).format("HH:mm:ss"),se.endOffsetTime=O.moment.utc(se.endOffsetMillis).format("HH:mm:ss"),se.durationTime=O.moment.utc(se.durationInMillis).format("HH:mm:ss"),se.adBreaksDurationTime=O.moment.utc(se.adBreaksDurationInMillis).format("HH:mm:ss"),se.totalProgramTemplateDurationTime=O.moment.utc(se.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),p.item.programTemplateId=se.programTemplateId,p.item.adBreaks=se.adBreaks});const oe=p,x=oe.lookups.channelOutputs[0].outputType;await A(oe.selected.programTemplate.sourceLocationId,x)}catch(J){G.value=O.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},g=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(J=>{p.lookups.sourceLocations=J.data,p.lookups.sourceLocations.length===1&&(p.item.sourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.sourceLocationId&&await q(p.item.sourceLocationId)}catch(re){G.value=O.getErrorMessageAsHtml(re),window.scrollTo(0,0)}finally{}},q=async re=>{try{let J=`/api/v1/vodSources/lookup/source-location/${re}`;await N.get(J).then(oe=>{p.lookups.vodSources=oe.data})}catch(J){G.value=O.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},A=async(re,J)=>{try{let oe=`/api/v1/vodsources/lookup/output-type/${J}`;await N.get(oe).then(x=>{p.lookups.adBreakVodSources=x.data})}catch(oe){G.value=O.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{}},$=re=>{const J=p.lookups.adBreakVodSources.find(oe=>oe.id==re.vodSourceId);re.sourceLocationId=J.sourceLocationId},E=async re=>{V.value=!1,re&&(await L(re.programTemplateId),Z())},Z=()=>{if(Hls.isSupported()){p.hls&&(p.hls.stopLoad(),p.hls.destroy());var re=document.getElementById("video-add-program");const oe=p.selected.programTemplate.vodSource.video.formats.find(ue=>ue.formatName==="HLS"),x=oe.serverUrl+oe.path;p.hls=O.createHlsStream(re,x)}},V=fe(!1);return v({open:w,close:d}),(re,J)=>{const oe=ae("PageMessages");return t(),ve(be,null,{default:F(()=>[e("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Y.value,tabindex:"-1","aria-hidden":"false"},[e("div",vy,[e("div",gy,[e("div",by,[e("h5",yy,[J[13]||(J[13]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:J[0]||(J[0]=x=>d(!1)),"aria-label":"Close"})]),e("div",$y,[z(oe,{errorMessage:o(G),vuelidate:o(c)},null,8,["errorMessage","vuelidate"]),z(fy,{ref_key:"modalSelectProgramTemplateInline",ref:b,isOpen:V.value,onClose:E},null,8,["isOpen"]),V.value?H("",!0):(t(),s("div",hy,[e("div",wy,[e("div",_y,[e("div",ky,[R(e("input",{"onUpdate:modelValue":J[1]||(J[1]=x=>p.item.name=x),id:"name",class:"form-control",placeholder:"Name"},null,512),[[ee,p.item.name]]),J[14]||(J[14]=e("label",{for:"name",class:""},"Name",-1)),o(c).item.name.$error?(t(),s("div",Sy,[(t(!0),s(U,null,B(o(c).item.name.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),e("div",Ty,[e("div",Iy,[R(e("input",{"onUpdate:modelValue":J[2]||(J[2]=x=>p.item.dateScheduledStart=x),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[ee,p.item.dateScheduledStart]]),J[15]||(J[15]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(c).item.dateScheduledStart.$error?(t(),s("div",My,[(t(!0),s(U,null,B(o(c).item.dateScheduledStart.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),e("div",xy,[e("div",{onClick:J[3]||(J[3]=x=>V.value=!V.value),class:"input-group mb-2"},[e("div",Cy,[e("div",Vy,[p.selected.programTemplate?(t(),s(U,{key:0},[K(m(p.selected.programTemplate.name),1)],64)):H("",!0)]),J[16]||(J[16]=e("label",{for:"programTemplateId",class:""},"Program Template",-1))]),J[17]||(J[17]=e("button",{class:"btn btn-primary",type:"button"},[e("i",{class:"fa-solid fa-filter"})],-1))]),o(c).item.programTemplateId.$error?(t(),s("div",Py,[(t(!0),s(U,null,B(o(c).item.programTemplateId.$errors,x=>(t(),s("div",{key:x.$uid},m(x.$message),1))),128))])):H("",!0)])]),p.selected.programTemplate?(t(),s("div",Oy,[e("div",Ay,[J[25]||(J[25]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1)),e("div",Ly,[e("div",Uy,[p.selected.programTemplate?(t(),s(U,{key:0},[e("div",Hy,[e("div",Dy,[R(e("input",{"onUpdate:modelValue":J[4]||(J[4]=x=>p.selected.programTemplate.sourceLocation.name=x),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[ee,p.selected.programTemplate.sourceLocation.name]]),J[18]||(J[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1))])]),e("div",Ey,[e("div",qy,[R(e("input",{"onUpdate:modelValue":J[5]||(J[5]=x=>p.selected.programTemplate.vodSource.name=x),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[ee,p.selected.programTemplate.vodSource.name]]),J[19]||(J[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1))])])],64)):H("",!0)]),e("div",By,[e("div",Ny,[e("div",Ry,[R(e("input",{"onUpdate:modelValue":J[6]||(J[6]=x=>p.selected.programTemplate.startOffsetTime=x),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[ee,p.selected.programTemplate.startOffsetTime]]),J[20]||(J[20]=e("label",{for:"startOffsetTime"},"Total Program Duration",-1))])]),e("div",Fy,[e("div",zy,[R(e("input",{"onUpdate:modelValue":J[7]||(J[7]=x=>p.selected.programTemplate.endOffsetTime=x),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[ee,p.selected.programTemplate.endOffsetTime]]),J[21]||(J[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Gy,[e("div",jy,[R(e("input",{"onUpdate:modelValue":J[8]||(J[8]=x=>p.selected.programTemplate.durationTime=x),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[ee,p.selected.programTemplate.durationTime]]),J[22]||(J[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Yy,[e("div",Wy,[e("div",Ky,[R(e("input",{"onUpdate:modelValue":J[9]||(J[9]=x=>p.selected.programTemplate.adBreaksDurationTime=x),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[ee,p.selected.programTemplate.adBreaksDurationTime]]),J[23]||(J[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Qy,[e("div",Jy,[R(e("input",{"onUpdate:modelValue":J[10]||(J[10]=x=>p.selected.programTemplate.totalProgramTemplateDurationTime=x),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[ee,p.selected.programTemplate.totalProgramTemplateDurationTime]]),J[24]||(J[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])])])])):H("",!0),p.selected.programTemplate&&p.selected.programTemplate.adBreaks.length>0?(t(),s("div",Xy,[J[27]||(J[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("b",null," Ad Break ")],-1)),e("div",Zy,[e("table",e$,[J[26]||(J[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(U,null,B(p.item.adBreaks,(x,ue)=>(t(),s("tr",null,[e("td",null,m(ue+1),1),e("td",null,m(o(O).moment.utc(x.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(O).moment.utc(x.durationInMillis).format("HH:mm:ss")),1),e("td",null,[p.lookups.adBreakVodSources.length>0?(t(),s(U,{key:0},[R(e("select",{"onUpdate:modelValue":se=>x.vodSourceId=se,onChange:se=>$(x),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,B(p.lookups.adBreakVodSources,se=>(t(),s(U,null,[se.durationInMillis===x.durationInMillis?(t(),s("option",{key:0,value:se.id}," ["+m(o(O).moment.utc(se.durationInMillis).format("HH:mm:ss"))+"] "+m(se.name),9,s$)):H("",!0)],64))),256))],40,t$),[[pe,x.vodSourceId]]),o(c).item.adBreaks.$each.$response?(t(!0),s(U,{key:0},B(o(c).item.adBreaks.$each.$response.$errors[ue].vodSourceId,se=>(t(),s("div",{key:se,class:"d-block invalid-feedback"},m(se.$message),1))),128)):H("",!0)],64)):H("",!0)])]))),256))])])])])):H("",!0)]))]),V.value?H("",!0):(t(),s("div",o$,[e("button",{disabled:o(c).$dirty&&o(c).$invalid,onClick:J[11]||(J[11]=x=>d(!0)),class:"btn btn-primary",type:"button"},J[28]||(J[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,a$),e("button",{onClick:J[12]||(J[12]=x=>d(!1)),class:"btn btn-secondary ms-1"},J[29]||(J[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))]))])]),z(Vb,{ref_key:"modalSelectProgramTemplate",ref:f,onClose:E},null,512)],8,py)]),_:1})}}},n$=["id"],r$={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},i$={class:"modal-content"},d$={class:"modal-header"},u$={class:"modal-title"},c$={class:"modal-body"},m$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},f$=["innerHTML"],p$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},v$={key:2,class:"container"},g$={class:"row row-cols-1 row-cols-sm-2"},b$={class:"col"},y$={class:"form-floating mb-2"},$$={class:"col"},h$={class:"form-floating mb-2"},w$={class:"row row-cols-1 row-cols-sm-3 mt-2"},_$={class:"col"},k$={class:"form-floating mb-2"},S$={class:"col"},T$={class:"form-floating mb-2"},I$={key:0,class:"d-block invalid-feedback"},M$={class:"col"},x$={class:"form-floating mb-2"},C$={key:0,class:"d-block invalid-feedback"},V$={class:"row row-cols-1 row-cols-sm-3"},P$={class:"col"},O$={class:"form-floating mb-2"},A$={class:"col"},L$={class:"form-floating mb-2"},U$={class:"col"},H$={class:"form-floating mb-2"},D$={class:"row row-cols-1 row-cols-sm-3"},E$={class:"col"},q$={class:"form-floating mb-2"},B$={class:"col"},N$={class:"form-floating mb-2"},R$={key:0,class:"col"},F$={class:"form-floating mb-2"},z$={key:0},G$={class:"table-responsive border mt-1"},j$={class:"table mb-0"},Y$=["onUpdate:modelValue","onChange"],W$=["value"],K$={class:"modal-footer"},Q$=["disabled"],mt={__name:"_editProgram",props:{programId:{type:String,required:!0},dateScheduledStart:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Edit Program"}),W=k,X=n,f=fe("modalEditProgram"),b=ge({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ne.withMessage("Date Scheduled Start is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("sourceLocationId is required.",ie),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ne.withMessage("vodSourceId is required.",ie),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ne.withMessage("startOffsetMillis is required.",ie),minValue:Ee(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ne.withMessage("endOffsetMillis is required.",ie),minValue:Ee(0),$autoDirty:!0,$lazy:!0}}},p=Se(Y,b);me(async()=>{p.value.$reset(),await T()});const T=async(l,a)=>{const L=b;Q.value.clear(),G.value="",L.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},L.item=null,await c(),await w();var M=document.getElementById(f.value),g=he.getOrCreateInstance(M);g.show()},r=async l=>{if(!l){var a=document.getElementById(f.value),L=he.getOrCreateInstance(a);L.hide(),W("cancel");return}const M=b,g=O.moment(M.item.dateScheduledStart).utc(!0).format(),q={programId:X.programId,name:M.item.name,dateScheduledStart:g,adBreaks:M.item.adBreaks.map(A=>({sourceLocationId:A.sourceLocationId,vodSourceId:A.vodSourceId,offsetMillis:A.offsetMillis,durationInMillis:A.durationInMillis}))};try{await N.put("/api/v1/programs/",q).then(Z=>{u.success("Edit Program","Program was edited.")});var a=document.getElementById(f.value),L=he.getOrCreateInstance(a);L.hide(),W("confirm")}catch(A){G.value=O.getErrorMessageAsHtml(A),window.scrollTo(0,0);return}finally{}},c=async()=>{try{const l=`/api/v1/programs/${X.programId}/`;await N.get(l).then(M=>{b.item=M.data;const g=b.item,$=O.moment.utc(g.dateScheduledStart).format("YYYY-MM-DD HH:mm");b.item.dateScheduledStart=$,g.startOffsetTime=O.moment.utc(g.startOffsetMillis).format("HH:mm:ss"),g.endOffsetTime=O.moment.utc(g.endOffsetMillis).format("HH:mm:ss"),g.durationTime=O.moment.utc(g.durationInMillis).format("HH:mm:ss"),g.adBreaksDurationTime=O.moment.utc(g.adBreaksDurationInMillis).format("HH:mm:ss"),g.totalProgramTemplateDurationTime=O.moment.utc(g.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const a=b,L=a.item.channel.outputs[0].outputType;await d(a.item.sourceLocationId,L)}catch(l){G.value=O.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},w=async()=>{},d=async(l,a)=>{try{let L=`/api/v1/vodsources/lookup/output-type/${a}`;await N.get(L).then(M=>{b.lookups.adBreakVodSources=M.data})}catch(L){G.value=O.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{}},i=l=>{const a=b.lookups.adBreakVodSources.find(L=>L.id==l.vodSourceId);l.sourceLocationId=a.sourceLocationId};return v({open:T,close:r}),(l,a)=>(t(),s("div",{class:"modal show","data-bs-backdrop":"static","data-bs-keyboard":"false",id:f.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"false"},[e("div",r$,[e("div",i$,[e("div",d$,[e("h5",u$,[a[14]||(a[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=L=>r(!1)),"aria-label":"Close"})]),e("div",c$,[o(G)?(t(),s("div",m$,[a[15]||(a[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,f$)])):H("",!0),o(Q).size>0?(t(),s("div",p$,[a[16]||(a[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),L=>(t(),s("li",null,m(L),1))),256))])])):H("",!0),b.item?(t(),s("div",v$,[e("div",g$,[e("div",b$,[e("div",y$,[b.item.sourceLocation?R((t(),s("input",{key:0,"onUpdate:modelValue":a[1]||(a[1]=L=>b.item.sourceLocation.name=L),id:"sourceLocation",class:"form-control-plaintext",readonly:""},null,512)),[[ee,b.item.sourceLocation.name]]):H("",!0),a[17]||(a[17]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",$$,[e("div",h$,[b.item.vodSource?R((t(),s("input",{key:0,"onUpdate:modelValue":a[2]||(a[2]=L=>b.item.vodSource.name=L),id:"vodSource",class:"form-control-plaintext",readonly:""},null,512)),[[ee,b.item.vodSource.name]]):H("",!0),a[18]||(a[18]=e("label",{for:"vodSource",class:""},"VOD Source",-1))])])]),e("div",w$,[e("div",_$,[e("div",k$,[b.item.relativeProgram?R((t(),s("input",{key:0,"onUpdate:modelValue":a[3]||(a[3]=L=>b.item.relativeProgram.name=L),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512)),[[ee,b.item.relativeProgram.name]]):H("",!0),a[19]||(a[19]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])]),e("div",S$,[e("div",T$,[R(e("input",{"onUpdate:modelValue":a[4]||(a[4]=L=>b.item.name=L),id:"name",class:te([o(O).getValidFeedbackCss(b.item.name),"form-control"]),placeholder:"Name"},null,2),[[ee,b.item.name]]),a[20]||(a[20]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",I$,[(t(!0),s(U,null,B(o(p).item.name.$errors,L=>(t(),s("div",{key:L.$uid},m(L.$message),1))),128))])):H("",!0)])]),e("div",M$,[e("div",x$,[R(e("input",{"onUpdate:modelValue":a[5]||(a[5]=L=>b.item.dateScheduledStart=L),type:"datetime-local",id:"dateScheduledStart",class:te([o(O).getValidFeedbackCss(b.item.dateScheduledStart),"form-control"])},null,2),[[ee,b.item.dateScheduledStart]]),a[21]||(a[21]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(p).item.dateScheduledStart.$error?(t(),s("div",C$,[(t(!0),s(U,null,B(o(p).item.dateScheduledStart.$errors,L=>(t(),s("div",{key:L.$uid},m(L.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",V$,[e("div",P$,[e("div",O$,[R(e("input",{"onUpdate:modelValue":a[6]||(a[6]=L=>b.item.startOffsetTime=L),id:"startOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[ee,b.item.startOffsetTime]]),a[22]||(a[22]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",A$,[e("div",L$,[R(e("input",{"onUpdate:modelValue":a[7]||(a[7]=L=>b.item.endOffsetTime=L),id:"endOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[ee,b.item.endOffsetTime]]),a[23]||(a[23]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",U$,[e("div",H$,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=L=>b.item.durationTime=L),id:"durationTime",class:"form-control-plaintext",readonly:""},null,512),[[ee,b.item.durationTime]]),a[24]||(a[24]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",D$,[e("div",E$,[e("div",q$,[R(e("input",{"onUpdate:modelValue":a[9]||(a[9]=L=>b.item.adBreaksDurationTime=L),id:"adBreaksDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[ee,b.item.adBreaksDurationTime]]),a[25]||(a[25]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks Duration",-1))])]),e("div",B$,[e("div",N$,[R(e("input",{"onUpdate:modelValue":a[10]||(a[10]=L=>b.item.totalProgramTemplateDurationTime=L),id:"totalProgramTemplateDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[ee,b.item.totalProgramTemplateDurationTime]]),a[26]||(a[26]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])]),b.item.relativeProgram?(t(),s("div",R$,[e("div",F$,[R(e("input",{"onUpdate:modelValue":a[11]||(a[11]=L=>b.item.relativeProgram.name=L),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512),[[ee,b.item.relativeProgram.name]]),a[27]||(a[27]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])])):H("",!0)])]),a[30]||(a[30]=e("hr",null,null,-1)),b.item?(t(),s("div",z$,[a[29]||(a[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",G$,[e("table",j$,[a[28]||(a[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(U,null,B(b.item.adBreaks,(L,M)=>(t(),s("tr",null,[e("td",null,m(M+1),1),e("td",null,m(o(O).moment.utc(L.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(O).moment.utc(L.durationInMillis).format("HH:mm:ss")),1),e("td",null,[R(e("select",{"onUpdate:modelValue":g=>L.vodSourceId=g,onChange:g=>i(L),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,B(b.lookups.adBreakVodSources,g=>(t(),s(U,null,[g.durationInMillis===L.durationInMillis?(t(),s("option",{key:0,value:g.id}," ["+m(o(O).moment.utc(g.durationInMillis).format("HH:mm:ss"))+"] "+m(g.name),9,W$)):H("",!0)],64))),256))],40,Y$),[[pe,L.vodSourceId]])])]))),256))])])])])):H("",!0)])):H("",!0)]),e("div",K$,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:a[12]||(a[12]=L=>r(!0)),class:"btn btn-primary ms-2",type:"button"},a[31]||(a[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Q$),e("button",{onClick:a[13]||(a[13]=L=>r(!1)),class:"btn btn-secondary ms-1"},a[32]||(a[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,n$))}},J$={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:v,pageTitle:k,busy:C,infoMessage:_,warningMessage:D,errorMessage:P,router:Q,axios:j,utils:I,toasts:G,close:le,security:N}=ye({appTitle:"Arcadian-FAST",pageTitle:"Schedule Channel Programs"}),O=n,u=fe(null),S={viewType:"Week",cellDuration:15,startDate:Re.DayPilot.Date.today(),onTimeRangeSelected:T=>{var r=T.control;const c={start:T.start,end:T.end,id:Re.DayPilot.guid(),text:"NEW",tags:{type:"new"}};r.events.add(c);var w=r.events.find(c.id);Y(w)},onBeforeEventRender:T=>{if(T.data.barColor="green",!!T.data.tags)switch(T.data.tags.type){case"new":T.data.barColor="yellow";break;case"business":T.data.barColor="red";break;case"personal":T.data.barColor="greem";break;case"vacation":T.data.barColor="black";break;default:T.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async T=>{const r=T.newStart.value,c=T.e.id(),w=I.moment(r).utc(!0).format();try{let d="/api/v1/programs/scheduled-date-start";const i={programId:c,dateScheduledStart:w};await j.put(d,i).then(l=>{G.success("Program date scheduled start was edited.")})}catch(d){P.value=I.getErrorMessageAsHtml(d),window.scrollTo(0,0);return}finally{}await f()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async T=>{var r=T.e.id();p(r)},contextMenu:new Re.DayPilot.Menu([{text:"Clone",onClick:async T=>{const r=T.source.id();try{let c=`/api/v1/programs/${r}/clone`;await j.post(c).then(w=>{G.success("Clone Program","Program was cloned.")})}catch(c){P.value=I.getErrorMessageAsHtml(c),window.scrollTo(0,0);return}finally{await f()}}},{text:"Delete",onClick:async T=>{if(!confirm("Do you want to remove this program?"))return;const c=T.source.id();try{let w=`/api/v1/programs/${c}/`;await j.delete(w).then(d=>{G.success("Delete Program","Program was deleted.")}),u.value.control.events.remove(T.source)}catch(w){P.value=I.getErrorMessageAsHtml(w),window.scrollTo(0,0);return}finally{await f()}}}])},y=fe([]),W=()=>{u.value.control.update({events:y.value})},X=ge({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});me(async()=>{await f()});const f=async()=>{await b(),await W()},b=async()=>{const T=X;if(!C.value)try{C.value=!0,P.value="";const r=`/api/v1/channels/${O.id}/`;await j.get(r).then(c=>{T.item=c.data;const w=T.item.outputs,d=T.item.programs.map(i=>{let l=`${i.name}`,a=`[${i.name}]`;return i.relativeProgram&&(a+=` => [${i.relativeProgram.name}]`),{start:I.moment.utc(i.dateScheduledStart).format(),end:I.moment.utc(i.dateScheduledEnd).format(),id:i.programId,text:l,toolTip:a}});y.value=d})}catch(r){P.value=I.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{C.value=!1}},Y=async T=>{const r=Ve(l$,{channelId:O.id,eventId:T.id(),dateScheduledStart:T.start().value},{chore:!0,keepInitial:!1}),{data:c,isCanceled:w}=await r.reveal();r.closeAll(),!w&&c&&await f()},p=async T=>{const r=Ve(mt,{programId:T},{chore:!0,keepInitial:!1}),{data:c,isCanceled:w}=await r.reveal();r.closeAll(),w||await f()};return(T,r)=>{const c=ae("router-link"),w=ae("PageHeader"),d=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(w,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(k)},{default:F(()=>[e("button",{onClick:r[0]||(r[0]=i=>f()),class:"btn btn-secondary ms-1"},r[1]||(r[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(c,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:F(()=>r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(d,{errorMessage:o(P)},{default:F(()=>[e("div",null,[z(o(Re.DayPilotCalendar),{id:"dp",config:S,ref_key:"calendarRef",ref:u},null,512)])]),_:1},8,["errorMessage"])])]),_:1})}}},X$=["id"],Z$={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},eh={class:"modal-content"},th={class:"modal-header"},sh={class:"modal-title"},oh={class:"modal-body"},ah={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},lh=["innerHTML"],nh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},rh={class:"container"},ih={class:"row row-cols-1 row-cols-sm-3"},dh={class:"col"},uh={class:"form-floating mb-2"},ch=["disabled"],mh=["value"],fh={class:"col"},ph={class:"form-floating mb-2"},vh={key:0,class:"d-block invalid-feedback"},gh={class:"col"},bh={class:"form-floating mb-2"},yh={key:0,class:"d-block invalid-feedback"},$h={class:"row row-cols-sm-2"},hh={class:"col"},wh={class:"form-floating mb-2"},_h=["value"],kh={key:0,class:"d-block invalid-feedback"},Sh={class:"col"},Th={class:"form-floating mb-2"},Ih=["value"],Mh={key:0,class:"d-block invalid-feedback"},xh={class:"col"},Ch={class:"input-group mb-1"},Vh={class:"form-floating"},Ph={key:0,class:"input-group-text"},Oh={key:0},Ah={key:1},Lh={key:2},Uh={key:3,class:"d-block invalid-feedback"},Hh={class:"col"},Dh={class:"input-group mb-1"},Eh={class:"form-floating"},qh={key:0,class:"input-group-text"},Bh={key:0},Nh={key:1},Rh={key:2,class:"d-block invalid-feedback"},Fh={class:"table-responsive border mt-1"},zh={class:"table"},Gh={class:"input-group mb-1"},jh=["onUpdate:modelValue"],Yh={key:0,class:"input-group-text"},Wh=["onUpdate:modelValue"],Kh=["value"],Qh=["onUpdate:modelValue"],Jh=["value"],Xh=["onClick"],Zh={class:"modal-footer"},ew=["disabled"],tw={__name:"_addProgram",emits:["refresh"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),W=k,X=fe(),f=fe("modalAddProgram"),b=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ne.withMessage("Date Scheduled Start is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("sourceLocationId is required.",ie),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ne.withMessage("vodSourceId is required.",ie),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ne.withMessage("startOffsetMillis is required.",ie),minValue:Ee(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ne.withMessage("endOffsetMillis is required.",ie),minValue:Ee(0),$autoDirty:!0,$lazy:!0}}},p=Se(Y,b);me(async()=>{p.value.$reset()});const T=async A=>{X.value=A;const $=b;Q.value.clear(),G.value="";const E=O.moment().local().add(2,"m"),V=E.format("YYYY-MM-DD HH:mm"),re=E.format("YYYY_MM_DD")+"_PROGRAM_";$.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},$.item={name:re,relativeProgramId:null,dateScheduledStart:V,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await w(),p.value.$reset();var J=document.getElementById(f.value),oe=he.getOrCreateInstance(J);oe.show()},r=async()=>{var A=document.getElementById(f.value),$=he.getOrCreateInstance(A);$.hide(),W("refresh")},c=async()=>{const A=b;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const Z=A.item;delete Z.vodSource,Z.channelId=X.value;var E=Z.dateScheduledStart;Z.dateScheduledStart=O.moment(E).utc().format(),await N.post("/api/v1/programs/",Z).then(V=>{u.success("Add Program","Program added to Channel",{async onClose(){}})}),await r()}catch(Z){G.value=O.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{D.value=!1}},w=async()=>{await d(),await l(),await L()},d=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then($=>{b.lookups.sourceLocations=$.data,b.lookups.sourceLocations.length===1&&(b.item.sourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await i(b.item.sourceLocationId)}catch(A){G.value=O.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},i=async A=>{try{let $=`/api/v1/vodSources/lookup/source-location/${A}`;await N.get($).then(E=>{b.lookups.vodSources=E.data})}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},l=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then($=>{b.lookups.adBreakSourceLocations=$.data})}catch(A){G.value=O.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},a=async A=>{try{let $=`/api/v1/vodSources/lookup/source-location/${A}`;await N.get($).then(E=>{b.lookups.adBreakVodSources=E.data})}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},L=async()=>{try{const A=`/api/v1/programs/lookup/?channelId=${X.value}`;await N.get(A).then($=>{if(b.lookups.channelPrograms=$.data,b.lookups.channelPrograms.length===1){const Z=b.lookups.channelPrograms[0];b.item.relativeProgramId=Z.id}})}catch(A){G.value=O.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},M=()=>{const A={offsetMillis:0,sourceLocationId:null,vodSourceId:null},$=b.item.adBreaks.length;if($>0){const E=b.item.adBreaks[$-1];A.offsetMillis=E.offsetMillis+1e4}b.item.adBreaks.push(A)},g=A=>{b.item.adBreaks.splice(A,1)},q=()=>{const A=b.item.vodSource;b.item.vodSourceId=A.id};return v({open:T,close:r}),(A,$)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:f.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Z$,[e("div",eh,[e("div",th,[e("h5",sh,[$[12]||($[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=E=>r()),"aria-label":"Close"})]),e("div",oh,[o(G)?(t(),s("div",ah,[$[13]||($[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,lh)])):H("",!0),o(Q).size>0?(t(),s("div",nh,[$[14]||($[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),E=>(t(),s("li",null,m(E),1))),256))])])):H("",!0),e("div",rh,[e("div",ih,[e("div",dh,[e("div",uh,[R(e("select",{"onUpdate:modelValue":$[1]||($[1]=E=>b.item.relativeProgramId=E),class:"form-select",id:"sourceLocationId",disabled:b.lookups.channelPrograms.length<=0},[(t(!0),s(U,null,B(b.lookups.channelPrograms,E=>(t(),s("option",{value:E.id},m(E.name),9,mh))),256))],8,ch),[[pe,b.item.relativeProgramId]]),$[15]||($[15]=e("label",{for:"relativeProgramId",class:""},"Relative Program",-1))])]),e("div",fh,[e("div",ph,[R(e("input",{"onUpdate:modelValue":$[2]||($[2]=E=>b.item.name=E),id:"name",class:"form-control",placeholder:"Name"},null,512),[[ee,b.item.name]]),$[16]||($[16]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",vh,[(t(!0),s(U,null,B(o(p).item.name.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):H("",!0)])]),e("div",gh,[e("div",bh,[R(e("input",{"onUpdate:modelValue":$[3]||($[3]=E=>b.item.dateScheduledStart=E),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[ee,b.item.dateScheduledStart]]),$[17]||($[17]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(p).item.dateScheduledStart.$error?(t(),s("div",yh,[(t(!0),s(U,null,B(o(p).item.dateScheduledStart.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):H("",!0)])])]),e("div",$h,[e("div",hh,[e("div",wh,[R(e("select",{"onUpdate:modelValue":$[4]||($[4]=E=>b.item.sourceLocationId=E),onChange:$[5]||($[5]=E=>i(b.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,B(b.lookups.sourceLocations,E=>(t(),s("option",{value:E.id},m(E.name),9,_h))),256))],544),[[pe,b.item.sourceLocationId]]),$[18]||($[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(p).item.sourceLocationId.$error?(t(),s("div",kh,[(t(!0),s(U,null,B(o(p).item.sourceLocationId.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):H("",!0)])]),e("div",Sh,[e("div",Th,[R(e("select",{"onUpdate:modelValue":$[6]||($[6]=E=>b.item.vodSource=E),onChange:$[7]||($[7]=E=>q()),class:"form-select",id:"vodSourceId"},[(t(!0),s(U,null,B(b.lookups.vodSources,E=>(t(),s("option",{value:E},m(E.name),9,Ih))),256))],544),[[pe,b.item.vodSource]]),$[19]||($[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(p).item.vodSourceId.$error?(t(),s("div",Mh,[(t(!0),s(U,null,B(o(p).item.vodSourceId.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):H("",!0)])]),e("div",xh,[e("div",Ch,[e("div",Vh,[R(e("input",{"onUpdate:modelValue":$[8]||($[8]=E=>b.item.startOffsetMillis=E),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[ee,b.item.startOffsetMillis]]),$[20]||($[20]=e("label",{for:"startOffsetMillis",class:""},"Start OffSet Millis",-1))]),b.item.startOffsetMillis>0?(t(),s("span",Ph,m(o(O).moment.utc(b.item.startOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),b.item.startOffsetMillis>0&&b.item.startOffsetMillis<3e4?(t(),s("div",Oh,$[21]||($[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),b.item.startOffsetMillis>b.item.endOffsetMillis&&b.item.endOffsetMillis>0?(t(),s("div",Ah,$[22]||($[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):H("",!0),b.item.vodSource&&b.item.startOffsetMillis>b.item.vodSource.durationInMillis?(t(),s("div",Lh,$[23]||($[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(p).item.startOffsetMillis.$error?(t(),s("div",Uh,[(t(!0),s(U,null,B(o(p).item.startOffsetMillis.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):H("",!0)]),e("div",Hh,[e("div",Dh,[e("div",Eh,[R(e("input",{"onUpdate:modelValue":$[9]||($[9]=E=>b.item.endOffsetMillis=E),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[ee,b.item.endOffsetMillis]]),$[24]||($[24]=e("label",{for:"endOffsetMillis",class:""},"End OffSet Millis",-1))]),b.item.endOffsetMillis>0?(t(),s("span",qh,m(o(O).moment.utc(b.item.endOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),b.item.endOffsetMillis>0&&b.item.endOffsetMillis<3e4?(t(),s("div",Bh,$[25]||($[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),b.item.vodSource&&b.item.endOffsetMillis>b.item.vodSource.durationInMillis?(t(),s("div",Nh,$[26]||($[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(p).item.endOffsetMillis.$error?(t(),s("div",Rh,[(t(!0),s(U,null,B(o(p).item.endOffsetMillis.$errors,E=>(t(),s("div",{key:E.$uid},m(E.$message),1))),128))])):H("",!0)])]),$[30]||($[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[$[27]||($[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:M,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Fh,[e("table",zh,[$[29]||($[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,B(b.item.adBreaks,(E,Z)=>(t(),s("tr",null,[e("td",null,m(Z+1),1),e("td",null,[e("div",Gh,[R(e("input",{"onUpdate:modelValue":V=>E.offsetMillis=V,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,jh),[[ee,E.offsetMillis]]),E.offsetMillis>0?(t(),s("span",Yh,m(o(O).moment.utc(E.offsetMillis).format("HH:mm:ss")),1)):H("",!0)])]),e("td",null,[R(e("select",{"onUpdate:modelValue":V=>E.sourceLocationId=V,onChange:$[10]||($[10]=V=>a(b.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(U,null,B(b.lookups.adBreakSourceLocations,V=>(t(),s("option",{value:V.id},m(V.name),9,Kh))),256))],40,Wh),[[pe,E.sourceLocationId]])]),e("td",null,[R(e("select",{"onUpdate:modelValue":V=>E.vodSourceId=V,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,B(b.lookups.adBreakVodSources,V=>(t(),s("option",{value:V.id},m(V.name),9,Jh))),256))],8,Qh),[[pe,E.vodSourceId]])]),e("td",null,[e("button",{onClick:V=>g(Z),class:"btn btn-outline-warning"},$[28]||($[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Xh)])]))),256))])])])])])]),e("div",Zh,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:$[11]||($[11]=E=>c()),class:"btn btn-primary",type:"button"},$[31]||($[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ew),$[32]||($[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,X$))}},sw=["id"],ow={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},aw={class:"modal-content"},lw={class:"modal-header"},nw={class:"modal-title"},rw={class:"modal-body"},iw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},dw=["innerHTML"],uw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},cw={class:"container"},mw={class:"col"},fw={class:"form-floating mb-2"},pw={class:"col"},vw={class:"form-floating mb-2"},gw={key:0,class:"d-block invalid-feedback"},bw={class:"col"},yw={class:"form-floating mb-2 d-none"},$w={key:0,class:"d-block invalid-feedback"},hw={class:"col"},ww={class:"form-floating mb-2"},_w={key:0,class:"d-block invalid-feedback"},kw={class:"modal-footer"},Sw=["disabled"],Tw={__name:"_addPlaybackConfiguration",props:{channelOutputId:{type:String,required:!0},playbackUrl:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=k,X=n,f=fe("modalAddPlaybackConfiguration"),b=ge({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:ne.withMessage("Name is required.",ie),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ne.withMessage("adDecisionServerUrl is required.",ie),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ne.withMessage("videoContentSourceUrl is required.",ie),$autoDirty:!0,$lazy:!0}}},p=Se(Y,b);me(async()=>{p.value.$reset(),await T()});const T=async()=>{const w=b;Q.value.clear(),G.value="";const d=X.playbackUrl;let i=d.lastIndexOf("/");const l=d.substring(0,i);let a=d.substring(i+1);i=a.lastIndexOf("."),a=a.substring(0,i)+"_ADCAMPAIGN_",w.item={name:a,originalVideoContentSourceUrl:X.playbackUrl,videoContentSourceUrl:l,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},p.value.$reset();var L=document.getElementById(f.value),M=he.getOrCreateInstance(L);M.show()},r=async()=>{var w=document.getElementById(f.value),d=he.getOrCreateInstance(w);d.hide(),W("cancel")},c=async()=>{const w=b;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const a=w.item;a.channelOutputId=X.channelOutputId,await N.put("/api/v1/channelOutputs/playback/",a).then(L=>{u.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})});var i=document.getElementById(f.value),l=he.getOrCreateInstance(i);l.hide(),W("confirm")}catch(a){G.value=O.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{D.value=!1}};return v({open:T,close:r}),(w,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:f.value,tabindex:"-1","aria-hidden":"false"},[e("div",ow,[e("div",aw,[e("div",lw,[e("h5",nw,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=i=>r()),"aria-label":"Close"})]),e("div",rw,[o(G)?(t(),s("div",iw,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,dw)])):H("",!0),o(Q).size>0?(t(),s("div",uw,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),i=>(t(),s("li",null,m(i),1))),256))])])):H("",!0),e("div",cw,[e("div",mw,[e("div",fw,[R(e("textarea",{"onUpdate:modelValue":d[1]||(d[1]=i=>b.item.originalVideoContentSourceUrl=i),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[ee,b.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",pw,[e("div",vw,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=i=>b.item.name=i),id:"name",class:"form-control",placeholder:"Name"},null,512),[[ee,b.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:""},"Name",-1)),o(p).item.name.$error?(t(),s("div",gw,[(t(!0),s(U,null,B(o(p).item.name.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",bw,[e("div",yw,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=i=>b.item.videoContentSourceUrl=i),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[ee,b.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(p).item.videoContentSourceUrl.$error?(t(),s("div",$w,[(t(!0),s(U,null,B(o(p).item.videoContentSourceUrl.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0)])]),e("div",hw,[e("div",ww,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=i=>b.item.adDecisionServerUrl=i),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[ee,b.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(p).item.adDecisionServerUrl.$error?(t(),s("div",_w,[(t(!0),s(U,null,B(o(p).item.adDecisionServerUrl.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):H("",!0),d[14]||(d[14]=Je('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",kw,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:d[5]||(d[5]=i=>c()),class:"btn btn-primary",type:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Sw),d[16]||(d[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,sw))}},Iw=["id"],Mw={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},xw={class:"modal-content"},Cw={class:"modal-header"},Vw={class:"modal-title"},Pw={class:"modal-body"},Ow={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Aw=["innerHTML"],Lw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Uw={class:"container"},Hw={class:"col"},Dw={class:"form-floating mb-2"},Ew=["value"],qw={key:0,class:"d-block invalid-feedback"},Bw={class:"col"},Nw={class:"form-floating mb-2"},Rw={key:0,class:"d-block invalid-feedback"},Fw={class:"col"},zw={class:"form-floating mb-2"},Gw={key:0,class:"d-block invalid-feedback"},jw={class:"modal-footer"},Yw=["disabled"],Ww={__name:"_addChannelOutput",props:{channelId:{type:String}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output"}),W=k,X=n,f=fe("modalAddChannelOutput"),b=ge({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),Y={item:{sourceGroupId:{required:ne.withMessage("Source Group is required.",ie),$autoDirty:!0,$lazy:!0},manifestName:{required:ne.withMessage("Manifest Name is required.",ie),$autoDirty:!0,$lazy:!0},outputType:{required:ne.withMessage("Output Type is required.",ie),$autoDirty:!0,$lazy:!0}}},p=Se(Y,b);me(async()=>{p.value.$reset(),c()});const T=async()=>{await r()},r=async()=>{try{await N.get("/api/v1/sourceGroups/lookup/").then(l=>{b.lookups.sourceGroups=l.data,b.lookups.sourceGroups.length===1&&(b.item.sourceGroupId=b.lookups.sourceGroups[0].id)})}catch(i){G.value=O.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}},c=async()=>{const i=b;Q.value.clear(),G.value="",i.lookups={sourceGroups:[]},i.item={sourceGroupId:null,outputType:null},await T(),p.value.$reset();var l=document.getElementById(f.value),a=he.getOrCreateInstance(l);a.show()},w=async()=>{var i=document.getElementById(f.value),l=he.getOrCreateInstance(i);l.hide(),W("cancel")},d=async()=>{const i=b;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const M=i.item;M.channelId=X.channelId,await N.post("/api/v1/channelOutputs",M).then(g=>{u.success("Add Channel Output","Channel output added.")});var a=document.getElementById(f.value),L=he.getOrCreateInstance(a);L.hide(),W("confirm")}catch(M){G.value=O.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{D.value=!1}};return v({open:c,close:w}),(i,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:f.value,tabindex:"-1","aria-hidden":"true"},[e("div",Mw,[e("div",xw,[e("div",Cw,[e("h5",Vw,[l[4]||(l[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),l[5]||(l[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Pw,[o(G)?(t(),s("div",Ow,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Aw)])):H("",!0),o(Q).size>0?(t(),s("div",Lw,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),a=>(t(),s("li",null,m(a),1))),256))])])):H("",!0),e("div",Uw,[e("div",Hw,[e("div",Dw,[R(e("select",{"onUpdate:modelValue":l[0]||(l[0]=a=>b.item.sourceGroupId=a),class:te([o(O).getValidFeedbackCss(b.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(U,null,B(b.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},m(a.name),9,Ew))),256))],2),[[pe,b.item.sourceGroupId]]),l[8]||(l[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(p).item.sourceGroupId.$error?(t(),s("div",qw,[(t(!0),s(U,null,B(o(p).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):H("",!0)])]),e("div",Bw,[e("div",Nw,[R(e("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>b.item.outputType=a),class:te([o(O).getValidFeedbackCss(b.item.outputType),"form-select"]),id:"outputType"},l[9]||(l[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[pe,b.item.outputType]]),l[10]||(l[10]=e("label",{for:"outputType",class:""},"Output Type",-1)),o(p).item.outputType.$error?(t(),s("div",Rw,[(t(!0),s(U,null,B(o(p).item.outputType.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):H("",!0)])]),e("div",Fw,[e("div",zw,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>b.item.manifestName=a),class:te([o(O).getValidFeedbackCss(b.item.manifestName),"form-control"]),id:"manifestName"},null,2),[[ee,b.item.manifestName]]),l[11]||(l[11]=e("label",{for:"manifestName",class:""},"Manifest Name",-1)),o(p).item.manifestName.$error?(t(),s("div",Gw,[(t(!0),s(U,null,B(o(p).item.manifestName.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):H("",!0)])])])]),e("div",jw,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:l[3]||(l[3]=a=>d()),class:"btn btn-primary",type:"button"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yw),l[13]||(l[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Iw))}},Kw=["id"],Qw={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Jw={class:"modal-content"},Xw={class:"modal-header"},Zw={class:"modal-title"},e_={class:"modal-body"},t_={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},s_=["innerHTML"],o_={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},a_={class:"container"},l_={class:"col"},n_={class:"form-floating mb-2"},r_=["value"],i_={key:0,class:"d-block invalid-feedback"},d_={class:"col"},u_={class:"form-floating mb-2"},c_=["value"],m_={key:0,class:"d-block invalid-feedback"},f_={class:"col"},p_={class:"card h-100"},v_=["id"],g_={class:"modal-footer"},b_=["disabled"],y_={__name:"_editFillerSlate",props:{channelId:{type:String},sourceLocationId:{type:String},vodSourceId:{type:String}},emits:["confirm","cancel"],setup(n,{expose:v,emit:k}){const{appTitle:C,pageTitle:_,busy:D,isDirty:P,validations:Q,infoMessage:j,warningMessage:I,errorMessage:G,router:le,axios:N,utils:O,toasts:u,closeWithReturnUrl:S,security:y}=ye({appTitle:"Arcadian-FAST",pageTitle:"Edit Filler Slate"}),W=k,X=n,f=fe("modalEditFillerSlate"),b=ge({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),Y={item:{channelId:{required:ne.withMessage("channelId is required.",ie),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ne.withMessage("sourceLocationId is required.",ie),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ne.withMessage("vodSourceId is required.",ie),$autoDirty:!0,$lazy:!0}}},p=Se(Y,b);me(async()=>{w(),p.value.$reset()}),Ae(()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy())});const T=async()=>{await r()},r=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(g=>{b.lookups.sourceLocations=g.data}),b.item.sourceLocationId&&await c(b.item.sourceLocationId)}catch(M){G.value=O.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},c=async M=>{try{let g=`/api/v1/vodSources/lookup/source-Location/${M}/?type=2`;await N.get(g).then(q=>{b.lookups.vodSources=q.data})}catch(g){G.value=O.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},w=async()=>{const M=b;Q.value.clear(),G.value="",M.lookups={sourceLocations:[],vodSources:[]},M.item={channelId:X.channelId,sourceLocationId:X.sourceLocationId,vodSourceId:X.vodSourceId},await T(),b.item.vodSourceId&&await L(b.item.vodSourceId),p.value.$reset();var g=document.getElementById(f.value),q=he.getOrCreateInstance(g);q.show()},d=async()=>{var M=document.getElementById(f.value),g=he.getOrCreateInstance(M);g.hide(),b.hls&&(b.hls.stopLoad(),b.hls.destroy()),W("cancel","cancel clicked")},i=async()=>{const M=b;if(D.value)return;if(!await p.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const $=M.item;await N.put("/api/v1/channels/filler-slate",$).then(E=>{u.success("Update Channel Filler Slate","Channel's Filler slate was updated.")});var q=document.getElementById(f.value),A=he.getOrCreateInstance(q);A.hide(),b.hls&&(b.hls.stopLoad(),b.hls.destroy()),W("confirm",b.item)}catch($){G.value=O.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{D.value=!1}},l=async()=>{b.item.vodSourceId=null,await c(b.item.sourceLocationId)},a=async()=>{await L(b.item.vodSourceId)},L=async M=>{try{let g=`/api/v1/vodSources/${M}/hls`;const q=await N.get(g).then($=>$.data);if(b.hls){b.hls.loadSource(q);return}const A=document.getElementById(`video-${b.item.channelId}`);b.hls=O.createHlsStream(A,q)}catch(g){G.value=O.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}};return v({open:w,close:d}),(M,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:f.value,tabindex:"-1","aria-hidden":"true"},[e("div",Qw,[e("div",Jw,[e("div",Xw,[e("h5",Zw,[g[6]||(g[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=q=>d()),"aria-label":"Close"})]),e("div",e_,[o(G)?(t(),s("div",t_,[g[7]||(g[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,s_)])):H("",!0),o(Q).size>0?(t(),s("div",o_,[g[8]||(g[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(o(Q).values(),q=>(t(),s("li",null,m(q),1))),256))])])):H("",!0),e("div",a_,[e("div",l_,[e("div",n_,[R(e("select",{"onUpdate:modelValue":g[1]||(g[1]=q=>b.item.sourceLocationId=q),onChange:g[2]||(g[2]=q=>l()),class:te([o(O).getValidFeedbackCss(b.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(U,null,B(b.lookups.sourceLocations,q=>(t(),s("option",{value:q.id},m(q.name),9,r_))),256))],34),[[pe,b.item.sourceLocationId]]),g[9]||(g[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(p).item.sourceLocationId.$error?(t(),s("div",i_,[(t(!0),s(U,null,B(o(p).item.sourceLocationId.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):H("",!0)])]),e("div",d_,[e("div",u_,[R(e("select",{"onUpdate:modelValue":g[3]||(g[3]=q=>b.item.vodSourceId=q),onChange:a,class:te([o(O).getValidFeedbackCss(b.item.vodSourceId),"form-select"]),id:"vodSourceId"},[(t(!0),s(U,null,B(b.lookups.vodSources,q=>(t(),s("option",{value:q.id},m(q.name),9,c_))),256))],34),[[pe,b.item.vodSourceId]]),g[10]||(g[10]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(p).item.vodSourceId.$error?(t(),s("div",m_,[(t(!0),s(U,null,B(o(p).item.vodSourceId.$errors,q=>(t(),s("div",{key:q.$uid},m(q.$message),1))),128))])):H("",!0)])]),e("div",f_,[e("div",p_,[e("video",{id:`video-${b.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,v_)])])])]),e("div",g_,[e("button",{disabled:o(p).$dirty&&o(p).$invalid,onClick:g[4]||(g[4]=q=>i()),class:"btn btn-primary",type:"button"},g[11]||(g[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,b_),e("button",{onClick:g[5]||(g[5]=q=>d()),class:"btn btn-secondary ms-1"},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Kw))}},$_={class:"my-2"},h_={class:""},w_={class:"form-floating mb-2"},__={id:"vodSourceTitle",class:"form-control-plaintext"},k_={class:"row"},S_={class:"col-12 col-md-4"},T_={class:"form-floating mb-2"},I_={id:"vodSourceVideoTitle",class:"form-control-plaintext"},M_={class:"col-12 col-md-8"},x_={class:"form-floating mb-2"},C_={id:"vodSourceVideoDesc",class:"form-control-plaintext"},V_={class:"mt-2"},P_={class:"row row-cols-1 row-cols-sm-3"},O_={class:"col"},A_={class:"form-floating mb-2"},L_={id:"startOffsetMillis",class:"form-control-plaintext"},U_={class:"col"},H_={class:"form-floating mb-2"},D_={id:"endOffsetMillis",class:"form-control-plaintext"},E_={class:"col"},q_={class:"form-floating mb-2"},B_={id:"durationInMillis",class:"form-control-plaintext"},N_={class:"row row-cols-1 row-cols-sm-3"},R_={class:"col"},F_={class:"form-floating mb-2"},z_={id:"adBreaksDurationInMillis",class:"form-control-plaintext"},G_={class:"col"},j_={class:"form-floating mb-2"},Y_={id:"totalProgramTemplateDurationInMillis",class:"form-control-plaintext"},W_={class:"row row-cols-1 row-cols-sm-3"},K_={class:"col"},Q_={class:"form-floating mb-2"},J_={id:"dateScheduledStart",class:"form-control-plaintext"},X_={class:"col"},Z_={class:"form-floating mb-2"},ek={id:"dateScheduledEnd",class:"form-control-plaintext"},tk={key:0,class:"col"},sk={class:"form-floating mb-2"},ok={id:"relativeProgram",class:"form-control-plaintext"},ak={key:0,class:"mt-2"},lk={class:"table-responsive border"},nk={class:"table table-sm table-bordered1 mb-0"},rk={class:"text-center me-1"},ik={class:"text-center"},dk={class:"text-center"},uk={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ck={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},mk={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(n){const v=n,{moment:k,generateReturnUrl:C}=Ze();return me(()=>{v.item.value}),(_,D)=>{const P=ae("router-link");return t(),s("div",$_,[e("div",null,[D[1]||(D[1]=e("h5",null," VOD ",-1)),e("div",h_,[e("div",w_,[e("div",__,[z(P,{to:`${n.urlViewVodSource}/${n.item.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:F(()=>[K(m(n.item.vodSource.name),1)]),_:1},8,["to"])]),D[0]||(D[0]=e("label",{for:"vodSourceTitle"},"Title",-1))])])]),e("div",null,[D[4]||(D[4]=e("h5",null," Video ",-1)),e("div",k_,[e("div",S_,[e("div",T_,[e("div",I_,[z(P,{to:`${n.urlViewVideo}/${n.item.vodSource.video.videoId}/${o(C)()}`,class:"link-offset-2"},{default:F(()=>[K(m(n.item.vodSource.video.title),1)]),_:1},8,["to"])]),D[2]||(D[2]=e("label",{for:"vodSourceVideoTitle"},"Title",-1))])]),e("div",M_,[e("div",x_,[e("div",C_,m(n.item.vodSource.video.description),1),D[3]||(D[3]=e("label",{for:"vodSourceVideoDesc"},"Description",-1))])])])]),e("div",V_,[D[13]||(D[13]=e("h5",null," Schedule ",-1)),e("div",P_,[e("div",O_,[e("div",A_,[e("div",L_,m(o(k).utc(n.item.startOffsetMillis).format("HH:mm:ss")),1),D[5]||(D[5]=e("label",{for:"startOffsetMillis"},"Start Offset",-1))])]),e("div",U_,[e("div",H_,[e("div",D_,m(o(k).utc(n.item.endOffsetMillis).format("HH:mm:ss")),1),D[6]||(D[6]=e("label",{for:"endOffsetMillis"},"End Offset",-1))])]),e("div",E_,[e("div",q_,[e("div",B_,m(o(k).utc(n.item.durationInMillis).format("HH:mm:ss")),1),D[7]||(D[7]=e("label",{for:"durationInMillis"},"Clip Duration",-1))])])]),e("div",N_,[e("div",R_,[e("div",F_,[e("div",z_,m(o(k).utc(n.item.adBreaksDurationInMillis).format("HH:mm:ss")),1),D[8]||(D[8]=e("label",{for:"adBreaksDurationInMillis"},"Total Ad Breaks Duration",-1))])]),e("div",G_,[e("div",j_,[e("div",Y_,m(o(k).utc(n.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),D[9]||(D[9]=e("label",{for:"totalProgramTemplateDurationInMillis"},"Total Program Duration",-1))])])]),e("div",W_,[e("div",K_,[e("div",Q_,[e("div",J_,m(o(k).utc(n.item.dateScheduledStart).format("lll")),1),D[10]||(D[10]=e("label",{for:"dateScheduledStart"},"Program Start",-1))])]),e("div",X_,[e("div",Z_,[e("div",ek,m(o(k).utc(n.item.dateScheduledEnd).format("lll")),1),D[11]||(D[11]=e("label",{for:"dateScheduledEnd"},"Program End",-1))])]),n.item.relativeProgram?(t(),s("div",tk,[e("div",sk,[e("div",ok,m(n.item.relativeProgram.name),1),D[12]||(D[12]=e("label",{for:"relativeProgram"},"Relative Program",-1))])])):H("",!0)])]),n.item.adBreaks.length?(t(),s("div",ak,[D[15]||(D[15]=e("h5",null," Ad Breaks ",-1)),e("div",lk,[e("table",nk,[e("tbody",null,[D[14]||(D[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(U,null,B(n.item.adBreaks,(Q,j)=>(t(),s("tr",null,[e("td",rk,m(j+1),1),e("td",ik,m(o(k).utc(Q.offsetMillis).format("HH:mm:ss")),1),e("td",dk,m(o(k).utc(Q.durationInMillis).format("HH:mm:ss")),1),e("td",null,[z(P,{to:`${n.urlViewVodSource}/${Q.vodSource.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:F(()=>[Q.vodSource.arn?(t(),s("span",uk)):(t(),s("span",ck)),K(" "+m(Q.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):H("",!0)])}}},fk={key:0,class:"dropdown"},pk={key:0,class:"fas fa-fw fa-play"},vk={key:1,class:"fas fa-fw fa-stop"},gk={class:"dropdown-menu"},bk={key:0},yk={key:1},$k={key:0},hk={class:"nav nav-tabs",id:"myTab",role:"tablist"},wk={class:"nav-item",role:"presentation"},_k={class:"nav-item",role:"presentation"},kk={class:"nav-item",role:"presentation"},Sk={class:"nav-item",role:"presentation"},Tk={class:"nav-item",role:"presentation"},Ik={class:"tab-content",id:"myTabContent"},Mk={class:""},xk={class:"row row-cols-1 row-cols-sm-3"},Ck={class:"col"},Vk={class:"form-floating mb-2"},Pk={class:"col"},Ok={class:"form-floating mb-2"},Ak={class:"col"},Lk={class:"form-floating mb-2"},Uk={class:"d-flex flex-row justify-content-start align-items-center"},Hk={key:0,class:"ms-2"},Dk={class:"row row-cols-sm-2 mt-1"},Ek={class:"col"},qk={class:"form-floating mb-2"},Bk={class:"form-control-plaintext",readonly:""},Nk={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Rk={class:"col"},Fk={class:"form-floating mb-2"},zk={class:"form-control-plaintext",readonly:""},Gk={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},jk={class:""},Yk={class:"d-flex flex-row justify-content-start align-items-center"},Wk={class:"ms-2"},Kk={key:0,class:"alert bg-warning mt-2"},Qk={class:"table-responsive border mt-1"},Jk={class:"table table-bordered1 mb-0"},Xk={class:"badge bg-info"},Zk={key:0,class:"text-wrap"},e2={key:1,class:"text-warning"},t2={key:0,class:"text-end"},s2={key:1,class:"text-end"},o2=["onClick"],a2={key:0},l2={colspan:"999"},n2={class:"d-flex flex-row justify-content-start align-items-center"},r2={class:"ms-2"},i2={if:"item.playbackUrl"},d2=["onClick"],u2={key:0,class:"table-responsive mt-2"},c2={class:"table table-borderless mb-0 table-sm"},m2={class:"align-middle1"},f2={class:"badge bg-success"},p2={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},v2={class:"text-end"},g2={class:"d-flex flex-row justify-content-end align-items-baseline"},b2=["onClick"],y2=["onClick"],$2={class:""},h2={class:"table-responsive border"},w2={class:"table mb-0 table-sm table-bordered1"},_2={class:"align-middle1"},k2={class:"text-center me-1"},S2={class:"d-flex flex-column flex-md-row justify-content-start"},T2={class:""},I2={class:"mb-1 mb-md-0"},M2=["src"],x2={class:"me-auto ms-md-2"},C2={key:0,class:"fas fa-fw fa-check-circle text-success"},V2={class:"me-md-5"},P2={class:"fw-lighter small text-nowrap"},O2={class:"fw-lighter small text-nowrap"},A2={class:"text-center"},L2={class:"text-center"},U2={class:"text-end"},H2={class:"btn-group position-static"},D2=["onClick"],E2={key:0,class:"fas fa-fw fa-chevron-circle-up"},q2={key:1,class:"fas fa-fw fa-chevron-circle-down"},B2={class:"dropdown-menu"},N2=["onClick"],R2={key:0},F2=["onClick"],z2=["onClick"],G2=["onClick"],j2={key:0},Y2={colspan:"999"},W2={class:"text-end mt-2 d-none"},K2={class:""},Q2={class:"text-end mb-2"},J2={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},X2={class:"col"},Z2={class:"card shadow-sm"},eS=["id"],tS={class:"p-1"},sS={class:"card-title1 text-center"},oS={class:"col"},aS={class:"card shadow-sm"},lS=["id"],nS={class:"p-1"},rS={class:"card-title1 text-center text-truncate"},iS={class:"small1"},dS={class:""},uS={key:0,class:"fas fa-fw fa-check-circle text-success"},cS={key:1,class:"fas fa-fw fa-times-circle text-warning"},mS={key:0,class:"fas fa-fw fa-check-circle text-success"},fS={key:1,class:"fas fa-fw fa-times-circle text-warning"},pS={key:0,class:"fas fa-fw fa-check-circle text-success"},vS={key:1,class:"fas fa-fw fa-times-circle text-warning"},gS={key:0,class:"fas fa-fw fa-check text-warning"},bS={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},yS={key:0,class:"fas fa-fw fa-check-circle text-success"},$S={key:1,class:"fas fa-fw fa-times-circle text-warning"},hS={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(n){const v=n,{appTitle:k,pageTitle:C,busy:_,isDirty:D,validations:P,infoMessage:Q,warningMessage:j,errorMessage:I,router:G,axios:le,utils:N,toasts:O,close:u,closeWithReturnUrl:S,generateReturnUrl:y,security:W}=ye({appTitle:"Arcadian-FAST",pageTitle:"View Channel"});Me("$config");const X=$e();X.user;const f=ge({user:X.user,item:null}),b=fe(null),Y=fe(),p=Ie(()=>f.item&&f.item.state==="RUNNING");me(async()=>{await w();const se=N.getPageTab("channel")||"information-tab";T(se)}),Ae(()=>{ue()});const T=se=>{N.setPageTab("channel",se),Y.value=se,se==="preview-tab"&&setTimeout(()=>{var h=document.getElementById("masonry");new nt(h,{})},2e3)},r=se=>se===Y.value?"active":"",c=se=>se===Y.value?"show active":"",w=async()=>{const se=f;if(ue(),!_.value)try{_.value=!0,I.value="",f.item=null;const h=`/api/v1/channels/${v.id}/`;await le.get(h).then(ce=>{se.item=ce.data,se.item.outputs.forEach(Pe=>{Pe.playbackConfigurations.forEach(de=>{if(Pe.playbackUrl){const Oe=Pe.playbackUrl,Te=Oe.lastIndexOf("/"),at=Oe.substring(0,Te),je=Oe.substring(Te+1),lt=de.hlsConfigurationManifestEndpointPrefix;lt&&(de.hlsPlaylist=lt+je)}})})})}catch(h){I.value=N.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{_.value=!1}},d=async()=>{if(confirm("Do you want to delete this Channel?")&&!_.value)try{_.value=!0,I.value="";const h=`/api/v1/channels/${v.id}/`;await le.delete(h).then(ce=>{}),S(v.urlMain)}catch(h){I.value=N.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{_.value=!1}},i=async()=>{await w()},l=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!_.value){I.value=null;try{_.value=!0,await le.post(`/api/v1/channels/${v.id}/publish/`).then(h=>{O.success("Publish Channel","Channel was published.")}),_.value=!1,await i()}catch(h){I.value=N.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{_.value=!1}}},a=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!_.value){I.value=null;try{_.value=!0,await le.delete(`/api/v1/channels/${v.id}/unpublish/`).then(h=>{O.warning("Remove Channel","Channel was removed.")}),_.value=!1,await i()}catch(h){I.value=N.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{_.value=!1}}},L=()=>{b.value.open(v.id)},M=async se=>{if(se.outputType==="HLS"){const h=Ve(Tw,{channelOutputId:se.channelOutputId,playbackUrl:se.playbackUrl},{chore:!0,keepInitial:!1}),{data:ce,isCanceled:we}=await h.reveal();h.close(),we||await i()}},g=async()=>{const se=Ve(Ww,{channelId:f.item.channelId},{chore:!0,keepInitial:!1}),{data:h,isCanceled:ce}=await se.reveal();se.close(),ce||await i()},q=async se=>{const h=Ve(mt,{programId:se},{chore:!0,keepInitial:!1}),{data:ce,isCanceled:we}=await h.reveal();h.closeAll(),we||await i()},A=async(se,h)=>{const ce=Ve(y_,{channelId:f.item.channelId,sourceLocationId:f.item.fillerSlateSourceLocation.sourceLocationId,vodSourceId:f.item.fillerSlateVodSource.vodSourceId},{chore:!0,keepInitial:!1}),{data:we,isCanceled:Pe}=await ce.reveal();ce.close(),Pe||await i()},$=async se=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!_.value){I.value=null;try{_.value=!0,await le.delete(`/api/v1/programs/${se}/`).then(ce=>{O.success("Delete Program","Program was deleted..",{async onClose(){}})}),_.value=!1,await i()}catch(ce){I.value=N.getErrorMessageAsHtml(ce),window.scrollTo(0,0)}finally{_.value=!1}}},E=async se=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!_.value){I.value=null;try{_.value=!0,await le.delete(`/api/v1/channelOutputs/${se}/`).then(ce=>{O.success("Delete Channel Output","Channel output was deleted..")}),_.value=!1,await i()}catch(ce){I.value=N.getErrorMessageAsHtml(ce),window.scrollTo(0,0)}finally{_.value=!1}}},Z=async se=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!_.value){I.value=null;try{_.value=!0,await le.post(`/api/v1/programs/${se}/publish/`).then(ce=>{O.success("Publish Program","Program was published..",{async onClose(){}})}),_.value=!1,await i()}catch(ce){I.value=N.getErrorMessageAsHtml(ce),window.scrollTo(0,0)}finally{_.value=!1}}},V=async se=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!_.value){I.value=null;try{_.value=!0,await le.delete(`/api/v1/programs/${se}/unpublish/`).then(ce=>{O.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),_.value=!1,await i()}catch(ce){I.value=N.getErrorMessageAsHtml(ce),window.scrollTo(0,0)}finally{_.value=!1}}},re=async se=>{if(!_.value){I.value=null;try{_.value=!0,await le.put(`/api/v1/channels/${v.id}/change-state/${se}`).then(h=>{O.success("Update Channel state","Change state was updated")}),_.value=!1,se==="STOPPED"&&Y.value==="preview-tab"&&(ue(),T("information-tab")),await i()}catch(h){I.value=N.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{_.value=!1}}},J=async se=>{if(!_.value)try{_.value=!0,I.value="",await le.post(`/api/v1/channelOutputs/${se}/playback/publish/`).then(h=>{O.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),_.value=!1,await i()}catch(h){I.value=N.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{_.value=!1}},oe=async se=>{if(confirm("Do you want to remove this Playback Configuration?")&&!_.value)try{_.value=!0,I.value="",await le.delete(`/api/v1/channelOutputs/${se}/playback/`).then(ce=>{O.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),_.value=!1,await i()}catch(ce){I.value=N.getErrorMessageAsHtml(ce),window.scrollTo(0,0)}finally{_.value=!1}},x=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const se=f.item.outputs;ue(),se.forEach(h=>{var ce=document.getElementById(`video-${h.channelOutputId}`);h.hls&&h.hls.destroy(),h.hls=N.createHlsStream(ce,h.playbackUrl,"Main playlist started."),ce.play(),h.playbackConfigurations.forEach(we=>{if(we.hls&&we.hls.destroy(),we.arn){var Pe=document.getElementById(`video-${we.channelOutputPlaybackConfigurationId}`);try{we.hls=N.createHlsStream(Pe,we.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Pe.play()}catch(de){O.error("Failed Stream SSAI Playlist",de)}}})}),setTimeout(()=>{var h=document.getElementById("masonry");new nt(h,{})},2e3)}},ue=()=>{f.item&&f.item.outputs&&f.item.outputs.forEach(h=>{h.hls&&(h.hls.detachMedia(),h.hls.destroy(),delete h.hls),h.playbackConfigurations.forEach(ce=>{ce.hls&&(ce.hls.detachMedia(),ce.hls.destroy(),delete ce.hls)})})};return(se,h)=>{const ce=ae("router-link"),we=ae("PageHeader"),Pe=ae("PageBody");return t(),ve(be,null,{default:F(()=>[e("div",null,[z(we,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(C)},{default:F(()=>[e("button",{onClick:h[0]||(h[0]=de=>d()),class:"me-2 btn btn-danger"},h[21]||(h[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),f.item?(t(),s("div",fk,[e("button",{class:te([[p.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[p.value?(t(),s("span",pk)):(t(),s("span",vk)),K(" "+m(f.item.state),1)],2),e("ul",gk,[f.item.arn?(t(),s("li",bk,[p.value?(t(),s("button",{key:0,onClick:h[1]||(h[1]=de=>re("STOPPED")),class:"dropdown-item"},h[22]||(h[22]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),K("Stop ")]))):(t(),s("button",{key:1,onClick:h[2]||(h[2]=de=>re("RUNNING")),class:"dropdown-item"},h[23]||(h[23]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),K("Start ")])))])):H("",!0),p.value?H("",!0):(t(),s("li",yk,[f.item.arn?(t(),s("button",{key:0,onClick:h[3]||(h[3]=de=>a()),class:"dropdown-item"},h[24]||(h[24]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),K("Unpublish ")]))):(t(),s("button",{key:1,onClick:h[4]||(h[4]=de=>l()),class:"dropdown-item"},h[25]||(h[25]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),K("Publish ")])))])),f.item.arn?(t(),s(U,{key:2},[h[27]||(h[27]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:h[5]||(h[5]=de=>l()),class:"dropdown-item"},h[26]||(h[26]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),K("Republish ")]))])],64)):H("",!0)])])):H("",!0),z(ce,{to:`${n.urlSchedulePrograms}/${n.id}`,class:"ms-2 btn btn-outline-primary"},{default:F(()=>h[28]||(h[28]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:h[6]||(h[6]=de=>i()),class:"ms-2 btn btn-secondary"},h[29]||(h[29]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:h[7]||(h[7]=de=>o(S)(v.urlMain)),class:"btn btn-secondary ms-1"},h[30]||(h[30]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(Pe,{errorMessage:o(I)},{default:F(()=>[f.item?(t(),s("div",$k,[e("ul",hk,[e("li",wk,[e("button",{onClick:h[8]||(h[8]=de=>T("information-tab")),class:te([r("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},h[31]||(h[31]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),K("Information ")]),2)]),e("li",_k,[e("button",{onClick:h[9]||(h[9]=de=>T("outputPlayback-tab")),class:te([r("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},h[32]||(h[32]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),K("Output/Playback ")]),2)]),e("li",kk,[e("button",{onClick:h[10]||(h[10]=de=>T("programs-tab")),class:te([r("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},h[33]||(h[33]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),K("Programs ")]),2)]),e("li",Sk,[e("button",{onClick:h[11]||(h[11]=de=>T("preview-tab")),class:te([[p.value?"":"disabled",r("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},h[34]||(h[34]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),K("Preview ")]),2)]),e("li",Tk,[e("button",{onClick:h[12]||(h[12]=de=>T("checklist-tab")),class:te([r("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},h[35]||(h[35]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),K("Checklist ")]),2)])]),e("div",Ik,[e("div",{class:te([c("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Mk,[e("div",xk,[e("div",Ck,[e("div",Vk,[R(e("input",{"onUpdate:modelValue":h[13]||(h[13]=de=>f.item.name=de),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[ee,f.item.name]]),h[36]||(h[36]=e("label",{for:"name"},"Name",-1))])]),e("div",Pk,[e("div",Ok,[R(e("input",{"onUpdate:modelValue":h[14]||(h[14]=de=>f.item.playbackMode=de),type:"text",class:"form-control-plaintext",id:"playbackMode",readonly:""},null,512),[[ee,f.item.playbackMode]]),h[37]||(h[37]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",Ak,[e("div",Lk,[R(e("input",{"onUpdate:modelValue":h[15]||(h[15]=de=>f.item.tier=de),type:"text",class:"form-control-plaintext",id:"tier",readonly:""},null,512),[[ee,f.item.tier]]),h[38]||(h[38]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",Uk,[h[40]||(h[40]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),p.value?H("",!0):(t(),s("div",Hk,[e("button",{onClick:h[16]||(h[16]=de=>A(f.item.fillerSlateSourceLocation.sourceLocationId,f.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},h[39]||(h[39]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",Dk,[e("div",Ek,[e("div",qk,[e("div",Bk,[z(ce,{to:`${n.urlViewSourceLocation}/${f.item.fillerSlateSourceLocation.sourceLocationId}/${o(y)()}`,class:te([[f.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName"},{default:F(()=>[f.item.fillerSlateSourceLocation.arn?(t(),s("span",Nk)):H("",!0),K(m(f.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"])]),h[41]||(h[41]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",Rk,[e("div",Fk,[e("div",zk,[z(ce,{to:`${n.urlViewVodSource}/${f.item.fillerSlateVodSource.vodSourceId}/${o(y)()}`,class:te([[f.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:F(()=>[f.item.fillerSlateVodSource.arn?(t(),s("span",Gk)):H("",!0),K(m(f.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"])]),h[42]||(h[42]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:te([c("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",jk,[e("div",null,[e("div",Yk,[h[44]||(h[44]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",Wk,[e("button",{onClick:h[17]||(h[17]=de=>g()),class:"btn btn-outline-primary btn-sm"},h[43]||(h[43]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),f.item.outputs.length<=0?(t(),s("div",Kk,h[45]||(h[45]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),K("Channel Output is required ")]))):H("",!0),e("div",Qk,[e("table",Jk,[h[55]||(h[55]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url"),e("th")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider align-middle"},{default:F(()=>[(t(!0),s(U,null,B(f.item.outputs,(de,Oe)=>(t(),s(U,{key:de.channelOutputId},[e("tr",null,[e("td",null,m(Oe+1),1),e("td",null,[e("div",null,m(de.manifestName),1),e("div",null,[e("span",Xk,m(de.outputType),1)])]),e("td",null,[e("div",null,[z(ce,{to:`${n.urlViewSourceGroup}/${de.sourceGroupId}/${o(y)()}`,class:"link-offset-2",tag:"button"},{default:F(()=>[K(m(de.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[de.playbackUrl?(t(),s("div",Zk,m(de.playbackUrl),1)):(t(),s("div",e2,h[46]||(h[46]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),K("Publish channel to get the playback url ")])))]),p.value?(t(),s("td",t2)):(t(),s("td",s2,[e("button",{onClick:Te=>E(de.channelOutputId),class:"btn btn-outline-danger btn-sm"},h[47]||(h[47]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,o2)]))]),de.playbackUrl?(t(),s("tr",a2,[h[52]||(h[52]=e("td",null,null,-1)),h[53]||(h[53]=e("td",null,null,-1)),h[54]||(h[54]=e("td",null,null,-1)),e("td",l2,[e("div",n2,[h[49]||(h[49]=e("h5",null,[K("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",r2,[e("div",i2,[e("button",{onClick:Te=>M(de),class:"btn btn-outline-primary btn-sm"},h[48]||(h[48]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,d2)])])]),de.playbackConfigurations.length>0?(t(),s("div",u2,[e("table",c2,[e("tbody",null,[(t(!0),s(U,null,B(de.playbackConfigurations,(Te,at)=>(t(),s("tr",m2,[e("td",null,m(at+1),1),e("td",null,[e("span",f2,m(Te.name),1),e("div",p2,[e("span",null,m(Te.adDecisionServerUrl),1)])]),e("td",v2,[e("div",g2,[Te.arn?H("",!0):(t(),s("button",{key:0,onClick:je=>J(Te.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},h[50]||(h[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,b2)),e("button",{onClick:je=>oe(Te.channelOutputPlaybackConfigurationId),class:"btn btn-outline-danger btn-sm ms-2"},h[51]||(h[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,y2)])])]))),256))])])])):H("",!0)])])):H("",!0)],64))),128))]),_:1},512),[[ke,f.item.outputs.length>0]])])])])])],2),e("div",{class:te([c("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",$2,[e("div",h2,[e("table",w2,[h[62]||(h[62]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),R(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:F(()=>[(t(!0),s(U,null,B(f.item.programs,(de,Oe)=>(t(),s(U,{key:de.programId},[e("tr",_2,[e("td",k2,m(Oe+1),1),e("td",null,[e("div",S2,[e("div",T2,[de.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},B(de.vodSource.video.thumbnails,Te=>(t(),s("div",I2,[e("img",{src:Te.url,class:"img-fuild border",width:"128"},null,8,M2)]))),256)):H("",!0)]),e("div",x2,[de.arn?(t(),s("span",C2)):H("",!0),e("span",null,m(de.name),1)]),e("div",V2,[e("div",null,[e("span",P2,m(o(N).moment.utc(de.dateScheduledStart).format("lll"))+" (utc)",1)]),e("div",null,[e("span",O2,m(o(N).moment(de.dateScheduledStart).format("lll"))+" (local)",1)])])])]),e("td",A2,m(o(N).moment.utc(de.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",L2,m(de.adBreaks.length),1),e("td",U2,[e("div",H2,[e("button",{onClick:Te=>de.expand=!de.expand,type:"button",class:te([[de.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[de.expand?(t(),s("span",E2)):(t(),s("span",q2))],10,D2),h[60]||(h[60]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",B2,[e("li",null,[e("button",{onClick:Te=>q(de.programId),class:"dropdown-item"},h[56]||(h[56]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),K("Edit ")]),8,N2)]),de.arn?(t(),s("li",R2,[e("button",{onClick:Te=>V(de.programId),class:"dropdown-item"},h[57]||(h[57]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),K("Unpublish ")]),8,F2)])):(t(),s(U,{key:1},[e("li",null,[e("button",{onClick:Te=>Z(de.programId),class:"dropdown-item"},h[58]||(h[58]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),K("Publish ")]),8,z2)]),e("li",null,[e("button",{onClick:Te=>$(de.programId),class:"dropdown-item"},h[59]||(h[59]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),K("Remove ")]),8,G2)])],64))])])])]),de.expand?(t(),s("tr",j2,[h[61]||(h[61]=e("td",null,null,-1)),e("td",Y2,[z(mk,{item:de,urlViewVideo:n.urlViewVideo,urlViewVodSource:n.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):H("",!0)],64))),128))]),_:1},512),[[ke,f.item.programs.length>0]])])]),e("div",W2,[e("button",{onClick:h[18]||(h[18]=de=>L()),class:"btn btn-outline-primary"},h[63]||(h[63]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),K("Program ")]))])])],2),p.value?(t(),s("div",{key:0,class:te([c("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",K2,[e("div",Q2,[f.item.outputs[0].hls?(t(),s("button",{key:1,onClick:h[20]||(h[20]=de=>ue()),class:"btn btn-primary"},h[65]||(h[65]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:h[19]||(h[19]=de=>x()),class:"btn btn-primary"},h[64]||(h[64]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",J2,[(t(!0),s(U,null,B(f.item.outputs,de=>(t(),s(U,null,[e("div",X2,[e("div",Z2,[e("video",{id:`video-${de.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,eS),e("div",tS,[e("div",sS,m(de.manifestName),1)])])]),(t(!0),s(U,null,B(de.playbackConfigurations,(Oe,Te)=>(t(),s("div",oS,[e("div",aS,[e("video",{id:`video-${Oe.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,lS),e("div",nS,[e("div",rS,[K(" #"+m(Te+1)+" ",1),e("span",iS,m(Oe.name),1)])])])]))),256))],64))),256))])])],2)):H("",!0),e("div",{class:te([c("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",dS,[h[71]||(h[71]=K(" Checklist ")),e("ul",null,[e("li",null,[f.item.fillerSlateSourceLocation.arn?(t(),s("span",uS)):(t(),s("span",cS)),h[66]||(h[66]=K(" Filler Slate Source Location "))]),e("li",null,[f.item.fillerSlateVodSource.arn?(t(),s("span",mS)):(t(),s("span",fS)),h[67]||(h[67]=K(" Filler Slate VOD Source "))]),e("li",null,[f.item.outputs.length>0?(t(),s("span",pS)):(t(),s("span",vS)),h[69]||(h[69]=K(" Outputs ")),e("ul",null,[e("li",null,[f.item.outputs.some(de=>de.playbackConfigurations.length>0)?(t(),s("span",gS)):(t(),s("span",bS)),h[68]||(h[68]=K(" Ad Insertion setup "))])])]),e("li",null,[f.item.programs.length>0?(t(),s("span",yS)):(t(),s("span",$S)),h[70]||(h[70]=K(" Programs "))])])])],2)])])):H("",!0)]),_:1},8,["errorMessage"]),z(tw,{ref_key:"modalAddProgram",ref:b,onRefresh:i},null,512)])]),_:1})}}},wS={path:"/",component:Ca,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Qa},{path:"videos",children:[{path:"",component:Kn},{path:"view/:id",component:Ar,props:!0},{path:"add",component:Pl},{path:"edit/:id",component:pn,props:!0}]},{path:"source-groups",children:[{path:"add",component:Dr},{path:"edit/:id",component:li,props:!0},{path:"",component:fi},{path:"view/:id",component:xi,props:!0}]},{path:"source-locations",children:[{path:"add",component:Li},{path:"edit/:id",component:Di,props:!0},{path:"",component:Wi},{path:"view/:id",component:vd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:Pu},{path:"edit/:id",component:lc,props:!0},{path:"",component:Hc},{path:"view/:id",component:wf,props:!0}]},{path:"channels",children:[{path:"add",component:P1},{path:"edit/:id",component:L1,props:!0},{path:"",component:z1},{path:"schedule-programs/:id",component:J$,props:!0},{path:"view/:id",component:hS,props:!0}]},{path:"program-templates",children:[{path:"add",component:dv},{path:"edit/:id",component:lg,props:!0},{path:"",component:Tg},{path:"view/:id",component:d1,props:!0}]}]},ot=pt({history:vt("/"),linkActiveClass:"active",routes:[{...fo},{path:"/administrator",redirect:"/"},{...wS}]});ot.beforeEach(async n=>{wt().clear();var k=n.meta;const C=["/accounts/login","/accounts/loginRedirect","/accounts/logout","/accounts/register"],_=k.requiresAuth&&!C.includes(n.path),D=$e(),P=D.user;if(_&&!P)return D.returnUrl=n.fullPath,{path:"/accounts/login",query:{returnUrl:encodeURIComponent(n.fullPath)}};var Q=n.meta.roles;if(Q&&!D.user.roles.some(j=>Q.includes(j)))return alert("You are not authorized to acccess this page."),{path:"/accounts/login/",query:{returnUrl:encodeURIComponent(n.fullPath)}}});const _S={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const n=this,k=new gt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();k.on("onNotificationCreated",function(C){let _=C.content;C.notificationEntityClassText==="Deposit"&&(_+="<br/>",_+=`<a href="${n.urlViewDeposit}${C.referenceId}">Click ${C.notificationEntityClassText} here</a>`),C.notificationEntityClassText==="Withdraw"&&(_+="<br/>",_+=`<a href="${n.urlViewWithdraw}${C.referenceId}">Click ${C.notificationEntityClassText} here</a>`),C.notificationEntityClassText==="ManualModeOfPayment"&&(_+="<br/>",_+=`<a href="${n.urlViewManualModeOfPayment}${C.referenceId}">Click ${C.notificationEntityClassText} here</a>`),C.iconClass;let D="secondary";switch(C.notificationType){case 1:D="success";break;case 3:D="info";break;case 3:D="success";break;case 4:D="info";break;case 5:D="warning";break;case 6:D="error";break}n.$toast[D](C.subject,_,{timeOut:1e4});const P=C.subject,I={body:_,icon:"/img/192x102.png"};new Notification(P,I)}),k.on("jobUpdated",function(C){n.$bus.$emit("event:job-updated",C)}),await k.start().then(function(){}).catch(function(C){})}}};function kS(n,v,k,C,_,D){return t(),s("div")}const SS=xe(_S,[["render",kS],["__scopeId","data-v-5b4a9fa2"]]),TS={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},IS={class:"container"},MS={class:"col-md"},xS={class:"navbar-brand mb-0 ms-1 align-middle"},CS={class:"col-md-auto"},VS={class:"d-flex flex-row align-items-center justify-content-end"},PS={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(n){return(v,k)=>(t(),ve(be,null,{default:F(()=>[e("nav",TS,[e("div",IS,[e("div",MS,[He(v.$slots,"title",{},()=>[e("a",xS,[e("i",{class:te([n.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,m(n.pageTitle),1)])],!0)]),e("div",CS,[e("div",VS,[He(v.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},OS=xe(PS,[["__scopeId","data-v-eb40af38"]]),AS={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},LS=["innerHTML"],US={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},HS={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(v,k)=>(t(),ve(be,null,{default:F(()=>[He(v.$slots,"default",{},()=>[n.errorMessage?(t(),s("div",AS,[k[0]||(k[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:n.errorMessage},null,8,LS)])):H("",!0),n.vuelidate&&n.vuelidate.$error?(t(),s("div",US,[k[1]||(k[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,B(n.vuelidate.$errors,C=>(t(),s("li",{key:C.$uid},[C.$validator==="$each"?(t(),s(U,{key:0},[K(" Check errors in '"+m(C.$property)+"' ",1)],64)):(t(),s(U,{key:1},[K(m(C.$message),1)],64))]))),128))])])):H("",!0)])]),_:3}))}},DS={class:"py-3 container flex-grow-1 overflow-y-auto"},ES={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(v,k)=>{const C=ae("PageMessages");return t(),ve(be,null,{default:F(()=>[e("div",DS,[z(C,{errorMessage:n.errorMessage,vuelidate:n.vuelidate},null,8,["errorMessage","vuelidate"]),He(v.$slots,"default")])]),_:3})}}},qS={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const n=this;n.busy||(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveFirst(){const n=this;if(n.busy)return;n.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveLast(){const n=this;if(n.busy)return;const v=n.filter;v.pageIndex!==v.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(v.totalPages))},async move(n){const v=this;if(v.busy)return;const k=v.filter,C=k.pageIndex+n;C>=0&&C<=k.totalPages&&(document.activeElement&&document.activeElement.blur(),await v.search(C))}}},BS={class:"mt-2"},NS={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},RS={key:0,class:"col-sm order-2 order-sm-1"},FS={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},zS={class:"me-1 fw-bold"},GS={class:"fw-bold"},jS={class:"ms-1"},YS={class:"col-sm-auto ms-auto order-1 order-sm-2"},WS={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},KS={key:0,class:"page-item"},QS={key:1,class:"page-item"},JS={key:2,class:"page-item"},XS={class:"page-item active"},ZS={class:"page-link"},e0={key:3,class:"page-item"},t0={key:4,class:"page-item"},s0={key:5,class:"page-item"},o0={key:1,class:"text-info font-weight-bold text-center"},a0={key:0},l0={key:1};function n0(n,v,k,C,_,D){return t(),s("div",BS,[k.filter.items.length?(t(),s("div",NS,[k.showPerPage?(t(),s("div",RS,[e("div",FS,[e("div",null,[e("span",zS,m(k.filter.totalCount),1),v[8]||(v[8]=K("records in ")),e("span",GS,m(k.filter.totalPages),1),v[9]||(v[9]=K(" page(s) "))]),e("div",jS,[R(e("select",{"onUpdate:modelValue":v[0]||(v[0]=P=>k.filter.pageSize=P),onChange:v[1]||(v[1]=(...P)=>D.changePagination&&D.changePagination(...P)),class:"form-select form-select-sm me-1"},v[10]||(v[10]=[Je('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[pe,k.filter.pageSize]])]),v[11]||(v[11]=e("div",{class:"ms-1"},"per page",-1))])])):H("",!0),e("div",YS,[e("ul",WS,[k.filter.pageIndex!==1?(t(),s("li",KS,[e("button",{class:"page-link","aria-label":"Previous",onClick:v[2]||(v[2]=(...P)=>D.moveFirst&&D.moveFirst(...P))},v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):H("",!0),k.filter.pageIndex>2?(t(),s("li",QS,[e("button",{class:"page-link",onClick:v[3]||(v[3]=P=>D.move(-2))},m(k.filter.pageIndex-2),1)])):H("",!0),k.filter.pageIndex>1?(t(),s("li",JS,[e("button",{class:"page-link",onClick:v[4]||(v[4]=P=>D.move(-1))},m(k.filter.pageIndex-1),1)])):H("",!0),e("li",XS,[e("span",ZS,m(k.filter.pageIndex),1)]),k.filter.pageIndex<k.filter.totalPages?(t(),s("li",e0,[e("button",{class:"page-link",onClick:v[5]||(v[5]=P=>D.move(1))},m(k.filter.pageIndex+1),1)])):H("",!0),k.filter.pageIndex<k.filter.totalPages-1?(t(),s("li",t0,[e("button",{class:"page-link",onClick:v[6]||(v[6]=P=>D.move(2))},m(k.filter.pageIndex+2),1)])):H("",!0),k.filter.pageIndex<k.filter.totalPages?(t(),s("li",s0,[e("button",{class:"page-link","aria-label":"Next",onClick:v[7]||(v[7]=(...P)=>D.moveLast&&D.moveLast(...P))},v[13]||(v[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):H("",!0)])])])):(t(),s("div",o0,[k.noRecords?(t(),s("div",a0,m(k.noRecords),1)):(t(),s("div",l0,"No record(s) found."))]))])}const r0=xe(qS,[["render",n0]]),i0={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let n=this;if(!n.enabled)return;let v=n.filter;v.sortField===n.field?v.sortOrder===0?v.sortField=null:v.sortOrder=v.sortOrder===0?1:0:(v.sortField=n.field,v.sortOrder=1),n.$emit("search")}}},d0={class:"align-self-center"};function u0(n,v,k,C,_,D){return t(),s("div",{onClick:v[0]||(v[0]=(...P)=>D.click&&D.click(...P)),class:"d-flex flex-row justify-content-start align-content-center",style:dt({cursor:k.enabled?"pointer":""})},[He(n.$slots,"default"),e("span",d0,[k.showSort?(t(),s("span",{key:0,class:te([{"fa-sort text-gray-500":!D.currentSortField(),"fa-sort-up":D.currentSortField()&&D.sortUp(),"fa-sort-down":D.currentSortField()&&!D.sortUp()},"fas fa-fw mr-1"])},null,2)):H("",!0)])],4)}const c0=xe(i0,[["render",u0]]),m0={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(n){const v=this;v.setSelected(n),v.$emit("onSelectedRow",n)}}},f0={class:"table-responsive m-0"},p0=["href"],v0={key:1},g0=["onClick"],b0={class:"form-group row no-gutters"},y0={class:"col-5 col-form-label"},$0={class:"col align-self-center"},h0=["href"],w0={key:1};function _0(n,v,k,C,_,D){return t(),s("div",null,[e("div",f0,[e("table",{class:te(["table table-hover d-none d-md-table card",k.tableCss])},[e("thead",null,[He(n.$slots,"header",{},()=>[v[0]||(v[0]=e("th",null,"#",-1)),(t(!0),s(U,null,B(k.header.columns,P=>(t(),s("th",null,m(P.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(U,null,B(k.items,(P,Q)=>He(n.$slots,"table-row",{key:`row1-${P[k.header.key]}`,item:P,index:Q},()=>[e("td",null,m(k.getRowNumber(Q)),1),(t(!0),s(U,null,B(k.header.columns,j=>(t(),s("td",null,[j.href?(t(),s("a",{key:0,href:j.href(P[k.header.key]),class:"font-weight-bold"},m(P[j.field]),9,p0)):(t(),s("span",v0,m(P[j.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:te(["d-block d-md-none",k.rowCss])},[(t(!0),s(U,null,B(k.items,(P,Q)=>(t(),s("div",{key:`row2-${P[k.header.key]}`,onClick:j=>D.onSelectedRow(P),class:"border"},[e("div",{class:te(["p-2",{"b-left":k.isSelected(P)}])},[He(n.$slots,"table-list",{item:P,index:Q},()=>[(t(!0),s(U,null,B(k.header.columns,j=>(t(),s("div",b0,[e("label",y0,m(j.title),1),e("div",$0,[j.href?(t(),s("a",{key:0,href:j.href(P[k.header.key]),class:"font-weight-bold"},m(P[j.field]),9,h0)):(t(),s("span",w0,m(P[j.field]),1))])]))),256))],!0)],2)],8,g0))),128))],2)])}const k0=xe(m0,[["render",_0],["__scopeId","data-v-65929213"]]),Ce=bt(ht);Ce.use(yt());Ce.use($t);Ce.use(ot);Ce.component("m-notification",SS);Ce.component("m-pagination",r0);Ce.component("sort-field",c0);Ce.component("table-list",k0);Ce.component("Toasts",Ta);Ce.component("PageHeader",OS);Ce.component("PageMessages",HS);Ce.component("PageBody",ES);const S0="https://sonyfastpoc.azurewebsites.net/",T0="Arcadian-FAST",I0=void 0,M0={API_URL:S0,appName:T0,tenantId:I0};Ce.provide("$config",M0);Ce.provide("$bus",et);Ce.mount("#app");
