import{o as t,c as ce,r as ee,h as dt,d as Qe,a as re,e as Re,b as s,f as e,g as B,w as E,i as z,t as v,F as A,j as q,k as U,l as de,m as Ge,n as Se,p as Xe,q as Fe,u as ut,s as Ze,P as et,v as fe,x as te,y as oe,z as $e,T as pe,A as o,B as ct,C as L,D as J,E as mt,G as le,H as tt,I as _e,J as he,K as Ue,L as ue,M as De,N as Te,O as Be,Q as ke,R as xe,S as Oe,U as Je,V as ft,W as pt,X as vt,Y as Ae,Z as gt,_ as bt}from"./vendor-BfSyRqtS-chunk.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))x(h);new MutationObserver(h=>{for(const R of h)if(R.type==="childList")for(const I of R.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&x(I)}).observe(document,{childList:!0,subtree:!0});function k(h){const R={};return h.integrity&&(R.integrity=h.integrity),h.referrerPolicy&&(R.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?R.credentials="include":h.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function x(h){if(h.ep)return;h.ep=!0;const R=k(h);fetch(h.href,R)}})();const yt={__name:"App",setup(r){return(f,k)=>{const x=ee("router-view");return t(),ce(x)}}};function st(){const r=N=>{var p;let W=N,M=W.response,D="";if(!W.response)return N.message;if(M.status===500){if(typeof M.data=="string")return M.data;if(M.data.content)return M.data.content;if(M.data.detail)return M.data.detail}if(M.status===401){const O=`${window.location.pathname}${window.location.search}`;D=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(O)}`}'>here</a> to login.`}else if(M.status===400){let O=W.response.data.errors;D=W.response.data.title||W.response.data,O&&(D+="<ul>");for(let w in O){let K=O[w];for(let X in O[w]){let d=K[X];D+=`<li>${d}</li>`}}O&&(D+="</ul>"),D||(D=W.message),D&&D.content&&(D=D.content)}else M.status===404?D=((p=M==null?void 0:M.data)==null?void 0:p.title)||(M==null?void 0:M.data)||"Record not found.":typeof M.data=="string"&&(D=W.message,D===""&&(D=`Error <b>Http ${M.status}</b>.<br/>Please contact the System Administrator.`));return D},f=N=>JSON.parse(JSON.stringify(N)),k=N=>{if(typeof N!="number")return N;var W=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return W.format(N)},x=(N,W,M)=>{const p={value:W,expiry:new Date().getTime()+M};debugger;localStorage.setItem(N,JSON.stringify(p))},h=N=>{debugger;const W=localStorage.getItem(N);if(!W)return null;const M=JSON.parse(W);return new Date().getTime()>M.expiry?(localStorage.removeItem(N),null):M.value},R="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:r,clone:f,toCurrency:k,moment:dt,localStorageSetWithExpiry:x,localStorageGetWithExpiry:h,setPageTab:(N,W)=>{var M=localStorage.getItem(R);M?M=JSON.parse(M):M={},M[N]=W,localStorage.setItem(R,JSON.stringify(M))},getPageTab:N=>{var W=localStorage.getItem(R);return W?W=JSON.parse(W):W={},W[N]},createHlsStream:(N,W,M)=>{var D=new Hls({autoStartLoad:M??!0});return D.on(Hls.Events.MEDIA_ATTACHED,function(){}),D.on(Hls.Events.MANIFEST_PARSED,function(p,O){console.log("manifest loaded, found "+O.levels.length+" quality level")}),D.on(Hls.Events.ERROR,function(p,O){if(O.fatal)switch(O.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),D.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",O);break;default:D.destroy();break}}),D.loadSource(W),D.attachMedia(N),D},isValidTime:N=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(N)}}const $t=st(),ot=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(ot.exp*1e3),ht=wt.isAfter()?ot:null,ye=Qe({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(r){try{this.user=r,localStorage.setItem("user",JSON.stringify(r))}catch(f){debugger;alert(f)}},logout(){this.user=null,localStorage.removeItem("user"),nt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),kt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(kt));const _t={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},ze=_t,at=Qe("msal",()=>{const r=re({auth:{clientId:ze.VITE_AUTH_CLIENT_ID,authority:ze.VITE_AUTH_AUTHORITY_URL,redirectUri:ze.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),f=re("");return{msalConfig:r,accessToken:f,setAccessToken:x=>{f.value=x}}}),Ye={$on:(...r)=>Re.on(...r),$once:(...r)=>Re.once(...r),$off:(...r)=>Re.off(...r),$emit:(...r)=>Re.emit(...r)};function St(){const r=(R,I,G,F)=>{Ye.$emit("toast-message",{title:R,message:I,type:G,options:F})};return{success:(R,I,G={})=>{r(R,I,"success",G)},warning:(R,I,G={})=>{r(R,I,"warning",G)},info:(R,I,G={})=>{r(R,I,"info",G)},error:(R,I,G={})=>{r(R,I,"danger",G)}}}const Me=(r,f)=>{const k=r.__vccOpts||r;for(const[x,h]of f)k[x]=h;return k},Tt={data(){return{notifications:[],messages:[]}},async created(){const r=this;r.$bus.$on("event:notification-received",()=>{r.getUnreadNotifications()}),r.$bus.$on("event:notification-marked-as-read",f=>{r.notifications.some(x=>x.notificationId===f)&&r.getUnreadNotifications()}),r.$bus.$on("event:notification-removed",f=>{r.notifications.some(x=>x.notificationId===f)&&r.getUnreadNotifications()}),r.$bus.$on("event:chat-marked-as-read",r.onChatMarkedAsRead),r.$bus.$on("event:chat-message-received",r.onChatMessageReceived)},async mounted(){const r=this,f=r.$refs.notifications,k=r.$refs.messages;f&&f.offsetParent,k&&k.offsetParent&&await r.getUnreadChats()},methods:{async logout(){const r=this;try{await r.$util.axios.post("/api/accounts/logout").then(f=>{const k="/";r.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){r.$util.href(k)}})})}catch(f){r.$util.handleError(f)}},async onChatMarkedAsRead(r){let f=this,k=f.messages.find(x=>x.chatId===r);if(k){let x=f.messages.indexOf(k);f.messages.splice(x,1)}},async onChatMessageReceived(r){let f=this,k=f.messages.find(h=>h.chatId===r.chatId);if(k)k.lastMessageText=r.content;else{var x={chatId:r.chatId,isRead:!1,lastDateSent:r.dateSent,lastMessageText:r.content,senderFirstLastName:`${r.sender.firstName} ${r.sender.lastName}`,senderInitials:r.sender.initials,senderProfilePicture32:r.sender.profilePicture32,urlPicture:f.$util.getProfilePictureUrl(r.sender.profilePicture32,r.sender.initials)};f.messages.push(x)}},async getUnreadNotifications(){const r=this;try{await r.$util.axios.get("api/accounts/unread-notifications").then(f=>{r.notifications=f.data})}catch(f){r.$util.handleError(f)}},async getUnreadChats(){const r=this;try{await r.$util.axios.get("api/accounts/unread-chats").then(f=>{r.messages=f.data;for(let k in r.messages){let x=r.messages[k];r.$set(x,"urlPicture",r.$util.getProfilePictureUrl(x.senderProfilePicture32,x.senderInitials))}})}catch(f){r.$util.handleError(f)}},viewNotification(r){this.$bus.$emit("event:open-notification",r)},viewChat(r){this.$bus.$emit("event:open-chat",r)},showHiddenElements(){let f=this.$el.getElementsByClassName("initialHidden");for(let k=0;k<f.length;k++)f[k].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const f=ye().user;return{user:f,username:f?f.nameFull:"Guest"}},async mounted(){},methods:{isActive(r){return window.location.href.indexOf(r)>-1},async openModalSearchUser747(r){this.$refs.refModalSearchUser747.open(r)}}},It={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},xt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Vt={class:"navbar-nav"},Pt={class:"nav-item dropdown"},Ot={class:"dropdown-menu","aria-labelledby":"dropdown01"},At={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"navbar-nav ms-auto"},Ht={class:"nav-item dropdown"},Lt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},qt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Bt={class:"text-capitalize"};function Nt(r,f,k,x,h,R){const I=ee("router-link");return t(),s("nav",It,[e("div",Ct,[B(I,{class:"navbar-brand",to:"/member"},{default:E(()=>[z(v(k.appName),1)]),_:1}),f[14]||(f[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",xt,[e("ul",Vt,[e("li",Pt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ot,[e("li",null,[B(I,{class:"dropdown-item",to:"/member/announcements"},{default:E(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),z(" Announcements ")])),_:1})]),e("li",null,[B(I,{class:"dropdown-item",to:"/member/posts"},{default:E(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),z(" Posts ")])),_:1})]),e("li",null,[B(I,{class:"dropdown-item",to:"/member/yellow-pages"},{default:E(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),z(" Yellow Pages ")])),_:1})])])]),e("li",At,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ut,[e("li",null,[B(I,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:E(()=>f[4]||(f[4]=[z(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Dt,[e("li",Ht,[e("a",Lt,[e("span",null,[f[6]||(f[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,v(h.username),1)])]),e("ul",qt,[f[9]||(f[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),f[10]||(f[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),f[11]||(f[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),f[12]||(f[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),h.user&&h.user.roles.length>1?(t(!0),s(A,{key:0},q(h.user.roles,G=>(t(),s("li",null,[B(I,{to:`/${G.toLowerCase()}`,class:"dropdown-item"},{default:E(()=>[e("span",Bt,v(G),1)]),_:2},1032,["to"])]))),256)):U("",!0),e("li",null,[B(I,{to:"/",class:"dropdown-item"},{default:E(()=>f[7]||(f[7]=[z(" Main ")])),_:1})]),f[13]||(f[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[B(I,{to:"/account/logout",class:"dropdown-item"},{default:E(()=>f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),z("Logout ")])),_:1})])])])])])])])}const Rt=Me(Mt,[["render",Nt]]),Ft={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const r=document.getElementById("top");r&&r.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let r=this;if(!r.$el.getElementsByClassName)return;let f=r.$el.getElementsByClassName("initialHidden");for(let k=0;k<f.length;k++){let x=f[k];x.classList.remove("invisible"),x.classList.remove("d-none")}},close(){const r=this,f=document.referrer.toLowerCase();f&&f.includes("/account/login")?r.$router.go(-2):r.$router.go(-1)},toggle(r){const f=this;f.toggles[r]=!f.toggles[r],localStorage.setItem(f.togglesKey,JSON.stringify(f.toggles))}}},zt={mixins:[Ft],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(r){return window.location.href.indexOf(r)>-1}}},Gt={class:"footer sticky-bottom"},Yt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},jt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(r,f,k,x,h,R){const I=ee("router-link");return t(),s("footer",Gt,[e("div",Yt,[e("div",jt,[e("span",Wt,"©"+v(h.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[B(I,{class:"dropdown-item",to:"/member/announcements"},{default:E(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),z(" Announcements ")])),_:1})]),e("li",null,[B(I,{class:"dropdown-item",to:"/member/posts"},{default:E(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),z(" Posts ")])),_:1})]),e("li",null,[B(I,{class:"dropdown-item",to:"/member/yellow-pages"},{default:E(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),z(" Yellow Pages ")])),_:1})])])]),e("li",es,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[B(I,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:E(()=>f[4]||(f[4]=[z(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Me(zt,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const f=this.$config;document.title=`Account - ${f.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(r,f,k,x,h,R){const I=ee("Toasts"),G=ee("router-view");return t(),s("div",ls,[B(I),B(G,{class:"flex-grow-1 mb-2"})])}const rs=Me(as,[["render",ns]]),is={__name:"index",setup(r){return ye().user,de(()=>{}),(k,x)=>(t(),s("div",null,x[0]||(x[0]=[Ge('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){Se("$config");const r=us.VITE_API_URL,f=Xe.create({baseURL:r});return Fe.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),f.interceptors.request.use(k=>{Fe.start();const{user:x}=ye();return x&&x.token&&(k.headers?(k.headers.Authorization||(k.headers.Authorization=`Bearer ${x.token}`),k.headers["Access-Control-Allow-Origin"]||(k.headers["Access-Control-Allow-Origin"]="*")):k.headers={Authorization:`Bearer ${x.token}`,"Access-Control-Allow-Origin":"*"}),k}),f.interceptors.response.use(k=>(Fe.done(),k),k=>{throw Fe.done(),k}),f}function ve(r){if(!r.appTitle)throw Error("App Title is required.");if(!r.pageTitle)throw Error("Page Title is required.");const f=ut(),k=Ze(),x=cs(),h=st(),R=St(),G=ye().user,F=()=>G&&G.roles&&G.roles.includes("System"),V=()=>G&&G.roles&&G.roles.includes("administrator"),N=()=>G&&G.roles&&G.roles.includes("employee"),W=()=>G&&G.roles&&G.roles.includes("Member"),M=()=>{let y=f.path;return f.query.returnUrl&&(y=f.query.returnUrl),y=`?returnUrl=${encodeURIComponent(y)}`,y},D=async()=>{const y=document.referrer.toLowerCase();y&&y.includes("/accounts/login")?await k.go(-2):await k.go(-1)},p=y=>{var _;const S=f.path,c=(_=f.query)==null?void 0:_.returnUrl;c&&!(S.startsWith(c)||c.startsWith(S))?k.push(c):k.push(y)},O=r.appTitle,w=r.pageTitle,K=re(!1),X=re(new Map),d=re(""),b=re(""),j=re("");return{appTitle:O,pageTitle:w,busy:K,validations:X,infoMessage:d,warningMessage:b,errorMessage:j,router:k,route:f,axios:x,utils:h,toasts:R,close:D,closeWithReturnUrl:p,generateReturnUrl:M,security:{userId:G?G.userId:"",isSystem:F(),isAdministrator:V(),isEmployee:N(),isMember:W()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(r){Se("$config");const f=ye(),k=at(),x=new et(k.msalConfig),h=fe({username:"",password:""}),R={username:{required:te.withMessage("Username is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0}},I=$e(R,h),{appTitle:G,pageTitle:F,busy:V,isDirty:N,validations:W,infoMessage:M,warningMessage:D,errorMessage:p,router:O,route:w,axios:K,utils:X,toasts:d,close:b,security:j}=ve({appTitle:"Sony FAST POC",pageTitle:"Sign On"});de(async()=>{await x.initialize()});const y=async()=>{await x.loginPopup({}).then(()=>{debugger;const _=x.getAllAccounts()[0];x.setActiveAccount(_)}).catch(c=>{console.error(`error during authentication: ${c}`)});var S={account:x.getActiveAccount(),scopes:[]};await x.acquireTokenSilent(S).then(c=>{debugger;const T=c.account.idToken,i=ct(T);if(i.token=c.accessToken,console.log(c),!i.roles){debugger;i.roles=[]}i.userId=i.sub,f.login(i);var n=w.query.returnUrl;n?O.push(decodeURIComponent(n)):i.roles.length===1?O.push(`/${i.roles[0].toLowerCase()}`):O.push("/")}).catch(c=>{console.error(`error during acquireTokenSilent: ${c}`)})};return(S,c)=>(t(),ce(pe,null,{default:E(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,v(o(G)),1),e("div",null,[o(p)?(t(),s("div",vs,[c[1]||(c[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(p)},null,8,gs)])):U("",!0),o(I).$error?(t(),s("div",bs,[c[2]||(c[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(I).$errors,_=>(t(),s("li",{key:_.$uid},v(_.$message),1))),128))])])):U("",!0)]),e("button",{onClick:c[0]||(c[0]=_=>y()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Me(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(r){const f=ye();return f.user,de(async()=>{f.logoutWithRedirect()}),(k,x)=>(t(),s("div",ws,x[0]||(x[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[z(" You have logged out from HOA MS."),e("br"),z(" Click "),e("a",{href:"/",class:"d-inline"},"here"),z(" to go back to home page. ")])],-1)])))}},ks={class:"h-100 d-flex align-items-center justify-content-center"},_s={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],xs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vs={class:"row row-cols-1 row-cols-sm-3"},Ps={class:"col-sm"},Os={class:"form-group"},As={key:0,class:"d-block invalid-feedback"},Us={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},Fs={key:0,class:"d-block invalid-feedback"},zs={class:"col"},Gs={class:"form-group"},Ys={key:0,class:"d-block invalid-feedback"},js={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(r){const f=fe({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),k=(j,y)=>j===y.password,x={firstName:{required:te.withMessage("First name is required.",oe),$autoDirty:!0,$lazy:!0},middleName:{required:te.withMessage("Middle name is required.",oe),$autoDirty:!0,$lazy:!0},lastName:{required:te.withMessage("Last name is required.",oe),$autoDirty:!0,$lazy:!0},phoneNumber:{required:te.withMessage("Phone number is required.",oe),$autoDirty:!0,$lazy:!0},email:{required:te.withMessage("Email is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0},confirmPassword:{required:te.withMessage("Confirm password is required.",oe),confirmSamePassword:te.withMessage("Password and confirm passwrod are different.",k),$autoDirty:!0,$lazy:!0}},h=$e(x,f),{appTitle:R,pageTitle:I,busy:G,isDirty:F,validations:V,infoMessage:N,warningMessage:W,errorMessage:M,router:D,axios:p,utils:O,toasts:w,close:K,security:X}=ve({appTitle:"HOA MS",pageTitle:"Register User"}),d=Se("$config");de(()=>{});const b=async()=>{const j=f;if(G.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}M.value=null;try{G.value=!0;const S=O.clone(j);S.tenantid=d.tenantId;debugger;await p({method:"post",url:"/api/v1/accounts/register",data:S}).then(c=>{w.success("Register","Registration was successfull.",{onClose:async()=>{await D.push("/accounts/login")}})})}catch(S){M.value=O.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{G.value=!1}};return(j,y)=>{const S=ee("router-link");return t(),ce(pe,null,{default:E(()=>[e("div",ks,[e("div",_s,[e("h4",Ss,v(o(I)),1),e("div",Ts,[e("div",Ms,[o(M)?(t(),s("div",Is,[y[8]||(y[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(M)},null,8,Cs)])):U("",!0),o(h).$error?(t(),s("div",xs,[y[9]||(y[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(h).$errors,c=>(t(),s("li",{key:c.$uid},v(c.$message),1))),128))])])):U("",!0)]),e("div",Vs,[e("div",Ps,[e("div",Os,[y[10]||(y[10]=e("label",null,"First Name",-1)),L(e("input",{"onUpdate:modelValue":y[0]||(y[0]=c=>f.firstName=c),type:"text",class:"form-control"},null,512),[[J,f.firstName]]),o(h).firstName.$error?(t(),s("div",As,[(t(!0),s(A,null,q(o(h).firstName.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])]),e("div",Us,[e("div",Ds,[y[11]||(y[11]=e("label",null,"Middle Name",-1)),L(e("input",{"onUpdate:modelValue":y[1]||(y[1]=c=>f.middleName=c),type:"text",class:"form-control"},null,512),[[J,f.middleName]]),o(h).middleName.$error?(t(),s("div",Hs,[(t(!0),s(A,null,q(o(h).middleName.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])]),e("div",Ls,[e("div",Es,[y[12]||(y[12]=e("label",null,"Last Name",-1)),L(e("input",{"onUpdate:modelValue":y[2]||(y[2]=c=>f.lastName=c),type:"text",class:"form-control"},null,512),[[J,f.lastName]]),o(h).lastName.$error?(t(),s("div",qs,[(t(!0),s(A,null,q(o(h).lastName.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])])]),e("div",Bs,[e("div",Ns,[e("div",Rs,[y[13]||(y[13]=e("label",null,"Phone Number",-1)),L(e("input",{"onUpdate:modelValue":y[3]||(y[3]=c=>f.phoneNumber=c),type:"tel",class:"form-control"},null,512),[[J,f.phoneNumber]]),o(h).phoneNumber.$error?(t(),s("div",Fs,[(t(!0),s(A,null,q(o(h).phoneNumber.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])]),e("div",zs,[e("div",Gs,[y[14]||(y[14]=e("label",null,"Email",-1)),L(e("input",{"onUpdate:modelValue":y[4]||(y[4]=c=>f.email=c),type:"email",class:"form-control"},null,512),[[J,f.email]]),o(h).email.$error?(t(),s("div",Ys,[(t(!0),s(A,null,q(o(h).email.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])])]),e("div",js,[e("div",Ws,[e("div",Ks,[y[15]||(y[15]=e("label",null,"Password",-1)),L(e("input",{"onUpdate:modelValue":y[5]||(y[5]=c=>f.password=c),type:"password",class:"form-control"},null,512),[[J,f.password]]),o(h).password.$error?(t(),s("div",Js,[(t(!0),s(A,null,q(o(h).password.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])]),e("div",Qs,[e("div",Xs,[y[16]||(y[16]=e("label",null,"Confirm Password",-1)),L(e("input",{"onUpdate:modelValue":y[6]||(y[6]=c=>f.confirmPassword=c),type:"password",class:"form-control"},null,512),[[J,f.confirmPassword]]),o(h).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(A,null,q(o(h).confirmPassword.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):U("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:y[7]||(y[7]=c=>b()),class:"btn btn-primary w-100"},y[17]||(y[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),z("Register ")]),8,so)]),e("div",oo,[B(S,{to:"/",class:"btn btn-outline-primary w-100"},{default:E(()=>y[18]||(y[18]=[z("Home")])),_:1})]),e("div",ao,[B(S,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:E(()=>y[19]||(y[19]=[z("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function je(){const r=Ze(),f=F=>window.location.href.indexOf(F)>-1,k=F=>localStorage.getItem("data-bs-theme")||F,x=F=>{document.documentElement.setAttribute("data-bs-theme",F),localStorage.setItem("data-bs-theme",F)},h=async()=>await Xe.get("https://bootswatch.com/api/5.json").then(F=>F.data),R=F=>{const V=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");V&&F?(V.setAttribute("href",F),localStorage.setItem("bootswatch-theme",F)):alert("cannot query css link")},I=F=>{G(),r.push(F)},G=()=>{if(screen.width<576){const V=document.getElementById("navbarCollapse");if(V){const N=mt.getInstance(V);N&&N.hide()}}};return{isActive:f,getCurrentBsTheme:k,changeBsTheme:x,getBootswatch:h,changeTheme:R,navigate:I,collapseNavbar:G}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],ko={class:"nav-item dropdown"},_o={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},xo={key:1},Vo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(r){const f=at(),{isActive:k,getCurrentBsTheme:x,changeBsTheme:h,getBootswatch:R,changeTheme:I,navigate:G,collapseNavbar:F}=je(),V=ye(),N=V.user,W=fe({user:N,username:N?N.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});de(async()=>{const O=W;O.bootswatch=await R();const w=x(O.bsTheme);w&&(O.bsTheme=w,h(O.bsTheme));const K=localStorage.getItem("bootswatch-theme");K&&(O.currentTheme=K,I(K))});const M=O=>{I(O),W.currentTheme=O,F()},D=O=>{h(O),W.bsTheme=O,F()},p=async()=>{V.logoutWithRedirect();const O=new et(f.msalConfig);await O.initialize();const w={mainWindowRedirectUri:"/"};await O.logoutPopup(w)};return(O,w)=>{const K=ee("router-link");return t(),ce(pe,null,{default:E(()=>[e("nav",ro,[e("div",io,[B(K,{class:"navbar-brand",to:"/administrator"},{default:E(()=>[z(v(r.appName),1)]),_:1}),w[18]||(w[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[B(K,{to:"/videos",onClick:o(F),class:"nav-link"},{default:E(()=>w[3]||(w[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[w[6]||(w[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[B(K,{to:"/source-groups",onClick:o(F),class:"dropdown-item"},{default:E(()=>w[4]||(w[4]=[z(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[B(K,{to:"/source-locations",onClick:o(F),class:"dropdown-item"},{default:E(()=>w[5]||(w[5]=[z(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[B(K,{to:"/vod-sources",onClick:o(F),class:"nav-link"},{default:E(()=>w[7]||(w[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[w[10]||(w[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[B(K,{to:"/program-templates",onClick:o(F),class:"dropdown-item"},{default:E(()=>w[8]||(w[8]=[z(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[B(K,{to:"/channels",onClick:o(F),class:"dropdown-item"},{default:E(()=>w[9]||(w[9]=[z(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[w[14]||(w[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[W.bsTheme==="dark"?(t(),s("button",{key:0,onClick:w[0]||(w[0]=X=>D("light")),class:"dropdown-item"},w[11]||(w[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Dark Mode ")]))):(t(),s("button",{key:1,onClick:w[1]||(w[1]=X=>D("dark")),class:"dropdown-item"},w[12]||(w[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Light Mode ")])))]),w[13]||(w[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(A,null,q(W.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:d=>M(X.cssCdn),class:le(["dropdown-item",{active:W.currentTheme===X.cssCdn}])},v(X.name),11,ho)]))),256))])]),e("li",ko,[e("a",_o,[e("span",null,[w[15]||(w[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(N)?(t(),s("span",To,v(o(N).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Io,[o(N)?(t(),s("li",Co,[e("button",{onClick:w[2]||(w[2]=X=>p()),class:"dropdown-item"},w[16]||(w[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),z("Logout ")]))])):(t(),s("li",xo,[B(K,{to:"/accounts/login",class:"dropdown-item"},{default:E(()=>w[17]||(w[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),z("Login ")])),_:1})]))])])])])])])]),_:1})}}},Po={class:"d-flex flex-column text-bg-dark"},Oo={class:"navbar bg-primary bg-gradient shadow","data-bs-theme":"dark"},Ao={class:"navbar-brand me-0 mb-1 px-0 px-md-2"},Uo={class:"d-none d-md-inline"},Do={class:"nav nav-pills flex-column mb-auto h-100 px-1"},Ho={class:"nav-item mt-3"},Lo={class:"nav-item"},Eo={class:"nav-item"},qo={class:"nav-item"},Bo={class:"nav-item"},No={class:"nav-item"},Ro={class:"nav-item dropdown"},Fo={class:"dropdown-menu overflow-y-auto","aria-labelledby":"dropdown01"},zo=["onClick"],Go={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(r){const{isActive:f,getCurrentBsTheme:k,changeBsTheme:x,getBootswatch:h,changeTheme:R,navigate:I,collapseNavbar:G}=je(),F=fe({bsTheme:"light",currentTheme:"",bootswatch:{}});de(async()=>{const W=F;W.bootswatch=await h();const M=k(W.bsTheme);M&&(W.bsTheme=M,x(W.bsTheme));const D=localStorage.getItem("bootswatch-theme");D&&(W.currentTheme=D,R(D))});const V=W=>{R(W),F.currentTheme=W,G()},N=W=>{x(W),F.bsTheme=W,G()};return(W,M)=>{const D=ee("router-link");return t(),s("div",Po,[e("nav",Oo,[B(D,{to:"/",class:"text-decoration-none w-100 text-center"},{default:E(()=>[e("h1",Ao,[M[2]||(M[2]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Uo,v(r.appName),1)])]),_:1})]),e("ul",Do,[e("li",Ho,[B(D,{to:"/videos",onClick:o(G),class:"nav-link"},{default:E(()=>M[3]||(M[3]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Videos",-1)])),_:1},8,["onClick"])]),e("li",Lo,[B(D,{to:"/source-groups",onClick:o(G),class:"nav-link"},{default:E(()=>M[4]||(M[4]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Groups",-1)])),_:1},8,["onClick"])]),e("li",Eo,[B(D,{to:"/source-locations",onClick:o(G),class:"nav-link"},{default:E(()=>M[5]||(M[5]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Locations",-1)])),_:1},8,["onClick"])]),e("li",qo,[B(D,{to:"/vod-sources",onClick:o(G),class:"nav-link"},{default:E(()=>M[6]||(M[6]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"VODs",-1)])),_:1},8,["onClick"])]),e("li",Bo,[B(D,{to:"/program-templates",onClick:o(G),class:"nav-link"},{default:E(()=>M[7]||(M[7]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Program Templates",-1)])),_:1},8,["onClick"])]),e("li",No,[B(D,{to:"/channels",onClick:o(G),class:"nav-link"},{default:E(()=>M[8]||(M[8]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Channels",-1)])),_:1},8,["onClick"])]),e("li",Ro,[M[12]||(M[12]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-md-inline ms-1"},"Themes")],-1)),e("ul",Fo,[e("li",null,[F.bsTheme==="dark"?(t(),s("button",{key:0,onClick:M[0]||(M[0]=p=>N("light")),class:"dropdown-item"},M[9]||(M[9]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Dark Mode ")]))):(t(),s("button",{key:1,onClick:M[1]||(M[1]=p=>N("dark")),class:"dropdown-item"},M[10]||(M[10]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Light Mode ")])))]),M[11]||(M[11]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(A,null,q(F.bootswatch.themes,p=>(t(),s("li",null,[e("button",{onClick:O=>V(p.cssCdn),class:le(["dropdown-item",{active:F.currentTheme===p.cssCdn}])},v(p.name),11,zo)]))),256))])])])])}}},Yo={class:"footer sticky-bottom"},jo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},Wo={class:"container-md"},Ko={class:"navbar-text small p-0"},Jo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(r){je();const f=Se("$config"),x=ye().user;let R=new Date().getFullYear();const I=fe({user:x,username:x?x.nameFull:"Guest",copyright:`2020-${R} ${f.appName}`});return de(async()=>{}),(G,F)=>(t(),s("footer",Yo,[e("div",jo,[e("div",Wo,[e("span",Ko,"©"+v(I.copyright),1)])])]))}},Qo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ye.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(r){r.message&&this.addMessage(r.title,r.message,r.type,r.options)},async addMessage(r,f,k,x={}){var h={id:this.count++,title:r,message:f,type:k,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};h=Object.assign({},h,x),this.messages.unshift(h),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),h.timeOut>0&&await this.startTimeout(h)},async startTimeout(r,f=0){const k=this,x=performance.now(),h=async()=>{r.animationFrame=requestAnimationFrame(async R=>{const I=R+f-x;if(!k.exists(r)||r.paused){cancelAnimationFrame(r.animationFrame);return}else if(I<r.timeOut){const G=I/r.timeOut;r.progress=G,await h()}else{r.progress=1,cancelAnimationFrame(r.animationFrame),k.remove(r);return}})};await h()},pauseProgress(r){r.timeOut<=0||(r.paused=!0)},async resumeProgress(r){r.timeOut<=0||(r.paused=!1,await this.startTimeout(r,r.timeOut*r.progress))},getCurrentProgress(r){return Math.round(r.progress*100)===100?100:r.progress*100},getIconClass(r){const f=r.type;let k="";switch(f){case"success":k="fas fa-fw fa-circle-check";break;case"info":k="fas fa-fw fa-circle-info";break;case"warning":k="fas fa-fw fa-circle-exclamation";break;case"danger":k="fas fa-fw fa-triangle-exclamation";break}let x=k;return r.rtl?"icon-right "+x:"icon-left "+x},async remove(r){const f=this.messages.findIndex(k=>k.id===r.id);this.messages.splice(f,1),typeof r.onClose=="function"&&await r.onClose()},exists(r){return this.messages.findIndex(k=>k.id===r.id)!==-1}}},Xo={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Zo=["onMouseover","onMouseout"],ea={class:"me-auto text-white"},ta=["onClick"],sa={class:"toast-body"},oa=["innerHTML"],aa={key:0,class:"progress m-1",style:{height:"4px"}};function la(r,f,k,x,h,R){return t(),ce(pe,null,{default:E(()=>[e("div",Xo,[B(_e,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:E(()=>[(t(!0),s(A,null,q(h.messages,I=>(t(),s("div",{key:I.id,class:le(["toast show mb-2 ms-auto",`border-${I.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:G=>R.pauseProgress(I),onMouseout:G=>R.resumeProgress(I)},[e("div",{class:le(["toast-header",`bg-${I.type}`])},[e("strong",ea,[e("i",{class:le([R.getIconClass(I),"me-1"])},null,2),z(v(I.title),1)]),I.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:G=>R.remove(I)},f[0]||(f[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ta)):U("",!0)],2),e("div",sa,[e("div",{innerHTML:I.message},null,8,oa)]),I.timeOut>0&&I.showProgress?(t(),s("div",aa,[e("div",{class:le(`bg-${I.type}`),style:tt({width:R.getCurrentProgress(I)+"%"})},null,6)])):U("",!0)],42,Zo))),128))]),_:1})])]),_:1})}const na=Me(Qo,[["render",la],["__scopeId","data-v-5272bd9a"]]),ra={name:"AdminLayout",components:{TopNav:Vo,SideNav:Go,BottomNav:Jo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},ia={class:"d-flex flex-row vh-100"},da={class:"d-flex flex-column w-100"};function ua(r,f,k,x,h,R){const I=ee("Toasts"),G=ee("SideNav"),F=ee("router-view");return t(),s("div",ia,[B(I),B(G),e("div",da,[B(F,{class:"vh-100 overflow-y-auto"})])])}const ca=Me(ra,[["render",ua]]),ma={class:"mt-2 container-md"},fa={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},pa=["innerHTML"],va={class:"row gx-2 mb-3"},ga={class:"col-md-4"},ba=["id"],ya={class:"col-md-8 overflow-x-auto"},$a={class:"d-flex flex-column align-items-start"},wa=["src"],ha={class:""},ka={class:"d-flex flex-row"},_a={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Sa={class:"text-center"},Ta=["src"],Ma={class:"text-end"},Ia={class:"text-wrap text-truncate"},Ca={class:"overflow-y-auto"},xa={class:"badge bg-info me-2"},Va={key:0,class:"badge bg-warning mb-1"},Pa={class:"row mt-3 d-none"},Oa={class:"col-12 col-sm-6 offset-sm-3"},Aa={class:"card"},Ua={class:"card-body"},Da={class:"card card-body mb-2 d-none"},Ha={key:0,class:"fas fa-fw fa-circle-check text-success"},La={key:1,class:"fas fa-fw fa-times-circle text-danger"},Ea={key:0,class:"fas fa-fw fa-circle-check text-success"},qa={key:1,class:"fas fa-fw fa-times-circle text-danger"},Ba={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,isDirty:h,validations:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,generateReturnUrl:p,security:O}=ve({appTitle:"ARC AIO",pageTitle:"Dashboard"});Se("$config"),ye().user;const K=fe({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),de(async()=>{await b()});const X=async()=>{const S=K;if(!x.value)try{x.value=!0;const c="/api/v1/channels/epg/";S.item=[],await N.get(c).then(_=>{S.item=_.data}),S.item.forEach(_=>{j(_)})}catch(c){F.value=W.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{x.value=!1}},d=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await N.get("/api/v1/channels/reset/").then(_=>{M.success("Reset All Data","Reset data was successful.")})}catch(c){F.value=W.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{x.value=!1}},b=async()=>{await X()},j=S=>{if(S.manifestUrl&&Hls.isSupported()){y(S);var c=document.getElementById(`video-${S.id}`);if(!c)return;S.hls&&S.hls.destroy(),S.hls=W.createHlsStream(c,S.manifestUrl);return}},y=S=>{S.outputs&&S.outputs.forEach(_=>{if(_.hls){debugger;_.hls.detachMedia(),_.hls.destroy(),delete _.hls}_.playbackConfigurations.forEach(T=>{if(T.hls){debugger;T.hls.detachMedia(),T.hls.destroy(),delete T.hls}})})};return(S,c)=>{const _=ee("PageHeader"),T=ee("router-link");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(_,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(k)},{default:E(()=>[e("button",{onClick:c[0]||(c[0]=i=>d()),class:"ms-2 btn btn-danger"},c[2]||(c[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),z("Reset All Data ")])),e("button",{onClick:c[1]||(c[1]=i=>b()),class:"ms-2 btn btn-secondary"},c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))]),_:1},8,["pageTitle"]),e("div",ma,[o(F)?(t(),s("div",fa,[c[4]||(c[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(F))},null,8,pa)])):U("",!0),(t(!0),s(A,null,q(K.item,i=>(t(),s("div",null,[e("div",va,[e("div",ga,[i.manifestUrl?(t(),s("video",{key:0,id:`video-${i.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,ba)):U("",!0)]),e("div",ya,[e("div",$a,[e("div",null,[e("h4",null,[e("img",{src:i.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,wa),B(T,{to:`${r.urlViewChannel}/${i.id}/${o(p)()}`},{default:E(()=>[z(v(i.title),1)]),_:2},1032,["to"])])]),e("div",ha,[e("div",ka,[(t(!0),s(A,null,q(i.programs,n=>(t(),s("div",_a,[e("div",Sa,[e("img",{src:n.image,class:"img-fluid",style:{height:"64px"}},null,8,Ta)]),e("div",Ma,v(o(W).moment(n.since).format("hh:mm:ss a"))+" - "+v(o(W).moment(n.till).format("hh:mm:ss a")),1),e("div",Ia,v(n.title),1),e("div",Ca,[(t(!0),s(A,null,q(n.genres,a=>(t(),s("span",xa,v(a),1))),256))]),o(W).moment().isAfter(n.since)&&o(W).moment().isBefore(n.till)?(t(),s("span",Va,"Now Playing")):U("",!0)]))),256))])])])])])]))),256)),e("div",Pa,[e("div",Oa,[e("div",Aa,[c[14]||(c[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",Ua,[e("ol",null,[c[8]||(c[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[B(T,{to:`/videos/add/${o(p)()}`},{default:E(()=>c[5]||(c[5]=[z(" Create a Video. ")])),_:1},8,["to"])]),c[9]||(c[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[B(T,{to:"/program-templates/add"},{default:E(()=>c[6]||(c[6]=[z(" ut Create Program Template. ")])),_:1}),c[7]||(c[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup theclip ranges.li"),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),c[10]||(c[10]=e("li",null,[z(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),c[11]||(c[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),c[12]||(c[12]=e("li",null," Publish Channel. ",-1)),c[13]||(c[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",Da,[c[17]||(c[17]=z(" Security ")),e("ul",null,[e("li",null,[o(O).isAdministrator?(t(),s("span",Ha)):(t(),s("span",La)),c[15]||(c[15]=z(" Administrator "))]),e("li",null,[o(O).isEmployee?(t(),s("span",Ea)):(t(),s("span",qa)),c[16]||(c[16]=z(" Employee "))])])])])])]),_:1})}}};function He(r){if(!r.cacheKey)throw Error("Cache Key required.");if(!r.baseUrl)throw Error("Base Url required.");const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,closeWithReturnUrl:M,generateReturnUrl:D,security:p}=ve({appTitle:r.appTitle,pageTitle:r.pageTitle}),O=JSON.parse(JSON.stringify(r.filter));O.pageIndex=O.pageIndex||1,O.pageSize=O.pageSize||5,O.sortField=O.sortField||"",O.sortOrder=O.sortOrder||1,O.updateUrl=O.updateUrl||!1,O.items=O.items||[],O.query=O.query||{},O.query.criteria=O.query.criteria||"";const w=re(O),K=()=>{var i;if(x.value){console.log("Paginated search is currently busy.");return}const c=JSON.parse(localStorage.getItem(r.cacheKey))||{},_=new URLSearchParams(window.location.search),T=w.value;T.query.criteria=_.get("c")||c.criteria||T.query.criteria||"",T.pageIndex=parseInt(_.get("p"),10)||c.pageIndex||T.pageIndex||1,T.pageSize=parseInt(_.get("s"),10)||c.pageSize||T.pageSize||5,T.sortField=_.get("sf")||c.sortField||T.sortField||"",T.sortOrder=parseInt(_.get("so"),10)||c.sortOrder||T.sortOrder||1,T.visible=c.visible||T.visible,(i=r.initializeFilter)==null||i.call(r,w,r.cacheKey)},X=()=>{if(r.getQuery)return r.getQuery(w.value);{const c=w.value;return["?c=",encodeURIComponent(c.query.criteria),"&p=",c.pageIndex,"&s=",c.pageSize,"&sf=",c.sortField,"&so=",c.sortOrder].join("")}},d=()=>{if(r.saveQuery)r.saveQuery(w.value,r.cacheKey);else{const c=w.value;localStorage.setItem(r.cacheKey,JSON.stringify({criteria:c.query.criteria,pageIndex:c.pageIndex,pageSize:c.pageSize,sortField:c.sortField,sortOrder:c.sortOrder,visible:c.visible}))}};return{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,closeWithReturnUrl:M,generateReturnUrl:D,security:p,filter:w,initializeFilter:K,getQuery:X,saveQuery:d,search:async c=>{var T;let _=w.value;if(x.value){console.log("Paginated search is currently busy.");return}c>0&&(_.pageIndex=c);try{x.value=!0,I.value="";const i=X();_.selected=null,await F(`${r.baseUrl}/${i}`).then(async n=>{var l;Array.isArray(n.data)?_.items=n.data:_=Object.assign(_,n.data);let a=location.pathname;a.endsWith("/")?a+=i:a+="/"+i,_.updateUrl&&window.history.replaceState(i,`${f}-search`,a),_.items.forEach($=>{$.expand=!1}),d(),(l=r.successAction)==null||l.call(r,w.value)})}catch(i){if(localStorage.removeItem(r.cacheKey),r.failAction)r.failAction(i);else{const n=V.getErrorMessageAsHtml(i);I.value=n,N.error("Error Occured",n)}}finally{x.value=!1,(T=r.finalAction)==null||T.call(r)}},getRowNumber:c=>{const _=w.value;return(_.pageIndex-1)*_.pageSize+(c+1)},setSelected:c=>{const _=w.value;_.selected&&c&&_.selected===c?_.selected=null:(_.selected&&(_.selected.expand=!1),_.selected=c,_.selected.expand=!0)},isSelected:c=>{const _=w.value;return c===null||_.selected===null?!1:c===_.selected}}}const Na=["disabled"],Ra={class:"row row-cols-1 row-cols-sm-3"},Fa={class:"col"},za={class:"form-floating mb-2"},Ga={key:0,class:"d-block invalid-feedback"},Ya={class:"col"},ja={class:"form-floating"},Wa={class:"col"},Ka={class:"form-floating"},Ja={class:"col"},Qa={class:"form-floating mb-2"},Xa={class:"row row-cols-1 row-cols-sm-2"},Za={class:"col"},el={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},tl={class:"col"},sl={class:"form-check"},ol=["onUpdate:modelValue","id"],al=["for"],ll={class:"col"},nl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},rl={class:"col"},il={class:"form-check"},dl=["onUpdate:modelValue","id"],ul=["for"],cl={class:"table-responsive mt-2"},ml={class:"text-end"},fl={class:"table table-sm mb-0 mt-2"},pl={class:"align-middle"},vl={class:"text-center"},gl=["onUpdate:modelValue"],bl=["onUpdate:modelValue"],yl=["onUpdate:modelValue"],$l={class:"text-start"},wl=["onClick"],hl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),D=r,p=fe({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:V.moment().format("YYYY-MM-DD"),formats:[]}}),O={item:{title:{title:te.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("Duration is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:te.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},w=$e(O,p),K=he(()=>{const y=V.moment;if(p.durationTime&&p.durationTime!=="00:00:00"&&V.isValidTime(p.durationTime)){const S=y().startOf("day"),c=S.format("YYYY-MM-DD ")+p.durationTime,T=y(c).subtract(S);return p.item.durationInMillis=T.valueOf(),p.item.durationInMillis}return 0});de(async()=>{await d()});const X=async()=>{const y=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const c=V.clone(y.item);c.durationInMillis=K.value;const _=V.moment(y.item.dateReleased).utc(!0).format();c.dateReleased=_;const T=p.lookups.genres.filter(n=>n.selected).map(n=>n.id);c.genres=T;const i=p.lookups.categories.filter(n=>n.selected).map(n=>n.id);c.categories=i;debugger;await F.post("/api/v1/videos/",c).then(n=>{N.success("Add Video","Video added",{onClose:async()=>{const a=`${D.urlView}/${n.data}`;await G.push(a)}})})}catch(c){I.value=V.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{x.value=!1}},d=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(y=>{const c=y.data.filter(_=>_.id!==0);p.lookups.genres=c})}catch(y){I.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},b=()=>{const y={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};p.item.formats.push(y)},j=y=>{p.item.formats.splice(y,1)};return(y,S)=>{const c=ee("router-link"),_=ee("PageHeader"),T=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(_,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:S[0]||(S[0]=i=>X()),class:"btn btn-primary"},S[6]||(S[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Na),B(c,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>S[7]||(S[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(T,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[e("div",null,[e("div",Ra,[e("div",Fa,[e("div",za,[L(e("input",{"onUpdate:modelValue":S[1]||(S[1]=i=>p.item.title=i),id:"name",class:"form-control",placeholder:"Title"},null,512),[[J,p.item.title]]),S[8]||(S[8]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(w).item.title.$error?(t(),s("div",Ga,[(t(!0),s(A,null,q(o(w).item.title.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",Ya,[e("div",ja,[L(e("input",{"onUpdate:modelValue":S[2]||(S[2]=i=>p.item.dateReleased=i),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[J,p.item.dateReleased]]),S[9]||(S[9]=e("label",{for:"dateReleased",class:"small fw-bold"},"Date Released",-1))])]),e("div",Wa,[e("div",Ka,[L(e("input",{"onUpdate:modelValue":S[3]||(S[3]=i=>p.durationTime=i),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[J,p.durationTime]]),S[10]||(S[10]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Ja,[e("div",Qa,[L(e("textarea",{"onUpdate:modelValue":S[4]||(S[4]=i=>p.item.description=i),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[J,p.item.description]]),S[11]||(S[11]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Xa,[e("div",Za,[S[12]||(S[12]=e("h5",null,"Genres",-1)),e("div",el,[(t(!0),s(A,null,q(p.lookups.genres,i=>(t(),s("div",tl,[e("div",sl,[L(e("input",{"onUpdate:modelValue":n=>i.selected=n,class:"form-check-input",type:"checkbox",id:i.name},null,8,ol),[[Ue,i.selected]]),e("label",{class:"form-check-label",for:i.name},v(i.name),9,al)])]))),256))])]),e("div",ll,[S[13]||(S[13]=e("h5",null,"Categories",-1)),e("div",nl,[(t(!0),s(A,null,q(p.lookups.categories,i=>(t(),s("div",rl,[e("div",il,[L(e("input",{"onUpdate:modelValue":n=>i.selected=n,class:"form-check-input",type:"checkbox",id:i.name},null,8,dl),[[Ue,i.selected]]),e("label",{class:"form-check-label",for:i.name},v(i.name),9,ul)])]))),256))])])]),e("div",cl,[e("div",ml,[e("button",{onClick:S[5]||(S[5]=i=>b()),class:"btn btn-outline-primary btn-sm"},S[14]||(S[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",fl,[S[17]||(S[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(p.item.formats,(i,n)=>(t(),s("tr",pl,[e("td",vl,v(n+1),1),e("td",null,[L(e("select",{"onUpdate:modelValue":a=>i.format=a,class:"form-control"},S[15]||(S[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,gl),[[ue,i.format]])]),e("td",null,[L(e("input",{"onUpdate:modelValue":a=>i.serverUrl=a,type:"text",class:"form-control"},null,8,bl),[[J,i.serverUrl]])]),e("td",null,[L(e("input",{"onUpdate:modelValue":a=>i.path=a,type:"text",class:"form-control"},null,8,yl),[[J,i.path]])]),e("td",$l,[e("button",{onClick:a=>j(n),class:"btn btn-outline-warning btn-sm"},S[16]||(S[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,wl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},kl=["disabled"],_l={class:"row row-cols-1 row-cols-sm-3"},Sl={class:"col"},Tl={class:"form-floating mb-2"},Ml={key:0,class:"d-block invalid-feedback"},Il={class:"col"},Cl={class:"form-floating"},xl={class:"col"},Vl={class:"form-floating"},Pl={class:"col"},Ol={class:"form-floating mb-2"},Al={class:"col"},Ul={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Dl={class:"col"},Hl={class:"form-check"},Ll=["onUpdate:modelValue","id"],El=["for"],ql={class:"col"},Bl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Nl={class:"col"},Rl={class:"form-check"},Fl=["onUpdate:modelValue","id"],zl=["for"],Gl={class:"table-responsive mt-2"},Yl={class:"text-end"},jl={class:"table table-sm mb-0 mt-2"},Wl={class:"align-middle"},Kl={class:"text-center"},Jl=["onUpdate:modelValue"],Ql=["value"],Xl=["onUpdate:modelValue"],Zl=["onUpdate:modelValue"],en={class:"text-start"},tn=["onClick"],sn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),D=r,p=fe({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),O={item:{title:{title:te.withMessage("title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("durationInMillis is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:te.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},w=$e(O,p),K=he(()=>{const c=V.moment;if(p.durationTime&&p.durationTime!=="00:00:00"&&V.isValidTime(p.durationTime)){const _=c().startOf("day"),T=_.format("YYYY-MM-DD ")+p.durationTime,n=c(T).subtract(_);return p.item.durationInMillis=n.valueOf(),p.item.durationInMillis}return 0});de(async()=>{await d(),await b(),await X()});const X=async()=>{try{await F.get(`/api/v1/videos/${D.id}/`).then(c=>{p.item=c.data;const _=V.moment(p.item.dateReleased).format("YYYY-MM-DD");p.item.dateReleased=_;const T=p.lookups.genres,i=p.item.genres.map(l=>l.genre);T.forEach(l=>{l.selected=i.includes(l.id)});const n=p.lookups.categories,a=p.item.categories.map(l=>l.category);n.forEach(l=>{l.selected=a.includes(l.id)})})}catch(c){I.value=V.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},d=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(c=>{const T=c.data.filter(i=>i.id!==0);p.lookups.genres=T})}catch(c){I.value=V.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},b=async()=>{try{await F.get("/api/v1/lookups/video-formats/").then(c=>{const T=c.data.filter(i=>i.id!==0);p.lookups.formats=T})}catch(c){I.value=V.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},j=async()=>{const c=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const T=V.clone(c.item);T.durationInMillis=K.value;const i=V.moment(c.item.dateReleased).utc(!0).format();T.dateReleased=i;const n=p.lookups.genres.filter(l=>l.selected).map(l=>l.id);T.genres=n;const a=p.lookups.categories.filter(l=>l.selected).map(l=>l.id);T.categories=a;debugger;await F.put("/api/v1/videos/",T).then(l=>{N.success("Edit Video","Video edited.",{onClose:async()=>{const $=`${D.urlView}/${D.id}`;await G.push($)}})})}catch(T){I.value=V.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{x.value=!1}},y=()=>{const c={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};p.item.formats.push(c)},S=c=>{p.item.formats.splice(c,1)};return(c,_)=>{const T=ee("router-link"),i=ee("PageHeader"),n=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(i,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:_[0]||(_[0]=a=>j()),class:"btn btn-primary"},_[6]||(_[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,kl),e("button",{onClick:X,class:"btn btn-secondary ms-2"},_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B(T,{to:`${r.urlView}/${r.id}`,class:"btn btn-secondary ms-2"},{default:E(()=>_[8]||(_[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(n,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[e("div",null,[e("div",_l,[e("div",Sl,[e("div",Tl,[L(e("input",{"onUpdate:modelValue":_[1]||(_[1]=a=>p.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[J,p.item.title]]),_[9]||(_[9]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(w).item.title.$error?(t(),s("div",Ml,[(t(!0),s(A,null,q(o(w).item.title.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])]),e("div",Il,[e("div",Cl,[L(e("input",{"onUpdate:modelValue":_[2]||(_[2]=a=>p.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[J,p.item.dateReleased]]),_[10]||(_[10]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",xl,[e("div",Vl,[L(e("input",{"onUpdate:modelValue":_[3]||(_[3]=a=>p.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[J,p.durationTime]]),_[11]||(_[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Pl,[e("div",Ol,[L(e("textarea",{"onUpdate:modelValue":_[4]||(_[4]=a=>p.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[J,p.item.description]]),_[12]||(_[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Al,[_[13]||(_[13]=e("h5",null,"Genres",-1)),e("div",Ul,[(t(!0),s(A,null,q(p.lookups.genres,a=>(t(),s("div",Dl,[e("div",Hl,[L(e("input",{"onUpdate:modelValue":l=>a.selected=l,class:"form-check-input",type:"checkbox",id:a.name},null,8,Ll),[[Ue,a.selected]]),e("label",{class:"form-check-label",for:a.name},v(a.name),9,El)])]))),256))])]),e("div",ql,[_[14]||(_[14]=e("h5",null,"Categories",-1)),e("div",Bl,[(t(!0),s(A,null,q(p.lookups.categories,a=>(t(),s("div",Nl,[e("div",Rl,[L(e("input",{"onUpdate:modelValue":l=>a.selected=l,class:"form-check-input",type:"checkbox",id:a.name},null,8,Fl),[[Ue,a.selected]]),e("label",{class:"form-check-label",for:a.name},v(a.name),9,zl)])]))),256))])]),e("div",Gl,[e("div",Yl,[e("button",{onClick:_[5]||(_[5]=a=>y()),class:"btn btn-outline-primary btn-sm"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",jl,[_[17]||(_[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(p.item.formats,(a,l)=>(t(),s("tr",Wl,[e("td",Kl,v(l+1),1),e("td",null,[L(e("select",{"onUpdate:modelValue":$=>a.format=$,class:"form-control"},[(t(!0),s(A,null,q(p.lookups.formats,$=>(t(),s("option",{value:$.id},v($.name),9,Ql))),256))],8,Jl),[[ue,a.format]])]),e("td",null,[L(e("input",{"onUpdate:modelValue":$=>a.serverUrl=$,type:"text",class:"form-control"},null,8,Xl),[[J,a.serverUrl]])]),e("td",null,[L(e("input",{"onUpdate:modelValue":$=>a.path=$,type:"text",class:"form-control"},null,8,Zl),[[J,a.path]])]),e("td",en,[e("button",{onClick:$=>S(l),class:"btn btn-outline-warning btn-sm"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,tn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},on={class:"ms-2"},an={class:"input-group"},ln=["value"],nn={class:"ms-1"},rn={class:"input-group"},dn={class:"ms-1"},un={class:"input-group"},cn={class:"table-responsive border shadow-sm"},mn={class:"table table-hover mb-0"},fn=["textContent"],pn={class:"d-flex flex-row justify-content-between"},vn={class:"badge bg-primary me-1"},gn={class:"badge bg-info me-1"},bn={class:"badge bg-secondary me-1"},yn={class:"mt-1"},$n=["src"],wn={class:"text-end ms-sm-5 pe-sm-5"},hn={class:"text-end ms-sm-5 pe-sm-5"},kn="/api/v1/videos/search",_n={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(r){Se("$config");const k=ye().user,{appTitle:x,pageTitle:h,busy:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,security:p,filter:O,initializeFilter:w,getQuery:K,saveQuery:X,search:d,getRowNumber:b,setSelected:j,isSelected:y}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${k==null?void 0:k.userId}/videos/search`,baseUrl:kn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(c,_)=>{const T=c.value,i=new URLSearchParams(window.location.search),n=JSON.parse(localStorage.getItem(_))||{};T.query.genre=i.get("genre")||n.genre||T.query.genre||0,T.query.category=i.get("category")||n.category||T.query.category||0},getQuery:c=>["?c=",encodeURIComponent(c.query.criteria),"&p=",c.pageIndex,"&s=",c.pageSize,"&sf=",c.sortField,"&so=",c.sortOrder,"&genre=",c.query.genre,"&category=",c.query.category].join(""),saveQuery:(c,_)=>{localStorage.setItem(_,JSON.stringify({criteria:c.query.criteria,pageIndex:c.pageIndex,pageSize:c.pageSize,sortField:c.sortField,sortOrder:c.sortOrder,visible:c.visible,genre:c.query.genre,category:c.query.category}))}});de(async()=>{w(),await S(),await d()});const S=async()=>{try{await N.get("/api/v1/lookups/video-genres/").then(c=>{const _=c.data;O.value.lookups.genres=_})}catch(c){F.value=W.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}};return(c,_)=>{const T=ee("router-view"),i=ee("router-link"),n=ee("PageHeader"),a=ee("m-pagination"),l=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(T),B(n,{"page-icon":"fas fa-fw fa-video",pageTitle:o(h)},{default:E(()=>[B(i,{to:r.urlAdd,class:"btn btn-primary"},{default:E(()=>_[5]||(_[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",on,[e("div",an,[_[6]||(_[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),L(e("select",{"onUpdate:modelValue":_[0]||(_[0]=$=>o(O).query.genre=$),class:"form-select"},[(t(!0),s(A,null,q(o(O).lookups.genres,$=>(t(),s("option",{value:$.id},v($.name),9,ln))),256))],512),[[ue,o(O).query.genre]])])]),e("div",nn,[e("div",rn,[_[8]||(_[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),L(e("select",{"onUpdate:modelValue":_[1]||(_[1]=$=>o(O).query.category=$),class:"form-select"},_[7]||(_[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(O).query.category]])])]),e("div",dn,[e("div",un,[L(e("input",{"onUpdate:modelValue":_[2]||(_[2]=$=>o(O).query.criteria=$),onKeyup:_[3]||(_[3]=De($=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[J,o(O).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[4]||(_[4]=$=>o(d)(1))},_[9]||(_[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(l,{errorMessage:o(F)},{default:E(()=>[e("div",cn,[e("table",mn,[_[10]||(_[10]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"Released"),e("th",null,"Description")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(o(O).items,($,C)=>(t(),s("tr",{key:$.videoId},[e("td",{textContent:v(o(b)(C)),class:"text-center"},null,8,fn),e("td",null,[e("div",pn,[e("div",null,[B(i,{to:`${r.urlView}/${$.videoId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[z(v($.title),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(A,null,q($.categories,m=>(t(),s("span",vn,v(m.categoryName),1))),256)),(t(!0),s(A,null,q($.genres,m=>(t(),s("span",gn,v(m.genreName),1))),256)),(t(!0),s(A,null,q($.formats,m=>(t(),s("span",bn,v(m.formatName),1))),256))])]),e("div",null,[$.thumbnails.length>0?(t(!0),s(A,{key:0},q($.thumbnails,m=>(t(),s("div",yn,[e("img",{src:m.url,class:"img-fuild",width:"128"},null,8,$n)]))),256)):U("",!0)])])]),e("td",wn,[e("div",null,v(o(W).moment.utc($.durationInMillis).format("HH:mm:ss")),1)]),e("td",hn,[e("div",null,v(o(W).moment.utc($.dateReleased).format("l")),1)]),e("td",null,v($.description),1)]))),128))]),_:1},512),[[Te,o(O).items.length>0]])])]),B(a,{filter:o(O),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Sn={key:0},Tn={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Mn={class:"nav-item",role:"presentation"},In={class:"nav-item",role:"presentation"},Cn={class:"nav-item",role:"presentation"},xn={class:"nav-item",role:"presentation"},Vn={class:"tab-content",id:"myTabContent"},Pn={class:"mt-2"},On={class:"row row-cols-1 row-cols-sm-2"},An={class:"col"},Un=["id"],Dn={class:"text-end"},Hn={class:"col"},Ln={class:"col"},En={class:"form-floating mb-2"},qn={class:"row row-cols-1 row-cols-sm-2"},Bn={class:"col"},Nn={class:"form-floating mb-2"},Rn={class:"col"},Fn={class:"form-floating mb-2"},zn={class:"col"},Gn={class:"form-floating mb-2"},Yn={class:"mt-1"},jn={class:"badge bg-info me-1"},Wn={class:"badge bg-primary me-1"},Kn={class:"mt-2"},Jn={class:"table-responsive border"},Qn={class:"table table-hover mb-0"},Xn={class:"table-group-divider"},Zn={class:"align-middle"},er={class:"text-center"},tr={class:"mt-2"},sr={class:"text-end"},or={class:"table-responsive border mt-2"},ar={class:"table table-hover mb-0 caption-top"},lr={class:"mt-2"},nr={class:"table-responsive"},rr={class:"table table-hover mb-0 caption-top"},ir={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(r){const f=r,{appTitle:k,pageTitle:x,busy:h,isDirty:R,validations:I,infoMessage:G,warningMessage:F,errorMessage:V,router:N,axios:W,utils:M,toasts:D,close:p,closeWithReturnUrl:O,generateReturnUrl:w,security:K}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null,hls:null}),b=re();de(async()=>{await c(),b.value=M.getPageTab("video")||"information-tab"}),Be(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const j=n=>{M.setPageTab("video",n),b.value=n},y=n=>n!==b.value?"":"active",S=n=>n!==b.value?"":"show active",c=async()=>{const n=d;if(!h.value)try{h.value=!0,V.value="",d.item=null;const a=`/api/v1/videos/${f.id}/`;await W.get(a).then(l=>{n.item=l.data,n.item.duration=M.moment.utc(n.item.durationInMillis).format("HH:mm:ss"),n.item.dateReleased=M.moment.utc(n.item.dateReleased).format("ll")}),T()}catch(a){V.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await c()},T=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),d.hls&&d.hls.destroy();const a=`video-${d.item.videoId}`;var n=document.getElementById(a);const l=d.item.formats.find(C=>C.formatName==="HLS"),$=l.serverUrl+l.path;d.hls=M.createHlsStream(n,$,!1)}},i=async()=>{if(!h.value)try{h.value=!0,V.value="";const n=`/api/v1/videos/${f.id}/get-blank-frames/`;await W.post(n).then(a=>{}),h.value=!1,await _()}catch(n){V.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{h.value=!1}};return(n,a)=>{const l=ee("router-link"),$=ee("PageHeader"),C=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B($,{"page-icon":"fas fa-fw fa-video",pageTitle:o(x)},{default:E(()=>[B(l,{to:`${r.urlAddVodSource}/${o(w)()}&videoId=${r.id}`,class:"btn btn-primary"},{default:E(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-plus"},null,-1),z("Create VOD ")])),_:1},8,["to"]),B(l,{to:`${r.urlEdit}/${r.id}`,class:"btn btn-primary ms-1"},{default:E(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=m=>_()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=m=>o(O)(f.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(C,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",Sn,[e("div",null,[e("ul",Tn,[e("li",Mn,[e("button",{onClick:a[2]||(a[2]=m=>j("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",In,[e("button",{onClick:a[3]||(a[3]=m=>j("formats-tab")),class:le([y("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",Cn,[e("button",{onClick:a[4]||(a[4]=m=>j("blankFrames-tab")),class:le([y("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",xn,[e("button",{onClick:a[5]||(a[5]=m=>j("vodSources-tab")),class:le([y("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",Vn,[e("div",{class:le([S("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Pn,[e("div",On,[e("div",An,[e("video",{id:`video-${d.item.videoId}`,controls:"",muted:"",autoplay:"",class:"card-img-top object-fit-contain border"},null,8,Un),e("div",Dn,[e("button",{onClick:a[6]||(a[6]=m=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},a[16]||(a[16]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])]),e("div",Hn,[e("div",Ln,[e("div",En,[L(e("input",{"onUpdate:modelValue":a[7]||(a[7]=m=>d.item.title=m),type:"text",class:"form-control",id:"title",placeholder:"Title",readonly:""},null,512),[[J,d.item.title]]),a[17]||(a[17]=e("label",{for:"title"},"Title",-1))])]),e("div",qn,[e("div",Bn,[e("div",Nn,[L(e("input",{"onUpdate:modelValue":a[8]||(a[8]=m=>d.item.dateReleased=m),type:"text",class:"form-control",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[J,d.item.dateReleased]]),a[18]||(a[18]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Rn,[e("div",Fn,[L(e("input",{"onUpdate:modelValue":a[9]||(a[9]=m=>d.item.duration=m),type:"text",class:"form-control",id:"duration",placeholder:"Duration",readonly:""},null,512),[[J,d.item.duration]]),a[19]||(a[19]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",zn,[e("div",Gn,[L(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=m=>d.item.description=m),type:"text",class:"form-control",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[J,d.item.description]]),a[20]||(a[20]=e("label",{for:"description"},"Description",-1))])]),e("div",Yn,[(t(!0),s(A,null,q(d.item.genres,m=>(t(),s("span",jn,v(m.genreName),1))),256)),(t(!0),s(A,null,q(d.item.categories,m=>(t(),s("span",Wn,v(m.categoryName),1))),256))])])])])],2),e("div",{class:le([S("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",Kn,[e("div",Jn,[e("table",Qn,[a[21]||(a[21]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Xn,[(t(!0),s(A,null,q(d.item.formats,(m,Z)=>(t(),s("tr",Zn,[e("td",er,v(Z+1),1),e("td",null,v(m.formatName),1),e("td",null,v(m.serverUrl),1),e("td",null,v(m.path),1)]))),256))])])])])],2),e("div",{class:le([S("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",tr,[e("div",null,[e("div",sr,[e("button",{onClick:a[11]||(a[11]=m=>i()),class:"btn btn-outline-primary btn-sm"},a[22]||(a[22]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),z("Process ")]))]),e("div",or,[e("table",ar,[a[23]||(a[23]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.blankFrames,(m,Z)=>(t(),s("tr",{key:m.videoBlankFrameId},[e("td",null,v(Z+1),1),e("td",null,v(o(M).moment.utc(m.startInMillis).format("HH:mm:ss")),1),e("td",null,v(o(M).moment.utc(m.endInMillis).format("HH:mm:ss")),1),e("td",null,v(o(M).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,d.item.blankFrames.length>0]])])])])])],2),e("div",{class:le([S("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",lr,[e("div",nr,[e("table",rr,[a[24]||(a[24]=e("caption",null,"VOD Sources",-1)),a[25]||(a[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.vodSources,(m,Z)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,v(Z+1),1),e("td",null,[B(l,{to:`${f.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(w)()}`},{default:E(()=>[z(v(m.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,d.item.vodSources.length>0]])])])])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},dr=["disabled"],ur={class:"form-floating mb-2"},cr={key:0,class:"d-block invalid-feedback"},mr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),D=r,p=fe({lookups:{},item:{name:null}}),O={item:{name:{required:te.withMessage("name is required.",oe),$autoDirty:!0,$lazy:!0}}},w=$e(O,p);de(async()=>{});const K=async()=>{const X=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const b=V.clone(X.item);await F.post("/api/v1/sourcegroups/",b).then(j=>{N.success("Add Source Group","Source group added.",{onClose:async()=>{const y=`${D.urlView}/${j.data}`;await G.push(y)}})})}catch(b){I.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{x.value=!1}};return(X,d)=>{const b=ee("router-link"),j=ee("PageHeader"),y=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(j,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:d[0]||(d[0]=S=>K()),class:"btn btn-primary"},d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,dr),B(b,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(y,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[e("div",null,[e("div",ur,[L(e("input",{"onUpdate:modelValue":d[1]||(d[1]=S=>p.item.name=S),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[J,p.item.name]]),d[4]||(d[4]=e("label",{for:"name"},"Name",-1)),o(w).item.name.$error?(t(),s("div",cr,[(t(!0),s(A,null,q(o(w).item.name.$errors,S=>(t(),s("div",{key:S.$uid},v(S.$message),1))),128))])):U("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},fr={key:0,class:"d-flex justify-content-end"},pr=["disabled"],vr={key:0},gr={class:"row row-cols-1 row-cols-sm-2"},br={class:"col"},yr={class:"form-floating mb-2"},$r={key:0,class:"d-block invalid-feedback"},wr={class:"col"},hr={class:"form-floating mb-2"},kr={key:0,class:"d-block invalid-feedback"},_r={class:"row row-cols-sm-2"},Sr={class:"col"},Tr={class:"form-floating mb-2"},Mr={class:"form-floating mb-2"},Ir={key:0,class:"d-block invalid-feedback"},Cr={class:"form-floating mb-2"},xr={key:0,class:"d-block invalid-feedback"},Vr={class:"col"},Pr={class:"form-floating mb-2"},We={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),D=r,p=fe({editorElementId:"editor",htmlContent:"",item:null}),O={item:{title:{required:te.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},eidr:{required:te.withMessage("eidr is required.",oe),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:te.withMessage("eidrPrefix is required.",oe),$autoDirty:!0,$lazy:!0}},htmlContent:{required:te.withMessage("Content is required.",oe),$autoDirty:!0,$lazy:!0}},w=$e(O,p);de(async()=>{await d()});const K=()=>{const j=p;var y=document.getElementById(j.editorElementId);y.innerHTML=j.htmlContent},X=j=>{const y=p;y.htmlContent=j.target.innerHTML;var S=document.getElementById(y.editorElementId);S.value=y.htmlContent},d=async()=>{const j=p;if(!x.value)try{x.value=!0,p.item=null,await F.get(`/api/v1/movies/${D.id}`).then(y=>{j.item=y.data,j.htmlContent=j.item.description}),K()}catch(y){I.value=V.getErrorMessageAsHtml(y)}finally{x.value=!1}},b=async()=>{const j=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const S=V.clone(j.item);S.description=j.htmlContent,await F.put("/api/v1/movies",S).then(c=>{N.success("Edit Movie","Movie edited",{onClose:async()=>{const _=`${D.urlView}/${D.id}`;await G.push(_)}})})}catch(S){I.value=V.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{x.value=!1}};return(j,y)=>{const S=ee("router-link"),c=ee("PageHeader"),_=ee("PageBody");return t(),s("div",null,[B(c,{"page-icon":"fas fa-fw fa-film",pageTitle:o(k),"header-break":"row row-cols-2 row-cols-sm-2"},{default:E(()=>[p.item?(t(),s("div",fr,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:y[0]||(y[0]=T=>b()),class:"btn btn-primary"},y[7]||(y[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pr),e("button",{onClick:d,class:"ms-2 btn btn-secondary"},y[8]||(y[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B(S,{to:`${D.urlView}/${D.id}`,class:"ms-1 btn btn-secondary"},{default:E(()=>y[9]||(y[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):U("",!0)]),_:1},8,["pageTitle"]),B(_,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[p.item?(t(),s("div",vr,[e("div",gr,[e("div",br,[e("div",yr,[L(e("input",{"onUpdate:modelValue":y[1]||(y[1]=T=>p.item.eidrPrefix=T),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[J,p.item.eidrPrefix]]),y[10]||(y[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(w).item.eidrPrefix.$error?(t(),s("div",$r,[(t(!0),s(A,null,q(o(w).item.eidrPrefix.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):U("",!0)])]),e("div",wr,[e("div",hr,[L(e("input",{"onUpdate:modelValue":y[2]||(y[2]=T=>p.item.eidr=T),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[J,p.item.eidr]]),y[11]||(y[11]=e("label",{for:"title"},"Eidr",-1)),o(w).item.eidr.$error?(t(),s("div",kr,[(t(!0),s(A,null,q(o(w).item.eidr.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):U("",!0)])])]),e("div",_r,[e("div",Sr,[e("div",Tr,[L(e("input",{"onUpdate:modelValue":y[3]||(y[3]=T=>p.item.releaseYear=T),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[J,p.item.releaseYear]]),y[12]||(y[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Mr,[L(e("input",{"onUpdate:modelValue":y[4]||(y[4]=T=>p.item.title=T),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[J,p.item.title]]),y[13]||(y[13]=e("label",{for:"title"},"Title",-1)),o(w).item.title.$error?(t(),s("div",Ir,[(t(!0),s(A,null,q(o(w).item.title.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):U("",!0)])])]),e("div",null,[e("div",Cr,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:y[5]||(y[5]=T=>X(T))},null,32),y[14]||(y[14]=e("label",{for:"editor"},"Content",-1)),o(w).htmlContent.$error?(t(),s("div",xr,[(t(!0),s(A,null,q(o(w).htmlContent.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):U("",!0)])]),e("div",Vr,[e("div",Pr,[L(e("textarea",{"onUpdate:modelValue":y[6]||(y[6]=T=>p.item.metadata=T),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[J,p.item.metadata]]),y[15]||(y[15]=e("label",{for:"title"},"Metadata",-1))])])])):U("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},Or={components:{Page:We},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ar(r,f,k,x,h,R){const I=ee("Page");return t(),ce(I,{id:k.id,urlView:k.urlView},null,8,["id","urlView"])}const Ur=Me(Or,[["render",Ar]]),Dr={class:"ms-2"},Hr={class:"input-group"},Lr={class:"table-responsive border shadow-sm"},Er={class:"table table-hover mb-0"},qr=["textContent"],Br={key:0,class:"fas fa-fw fa-check-circle text-success"},Nr="/api/v1/sourcegroups/search",Rr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(r){Se("$config");const k=ye().user,{appTitle:x,pageTitle:h,busy:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,security:p,filter:O,initializeFilter:w,getQuery:K,saveQuery:X,search:d,getRowNumber:b,setSelected:j,isSelected:y}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${k==null?void 0:k.userId}/source-groups/search`,baseUrl:Nr,filter:{updateUrl:!0}});return de(async()=>{w(),await d()}),(S,c)=>{const _=ee("router-link"),T=ee("PageHeader"),i=ee("m-pagination"),n=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(T,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(h)},{default:E(()=>[B(_,{to:r.urlAdd,class:"btn btn-primary"},{default:E(()=>c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Dr,[e("div",Hr,[L(e("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>o(O).query.criteria=a),onKeyup:c[1]||(c[1]=De(a=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[J,o(O).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[2]||(c[2]=a=>o(d)(1))},c[4]||(c[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(n,{errorMessage:o(F)},{default:E(()=>[e("div",Lr,[e("table",Er,[c[5]||(c[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(o(O).items,(a,l)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:v(o(b)(l)),class:"text-center"},null,8,qr),e("td",null,[B(_,{to:`${r.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[a.arn?(t(),s("span",Br)):U("",!0),z(" "+v(a.name),1)]),_:2},1032,["to"])]),e("td",null,v(a.channelOutputs),1),e("td",null,v(a.packageConfigurations),1)]))),128))]),_:1},512),[[Te,o(O).items.length>0]])])]),B(i,{filter:o(O),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Fr={key:0},zr={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Gr={class:"nav-item",role:"presentation"},Yr={class:"nav-item",role:"presentation"},jr={class:"nav-item",role:"presentation"},Wr={class:"tab-content",id:"myTabContent"},Kr={class:"mt-2"},Jr={class:"col"},Qr={class:"form-floating mb-2"},Xr={class:"mt-2"},Zr={class:"table-responsive border"},ei={class:"table table-hover mb-0"},ti={class:"mt-2"},si={class:"table-responsive border"},oi={class:"table table-hover mb-0"},ai={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const f=r,{appTitle:k,pageTitle:x,busy:h,isDirty:R,validations:I,infoMessage:G,warningMessage:F,errorMessage:V,router:N,axios:W,utils:M,toasts:D,close:p,closeWithReturnUrl:O,generateReturnUrl:w,security:K}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null}),b=re();de(async()=>{await c(),b.value=M.getPageTab("sourceGroup")||"information-tab"});const j=i=>{M.setPageTab("sourceGroup",i),b.value=i},y=i=>i!==b.value?"":"active",S=i=>i!==b.value?"":"show active",c=async()=>{const i=d;if(!h.value)try{h.value=!0,V.value="",d.item=null;const n=`/api/v1/sourcegroups/${f.id}/`;await W.get(n).then(a=>{i.item=a.data})}catch(n){V.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{if(!h.value)try{h.value=!0,V.value="";const i=`/api/v1/sourcegroups/${f.id}/`;await W.delete(i).then(n=>{D.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${f.urlMain}/`;await N.push(a)}})})}catch(i){V.value=M.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{h.value=!1}},T=async()=>{await c()};return(i,n)=>{const a=ee("PageHeader"),l=ee("router-link"),$=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(x)},{default:E(()=>[e("button",{onClick:n[0]||(n[0]=C=>_()),class:"ms-1 btn btn-warning"},n[7]||(n[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:n[1]||(n[1]=C=>T()),class:"ms-2 btn btn-secondary"},n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[2]||(n[2]=C=>o(O)(f.urlMain)),class:"btn btn-secondary ms-1"},n[9]||(n[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B($,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",Fr,[e("div",null,[e("ul",zr,[e("li",Gr,[e("button",{onClick:n[3]||(n[3]=C=>j("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Yr,[e("button",{onClick:n[4]||(n[4]=C=>j("channelOutputs-tab")),class:le([y("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",jr,[e("button",{onClick:n[5]||(n[5]=C=>j("packageConfigurations-tab")),class:le([y("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",Wr,[e("div",{class:le([S("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Kr,[e("div",Jr,[e("div",Qr,[L(e("input",{"onUpdate:modelValue":n[6]||(n[6]=C=>d.item.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.name]]),n[10]||(n[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:le([S("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Xr,[e("div",Zr,[e("table",ei,[n[11]||(n[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.channelOutputs,(C,m)=>(t(),s("tr",{key:C.channelOutputId},[e("td",null,v(m+1),1),e("td",null,[B(l,{to:`${r.urlViewChannel}/${C.channelId}/${o(w)()}`},{default:E(()=>[z(v(C.manifestName),1)]),_:2},1032,["to"])]),e("td",null,v(C.outputType),1)]))),128))]),_:1},512),[[Te,d.item.channelOutputs.length>0]])])])])],2),e("div",{class:le([S("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",ti,[e("div",si,[e("table",oi,[n[12]||(n[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.packageConfigurations,(C,m)=>(t(),s("tr",{key:C.packageConfigurationId},[e("td",null,v(m+1),1),e("td",null,[B(l,{to:`${r.urlViewVodSource}/${C.vodSourceId}/${o(w)()}`},{default:E(()=>[z(v(C.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,v(C.path),1),e("td",null,v(C.type),1)]))),128))]),_:1},512),[[Te,d.item.packageConfigurations.length>0]])])])])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},li=["disabled"],ni={class:"form-floating mb-2"},ri={key:0,class:"d-block invalid-feedback"},ii={class:"form-floating mb-2"},di={key:0,class:"d-block invalid-feedback"},ui={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),D=r,p=fe({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),O={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:te.withMessage("HTTP Configuration Base Url is required.",oe),$autoDirty:!0,$lazy:!0}}},w=$e(O,p);de(async()=>{});const K=async()=>{const X=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const b=V.clone(X.item);await F.post("/api/v1/sourcelocations/",b).then(j=>{N.success("Add Source Location","Source location added.",{onClose:async()=>{const y=`${D.urlView}/${j.data}`;await G.push(y)}})})}catch(b){I.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{x.value=!1}};return(X,d)=>{const b=ee("router-link"),j=ee("PageHeader"),y=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(j,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:d[0]||(d[0]=S=>K()),class:"btn btn-primary"},d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,li),B(b,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>d[4]||(d[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(y,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[e("div",null,[e("div",ni,[L(e("input",{"onUpdate:modelValue":d[1]||(d[1]=S=>p.item.name=S),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[J,p.item.name]]),d[5]||(d[5]=e("label",{for:"name"},"Name",-1)),o(w).item.name.$error?(t(),s("div",ri,[(t(!0),s(A,null,q(o(w).item.name.$errors,S=>(t(),s("div",{key:S.$uid},v(S.$message),1))),128))])):U("",!0)]),e("div",ii,[L(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=S=>p.item.httpConfigurationBaseUrl=S),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[J,p.item.httpConfigurationBaseUrl]]),d[6]||(d[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(w).item.httpConfigurationBaseUrl.$error?(t(),s("div",di,[(t(!0),s(A,null,q(o(w).item.httpConfigurationBaseUrl.$errors,S=>(t(),s("div",{key:S.$uid},v(S.$message),1))),128))])):U("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ci={components:{Page:We},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function mi(r,f,k,x,h,R){const I=ee("Page");return t(),ce(I,{id:k.id,urlView:k.urlView},null,8,["id","urlView"])}const fi=Me(ci,[["render",mi]]),pi={class:"ms-1"},vi={class:"input-group"},gi={class:"table-responsive border shadow-sm"},bi={class:"table table-hover mb-0"},yi={class:"text-center"},$i=["textContent"],wi={key:0,class:"fas fa-fw fa-check-circle text-success"},hi={class:"text-center"},ki=["onUpdate:modelValue"],_i="/api/v1/sourcelocations/search",Si={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(r){Se("$config");const k=ye().user,{appTitle:x,pageTitle:h,busy:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,security:p,filter:O,initializeFilter:w,getQuery:K,saveQuery:X,search:d,getRowNumber:b,setSelected:j,isSelected:y}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${k==null?void 0:k.userId}/source-locations/search`,baseUrl:_i,filter:{updateUrl:!0}}),S=he(()=>{const T=O.value;return T&&T.items?T.items.filter(a=>a.selected):null});de(async()=>{w(),await d()});const c=async()=>{if(!(S.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!R.value){F.value=null;try{R.value=!0;const n={sourceLocationIds:S.value.map(a=>a.sourceLocationId)};await N.post("/api/v1/sourceLocations/publish/",n).then(a=>{M.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),R.value=!1,await d()}catch(i){F.value=W.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{R.value=!1}}},_=async()=>{if(!(S.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!R.value){F.value=null;try{R.value=!0;const n={sourceLocationIds:S.value.map(a=>a.sourceLocationId)};await N.post("/api/v1/sourceLocations/unpublish/",n).then(a=>{M.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),R.value=!1,await d()}catch(i){F.value=W.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{R.value=!1}}};return(T,i)=>{const n=ee("router-link"),a=ee("PageHeader"),l=ee("m-pagination"),$=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(h)},{default:E(()=>[B(n,{to:r.urlAdd,class:"btn btn-primary ms-2"},{default:E(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",pi,[e("div",vi,[L(e("input",{"onUpdate:modelValue":i[0]||(i[0]=C=>o(O).query.criteria=C),onKeyup:i[1]||(i[1]=De(C=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[J,o(O).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:i[2]||(i[2]=C=>o(d)(1))},i[4]||(i[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B($,{errorMessage:o(F)},{default:E(()=>[e("div",gi,[e("table",bi,[e("thead",null,[e("tr",null,[i[7]||(i[7]=e("td",{class:"text-center"},"#",-1)),i[8]||(i[8]=e("th",null,"Name",-1)),i[9]||(i[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",yi,[S.value.length?(t(),s(A,{key:0},[e("button",{onClick:c,class:"btn btn-primary"},i[5]||(i[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:_,class:"btn btn-warning ms-1"},i[6]||(i[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):U("",!0)])])]),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(o(O).items,(C,m)=>(t(),s("tr",{key:C.sourceLocationId},[e("td",{textContent:v(o(b)(m)),class:"text-center"},null,8,$i),e("td",null,[B(n,{to:`${r.urlView}/${C.sourceLocationId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[C.arn?(t(),s("span",wi)):U("",!0),z(" "+v(C.name),1)]),_:2},1032,["to"])]),e("td",null,v(C.httpConfigurationBaseUrl),1),e("td",hi,[L(e("input",{"onUpdate:modelValue":Z=>C.selected=Z,type:"checkbox"},null,8,ki),[[Ue,C.selected]])])]))),128))]),_:1},512),[[Te,o(O).items.length>0]])])]),B(l,{filter:o(O),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ti={key:0},Mi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ii={class:"nav-item",role:"presentation"},Ci={class:"nav-item",role:"presentation"},xi={class:"nav-item",role:"presentation"},Vi={class:"tab-content",id:"myTabContent"},Pi={class:"mt-2"},Oi={class:"col"},Ai={class:"form-floating mb-2"},Ui={class:"col"},Di={class:"form-floating mb-2"},Hi={class:"mt-2"},Li={class:"table-responsive border"},Ei={class:"table table-hover mb-0"},qi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Bi={class:"mt-2"},Ni={class:"table-responsive border"},Ri={class:"table table-hover mb-0"},Fi={key:0,class:"fas fa-fw fa-check-circle text-success"},zi={class:"badge bg-info"},Gi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const f=r,{appTitle:k,pageTitle:x,busy:h,isDirty:R,validations:I,infoMessage:G,warningMessage:F,errorMessage:V,router:N,axios:W,utils:M,toasts:D,close:p,closeWithReturnUrl:O,generateReturnUrl:w,security:K}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null}),b=re();de(async()=>{await c(),b.value=M.getPageTab("sourceLocation")||"information-tab"});const j=n=>{M.setPageTab("sourceLocation",n),b.value=n},y=n=>n!==b.value?"":"active",S=n=>n!==b.value?"":"show active",c=async()=>{const n=d;if(!h.value)try{h.value=!0,V.value="",d.item=null;const a=`/api/v1/sourcelocations/${f.id}/`;await W.get(a).then(l=>{n.item=l.data})}catch(a){V.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await c()},T=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!h.value){V.value=null;try{h.value=!0;const a={sourceLocationIds:[f.id]};await W.post("/api/v1/sourcelocations/publish/",a).then(l=>{D.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),h.value=!1,await _()}catch(a){V.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}}},i=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!h.value){V.value=null;try{h.value=!0;const a={sourceLocationIds:[f.id]};await W.post("/api/v1/sourcelocations/unpublish/",a).then(l=>{D.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),h.value=!1,await _()}catch(a){V.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}}};return(n,a)=>{const l=ee("PageHeader"),$=ee("router-link"),C=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(l,{"page-icon":"fas fa-fw fa-building",pageTitle:o(x)},{default:E(()=>[d.item?(t(),s(A,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=m=>i()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=m=>T()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):U("",!0),e("button",{onClick:a[2]||(a[2]=m=>_()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=m=>o(O)(f.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(C,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",Ti,[e("div",null,[e("ul",Mi,[e("li",Ii,[e("button",{onClick:a[4]||(a[4]=m=>j("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ci,[e("button",{onClick:a[5]||(a[5]=m=>j("vodSources-tab")),class:le([y("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",xi,[e("button",{onClick:a[6]||(a[6]=m=>j("programs-tab")),class:le([y("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Vi,[e("div",{class:le([S("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Pi,[e("div",Oi,[e("div",Ai,[L(e("input",{"onUpdate:modelValue":a[7]||(a[7]=m=>d.item.name=m),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Ui,[e("div",Di,[L(e("input",{"onUpdate:modelValue":a[8]||(a[8]=m=>d.item.httpConfigurationBaseUrl=m),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[J,d.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:le([S("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Hi,[e("div",Li,[e("table",Ei,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.vodSources,(m,Z)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,v(Z+1),1),e("td",null,[m.arn?(t(),s("span",qi)):U("",!0),B($,{to:`${f.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(w)()}`},{default:E(()=>[z(v(m.name),1)]),_:2},1032,["to"])]),e("td",null,[B($,{to:`${f.urlViewVideo}/${encodeURIComponent(m.video.videoId)}/${o(w)()}`},{default:E(()=>[z(v(m.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,v(o(M).moment.utc(m.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Te,d.item.vodSources.length>0]])])])])],2),e("div",{class:le([S("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Bi,[e("div",Ni,[e("table",Ri,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.programs,(m,Z)=>(t(),s("tr",{key:m.programId},[e("td",null,v(Z+1),1),e("td",null,[B($,{to:`${f.urlViewChannel}/${encodeURIComponent(m.channel.channelId)}/${o(w)()}`},{default:E(()=>[z(v(m.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[m.arn?(t(),s("span",Fi)):U("",!0),z(" "+v(m.name)+" ",1),e("div",null," Start: "+v(o(M).moment.utc(m.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+v(o(M).moment.utc(m.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[z(v(o(M).moment(m.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",zi,v(o(M).moment(m.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Te,d.item.programs.length>0]])])])])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Yi=["disabled"],ji={class:"col"},Wi={class:"form-floating mb-2"},Ki={key:0,class:"d-block invalid-feedback"},Ji={class:"row row-cols-1 row-cols-sm-2"},Qi={class:"col"},Xi={class:"form-floating mb-2"},Zi=["value"],ed={key:0,class:"d-block invalid-feedback"},td={class:"col"},sd={class:"form-floating mb-2"},od=["readonly"],ad=["value"],ld={key:0,class:"d-block invalid-feedback"},nd={key:0},rd={class:"d-flex flex-row justify-content-between"},id={key:0,class:"d-inline invalid-feedback"},dd={class:"table-responsive border mt-1"},ud={class:"table mb-0 caption-top"},cd={class:"align-middle"},md=["onUpdate:modelValue"],fd=["value"],pd=["onUpdate:modelValue"],vd=["value"],gd=["onClick"],bd={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,route:F,axios:V,utils:N,toasts:W,close:M,closeWithReturnUrl:D,security:p}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),O=r,w=fe({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),K=(a,l,$)=>a.length>0,X={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",K),$each:te.forEach({path:{required:te.withMessage("Path is required.",oe)},sourceGroupId:{required:te.withMessage("Source Group is required.",oe)}}),$autoDirty:!0,$lazy:!0}}},d=$e(X,w);de(async()=>{await b(),await j()});const b=async()=>{try{await V.get("/api/v1/sourcegroups/lookup/").then(l=>{w.lookups.sourceGroups=l.data})}catch(a){I.value=N.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},j=async()=>{try{if(await V.get("/api/v1/sourcelocations/lookup/").then(l=>{w.lookups.sourceLocations=l.data}),w.lookups.sourceLocations.length===1){const l=w.lookups.sourceLocations[0];w.selected.sourceLocation=l,await y()}}catch(a){I.value=N.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},y=async()=>{const a=w.selected.sourceLocation;w.item.sourceLocationId=a.id,await S(a.baseUrl)},S=async a=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await V.get(l).then(C=>{w.lookups.videos=C.data,w.lookups.videos.length===1&&(w.item.videoId=w.lookups.videos[0].id)});const $=F.query.videoId;if($){const C=w.lookups.videos.find(m=>m.id==$);C&&(w.selected.video=C,await c())}}catch(l){I.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},c=async()=>{w.item.videoId=w.selected.video.id,await _(w.item.videoId)},_=async a=>{try{const l=`/api/v1/videos/${a}/formats`;await V.get(l).then($=>{w.selected.video.formats=$.data;debugger})}catch(l){I.value=N.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},T=async()=>{const a=w;if(x.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const $=N.clone(a.item),C=a.item.packageConfigurations.filter(m=>m.selectedFormat&&m.sourceGroupId);C.forEach(m=>{const Z=m.selectedFormat;m.path=Z.path,m.format=Z.format,delete m.selectedFormat}),$.packageConfigurations=C,delete $.video,await V.post("/api/v1/vodSources/",$).then(m=>{debugger;W.success("Add VOD Source","VOD source added",{onClose:async()=>{const Z=`${O.urlView}/${m.data}`;await G.push(Z)}})})}catch($){I.value=N.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{x.value=!1}},i=()=>{const a={sourceGroupId:null,selectedFormat:null},l=w.selected.video;if(l){const $=l.formats.find(C=>C.formatName==="HLS");a.path=`${$.serverUrl}${$.path}`}w.item.packageConfigurations.push(a)},n=a=>{w.item.packageConfigurations.splice(a,1)};return(a,l)=>{const $=ee("PageHeader"),C=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:l[0]||(l[0]=m=>T()),class:"btn btn-primary"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yi),e("button",{onClick:l[1]||(l[1]=m=>o(D)(O.urlMain)),class:"btn btn-secondary ms-1"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(C,{errorMessage:o(I),vuelidate:o(d)},{default:E(()=>[e("div",null,[e("div",ji,[e("div",Wi,[L(e("input",{"onUpdate:modelValue":l[2]||(l[2]=m=>w.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,w.item.name]]),l[8]||(l[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(d).item.name.$error?(t(),s("div",Ki,[(t(!0),s(A,null,q(o(d).item.name.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",Ji,[e("div",Qi,[e("div",Xi,[L(e("select",{"onUpdate:modelValue":l[3]||(l[3]=m=>w.selected.sourceLocation=m),onChange:l[4]||(l[4]=m=>y()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(A,null,q(w.lookups.sourceLocations,m=>(t(),s("option",{value:m},v(m.name),9,Zi))),256))],544),[[ue,w.selected.sourceLocation]]),l[9]||(l[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(d).item.sourceLocationId.$error?(t(),s("div",ed,[(t(!0),s(A,null,q(o(d).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",td,[e("div",sd,[L(e("select",{"onUpdate:modelValue":l[5]||(l[5]=m=>w.selected.video=m),onChange:c,class:"form-select",id:"videoId",readonly:w.item.packageConfigurations.length>0},[(t(!0),s(A,null,q(w.lookups.videos,m=>(t(),s("option",{value:m},v(m.name),9,ad))),256))],40,od),[[ue,w.selected.video]]),l[10]||(l[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(d).item.videoId.$error?(t(),s("div",ld,[(t(!0),s(A,null,q(o(d).item.videoId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])])]),w.item.videoId?(t(),s("div",nd,[e("div",rd,[e("fieldset",null,[e("legend",null,[l[12]||(l[12]=z(" Package Configurations ")),o(d).item.packageConfigurations.$error?(t(),s("span",id,l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):U("",!0)])]),e("button",{onClick:i,class:"btn btn-outline-primary"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Package Configuration ")]))]),e("div",dd,[e("table",ud,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",cd,[(t(!0),s(A,null,q(w.item.packageConfigurations,(m,Z)=>(t(),s("tr",null,[e("td",null,v(Z+1),1),e("td",null,[L(e("select",{"onUpdate:modelValue":Q=>m.selectedFormat=Q,class:"form-select",id:"videoId"},[(t(!0),s(A,null,q(w.selected.video.formats,Q=>(t(),s("option",{value:Q},v(Q.path),9,fd))),256))],8,md),[[ue,m.selectedFormat]]),o(d).item.packageConfigurations.$each.$response?(t(!0),s(A,{key:0},q(o(d).item.packageConfigurations.$each.$response.$errors[Z].path,Q=>(t(),s("div",{key:Q,class:"d-block invalid-feedback"},v(Q.$message),1))),128)):U("",!0)]),e("td",null,[m.selectedFormat?(t(),s(A,{key:0},[z(v(m.selectedFormat.formatName),1)],64)):U("",!0)]),e("td",null,[e("div",null,[L(e("select",{"onUpdate:modelValue":Q=>m.sourceGroupId=Q,class:"form-select",id:"sourceGroupId"},[(t(!0),s(A,null,q(w.lookups.sourceGroups,Q=>(t(),s("option",{value:Q.id},v(Q.name),9,vd))),256))],8,pd),[[ue,m.sourceGroupId]]),o(d).item.packageConfigurations.$each.$response?(t(!0),s(A,{key:0},q(o(d).item.packageConfigurations.$each.$response.$errors[Z].path,Q=>(t(),s("div",{key:Q,class:"d-block invalid-feedback"},v(Q.$message),1))),128)):U("",!0)])]),e("td",null,[e("button",{onClick:Q=>n(Z),class:"btn btn-outline-warning"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,gd)])]))),256))])])])])):U("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yd=["disabled"],$d={key:0},wd={class:"col"},hd={class:"form-floating mb-2"},kd={key:0,class:"d-block invalid-feedback"},_d={class:"row row-cols-1 row-cols-sm-2"},Sd={class:"col"},Td={class:"form-floating mb-2"},Md=["value"],Id={key:0,class:"d-block invalid-feedback"},Cd={class:"col"},xd={class:"form-floating mb-2"},Vd=["disabled"],Pd=["value"],Od={key:0,class:"d-block invalid-feedback"},Ad={key:0},Ud={class:"d-flex flex-row justify-content-between mt-3"},Dd={key:0,class:"d-inline invalid-feedback"},Hd={class:"table-responsive border mt-1"},Ld={class:"table mb-0 caption-top"},Ed={class:"input-group mb-1"},qd=["onUpdate:modelValue"],Bd=["onUpdate:modelValue"],Nd=["value"],Rd=["onUpdate:modelValue"],Fd=["onClick"],zd={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),D=r,p=fe({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),O=(a,l,$)=>a.length>0,w={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",O),$each:te.forEach({path:{required:te.withMessage("Path is required.",oe)},sourceGroupId:{required:te.withMessage("Source Group is required.",oe)}})}}},K=$e(w,p);de(async()=>{await X(),await b(),await j()});const X=async()=>{await d()},d=async()=>{const a=p;if(!x.value)try{x.value=!0,I.value="",p.item=null;const l=`/api/v1/vodsources/${D.id}/`;await F.get(l).then($=>{a.item=$.data;const C=a.item,m=V.moment.utc(a.item.video.durationInMillis).format("HH:mm:ss");C.video.duration=m})}catch(l){I.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{x.value=!1}},b=async()=>{try{await F.get("/api/v1/sourcegroups/lookup/").then(l=>{p.lookups.sourceGroups=l.data})}catch(a){I.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},j=async()=>{try{if(await F.get("/api/v1/sourcelocations/lookup/").then(l=>{p.lookups.sourceLocations=l.data}),p.lookups.sourceLocations.length>0){const l=p.lookups.sourceLocations.find($=>$.id===p.item.sourceLocationId);p.selected.sourceLocation=l,await y()}}catch(a){I.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},y=async()=>{const a=p.selected.sourceLocation;p.item.sourceLocationId=a.id,await S(a.baseUrl)},S=async a=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await F.get(l).then($=>{if(p.lookups.videos=$.data,p.lookups.videos.length>0){const C=p.lookups.videos.find(m=>m.id==p.item.videoId);p.selected.video=C}})}catch(l){I.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},c=async()=>{p.item.videoId=p.selected.video.id,await _(p.item.videoId)},_=async a=>{try{const l=`/api/v1/videos/${a}/formats`;await F.get(l).then($=>{p.selected.video.formats=$.data;debugger})}catch(l){I.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},T=async()=>{const a=p;if(x.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const $=V.clone(a.item);$.videoId=p.selected.video.id,delete $.video,await F.put("/api/v1/vodsources/",$).then(C=>{N.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const m=`${D.urlView}/${D.id}`;await G.push(m)}})})}catch($){I.value=V.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{x.value=!1}},i=()=>{debugger;const a={path:"",sourceGroupId:null,type:"HLS"},l=p.item.video;if(l){const $=l.formats.find(C=>C.formatName==="HLS");debugger;a.path=`${$.serverUrl}${$.path}`}p.item.packageConfigurations.push(a)},n=a=>{p.item.packageConfigurations.splice(a,1)};return(a,l)=>{const $=ee("router-link"),C=ee("PageHeader"),m=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(C,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:l[0]||(l[0]=Z=>T()),class:"btn btn-primary"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,yd),e("button",{onClick:l[1]||(l[1]=Z=>X()),class:"btn btn-secondary ms-2"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B($,{to:`${r.urlView}/${r.id}`,class:"btn btn-secondary ms-1"},{default:E(()=>l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(m,{errorMessage:o(I),vuelidate:o(K)},{default:E(()=>[p.item?(t(),s("div",$d,[e("div",wd,[e("div",hd,[L(e("input",{"onUpdate:modelValue":l[2]||(l[2]=Z=>p.item.name=Z),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,p.item.name]]),l[9]||(l[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(K).item.name.$error?(t(),s("div",kd,[(t(!0),s(A,null,q(o(K).item.name.$errors,Z=>(t(),s("div",{key:Z.$uid},v(Z.$message),1))),128))])):U("",!0)])]),e("div",_d,[e("div",Sd,[e("div",Td,[L(e("select",{"onUpdate:modelValue":l[3]||(l[3]=Z=>p.selected.sourceLocation=Z),onChange:l[4]||(l[4]=Z=>y()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(A,null,q(p.lookups.sourceLocations,Z=>(t(),s("option",{value:Z},v(Z.name),9,Md))),256))],544),[[ue,p.selected.sourceLocation]]),l[10]||(l[10]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(K).item.sourceLocationId.$error?(t(),s("div",Id,[(t(!0),s(A,null,q(o(K).item.sourceLocationId.$errors,Z=>(t(),s("div",{key:Z.$uid},v(Z.$message),1))),128))])):U("",!0)])]),e("div",Cd,[e("div",xd,[L(e("select",{"onUpdate:modelValue":l[5]||(l[5]=Z=>p.selected.video=Z),onChange:c,class:"form-select",id:"videoId",disabled:p.item.packageConfigurations.length>0},[(t(!0),s(A,null,q(p.lookups.videos,Z=>(t(),s("option",{value:Z},v(Z.name),9,Pd))),256))],40,Vd),[[ue,p.selected.video]]),l[11]||(l[11]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(K).item.videoId.$error?(t(),s("div",Od,[(t(!0),s(A,null,q(o(K).item.videoId.$errors,Z=>(t(),s("div",{key:Z.$uid},v(Z.$message),1))),128))])):U("",!0)])])]),p.item.videoId?(t(),s("div",Ad,[e("div",Ud,[e("div",null,[e("h5",null,[l[13]||(l[13]=z(" Package Configurations ")),o(K).item.packageConfigurations.$error?(t(),s("span",Dd,l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):U("",!0)])]),e("button",{onClick:i,class:"btn btn-outline-primary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Package Configuration ")]))]),e("div",Hd,[e("table",Ld,[l[17]||(l[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(p.item.packageConfigurations,(Z,Q)=>(t(),s("tr",null,[e("td",null,v(Q+1),1),e("td",null,[e("div",Ed,[L(e("input",{"onUpdate:modelValue":g=>Z.path=g,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,qd),[[J,Z.path]])]),o(K).item.packageConfigurations.$each.$response?(t(!0),s(A,{key:0},q(o(K).item.packageConfigurations.$each.$response.$errors[Q].path,g=>(t(),s("div",{key:g,class:"d-block invalid-feedback"},v(g.$message),1))),128)):U("",!0)]),e("td",null,[e("div",null,[L(e("select",{"onUpdate:modelValue":g=>Z.sourceGroupId=g,class:"form-select",id:"sourceGroupId"},[(t(!0),s(A,null,q(p.lookups.sourceGroups,g=>(t(),s("option",{value:g.id},v(g.name),9,Nd))),256))],8,Bd),[[ue,Z.sourceGroupId]]),o(K).item.packageConfigurations.$each.$response?(t(!0),s(A,{key:0},q(o(K).item.packageConfigurations.$each.$response.$errors[Q].path,g=>(t(),s("div",{key:g,class:"d-block invalid-feedback"},v(g.$message),1))),128)):U("",!0)])]),e("td",null,[L(e("select",{"onUpdate:modelValue":g=>Z.type=g,class:"form-select",id:"type"},l[15]||(l[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Rd),[[ue,Z.type]])]),e("td",null,[e("button",{onClick:g=>n(Q),class:"btn btn-outline-warning"},l[16]||(l[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Fd)])]))),256))])])])])):U("",!0)])):U("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Gd={class:"ms-1"},Yd={class:"input-group"},jd=["value"],Wd={class:"ms-1"},Kd={class:"input-group"},Jd={class:"ms-1"},Qd={class:"input-group"},Xd={class:"table-responsive border shadow-sm"},Zd={class:"table table-hover mb-0"},eu={class:"text-center"},tu=["textContent"],su={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ou={class:"badge bg-primary me-1"},au={class:"badge bg-info me-1"},lu={class:"d-flex flex-row justify-content-start"},nu={class:"mt-1"},ru=["src"],iu={class:"ms-2"},du={class:"small"},uu={class:"text-center"},cu=["onUpdate:modelValue"],mu="/api/v1/vodsources/search",fu={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(r){Se("$config");const k=ye().user,{appTitle:x,pageTitle:h,busy:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,closeWithReturnUrl:p,generateReturnUrl:O,security:w,filter:K,initializeFilter:X,getQuery:d,saveQuery:b,search:j,getRowNumber:y,setSelected:S,isSelected:c}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${k==null?void 0:k.userId}/vod-sources/search`,baseUrl:mu,filter:{updateUrl:!0,lookups:{sourceLocations:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(l,$)=>{const C=l.value,m=new URLSearchParams(window.location.search),Z=JSON.parse(localStorage.getItem($))||{};C.query.category=m.get("category")||Z.category||C.query.category||0,C.query.sourceLocationId=m.get("slid")||Z.sourceLocationId||C.query.sourceLocationId||""},getQuery:l=>["?c=",encodeURIComponent(l.query.criteria),"&p=",l.pageIndex,"&s=",l.pageSize,"&sf=",l.sortField,"&so=",l.sortOrder,"&category=",l.query.category,"&slid=",l.query.sourceLocationId].join(""),saveQuery:(l,$)=>{localStorage.setItem($,JSON.stringify({criteria:l.query.criteria,pageIndex:l.pageIndex,pageSize:l.pageSize,sortField:l.sortField,sortOrder:l.sortOrder,visible:l.visible,category:l.query.category,sourceLocationId:l.query.sourceLocationId}))}}),_=he(()=>{const l=K.value;return l&&l.items?l.items.filter(m=>m.selected):[]});de(async()=>{X(),await a(),await j()});const T=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!R.value){F.value=null;try{R.value=!0;const C={vodSourceIds:_.value.map(m=>m.vodSourceId)};await N.post("/api/v1/vodsources/publish/",C).then(m=>{M.success("Publish VODs","VODs was published.",{async onClose(){}})}),R.value=!1,await j()}catch($){F.value=W.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{R.value=!1}}},i=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!R.value){F.value=null;try{R.value=!0;const C={vodSourceIds:_.value.map(m=>m.vodSourceId)};await N.post("/api/v1/vodsources/unpublish/",C).then(m=>{M.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),R.value=!1,await j()}catch($){F.value=W.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{R.value=!1}}},n=()=>{const l=K.value.items;if(l.length<1)return;const $=!l[0].selected;K.value.items.forEach(C=>{C.selected=$})},a=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then($=>{K.value.lookups.sourceLocations=$.data})}catch(l){F.value=W.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}};return(l,$)=>{const C=ee("router-link"),m=ee("PageHeader"),Z=ee("m-pagination"),Q=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(m,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(h)},{default:E(()=>[B(C,{to:r.urlAdd,class:"btn btn-primary mx-2"},{default:E(()=>$[5]||($[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Gd,[e("div",Yd,[$[7]||($[7]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),L(e("select",{"onUpdate:modelValue":$[0]||($[0]=g=>o(K).query.sourceLocationId=g),class:"form-select"},[$[6]||($[6]=e("option",{value:""},"All",-1)),(t(!0),s(A,null,q(o(K).lookups.sourceLocations,g=>(t(),s("option",{value:g.id},v(g.name),9,jd))),256))],512),[[ue,o(K).query.sourceLocationId]])])]),e("div",Wd,[e("div",Kd,[$[9]||($[9]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),L(e("select",{"onUpdate:modelValue":$[1]||($[1]=g=>o(K).query.category=g),class:"form-select"},$[8]||($[8]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(K).query.category]])])]),e("div",Jd,[e("div",Qd,[L(e("input",{"onUpdate:modelValue":$[2]||($[2]=g=>o(K).query.criteria=g),onKeyup:$[3]||($[3]=De(g=>o(j)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[J,o(K).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:$[4]||($[4]=g=>o(j)(1))},$[10]||($[10]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(Q,{errorMessage:o(F)},{default:E(()=>[e("div",Xd,[e("table",Zd,[e("thead",null,[e("tr",null,[$[14]||($[14]=e("td",{class:"text-center"},"#",-1)),$[15]||($[15]=e("th",null,"Name",-1)),$[16]||($[16]=e("th",null,"Video Title",-1)),e("th",eu,[_.value.length?(t(),s(A,{key:0},[e("button",{onClick:T,class:"btn btn-sm btn-primary"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:i,class:"btn btn-sm btn-warning ms-1"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):U("",!0),e("button",{onClick:n,class:"btn btn-sm btn-outline-primary ms-2"},$[13]||($[13]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(o(K).items,(g,u)=>(t(),s("tr",{key:g.vodSourceId},[e("td",{textContent:v(o(y)(u)),class:"text-center"},null,8,tu),e("td",null,[B(C,{to:`${r.urlView}/${g.vodSourceId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[g.arn?(t(),s("span",su)):U("",!0),z(v(g.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(A,null,q(g.video.categories,H=>(t(),s("span",ou,v(H.categoryName),1))),256)),$[17]||($[17]=e("br",null,null,-1)),(t(!0),s(A,null,q(g.video.genres,H=>(t(),s("span",au,v(H.genreName),1))),256))])]),e("td",null,[e("div",lu,[e("div",null,[g.video.thumbnails.length>0?(t(!0),s(A,{key:0},q(g.video.thumbnails,H=>(t(),s("div",nu,[e("img",{src:H.url,class:"img-fuild",width:"128"},null,8,ru)]))),256)):U("",!0)]),e("div",iu,[B(C,{to:`${r.urlViewVideo}/${encodeURIComponent(g.video.videoId)}/${o(O)()}`,class:"text-decoration-none"},{default:E(()=>[z(v(g.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",du,"Duration: "+v(o(W).moment.utc(g.video.durationInMillis).format("HH:mm:ss")),1)])])])]),e("td",uu,[L(e("input",{"onUpdate:modelValue":H=>g.selected=H,type:"checkbox"},null,8,cu),[[Ue,g.selected]])])]))),128))]),_:1},512),[[Te,o(K).items.length>0]])])]),B(Z,{filter:o(K),search:o(j),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},pu=["id"],vu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},gu={class:"modal-content"},bu={class:"modal-header"},yu={class:"modal-title"},$u={class:"modal-body"},wu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hu=["innerHTML"],ku={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},_u={class:"container"},Su={class:"col"},Tu={class:"form-floating mb-2"},Mu=["value"],Iu={key:0,class:"d-block invalid-feedback"},Cu={class:"col"},xu={class:"form-floating mb-2"},Vu={key:0,class:"d-block invalid-feedback"},Pu={class:"col"},Ou={class:"form-floating mb-2"},Au={key:0,class:"d-block invalid-feedback"},Uu={class:"modal-footer"},Du=["disabled"],Hu={__name:"_addPackageConfiguration",emits:["refresh"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),K=k;re();const X=re("modalAddChannelOutput"),d=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),b={item:{sourceGroupId:{required:te.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("VOD Source is required.",oe),$autoDirty:!0,$lazy:!0},path:{required:te.withMessage("Path is required.",oe),$autoDirty:!0,$lazy:!0},type:{required:te.withMessage("Type is required.",oe),$autoDirty:!0,$lazy:!0}}},j=$e(b,d);de(async()=>{j.value.$reset()});const y=async()=>{await S()},S=async()=>{try{await M.get("/api/v1/sourceGroups/lookup/").then(n=>{d.lookups.sourceGroups=n.data,d.lookups.sourceGroups.length===1&&(d.item.sourceGroupId=d.lookups.sourceGroups[0].id)})}catch(i){N.value=D.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}},c=async i=>{const n=d;G.value.clear(),N.value="",n.lookups={sourceGroups:[]},n.item={sourceGroupId:null,vodSourceId:i,path:null,type:null},await y(),j.value.$reset();var a=document.getElementById(X.value),l=ke.getOrCreateInstance(a);l.show()},_=async()=>{var i=document.getElementById(X.value),n=ke.getOrCreateInstance(i);n.hide(),K("refresh")},T=async()=>{const i=d;if(R.value)return;const n=await j.value.$validate();debugger;if(!n){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const a=i.item;await M.post("/api/v1/vodSources/package-configurations/",a).then(l=>{p.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await _()}catch(a){N.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:c,close:_}),(i,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vu,[e("div",gu,[e("div",bu,[e("h5",yu,[n[5]||(n[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=a=>_()),"aria-label":"Close"})]),e("div",$u,[o(N)?(t(),s("div",wu,[n[6]||(n[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,hu)])):U("",!0),o(G).size>0?(t(),s("div",ku,[n[7]||(n[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),a=>(t(),s("li",null,v(a),1))),256))])])):U("",!0),e("div",_u,[e("div",Su,[e("div",Tu,[L(e("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>d.item.sourceGroupId=a),class:"form-select",id:"sourceGroupId"},[(t(!0),s(A,null,q(d.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},v(a.name),9,Mu))),256))],512),[[ue,d.item.sourceGroupId]]),n[8]||(n[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(j).item.sourceGroupId.$error?(t(),s("div",Iu,[(t(!0),s(A,null,q(o(j).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])]),e("div",Cu,[e("div",xu,[L(e("select",{"onUpdate:modelValue":n[2]||(n[2]=a=>d.item.type=a),class:"form-select",id:"type"},n[9]||(n[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,d.item.type]]),n[10]||(n[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(j).item.type.$error?(t(),s("div",Vu,[(t(!0),s(A,null,q(o(j).item.type.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])]),e("div",Pu,[e("div",Ou,[L(e("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>d.item.path=a),class:"form-control",id:"path"},null,512),[[J,d.item.path]]),n[11]||(n[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(j).item.path.$error?(t(),s("div",Au,[(t(!0),s(A,null,q(o(j).item.path.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])])])]),e("div",Uu,[e("button",{disabled:o(j).$dirty&&o(j).$invalid,onClick:n[4]||(n[4]=a=>T()),class:"btn btn-primary",type:"button"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Du),n[13]||(n[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,pu))}},Lu=["id"],Eu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},qu={class:"modal-content"},Bu={class:"modal-header"},Nu={class:"modal-title"},Ru={class:"modal-body"},Fu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},zu=["innerHTML"],Gu={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Yu={class:"container"},ju={class:"col"},Wu={class:"form-floating mb-2"},Ku={class:"col"},Ju={class:"form-floating mb-2"},Qu={key:0,class:"d-block invalid-feedback"},Xu={class:"col"},Zu={class:"form-floating mb-2"},ec={key:0,class:"d-block invalid-feedback"},tc={class:"col"},sc={class:"form-floating mb-2"},oc={key:0,class:"d-block invalid-feedback"},ac={class:"modal-footer"},lc=["disabled"],nc={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),K=k,X=re(),d=re("modalAddPlaybackConfiguration"),b=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),j={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},y=$e(j,b);de(async()=>{y.value.$reset()});const S=async(T,i)=>{X.value=T;const n=b;G.value.clear(),N.value="";const a=i,l=a.lastIndexOf("/"),$=a.substring(0,l),C="ad_campaign_"+a.substring(l+1).replace(".","_");n.item={name:C,originalVideoContentSourceUrl:i,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},y.value.$reset();var m=document.getElementById(d.value),Z=ke.getOrCreateInstance(m);Z.show()},c=async()=>{var T=document.getElementById(d.value),i=ke.getOrCreateInstance(T);i.hide(),K("refresh")},_=async()=>{const T=b;if(R.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const n=T.item;n.vodSourceId=X.value,await M.post("/api/v1/playbackconfigurations/vodsource",n).then(a=>{p.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await c()}catch(n){N.value=D.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:S,close:c}),(T,i)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Eu,[e("div",qu,[e("div",Bu,[e("h5",Nu,[i[6]||(i[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=n=>c()),"aria-label":"Close"})]),e("div",Ru,[o(N)?(t(),s("div",Fu,[i[7]||(i[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,zu)])):U("",!0),o(G).size>0?(t(),s("div",Gu,[i[8]||(i[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),n=>(t(),s("li",null,v(n),1))),256))])])):U("",!0),e("div",Yu,[e("div",ju,[e("div",Wu,[L(e("input",{"onUpdate:modelValue":i[1]||(i[1]=n=>b.item.originalVideoContentSourceUrl=n),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[J,b.item.originalVideoContentSourceUrl]]),i[9]||(i[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",Ku,[e("div",Ju,[L(e("input",{"onUpdate:modelValue":i[2]||(i[2]=n=>b.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,b.item.name]]),i[10]||(i[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",Qu,[(t(!0),s(A,null,q(o(y).item.name.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",Xu,[e("div",Zu,[L(e("input",{"onUpdate:modelValue":i[3]||(i[3]=n=>b.item.videoContentSourceUrl=n),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[J,b.item.videoContentSourceUrl]]),i[11]||(i[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),i[12]||(i[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(y).item.videoContentSourceUrl.$error?(t(),s("div",ec,[(t(!0),s(A,null,q(o(y).item.videoContentSourceUrl.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",tc,[e("div",sc,[L(e("textarea",{"onUpdate:modelValue":i[4]||(i[4]=n=>b.item.adDecisionServerUrl=n),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[J,b.item.adDecisionServerUrl]]),i[13]||(i[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(y).item.adDecisionServerUrl.$error?(t(),s("div",oc,[(t(!0),s(A,null,q(o(y).item.adDecisionServerUrl.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])])])]),e("div",ac,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:i[5]||(i[5]=n=>_()),class:"btn btn-primary",type:"button"},i[14]||(i[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,lc),i[15]||(i[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Lu))}},rc={key:0},ic={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},dc={class:"nav-item",role:"presentation"},uc={class:"nav-item",role:"presentation"},cc={class:"nav-item",role:"presentation"},mc={class:"nav-item",role:"presentation"},fc={class:"nav-item",role:"presentation"},pc={class:"nav-item",role:"presentation"},vc={class:"tab-content",id:"myTabContent"},gc={class:"mt-2"},bc={class:"col"},yc={class:"form-floating mb-2"},$c={class:"mt-2"},wc={class:"badge bg-info me-1"},hc={class:"mt-2"},kc={class:"row row-cols-sm-2"},_c={class:"col"},Sc={class:"form-floating mb-2"},Tc={class:"form-control"},Mc={class:"col"},Ic={class:"form-floating mb-2"},Cc={class:"mt-1"},xc={class:"badge bg-info me-1"},Vc={class:"badge bg-primary me-1"},Pc={class:"table-responsive border mt-1"},Oc={class:"table table-hover mb-0"},Ac={class:"table-group-divider"},Uc={class:"align-middle"},Dc={class:"text-center"},Hc={class:"mt-2"},Lc={class:"mt-2 text-end"},Ec={class:"table-responsive border mt-2"},qc={class:"table table-hover mb-0 caption-top"},Bc={class:"text-end"},Nc=["onClick"],Rc={class:"mt-2"},Fc={class:"mt-1"},zc=["id"],Gc={class:"text-end"},Yc={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(r){const f=r,{appTitle:k,pageTitle:x,busy:h,isDirty:R,validations:I,infoMessage:G,warningMessage:F,errorMessage:V,router:N,axios:W,utils:M,toasts:D,close:p,closeWithReturnUrl:O,generateReturnUrl:w,security:K}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null,hls:null}),b=re();re(null);const j=re();de(async()=>{await _();const C=M.getPageTab("vodSource")||"information-tab";y(C)}),Be(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const y=C=>{M.setPageTab("vodSource",C),b.value=C},S=C=>C!==b.value?"":"active",c=C=>C!==b.value?"":"show active",_=async()=>{const C=d;if(!h.value)try{h.value=!0,V.value="",d.item=null;const m=`/api/v1/vodsources/${f.id}/`;await W.get(m).then(Z=>{C.item=Z.data;const Q=C.item,g=M.moment.utc(C.item.video.durationInMillis).format("HH:mm:ss");Q.video.duration=g}),$()}catch(m){V.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}},T=async()=>{await _()},i=()=>{j.value.open(f.id)},n=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!h.value){V.value=null;try{h.value=!0;const m={vodSourceIds:[f.id]};await W.post("/api/v1/vodsources/publish/",m).then(Z=>{D.success("Publish VOD","VOD was published.",{async onClose(){}})}),h.value=!1,await T()}catch(m){V.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!h.value){V.value=null;try{h.value=!0;const m={vodSourceIds:[f.id]};await W.post("/api/v1/vodsources/unpublish/",m).then(Z=>{D.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),h.value=!1,await T()}catch(m){V.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}}},l=async C=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!h.value){V.value=null;try{h.value=!0,await W.delete(`/api/v1/vodSources/package-configurations/${C}/`).then(Z=>{D.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),h.value=!1,await T()}catch(Z){V.value=M.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{h.value=!1}}},$=()=>{if(Hls.isSupported()){d.hls&&d.hls.destroy();const C=`video-${d.item.vodSourceId}`,m=document.getElementById(C),Z=d.item.video.formats.find(g=>g.formatName==="HLS"),Q=`${Z.serverUrl}${Z.path}`;d.hls=M.createHlsStream(m,Q,!1)}};return(C,m)=>{const Z=ee("router-link"),Q=ee("PageHeader"),g=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(Q,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(x)},{default:E(()=>[d.item?(t(),s(A,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=u=>a()),class:"ms-1 btn btn-warning"},m[15]||(m[15]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=u=>n()),class:"ms-1 btn btn-primary"},m[16]||(m[16]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):U("",!0),B(Z,{to:`${r.urlEdit}/${r.id}`,class:"ms-2 btn btn-primary"},{default:E(()=>m[17]||(m[17]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:m[2]||(m[2]=u=>T()),class:"ms-2 btn btn-secondary"},m[18]||(m[18]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=u=>o(O)(f.urlMain)),class:"btn btn-secondary ms-1"},m[19]||(m[19]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(g,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",rc,[e("div",null,[e("ul",ic,[e("li",dc,[e("button",{onClick:m[4]||(m[4]=u=>y("information-tab")),class:le([S("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",uc,[e("button",{onClick:m[5]||(m[5]=u=>y("packageConfigurations-tab")),class:le([S("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",cc,[e("button",{onClick:m[6]||(m[6]=u=>y("viewStream-tab")),class:le([S("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View ",2)]),e("li",mc,[e("button",{onClick:m[7]||(m[7]=u=>y("channels-tab")),class:le([S("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},m[20]||(m[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),z("Channels ")]),2)]),e("li",fc,[e("button",{onClick:m[8]||(m[8]=u=>y("programs-tab")),class:le([S("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},m[21]||(m[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),z("Programs ")]),2)]),e("li",pc,[e("button",{onClick:m[9]||(m[9]=u=>y("programTemplates-tab")),class:le([S("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),z("Program Templates ")]),2)])]),e("div",vc,[e("div",{class:le([c("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",gc,[e("div",bc,[e("div",yc,[L(e("input",{"onUpdate:modelValue":m[10]||(m[10]=u=>d.item.name=u),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.name]]),m[23]||(m[23]=e("label",{for:"name"},"Name",-1))])]),e("div",$c,[e("div",null,[(t(!0),s(A,null,q(d.item.types,u=>(t(),s("span",wc,v(u.typeName),1))),256))])]),e("div",hc,[m[27]||(m[27]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",kc,[e("div",_c,[e("div",Sc,[e("div",Tc,[B(Z,{to:`${r.urlViewVideo}/${d.item.video.videoId}/${o(w)()}`},{default:E(()=>[z(v(d.item.video.title),1)]),_:1},8,["to"])]),m[24]||(m[24]=e("label",{for:"title"},"Title",-1))])]),e("div",Mc,[e("div",Ic,[L(e("input",{"onUpdate:modelValue":m[11]||(m[11]=u=>d.item.video.duration=u),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[J,d.item.video.duration]]),m[25]||(m[25]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Cc,[(t(!0),s(A,null,q(d.item.video.genres,u=>(t(),s("span",xc,v(u.genreName),1))),256)),(t(!0),s(A,null,q(d.item.video.categories,u=>(t(),s("span",Vc,v(u.categoryName),1))),256))]),e("div",Pc,[e("table",Oc,[m[26]||(m[26]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Ac,[(t(!0),s(A,null,q(d.item.video.formats,(u,H)=>(t(),s("tr",Uc,[e("td",Dc,v(H+1),1),e("td",null,v(u.formatName),1),e("td",null,v(u.serverUrl),1),e("td",null,v(u.path),1)]))),256))])])])])])])],2),e("div",{class:le([c("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Hc,[e("div",Lc,[e("button",{onClick:m[12]||(m[12]=u=>i()),class:"btn btn-primary"},m[28]||(m[28]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Add ")]))]),e("div",Ec,[e("table",qc,[m[30]||(m[30]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.packageConfigurations,(u,H)=>(t(),s("tr",{key:u.packageConfigurationId,class:"align-middle"},[e("td",null,v(H+1),1),e("td",null,v(u.path),1),e("td",null,v(u.sourceGroup.name),1),e("td",null,v(u.type),1),e("td",Bc,[e("button",{onClick:se=>l(u.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},m[29]||(m[29]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Nc)])]))),128))]),_:1},512),[[Te,d.item.packageConfigurations.length>0]])])])])],2),e("div",{class:le([c("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",Rc,[e("div",Fc,[e("video",{id:`video-${d.item.vodSourceId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,zc),e("div",Gc,[e("button",{onClick:m[13]||(m[13]=u=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:le([c("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},m[32]||(m[32]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:le([c("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},m[33]||(m[33]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:le([c("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},m[34]||(m[34]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):U("",!0)]),_:1},8,["errorMessage"]),B(Hu,{ref_key:"modalAddPackageConfiguration",ref:j,onRefresh:T},null,512),B(nc,{ref:"modalAddPlaybackConfiguration",onRefresh:m[14]||(m[14]=u=>T())},null,512)])]),_:1})}}},jc=["disabled"],Wc={class:"container1"},Kc={class:"row"},Jc={class:"col-12 col-sm-6"},Qc={class:"col"},Xc={class:"form-floating mb-2"},Zc=["value"],em={key:0,class:"d-block invalid-feedback"},tm={class:"col"},sm={class:"form-floating mb-2"},om=["disabled"],am=["value"],lm={key:0,class:"d-block invalid-feedback"},nm={class:"col-12 col-sm-6"},rm={class:"col"},im={class:"form-floating mb-2"},dm={key:0,class:"d-block invalid-feedback"},um={class:"row row-cols-1 row-cols-sm-2 mt-2"},cm={class:"col"},mm={class:"form-floating mb-2"},fm={key:0},pm={key:1},vm={key:2},gm={key:3,class:"d-block invalid-feedback"},bm={class:"col"},ym={class:"form-floating mb-2"},$m={key:0},wm={key:1},hm={key:2,class:"d-block invalid-feedback"},km={class:"col"},_m={class:"row row-cols-1 row-cols-sm-2"},Sm={class:"col"},Tm={class:"form-floating mb-2"},Mm={class:"col"},Im={class:"form-floating mb-2"},Cm={class:"col-sm-12"},xm={class:"form-floating mb-2"},Vm={key:0,class:"mt-3"},Pm={class:"table-responsive border mt-1"},Om={class:"table table-borderless table-sm mb-0 align-middle"},Am=["onUpdate:modelValue","onChange"],Um={key:0},Dm=["onUpdate:modelValue","onChange"],Hm={class:"text-start"},Lm=["onClick"],Em={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),D=r,p=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),O={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},w=$e(O,p),K=he(()=>{const g=V.moment;if(p.startOffsetTime&&p.startOffsetTime!=="00:00:00"&&V.isValidTime(p.startOffsetTime)){const u=g().startOf("day"),H=u.format("YYYY-MM-DD ")+p.startOffsetTime,ne=g(H).subtract(u);return p.item.startOffsetMillis=ne.valueOf(),p.item.startOffsetMillis}return 0}),X=he(()=>{const g=V.moment;if(p.endOffsetTime&&p.endOffsetTime!=="00:00:00"&&V.isValidTime(p.endOffsetTime)){const u=g().startOf("day"),H=u.format("YYYY-MM-DD ")+p.endOffsetTime,ne=g(H).subtract(u);return p.item.endOffsetMillis=ne.valueOf(),p.item.endOffsetMillis}return 0}),d=he(()=>p.item.endOffsetMillis-p.item.startOffsetMillis),b=he(()=>V.moment.utc(d.value).format("HH:mm:ss")),j=he(()=>{const g=p.item.adBreaks;return g&&g.length>0?g.reduce((H,se,ne)=>H+se.durationInMillis,0):0}),y=he(()=>{const g=d.value+j.value;return V.moment.utc(g).format("HH:mm:ss")}),S=he(()=>V.moment.utc(j.value).format("HH:mm:ss"));de(async()=>{await c()}),Be(()=>{p.hls&&(p.hls.stopLoad(),p.hls.destroy())});const c=async()=>{await _(),await l()},_=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(u=>{p.lookups.sourceLocations=u.data,p.lookups.sourceLocations.length===1&&(p.item.sourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.sourceLocationId&&await T(p.item.sourceLocationId)}catch(g){I.value=V.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},T=async g=>{try{const u=`/api/v1/vodSources/lookup/source-location/${g}/?category=3`;await F.get(u).then(H=>{p.lookups.vodSources=H.data})}catch(u){I.value=V.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},i=async()=>{const g=p.selected.vodSource;p.item.vodSourceId=g.id,p.endOffsetTime=V.moment.utc(g.durationInMillis).format("HH:mm:ss"),await Promise.all([n(g.id),a(g.id)])},n=async g=>{try{let u=`/api/v1/vodSources/${g}/hls`;const H=await F.get(u).then(ne=>ne.data);if(p.hls){p.hls.loadSource(H);return}const se=document.getElementById("video-add-program-template");p.hls=V.createHlsStream(se,H,"Previewing filler slate.")}catch(u){I.value=V.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},a=async g=>{try{let u=`/api/v1/vodSources/${g}/blank-frames`;const H=await F.get(u).then(se=>se.data);H&&H.length>0&&(p.item.adBreaks=H.map(se=>{const ne=(se.endInMillis-se.startInMillis)/2+se.startInMillis;return{offsetTime:V.moment.utc(ne).format("HH:mm:ss"),offsetMillis:ne,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(u){I.value=V.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},l=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(u=>{p.lookups.adBreakSourceLocations=u.data})}catch(g){I.value=V.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},$=()=>{const g={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};p.item.adBreaks.push(g)},C=g=>{p.item.adBreaks.splice(g,1)},m=g=>{const u=V.moment,H=u().startOf("day"),se=H.format("YYYY-MM-DD ")+g.offsetTime,Y=u(se).subtract(H);g.offsetMillis=Y.valueOf()},Z=g=>{const u=V.moment,H=u().startOf("day"),se=H.format("YYYY-MM-DD ")+g.durationTime,Y=u(se).subtract(H);g.durationInMillis=Y.valueOf()},Q=async()=>{const g=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const H=V.clone(g.item),se=H.adBreaks.filter(ne=>ne.durationInMillis>0);H.adBreaks=se,await F.post("/api/v1/programtemplates/",H).then(ne=>{N.success("Add Program Template","Program template added.",{onClose:async()=>{const Y=`${D.urlView}/${ne.data}`;await G.push(Y)}})})}catch(H){I.value=V.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{x.value=!1}};return(g,u)=>{const H=ee("router-link"),se=ee("PageHeader"),ne=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:u[0]||(u[0]=Y=>Q()),class:"btn btn-primary"},u[11]||(u[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jc),B(H,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(ne,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[e("div",null,[e("div",Wc,[e("div",Kc,[e("div",Jc,[e("div",Qc,[e("div",Xc,[L(e("select",{"onUpdate:modelValue":u[1]||(u[1]=Y=>p.item.sourceLocationId=Y),onChange:u[2]||(u[2]=Y=>T(p.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(A,null,q(p.lookups.sourceLocations,Y=>(t(),s("option",{value:Y.id},v(Y.name),9,Zc))),256))],544),[[ue,p.item.sourceLocationId]]),u[13]||(u[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(w).item.sourceLocationId.$error?(t(),s("div",em,[(t(!0),s(A,null,q(o(w).item.sourceLocationId.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),e("div",tm,[e("div",sm,[L(e("select",{"onUpdate:modelValue":u[3]||(u[3]=Y=>p.selected.vodSource=Y),onChange:u[4]||(u[4]=Y=>i()),class:"form-select",id:"vodSourceId",disabled:p.item.adBreaks.length>0},[(t(!0),s(A,null,q(p.lookups.vodSources,Y=>(t(),s("option",{value:Y},v(o(V).moment.utc(Y.durationInMillis).format("HH:mm:ss"))+" - "+v(Y.name),9,am))),256))],40,om),[[ue,p.selected.vodSource]]),u[14]||(u[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(w).item.vodSourceId.$error?(t(),s("div",lm,[(t(!0),s(A,null,q(o(w).item.vodSourceId.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),u[15]||(u[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",nm,[e("div",rm,[e("div",im,[L(e("input",{"onUpdate:modelValue":u[5]||(u[5]=Y=>p.item.name=Y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,p.item.name]]),u[16]||(u[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(w).item.name.$error?(t(),s("div",dm,[(t(!0),s(A,null,q(o(w).item.name.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),e("div",um,[e("div",cm,[e("div",null,[e("div",mm,[L(e("input",{"onUpdate:modelValue":u[6]||(u[6]=Y=>p.startOffsetTime=Y),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[J,p.startOffsetTime]]),u[17]||(u[17]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),K.value>0&&K.value<3e4?(t(),s("div",fm,u[18]||(u[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):U("",!0),K.value>X.value&&X.value>0?(t(),s("div",pm,u[19]||(u[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):U("",!0),p.selected.vodSource&&K.value>=p.selected.vodSource.durationInMillis?(t(),s("div",vm,u[20]||(u[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(w).item.startOffsetMillis.$error?(t(),s("div",gm,[(t(!0),s(A,null,q(o(w).item.startOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),e("div",bm,[e("div",null,[e("div",ym,[L(e("input",{"onUpdate:modelValue":u[7]||(u[7]=Y=>p.endOffsetTime=Y),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[J,p.endOffsetTime]]),u[21]||(u[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),X.value>0&&X.value<3e4?(t(),s("div",$m,u[22]||(u[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):U("",!0),p.selected.vodSource&&X.value>p.selected.vodSource.durationInMillis?(t(),s("div",wm,u[23]||(u[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(w).item.endOffsetMillis.$error?(t(),s("div",hm,[(t(!0),s(A,null,q(o(w).item.endOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])])]),e("div",km,[u[27]||(u[27]=e("h5",null," Duration ",-1)),e("div",_m,[e("div",Sm,[e("div",Tm,[L(e("input",{"onUpdate:modelValue":u[8]||(u[8]=Y=>b.value=Y),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[J,b.value]]),u[24]||(u[24]=e("label",{for:"durationTime"},"Clip",-1))])]),e("div",Mm,[e("div",Im,[L(e("input",{"onUpdate:modelValue":u[9]||(u[9]=Y=>S.value=Y),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[J,S.value]]),u[25]||(u[25]=e("label",{for:"totalAdBreakDurationTime"},"Ad Breaks",-1))])]),e("div",Cm,[e("div",xm,[L(e("input",{"onUpdate:modelValue":u[10]||(u[10]=Y=>y.value=Y),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[J,y.value]]),u[26]||(u[26]=e("label",{for:"totalProgramDuration"},"Program Total Duration",-1))])])])])])]),p.item.vodSourceId?(t(),s("div",Vm,[e("div",{class:"d-flex flex-row justify-content-between"},[u[29]||(u[29]=e("div",null,[e("h5",null," Ad Break ")],-1)),e("button",{onClick:$,class:"btn btn-outline-primary btn-sm"},u[28]||(u[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Pm,[e("table",Om,[u[32]||(u[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(p.item.adBreaks,(Y,we)=>(t(),s("tr",null,[e("td",null,v(we+1),1),e("td",null,[L(e("input",{"onUpdate:modelValue":ge=>Y.offsetTime=ge,onChange:ge=>m(Y),type:"time",step:"1",class:"form-control"},null,40,Am),[[J,Y.offsetTime]]),Y.offsetMillis>=p.selected.vodSource.durationInMillis?(t(),s("div",Um,u[30]||(u[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0)]),e("td",null,[L(e("input",{"onUpdate:modelValue":ge=>Y.durationTime=ge,onChange:ge=>Z(Y),type:"time",step:"1",class:"form-control"},null,40,Dm),[[J,Y.durationTime]])]),e("td",Hm,[e("button",{onClick:ge=>C(we),class:"btn btn-outline-warning btn-sm"},u[31]||(u[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Lm)])]))),256))])]),u[33]||(u[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),z(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):U("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},qm=["disabled"],Bm={class:"container1"},Nm={class:"row"},Rm={class:"col-12 col-sm-6"},Fm={class:"col"},zm={class:"form-floating mb-2"},Gm=["value"],Ym={key:0,class:"d-block invalid-feedback"},jm={class:"col"},Wm={class:"form-floating mb-2"},Km=["value"],Jm={key:0,class:"d-block invalid-feedback"},Qm={class:"col-12 col-sm-6"},Xm={class:"col"},Zm={class:"form-floating mb-2"},ef={key:0,class:"d-block invalid-feedback"},tf={class:"col"},sf={class:"form-floating mb-2"},of={key:0},af={key:1},lf={key:2},nf={key:3,class:"d-block invalid-feedback"},rf={class:"col"},df={class:"form-floating"},uf={key:0},cf={key:1},mf={key:2,class:"d-block invalid-feedback"},ff={class:"col"},pf={class:""},vf={class:"col"},gf={class:"form-floating mb-2"},bf={class:"col"},yf={class:"form-floating mb-2"},$f={class:"col"},wf={class:"form-floating mb-2"},hf={key:0,class:"mt-2"},kf={class:"table-responsive border mt-1"},_f={class:"table table-borderless table-sm mb-0 align-middle"},Sf=["onUpdate:modelValue","onChange"],Tf={key:0},Mf=["onUpdate:modelValue","onChange"],If=["onClick"],Cf={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,closeWithReturnUrl:M,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),p=r,O=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),w={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},K=$e(w,O),X=he(()=>{const u=V.moment;if(O.startOffsetTime&&O.startOffsetTime!=="00:00:00"&&V.isValidTime(O.startOffsetTime)){const H=u().startOf("day"),se=H.format("YYYY-MM-DD ")+O.startOffsetTime,Y=u(se).subtract(H);return O.item.startOffsetMillis=Y.valueOf(),O.item.startOffsetMillis}return 0}),d=he(()=>{const u=V.moment;if(O.endOffsetTime&&O.endOffsetTime!=="00:00:00"&&V.isValidTime(O.endOffsetTime)){const H=u().startOf("day"),se=H.format("YYYY-MM-DD ")+O.endOffsetTime,Y=u(se).subtract(H);return O.item.endOffsetMillis=Y.valueOf(),O.item.endOffsetMillis}return 0}),b=he(()=>O.item.endOffsetMillis-O.item.startOffsetMillis),j=he(()=>V.moment.utc(b.value).format("HH:mm:ss")),y=he(()=>{const u=O.item.adBreaks;return u&&u.length>0?u.reduce((se,ne,Y)=>se+ne.durationInMillis,0):0}),S=he(()=>{const u=b.value+y.value;return V.moment.utc(u).format("HH:mm:ss")}),c=he(()=>V.moment.utc(y.value).format("HH:mm:ss"));de(async()=>{await _()});const _=async()=>{await T(),await i()},T=async()=>{try{const u=`/api/v1/programtemplates/${p.id}/`;await F.get(u).then(H=>{O.item=H.data,O.startOffsetTime=V.moment.utc(O.item.startOffsetMillis).format("HH:mm:ss"),O.endOffsetTime=V.moment.utc(O.item.endOffsetMillis).format("HH:mm:ss"),O.item.adBreaks.forEach(se=>{se.offsetTime=V.moment.utc(se.offsetMillis).format("HH:mm:ss"),se.durationTime=V.moment.utc(se.durationInMillis).format("HH:mm:ss")})})}catch(u){I.value=V.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},i=async()=>{await n()},n=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(H=>{O.lookups.sourceLocations=H.data}),O.item.sourceLocationId&&await a(O.item.sourceLocationId)}catch(u){I.value=V.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},a=async u=>{try{const H=`/api/v1/vodSources/lookup/source-location/${u}/?type=3`;await F.get(H).then(ne=>{O.lookups.vodSources=ne.data});const se=O.lookups.vodSources.find(ne=>ne.id==O.item.vodSourceId);O.selected.vodSource=se,await l()}catch(H){I.value=V.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},l=async()=>{const u=O.selected.vodSource;O.item.vodSourceId=u.id,O.endOffsetTime=V.moment.utc(u.durationInMillis).format("HH:mm:ss"),await $(u.id)},$=async u=>{try{let H=`/api/v1/vodSources/${u}/hls`;const se=await F.get(H).then(Y=>Y.data);O.hls&&O.hls.destroy();const ne=document.getElementById("video-edit-program-template");O.hls=V.createHlsStream(ne,se,"Previewing VOD Content.")}catch(H){I.value=V.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},C=()=>{const u={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};O.item.adBreaks.push(u)},m=u=>{O.item.adBreaks.splice(u,1)},Z=u=>{const H=V.moment,se=H().startOf("day"),ne=se.format("YYYY-MM-DD ")+u.offsetTime,we=H(ne).subtract(se);u.offsetMillis=we.valueOf()},Q=u=>{const H=V.moment,se=H().startOf("day"),ne=se.format("YYYY-MM-DD ")+u.durationTime,we=H(ne).subtract(se);u.durationInMillis=we.valueOf()},g=async()=>{const u=O;if(x.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const se=V.clone(u.item);debugger;se.startOffsetMillis=X.value,se.endOffsetMillis=d.value,await F.put("/api/v1/programtemplates/",se).then(ne=>{N.success("Edit Program Template","Program template edit.",{onClose:async()=>{const Y=`${p.urlView}/${p.id}`;await G.push(Y)}})})}catch(se){I.value=V.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{x.value=!1}};return(u,H)=>{const se=ee("PageHeader"),ne=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:H[0]||(H[0]=Y=>g()),class:"btn btn-primary"},H[13]||(H[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,qm),e("button",{onClick:H[1]||(H[1]=Y=>_()),class:"btn btn-secondary ms-2"},H[14]||(H[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:H[2]||(H[2]=Y=>o(M)(p.urlMain)),class:"btn btn-secondary ms-1"},H[15]||(H[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(ne,{errorMessage:o(I),vuelidate:o(K)},{default:E(()=>[e("div",null,[e("div",Bm,[e("div",Nm,[e("div",Rm,[e("div",Fm,[e("div",zm,[L(e("select",{"onUpdate:modelValue":H[3]||(H[3]=Y=>O.item.sourceLocationId=Y),onChange:H[4]||(H[4]=Y=>a(O.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(A,null,q(O.lookups.sourceLocations,Y=>(t(),s("option",{value:Y.id},v(Y.name),9,Gm))),256))],544),[[ue,O.item.sourceLocationId]]),H[16]||(H[16]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(K).item.sourceLocationId.$error?(t(),s("div",Ym,[(t(!0),s(A,null,q(o(K).item.sourceLocationId.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),e("div",jm,[e("div",Wm,[L(e("select",{"onUpdate:modelValue":H[5]||(H[5]=Y=>O.selected.vodSource=Y),onChange:H[6]||(H[6]=Y=>l()),class:"form-select",id:"vodSourceId"},[(t(!0),s(A,null,q(O.lookups.vodSources,Y=>(t(),s("option",{value:Y},v(o(V).moment.utc(Y.durationInMillis).format("HH:mm:ss"))+" - "+v(Y.name),9,Km))),256))],544),[[ue,O.selected.vodSource]]),H[17]||(H[17]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(K).item.vodSourceId.$error?(t(),s("div",Jm,[(t(!0),s(A,null,q(o(K).item.vodSourceId.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),H[18]||(H[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",Qm,[e("div",Xm,[e("div",Zm,[L(e("input",{"onUpdate:modelValue":H[7]||(H[7]=Y=>O.item.name=Y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,O.item.name]]),H[19]||(H[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(K).item.name.$error?(t(),s("div",ef,[(t(!0),s(A,null,q(o(K).item.name.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)])]),e("div",tf,[e("div",sf,[L(e("input",{"onUpdate:modelValue":H[8]||(H[8]=Y=>O.startOffsetTime=Y),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[J,O.startOffsetTime]]),H[20]||(H[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),X.value>0&&X.value<3e4?(t(),s("div",of,H[21]||(H[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):U("",!0),X.value>d.value&&d.value>0?(t(),s("div",af,H[22]||(H[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):U("",!0),O.selected.vodSource&&X.value>=O.selected.vodSource.durationInMillis?(t(),s("div",lf,H[23]||(H[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(K).item.startOffsetMillis.$error?(t(),s("div",nf,[(t(!0),s(A,null,q(o(K).item.startOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)]),e("div",rf,[e("div",df,[L(e("input",{"onUpdate:modelValue":H[9]||(H[9]=Y=>O.endOffsetTime=Y),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[J,O.endOffsetTime]]),H[24]||(H[24]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),d.value>0&&d.value<3e4?(t(),s("div",uf,H[25]||(H[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):U("",!0),O.selected.vodSource&&d.value>O.selected.vodSource.durationInMillis?(t(),s("div",cf,H[26]||(H[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(K).item.endOffsetMillis.$error?(t(),s("div",mf,[(t(!0),s(A,null,q(o(K).item.endOffsetMillis.$errors,Y=>(t(),s("div",{key:Y.$uid},v(Y.$message),1))),128))])):U("",!0)]),e("div",ff,[H[30]||(H[30]=e("h5",null," Duration ",-1)),e("div",pf,[e("div",vf,[e("div",gf,[L(e("input",{"onUpdate:modelValue":H[10]||(H[10]=Y=>j.value=Y),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[J,j.value]]),H[27]||(H[27]=e("label",{for:"durationTime"},"Clip",-1))])]),e("div",bf,[e("div",yf,[L(e("input",{"onUpdate:modelValue":H[11]||(H[11]=Y=>c.value=Y),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[J,c.value]]),H[28]||(H[28]=e("label",{for:"totalAdBreakDurationTime"},"Ad Breaks",-1))])]),e("div",$f,[e("div",wf,[L(e("input",{"onUpdate:modelValue":H[12]||(H[12]=Y=>S.value=Y),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[J,S.value]]),H[29]||(H[29]=e("label",{for:"totalProgramDuration"},"Program Total Duration",-1))])])])])])]),O.selected.vodSource?(t(),s("div",hf,[e("div",{class:"d-flex flex-row justify-content-between"},[H[32]||(H[32]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:C,class:"btn btn-outline-primary btn-sm"},H[31]||(H[31]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",kf,[e("table",_f,[H[35]||(H[35]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(O.item.adBreaks,(Y,we)=>(t(),s("tr",null,[e("td",null,v(we+1),1),e("td",null,[L(e("input",{"onUpdate:modelValue":ge=>Y.offsetTime=ge,onChange:ge=>Z(Y),type:"time",step:"1",class:"form-control"},null,40,Sf),[[J,Y.offsetTime]]),Y.offsetMillis>=O.selected.vodSource.durationInMillis?(t(),s("div",Tf,H[33]||(H[33]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0)]),e("td",null,[L(e("input",{"onUpdate:modelValue":ge=>Y.durationTime=ge,onChange:ge=>Q(Y),type:"time",step:"1",class:"form-control"},null,40,Mf),[[J,Y.durationTime]])]),e("td",null,[e("button",{onClick:ge=>m(we),class:"btn btn-outline-warning btn-sm"},H[34]||(H[34]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,If)])]))),256))])]),H[36]||(H[36]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),z(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):U("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},xf={class:"ms-1"},Vf={class:"input-group"},Pf={class:"table-responsive border shadow-sm"},Of={class:"table table-hover mb-0"},Af=["textContent"],Uf={key:0,class:"fas fa-fw fa-check-circle text-success"},Df={class:"mt-1"},Hf=["src"],Lf={class:"text-end me-0 me-sm-5"},Ef="/api/v1/programTemplates/search",qf={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(r){Se("$config");const k=ye().user,{appTitle:x,pageTitle:h,busy:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,generateReturnUrl:p,security:O,filter:w,initializeFilter:K,getQuery:X,saveQuery:d,search:b,getRowNumber:j,setSelected:y,isSelected:S}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${k==null?void 0:k.userId}/program-templates/search`,baseUrl:Ef,filter:{updateUrl:!0}});return de(async()=>{K(),await b()}),(c,_)=>{const T=ee("router-link"),i=ee("PageHeader"),n=ee("m-pagination"),a=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(i,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h)},{default:E(()=>[B(T,{to:r.urlAdd,class:"btn btn-primary"},{default:E(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",xf,[e("div",Vf,[L(e("input",{"onUpdate:modelValue":_[0]||(_[0]=l=>o(w).query.criteria=l),onKeyup:_[1]||(_[1]=De(l=>o(b)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[J,o(w).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[2]||(_[2]=l=>o(b)(1))},_[4]||(_[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(a,{errorMessage:o(F)},{default:E(()=>[e("div",Pf,[e("table",Of,[_[5]||(_[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(o(w).items,(l,$)=>(t(),s("tr",{key:l.programTemplateId},[e("td",{textContent:v(o(j)($)),class:"text-center"},null,8,Af),e("td",null,[B(T,{to:`${r.urlView}/${l.programTemplateId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[l.arn?(t(),s("span",Uf)):U("",!0),z(" "+v(l.name),1)]),_:2},1032,["to"]),e("div",null,[l.vodSource.video.thumbnails.length>0?(t(!0),s(A,{key:0},q(l.vodSource.video.thumbnails,C=>(t(),s("div",Df,[e("img",{src:C.url,class:"img-fuild",width:"128"},null,8,Hf)]))),256)):U("",!0)])]),e("td",Lf,v(o(W).moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[B(T,{to:`${r.urlViewSourceLocation}/${l.sourceLocationId}/${o(p)()}`,class:"text-decoration-none"},{default:E(()=>[z(v(l.sourceLocation.name),1)]),_:2},1032,["to"])]),e("td",null,[B(T,{to:`${r.urlViewVodSource}/${l.vodSourceId}/${o(p)()}`,class:"text-decoration-none"},{default:E(()=>[z(v(l.vodSource.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,o(w).items.length>0]])])]),B(n,{filter:o(w),search:o(b),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Bf={key:0},Nf={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Rf={class:"nav-item",role:"presentation"},Ff={class:"nav-item",role:"presentation"},zf={class:"nav-item d-none",role:"presentation"},Gf={class:"tab-content",id:"myTabContent"},Yf={class:"mt-2"},jf={class:""},Wf={class:"row row-cols-1 row-cols-sm-2"},Kf={class:"col"},Jf={class:"col"},Qf={class:"form-floating mb-2"},Xf={class:"col"},Zf={class:"form-floating mb-2"},ep={class:"col"},tp={class:"col"},sp={class:"form-floating mb-2"},op={class:"col"},ap={class:"form-floating mb-2"},lp={class:"col"},np={class:"form-floating mb-2"},rp={class:"row row-cols-1"},ip={class:"col"},dp={class:"form-floating mb-2"},up={class:"col"},cp={class:"form-floating mb-2"},mp={class:"col"},fp={class:"form-floating mb-2"},pp={class:"mt-2"},vp={class:"table-responsive"},gp={class:"table table-hover mb-0"},bp={class:"text-center"},yp={class:"mt-2"},$p={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(r){const f=r,{appTitle:k,pageTitle:x,busy:h,isDirty:R,validations:I,infoMessage:G,warningMessage:F,errorMessage:V,router:N,axios:W,utils:M,toasts:D,close:p,closeWithReturnUrl:O,generateReturnUrl:w,security:K}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null,hls:null}),b=re();de(async()=>{await c(),b.value=M.getPageTab("programTemplate")||"information-tab"});const j=i=>{M.setPageTab("programTemplate",i),b.value=i},y=i=>i!==b.value?"":"active",S=i=>i!==b.value?"":"show active",c=async()=>{const i=d;if(!h.value)try{h.value=!0,V.value="",d.item=null;const n=`/api/v1/programTemplates/${f.id}/`;await W.get(n).then(a=>{i.item=a.data;const l=i.item;l.startOffsetTime=M.moment.utc(l.startOffsetMillis).format("HH:mm:ss"),l.endOffsetTime=M.moment.utc(l.endOffsetMillis).format("HH:mm:ss"),l.durationTime=M.moment.utc(l.durationInMillis).format("HH:mm:ss"),l.adBreaksDurationTime=M.moment.utc(l.adBreaksDurationInMillis).format("HH:mm:ss"),l.totalProgramTemplateDurationTime=M.moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const $=l.vodSource.video,C=$.durationInMillis;$.durationInMillis=M.moment.utc(C).format("HH:mm:ss")}),d.item.vodSource&&await T(d.item.vodSourceId)}catch(n){V.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await c()},T=async i=>{try{let n=`/api/v1/vodSources/${i}/hls`;const a=await W.get(n).then($=>$.data);d.hls&&d.hls.destroy();const l=document.getElementById("video-view-program-template");d.hls=M.createHlsStream(l,a,"Previewing VOD.")}catch(n){V.value=M.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}};return(i,n)=>{const a=ee("router-link"),l=ee("PageHeader"),$=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(l,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(x)},{default:E(()=>[B(a,{to:`${r.urlEdit}/${r.id}/${o(w)()}`,class:"ms-2 btn btn-primary"},{default:E(()=>n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:n[0]||(n[0]=C=>_()),class:"ms-2 btn btn-secondary"},n[14]||(n[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[1]||(n[1]=C=>o(O)(f.urlMain)),class:"btn btn-secondary ms-1"},n[15]||(n[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B($,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",Bf,[e("div",null,[e("ul",Nf,[e("li",Rf,[e("button",{onClick:n[2]||(n[2]=C=>j("information-tab")),class:le([y("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ff,[e("button",{onClick:n[3]||(n[3]=C=>j("adBreaks-tab")),class:le([y("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",zf,[e("button",{onClick:n[4]||(n[4]=C=>j("programs-tab")),class:le([y("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Gf,[e("div",{class:le([S("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Yf,[e("div",jf,[e("div",Wf,[e("div",Kf,[e("div",Jf,[e("div",Qf,[L(e("input",{"onUpdate:modelValue":n[5]||(n[5]=C=>d.item.sourceLocation.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.sourceLocation.name]]),n[16]||(n[16]=e("label",{for:"name",class:"small fw-bold"},"Source Location",-1))])]),e("div",Xf,[e("div",Zf,[L(e("input",{"onUpdate:modelValue":n[6]||(n[6]=C=>d.item.vodSource.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.vodSource.name]]),n[17]||(n[17]=e("label",{for:"name",class:"small fw-bold"},"VOD Name",-1))])]),n[18]||(n[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",ep,[e("div",tp,[e("div",sp,[L(e("input",{"onUpdate:modelValue":n[7]||(n[7]=C=>d.item.name=C),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.name]]),n[19]||(n[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1))])]),e("div",op,[e("div",ap,[L(e("input",{"onUpdate:modelValue":n[8]||(n[8]=C=>d.item.startOffsetTime=C),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[J,d.item.startOffsetTime]]),n[20]||(n[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start Offset",-1))])]),e("div",lp,[e("div",np,[L(e("input",{"onUpdate:modelValue":n[9]||(n[9]=C=>d.item.endOffsetTime=C),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[J,d.item.endOffsetTime]]),n[21]||(n[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End Offset",-1))])]),n[25]||(n[25]=e("h5",null," Duration ",-1)),e("div",rp,[e("div",ip,[e("div",dp,[L(e("input",{"onUpdate:modelValue":n[10]||(n[10]=C=>d.item.durationTime=C),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[J,d.item.durationTime]]),n[22]||(n[22]=e("label",{for:"durationTime",class:"small fw-bold"},"Clip",-1))])]),e("div",up,[e("div",cp,[L(e("input",{"onUpdate:modelValue":n[11]||(n[11]=C=>d.item.adBreaksDurationTime=C),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[J,d.item.adBreaksDurationTime]]),n[23]||(n[23]=e("label",{for:"adBreaksDurationTime",class:"small fw-bold"},"Ad Breaks",-1))])]),e("div",mp,[e("div",fp,[L(e("input",{"onUpdate:modelValue":n[12]||(n[12]=C=>d.item.totalProgramTemplateDurationTime=C),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[J,d.item.totalProgramTemplateDurationTime]]),n[24]||(n[24]=e("label",{for:"totalProgramTemplateDurationTime",class:"small fw-bold"},"Program Total Duration",-1))])])])])])])])],2),e("div",{class:le([S("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",pp,[e("div",vp,[e("table",gp,[n[26]||(n[26]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.adBreaks,(C,m)=>(t(),s("tr",{key:C.programTemplateAdBreakId},[e("td",bp,v(m+1),1),e("td",null,v(o(M).moment.utc(C.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(M).moment.utc(C.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,d.item.adBreaks.length>0]])])])])],2),e("div",{class:le([S("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",yp,[e("pre",null,v(d.item.programs),1)])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},wp=["disabled"],hp={class:"row row-cols-1 row-cols-sm-3"},kp={class:"col-sm-6"},_p={class:"form-floating mb-2"},Sp={key:0,class:"d-block invalid-feedback"},Tp={class:"col-sm-3"},Mp={class:"form-floating mb-2"},Ip={key:0,class:"d-block invalid-feedback"},Cp={class:"col-sm-3"},xp={class:"form-floating mb-2"},Vp={key:0,class:"d-block invalid-feedback"},Pp={class:"col"},Op={class:"form-floating mb-2"},Ap={key:0,class:"d-block invalid-feedback"},Up={class:"row row-cols-1 row-cols-sm-2"},Dp={class:"col"},Hp={class:"form-floating mb-2"},Lp=["value"],Ep={key:0,class:"d-block invalid-feedback"},qp={class:"col"},Bp={class:"form-floating mb-2"},Np=["value"],Rp={key:0,class:"d-block invalid-feedback"},Fp={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),D=r,p=fe({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),O={item:{name:{title:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},tier:{title:te.withMessage("Tier is required.",oe),$autoDirty:!0,$lazy:!0},playbackMode:{title:te.withMessage("PlaybackMode is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:te.withMessage("Filler Slate Source Location is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:te.withMessage("Filler Slate Vod Source is required.",oe),$autoDirty:!0,$lazy:!0},policy:{title:te.withMessage("Policy is required.",oe),$autoDirty:!0,$lazy:!0}}},w=$e(O,p);de(async()=>{await K()});const K=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(S=>{p.lookups.sourceLocations=S.data,p.lookups.sourceLocations.length===1&&(p.item.fillerSlateSourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.fillerSlateSourceLocationId&&await d(p.item.fillerSlateSourceLocationId)}catch(y){I.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},X=async()=>{p.item.fillerSlateVodSourceId=null,await d(p.item.fillerSlateSourceLocationId)},d=async y=>{try{let S=`/api/v1/vodSources/lookup/source-location/${y}`;await F.get(S).then(c=>{p.lookups.vodSources=c.data})}catch(S){I.value=V.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{}},b=()=>{if(p.item.name){const y=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${p.item.name}"}]}`;p.item.policy=y}else p.item.policy=null},j=async()=>{const y=p;if(x.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,I.value="";const c=V.clone(y.item);await F.post("/api/v1/channels/",c).then(_=>{N.success("Add Channel","Channel added.",{onClose:async()=>{const T=`${D.urlView}/${_.data}`;await G.push(T)}})})}catch(c){I.value=V.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{x.value=!1}};return(y,S)=>{const c=ee("router-link"),_=ee("PageHeader"),T=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(_,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k)},{default:E(()=>[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:S[0]||(S[0]=i=>j()),class:"btn btn-primary"},S[9]||(S[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wp),B(c,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>S[10]||(S[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(T,{errorMessage:o(I),vuelidate:o(w)},{default:E(()=>[e("div",null,[e("div",hp,[e("div",kp,[e("div",_p,[L(e("input",{"onUpdate:modelValue":S[1]||(S[1]=i=>p.item.name=i),onChange:S[2]||(S[2]=i=>b()),id:"name",class:"form-control",placeholder:"name"},null,544),[[J,p.item.name]]),S[11]||(S[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(w).item.name.$error?(t(),s("div",Sp,[(t(!0),s(A,null,q(o(w).item.name.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",Tp,[e("div",Mp,[L(e("input",{"onUpdate:modelValue":S[3]||(S[3]=i=>p.item.tier=i),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[J,p.item.tier]]),S[12]||(S[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(w).item.tier.$error?(t(),s("div",Ip,[(t(!0),s(A,null,q(o(w).item.tier.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",Cp,[e("div",xp,[L(e("input",{"onUpdate:modelValue":S[4]||(S[4]=i=>p.item.playbackMode=i),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[J,p.item.playbackMode]]),S[13]||(S[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(w).item.playbackMode.$error?(t(),s("div",Vp,[(t(!0),s(A,null,q(o(w).item.playbackMode.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])])]),e("div",Pp,[e("div",Op,[L(e("textarea",{"onUpdate:modelValue":S[5]||(S[5]=i=>p.item.policy=i),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[J,p.item.policy]]),S[14]||(S[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o(w).item.policy.$error?(t(),s("div",Ap,[(t(!0),s(A,null,q(o(w).item.policy.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),S[17]||(S[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",Up,[e("div",Dp,[e("div",Hp,[L(e("select",{"onUpdate:modelValue":S[6]||(S[6]=i=>p.item.fillerSlateSourceLocationId=i),onChange:S[7]||(S[7]=i=>X()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(A,null,q(p.lookups.sourceLocations,i=>(t(),s("option",{value:i.id},v(i.name),9,Lp))),256))],544),[[ue,p.item.fillerSlateSourceLocationId]]),S[15]||(S[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(w).item.fillerSlateSourceLocationId.$error?(t(),s("div",Ep,[(t(!0),s(A,null,q(o(w).item.fillerSlateSourceLocationId.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",qp,[e("div",Bp,[L(e("select",{"onUpdate:modelValue":S[8]||(S[8]=i=>p.item.fillerSlateVodSourceId=i),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(A,null,q(p.lookups.vodSources,i=>(t(),s("option",{value:i.id},v(i.name),9,Np))),256))],512),[[ue,p.item.fillerSlateVodSourceId]]),S[16]||(S[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(w).item.fillerSlateVodSourceId.$error?(t(),s("div",Rp,[(t(!0),s(A,null,q(o(w).item.fillerSlateVodSourceId.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},zp={components:{Page:We},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Gp(r,f,k,x,h,R){const I=ee("Page");return t(),ce(I,{id:k.id,urlView:k.urlView},null,8,["id","urlView"])}const Yp=Me(zp,[["render",Gp]]),jp={class:"ms-1"},Wp={class:"input-group"},Kp={class:"table-responsive border shadow-sm"},Jp={class:"table table-hover mb-0"},Qp=["textContent"],Xp={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Zp={key:0,class:"badge bg-success"},ev={key:1,class:"badge bg-secondary"},tv="/api/v1/channels/search",sv={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(r){Se("$config");const k=ye().user,{appTitle:x,pageTitle:h,busy:R,infoMessage:I,warningMessage:G,errorMessage:F,router:V,axios:N,utils:W,toasts:M,close:D,security:p,filter:O,initializeFilter:w,getQuery:K,saveQuery:X,search:d,getRowNumber:b,setSelected:j,isSelected:y}=He({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${k==null?void 0:k.userId}/Channels/search`,baseUrl:tv,filter:{updateUrl:!0}});return de(async()=>{w(),await d()}),(S,c)=>{const _=ee("router-link"),T=ee("PageHeader"),i=ee("m-pagination"),n=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(T,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(h)},{default:E(()=>[B(_,{to:r.urlAdd,class:"btn btn-primary"},{default:E(()=>c[3]||(c[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",jp,[e("div",Wp,[L(e("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>o(O).query.criteria=a),onKeyup:c[1]||(c[1]=De(a=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[J,o(O).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:c[2]||(c[2]=a=>o(d)(1))},c[4]||(c[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(n,{errorMessage:o(F)},{default:E(()=>[e("div",Kp,[e("table",Jp,[c[5]||(c[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(o(O).items,(a,l)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:v(o(b)(l)),class:"text-center"},null,8,Qp),e("td",null,[B(_,{to:`${r.urlView}/${a.channelId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[a.arn?(t(),s("span",Xp)):U("",!0),z(v(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",Zp,v(a.state),1)):a.state==="STOPPED"?(t(),s("span",ev,v(a.state),1)):U("",!0)])]),e("td",null,v(a.playbackMode),1),e("td",null,v(a.tier),1)]))),128))]),_:1},512),[[Te,o(O).items.length>0]])])]),B(i,{filter:o(O),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ov=["id"],av={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},lv={class:"modal-content"},nv={class:"modal-header"},rv={class:"modal-title"},iv={class:"modal-body"},dv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},uv=["innerHTML"],cv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},mv={class:"container"},fv={class:"col"},pv={class:"form-floating mb-2"},vv=["value"],gv={class:"row row-cols-1 row-cols-sm-2"},bv={class:"col"},yv={class:"form-floating mb-2"},$v={key:0,class:"d-block invalid-feedback"},wv={class:"col"},hv={class:"form-floating mb-2"},kv={key:0,class:"d-block invalid-feedback"},_v={key:0},Sv={class:"row row-cols-1 row-cols-sm-3"},Tv={class:"col"},Mv={class:"form-floating mb-2"},Iv={class:"col"},Cv={class:"form-floating mb-2"},xv={class:"col"},Vv={class:"form-floating mb-2"},Pv={class:"row row-cols-1 row-cols-sm-2"},Ov={class:"col"},Av={class:"form-floating mb-2"},Uv={class:"col"},Dv={class:"form-floating mb-2"},Hv={class:"row row-cols-1 row-cols-sm-2"},Lv={class:"col"},Ev={class:"form-floating mb-2"},qv={class:"col"},Bv={class:"form-floating mb-2"},Nv={key:1},Rv={class:"table-responsive border mt-1"},Fv={class:"table mb-0"},zv=["onUpdate:modelValue"],Gv=["value"],Yv={class:"modal-footer"},jv=["disabled"],Wv={__name:"_addProgramFromTemplate",emits:["onClose"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),K=k,X=re(),d=re("modalAddProgramFromTemplate"),b=fe({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},y=$e(j,b);de(async()=>{y.value.$reset()});const S=async(Q,g,u)=>{X.value=Q;const H=b;G.value.clear(),N.value="";const se=D.moment(u),Y=se.format("YYYY-MM-DD HH:mm"),we=se.format("YYYYMMDD_HHmm")+"_PRG_";H.eventId=g,H.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},H.selected={programTemplate:null},H.item={programTemplateId:null,name:we,dateScheduledStart:Y,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await T(),await i(),y.value.$reset();var ge=document.getElementById(d.value),Le=ke.getOrCreateInstance(ge);Le.show()},c=async Q=>{const g=b.selected.channel.programs;if(Q&&g.find(Le=>Le.name===b.item.name)){alert(`Program name = [${b.item.name}] already exists.`);return}if(!Q){K("onClose",{eventId:b.eventId},Q);var Y=document.getElementById(d.value),we=ke.getOrCreateInstance(Y);we.hide();return}const u=b,H=D.moment(u.item.dateScheduledStart).utc().format(),se=D.moment(u.item.dateScheduledStart).add(u.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),ne={eventId:u.eventId,programTemplateId:u.selected.programTemplate.programTemplateId,channelId:u.selected.channel.channelId,name:u.item.name,dateScheduledStart:H,dateScheduledEnd:se,adBreaks:u.selected.programTemplate.adBreaks.map(ge=>({sourceLocationId:u.selected.programTemplate.sourceLocationId,vodSourceId:ge.vodSourceId,offsetMillis:ge.offsetMillis,durationInMillis:ge.durationInMillis}))};K("onClose",ne,Q);var Y=document.getElementById(d.value),we=ke.getOrCreateInstance(Y);we.hide()},_=async()=>{await c(!0)},T=async()=>{try{const Q=`/api/v1/channels/${X.value}/`;await M.get(Q).then(g=>{b.selected.channel=g.data})}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}},i=async()=>{await $(),await Z(),await n()},n=async()=>{try{const Q=`/api/v1/programTemplates/lookup/by-channel/${X.value}`;await M.get(Q).then(g=>{b.lookups.programTemplates=g.data,b.lookups.programTemplates.length===1&&(b.item.programTemplateId=b.lookups.programTemplates[0].id)}),b.item.programTemplateId&&await a()}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}},a=async()=>{await l(b.item.programTemplateId)},l=async Q=>{try{const g=`/api/v1/programTemplates/${Q}/`;await M.get(g).then(se=>{b.selected.programTemplate=se.data;const ne=b.selected.programTemplate;ne.startOffsetTime=D.moment.utc(ne.startOffsetMillis).format("HH:mm:ss"),ne.endOffsetTime=D.moment.utc(ne.endOffsetMillis).format("HH:mm:ss"),ne.durationTime=D.moment.utc(ne.durationInMillis).format("HH:mm:ss"),ne.adBreaksDurationTime=D.moment.utc(ne.adBreaksDurationInMillis).format("HH:mm:ss"),ne.totalProgramTemplateDurationTime=D.moment.utc(ne.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ne.adBreaks.forEach(Y=>{Y.vodSourceId=null})});const u=b,H=u.selected.channel.outputs[0].outputType;await m(u.selected.programTemplate.sourceLocationId,H)}catch(g){N.value=D.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},$=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(g=>{b.lookups.sourceLocations=g.data,b.lookups.sourceLocations.length===1&&(b.item.sourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await C(b.item.sourceLocationId)}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}},C=async Q=>{try{let g=`/api/v1/vodSources/lookup/source-location/${Q}`;await M.get(g).then(u=>{b.lookups.vodSources=u.data})}catch(g){N.value=D.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},m=async(Q,g)=>{try{let u=`/api/v1/vodsources/lookup/source-location/${Q}/output-type/${g}`;await M.get(u).then(H=>{b.lookups.adBreakVodSources=H.data})}catch(u){N.value=D.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},Z=async()=>{try{const Q=`/api/v1/programs/lookup/?channelId=${X.value}`;await M.get(Q).then(g=>{b.lookups.channelPrograms=g.data;const u=b.lookups.channelPrograms.length})}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}};return f({open:S,close:c}),(Q,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-hidden":"true"},[e("div",av,[e("div",lv,[e("div",nv,[e("h5",rv,[g[14]||(g[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=u=>c(!1)),"aria-label":"Close"})]),e("div",iv,[o(N)?(t(),s("div",dv,[g[15]||(g[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,uv)])):U("",!0),o(G).size>0?(t(),s("div",cv,[g[16]||(g[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),u=>(t(),s("li",null,v(u),1))),256))])])):U("",!0),e("div",mv,[e("div",fv,[e("div",pv,[L(e("select",{"onUpdate:modelValue":g[1]||(g[1]=u=>b.item.programTemplateId=u),class:"form-select",onChange:g[2]||(g[2]=u=>a()),id:"sourceLocationId"},[(t(!0),s(A,null,q(b.lookups.programTemplates,u=>(t(),s("option",{value:u.id}," ["+v(o(D).moment.utc(u.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+v(u.name),9,vv))),256))],544),[[ue,b.item.programTemplateId]]),g[17]||(g[17]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",gv,[e("div",bv,[e("div",yv,[L(e("input",{"onUpdate:modelValue":g[3]||(g[3]=u=>b.item.name=u),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,b.item.name]]),g[18]||(g[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",$v,[(t(!0),s(A,null,q(o(y).item.name.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",wv,[e("div",hv,[L(e("input",{"onUpdate:modelValue":g[4]||(g[4]=u=>b.item.dateScheduledStart=u),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[J,b.item.dateScheduledStart]]),g[19]||(g[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(y).item.dateScheduledStart.$error?(t(),s("div",kv,[(t(!0),s(A,null,q(o(y).item.dateScheduledStart.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])])]),b.selected.programTemplate?(t(),s("div",_v,[e("div",Sv,[e("div",Tv,[e("div",Mv,[L(e("input",{"onUpdate:modelValue":g[5]||(g[5]=u=>b.selected.programTemplate.startOffsetTime=u),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[J,b.selected.programTemplate.startOffsetTime]]),g[20]||(g[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Iv,[e("div",Cv,[L(e("input",{"onUpdate:modelValue":g[6]||(g[6]=u=>b.selected.programTemplate.endOffsetTime=u),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[J,b.selected.programTemplate.endOffsetTime]]),g[21]||(g[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",xv,[e("div",Vv,[L(e("input",{"onUpdate:modelValue":g[7]||(g[7]=u=>b.selected.programTemplate.durationTime=u),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[J,b.selected.programTemplate.durationTime]]),g[22]||(g[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Pv,[e("div",Ov,[e("div",Av,[L(e("input",{"onUpdate:modelValue":g[8]||(g[8]=u=>b.selected.programTemplate.adBreaksDurationTime=u),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[J,b.selected.programTemplate.adBreaksDurationTime]]),g[23]||(g[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Uv,[e("div",Dv,[L(e("input",{"onUpdate:modelValue":g[9]||(g[9]=u=>b.selected.programTemplate.totalProgramTemplateDurationTime=u),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[J,b.selected.programTemplate.totalProgramTemplateDurationTime]]),g[24]||(g[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",Hv,[e("div",Lv,[e("div",Ev,[L(e("input",{"onUpdate:modelValue":g[10]||(g[10]=u=>b.selected.programTemplate.sourceLocation.name=u),id:"name",class:"form-control",readonly:""},null,512),[[J,b.selected.programTemplate.sourceLocation.name]]),g[25]||(g[25]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",qv,[e("div",Bv,[L(e("input",{"onUpdate:modelValue":g[11]||(g[11]=u=>b.selected.programTemplate.vodSource.name=u),id:"name",class:"form-control",readonly:""},null,512),[[J,b.selected.programTemplate.vodSource.name]]),g[26]||(g[26]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):U("",!0),g[29]||(g[29]=e("hr",null,null,-1)),b.selected.programTemplate?(t(),s("div",Nv,[g[28]||(g[28]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",Rv,[e("table",Fv,[g[27]||(g[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(b.selected.programTemplate.adBreaks,(u,H)=>(t(),s("tr",null,[e("td",null,v(H+1),1),e("td",null,v(o(D).moment.utc(u.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(D).moment.utc(u.durationInMillis).format("HH:mm:ss")),1),e("td",null,[L(e("select",{"onUpdate:modelValue":se=>u.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(A,null,q(b.lookups.adBreakVodSources,se=>(t(),s(A,null,[se.durationInMillis===u.durationInMillis?(t(),s("option",{key:0,value:se.id}," ["+v(o(D).moment.utc(se.durationInMillis).format("HH:mm:ss"))+"] "+v(se.name),9,Gv)):U("",!0)],64))),256))],8,zv),[[ue,u.vodSourceId]])])]))),256))])])])])):U("",!0)])]),e("div",Yv,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:g[12]||(g[12]=u=>_()),class:"btn btn-primary",type:"button"},g[30]||(g[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jv),e("button",{onClick:g[13]||(g[13]=u=>c(!1)),class:"btn btn-secondary ms-1"},g[31]||(g[31]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,ov))}},Kv=["id"],Jv={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Qv={class:"modal-content"},Xv={class:"modal-header"},Zv={class:"modal-title"},eg={class:"modal-body"},tg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},sg=["innerHTML"],og={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ag={key:2,class:"container"},lg={class:"row row-cols-1 row-cols-sm-2"},ng={key:0,class:"col"},rg={class:"form-floating mb-2"},ig={key:1,class:"col"},dg={class:"form-floating mb-2"},ug={class:"row row-cols-1 row-cols-sm-3"},cg={class:"col"},mg={class:"form-floating mb-2"},fg={id:"name",class:"form-control",placeholder:"Name"},pg={key:0,class:"text-wrap"},vg={key:0,class:"d-block invalid-feedback"},gg={class:"col"},bg={class:"form-floating mb-2"},yg={key:0,class:"d-block invalid-feedback"},$g={class:"col"},wg={class:"form-floating mb-2"},hg={key:0,class:"d-block invalid-feedback"},kg={class:"row row-cols-1 row-cols-sm-3"},_g={class:"col"},Sg={class:"form-floating mb-2"},Tg={class:"col"},Mg={class:"form-floating mb-2"},Ig={class:"col"},Cg={class:"form-floating mb-2"},xg={class:"row row-cols-1 row-cols-sm-2"},Vg={class:"col"},Pg={class:"form-floating mb-2"},Og={class:"col"},Ag={class:"form-floating mb-2"},Ug={key:0},Dg={class:"table-responsive border mt-1"},Hg={class:"table mb-0"},Lg=["onUpdate:modelValue"],Eg=["value"],qg={class:"modal-footer"},Bg=["disabled"],lt={__name:"_editProgram",emits:["onClose"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),K=k,X=re(),d=re("modalEditProgram"),b=fe({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},y=$e(j,b);de(async()=>{y.value.$reset()});const S=async(a,l)=>{X.value=a;const $=b;G.value.clear(),N.value="",$.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},$.item=null,await T(),b.item.dateScheduledStart=null,await i(),y.value.$reset();var C=document.getElementById(d.value),m=ke.getOrCreateInstance(C);m.show()},c=async a=>{if(!a){K("onClose",a);var m=document.getElementById(d.value),Z=ke.getOrCreateInstance(m);Z.hide();return}const l=b,$=D.moment(l.item.dateScheduledStart).utc().format(),C={programId:X.value,name:l.item.name,dateScheduledStart:$,adBreaks:l.item.adBreaks.map(Q=>({sourceLocationId:l.item.sourceLocationId,vodSourceId:Q.vodSourceId,offsetMillis:Q.offsetMillis,durationInMillis:Q.durationInMillis}))};try{await M.put("/api/v1/programs/",C).then(g=>{p.success("Edit Program","Program was edited.")})}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0);return}finally{}K("onClose",a);var m=document.getElementById(d.value),Z=ke.getOrCreateInstance(m);Z.hide()},_=async()=>{await c(!0)},T=async()=>{try{const a=`/api/v1/programs/${X.value}/`;await M.get(a).then(C=>{b.item=C.data;const m=b.item,g=D.moment(m.dateScheduledStart).format("YYYY-MM-DD HH:mm");b.item.dateScheduledStart=g,m.startOffsetTime=D.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=D.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=D.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=D.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=D.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const l=b,$=l.item.channel.outputs[0].outputType;await n(l.item.sourceLocationId,$)}catch(a){N.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},i=async()=>{},n=async(a,l)=>{try{let $=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${l}`;await M.get($).then(C=>{b.lookups.adBreakVodSources=C.data})}catch($){N.value=D.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return f({open:S,close:c}),(a,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Jv,[e("div",Qv,[e("div",Xv,[e("h5",Zv,[l[12]||(l[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=$=>c(!1)),"aria-label":"Close"})]),e("div",eg,[o(N)?(t(),s("div",tg,[l[13]||(l[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,sg)])):U("",!0),o(G).size>0?(t(),s("div",og,[l[14]||(l[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),$=>(t(),s("li",null,v($),1))),256))])])):U("",!0),b.item?(t(),s("div",ag,[e("div",lg,[b.item.sourceLocation?(t(),s("div",ng,[e("div",rg,[L(e("input",{"onUpdate:modelValue":l[1]||(l[1]=$=>b.item.sourceLocation.name=$),id:"name",class:"form-control",readonly:""},null,512),[[J,b.item.sourceLocation.name]]),l[15]||(l[15]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):U("",!0),b.item.vodSource?(t(),s("div",ig,[e("div",dg,[L(e("input",{"onUpdate:modelValue":l[2]||(l[2]=$=>b.item.vodSource.name=$),id:"name",class:"form-control",readonly:""},null,512),[[J,b.item.vodSource.name]]),l[16]||(l[16]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):U("",!0)]),e("div",ug,[e("div",cg,[e("div",mg,[e("div",fg,[b.item.relativeProgram?(t(),s("span",pg,v(b.item.relativeProgram.name),1)):U("",!0)]),l[17]||(l[17]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(y).item.name.$error?(t(),s("div",vg,[(t(!0),s(A,null,q(o(y).item.name.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):U("",!0)])]),e("div",gg,[e("div",bg,[L(e("input",{"onUpdate:modelValue":l[3]||(l[3]=$=>b.item.name=$),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,b.item.name]]),l[18]||(l[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",yg,[(t(!0),s(A,null,q(o(y).item.name.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):U("",!0)])]),e("div",$g,[e("div",wg,[L(e("input",{"onUpdate:modelValue":l[4]||(l[4]=$=>b.item.dateScheduledStart=$),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[J,b.item.dateScheduledStart]]),l[19]||(l[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(y).item.dateScheduledStart.$error?(t(),s("div",hg,[(t(!0),s(A,null,q(o(y).item.dateScheduledStart.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):U("",!0)])])]),e("div",null,[e("div",kg,[e("div",_g,[e("div",Sg,[L(e("input",{"onUpdate:modelValue":l[5]||(l[5]=$=>b.item.startOffsetTime=$),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[J,b.item.startOffsetTime]]),l[20]||(l[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Tg,[e("div",Mg,[L(e("input",{"onUpdate:modelValue":l[6]||(l[6]=$=>b.item.endOffsetTime=$),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[J,b.item.endOffsetTime]]),l[21]||(l[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Ig,[e("div",Cg,[L(e("input",{"onUpdate:modelValue":l[7]||(l[7]=$=>b.item.durationTime=$),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[J,b.item.durationTime]]),l[22]||(l[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",xg,[e("div",Vg,[e("div",Pg,[L(e("input",{"onUpdate:modelValue":l[8]||(l[8]=$=>b.item.adBreaksDurationTime=$),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[J,b.item.adBreaksDurationTime]]),l[23]||(l[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Og,[e("div",Ag,[L(e("input",{"onUpdate:modelValue":l[9]||(l[9]=$=>b.item.totalProgramTemplateDurationTime=$),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[J,b.item.totalProgramTemplateDurationTime]]),l[24]||(l[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])]),l[27]||(l[27]=e("hr",null,null,-1)),b.item?(t(),s("div",Ug,[l[26]||(l[26]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",Dg,[e("table",Hg,[l[25]||(l[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(b.item.adBreaks,($,C)=>(t(),s("tr",null,[e("td",null,v(C+1),1),e("td",null,v(o(D).moment.utc($.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(D).moment.utc($.durationInMillis).format("HH:mm:ss")),1),e("td",null,[L(e("select",{"onUpdate:modelValue":m=>$.vodSourceId=m,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(A,null,q(b.lookups.adBreakVodSources,m=>(t(),s(A,null,[m.durationInMillis===$.durationInMillis?(t(),s("option",{key:0,value:m.id}," ["+v(o(D).moment.utc(m.durationInMillis).format("HH:mm:ss"))+"] "+v(m.name),9,Eg)):U("",!0)],64))),256))],8,Lg),[[ue,$.vodSourceId]])])]))),256))])])])])):U("",!0)])):U("",!0)]),e("div",qg,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:l[10]||(l[10]=$=>_()),class:"btn btn-primary ms-2",type:"button"},l[28]||(l[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Bg),e("button",{onClick:l[11]||(l[11]=$=>c(!1)),class:"btn btn-secondary ms-1"},l[29]||(l[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Kv))}},Ng={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(r){const{appTitle:f,pageTitle:k,busy:x,infoMessage:h,warningMessage:R,errorMessage:I,router:G,axios:F,utils:V,toasts:N,close:W,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),D=r,p=re(null),O=re(null),w=re(null),K={viewType:"Week",cellDuration:15,startDate:Oe.DayPilot.Date.today(),onTimeRangeSelected:T=>{var i=T.control;const n={start:T.start,end:T.end,id:Oe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};i.events.add(n);var a=i.events.find(n.id);S(a)},onBeforeEventRender:T=>{if(T.data.barColor="green",!!T.data.tags)switch(T.data.tags.type){case"new":T.data.barColor="yellow";break;case"business":T.data.barColor="red";break;case"personal":T.data.barColor="greem";break;case"vacation":T.data.barColor="black";break;default:T.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async T=>{const i=T.newStart.value,n=T.e.id(),a=V.moment(i).utc().format();try{let l="/api/v1/programs/scheduled-date-start";const $={programId:n,dateScheduledStart:a};await F.put(l,$).then(C=>{N.success("Program date scheduled start was edited.")})}catch(l){I.value=V.getErrorMessageAsHtml(l),window.scrollTo(0,0);return}finally{}await j()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async T=>{var i=T.e.id();_(i)},contextMenu:new Oe.DayPilot.Menu([{text:"Clone",onClick:async T=>{const i=T.source.id();try{let n=`/api/v1/programs/${i}/clone`;await F.post(n).then(a=>{N.success("Clone Program","Program was cloned.")})}catch(n){I.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0);return}finally{await j()}}},{text:"Delete",onClick:async T=>{if(!confirm("Do you want to remove this program?"))return;const n=T.source.id();try{let a=`/api/v1/programs/${n}/`;await F.delete(a).then(l=>{N.success("Delete Program","Program was deleted.")}),p.value.control.events.remove(T.source)}catch(a){I.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await j()}}}])},X=re([]),d=()=>{p.value.control.update({events:X.value})},b=fe({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});de(async()=>{await j()});const j=async()=>{await y(),await d()},y=async()=>{const T=b;if(!x.value)try{x.value=!0,I.value="";const i=`/api/v1/channels/${D.id}/`;await F.get(i).then(n=>{T.item=n.data;const a=T.item.outputs,l=T.item.programs.map($=>{let C=`${$.name}`,m=`[${$.name}]`;return $.relativeProgram&&(m+=` => [${$.relativeProgram.name}]`),{start:V.moment($.dateScheduledStart).utc(!0).format(),end:V.moment($.dateScheduledEnd).utc(!0).format(),id:$.programId,text:C,toolTip:m}});X.value=l})}catch(i){I.value=V.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{x.value=!1}},S=T=>{O.value.open(D.id,T.id(),T.start().value)},c=async(T,i)=>{var n=p.value,a=n.control.events.find(T.eventId);if(!i&&a){p.value.control.events.remove(a);return}n.control.events.find(Q=>Q.text()==T.name)&&(alert("Program already exists in this channel. Removing in the calendar."),p.value.control.events.remove(a));const $=V.moment(T.dateScheduledStart).utc(!0).format(),C=V.moment(T.dateScheduledEnd).utc(!0).format(),m=new Oe.DayPilot.Date($),Z=new Oe.DayPilot.Date(C);a.text(T.name),a.start(new Oe.DayPilot.Date(m)),a.end(new Oe.DayPilot.Date(Z)),a.data.tags.program=T,a.commit(),p.value.control.update(),await F.post("/api/v1/programs/from-template/",T).then(Q=>{N.success("Add New Program",`Program [${T.name}] was added to this channel.`)},Q=>{const g=V.getErrorMessageAsHtml(Q);alert(g)}),await j()},_=(T,i)=>{w.value.open(T,i)};return(T,i)=>{const n=ee("router-link"),a=ee("PageHeader"),l=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(k)},{default:E(()=>[e("button",{onClick:i[0]||(i[0]=$=>j()),class:"btn btn-secondary ms-1"},i[1]||(i[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B(n,{to:`${r.urlView}/${r.id}`,class:"btn btn-secondary ms-1"},{default:E(()=>i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(l,{errorMessage:o(I),vuelidate:T.v$},{default:E(()=>[e("div",null,[B(o(Oe.DayPilotCalendar),{id:"dp",config:K,ref_key:"calendarRef",ref:p},null,512),B(Wv,{ref_key:"modalAddProgram",ref:O,onOnClose:c},null,512),B(lt,{ref_key:"modalEditProgram",ref:w,onOnClose:j},null,512)])]),_:1},8,["errorMessage","vuelidate"]),i[3]||(i[3]=z(" > "))])]),_:1})}}},Rg=["id"],Fg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},zg={class:"modal-content"},Gg={class:"modal-header"},Yg={class:"modal-title"},jg={class:"modal-body"},Wg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Kg=["innerHTML"],Jg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Qg={class:"container"},Xg={class:"row row-cols-1 row-cols-sm-3"},Zg={class:"col"},e1={class:"form-floating mb-2"},t1=["disabled"],s1=["value"],o1={class:"col"},a1={class:"form-floating mb-2"},l1={key:0,class:"d-block invalid-feedback"},n1={class:"col"},r1={class:"form-floating mb-2"},i1={key:0,class:"d-block invalid-feedback"},d1={class:"row row-cols-sm-2"},u1={class:"col"},c1={class:"form-floating mb-2"},m1=["value"],f1={key:0,class:"d-block invalid-feedback"},p1={class:"col"},v1={class:"form-floating mb-2"},g1=["value"],b1={key:0,class:"d-block invalid-feedback"},y1={class:"col"},$1={class:"input-group mb-1"},w1={class:"form-floating"},h1={key:0,class:"input-group-text"},k1={key:0},_1={key:1},S1={key:2},T1={key:3,class:"d-block invalid-feedback"},M1={class:"col"},I1={class:"input-group mb-1"},C1={class:"form-floating"},x1={key:0,class:"input-group-text"},V1={key:0},P1={key:1},O1={key:2,class:"d-block invalid-feedback"},A1={class:"table-responsive border mt-1"},U1={class:"table"},D1={class:"input-group mb-1"},H1=["onUpdate:modelValue"],L1={key:0,class:"input-group-text"},E1=["onUpdate:modelValue"],q1=["value"],B1=["onUpdate:modelValue"],N1=["value"],R1=["onClick"],F1={class:"modal-footer"},z1=["disabled"],G1={__name:"_addProgram",emits:["refresh"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),K=k,X=re(),d=re("modalAddProgram"),b=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:xe(0),$autoDirty:!0,$lazy:!0}}},y=$e(j,b);de(async()=>{y.value.$reset()});const S=async Q=>{X.value=Q;const g=b;G.value.clear(),N.value="";const u=D.moment().local().add(2,"m"),se=u.format("YYYY-MM-DD HH:mm"),ne=u.format("YYYY_MM_DD")+"_PROGRAM_";g.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},g.item={name:ne,relativeProgramId:null,dateScheduledStart:se,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await T(),y.value.$reset();var Y=document.getElementById(d.value),we=ke.getOrCreateInstance(Y);we.show()},c=async()=>{var Q=document.getElementById(d.value),g=ke.getOrCreateInstance(Q);g.hide(),K("refresh")},_=async()=>{const Q=b;if(R.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const H=Q.item;delete H.vodSource,H.channelId=X.value;var u=H.dateScheduledStart;H.dateScheduledStart=D.moment(u).utc().format(),await M.post("/api/v1/programs/",H).then(se=>{p.success("Add Program","Program added to Channel",{async onClose(){}})}),await c()}catch(H){N.value=D.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{R.value=!1}},T=async()=>{await i(),await a(),await $()},i=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(g=>{b.lookups.sourceLocations=g.data,b.lookups.sourceLocations.length===1&&(b.item.sourceLocationId=b.lookups.sourceLocations[0].id)}),b.item.sourceLocationId&&await n(b.item.sourceLocationId)}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}},n=async Q=>{try{let g=`/api/v1/vodSources/lookup/source-location/${Q}`;await M.get(g).then(u=>{b.lookups.vodSources=u.data})}catch(g){N.value=D.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},a=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(g=>{b.lookups.adBreakSourceLocations=g.data})}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}},l=async Q=>{try{let g=`/api/v1/vodSources/lookup/source-location/${Q}`;await M.get(g).then(u=>{b.lookups.adBreakVodSources=u.data})}catch(g){N.value=D.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},$=async()=>{try{const Q=`/api/v1/programs/lookup/?channelId=${X.value}`;await M.get(Q).then(g=>{if(b.lookups.channelPrograms=g.data,b.lookups.channelPrograms.length===1){const H=b.lookups.channelPrograms[0];b.item.relativeProgramId=H.id}})}catch(Q){N.value=D.getErrorMessageAsHtml(Q),window.scrollTo(0,0)}finally{}},C=()=>{const Q={offsetMillis:0,sourceLocationId:null,vodSourceId:null},g=b.item.adBreaks.length;if(g>0){const u=b.item.adBreaks[g-1];Q.offsetMillis=u.offsetMillis+1e4}b.item.adBreaks.push(Q)},m=Q=>{b.item.adBreaks.splice(Q,1)},Z=()=>{const Q=b.item.vodSource;b.item.vodSourceId=Q.id};return f({open:S,close:c}),(Q,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Fg,[e("div",zg,[e("div",Gg,[e("h5",Yg,[g[12]||(g[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=u=>c()),"aria-label":"Close"})]),e("div",jg,[o(N)?(t(),s("div",Wg,[g[13]||(g[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Kg)])):U("",!0),o(G).size>0?(t(),s("div",Jg,[g[14]||(g[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),u=>(t(),s("li",null,v(u),1))),256))])])):U("",!0),e("div",Qg,[e("div",Xg,[e("div",Zg,[e("div",e1,[L(e("select",{"onUpdate:modelValue":g[1]||(g[1]=u=>b.item.relativeProgramId=u),class:"form-select",id:"sourceLocationId",disabled:b.lookups.channelPrograms.length<=0},[(t(!0),s(A,null,q(b.lookups.channelPrograms,u=>(t(),s("option",{value:u.id},v(u.name),9,s1))),256))],8,t1),[[ue,b.item.relativeProgramId]]),g[15]||(g[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",o1,[e("div",a1,[L(e("input",{"onUpdate:modelValue":g[2]||(g[2]=u=>b.item.name=u),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,b.item.name]]),g[16]||(g[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",l1,[(t(!0),s(A,null,q(o(y).item.name.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",n1,[e("div",r1,[L(e("input",{"onUpdate:modelValue":g[3]||(g[3]=u=>b.item.dateScheduledStart=u),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[J,b.item.dateScheduledStart]]),g[17]||(g[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(y).item.dateScheduledStart.$error?(t(),s("div",i1,[(t(!0),s(A,null,q(o(y).item.dateScheduledStart.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])])]),e("div",d1,[e("div",u1,[e("div",c1,[L(e("select",{"onUpdate:modelValue":g[4]||(g[4]=u=>b.item.sourceLocationId=u),onChange:g[5]||(g[5]=u=>n(b.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(A,null,q(b.lookups.sourceLocations,u=>(t(),s("option",{value:u.id},v(u.name),9,m1))),256))],544),[[ue,b.item.sourceLocationId]]),g[18]||(g[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(y).item.sourceLocationId.$error?(t(),s("div",f1,[(t(!0),s(A,null,q(o(y).item.sourceLocationId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",p1,[e("div",v1,[L(e("select",{"onUpdate:modelValue":g[6]||(g[6]=u=>b.item.vodSource=u),onChange:g[7]||(g[7]=u=>Z()),class:"form-select",id:"vodSourceId"},[(t(!0),s(A,null,q(b.lookups.vodSources,u=>(t(),s("option",{value:u},v(u.name),9,g1))),256))],544),[[ue,b.item.vodSource]]),g[19]||(g[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(y).item.vodSourceId.$error?(t(),s("div",b1,[(t(!0),s(A,null,q(o(y).item.vodSourceId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",y1,[e("div",$1,[e("div",w1,[L(e("input",{"onUpdate:modelValue":g[8]||(g[8]=u=>b.item.startOffsetMillis=u),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[J,b.item.startOffsetMillis]]),g[20]||(g[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),b.item.startOffsetMillis>0?(t(),s("span",h1,v(o(D).moment.utc(b.item.startOffsetMillis).format("HH:mm:ss")),1)):U("",!0)]),b.item.startOffsetMillis>0&&b.item.startOffsetMillis<3e4?(t(),s("div",k1,g[21]||(g[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):U("",!0),b.item.startOffsetMillis>b.item.endOffsetMillis&&b.item.endOffsetMillis>0?(t(),s("div",_1,g[22]||(g[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):U("",!0),b.item.vodSource&&b.item.startOffsetMillis>b.item.vodSource.durationInMillis?(t(),s("div",S1,g[23]||(g[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):U("",!0),o(y).item.startOffsetMillis.$error?(t(),s("div",T1,[(t(!0),s(A,null,q(o(y).item.startOffsetMillis.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)]),e("div",M1,[e("div",I1,[e("div",C1,[L(e("input",{"onUpdate:modelValue":g[9]||(g[9]=u=>b.item.endOffsetMillis=u),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[J,b.item.endOffsetMillis]]),g[24]||(g[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),b.item.endOffsetMillis>0?(t(),s("span",x1,v(o(D).moment.utc(b.item.endOffsetMillis).format("HH:mm:ss")),1)):U("",!0)]),b.item.endOffsetMillis>0&&b.item.endOffsetMillis<3e4?(t(),s("div",V1,g[25]||(g[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):U("",!0),b.item.vodSource&&b.item.endOffsetMillis>b.item.vodSource.durationInMillis?(t(),s("div",P1,g[26]||(g[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):U("",!0),o(y).item.endOffsetMillis.$error?(t(),s("div",O1,[(t(!0),s(A,null,q(o(y).item.endOffsetMillis.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),g[30]||(g[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[g[27]||(g[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:C,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",A1,[e("table",U1,[g[29]||(g[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(A,null,q(b.item.adBreaks,(u,H)=>(t(),s("tr",null,[e("td",null,v(H+1),1),e("td",null,[e("div",D1,[L(e("input",{"onUpdate:modelValue":se=>u.offsetMillis=se,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,H1),[[J,u.offsetMillis]]),u.offsetMillis>0?(t(),s("span",L1,v(o(D).moment.utc(u.offsetMillis).format("HH:mm:ss")),1)):U("",!0)])]),e("td",null,[L(e("select",{"onUpdate:modelValue":se=>u.sourceLocationId=se,onChange:g[10]||(g[10]=se=>l(b.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(A,null,q(b.lookups.adBreakSourceLocations,se=>(t(),s("option",{value:se.id},v(se.name),9,q1))),256))],40,E1),[[ue,u.sourceLocationId]])]),e("td",null,[L(e("select",{"onUpdate:modelValue":se=>u.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(A,null,q(b.lookups.adBreakVodSources,se=>(t(),s("option",{value:se.id},v(se.name),9,N1))),256))],8,B1),[[ue,u.vodSourceId]])]),e("td",null,[e("button",{onClick:se=>m(H),class:"btn btn-outline-warning"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,R1)])]))),256))])])])])])]),e("div",F1,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:g[11]||(g[11]=u=>_()),class:"btn btn-primary",type:"button"},g[31]||(g[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,z1),g[32]||(g[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Rg))}},Y1=["id"],j1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},W1={class:"modal-content"},K1={class:"modal-header"},J1={class:"modal-title"},Q1={class:"modal-body"},X1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Z1=["innerHTML"],eb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},tb={class:"container"},sb={class:"col"},ob={class:"form-floating mb-2"},ab={class:"col"},lb={class:"form-floating mb-2"},nb={key:0,class:"d-block invalid-feedback"},rb={class:"col"},ib={class:"form-floating mb-2 d-none"},db={key:0,class:"d-block invalid-feedback"},ub={class:"col"},cb={class:"form-floating mb-2"},mb={key:0,class:"d-block invalid-feedback"},fb={class:"modal-footer"},pb=["disabled"],vb={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),K=k,X=re(),d=re("modalAddPlaybackConfiguration"),b=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),j={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},y=$e(j,b);de(async()=>{y.value.$reset()});const S=async(T,i)=>{X.value=T;const n=b;G.value.clear(),N.value="";const a=i;let l=a.lastIndexOf("/");const $=a.substring(0,l);let C=a.substring(l+1);l=C.lastIndexOf("."),C=C.substring(0,l)+"_ADCAMPAIGN_",n.item={name:C,originalVideoContentSourceUrl:i,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},y.value.$reset();var m=document.getElementById(d.value),Z=ke.getOrCreateInstance(m);Z.show()},c=async()=>{var T=document.getElementById(d.value),i=ke.getOrCreateInstance(T);i.hide(),K("refresh")},_=async()=>{const T=b;if(R.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const n=T.item;n.channelOutputId=X.value,await M.put("/api/v1/channelOutputs/playback/",n).then(a=>{p.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await c()}catch(n){N.value=D.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:S,close:c}),(T,i)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",j1,[e("div",W1,[e("div",K1,[e("h5",J1,[i[6]||(i[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=n=>c()),"aria-label":"Close"})]),e("div",Q1,[o(N)?(t(),s("div",X1,[i[7]||(i[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Z1)])):U("",!0),o(G).size>0?(t(),s("div",eb,[i[8]||(i[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),n=>(t(),s("li",null,v(n),1))),256))])])):U("",!0),e("div",tb,[e("div",sb,[e("div",ob,[L(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=n=>b.item.originalVideoContentSourceUrl=n),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[J,b.item.originalVideoContentSourceUrl]]),i[9]||(i[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",ab,[e("div",lb,[L(e("input",{"onUpdate:modelValue":i[2]||(i[2]=n=>b.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[J,b.item.name]]),i[10]||(i[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(y).item.name.$error?(t(),s("div",nb,[(t(!0),s(A,null,q(o(y).item.name.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",rb,[e("div",ib,[L(e("input",{"onUpdate:modelValue":i[3]||(i[3]=n=>b.item.videoContentSourceUrl=n),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[J,b.item.videoContentSourceUrl]]),i[11]||(i[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),i[12]||(i[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(y).item.videoContentSourceUrl.$error?(t(),s("div",db,[(t(!0),s(A,null,q(o(y).item.videoContentSourceUrl.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",ub,[e("div",cb,[L(e("textarea",{"onUpdate:modelValue":i[4]||(i[4]=n=>b.item.adDecisionServerUrl=n),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[J,b.item.adDecisionServerUrl]]),i[13]||(i[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(y).item.adDecisionServerUrl.$error?(t(),s("div",mb,[(t(!0),s(A,null,q(o(y).item.adDecisionServerUrl.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0),i[14]||(i[14]=Ge('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",fb,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:i[5]||(i[5]=n=>_()),class:"btn btn-primary",type:"button"},i[15]||(i[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pb),i[16]||(i[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Y1))}},gb=["id"],bb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},yb={class:"modal-content"},$b={class:"modal-header"},wb={class:"modal-title"},hb={class:"modal-body"},kb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_b=["innerHTML"],Sb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Tb={class:"container"},Mb={class:"col"},Ib={class:"form-floating mb-2"},Cb=["value"],xb={key:0,class:"d-block invalid-feedback"},Vb={class:"col"},Pb={class:"form-floating mb-2"},Ob={key:0,class:"d-block invalid-feedback"},Ab={class:"col"},Ub={class:"form-floating mb-2"},Db={key:0,class:"d-block invalid-feedback"},Hb={class:"modal-footer"},Lb=["disabled"],Eb={__name:"_addChannelOutput",emits:["refresh"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),K=k,X=re(),d=re("modalAddChannelOutput"),b=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),j={item:{sourceGroupId:{required:te.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},manifestName:{required:te.withMessage("Manifest Name is required.",oe),$autoDirty:!0,$lazy:!0},outputType:{required:te.withMessage("Output Type is required.",oe),$autoDirty:!0,$lazy:!0}}},y=$e(j,b);de(async()=>{y.value.$reset()});const S=async()=>{await c()},c=async()=>{try{await M.get("/api/v1/sourceGroups/lookup/").then(a=>{b.lookups.sourceGroups=a.data,b.lookups.sourceGroups.length===1&&(b.item.sourceGroupId=b.lookups.sourceGroups[0].id)})}catch(n){N.value=D.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},_=async n=>{X.value=n;const a=b;G.value.clear(),N.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await S(),y.value.$reset();var l=document.getElementById(d.value),$=ke.getOrCreateInstance(l);$.show()},T=async()=>{var n=document.getElementById(d.value),a=ke.getOrCreateInstance(n);a.hide(),K("refresh")},i=async()=>{const n=b;if(R.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const l=n.item;l.channelId=X.value,await M.post("/api/v1/channelOutputs",l).then($=>{p.success("Add Channel Output","Channel output added.")}),await T()}catch(l){N.value=D.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:_,close:T}),(n,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",bb,[e("div",yb,[e("div",$b,[e("h5",wb,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",hb,[o(N)?(t(),s("div",kb,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,_b)])):U("",!0),o(G).size>0?(t(),s("div",Sb,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),l=>(t(),s("li",null,v(l),1))),256))])])):U("",!0),e("div",Tb,[e("div",Mb,[e("div",Ib,[L(e("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>b.item.sourceGroupId=l),class:"form-select",id:"sourceGroupId"},[(t(!0),s(A,null,q(b.lookups.sourceGroups,l=>(t(),s("option",{value:l.id},v(l.name),9,Cb))),256))],512),[[ue,b.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(y).item.sourceGroupId.$error?(t(),s("div",xb,[(t(!0),s(A,null,q(o(y).item.sourceGroupId.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):U("",!0)])]),e("div",Vb,[e("div",Pb,[L(e("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>b.item.outputType=l),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,b.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(y).item.outputType.$error?(t(),s("div",Ob,[(t(!0),s(A,null,q(o(y).item.outputType.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):U("",!0)])]),e("div",Ab,[e("div",Ub,[L(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>b.item.manifestName=l),class:"form-control",id:"manifestName"},null,512),[[J,b.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(y).item.manifestName.$error?(t(),s("div",Db,[(t(!0),s(A,null,q(o(y).item.manifestName.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):U("",!0)])])])]),e("div",Hb,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:a[3]||(a[3]=l=>i()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Lb),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,gb))}},qb=["id"],Bb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Nb={class:"modal-content"},Rb={class:"modal-header"},Fb={class:"modal-title"},zb={class:"modal-body"},Gb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Yb=["innerHTML"],jb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Wb={class:"container"},Kb={class:"col"},Jb={class:"form-floating mb-2"},Qb=["value"],Xb={key:0,class:"d-block invalid-feedback"},Zb={class:"col"},ey={class:"form-floating mb-2"},ty=["value"],sy={key:0,class:"d-block invalid-feedback"},oy={class:"col"},ay={class:"card h-100"},ly=["id"],ny={class:"modal-footer"},ry=["disabled"],iy={__name:"_editFillerSlate",emits:["refresh"],setup(r,{expose:f,emit:k}){const{appTitle:x,pageTitle:h,busy:R,isDirty:I,validations:G,infoMessage:F,warningMessage:V,errorMessage:N,router:W,axios:M,utils:D,toasts:p,closeWithReturnUrl:O,security:w}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),K=k,X=re("modalEditFillerSlate"),d=fe({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),b={item:{channelId:{required:te.withMessage("channelId is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0}}},j=$e(b,d);de(async()=>{j.value.$reset()}),Be(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const y=async()=>{await S()},S=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(C=>{d.lookups.sourceLocations=C.data}),d.item.sourceLocationId&&await c(d.item.sourceLocationId)}catch($){N.value=D.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},c=async $=>{try{let C=`/api/v1/vodSources/lookup/source-Location/${$}/?type=2`;await M.get(C).then(m=>{d.lookups.vodSources=m.data})}catch(C){N.value=D.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}},_=async($,C,m)=>{const Z=d;G.value.clear(),N.value="",Z.lookups={sourceLocations:[],vodSources:[]},Z.item={channelId:$,sourceLocationId:C,vodSourceId:m},await y(),d.item.vodSourceId&&await l(d.item.vodSourceId),j.value.$reset();var Q=document.getElementById(X.value),g=ke.getOrCreateInstance(Q);g.show()},T=async()=>{var $=document.getElementById(X.value),C=ke.getOrCreateInstance($);C.hide(),d.hls&&(d.hls.stopLoad(),d.hls.destroy()),K("refresh")},i=async()=>{const $=d;if(R.value)return;if(!await j.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const m=$.item;await M.put("/api/v1/channels/filler-slate",m).then(Z=>{p.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await T()}catch(m){N.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{R.value=!1}},n=async()=>{d.item.vodSourceId=null,await c(d.item.sourceLocationId)},a=async()=>{await l(d.item.vodSourceId)},l=async $=>{try{let C=`/api/v1/vodSources/${$}/hls`;const m=await M.get(C).then(Q=>Q.data);if(d.hls){d.hls.loadSource(m);return}const Z=document.getElementById(`video-${d.item.channelId}`);d.hls=D.createHlsStream(Z,m)}catch(C){N.value=D.getErrorMessageAsHtml(C),window.scrollTo(0,0)}finally{}};return f({open:_,close:T}),($,C)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Bb,[e("div",Nb,[e("div",Rb,[e("h5",Fb,[C[6]||(C[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:C[0]||(C[0]=m=>T()),"aria-label":"Close"})]),e("div",zb,[o(N)?(t(),s("div",Gb,[C[7]||(C[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Yb)])):U("",!0),o(G).size>0?(t(),s("div",jb,[C[8]||(C[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(o(G).values(),m=>(t(),s("li",null,v(m),1))),256))])])):U("",!0),e("div",Wb,[e("div",Kb,[e("div",Jb,[L(e("select",{"onUpdate:modelValue":C[1]||(C[1]=m=>d.item.sourceLocationId=m),onChange:C[2]||(C[2]=m=>n()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(A,null,q(d.lookups.sourceLocations,m=>(t(),s("option",{value:m.id},v(m.name),9,Qb))),256))],544),[[ue,d.item.sourceLocationId]]),C[9]||(C[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(j).item.sourceLocationId.$error?(t(),s("div",Xb,[(t(!0),s(A,null,q(o(j).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",Zb,[e("div",ey,[L(e("select",{"onUpdate:modelValue":C[3]||(C[3]=m=>d.item.vodSourceId=m),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(A,null,q(d.lookups.vodSources,m=>(t(),s("option",{value:m.id},v(m.name),9,ty))),256))],544),[[ue,d.item.vodSourceId]]),C[10]||(C[10]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(j).item.vodSourceId.$error?(t(),s("div",sy,[(t(!0),s(A,null,q(o(j).item.vodSourceId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",oy,[e("div",ay,[e("video",{id:`video-${d.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,ly)])])])]),e("div",ny,[e("button",{disabled:o(j).$dirty&&o(j).$invalid,onClick:C[4]||(C[4]=m=>i()),class:"btn btn-primary",type:"button"},C[11]||(C[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ry),e("button",{onClick:C[5]||(C[5]=m=>T()),class:"btn btn-secondary ms-1"},C[12]||(C[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,qb))}},dy={key:0,class:"dropdown"},uy={key:0,class:"fas fa-fw fa-play"},cy={key:1,class:"fas fa-fw fa-stop"},my={class:"dropdown-menu"},fy={key:0},py={key:1},vy={key:0},gy={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},by={class:"nav-item",role:"presentation"},yy={class:"nav-item",role:"presentation"},$y={class:"nav-item",role:"presentation"},wy={class:"nav-item",role:"presentation"},hy={class:"nav-item",role:"presentation"},ky={class:"tab-content",id:"myTabContent"},_y={class:"mt-2"},Sy={class:"row row-cols-1 row-cols-sm-3"},Ty={class:"col"},My={class:"form-floating mb-2"},Iy={class:"col"},Cy={class:"form-floating mb-2"},xy={class:"col"},Vy={class:"form-floating mb-2"},Py={class:"d-flex flex-row justify-content-start align-items-center"},Oy={key:0,class:"ms-2"},Ay={class:"row row-cols-sm-2 mt-1"},Uy={class:"col"},Dy={class:"form-floating mb-2"},Hy={class:"col"},Ly={class:"form-floating mb-2"},Ey={class:"col mt-2"},qy={class:"form-floating mb-2"},By={class:"mt-2"},Ny={class:"d-flex flex-row justify-content-start align-items-center"},Ry={class:"ms-2"},Fy={key:0,class:"alert bg-warning mt-2"},zy={class:"table-responsive border mt-1"},Gy={class:"table table-bordered1 mb-0"},Yy={class:"badge bg-info"},jy={key:0,class:"text-wrap"},Wy={key:1,class:"text-warning"},Ky={key:0,class:"text-end"},Jy={key:1,class:"text-end"},Qy=["onClick"],Xy={key:0},Zy={colspan:"999"},e$={class:"d-flex flex-row justify-content-start align-items-center"},t$={class:"ms-2"},s$={if:"item.playbackUrl"},o$=["onClick"],a$={key:0,class:"table-responsive border mt-2"},l$={class:"table mb-0 table-small"},n$=["onUpdate:modelValue"],r$={class:"text-end"},i$=["onClick"],d$=["onClick"],u$={class:"mt-2"},c$={class:"table-responsive border"},m$={class:"table mb-0 table-sm caption-top"},f$={key:0,class:"fas fa-fw fa-check-circle text-success"},p$={class:"badge bg-info"},v$={class:"badge bg-secondary"},g$={key:0,class:""},b$={key:1,class:"mt-1"},y$={class:"mt-1"},$$={class:"p-0 m-0"},w$={key:0,class:"table-responsive border1 small"},h$={class:"table table-sm table-borderless mb-0"},k$={class:"text-end"},_$={class:"text-end"},S$={class:"text-end"},T$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},M$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},I$={class:"text-end"},C$={class:"dropdown position-static"},x$={class:"dropdown-menu"},V$=["onClick"],P$={key:0},O$=["onClick"],A$=["onClick"],U$=["onClick"],D$={class:"text-end mt-2 d-none"},H$={class:"mt-2"},L$={class:"text-end mb-2"},E$={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},q$={class:"col"},B$={class:"card shadow-sm"},N$=["id"],R$={class:"p-1"},F$={class:"card-title1 text-center"},z$={class:"col"},G$={class:"card shadow-sm"},Y$=["id"],j$={class:"p-1"},W$={class:"card-title1 text-center text-truncate"},K$={class:"small1"},J$={class:"mt-2"},Q$={key:0,class:"fas fa-fw fa-check-circle text-success"},X$={key:1,class:"fas fa-fw fa-times-circle text-warning"},Z$={key:0,class:"fas fa-fw fa-check-circle text-success"},ew={key:1,class:"fas fa-fw fa-times-circle text-warning"},tw={key:0,class:"fas fa-fw fa-check-circle text-success"},sw={key:1,class:"fas fa-fw fa-times-circle text-warning"},ow={key:0,class:"fas fa-fw fa-check text-warning"},aw={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},lw={key:0,class:"fas fa-fw fa-check-circle text-success"},nw={key:1,class:"fas fa-fw fa-times-circle text-warning"},rw={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(r){const f=r,{appTitle:k,pageTitle:x,busy:h,isDirty:R,validations:I,infoMessage:G,warningMessage:F,errorMessage:V,router:N,axios:W,utils:M,toasts:D,close:p,closeWithReturnUrl:O,generateReturnUrl:w,security:K}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null}),b=re(null),j=re(null),y=re(null),S=re(null),c=re(null),_=re(),T=he(()=>d.item&&d.item.state==="RUNNING");de(async()=>{await l();const ie=M.getPageTab("channel")||"information-tab";i(ie)}),Be(()=>{Ee()});const i=ie=>{M.setPageTab("channel",ie),_.value=ie,ie==="preview-tab"&&setTimeout(()=>{var P=document.getElementById("masonry");new Je(P,{})},2e3)},n=ie=>ie===_.value?"active":"",a=ie=>ie===_.value?"show active":"",l=async()=>{const ie=d;if(Ee(),!h.value)try{h.value=!0,V.value="",d.item=null;const P=`/api/v1/channels/${f.id}/`;await W.get(P).then(me=>{ie.item=me.data,ie.item.outputs.forEach(Pe=>{Pe.playbackConfigurations.forEach(ae=>{if(Pe.playbackUrl){const Ce=Pe.playbackUrl,be=Ce.lastIndexOf("/"),Ne=Ce.substring(0,be),qe=Ce.substring(be+1),Ke=ae.hlsConfigurationManifestEndpointPrefix;Ke&&(ae.hlsPlaylist=Ke+qe)}})})})}catch(P){V.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{h.value=!1}},$=async()=>{await l()},C=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!h.value){V.value=null;try{h.value=!0,await W.post(`/api/v1/channels/${f.id}/publish/`).then(P=>{D.success("Publish Channel","Channel was published.")}),h.value=!1,await $()}catch(P){V.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{h.value=!1}}},m=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!h.value){V.value=null;try{h.value=!0,await W.delete(`/api/v1/channels/${f.id}/unpublish/`).then(P=>{D.warning("Remove Channel","Channel was removed.")}),h.value=!1,await $()}catch(P){V.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{h.value=!1}}},Z=()=>{b.value.open(f.id)},Q=ie=>{ie.outputType==="HLS"&&j.value.open(ie.channelOutputId,ie.playbackUrl)},g=()=>{y.value.open(f.id)},u=ie=>{S.value.open(ie)},H=(ie,P)=>{c.value.open(f.id,ie,P)},se=async ie=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!h.value){V.value=null;try{h.value=!0,await W.delete(`/api/v1/programs/${ie}/`).then(me=>{D.success("Delete Program","Program was deleted..",{async onClose(){}})}),h.value=!1,await $()}catch(me){V.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{h.value=!1}}},ne=async ie=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!h.value){V.value=null;try{h.value=!0,await W.delete(`/api/v1/channelOutputs/${ie}/`).then(me=>{D.success("Delete Channel Output","Channel output was deleted..")}),h.value=!1,await $()}catch(me){V.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{h.value=!1}}},Y=async ie=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!h.value){V.value=null;try{h.value=!0,await W.post(`/api/v1/programs/${ie}/publish/`).then(me=>{D.success("Publish Program","Program was published..",{async onClose(){}})}),h.value=!1,await $()}catch(me){V.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{h.value=!1}}},we=async ie=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!h.value){V.value=null;try{h.value=!0,await W.delete(`/api/v1/programs/${ie}/unpublish/`).then(me=>{D.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),h.value=!1,await $()}catch(me){V.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{h.value=!1}}},ge=async ie=>{if(!h.value){V.value=null;try{h.value=!0,await W.put(`/api/v1/channels/${f.id}/change-state/${ie}`).then(P=>{D.success("Update Channel state","Change state was updated")}),h.value=!1,ie==="STOPPED"&&_.value==="preview-tab"&&(Ee(),i("information-tab")),await $()}catch(P){V.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{h.value=!1}}},Le=async ie=>{if(!h.value)try{h.value=!0,V.value="",await W.post(`/api/v1/channelOutputs/${ie}/playback/publish/`).then(P=>{D.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),h.value=!1,await $()}catch(P){V.value=M.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{h.value=!1}},rt=async ie=>{if(confirm("Do you want to remove this Playback Configuration?")&&!h.value)try{h.value=!0,V.value="",await W.delete(`/api/v1/channelOutputs/${ie}/playback/`).then(me=>{D.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),h.value=!1,await $()}catch(me){V.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{h.value=!1}},it=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ie=d.item.outputs;Ee(),ie.forEach(P=>{var me=document.getElementById(`video-${P.channelOutputId}`);P.hls&&P.hls.destroy(),P.hls=M.createHlsStream(me,P.playbackUrl,"Main playlist started."),me.play(),P.playbackConfigurations.forEach(Ve=>{if(Ve.hls&&Ve.hls.destroy(),Ve.arn){var Pe=document.getElementById(`video-${Ve.channelOutputPlaybackConfigurationId}`);try{Ve.hls=M.createHlsStream(Pe,Ve.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Pe.play()}catch(ae){D.error("Failed Stream SSAI Playlist",ae)}}})}),setTimeout(()=>{var P=document.getElementById("masonry");new Je(P,{})},2e3)}},Ee=()=>{d.item&&d.item.outputs&&d.item.outputs.forEach(P=>{P.hls&&(P.hls.detachMedia(),P.hls.destroy(),delete P.hls),P.playbackConfigurations.forEach(me=>{me.hls&&(me.hls.detachMedia(),me.hls.destroy(),delete me.hls)})})};return(ie,P)=>{const me=ee("router-link"),Ve=ee("PageHeader"),Pe=ee("PageBody");return t(),ce(pe,null,{default:E(()=>[e("div",null,[B(Ve,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(x)},{default:E(()=>[d.item?(t(),s("div",dy,[e("button",{class:le([[T.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[T.value?(t(),s("span",uy)):(t(),s("span",cy)),z(" "+v(d.item.state),1)],2),e("ul",my,[d.item.arn?(t(),s("li",fy,[T.value?(t(),s("button",{key:0,onClick:P[0]||(P[0]=ae=>ge("STOPPED")),class:"dropdown-item"},P[21]||(P[21]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),z("Stop ")]))):(t(),s("button",{key:1,onClick:P[1]||(P[1]=ae=>ge("RUNNING")),class:"dropdown-item"},P[22]||(P[22]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),z("Start ")])))])):U("",!0),T.value?U("",!0):(t(),s("li",py,[d.item.arn?(t(),s("button",{key:0,onClick:P[2]||(P[2]=ae=>m()),class:"dropdown-item"},P[23]||(P[23]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),z("Unpublish ")]))):(t(),s("button",{key:1,onClick:P[3]||(P[3]=ae=>C()),class:"dropdown-item"},P[24]||(P[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),z("Publish ")])))])),d.item.arn?(t(),s(A,{key:2},[P[26]||(P[26]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:P[4]||(P[4]=ae=>C()),class:"dropdown-item"},P[25]||(P[25]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),z("Republish ")]))])],64)):U("",!0)])])):U("",!0),B(me,{to:`${r.urlSchedulePrograms}/${r.id}`,class:"ms-2 btn btn-primary"},{default:E(()=>P[27]||(P[27]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:P[5]||(P[5]=ae=>$()),class:"ms-2 btn btn-secondary"},P[28]||(P[28]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:P[6]||(P[6]=ae=>o(O)(f.urlMain)),class:"btn btn-secondary ms-1"},P[29]||(P[29]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(Pe,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",vy,[e("ul",gy,[e("li",by,[e("button",{onClick:P[7]||(P[7]=ae=>i("information-tab")),class:le([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},P[30]||(P[30]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),z("Information ")]),2)]),e("li",yy,[e("button",{onClick:P[8]||(P[8]=ae=>i("outputPlayback-tab")),class:le([n("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},P[31]||(P[31]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),z("Output/Playback ")]),2)]),e("li",$y,[e("button",{onClick:P[9]||(P[9]=ae=>i("programs-tab")),class:le([n("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},P[32]||(P[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),z("Programs ")]),2)]),e("li",wy,[e("button",{onClick:P[10]||(P[10]=ae=>i("preview-tab")),class:le([[T.value?"":"disabled",n("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},P[33]||(P[33]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),z("Preview ")]),2)]),e("li",hy,[e("button",{onClick:P[11]||(P[11]=ae=>i("checklist-tab")),class:le([n("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},P[34]||(P[34]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),z("Checklist ")]),2)])]),e("div",ky,[e("div",{class:le([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",_y,[e("div",Sy,[e("div",Ty,[e("div",My,[L(e("input",{"onUpdate:modelValue":P[12]||(P[12]=ae=>d.item.name=ae),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[J,d.item.name]]),P[35]||(P[35]=e("label",{for:"name"},"Name",-1))])]),e("div",Iy,[e("div",Cy,[L(e("input",{"onUpdate:modelValue":P[13]||(P[13]=ae=>d.item.playbackMode=ae),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[J,d.item.playbackMode]]),P[36]||(P[36]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",xy,[e("div",Vy,[L(e("input",{"onUpdate:modelValue":P[14]||(P[14]=ae=>d.item.tier=ae),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[J,d.item.tier]]),P[37]||(P[37]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",Py,[P[39]||(P[39]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),T.value?U("",!0):(t(),s("div",Oy,[e("button",{onClick:P[15]||(P[15]=ae=>H(d.item.fillerSlateSourceLocation.sourceLocationId,d.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},P[38]||(P[38]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",Ay,[e("div",Uy,[e("div",Dy,[B(me,{to:`${r.urlViewSourceLocation}/${d.item.fillerSlateSourceLocation.sourceLocationId}/${o(w)()}`,class:le([[d.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:E(()=>[z(v(d.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),P[40]||(P[40]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",Hy,[e("div",Ly,[B(me,{to:`${r.urlViewVodSource}/${d.item.fillerSlateVodSource.vodSourceId}/${o(w)()}`,class:le([[d.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:E(()=>[z(v(d.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),P[41]||(P[41]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",Ey,[e("div",qy,[L(e("textarea",{"onUpdate:modelValue":P[16]||(P[16]=ae=>d.item.policy=ae),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",readonly:""},null,512),[[J,d.item.policy]]),P[42]||(P[42]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:le([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",By,[e("div",null,[e("div",Ny,[P[44]||(P[44]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",Ry,[e("button",{onClick:P[17]||(P[17]=ae=>g()),class:"btn btn-outline-primary btn-sm"},P[43]||(P[43]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),d.item.outputs.length<=0?(t(),s("div",Fy,P[45]||(P[45]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),z("Channel Output is required ")]))):U("",!0),e("div",zy,[e("table",Gy,[P[53]||(P[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.outputs,(ae,Ce)=>(t(),s(A,{key:ae.channelOutputId},[e("tr",null,[e("td",null,v(Ce+1),1),e("td",null,[e("div",null,v(ae.manifestName),1),e("div",null,[e("span",Yy,v(ae.outputType),1)])]),e("td",null,[e("div",null,[B(me,{to:`${r.urlViewSourceGroup}/${ae.sourceGroupId}/${o(w)()}`},{default:E(()=>[z(v(ae.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[ae.playbackUrl?(t(),s("div",jy,v(ae.playbackUrl),1)):(t(),s("div",Wy,P[46]||(P[46]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),z("Publish channel to get the playback url ")])))]),T.value?(t(),s("td",Ky)):(t(),s("td",Jy,[e("button",{onClick:be=>ne(ae.channelOutputId),class:"btn btn-outline-warning btn-sm"},P[47]||(P[47]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Qy)]))]),ae.playbackUrl?(t(),s("tr",Xy,[P[52]||(P[52]=e("td",null,null,-1)),e("td",Zy,[e("div",e$,[P[49]||(P[49]=e("h5",null,[z("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",t$,[e("div",s$,[e("button",{onClick:be=>Q(ae),class:"btn btn-outline-primary btn-sm"},P[48]||(P[48]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,o$)])])]),ae.playbackConfigurations.length>0?(t(),s("div",a$,[e("table",l$,[e("tbody",null,[(t(!0),s(A,null,q(ae.playbackConfigurations,(be,Ne)=>(t(),s("tr",null,[e("td",null,v(Ne+1),1),e("td",null,[z(v(be.name)+" ",1),e("div",null,[L(e("textarea",{"onUpdate:modelValue":qe=>be.adDecisionServerUrl=qe,class:"form-control",style:{"max-height":"4rem"},readonly:""},null,8,n$),[[J,be.adDecisionServerUrl]])])]),e("td",r$,[be.arn?U("",!0):(t(),s("button",{key:0,onClick:qe=>Le(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},P[50]||(P[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,i$)),e("button",{onClick:qe=>rt(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},P[51]||(P[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,d$)])]))),256))])])])):U("",!0)])])):U("",!0)],64))),128))]),_:1},512),[[Te,d.item.outputs.length>0]])])])])])],2),e("div",{class:le([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",u$,[e("div",c$,[e("table",m$,[P[68]||(P[68]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),L(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(A,null,q(d.item.programs,(ae,Ce)=>(t(),s("tr",{key:ae.programId},[e("td",null,v(Ce+1),1),e("td",null,[ae.arn?(t(),s("span",f$)):U("",!0),z(" "+v(ae.name)+" ",1),P[57]||(P[57]=e("br",null,null,-1)),e("div",null,[e("span",p$,v(o(M).moment(ae.dateScheduledStart).fromNow()),1),e("div",null,[P[54]||(P[54]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),z(v(o(M).moment(ae.dateScheduledStart).format("lll")),1)]),e("div",null,[P[55]||(P[55]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),z(v(o(M).moment(ae.dateScheduledEnd).format("llll")),1)])]),ae.relativeProgram?(t(),s(A,{key:1},[P[56]||(P[56]=z(" Relative Program: ")),e("span",v$,v(ae.relativeProgram.name),1)],64)):U("",!0)]),e("td",null,[ae.totalProgramTemplateDurationInMillis!==ae.durationInMillis?(t(),s("div",g$,[P[58]||(P[58]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),z(" "+v(o(M).moment.utc(ae.startOffsetMillis).format("HH:mm:ss"))+" - "+v(o(M).moment.utc(ae.endOffsetMillis).format("HH:mm:ss")),1)])):U("",!0),ae.adBreaksDurationInMillis?(t(),s("div",b$,[P[59]||(P[59]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),z(" Ads: "+v(o(M).moment.utc(ae.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):U("",!0),e("div",y$,[P[60]||(P[60]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),z(" Total: "+v(o(M).moment.utc(ae.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[B(me,{to:`${r.urlViewVideo}/${ae.vodSource.video.videoId}/${o(w)()}`},{default:E(()=>[z(v(ae.vodSource.video.title),1)]),_:2},1032,["to"]),P[61]||(P[61]=e("br",null,null,-1)),z(" ("+v(o(M).moment.utc(ae.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",$$,[ae.adBreaks.length?(t(),s("div",w$,[e("table",h$,[e("tbody",null,[P[62]||(P[62]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"VOD")],-1)),(t(!0),s(A,null,q(ae.adBreaks,(be,Ne)=>(t(),s("tr",null,[e("td",k$,v(Ne+1),1),e("td",_$,v(o(M).moment.utc(be.offsetMillis).format("HH:mm:ss")),1),e("td",S$,v(o(M).moment.utc(be.durationInMillis).format("HH:mm:ss")),1),e("td",null,[B(me,{to:`${r.urlViewVodSource}/${be.vodSource.vodSourceId}/${o(w)()}`},{default:E(()=>[be.vodSource.arn?(t(),s("span",T$)):(t(),s("span",M$)),z(" "+v(be.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])):U("",!0)]),e("td",I$,[e("div",C$,[P[67]||(P[67]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",x$,[e("li",null,[e("button",{onClick:be=>u(ae.programId),class:"dropdown-item"},P[63]||(P[63]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),z("Edit ")]),8,V$)]),ae.arn?(t(),s("li",P$,[e("button",{onClick:be=>we(ae.programId),class:"dropdown-item"},P[64]||(P[64]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),z("Unpublish ")]),8,O$)])):(t(),s(A,{key:1},[e("li",null,[e("button",{onClick:be=>Y(ae.programId),class:"dropdown-item"},P[65]||(P[65]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),z("Publish ")]),8,A$)]),e("li",null,[e("button",{onClick:be=>se(ae.programId),class:"dropdown-item"},P[66]||(P[66]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),z("Remove ")]),8,U$)])],64))])])])]))),128))]),_:1},512),[[Te,d.item.programs.length>0]])])]),e("div",D$,[e("button",{onClick:P[18]||(P[18]=ae=>Z()),class:"btn btn-outline-primary"},P[69]||(P[69]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Program ")]))])])],2),T.value?(t(),s("div",{key:0,class:le([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",H$,[e("div",L$,[d.item.outputs[0].hls?(t(),s("button",{key:1,onClick:P[20]||(P[20]=ae=>Ee()),class:"btn btn-primary"},P[71]||(P[71]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:P[19]||(P[19]=ae=>it()),class:"btn btn-primary"},P[70]||(P[70]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",E$,[(t(!0),s(A,null,q(d.item.outputs,ae=>(t(),s(A,null,[e("div",q$,[e("div",B$,[e("video",{id:`video-${ae.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,N$),e("div",R$,[e("div",F$,v(ae.manifestName),1)])])]),(t(!0),s(A,null,q(ae.playbackConfigurations,(Ce,be)=>(t(),s("div",z$,[e("div",G$,[e("video",{id:`video-${Ce.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,Y$),e("div",j$,[e("div",W$,[z(" #"+v(be+1)+" ",1),e("span",K$,v(Ce.name),1)])])])]))),256))],64))),256))])])],2)):U("",!0),e("div",{class:le([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",J$,[P[77]||(P[77]=z(" Checklist ")),e("ul",null,[e("li",null,[d.item.fillerSlateSourceLocation.arn?(t(),s("span",Q$)):(t(),s("span",X$)),P[72]||(P[72]=z(" Filler Slate Source Location "))]),e("li",null,[d.item.fillerSlateVodSource.arn?(t(),s("span",Z$)):(t(),s("span",ew)),P[73]||(P[73]=z(" ni Filler Slate VOD Source "))]),e("li",null,[d.item.outputs.length>0?(t(),s("span",tw)):(t(),s("span",sw)),P[75]||(P[75]=z(" Outputs ")),e("ul",null,[e("li",null,[d.item.outputs.some(ae=>ae.playbackConfigurations.length>0)?(t(),s("span",ow)):(t(),s("span",aw)),P[74]||(P[74]=z(" Ad Insertion setup "))])])]),e("li",null,[d.item.programs.length>0?(t(),s("span",lw)):(t(),s("span",nw)),P[76]||(P[76]=z(" Programs "))])])])],2)])])):U("",!0)]),_:1},8,["errorMessage"]),B(G1,{ref_key:"modalAddProgram",ref:b,onRefresh:$},null,512),B(vb,{ref_key:"modalAddPlaybackConfiguration",ref:j,onRefresh:$},null,512),B(Eb,{ref_key:"modalAddChannelOutput",ref:y,onRefresh:$},null,512),B(lt,{ref_key:"modalEditProgram",ref:S,onOnClose:$},null,512),B(iy,{ref_key:"modalEditFillerSlate",ref:c,onRefresh:$},null,512)])]),_:1})}}},iw={path:"/",component:ca,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Ba},{path:"videos",children:[{path:"",component:_n},{path:"view/:id",component:ir,props:!0},{path:"add",component:hl},{path:"edit/:id",component:sn,props:!0}]},{path:"source-groups",children:[{path:"add",component:mr},{path:"edit/:id",component:Ur,props:!0},{path:"",component:Rr},{path:"view/:id",component:ai,props:!0}]},{path:"source-locations",children:[{path:"add",component:ui},{path:"edit/:id",component:fi,props:!0},{path:"",component:Si},{path:"view/:id",component:Gi,props:!0}]},{path:"vod-sources",children:[{path:"add",component:bd},{path:"edit/:id",component:zd,props:!0},{path:"",component:fu},{path:"view/:id",component:Yc,props:!0}]},{path:"channels",children:[{path:"add",component:Fp},{path:"edit/:id",component:Yp,props:!0},{path:"",component:sv},{path:"schedule-programs/:id",component:Ng,props:!0},{path:"view/:id",component:rw,props:!0}]},{path:"program-templates",children:[{path:"add",component:Em},{path:"edit/:id",component:Cf,props:!0},{path:"",component:qf},{path:"view/:id",component:$p,props:!0}]}]},nt=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{...iw}]}),dw={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const r=this,k=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();k.on("onNotificationCreated",function(x){let h=x.content;x.notificationEntityClassText==="Deposit"&&(h+="<br/>",h+=`<a href="${r.urlViewDeposit}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.notificationEntityClassText==="Withdraw"&&(h+="<br/>",h+=`<a href="${r.urlViewWithdraw}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.notificationEntityClassText==="ManualModeOfPayment"&&(h+="<br/>",h+=`<a href="${r.urlViewManualModeOfPayment}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.iconClass;let R="secondary";switch(x.notificationType){case 1:R="success";break;case 3:R="info";break;case 3:R="success";break;case 4:R="info";break;case 5:R="warning";break;case 6:R="error";break}r.$toast[R](x.subject,h,{timeOut:1e4});const I=x.subject,V={body:h,icon:"/img/192x102.png"};new Notification(I,V)}),k.on("jobUpdated",function(x){r.$bus.$emit("event:job-updated",x)}),await k.start().then(function(){}).catch(function(x){})}}};function uw(r,f,k,x,h,R){return t(),s("div")}const cw=Me(dw,[["render",uw],["__scopeId","data-v-5b4a9fa2"]]),mw={class:"navbar bg-dark bg-gradient shadow","data-bs-theme":"dark"},fw={class:"container"},pw={class:"col-sm"},vw={class:"navbar-brand mb-0"},gw={class:"col-sm-auto"},bw={class:"d-flex align-items-center justify-content-end text"},yw={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(r){return(f,k)=>(t(),ce(pe,null,{default:E(()=>[e("nav",mw,[e("div",fw,[e("div",pw,[Ae(f.$slots,"title",{},()=>[e("a",vw,[e("i",{class:le([r.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,v(r.pageTitle),1)])])]),e("div",gw,[e("div",bw,[Ae(f.$slots,"default")])])])])]),_:3}))}},$w={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ww=["innerHTML"],hw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kw={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(r){return(f,k)=>(t(),ce(pe,null,{default:E(()=>[Ae(f.$slots,"default",{},()=>[r.errorMessage?(t(),s("div",$w,[k[0]||(k[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:r.errorMessage},null,8,ww)])):U("",!0),r.vuelidate&&r.vuelidate.$error?(t(),s("div",hw,[k[1]||(k[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(A,null,q(r.vuelidate.$errors,x=>(t(),s("li",{key:x.$uid},[x.$validator==="$each"?(t(),s(A,{key:0},[z(" Check errors in '"+v(x.$property)+"' ",1)],64)):(t(),s(A,{key:1},[z(v(x.$message),1)],64))]))),128))])])):U("",!0)])]),_:3}))}},_w={class:"my-3 container-md container"},Sw={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(r){return(f,k)=>{const x=ee("PageMessages");return t(),ce(pe,null,{default:E(()=>[e("div",_w,[B(x,{errorMessage:r.errorMessage,vuelidate:r.vuelidate},null,8,["errorMessage","vuelidate"]),Ae(f.$slots,"default")])]),_:3})}}},Tw={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const r=this;r.busy||(document.activeElement&&document.activeElement.blur(),await r.search(1))},async moveFirst(){const r=this;if(r.busy)return;r.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await r.search(1))},async moveLast(){const r=this;if(r.busy)return;const f=r.filter;f.pageIndex!==f.totalPages&&(document.activeElement&&document.activeElement.blur(),await r.search(f.totalPages))},async move(r){const f=this;if(f.busy)return;const k=f.filter,x=k.pageIndex+r;x>=0&&x<=k.totalPages&&(document.activeElement&&document.activeElement.blur(),await f.search(x))}}},Mw={class:"mt-2"},Iw={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},Cw={key:0,class:"col-sm order-2 order-sm-1"},xw={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Vw={class:"me-1 fw-bold"},Pw={class:"fw-bold"},Ow={class:"ms-1"},Aw={class:"col-sm-auto ms-auto order-1 order-sm-2"},Uw={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Dw={key:0,class:"page-item"},Hw={key:1,class:"page-item"},Lw={key:2,class:"page-item"},Ew={class:"page-item active"},qw={class:"page-link"},Bw={key:3,class:"page-item"},Nw={key:4,class:"page-item"},Rw={key:5,class:"page-item"},Fw={key:1,class:"text-info font-weight-bold text-center"},zw={key:0},Gw={key:1};function Yw(r,f,k,x,h,R){return t(),s("div",Mw,[k.filter.items.length?(t(),s("div",Iw,[k.showPerPage?(t(),s("div",Cw,[e("div",xw,[e("div",null,[e("span",Vw,v(k.filter.totalCount),1),f[8]||(f[8]=z("records in ")),e("span",Pw,v(k.filter.totalPages),1),f[9]||(f[9]=z(" page(s) "))]),e("div",Ow,[L(e("select",{"onUpdate:modelValue":f[0]||(f[0]=I=>k.filter.pageSize=I),onChange:f[1]||(f[1]=(...I)=>R.changePagination&&R.changePagination(...I)),class:"form-select form-select-sm me-1"},f[10]||(f[10]=[Ge('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ue,k.filter.pageSize]])]),f[11]||(f[11]=e("div",{class:"ms-1"},"per page",-1))])])):U("",!0),e("div",Aw,[e("ul",Uw,[k.filter.pageIndex!==1?(t(),s("li",Dw,[e("button",{class:"page-link","aria-label":"Previous",onClick:f[2]||(f[2]=(...I)=>R.moveFirst&&R.moveFirst(...I))},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):U("",!0),k.filter.pageIndex>2?(t(),s("li",Hw,[e("button",{class:"page-link",onClick:f[3]||(f[3]=I=>R.move(-2))},v(k.filter.pageIndex-2),1)])):U("",!0),k.filter.pageIndex>1?(t(),s("li",Lw,[e("button",{class:"page-link",onClick:f[4]||(f[4]=I=>R.move(-1))},v(k.filter.pageIndex-1),1)])):U("",!0),e("li",Ew,[e("span",qw,v(k.filter.pageIndex),1)]),k.filter.pageIndex<k.filter.totalPages?(t(),s("li",Bw,[e("button",{class:"page-link",onClick:f[5]||(f[5]=I=>R.move(1))},v(k.filter.pageIndex+1),1)])):U("",!0),k.filter.pageIndex<k.filter.totalPages-1?(t(),s("li",Nw,[e("button",{class:"page-link",onClick:f[6]||(f[6]=I=>R.move(2))},v(k.filter.pageIndex+2),1)])):U("",!0),k.filter.pageIndex<k.filter.totalPages?(t(),s("li",Rw,[e("button",{class:"page-link","aria-label":"Next",onClick:f[7]||(f[7]=(...I)=>R.moveLast&&R.moveLast(...I))},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):U("",!0)])])])):(t(),s("div",Fw,[k.noRecords?(t(),s("div",zw,v(k.noRecords),1)):(t(),s("div",Gw,"No record(s) found."))]))])}const jw=Me(Tw,[["render",Yw]]),Ww={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let r=this;if(!r.enabled)return;let f=r.filter;f.sortField===r.field?f.sortOrder===0?f.sortField=null:f.sortOrder=f.sortOrder===0?1:0:(f.sortField=r.field,f.sortOrder=1),r.$emit("search")}}},Kw={class:"align-self-center"};function Jw(r,f,k,x,h,R){return t(),s("div",{onClick:f[0]||(f[0]=(...I)=>R.click&&R.click(...I)),class:"d-flex flex-row justify-content-start align-content-center",style:tt({cursor:k.enabled?"pointer":""})},[Ae(r.$slots,"default"),e("span",Kw,[k.showSort?(t(),s("span",{key:0,class:le([{"fa-sort text-gray-500":!R.currentSortField(),"fa-sort-up":R.currentSortField()&&R.sortUp(),"fa-sort-down":R.currentSortField()&&!R.sortUp()},"fas fa-fw mr-1"])},null,2)):U("",!0)])],4)}const Qw=Me(Ww,[["render",Jw]]),Xw={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(r){const f=this;f.setSelected(r),f.$emit("onSelectedRow",r)}}},Zw={class:"table-responsive m-0"},eh=["href"],th={key:1},sh=["onClick"],oh={class:"form-group row no-gutters"},ah={class:"col-5 col-form-label"},lh={class:"col align-self-center"},nh=["href"],rh={key:1};function ih(r,f,k,x,h,R){return t(),s("div",null,[e("div",Zw,[e("table",{class:le(["table table-hover d-none d-md-table card",k.tableCss])},[e("thead",null,[Ae(r.$slots,"header",{},()=>[f[0]||(f[0]=e("th",null,"#",-1)),(t(!0),s(A,null,q(k.header.columns,I=>(t(),s("th",null,v(I.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(A,null,q(k.items,(I,G)=>Ae(r.$slots,"table-row",{key:`row1-${I[k.header.key]}`,item:I,index:G},()=>[e("td",null,v(k.getRowNumber(G)),1),(t(!0),s(A,null,q(k.header.columns,F=>(t(),s("td",null,[F.href?(t(),s("a",{key:0,href:F.href(I[k.header.key]),class:"font-weight-bold"},v(I[F.field]),9,eh)):(t(),s("span",th,v(I[F.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:le(["d-block d-md-none",k.rowCss])},[(t(!0),s(A,null,q(k.items,(I,G)=>(t(),s("div",{key:`row2-${I[k.header.key]}`,onClick:F=>R.onSelectedRow(I),class:"border"},[e("div",{class:le(["p-2",{"b-left":k.isSelected(I)}])},[Ae(r.$slots,"table-list",{item:I,index:G},()=>[(t(!0),s(A,null,q(k.header.columns,F=>(t(),s("div",oh,[e("label",ah,v(F.title),1),e("div",lh,[F.href?(t(),s("a",{key:0,href:F.href(I[k.header.key]),class:"font-weight-bold"},v(I[F.field]),9,nh)):(t(),s("span",rh,v(I[F.field]),1))])]))),256))],!0)],2)],8,sh))),128))],2)])}const dh=Me(Xw,[["render",ih],["__scopeId","data-v-65929213"]]),Ie=gt(yt);Ie.use(bt());Ie.use(nt);Ie.component("m-notification",cw);Ie.component("m-pagination",jw);Ie.component("sort-field",Qw);Ie.component("table-list",dh);Ie.component("Toasts",na);Ie.component("PageHeader",yw);Ie.component("PageMessages",kw);Ie.component("PageBody",Sw);const uh="https://sonyfastpoc.azurewebsites.net/",ch="Arcadian-Sony FAST",mh=void 0,fh={API_URL:uh,appName:ch,tenantId:mh};Ie.provide("$config",fh);Ie.provide("$bus",Ye);Ie.mount("#app");
