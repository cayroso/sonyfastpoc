import{o as t,c as ve,r as te,h as st,u as je,d as ot,a as ue,e as Re,b as s,f as e,g as F,w as z,i as J,t as c,F as O,j as q,k as D,l as fe,m as Ye,n as xe,p as at,q as Fe,s as We,P as lt,v as ge,x as se,y as le,z as Te,T as be,A as o,B as pt,C as B,D as Z,E as nt,G as re,H as vt,I as rt,J as ke,K as Ae,L as Ie,M as Be,N as pe,O as Ue,Q as Se,R as he,S as Ne,U as Ee,V as tt,W as gt,X as bt,Y as yt,Z as qe,_ as $t,$ as wt}from"./vendor-Dwcj-3kd-chunk.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))P(k);new MutationObserver(k=>{for(const H of k)if(H.type==="childList")for(const V of H.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&P(V)}).observe(document,{childList:!0,subtree:!0});function S(k){const H={};return k.integrity&&(H.integrity=k.integrity),k.referrerPolicy&&(H.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?H.credentials="include":k.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function P(k){if(k.ep)return;k.ep=!0;const H=S(k);fetch(k.href,H)}})();const ht={__name:"App",setup(l){return(p,S)=>{const P=te("router-view");return t(),ve(P)}}};function Ke(){const l=ee=>{var T;let L=ee,A=L.response,C="";if(!L.response)return ee.message;if(A.status===500){if(typeof A.data=="string")return A.data;if(A.data.content)return A.data.content;if(A.data.detail)return A.data.detail}if(A.status===401){const i=`${window.location.pathname}${window.location.search}`;C=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(i)}`}'>here</a> to login.`}else if(A.status===400){let i=L.response.data.errors;C=L.response.data.title||L.response.data,i&&(C+="<ul>");for(let X in i){let Q=i[X];for(let r in i[X]){let m=Q[r];C+=`<li>${m}</li>`}}i&&(C+="</ul>"),C||(C=L.message),C&&C.content&&(C=C.content)}else A.status===404?C=((T=A==null?void 0:A.data)==null?void 0:T.title)||(A==null?void 0:A.data)||"Record not found.":typeof A.data=="string"&&(C=L.message,C===""&&(C=`Error <b>Http ${A.status}</b>.<br/>Please contact the System Administrator.`));return C},p=ee=>JSON.parse(JSON.stringify(ee)),S=ee=>{if(typeof ee!="number")return ee;var L=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return L.format(ee)},P=(ee,L,A)=>{const T={value:L,expiry:new Date().getTime()+A};debugger;localStorage.setItem(ee,JSON.stringify(T))},k=ee=>{debugger;const L=localStorage.getItem(ee);if(!L)return null;const A=JSON.parse(L);return new Date().getTime()>A.expiry?(localStorage.removeItem(ee),null):A.value},H="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:l,clone:p,toCurrency:S,moment:st,localStorageSetWithExpiry:P,localStorageGetWithExpiry:k,setPageTab:(ee,L)=>{var A=localStorage.getItem(H);A?A=JSON.parse(A):A={},A[ee]=L,localStorage.setItem(H,JSON.stringify(A))},getPageTab:ee=>{var L=localStorage.getItem(H);return L?L=JSON.parse(L):L={},L[ee]},createHlsStream:(ee,L,A)=>{var C=new Hls({autoStartLoad:A??!0});return C.on(Hls.Events.MEDIA_ATTACHED,function(){}),C.on(Hls.Events.MANIFEST_PARSED,function(T,i){console.log("manifest loaded, found "+i.levels.length+" quality level")}),C.on(Hls.Events.ERROR,function(T,i){if(i.fatal)switch(i.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),C.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",i);break;default:C.destroy();break}}),C.loadSource(L),C.attachMedia(ee),C},isValidTime:ee=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(ee),generateReturnUrl:()=>{const ee=je();let L=ee.path;return ee.query.returnUrl&&(L=ee.query.returnUrl),L=`?returnUrl=${encodeURIComponent(L)}`,L}}}const _t=Ke(),it=JSON.parse(localStorage.getItem("user"))||{},kt=_t.moment.utc(it.exp*1e3),St=kt.isAfter()?it:null,we=ot({id:"auth",state:()=>({user:St,returnUrl:null}),actions:{async login(l){try{this.user=l,localStorage.setItem("user",JSON.stringify(l))}catch(p){debugger;alert(p)}},logout(){this.user=null,localStorage.removeItem("user"),ft.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),Tt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(Tt));const Mt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ge=Mt,dt=ot("msal",()=>{const l=ue({auth:{clientId:Ge.VITE_AUTH_CLIENT_ID,authority:Ge.VITE_AUTH_AUTHORITY_URL,redirectUri:Ge.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),p=ue("");return{msalConfig:l,accessToken:p,setAccessToken:P=>{p.value=P}}}),Qe={$on:(...l)=>Re.on(...l),$once:(...l)=>Re.once(...l),$off:(...l)=>Re.off(...l),$emit:(...l)=>Re.emit(...l)};function It(){const l=(H,V,K,W)=>{Qe.$emit("toast-message",{title:H,message:V,type:K,options:W})};return{success:(H,V,K={})=>{l(H,V,"success",K)},warning:(H,V,K={})=>{l(H,V,"warning",K)},info:(H,V,K={})=>{l(H,V,"info",K)},error:(H,V,K={})=>{l(H,V,"danger",K)}}}const Ve=(l,p)=>{const S=l.__vccOpts||l;for(const[P,k]of p)S[P]=k;return S},xt={data(){return{notifications:[],messages:[]}},async created(){const l=this;l.$bus.$on("event:notification-received",()=>{l.getUnreadNotifications()}),l.$bus.$on("event:notification-marked-as-read",p=>{l.notifications.some(P=>P.notificationId===p)&&l.getUnreadNotifications()}),l.$bus.$on("event:notification-removed",p=>{l.notifications.some(P=>P.notificationId===p)&&l.getUnreadNotifications()}),l.$bus.$on("event:chat-marked-as-read",l.onChatMarkedAsRead),l.$bus.$on("event:chat-message-received",l.onChatMessageReceived)},async mounted(){const l=this,p=l.$refs.notifications,S=l.$refs.messages;p&&p.offsetParent,S&&S.offsetParent&&await l.getUnreadChats()},methods:{async logout(){const l=this;try{await l.$util.axios.post("/api/accounts/logout").then(p=>{const S="/";l.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){l.$util.href(S)}})})}catch(p){l.$util.handleError(p)}},async onChatMarkedAsRead(l){let p=this,S=p.messages.find(P=>P.chatId===l);if(S){let P=p.messages.indexOf(S);p.messages.splice(P,1)}},async onChatMessageReceived(l){let p=this,S=p.messages.find(k=>k.chatId===l.chatId);if(S)S.lastMessageText=l.content;else{var P={chatId:l.chatId,isRead:!1,lastDateSent:l.dateSent,lastMessageText:l.content,senderFirstLastName:`${l.sender.firstName} ${l.sender.lastName}`,senderInitials:l.sender.initials,senderProfilePicture32:l.sender.profilePicture32,urlPicture:p.$util.getProfilePictureUrl(l.sender.profilePicture32,l.sender.initials)};p.messages.push(P)}},async getUnreadNotifications(){const l=this;try{await l.$util.axios.get("api/accounts/unread-notifications").then(p=>{l.notifications=p.data})}catch(p){l.$util.handleError(p)}},async getUnreadChats(){const l=this;try{await l.$util.axios.get("api/accounts/unread-chats").then(p=>{l.messages=p.data;for(let S in l.messages){let P=l.messages[S];l.$set(P,"urlPicture",l.$util.getProfilePictureUrl(P.senderProfilePicture32,P.senderInitials))}})}catch(p){l.$util.handleError(p)}},viewNotification(l){this.$bus.$emit("event:open-notification",l)},viewChat(l){this.$bus.$emit("event:open-chat",l)},showHiddenElements(){let p=this.$el.getElementsByClassName("initialHidden");for(let S=0;S<p.length;S++)p[S].classList.remove("invisible")}}},Ct={mixins:[xt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const p=we().user;return{user:p,username:p?p.nameFull:"Guest"}},async mounted(){},methods:{isActive(l){return window.location.href.indexOf(l)>-1},async openModalSearchUser747(l){this.$refs.refModalSearchUser747.open(l)}}},Vt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Pt={class:"container-md"},Ot={class:"navbar-collapse collapse",id:"navbarSideCollapse"},At={class:"navbar-nav"},Ut={class:"nav-item dropdown"},Dt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ht={class:"nav-item dropdown"},Lt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Et={class:"navbar-nav ms-auto"},qt={class:"nav-item dropdown"},Bt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Nt={class:"d-inline d-sm-none d-md-inline"},Rt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Ft={class:"text-capitalize"};function zt(l,p,S,P,k,H){const V=te("router-link");return t(),s("nav",Vt,[e("div",Pt,[F(V,{class:"navbar-brand",to:"/member"},{default:z(()=>[J(c(S.appName),1)]),_:1}),p[14]||(p[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Ot,[e("ul",At,[e("li",Ut,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Dt,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/announcements"},{default:z(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),J(" Announcements ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/posts"},{default:z(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),J(" Posts ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/yellow-pages"},{default:z(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),J(" Yellow Pages ")])),_:1})])])]),e("li",Ht,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Lt,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:z(()=>p[4]||(p[4]=[J(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Et,[e("li",qt,[e("a",Bt,[e("span",null,[p[6]||(p[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Nt,c(k.username),1)])]),e("ul",Rt,[p[9]||(p[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),p[10]||(p[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),p[11]||(p[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),p[12]||(p[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),k.user&&k.user.roles.length>1?(t(!0),s(O,{key:0},q(k.user.roles,K=>(t(),s("li",null,[F(V,{to:`/${K.toLowerCase()}`,class:"dropdown-item"},{default:z(()=>[e("span",Ft,c(K),1)]),_:2},1032,["to"])]))),256)):D("",!0),e("li",null,[F(V,{to:"/",class:"dropdown-item"},{default:z(()=>p[7]||(p[7]=[J(" Main ")])),_:1})]),p[13]||(p[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[F(V,{to:"/account/logout",class:"dropdown-item"},{default:z(()=>p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),J("Logout ")])),_:1})])])])])])])])}const Gt=Ve(Ct,[["render",zt]]),jt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const l=document.getElementById("top");l&&l.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let l=this;if(!l.$el.getElementsByClassName)return;let p=l.$el.getElementsByClassName("initialHidden");for(let S=0;S<p.length;S++){let P=p[S];P.classList.remove("invisible"),P.classList.remove("d-none")}},close(){const l=this,p=document.referrer.toLowerCase();p&&p.includes("/account/login")?l.$router.go(-2):l.$router.go(-1)},toggle(l){const p=this;p.toggles[l]=!p.toggles[l],localStorage.setItem(p.togglesKey,JSON.stringify(p.toggles))}}},Yt={mixins:[jt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(l){return window.location.href.indexOf(l)>-1}}},Wt={class:"footer sticky-bottom"},Kt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Qt={class:"container-md"},Jt={class:"navbar-text small p-0"},Xt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Zt={class:"container-md"},es={class:"navbar-nav nav-fill w-100"},ts={class:"nav-item dropup"},ss={class:"dropdown-menu","aria-labelledby":"dropdown01"},os={class:"nav-item dropup"},as={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ls(l,p,S,P,k,H){const V=te("router-link");return t(),s("footer",Wt,[e("div",Kt,[e("div",Qt,[e("span",Jt,"©"+c(k.copyright),1)])]),e("nav",Xt,[e("div",Zt,[e("ul",es,[e("li",ts,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",ss,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/announcements"},{default:z(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),J(" Announcements ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/posts"},{default:z(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),J(" Posts ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/yellow-pages"},{default:z(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),J(" Yellow Pages ")])),_:1})])])]),e("li",os,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",as,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:z(()=>p[4]||(p[4]=[J(" Property Monthly Dues ")])),_:1})])])])])])])])}const ns=Ve(Yt,[["render",ls]]),rs={name:"AdminLayout",components:{TopNav:Gt,BottomNav:ns},inject:["$config"],mounted(){const p=this.$config;document.title=`Account - ${p.appName}`}},is={class:"d-flex flex-column vh-100"};function ds(l,p,S,P,k,H){const V=te("Toasts"),K=te("router-view");return t(),s("div",is,[F(V),F(K,{class:"flex-grow-1 mb-2"})])}const us=Ve(rs,[["render",ds]]),cs={__name:"index",setup(l){return we().user,fe(()=>{}),(S,P)=>(t(),s("div",null,P[0]||(P[0]=[Ye('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ms={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},fs=ms;function ps(){xe("$config");const l=fs.VITE_API_URL,p=at.create({baseURL:l});return Fe.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),p.interceptors.request.use(S=>{Fe.start();const{user:P}=we();return P&&P.token&&(S.headers?(S.headers.Authorization||(S.headers.Authorization=`Bearer ${P.token}`),S.headers["Access-Control-Allow-Origin"]||(S.headers["Access-Control-Allow-Origin"]="*")):S.headers={Authorization:`Bearer ${P.token}`,"Access-Control-Allow-Origin":"*"}),S}),p.interceptors.response.use(S=>(Fe.done(),S),S=>{throw Fe.done(),S}),p}function $e(l){if(!l.appTitle)throw Error("App Title is required.");if(!l.pageTitle)throw Error("Page Title is required.");const p=je(),S=We(),P=ps(),k=Ke(),H=It(),K=we().user,W=()=>K&&K.roles&&K.roles.includes("System"),U=()=>K&&K.roles&&K.roles.includes("administrator"),G=()=>K&&K.roles&&K.roles.includes("employee"),ee=()=>K&&K.roles&&K.roles.includes("Member"),L=async()=>{const Y=document.referrer.toLowerCase();Y&&Y.includes("/accounts/login")?await S.go(-2):await S.go(-1)},A=Y=>{var b;const u=p.path,I=(b=p.query)==null?void 0:b.returnUrl;I&&!(u.startsWith(I)||I.startsWith(u))?S.push(I):S.push(Y)},C=l.appTitle,T=l.pageTitle,i=ue(!1),X=ue(new Map),Q=ue(""),r=ue(""),m=ue("");return{appTitle:C,pageTitle:T,busy:i,validations:X,infoMessage:Q,warningMessage:r,errorMessage:m,router:S,route:p,axios:P,utils:k,toasts:H,close:L,closeWithReturnUrl:A,generateReturnUrl:k.generateReturnUrl,security:{userId:K?K.userId:"",isSystem:W(),isAdministrator:U(),isEmployee:G(),isMember:ee()}}}const vs={class:"h-100 d-flex align-items-center justify-content-center"},gs={class:"form-signin w-100 m-auto"},bs={class:"h3 mb-3 fw-normal"},ys={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$s=["innerHTML"],ws={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},hs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(l){xe("$config");const p=we(),S=dt(),P=new lt(S.msalConfig),k=ge({username:"",password:""}),H={username:{required:se.withMessage("Username is required.",le),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",le),$autoDirty:!0,$lazy:!0}},V=Te(H,k),{appTitle:K,pageTitle:W,busy:U,isDirty:G,validations:ee,infoMessage:L,warningMessage:A,errorMessage:C,router:T,route:i,axios:X,utils:Q,toasts:r,close:m,security:Y}=$e({appTitle:"Sony FAST POC",pageTitle:"Sign On"});fe(async()=>{await P.initialize()});const u=async()=>{await P.loginPopup({}).then(()=>{debugger;const _=P.getAllAccounts()[0];P.setActiveAccount(_)}).catch(b=>{console.error(`error during authentication: ${b}`)});var I={account:P.getActiveAccount(),scopes:[]};await P.acquireTokenSilent(I).then(b=>{debugger;const g=b.account.idToken,d=pt(g);if(d.token=b.accessToken,console.log(b),!d.roles){debugger;d.roles=[]}d.userId=d.sub,p.login(d);var f=i.query.returnUrl;f?T.push(decodeURIComponent(f)):d.roles.length===1?T.push(`/${d.roles[0].toLowerCase()}`):T.push("/")}).catch(b=>{console.error(`error during acquireTokenSilent: ${b}`)})};return(I,b)=>(t(),ve(be,null,{default:z(()=>[e("div",vs,[e("main",gs,[e("div",null,[e("h1",bs,c(o(K)),1),e("div",null,[o(C)?(t(),s("div",ys,[b[1]||(b[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(C)},null,8,$s)])):D("",!0),o(V).$error?(t(),s("div",ws,[b[2]||(b[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(V).$errors,_=>(t(),s("li",{key:_.$uid},c(_.$message),1))),128))])])):D("",!0)]),e("button",{onClick:b[0]||(b[0]=_=>u()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},_s=Ve(hs,[["__scopeId","data-v-896956d0"]]),ks={class:"h-100 d-flex align-items-center justify-content-center"},Ss={__name:"logout",setup(l){const p=we();return p.user,fe(async()=>{p.logoutWithRedirect()}),(S,P)=>(t(),s("div",ks,P[0]||(P[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[J(" You have logged out from HOA MS."),e("br"),J(" Click "),e("a",{href:"/",class:"d-inline"},"here"),J(" to go back to home page. ")])],-1)])))}},Ts={class:"h-100 d-flex align-items-center justify-content-center"},Ms={class:"card m-3"},Is={class:"card-header"},xs={class:"card-body"},Cs={class:"m-2"},Vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ps=["innerHTML"],Os={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},As={class:"row row-cols-1 row-cols-sm-3"},Us={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"col-sm"},Ns={class:"form-group"},Rs={key:0,class:"d-block invalid-feedback"},Fs={class:"row row-cols-1 row-cols-sm-3"},zs={class:"col"},Gs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Ys={class:"col"},Ws={class:"form-group"},Ks={key:0,class:"d-block invalid-feedback"},Qs={class:"row row-cols-1 row-cols-sm-3"},Js={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"col-sm"},to={class:"form-group"},so={key:0,class:"d-block invalid-feedback"},oo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},ao={class:"col"},lo=["disabled"],no={class:"col"},ro={class:"col"},io={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(l){const p=ge({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),S=(Y,u)=>Y===u.password,P={firstName:{required:se.withMessage("First name is required.",le),$autoDirty:!0,$lazy:!0},middleName:{required:se.withMessage("Middle name is required.",le),$autoDirty:!0,$lazy:!0},lastName:{required:se.withMessage("Last name is required.",le),$autoDirty:!0,$lazy:!0},phoneNumber:{required:se.withMessage("Phone number is required.",le),$autoDirty:!0,$lazy:!0},email:{required:se.withMessage("Email is required.",le),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",le),$autoDirty:!0,$lazy:!0},confirmPassword:{required:se.withMessage("Confirm password is required.",le),confirmSamePassword:se.withMessage("Password and confirm passwrod are different.",S),$autoDirty:!0,$lazy:!0}},k=Te(P,p),{appTitle:H,pageTitle:V,busy:K,isDirty:W,validations:U,infoMessage:G,warningMessage:ee,errorMessage:L,router:A,axios:C,utils:T,toasts:i,close:X,security:Q}=$e({appTitle:"HOA MS",pageTitle:"Register User"}),r=xe("$config");fe(()=>{});const m=async()=>{const Y=p;if(K.value)return;if(!await k.value.$validate()){window.scrollTo(0,0);return}L.value=null;try{K.value=!0;const I=T.clone(Y);I.tenantid=r.tenantId;debugger;await C({method:"post",url:"/api/v1/accounts/register",data:I}).then(b=>{i.success("Register","Registration was successfull.",{onClose:async()=>{await A.push("/accounts/login")}})})}catch(I){L.value=T.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{K.value=!1}};return(Y,u)=>{const I=te("router-link");return t(),ve(be,null,{default:z(()=>[e("div",Ts,[e("div",Ms,[e("h4",Is,c(o(V)),1),e("div",xs,[e("div",Cs,[o(L)?(t(),s("div",Vs,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(L)},null,8,Ps)])):D("",!0),o(k).$error?(t(),s("div",Os,[u[9]||(u[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(k).$errors,b=>(t(),s("li",{key:b.$uid},c(b.$message),1))),128))])])):D("",!0)]),e("div",As,[e("div",Us,[e("div",Ds,[u[10]||(u[10]=e("label",null,"First Name",-1)),B(e("input",{"onUpdate:modelValue":u[0]||(u[0]=b=>p.firstName=b),type:"text",class:"form-control"},null,512),[[Z,p.firstName]]),o(k).firstName.$error?(t(),s("div",Hs,[(t(!0),s(O,null,q(o(k).firstName.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])]),e("div",Ls,[e("div",Es,[u[11]||(u[11]=e("label",null,"Middle Name",-1)),B(e("input",{"onUpdate:modelValue":u[1]||(u[1]=b=>p.middleName=b),type:"text",class:"form-control"},null,512),[[Z,p.middleName]]),o(k).middleName.$error?(t(),s("div",qs,[(t(!0),s(O,null,q(o(k).middleName.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])]),e("div",Bs,[e("div",Ns,[u[12]||(u[12]=e("label",null,"Last Name",-1)),B(e("input",{"onUpdate:modelValue":u[2]||(u[2]=b=>p.lastName=b),type:"text",class:"form-control"},null,512),[[Z,p.lastName]]),o(k).lastName.$error?(t(),s("div",Rs,[(t(!0),s(O,null,q(o(k).lastName.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])])]),e("div",Fs,[e("div",zs,[e("div",Gs,[u[13]||(u[13]=e("label",null,"Phone Number",-1)),B(e("input",{"onUpdate:modelValue":u[3]||(u[3]=b=>p.phoneNumber=b),type:"tel",class:"form-control"},null,512),[[Z,p.phoneNumber]]),o(k).phoneNumber.$error?(t(),s("div",js,[(t(!0),s(O,null,q(o(k).phoneNumber.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])]),e("div",Ys,[e("div",Ws,[u[14]||(u[14]=e("label",null,"Email",-1)),B(e("input",{"onUpdate:modelValue":u[4]||(u[4]=b=>p.email=b),type:"email",class:"form-control"},null,512),[[Z,p.email]]),o(k).email.$error?(t(),s("div",Ks,[(t(!0),s(O,null,q(o(k).email.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])])]),e("div",Qs,[e("div",Js,[e("div",Xs,[u[15]||(u[15]=e("label",null,"Password",-1)),B(e("input",{"onUpdate:modelValue":u[5]||(u[5]=b=>p.password=b),type:"password",class:"form-control"},null,512),[[Z,p.password]]),o(k).password.$error?(t(),s("div",Zs,[(t(!0),s(O,null,q(o(k).password.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])]),e("div",eo,[e("div",to,[u[16]||(u[16]=e("label",null,"Confirm Password",-1)),B(e("input",{"onUpdate:modelValue":u[6]||(u[6]=b=>p.confirmPassword=b),type:"password",class:"form-control"},null,512),[[Z,p.confirmPassword]]),o(k).confirmPassword.$error?(t(),s("div",so,[(t(!0),s(O,null,q(o(k).confirmPassword.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):D("",!0)])])]),e("div",oo,[e("div",ao,[e("button",{disabled:o(k).$dirty&&o(k).$invalid,onClick:u[7]||(u[7]=b=>m()),class:"btn btn-primary w-100"},u[17]||(u[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),J("Register ")]),8,lo)]),e("div",no,[F(I,{to:"/",class:"btn btn-outline-primary w-100"},{default:z(()=>u[18]||(u[18]=[J("Home")])),_:1})]),e("div",ro,[F(I,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:z(()=>u[19]||(u[19]=[J("Login")])),_:1})])])])])])]),_:1})}}},uo={path:"/accounts",component:us,props:!1,meta:{},children:[{path:"",component:cs},{path:"login",component:_s},{path:"logout",component:Ss},{path:"register",component:io}]};function Je(){const l=We(),p=W=>window.location.href.indexOf(W)>-1,S=W=>localStorage.getItem("data-bs-theme")||W,P=W=>{document.documentElement.setAttribute("data-bs-theme",W),localStorage.setItem("data-bs-theme",W)},k=async()=>await at.get("https://bootswatch.com/api/5.json").then(W=>W.data),H=W=>{const U=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");U&&W?(U.setAttribute("href",W),localStorage.setItem("bootswatch-theme",W)):alert("cannot query css link")},V=W=>{K(),l.push(W)},K=()=>{if(screen.width<576){const U=document.getElementById("navbarCollapse");if(U){const G=nt.getInstance(U);G&&G.hide()}}};return{isActive:p,getCurrentBsTheme:S,changeBsTheme:P,getBootswatch:k,changeTheme:H,navigate:V,collapseNavbar:K}}const co={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},mo={class:"container-md"},fo={class:"navbar-collapse collapse",id:"navbarCollapse"},po={class:"navbar-nav"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"nav-item"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu","aria-labelledby":"dropdown01"},ho={class:"navbar-nav ms-auto"},_o={class:"nav-item dropdown"},ko={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},So=["onClick"],To={class:"nav-item dropdown"},Mo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Io={class:"d-sm-none d-xl-inline"},xo={key:0},Co={key:1},Vo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Po={key:0},Oo={key:1},Ao={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(l){const p=dt(),{isActive:S,getCurrentBsTheme:P,changeBsTheme:k,getBootswatch:H,changeTheme:V,navigate:K,collapseNavbar:W}=Je(),U=we(),G=U.user,ee=ge({user:G,username:G?G.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const T=ee;T.bootswatch=await H();const i=P(T.bsTheme);debugger;i&&(T.bsTheme=i,k(T.bsTheme));const X=localStorage.getItem("bootswatch-theme");X&&(T.currentTheme=X,V(X))});const L=T=>{V(T),ee.currentTheme=T,W()},A=T=>{k(T),ee.bsTheme=T,W()},C=async()=>{U.logoutWithRedirect();const T=new lt(p.msalConfig);await T.initialize();const i={mainWindowRedirectUri:"/"};await T.logoutPopup(i)};return(T,i)=>{const X=te("router-link");return t(),ve(be,null,{default:z(()=>[e("nav",co,[e("div",mo,[F(X,{class:"navbar-brand",to:"/administrator"},{default:z(()=>[J(c(l.appName),1)]),_:1}),i[18]||(i[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",fo,[e("ul",po,[e("li",vo,[F(X,{to:"/videos",onClick:o(W),class:"nav-link"},{default:z(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",go,[i[6]||(i[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",bo,[e("li",null,[F(X,{to:"/source-groups",onClick:o(W),class:"dropdown-item"},{default:z(()=>i[4]||(i[4]=[J(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[F(X,{to:"/source-locations",onClick:o(W),class:"dropdown-item"},{default:z(()=>i[5]||(i[5]=[J(" Locations ")])),_:1},8,["onClick"])])])]),e("li",yo,[F(X,{to:"/vod-sources",onClick:o(W),class:"nav-link"},{default:z(()=>i[7]||(i[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",$o,[i[10]||(i[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",wo,[e("li",null,[F(X,{to:"/program-templates",onClick:o(W),class:"dropdown-item"},{default:z(()=>i[8]||(i[8]=[J(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[F(X,{to:"/channels",onClick:o(W),class:"dropdown-item"},{default:z(()=>i[9]||(i[9]=[J(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",ho,[e("li",_o,[i[14]||(i[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",ko,[e("li",null,[ee.bsTheme==="dark"?(t(),s("button",{key:0,onClick:i[0]||(i[0]=Q=>A("light")),class:"dropdown-item"},i[11]||(i[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Dark Mode ")]))):(t(),s("button",{key:1,onClick:i[1]||(i[1]=Q=>A("dark")),class:"dropdown-item"},i[12]||(i[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Light Mode ")])))]),i[13]||(i[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,q(ee.bootswatch.themes,Q=>(t(),s("li",null,[e("button",{onClick:r=>L(Q.cssCdn),class:re(["dropdown-item",{active:ee.currentTheme===Q.cssCdn}])},c(Q.name),11,So)]))),256))])]),e("li",To,[e("a",Mo,[e("span",null,[i[15]||(i[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Io,[o(G)?(t(),s("span",xo,c(o(G).name),1)):(t(),s("span",Co," Guest "))])])]),e("ul",Vo,[o(G)?(t(),s("li",Po,[e("button",{onClick:i[2]||(i[2]=Q=>C()),class:"dropdown-item"},i[16]||(i[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),J("Logout ")]))])):(t(),s("li",Oo,[F(X,{to:"/accounts/login",class:"dropdown-item"},{default:z(()=>i[17]||(i[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),J("Login ")])),_:1})]))])])])])])])]),_:1})}}},Uo={id:"sideNav",class:"collapse collapse-horizontal show"},Do={class:"bg-dark min-vh-100 overflow-y-auto"},Ho={class:"navbar bg-primary bg-gradient shadow-sm","data-bs-theme":"dark"},Lo={class:"navbar-brand me-0 mb-1 px-2"},Eo={class:"d-none d-sm-inline"},qo={class:"nav nav-pills flex-column mb-auto px-1 mt-2",role:"tablist"},Bo={class:"nav-item dropdown"},No={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Ro={class:"nav-item dropdown"},Fo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},zo={class:"nav-item dropdown"},Go={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},jo={class:"nav-item dropdown"},Yo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Wo=["onClick"],Ko={key:0,class:"fas fa-fw fa-angle-double-left"},Qo={key:1,class:"fas fa-fw fa-angle-double-right"},Jo={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(l){const p=je(),S=We(),{isActive:P,getCurrentBsTheme:k,changeBsTheme:H,getBootswatch:V,changeTheme:K,navigate:W,collapseNavbar:U}=Je(),G=ge({bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const r=G;r.bootswatch=await V();const m=k(r.bsTheme);m&&(r.bsTheme=m,H(r.bsTheme));const Y=localStorage.getItem("bootswatch-theme");Y&&(r.currentTheme=Y,K(Y)),C();const u=document.getElementById("sideNav");u&&(A.value?u.classList.add("show"):u.classList.remove("show"))});const ee=r=>{K(r),G.currentTheme=r},L=r=>{H(r),G.bsTheme=r},A=ue(!0),C=()=>{const r=localStorage.getItem("show-sideNav")||"true";A.value=r==="true"},T=()=>{localStorage.setItem("show-sideNav",A.value),nt.getInstance("#sideNav").toggle()},i=()=>{A.value=!A.value,T()},X=r=>{var m=p.path.startsWith(r);return m?"active":""},Q=async(r,m)=>{const Y=vt.getInstance(`#${m}`);Y&&Y.hide(),await S.push(r)};return(r,m)=>{const Y=te("router-link");return t(),s("div",null,[e("div",Uo,[e("div",Do,[e("nav",Ho,[F(Y,{to:"/",class:"text-decoration-none w-100 text-center"},{default:z(()=>[e("h1",Lo,[m[8]||(m[8]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Eo,c(l.appName),1)])]),_:1})]),e("ul",qo,[e("li",Bo,[e("a",{class:re([X("/source-"),"nav-link dropdown-toggle"]),href:"#",id:"sourcesDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},m[9]||(m[9]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Sources",-1)]),2),e("ul",No,[e("li",null,[e("button",{onClick:m[0]||(m[0]=u=>Q("/source-groups","sourcesDropdown")),class:re([X("/source-groups"),"dropdown-item"]),role:"button"},m[10]||(m[10]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)]),2),e("button",{onClick:m[1]||(m[1]=u=>Q("/source-locations","sourcesDropdown")),class:re([X("/source-locations"),"dropdown-item"]),role:"button"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)]),2)])])]),e("li",Ro,[e("a",{class:re([[X("/videos"),X("/vod-sources")],"nav-link dropdown-toggle"]),href:"#",id:"assetsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Asset Library",-1)]),2),e("ul",Fo,[e("li",null,[e("button",{onClick:m[2]||(m[2]=u=>Q("/videos","assetsDropdown")),class:re([X("/videos"),"dropdown-item"]),role:"button"},m[13]||(m[13]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)]),2),e("button",{onClick:m[3]||(m[3]=u=>Q("/vod-sources","assetsDropdown")),class:re([X("/vod-sources"),"dropdown-item"]),role:"button"},m[14]||(m[14]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VOD",-1)]),2)])])]),e("li",zo,[e("a",{class:re([[X("/program-templates"),X("/channels")],"nav-link dropdown-toggle"]),href:"#",id:"assemblyDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},m[15]||(m[15]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channel Assembly",-1)]),2),e("ul",Go,[e("li",null,[e("button",{onClick:m[4]||(m[4]=u=>Q("/program-templates","assemblyDropdown")),class:re([X("/program-templates"),"dropdown-item"]),role:"button"},m[16]||(m[16]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)]),2),e("button",{onClick:m[5]||(m[5]=u=>Q("/channels","assemblyDropdown")),class:re([X("/channels"),"dropdown-item"]),role:"button"},m[17]||(m[17]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)]),2)])])]),e("li",jo,[m[21]||(m[21]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",Yo,[e("li",null,[G.bsTheme==="dark"?(t(),s("button",{key:0,onClick:m[6]||(m[6]=u=>L("light")),class:"dropdown-item"},m[18]||(m[18]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Dark Mode ")]))):(t(),s("button",{key:1,onClick:m[7]||(m[7]=u=>L("dark")),class:"dropdown-item"},m[19]||(m[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Light Mode ")])))]),m[20]||(m[20]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,q(G.bootswatch.themes,u=>(t(),s("li",null,[e("button",{onClick:I=>ee(u.cssCdn),class:re(["dropdown-item",{active:G.currentTheme===u.cssCdn}])},c(u.name),11,Wo)]))),256))])])])])]),e("button",{id:"sideNavToggler",onClick:i,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"2rem",height:"2rem"}},[A.value?(t(),s("span",Ko)):(t(),s("span",Qo))])])}}},Xo={class:"footer sticky-bottom"},Zo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},ea={class:"container-md"},ta={class:"navbar-text small p-0"},sa={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(l){Je();const p=xe("$config"),P=we().user;let H=new Date().getFullYear();const V=ge({user:P,username:P?P.nameFull:"Guest",copyright:`2020-${H} ${p.appName}`});return fe(async()=>{}),(K,W)=>(t(),s("footer",Xo,[e("div",Zo,[e("div",ea,[e("span",ta,"©"+c(V.copyright),1)])])]))}},oa={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Qe.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(l){l.message&&this.addMessage(l.title,l.message,l.type,l.options)},async addMessage(l,p,S,P={}){var k={id:this.count++,title:l,message:p,type:S,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};k=Object.assign({},k,P),this.messages.unshift(k),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),k.timeOut>0&&await this.startTimeout(k)},async startTimeout(l,p=0){const S=this,P=performance.now(),k=async()=>{l.animationFrame=requestAnimationFrame(async H=>{const V=H+p-P;if(!S.exists(l)||l.paused){cancelAnimationFrame(l.animationFrame);return}else if(V<l.timeOut){const K=V/l.timeOut;l.progress=K,await k()}else{l.progress=1,cancelAnimationFrame(l.animationFrame),S.remove(l);return}})};await k()},pauseProgress(l){l.timeOut<=0||(l.paused=!0)},async resumeProgress(l){l.timeOut<=0||(l.paused=!1,await this.startTimeout(l,l.timeOut*l.progress))},getCurrentProgress(l){return Math.round(l.progress*100)===100?100:l.progress*100},getIconClass(l){const p=l.type;let S="";switch(p){case"success":S="fas fa-fw fa-circle-check";break;case"info":S="fas fa-fw fa-circle-info";break;case"warning":S="fas fa-fw fa-circle-exclamation";break;case"danger":S="fas fa-fw fa-triangle-exclamation";break}let P=S;return l.rtl?"icon-right "+P:"icon-left "+P},async remove(l){const p=this.messages.findIndex(S=>S.id===l.id);this.messages.splice(p,1),typeof l.onClose=="function"&&await l.onClose()},exists(l){return this.messages.findIndex(S=>S.id===l.id)!==-1}}},aa={"aria-live":"polite","aria-atomic":"true",class:"position-static"},la=["onMouseover","onMouseout"],na={class:"me-auto text-white"},ra=["onClick"],ia={class:"toast-body"},da=["innerHTML"],ua={key:0,class:"progress m-1",style:{height:"4px"}};function ca(l,p,S,P,k,H){return t(),ve(be,null,{default:z(()=>[e("div",aa,[F(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:z(()=>[(t(!0),s(O,null,q(k.messages,V=>(t(),s("div",{key:V.id,class:re(["toast show mb-2 ms-auto",`border-${V.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:K=>H.pauseProgress(V),onMouseout:K=>H.resumeProgress(V)},[e("div",{class:re(["toast-header",`bg-${V.type}`])},[e("strong",na,[e("i",{class:re([H.getIconClass(V),"me-1"])},null,2),J(c(V.title),1)]),V.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:K=>H.remove(V)},p[0]||(p[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ra)):D("",!0)],2),e("div",ia,[e("div",{innerHTML:V.message},null,8,da)]),V.timeOut>0&&V.showProgress?(t(),s("div",ua,[e("div",{class:re(`bg-${V.type}`),style:rt({width:H.getCurrentProgress(V)+"%"})},null,6)])):D("",!0)],42,la))),128))]),_:1})])]),_:1})}const ma=Ve(oa,[["render",ca],["__scopeId","data-v-5272bd9a"]]),fa={name:"AdminLayout",components:{TopNav:Ao,SideNav:Jo,BottomNav:sa},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},pa={class:"d-flex flex-row flex-nowrap vh-100"};function va(l,p,S,P,k,H){const V=te("Toasts"),K=te("SideNav"),W=te("router-view");return t(),s("div",pa,[F(V),F(K),F(W,{class:"d-flex flex-column w-100 h-100"})])}const ga=Ve(fa,[["render",va]]),ba={class:"mt-2 container overflow-y-auto"},ya={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$a=["innerHTML"],wa={class:"row mb-3"},ha={class:"col-xl-4"},_a={class:""},ka=["id"],Sa={key:1,class:"card card-header bg-warning-subtle mb-2"},Ta={class:"col-xl-8 overflow-x-auto mt-2 mt-xl-0"},Ma={class:"d-flex flex-column align-items-start"},Ia=["src"],xa={class:""},Ca={class:"d-flex flex-row"},Va={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Pa={class:"text-center"},Oa=["src"],Aa={class:"text-end"},Ua={class:"text-wrap text-truncate"},Da={class:"overflow-y-auto"},Ha={class:"badge bg-info me-2"},La={key:0,class:"badge bg-warning mb-1"},Ea={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,isDirty:k,validations:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,generateReturnUrl:C,security:T}=$e({appTitle:"ARC AIO",pageTitle:"Dashboard"});xe("$config"),we().user;const X=ge({item:null});ue("805630ed-f288-4f2f-83a4-6c71312f6970"),ue(),fe(async()=>{await m()}),Ae(()=>{X.item.forEach(I=>{I.hls&&(I.hls.stopLoad(),I.hls.destroy())})});const Q=async()=>{const I=X;if(!P.value)try{P.value=!0;const b="/api/v1/channels/epg/";I.item=[],await G.get(b).then(_=>{I.item=_.data}),I.item.forEach(_=>{Y(_)})}catch(b){W.value=ee.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}},r=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await G.get("/api/v1/channels/reset/").then(_=>{L.success("Reset All Data","Reset data was successful.")})}catch(b){W.value=ee.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}},m=async()=>{await Q()},Y=I=>{if(I.manifestUrl&&Hls.isSupported()){u(I);var b=document.getElementById(`video-${I.id}`);if(!b)return;I.hls&&(I.hsl.stopLoad(),I.hls.destroy());const _=I.playbackUrl??I.manifestUrl;I.hls=ee.createHlsStream(b,_);return}},u=I=>{I.outputs&&I.outputs.forEach(_=>{if(_.hls){debugger;_.hls.detachMedia(),_.hls.destroy(),delete _.hls}_.playbackConfigurations.forEach(g=>{if(g.hls){debugger;g.hls.detachMedia(),g.hls.destroy(),delete g.hls}})})};return(I,b)=>{const _=te("PageHeader"),g=te("router-link");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(S)},{default:z(()=>[e("div",null,[e("button",{onClick:b[0]||(b[0]=d=>r()),class:"ms-2 btn btn-danger"},b[2]||(b[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),J("Reset All Data ")])),e("button",{onClick:b[1]||(b[1]=d=>m()),class:"ms-2 btn btn-secondary"},b[3]||(b[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",ba,[o(W)?(t(),s("div",ya,[b[4]||(b[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(W))},null,8,$a)])):D("",!0),(t(!0),s(O,null,q(X.item,d=>(t(),s("div",null,[e("div",wa,[e("div",ha,[e("div",_a,[d.manifestUrl?(t(),s("video",{key:0,id:`video-${d.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,ka)):(t(),s("div",Sa," Channel not yet published "))])]),e("div",Ta,[e("div",Ma,[e("div",null,[e("h4",null,[e("img",{src:d.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Ia),F(g,{to:`${l.urlViewChannel}/${d.id}/${o(C)()}`},{default:z(()=>[J(c(d.title),1)]),_:2},1032,["to"])])]),e("div",xa,[e("div",Ca,[(t(!0),s(O,null,q(d.programs,f=>(t(),s("div",Va,[e("div",Pa,[e("img",{src:f.image,class:"img-fluid border",style:{height:"64px"}},null,8,Oa)]),e("div",Aa,c(o(ee).moment(f.since).format("hh:mm a"))+"-"+c(o(ee).moment(f.till).format("hh:mm a")),1),e("div",Ua,c(f.title),1),e("div",Da,[(t(!0),s(O,null,q(f.genres,a=>(t(),s("span",Ha,c(a),1))),256))]),o(ee).moment().isAfter(f.since)&&o(ee).moment().isBefore(f.till)?(t(),s("span",La,"Now Playing")):D("",!0)]))),256))])])])])])]))),256))])])]),_:1})}}};function De(l){if(!l.cacheKey)throw Error("Cache Key required.");if(!l.baseUrl)throw Error("Base Url required.");const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,closeWithReturnUrl:L,generateReturnUrl:A,security:C}=$e({appTitle:l.appTitle,pageTitle:l.pageTitle}),T=JSON.parse(JSON.stringify(l.filter));T.pageIndex=T.pageIndex||1,T.pageSize=T.pageSize||5,T.sortField=T.sortField||"",T.sortOrder=T.sortOrder||1,T.updateUrl=T.updateUrl||!1,T.items=T.items||[],T.query=T.query||{},T.query.criteria=T.query.criteria||"";const i=ue(T),X=()=>{var d;if(P.value){console.log("Paginated search is currently busy.");return}const b=JSON.parse(localStorage.getItem(l.cacheKey))||{},_=new URLSearchParams(window.location.search),g=i.value;g.query.criteria=_.get("c")||b.criteria||g.query.criteria||"",g.pageIndex=parseInt(_.get("p"),10)||b.pageIndex||g.pageIndex||1,g.pageSize=parseInt(_.get("s"),10)||b.pageSize||g.pageSize||5,g.sortField=_.get("sf")||b.sortField||g.sortField||"",g.sortOrder=parseInt(_.get("so"),10)||b.sortOrder||g.sortOrder||1,g.visible=b.visible||g.visible,(d=l.initializeFilter)==null||d.call(l,i,l.cacheKey)},Q=()=>{if(l.getQuery)return l.getQuery(i.value);{const b=i.value;return["?c=",encodeURIComponent(b.query.criteria),"&p=",b.pageIndex,"&s=",b.pageSize,"&sf=",b.sortField,"&so=",b.sortOrder].join("")}},r=()=>{if(l.saveQuery)l.saveQuery(i.value,l.cacheKey);else{const b=i.value;localStorage.setItem(l.cacheKey,JSON.stringify({criteria:b.query.criteria,pageIndex:b.pageIndex,pageSize:b.pageSize,sortField:b.sortField,sortOrder:b.sortOrder,visible:b.visible}))}};return{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,closeWithReturnUrl:L,generateReturnUrl:A,security:C,filter:i,initializeFilter:X,getQuery:Q,saveQuery:r,search:async b=>{var g;let _=i.value;if(P.value){console.log("Paginated search is currently busy.");return}b>0&&(_.pageIndex=b);try{P.value=!0,V.value="";const d=Q();_.selected=null,await W(`${l.baseUrl}/${d}`).then(async f=>{var n;Array.isArray(f.data)?_.items=f.data:_=Object.assign(_,f.data);let a=location.pathname;a.endsWith("/")?a+=d:a+="/"+d,_.updateUrl&&window.history.replaceState(d,`${p}-search`,a),_.items.forEach(v=>{v.expand=!1}),r(),(n=l.successAction)==null||n.call(l,i.value)})}catch(d){if(localStorage.removeItem(l.cacheKey),l.failAction)l.failAction(d);else{const f=U.getErrorMessageAsHtml(d);V.value=f,G.error("Error Occured",f)}}finally{P.value=!1,(g=l.finalAction)==null||g.call(l)}},getRowNumber:b=>{const _=i.value;return(_.pageIndex-1)*_.pageSize+(b+1)},setSelected:b=>{const _=i.value;_.selected&&b&&_.selected===b?_.selected=null:(_.selected&&(_.selected.expand=!1),_.selected=b,_.selected.expand=!0)},isSelected:b=>{const _=i.value;return b===null||_.selected===null?!1:b===_.selected}}}const qa=["disabled"],Ba={class:"row row-cols-1 row-cols-sm-3"},Na={class:"col"},Ra={class:"form-floating mb-2"},Fa={key:0,class:"d-block invalid-feedback"},za={class:"col"},Ga={class:"form-floating"},ja={class:"col"},Ya={class:"form-floating"},Wa={class:"col"},Ka={class:"form-floating mb-2"},Qa={class:"row row-cols-1 row-cols-sm-2"},Ja={class:"col"},Xa={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},Za={class:"col"},el={class:"form-check"},tl=["onUpdate:modelValue","id"],sl=["for"],ol={class:"col"},al={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},ll={class:"col"},nl={class:"form-check"},rl=["onUpdate:modelValue","id"],il=["for"],dl={class:"table-responsive mt-2"},ul={class:"text-end"},cl={class:"table table-sm mb-0 mt-2"},ml={class:"align-middle"},fl={class:"text-center"},pl=["onUpdate:modelValue"],vl=["onUpdate:modelValue"],gl=["onUpdate:modelValue"],bl={class:"text-start"},yl=["onClick"],$l={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),A=l,C=ge({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:U.moment().format("YYYY-MM-DD"),formats:[]}}),T={item:{title:{title:se.withMessage("Title is required.",le),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("Duration is required.",le),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",le),$autoDirty:!0,$lazy:!0}}},i=Te(T,C),X=Ie(()=>{const u=U.moment;if(C.durationTime&&C.durationTime!=="00:00:00"&&U.isValidTime(C.durationTime)){const I=u().startOf("day"),b=I.format("YYYY-MM-DD ")+C.durationTime,g=u(b).subtract(I);return C.item.durationInMillis=g.valueOf(),C.item.durationInMillis}return 0});fe(async()=>{await r()});const Q=async()=>{const u=C;if(P.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const b=U.clone(u.item);b.durationInMillis=X.value;const _=U.moment(u.item.dateReleased).utc(!0).format();b.dateReleased=_;const g=C.lookups.genres.filter(f=>f.selected).map(f=>f.id);b.genres=g;const d=C.lookups.categories.filter(f=>f.selected).map(f=>f.id);b.categories=d;debugger;await W.post("/api/v1/videos/",b).then(f=>{G.success("Add Video","Video added",{onClose:async()=>{const a=`${A.urlView}/${f.data}`;await K.push(a)}})})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}},r=async()=>{try{await W.get("/api/v1/lookups/video-genres/").then(u=>{const b=u.data.filter(_=>_.id!==0);C.lookups.genres=b})}catch(u){V.value=U.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},m=()=>{const u={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};C.item.formats.push(u)},Y=u=>{C.item.formats.splice(u,1)};return(u,I)=>{const b=te("router-link"),_=te("PageHeader"),g=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:I[0]||(I[0]=d=>Q()),class:"btn btn-primary"},I[6]||(I[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,qa),F(b,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>I[7]||(I[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(g,{errorMessage:o(V),vuelidate:o(i)},{default:z(()=>[e("div",null,[e("div",Ba,[e("div",Na,[e("div",Ra,[B(e("input",{"onUpdate:modelValue":I[1]||(I[1]=d=>C.item.title=d),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,C.item.title]]),I[8]||(I[8]=e("label",{for:"title",class:""},"Title",-1)),o(i).item.title.$error?(t(),s("div",Fa,[(t(!0),s(O,null,q(o(i).item.title.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):D("",!0)])]),e("div",za,[e("div",Ga,[B(e("input",{"onUpdate:modelValue":I[2]||(I[2]=d=>C.item.dateReleased=d),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,C.item.dateReleased]]),I[9]||(I[9]=e("label",{for:"dateReleased",class:""},"Date Released",-1))])]),e("div",ja,[e("div",Ya,[B(e("input",{"onUpdate:modelValue":I[3]||(I[3]=d=>C.durationTime=d),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,C.durationTime]]),I[10]||(I[10]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Wa,[e("div",Ka,[B(e("textarea",{"onUpdate:modelValue":I[4]||(I[4]=d=>C.item.description=d),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,C.item.description]]),I[11]||(I[11]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",Qa,[e("div",Ja,[I[12]||(I[12]=e("h5",null,"Genres",-1)),e("div",Xa,[(t(!0),s(O,null,q(C.lookups.genres,d=>(t(),s("div",Za,[e("div",el,[B(e("input",{"onUpdate:modelValue":f=>d.selected=f,class:"form-check-input",type:"checkbox",id:d.name},null,8,tl),[[Be,d.selected]]),e("label",{class:"form-check-label",for:d.name},c(d.name),9,sl)])]))),256))])]),e("div",ol,[I[13]||(I[13]=e("h5",null,"Categories",-1)),e("div",al,[(t(!0),s(O,null,q(C.lookups.categories,d=>(t(),s("div",ll,[e("div",nl,[B(e("input",{"onUpdate:modelValue":f=>d.selected=f,class:"form-check-input",type:"checkbox",id:d.name},null,8,rl),[[Be,d.selected]]),e("label",{class:"form-check-label",for:d.name},c(d.name),9,il)])]))),256))])])]),e("div",dl,[e("div",ul,[e("button",{onClick:I[5]||(I[5]=d=>m()),class:"btn btn-outline-primary btn-sm"},I[14]||(I[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",cl,[I[17]||(I[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(C.item.formats,(d,f)=>(t(),s("tr",ml,[e("td",fl,c(f+1),1),e("td",null,[B(e("select",{"onUpdate:modelValue":a=>d.format=a,class:"form-control"},I[15]||(I[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,pl),[[pe,d.format]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":a=>d.serverUrl=a,type:"text",class:"form-control"},null,8,vl),[[Z,d.serverUrl]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":a=>d.path=a,type:"text",class:"form-control"},null,8,gl),[[Z,d.path]])]),e("td",bl,[e("button",{onClick:a=>Y(f),class:"btn btn-outline-warning btn-sm"},I[16]||(I[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},wl=["disabled"],hl={class:"row row-cols-1 row-cols-sm-3"},_l={class:"col"},kl={class:"form-floating mb-2"},Sl={key:0,class:"d-block invalid-feedback"},Tl={class:"col"},Ml={class:"form-floating"},Il={class:"col"},xl={class:"form-floating"},Cl={class:"col"},Vl={class:"form-floating mb-2"},Pl={class:"col"},Ol={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Al={class:"col"},Ul={class:"form-check"},Dl=["onUpdate:modelValue","id"],Hl=["for"],Ll={class:"col"},El={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},ql={class:"col"},Bl={class:"form-check"},Nl=["onUpdate:modelValue","id"],Rl=["for"],Fl={class:"table-responsive mt-2"},zl={class:"text-end"},Gl={class:"table table-sm mb-0 mt-2 border"},jl={class:"align-middle"},Yl={class:"text-center"},Wl=["onUpdate:modelValue"],Kl=["value"],Ql=["onUpdate:modelValue"],Jl=["onUpdate:modelValue"],Xl={class:"text-end"},Zl=["onClick"],en={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),A=l,C=ge({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),T={item:{title:{title:se.withMessage("title is required.",le),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("durationInMillis is required.",le),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",le),$autoDirty:!0,$lazy:!0}}},i=Te(T,C),X=Ie(()=>{const b=U.moment;if(C.durationTime&&C.durationTime!=="00:00:00"&&U.isValidTime(C.durationTime)){const _=b().startOf("day"),g=_.format("YYYY-MM-DD ")+C.durationTime,f=b(g).subtract(_);return C.item.durationInMillis=f.valueOf(),C.item.durationInMillis}return 0});fe(async()=>{await r(),await m(),await Q()});const Q=async()=>{try{await W.get(`/api/v1/videos/${A.id}/`).then(b=>{C.item=b.data;const _=U.moment(C.item.dateReleased).format("YYYY-MM-DD");C.item.dateReleased=_;const g=C.lookups.genres,d=C.item.genres.map(n=>n.genre);g.forEach(n=>{n.selected=d.includes(n.id)});const f=C.lookups.categories,a=C.item.categories.map(n=>n.category);f.forEach(n=>{n.selected=a.includes(n.id)})})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},r=async()=>{try{await W.get("/api/v1/lookups/video-genres/").then(b=>{const g=b.data.filter(d=>d.id!==0);C.lookups.genres=g})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},m=async()=>{try{await W.get("/api/v1/lookups/video-formats/").then(b=>{const g=b.data.filter(d=>d.id!==0);C.lookups.formats=g})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},Y=async()=>{const b=C;if(P.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const g=U.clone(b.item);g.durationInMillis=X.value;const d=U.moment(b.item.dateReleased).utc(!0).format();g.dateReleased=d;const f=C.lookups.genres.filter(n=>n.selected).map(n=>n.id);g.genres=f;const a=C.lookups.categories.filter(n=>n.selected).map(n=>n.id);g.categories=a;debugger;await W.put("/api/v1/videos/",g).then(n=>{G.success("Edit Video","Video edited.",{onClose:async()=>{const v=`${A.urlView}/${A.id}`;await K.push(v)}})})}catch(g){V.value=U.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{P.value=!1}},u=()=>{const b={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};C.item.formats.push(b)},I=b=>{C.item.formats.splice(b,1)};return(b,_)=>{const g=te("router-link"),d=te("PageHeader"),f=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:_[0]||(_[0]=a=>Y()),class:"btn btn-primary"},_[6]||(_[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wl),e("button",{onClick:Q,class:"btn btn-secondary ms-2"},_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(g,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-2"},{default:z(()=>_[8]||(_[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(f,{errorMessage:o(V),vuelidate:o(i)},{default:z(()=>[e("div",null,[e("div",hl,[e("div",_l,[e("div",kl,[B(e("input",{"onUpdate:modelValue":_[1]||(_[1]=a=>C.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,C.item.title]]),_[9]||(_[9]=e("label",{for:"title",class:""},"Title",-1)),o(i).item.title.$error?(t(),s("div",Sl,[(t(!0),s(O,null,q(o(i).item.title.$errors,a=>(t(),s("div",{key:a.$uid},c(a.$message),1))),128))])):D("",!0)])]),e("div",Tl,[e("div",Ml,[B(e("input",{"onUpdate:modelValue":_[2]||(_[2]=a=>C.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,C.item.dateReleased]]),_[10]||(_[10]=e("label",{for:"dateReleased",class:""},"Duration Time",-1))])]),e("div",Il,[e("div",xl,[B(e("input",{"onUpdate:modelValue":_[3]||(_[3]=a=>C.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,C.durationTime]]),_[11]||(_[11]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Cl,[e("div",Vl,[B(e("textarea",{"onUpdate:modelValue":_[4]||(_[4]=a=>C.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,C.item.description]]),_[12]||(_[12]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",Pl,[_[13]||(_[13]=e("b",null,"Genres",-1)),e("div",Ol,[(t(!0),s(O,null,q(C.lookups.genres,a=>(t(),s("div",Al,[e("div",Ul,[B(e("input",{"onUpdate:modelValue":n=>a.selected=n,class:"form-check-input",type:"checkbox",id:a.name},null,8,Dl),[[Be,a.selected]]),e("label",{class:"form-check-label",for:a.name},c(a.name),9,Hl)])]))),256))])]),e("div",Ll,[_[14]||(_[14]=e("b",null,"Categories",-1)),e("div",El,[(t(!0),s(O,null,q(C.lookups.categories,a=>(t(),s("div",ql,[e("div",Bl,[B(e("input",{"onUpdate:modelValue":n=>a.selected=n,class:"form-check-input",type:"checkbox",id:a.name},null,8,Nl),[[Be,a.selected]]),e("label",{class:"form-check-label",for:a.name},c(a.name),9,Rl)])]))),256))])]),e("div",Fl,[e("div",zl,[e("button",{onClick:_[5]||(_[5]=a=>u()),class:"btn btn-outline-primary btn-sm"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Gl,[_[17]||(_[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(C.item.formats,(a,n)=>(t(),s("tr",jl,[e("td",Yl,c(n+1),1),e("td",null,[B(e("select",{"onUpdate:modelValue":v=>a.format=v,class:"form-control"},[(t(!0),s(O,null,q(C.lookups.formats,v=>(t(),s("option",{value:v.id},c(v.name),9,Kl))),256))],8,Wl),[[pe,a.format]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":v=>a.serverUrl=v,type:"text",class:"form-control"},null,8,Ql),[[Z,a.serverUrl]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":v=>a.path=v,type:"text",class:"form-control"},null,8,Jl),[[Z,a.path]])]),e("td",Xl,[e("button",{onClick:v=>I(n),class:"btn btn-outline-warning btn-sm"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Zl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},tn={class:"ms-2"},sn={class:"input-group"},on=["value"],an={class:"ms-1"},ln={class:"input-group"},nn={class:"ms-1"},rn={class:"input-group"},dn={class:"table-responsive border shadow-sm"},un={class:"table table-hover mb-0"},cn=["textContent"],mn={class:"d-flex flex-row justify-content-start"},fn={class:"mt-1"},pn=["src"],vn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},gn={class:"ms-2"},bn={key:0},yn={class:"badge bg-primary me-1"},$n={key:1},wn={class:"badge bg-info me-1"},hn={class:"text-center"},_n={class:"text-end"},kn=["onClick"],Sn={key:0,class:"fas fa-fw fa-chevron-circle-up"},Tn={key:1,class:"fas fa-fw fa-chevron-circle-down"},Mn={key:0},In={colspan:"999"},xn={class:""},Cn={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},Vn={class:"col mb-2"},Pn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},On={class:"col col-lg-auto mb-2"},An={key:0},Un={class:"badge bg-secondary me-1"},Dn="/api/v1/videos/search",Hn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,security:C,filter:T,initializeFilter:i,getQuery:X,saveQuery:Q,search:r,getRowNumber:m,setSelected:Y,isSelected:u}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${S==null?void 0:S.userId}/videos/search`,baseUrl:Dn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(b,_)=>{const g=b.value,d=new URLSearchParams(window.location.search),f=JSON.parse(localStorage.getItem(_))||{};g.query.genre=d.get("genre")||f.genre||g.query.genre||0,g.query.category=d.get("category")||f.category||g.query.category||0},getQuery:b=>["?c=",encodeURIComponent(b.query.criteria),"&p=",b.pageIndex,"&s=",b.pageSize,"&sf=",b.sortField,"&so=",b.sortOrder,"&genre=",b.query.genre,"&category=",b.query.category].join(""),saveQuery:(b,_)=>{localStorage.setItem(_,JSON.stringify({criteria:b.query.criteria,pageIndex:b.pageIndex,pageSize:b.pageSize,sortField:b.sortField,sortOrder:b.sortOrder,visible:b.visible,genre:b.query.genre,category:b.query.category}))}});fe(async()=>{i(),await I(),await r()});const I=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(b=>{const _=b.data;T.value.lookups.genres=_})}catch(b){W.value=ee.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}};return(b,_)=>{const g=te("router-link"),d=te("PageHeader"),f=te("m-pagination"),a=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:z(()=>[F(g,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>_[5]||(_[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",tn,[e("div",sn,[_[6]||(_[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),B(e("select",{"onUpdate:modelValue":_[0]||(_[0]=n=>o(T).query.genre=n),class:"form-select"},[(t(!0),s(O,null,q(o(T).lookups.genres,n=>(t(),s("option",{value:n.id},c(n.name),9,on))),256))],512),[[pe,o(T).query.genre]])])]),e("div",an,[e("div",ln,[_[8]||(_[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),B(e("select",{"onUpdate:modelValue":_[1]||(_[1]=n=>o(T).query.category=n),class:"form-select"},_[7]||(_[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[pe,o(T).query.category]])])]),e("div",nn,[e("div",rn,[B(e("input",{"onUpdate:modelValue":_[2]||(_[2]=n=>o(T).query.criteria=n),onKeyup:_[3]||(_[3]=Ue(n=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[4]||(_[4]=n=>o(r)(1))},_[9]||(_[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(a,{errorMessage:o(W)},{default:z(()=>[e("div",dn,[e("table",un,[_[14]||(_[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(n,v)=>(t(),s(O,{key:n.videoId},[e("tr",null,[e("td",{textContent:c(o(m)(v)),class:"text-center"},null,8,cn),e("td",null,[e("div",mn,[e("div",null,[n.thumbnails.length>0?(t(!0),s(O,{key:0},q(n.thumbnails,$=>(t(),s("div",fn,[e("img",{src:$.url,class:"img-fuild border",width:"128"},null,8,pn)]))),256)):(t(),s("img",vn))]),e("div",gn,[F(g,{to:`${l.urlView}/${n.videoId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[J(c(n.title),1)]),_:2},1032,["to"]),e("div",null,[n.categories.length>0?(t(),s("div",bn,[(t(!0),s(O,null,q(n.categories,$=>(t(),s("span",yn,c($.categoryName),1))),256))])):D("",!0),n.genres.length>0?(t(),s("div",$n,[(t(!0),s(O,null,q(n.genres,$=>(t(),s("span",wn,c($.genreName),1))),256))])):D("",!0)])])])]),e("td",hn,c(o(ee).moment.utc(n.durationInMillis).format("HH:mm:ss")),1),e("td",_n,[e("button",{onClick:$=>n.expand=!n.expand,class:re([[n.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[n.expand?(t(),s("span",Sn)):(t(),s("span",Tn))],10,kn)])]),n.expand?(t(),s("tr",Mn,[_[13]||(_[13]=e("td",null,null,-1)),e("td",In,[e("div",xn,[e("div",Cn,[e("div",Vn,[_[10]||(_[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,c(n.description),1)]),e("div",Pn,[_[11]||(_[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,c(o(st).utc(n.dateReleased).format("l")),1)]),e("div",On,[_[12]||(_[12]=e("h6",{class:"fw-bold"},"Formats",-1)),n.formats.length>0?(t(),s("div",An,[(t(!0),s(O,null,q(n.formats,$=>(t(),s("span",Un,c($.formatName),1))),256))])):D("",!0)])])])])])):D("",!0)],64))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(f,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ln={key:0},En={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},qn={class:"nav-item",role:"presentation"},Bn={class:"nav-item",role:"presentation"},Nn={class:"nav-item",role:"presentation"},Rn={class:"nav-item",role:"presentation"},Fn={class:"tab-content",id:"myTabContent"},zn={class:"mt-2"},Gn={class:"row row-cols-1 row-cols-sm-2"},jn={class:"col"},Yn=["id"],Wn={class:"col"},Kn={class:"col"},Qn={class:"form-floating mb-2"},Jn={class:"row row-cols-1 row-cols-sm-2"},Xn={class:"col"},Zn={class:"form-floating mb-2"},er={class:"col"},tr={class:"form-floating mb-2"},sr={class:"col"},or={class:"form-floating mb-2"},ar={class:"mt-1"},lr={class:"badge bg-info me-1"},nr={class:"badge bg-primary me-1"},rr={class:"mt-2"},ir={class:"table-responsive border"},dr={class:"table table-hover mb-0"},ur={class:"table-group-divider"},cr={class:"align-middle"},mr={class:"text-center"},fr={class:"mt-2"},pr={class:"text-end"},vr={class:"table-responsive border mt-2"},gr={class:"table table-hover mb-0 caption-top"},br={class:"mt-2"},yr={class:"table-responsive"},$r={class:"table table-hover mb-0 caption-top"},wr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:K,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:L,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:i,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});xe("$config");const Q=we();Q.user;const r=ge({user:Q.user,item:null,hls:null}),m=ue();fe(async()=>{await b(),m.value=L.getPageTab("video")||"information-tab"}),Ae(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const Y=f=>{L.setPageTab("video",f),m.value=f},u=f=>f!==m.value?"":"active",I=f=>f!==m.value?"":"show active",b=async()=>{const f=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const a=`/api/v1/videos/${p.id}/`;await ee.get(a).then(n=>{f.item=n.data,f.item.duration=L.moment.utc(f.item.durationInMillis).format("HH:mm:ss"),f.item.dateReleased=L.moment.utc(f.item.dateReleased).format("ll")}),g()}catch(a){U.value=L.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{await b()},g=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),r.hls&&r.hls.destroy();const a=`video-${r.item.videoId}`;var f=document.getElementById(a);const n=r.item.formats.find($=>$.formatName==="HLS"),v=n.serverUrl+n.path;r.hls=L.createHlsStream(f,v,!1),r.hls.startLoad(-1)}},d=async()=>{if(!k.value)try{k.value=!0,U.value="";const f=`/api/v1/videos/${p.id}/get-blank-frames/`;await ee.post(f).then(a=>{}),k.value=!1,await _()}catch(f){U.value=L.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{k.value=!1}};return(f,a)=>{const n=te("router-link"),v=te("PageHeader"),$=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(v,{"page-icon":"fas fa-fw fa-video",pageTitle:o(P)},{default:z(()=>[F(n,{to:`${l.urlEdit}/${l.id}`,class:"btn btn-primary ms-1"},{default:z(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=y=>_()),class:"ms-2 btn btn-secondary"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=y=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F($,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",Ln,[e("div",null,[e("ul",En,[e("li",qn,[e("button",{onClick:a[2]||(a[2]=y=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Bn,[e("button",{onClick:a[3]||(a[3]=y=>Y("formats-tab")),class:re([u("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",Nn,[e("button",{onClick:a[4]||(a[4]=y=>Y("blankFrames-tab")),class:re([u("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",Rn,[e("button",{onClick:a[5]||(a[5]=y=>Y("vodSources-tab")),class:re([u("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",Fn,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",zn,[e("div",Gn,[e("div",jn,[e("video",{id:`video-${r.item.videoId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,Yn)]),e("div",Wn,[e("div",Kn,[e("div",Qn,[B(e("input",{"onUpdate:modelValue":a[6]||(a[6]=y=>r.item.title=y),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,r.item.title]]),a[14]||(a[14]=e("label",{for:"title"},"Title",-1))])]),e("div",Jn,[e("div",Xn,[e("div",Zn,[B(e("input",{"onUpdate:modelValue":a[7]||(a[7]=y=>r.item.dateReleased=y),type:"text",class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Z,r.item.dateReleased]]),a[15]||(a[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",er,[e("div",tr,[B(e("input",{"onUpdate:modelValue":a[8]||(a[8]=y=>r.item.duration=y),type:"text",class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Z,r.item.duration]]),a[16]||(a[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",sr,[e("div",or,[B(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=y=>r.item.description=y),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,r.item.description]]),a[17]||(a[17]=e("label",{for:"description"},"Description",-1))])]),e("div",ar,[(t(!0),s(O,null,q(r.item.genres,y=>(t(),s("span",lr,c(y.genreName),1))),256)),(t(!0),s(O,null,q(r.item.categories,y=>(t(),s("span",nr,c(y.categoryName),1))),256))])])])])],2),e("div",{class:re([I("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",rr,[e("div",ir,[e("table",dr,[a[18]||(a[18]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",ur,[(t(!0),s(O,null,q(r.item.formats,(y,M)=>(t(),s("tr",cr,[e("td",mr,c(M+1),1),e("td",null,c(y.formatName),1),e("td",null,c(y.serverUrl),1),e("td",null,c(y.path),1)]))),256))])])])])],2),e("div",{class:re([I("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",fr,[e("div",null,[e("div",pr,[e("button",{onClick:a[10]||(a[10]=y=>d()),class:"btn btn-outline-primary btn-sm"},a[19]||(a[19]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),J("Process ")]))]),e("div",vr,[e("table",gr,[a[20]||(a[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.blankFrames,(y,M)=>(t(),s("tr",{key:y.videoBlankFrameId},[e("td",null,c(M+1),1),e("td",null,c(o(L).moment.utc(y.startInMillis).format("HH:mm:ss")),1),e("td",null,c(o(L).moment.utc(y.endInMillis).format("HH:mm:ss")),1),e("td",null,c(o(L).moment.utc(y.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Se,r.item.blankFrames.length>0]])])])])])],2),e("div",{class:re([I("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",br,[e("div",yr,[e("table",$r,[a[21]||(a[21]=e("caption",null,"VOD Sources",-1)),a[22]||(a[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.vodSources,(y,M)=>(t(),s("tr",{key:y.vodSourceId},[e("td",null,c(M+1),1),e("td",null,[F(n,{to:`${p.urlViewVodSource}/${encodeURIComponent(y.vodSourceId)}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(y.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Se,r.item.vodSources.length>0]])])])])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},hr=["disabled"],_r={class:"form-floating mb-2"},kr={key:0,class:"d-block invalid-feedback"},Sr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),A=l,C=ge({lookups:{},item:{name:null}}),T={item:{name:{required:se.withMessage("name is required.",le),$autoDirty:!0,$lazy:!0}}},i=Te(T,C);fe(async()=>{});const X=async()=>{const Q=C;if(P.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const m=U.clone(Q.item);await W.post("/api/v1/sourcegroups/",m).then(Y=>{G.success("Add Source Group","Source group added.",{onClose:async()=>{const u=`${A.urlView}/${Y.data}`;await K.push(u)}})})}catch(m){V.value=U.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{P.value=!1}};return(Q,r)=>{const m=te("router-link"),Y=te("PageHeader"),u=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(Y,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:r[0]||(r[0]=I=>X()),class:"btn btn-primary"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hr),F(m,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(u,{errorMessage:o(V),vuelidate:o(i)},{default:z(()=>[e("div",null,[e("div",_r,[B(e("input",{"onUpdate:modelValue":r[1]||(r[1]=I=>C.item.name=I),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,C.item.name]]),r[4]||(r[4]=e("label",{for:"name"},"Name",-1)),o(i).item.name.$error?(t(),s("div",kr,[(t(!0),s(O,null,q(o(i).item.name.$errors,I=>(t(),s("div",{key:I.$uid},c(I.$message),1))),128))])):D("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Tr={key:0,class:"d-flex justify-content-end"},Mr=["disabled"],Ir={key:0},xr={class:"row row-cols-1 row-cols-sm-2"},Cr={class:"col"},Vr={class:"form-floating mb-2"},Pr={key:0,class:"d-block invalid-feedback"},Or={class:"col"},Ar={class:"form-floating mb-2"},Ur={key:0,class:"d-block invalid-feedback"},Dr={class:"row row-cols-sm-2"},Hr={class:"col"},Lr={class:"form-floating mb-2"},Er={class:"form-floating mb-2"},qr={key:0,class:"d-block invalid-feedback"},Br={class:"form-floating mb-2"},Nr={key:0,class:"d-block invalid-feedback"},Rr={class:"col"},Fr={class:"form-floating mb-2"},Xe={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),A=l,C=ge({editorElementId:"editor",htmlContent:"",item:null}),T={item:{title:{required:se.withMessage("Title is required.",le),$autoDirty:!0,$lazy:!0},eidr:{required:se.withMessage("eidr is required.",le),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:se.withMessage("eidrPrefix is required.",le),$autoDirty:!0,$lazy:!0}},htmlContent:{required:se.withMessage("Content is required.",le),$autoDirty:!0,$lazy:!0}},i=Te(T,C);fe(async()=>{await r()});const X=()=>{const Y=C;var u=document.getElementById(Y.editorElementId);u.innerHTML=Y.htmlContent},Q=Y=>{const u=C;u.htmlContent=Y.target.innerHTML;var I=document.getElementById(u.editorElementId);I.value=u.htmlContent},r=async()=>{const Y=C;if(!P.value)try{P.value=!0,C.item=null,await W.get(`/api/v1/movies/${A.id}`).then(u=>{Y.item=u.data,Y.htmlContent=Y.item.description}),X()}catch(u){V.value=U.getErrorMessageAsHtml(u)}finally{P.value=!1}},m=async()=>{const Y=C;if(P.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const I=U.clone(Y.item);I.description=Y.htmlContent,await W.put("/api/v1/movies",I).then(b=>{G.success("Edit Movie","Movie edited",{onClose:async()=>{const _=`${A.urlView}/${A.id}`;await K.push(_)}})})}catch(I){V.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{P.value=!1}};return(Y,u)=>{const I=te("router-link"),b=te("PageHeader"),_=te("PageBody");return t(),s("div",null,[F(b,{"page-icon":"fas fa-fw fa-film",pageTitle:o(S),"header-break":"row row-cols-2 row-cols-sm-2"},{default:z(()=>[C.item?(t(),s("div",Tr,[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:u[0]||(u[0]=g=>m()),class:"btn btn-primary"},u[7]||(u[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Mr),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(I,{to:`${A.urlView}/${A.id}`,class:"ms-1 btn btn-secondary"},{default:z(()=>u[9]||(u[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):D("",!0)]),_:1},8,["pageTitle"]),F(_,{errorMessage:o(V),vuelidate:o(i)},{default:z(()=>[C.item?(t(),s("div",Ir,[e("div",xr,[e("div",Cr,[e("div",Vr,[B(e("input",{"onUpdate:modelValue":u[1]||(u[1]=g=>C.item.eidrPrefix=g),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Z,C.item.eidrPrefix]]),u[10]||(u[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(i).item.eidrPrefix.$error?(t(),s("div",Pr,[(t(!0),s(O,null,q(o(i).item.eidrPrefix.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):D("",!0)])]),e("div",Or,[e("div",Ar,[B(e("input",{"onUpdate:modelValue":u[2]||(u[2]=g=>C.item.eidr=g),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Z,C.item.eidr]]),u[11]||(u[11]=e("label",{for:"title"},"Eidr",-1)),o(i).item.eidr.$error?(t(),s("div",Ur,[(t(!0),s(O,null,q(o(i).item.eidr.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):D("",!0)])])]),e("div",Dr,[e("div",Hr,[e("div",Lr,[B(e("input",{"onUpdate:modelValue":u[3]||(u[3]=g=>C.item.releaseYear=g),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Z,C.item.releaseYear]]),u[12]||(u[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Er,[B(e("input",{"onUpdate:modelValue":u[4]||(u[4]=g=>C.item.title=g),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Z,C.item.title]]),u[13]||(u[13]=e("label",{for:"title"},"Title",-1)),o(i).item.title.$error?(t(),s("div",qr,[(t(!0),s(O,null,q(o(i).item.title.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):D("",!0)])])]),e("div",null,[e("div",Br,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:u[5]||(u[5]=g=>Q(g))},null,32),u[14]||(u[14]=e("label",{for:"editor"},"Content",-1)),o(i).htmlContent.$error?(t(),s("div",Nr,[(t(!0),s(O,null,q(o(i).htmlContent.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):D("",!0)])]),e("div",Rr,[e("div",Fr,[B(e("textarea",{"onUpdate:modelValue":u[6]||(u[6]=g=>C.item.metadata=g),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Z,C.item.metadata]]),u[15]||(u[15]=e("label",{for:"title"},"Metadata",-1))])])])):D("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},zr={components:{Page:Xe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Gr(l,p,S,P,k,H){const V=te("Page");return t(),ve(V,{id:S.id,urlView:S.urlView},null,8,["id","urlView"])}const jr=Ve(zr,[["render",Gr]]),Yr={class:"ms-2"},Wr={class:"input-group"},Kr={class:"table-responsive border shadow-sm"},Qr={class:"table table-hover mb-0"},Jr=["textContent"],Xr={key:0,class:"fas fa-fw fa-check-circle text-success"},Zr="/api/v1/sourcegroups/search",ei={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,security:C,filter:T,initializeFilter:i,getQuery:X,saveQuery:Q,search:r,getRowNumber:m,setSelected:Y,isSelected:u}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${S==null?void 0:S.userId}/source-groups/search`,baseUrl:Zr,filter:{updateUrl:!0}});return fe(async()=>{i(),await r()}),(I,b)=>{const _=te("router-link"),g=te("PageHeader"),d=te("m-pagination"),f=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(g,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k)},{default:z(()=>[F(_,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>b[3]||(b[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Yr,[e("div",Wr,[B(e("input",{"onUpdate:modelValue":b[0]||(b[0]=a=>o(T).query.criteria=a),onKeyup:b[1]||(b[1]=Ue(a=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:b[2]||(b[2]=a=>o(r)(1))},b[4]||(b[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(f,{errorMessage:o(W)},{default:z(()=>[e("div",Kr,[e("table",Qr,[b[5]||(b[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(a,n)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:c(o(m)(n)),class:"text-center"},null,8,Jr),e("td",null,[F(_,{to:`${l.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[a.arn?(t(),s("span",Xr)):D("",!0),J(" "+c(a.name),1)]),_:2},1032,["to"])]),e("td",null,c(a.channelOutputs),1),e("td",null,c(a.packageConfigurations),1)]))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(d,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ti={key:0},si={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},oi={class:"nav-item",role:"presentation"},ai={class:"nav-item",role:"presentation"},li={class:"nav-item",role:"presentation"},ni={class:"tab-content",id:"myTabContent"},ri={class:"mt-2"},ii={class:"form-floating mb-2"},di={class:"mt-2"},ui={class:"table-responsive border"},ci={class:"table table-hover mb-0"},mi={class:"mt-2"},fi={class:"table-responsive border"},pi={class:"table table-hover mb-0"},vi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:K,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:L,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:i,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});xe("$config");const Q=we();Q.user;const r=ge({user:Q.user,item:null}),m=ue();fe(async()=>{await b(),m.value=L.getPageTab("sourceGroup")||"information-tab"});const Y=d=>{L.setPageTab("sourceGroup",d),m.value=d},u=d=>d!==m.value?"":"active",I=d=>d!==m.value?"":"show active",b=async()=>{const d=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const f=`/api/v1/sourcegroups/${p.id}/`;await ee.get(f).then(a=>{d.item=a.data})}catch(f){U.value=L.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{if(!k.value)try{k.value=!0,U.value="";const d=`/api/v1/sourcegroups/${p.id}/`;await ee.delete(d).then(f=>{A.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${p.urlMain}/`;await G.push(a)}})})}catch(d){U.value=L.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{k.value=!1}},g=async()=>{await b()};return(d,f)=>{const a=te("PageHeader"),n=te("router-link"),v=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(P)},{default:z(()=>[e("button",{onClick:f[0]||(f[0]=$=>_()),class:"ms-1 btn btn-warning"},f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:f[1]||(f[1]=$=>g()),class:"ms-2 btn btn-secondary"},f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:f[2]||(f[2]=$=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},f[9]||(f[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",ti,[e("div",null,[e("ul",si,[e("li",oi,[e("button",{onClick:f[3]||(f[3]=$=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ai,[e("button",{onClick:f[4]||(f[4]=$=>Y("channelOutputs-tab")),class:re([u("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",li,[e("button",{onClick:f[5]||(f[5]=$=>Y("packageConfigurations-tab")),class:re([u("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",ni,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ri,[e("div",ii,[B(e("input",{"onUpdate:modelValue":f[6]||(f[6]=$=>r.item.name=$),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),f[10]||(f[10]=e("label",{for:"name"},"Name",-1))])])],2),e("div",{class:re([I("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",di,[e("div",ui,[e("table",ci,[f[11]||(f[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.channelOutputs,($,y)=>(t(),s("tr",{key:$.channelOutputId},[e("td",null,c(y+1),1),e("td",null,[F(n,{to:`${l.urlViewChannel}/${$.channelId}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c($.manifestName),1)]),_:2},1032,["to"])]),e("td",null,c($.outputType),1)]))),128))]),_:1},512),[[Se,r.item.channelOutputs.length>0]])])])])],2),e("div",{class:re([I("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",mi,[e("div",fi,[e("table",pi,[f[12]||(f[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.packageConfigurations,($,y)=>(t(),s("tr",{key:$.packageConfigurationId},[e("td",null,c(y+1),1),e("td",null,[F(n,{to:`${l.urlViewVodSource}/${$.vodSourceId}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c($.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,c($.path),1),e("td",null,c($.type),1)]))),128))]),_:1},512),[[Se,r.item.packageConfigurations.length>0]])])])])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},gi=["disabled"],bi={class:"form-floating mb-2"},yi={key:0,class:"d-block invalid-feedback"},$i={class:"form-floating mb-2"},wi={key:0,class:"d-block invalid-feedback"},hi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),A=l,C=ge({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),T={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:se.withMessage("HTTP Configuration Base Url is required.",le),$autoDirty:!0,$lazy:!0}}},i=Te(T,C);fe(async()=>{});const X=async()=>{const Q=C;if(P.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const m=U.clone(Q.item);await W.post("/api/v1/sourcelocations/",m).then(Y=>{G.success("Add Source Location","Source location added.",{onClose:async()=>{const u=`${A.urlView}/${Y.data}`;await K.push(u)}})})}catch(m){V.value=U.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{P.value=!1}};return(Q,r)=>{const m=te("router-link"),Y=te("PageHeader"),u=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(Y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:r[0]||(r[0]=I=>X()),class:"btn btn-primary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,gi),F(m,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(u,{errorMessage:o(V),vuelidate:o(i)},{default:z(()=>[e("div",null,[e("div",bi,[B(e("input",{"onUpdate:modelValue":r[1]||(r[1]=I=>C.item.name=I),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,C.item.name]]),r[5]||(r[5]=e("label",{for:"name"},"Name",-1)),o(i).item.name.$error?(t(),s("div",yi,[(t(!0),s(O,null,q(o(i).item.name.$errors,I=>(t(),s("div",{key:I.$uid},c(I.$message),1))),128))])):D("",!0)]),e("div",$i,[B(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=I=>C.item.httpConfigurationBaseUrl=I),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Z,C.item.httpConfigurationBaseUrl]]),r[6]||(r[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(i).item.httpConfigurationBaseUrl.$error?(t(),s("div",wi,[(t(!0),s(O,null,q(o(i).item.httpConfigurationBaseUrl.$errors,I=>(t(),s("div",{key:I.$uid},c(I.$message),1))),128))])):D("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},_i={components:{Page:Xe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ki(l,p,S,P,k,H){const V=te("Page");return t(),ve(V,{id:S.id,urlView:S.urlView},null,8,["id","urlView"])}const Si=Ve(_i,[["render",ki]]),Ti={class:"ms-1"},Mi={class:"input-group"},Ii={class:"table-responsive border shadow-sm"},xi={class:"table table-hover mb-0"},Ci={class:"text-center"},Vi=["textContent"],Pi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Oi={class:"text-center"},Ai=["onUpdate:modelValue"],Ui="/api/v1/sourcelocations/search",Di={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,security:C,filter:T,initializeFilter:i,getQuery:X,saveQuery:Q,search:r,getRowNumber:m,setSelected:Y,isSelected:u}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${S==null?void 0:S.userId}/source-locations/search`,baseUrl:Ui,filter:{updateUrl:!0}}),I=Ie(()=>{const g=T.value;return g&&g.items?g.items.filter(a=>a.selected):null});fe(async()=>{i(),await r()});const b=async()=>{if(!(I.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!H.value){W.value=null;try{H.value=!0;const f={sourceLocationIds:I.value.map(a=>a.sourceLocationId)};await G.post("/api/v1/sourceLocations/publish/",f).then(a=>{L.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),H.value=!1,await r()}catch(d){W.value=ee.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{H.value=!1}}},_=async()=>{if(!(I.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!H.value){W.value=null;try{H.value=!0;const f={sourceLocationIds:I.value.map(a=>a.sourceLocationId)};await G.post("/api/v1/sourceLocations/unpublish/",f).then(a=>{L.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),H.value=!1,await r()}catch(d){W.value=ee.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{H.value=!1}}};return(g,d)=>{const f=te("router-link"),a=te("PageHeader"),n=te("m-pagination"),v=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k)},{default:z(()=>[F(f,{to:l.urlAdd,class:"btn btn-primary ms-2"},{default:z(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ti,[e("div",Mi,[B(e("input",{"onUpdate:modelValue":d[0]||(d[0]=$=>o(T).query.criteria=$),onKeyup:d[1]||(d[1]=Ue($=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=$=>o(r)(1))},d[4]||(d[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(W)},{default:z(()=>[e("div",Ii,[e("table",xi,[e("thead",null,[e("tr",null,[d[7]||(d[7]=e("td",{class:"text-center"},"#",-1)),d[8]||(d[8]=e("th",null,"Name",-1)),d[9]||(d[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",Ci,[I.value.length?(t(),s(O,{key:0},[e("button",{onClick:b,class:"btn btn-primary btn-sm"},d[5]||(d[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:_,class:"btn btn-warning btn-sm ms-1"},d[6]||(d[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):D("",!0)])])]),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,($,y)=>(t(),s("tr",{key:$.sourceLocationId},[e("td",{textContent:c(o(m)(y)),class:"text-center"},null,8,Vi),e("td",null,[F(f,{to:`${l.urlView}/${$.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[$.arn?(t(),s("i",Pi)):D("",!0),e("span",null,c($.name),1)]),_:2},1032,["to"])]),e("td",null,c($.httpConfigurationBaseUrl),1),e("td",Oi,[B(e("input",{"onUpdate:modelValue":M=>$.selected=M,type:"checkbox",class:"form-check-input"},null,8,Ai),[[Be,$.selected]])])]))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(n,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Hi={key:0},Li={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ei={class:"nav-item",role:"presentation"},qi={class:"nav-item",role:"presentation"},Bi={class:"nav-item",role:"presentation"},Ni={class:"tab-content",id:"myTabContent"},Ri={class:"mt-2"},Fi={class:"col"},zi={class:"form-floating mb-2"},Gi={class:"col"},ji={class:"form-floating mb-2"},Yi={class:"mt-2"},Wi={class:"table-responsive border"},Ki={class:"table table-hover mb-0"},Qi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Ji={class:"mt-2"},Xi={class:"table-responsive border"},Zi={class:"table table-hover mb-0"},ed={key:0,class:"fas fa-fw fa-check-circle text-success"},td={class:"badge bg-info"},sd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:K,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:L,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:i,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});xe("$config");const Q=we();Q.user;const r=ge({user:Q.user,item:null}),m=ue();fe(async()=>{await b(),m.value=L.getPageTab("sourceLocation")||"information-tab"});const Y=f=>{L.setPageTab("sourceLocation",f),m.value=f},u=f=>f!==m.value?"":"active",I=f=>f!==m.value?"":"show active",b=async()=>{const f=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const a=`/api/v1/sourcelocations/${p.id}/`;await ee.get(a).then(n=>{f.item=n.data})}catch(a){U.value=L.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{await b()},g=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!k.value){U.value=null;try{k.value=!0;const a={sourceLocationIds:[p.id]};await ee.post("/api/v1/sourcelocations/publish/",a).then(n=>{A.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),k.value=!1,await _()}catch(a){U.value=L.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!k.value){U.value=null;try{k.value=!0;const a={sourceLocationIds:[p.id]};await ee.post("/api/v1/sourcelocations/unpublish/",a).then(n=>{A.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),k.value=!1,await _()}catch(a){U.value=L.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}};return(f,a)=>{const n=te("PageHeader"),v=te("router-link"),$=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(n,{"page-icon":"fas fa-fw fa-building",pageTitle:o(P)},{default:z(()=>[r.item?(t(),s(O,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=y=>d()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=y=>g()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):D("",!0),e("button",{onClick:a[2]||(a[2]=y=>_()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=y=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F($,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",Hi,[e("div",null,[e("ul",Li,[e("li",Ei,[e("button",{onClick:a[4]||(a[4]=y=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",qi,[e("button",{onClick:a[5]||(a[5]=y=>Y("vodSources-tab")),class:re([u("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Bi,[e("button",{onClick:a[6]||(a[6]=y=>Y("programs-tab")),class:re([u("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Ni,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Ri,[e("div",Fi,[e("div",zi,[B(e("input",{"onUpdate:modelValue":a[7]||(a[7]=y=>r.item.name=y),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Gi,[e("div",ji,[B(e("input",{"onUpdate:modelValue":a[8]||(a[8]=y=>r.item.httpConfigurationBaseUrl=y),type:"text",class:"form-control-plaintext",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Z,r.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:re([I("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Yi,[e("div",Wi,[e("table",Ki,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.vodSources,(y,M)=>(t(),s("tr",{key:y.vodSourceId},[e("td",null,c(M+1),1),e("td",null,[y.arn?(t(),s("span",Qi)):D("",!0),F(v,{to:`${p.urlViewVodSource}/${encodeURIComponent(y.vodSourceId)}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(y.name),1)]),_:2},1032,["to"])]),e("td",null,[F(v,{to:`${p.urlViewVideo}/${encodeURIComponent(y.video.videoId)}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(y.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,c(o(L).moment.utc(y.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Se,r.item.vodSources.length>0]])])])])],2),e("div",{class:re([I("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Ji,[e("div",Xi,[e("table",Zi,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.programs,(y,M)=>(t(),s("tr",{key:y.programId},[e("td",null,c(M+1),1),e("td",null,[F(v,{to:`${p.urlViewChannel}/${encodeURIComponent(y.channel.channelId)}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(y.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[y.arn?(t(),s("span",ed)):D("",!0),J(" "+c(y.name)+" ",1),e("div",null," Start: "+c(o(L).moment.utc(y.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+c(o(L).moment.utc(y.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[J(c(o(L).moment(y.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",td,c(o(L).moment(y.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Se,r.item.programs.length>0]])])])])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},od=["id"],ad={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ld={class:"modal-content"},nd={class:"modal-header"},rd={class:"modal-title"},id={class:"modal-body p-1"},dd={class:"row row-cols-1 row-cols-sm-3"},ud={class:"col"},cd={class:"form-floating mb-2"},md=["value"],fd={class:"col"},pd={class:"form-floating mb-2"},vd=["value"],gd={class:"col"},bd={class:"input-group mb-2"},yd={class:"form-floating"},$d={class:"row row-cols-1 row-cols-sm-2"},wd={class:"col-sm-4"},hd={class:"card"},_d={key:0,class:"mt-2"},kd={class:"col"},Sd={class:"form-floating mb-2"},Td={class:"col ms-2 my-2"},Md={class:"badge bg-info me-1"},Id={class:"badge bg-primary me-1"},xd={class:"row row-cols-1 row-cols-sm-2"},Cd={class:"col"},Vd={class:"form-floating mb-2"},Pd={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Od={class:"col"},Ad={class:"form-floating mb-2"},Ud={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Dd={class:"col"},Hd={class:"form-floating mb-2"},Ld={class:"col-sm-8"},Ed={class:"table-responsive border shadow-sm"},qd={class:"table table-sm table-hover mb-0 overflow-auto"},Bd=["textContent"],Nd={class:"d-flex flex-row justify-content-start"},Rd={class:"mt-1"},Fd=["src"],zd={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Gd={class:"ms-2"},jd=["onClick"],Yd={class:"modal-footer"},Wd="/api/v1/videos/search",ut={__name:"_selectVideo",emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,security:T,filter:i,initializeFilter:X,getQuery:Q,saveQuery:r,search:m,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select Video",cacheKey:`${k==null?void 0:k.userId}/videos/select`,baseUrl:Wd,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(M,w)=>{const N=M.value,h=new URLSearchParams(window.location.search),x=JSON.parse(localStorage.getItem(w))||{};N.query.genre=h.get("genre")||x.genre||N.query.genre||0,N.query.category=h.get("category")||x.category||N.query.category||0},getQuery:M=>["?c=",encodeURIComponent(M.query.criteria),"&p=",M.pageIndex,"&s=",M.pageSize,"&sf=",M.sortField,"&so=",M.sortOrder,"&genre=",M.query.genreId,"&category=",M.query.categoryId,"&sourceLocationId=",M.query.sourceLocationId].join(""),saveQuery:(M,w)=>{localStorage.setItem(w,JSON.stringify({criteria:M.query.criteria,pageIndex:M.pageIndex,pageSize:M.pageSize,sortField:M.sortField,sortOrder:M.sortOrder,visible:M.visible,genre:M.query.genre,category:M.query.category}))}}),b=S,_=ue("modalSelectVideo"),g=ge({video:null,hls:null});fe(async()=>{X(),await d()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const d=async()=>{await n(),await v()},f=async M=>{i.value.query.sourceLocationId=M,G.value="",await m();var w=document.getElementById(_.value),N=he.getOrCreateInstance(w);N.show()},a=async()=>{var M=document.getElementById(_.value),w=he.getOrCreateInstance(M);w.hide(),g.hls&&(g.hls.stopLoad(),g.hls.destroy()),b("close",g.video)},n=async M=>{try{const N=await L.get("/api/v1/lookups/video-categories/").then(h=>h.data);i.value.lookups.categories=N}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},v=async M=>{try{const N=await L.get("/api/v1/lookups/video-genres/").then(h=>h.data);i.value.lookups.genres=N}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},$=M=>{g.video=M,y()},y=()=>{if(Hls.isSupported()){g.hls&&(g.hls.stopLoad(),g.hls.destroy());var M=document.getElementById("video-select-preview");const N=g.video.formats.find(x=>x.formatName==="HLS"),h=N.serverUrl+N.path;g.hls=A.createHlsStream(M,h)}};return p({open:f,close:a}),(M,w)=>{const N=te("m-pagination"),h=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ad,[e("div",ld,[e("div",nd,[e("h5",rd,[w[10]||(w[10]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),J(c(o(V)),1)]),e("button",{type:"button",class:"btn-close",onClick:w[0]||(w[0]=x=>a()),"aria-label":"Close"})]),e("div",id,[F(h,{errorMessage:o(G)},{default:z(()=>[e("div",dd,[e("div",ud,[e("div",cd,[B(e("select",{"onUpdate:modelValue":w[1]||(w[1]=x=>o(i).query.categoryId=x),class:"form-select",id:"category"},[(t(!0),s(O,null,q(o(i).lookups.categories,x=>(t(),s("option",{value:x.id},c(x.name),9,md))),256))],512),[[pe,o(i).query.categoryId]]),w[11]||(w[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",fd,[e("div",pd,[B(e("select",{"onUpdate:modelValue":w[2]||(w[2]=x=>o(i).query.genreId=x),class:"form-select",id:"genre"},[(t(!0),s(O,null,q(o(i).lookups.genres,x=>(t(),s("option",{value:x.id},c(x.name),9,vd))),256))],512),[[pe,o(i).query.genreId]]),w[12]||(w[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",gd,[e("div",bd,[e("div",yd,[B(e("input",{"onUpdate:modelValue":w[3]||(w[3]=x=>o(i).query.criteria=x),onKeyup:w[4]||(w[4]=Ue(x=>o(m)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(i).query.criteria]]),w[13]||(w[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:w[5]||(w[5]=x=>o(m)(1))},w[14]||(w[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",$d,[e("div",wd,[e("div",hd,[w[19]||(w[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.video?(t(),s("div",_d,[e("div",kd,[e("div",Sd,[B(e("input",{"onUpdate:modelValue":w[6]||(w[6]=x=>g.video.title=x),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.video.title]]),w[15]||(w[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Td,[e("div",null,[(t(!0),s(O,null,q(g.video.genres,x=>(t(),s("span",Md,c(x.genreName),1))),256)),(t(!0),s(O,null,q(g.video.categories,x=>(t(),s("span",Id,c(x.categoryName),1))),256))])]),e("div",xd,[e("div",Cd,[e("div",Vd,[e("div",Pd,c(o(A).moment(g.video.dateReleased).calendar()),1),w[16]||(w[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Od,[e("div",Ad,[e("div",Ud,c(o(A).moment.utc(g.video.durationInMillis).format("HH:mm:ss")),1),w[17]||(w[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Dd,[e("div",Hd,[B(e("textarea",{"onUpdate:modelValue":w[7]||(w[7]=x=>g.video.description=x),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.video.description]]),w[18]||(w[18]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])]),e("div",Ld,[e("div",Ed,[e("table",qd,[w[20]||(w[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(i).items,(x,ne)=>(t(),s("tr",{key:x.videoId},[e("td",{textContent:c(o(Y)(ne)),class:"text-center"},null,8,Bd),e("td",null,[e("div",Nd,[e("div",null,[x.thumbnails.length>0?(t(!0),s(O,{key:0},q(x.thumbnails,ie=>(t(),s("div",Rd,[e("img",{src:ie.url,class:"img-fuild border",width:"128"},null,8,Fd)]))),256)):(t(),s("img",zd))]),e("div",Gd,[e("a",{onClick:ie=>$(x),class:"text-wrap link-offset-2",role:"button"},c(x.title),9,jd)])])])]))),128))]),_:1},512),[[Se,o(i).items.length>0]])])]),F(N,{filter:o(i),search:o(m),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",Yd,[e("button",{onClick:w[8]||(w[8]=x=>a()),class:"btn btn-primary",type:"button"},w[21]||(w[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:w[9]||(w[9]=x=>a()),class:"btn btn-secondary ms-1"},w[22]||(w[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,od)}}},Kd=["disabled"],Qd={class:"col"},Jd={class:"form-floating mb-2"},Xd={key:0,class:"d-block invalid-feedback"},Zd={class:"row row-cols-1 row-cols-sm-2"},eu={class:"col"},tu={class:"form-floating mb-2"},su=["value"],ou={key:0,class:"d-block invalid-feedback"},au={class:"col"},lu={class:"input-group mb-2"},nu={class:"form-floating"},ru={id:"video",class:"form-control",placeholder:"Title"},iu={key:0},du={class:"d-flex flex-row justify-content-start"},uu={key:0,class:"d-inline invalid-feedback"},cu={class:"table-responsive border mt-1"},mu={class:"table mb-0 caption-top"},fu={class:"align-middle"},pu=["onUpdate:modelValue"],vu=["value"],gu=["onUpdate:modelValue"],bu=["value"],yu=["onClick"],$u={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,route:W,axios:U,utils:G,toasts:ee,close:L,closeWithReturnUrl:A,security:C}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),T=l,i=ge({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),X=ue(),Q=(n,v,$)=>n.length>0,r={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",le),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",Q),$each:se.forEach({path:{required:se.withMessage("Path is required.",le)},sourceGroupId:{required:se.withMessage("Source Group is required.",le)}}),$autoDirty:!0,$lazy:!0}}},m=Te(r,i);fe(async()=>{if(await Y(),await u(),W.query.videoId)debugger});const Y=async()=>{try{await U.get("/api/v1/sourcegroups/lookup/").then(v=>{i.lookups.sourceGroups=v.data})}catch(n){V.value=G.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},u=async()=>{try{if(await U.get("/api/v1/sourcelocations/lookup/").then(v=>{i.lookups.sourceLocations=v.data}),i.lookups.sourceLocations.length===1){const v=i.lookups.sourceLocations[0];i.selected.sourceLocation=v,await I()}}catch(n){V.value=G.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},I=async()=>{const n=i.selected.sourceLocation;i.item.sourceLocationId=n.id},b=async()=>{i.item.videoId=i.selected.video.videoId,await _(i.item.videoId)},_=async n=>{try{const v=`/api/v1/videos/${n}/formats`;await U.get(v).then($=>{i.selected.video.formats=$.data})}catch(v){V.value=G.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},g=async()=>{const n=i;if(P.value)return;if(!await m.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const $=G.clone(n.item),y=n.item.packageConfigurations.filter(M=>M.selectedFormat&&M.sourceGroupId);y.forEach(M=>{const w=M.selectedFormat;M.path=w.path,M.format=w.format,delete M.selectedFormat}),$.packageConfigurations=y,delete $.video,await U.post("/api/v1/vodSources/",$).then(M=>{debugger;ee.success("Add VOD Source","VOD source added",{onClose:async()=>{const w=`${T.urlView}/${M.data}`;await K.push(w)}})})}catch($){V.value=G.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{P.value=!1}},d=()=>{const n={sourceGroupId:null,selectedFormat:null},v=i.selected.video;if(v){const $=v.formats.find(y=>y.formatName==="HLS");n.path=`${$.serverUrl}${$.path}`}i.item.packageConfigurations.push(n)},f=n=>{i.item.packageConfigurations.splice(n,1)},a=async n=>{n&&(i.selected.video=n,await b())};return(n,v)=>{const $=te("PageHeader"),y=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(m).$dirty&&o(m).$invalid,onClick:v[0]||(v[0]=M=>g()),class:"btn btn-primary"},v[6]||(v[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kd),e("button",{onClick:v[1]||(v[1]=M=>o(A)(T.urlMain)),class:"btn btn-secondary ms-1"},v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(y,{errorMessage:o(V),vuelidate:o(m)},{default:z(()=>[e("div",null,[e("div",Qd,[e("div",Jd,[B(e("input",{"onUpdate:modelValue":v[2]||(v[2]=M=>i.item.name=M),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,i.item.name]]),v[8]||(v[8]=e("label",{for:"name",class:""},"Name",-1)),o(m).item.name.$error?(t(),s("div",Xd,[(t(!0),s(O,null,q(o(m).item.name.$errors,M=>(t(),s("div",{key:M.$uid},c(M.$message),1))),128))])):D("",!0)])]),e("div",Zd,[e("div",eu,[e("div",tu,[B(e("select",{"onUpdate:modelValue":v[3]||(v[3]=M=>i.selected.sourceLocation=M),onChange:v[4]||(v[4]=M=>I()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(i.lookups.sourceLocations,M=>(t(),s("option",{value:M},c(M.name),9,su))),256))],544),[[pe,i.selected.sourceLocation]]),v[9]||(v[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(m).item.sourceLocationId.$error?(t(),s("div",ou,[(t(!0),s(O,null,q(o(m).item.sourceLocationId.$errors,M=>(t(),s("div",{key:M.$uid},c(M.$message),1))),128))])):D("",!0)])]),e("div",au,[e("div",lu,[e("div",nu,[e("div",ru,[i.selected.video?(t(),s(O,{key:0},[J(c(o(G).moment.utc(i.selected.video.durationInMillis).format("HH:mm:ss"))+" - "+c(i.selected.video.title),1)],64)):D("",!0)]),v[10]||(v[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:v[5]||(v[5]=M=>X.value.open(i.selected.sourceLocation.id)),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),i.item.videoId?(t(),s("div",iu,[e("div",du,[e("fieldset",null,[e("legend",null,[v[13]||(v[13]=J(" Package Configurations ")),o(m).item.packageConfigurations.$error?(t(),s("span",uu,v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):D("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:d,class:"btn btn-outline-primary"},v[14]||(v[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",cu,[e("table",mu,[v[16]||(v[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",fu,[(t(!0),s(O,null,q(i.item.packageConfigurations,(M,w)=>(t(),s("tr",null,[e("td",null,c(w+1),1),e("td",null,[B(e("select",{"onUpdate:modelValue":N=>M.selectedFormat=N,class:"form-select",id:"videoId"},[(t(!0),s(O,null,q(i.selected.video.formats,N=>(t(),s("option",{value:N},c(N.path),9,vu))),256))],8,pu),[[pe,M.selectedFormat]]),o(m).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(m).item.packageConfigurations.$each.$response.$errors[w].path,N=>(t(),s("div",{key:N,class:"d-block invalid-feedback"},c(N.$message),1))),128)):D("",!0)]),e("td",null,[M.selectedFormat?(t(),s(O,{key:0},[J(c(M.selectedFormat.formatName),1)],64)):D("",!0)]),e("td",null,[e("div",null,[B(e("select",{"onUpdate:modelValue":N=>M.sourceGroupId=N,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(i.lookups.sourceGroups,N=>(t(),s("option",{value:N.id},c(N.name),9,bu))),256))],8,gu),[[pe,M.sourceGroupId]]),o(m).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(m).item.packageConfigurations.$each.$response.$errors[w].path,N=>(t(),s("div",{key:N,class:"d-block invalid-feedback"},c(N.$message),1))),128)):D("",!0)])]),e("td",null,[e("button",{onClick:N=>f(w),class:"btn btn-outline-warning"},v[15]||(v[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yu)])]))),256))])])])])):D("",!0)])]),_:1},8,["errorMessage","vuelidate"]),F(ut,{ref_key:"modalSelectVideo",ref:X,onClose:a},null,512)])]),_:1})}}},wu=["disabled"],hu={key:0},_u={class:"col"},ku={class:"form-floating mb-2"},Su={key:0,class:"d-block invalid-feedback"},Tu={class:"row row-cols-1 row-cols-sm-2"},Mu={class:"col"},Iu={class:"form-floating mb-2"},xu=["value"],Cu={key:0,class:"d-block invalid-feedback"},Vu={class:"col"},Pu={class:"col"},Ou=["disabled"],Au={class:"form-floating"},Uu={id:"video",class:"form-control",placeholder:"Title"},Du={key:0},Hu={class:"d-flex flex-row justify-content-between mt-3"},Lu={key:0,class:"d-inline invalid-feedback"},Eu={class:"table-responsive border mt-1"},qu={class:"table mb-0 caption-top"},Bu={class:"input-group mb-1"},Nu=["onUpdate:modelValue"],Ru=["onUpdate:modelValue"],Fu=["value"],zu=["onUpdate:modelValue"],Gu=["onClick"],ju={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),A=l,C=ue(),T=ge({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),i=(n,v,$)=>n.length>0,X={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",le),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",i),$each:se.forEach({path:{required:se.withMessage("Path is required.",le)},sourceGroupId:{required:se.withMessage("Source Group is required.",le)}})}}},Q=Te(X,T);fe(async()=>{await r(),await u(),await I()});const r=async()=>{await m(),await Y()},m=async()=>{const n=T;if(!P.value)try{P.value=!0,V.value="",T.item=null;const v=`/api/v1/vodsources/${A.id}/`;await W.get(v).then($=>{n.item=$.data;const y=n.item,M=U.moment.utc(n.item.video.durationInMillis).format("HH:mm:ss");y.video.duration=M})}catch(v){V.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{P.value=!1}},Y=async()=>{const n=T;if(!P.value)try{P.value=!0,V.value="";const v=`/api/v1/videos/${n.item.videoId}/`;await W.get(v).then($=>{n.selected.video=$.data})}catch(v){V.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{P.value=!1}},u=async()=>{try{await W.get("/api/v1/sourcegroups/lookup/").then(v=>{T.lookups.sourceGroups=v.data})}catch(n){V.value=U.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},I=async()=>{try{if(await W.get("/api/v1/sourcelocations/lookup/").then(v=>{T.lookups.sourceLocations=v.data}),T.lookups.sourceLocations.length>0){const v=T.lookups.sourceLocations.find($=>$.id===T.item.sourceLocationId);T.selected.sourceLocation=v}}catch(n){V.value=U.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},b=async()=>{T.item.videoId=T.selected.video.videoId,await _(T.item.videoId)},_=async n=>{try{const v=`/api/v1/videos/${n}/formats`;await W.get(v).then($=>{T.selected.video.formats=$.data;debugger})}catch(v){V.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},g=async()=>{const n=T;if(P.value)return;if(!await Q.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const $=U.clone(n.item);delete $.video,delete $.programs,delete $.sourceLocation,await W.put("/api/v1/vodsources/",$).then(y=>{G.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const M=`${A.urlView}/${A.id}`;await K.push(M)}})})}catch($){V.value=U.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{P.value=!1}},d=()=>{debugger;const n={path:"",sourceGroupId:null,type:"HLS"},v=T.selected.video;if(v){const $=v.formats.find(y=>y.formatName==="HLS");n.path=`${$.path}`}T.item.packageConfigurations.push(n)},f=n=>{T.item.packageConfigurations.splice(n,1)},a=async n=>{n&&(T.selected.video=n,T.item.packageConfigurations=[],await b())};return(n,v)=>{const $=te("router-link"),y=te("PageHeader"),M=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(y,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(Q).$dirty&&o(Q).$invalid,onClick:v[0]||(v[0]=w=>g()),class:"btn btn-primary"},v[5]||(v[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wu),e("button",{onClick:v[1]||(v[1]=w=>r()),class:"btn btn-secondary ms-2"},v[6]||(v[6]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F($,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-1"},{default:z(()=>v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(M,{errorMessage:o(V),vuelidate:o(Q)},{default:z(()=>[T.item?(t(),s("div",hu,[e("div",_u,[e("div",ku,[B(e("input",{"onUpdate:modelValue":v[2]||(v[2]=w=>T.item.name=w),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,T.item.name]]),v[8]||(v[8]=e("label",{for:"name",class:""},"Name",-1)),o(Q).item.name.$error?(t(),s("div",Su,[(t(!0),s(O,null,q(o(Q).item.name.$errors,w=>(t(),s("div",{key:w.$uid},c(w.$message),1))),128))])):D("",!0)])]),e("div",Tu,[e("div",Mu,[e("div",Iu,[B(e("select",{"onUpdate:modelValue":v[3]||(v[3]=w=>T.selected.sourceLocation=w),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(T.lookups.sourceLocations,w=>(t(),s("option",{value:w},c(w.name),9,xu))),256))],512),[[pe,T.selected.sourceLocation]]),v[9]||(v[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(Q).item.sourceLocationId.$error?(t(),s("div",Cu,[(t(!0),s(O,null,q(o(Q).item.sourceLocationId.$errors,w=>(t(),s("div",{key:w.$uid},c(w.$message),1))),128))])):D("",!0)])]),e("div",Vu,[e("div",Pu,[e("div",{class:"input-group mb-2",disabled:T.item.packageConfigurations.length>0},[e("div",Au,[e("div",Uu,[T.selected.video?(t(),s(O,{key:0},[J(c(T.selected.video.title),1)],64)):D("",!0)]),v[10]||(v[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:v[4]||(v[4]=w=>C.value.open(T.selected.sourceLocation.id)),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))],8,Ou)])])]),T.item.videoId?(t(),s("div",Du,[e("div",Hu,[e("div",null,[e("h5",null,[v[13]||(v[13]=J(" Package Configurations ")),o(Q).item.packageConfigurations.$error?(t(),s("span",Lu,v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):D("",!0)])]),e("button",{onClick:d,class:"btn btn-outline-primary"},v[14]||(v[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Package Configuration ")]))]),e("div",Eu,[e("table",qu,[v[17]||(v[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(T.item.packageConfigurations,(w,N)=>(t(),s("tr",null,[e("td",null,c(N+1),1),e("td",null,[e("div",Bu,[B(e("input",{"onUpdate:modelValue":h=>w.path=h,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Nu),[[Z,w.path]])]),o(Q).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(Q).item.packageConfigurations.$each.$response.$errors[N].path,h=>(t(),s("div",{key:h,class:"d-block invalid-feedback"},c(h.$message),1))),128)):D("",!0)]),e("td",null,[e("div",null,[B(e("select",{"onUpdate:modelValue":h=>w.sourceGroupId=h,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(T.lookups.sourceGroups,h=>(t(),s("option",{value:h.id},c(h.name),9,Fu))),256))],8,Ru),[[pe,w.sourceGroupId]]),o(Q).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(Q).item.packageConfigurations.$each.$response.$errors[N].path,h=>(t(),s("div",{key:h,class:"d-block invalid-feedback"},c(h.$message),1))),128)):D("",!0)])]),e("td",null,[B(e("select",{"onUpdate:modelValue":h=>w.type=h,class:"form-select",id:"type"},v[15]||(v[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,zu),[[pe,w.type]])]),e("td",null,[e("button",{onClick:h=>f(N),class:"btn btn-outline-warning"},v[16]||(v[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gu)])]))),256))])])])])):D("",!0)])):D("",!0)]),_:1},8,["errorMessage","vuelidate"]),F(ut,{ref_key:"modalSelectVideo",ref:C,onClose:a},null,512)])]),_:1})}}},Yu={class:"ms-2"},Wu={class:"input-group"},Ku=["value"],Qu={class:"ms-1"},Ju={class:"input-group"},Xu=["value"],Zu={class:"ms-1"},ec={class:"input-group"},tc={class:"ms-1"},sc={class:"input-group"},oc={class:"table-responsive border shadow-sm"},ac={class:"table table-hover mb-0"},lc={class:"text-center"},nc=["textContent"],rc={class:"d-flex flex-row justify-content-start"},ic={class:"mt-1"},dc=["src"],uc={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},cc={class:"ms-2"},mc={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},fc={class:"badge bg-primary me-1"},pc={key:0},vc={class:"badge bg-info me-1"},gc={class:"d-flex flex-row justify-content-start"},bc={class:"ms-2"},yc={class:"small"},$c={class:"badge bg-secondary me-1"},wc={class:"text-center"},hc=["onUpdate:modelValue"],_c="/api/v1/vodsources/search",kc={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,closeWithReturnUrl:C,generateReturnUrl:T,security:i,filter:X,initializeFilter:Q,getQuery:r,saveQuery:m,search:Y,getRowNumber:u,setSelected:I,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${S==null?void 0:S.userId}/vod-sources/search`,baseUrl:_c,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(v,$)=>{const y=v.value,M=new URLSearchParams(window.location.search),w=JSON.parse(localStorage.getItem($))||{};y.query.category=M.get("category")||w.category||y.query.category||0,y.query.genre=M.get("genre")||w.genre||y.query.genre||0,y.query.sourceLocationId=M.get("slid")||w.sourceLocationId||y.query.sourceLocationId||""},getQuery:v=>["?c=",encodeURIComponent(v.query.criteria),"&p=",v.pageIndex,"&s=",v.pageSize,"&sf=",v.sortField,"&so=",v.sortOrder,"&category=",v.query.category,"&genre=",v.query.genre,"&slid=",v.query.sourceLocationId].join(""),saveQuery:(v,$)=>{localStorage.setItem($,JSON.stringify({criteria:v.query.criteria,pageIndex:v.pageIndex,pageSize:v.pageSize,sortField:v.sortField,sortOrder:v.sortOrder,visible:v.visible,category:v.query.category,genre:v.query.genre,sourceLocationId:v.query.sourceLocationId}))}}),_=Ie(()=>{const v=X.value;return v&&v.items?v.items.filter(M=>M.selected):[]});fe(async()=>{Q(),await a(),await n(),await Y()});const g=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!H.value){W.value=null;try{H.value=!0;const y={vodSourceIds:_.value.map(M=>M.vodSourceId)};await G.post("/api/v1/vodsources/publish/",y).then(M=>{L.success("Publish VODs","VODs was published.",{async onClose(){}})}),H.value=!1,await Y()}catch($){W.value=ee.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{H.value=!1}}},d=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!H.value){W.value=null;try{H.value=!0;const y={vodSourceIds:_.value.map(M=>M.vodSourceId)};await G.post("/api/v1/vodsources/unpublish/",y).then(M=>{L.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),H.value=!1,await Y()}catch($){W.value=ee.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{H.value=!1}}},f=()=>{const v=X.value.items;if(v.length<1)return;const $=!v[0].selected;X.value.items.forEach(y=>{y.selected=$})},a=async()=>{try{await G.get("/api/v1/sourcelocations/lookup/").then($=>{X.value.lookups.sourceLocations=$.data})}catch(v){W.value=ee.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},n=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(v=>{const $=v.data;X.value.lookups.genres=$})}catch(v){W.value=ee.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return ue(!1),(v,$)=>{const y=te("router-link"),M=te("PageHeader"),w=te("m-pagination"),N=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(M,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(k)},{default:z(()=>[F(y,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>$[6]||($[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Yu,[e("div",Wu,[$[8]||($[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),B(e("select",{"onUpdate:modelValue":$[0]||($[0]=h=>o(X).query.sourceLocationId=h),class:"form-select"},[$[7]||($[7]=e("option",{value:""},"All",-1)),(t(!0),s(O,null,q(o(X).lookups.sourceLocations,h=>(t(),s("option",{value:h.id},c(h.name),9,Ku))),256))],512),[[pe,o(X).query.sourceLocationId]])])]),e("div",Qu,[e("div",Ju,[$[9]||($[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),B(e("select",{"onUpdate:modelValue":$[1]||($[1]=h=>o(X).query.genre=h),class:"form-select"},[(t(!0),s(O,null,q(o(X).lookups.genres,h=>(t(),s("option",{value:h.id},c(h.name),9,Xu))),256))],512),[[pe,o(X).query.genre]])])]),e("div",Zu,[e("div",ec,[$[11]||($[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),B(e("select",{"onUpdate:modelValue":$[2]||($[2]=h=>o(X).query.category=h),class:"form-select"},$[10]||($[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[pe,o(X).query.category]])])]),e("div",tc,[e("div",sc,[B(e("input",{"onUpdate:modelValue":$[3]||($[3]=h=>o(X).query.criteria=h),onKeyup:$[4]||($[4]=Ue(h=>o(Y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(X).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:$[5]||($[5]=h=>o(Y)(1))},$[12]||($[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(N,{errorMessage:o(W)},{default:z(()=>[e("div",oc,[e("table",ac,[e("thead",null,[e("tr",null,[$[16]||($[16]=e("td",{class:"text-center"},"#",-1)),$[17]||($[17]=e("th",null,"Name",-1)),$[18]||($[18]=e("th",null,"Video Title",-1)),e("th",lc,[_.value.length?(t(),s(O,{key:0},[e("button",{onClick:g,class:"btn btn-sm btn-primary"},$[13]||($[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:d,class:"btn btn-sm btn-warning ms-1"},$[14]||($[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):D("",!0),e("button",{onClick:f,class:"btn btn-sm btn-outline-primary ms-2"},$[15]||($[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(X).items,(h,x)=>(t(),s("tr",{key:h.vodSourceId},[e("td",{textContent:c(o(u)(x)),class:"text-center"},null,8,nc),e("td",null,[e("div",rc,[e("div",null,[h.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(h.video.thumbnails,ne=>(t(),s("div",ic,[e("img",{src:ne.url,class:"img-fuild border",width:"128"},null,8,dc)]))),256)):(t(),s("img",uc))]),e("div",cc,[F(y,{to:`${l.urlView}/${h.vodSourceId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[h.arn?(t(),s("span",mc)):D("",!0),J(c(h.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,q(h.video.categories,ne=>(t(),s("div",null,[e("span",fc,c(ne.categoryName),1)]))),256)),h.video.genres.length>0?(t(),s("div",pc,[(t(!0),s(O,null,q(h.video.genres,ne=>(t(),s("span",vc,c(ne.genreName),1))),256))])):D("",!0)])])])]),e("td",null,[e("div",gc,[e("div",bc,[F(y,{to:`${l.urlViewVideo}/${encodeURIComponent(h.video.videoId)}/${o(T)()}`,class:"link-offset-2"},{default:z(()=>[J(c(h.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",yc,c(o(ee).moment.utc(h.video.durationInMillis).format("HH:mm:ss")),1)]),h.video.formats.length>0?(t(!0),s(O,{key:0},q(h.video.formats,ne=>(t(),s("span",$c,c(ne.formatName),1))),256)):D("",!0)])])]),e("td",wc,[B(e("input",{"onUpdate:modelValue":ne=>h.selected=ne,type:"checkbox",class:"form-check-input"},null,8,hc),[[Be,h.selected]])])]))),128))]),_:1},512),[[Se,o(X).items.length>0]])])]),F(w,{filter:o(X),search:o(Y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Sc=["id"],Tc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mc={class:"modal-content"},Ic={class:"modal-header"},xc={class:"modal-title"},Cc={class:"modal-body"},Vc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Pc=["innerHTML"],Oc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ac={class:"container"},Uc={class:"col"},Dc={class:"form-floating mb-2"},Hc=["value"],Lc={key:0,class:"d-block invalid-feedback"},Ec={class:"col"},qc={class:"form-floating mb-2"},Bc={key:0,class:"d-block invalid-feedback"},Nc={class:"col"},Rc={class:"form-floating mb-2"},Fc=["value"],zc={key:0,class:"d-block invalid-feedback"},Gc={class:"modal-footer"},jc=["disabled"],Yc={__name:"_addPackageConfiguration",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),X=S;ue();const Q=ue("modalAddChannelOutput"),r=ge({lookups:{sourceGroups:[],formats:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),m={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("VOD Source is required.",le),$autoDirty:!0,$lazy:!0},path:{required:se.withMessage("Path is required.",le),$autoDirty:!0,$lazy:!0},type:{required:se.withMessage("Type is required.",le),$autoDirty:!0,$lazy:!0}}},Y=Te(m,r);fe(async()=>{Y.value.$reset()});const u=async()=>{await I()},I=async()=>{try{await L.get("/api/v1/sourceGroups/lookup/").then(a=>{r.lookups.sourceGroups=a.data,r.lookups.sourceGroups.length===1&&(r.item.sourceGroupId=r.lookups.sourceGroups[0].id)})}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},b=async f=>{try{const a=`/api/v1/videos/${f}/formats/`;await L.get(a).then(n=>{r.lookups.formats=n.data})}catch(a){G.value=A.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},_=async(f,a)=>{const n=r;K.value.clear(),G.value="",n.lookups={sourceGroups:[],formats:[]},n.item={sourceGroupId:null,vodSourceId:f,path:null,type:null},await u(),await b(a),Y.value.$reset();var v=document.getElementById(Q.value),$=he.getOrCreateInstance(v);$.show()},g=async()=>{var f=document.getElementById(Q.value),a=he.getOrCreateInstance(f);a.hide(),X("refresh")},d=async()=>{const f=r;if(H.value)return;const a=await Y.value.$validate();debugger;if(!a){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const n=f.item;await L.post("/api/v1/vodSources/package-configurations/",n).then(v=>{C.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await g()}catch(n){G.value=A.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:_,close:g}),(f,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Q.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Tc,[e("div",Mc,[e("div",Ic,[e("h5",xc,[a[5]||(a[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=n=>g()),"aria-label":"Close"})]),e("div",Cc,[o(G)?(t(),s("div",Vc,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Pc)])):D("",!0),o(K).size>0?(t(),s("div",Oc,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),n=>(t(),s("li",null,c(n),1))),256))])])):D("",!0),e("div",Ac,[e("div",Uc,[e("div",Dc,[B(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>r.item.sourceGroupId=n),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(r.lookups.sourceGroups,n=>(t(),s("option",{value:n.id},c(n.name),9,Hc))),256))],512),[[pe,r.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(Y).item.sourceGroupId.$error?(t(),s("div",Lc,[(t(!0),s(O,null,q(o(Y).item.sourceGroupId.$errors,n=>(t(),s("div",{key:n.$uid},c(n.$message),1))),128))])):D("",!0)])]),e("div",Ec,[e("div",qc,[B(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>r.item.type=n),class:"form-select",id:"type"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,r.item.type]]),a[10]||(a[10]=e("label",{for:"type",class:""},"Type",-1)),o(Y).item.type.$error?(t(),s("div",Bc,[(t(!0),s(O,null,q(o(Y).item.type.$errors,n=>(t(),s("div",{key:n.$uid},c(n.$message),1))),128))])):D("",!0)])]),e("div",Nc,[e("div",Rc,[B(e("select",{"onUpdate:modelValue":a[3]||(a[3]=n=>r.item.path=n),class:"form-control",id:"path"},[(t(!0),s(O,null,q(r.lookups.formats,n=>(t(),s("option",{value:n.path},c(n.path),9,Fc))),256))],512),[[pe,r.item.path]]),a[11]||(a[11]=e("label",{for:"path",class:""},"Path",-1)),o(Y).item.path.$error?(t(),s("div",zc,[(t(!0),s(O,null,q(o(Y).item.path.$errors,n=>(t(),s("div",{key:n.$uid},c(n.$message),1))),128))])):D("",!0)])])])]),e("div",Gc,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:a[4]||(a[4]=n=>d()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jc),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Sc))}},Wc=["id"],Kc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Qc={class:"modal-content"},Jc={class:"modal-header"},Xc={class:"modal-title"},Zc={class:"modal-body"},em={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},tm=["innerHTML"],sm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},om={class:"container"},am={class:"col"},lm={class:"form-floating mb-2"},nm={class:"col"},rm={class:"form-floating mb-2"},im={key:0,class:"d-block invalid-feedback"},dm={class:"col"},um={class:"form-floating mb-2"},cm={key:0,class:"d-block invalid-feedback"},mm={class:"col"},fm={class:"form-floating mb-2"},pm={key:0,class:"d-block invalid-feedback"},vm={class:"modal-footer"},gm=["disabled"],bm={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),X=S,Q=ue(),r=ue("modalAddPlaybackConfiguration"),m=ge({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",le),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(Y,m);fe(async()=>{u.value.$reset()});const I=async(g,d)=>{Q.value=g;const f=m;K.value.clear(),G.value="";const a=d,n=a.lastIndexOf("/"),v=a.substring(0,n),$="ad_campaign_"+a.substring(n+1).replace(".","_");f.item={name:$,originalVideoContentSourceUrl:d,videoContentSourceUrl:v,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},u.value.$reset();var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.show()},b=async()=>{var g=document.getElementById(r.value),d=he.getOrCreateInstance(g);d.hide(),X("refresh")},_=async()=>{const g=m;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const f=g.item;f.vodSourceId=Q.value,await L.post("/api/v1/playbackconfigurations/vodsource",f).then(a=>{C.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await b()}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:I,close:b}),(g,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Kc,[e("div",Qc,[e("div",Jc,[e("h5",Xc,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=f=>b()),"aria-label":"Close"})]),e("div",Zc,[o(G)?(t(),s("div",em,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,tm)])):D("",!0),o(K).size>0?(t(),s("div",sm,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),f=>(t(),s("li",null,c(f),1))),256))])])):D("",!0),e("div",om,[e("div",am,[e("div",lm,[B(e("input",{"onUpdate:modelValue":d[1]||(d[1]=f=>m.item.originalVideoContentSourceUrl=f),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Z,m.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",nm,[e("div",rm,[B(e("input",{"onUpdate:modelValue":d[2]||(d[2]=f=>m.item.name=f),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,m.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",im,[(t(!0),s(O,null,q(o(u).item.name.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):D("",!0)])]),e("div",dm,[e("div",um,[B(e("input",{"onUpdate:modelValue":d[3]||(d[3]=f=>m.item.videoContentSourceUrl=f),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,m.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(u).item.videoContentSourceUrl.$error?(t(),s("div",cm,[(t(!0),s(O,null,q(o(u).item.videoContentSourceUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):D("",!0)])]),e("div",mm,[e("div",fm,[B(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=f=>m.item.adDecisionServerUrl=f),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,m.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(u).item.adDecisionServerUrl.$error?(t(),s("div",pm,[(t(!0),s(O,null,q(o(u).item.adDecisionServerUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):D("",!0)])])])]),e("div",vm,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:d[5]||(d[5]=f=>_()),class:"btn btn-primary",type:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,gm),d[15]||(d[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Wc))}},ym={key:0},$m={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},wm={class:"nav-item",role:"presentation"},hm={class:"nav-item",role:"presentation"},_m={class:"nav-item",role:"presentation"},km={class:"nav-item",role:"presentation"},Sm={class:"nav-item",role:"presentation"},Tm={class:"tab-content",id:"myTabContent"},Mm={class:"mt-2"},Im={class:"row row-cols-1 row-cols-sm-2"},xm={class:"col"},Cm=["id"],Vm={class:"col"},Pm={class:"col"},Om={class:"form-floating mb-2"},Am={class:"mt-2"},Um={class:"row row-cols-sm-2"},Dm={class:"col"},Hm={class:"form-floating mb-2"},Lm={class:"form-control-plaintext"},Em={class:"col"},qm={class:"form-floating mb-2"},Bm={class:"mt-1"},Nm={class:"badge bg-info me-1"},Rm={class:"badge bg-primary me-1"},Fm={class:"badge bg-info me-1"},zm={class:"table-responsive border mt-1"},Gm={class:"table table-hover mb-0"},jm={class:"table-group-divider"},Ym={class:"align-middle"},Wm={class:"text-center"},Km={class:"text-truncate text-wrap"},Qm={class:"text-truncate text-wrap"},Jm={class:"mt-2"},Xm={class:"mt-2 text-end"},Zm={class:"table-responsive border mt-2"},ef={class:"table table-hover mb-0 caption-top"},tf={class:"text-end"},sf=["onClick"],of={class:"mt-2"},af={class:"mt-1"},lf=["id"],nf={class:"text-end"},rf={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:K,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:L,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:i,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});xe("$config");const Q=we();Q.user;const r=ge({user:Q.user,item:null,hls:null}),m=ue();ue(null);const Y=ue();fe(async()=>{await _();const $=L.getPageTab("vodSource")||"information-tab";u($)}),Ae(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const u=$=>{L.setPageTab("vodSource",$),m.value=$},I=$=>$!==m.value?"":"active",b=$=>$!==m.value?"":"show active",_=async()=>{const $=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const y=`/api/v1/vodsources/${p.id}/`;await ee.get(y).then(M=>{$.item=M.data;const w=$.item,N=L.moment.utc($.item.video.durationInMillis).format("HH:mm:ss");w.video.duration=N}),v()}catch(y){U.value=L.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{k.value=!1}},g=async()=>{await _()},d=()=>{Y.value.open(r.item.vodSourceId,r.item.videoId)},f=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!k.value){U.value=null;try{k.value=!0;const y={vodSourceIds:[p.id]};await ee.post("/api/v1/vodsources/publish/",y).then(M=>{A.success("Publish VOD","VOD was published.",{async onClose(){}})}),k.value=!1,await g()}catch(y){U.value=L.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{k.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!k.value){U.value=null;try{k.value=!0;const y={vodSourceIds:[p.id]};await ee.post("/api/v1/vodsources/unpublish/",y).then(M=>{A.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),k.value=!1,await g()}catch(y){U.value=L.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{k.value=!1}}},n=async $=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/vodSources/package-configurations/${$}/`).then(M=>{A.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),k.value=!1,await g()}catch(M){U.value=L.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{k.value=!1}}},v=()=>{if(Hls.isSupported()){r.hls&&(r.hls.stopLoad(),r.hls.destroy());const $=`video-${r.item.vodSourceId}`,y=document.getElementById($),M=r.item.video.formats.find(N=>N.formatName==="HLS"),w=`${M.serverUrl}${M.path}`;r.hls=L.createHlsStream(y,w)}};return($,y)=>{const M=te("router-link"),w=te("PageHeader"),N=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(w,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(P)},{default:z(()=>[r.item?(t(),s(O,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:y[0]||(y[0]=h=>a()),class:"ms-1 btn btn-warning"},y[14]||(y[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:y[1]||(y[1]=h=>f()),class:"ms-1 btn btn-primary"},y[15]||(y[15]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):D("",!0),F(M,{to:`${l.urlEdit}/${l.id}`,class:"ms-2 btn btn-primary"},{default:z(()=>y[16]||(y[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:y[2]||(y[2]=h=>g()),class:"ms-2 btn btn-secondary"},y[17]||(y[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:y[3]||(y[3]=h=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},y[18]||(y[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(N,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",ym,[e("div",null,[e("ul",$m,[e("li",wm,[e("button",{onClick:y[4]||(y[4]=h=>u("information-tab")),class:re([I("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",hm,[e("button",{onClick:y[5]||(y[5]=h=>u("packageConfigurations-tab")),class:re([I("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",_m,[e("button",{onClick:y[6]||(y[6]=h=>u("channels-tab")),class:re([I("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},y[19]||(y[19]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Channels ")]),2)]),e("li",km,[e("button",{onClick:y[7]||(y[7]=h=>u("programs-tab")),class:re([I("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},y[20]||(y[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Programs ")]),2)]),e("li",Sm,[e("button",{onClick:y[8]||(y[8]=h=>u("programTemplates-tab")),class:re([I("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Program Templates ")]),2)])]),e("div",Tm,[e("div",{class:re([b("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Mm,[e("div",Im,[e("div",xm,[e("video",{id:`video-${r.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,Cm)]),e("div",Vm,[e("div",Pm,[e("div",Om,[B(e("input",{"onUpdate:modelValue":y[9]||(y[9]=h=>r.item.name=h),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),y[22]||(y[22]=e("label",{for:"name"},"Name",-1))])]),e("div",Am,[y[26]||(y[26]=e("b",null," Video Information ",-1)),e("div",null,[e("div",Um,[e("div",Dm,[e("div",Hm,[e("div",Lm,[F(M,{to:`${l.urlViewVideo}/${r.item.video.videoId}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(r.item.video.title),1)]),_:1},8,["to"])]),y[23]||(y[23]=e("label",{for:"title"},"Title",-1))])]),e("div",Em,[e("div",qm,[B(e("input",{"onUpdate:modelValue":y[10]||(y[10]=h=>r.item.video.duration=h),type:"text",class:"form-control-plaintext",id:"duration",readonly:""},null,512),[[Z,r.item.video.duration]]),y[24]||(y[24]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Bm,[(t(!0),s(O,null,q(r.item.video.genres,h=>(t(),s("span",Nm,c(h.genreName),1))),256)),(t(!0),s(O,null,q(r.item.video.categories,h=>(t(),s("span",Rm,c(h.categoryName),1))),256)),(t(!0),s(O,null,q(r.item.video.categories,h=>(t(),s("span",Fm,c(h.categoryName),1))),256))]),e("div",zm,[e("table",Gm,[y[25]||(y[25]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",jm,[(t(!0),s(O,null,q(r.item.video.formats,(h,x)=>(t(),s("tr",Ym,[e("td",Wm,c(x+1),1),e("td",null,c(h.formatName),1),e("td",null,[e("div",Km,c(h.serverUrl),1)]),e("td",null,[e("div",Qm,c(h.path),1)])]))),256))])])])])])])])])],2),e("div",{class:re([b("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Jm,[e("div",Xm,[e("button",{onClick:y[11]||(y[11]=h=>d()),class:"btn btn-outline-primary btn-sm"},y[27]||(y[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Zm,[e("table",ef,[y[29]||(y[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.packageConfigurations,(h,x)=>(t(),s("tr",{key:h.packageConfigurationId,class:"align-middle"},[e("td",null,c(x+1),1),e("td",null,c(h.path),1),e("td",null,c(h.sourceGroup.name),1),e("td",null,c(h.type),1),e("td",tf,[e("button",{onClick:ne=>n(h.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,sf)])]))),128))]),_:1},512),[[Se,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:re([b("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",of,[e("div",af,[e("video",{id:`video-${r.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,lf),e("div",nf,[e("button",{onClick:y[12]||(y[12]=h=>r.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},y[30]||(y[30]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:re([b("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},y[31]||(y[31]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:re([b("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},y[32]||(y[32]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:re([b("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},y[33]||(y[33]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):D("",!0)]),_:1},8,["errorMessage"]),F(Yc,{ref_key:"modalAddPackageConfiguration",ref:Y,onRefresh:g},null,512),F(bm,{ref:"modalAddPlaybackConfiguration",onRefresh:y[13]||(y[13]=h=>g())},null,512)])]),_:1})}}},df=["id"],uf={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},cf={class:"modal-content"},mf={class:"modal-header"},ff={class:"modal-title"},pf={class:"modal-body p-1"},vf={class:"row row-cols-1 row-cols-sm-3"},gf={class:"col"},bf={class:"form-floating mb-2"},yf=["value"],$f={class:"col"},wf={class:"form-floating mb-2"},hf=["value"],_f={class:"col"},kf={class:"input-group mb-2"},Sf={class:"form-floating"},Tf={class:"row row-cols-1 row-cols-sm-2 g-2"},Mf={class:"col-sm-4"},If={class:"card"},xf={key:0,class:"mt-2"},Cf={class:"col"},Vf={class:"form-floating mb-2"},Pf={class:"col ms-2 my-2"},Of={class:"badge bg-info me-1"},Af={class:"badge bg-primary me-1"},Uf={class:"row row-cols-1 row-cols-sm-2"},Df={class:"col"},Hf={class:"form-floating mb-2"},Lf={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Ef={class:"col"},qf={class:"form-floating mb-2"},Bf={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Nf={class:"col"},Rf={class:"form-floating mb-2"},Ff={class:"col-sm-8"},zf={class:"table-responsive border shadow-sm"},Gf={class:"table table-sm table-hover mb-0 overflow-auto"},jf=["textContent"],Yf={class:"d-flex flex-row justify-content-start"},Wf={class:"mt-1"},Kf=["src"],Qf={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Jf={class:"ms-2"},Xf=["onClick"],Zf={class:"modal-footer"},ep="/api/v1/vodSources/search",ct={__name:"_selectVodSource",emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,security:T,filter:i,initializeFilter:X,getQuery:Q,saveQuery:r,search:m,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select VOD Source",cacheKey:`${k==null?void 0:k.userId}/vodsources/select`,baseUrl:ep,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(M,w)=>{const N=M.value,h=new URLSearchParams(window.location.search),x=JSON.parse(localStorage.getItem(w))||{};N.query.genre=h.get("genre")||x.genre||N.query.genre||0,N.query.category=h.get("category")||x.category||N.query.category||0},getQuery:M=>["?c=",encodeURIComponent(M.query.criteria),"&p=",M.pageIndex,"&s=",M.pageSize,"&sf=",M.sortField,"&so=",M.sortOrder,"&genre=",M.query.genreId,"&category=",M.query.categoryId,"&sourceLocationId=",M.query.sourceLocationId].join(""),saveQuery:(M,w)=>{localStorage.setItem(w,JSON.stringify({criteria:M.query.criteria,pageIndex:M.pageIndex,pageSize:M.pageSize,sortField:M.sortField,sortOrder:M.sortOrder,visible:M.visible,genre:M.query.genre,category:M.query.category}))}}),b=S,_=ue("modalSelectVodSource"),g=ge({vodSource:null,hls:null});fe(async()=>{X(),await d()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const d=async()=>{await n(),await v()},f=async M=>{i.value.query.sourceLocationId=M,G.value="",await m();var w=document.getElementById(_.value),N=he.getOrCreateInstance(w);N.show()},a=async()=>{var M=document.getElementById(_.value),w=he.getOrCreateInstance(M);w.hide(),g.hls&&(g.hls.stopLoad(),g.hls.destroy()),b("close",g.vodSource)},n=async M=>{try{const N=await L.get("/api/v1/lookups/video-categories/").then(h=>h.data);i.value.lookups.categories=N}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},v=async M=>{try{const N=await L.get("/api/v1/lookups/video-genres/").then(h=>h.data);i.value.lookups.genres=N}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},$=M=>{g.vodSource=M,y()},y=()=>{if(Hls.isSupported()){g.hls&&(g.hls.stopLoad(),g.hls.destroy());var M=document.getElementById("video-select-preview");const N=g.vodSource.video.formats.find(x=>x.formatName==="HLS"),h=N.serverUrl+N.path;g.hls=A.createHlsStream(M,h)}};return p({open:f,close:a}),(M,w)=>{const N=te("m-pagination"),h=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",uf,[e("div",cf,[e("div",mf,[e("h5",ff,[w[10]||(w[10]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(V)),1)]),e("button",{type:"button",class:"btn-close",onClick:w[0]||(w[0]=x=>a()),"aria-label":"Close"})]),e("div",pf,[F(h,{errorMessage:o(G)},{default:z(()=>[e("div",vf,[e("div",gf,[e("div",bf,[B(e("select",{"onUpdate:modelValue":w[1]||(w[1]=x=>o(i).query.categoryId=x),class:"form-select",id:"category"},[(t(!0),s(O,null,q(o(i).lookups.categories,x=>(t(),s("option",{value:x.id},c(x.name),9,yf))),256))],512),[[pe,o(i).query.categoryId]]),w[11]||(w[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",$f,[e("div",wf,[B(e("select",{"onUpdate:modelValue":w[2]||(w[2]=x=>o(i).query.genreId=x),class:"form-select",id:"genre"},[(t(!0),s(O,null,q(o(i).lookups.genres,x=>(t(),s("option",{value:x.id},c(x.name),9,hf))),256))],512),[[pe,o(i).query.genreId]]),w[12]||(w[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",_f,[e("div",kf,[e("div",Sf,[B(e("input",{"onUpdate:modelValue":w[3]||(w[3]=x=>o(i).query.criteria=x),onKeyup:w[4]||(w[4]=Ue(x=>o(m)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(i).query.criteria]]),w[13]||(w[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:w[5]||(w[5]=x=>o(m)(1))},w[14]||(w[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Tf,[e("div",Mf,[e("div",If,[w[19]||(w[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.vodSource?(t(),s("div",xf,[e("div",Cf,[e("div",Vf,[B(e("input",{"onUpdate:modelValue":w[6]||(w[6]=x=>g.vodSource.video.title=x),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.vodSource.video.title]]),w[15]||(w[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Pf,[e("div",null,[(t(!0),s(O,null,q(g.vodSource.video.genres,x=>(t(),s("span",Of,c(x.genreName),1))),256)),(t(!0),s(O,null,q(g.vodSource.video.categories,x=>(t(),s("span",Af,c(x.categoryName),1))),256))])]),e("div",Uf,[e("div",Df,[e("div",Hf,[e("div",Lf,c(o(A).moment(g.vodSource.video.dateReleased).calendar()),1),w[16]||(w[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Ef,[e("div",qf,[e("div",Bf,c(o(A).moment.utc(g.vodSource.video.durationInMillis).format("HH:mm:ss")),1),w[17]||(w[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Nf,[e("div",Rf,[B(e("textarea",{"onUpdate:modelValue":w[7]||(w[7]=x=>g.vodSource.video.description=x),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.vodSource.video.description]]),w[18]||(w[18]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])]),e("div",Ff,[e("div",zf,[e("table",Gf,[w[20]||(w[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(i).items,(x,ne)=>(t(),s("tr",{key:x.videoId},[e("td",{textContent:c(o(Y)(ne)),class:"text-center"},null,8,jf),e("td",null,[e("div",Yf,[e("div",null,[x.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(x.video.thumbnails,ie=>(t(),s("div",Wf,[e("img",{src:ie.url,class:"img-fuild border",width:"128"},null,8,Kf)]))),256)):(t(),s("img",Qf))]),e("div",Jf,[e("a",{onClick:ie=>$(x),class:"text-wrap link-offset-2",role:"button"},c(x.name),9,Xf)])])])]))),128))]),_:1},512),[[Se,o(i).items.length>0]])])]),F(N,{filter:o(i),search:o(m),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",Zf,[e("button",{onClick:w[8]||(w[8]=x=>a()),class:"btn btn-primary",type:"button"},w[21]||(w[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:w[9]||(w[9]=x=>a()),class:"btn btn-secondary ms-1"},w[22]||(w[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,df)}}},tp=["disabled"],sp={class:"container1"},op={class:"row"},ap={class:"col-12 col-lg-6"},lp={class:"col"},np={class:"form-floating mb-2"},rp=["value"],ip={key:0,class:"d-block invalid-feedback"},dp={class:"col"},up={class:"input-group mb-2"},cp={class:"form-floating"},mp={id:"selectedVodSource",class:"form-control",placeholder:"Title"},fp={class:"col-12 col-lg-6"},pp={class:"col"},vp={class:"form-floating mb-2"},gp={key:0,class:"d-block invalid-feedback"},bp={class:"row row-cols-1 row-cols-sm-3 mt-2"},yp={class:"col"},$p={class:"form-floating mb-2"},wp={key:0},hp={key:1},_p={key:2},kp={key:3,class:"d-block invalid-feedback"},Sp={class:"col"},Tp={class:"form-floating mb-2"},Mp={key:0},Ip={key:1},xp={key:2,class:"d-block invalid-feedback"},Cp={class:"col"},Vp={class:"form-floating mb-2"},Pp={key:0,class:"mt-3"},Op={class:"table-responsive border mt-1"},Ap={class:"table table-borderless table-sm mb-0 align-middle"},Up={class:"text-center"},Dp=["onUpdate:modelValue","onChange"],Hp={key:0},Lp=["onUpdate:modelValue","onChange"],Ep={class:"text-start"},qp=["onClick"],Bp={class:"col mt-2"},Np={class:"row row-cols-1 row-cols-sm-2"},Rp={class:"col"},Fp={class:"form-floating mb-2"},zp={class:"col"},Gp={class:"form-floating mb-2"},jp={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),A=l,C=ue(),T=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),i={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0}}},X=Te(i,T),Q=Ie(()=>{const h=U.moment;if(T.startOffsetTime&&T.startOffsetTime!=="00:00:00"&&U.isValidTime(T.startOffsetTime)){const x=h().startOf("day"),ne=x.format("YYYY-MM-DD ")+T.startOffsetTime,j=h(ne).subtract(x);return T.item.startOffsetMillis=j.valueOf(),T.item.startOffsetMillis}return 0}),r=Ie(()=>{const h=U.moment;if(T.endOffsetTime&&T.endOffsetTime!=="00:00:00"&&U.isValidTime(T.endOffsetTime)){const x=h().startOf("day"),ne=x.format("YYYY-MM-DD ")+T.endOffsetTime,j=h(ne).subtract(x);return T.item.endOffsetMillis=j.valueOf(),T.item.endOffsetMillis}return 0}),m=Ie(()=>T.item.endOffsetMillis-T.item.startOffsetMillis),Y=Ie(()=>U.moment.utc(m.value).format("HH:mm:ss")),u=Ie(()=>{const h=T.item.adBreaks;return h&&h.length>0?h.reduce((ne,ie,j)=>ne+ie.durationInMillis,0):0}),I=Ie(()=>{const h=m.value+u.value;return U.moment.utc(h).format("HH:mm:ss")}),b=Ie(()=>U.moment.utc(u.value).format("HH:mm:ss"));fe(async()=>{await _()}),Ae(()=>{T.hls&&(T.hls.stopLoad(),T.hls.destroy())});const _=async()=>{await g(),await a()},g=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(x=>{T.lookups.sourceLocations=x.data,T.lookups.sourceLocations.length===1&&(T.item.sourceLocationId=T.lookups.sourceLocations[0].id)}),T.item.sourceLocationId&&await d(T.item.sourceLocationId)}catch(h){V.value=U.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},d=async h=>{try{const x=`/api/v1/vodSources/lookup/source-location/${h}/?category=3`;await W.get(x).then(ne=>{T.lookups.vodSources=ne.data})}catch(x){V.value=U.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},f=async h=>{try{let x=`/api/v1/vodSources/${h}/blank-frames`;const ne=await W.get(x).then(ie=>ie.data);T.item.adBreaks=[],ne&&ne.length>0&&(T.item.adBreaks=ne.map(ie=>{const j=(ie.endInMillis-ie.startInMillis)/2+ie.startInMillis;return{offsetTime:U.moment.utc(j).format("HH:mm:ss"),offsetMillis:j,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(x){V.value=U.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},a=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(x=>{T.lookups.adBreakSourceLocations=x.data})}catch(h){V.value=U.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},n=()=>{const h={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};T.item.adBreaks.push(h)},v=h=>{T.item.adBreaks.splice(h,1)},$=h=>{const x=U.moment,ne=x().startOf("day"),ie=ne.format("YYYY-MM-DD ")+h.offsetTime,R=x(ie).subtract(ne);h.offsetMillis=R.valueOf()},y=h=>{const x=U.moment,ne=x().startOf("day"),ie=ne.format("YYYY-MM-DD ")+h.durationTime,R=x(ie).subtract(ne);h.durationInMillis=R.valueOf()},M=async()=>{const h=T;if(P.value)return;if(!await X.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const ne=U.clone(h.item),ie=ne.adBreaks.filter(j=>j.durationInMillis>0);ne.adBreaks=ie,await W.post("/api/v1/programtemplates/",ne).then(j=>{G.success("Add Program Template","Program template added.",{onClose:async()=>{const R=`${A.urlView}/${j.data}`;await K.push(R)}})})}catch(ne){V.value=U.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{P.value=!1}},w=async h=>{h&&(T.selected.vodSource=h,T.item.vodSourceId=h.vodSourceId,T.endOffsetTime=U.moment.utc(h.video.durationInMillis).format("HH:mm:ss"),await f(h.vodSourceId),N())},N=()=>{if(Hls.isSupported()){T.hls&&(T.hls.stopLoad(),T.hls.destroy());var h=document.getElementById("video-add-program-template");const ne=T.selected.vodSource.video.formats.find(j=>j.formatName==="HLS"),ie=ne.serverUrl+ne.path;T.hls=U.createHlsStream(h,ie)}};return(h,x)=>{const ne=te("router-link"),ie=te("PageHeader"),j=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(ie,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(X).$dirty&&o(X).$invalid,onClick:x[0]||(x[0]=R=>M()),class:"btn btn-primary"},x[10]||(x[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,tp),F(ne,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>x[11]||(x[11]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(j,{errorMessage:o(V),vuelidate:o(X)},{default:z(()=>[e("div",null,[e("div",sp,[e("div",op,[e("div",ap,[e("div",lp,[e("div",np,[B(e("select",{"onUpdate:modelValue":x[1]||(x[1]=R=>T.item.sourceLocationId=R),onChange:x[2]||(x[2]=R=>d(T.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(T.lookups.sourceLocations,R=>(t(),s("option",{value:R.id},c(R.name),9,rp))),256))],544),[[pe,T.item.sourceLocationId]]),x[12]||(x[12]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(X).item.sourceLocationId.$error?(t(),s("div",ip,[(t(!0),s(O,null,q(o(X).item.sourceLocationId.$errors,R=>(t(),s("div",{key:R.$uid},c(R.$message),1))),128))])):D("",!0)])]),e("div",dp,[e("div",up,[e("div",cp,[e("div",mp,[T.selected.vodSource?(t(),s(O,{key:0},[J(" ["+c(o(U).moment.utc(T.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+c(T.selected.vodSource.name),1)],64)):D("",!0)]),x[13]||(x[13]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),e("button",{onClick:x[3]||(x[3]=R=>C.value.open(T.sourceLocationId)),class:"btn btn-primary",type:"button"},x[14]||(x[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),x[15]||(x[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",fp,[e("div",pp,[e("div",vp,[B(e("input",{"onUpdate:modelValue":x[4]||(x[4]=R=>T.item.name=R),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,T.item.name]]),x[16]||(x[16]=e("label",{for:"name",class:""},"Name",-1)),o(X).item.name.$error?(t(),s("div",gp,[(t(!0),s(O,null,q(o(X).item.name.$errors,R=>(t(),s("div",{key:R.$uid},c(R.$message),1))),128))])):D("",!0)])]),e("div",bp,[e("div",yp,[e("div",null,[e("div",$p,[B(e("input",{"onUpdate:modelValue":x[5]||(x[5]=R=>T.startOffsetTime=R),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,T.startOffsetTime]]),x[17]||(x[17]=e("label",{for:"startOffsetTime",class:""}," Start OffSet Time ",-1))]),Q.value>0&&Q.value<3e4?(t(),s("div",wp,x[18]||(x[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):D("",!0),Q.value>r.value&&r.value>0?(t(),s("div",hp,x[19]||(x[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):D("",!0),T.selected.vodSource&&Q.value>=T.selected.vodSource.durationInMillis?(t(),s("div",_p,x[20]||(x[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(X).item.startOffsetMillis.$error?(t(),s("div",kp,[(t(!0),s(O,null,q(o(X).item.startOffsetMillis.$errors,R=>(t(),s("div",{key:R.$uid},c(R.$message),1))),128))])):D("",!0)])]),e("div",Sp,[e("div",null,[e("div",Tp,[B(e("input",{"onUpdate:modelValue":x[6]||(x[6]=R=>T.endOffsetTime=R),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,T.endOffsetTime]]),x[21]||(x[21]=e("label",{for:"endOffsetTime",class:""}," End OffSet Time ",-1))]),r.value>0&&r.value<3e4?(t(),s("div",Mp,x[22]||(x[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):D("",!0),T.selected.vodSource&&r.value>T.selected.vodSource.durationInMillis?(t(),s("div",Ip,x[23]||(x[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(X).item.endOffsetMillis.$error?(t(),s("div",xp,[(t(!0),s(O,null,q(o(X).item.endOffsetMillis.$errors,R=>(t(),s("div",{key:R.$uid},c(R.$message),1))),128))])):D("",!0)])]),e("div",Cp,[e("div",Vp,[B(e("input",{"onUpdate:modelValue":x[7]||(x[7]=R=>Y.value=R),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,Y.value]]),x[24]||(x[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),T.item.vodSourceId?(t(),s("div",Pp,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[x[26]||(x[26]=e("div",{class:"fw-bold small"}," Ad Break ",-1)),e("div",null,[e("button",{onClick:n,class:"btn btn-outline-primary btn-sm"},x[25]||(x[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Op,[e("table",Ap,[x[29]||(x[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(T.item.adBreaks,(R,oe)=>(t(),s("tr",null,[e("td",Up,c(oe+1),1),e("td",null,[B(e("input",{"onUpdate:modelValue":ce=>R.offsetTime=ce,onChange:ce=>$(R),type:"time",step:"1",class:"form-control"},null,40,Dp),[[Z,R.offsetTime]]),R.offsetMillis>=T.selected.vodSource.durationInMillis?(t(),s("div",Hp,x[27]||(x[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0)]),e("td",null,[B(e("input",{"onUpdate:modelValue":ce=>R.durationTime=ce,onChange:ce=>y(R),type:"time",step:"1",class:"form-control"},null,40,Lp),[[Z,R.durationTime]])]),e("td",Ep,[e("button",{onClick:ce=>v(oe),class:"btn btn-outline-warning btn-sm"},x[28]||(x[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,qp)])]))),256))])]),x[30]||(x[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),J(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):D("",!0),e("div",Bp,[x[33]||(x[33]=e("div",{class:"fw-bold small"}," Duration ",-1)),e("div",Np,[e("div",Rp,[e("div",Fp,[B(e("input",{"onUpdate:modelValue":x[8]||(x[8]=R=>b.value=R),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,b.value]]),x[31]||(x[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",zp,[e("div",Gp,[B(e("input",{"onUpdate:modelValue":x[9]||(x[9]=R=>I.value=R),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[Z,I.value]]),x[32]||(x[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"]),F(ct,{ref_key:"modalSelectVodSource",ref:C,onClose:w},null,512)])]),_:1})}}},Yp=["disabled"],Wp={class:"container1"},Kp={class:"row"},Qp={class:"col-12 col-lg-6"},Jp={class:"col"},Xp={class:"form-floating mb-2"},Zp=["value"],ev={key:0,class:"d-block invalid-feedback"},tv={class:"col"},sv={class:"input-group mb-2"},ov={class:"form-floating"},av={id:"selectedVodSource",class:"form-control",placeholder:"Title"},lv={class:"col-12 col-lg-6"},nv={class:"col"},rv={class:"form-floating mb-2"},iv={key:0,class:"d-block invalid-feedback"},dv={class:"row row-cols- row-cols-sm-3"},uv={class:"col"},cv={class:"form-floating mb-2"},mv={key:0},fv={key:1},pv={key:2},vv={key:3,class:"d-block invalid-feedback"},gv={class:"col"},bv={class:"form-floating"},yv={key:0},$v={key:1},wv={key:2,class:"d-block invalid-feedback"},hv={class:"col"},_v={class:"form-floating mb-2"},kv={key:0,class:"mt-2"},Sv={class:"table-responsive border mt-1"},Tv={class:"table table-borderless table-sm mb-0 align-middle"},Mv=["onUpdate:modelValue","onChange"],Iv={key:0},xv=["onUpdate:modelValue","onChange"],Cv=["onClick"],Vv={class:"col mt-2"},Pv={class:"row row-cols-1 row-cols-sm-2"},Ov={class:"col"},Av={class:"form-floating mb-2"},Uv={class:"col"},Dv={class:"form-floating mb-2"},Hv={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,closeWithReturnUrl:L,security:A}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),C=l,T=ue(),i=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),X={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),$autoDirty:!0,$lazy:!0}}},Q=Te(X,i),r=Ie(()=>{if(i.startOffsetTime&&i.startOffsetTime!=="00:00:00"&&U.isValidTime(i.startOffsetTime)){const j=U.moment,R=j().startOf("day"),ce=j(i.startOffsetTime,"hh:mm:ss").diff(R);return i.item.startOffsetMillis=ce.valueOf(),i.item.startOffsetMillis}return 0}),m=Ie(()=>{if(i.endOffsetTime&&i.endOffsetTime!=="00:00:00"&&U.isValidTime(i.endOffsetTime)){const j=U.moment,R=j().startOf("day"),ce=j(i.endOffsetTime,"hh:mm:ss").diff(R);return i.item.endOffsetMillis=ce.valueOf(),i.item.endOffsetMillis}return 0}),Y=Ie(()=>i.item.endOffsetMillis-i.item.startOffsetMillis),u=Ie(()=>U.moment.utc(Y.value).format("HH:mm:ss")),I=Ie(()=>{const j=i.item.adBreaks;return j&&j.length>0?j.reduce((oe,ce,ae)=>oe+ce.durationInMillis,0):0}),b=Ie(()=>{const j=Y.value+I.value;return U.moment.utc(j).format("HH:mm:ss")}),_=Ie(()=>U.moment.utc(I.value).format("HH:mm:ss"));fe(async()=>{await g()});const g=async()=>{await d(),await f(),await a()},d=async()=>{try{const j=`/api/v1/programtemplates/${C.id}/`;await W.get(j).then(R=>{i.item=R.data}),i.startOffsetTime=U.moment.utc(i.item.startOffsetMillis).format("HH:mm:ss"),i.endOffsetTime=U.moment.utc(i.item.endOffsetMillis).format("HH:mm:ss"),i.item.adBreaks.forEach(R=>{R.offsetTime=U.moment.utc(R.offsetMillis).format("HH:mm:ss"),R.durationTime=U.moment.utc(R.durationInMillis).format("HH:mm:ss")})}catch(j){V.value=U.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},f=async()=>{try{const j=`/api/v1/vodSources/${i.item.vodSourceId}/`;await W.get(j).then(R=>{i.selected.vodSource=R.data}),ne()}catch(j){V.value=U.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},a=async()=>{await n()},n=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(R=>{i.lookups.sourceLocations=R.data}),i.item.sourceLocationId&&await v(i.item.sourceLocationId)}catch(j){V.value=U.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},v=async j=>{try{const R=`/api/v1/vodSources/lookup/source-location/${j}/?type=3`;await W.get(R).then(oe=>{i.lookups.vodSources=oe.data})}catch(R){V.value=U.getErrorMessageAsHtml(R),window.scrollTo(0,0)}finally{}},$=async()=>{const j=i.selected.vodSource;j&&(i.startOffsetTime=U.moment.utc(0).format("HH:mm:ss"),i.endOffsetTime=U.moment.utc(j.video.durationInMillis).format("HH:mm:ss"),i.item.vodSourceId=j.vodSourceId)},y=()=>{const j={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};i.item.adBreaks.push(j)},M=j=>{i.item.adBreaks.splice(j,1)},w=j=>{const R=U.moment,oe=R().startOf("day"),ce=oe.format("YYYY-MM-DD ")+j.offsetTime,Ce=R(ce).subtract(oe);j.offsetMillis=Ce.valueOf()},N=j=>{const R=U.moment,oe=R().startOf("day"),ce=oe.format("YYYY-MM-DD ")+j.durationTime,Ce=R(ce).subtract(oe);j.durationInMillis=Ce.valueOf()},h=async()=>{const j=i;if(P.value)return;if(!await Q.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const oe=U.clone(j.item);debugger;oe.startOffsetMillis=r.value,oe.endOffsetMillis=m.value,await W.put("/api/v1/programtemplates/",oe).then(ce=>{G.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ae=`${C.urlView}/${C.id}`;await K.push(ae)}})})}catch(oe){V.value=U.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{P.value=!1}},x=async j=>{if(j){i.selected.vodSource=j,i.item.vodSourceId=j.vodSourceId,$();debugger;await ie(j.vodSourceId),ne()}},ne=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var j=document.getElementById("video-edit-program-template");const oe=i.selected.vodSource.video.formats.find(ae=>ae.formatName==="HLS"),ce=oe.serverUrl+oe.path;i.hls=U.createHlsStream(j,ce)}},ie=async j=>{try{let R=`/api/v1/vodSources/${j}/blank-frames`;const oe=await W.get(R).then(ce=>ce.data);i.item.adBreaks=[],oe&&oe.length>0&&(i.item.adBreaks=oe.map(ce=>{const ae=(ce.endInMillis-ce.startInMillis)/2+ce.startInMillis;return{offsetTime:U.moment.utc(ae).format("HH:mm:ss"),offsetMillis:ae,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(R){V.value=U.getErrorMessageAsHtml(R),window.scrollTo(0,0)}finally{}};return(j,R)=>{const oe=te("PageHeader"),ce=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(oe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(Q).$dirty&&o(Q).$invalid,onClick:R[0]||(R[0]=ae=>h()),class:"btn btn-primary"},R[12]||(R[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yp),e("button",{onClick:R[1]||(R[1]=ae=>g()),class:"btn btn-secondary ms-2"},R[13]||(R[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:R[2]||(R[2]=ae=>o(L)(C.urlMain)),class:"btn btn-secondary ms-1"},R[14]||(R[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(ce,{errorMessage:o(V),vuelidate:o(Q)},{default:z(()=>[e("div",null,[e("div",Wp,[e("div",Kp,[e("div",Qp,[e("div",Jp,[e("div",Xp,[B(e("select",{"onUpdate:modelValue":R[3]||(R[3]=ae=>i.item.sourceLocationId=ae),onChange:R[4]||(R[4]=ae=>v(i.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(i.lookups.sourceLocations,ae=>(t(),s("option",{value:ae.id},c(ae.name),9,Zp))),256))],544),[[pe,i.item.sourceLocationId]]),R[15]||(R[15]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(Q).item.sourceLocationId.$error?(t(),s("div",ev,[(t(!0),s(O,null,q(o(Q).item.sourceLocationId.$errors,ae=>(t(),s("div",{key:ae.$uid},c(ae.$message),1))),128))])):D("",!0)])]),e("div",tv,[e("div",sv,[e("div",ov,[e("div",av,[i.selected.vodSource?(t(),s(O,{key:0},[J(" ["+c(o(U).moment.utc(i.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+c(i.selected.vodSource.name),1)],64)):D("",!0)]),R[16]||(R[16]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),e("button",{onClick:R[5]||(R[5]=ae=>T.value.open(i.sourceLocationId)),class:"btn btn-primary",type:"button"},R[17]||(R[17]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),R[18]||(R[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",lv,[e("div",nv,[e("div",rv,[B(e("input",{"onUpdate:modelValue":R[6]||(R[6]=ae=>i.item.name=ae),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,i.item.name]]),R[19]||(R[19]=e("label",{for:"name",class:""},"Name",-1)),o(Q).item.name.$error?(t(),s("div",iv,[(t(!0),s(O,null,q(o(Q).item.name.$errors,ae=>(t(),s("div",{key:ae.$uid},c(ae.$message),1))),128))])):D("",!0)])]),e("div",dv,[e("div",uv,[e("div",cv,[B(e("input",{"onUpdate:modelValue":R[7]||(R[7]=ae=>i.startOffsetTime=ae),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,i.startOffsetTime]]),R[20]||(R[20]=e("label",{for:"startOffsetTime",class:""},"Start OffSet Time",-1))]),r.value>0&&r.value<3e4?(t(),s("div",mv,R[21]||(R[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):D("",!0),r.value>m.value&&m.value>0?(t(),s("div",fv,R[22]||(R[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):D("",!0),i.selected.vodSource&&r.value>=i.selected.vodSource.durationInMillis?(t(),s("div",pv,R[23]||(R[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(Q).item.startOffsetMillis.$error?(t(),s("div",vv,[(t(!0),s(O,null,q(o(Q).item.startOffsetMillis.$errors,ae=>(t(),s("div",{key:ae.$uid},c(ae.$message),1))),128))])):D("",!0)]),e("div",gv,[e("div",bv,[B(e("input",{"onUpdate:modelValue":R[8]||(R[8]=ae=>i.endOffsetTime=ae),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,i.endOffsetTime]]),R[24]||(R[24]=e("label",{for:"endOffsetTime",class:""},"End OffSet Time",-1))]),m.value>0&&m.value<3e4?(t(),s("div",yv,R[25]||(R[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):D("",!0),i.selected.vodSource&&m.value>i.selected.vodSource.durationInMillis?(t(),s("div",$v,R[26]||(R[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(Q).item.endOffsetMillis.$error?(t(),s("div",wv,[(t(!0),s(O,null,q(o(Q).item.endOffsetMillis.$errors,ae=>(t(),s("div",{key:ae.$uid},c(ae.$message),1))),128))])):D("",!0)]),e("div",hv,[e("div",_v,[B(e("input",{"onUpdate:modelValue":R[9]||(R[9]=ae=>u.value=ae),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,u.value]]),R[27]||(R[27]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),i.selected.vodSource?(t(),s("div",kv,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[R[29]||(R[29]=e("b",null," Ad Break ",-1)),e("div",null,[e("button",{onClick:y,class:"btn btn-outline-primary btn-sm"},R[28]||(R[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Sv,[e("table",Tv,[R[32]||(R[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(i.item.adBreaks,(ae,Ce)=>(t(),s("tr",null,[e("td",null,c(Ce+1),1),e("td",null,[B(e("input",{"onUpdate:modelValue":_e=>ae.offsetTime=_e,onChange:_e=>w(ae),type:"time",step:"1",class:"form-control"},null,40,Mv),[[Z,ae.offsetTime]]),ae.offsetMillis>=i.selected.vodSource.durationInMillis?(t(),s("div",Iv,R[30]||(R[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0)]),e("td",null,[B(e("input",{"onUpdate:modelValue":_e=>ae.durationTime=_e,onChange:_e=>N(ae),type:"time",step:"1",class:"form-control"},null,40,xv),[[Z,ae.durationTime]])]),e("td",null,[e("button",{onClick:_e=>M(Ce),class:"btn btn-outline-warning btn-sm"},R[31]||(R[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Cv)])]))),256))])]),R[33]||(R[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),J(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):D("",!0),e("div",Vv,[R[36]||(R[36]=e("b",null," Duration ",-1)),e("div",Pv,[e("div",Ov,[e("div",Av,[B(e("input",{"onUpdate:modelValue":R[10]||(R[10]=ae=>_.value=ae),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,_.value]]),R[34]||(R[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Uv,[e("div",Dv,[B(e("input",{"onUpdate:modelValue":R[11]||(R[11]=ae=>b.value=ae),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[Z,b.value]]),R[35]||(R[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"]),F(ct,{ref_key:"modalSelectVodSource",ref:T,onClose:x},null,512)])]),_:1})}}},Lv={class:"ms-1"},Ev={class:"input-group"},qv={class:"table-responsive border shadow-sm"},Bv={class:"table table-hover mb-0"},Nv=["textContent"],Rv={class:"d-flex flex-row"},Fv={class:""},zv={class:"mb-1"},Gv=["src"],jv={class:"ms-2"},Yv={key:0,class:"fas fa-fw fa-check-circle text-success"},Wv={class:"text-wrap text-truncate",style:{width:"20px !important"}},Kv={class:"badge bg-primary me-1"},Qv={key:0},Jv={class:"badge bg-info me-1"},Xv={class:"text-end me-0 me-sm-5"},Zv={class:"text-center"},eg={class:"mt-1"},tg="/api/v1/programTemplates/search",sg={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,generateReturnUrl:C,security:T,filter:i,initializeFilter:X,getQuery:Q,saveQuery:r,search:m,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${S==null?void 0:S.userId}/program-templates/search`,baseUrl:tg,filter:{updateUrl:!0}});return fe(async()=>{X(),await m()}),(b,_)=>{const g=te("router-link"),d=te("PageHeader"),f=te("m-pagination"),a=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(d,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:z(()=>[F(g,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Lv,[e("div",Ev,[B(e("input",{"onUpdate:modelValue":_[0]||(_[0]=n=>o(i).query.criteria=n),onKeyup:_[1]||(_[1]=Ue(n=>o(m)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(i).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[2]||(_[2]=n=>o(m)(1))},_[4]||(_[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(a,{errorMessage:o(W)},{default:z(()=>[e("div",qv,[e("table",Bv,[_[5]||(_[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th",null,"Source")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(i).items,(n,v)=>(t(),s("tr",{key:n.programTemplateId},[e("td",{textContent:c(o(Y)(v)),class:"text-center"},null,8,Nv),e("td",null,[e("div",Rv,[e("div",Fv,[n.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(n.vodSource.video.thumbnails,$=>(t(),s("div",zv,[e("img",{src:$.url,class:"img-fuild border",width:"128"},null,8,Gv)]))),256)):D("",!0)]),e("div",jv,[F(g,{to:`${l.urlView}/${n.programTemplateId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[n.arn?(t(),s("span",Yv)):D("",!0),e("span",Wv,c(n.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,q(n.vodSource.video.categories,$=>(t(),s("div",null,[e("span",Kv,c($.categoryName),1)]))),256)),n.vodSource.video.genres.length>0?(t(),s("div",Qv,[(t(!0),s(O,null,q(n.vodSource.video.genres,$=>(t(),s("span",Jv,c($.genreName),1))),256))])):D("",!0)])])])]),e("td",Xv,c(o(ee).moment.utc(n.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",Zv,c(n.adBreaks.length),1),e("td",null,[e("div",null,[F(g,{to:`${l.urlViewSourceLocation}/${n.sourceLocationId}/${o(C)()}`,class:"link-offset-2"},{default:z(()=>[J(c(n.sourceLocation.name),1)]),_:2},1032,["to"])]),e("div",eg,[F(g,{to:`${l.urlViewVodSource}/${n.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:z(()=>[J(c(n.vodSource.name),1)]),_:2},1032,["to"])])])]))),128))]),_:1},512),[[Se,o(i).items.length>0]])])]),F(f,{filter:o(i),search:o(m),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},og={key:0},ag={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},lg={class:"nav-item",role:"presentation"},ng={class:"nav-item",role:"presentation"},rg={class:"nav-item d-none",role:"presentation"},ig={class:"tab-content",id:"myTabContent"},dg={class:"mt-2"},ug={class:""},cg={class:"row row-cols-1 row-cols-lg-2"},mg={class:"col"},fg={class:"col"},pg={class:"form-floating mb-2"},vg={id:"sourceLocation",class:"form-control-plaintext"},gg={class:"col"},bg={class:"form-floating mb-2"},yg={id:"vodSource",class:"form-control-plaintext"},$g={class:"col"},wg={class:"col"},hg={class:"form-floating mb-2"},_g={class:"row row-cols-1 row-cols-sm-3"},kg={class:"col"},Sg={class:"form-floating mb-2"},Tg={class:"col"},Mg={class:"form-floating mb-2"},Ig={class:"col"},xg={class:"form-floating mb-2"},Cg={class:"row row-cols-1 row-cols-sm-3"},Vg={class:"col"},Pg={class:"form-floating mb-2"},Og={class:"col"},Ag={class:"form-floating mb-2"},Ug={class:"mt-2"},Dg={class:"table-responsive"},Hg={class:"table table-hover mb-0"},Lg={class:"text-center"},Eg={class:"mt-2"},qg={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:K,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:L,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:i,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});xe("$config");const Q=we();Q.user;const r=ge({user:Q.user,item:null,hls:null}),m=ue();fe(async()=>{await b(),m.value=L.getPageTab("programTemplate")||"information-tab"});const Y=d=>{L.setPageTab("programTemplate",d),m.value=d},u=d=>d!==m.value?"":"active",I=d=>d!==m.value?"":"show active",b=async()=>{const d=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const f=`/api/v1/programTemplates/${p.id}/`;await ee.get(f).then(a=>{d.item=a.data;const n=d.item;n.startOffsetTime=L.moment.utc(n.startOffsetMillis).format("HH:mm:ss"),n.endOffsetTime=L.moment.utc(n.endOffsetMillis).format("HH:mm:ss"),n.durationTime=L.moment.utc(n.durationInMillis).format("HH:mm:ss"),n.adBreaksDurationTime=L.moment.utc(n.adBreaksDurationInMillis).format("HH:mm:ss"),n.totalProgramTemplateDurationTime=L.moment.utc(n.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const v=n.vodSource.video,$=v.durationInMillis;v.durationInMillis=L.moment.utc($).format("HH:mm:ss")}),r.item.vodSource&&await g(r.item.vodSourceId)}catch(f){U.value=L.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{await b()},g=async d=>{try{let f=`/api/v1/vodSources/${d}/hls`;const a=await ee.get(f).then(v=>v.data);r.hls&&r.hls.destroy();const n=document.getElementById("video-view-program-template");r.hls=L.createHlsStream(n,a,"Previewing VOD.")}catch(f){U.value=L.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}};return(d,f)=>{const a=te("router-link"),n=te("PageHeader"),v=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(n,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(P)},{default:z(()=>[F(a,{to:`${l.urlEdit}/${l.id}/${o(i)()}`,class:"ms-2 btn btn-primary"},{default:z(()=>f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:f[0]||(f[0]=$=>_()),class:"ms-2 btn btn-secondary"},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:f[1]||(f[1]=$=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",og,[e("div",null,[e("ul",ag,[e("li",lg,[e("button",{onClick:f[2]||(f[2]=$=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ng,[e("button",{onClick:f[3]||(f[3]=$=>Y("adBreaks-tab")),class:re([u("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",rg,[e("button",{onClick:f[4]||(f[4]=$=>Y("programs-tab")),class:re([u("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",ig,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",dg,[e("div",ug,[e("div",cg,[e("div",mg,[e("div",fg,[e("div",pg,[e("div",vg,[F(a,{to:`${l.urlViewSourceLocation}/${r.item.sourceLocationId}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(r.item.sourceLocation.name),1)]),_:1},8,["to"])]),f[14]||(f[14]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",gg,[e("div",bg,[e("div",yg,[F(a,{to:`${l.urlViewVodSource}/${r.item.vodSourceId}/${o(i)()}`,class:"link-offset-2"},{default:z(()=>[J(c(r.item.vodSource.name),1)]),_:1},8,["to"])]),f[15]||(f[15]=e("label",{for:"vodSource",class:""},"VOD Name",-1))])]),f[16]||(f[16]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",$g,[e("div",wg,[e("div",hg,[B(e("input",{"onUpdate:modelValue":f[5]||(f[5]=$=>r.item.name=$),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),f[17]||(f[17]=e("label",{for:"name",class:""},"Name",-1))])]),e("div",_g,[e("div",kg,[e("div",Sg,[B(e("input",{"onUpdate:modelValue":f[6]||(f[6]=$=>r.item.startOffsetTime=$),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[Z,r.item.startOffsetTime]]),f[18]||(f[18]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",Tg,[e("div",Mg,[B(e("input",{"onUpdate:modelValue":f[7]||(f[7]=$=>r.item.endOffsetTime=$),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[Z,r.item.endOffsetTime]]),f[19]||(f[19]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",Ig,[e("div",xg,[B(e("input",{"onUpdate:modelValue":f[8]||(f[8]=$=>r.item.durationTime=$),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,r.item.durationTime]]),f[20]||(f[20]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",Cg,[e("div",Vg,[e("div",Pg,[B(e("input",{"onUpdate:modelValue":f[9]||(f[9]=$=>r.item.adBreaksDurationTime=$),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,r.item.adBreaksDurationTime]]),f[21]||(f[21]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks",-1))])]),e("div",Og,[e("div",Ag,[B(e("input",{"onUpdate:modelValue":f[10]||(f[10]=$=>r.item.totalProgramTemplateDurationTime=$),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,r.item.totalProgramTemplateDurationTime]]),f[22]||(f[22]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:re([I("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Ug,[e("div",Dg,[e("table",Hg,[f[23]||(f[23]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.adBreaks,($,y)=>(t(),s("tr",{key:$.programTemplateAdBreakId},[e("td",Lg,c(y+1),1),e("td",null,c(o(L).moment.utc($.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(L).moment.utc($.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Se,r.item.adBreaks.length>0]])])])])],2),e("div",{class:re([I("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Eg,[e("pre",null,c(r.item.programs),1)])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Bg=["disabled"],Ng={class:"row row-cols-1 row-cols-sm-3"},Rg={class:"col-sm-6"},Fg={class:"form-floating mb-2"},zg={key:0,class:"d-block invalid-feedback"},Gg={class:"col-sm-3"},jg={class:"form-floating mb-2"},Yg={key:0,class:"d-block invalid-feedback"},Wg={class:"col-sm-3"},Kg={class:"form-floating mb-2"},Qg={key:0,class:"d-block invalid-feedback"},Jg={class:"row row-cols-1 row-cols-sm-2"},Xg={class:"col"},Zg={class:"form-floating mb-2"},e1=["value"],t1={key:0,class:"d-block invalid-feedback"},s1={class:"col"},o1={class:"form-floating mb-2"},a1=["value"],l1={key:0,class:"d-block invalid-feedback"},n1={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),A=l,C=ge({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),T={item:{name:{title:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},tier:{title:se.withMessage("Tier is required.",le),$autoDirty:!0,$lazy:!0},playbackMode:{title:se.withMessage("PlaybackMode is required.",le),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:se.withMessage("Filler Slate Source Location is required.",le),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:se.withMessage("Filler Slate Vod Source is required.",le),$autoDirty:!0,$lazy:!0},policy:{title:se.withMessage("Policy is required.",le),$autoDirty:!0,$lazy:!0}}},i=Te(T,C);fe(async()=>{await X()});const X=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(I=>{C.lookups.sourceLocations=I.data,C.lookups.sourceLocations.length===1&&(C.item.fillerSlateSourceLocationId=C.lookups.sourceLocations[0].id)}),C.item.fillerSlateSourceLocationId&&await r(C.item.fillerSlateSourceLocationId)}catch(u){V.value=U.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},Q=async()=>{C.item.fillerSlateVodSourceId=null,await r(C.item.fillerSlateSourceLocationId)},r=async u=>{try{let I=`/api/v1/vodSources/lookup/source-location/${u}/?category=2`;await W.get(I).then(b=>{C.lookups.vodSources=b.data})}catch(I){V.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},m=()=>{if(C.item.name){const u=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${C.item.name}"}]}`;C.item.policy=u}else C.item.policy=null},Y=async()=>{const u=C;if(P.value)return;if(!await i.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const b=U.clone(u.item);await W.post("/api/v1/channels/",b).then(_=>{G.success("Add Channel","Channel added.",{onClose:async()=>{const g=`${A.urlView}/${_.data}`;await K.push(g)}})})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}};return(u,I)=>{const b=te("router-link"),_=te("PageHeader"),g=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(i).$dirty&&o(i).$invalid,onClick:I[0]||(I[0]=d=>Y()),class:"btn btn-primary"},I[8]||(I[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Bg),F(b,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>I[9]||(I[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(g,{errorMessage:o(V),vuelidate:o(i)},{default:z(()=>[e("div",null,[e("div",Ng,[e("div",Rg,[e("div",Fg,[B(e("input",{"onUpdate:modelValue":I[1]||(I[1]=d=>C.item.name=d),onChange:I[2]||(I[2]=d=>m()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Z,C.item.name]]),I[10]||(I[10]=e("label",{for:"name",class:""},"Name",-1)),o(i).item.name.$error?(t(),s("div",zg,[(t(!0),s(O,null,q(o(i).item.name.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):D("",!0)])]),e("div",Gg,[e("div",jg,[B(e("input",{"onUpdate:modelValue":I[3]||(I[3]=d=>C.item.tier=d),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Z,C.item.tier]]),I[11]||(I[11]=e("label",{for:"tier",class:""},"Tier",-1)),o(i).item.tier.$error?(t(),s("div",Yg,[(t(!0),s(O,null,q(o(i).item.tier.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):D("",!0)])]),e("div",Wg,[e("div",Kg,[B(e("input",{"onUpdate:modelValue":I[4]||(I[4]=d=>C.item.playbackMode=d),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Z,C.item.playbackMode]]),I[12]||(I[12]=e("label",{for:"playbackMode",class:""},"PlaybackMode",-1)),o(i).item.playbackMode.$error?(t(),s("div",Qg,[(t(!0),s(O,null,q(o(i).item.playbackMode.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):D("",!0)])])]),I[15]||(I[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",Jg,[e("div",Xg,[e("div",Zg,[B(e("select",{"onUpdate:modelValue":I[5]||(I[5]=d=>C.item.fillerSlateSourceLocationId=d),onChange:I[6]||(I[6]=d=>Q()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(O,null,q(C.lookups.sourceLocations,d=>(t(),s("option",{value:d.id},c(d.name),9,e1))),256))],544),[[pe,C.item.fillerSlateSourceLocationId]]),I[13]||(I[13]=e("label",{for:"fillerSlateSourceLocationId",class:""},"Source Location",-1)),o(i).item.fillerSlateSourceLocationId.$error?(t(),s("div",t1,[(t(!0),s(O,null,q(o(i).item.fillerSlateSourceLocationId.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):D("",!0)])]),e("div",s1,[e("div",o1,[B(e("select",{"onUpdate:modelValue":I[7]||(I[7]=d=>C.item.fillerSlateVodSourceId=d),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(O,null,q(C.lookups.vodSources,d=>(t(),s("option",{value:d.id},c(d.name),9,a1))),256))],512),[[pe,C.item.fillerSlateVodSourceId]]),I[14]||(I[14]=e("label",{for:"fillerSlateVodSourceId",class:""},"VOD Source",-1)),o(i).item.fillerSlateVodSourceId.$error?(t(),s("div",l1,[(t(!0),s(O,null,q(o(i).item.fillerSlateVodSourceId.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):D("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},r1={components:{Page:Xe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function i1(l,p,S,P,k,H){const V=te("Page");return t(),ve(V,{id:S.id,urlView:S.urlView},null,8,["id","urlView"])}const d1=Ve(r1,[["render",i1]]),u1={class:"ms-1"},c1={class:"input-group"},m1={class:"table-responsive border shadow-sm"},f1={class:"table table-hover mb-0"},p1=["textContent"],v1={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},g1={key:0,class:"badge text-bg-success"},b1={key:1,class:"badge text-bg-secondary"},y1="/api/v1/channels/search",$1={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:K,errorMessage:W,router:U,axios:G,utils:ee,toasts:L,close:A,security:C,filter:T,initializeFilter:i,getQuery:X,saveQuery:Q,search:r,getRowNumber:m,setSelected:Y,isSelected:u}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${S==null?void 0:S.userId}/Channels/search`,baseUrl:y1,filter:{updateUrl:!0}});return fe(async()=>{i(),await r()}),(I,b)=>{const _=te("router-link"),g=te("PageHeader"),d=te("m-pagination"),f=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(g,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k)},{default:z(()=>[F(_,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>b[3]||(b[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",u1,[e("div",c1,[B(e("input",{"onUpdate:modelValue":b[0]||(b[0]=a=>o(T).query.criteria=a),onKeyup:b[1]||(b[1]=Ue(a=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:b[2]||(b[2]=a=>o(r)(1))},b[4]||(b[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(f,{errorMessage:o(W)},{default:z(()=>[e("div",m1,[e("table",f1,[b[5]||(b[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(a,n)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:c(o(m)(n)),class:"text-center"},null,8,p1),e("td",null,[F(_,{to:`${l.urlView}/${a.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[a.arn?(t(),s("span",v1)):D("",!0),J(c(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",g1,c(a.state),1)):a.state==="STOPPED"?(t(),s("span",b1,c(a.state),1)):D("",!0)])]),e("td",null,c(a.playbackMode),1),e("td",null,c(a.tier),1)]))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(d,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},w1=["id"],h1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},_1={class:"modal-content"},k1={class:"modal-header"},S1={class:"modal-title"},T1={class:"modal-body p-1"},M1={class:"row row-cols-1 row-cols-sm-2 g-2"},I1={class:"col-sm-4"},x1={class:"card"},C1={key:0,class:"mt-2"},V1={class:"col"},P1={class:"form-floating mb-2"},O1={class:"col ms-2 my-2"},A1={class:"badge bg-info me-1"},U1={class:"badge bg-primary me-1"},D1={class:"row row-cols-1 row-cols-sm-2"},H1={class:"col"},L1={class:"form-floating mb-2"},E1={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},q1={class:"col"},B1={class:"form-floating mb-2"},N1={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},R1={class:"col"},F1={class:"form-floating mb-2"},z1={class:"col-sm-8"},G1={class:"col"},j1={class:"input-group mb-2"},Y1={class:"form-floating"},W1={class:"table-responsive border shadow-sm"},K1={class:"table table-sm table-hover mb-0 overflow-auto"},Q1=["textContent"],J1={class:"d-flex flex-row justify-content-start"},X1={class:"mt-1"},Z1=["src"],eb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},tb={class:"ms-2"},sb=["onClick"],ob={class:"modal-footer"},ab="/api/v1/programtemplates/search",lb={__name:"_selectProgramTemplate",emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,security:T,filter:i,initializeFilter:X,getQuery:Q,saveQuery:r,search:m,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select Program Template",cacheKey:`${k==null?void 0:k.userId}/program-templates/select`,baseUrl:ab,filter:{updateUrl:!0,lookups:{genres:[]},query:{}}}),b=S,_=ue("modalSelectProgramTemplate"),g=ge({programTemplate:null,hls:null});fe(async()=>{X(),await d()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const d=async()=>{await n(),await v()},f=async y=>{i.value.query.sourceLocationId=y,G.value="",await m();var M=document.getElementById(_.value),w=he.getOrCreateInstance(M);w.show()},a=async()=>{var y=document.getElementById(_.value),M=he.getOrCreateInstance(y);M.hide(),g.hls&&(g.hls.stopLoad(),g.hls.destroy()),b("close",g.programTemplate)},n=async y=>{try{const w=await L.get("/api/v1/lookups/video-categories/").then(N=>N.data);i.value.lookups.categories=w}catch(M){G.value=A.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},v=async y=>{try{const w=await L.get("/api/v1/lookups/video-genres/").then(N=>N.data);i.value.lookups.genres=w}catch(M){G.value=A.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},$=y=>{g.programTemplate=y,a()};return p({open:f,close:a}),(y,M)=>{const w=te("m-pagination"),N=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",h1,[e("div",_1,[e("div",k1,[e("h5",S1,[M[8]||(M[8]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),J(c(o(V)),1)]),e("button",{type:"button",class:"btn-close",onClick:M[0]||(M[0]=h=>a()),"aria-label":"Close"})]),e("div",T1,[F(N,{errorMessage:o(G)},{default:z(()=>[e("div",M1,[e("div",I1,[e("div",x1,[M[13]||(M[13]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.programTemplate?(t(),s("div",C1,[e("div",V1,[e("div",P1,[B(e("input",{"onUpdate:modelValue":M[1]||(M[1]=h=>g.programTemplate.vodSource.video.title=h),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.programTemplate.vodSource.video.title]]),M[9]||(M[9]=e("label",{for:"title"},"Title",-1))])]),e("div",O1,[e("div",null,[(t(!0),s(O,null,q(g.programTemplate.vodSource.video.genres,h=>(t(),s("span",A1,c(h.genreName),1))),256)),(t(!0),s(O,null,q(g.programTemplate.vodSource.video.categories,h=>(t(),s("span",U1,c(h.categoryName),1))),256))])]),e("div",D1,[e("div",H1,[e("div",L1,[e("div",E1,c(o(A).moment(g.programTemplate.vodSource.video.dateReleased).calendar()),1),M[10]||(M[10]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",q1,[e("div",B1,[e("div",N1,c(o(A).moment.utc(g.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),M[11]||(M[11]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",R1,[e("div",F1,[B(e("textarea",{"onUpdate:modelValue":M[2]||(M[2]=h=>g.programTemplate.vodSource.video.description=h),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.programTemplate.vodSource.video.description]]),M[12]||(M[12]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])]),e("div",z1,[e("div",G1,[e("div",j1,[e("div",Y1,[B(e("input",{"onUpdate:modelValue":M[3]||(M[3]=h=>o(i).query.criteria=h),onKeyup:M[4]||(M[4]=Ue(h=>o(m)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(i).query.criteria]]),M[14]||(M[14]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:M[5]||(M[5]=h=>o(m)(1))},M[15]||(M[15]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",W1,[e("table",K1,[M[16]||(M[16]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(i).items,(h,x)=>(t(),s("tr",{key:h.videoId},[e("td",{textContent:c(o(Y)(x)),class:"text-center"},null,8,Q1),e("td",null,[e("div",J1,[e("div",null,[h.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(h.vodSource.video.thumbnails,ne=>(t(),s("div",X1,[e("img",{src:ne.url,class:"img-fuild border",width:"128"},null,8,Z1)]))),256)):(t(),s("img",eb))]),e("div",tb,[e("a",{onClick:ne=>$(h),class:"text-wrap link-offset-2",role:"button"},c(h.name),9,sb)])])])]))),128))]),_:1},512),[[Se,o(i).items.length>0]])])]),F(w,{filter:o(i),search:o(m),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",ob,[e("button",{onClick:M[6]||(M[6]=h=>a()),class:"btn btn-primary",type:"button"},M[17]||(M[17]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:M[7]||(M[7]=h=>a()),class:"btn btn-secondary ms-1"},M[18]||(M[18]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,w1)}}},nb={key:0,class:"modal-content"},rb={class:"modal-header"},ib={class:"modal-title"},db={class:"modal-body1"},ub={class:"row row-cols-1 row-cols-sm-2 g-2"},cb={class:"card"},mb={key:0,class:"mt-2"},fb={class:"col"},pb={class:"form-floating mb-2"},vb={class:"col ms-2 my-2"},gb={class:"badge bg-info me-1"},bb={class:"badge bg-primary me-1"},yb={class:"row row-cols-1 row-cols-sm-2"},$b={class:"col"},wb={class:"form-floating mb-2"},hb={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},_b={class:"col"},kb={class:"form-floating mb-2"},Sb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Tb={class:"col"},Mb={class:"form-floating mb-2"},Ib={class:"col"},xb={class:"input-group mb-2"},Cb={class:"form-floating"},Vb={class:"table-responsive border shadow-sm"},Pb={class:"table table-sm table-hover mb-0 overflow-auto"},Ob=["textContent"],Ab={class:"d-flex flex-row justify-content-start"},Ub={class:"mt-1"},Db=["src"],Hb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Lb={class:"ms-2"},Eb=["onClick"],qb={class:"modal-footer"},Bb="/api/v1/programtemplates/search",Nb={__name:"_selectProgramTemplateInline",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,security:T,filter:i,initializeFilter:X,getQuery:Q,saveQuery:r,search:m,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select Program Template",cacheKey:`${k==null?void 0:k.userId}/program-templates/select`,baseUrl:Bb,filter:{updateUrl:!0,lookups:{genres:[]},query:{}},successAction:()=>{g.programTemplate&&(g.programTemplate=null)}}),b=l,_=S;ue("modalSelectProgramTemplateInline");const g=ge({programTemplate:null,hls:null});fe(async()=>{X(),await d()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const d=async()=>{await n(),await v()},f=async M=>{i.value.query.sourceLocationId=M,G.value="",await m(),b.isOpen=!0},a=async()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy()),_("close",g.programTemplate),b.isOpen=!1},n=async M=>{try{const N=await L.get("/api/v1/lookups/video-categories/").then(h=>h.data);i.value.lookups.categories=N}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},v=async M=>{try{const N=await L.get("/api/v1/lookups/video-genres/").then(h=>h.data);i.value.lookups.genres=N}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},$=M=>{g.programTemplate=M,y()},y=()=>{if(Hls.isSupported()){g.hls&&(g.hls.stopLoad(),g.hls.destroy());var M=document.getElementById("video-select-preview");const N=g.programTemplate.vodSource.video.formats.find(x=>x.formatName==="HLS"),h=N.serverUrl+N.path;g.hls=A.createHlsStream(M,h)}};return p({open:f,close:a}),(M,w)=>{const N=te("m-pagination"),h=te("PageBody");return t(),ve(be,null,{default:z(()=>[l.isOpen?(t(),s("div",nb,[e("div",rb,[e("h6",ib,[w[7]||(w[7]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),J(c(o(V)),1)])]),e("div",db,[F(h,{errorMessage:o(G)},{default:z(()=>[e("div",ub,[e("div",{class:re([g.programTemplate?"col-sm-4":"d-none"])},[e("div",cb,[w[12]||(w[12]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.programTemplate?(t(),s("div",mb,[e("div",fb,[e("div",pb,[B(e("input",{"onUpdate:modelValue":w[0]||(w[0]=x=>g.programTemplate.vodSource.video.title=x),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.programTemplate.vodSource.video.title]]),w[8]||(w[8]=e("label",{for:"title"},"Title",-1))])]),e("div",vb,[e("div",null,[(t(!0),s(O,null,q(g.programTemplate.vodSource.video.genres,x=>(t(),s("span",gb,c(x.genreName),1))),256)),(t(!0),s(O,null,q(g.programTemplate.vodSource.video.categories,x=>(t(),s("span",bb,c(x.categoryName),1))),256))])]),e("div",yb,[e("div",$b,[e("div",wb,[e("div",hb,c(o(A).moment(g.programTemplate.vodSource.video.dateReleased).calendar()),1),w[9]||(w[9]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",_b,[e("div",kb,[e("div",Sb,c(o(A).moment.utc(g.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),w[10]||(w[10]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Tb,[e("div",Mb,[B(e("textarea",{"onUpdate:modelValue":w[1]||(w[1]=x=>g.programTemplate.vodSource.video.description=x),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.programTemplate.vodSource.video.description]]),w[11]||(w[11]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])],2),e("div",{class:re([g.programTemplate?"col-sm-8":"col-sm-12"])},[e("div",Ib,[e("div",xb,[e("div",Cb,[B(e("input",{"onUpdate:modelValue":w[2]||(w[2]=x=>o(i).query.criteria=x),onKeyup:w[3]||(w[3]=Ue(x=>o(m)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(i).query.criteria]]),w[13]||(w[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:w[4]||(w[4]=x=>o(m)(1))},w[14]||(w[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Vb,[e("table",Pb,[w[15]||(w[15]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(i).items,(x,ne)=>(t(),s("tr",{key:x.videoId},[e("td",{textContent:c(o(Y)(ne)),class:"text-center"},null,8,Ob),e("td",null,[e("div",Ab,[e("div",null,[x.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(x.vodSource.video.thumbnails,ie=>(t(),s("div",Ub,[e("img",{src:ie.url,class:"img-fuild border",width:"128"},null,8,Db)]))),256)):(t(),s("img",Hb))]),e("div",Lb,[e("a",{onClick:ie=>$(x),class:"text-wrap link-offset-2",role:"button"},c(x.name),9,Eb)])])])]))),128))]),_:1},512),[[Se,o(i).items.length>0]])])]),F(N,{filter:o(i),search:o(m),showPerPage:!0},null,8,["filter","search"])],2)])]),_:1},8,["errorMessage"])]),e("div",qb,[e("button",{onClick:w[5]||(w[5]=x=>a()),class:"btn btn-primary",type:"button"},w[16]||(w[16]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:w[6]||(w[6]=x=>a(!1)),class:"btn btn-secondary ms-1"},w[17]||(w[17]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])):D("",!0)]),_:1})}}},Rb=["id"],Fb={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},zb={class:"modal-content"},Gb={class:"modal-header"},jb={class:"modal-title"},Yb={class:"modal-body"},Wb={key:0},Kb={class:"row row-cols-1 row-cols-sm-3"},Qb={class:"col-sm-3"},Jb={class:"form-floating mb-2"},Xb={key:0,class:"d-block invalid-feedback"},Zb={class:"col-sm-3"},ey={class:"form-floating mb-2"},ty={key:0,class:"d-block invalid-feedback"},sy={class:"col-sm-6"},oy={class:"input-group mb-2"},ay={class:"form-floating"},ly={id:"programTemplateId",class:"form-control",placeholder:"Title"},ny={key:0,class:"d-block invalid-feedback"},ry={key:0},iy={class:"row row-cols-1 row-cols-sm-2"},dy={class:"col"},uy={class:"row row-cols-1"},cy={class:"col"},my={class:"form-floating mb-2"},fy={class:"col"},py={class:"form-floating mb-2"},vy={class:"row row-cols-1 row-cols-sm-3"},gy={class:"col"},by={class:"form-floating mb-2"},yy={class:"col"},$y={class:"form-floating mb-2"},wy={class:"col"},hy={class:"form-floating mb-2"},_y={class:"row row-cols-1 row-cols-sm-3"},ky={class:"col"},Sy={class:"form-floating mb-2"},Ty={class:"col"},My={class:"form-floating mb-2"},Iy={key:1},xy={class:"table-responsive border mt-1"},Cy={class:"table table-sm mb-0"},Vy=["onUpdate:modelValue"],Py=["value"],Oy={key:0,class:"modal-footer"},Ay=["disabled"],Uy={__name:"_addProgram",emits:["onClose"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),X=S,Q=ue(),r=ue(),m=ue(),Y=ue("modalAddProgramFromTemplate"),u=ge({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplate:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),I=(ie,j,R)=>ie.length<=0?!0:ie.every(ce=>ce.vodSourceId),b={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},programTemplateId:{required:se.withMessage("Program Template is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},adBreaks:{adBreaksRequired:se.withMessage("Ad Break is not properly configured.",I),$each:se.forEach({vodSourceId:{required:se.withMessage("Vod Source is required.",le)}})}}},_=Te(b,u);fe(async()=>{_.value.$reset()});const g=async(ie,j,R)=>{m.value=ie;const oe=u;K.value.clear(),G.value="";const ce=A.moment(R),Ce=ce.format("YYYY-MM-DD HH:mm"),_e=ce.format("YYYYMMDD_HHmm")+"_PRG_";oe.eventId=j,oe.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},oe.selected={programTemplate:null},oe.item={programTemplateId:null,name:_e,dateScheduledStart:Ce,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await a(),_.value.$reset();var me=document.getElementById(Y.value),E=he.getOrCreateInstance(me);E.show()},d=async ie=>{if(!ie){X("onClose",{eventId:u.eventId},ie);var j=document.getElementById(Y.value),R=he.getOrCreateInstance(j);R.hide();return}if(!await _.value.$validate()){window.scrollTo(0,0);return}const ce=u,ae=A.moment(ce.item.dateScheduledStart).utc(!0).format(),Ce=A.moment(ce.item.dateScheduledStart).add(ce.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();u.item={eventId:ce.eventId,programTemplateId:ce.selected.programTemplate.programTemplateId,channelId:m.value,name:ce.item.name,dateScheduledStart:ae,dateScheduledEnd:Ce,adBreaks:ce.selected.programTemplate.adBreaks.map(_e=>({sourceLocationId:ce.selected.programTemplate.sourceLocationId,vodSourceId:_e.vodSourceId,offsetMillis:_e.offsetMillis,durationInMillis:_e.durationInMillis}))},await L.post("/api/v1/programs/",u.item).then(_e=>{C.success("Add New Program",`Program [${u.item.name}] was added to this channel.`),X("onClose",u.item,ie);var me=document.getElementById(Y.value),E=he.getOrCreateInstance(me);E.hide()},_e=>{G.value=A.getErrorMessageAsHtml(_e)})},f=async()=>{await d(!0)},a=async()=>{await M(),await n(),await v()},n=async()=>{try{const ie=`/api/v1/channelOutputs/get-by-channel/${m.value}`;await L.get(ie).then(j=>{u.lookups.channelOutputs=j.data}),u.item.programTemplateId&&await $()}catch(ie){G.value=A.getErrorMessageAsHtml(ie),window.scrollTo(0,0)}finally{}},v=async()=>{try{const ie=`/api/v1/programTemplates/lookup/by-channel/${m.value}`;await L.get(ie).then(j=>{u.lookups.programTemplates=j.data,u.lookups.programTemplates.length===1&&(u.item.programTemplateId=u.lookups.programTemplates[0].id)}),u.item.programTemplateId&&await $(u.item.programTemplateId)}catch(ie){G.value=A.getErrorMessageAsHtml(ie),window.scrollTo(0,0)}finally{}},$=async ie=>{await y(ie)},y=async ie=>{try{const j=`/api/v1/programTemplates/${ie}/`;await L.get(j).then(ce=>{u.selected.programTemplate=ce.data;const ae=u.selected.programTemplate;ae.startOffsetTime=A.moment.utc(ae.startOffsetMillis).format("HH:mm:ss"),ae.endOffsetTime=A.moment.utc(ae.endOffsetMillis).format("HH:mm:ss"),ae.durationTime=A.moment.utc(ae.durationInMillis).format("HH:mm:ss"),ae.adBreaksDurationTime=A.moment.utc(ae.adBreaksDurationInMillis).format("HH:mm:ss"),ae.totalProgramTemplateDurationTime=A.moment.utc(ae.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ae.adBreaks.forEach(Ce=>{Ce.vodSourceId=null}),u.item.programTemplateId=ae.programTemplateId,u.item.adBreaks=ae.adBreaks});const R=u,oe=R.lookups.channelOutputs[0].outputType;await N(R.selected.programTemplate.sourceLocationId,oe)}catch(j){G.value=A.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},M=async()=>{try{await L.get("/api/v1/sourcelocations/lookup/").then(j=>{u.lookups.sourceLocations=j.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await w(u.item.sourceLocationId)}catch(ie){G.value=A.getErrorMessageAsHtml(ie),window.scrollTo(0,0)}finally{}},w=async ie=>{try{let j=`/api/v1/vodSources/lookup/source-location/${ie}`;await L.get(j).then(R=>{u.lookups.vodSources=R.data})}catch(j){G.value=A.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},N=async(ie,j)=>{try{let R=`/api/v1/vodsources/lookup/source-location/${ie}/output-type/${j}`;await L.get(R).then(oe=>{u.lookups.adBreakVodSources=oe.data})}catch(R){G.value=A.getErrorMessageAsHtml(R),window.scrollTo(0,0)}finally{}},h=async ie=>{ne.value=!1,ie&&(await $(ie.programTemplateId),x())},x=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());var ie=document.getElementById("video-add-program");const R=u.selected.programTemplate.vodSource.video.formats.find(ce=>ce.formatName==="HLS"),oe=R.serverUrl+R.path;u.hls=A.createHlsStream(ie,oe)}},ne=ue(!1);return p({open:g,close:d}),(ie,j)=>{const R=te("PageMessages");return t(),ve(be,null,{default:z(()=>[e("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Y.value,tabindex:"-1","aria-hidden":"true"},[e("div",Fb,[e("div",zb,[e("div",Gb,[e("h5",jb,[j[13]||(j[13]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:j[0]||(j[0]=oe=>d(!1)),"aria-label":"Close"})]),e("div",Yb,[F(R,{errorMessage:o(G),vuelidate:o(_)},null,8,["errorMessage","vuelidate"]),F(Nb,{ref_key:"modalSelectProgramTemplateInline",ref:r,isOpen:ne.value,onClose:h},null,8,["isOpen"]),ne.value?D("",!0):(t(),s("div",Wb,[e("div",Kb,[e("div",Qb,[e("div",Jb,[B(e("input",{"onUpdate:modelValue":j[1]||(j[1]=oe=>u.item.name=oe),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),j[14]||(j[14]=e("label",{for:"name",class:""},"Name",-1)),o(_).item.name.$error?(t(),s("div",Xb,[(t(!0),s(O,null,q(o(_).item.name.$errors,oe=>(t(),s("div",{key:oe.$uid},c(oe.$message),1))),128))])):D("",!0)])]),e("div",Zb,[e("div",ey,[B(e("input",{"onUpdate:modelValue":j[2]||(j[2]=oe=>u.item.dateScheduledStart=oe),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,u.item.dateScheduledStart]]),j[15]||(j[15]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(_).item.dateScheduledStart.$error?(t(),s("div",ty,[(t(!0),s(O,null,q(o(_).item.dateScheduledStart.$errors,oe=>(t(),s("div",{key:oe.$uid},c(oe.$message),1))),128))])):D("",!0)])]),e("div",sy,[e("div",oy,[e("div",ay,[e("div",ly,[u.selected.programTemplate?(t(),s(O,{key:0},[J(c(u.selected.programTemplate.name),1)],64)):D("",!0)]),j[16]||(j[16]=e("label",{for:"programTemplateId",class:""},"Program Template",-1))]),e("button",{onClick:j[3]||(j[3]=oe=>ne.value=!ne.value),class:"btn btn-primary",type:"button"},j[17]||(j[17]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))]),o(_).item.programTemplateId.$error?(t(),s("div",ny,[(t(!0),s(O,null,q(o(_).item.programTemplateId.$errors,oe=>(t(),s("div",{key:oe.$uid},c(oe.$message),1))),128))])):D("",!0)])]),u.selected.programTemplate?(t(),s("div",ry,[e("div",iy,[j[25]||(j[25]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1)),e("div",dy,[e("div",uy,[u.selected.programTemplate?(t(),s(O,{key:0},[e("div",cy,[e("div",my,[B(e("input",{"onUpdate:modelValue":j[4]||(j[4]=oe=>u.selected.programTemplate.sourceLocation.name=oe),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[Z,u.selected.programTemplate.sourceLocation.name]]),j[18]||(j[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1))])]),e("div",fy,[e("div",py,[B(e("input",{"onUpdate:modelValue":j[5]||(j[5]=oe=>u.selected.programTemplate.vodSource.name=oe),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[Z,u.selected.programTemplate.vodSource.name]]),j[19]||(j[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1))])])],64)):D("",!0)]),e("div",vy,[e("div",gy,[e("div",by,[B(e("input",{"onUpdate:modelValue":j[6]||(j[6]=oe=>u.selected.programTemplate.startOffsetTime=oe),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[Z,u.selected.programTemplate.startOffsetTime]]),j[20]||(j[20]=e("label",{for:"startOffsetTime"},"Total Program Duration",-1))])]),e("div",yy,[e("div",$y,[B(e("input",{"onUpdate:modelValue":j[7]||(j[7]=oe=>u.selected.programTemplate.endOffsetTime=oe),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[Z,u.selected.programTemplate.endOffsetTime]]),j[21]||(j[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",wy,[e("div",hy,[B(e("input",{"onUpdate:modelValue":j[8]||(j[8]=oe=>u.selected.programTemplate.durationTime=oe),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.durationTime]]),j[22]||(j[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",_y,[e("div",ky,[e("div",Sy,[B(e("input",{"onUpdate:modelValue":j[9]||(j[9]=oe=>u.selected.programTemplate.adBreaksDurationTime=oe),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.adBreaksDurationTime]]),j[23]||(j[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Ty,[e("div",My,[B(e("input",{"onUpdate:modelValue":j[10]||(j[10]=oe=>u.selected.programTemplate.totalProgramTemplateDurationTime=oe),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.totalProgramTemplateDurationTime]]),j[24]||(j[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])])])])):D("",!0),u.selected.programTemplate&&u.selected.programTemplate.adBreaks.length>0?(t(),s("div",Iy,[j[27]||(j[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("b",null," Ad Break ")],-1)),e("div",xy,[e("table",Cy,[j[26]||(j[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(u.item.adBreaks,(oe,ce)=>(t(),s("tr",null,[e("td",null,c(ce+1),1),e("td",null,c(o(A).moment.utc(oe.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(A).moment.utc(oe.durationInMillis).format("HH:mm:ss")),1),e("td",null,[u.lookups.adBreakVodSources.length>0?(t(),s(O,{key:0},[B(e("select",{"onUpdate:modelValue":ae=>oe.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,q(u.lookups.adBreakVodSources,ae=>(t(),s(O,null,[ae.durationInMillis===oe.durationInMillis?(t(),s("option",{key:0,value:ae.id}," ["+c(o(A).moment.utc(ae.durationInMillis).format("HH:mm:ss"))+"] "+c(ae.name),9,Py)):D("",!0)],64))),256))],8,Vy),[[pe,oe.vodSourceId]]),o(_).item.adBreaks.$each.$response?(t(!0),s(O,{key:0},q(o(_).item.adBreaks.$each.$response.$errors[ce].vodSourceId,ae=>(t(),s("div",{key:ae,class:"d-block invalid-feedback"},c(ae.$message),1))),128)):D("",!0)],64)):D("",!0)])]))),256))])])])])):D("",!0)]))]),ne.value?D("",!0):(t(),s("div",Oy,[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:j[11]||(j[11]=oe=>f()),class:"btn btn-primary",type:"button"},j[28]||(j[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ay),e("button",{onClick:j[12]||(j[12]=oe=>d(!1)),class:"btn btn-secondary ms-1"},j[29]||(j[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))]))])]),F(lb,{ref_key:"modalSelectProgramTemplate",ref:Q,onClose:h},null,512)],8,Rb)]),_:1})}}},Dy=["id"],Hy={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Ly={class:"modal-content"},Ey={class:"modal-header"},qy={class:"modal-title"},By={class:"modal-body"},Ny={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ry=["innerHTML"],Fy={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},zy={key:2,class:"container"},Gy={class:"row row-cols-1 row-cols-sm-2"},jy={class:"col"},Yy={class:"form-floating mb-2"},Wy={class:"col"},Ky={class:"form-floating mb-2"},Qy={class:"row row-cols-1 row-cols-sm-3 mt-2"},Jy={class:"col"},Xy={class:"form-floating mb-2"},Zy={class:"col"},e$={class:"form-floating mb-2"},t$={key:0,class:"d-block invalid-feedback"},s$={class:"col"},o$={class:"form-floating mb-2"},a$={key:0,class:"d-block invalid-feedback"},l$={class:"row row-cols-1 row-cols-sm-3"},n$={class:"col"},r$={class:"form-floating mb-2"},i$={class:"col"},d$={class:"form-floating mb-2"},u$={class:"col"},c$={class:"form-floating mb-2"},m$={class:"row row-cols-1 row-cols-sm-3"},f$={class:"col"},p$={class:"form-floating mb-2"},v$={class:"col"},g$={class:"form-floating mb-2"},b$={key:0,class:"col"},y$={class:"form-floating mb-2"},$$={key:0},w$={class:"table-responsive border mt-1"},h$={class:"table mb-0"},_$=["onUpdate:modelValue"],k$=["value"],S$={class:"modal-footer"},T$=["disabled"],mt={__name:"_editProgram",emits:["onClose"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),X=S,Q=ue(),r=ue("modalEditProgram"),m=ge({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0}}},u=Te(Y,m);fe(async()=>{u.value.$reset()});const I=async(a,n)=>{Q.value=a;const v=m;K.value.clear(),G.value="",v.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},v.item=null,await g(),await d(),u.value.$reset();var $=document.getElementById(r.value),y=he.getOrCreateInstance($);y.show()},b=async a=>{if(!a){X("onClose",a);var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.hide();return}const n=m,v=A.moment(n.item.dateScheduledStart).utc(!0).format(),$={programId:Q.value,name:n.item.name,dateScheduledStart:v,adBreaks:n.item.adBreaks.map(w=>({sourceLocationId:n.item.sourceLocationId,vodSourceId:w.vodSourceId,offsetMillis:w.offsetMillis,durationInMillis:w.durationInMillis}))};try{await L.put("/api/v1/programs/",$).then(N=>{C.success("Edit Program","Program was edited.")})}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0);return}finally{}X("onClose",a);var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.hide()},_=async()=>{await b(!0)},g=async()=>{try{const a=`/api/v1/programs/${Q.value}/`;await L.get(a).then($=>{m.item=$.data;const y=m.item,N=A.moment.utc(y.dateScheduledStart).format("YYYY-MM-DD HH:mm");m.item.dateScheduledStart=N,y.startOffsetTime=A.moment.utc(y.startOffsetMillis).format("HH:mm:ss"),y.endOffsetTime=A.moment.utc(y.endOffsetMillis).format("HH:mm:ss"),y.durationTime=A.moment.utc(y.durationInMillis).format("HH:mm:ss"),y.adBreaksDurationTime=A.moment.utc(y.adBreaksDurationInMillis).format("HH:mm:ss"),y.totalProgramTemplateDurationTime=A.moment.utc(y.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const n=m,v=n.item.channel.outputs[0].outputType;await f(n.item.sourceLocationId,v)}catch(a){G.value=A.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},d=async()=>{},f=async(a,n)=>{try{let v=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${n}`;await L.get(v).then($=>{m.lookups.adBreakVodSources=$.data})}catch(v){G.value=A.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return p({open:I,close:b}),(a,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Hy,[e("div",Ly,[e("div",Ey,[e("h5",qy,[n[14]||(n[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=v=>b(!1)),"aria-label":"Close"})]),e("div",By,[o(G)?(t(),s("div",Ny,[n[15]||(n[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Ry)])):D("",!0),o(K).size>0?(t(),s("div",Fy,[n[16]||(n[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),v=>(t(),s("li",null,c(v),1))),256))])])):D("",!0),m.item?(t(),s("div",zy,[e("div",Gy,[e("div",jy,[e("div",Yy,[m.item.sourceLocation?B((t(),s("input",{key:0,"onUpdate:modelValue":n[1]||(n[1]=v=>m.item.sourceLocation.name=v),id:"sourceLocation",class:"form-control-plaintext",readonly:""},null,512)),[[Z,m.item.sourceLocation.name]]):D("",!0),n[17]||(n[17]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",Wy,[e("div",Ky,[m.item.vodSource?B((t(),s("input",{key:0,"onUpdate:modelValue":n[2]||(n[2]=v=>m.item.vodSource.name=v),id:"vodSource",class:"form-control-plaintext",readonly:""},null,512)),[[Z,m.item.vodSource.name]]):D("",!0),n[18]||(n[18]=e("label",{for:"vodSource",class:""},"VOD Source",-1))])])]),e("div",Qy,[e("div",Jy,[e("div",Xy,[m.item.relativeProgram?B((t(),s("input",{key:0,"onUpdate:modelValue":n[3]||(n[3]=v=>m.item.relativeProgram.name=v),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512)),[[Z,m.item.relativeProgram.name]]):D("",!0),n[19]||(n[19]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])]),e("div",Zy,[e("div",e$,[B(e("input",{"onUpdate:modelValue":n[4]||(n[4]=v=>m.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,m.item.name]]),n[20]||(n[20]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",t$,[(t(!0),s(O,null,q(o(u).item.name.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):D("",!0)])]),e("div",s$,[e("div",o$,[B(e("input",{"onUpdate:modelValue":n[5]||(n[5]=v=>m.item.dateScheduledStart=v),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,m.item.dateScheduledStart]]),n[21]||(n[21]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(u).item.dateScheduledStart.$error?(t(),s("div",a$,[(t(!0),s(O,null,q(o(u).item.dateScheduledStart.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):D("",!0)])])]),e("div",null,[e("div",l$,[e("div",n$,[e("div",r$,[B(e("input",{"onUpdate:modelValue":n[6]||(n[6]=v=>m.item.startOffsetTime=v),id:"startOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,m.item.startOffsetTime]]),n[22]||(n[22]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",i$,[e("div",d$,[B(e("input",{"onUpdate:modelValue":n[7]||(n[7]=v=>m.item.endOffsetTime=v),id:"endOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,m.item.endOffsetTime]]),n[23]||(n[23]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",u$,[e("div",c$,[B(e("input",{"onUpdate:modelValue":n[8]||(n[8]=v=>m.item.durationTime=v),id:"durationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,m.item.durationTime]]),n[24]||(n[24]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",m$,[e("div",f$,[e("div",p$,[B(e("input",{"onUpdate:modelValue":n[9]||(n[9]=v=>m.item.adBreaksDurationTime=v),id:"adBreaksDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,m.item.adBreaksDurationTime]]),n[25]||(n[25]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks Duration",-1))])]),e("div",v$,[e("div",g$,[B(e("input",{"onUpdate:modelValue":n[10]||(n[10]=v=>m.item.totalProgramTemplateDurationTime=v),id:"totalProgramTemplateDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,m.item.totalProgramTemplateDurationTime]]),n[26]||(n[26]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])]),m.item.relativeProgram?(t(),s("div",b$,[e("div",y$,[B(e("input",{"onUpdate:modelValue":n[11]||(n[11]=v=>m.item.relativeProgram.name=v),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512),[[Z,m.item.relativeProgram.name]]),n[27]||(n[27]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])])):D("",!0)])]),n[30]||(n[30]=e("hr",null,null,-1)),m.item?(t(),s("div",$$,[n[29]||(n[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",w$,[e("table",h$,[n[28]||(n[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(m.item.adBreaks,(v,$)=>(t(),s("tr",null,[e("td",null,c($+1),1),e("td",null,c(o(A).moment.utc(v.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(A).moment.utc(v.durationInMillis).format("HH:mm:ss")),1),e("td",null,[B(e("select",{"onUpdate:modelValue":y=>v.vodSourceId=y,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,q(m.lookups.adBreakVodSources,y=>(t(),s(O,null,[y.durationInMillis===v.durationInMillis?(t(),s("option",{key:0,value:y.id}," ["+c(o(A).moment.utc(y.durationInMillis).format("HH:mm:ss"))+"] "+c(y.name),9,k$)):D("",!0)],64))),256))],8,_$),[[pe,v.vodSourceId]])])]))),256))])])])])):D("",!0)])):D("",!0)]),e("div",S$,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:n[12]||(n[12]=v=>_()),class:"btn btn-primary ms-2",type:"button"},n[31]||(n[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,T$),e("button",{onClick:n[13]||(n[13]=v=>b(!1)),class:"btn btn-secondary ms-1"},n[32]||(n[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Dy))}},M$={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:K,axios:W,utils:U,toasts:G,close:ee,security:L}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),A=l,C=ue(null),T=ue(null),i=ue(null),X={viewType:"Week",cellDuration:15,startDate:Ee.DayPilot.Date.today(),onTimeRangeSelected:g=>{var d=g.control;const f={start:g.start,end:g.end,id:Ee.DayPilot.guid(),text:"NEW",tags:{type:"new"}};d.events.add(f);var a=d.events.find(f.id);I(a)},onBeforeEventRender:g=>{if(g.data.barColor="green",!!g.data.tags)switch(g.data.tags.type){case"new":g.data.barColor="yellow";break;case"business":g.data.barColor="red";break;case"personal":g.data.barColor="greem";break;case"vacation":g.data.barColor="black";break;default:g.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async g=>{const d=g.newStart.value,f=g.e.id(),a=U.moment(d).utc(!0).format();try{let n="/api/v1/programs/scheduled-date-start";const v={programId:f,dateScheduledStart:a};await W.put(n,v).then($=>{G.success("Program date scheduled start was edited.")})}catch(n){V.value=U.getErrorMessageAsHtml(n),window.scrollTo(0,0);return}finally{}await Y()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async g=>{var d=g.e.id();_(d)},contextMenu:new Ee.DayPilot.Menu([{text:"Clone",onClick:async g=>{const d=g.source.id();try{let f=`/api/v1/programs/${d}/clone`;await W.post(f).then(a=>{G.success("Clone Program","Program was cloned.")})}catch(f){V.value=U.getErrorMessageAsHtml(f),window.scrollTo(0,0);return}finally{await Y()}}},{text:"Delete",onClick:async g=>{if(!confirm("Do you want to remove this program?"))return;const f=g.source.id();try{let a=`/api/v1/programs/${f}/`;await W.delete(a).then(n=>{G.success("Delete Program","Program was deleted.")}),C.value.control.events.remove(g.source)}catch(a){V.value=U.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await Y()}}}])},Q=ue([]),r=()=>{C.value.control.update({events:Q.value})},m=ge({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});fe(async()=>{await Y()});const Y=async()=>{await u(),await r()},u=async()=>{const g=m;if(!P.value)try{P.value=!0,V.value="";const d=`/api/v1/channels/${A.id}/`;await W.get(d).then(f=>{g.item=f.data;const a=g.item.outputs,n=g.item.programs.map(v=>{let $=`${v.name}`,y=`[${v.name}]`;return v.relativeProgram&&(y+=` => [${v.relativeProgram.name}]`),{start:U.moment.utc(v.dateScheduledStart).format(),end:U.moment.utc(v.dateScheduledEnd).format(),id:v.programId,text:$,toolTip:y}});Q.value=n})}catch(d){V.value=U.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{P.value=!1}},I=g=>{T.value.open(A.id,g.id(),g.start().value)},b=async(g,d)=>{var f=C.value,a=f.control.events.find(g.eventId);if(!d&&a){C.value.control.events.remove(a);return}f.control.events.find(w=>w.text()==g.name)&&(alert("Program already exists in this channel. Removing in the calendar."),C.value.control.events.remove(a));const v=U.moment(g.dateScheduledStart).utc(!0).format(),$=U.moment(g.dateScheduledEnd).utc(!0).format(),y=new Ee.DayPilot.Date(v),M=new Ee.DayPilot.Date($);a.text(g.name),a.start(new Ee.DayPilot.Date(y)),a.end(new Ee.DayPilot.Date(M)),a.data.tags.program=g,a.commit(),C.value.control.update(),await Y()},_=(g,d)=>{i.value.open(g,d)};return(g,d)=>{const f=te("router-link"),a=te("PageHeader"),n=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(S)},{default:z(()=>[e("button",{onClick:d[0]||(d[0]=v=>Y()),class:"btn btn-secondary ms-1"},d[1]||(d[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(f,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-1"},{default:z(()=>d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(n,{errorMessage:o(V)},{default:z(()=>[e("div",null,[F(o(Ee.DayPilotCalendar),{id:"dp",config:X,ref_key:"calendarRef",ref:C},null,512),F(Uy,{ref_key:"modalAddProgram",ref:T,onOnClose:b},null,512),F(mt,{ref_key:"modalEditProgram",ref:i,onOnClose:Y},null,512)])]),_:1},8,["errorMessage"])])]),_:1})}}},I$=["id"],x$={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},C$={class:"modal-content"},V$={class:"modal-header"},P$={class:"modal-title"},O$={class:"modal-body"},A$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},U$=["innerHTML"],D$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},H$={class:"container"},L$={class:"row row-cols-1 row-cols-sm-3"},E$={class:"col"},q$={class:"form-floating mb-2"},B$=["disabled"],N$=["value"],R$={class:"col"},F$={class:"form-floating mb-2"},z$={key:0,class:"d-block invalid-feedback"},G$={class:"col"},j$={class:"form-floating mb-2"},Y$={key:0,class:"d-block invalid-feedback"},W$={class:"row row-cols-sm-2"},K$={class:"col"},Q$={class:"form-floating mb-2"},J$=["value"],X$={key:0,class:"d-block invalid-feedback"},Z$={class:"col"},ew={class:"form-floating mb-2"},tw=["value"],sw={key:0,class:"d-block invalid-feedback"},ow={class:"col"},aw={class:"input-group mb-1"},lw={class:"form-floating"},nw={key:0,class:"input-group-text"},rw={key:0},iw={key:1},dw={key:2},uw={key:3,class:"d-block invalid-feedback"},cw={class:"col"},mw={class:"input-group mb-1"},fw={class:"form-floating"},pw={key:0,class:"input-group-text"},vw={key:0},gw={key:1},bw={key:2,class:"d-block invalid-feedback"},yw={class:"table-responsive border mt-1"},$w={class:"table"},ww={class:"input-group mb-1"},hw=["onUpdate:modelValue"],_w={key:0,class:"input-group-text"},kw=["onUpdate:modelValue"],Sw=["value"],Tw=["onUpdate:modelValue"],Mw=["value"],Iw=["onClick"],xw={class:"modal-footer"},Cw=["disabled"],Vw={__name:"_addProgram",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),X=S,Q=ue(),r=ue("modalAddProgram"),m=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0}}},u=Te(Y,m);fe(async()=>{u.value.$reset()});const I=async w=>{Q.value=w;const N=m;K.value.clear(),G.value="";const h=A.moment().local().add(2,"m"),ne=h.format("YYYY-MM-DD HH:mm"),ie=h.format("YYYY_MM_DD")+"_PROGRAM_";N.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},N.item={name:ie,relativeProgramId:null,dateScheduledStart:ne,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await g(),u.value.$reset();var j=document.getElementById(r.value),R=he.getOrCreateInstance(j);R.show()},b=async()=>{var w=document.getElementById(r.value),N=he.getOrCreateInstance(w);N.hide(),X("refresh")},_=async()=>{const w=m;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const x=w.item;delete x.vodSource,x.channelId=Q.value;var h=x.dateScheduledStart;x.dateScheduledStart=A.moment(h).utc().format(),await L.post("/api/v1/programs/",x).then(ne=>{C.success("Add Program","Program added to Channel",{async onClose(){}})}),await b()}catch(x){G.value=A.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{H.value=!1}},g=async()=>{await d(),await a(),await v()},d=async()=>{try{await L.get("/api/v1/sourcelocations/lookup/").then(N=>{m.lookups.sourceLocations=N.data,m.lookups.sourceLocations.length===1&&(m.item.sourceLocationId=m.lookups.sourceLocations[0].id)}),m.item.sourceLocationId&&await f(m.item.sourceLocationId)}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},f=async w=>{try{let N=`/api/v1/vodSources/lookup/source-location/${w}`;await L.get(N).then(h=>{m.lookups.vodSources=h.data})}catch(N){G.value=A.getErrorMessageAsHtml(N),window.scrollTo(0,0)}finally{}},a=async()=>{try{await L.get("/api/v1/sourcelocations/lookup/").then(N=>{m.lookups.adBreakSourceLocations=N.data})}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},n=async w=>{try{let N=`/api/v1/vodSources/lookup/source-location/${w}`;await L.get(N).then(h=>{m.lookups.adBreakVodSources=h.data})}catch(N){G.value=A.getErrorMessageAsHtml(N),window.scrollTo(0,0)}finally{}},v=async()=>{try{const w=`/api/v1/programs/lookup/?channelId=${Q.value}`;await L.get(w).then(N=>{if(m.lookups.channelPrograms=N.data,m.lookups.channelPrograms.length===1){const x=m.lookups.channelPrograms[0];m.item.relativeProgramId=x.id}})}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},$=()=>{const w={offsetMillis:0,sourceLocationId:null,vodSourceId:null},N=m.item.adBreaks.length;if(N>0){const h=m.item.adBreaks[N-1];w.offsetMillis=h.offsetMillis+1e4}m.item.adBreaks.push(w)},y=w=>{m.item.adBreaks.splice(w,1)},M=()=>{const w=m.item.vodSource;m.item.vodSourceId=w.id};return p({open:I,close:b}),(w,N)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",x$,[e("div",C$,[e("div",V$,[e("h5",P$,[N[12]||(N[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:N[0]||(N[0]=h=>b()),"aria-label":"Close"})]),e("div",O$,[o(G)?(t(),s("div",A$,[N[13]||(N[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,U$)])):D("",!0),o(K).size>0?(t(),s("div",D$,[N[14]||(N[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),h=>(t(),s("li",null,c(h),1))),256))])])):D("",!0),e("div",H$,[e("div",L$,[e("div",E$,[e("div",q$,[B(e("select",{"onUpdate:modelValue":N[1]||(N[1]=h=>m.item.relativeProgramId=h),class:"form-select",id:"sourceLocationId",disabled:m.lookups.channelPrograms.length<=0},[(t(!0),s(O,null,q(m.lookups.channelPrograms,h=>(t(),s("option",{value:h.id},c(h.name),9,N$))),256))],8,B$),[[pe,m.item.relativeProgramId]]),N[15]||(N[15]=e("label",{for:"relativeProgramId",class:""},"Relative Program",-1))])]),e("div",R$,[e("div",F$,[B(e("input",{"onUpdate:modelValue":N[2]||(N[2]=h=>m.item.name=h),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,m.item.name]]),N[16]||(N[16]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",z$,[(t(!0),s(O,null,q(o(u).item.name.$errors,h=>(t(),s("div",{key:h.$uid},c(h.$message),1))),128))])):D("",!0)])]),e("div",G$,[e("div",j$,[B(e("input",{"onUpdate:modelValue":N[3]||(N[3]=h=>m.item.dateScheduledStart=h),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,m.item.dateScheduledStart]]),N[17]||(N[17]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(u).item.dateScheduledStart.$error?(t(),s("div",Y$,[(t(!0),s(O,null,q(o(u).item.dateScheduledStart.$errors,h=>(t(),s("div",{key:h.$uid},c(h.$message),1))),128))])):D("",!0)])])]),e("div",W$,[e("div",K$,[e("div",Q$,[B(e("select",{"onUpdate:modelValue":N[4]||(N[4]=h=>m.item.sourceLocationId=h),onChange:N[5]||(N[5]=h=>f(m.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(m.lookups.sourceLocations,h=>(t(),s("option",{value:h.id},c(h.name),9,J$))),256))],544),[[pe,m.item.sourceLocationId]]),N[18]||(N[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(u).item.sourceLocationId.$error?(t(),s("div",X$,[(t(!0),s(O,null,q(o(u).item.sourceLocationId.$errors,h=>(t(),s("div",{key:h.$uid},c(h.$message),1))),128))])):D("",!0)])]),e("div",Z$,[e("div",ew,[B(e("select",{"onUpdate:modelValue":N[6]||(N[6]=h=>m.item.vodSource=h),onChange:N[7]||(N[7]=h=>M()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,q(m.lookups.vodSources,h=>(t(),s("option",{value:h},c(h.name),9,tw))),256))],544),[[pe,m.item.vodSource]]),N[19]||(N[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(u).item.vodSourceId.$error?(t(),s("div",sw,[(t(!0),s(O,null,q(o(u).item.vodSourceId.$errors,h=>(t(),s("div",{key:h.$uid},c(h.$message),1))),128))])):D("",!0)])]),e("div",ow,[e("div",aw,[e("div",lw,[B(e("input",{"onUpdate:modelValue":N[8]||(N[8]=h=>m.item.startOffsetMillis=h),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Z,m.item.startOffsetMillis]]),N[20]||(N[20]=e("label",{for:"startOffsetMillis",class:""},"Start OffSet Millis",-1))]),m.item.startOffsetMillis>0?(t(),s("span",nw,c(o(A).moment.utc(m.item.startOffsetMillis).format("HH:mm:ss")),1)):D("",!0)]),m.item.startOffsetMillis>0&&m.item.startOffsetMillis<3e4?(t(),s("div",rw,N[21]||(N[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):D("",!0),m.item.startOffsetMillis>m.item.endOffsetMillis&&m.item.endOffsetMillis>0?(t(),s("div",iw,N[22]||(N[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):D("",!0),m.item.vodSource&&m.item.startOffsetMillis>m.item.vodSource.durationInMillis?(t(),s("div",dw,N[23]||(N[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):D("",!0),o(u).item.startOffsetMillis.$error?(t(),s("div",uw,[(t(!0),s(O,null,q(o(u).item.startOffsetMillis.$errors,h=>(t(),s("div",{key:h.$uid},c(h.$message),1))),128))])):D("",!0)]),e("div",cw,[e("div",mw,[e("div",fw,[B(e("input",{"onUpdate:modelValue":N[9]||(N[9]=h=>m.item.endOffsetMillis=h),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Z,m.item.endOffsetMillis]]),N[24]||(N[24]=e("label",{for:"endOffsetMillis",class:""},"End OffSet Millis",-1))]),m.item.endOffsetMillis>0?(t(),s("span",pw,c(o(A).moment.utc(m.item.endOffsetMillis).format("HH:mm:ss")),1)):D("",!0)]),m.item.endOffsetMillis>0&&m.item.endOffsetMillis<3e4?(t(),s("div",vw,N[25]||(N[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):D("",!0),m.item.vodSource&&m.item.endOffsetMillis>m.item.vodSource.durationInMillis?(t(),s("div",gw,N[26]||(N[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):D("",!0),o(u).item.endOffsetMillis.$error?(t(),s("div",bw,[(t(!0),s(O,null,q(o(u).item.endOffsetMillis.$errors,h=>(t(),s("div",{key:h.$uid},c(h.$message),1))),128))])):D("",!0)])]),N[30]||(N[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[N[27]||(N[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:$,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",yw,[e("table",$w,[N[29]||(N[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(m.item.adBreaks,(h,x)=>(t(),s("tr",null,[e("td",null,c(x+1),1),e("td",null,[e("div",ww,[B(e("input",{"onUpdate:modelValue":ne=>h.offsetMillis=ne,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,hw),[[Z,h.offsetMillis]]),h.offsetMillis>0?(t(),s("span",_w,c(o(A).moment.utc(h.offsetMillis).format("HH:mm:ss")),1)):D("",!0)])]),e("td",null,[B(e("select",{"onUpdate:modelValue":ne=>h.sourceLocationId=ne,onChange:N[10]||(N[10]=ne=>n(m.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(O,null,q(m.lookups.adBreakSourceLocations,ne=>(t(),s("option",{value:ne.id},c(ne.name),9,Sw))),256))],40,kw),[[pe,h.sourceLocationId]])]),e("td",null,[B(e("select",{"onUpdate:modelValue":ne=>h.vodSourceId=ne,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,q(m.lookups.adBreakVodSources,ne=>(t(),s("option",{value:ne.id},c(ne.name),9,Mw))),256))],8,Tw),[[pe,h.vodSourceId]])]),e("td",null,[e("button",{onClick:ne=>y(x),class:"btn btn-outline-warning"},N[28]||(N[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Iw)])]))),256))])])])])])]),e("div",xw,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:N[11]||(N[11]=h=>_()),class:"btn btn-primary",type:"button"},N[31]||(N[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Cw),N[32]||(N[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,I$))}},Pw=["id"],Ow={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Aw={class:"modal-content"},Uw={class:"modal-header"},Dw={class:"modal-title"},Hw={class:"modal-body"},Lw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ew=["innerHTML"],qw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Bw={class:"container"},Nw={class:"col"},Rw={class:"form-floating mb-2"},Fw={class:"col"},zw={class:"form-floating mb-2"},Gw={key:0,class:"d-block invalid-feedback"},jw={class:"col"},Yw={class:"form-floating mb-2 d-none"},Ww={key:0,class:"d-block invalid-feedback"},Kw={class:"col"},Qw={class:"form-floating mb-2"},Jw={key:0,class:"d-block invalid-feedback"},Xw={class:"modal-footer"},Zw=["disabled"],eh={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),X=S,Q=ue(),r=ue("modalAddPlaybackConfiguration"),m=ge({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",le),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(Y,m);fe(async()=>{u.value.$reset()});const I=async(g,d)=>{Q.value=g;const f=m;K.value.clear(),G.value="";const a=d;let n=a.lastIndexOf("/");const v=a.substring(0,n);let $=a.substring(n+1);n=$.lastIndexOf("."),$=$.substring(0,n)+"_ADCAMPAIGN_",f.item={name:$,originalVideoContentSourceUrl:d,videoContentSourceUrl:v,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},u.value.$reset();var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.show()},b=async()=>{var g=document.getElementById(r.value),d=he.getOrCreateInstance(g);d.hide(),X("refresh")},_=async()=>{const g=m;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const f=g.item;f.channelOutputId=Q.value,await L.put("/api/v1/channelOutputs/playback/",f).then(a=>{C.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await b()}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:I,close:b}),(g,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ow,[e("div",Aw,[e("div",Uw,[e("h5",Dw,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=f=>b()),"aria-label":"Close"})]),e("div",Hw,[o(G)?(t(),s("div",Lw,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Ew)])):D("",!0),o(K).size>0?(t(),s("div",qw,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),f=>(t(),s("li",null,c(f),1))),256))])])):D("",!0),e("div",Bw,[e("div",Nw,[e("div",Rw,[B(e("textarea",{"onUpdate:modelValue":d[1]||(d[1]=f=>m.item.originalVideoContentSourceUrl=f),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Z,m.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",Fw,[e("div",zw,[B(e("input",{"onUpdate:modelValue":d[2]||(d[2]=f=>m.item.name=f),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,m.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",Gw,[(t(!0),s(O,null,q(o(u).item.name.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):D("",!0)])]),e("div",jw,[e("div",Yw,[B(e("input",{"onUpdate:modelValue":d[3]||(d[3]=f=>m.item.videoContentSourceUrl=f),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,m.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(u).item.videoContentSourceUrl.$error?(t(),s("div",Ww,[(t(!0),s(O,null,q(o(u).item.videoContentSourceUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):D("",!0)])]),e("div",Kw,[e("div",Qw,[B(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=f=>m.item.adDecisionServerUrl=f),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,m.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(u).item.adDecisionServerUrl.$error?(t(),s("div",Jw,[(t(!0),s(O,null,q(o(u).item.adDecisionServerUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):D("",!0),d[14]||(d[14]=Ye('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",Xw,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:d[5]||(d[5]=f=>_()),class:"btn btn-primary",type:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zw),d[16]||(d[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Pw))}},th=["id"],sh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},oh={class:"modal-content"},ah={class:"modal-header"},lh={class:"modal-title"},nh={class:"modal-body"},rh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ih=["innerHTML"],dh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},uh={class:"container"},ch={class:"col"},mh={class:"form-floating mb-2"},fh=["value"],ph={key:0,class:"d-block invalid-feedback"},vh={class:"col"},gh={class:"form-floating mb-2"},bh={key:0,class:"d-block invalid-feedback"},yh={class:"col"},$h={class:"form-floating mb-2"},wh={key:0,class:"d-block invalid-feedback"},hh={class:"modal-footer"},_h=["disabled"],kh={__name:"_addChannelOutput",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),X=S,Q=ue(),r=ue("modalAddChannelOutput"),m=ge({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),Y={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",le),$autoDirty:!0,$lazy:!0},manifestName:{required:se.withMessage("Manifest Name is required.",le),$autoDirty:!0,$lazy:!0},outputType:{required:se.withMessage("Output Type is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(Y,m);fe(async()=>{u.value.$reset()});const I=async()=>{await b()},b=async()=>{try{await L.get("/api/v1/sourceGroups/lookup/").then(a=>{m.lookups.sourceGroups=a.data,m.lookups.sourceGroups.length===1&&(m.item.sourceGroupId=m.lookups.sourceGroups[0].id)})}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},_=async f=>{Q.value=f;const a=m;K.value.clear(),G.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await I(),u.value.$reset();var n=document.getElementById(r.value),v=he.getOrCreateInstance(n);v.show()},g=async()=>{var f=document.getElementById(r.value),a=he.getOrCreateInstance(f);a.hide(),X("refresh")},d=async()=>{const f=m;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const n=f.item;n.channelId=Q.value,await L.post("/api/v1/channelOutputs",n).then(v=>{C.success("Add Channel Output","Channel output added.")}),await g()}catch(n){G.value=A.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:_,close:g}),(f,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",sh,[e("div",oh,[e("div",ah,[e("h5",lh,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",nh,[o(G)?(t(),s("div",rh,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,ih)])):D("",!0),o(K).size>0?(t(),s("div",dh,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),n=>(t(),s("li",null,c(n),1))),256))])])):D("",!0),e("div",uh,[e("div",ch,[e("div",mh,[B(e("select",{"onUpdate:modelValue":a[0]||(a[0]=n=>m.item.sourceGroupId=n),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(m.lookups.sourceGroups,n=>(t(),s("option",{value:n.id},c(n.name),9,fh))),256))],512),[[pe,m.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(u).item.sourceGroupId.$error?(t(),s("div",ph,[(t(!0),s(O,null,q(o(u).item.sourceGroupId.$errors,n=>(t(),s("div",{key:n.$uid},c(n.$message),1))),128))])):D("",!0)])]),e("div",vh,[e("div",gh,[B(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>m.item.outputType=n),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,m.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:""},"Output Type",-1)),o(u).item.outputType.$error?(t(),s("div",bh,[(t(!0),s(O,null,q(o(u).item.outputType.$errors,n=>(t(),s("div",{key:n.$uid},c(n.$message),1))),128))])):D("",!0)])]),e("div",yh,[e("div",$h,[B(e("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>m.item.manifestName=n),class:"form-control",id:"manifestName"},null,512),[[Z,m.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:""},"Manifest Name",-1)),o(u).item.manifestName.$error?(t(),s("div",wh,[(t(!0),s(O,null,q(o(u).item.manifestName.$errors,n=>(t(),s("div",{key:n.$uid},c(n.$message),1))),128))])):D("",!0)])])])]),e("div",hh,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:a[3]||(a[3]=n=>d()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_h),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,th))}},Sh=["id"],Th={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mh={class:"modal-content"},Ih={class:"modal-header"},xh={class:"modal-title"},Ch={class:"modal-body"},Vh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ph=["innerHTML"],Oh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ah={class:"container"},Uh={class:"col"},Dh={class:"form-floating mb-2"},Hh=["value"],Lh={key:0,class:"d-block invalid-feedback"},Eh={class:"col"},qh={class:"form-floating mb-2"},Bh=["value"],Nh={key:0,class:"d-block invalid-feedback"},Rh={class:"col"},Fh={class:"card h-100"},zh=["id"],Gh={class:"modal-footer"},jh=["disabled"],Yh={__name:"_editFillerSlate",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:K,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:L,utils:A,toasts:C,closeWithReturnUrl:T,security:i}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),X=S,Q=ue("modalEditFillerSlate"),r=ge({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),m={item:{channelId:{required:se.withMessage("channelId is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0}}},Y=Te(m,r);fe(async()=>{Y.value.$reset()}),Ae(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const u=async()=>{await I()},I=async()=>{try{await L.get("/api/v1/sourcelocations/lookup/").then($=>{r.lookups.sourceLocations=$.data}),r.item.sourceLocationId&&await b(r.item.sourceLocationId)}catch(v){G.value=A.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},b=async v=>{try{let $=`/api/v1/vodSources/lookup/source-Location/${v}/?type=2`;await L.get($).then(y=>{r.lookups.vodSources=y.data})}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},_=async(v,$,y)=>{const M=r;K.value.clear(),G.value="",M.lookups={sourceLocations:[],vodSources:[]},M.item={channelId:v,sourceLocationId:$,vodSourceId:y},await u(),r.item.vodSourceId&&await n(r.item.vodSourceId),Y.value.$reset();var w=document.getElementById(Q.value),N=he.getOrCreateInstance(w);N.show()},g=async()=>{var v=document.getElementById(Q.value),$=he.getOrCreateInstance(v);$.hide(),r.hls&&(r.hls.stopLoad(),r.hls.destroy()),X("refresh")},d=async()=>{const v=r;if(H.value)return;if(!await Y.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const y=v.item;await L.put("/api/v1/channels/filler-slate",y).then(M=>{C.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await g()}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{H.value=!1}},f=async()=>{r.item.vodSourceId=null,await b(r.item.sourceLocationId)},a=async()=>{await n(r.item.vodSourceId)},n=async v=>{try{let $=`/api/v1/vodSources/${v}/hls`;const y=await L.get($).then(w=>w.data);if(r.hls){r.hls.loadSource(y);return}const M=document.getElementById(`video-${r.item.channelId}`);r.hls=A.createHlsStream(M,y)}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return p({open:_,close:g}),(v,$)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Q.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Th,[e("div",Mh,[e("div",Ih,[e("h5",xh,[$[6]||($[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=y=>g()),"aria-label":"Close"})]),e("div",Ch,[o(G)?(t(),s("div",Vh,[$[7]||($[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Ph)])):D("",!0),o(K).size>0?(t(),s("div",Oh,[$[8]||($[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(K).values(),y=>(t(),s("li",null,c(y),1))),256))])])):D("",!0),e("div",Ah,[e("div",Uh,[e("div",Dh,[B(e("select",{"onUpdate:modelValue":$[1]||($[1]=y=>r.item.sourceLocationId=y),onChange:$[2]||($[2]=y=>f()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(r.lookups.sourceLocations,y=>(t(),s("option",{value:y.id},c(y.name),9,Hh))),256))],544),[[pe,r.item.sourceLocationId]]),$[9]||($[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(Y).item.sourceLocationId.$error?(t(),s("div",Lh,[(t(!0),s(O,null,q(o(Y).item.sourceLocationId.$errors,y=>(t(),s("div",{key:y.$uid},c(y.$message),1))),128))])):D("",!0)])]),e("div",Eh,[e("div",qh,[B(e("select",{"onUpdate:modelValue":$[3]||($[3]=y=>r.item.vodSourceId=y),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,q(r.lookups.vodSources,y=>(t(),s("option",{value:y.id},c(y.name),9,Bh))),256))],544),[[pe,r.item.vodSourceId]]),$[10]||($[10]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(Y).item.vodSourceId.$error?(t(),s("div",Nh,[(t(!0),s(O,null,q(o(Y).item.vodSourceId.$errors,y=>(t(),s("div",{key:y.$uid},c(y.$message),1))),128))])):D("",!0)])]),e("div",Rh,[e("div",Fh,[e("video",{id:`video-${r.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,zh)])])])]),e("div",Gh,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:$[4]||($[4]=y=>d()),class:"btn btn-primary",type:"button"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jh),e("button",{onClick:$[5]||($[5]=y=>g()),class:"btn btn-secondary ms-1"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Sh))}},Wh={class:"my-2"},Kh={class:""},Qh={class:"form-floating mb-2"},Jh={id:"vodSourceTitle",class:"form-control-plaintext"},Xh={class:"row"},Zh={class:"col-12 col-md-4"},e_={class:"form-floating mb-2"},t_={id:"vodSourceVideoTitle",class:"form-control-plaintext"},s_={class:"col-12 col-md-8"},o_={class:"form-floating mb-2"},a_={id:"vodSourceVideoDesc",class:"form-control-plaintext"},l_={class:"mt-2"},n_={class:"row row-cols-1 row-cols-sm-3"},r_={class:"col"},i_={class:"form-floating mb-2"},d_={id:"startOffsetMillis",class:"form-control-plaintext"},u_={class:"col"},c_={class:"form-floating mb-2"},m_={id:"endOffsetMillis",class:"form-control-plaintext"},f_={class:"col"},p_={class:"form-floating mb-2"},v_={id:"durationInMillis",class:"form-control-plaintext"},g_={class:"row row-cols-1 row-cols-sm-3"},b_={class:"col"},y_={class:"form-floating mb-2"},$_={id:"adBreaksDurationInMillis",class:"form-control-plaintext"},w_={class:"col"},h_={class:"form-floating mb-2"},__={id:"totalProgramTemplateDurationInMillis",class:"form-control-plaintext"},k_={class:"row row-cols-1 row-cols-sm-3"},S_={class:"col"},T_={class:"form-floating mb-2"},M_={id:"dateScheduledStart",class:"form-control-plaintext"},I_={class:"col"},x_={class:"form-floating mb-2"},C_={id:"dateScheduledEnd",class:"form-control-plaintext"},V_={key:0,class:"col"},P_={class:"form-floating mb-2"},O_={id:"relativeProgram",class:"form-control-plaintext"},A_={key:0,class:"mt-2"},U_={class:"table-responsive border"},D_={class:"table table-sm table-bordered1 mb-0"},H_={class:"text-center me-1"},L_={class:"text-center"},E_={class:"text-center"},q_={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},B_={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},N_={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(l){const p=l,{moment:S,generateReturnUrl:P}=Ke();return fe(()=>{p.item.value}),(k,H)=>{const V=te("router-link");return t(),s("div",Wh,[e("div",null,[H[1]||(H[1]=e("h5",null," VOD ",-1)),e("div",Kh,[e("div",Qh,[e("div",Jh,[F(V,{to:`${l.urlViewVodSource}/${l.item.vodSourceId}/${o(P)()}`,class:"link-offset-2"},{default:z(()=>[J(c(l.item.vodSource.name),1)]),_:1},8,["to"])]),H[0]||(H[0]=e("label",{for:"vodSourceTitle"},"Title",-1))])])]),e("div",null,[H[4]||(H[4]=e("h5",null," Video ",-1)),e("div",Xh,[e("div",Zh,[e("div",e_,[e("div",t_,[F(V,{to:`${l.urlViewVideo}/${l.item.vodSource.video.videoId}/${o(P)()}`,class:"link-offset-2"},{default:z(()=>[J(c(l.item.vodSource.video.title),1)]),_:1},8,["to"])]),H[2]||(H[2]=e("label",{for:"vodSourceVideoTitle"},"Title",-1))])]),e("div",s_,[e("div",o_,[e("div",a_,c(l.item.vodSource.video.description),1),H[3]||(H[3]=e("label",{for:"vodSourceVideoDesc"},"Description",-1))])])])]),e("div",l_,[H[13]||(H[13]=e("h5",null," Schedule ",-1)),e("div",n_,[e("div",r_,[e("div",i_,[e("div",d_,c(o(S).utc(l.item.startOffsetMillis).format("HH:mm:ss")),1),H[5]||(H[5]=e("label",{for:"startOffsetMillis"},"Start Offset",-1))])]),e("div",u_,[e("div",c_,[e("div",m_,c(o(S).utc(l.item.endOffsetMillis).format("HH:mm:ss")),1),H[6]||(H[6]=e("label",{for:"endOffsetMillis"},"End Offset",-1))])]),e("div",f_,[e("div",p_,[e("div",v_,c(o(S).utc(l.item.durationInMillis).format("HH:mm:ss")),1),H[7]||(H[7]=e("label",{for:"durationInMillis"},"Clip Duration",-1))])])]),e("div",g_,[e("div",b_,[e("div",y_,[e("div",$_,c(o(S).utc(l.item.adBreaksDurationInMillis).format("HH:mm:ss")),1),H[8]||(H[8]=e("label",{for:"adBreaksDurationInMillis"},"Total Ad Breaks Duration",-1))])]),e("div",w_,[e("div",h_,[e("div",__,c(o(S).utc(l.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),H[9]||(H[9]=e("label",{for:"totalProgramTemplateDurationInMillis"},"Total Program Duration",-1))])])]),e("div",k_,[e("div",S_,[e("div",T_,[e("div",M_,c(o(S).utc(l.item.dateScheduledStart).format("lll")),1),H[10]||(H[10]=e("label",{for:"dateScheduledStart"},"Program Start",-1))])]),e("div",I_,[e("div",x_,[e("div",C_,c(o(S).utc(l.item.dateScheduledEnd).format("lll")),1),H[11]||(H[11]=e("label",{for:"dateScheduledEnd"},"Program End",-1))])]),l.item.relativeProgram?(t(),s("div",V_,[e("div",P_,[e("div",O_,c(l.item.relativeProgram.name),1),H[12]||(H[12]=e("label",{for:"relativeProgram"},"Relative Program",-1))])])):D("",!0)])]),l.item.adBreaks.length?(t(),s("div",A_,[H[15]||(H[15]=e("h5",null," Ad Breaks ",-1)),e("div",U_,[e("table",D_,[e("tbody",null,[H[14]||(H[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(O,null,q(l.item.adBreaks,(K,W)=>(t(),s("tr",null,[e("td",H_,c(W+1),1),e("td",L_,c(o(S).utc(K.offsetMillis).format("HH:mm:ss")),1),e("td",E_,c(o(S).utc(K.durationInMillis).format("HH:mm:ss")),1),e("td",null,[F(V,{to:`${l.urlViewVodSource}/${K.vodSource.vodSourceId}/${o(P)()}`,class:"link-offset-2"},{default:z(()=>[K.vodSource.arn?(t(),s("span",q_)):(t(),s("span",B_)),J(" "+c(K.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):D("",!0)])}}},R_={key:0,class:"dropdown"},F_={key:0,class:"fas fa-fw fa-play"},z_={key:1,class:"fas fa-fw fa-stop"},G_={class:"dropdown-menu"},j_={key:0},Y_={key:1},W_={key:0},K_={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Q_={class:"nav-item",role:"presentation"},J_={class:"nav-item",role:"presentation"},X_={class:"nav-item",role:"presentation"},Z_={class:"nav-item",role:"presentation"},e2={class:"nav-item",role:"presentation"},t2={class:"tab-content",id:"myTabContent"},s2={class:"mt-2"},o2={class:"row row-cols-1 row-cols-sm-3"},a2={class:"col"},l2={class:"form-floating mb-2"},n2={class:"col"},r2={class:"form-floating mb-2"},i2={class:"col"},d2={class:"form-floating mb-2"},u2={class:"d-flex flex-row justify-content-start align-items-center"},c2={key:0,class:"ms-2"},m2={class:"row row-cols-sm-2 mt-1"},f2={class:"col"},p2={class:"form-floating mb-2"},v2={class:"form-control-plaintext",readonly:""},g2={class:"col"},b2={class:"form-floating mb-2"},y2={class:"form-control-plaintext",readonly:""},$2={class:"mt-2"},w2={class:"d-flex flex-row justify-content-start align-items-center"},h2={class:"ms-2"},_2={key:0,class:"alert bg-warning mt-2"},k2={class:"table-responsive border mt-1"},S2={class:"table table-bordered1 mb-0"},T2={class:"badge bg-info"},M2={key:0,class:"text-wrap"},I2={key:1,class:"text-warning"},x2={key:0,class:"text-end"},C2={key:1,class:"text-end"},V2=["onClick"],P2={key:0},O2={colspan:"999"},A2={class:"d-flex flex-row justify-content-start align-items-center"},U2={class:"ms-2"},D2={if:"item.playbackUrl"},H2=["onClick"],L2={key:0,class:"table-responsive mt-2"},E2={class:"table table-borderless mb-0 table-sm"},q2={class:"align-middle1"},B2={class:"badge bg-success"},N2={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},R2={class:"text-end"},F2=["onClick"],z2=["onClick"],G2={class:"mt-2"},j2={class:"table-responsive border"},Y2={class:"table mb-0 table-sm table-bordered1"},W2={class:"align-middle1"},K2={class:"text-center me-1"},Q2={class:"d-flex flex-row justify-content-start"},J2={class:""},X2={class:"mb-1"},Z2=["src"],ek={class:"ms-2"},tk={key:0,class:"fas fa-fw fa-check-circle text-success"},sk={class:"fw-lighter small"},ok={class:"fw-lighter small"},ak={class:"text-center"},lk={class:"text-center"},nk={class:"text-end"},rk={class:"btn-group position-static"},ik=["onClick"],dk={key:0,class:"fas fa-fw fa-chevron-circle-up"},uk={key:1,class:"fas fa-fw fa-chevron-circle-down"},ck={class:"dropdown-menu"},mk=["onClick"],fk={key:0},pk=["onClick"],vk=["onClick"],gk=["onClick"],bk={key:0},yk={colspan:"999"},$k={class:"text-end mt-2 d-none"},wk={class:"mt-2"},hk={class:"text-end mb-2"},_k={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},kk={class:"col"},Sk={class:"card shadow-sm"},Tk=["id"],Mk={class:"p-1"},Ik={class:"card-title1 text-center"},xk={class:"col"},Ck={class:"card shadow-sm"},Vk=["id"],Pk={class:"p-1"},Ok={class:"card-title1 text-center text-truncate"},Ak={class:"small1"},Uk={class:"mt-2"},Dk={key:0,class:"fas fa-fw fa-check-circle text-success"},Hk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Lk={key:0,class:"fas fa-fw fa-check-circle text-success"},Ek={key:1,class:"fas fa-fw fa-times-circle text-warning"},qk={key:0,class:"fas fa-fw fa-check-circle text-success"},Bk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Nk={key:0,class:"fas fa-fw fa-check text-warning"},Rk={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},Fk={key:0,class:"fas fa-fw fa-check-circle text-success"},zk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Gk={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:K,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:L,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:i,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});xe("$config");const Q=we();Q.user;const r=ge({user:Q.user,item:null}),m=ue(null),Y=ue(null),u=ue(null),I=ue(null),b=ue(null),_=ue(),g=Ie(()=>r.item&&r.item.state==="RUNNING");fe(async()=>{await n();const me=L.getPageTab("channel")||"information-tab";d(me)}),Ae(()=>{_e()});const d=me=>{L.setPageTab("channel",me),_.value=me,me==="preview-tab"&&setTimeout(()=>{var E=document.getElementById("masonry");new tt(E,{})},2e3)},f=me=>me===_.value?"active":"",a=me=>me===_.value?"show active":"",n=async()=>{const me=r;if(_e(),!k.value)try{k.value=!0,U.value="",r.item=null;const E=`/api/v1/channels/${p.id}/`;await ee.get(E).then(ye=>{me.item=ye.data,me.item.outputs.forEach(Le=>{Le.playbackConfigurations.forEach(de=>{if(Le.playbackUrl){const Oe=Le.playbackUrl,Me=Oe.lastIndexOf("/"),Ze=Oe.substring(0,Me),ze=Oe.substring(Me+1),et=de.hlsConfigurationManifestEndpointPrefix;et&&(de.hlsPlaylist=et+ze)}})})})}catch(E){U.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{k.value=!1}},v=async()=>{await n()},$=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!k.value){U.value=null;try{k.value=!0,await ee.post(`/api/v1/channels/${p.id}/publish/`).then(E=>{A.success("Publish Channel","Channel was published.")}),k.value=!1,await v()}catch(E){U.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{k.value=!1}}},y=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/channels/${p.id}/unpublish/`).then(E=>{A.warning("Remove Channel","Channel was removed.")}),k.value=!1,await v()}catch(E){U.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{k.value=!1}}},M=()=>{m.value.open(p.id)},w=me=>{me.outputType==="HLS"&&Y.value.open(me.channelOutputId,me.playbackUrl)},N=()=>{u.value.open(p.id)},h=me=>{I.value.open(me)},x=(me,E)=>{b.value.open(p.id,me,E)},ne=async me=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/programs/${me}/`).then(ye=>{A.success("Delete Program","Program was deleted..",{async onClose(){}})}),k.value=!1,await v()}catch(ye){U.value=L.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},ie=async me=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/channelOutputs/${me}/`).then(ye=>{A.success("Delete Channel Output","Channel output was deleted..")}),k.value=!1,await v()}catch(ye){U.value=L.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},j=async me=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!k.value){U.value=null;try{k.value=!0,await ee.post(`/api/v1/programs/${me}/publish/`).then(ye=>{A.success("Publish Program","Program was published..",{async onClose(){}})}),k.value=!1,await v()}catch(ye){U.value=L.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},R=async me=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/programs/${me}/unpublish/`).then(ye=>{A.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),k.value=!1,await v()}catch(ye){U.value=L.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},oe=async me=>{if(!k.value){U.value=null;try{k.value=!0,await ee.put(`/api/v1/channels/${p.id}/change-state/${me}`).then(E=>{A.success("Update Channel state","Change state was updated")}),k.value=!1,me==="STOPPED"&&_.value==="preview-tab"&&(_e(),d("information-tab")),await v()}catch(E){U.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{k.value=!1}}},ce=async me=>{if(!k.value)try{k.value=!0,U.value="",await ee.post(`/api/v1/channelOutputs/${me}/playback/publish/`).then(E=>{A.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),k.value=!1,await v()}catch(E){U.value=L.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{k.value=!1}},ae=async me=>{if(confirm("Do you want to remove this Playback Configuration?")&&!k.value)try{k.value=!0,U.value="",await ee.delete(`/api/v1/channelOutputs/${me}/playback/`).then(ye=>{A.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),k.value=!1,await v()}catch(ye){U.value=L.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}},Ce=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const me=r.item.outputs;_e(),me.forEach(E=>{var ye=document.getElementById(`video-${E.channelOutputId}`);E.hls&&E.hls.destroy(),E.hls=L.createHlsStream(ye,E.playbackUrl,"Main playlist started."),ye.play(),E.playbackConfigurations.forEach(He=>{if(He.hls&&He.hls.destroy(),He.arn){var Le=document.getElementById(`video-${He.channelOutputPlaybackConfigurationId}`);try{He.hls=L.createHlsStream(Le,He.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Le.play()}catch(de){A.error("Failed Stream SSAI Playlist",de)}}})}),setTimeout(()=>{var E=document.getElementById("masonry");new tt(E,{})},2e3)}},_e=()=>{r.item&&r.item.outputs&&r.item.outputs.forEach(E=>{E.hls&&(E.hls.detachMedia(),E.hls.destroy(),delete E.hls),E.playbackConfigurations.forEach(ye=>{ye.hls&&(ye.hls.detachMedia(),ye.hls.destroy(),delete ye.hls)})})};return(me,E)=>{const ye=te("router-link"),He=te("PageHeader"),Le=te("PageBody");return t(),ve(be,null,{default:z(()=>[e("div",null,[F(He,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(P)},{default:z(()=>[r.item?(t(),s("div",R_,[e("button",{class:re([[g.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[g.value?(t(),s("span",F_)):(t(),s("span",z_)),J(" "+c(r.item.state),1)],2),e("ul",G_,[r.item.arn?(t(),s("li",j_,[g.value?(t(),s("button",{key:0,onClick:E[0]||(E[0]=de=>oe("STOPPED")),class:"dropdown-item"},E[20]||(E[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),J("Stop ")]))):(t(),s("button",{key:1,onClick:E[1]||(E[1]=de=>oe("RUNNING")),class:"dropdown-item"},E[21]||(E[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),J("Start ")])))])):D("",!0),g.value?D("",!0):(t(),s("li",Y_,[r.item.arn?(t(),s("button",{key:0,onClick:E[2]||(E[2]=de=>y()),class:"dropdown-item"},E[22]||(E[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),J("Unpublish ")]))):(t(),s("button",{key:1,onClick:E[3]||(E[3]=de=>$()),class:"dropdown-item"},E[23]||(E[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Publish ")])))])),r.item.arn?(t(),s(O,{key:2},[E[25]||(E[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:E[4]||(E[4]=de=>$()),class:"dropdown-item"},E[24]||(E[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Republish ")]))])],64)):D("",!0)])])):D("",!0),F(ye,{to:`${l.urlSchedulePrograms}/${l.id}`,class:"ms-2 btn btn-primary"},{default:z(()=>E[26]||(E[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:E[5]||(E[5]=de=>v()),class:"ms-2 btn btn-secondary"},E[27]||(E[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:E[6]||(E[6]=de=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},E[28]||(E[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(Le,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",W_,[e("ul",K_,[e("li",Q_,[e("button",{onClick:E[7]||(E[7]=de=>d("information-tab")),class:re([f("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},E[29]||(E[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),J("Information ")]),2)]),e("li",J_,[e("button",{onClick:E[8]||(E[8]=de=>d("outputPlayback-tab")),class:re([f("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},E[30]||(E[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),J("Output/Playback ")]),2)]),e("li",X_,[e("button",{onClick:E[9]||(E[9]=de=>d("programs-tab")),class:re([f("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},E[31]||(E[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),J("Programs ")]),2)]),e("li",Z_,[e("button",{onClick:E[10]||(E[10]=de=>d("preview-tab")),class:re([[g.value?"":"disabled",f("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},E[32]||(E[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),J("Preview ")]),2)]),e("li",e2,[e("button",{onClick:E[11]||(E[11]=de=>d("checklist-tab")),class:re([f("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},E[33]||(E[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),J("Checklist ")]),2)])]),e("div",t2,[e("div",{class:re([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",s2,[e("div",o2,[e("div",a2,[e("div",l2,[B(e("input",{"onUpdate:modelValue":E[12]||(E[12]=de=>r.item.name=de),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),E[34]||(E[34]=e("label",{for:"name"},"Name",-1))])]),e("div",n2,[e("div",r2,[B(e("input",{"onUpdate:modelValue":E[13]||(E[13]=de=>r.item.playbackMode=de),type:"text",class:"form-control-plaintext",id:"playbackMode",readonly:""},null,512),[[Z,r.item.playbackMode]]),E[35]||(E[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",i2,[e("div",d2,[B(e("input",{"onUpdate:modelValue":E[14]||(E[14]=de=>r.item.tier=de),type:"text",class:"form-control-plaintext",id:"tier",readonly:""},null,512),[[Z,r.item.tier]]),E[36]||(E[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",u2,[E[38]||(E[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),g.value?D("",!0):(t(),s("div",c2,[e("button",{onClick:E[15]||(E[15]=de=>x(r.item.fillerSlateSourceLocation.sourceLocationId,r.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},E[37]||(E[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",m2,[e("div",f2,[e("div",p2,[e("div",v2,[F(ye,{to:`${l.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${o(i)()}`,class:re([[r.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName"},{default:z(()=>[J(c(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"])]),E[39]||(E[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",g2,[e("div",b2,[e("div",y2,[F(ye,{to:`${l.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${o(i)()}`,class:re([[r.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:z(()=>[J(c(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"])]),E[40]||(E[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:re([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",$2,[e("div",null,[e("div",w2,[E[42]||(E[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",h2,[e("button",{onClick:E[16]||(E[16]=de=>N()),class:"btn btn-outline-primary btn-sm"},E[41]||(E[41]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),r.item.outputs.length<=0?(t(),s("div",_2,E[43]||(E[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),J("Channel Output is required ")]))):D("",!0),e("div",k2,[e("table",S2,[E[53]||(E[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.outputs,(de,Oe)=>(t(),s(O,{key:de.channelOutputId},[e("tr",null,[e("td",null,c(Oe+1),1),e("td",null,[e("div",null,c(de.manifestName),1),e("div",null,[e("span",T2,c(de.outputType),1)])]),e("td",null,[e("div",null,[F(ye,{to:`${l.urlViewSourceGroup}/${de.sourceGroupId}/${o(i)()}`,class:"link-offset-2",tag:"button"},{default:z(()=>[J(c(de.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[de.playbackUrl?(t(),s("div",M2,c(de.playbackUrl),1)):(t(),s("div",I2,E[44]||(E[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),J("Publish channel to get the playback url ")])))]),g.value?(t(),s("td",x2)):(t(),s("td",C2,[e("button",{onClick:Me=>ie(de.channelOutputId),class:"btn btn-outline-warning btn-sm"},E[45]||(E[45]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,V2)]))]),de.playbackUrl?(t(),s("tr",P2,[E[50]||(E[50]=e("td",null,null,-1)),E[51]||(E[51]=e("td",null,null,-1)),E[52]||(E[52]=e("td",null,null,-1)),e("td",O2,[e("div",A2,[E[47]||(E[47]=e("h5",null,[J("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",U2,[e("div",D2,[e("button",{onClick:Me=>w(de),class:"btn btn-outline-primary btn-sm"},E[46]||(E[46]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,H2)])])]),de.playbackConfigurations.length>0?(t(),s("div",L2,[e("table",E2,[e("tbody",null,[(t(!0),s(O,null,q(de.playbackConfigurations,(Me,Ze)=>(t(),s("tr",q2,[e("td",null,c(Ze+1),1),e("td",null,[e("span",B2,c(Me.name),1),e("div",N2,[e("span",null,c(Me.adDecisionServerUrl),1)])]),e("td",R2,[Me.arn?D("",!0):(t(),s("button",{key:0,onClick:ze=>ce(Me.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},E[48]||(E[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,F2)),e("button",{onClick:ze=>ae(Me.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},E[49]||(E[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,z2)])]))),256))])])])):D("",!0)])])):D("",!0)],64))),128))]),_:1},512),[[Se,r.item.outputs.length>0]])])])])])],2),e("div",{class:re([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",G2,[e("div",j2,[e("table",Y2,[E[60]||(E[60]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.programs,(de,Oe)=>(t(),s(O,{key:de.programId},[e("tr",W2,[e("td",K2,c(Oe+1),1),e("td",null,[e("div",Q2,[e("div",J2,[de.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(de.vodSource.video.thumbnails,Me=>(t(),s("div",X2,[e("img",{src:Me.url,class:"img-fuild border",width:"128"},null,8,Z2)]))),256)):D("",!0)]),e("div",ek,[e("div",null,[de.arn?(t(),s("span",tk)):D("",!0),e("span",null,c(de.name),1)]),e("div",null,[e("span",sk,c(o(L).moment.utc(de.dateScheduledStart).calendar())+" (utc)",1)]),e("div",null,[e("span",ok,c(o(L).moment(de.dateScheduledStart).calendar())+" (local)",1)])])])]),e("td",ak,c(o(L).moment.utc(de.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",lk,c(de.adBreaks.length),1),e("td",nk,[e("div",rk,[e("button",{onClick:Me=>de.expand=!de.expand,type:"button",class:re([[de.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[de.expand?(t(),s("span",dk)):(t(),s("span",uk))],10,ik),E[58]||(E[58]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",ck,[e("li",null,[e("button",{onClick:Me=>h(de.programId),class:"dropdown-item"},E[54]||(E[54]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),J("Edit ")]),8,mk)]),de.arn?(t(),s("li",fk,[e("button",{onClick:Me=>R(de.programId),class:"dropdown-item"},E[55]||(E[55]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),J("Unpublish ")]),8,pk)])):(t(),s(O,{key:1},[e("li",null,[e("button",{onClick:Me=>j(de.programId),class:"dropdown-item"},E[56]||(E[56]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Publish ")]),8,vk)]),e("li",null,[e("button",{onClick:Me=>ne(de.programId),class:"dropdown-item"},E[57]||(E[57]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),J("Remove ")]),8,gk)])],64))])])])]),de.expand?(t(),s("tr",bk,[E[59]||(E[59]=e("td",null,null,-1)),e("td",yk,[F(N_,{item:de,urlViewVideo:l.urlViewVideo,urlViewVodSource:l.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):D("",!0)],64))),128))]),_:1},512),[[Se,r.item.programs.length>0]])])]),e("div",$k,[e("button",{onClick:E[17]||(E[17]=de=>M()),class:"btn btn-outline-primary"},E[61]||(E[61]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Program ")]))])])],2),g.value?(t(),s("div",{key:0,class:re([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",wk,[e("div",hk,[r.item.outputs[0].hls?(t(),s("button",{key:1,onClick:E[19]||(E[19]=de=>_e()),class:"btn btn-primary"},E[63]||(E[63]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:E[18]||(E[18]=de=>Ce()),class:"btn btn-primary"},E[62]||(E[62]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",_k,[(t(!0),s(O,null,q(r.item.outputs,de=>(t(),s(O,null,[e("div",kk,[e("div",Sk,[e("video",{id:`video-${de.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,Tk),e("div",Mk,[e("div",Ik,c(de.manifestName),1)])])]),(t(!0),s(O,null,q(de.playbackConfigurations,(Oe,Me)=>(t(),s("div",xk,[e("div",Ck,[e("video",{id:`video-${Oe.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,Vk),e("div",Pk,[e("div",Ok,[J(" #"+c(Me+1)+" ",1),e("span",Ak,c(Oe.name),1)])])])]))),256))],64))),256))])])],2)):D("",!0),e("div",{class:re([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Uk,[E[69]||(E[69]=J(" Checklist ")),e("ul",null,[e("li",null,[r.item.fillerSlateSourceLocation.arn?(t(),s("span",Dk)):(t(),s("span",Hk)),E[64]||(E[64]=J(" Filler Slate Source Location "))]),e("li",null,[r.item.fillerSlateVodSource.arn?(t(),s("span",Lk)):(t(),s("span",Ek)),E[65]||(E[65]=J(" Filler Slate VOD Source "))]),e("li",null,[r.item.outputs.length>0?(t(),s("span",qk)):(t(),s("span",Bk)),E[67]||(E[67]=J(" Outputs ")),e("ul",null,[e("li",null,[r.item.outputs.some(de=>de.playbackConfigurations.length>0)?(t(),s("span",Nk)):(t(),s("span",Rk)),E[66]||(E[66]=J(" Ad Insertion setup "))])])]),e("li",null,[r.item.programs.length>0?(t(),s("span",Fk)):(t(),s("span",zk)),E[68]||(E[68]=J(" Programs "))])])])],2)])])):D("",!0)]),_:1},8,["errorMessage"]),F(Vw,{ref_key:"modalAddProgram",ref:m,onRefresh:v},null,512),F(eh,{ref_key:"modalAddPlaybackConfiguration",ref:Y,onRefresh:v},null,512),F(kh,{ref_key:"modalAddChannelOutput",ref:u,onRefresh:v},null,512),F(mt,{ref_key:"modalEditProgram",ref:I,onOnClose:v},null,512),F(Yh,{ref_key:"modalEditFillerSlate",ref:b,onRefresh:v},null,512)])]),_:1})}}},jk={path:"/",component:ga,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Ea},{path:"videos",children:[{path:"",component:Hn},{path:"view/:id",component:wr,props:!0},{path:"add",component:$l},{path:"edit/:id",component:en,props:!0}]},{path:"source-groups",children:[{path:"add",component:Sr},{path:"edit/:id",component:jr,props:!0},{path:"",component:ei},{path:"view/:id",component:vi,props:!0}]},{path:"source-locations",children:[{path:"add",component:hi},{path:"edit/:id",component:Si,props:!0},{path:"",component:Di},{path:"view/:id",component:sd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:$u},{path:"edit/:id",component:ju,props:!0},{path:"",component:kc},{path:"view/:id",component:rf,props:!0}]},{path:"channels",children:[{path:"add",component:n1},{path:"edit/:id",component:d1,props:!0},{path:"",component:$1},{path:"schedule-programs/:id",component:M$,props:!0},{path:"view/:id",component:Gk,props:!0}]},{path:"program-templates",children:[{path:"add",component:jp},{path:"edit/:id",component:Hv,props:!0},{path:"",component:sg},{path:"view/:id",component:qg,props:!0}]}]},ft=gt({history:bt("/"),linkActiveClass:"active",routes:[{...uo},{path:"/administrator",redirect:"/"},{...jk}]}),Yk={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const l=this,S=new yt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();S.on("onNotificationCreated",function(P){let k=P.content;P.notificationEntityClassText==="Deposit"&&(k+="<br/>",k+=`<a href="${l.urlViewDeposit}${P.referenceId}">Click ${P.notificationEntityClassText} here</a>`),P.notificationEntityClassText==="Withdraw"&&(k+="<br/>",k+=`<a href="${l.urlViewWithdraw}${P.referenceId}">Click ${P.notificationEntityClassText} here</a>`),P.notificationEntityClassText==="ManualModeOfPayment"&&(k+="<br/>",k+=`<a href="${l.urlViewManualModeOfPayment}${P.referenceId}">Click ${P.notificationEntityClassText} here</a>`),P.iconClass;let H="secondary";switch(P.notificationType){case 1:H="success";break;case 3:H="info";break;case 3:H="success";break;case 4:H="info";break;case 5:H="warning";break;case 6:H="error";break}l.$toast[H](P.subject,k,{timeOut:1e4});const V=P.subject,U={body:k,icon:"/img/192x102.png"};new Notification(V,U)}),S.on("jobUpdated",function(P){l.$bus.$emit("event:job-updated",P)}),await S.start().then(function(){}).catch(function(P){})}}};function Wk(l,p,S,P,k,H){return t(),s("div")}const Kk=Ve(Yk,[["render",Wk],["__scopeId","data-v-5b4a9fa2"]]),Qk={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},Jk={class:"container"},Xk={class:"col-md"},Zk={class:"navbar-brand mb-0 ms-1 align-middle"},eS={class:"col-md-auto"},tS={class:"d-flex flex-row align-items-center justify-content-end"},sS={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(l){return(p,S)=>(t(),ve(be,null,{default:z(()=>[e("nav",Qk,[e("div",Jk,[e("div",Xk,[qe(p.$slots,"title",{},()=>[e("a",Zk,[e("i",{class:re([l.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,c(l.pageTitle),1)])],!0)]),e("div",eS,[e("div",tS,[qe(p.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},oS=Ve(sS,[["__scopeId","data-v-eb40af38"]]),aS={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},lS=["innerHTML"],nS={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},rS={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(l){return(p,S)=>(t(),ve(be,null,{default:z(()=>[qe(p.$slots,"default",{},()=>[l.errorMessage?(t(),s("div",aS,[S[0]||(S[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:l.errorMessage},null,8,lS)])):D("",!0),l.vuelidate&&l.vuelidate.$error?(t(),s("div",nS,[S[1]||(S[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(l.vuelidate.$errors,P=>(t(),s("li",{key:P.$uid},[P.$validator==="$each"?(t(),s(O,{key:0},[J(" Check errors in '"+c(P.$property)+"' ",1)],64)):(t(),s(O,{key:1},[J(c(P.$message),1)],64))]))),128))])])):D("",!0)])]),_:3}))}},iS={class:"py-3 container flex-grow-1 overflow-y-auto"},dS={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(l){return(p,S)=>{const P=te("PageMessages");return t(),ve(be,null,{default:z(()=>[e("div",iS,[F(P,{errorMessage:l.errorMessage,vuelidate:l.vuelidate},null,8,["errorMessage","vuelidate"]),qe(p.$slots,"default")])]),_:3})}}},uS={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const l=this;l.busy||(document.activeElement&&document.activeElement.blur(),await l.search(1))},async moveFirst(){const l=this;if(l.busy)return;l.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await l.search(1))},async moveLast(){const l=this;if(l.busy)return;const p=l.filter;p.pageIndex!==p.totalPages&&(document.activeElement&&document.activeElement.blur(),await l.search(p.totalPages))},async move(l){const p=this;if(p.busy)return;const S=p.filter,P=S.pageIndex+l;P>=0&&P<=S.totalPages&&(document.activeElement&&document.activeElement.blur(),await p.search(P))}}},cS={class:"mt-2"},mS={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},fS={key:0,class:"col-sm order-2 order-sm-1"},pS={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},vS={class:"me-1 fw-bold"},gS={class:"fw-bold"},bS={class:"ms-1"},yS={class:"col-sm-auto ms-auto order-1 order-sm-2"},$S={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},wS={key:0,class:"page-item"},hS={key:1,class:"page-item"},_S={key:2,class:"page-item"},kS={class:"page-item active"},SS={class:"page-link"},TS={key:3,class:"page-item"},MS={key:4,class:"page-item"},IS={key:5,class:"page-item"},xS={key:1,class:"text-info font-weight-bold text-center"},CS={key:0},VS={key:1};function PS(l,p,S,P,k,H){return t(),s("div",cS,[S.filter.items.length?(t(),s("div",mS,[S.showPerPage?(t(),s("div",fS,[e("div",pS,[e("div",null,[e("span",vS,c(S.filter.totalCount),1),p[8]||(p[8]=J("records in ")),e("span",gS,c(S.filter.totalPages),1),p[9]||(p[9]=J(" page(s) "))]),e("div",bS,[B(e("select",{"onUpdate:modelValue":p[0]||(p[0]=V=>S.filter.pageSize=V),onChange:p[1]||(p[1]=(...V)=>H.changePagination&&H.changePagination(...V)),class:"form-select form-select-sm me-1"},p[10]||(p[10]=[Ye('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[pe,S.filter.pageSize]])]),p[11]||(p[11]=e("div",{class:"ms-1"},"per page",-1))])])):D("",!0),e("div",yS,[e("ul",$S,[S.filter.pageIndex!==1?(t(),s("li",wS,[e("button",{class:"page-link","aria-label":"Previous",onClick:p[2]||(p[2]=(...V)=>H.moveFirst&&H.moveFirst(...V))},p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):D("",!0),S.filter.pageIndex>2?(t(),s("li",hS,[e("button",{class:"page-link",onClick:p[3]||(p[3]=V=>H.move(-2))},c(S.filter.pageIndex-2),1)])):D("",!0),S.filter.pageIndex>1?(t(),s("li",_S,[e("button",{class:"page-link",onClick:p[4]||(p[4]=V=>H.move(-1))},c(S.filter.pageIndex-1),1)])):D("",!0),e("li",kS,[e("span",SS,c(S.filter.pageIndex),1)]),S.filter.pageIndex<S.filter.totalPages?(t(),s("li",TS,[e("button",{class:"page-link",onClick:p[5]||(p[5]=V=>H.move(1))},c(S.filter.pageIndex+1),1)])):D("",!0),S.filter.pageIndex<S.filter.totalPages-1?(t(),s("li",MS,[e("button",{class:"page-link",onClick:p[6]||(p[6]=V=>H.move(2))},c(S.filter.pageIndex+2),1)])):D("",!0),S.filter.pageIndex<S.filter.totalPages?(t(),s("li",IS,[e("button",{class:"page-link","aria-label":"Next",onClick:p[7]||(p[7]=(...V)=>H.moveLast&&H.moveLast(...V))},p[13]||(p[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):D("",!0)])])])):(t(),s("div",xS,[S.noRecords?(t(),s("div",CS,c(S.noRecords),1)):(t(),s("div",VS,"No record(s) found."))]))])}const OS=Ve(uS,[["render",PS]]),AS={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let l=this;if(!l.enabled)return;let p=l.filter;p.sortField===l.field?p.sortOrder===0?p.sortField=null:p.sortOrder=p.sortOrder===0?1:0:(p.sortField=l.field,p.sortOrder=1),l.$emit("search")}}},US={class:"align-self-center"};function DS(l,p,S,P,k,H){return t(),s("div",{onClick:p[0]||(p[0]=(...V)=>H.click&&H.click(...V)),class:"d-flex flex-row justify-content-start align-content-center",style:rt({cursor:S.enabled?"pointer":""})},[qe(l.$slots,"default"),e("span",US,[S.showSort?(t(),s("span",{key:0,class:re([{"fa-sort text-gray-500":!H.currentSortField(),"fa-sort-up":H.currentSortField()&&H.sortUp(),"fa-sort-down":H.currentSortField()&&!H.sortUp()},"fas fa-fw mr-1"])},null,2)):D("",!0)])],4)}const HS=Ve(AS,[["render",DS]]),LS={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(l){const p=this;p.setSelected(l),p.$emit("onSelectedRow",l)}}},ES={class:"table-responsive m-0"},qS=["href"],BS={key:1},NS=["onClick"],RS={class:"form-group row no-gutters"},FS={class:"col-5 col-form-label"},zS={class:"col align-self-center"},GS=["href"],jS={key:1};function YS(l,p,S,P,k,H){return t(),s("div",null,[e("div",ES,[e("table",{class:re(["table table-hover d-none d-md-table card",S.tableCss])},[e("thead",null,[qe(l.$slots,"header",{},()=>[p[0]||(p[0]=e("th",null,"#",-1)),(t(!0),s(O,null,q(S.header.columns,V=>(t(),s("th",null,c(V.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(O,null,q(S.items,(V,K)=>qe(l.$slots,"table-row",{key:`row1-${V[S.header.key]}`,item:V,index:K},()=>[e("td",null,c(S.getRowNumber(K)),1),(t(!0),s(O,null,q(S.header.columns,W=>(t(),s("td",null,[W.href?(t(),s("a",{key:0,href:W.href(V[S.header.key]),class:"font-weight-bold"},c(V[W.field]),9,qS)):(t(),s("span",BS,c(V[W.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:re(["d-block d-md-none",S.rowCss])},[(t(!0),s(O,null,q(S.items,(V,K)=>(t(),s("div",{key:`row2-${V[S.header.key]}`,onClick:W=>H.onSelectedRow(V),class:"border"},[e("div",{class:re(["p-2",{"b-left":S.isSelected(V)}])},[qe(l.$slots,"table-list",{item:V,index:K},()=>[(t(!0),s(O,null,q(S.header.columns,W=>(t(),s("div",RS,[e("label",FS,c(W.title),1),e("div",zS,[W.href?(t(),s("a",{key:0,href:W.href(V[S.header.key]),class:"font-weight-bold"},c(V[W.field]),9,GS)):(t(),s("span",jS,c(V[W.field]),1))])]))),256))],!0)],2)],8,NS))),128))],2)])}const WS=Ve(LS,[["render",YS],["__scopeId","data-v-65929213"]]),Pe=$t(ht);Pe.use(wt());Pe.use(ft);Pe.component("m-notification",Kk);Pe.component("m-pagination",OS);Pe.component("sort-field",HS);Pe.component("table-list",WS);Pe.component("Toasts",ma);Pe.component("PageHeader",oS);Pe.component("PageMessages",rS);Pe.component("PageBody",dS);const KS="https://sonyfastpoc.azurewebsites.net/",QS="Arcadian-Sony FAST",JS=void 0,XS={API_URL:KS,appName:QS,tenantId:JS};Pe.provide("$config",XS);Pe.provide("$bus",Qe);Pe.mount("#app");
