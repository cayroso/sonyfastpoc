import{o as t,c as ie,r as Q,h as nt,d as Ye,a as ae,e as Le,b as s,f as e,g as D,w as U,i as B,t as b,F as q,j,k as T,l as ne,m as We,n as be,p as Ke,q as Be,u as rt,s as Je,P as Qe,v as ue,x as Z,y as ee,z as ye,T as de,A as o,B as it,C as I,D as N,E as dt,G as oe,H as Xe,I as we,J as Pe,K as he,L as Oe,M as pe,N as $e,O as Te,Q as Ie,R as ut,S as ct,U as mt,V as xe,W as ft,X as pt}from"./vendor-DIDY8V1_-chunk.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))_(y);new MutationObserver(y=>{for(const z of y)if(z.type==="childList")for(const S of z.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&_(S)}).observe(document,{childList:!0,subtree:!0});function w(y){const z={};return y.integrity&&(z.integrity=y.integrity),y.referrerPolicy&&(z.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?z.credentials="include":y.crossOrigin==="anonymous"?z.credentials="omit":z.credentials="same-origin",z}function _(y){if(y.ep)return;y.ep=!0;const z=w(y);fetch(y.href,z)}})();const vt={__name:"App",setup(d){return(u,w)=>{const _=Q("router-view");return t(),ie(_)}}};function Ze(){const d=R=>{var F;let k=R,E=k.response,J="";if(!k.response)return R.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const L=`${window.location.pathname}${window.location.search}`;J=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(L)}`}'>here</a> to login.`}else if(E.status===400){let L=k.response.data.errors;J=k.response.data.title||k.response.data,L&&(J+="<ul>");for(let $ in L){let C=L[$];for(let h in L[$]){let W=C[h];J+=`<li>${W}</li>`}}L&&(J+="</ul>"),J||(J=k.message),J&&J.content&&(J=J.content)}else E.status===404?J=((F=E==null?void 0:E.data)==null?void 0:F.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(J=k.message,J===""&&(J=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return J},u=R=>JSON.parse(JSON.stringify(R)),w=R=>{if(typeof R!="number")return R;var k=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return k.format(R)},_=(R,k,E)=>{const F={value:k,expiry:new Date().getTime()+E};debugger;localStorage.setItem(R,JSON.stringify(F))},y=R=>{debugger;const k=localStorage.getItem(R);if(!k)return null;const E=JSON.parse(k);return new Date().getTime()>E.expiry?(localStorage.removeItem(R),null):E.value},z="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:d,clone:u,toCurrency:w,moment:nt,localStorageSetWithExpiry:_,localStorageGetWithExpiry:y,setPageTab:(R,k)=>{var E=localStorage.getItem(z);E?E=JSON.parse(E):E={},E[R]=k,localStorage.setItem(z,JSON.stringify(E))},getPageTab:R=>{var k=localStorage.getItem(z);return k?k=JSON.parse(k):k={},k[R]}}}const gt=Ze(),et=JSON.parse(localStorage.getItem("user"))||{},bt=gt.moment.utc(et.exp*1e3),yt=bt.isAfter()?et:null,ve=Ye({id:"auth",state:()=>({user:yt,returnUrl:null}),actions:{async login(d){try{this.user=d,localStorage.setItem("user",JSON.stringify(d))}catch(u){debugger;alert(u)}},logout(){this.user=null,localStorage.removeItem("user"),at.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),$t="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem($t));const wt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ne=wt,tt=Ye("msal",()=>{const d=ae({auth:{clientId:Ne.VITE_AUTH_CLIENT_ID,authority:Ne.VITE_AUTH_AUTHORITY_URL,redirectUri:Ne.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),u=ae("");return{msalConfig:d,accessToken:u,setAccessToken:_=>{u.value=_}}}),Re={$on:(...d)=>Le.on(...d),$once:(...d)=>Le.once(...d),$off:(...d)=>Le.off(...d),$emit:(...d)=>Le.emit(...d)};function ht(){const d=(z,S,G,R)=>{Re.$emit("toast-message",{title:z,message:S,type:G,options:R})};return{success:(z,S,G={})=>{d(z,S,"success",G)},warning:(z,S,G={})=>{d(z,S,"warning",G)},info:(z,S,G={})=>{d(z,S,"info",G)},error:(z,S,G={})=>{d(z,S,"danger",G)}}}const ke=(d,u)=>{const w=d.__vccOpts||d;for(const[_,y]of u)w[_]=y;return w},_t={data(){return{notifications:[],messages:[]}},async created(){const d=this;d.$bus.$on("event:notification-received",()=>{d.getUnreadNotifications()}),d.$bus.$on("event:notification-marked-as-read",u=>{d.notifications.some(_=>_.notificationId===u)&&d.getUnreadNotifications()}),d.$bus.$on("event:notification-removed",u=>{d.notifications.some(_=>_.notificationId===u)&&d.getUnreadNotifications()}),d.$bus.$on("event:chat-marked-as-read",d.onChatMarkedAsRead),d.$bus.$on("event:chat-message-received",d.onChatMessageReceived)},async mounted(){const d=this,u=d.$refs.notifications,w=d.$refs.messages;u&&u.offsetParent,w&&w.offsetParent&&await d.getUnreadChats()},methods:{async logout(){const d=this;try{await d.$util.axios.post("/api/accounts/logout").then(u=>{const w="/";d.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){d.$util.href(w)}})})}catch(u){d.$util.handleError(u)}},async onChatMarkedAsRead(d){let u=this,w=u.messages.find(_=>_.chatId===d);if(w){let _=u.messages.indexOf(w);u.messages.splice(_,1)}},async onChatMessageReceived(d){let u=this,w=u.messages.find(y=>y.chatId===d.chatId);if(w)w.lastMessageText=d.content;else{var _={chatId:d.chatId,isRead:!1,lastDateSent:d.dateSent,lastMessageText:d.content,senderFirstLastName:`${d.sender.firstName} ${d.sender.lastName}`,senderInitials:d.sender.initials,senderProfilePicture32:d.sender.profilePicture32,urlPicture:u.$util.getProfilePictureUrl(d.sender.profilePicture32,d.sender.initials)};u.messages.push(_)}},async getUnreadNotifications(){const d=this;try{await d.$util.axios.get("api/accounts/unread-notifications").then(u=>{d.notifications=u.data})}catch(u){d.$util.handleError(u)}},async getUnreadChats(){const d=this;try{await d.$util.axios.get("api/accounts/unread-chats").then(u=>{d.messages=u.data;for(let w in d.messages){let _=d.messages[w];d.$set(_,"urlPicture",d.$util.getProfilePictureUrl(_.senderProfilePicture32,_.senderInitials))}})}catch(u){d.$util.handleError(u)}},viewNotification(d){this.$bus.$emit("event:open-notification",d)},viewChat(d){this.$bus.$emit("event:open-chat",d)},showHiddenElements(){let u=this.$el.getElementsByClassName("initialHidden");for(let w=0;w<u.length;w++)u[w].classList.remove("invisible")}}},kt={mixins:[_t],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const u=ve().user;return{user:u,username:u?u.nameFull:"Guest"}},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1},async openModalSearchUser747(d){this.$refs.refModalSearchUser747.open(d)}}},St={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Tt={class:"container-md"},Mt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Ct={class:"navbar-nav"},It={class:"nav-item dropdown"},xt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Pt={class:"nav-item dropdown"},Vt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ut={class:"navbar-nav ms-auto"},Ot={class:"nav-item dropdown"},At={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Dt={class:"d-inline d-sm-none d-md-inline"},Ht={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Et={class:"text-capitalize"};function Lt(d,u,w,_,y,z){const S=Q("router-link");return t(),s("nav",St,[e("div",Tt,[D(S,{class:"navbar-brand",to:"/member"},{default:U(()=>[B(b(w.appName),1)]),_:1}),u[14]||(u[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Mt,[e("ul",Ct,[e("li",It,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",xt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/announcements"},{default:U(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),B(" Announcements ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/posts"},{default:U(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),B(" Posts ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/yellow-pages"},{default:U(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),B(" Yellow Pages ")])),_:1})])])]),e("li",Pt,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Vt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:U(()=>u[4]||(u[4]=[B(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Ut,[e("li",Ot,[e("a",At,[e("span",null,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Dt,b(y.username),1)])]),e("ul",Ht,[u[9]||(u[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),u[10]||(u[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),u[11]||(u[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),u[12]||(u[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),y.user&&y.user.roles.length>1?(t(!0),s(q,{key:0},j(y.user.roles,G=>(t(),s("li",null,[D(S,{to:`/${G.toLowerCase()}`,class:"dropdown-item"},{default:U(()=>[e("span",Et,b(G),1)]),_:2},1032,["to"])]))),256)):T("",!0),e("li",null,[D(S,{to:"/",class:"dropdown-item"},{default:U(()=>u[7]||(u[7]=[B(" Main ")])),_:1})]),u[13]||(u[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[D(S,{to:"/account/logout",class:"dropdown-item"},{default:U(()=>u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),B("Logout ")])),_:1})])])])])])])])}const Bt=ke(kt,[["render",Lt]]),qt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const d=document.getElementById("top");d&&d.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let d=this;if(!d.$el.getElementsByClassName)return;let u=d.$el.getElementsByClassName("initialHidden");for(let w=0;w<u.length;w++){let _=u[w];_.classList.remove("invisible"),_.classList.remove("d-none")}},close(){const d=this,u=document.referrer.toLowerCase();u&&u.includes("/account/login")?d.$router.go(-2):d.$router.go(-1)},toggle(d){const u=this;u.toggles[d]=!u.toggles[d],localStorage.setItem(u.togglesKey,JSON.stringify(u.toggles))}}},Nt={mixins:[qt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(d){return window.location.href.indexOf(d)>-1}}},Rt={class:"footer sticky-bottom"},zt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Ft={class:"container-md"},jt={class:"navbar-text small p-0"},Gt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-nav nav-fill w-100"},Kt={class:"nav-item dropup"},Jt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Qt={class:"nav-item dropup"},Xt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function Zt(d,u,w,_,y,z){const S=Q("router-link");return t(),s("footer",Rt,[e("div",zt,[e("div",Ft,[e("span",jt,"©"+b(y.copyright),1)])]),e("nav",Gt,[e("div",Yt,[e("ul",Wt,[e("li",Kt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Jt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/announcements"},{default:U(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),B(" Announcements ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/posts"},{default:U(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),B(" Posts ")])),_:1})]),e("li",null,[D(S,{class:"dropdown-item",to:"/member/yellow-pages"},{default:U(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),B(" Yellow Pages ")])),_:1})])])]),e("li",Qt,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",Xt,[e("li",null,[D(S,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:U(()=>u[4]||(u[4]=[B(" Property Monthly Dues ")])),_:1})])])])])])])])}const es=ke(Nt,[["render",Zt]]),ts={name:"AdminLayout",components:{TopNav:Bt,BottomNav:es},inject:["$config"],mounted(){const u=this.$config;document.title=`Account - ${u.appName}`}},ss={class:"d-flex flex-column vh-100"};function os(d,u,w,_,y,z){const S=Q("Toasts"),G=Q("router-view");return t(),s("div",ss,[D(S),D(G,{class:"flex-grow-1 mb-2"})])}const as=ke(ts,[["render",os]]),ls={__name:"index",setup(d){return ve().user,ne(()=>{}),(w,_)=>(t(),s("div",null,_[0]||(_[0]=[We('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ns={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},rs=ns;function is(){be("$config");const d=rs.VITE_API_URL,u=Ke.create({baseURL:d});return Be.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),u.interceptors.request.use(w=>{Be.start();const{user:_}=ve();return _&&_.token&&(w.headers?(w.headers.Authorization||(w.headers.Authorization=`Bearer ${_.token}`),w.headers["Access-Control-Allow-Origin"]||(w.headers["Access-Control-Allow-Origin"]="*")):w.headers={Authorization:`Bearer ${_.token}`,"Access-Control-Allow-Origin":"*"}),w}),u.interceptors.response.use(w=>(Be.done(),w),w=>{throw Be.done(),w}),u}function me(d){if(!d.appTitle)throw Error("App Title is required.");if(!d.pageTitle)throw Error("Page Title is required.");const u=rt(),w=Je(),_=is(),y=Ze(),z=ht(),G=ve().user,R=()=>G&&G.roles&&G.roles.includes("System"),k=()=>G&&G.roles&&G.roles.includes("administrator"),E=()=>G&&G.roles&&G.roles.includes("employee"),J=()=>G&&G.roles&&G.roles.includes("Member"),F=()=>{let l=u.path;return u.query.returnUrl&&(l=u.query.returnUrl),l=`?returnUrl=${encodeURIComponent(l)}`,l},L=async()=>{const l=document.referrer.toLowerCase();l&&l.includes("/accounts/login")?await w.go(-2):await w.go(-1)},$=l=>{var V;const O=u.path,a=(V=u.query)==null?void 0:V.returnUrl;a&&!(O.startsWith(a)||a.startsWith(O))?w.push(a):w.push(l)},C=d.appTitle,h=d.pageTitle,W=ae(!1),K=ae(new Map),i=ae(""),c=ae(""),P=ae("");return{appTitle:C,pageTitle:h,busy:W,validations:K,infoMessage:i,warningMessage:c,errorMessage:P,router:w,route:u,axios:_,utils:y,toasts:z,close:L,closeWithReturnUrl:$,generateReturnUrl:F,security:{userId:G?G.userId:"",isSystem:R(),isAdministrator:k(),isEmployee:E(),isMember:J()}}}const ds={class:"h-100 d-flex align-items-center justify-content-center"},us={class:"form-signin w-100 m-auto"},cs={class:"h3 mb-3 fw-normal"},ms={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},fs=["innerHTML"],ps={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},vs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(d){be("$config");const u=ve(),w=tt(),_=new Qe(w.msalConfig),y=ue({username:"",password:""}),z={username:{required:Z.withMessage("Username is required.",ee),$autoDirty:!0,$lazy:!0},password:{required:Z.withMessage("Password is required.",ee),$autoDirty:!0,$lazy:!0}},S=ye(z,y),{appTitle:G,pageTitle:R,busy:k,isDirty:E,validations:J,infoMessage:F,warningMessage:L,errorMessage:$,router:C,route:h,axios:W,utils:K,toasts:i,close:c,security:P}=me({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ne(async()=>{await _.initialize()});const l=async()=>{await _.loginPopup({}).then(()=>{debugger;const V=_.getAllAccounts()[0];_.setActiveAccount(V)}).catch(a=>{console.error(`error during authentication: ${a}`)});var O={account:_.getActiveAccount(),scopes:[]};await _.acquireTokenSilent(O).then(a=>{debugger;const f=a.account.idToken,r=it(f);if(r.token=a.accessToken,console.log(a),!r.roles){debugger;r.roles=[]}r.userId=r.sub,u.login(r);var v=h.query.returnUrl;v?C.push(decodeURIComponent(v)):r.roles.length===1?C.push(`/${r.roles[0].toLowerCase()}`):C.push("/")}).catch(a=>{console.error(`error during acquireTokenSilent: ${a}`)})};return(O,a)=>(t(),ie(de,null,{default:U(()=>[e("div",ds,[e("main",us,[e("div",null,[e("h1",cs,b(o(G)),1),e("div",null,[o($)?(t(),s("div",ms,[a[1]||(a[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o($)},null,8,fs)])):T("",!0),o(S).$error?(t(),s("div",ps,[a[2]||(a[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(S).$errors,V=>(t(),s("li",{key:V.$uid},b(V.$message),1))),128))])])):T("",!0)]),e("button",{onClick:a[0]||(a[0]=V=>l()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},gs=ke(vs,[["__scopeId","data-v-896956d0"]]),bs={class:"h-100 d-flex align-items-center justify-content-center"},ys={__name:"logout",setup(d){const u=ve();return u.user,ne(async()=>{u.logoutWithRedirect()}),(w,_)=>(t(),s("div",bs,_[0]||(_[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[B(" You have logged out from HOA MS."),e("br"),B(" Click "),e("a",{href:"/",class:"d-inline"},"here"),B(" to go back to home page. ")])],-1)])))}},$s={class:"h-100 d-flex align-items-center justify-content-center"},ws={class:"card m-3"},hs={class:"card-header"},_s={class:"card-body"},ks={class:"m-2"},Ss={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ts=["innerHTML"],Ms={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Cs={class:"row row-cols-1 row-cols-sm-3"},Is={class:"col-sm"},xs={class:"form-group"},Ps={key:0,class:"d-block invalid-feedback"},Vs={class:"col-sm"},Us={class:"form-group"},Os={key:0,class:"d-block invalid-feedback"},As={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Es={class:"row row-cols-1 row-cols-sm-3"},Ls={class:"col"},Bs={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Ns={class:"col"},Rs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Fs={class:"row row-cols-1 row-cols-sm-3"},js={class:"col-sm"},Gs={class:"form-group"},Ys={key:0,class:"d-block invalid-feedback"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},Xs={class:"col"},Zs=["disabled"],eo={class:"col"},to={class:"col"},so={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(d){const u=ue({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),w=(P,l)=>P===l.password,_={firstName:{required:Z.withMessage("First name is required.",ee),$autoDirty:!0,$lazy:!0},middleName:{required:Z.withMessage("Middle name is required.",ee),$autoDirty:!0,$lazy:!0},lastName:{required:Z.withMessage("Last name is required.",ee),$autoDirty:!0,$lazy:!0},phoneNumber:{required:Z.withMessage("Phone number is required.",ee),$autoDirty:!0,$lazy:!0},email:{required:Z.withMessage("Email is required.",ee),$autoDirty:!0,$lazy:!0},password:{required:Z.withMessage("Password is required.",ee),$autoDirty:!0,$lazy:!0},confirmPassword:{required:Z.withMessage("Confirm password is required.",ee),confirmSamePassword:Z.withMessage("Password and confirm passwrod are different.",w),$autoDirty:!0,$lazy:!0}},y=ye(_,u),{appTitle:z,pageTitle:S,busy:G,isDirty:R,validations:k,infoMessage:E,warningMessage:J,errorMessage:F,router:L,axios:$,utils:C,toasts:h,close:W,security:K}=me({appTitle:"HOA MS",pageTitle:"Register User"}),i=be("$config");ne(()=>{});const c=async()=>{const P=u;if(G.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}F.value=null;try{G.value=!0;const O=C.clone(P);O.tenantid=i.tenantId;debugger;await $({method:"post",url:"/api/v1/accounts/register",data:O}).then(a=>{h.success("Register","Registration was successfull.",{onClose:async()=>{await L.push("/accounts/login")}})})}catch(O){F.value=C.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{G.value=!1}};return(P,l)=>{const O=Q("router-link");return t(),ie(de,null,{default:U(()=>[e("div",$s,[e("div",ws,[e("h4",hs,b(o(S)),1),e("div",_s,[e("div",ks,[o(F)?(t(),s("div",Ss,[l[8]||(l[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(F)},null,8,Ts)])):T("",!0),o(y).$error?(t(),s("div",Ms,[l[9]||(l[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(y).$errors,a=>(t(),s("li",{key:a.$uid},b(a.$message),1))),128))])])):T("",!0)]),e("div",Cs,[e("div",Is,[e("div",xs,[l[10]||(l[10]=e("label",null,"First Name",-1)),I(e("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>u.firstName=a),type:"text",class:"form-control"},null,512),[[N,u.firstName]]),o(y).firstName.$error?(t(),s("div",Ps,[(t(!0),s(q,null,j(o(y).firstName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])]),e("div",Vs,[e("div",Us,[l[11]||(l[11]=e("label",null,"Middle Name",-1)),I(e("input",{"onUpdate:modelValue":l[1]||(l[1]=a=>u.middleName=a),type:"text",class:"form-control"},null,512),[[N,u.middleName]]),o(y).middleName.$error?(t(),s("div",Os,[(t(!0),s(q,null,j(o(y).middleName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])]),e("div",As,[e("div",Ds,[l[12]||(l[12]=e("label",null,"Last Name",-1)),I(e("input",{"onUpdate:modelValue":l[2]||(l[2]=a=>u.lastName=a),type:"text",class:"form-control"},null,512),[[N,u.lastName]]),o(y).lastName.$error?(t(),s("div",Hs,[(t(!0),s(q,null,j(o(y).lastName.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])])]),e("div",Es,[e("div",Ls,[e("div",Bs,[l[13]||(l[13]=e("label",null,"Phone Number",-1)),I(e("input",{"onUpdate:modelValue":l[3]||(l[3]=a=>u.phoneNumber=a),type:"tel",class:"form-control"},null,512),[[N,u.phoneNumber]]),o(y).phoneNumber.$error?(t(),s("div",qs,[(t(!0),s(q,null,j(o(y).phoneNumber.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])]),e("div",Ns,[e("div",Rs,[l[14]||(l[14]=e("label",null,"Email",-1)),I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=a=>u.email=a),type:"email",class:"form-control"},null,512),[[N,u.email]]),o(y).email.$error?(t(),s("div",zs,[(t(!0),s(q,null,j(o(y).email.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])])]),e("div",Fs,[e("div",js,[e("div",Gs,[l[15]||(l[15]=e("label",null,"Password",-1)),I(e("input",{"onUpdate:modelValue":l[5]||(l[5]=a=>u.password=a),type:"password",class:"form-control"},null,512),[[N,u.password]]),o(y).password.$error?(t(),s("div",Ys,[(t(!0),s(q,null,j(o(y).password.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])]),e("div",Ws,[e("div",Ks,[l[16]||(l[16]=e("label",null,"Confirm Password",-1)),I(e("input",{"onUpdate:modelValue":l[6]||(l[6]=a=>u.confirmPassword=a),type:"password",class:"form-control"},null,512),[[N,u.confirmPassword]]),o(y).confirmPassword.$error?(t(),s("div",Js,[(t(!0),s(q,null,j(o(y).confirmPassword.$errors,a=>(t(),s("div",{key:a.$uid},b(a.$message),1))),128))])):T("",!0)])])]),e("div",Qs,[e("div",Xs,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:l[7]||(l[7]=a=>c()),class:"btn btn-primary w-100"},l[17]||(l[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),B("Register ")]),8,Zs)]),e("div",eo,[D(O,{to:"/",class:"btn btn-outline-primary w-100"},{default:U(()=>l[18]||(l[18]=[B("Home")])),_:1})]),e("div",to,[D(O,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:U(()=>l[19]||(l[19]=[B("Login")])),_:1})])])])])])]),_:1})}}},oo={path:"/accounts",component:as,props:!1,meta:{},children:[{path:"",component:ls},{path:"login",component:gs},{path:"logout",component:ys},{path:"register",component:so}]};function st(){const d=Je(),u=R=>window.location.href.indexOf(R)>-1,w=R=>localStorage.getItem("data-bs-theme")||R,_=R=>{document.documentElement.setAttribute("data-bs-theme",R),localStorage.setItem("data-bs-theme",R)},y=async()=>await Ke.get("https://bootswatch.com/api/5.json").then(R=>R.data),z=R=>{const k=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");k&&R?(k.setAttribute("href",R),localStorage.setItem("bootswatch-theme",R)):alert("cannot query css link")},S=R=>{G(),d.push(R)},G=()=>{if(screen.width<576){const k=document.getElementById("navbarCollapse");if(k){const E=dt.getInstance(k);E&&E.hide()}}};return{isActive:u,getCurrentBsTheme:w,changeBsTheme:_,getBootswatch:y,changeTheme:z,navigate:S,collapseNavbar:G}}const ao={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},lo={class:"container-md"},no={class:"navbar-collapse collapse",id:"navbarCollapse"},ro={class:"navbar-nav"},io={class:"nav-item"},uo={class:"nav-item dropdown"},co={class:"dropdown-menu","aria-labelledby":"dropdown01"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"navbar-nav ms-auto"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},yo=["onClick"],$o={class:"nav-item dropdown"},wo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},ho={class:"d-sm-none d-xl-inline"},_o={key:0},ko={key:1},So={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},To={key:0},Mo={key:1},Co={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(d){const u=tt(),{isActive:w,getCurrentBsTheme:_,changeBsTheme:y,getBootswatch:z,changeTheme:S,navigate:G,collapseNavbar:R}=st(),k=ve(),E=k.user,J=ue({user:E,username:E?E.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});ne(async()=>{const C=J;C.bootswatch=await z();const h=_(C.bsTheme);h&&(C.bsTheme=h,y(C.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(C.currentTheme=W,S(W))});const F=C=>{S(C),J.currentTheme=C,R()},L=C=>{y(C),J.bsTheme=C,R()},$=async()=>{k.logoutWithRedirect();const C=new Qe(u.msalConfig);await C.initialize();const h={mainWindowRedirectUri:"/"};await C.logoutPopup(h)};return(C,h)=>{const W=Q("router-link");return t(),ie(de,null,{default:U(()=>[e("nav",ao,[e("div",lo,[D(W,{class:"navbar-brand",to:"/administrator"},{default:U(()=>[B(b(d.appName),1)]),_:1}),h[18]||(h[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",no,[e("ul",ro,[e("li",io,[D(W,{to:"/videos",onClick:o(R),class:"nav-link"},{default:U(()=>h[3]||(h[3]=[e("span",{class:"fas fa-fw fa-file-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",uo,[h[6]||(h[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",co,[e("li",null,[D(W,{to:"/source-groups",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[4]||(h[4]=[B(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/source-locations",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[5]||(h[5]=[B(" Locations ")])),_:1},8,["onClick"])])])]),e("li",mo,[D(W,{to:"/vod-sources",onClick:o(R),class:"nav-link"},{default:U(()=>h[7]||(h[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",fo,[h[10]||(h[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",po,[e("li",null,[D(W,{to:"/program-templates",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[8]||(h[8]=[B(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[D(W,{to:"/channels",onClick:o(R),class:"dropdown-item"},{default:U(()=>h[9]||(h[9]=[B(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",vo,[e("li",go,[h[14]||(h[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",bo,[e("li",null,[J.bsTheme==="dark"?(t(),s("button",{key:0,onClick:h[0]||(h[0]=K=>L("light")),class:"dropdown-item"},h[11]||(h[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),B("Dark Mode ")]))):(t(),s("button",{key:1,onClick:h[1]||(h[1]=K=>L("dark")),class:"dropdown-item"},h[12]||(h[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),B("Light Mode ")])))]),h[13]||(h[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(q,null,j(J.bootswatch.themes,K=>(t(),s("li",null,[e("button",{onClick:i=>F(K.cssCdn),class:oe(["dropdown-item",{active:J.currentTheme===K.cssCdn}])},b(K.name),11,yo)]))),256))])]),e("li",$o,[e("a",wo,[e("span",null,[h[15]||(h[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",ho,[o(E)?(t(),s("span",_o,b(o(E).name),1)):(t(),s("span",ko," Guest "))])])]),e("ul",So,[o(E)?(t(),s("li",To,[e("button",{onClick:h[2]||(h[2]=K=>$()),class:"dropdown-item"},h[16]||(h[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),B("Logout ")]))])):(t(),s("li",Mo,[D(W,{to:"/accounts/login",class:"dropdown-item"},{default:U(()=>h[17]||(h[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),B("Login ")])),_:1})]))])])])])])])]),_:1})}}},Io={class:"footer sticky-bottom"},xo={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Po={class:"container-md"},Vo={class:"navbar-text small p-0"},Uo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(d){st();const u=be("$config"),_=ve().user;let z=new Date().getFullYear();const S=ue({user:_,username:_?_.nameFull:"Guest",copyright:`2020-${z} ${u.appName}`});return ne(async()=>{}),(G,R)=>(t(),s("footer",Io,[e("div",xo,[e("div",Po,[e("span",Vo,"©"+b(S.copyright),1)])])]))}},Oo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Re.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(d){d.message&&this.addMessage(d.title,d.message,d.type,d.options)},async addMessage(d,u,w,_={}){var y={id:this.count++,title:d,message:u,type:w,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};y=Object.assign({},y,_),this.messages.unshift(y),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),y.timeOut>0&&await this.startTimeout(y)},async startTimeout(d,u=0){const w=this,_=performance.now(),y=async()=>{d.animationFrame=requestAnimationFrame(async z=>{const S=z+u-_;if(!w.exists(d)||d.paused){cancelAnimationFrame(d.animationFrame);return}else if(S<d.timeOut){const G=S/d.timeOut;d.progress=G,await y()}else{d.progress=1,cancelAnimationFrame(d.animationFrame),w.remove(d);return}})};await y()},pauseProgress(d){d.timeOut<=0||(d.paused=!0)},async resumeProgress(d){d.timeOut<=0||(d.paused=!1,await this.startTimeout(d,d.timeOut*d.progress))},getCurrentProgress(d){return Math.round(d.progress*100)===100?100:d.progress*100},getIconClass(d){const u=d.type;let w="";switch(u){case"success":w="fas fa-fw fa-circle-check";break;case"info":w="fas fa-fw fa-circle-info";break;case"warning":w="fas fa-fw fa-circle-exclamation";break;case"danger":w="fas fa-fw fa-triangle-exclamation";break}let _=w;return d.rtl?"icon-right "+_:"icon-left "+_},async remove(d){const u=this.messages.findIndex(w=>w.id===d.id);this.messages.splice(u,1),typeof d.onClose=="function"&&await d.onClose()},exists(d){return this.messages.findIndex(w=>w.id===d.id)!==-1}}},Ao={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Do=["onMouseover","onMouseout"],Ho={class:"me-auto text-white"},Eo=["onClick"],Lo={class:"toast-body"},Bo=["innerHTML"],qo={key:0,class:"progress m-1",style:{height:"4px"}};function No(d,u,w,_,y,z){return t(),ie(de,null,{default:U(()=>[e("div",Ao,[D(we,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:U(()=>[(t(!0),s(q,null,j(y.messages,S=>(t(),s("div",{key:S.id,class:oe(["toast show mb-2 ms-auto",`border-${S.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:G=>z.pauseProgress(S),onMouseout:G=>z.resumeProgress(S)},[e("div",{class:oe(["toast-header",`bg-${S.type}`])},[e("strong",Ho,[e("i",{class:oe([z.getIconClass(S),"me-1"])},null,2),B(b(S.title),1)]),S.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:G=>z.remove(S)},u[0]||(u[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Eo)):T("",!0)],2),e("div",Lo,[e("div",{innerHTML:S.message},null,8,Bo)]),S.timeOut>0&&S.showProgress?(t(),s("div",qo,[e("div",{class:oe(`bg-${S.type}`),style:Xe({width:z.getCurrentProgress(S)+"%"})},null,6)])):T("",!0)],42,Do))),128))]),_:1})])]),_:1})}const Ro=ke(Oo,[["render",No],["__scopeId","data-v-5272bd9a"]]),zo={name:"AdminLayout",components:{TopNav:Co,BottomNav:Uo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Fo={class:"d-flex flex-column vh-100"};function jo(d,u,w,_,y,z){const S=Q("Toasts"),G=Q("TopNav"),R=Q("router-view"),k=Q("BottomNav");return t(),s("div",Fo,[D(S),D(G),D(R,{class:"flex-grow-1 mb-2"}),u[0]||(u[0]=e("div",{class:"pt-2"},null,-1)),D(k)])}const Go=ke(zo,[["render",jo]]),Yo={class:"d-flex flex-row justify-content-end"},Wo={class:"mt-2 container-md"},Ko={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Jo=["innerHTML"],Qo={class:"text-center"},Xo={class:"row mt-3"},Zo={class:"col-12 col-sm-6 offset-sm-3"},ea={class:"card"},ta={class:"card-body"},sa={class:"card card-body mb-2 d-none"},oa={key:0,class:"fas fa-fw fa-circle-check text-success"},aa={key:1,class:"fas fa-fw fa-times-circle text-danger"},la={key:0,class:"fas fa-fw fa-circle-check text-success"},na={key:1,class:"fas fa-fw fa-times-circle text-danger"},ra={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},ia={class:"col"},da={class:"card h-100 shadow-sm"},ua={class:"card-body"},ca={class:"col"},ma={class:"card h-100 shadow-sm"},fa={class:"card-body"},pa={__name:"Index",setup(d){const{appTitle:u,pageTitle:w,busy:_,isDirty:y,validations:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,generateReturnUrl:$,security:C}=me({appTitle:"ARC AIO",pageTitle:"Dashboard"});be("$config"),ve().user;const W=ue({item:null});ae("805630ed-f288-4f2f-83a4-6c71312f6970"),ae(),ne(async()=>{});const K=async()=>{const P=W;if(!_.value)try{_.value=!0;const l="/api/v1/dashboard/administrators/";P.item=[],await E.get(l).then(O=>{P.item=O.data})}catch(l){R.value=J.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},i=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await E.get("/api/v1/channels/reset/").then(O=>{F.success("Reset All Data","Reset data was successful.")})}catch(l){R.value=J.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{await K()};return(P,l)=>{const O=Q("PageHeader"),a=Q("router-link");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(O,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Yo,[e("button",{onClick:l[0]||(l[0]=V=>c()),class:"ms-2 btn btn-secondary"},l[2]||(l[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Wo,[o(R)?(t(),s("div",Ko,[l[3]||(l[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(R))},null,8,Jo)])):T("",!0),l[26]||(l[26]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),B("UNDER CONSTRUCTION ")],-1)),e("div",Qo,[e("button",{onClick:l[1]||(l[1]=V=>i()),class:"btn btn-warning btn-lg"},l[4]||(l[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),B("Reset All Data ")]))]),e("div",Xo,[e("div",Zo,[e("div",ea,[l[14]||(l[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",ta,[e("ol",null,[l[8]||(l[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[D(a,{to:`/videos/add/${o($)()}`},{default:U(()=>l[5]||(l[5]=[B(" Create a Video. ")])),_:1},8,["to"])]),l[9]||(l[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[D(a,{to:"/program-templates/add"},{default:U(()=>l[6]||(l[6]=[B(" Create Program Template. ")])),_:1}),l[7]||(l[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),l[10]||(l[10]=e("li",null,[B(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),l[11]||(l[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),l[12]||(l[12]=e("li",null," Publish Channel. ",-1)),l[13]||(l[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",sa,[l[17]||(l[17]=B(" Security ")),e("ul",null,[e("li",null,[o(C).isAdministrator?(t(),s("span",oa)):(t(),s("span",aa)),l[15]||(l[15]=B(" Administrator "))]),e("li",null,[o(C).isEmployee?(t(),s("span",la)):(t(),s("span",na)),l[16]||(l[16]=B(" Employee "))])])]),e("div",ra,[e("div",ia,[e("div",da,[l[19]||(l[19]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),B("Human Resources ")])],-1)),e("div",ua,[e("ul",null,[e("li",null,[D(a,{to:"/movies"},{default:U(()=>l[18]||(l[18]=[B(" Employees ")])),_:1})])])])])]),e("div",ca,[e("div",ma,[l[25]||(l[25]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),B("TBD ")])],-1)),e("div",fa,[e("ul",null,[e("li",null,[D(a,{to:"/media-videos"},{default:U(()=>l[20]||(l[20]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>l[21]||(l[21]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>l[22]||(l[22]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>l[23]||(l[23]=[B(" TBD ")])),_:1})]),e("li",null,[D(a,{to:"/movies"},{default:U(()=>l[24]||(l[24]=[B(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},va={class:"d-flex justify-content-end"},ga=["disabled"],ba={class:"input-group"},ya={class:"row row-cols-1 row-cols-sm-2 mt-3"},$a={class:"col text-center mb-2"},wa=["src"],ha={class:"col"},_a={class:"form-floating mb-2"},ka={key:0,class:"d-block invalid-feedback"},Sa={class:"form-floating mb-2"},Ta={class:"row row-cols-sm-2"},Ma={class:"col"},Ca={class:"form-floating mb-2"},Ia={class:"col"},xa={class:"form-floating mb-2"},Pa={class:"row row-cols-sm-2"},Va={class:"col"},Ua={class:"form-floating mb-2"},Oa={class:"col"},Aa={class:"form-floating mb-2"},Da={class:"col"},Ha={class:"form-floating mb-2"},Ea={class:"col"},La={class:"form-floating mb-2"},Ge="YYYY-MM-DD HH:mm",Ba={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"ARC AIO",pageTitle:"Add User"}),L=d,$=k.moment().local();$.format(Ge),$.add(24,"hours").format(Ge);const C=ae("a22de760-358d-4a0e-83ad-2624a5c11f73"),h=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),W={item:{userId:{required:Z.withMessage("User Id is required.",ee),$autoDirty:!0,$lazy:!0}}},K=ye(W,h);ne(async()=>{});const i=async()=>{const P=h;if(!_.value)try{_.value=!0,P.item=null;const l=`/api/v1/users/get-from-entra-id/${C.value}`;await R.get(l).then(O=>{P.item=O.data})}catch(l){S.value=k.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},c=async()=>{const P=h;if(_.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="",await R.post(`/api/v1/users/add-from-entra-id/${P.item.userId}`).then(O=>{E.success("Add User","User added",{onClose:async()=>{const a=`${L.urlView}/${O.data}`;await G.push(a)}})})}catch(O){S.value=k.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{_.value=!1}};return(P,l)=>{const O=Q("router-link"),a=Q("PageHeader"),V=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(a,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",va,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:l[0]||(l[0]=f=>c()),class:"btn btn-primary"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ga),D(O,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(V,{errorMessage:o(S),vuelidate:o(K)},{default:U(()=>[e("div",null,[e("div",null,[e("div",ba,[I(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>C.value=f),onKeyup:l[2]||(l[2]=Pe(f=>i(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[N,C.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[3]||(l[3]=f=>i())},l[14]||(l[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",ya,[e("div",$a,[e("img",{src:h.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,wa)]),e("div",ha,[e("div",_a,[I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=f=>h.item.userId=f),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[N,h.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1)),o(K).item.userId.$error?(t(),s("div",ka,[(t(!0),s(q,null,j(o(K).item.userId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):T("",!0)]),e("div",Sa,[I(e("input",{"onUpdate:modelValue":l[5]||(l[5]=f=>h.item.displayName=f),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[N,h.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Ta,[e("div",Ma,[e("div",Ca,[I(e("input",{"onUpdate:modelValue":l[6]||(l[6]=f=>h.item.givenName=f),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[N,h.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Ia,[e("div",xa,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=f=>h.item.surname=f),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[N,h.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Pa,[e("div",Va,[e("div",Ua,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=f=>h.item.email=f),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[N,h.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Oa,[e("div",Aa,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=f=>h.item.mobilePhone=f),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[N,h.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Da,[e("div",Ha,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=f=>h.item.principalName=f),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[N,h.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Ea,[e("div",La,[I(e("input",{"onUpdate:modelValue":l[11]||(l[11]=f=>h.item.jobTitle=f),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[N,h.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Ue(d){if(!d.cacheKey)throw Error("Cache Key required.");if(!d.baseUrl)throw Error("Base Url required.");const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:F,generateReturnUrl:L,security:$}=me({appTitle:d.appTitle,pageTitle:d.pageTitle}),C=JSON.parse(JSON.stringify(d.filter));C.pageIndex=C.pageIndex||1,C.pageSize=C.pageSize||15,C.sortField=C.sortField||"",C.sortOrder=C.sortOrder||1,C.updateUrl=C.updateUrl||!1,C.items=C.items||[],C.query=C.query||{},C.query.criteria=C.query.criteria||"";const h=ae(C),W=()=>{var r;if(_.value){console.log("Paginated search is currently busy.");return}const a=JSON.parse(localStorage.getItem(d.cacheKey))||{},V=new URLSearchParams(window.location.search),f=h.value;f.query.criteria=V.get("c")||a.criteria||f.query.criteria||"",f.pageIndex=parseInt(V.get("p"),10)||a.pageIndex||f.pageIndex||1,f.pageSize=parseInt(V.get("s"),10)||a.pageSize||f.pageSize||5,f.sortField=V.get("sf")||a.sortField||f.sortField||"",f.sortOrder=parseInt(V.get("so"),10)||a.sortOrder||f.sortOrder||1,f.visible=a.visible||f.visible,(r=d.initializeFilter)==null||r.call(d,h,d.cacheKey)},K=()=>{if(d.getQuery)return d.getQuery(h.value);{const a=h.value;return["?c=",encodeURIComponent(a.query.criteria),"&p=",a.pageIndex,"&s=",a.pageSize,"&sf=",a.sortField,"&so=",a.sortOrder].join("")}},i=()=>{if(d.saveQuery)d.saveQuery(h.value,d.cacheKey);else{const a=h.value;localStorage.setItem(d.cacheKey,JSON.stringify({criteria:a.query.criteria,pageIndex:a.pageIndex,pageSize:a.pageSize,sortField:a.sortField,sortOrder:a.sortOrder,visible:a.visible}))}};return{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:F,generateReturnUrl:L,security:$,filter:h,initializeFilter:W,getQuery:K,saveQuery:i,search:async a=>{var f;let V=h.value;if(_.value){console.log("Paginated search is currently busy.");return}a>0&&(V.pageIndex=a);try{_.value=!0,S.value="";const r=K();V.selected=null,await R(`${d.baseUrl}/${r}`).then(async v=>{var g;Array.isArray(v.data)?V.items=v.data:V=Object.assign(V,v.data);let m=location.pathname;m.endsWith("/")?m+=r:m+="/"+r,V.updateUrl&&window.history.replaceState(r,`${u}-search`,m),V.items.forEach(p=>{p.expand=!1}),i(),(g=d.successAction)==null||g.call(d,h.value)})}catch(r){if(localStorage.removeItem(d.cacheKey),d.failAction)d.failAction(r);else{const v=k.getErrorMessageAsHtml(r);S.value=v,E.error("Error Occured",v)}}finally{_.value=!1,(f=d.finalAction)==null||f.call(d)}},getRowNumber:a=>{const V=h.value;return(V.pageIndex-1)*V.pageSize+(a+1)},setSelected:a=>{const V=h.value;V.selected&&a&&V.selected===a?V.selected=null:(V.selected&&(V.selected.expand=!1),V.selected=a,V.selected.expand=!0)},isSelected:a=>{const V=h.value;return a===null||V.selected===null?!1:a===V.selected}}}const qa={class:"d-flex justify-content-end"},Na={key:0},Ra={class:"ms-1"},za={class:"input-group"},Fa={class:"table-responsive"},ja={class:"table table-hover mb-0"},Ga=["textContent"],Ya=["src"],Wa="/api/v1/users/search",Ka={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,security:$,filter:C,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:P,isSelected:l}=Ue({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${w==null?void 0:w.userId}/users/search`,baseUrl:Wa,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-users",pageTitle:o(y)},{default:U(()=>[e("div",qa,[o($).isAdministrator?(t(),s("div",Na,[D(V,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):T("",!0),e("div",Ra,[e("div",za,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(C).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(C).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Fa,[e("table",ja,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(C).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Ga),e("td",null,[m.photoBase64?(t(),s("img",{key:0,src:m.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ya)):T("",!0)]),e("td",null,[D(V,{to:`${d.urlView}/${m.userId}`,class:"d-inline-block text-truncate"},{default:U(()=>[B(b(m.displayName),1)]),_:2},1032,["to"])]),e("td",null,b(m.email),1),e("td",null,b(m.jobTitle),1)]))),128))]),_:1},512),[[he,o(C).items.length>0]])])]),D(r,{filter:o(C),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ja={class:"d-flex flex-row justify-content-end"},Qa={key:0},Xa={class:"row row-cols-1 row-cols-sm-2 mt-3"},Za={class:"col text-center mb-2"},el=["src"],tl={class:"col"},sl={class:"form-floating mb-2"},ol={class:"form-floating mb-2"},al={class:"row row-cols-sm-2"},ll={class:"col"},nl={class:"form-floating mb-2"},rl={class:"col"},il={class:"form-floating mb-2"},dl={class:"row row-cols-sm-2"},ul={class:"col"},cl={class:"form-floating mb-2"},ml={class:"col"},fl={class:"form-floating mb-2"},pl={class:"col"},vl={class:"form-floating mb-2"},gl={class:"col"},bl={class:"form-floating mb-2"},yl={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"ARC CMS",pageTitle:"View User"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null});ne(async()=>{await c()});const c=async()=>{const O=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const a=`/api/v1/users/get-from-db/${u.id}/`;await J.get(a).then(V=>{O.item=V.data})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await c()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(a=>{L.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-user",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Ja,[o(W).isAdministrator?(t(),s(q,{key:0},[D(V,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:U(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=v=>l()),class:"ms-1 btn btn-warning"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):T("",!0),e("button",{onClick:a[1]||(a[1]=v=>P()),class:"ms-2 btn btn-secondary"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=v=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(r,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Qa,[e("div",null,[e("div",Xa,[e("div",Za,[e("img",{src:i.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,el)]),e("div",tl,[e("div",sl,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=v=>i.item.userId=v),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[N,i.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",ol,[I(e("input",{"onUpdate:modelValue":a[4]||(a[4]=v=>i.item.displayName=v),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[N,i.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",al,[e("div",ll,[e("div",nl,[I(e("input",{"onUpdate:modelValue":a[5]||(a[5]=v=>i.item.givenName=v),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[N,i.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",rl,[e("div",il,[I(e("input",{"onUpdate:modelValue":a[6]||(a[6]=v=>i.item.surname=v),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[N,i.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",dl,[e("div",ul,[e("div",cl,[I(e("input",{"onUpdate:modelValue":a[7]||(a[7]=v=>i.item.email=v),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[N,i.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",ml,[e("div",fl,[I(e("input",{"onUpdate:modelValue":a[8]||(a[8]=v=>i.item.mobilePhone=v),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[N,i.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",pl,[e("div",vl,[I(e("input",{"onUpdate:modelValue":a[9]||(a[9]=v=>i.item.principalName=v),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[N,i.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",gl,[e("div",bl,[I(e("input",{"onUpdate:modelValue":a[10]||(a[10]=v=>i.item.jobTitle=v),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[N,i.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):T("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},$l={class:"d-flex justify-content-end"},wl=["disabled"],hl={class:"row row-cols-1 row-cols-sm-2"},_l={class:"col"},kl={class:"form-floating mb-2"},Sl={key:0,class:"d-block invalid-feedback"},Tl={class:"col"},Ml={class:"form-floating"},Cl={class:"col"},Il={class:"form-floating mb-2"},xl={class:""},Pl={class:"col"},Vl={class:"form-floating mb-2"},Ul={key:0,class:"d-block invalid-feedback"},Ol={class:"col"},Al={class:"form-floating mb-2"},Dl={key:0,class:"d-block invalid-feedback"},Hl={class:""},El={class:"col"},Ll={class:"form-floating mb-2"},Bl={key:0,class:"d-block invalid-feedback"},ql={class:"col"},Nl={class:"input-group mb-2"},Rl={class:"form-floating"},zl=["href"],Fl={key:0,class:"d-block invalid-feedback"},jl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),L=d,$=ue({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),C={item:{title:{title:Z.withMessage("title is required.",ee),$autoDirty:!0,$lazy:!0},durationInMillis:{title:Z.withMessage("durationInMillis is required.",ee),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:Z.withMessage("rawBaseUrl is required.",ee),$autoDirty:!0,$lazy:!0},rawPath:{title:Z.withMessage("rawPath is required.",ee),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:Z.withMessage("hlsBaseUrl is required.",ee),$autoDirty:!0,$lazy:!0},hlsPath:{title:Z.withMessage("hlsPath is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(C,$),W=Oe(()=>{const c=k.moment;if($.durationTime&&$.durationTime!=="00:00:00"&&K($.durationTime)){const P=c().startOf("day"),l=P.format("YYYY-MM-DD ")+$.durationTime,a=c(l).subtract(P);return $.item.durationInMillis=a.valueOf(),$.item.durationInMillis}return 0}),K=c=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(c);ne(async()=>{});const i=async()=>{const c=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const l=k.clone(c.item);l.durationInMillis=W.value;debugger;await R.post("/api/v1/videos/",l).then(O=>{E.success("Add Video","Video added",{onClose:async()=>{const a=`${L.urlView}/${O.data}`;await G.push(a)}})})}catch(l){S.value=k.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}};return(c,P)=>{const l=Q("router-link"),O=Q("PageHeader"),a=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(O,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",$l,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:P[0]||(P[0]=V=>i()),class:"btn btn-primary"},P[8]||(P[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wl),D(l,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>P[9]||(P[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(a,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",hl,[e("div",_l,[e("div",kl,[I(e("input",{"onUpdate:modelValue":P[1]||(P[1]=V=>$.item.title=V),id:"name",class:"form-control",placeholder:"Title"},null,512),[[N,$.item.title]]),P[10]||(P[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Sl,[(t(!0),s(q,null,j(o(h).item.title.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):T("",!0)])]),e("div",Tl,[e("div",Ml,[I(e("input",{"onUpdate:modelValue":P[2]||(P[2]=V=>$.durationTime=V),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[N,$.durationTime]]),P[11]||(P[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Cl,[e("div",Il,[I(e("textarea",{"onUpdate:modelValue":P[3]||(P[3]=V=>$.item.description=V),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[N,$.item.description]]),P[12]||(P[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",xl,[P[15]||(P[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Pl,[e("div",Vl,[I(e("input",{"onUpdate:modelValue":P[4]||(P[4]=V=>$.item.rawBaseUrl=V),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[N,$.item.rawBaseUrl]]),P[13]||(P[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.rawBaseUrl.$error?(t(),s("div",Ul,[(t(!0),s(q,null,j(o(h).item.rawBaseUrl.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):T("",!0)])]),e("div",Ol,[e("div",Al,[I(e("input",{"onUpdate:modelValue":P[5]||(P[5]=V=>$.item.rawPath=V),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[N,$.item.rawPath]]),P[14]||(P[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(h).item.rawPath.$error?(t(),s("div",Dl,[(t(!0),s(q,null,j(o(h).item.rawPath.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):T("",!0)])]),e("div",Hl,[P[19]||(P[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",El,[e("div",Ll,[I(e("input",{"onUpdate:modelValue":P[6]||(P[6]=V=>$.item.hlsBaseUrl=V),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[N,$.item.hlsBaseUrl]]),P[16]||(P[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(h).item.hlsBaseUrl.$error?(t(),s("div",Bl,[(t(!0),s(q,null,j(o(h).item.hlsBaseUrl.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):T("",!0)])]),e("div",ql,[e("div",Nl,[e("div",Rl,[I(e("input",{"onUpdate:modelValue":P[7]||(P[7]=V=>$.item.hlsPath=V),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[N,$.item.hlsPath]]),P[17]||(P[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),$.item.hlsBaseUrl&&$.item.hlsPath?(t(),s("a",{key:0,href:`https://www.hlsplayer.org/play?url=${encodeURIComponent($.item.hlsBaseUrl+$.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},P[18]||(P[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),B("View ")],-1)]),8,zl)):T("",!0)]),o(h).item.hlsPath.$error?(t(),s("div",Fl,[(t(!0),s(q,null,j(o(h).item.hlsPath.$errors,V=>(t(),s("div",{key:V.$uid},b(V.$message),1))),128))])):T("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Gl={key:0,class:"d-flex justify-content-end"},Yl=["disabled"],Wl={key:0},Kl={class:"row row-cols-1 row-cols-sm-2"},Jl={class:"col"},Ql={class:"form-floating mb-2"},Xl={key:0,class:"d-block invalid-feedback"},Zl={class:"col"},en={class:"form-floating mb-2"},tn={key:0,class:"d-block invalid-feedback"},sn={class:"row row-cols-sm-2"},on={class:"col"},an={class:"form-floating mb-2"},ln={class:"form-floating mb-2"},nn={key:0,class:"d-block invalid-feedback"},rn={class:"form-floating mb-2"},dn={key:0,class:"d-block invalid-feedback"},un={class:"col"},cn={class:"form-floating mb-2"},He={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),L=d,$=ue({editorElementId:"editor",htmlContent:"",item:null}),C={item:{title:{required:Z.withMessage("Title is required.",ee),$autoDirty:!0,$lazy:!0},eidr:{required:Z.withMessage("eidr is required.",ee),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:Z.withMessage("eidrPrefix is required.",ee),$autoDirty:!0,$lazy:!0}},htmlContent:{required:Z.withMessage("Content is required.",ee),$autoDirty:!0,$lazy:!0}},h=ye(C,$);ne(async()=>{await i()});const W=()=>{const P=$;var l=document.getElementById(P.editorElementId);l.innerHTML=P.htmlContent},K=P=>{const l=$;l.htmlContent=P.target.innerHTML;var O=document.getElementById(l.editorElementId);O.value=l.htmlContent},i=async()=>{const P=$;if(!_.value)try{_.value=!0,$.item=null,await R.get(`/api/v1/movies/${L.id}`).then(l=>{P.item=l.data,P.htmlContent=P.item.description}),W()}catch(l){S.value=k.getErrorMessageAsHtml(l)}finally{_.value=!1}},c=async()=>{const P=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const O=k.clone(P.item);O.description=P.htmlContent,await R.put("/api/v1/movies",O).then(a=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const V=`${L.urlView}/${L.id}`;await G.push(V)}})})}catch(O){S.value=k.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{_.value=!1}};return(P,l)=>{const O=Q("router-link"),a=Q("PageHeader"),V=Q("PageBody");return t(),s("div",null,[D(a,{"page-icon":"fas fa-fw fa-film",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[$.item?(t(),s("div",Gl,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:l[0]||(l[0]=f=>c()),class:"btn btn-primary"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yl),e("button",{onClick:i,class:"ms-2 btn btn-secondary"},l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(O,{to:`${L.urlView}/${L.id}`,class:"ms-1 btn btn-secondary"},{default:U(()=>l[9]||(l[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):T("",!0)]),_:1},8,["pageTitle"]),D(V,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[$.item?(t(),s("div",Wl,[e("div",Kl,[e("div",Jl,[e("div",Ql,[I(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>$.item.eidrPrefix=f),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[N,$.item.eidrPrefix]]),l[10]||(l[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(h).item.eidrPrefix.$error?(t(),s("div",Xl,[(t(!0),s(q,null,j(o(h).item.eidrPrefix.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):T("",!0)])]),e("div",Zl,[e("div",en,[I(e("input",{"onUpdate:modelValue":l[2]||(l[2]=f=>$.item.eidr=f),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[N,$.item.eidr]]),l[11]||(l[11]=e("label",{for:"title"},"Eidr",-1)),o(h).item.eidr.$error?(t(),s("div",tn,[(t(!0),s(q,null,j(o(h).item.eidr.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):T("",!0)])])]),e("div",sn,[e("div",on,[e("div",an,[I(e("input",{"onUpdate:modelValue":l[3]||(l[3]=f=>$.item.releaseYear=f),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[N,$.item.releaseYear]]),l[12]||(l[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",ln,[I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=f=>$.item.title=f),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[N,$.item.title]]),l[13]||(l[13]=e("label",{for:"title"},"Title",-1)),o(h).item.title.$error?(t(),s("div",nn,[(t(!0),s(q,null,j(o(h).item.title.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):T("",!0)])])]),e("div",null,[e("div",rn,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:l[5]||(l[5]=f=>K(f))},null,32),l[14]||(l[14]=e("label",{for:"editor"},"Content",-1)),o(h).htmlContent.$error?(t(),s("div",dn,[(t(!0),s(q,null,j(o(h).htmlContent.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):T("",!0)])]),e("div",un,[e("div",cn,[I(e("textarea",{"onUpdate:modelValue":l[6]||(l[6]=f=>$.item.metadata=f),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[N,$.item.metadata]]),l[15]||(l[15]=e("label",{for:"title"},"Metadata",-1))])])])):T("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},mn={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function fn(d,u,w,_,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const pn=ke(mn,[["render",fn]]),vn={class:"d-flex justify-content-end"},gn={class:"ms-1"},bn={class:"input-group"},yn={class:"table-responsive"},$n={class:"table table-hover mb-0"},wn=["textContent"],hn={class:"text-end ms-sm-5 pe-sm-5"},_n="/api/v1/videos/search",kn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,security:$,filter:C,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:P,isSelected:l}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${w==null?void 0:w.userId}/videos/search`,baseUrl:_n,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:U(()=>[e("div",vn,[D(V,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",gn,[e("div",bn,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(C).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(C).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",yn,[e("table",$n,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(C).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,wn),e("td",null,[D(V,{to:`${d.urlView}/${m.videoId}`,class:"d-inline-block text-truncate"},{default:U(()=>[B(b(m.title),1)]),_:2},1032,["to"])]),e("td",null,b(m.description),1),e("td",hn,[e("div",null,b(o(J).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[he,o(C).items.length>0]])])]),D(r,{filter:o(C),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Sn={class:"d-flex flex-row justify-content-end"},Tn={key:0},Mn={class:"row row-cols-sm-2"},Cn={class:"col"},In={class:"form-floating mb-2"},xn={class:"col"},Pn={class:"form-floating mb-2"},Vn={class:"col"},Un={class:"form-floating mb-2"},On={class:"row row-cols-sm-2"},An={class:"col"},Dn={class:"form-floating mb-2"},Hn={class:"col"},En={class:"form-floating mb-2"},Ln={class:"row row-cols-sm-2"},Bn={class:"col"},qn={class:"form-floating mb-2"},Nn={class:"col"},Rn={class:"form-floating mb-2"},zn={class:"row row-cols-sm-2"},Fn={class:"col"},jn={class:"form-floating mb-2"},Gn={class:"col"},Yn={class:"form-floating mb-2"},Wn={class:"table-responsive"},Kn={class:"table table-hover mb-0 caption-top"},Jn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null});ne(async()=>{await c()});const c=async()=>{const O=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const a=`/api/v1/videos/${u.id}/`;await J.get(a).then(V=>{O.item=V.data,O.item.duration=F.moment.utc(O.item.durationInMillis).format("HH:mm:ss")})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}},P=async()=>{await c()},l=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(a=>{L.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(a){k.value=F.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{y.value=!1}}};return(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Sn,[o(W).isAdministrator?(t(),s(q,{key:0},[D(V,{to:`${d.urlEdit}/${d.id}`,class:"ms-2 btn btn-primary d-none"},{default:U(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=v=>l()),class:"ms-1 btn btn-warning"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):T("",!0),e("button",{onClick:a[1]||(a[1]=v=>P()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[2]||(a[2]=v=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(r,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Tn,[e("div",null,[e("div",Mn,[e("div",Cn,[e("div",In,[I(e("input",{"onUpdate:modelValue":a[3]||(a[3]=v=>i.item.title=v),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[N,i.item.title]]),a[16]||(a[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",xn,[e("div",Pn,[I(e("input",{"onUpdate:modelValue":a[4]||(a[4]=v=>i.item.duration=v),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[N,i.item.duration]]),a[17]||(a[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",Vn,[e("div",Un,[I(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=v=>i.item.description=v),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[N,i.item.description]]),a[18]||(a[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",On,[e("div",An,[e("div",Dn,[I(e("input",{"onUpdate:modelValue":a[6]||(a[6]=v=>i.item.rawBaseUrl=v),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[N,i.item.rawBaseUrl]]),a[19]||(a[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Hn,[e("div",En,[I(e("input",{"onUpdate:modelValue":a[7]||(a[7]=v=>i.item.rawPath=v),class:"form-control",id:"rawPath",disabled:""},null,512),[[N,i.item.rawPath]]),a[20]||(a[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Ln,[e("div",Bn,[e("div",qn,[I(e("input",{"onUpdate:modelValue":a[8]||(a[8]=v=>i.item.hlsBaseUrl=v),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[N,i.item.hlsBaseUrl]]),a[21]||(a[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Nn,[e("div",Rn,[I(e("input",{"onUpdate:modelValue":a[9]||(a[9]=v=>i.item.hlsPath=v),class:"form-control",id:"hlsPath",disabled:""},null,512),[[N,i.item.hlsPath]]),a[22]||(a[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",zn,[e("div",Fn,[e("div",jn,[I(e("input",{"onUpdate:modelValue":a[10]||(a[10]=v=>i.item.dashBaseUrl=v),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[N,i.item.dashBaseUrl]]),a[23]||(a[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Gn,[e("div",Yn,[I(e("input",{"onUpdate:modelValue":a[11]||(a[11]=v=>i.item.dashPath=v),class:"form-control",id:"dashPath",disabled:""},null,512),[[N,i.item.dashPath]]),a[24]||(a[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Wn,[e("table",Kn,[a[25]||(a[25]=e("caption",null,"VOD Sources",-1)),a[26]||(a[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.vodSources,(v,m)=>(t(),s("tr",{key:v.vodSourceId},[e("td",null,b(m+1),1),e("td",null,[D(V,{to:`${u.urlViewVodSource}/${encodeURIComponent(v.vodSourceId)}/${o(h)()}`},{default:U(()=>[B(b(v.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[he,i.item.vodSources.length>0]])])])])):T("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Qn={class:"d-flex justify-content-end"},Xn=["disabled"],Zn={class:"form-floating mb-2"},er={key:0,class:"d-block invalid-feedback"},tr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),L=d,$=ue({lookups:{},item:{name:null}}),C={item:{name:{required:Z.withMessage("name is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(C,$);ne(async()=>{});const W=async()=>{const K=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const c=k.clone(K.item);await R.post("/api/v1/sourcegroups/",c).then(P=>{E.success("Add Source Group","Source group added.",{onClose:async()=>{const l=`${L.urlView}/${P.data}`;await G.push(l)}})})}catch(c){S.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}};return(K,i)=>{const c=Q("router-link"),P=Q("PageHeader"),l=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(P,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Qn,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:i[0]||(i[0]=O=>W()),class:"btn btn-primary"},i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xn),D(c,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(l,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Zn,[I(e("input",{"onUpdate:modelValue":i[1]||(i[1]=O=>$.item.name=O),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[N,$.item.name]]),i[4]||(i[4]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",er,[(t(!0),s(q,null,j(o(h).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):T("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},sr={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function or(d,u,w,_,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const ar=ke(sr,[["render",or]]),lr={class:"d-flex justify-content-end"},nr={class:"ms-1"},rr={class:"input-group"},ir={class:"table-responsive"},dr={class:"table table-hover mb-0"},ur=["textContent"],cr={key:0,class:"fas fa-fw fa-check-circle text-success"},mr="/api/v1/sourcegroups/search",fr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,security:$,filter:C,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:P,isSelected:l}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${w==null?void 0:w.userId}/source-groups/search`,baseUrl:mr,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(y)},{default:U(()=>[e("div",lr,[D(V,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",nr,[e("div",rr,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(C).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(C).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",ir,[e("table",dr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(C).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,ur),e("td",null,[D(V,{to:`${d.urlView}/${m.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",cr)):T("",!0),B(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.channelOutputs),1),e("td",null,b(m.packageConfigurations),1)]))),128))]),_:1},512),[[he,o(C).items.length>0]])])]),D(r,{filter:o(C),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},pr={class:"d-flex flex-row justify-content-end"},vr={key:0},gr={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},br={class:"nav-item",role:"presentation"},yr={class:"nav-item",role:"presentation"},$r={class:"nav-item",role:"presentation"},wr={class:"tab-content",id:"myTabContent"},hr={class:"mt-2"},_r={class:"col"},kr={class:"form-floating mb-2"},Sr={class:"mt-2"},Tr={class:"table-responsive border"},Mr={class:"table table-hover mb-0"},Cr={class:"mt-2"},Ir={class:"table-responsive border"},xr={class:"table table-hover mb-0"},Pr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ne(async()=>{await a(),c.value=F.getPageTab("sourceGroup")||"information-tab"});const P=r=>{F.setPageTab("sourceGroup",r),c.value=r},l=r=>r!==c.value?"":"active",O=r=>r!==c.value?"":"show active",a=async()=>{const r=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const v=`/api/v1/sourcegroups/${u.id}/`;await J.get(v).then(m=>{r.item=m.data})}catch(v){k.value=F.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{y.value=!1}},V=async()=>{if(!y.value)try{y.value=!0,k.value="";const r=`/api/v1/sourcegroups/${u.id}/`;await J.delete(r).then(v=>{L.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const m=`${u.urlMain}/`;await E.push(m)}})})}catch(r){k.value=F.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{y.value=!1}},f=async()=>{await a()};return(r,v)=>{const m=Q("PageHeader"),g=Q("router-link"),p=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",pr,[e("button",{onClick:v[0]||(v[0]=Y=>V()),class:"ms-1 btn btn-warning"},v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:v[1]||(v[1]=Y=>f()),class:"ms-2 btn btn-secondary"},v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:v[2]||(v[2]=Y=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},v[9]||(v[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(p,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",vr,[e("div",null,[e("ul",gr,[e("li",br,[e("button",{onClick:v[3]||(v[3]=Y=>P("information-tab")),class:oe([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",yr,[e("button",{onClick:v[4]||(v[4]=Y=>P("channelOutputs-tab")),class:oe([l("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",$r,[e("button",{onClick:v[5]||(v[5]=Y=>P("packageConfigurations-tab")),class:oe([l("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",wr,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",hr,[e("div",_r,[e("div",kr,[I(e("input",{"onUpdate:modelValue":v[6]||(v[6]=Y=>i.item.name=Y),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),v[10]||(v[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:oe([O("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Sr,[e("div",Tr,[e("table",Mr,[v[11]||(v[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.channelOutputs,(Y,x)=>(t(),s("tr",{key:Y.channelOutputId},[e("td",null,b(x+1),1),e("td",null,[D(g,{to:`${d.urlViewChannel}/${Y.channelId}/${o(h)()}`},{default:U(()=>[B(b(Y.manifestName),1)]),_:2},1032,["to"])]),e("td",null,b(Y.outputType),1)]))),128))]),_:1},512),[[he,i.item.channelOutputs.length>0]])])])])],2),e("div",{class:oe([O("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Cr,[e("div",Ir,[e("table",xr,[v[12]||(v[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Vod"),e("th",null,"Type")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.packageConfigurations,(Y,x)=>(t(),s("tr",{key:Y.packageConfigurationId},[e("td",null,b(x+1),1),e("td",null,[D(g,{to:`${d.urlViewVodSource}/${Y.vodSourceId}/${o(h)()}`},{default:U(()=>[B(b(Y.path),1)]),_:2},1032,["to"])]),e("td",null,b(Y.type),1)]))),128))]),_:1},512),[[he,i.item.packageConfigurations.length>0]])])])])],2)])])])):T("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Vr={class:"d-flex justify-content-end"},Ur=["disabled"],Or={class:"form-floating mb-2"},Ar={key:0,class:"d-block invalid-feedback"},Dr={class:"form-floating mb-2"},Hr={key:0,class:"d-block invalid-feedback"},Er={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),L=d,$=ue({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),C={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:Z.withMessage("HTTP Configuration Base Url is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(C,$);ne(async()=>{});const W=async()=>{const K=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const c=k.clone(K.item);await R.post("/api/v1/sourcelocations/",c).then(P=>{E.success("Add Source Location","Source location added.",{onClose:async()=>{const l=`${L.urlView}/${P.data}`;await G.push(l)}})})}catch(c){S.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{_.value=!1}};return(K,i)=>{const c=Q("router-link"),P=Q("PageHeader"),l=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(P,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Vr,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:i[0]||(i[0]=O=>W()),class:"btn btn-primary"},i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ur),D(c,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>i[4]||(i[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(l,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Or,[I(e("input",{"onUpdate:modelValue":i[1]||(i[1]=O=>$.item.name=O),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[N,$.item.name]]),i[5]||(i[5]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Ar,[(t(!0),s(q,null,j(o(h).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):T("",!0)]),e("div",Dr,[I(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=O=>$.item.httpConfigurationBaseUrl=O),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[N,$.item.httpConfigurationBaseUrl]]),i[6]||(i[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(h).item.httpConfigurationBaseUrl.$error?(t(),s("div",Hr,[(t(!0),s(q,null,j(o(h).item.httpConfigurationBaseUrl.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):T("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Lr={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Br(d,u,w,_,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const qr=ke(Lr,[["render",Br]]),Nr={class:"d-flex justify-content-end"},Rr={class:"ms-1"},zr={class:"input-group"},Fr={class:"table-responsive"},jr={class:"table table-hover mb-0"},Gr=["textContent"],Yr={key:0,class:"fas fa-fw fa-check-circle text-success"},Wr="/api/v1/sourcelocations/search",Kr={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,security:$,filter:C,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:P,isSelected:l}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${w==null?void 0:w.userId}/source-locations/search`,baseUrl:Wr,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-building",pageTitle:o(y)},{default:U(()=>[e("div",Nr,[D(V,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Rr,[e("div",zr,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(C).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(C).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Fr,[e("table",jr,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(C).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Gr),e("td",null,[D(V,{to:`${d.urlView}/${m.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",Yr)):T("",!0),B(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[he,o(C).items.length>0]])])]),D(r,{filter:o(C),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Jr={class:"d-flex flex-row justify-content-end"},Qr={key:0},Xr={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Zr={class:"nav-item",role:"presentation"},ei={class:"nav-item",role:"presentation"},ti={class:"nav-item",role:"presentation"},si={class:"tab-content",id:"myTabContent"},oi={class:"mt-2"},ai={class:"col"},li={class:"form-floating mb-2"},ni={class:"col"},ri={class:"form-floating mb-2"},ii={class:"mt-2"},di={class:"table-responsive border"},ui={class:"table table-hover mb-0"},ci={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},mi={class:"mt-2"},fi={class:"table-responsive border"},pi={class:"table table-hover mb-0"},vi={key:0,class:"fas fa-fw fa-check-circle text-success"},gi={key:1},bi={key:2},yi={key:0},$i={class:"badge bg-info"},wi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ne(async()=>{await a(),c.value=F.getPageTab("sourceLocation")||"information-tab"});const P=v=>{F.setPageTab("sourceLocation",v),c.value=v},l=v=>v!==c.value?"":"active",O=v=>v!==c.value?"":"show active",a=async()=>{const v=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const m=`/api/v1/sourcelocations/${u.id}/`;await J.get(m).then(g=>{v.item=g.data})}catch(m){k.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}},V=async()=>{await a()},f=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/sourcelocations/${u.id}/publish/`).then(m=>{L.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),y.value=!1,await V()}catch(m){k.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}}},r=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/sourcelocations/unpublish/${u.id}/`).then(m=>{L.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),y.value=!1,await V()}catch(m){k.value=F.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}}};return(v,m)=>{const g=Q("PageHeader"),p=Q("router-link"),Y=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(g,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Jr,[i.item?(t(),s(q,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=x=>r()),class:"ms-1 btn btn-warning"},m[9]||(m[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=x=>f()),class:"ms-1 btn btn-primary"},m[10]||(m[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):T("",!0),e("button",{onClick:m[2]||(m[2]=x=>V()),class:"ms-2 btn btn-secondary"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=x=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(Y,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Qr,[e("div",null,[e("ul",Xr,[e("li",Zr,[e("button",{onClick:m[4]||(m[4]=x=>P("information-tab")),class:oe([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ei,[e("button",{onClick:m[5]||(m[5]=x=>P("vodSources-tab")),class:oe([l("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",ti,[e("button",{onClick:m[6]||(m[6]=x=>P("programs-tab")),class:oe([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",si,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",oi,[e("div",ai,[e("div",li,[I(e("input",{"onUpdate:modelValue":m[7]||(m[7]=x=>i.item.name=x),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),m[13]||(m[13]=e("label",{for:"name"},"Name",-1))])]),e("div",ni,[e("div",ri,[I(e("input",{"onUpdate:modelValue":m[8]||(m[8]=x=>i.item.httpConfigurationBaseUrl=x),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[N,i.item.httpConfigurationBaseUrl]]),m[14]||(m[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:oe([O("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",ii,[e("div",di,[e("table",ui,[m[15]||(m[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.vodSources,(x,se)=>(t(),s("tr",{key:x.vodSourceId},[e("td",null,b(se+1),1),e("td",null,[x.arn?(t(),s("span",ci)):T("",!0),D(p,{to:`${u.urlViewVodSource}/${encodeURIComponent(x.vodSourceId)}/${o(h)()}`},{default:U(()=>[B(b(x.name),1)]),_:2},1032,["to"])]),e("td",null,[D(p,{to:`${u.urlViewVideo}/${encodeURIComponent(x.video.videoId)}/${o(h)()}`},{default:U(()=>[B(b(x.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,b(o(F).moment.utc(x.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,i.item.vodSources.length>0]])])])])],2),e("div",{class:oe([O("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",mi,[e("div",fi,[e("table",pi,[m[16]||(m[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Relative Program"),e("th",null,"Date Scheduled Start"),e("th",null,"Channel")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.programs,(x,se)=>(t(),s("tr",{key:x.programId},[e("td",null,b(se+1),1),e("td",null,[x.arn?(t(),s("span",vi)):T("",!0),B(" "+b(x.name)+" ("+b(x.transitionType)+") ",1),x.startOffsetMillis>0?(t(),s("div",gi," Start Offset: "+b(x.startOffsetMillis/6e4)+" seconds ",1)):T("",!0),x.endOffsetMillis>0?(t(),s("div",bi," End Offset: "+b(x.endOffsetMillis/6e4)+" seconds ",1)):T("",!0)]),e("td",null,[x.relativeProgram?(t(),s("div",yi,b(x.relativeProgram.name)+" ["+b(x.relativePosition)+"] ",1)):T("",!0)]),e("td",null,[B(b(o(F).moment(x.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",$i,b(o(F).moment(x.dateScheduledStart).fromNow()),1)])]),e("td",null,[D(p,{to:`${u.urlViewChannel}/${encodeURIComponent(x.channel.channelId)}/${o(h)()}`},{default:U(()=>[B(b(x.channel.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[he,i.item.programs.length>0]])])])])],2)])])])):T("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},hi={class:"d-flex justify-content-end"},_i=["disabled"],ki={class:"col"},Si={class:"form-floating mb-2"},Ti={key:0,class:"d-block invalid-feedback"},Mi={class:"row row-cols-1 row-cols-sm-2"},Ci={class:"col"},Ii={class:"form-floating mb-2"},xi=["value"],Pi={key:0,class:"d-block invalid-feedback"},Vi={class:"col"},Ui={class:"form-floating mb-2"},Oi=["disabled"],Ai=["value"],Di={key:0,class:"d-block invalid-feedback"},Hi={key:0},Ei={class:"d-flex flex-row justify-content-between"},Li={key:0,class:"d-inline invalid-feedback"},Bi={class:"table-responsive border mt-1"},qi={class:"table mb-0 caption-top"},Ni={class:"input-group mb-1"},Ri=["onUpdate:modelValue"],zi=["onUpdate:modelValue"],Fi=["value"],ji=["onUpdate:modelValue"],Gi=["onClick"],Yi={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),L=d,$=ue({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),C=(V,f,r)=>V.length>0,h={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},videoId:{required:Z.withMessage("Video is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("Source Locaton is required.",ee),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:Z.withMessage("PackageConfigurations is required.",C),$each:Z.forEach({path:{required:Z.withMessage("Path is required.",ee)},sourceGroupId:{required:Z.withMessage("Source Group is required.",ee)}}),$autoDirty:!0,$lazy:!0}}},W=ye(h,$);ne(async()=>{await K(),await i()});const K=async()=>{try{await R.get("/api/v1/sourcegroups/lookup/").then(f=>{$.lookups.sourceGroups=f.data})}catch(V){S.value=k.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{}},i=async()=>{try{if(await R.get("/api/v1/sourcelocations/lookup/").then(f=>{$.lookups.sourceLocations=f.data}),$.lookups.sourceLocations.length===1){const f=$.lookups.sourceLocations[0];$.selected.sourceLocation=f,await c()}}catch(V){S.value=k.getErrorMessageAsHtml(V),window.scrollTo(0,0)}finally{}},c=async()=>{const V=$.selected.sourceLocation;$.item.sourceLocationId=V.id,await P(V.baseUrl)},P=async V=>{try{const f=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(V)}`;await R.get(f).then(r=>{$.lookups.videos=r.data,$.lookups.videos.length===1&&($.item.videoId=$.lookups.videos[0].id)})}catch(f){S.value=k.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},l=async()=>{const V=$;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const r=k.clone(V.item);r.videoId=r.video.id,delete r.video,await R.post("/api/v1/vodSources/",r).then(v=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const m=`${L.urlView}/${v.data}`;await G.push(m)}})})}catch(r){S.value=k.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{_.value=!1}},O=()=>{const V={path:"",sourceGroupId:null,type:"HLS"},f=$.item.video;f&&(V.path=f.hlsPath),$.item.packageConfigurations.push(V)},a=V=>{$.item.packageConfigurations.splice(V,1)};return(V,f)=>{const r=Q("router-link"),v=Q("PageHeader"),m=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(v,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",hi,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:f[0]||(f[0]=g=>l()),class:"btn btn-primary"},f[6]||(f[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_i),D(r,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(m,{errorMessage:o(S),vuelidate:o(W)},{default:U(()=>[e("div",null,[e("div",ki,[e("div",Si,[I(e("input",{"onUpdate:modelValue":f[1]||(f[1]=g=>$.item.name=g),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,$.item.name]]),f[8]||(f[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Ti,[(t(!0),s(q,null,j(o(W).item.name.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):T("",!0)])]),e("div",Mi,[e("div",Ci,[e("div",Ii,[I(e("select",{"onUpdate:modelValue":f[2]||(f[2]=g=>$.selected.sourceLocation=g),onChange:f[3]||(f[3]=g=>c()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j($.lookups.sourceLocations,g=>(t(),s("option",{value:g},b(g.name),9,xi))),256))],544),[[pe,$.selected.sourceLocation]]),f[9]||(f[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Pi,[(t(!0),s(q,null,j(o(W).item.sourceLocationId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):T("",!0)])]),e("div",Vi,[e("div",Ui,[I(e("select",{"onUpdate:modelValue":f[4]||(f[4]=g=>$.item.video=g),onChange:f[5]||(f[5]=g=>$.item.videoId=$.item.video.id),class:"form-select",id:"videoId",disabled:$.item.packageConfigurations.length>0},[(t(!0),s(q,null,j($.lookups.videos,g=>(t(),s("option",{value:g},b(g.name),9,Ai))),256))],40,Oi),[[pe,$.item.video]]),f[10]||(f[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",Di,[(t(!0),s(q,null,j(o(W).item.videoId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):T("",!0)])])]),f[17]||(f[17]=e("hr",null,null,-1)),$.item.videoId?(t(),s("div",Hi,[e("div",Ei,[e("fieldset",null,[e("legend",null,[f[12]||(f[12]=B(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Li,f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):T("",!0)])]),e("button",{onClick:O,class:"btn btn-outline-primary"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Package Configuration ")]))]),e("div",Bi,[e("table",qi,[f[16]||(f[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j($.item.packageConfigurations,(g,p)=>(t(),s("tr",null,[e("td",null,b(p+1),1),e("td",null,[e("div",Ni,[I(e("input",{"onUpdate:modelValue":Y=>g.path=Y,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Ri),[[N,g.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(q,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[p].path,Y=>(t(),s("div",{key:Y,class:"d-block invalid-feedback"},b(Y.$message),1))),128)):T("",!0)]),e("td",null,[e("div",null,[I(e("select",{"onUpdate:modelValue":Y=>g.sourceGroupId=Y,class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,j($.lookups.sourceGroups,Y=>(t(),s("option",{value:Y.id},b(Y.name),9,Fi))),256))],8,zi),[[pe,g.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(q,{key:0},j(o(W).item.packageConfigurations.$each.$response.$errors[p].path,Y=>(t(),s("div",{key:Y,class:"d-block invalid-feedback"},b(Y.$message),1))),128)):T("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":Y=>g.type=Y,class:"form-select",id:"type"},f[14]||(f[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,ji),[[pe,g.type]])]),e("td",null,[e("button",{onClick:Y=>a(p),class:"btn btn-outline-warning"},f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gi)])]))),256))])])])])):T("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Wi={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ki(d,u,w,_,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Ji=ke(Wi,[["render",Ki]]),Qi={class:"d-flex justify-content-end"},Xi={key:0},Zi={class:"ms-1"},ed={class:"input-group"},td={class:"table-responsive"},sd={class:"table table-hover mb-0"},od=["textContent"],ad={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},ld={class:"small"},nd="/api/v1/vodsources/search",rd={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,closeWithReturnUrl:$,generateReturnUrl:C,security:h,filter:W,initializeFilter:K,getQuery:i,saveQuery:c,search:P,getRowNumber:l,setSelected:O,isSelected:a}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${w==null?void 0:w.userId}/vod-sources/search`,baseUrl:nd,filter:{updateUrl:!0}});return ne(async()=>{K(),await P()}),(V,f)=>{const r=Q("router-link"),v=Q("PageHeader"),m=Q("m-pagination"),g=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(v,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(y)},{default:U(()=>[e("div",Qi,[o(h).isAdministrator?(t(),s("div",Xi,[D(r,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):T("",!0),D(r,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>f[4]||(f[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zi,[e("div",ed,[I(e("input",{"onUpdate:modelValue":f[0]||(f[0]=p=>o(W).query.criteria=p),onKeyup:f[1]||(f[1]=Pe(p=>o(P)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:f[2]||(f[2]=p=>o(P)(1))},f[5]||(f[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(R)},{default:U(()=>[e("div",td,[e("table",sd,[f[6]||(f[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(W).items,(p,Y)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(l)(Y)),class:"text-center"},null,8,od),e("td",null,[D(r,{to:`${d.urlView}/${p.vodSourceId}`,class:"d-inline-block text-truncate"},{default:U(()=>[p.arn?(t(),s("span",ad)):T("",!0),B(b(p.name),1)]),_:2},1032,["to"])]),e("td",null,[D(r,{to:`${d.urlViewVideo}/${encodeURIComponent(p.video.videoId)}/${o(C)()}`},{default:U(()=>[B(b(p.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",ld,"Duration: "+b(o(J).moment.utc(p.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,o(W).items.length>0]])])]),D(m,{filter:o(W),search:o(P),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},id=["id"],dd={class:"modal-dialog modal-xl modal-fullscreen-md-down"},ud={class:"modal-content"},cd={class:"modal-header bg-primary text-white"},md={class:"modal-title",id:"exampleModalLabel"},fd={class:"modal-body"},pd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vd=["innerHTML"],gd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bd={class:"container"},yd={class:"col"},$d={class:"form-floating mb-2"},wd=["value"],hd={key:0,class:"d-block invalid-feedback"},_d={class:"col"},kd={class:"form-floating mb-2"},Sd={key:0,class:"d-block invalid-feedback"},Td={class:"col"},Md={class:"form-floating mb-2"},Cd={key:0,class:"d-block invalid-feedback"},Id={class:"modal-footer"},xd=["disabled"],Pd={__name:"_addPackageConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=w;ae();const K=ae("modalAddChannelOutput"),i=ue({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),c={item:{sourceGroupId:{required:Z.withMessage("Source Group is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("VOD Source is required.",ee),$autoDirty:!0,$lazy:!0},path:{required:Z.withMessage("Path is required.",ee),$autoDirty:!0,$lazy:!0},type:{required:Z.withMessage("Type is required.",ee),$autoDirty:!0,$lazy:!0}}},P=ye(c,i);ne(async()=>{P.value.$reset()});const l=async()=>{await O()},O=async()=>{try{await F.get("/api/v1/sourceGroups/lookup/").then(v=>{i.lookups.sourceGroups=v.data,i.lookups.sourceGroups.length===1&&(i.item.sourceGroupId=i.lookups.sourceGroups[0].id)})}catch(r){E.value=L.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},a=async r=>{const v=i;G.value.clear(),E.value="",v.lookups={sourceGroups:[]},v.item={sourceGroupId:null,vodSourceId:r,path:null,type:null},await l(),P.value.$reset();var m=document.getElementById(K.value),g=$e.getOrCreateInstance(m);g.show()},V=async()=>{var r=document.getElementById(K.value),v=$e.getOrCreateInstance(r);v.hide(),W("refresh")},f=async()=>{const r=i;if(z.value)return;const v=await P.value.$validate();debugger;if(!v){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const m=r.item;await F.post("/api/v1/vodSources/package-configurations/",m).then(g=>{$.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await V()}catch(m){E.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:a,close:V}),(r,v)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",dd,[e("div",ud,[e("div",cd,[e("h5",md,b(o(_))+" - "+b(o(y)),1),v[4]||(v[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",fd,[o(E)?(t(),s("div",pd,[v[5]||(v[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,vd)])):T("",!0),o(G).size>0?(t(),s("div",gd,[v[6]||(v[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),m=>(t(),s("li",null,b(m),1))),256))])])):T("",!0),e("div",bd,[e("div",yd,[e("div",$d,[I(e("select",{"onUpdate:modelValue":v[0]||(v[0]=m=>i.item.sourceGroupId=m),class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,j(i.lookups.sourceGroups,m=>(t(),s("option",{value:m.id},b(m.name),9,wd))),256))],512),[[pe,i.item.sourceGroupId]]),v[7]||(v[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(P).item.sourceGroupId.$error?(t(),s("div",hd,[(t(!0),s(q,null,j(o(P).item.sourceGroupId.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):T("",!0)])]),e("div",_d,[e("div",kd,[I(e("select",{"onUpdate:modelValue":v[1]||(v[1]=m=>i.item.type=m),class:"form-select",id:"type"},v[8]||(v[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,i.item.type]]),v[9]||(v[9]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(P).item.type.$error?(t(),s("div",Sd,[(t(!0),s(q,null,j(o(P).item.type.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):T("",!0)])]),e("div",Td,[e("div",Md,[I(e("input",{"onUpdate:modelValue":v[2]||(v[2]=m=>i.item.path=m),class:"form-control",id:"path"},null,512),[[N,i.item.path]]),v[10]||(v[10]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(P).item.path.$error?(t(),s("div",Cd,[(t(!0),s(q,null,j(o(P).item.path.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):T("",!0)])])])]),e("div",Id,[e("button",{disabled:o(P).$dirty&&o(P).$invalid,onClick:v[3]||(v[3]=m=>f()),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xd),v[12]||(v[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,id))}},Vd=["id"],Ud={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Od={class:"modal-content"},Ad={class:"modal-header bg-primary text-white"},Dd={class:"modal-title",id:"exampleModalLabel"},Hd={class:"modal-body"},Ed={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ld=["innerHTML"],Bd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qd={class:"container"},Nd={class:"col"},Rd={class:"form-floating mb-2"},zd={class:"col"},Fd={class:"form-floating mb-2"},jd={key:0,class:"d-block invalid-feedback"},Gd={class:"col"},Yd={class:"form-floating mb-2"},Wd={key:0,class:"d-block invalid-feedback"},Kd={class:"col"},Jd={class:"form-floating mb-2"},Qd={key:0,class:"d-block invalid-feedback"},Xd={class:"modal-footer"},Zd=["disabled"],eu={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=w,K=ae(),i=ae("modalAddPlaybackConfiguration"),c=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),P={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:Z.withMessage("adDecisionServerUrl is required.",ee),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:Z.withMessage("videoContentSourceUrl is required.",ee),$autoDirty:!0,$lazy:!0}}},l=ye(P,c);ne(async()=>{l.value.$reset()});const O=async(f,r)=>{K.value=f;const v=c;G.value.clear(),E.value="";const m=r,g=m.lastIndexOf("/"),p=m.substring(0,g),Y="ad_campaign_"+m.substring(g+1).replace(".","_");v.item={name:Y,originalVideoContentSourceUrl:r,videoContentSourceUrl:p,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var x=document.getElementById(i.value),se=$e.getOrCreateInstance(x);se.show()},a=async()=>{var f=document.getElementById(i.value),r=$e.getOrCreateInstance(f);r.hide(),W("refresh")},V=async()=>{const f=c;if(z.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const v=f.item;v.vodSourceId=K.value,await F.post("/api/v1/playbackconfigurations/vodsource",v).then(m=>{$.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await a()}catch(v){E.value=L.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:O,close:a}),(f,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ud,[e("div",Od,[e("div",Ad,[e("h5",Dd,b(o(_))+" - "+b(o(y)),1),r[5]||(r[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Hd,[o(E)?(t(),s("div",Ed,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Ld)])):T("",!0),o(G).size>0?(t(),s("div",Bd,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),v=>(t(),s("li",null,b(v),1))),256))])])):T("",!0),e("div",qd,[e("div",Nd,[e("div",Rd,[I(e("input",{"onUpdate:modelValue":r[0]||(r[0]=v=>c.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[N,c.item.originalVideoContentSourceUrl]]),r[8]||(r[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",zd,[e("div",Fd,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",jd,[(t(!0),s(q,null,j(o(l).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):T("",!0)])]),e("div",Gd,[e("div",Yd,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>c.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[N,c.item.videoContentSourceUrl]]),r[10]||(r[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),r[11]||(r[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",Wd,[(t(!0),s(q,null,j(o(l).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):T("",!0)])]),e("div",Kd,[e("div",Jd,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>c.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[N,c.item.adDecisionServerUrl]]),r[12]||(r[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",Qd,[(t(!0),s(q,null,j(o(l).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):T("",!0)])])])]),e("div",Xd,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:r[4]||(r[4]=v=>V()),class:"btn btn-primary",type:"button"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zd),r[14]||(r[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vd))}},tu={class:"d-flex flex-row justify-content-end"},su={key:0},ou={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},au={class:"nav-item",role:"presentation"},lu={class:"nav-item",role:"presentation"},nu={class:"nav-item",role:"presentation"},ru={class:"tab-content",id:"myTabContent"},iu={class:"mt-2"},du={class:"col"},uu={class:"form-floating mb-2"},cu={key:0,class:"table-responsive border mt-2"},mu={class:"table mb-0"},fu={class:"row"},pu={class:"col-sm-9"},vu={key:0,class:"fas fa-fw fa-check-circle text-success"},gu={class:"col-sm-9"},bu={class:"col-sm-9"},yu={class:"text-break border p-2"},$u={class:"col-sm-3"},wu={class:"d-flex flex-row justify-content-between"},hu=["href"],_u={class:"col-sm-9"},ku={class:"text-break border p-2"},Su=["href"],Tu={class:"col-sm-3"},Mu={class:"d-flex flex-row justify-content-between"},Cu=["href"],Iu={class:"col-sm-9"},xu={class:"text-break border p-2"},Pu={class:"d-flex flex-row"},Vu=["onClick"],Uu=["onClick"],Ou=["onClick"],Au={class:"mt-2"},Du={class:"mt-2 text-end"},Hu={class:"table-responsive border mt-2"},Eu={class:"table table-hover mb-0 caption-top"},Lu={class:"text-end"},Bu=["onClick"],qu={class:"mt-2"},Nu={class:"row row-cols-sm-2"},Ru={class:"col"},zu={class:"form-floating mb-2"},Fu={class:"col"},ju={class:"form-floating mb-2"},Gu={class:"row row-cols-sm-2"},Yu={class:"col"},Wu={class:"form-floating mb-2"},Ku={class:"col"},Ju={class:"input-group mb-2"},Qu={class:"form-floating"},Xu=["href"],Zu={class:"row row-cols-sm-2"},ec={class:"col"},tc={class:"form-floating mb-2"},sc={class:"col"},oc={class:"input-group mb-2"},ac={class:"form-floating"},lc=["href"],nc={class:"row row-cols-sm-2"},rc={class:"col"},ic={class:"form-floating mb-2"},dc={class:"col"},uc={class:"input-group mb-2"},cc={class:"form-floating"},mc={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ae(null);const P=ae();ne(async()=>{await V(),c.value=F.getPageTab("vodSource")||"information-tab"});const l=H=>{F.setPageTab("vodSource",H),c.value=H},O=H=>H!==c.value?"":"active",a=H=>H!==c.value?"":"show active",V=async()=>{const H=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const n=`/api/v1/vodsources/${u.id}/`;await J.get(n).then(A=>{H.item=A.data;const le=H.item,X=F.moment.utc(H.item.video.durationInMillis).format("HH:mm:ss");le.video.duration=X;const fe=le.video.hlsPath,_e=fe.substring(fe.lastIndexOf("/")+1)})}catch(n){k.value=F.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{y.value=!1}},f=async()=>{await V()},r=()=>{P.value.open(u.id)},v=H=>{},m=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/vodsources/${u.id}/publish/`).then(n=>{L.success("Publish VOD","VOD was published.",{async onClose(){}})}),y.value=!1,await f()}catch(n){k.value=F.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{y.value=!1}}},g=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/vodsources/${u.id}/unpublish/`).then(n=>{L.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),y.value=!1,await f()}catch(n){k.value=F.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{y.value=!1}}},p=async H=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/playbackconfigurations/${H}/vodsource/publish/`).then(A=>{L.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),y.value=!1,await f()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},Y=async H=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${H}/vodsource/unpublish/`).then(A=>{L.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await f()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},x=async H=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/vodSources/package-configurations/${H}/`).then(A=>{L.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),y.value=!1,await f()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}},se=async H=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${H}/vodsource/`).then(A=>{L.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await f()}catch(A){k.value=F.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{y.value=!1}}};return(H,n)=>{const A=Q("PageHeader"),le=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(A,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",tu,[i.item?(t(),s(q,{key:0},[i.item.arn?(t(),s("button",{key:0,onClick:n[0]||(n[0]=X=>g()),class:"ms-1 btn btn-danger"},n[19]||(n[19]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:n[1]||(n[1]=X=>m()),class:"ms-1 btn btn-primary"},n[20]||(n[20]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):T("",!0),e("button",{onClick:n[2]||(n[2]=X=>f()),class:"ms-2 btn btn-secondary"},n[21]||(n[21]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[3]||(n[3]=X=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(le,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",su,[e("div",null,[e("ul",ou,[e("li",au,[e("button",{onClick:n[4]||(n[4]=X=>l("information-tab")),class:oe([O("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",lu,[e("button",{onClick:n[5]||(n[5]=X=>l("packageConfigurations-tab")),class:oe([O("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",nu,[e("button",{onClick:n[6]||(n[6]=X=>l("video-tab")),class:oe([O("video-tab"),"nav-link"]),id:"video-tab","data-bs-toggle":"tab","data-bs-target":"#video",type:"button",role:"tab","aria-controls":"video","aria-selected":"false"}," Video ",2)])]),e("div",ru,[e("div",{class:oe([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",iu,[e("div",du,[e("div",uu,[I(e("input",{"onUpdate:modelValue":n[7]||(n[7]=X=>i.item.name=X),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),n[23]||(n[23]=e("label",{for:"name"},"Name",-1))])]),n[36]||(n[36]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),i.item.playbackConfigurations?(t(),s("div",cu,[e("table",mu,[n[35]||(n[35]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.playbackConfigurations,(X,fe)=>(t(),s("tr",{key:X.playbackConfigurationId},[e("td",null,b(fe+1),1),e("td",null,[e("dl",fu,[n[29]||(n[29]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",pu,[X.arn?(t(),s("span",vu)):T("",!0),B(b(X.name),1)]),n[30]||(n[30]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",gu,b(X.videoContentSourceUrl),1),n[31]||(n[31]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",bu,[e("div",yu,b(X.adDecisionServerUrl),1)]),i.item.video.dashPath&&X.dashConfigurationManifestEndpointPrefix?(t(),s(q,{key:0},[e("dt",$u,[e("div",wu,[n[25]||(n[25]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},n[24]||(n[24]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),B("View DASH ")]),8,hu)])])]),e("dd",_u,[e("div",ku,b(X.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},n[26]||(n[26]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),B("View DASH ")]),8,Su)])])],64)):T("",!0),i.item.video.hlsPath&&X.hlsConfigurationManifestEndpointPrefix?(t(),s(q,{key:1},[e("dt",Tu,[e("div",Mu,[n[28]||(n[28]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(X.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},n[27]||(n[27]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),B("View ")]),8,Cu)])])]),e("dd",Iu,[e("div",xu,b(X.hlsConfigurationManifestEndpointPrefix),1)])],64)):T("",!0)])]),e("td",null,[e("div",Pu,[X.arn?(t(),s("button",{key:0,onClick:_e=>Y(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},n[32]||(n[32]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,Vu)):(t(),s("button",{key:1,onClick:_e=>p(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},n[33]||(n[33]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Uu)),X.arn?T("",!0):(t(),s("button",{key:2,onClick:_e=>se(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},n[34]||(n[34]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ou))])])]))),128))]),_:1},512),[[he,i.item.playbackConfigurations.length>0]])])])):T("",!0)])],2),e("div",{class:oe([a("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Au,[e("div",Du,[e("button",{onClick:n[8]||(n[8]=X=>r()),class:"btn btn-primary"},n[37]||(n[37]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Add ")]))]),e("div",Hu,[e("table",Eu,[n[39]||(n[39]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.packageConfigurations,(X,fe)=>(t(),s("tr",{key:X.packageConfigurationId},[e("td",null,b(fe+1),1),e("td",null,b(X.path),1),e("td",null,b(X.sourceGroup.name),1),e("td",null,b(X.type),1),e("td",Lu,[e("button",{onClick:_e=>x(X.packageConfigurationId),class:"btn btn-outline-warning"},n[38]||(n[38]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Bu)])]))),128))]),_:1},512),[[he,i.item.packageConfigurations.length>0]])])])])],2),e("div",{class:oe([a("video-tab"),"tab-pane fade"]),id:"video",role:"tabpanel","aria-labelledby":"video-tab"},[e("div",qu,[e("div",null,[e("div",Nu,[e("div",Ru,[e("div",zu,[I(e("input",{"onUpdate:modelValue":n[9]||(n[9]=X=>i.item.video.title=X),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[N,i.item.video.title]]),n[40]||(n[40]=e("label",{for:"title"},"Title",-1))])]),e("div",Fu,[e("div",ju,[I(e("input",{"onUpdate:modelValue":n[10]||(n[10]=X=>i.item.video.duration=X),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[N,i.item.video.duration]]),n[41]||(n[41]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Gu,[e("div",Yu,[e("div",Wu,[I(e("input",{"onUpdate:modelValue":n[11]||(n[11]=X=>i.item.video.rawBaseUrl=X),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[N,i.item.video.rawBaseUrl]]),n[42]||(n[42]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Ku,[e("div",Ju,[e("div",Qu,[I(e("input",{"onUpdate:modelValue":n[12]||(n[12]=X=>i.item.video.rawPath=X),class:"form-control",id:"rawPath",disabled:""},null,512),[[N,i.item.video.rawPath]]),n[43]||(n[43]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.video.rawBaseUrl+i.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},n[44]||(n[44]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),B("View ")],-1)]),8,Xu)])])]),e("div",Zu,[e("div",ec,[e("div",tc,[I(e("input",{"onUpdate:modelValue":n[13]||(n[13]=X=>i.item.video.hlsBaseUrl=X),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[N,i.item.video.hlsBaseUrl]]),n[45]||(n[45]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",sc,[e("div",oc,[e("div",ac,[I(e("input",{"onUpdate:modelValue":n[14]||(n[14]=X=>i.item.video.hlsPath=X),class:"form-control",id:"hlsPath",disabled:""},null,512),[[N,i.item.video.hlsPath]]),n[46]||(n[46]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://www.hlsplayer.org/play?url=${encodeURIComponent(i.item.video.hlsBaseUrl+i.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},n[47]||(n[47]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),B("View ")],-1)]),8,lc)])])]),e("div",nc,[e("div",rc,[e("div",ic,[I(e("input",{"onUpdate:modelValue":n[15]||(n[15]=X=>i.item.video.dashBaseUrl=X),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[N,i.item.video.dashBaseUrl]]),n[48]||(n[48]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",dc,[e("div",uc,[e("div",cc,[I(e("input",{"onUpdate:modelValue":n[16]||(n[16]=X=>i.item.video.dashPath=X),class:"form-control",id:"dashPath",disabled:""},null,512),[[N,i.item.video.dashPath]]),n[49]||(n[49]=e("label",{for:"dashPath"},"DASH Path",-1))]),i.item.video.dashPath?(t(),s("button",{key:0,onClick:n[17]||(n[17]=X=>v()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},n[50]||(n[50]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Playback Configuration ")]))):T("",!0)])])])])])],2)])])])):T("",!0)]),_:1},8,["errorMessage"]),D(Pd,{ref_key:"modalAddPackageConfiguration",ref:P,onRefresh:f},null,512),D(eu,{ref:"modalAddPlaybackConfiguration",onRefresh:n[18]||(n[18]=X=>f())},null,512)])]),_:1})}}},fc={class:"d-flex justify-content-end"},pc=["disabled"],vc={class:"container"},gc={class:"row row-cols-1"},bc={class:"col"},yc={class:"form-floating mb-2"},$c={key:0,class:"d-block invalid-feedback"},wc={class:"row row-cols-sm-2"},hc={class:"col"},_c={class:"form-floating mb-2"},kc=["value"],Sc={key:0,class:"d-block invalid-feedback"},Tc={class:"col"},Mc={class:"form-floating mb-2"},Cc=["disabled"],Ic=["value"],xc={key:0,class:"d-block invalid-feedback"},Pc={key:0,class:"row row-cols-1 row-cols-sm-2"},Vc={class:"col"},Uc={class:"form-floating"},Oc={key:0},Ac={key:1},Dc={key:2},Hc={key:3,class:"d-block invalid-feedback"},Ec={class:"col"},Lc={class:"form-floating"},Bc={key:0},qc={key:1},Nc={key:2,class:"d-block invalid-feedback"},Rc={key:1,class:"mt-3"},zc={class:"table-responsive border mt-1"},Fc={class:"table table-borderless table-sm mb-0"},jc=["onUpdate:modelValue","onChange"],Gc={key:0},Yc=["onUpdate:modelValue","onChange"],Wc={class:"text-end"},Kc=["onClick"],Jc={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),L=d,$=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),C={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},h=ye(C,$),W=Oe(()=>{const g=k.moment;if($.startOffsetTime&&$.startOffsetTime!=="00:00:00"&&i($.startOffsetTime)){const p=g().startOf("day"),Y=p.format("YYYY-MM-DD ")+$.startOffsetTime,se=g(Y).subtract(p);return $.item.startOffsetMillis=se.valueOf(),$.item.startOffsetMillis}return 0}),K=Oe(()=>{const g=k.moment;if($.endOffsetTime&&$.endOffsetTime!=="00:00:00"&&i($.endOffsetTime)){const p=g().startOf("day"),Y=p.format("YYYY-MM-DD ")+$.endOffsetTime,se=g(Y).subtract(p);return $.item.endOffsetMillis=se.valueOf(),$.item.endOffsetMillis}return 0}),i=g=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(g);ne(async()=>{await c()});const c=async()=>{await P(),await a()},P=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(p=>{$.lookups.sourceLocations=p.data,$.item.sourceLocationId=$.lookups.sourceLocations[0].id}),$.item.sourceLocationId&&await l($.item.sourceLocationId)}catch(g){S.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},l=async g=>{try{const p=`/api/v1/vodSources/lookup/source-location/${g}/`;await R.get(p).then(Y=>{$.lookups.vodSources=Y.data})}catch(p){S.value=k.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},O=async()=>{const g=$.selected.vodSource;$.item.vodSourceId=g.id,$.endOffsetTime=k.moment.utc(g.durationInMillis).format("HH:mm:ss")},a=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(p=>{$.lookups.adBreakSourceLocations=p.data})}catch(g){S.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},V=()=>{const g={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};$.item.adBreaks.push(g)},f=g=>{$.item.adBreaks.splice(g,1)},r=g=>{const p=k.moment,Y=p().startOf("day"),x=Y.format("YYYY-MM-DD ")+g.offsetTime,H=p(x).subtract(Y);g.offsetMillis=H.valueOf()},v=g=>{const p=k.moment,Y=p().startOf("day"),x=Y.format("YYYY-MM-DD ")+g.durationTime,H=p(x).subtract(Y);g.durationInMillis=H.valueOf()},m=async()=>{const g=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const Y=k.clone(g.item);debugger;await R.post("/api/v1/programtemplates/",Y).then(x=>{E.success("Add Program Template","Program template added.",{onClose:async()=>{const se=`${L.urlView}/${x.data}`;await G.push(se)}})})}catch(Y){S.value=k.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{_.value=!1}};return(g,p)=>{const Y=Q("router-link"),x=Q("PageHeader"),se=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(x,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",fc,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:p[0]||(p[0]=H=>m()),class:"btn btn-primary"},p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pc),D(Y,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>p[9]||(p[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(se,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",vc,[e("div",gc,[e("div",bc,[e("div",yc,[I(e("input",{"onUpdate:modelValue":p[1]||(p[1]=H=>$.item.name=H),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,$.item.name]]),p[10]||(p[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",$c,[(t(!0),s(q,null,j(o(h).item.name.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):T("",!0)])])]),e("div",wc,[e("div",hc,[e("div",_c,[I(e("select",{"onUpdate:modelValue":p[2]||(p[2]=H=>$.item.sourceLocationId=H),onChange:p[3]||(p[3]=H=>l($.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j($.lookups.sourceLocations,H=>(t(),s("option",{value:H.id},b(H.name),9,kc))),256))],544),[[pe,$.item.sourceLocationId]]),p[11]||(p[11]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.sourceLocationId.$error?(t(),s("div",Sc,[(t(!0),s(q,null,j(o(h).item.sourceLocationId.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):T("",!0)])]),e("div",Tc,[e("div",Mc,[I(e("select",{"onUpdate:modelValue":p[4]||(p[4]=H=>$.selected.vodSource=H),onChange:p[5]||(p[5]=H=>O()),class:"form-select",id:"vodSourceId",disabled:$.item.adBreaks.length>0},[(t(!0),s(q,null,j($.lookups.vodSources,H=>(t(),s("option",{value:H},b(o(k).moment.utc(H.durationInMillis).format("HH:mm:ss"))+" - "+b(H.name),9,Ic))),256))],40,Cc),[[pe,$.selected.vodSource]]),p[12]||(p[12]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.vodSourceId.$error?(t(),s("div",xc,[(t(!0),s(q,null,j(o(h).item.vodSourceId.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):T("",!0)])])]),$.item.vodSourceId?(t(),s("div",Pc,[e("div",Vc,[e("div",Uc,[I(e("input",{"onUpdate:modelValue":p[6]||(p[6]=H=>$.startOffsetTime=H),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[N,$.startOffsetTime]]),p[13]||(p[13]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Oc,p[14]||(p[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):T("",!0),W.value>K.value&&K.value>0?(t(),s("div",Ac,p[15]||(p[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):T("",!0),$.selected.vodSource&&W.value>=$.selected.vodSource.durationInMillis?(t(),s("div",Dc,p[16]||(p[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):T("",!0),o(h).item.startOffsetMillis.$error?(t(),s("div",Hc,[(t(!0),s(q,null,j(o(h).item.startOffsetMillis.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):T("",!0)]),e("div",Ec,[e("div",Lc,[I(e("input",{"onUpdate:modelValue":p[7]||(p[7]=H=>$.endOffsetTime=H),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[N,$.endOffsetTime]]),p[17]||(p[17]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Bc,p[18]||(p[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):T("",!0),$.selected.vodSource&&K.value>$.selected.vodSource.durationInMillis?(t(),s("div",qc,p[19]||(p[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):T("",!0),o(h).item.endOffsetMillis.$error?(t(),s("div",Nc,[(t(!0),s(q,null,j(o(h).item.endOffsetMillis.$errors,H=>(t(),s("div",{key:H.$uid},b(H.$message),1))),128))])):T("",!0)])])):T("",!0),$.item.vodSourceId?(t(),s("div",Rc,[e("div",{class:"d-flex flex-row justify-content-between"},[p[21]||(p[21]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:V,class:"btn btn-outline-primary"},p[20]||(p[20]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Ad Break ")]))]),e("div",zc,[e("table",Fc,[p[24]||(p[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j($.item.adBreaks,(H,n)=>(t(),s("tr",null,[e("td",null,b(n+1),1),e("td",null,[I(e("input",{"onUpdate:modelValue":A=>H.offsetTime=A,onChange:A=>r(H),type:"time",step:"1",class:"form-control"},null,40,jc),[[N,H.offsetTime]]),H.offsetMillis>=$.selected.vodSource.durationInMillis?(t(),s("div",Gc,p[22]||(p[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):T("",!0)]),e("td",null,[I(e("input",{"onUpdate:modelValue":A=>H.durationTime=A,onChange:A=>v(H),type:"time",step:"1",class:"form-control"},null,40,Yc),[[N,H.durationTime]])]),e("td",Wc,[e("button",{onClick:A=>f(n),class:"btn btn-outline-warning"},p[23]||(p[23]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Kc)])]))),256))])]),p[25]||(p[25]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),B(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):T("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Qc={class:"d-flex justify-content-end"},Xc=["disabled"],Zc={class:"container"},em={class:"row row-cols-1"},tm={class:"col"},sm={class:"form-floating mb-2"},om={key:0,class:"d-block invalid-feedback"},am={class:"row row-cols-sm-2"},lm={class:"col"},nm={class:"form-floating mb-2"},rm=["value"],im={key:0,class:"d-block invalid-feedback"},dm={class:"col"},um={class:"form-floating mb-2"},cm=["value"],mm={key:0,class:"d-block invalid-feedback"},fm={key:0,class:"row row-cols-1 row-cols-sm-2"},pm={class:"col"},vm={class:"form-floating"},gm={key:0},bm={key:1},ym={key:2},$m={key:3,class:"d-block invalid-feedback"},wm={class:"col"},hm={class:"form-floating"},_m={key:0},km={key:1},Sm={key:2,class:"d-block invalid-feedback"},Tm={key:1,class:"mt-2"},Mm={class:"table-responsive border mt-1"},Cm={class:"table"},Im=["onUpdate:modelValue","onChange"],xm={key:0},Pm=["onUpdate:modelValue","onChange"],Vm=["onClick"],Um={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:F,security:L}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),$=d,C=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),h={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},W=ye(h,C),K=Oe(()=>{const Y=k.moment;if(C.startOffsetTime&&C.startOffsetTime!=="00:00:00"&&c(C.startOffsetTime)){const x=Y().startOf("day"),se=x.format("YYYY-MM-DD ")+C.startOffsetTime,n=Y(se).subtract(x);return C.item.startOffsetMillis=n.valueOf(),C.item.startOffsetMillis}return 0}),i=Oe(()=>{const Y=k.moment;if(C.endOffsetTime&&C.endOffsetTime!=="00:00:00"&&c(C.endOffsetTime)){const x=Y().startOf("day"),se=x.format("YYYY-MM-DD ")+C.endOffsetTime,n=Y(se).subtract(x);return C.item.endOffsetMillis=n.valueOf(),C.item.endOffsetMillis}return 0}),c=Y=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(Y);ne(async()=>{await P()});const P=async()=>{await l(),await O()},l=async()=>{try{const Y=`/api/v1/programtemplates/${$.id}/`;await R.get(Y).then(x=>{C.item=x.data,C.startOffsetTime=k.moment.utc(C.item.startOffsetMillis).format("HH:mm:ss"),C.endOffsetTime=k.moment.utc(C.item.endOffsetMillis).format("HH:mm:ss"),C.item.adBreaks.forEach(se=>{se.offsetTime=k.moment.utc(se.offsetMillis).format("HH:mm:ss"),se.durationTime=k.moment.utc(se.durationInMillis).format("HH:mm:ss")})})}catch(Y){S.value=k.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{}},O=async()=>{await a()},a=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(x=>{C.lookups.sourceLocations=x.data}),C.item.sourceLocationId&&await V(C.item.sourceLocationId)}catch(Y){S.value=k.getErrorMessageAsHtml(Y),window.scrollTo(0,0)}finally{}},V=async Y=>{try{const x=`/api/v1/vodSources/lookup/source-location/${Y}/`;await R.get(x).then(H=>{C.lookups.vodSources=H.data});const se=C.lookups.vodSources.find(H=>H.id==C.item.vodSourceId);C.selected.vodSource=se,await f()}catch(x){S.value=k.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},f=async()=>{const Y=C.selected.vodSource;C.item.vodSourceId=Y.id,C.endOffsetTime=k.moment.utc(Y.durationInMillis).format("HH:mm:ss")},r=()=>{const Y={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};C.item.adBreaks.push(Y)},v=Y=>{C.item.adBreaks.splice(Y,1)},m=Y=>{const x=k.moment,se=x().startOf("day"),H=se.format("YYYY-MM-DD ")+Y.offsetTime,A=x(H).subtract(se);Y.offsetMillis=A.valueOf()},g=Y=>{const x=k.moment,se=x().startOf("day"),H=se.format("YYYY-MM-DD ")+Y.durationTime,A=x(H).subtract(se);Y.durationInMillis=A.valueOf()},p=async()=>{const Y=C;if(_.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const se=k.clone(Y.item);debugger;se.startOffsetMillis=K.value,se.endOffsetMillis=i.value,await R.put("/api/v1/programtemplates/",se).then(H=>{E.success("Edit Program Template","Program template edit.",{onClose:async()=>{const n=`${$.urlView}/${$.id}`;await G.push(n)}})})}catch(se){S.value=k.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{_.value=!1}};return(Y,x)=>{const se=Q("PageHeader"),H=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Qc,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:x[0]||(x[0]=n=>p()),class:"btn btn-primary"},x[10]||(x[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xc),e("button",{onClick:x[1]||(x[1]=n=>P()),class:"btn btn-secondary ms-2"},x[11]||(x[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:x[2]||(x[2]=n=>o(F)($.urlMain)),class:"btn btn-secondary ms-1"},x[12]||(x[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(H,{errorMessage:o(S),vuelidate:o(W)},{default:U(()=>[e("div",null,[e("div",Zc,[e("div",em,[e("div",tm,[e("div",sm,[I(e("input",{"onUpdate:modelValue":x[3]||(x[3]=n=>C.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,C.item.name]]),x[13]||(x[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",om,[(t(!0),s(q,null,j(o(W).item.name.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):T("",!0)])])]),e("div",am,[e("div",lm,[e("div",nm,[I(e("select",{"onUpdate:modelValue":x[4]||(x[4]=n=>C.item.sourceLocationId=n),onChange:x[5]||(x[5]=n=>V(C.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j(C.lookups.sourceLocations,n=>(t(),s("option",{value:n.id},b(n.name),9,rm))),256))],544),[[pe,C.item.sourceLocationId]]),x[14]||(x[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",im,[(t(!0),s(q,null,j(o(W).item.sourceLocationId.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):T("",!0)])]),e("div",dm,[e("div",um,[I(e("select",{"onUpdate:modelValue":x[6]||(x[6]=n=>C.selected.vodSource=n),onChange:x[7]||(x[7]=n=>f()),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,j(C.lookups.vodSources,n=>(t(),s("option",{value:n},b(o(k).moment.utc(n.durationInMillis).format("HH:mm:ss"))+" - "+b(n.name),9,cm))),256))],544),[[pe,C.selected.vodSource]]),x[15]||(x[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",mm,[(t(!0),s(q,null,j(o(W).item.vodSourceId.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):T("",!0)])])]),C.item.vodSourceId?(t(),s("div",fm,[e("div",pm,[B(" ["+b(K.value)+"] x ["+b(C.startOffsetMillis)+"] ",1),e("div",vm,[I(e("input",{"onUpdate:modelValue":x[8]||(x[8]=n=>C.startOffsetTime=n),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[N,C.startOffsetTime]]),x[16]||(x[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",gm,x[17]||(x[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):T("",!0),K.value>i.value&&i.value>0?(t(),s("div",bm,x[18]||(x[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):T("",!0),C.selected.vodSource&&K.value>=C.selected.vodSource.durationInMillis?(t(),s("div",ym,x[19]||(x[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):T("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",$m,[(t(!0),s(q,null,j(o(W).item.startOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):T("",!0)]),e("div",wm,[e("div",hm,[I(e("input",{"onUpdate:modelValue":x[9]||(x[9]=n=>C.endOffsetTime=n),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[N,C.endOffsetTime]]),x[20]||(x[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),i.value>0&&i.value<3e4?(t(),s("div",_m,x[21]||(x[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):T("",!0),C.selected.vodSource&&i.value>C.selected.vodSource.durationInMillis?(t(),s("div",km,x[22]||(x[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):T("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",Sm,[(t(!0),s(q,null,j(o(W).item.endOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):T("",!0)])])):T("",!0),C.selected.vodSource?(t(),s("div",Tm,[e("div",{class:"d-flex flex-row justify-content-between"},[x[24]||(x[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:r,class:"btn btn-outline-primary"},x[23]||(x[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Ad Break ")]))]),e("div",Mm,[e("table",Cm,[x[28]||(x[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(C.item.adBreaks,(n,A)=>(t(),s("tr",null,[e("td",null,b(A+1),1),e("td",null,[I(e("input",{"onUpdate:modelValue":le=>n.offsetTime=le,onChange:le=>m(n),type:"time",step:"1",class:"form-control"},null,40,Im),[[N,n.offsetTime]]),n.offsetMillis>=C.selected.vodSource.durationInMillis?(t(),s("div",xm,x[25]||(x[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):T("",!0)]),e("td",null,[I(e("input",{"onUpdate:modelValue":le=>n.durationTime=le,onChange:le=>g(n),type:"time",step:"1",class:"form-control"},null,40,Pm),[[N,n.durationTime]])]),x[27]||(x[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),B(" Source Location and Vod source will be defined in Program Instance. "),e("br"),B(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:le=>v(A),class:"btn btn-outline-warning"},x[26]||(x[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Vm)])]))),256))])])])])):T("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Om={class:"d-flex justify-content-end"},Am={class:"ms-1"},Dm={class:"input-group"},Hm={class:"table-responsive"},Em={class:"table table-hover mb-0"},Lm=["textContent"],Bm={key:0,class:"fas fa-fw fa-check-circle text-success"},qm={class:"text-end"},Nm={class:"border-top"},Rm="/api/v1/programTemplates/search",zm={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,security:$,filter:C,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:P,isSelected:l}=Ue({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${w==null?void 0:w.userId}/program-templates/search`,baseUrl:Rm,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:U(()=>[e("div",Om,[D(V,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Am,[e("div",Dm,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(C).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(C).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Hm,[e("table",Em,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(C).items,(m,g)=>(t(),s("tr",{key:m.movieId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Lm),e("td",null,[D(V,{to:`${d.urlView}/${m.programTemplateId}`,class:"d-inline-block text-truncate"},{default:U(()=>[m.arn?(t(),s("span",Bm)):T("",!0),B(" "+b(m.name),1)]),_:2},1032,["to"])]),e("td",qm,b(o(J).moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[B(b(m.sourceLocation.name)+" ",1),e("div",Nm,b(m.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,b(m.vodSource.name),1)]))),128))]),_:1},512),[[he,o(C).items.length>0]])])]),D(r,{filter:o(C),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Fm={class:"d-flex flex-row justify-content-end"},jm={key:0},Gm={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Ym={class:"nav-item",role:"presentation"},Wm={class:"nav-item",role:"presentation"},Km={class:"nav-item",role:"presentation"},Jm={class:"tab-content",id:"myTabContent"},Qm={class:"mt-2"},Xm={class:"row row-cols-1 row-cols-sm-3"},Zm={class:"col"},ef={class:"form-floating mb-2"},tf={class:"col"},sf={class:"form-floating mb-2"},of={class:"col"},af={class:"form-floating mb-2"},lf={class:"row row-cols-1 row-cols-sm-3"},nf={class:"col"},rf={class:"form-floating mb-2"},df={class:"col"},uf={class:"form-floating mb-2"},cf={class:"col"},mf={class:"form-floating mb-2"},ff={class:"row row-cols-1 row-cols-sm-2"},pf={class:"col-sm-4"},vf={class:"form-floating mb-2"},gf={class:"col-sm-8"},bf={class:"form-floating mb-2"},yf={class:""},$f={class:"col"},wf={class:"form-floating mb-2"},hf={class:"row row-cols-1 row-cols-sm-2"},_f={class:"col"},kf={class:"form-floating mb-2"},Sf={class:"col"},Tf={class:"form-floating mb-2"},Mf={class:"row row-cols-1 row-cols-sm-2"},Cf={class:"col"},If={class:"form-floating mb-2"},xf={class:"col"},Pf={class:"form-floating mb-2"},Vf={class:"row row-cols-1 row-cols-sm-2"},Uf={class:"col"},Of={class:"form-floating mb-2"},Af={class:"col"},Df={class:"form-floating mb-2"},Hf={class:"row row-cols-1 row-cols-sm-2"},Ef={class:"col"},Lf={class:"form-floating mb-2"},Bf={class:"col"},qf={class:"form-floating mb-2"},Nf={class:"mt-2"},Rf={class:"table-responsive"},zf={class:"table table-hover mb-0"},Ff={class:"text-center"},jf={class:"mt-2"},Gf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae();ne(async()=>{await a(),c.value=F.getPageTab("programTemplate")||"information-tab"});const P=f=>{F.setPageTab("programTemplate",f),c.value=f},l=f=>f!==c.value?"":"active",O=f=>f!==c.value?"":"show active",a=async()=>{const f=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const r=`/api/v1/programTemplates/${u.id}/`;await J.get(r).then(v=>{f.item=v.data;const m=f.item;m.startOffsetTime=F.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=F.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=F.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=F.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=F.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const g=m.vodSource.video,p=g.durationInMillis;g.durationInMillis=F.moment.utc(p).format("HH:mm:ss")})}catch(r){k.value=F.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{y.value=!1}},V=async()=>{await a()};return(f,r)=>{const v=Q("router-link"),m=Q("PageHeader"),g=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Fm,[D(v,{to:`${d.urlEdit}/${d.id}/${o(h)()}`,class:"ms-2 btn btn-primary"},{default:U(()=>r[22]||(r[22]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:r[0]||(r[0]=p=>V()),class:"ms-2 btn btn-secondary"},r[23]||(r[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[1]||(r[1]=p=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},r[24]||(r[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",jm,[e("div",null,[e("ul",Gm,[e("li",Ym,[e("button",{onClick:r[2]||(r[2]=p=>P("information-tab")),class:oe([l("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Wm,[e("button",{onClick:r[3]||(r[3]=p=>P("adBreaks-tab")),class:oe([l("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Km,[e("button",{onClick:r[4]||(r[4]=p=>P("programs-tab")),class:oe([l("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Jm,[e("div",{class:oe([O("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Qm,[e("div",Xm,[e("div",Zm,[e("div",ef,[I(e("input",{"onUpdate:modelValue":r[5]||(r[5]=p=>i.item.name=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),r[25]||(r[25]=e("label",{for:"name"},"Name",-1))])]),e("div",tf,[e("div",sf,[I(e("input",{"onUpdate:modelValue":r[6]||(r[6]=p=>i.item.startOffsetTime=p),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[N,i.item.startOffsetTime]]),r[26]||(r[26]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",of,[e("div",af,[I(e("input",{"onUpdate:modelValue":r[7]||(r[7]=p=>i.item.endOffsetTime=p),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[N,i.item.endOffsetTime]]),r[27]||(r[27]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),e("div",lf,[e("div",nf,[e("div",rf,[I(e("input",{"onUpdate:modelValue":r[8]||(r[8]=p=>i.item.durationTime=p),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[N,i.item.durationTime]]),r[28]||(r[28]=e("label",{for:"durationTime"},"Clip Duration",-1))])]),e("div",df,[e("div",uf,[I(e("input",{"onUpdate:modelValue":r[9]||(r[9]=p=>i.item.adBreaksDurationTime=p),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[N,i.item.adBreaksDurationTime]]),r[29]||(r[29]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",cf,[e("div",mf,[I(e("input",{"onUpdate:modelValue":r[10]||(r[10]=p=>i.item.totalProgramTemplateDurationTime=p),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[N,i.item.totalProgramTemplateDurationTime]]),r[30]||(r[30]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),r[45]||(r[45]=e("hr",null,null,-1)),e("div",null,[r[33]||(r[33]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",ff,[e("div",pf,[e("div",vf,[I(e("input",{"onUpdate:modelValue":r[11]||(r[11]=p=>i.item.sourceLocation.name=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.sourceLocation.name]]),r[31]||(r[31]=e("label",{for:"name"},"Name",-1))])]),e("div",gf,[e("div",bf,[I(e("input",{"onUpdate:modelValue":r[12]||(r[12]=p=>i.item.sourceLocation.httpConfigurationBaseUrl=p),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[N,i.item.sourceLocation.httpConfigurationBaseUrl]]),r[32]||(r[32]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),r[46]||(r[46]=e("hr",null,null,-1)),e("div",null,[r[43]||(r[43]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",yf,[e("div",$f,[e("div",wf,[I(e("input",{"onUpdate:modelValue":r[13]||(r[13]=p=>i.item.vodSource.name=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.name]]),r[34]||(r[34]=e("label",{for:"name"},"VOD Name",-1))])])]),r[44]||(r[44]=e("div",null,[e("h6",null,"Video")],-1)),e("div",hf,[e("div",_f,[e("div",kf,[I(e("input",{"onUpdate:modelValue":r[14]||(r[14]=p=>i.item.vodSource.video.title=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.title]]),r[35]||(r[35]=e("label",{for:"name"},"Video Name",-1))])]),e("div",Sf,[e("div",Tf,[I(e("input",{"onUpdate:modelValue":r[15]||(r[15]=p=>i.item.vodSource.video.durationInMillis=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.durationInMillis]]),r[36]||(r[36]=e("label",{for:"name"},"Video Duration",-1))])])]),e("div",Mf,[e("div",Cf,[e("div",If,[I(e("input",{"onUpdate:modelValue":r[16]||(r[16]=p=>i.item.vodSource.video.rawBaseUrl=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.rawBaseUrl]]),r[37]||(r[37]=e("label",{for:"name"},"Raw Base Url",-1))])]),e("div",xf,[e("div",Pf,[I(e("input",{"onUpdate:modelValue":r[17]||(r[17]=p=>i.item.vodSource.video.rawPath=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.rawPath]]),r[38]||(r[38]=e("label",{for:"name"},"Raw Path",-1))])])]),e("div",Vf,[e("div",Uf,[e("div",Of,[I(e("input",{"onUpdate:modelValue":r[18]||(r[18]=p=>i.item.vodSource.video.hlsBaseUrl=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.hlsBaseUrl]]),r[39]||(r[39]=e("label",{for:"name"},"HLS Base Url",-1))])]),e("div",Af,[e("div",Df,[I(e("input",{"onUpdate:modelValue":r[19]||(r[19]=p=>i.item.vodSource.video.hlsPath=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.hlsPath]]),r[40]||(r[40]=e("label",{for:"name"},"HLS Path",-1))])])]),e("div",Hf,[e("div",Ef,[e("div",Lf,[I(e("input",{"onUpdate:modelValue":r[20]||(r[20]=p=>i.item.vodSource.video.dashBaseUrl=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.dashBaseUrl]]),r[41]||(r[41]=e("label",{for:"name"},"DASH Base Url",-1))])]),e("div",Bf,[e("div",qf,[I(e("input",{"onUpdate:modelValue":r[21]||(r[21]=p=>i.item.vodSource.video.dashPath=p),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.vodSource.video.dashPath]]),r[42]||(r[42]=e("label",{for:"name"},"DASH Path",-1))])])])])])],2),e("div",{class:oe([O("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Nf,[e("div",Rf,[e("table",zf,[r[47]||(r[47]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.adBreaks,(p,Y)=>(t(),s("tr",{key:p.programTemplateAdBreakId},[e("td",Ff,b(Y+1),1),e("td",null,b(o(F).moment.utc(p.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(F).moment.utc(p.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[he,i.item.adBreaks.length>0]])])])])],2),e("div",{class:oe([O("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",jf,[e("pre",null,b(i.item.programs),1)])],2)])])])):T("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Yf={class:"d-flex justify-content-end"},Wf=["disabled"],Kf={class:"row row-cols-1 row-cols-sm-3"},Jf={class:"col-sm-6"},Qf={class:"form-floating mb-2"},Xf={key:0,class:"d-block invalid-feedback"},Zf={class:"col-sm-3"},ep={class:"form-floating mb-2"},tp={key:0,class:"d-block invalid-feedback"},sp={class:"col-sm-3"},op={class:"form-floating mb-2"},ap={key:0,class:"d-block invalid-feedback"},lp={class:"col"},np={class:"form-floating mb-2"},rp={key:0,class:"d-block invalid-feedback"},ip={class:"row row-cols-1 row-cols-sm-2"},dp={class:"col"},up={class:"form-floating mb-2"},cp=["value"],mp={key:0,class:"d-block invalid-feedback"},fp={class:"col"},pp={class:"form-floating mb-2"},vp=["value"],gp={key:0,class:"d-block invalid-feedback"},bp={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),L=d,$=ue({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),C={item:{name:{title:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},tier:{title:Z.withMessage("Tier is required.",ee),$autoDirty:!0,$lazy:!0},playbackMode:{title:Z.withMessage("PlaybackMode is required.",ee),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:Z.withMessage("Filler Slate Source Location is required.",ee),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:Z.withMessage("Filler Slate Vod Source is required.",ee),$autoDirty:!0,$lazy:!0},policy:{title:Z.withMessage("Policy is required.",ee),$autoDirty:!0,$lazy:!0}}},h=ye(C,$);ne(async()=>{await W()});const W=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(O=>{$.lookups.sourceLocations=O.data,$.lookups.sourceLocations.length===1&&($.item.fillerSlateSourceLocationId=$.lookups.sourceLocations[0].id)}),$.item.sourceLocationId&&await i($.item.fillerSlateSourceLocationId)}catch(l){S.value=k.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},K=async()=>{$.item.fillerSlateVodSourceId=null,await i($.item.fillerSlateSourceLocationId)},i=async l=>{try{let O=`/api/v1/vodSources/lookup/source-location/${l}`;await R.get(O).then(a=>{$.lookups.vodSources=a.data})}catch(O){S.value=k.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},c=()=>{if($.item.name){const l=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${$.item.name}"}]}`;$.item.policy=l}else $.item.policy=null},P=async()=>{const l=$;if(_.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{_.value=!0,S.value="";const a=k.clone(l.item);await R.post("/api/v1/channels/",a).then(V=>{E.success("Add Channel","Channel added.",{onClose:async()=>{const f=`${L.urlView}/${V.data}`;await G.push(f)}})})}catch(a){S.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}};return(l,O)=>{const a=Q("router-link"),V=Q("PageHeader"),f=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(V,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",Yf,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:O[0]||(O[0]=r=>P()),class:"btn btn-primary"},O[9]||(O[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Wf),D(a,{to:L.urlMain,class:"btn btn-secondary ms-2"},{default:U(()=>O[10]||(O[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(f,{errorMessage:o(S),vuelidate:o(h)},{default:U(()=>[e("div",null,[e("div",Kf,[e("div",Jf,[e("div",Qf,[I(e("input",{"onUpdate:modelValue":O[1]||(O[1]=r=>$.item.name=r),onChange:O[2]||(O[2]=r=>c()),id:"name",class:"form-control",placeholder:"name"},null,544),[[N,$.item.name]]),O[11]||(O[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Xf,[(t(!0),s(q,null,j(o(h).item.name.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):T("",!0)])]),e("div",Zf,[e("div",ep,[I(e("input",{"onUpdate:modelValue":O[3]||(O[3]=r=>$.item.tier=r),id:"tier",class:"form-control",placeholder:"tier",disabled:""},null,512),[[N,$.item.tier]]),O[12]||(O[12]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(h).item.tier.$error?(t(),s("div",tp,[(t(!0),s(q,null,j(o(h).item.tier.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):T("",!0)])]),e("div",sp,[e("div",op,[I(e("input",{"onUpdate:modelValue":O[4]||(O[4]=r=>$.item.playbackMode=r),id:"playbackMode",class:"form-control",placeholder:"playbackMode",disabled:""},null,512),[[N,$.item.playbackMode]]),O[13]||(O[13]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(h).item.playbackMode.$error?(t(),s("div",ap,[(t(!0),s(q,null,j(o(h).item.playbackMode.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):T("",!0)])])]),e("div",lp,[e("div",np,[I(e("textarea",{"onUpdate:modelValue":O[5]||(O[5]=r=>$.item.policy=r),id:"policy",class:"form-control",placeholder:"Policy",style:{height:"7rem"}},null,512),[[N,$.item.policy]]),O[14]||(O[14]=e("label",{for:"policy",class:"small fw-bold"},"Policy",-1)),o(h).item.policy.$error?(t(),s("div",rp,[(t(!0),s(q,null,j(o(h).item.policy.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):T("",!0)])]),O[17]||(O[17]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",ip,[e("div",dp,[e("div",up,[I(e("select",{"onUpdate:modelValue":O[6]||(O[6]=r=>$.item.fillerSlateSourceLocationId=r),onChange:O[7]||(O[7]=r=>K()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(q,null,j($.lookups.sourceLocations,r=>(t(),s("option",{value:r.id},b(r.name),9,cp))),256))],544),[[pe,$.item.fillerSlateSourceLocationId]]),O[15]||(O[15]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.fillerSlateSourceLocationId.$error?(t(),s("div",mp,[(t(!0),s(q,null,j(o(h).item.fillerSlateSourceLocationId.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):T("",!0)])]),e("div",fp,[e("div",pp,[I(e("select",{"onUpdate:modelValue":O[8]||(O[8]=r=>$.item.fillerSlateVodSourceId=r),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(q,null,j($.lookups.vodSources,r=>(t(),s("option",{value:r.id},b(r.name),9,vp))),256))],512),[[pe,$.item.fillerSlateVodSourceId]]),O[16]||(O[16]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.fillerSlateVodSourceId.$error?(t(),s("div",gp,[(t(!0),s(q,null,j(o(h).item.fillerSlateVodSourceId.$errors,r=>(t(),s("div",{key:r.$uid},b(r.$message),1))),128))])):T("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yp={components:{Page:He},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function $p(d,u,w,_,y,z){const S=Q("Page");return t(),ie(S,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const wp=ke(yp,[["render",$p]]),hp={class:"d-flex justify-content-end"},_p={class:"ms-1"},kp={class:"input-group"},Sp={class:"table-responsive"},Tp={class:"table table-hover mb-0"},Mp=["textContent"],Cp="/api/v1/channels/search",Ip={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(d){be("$config");const w=ve().user,{appTitle:_,pageTitle:y,busy:z,infoMessage:S,warningMessage:G,errorMessage:R,router:k,axios:E,utils:J,toasts:F,close:L,security:$,filter:C,initializeFilter:h,getQuery:W,saveQuery:K,search:i,getRowNumber:c,setSelected:P,isSelected:l}=Ue({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${w==null?void 0:w.userId}/Channels/search`,baseUrl:Cp,filter:{updateUrl:!0}});return ne(async()=>{h(),await i()}),(O,a)=>{const V=Q("router-link"),f=Q("PageHeader"),r=Q("m-pagination"),v=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(f,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(y)},{default:U(()=>[e("div",hp,[D(V,{to:d.urlAdd,class:"btn btn-primary"},{default:U(()=>a[3]||(a[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",_p,[e("div",kp,[I(e("input",{"onUpdate:modelValue":a[0]||(a[0]=m=>o(C).query.criteria=m),onKeyup:a[1]||(a[1]=Pe(m=>o(i)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[N,o(C).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[2]||(a[2]=m=>o(i)(1))},a[4]||(a[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),D(v,{errorMessage:o(R)},{default:U(()=>[e("div",Sp,[e("table",Tp,[a[5]||(a[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(o(C).items,(m,g)=>(t(),s("tr",{key:m.channelId},[e("td",{textContent:b(o(c)(g)),class:"text-center"},null,8,Mp),e("td",null,[D(V,{to:`${d.urlView}/${m.channelId}`,class:"d-inline-block text-truncate"},{default:U(()=>[B(b(m.name),1)]),_:2},1032,["to"])]),e("td",null,b(m.playbackMode),1),e("td",null,b(m.tier),1)]))),128))]),_:1},512),[[he,o(C).items.length>0]])])]),D(r,{filter:o(C),search:o(i),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},xp=["id"],Pp={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Vp={class:"modal-content"},Up={class:"modal-header bg-primary text-white"},Op={class:"modal-title",id:"exampleModalLabel"},Ap={class:"modal-body"},Dp={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Hp=["innerHTML"],Ep={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Lp={class:"container"},Bp={class:"col"},qp={class:"form-floating mb-2"},Np=["value"],Rp={class:"row row-cols-1 row-cols-sm-2"},zp={class:"col"},Fp={class:"form-floating mb-2"},jp={key:0,class:"d-block invalid-feedback"},Gp={class:"col"},Yp={class:"form-floating mb-2"},Wp={key:0,class:"d-block invalid-feedback"},Kp={key:0},Jp={class:"row row-cols-1 row-cols-sm-3"},Qp={class:"col"},Xp={class:"form-floating mb-2"},Zp={class:"col"},ev={class:"form-floating mb-2"},tv={class:"col"},sv={class:"form-floating mb-2"},ov={class:"row row-cols-1 row-cols-sm-2"},av={class:"col"},lv={class:"form-floating mb-2"},nv={class:"col"},rv={class:"form-floating mb-2"},iv={class:"row row-cols-1 row-cols-sm-2"},dv={class:"col"},uv={class:"form-floating mb-2"},cv={class:"col"},mv={class:"form-floating mb-2"},fv={key:1},pv={class:"table-responsive border mt-1"},vv={class:"table mb-0"},gv=["onUpdate:modelValue"],bv=["value"],yv={class:"modal-footer"},$v=["disabled"],wv={__name:"_addProgramFromTemplate",emits:["onClose"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=w,K=ae(),i=ae("modalAddProgramFromTemplate"),c=ue({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),P={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},l=ye(P,c);ne(async()=>{l.value.$reset()});const O=async(H,n,A)=>{K.value=H;const le=c;G.value.clear(),E.value="";const X=L.moment(A),_e=X.format("YYYY-MM-DD HH:mm"),Me=X.format("YYYYMMDD_HHmm")+"_PRG_";le.eventId=n,le.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},le.selected={programTemplate:null},le.item={programTemplateId:null,name:Me,dateScheduledStart:_e,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),await r(),l.value.$reset();var Ce=document.getElementById(i.value),Ae=$e.getOrCreateInstance(Ce);Ae.show()},a=async H=>{const n=c.selected.channel.programs;if(H&&n.find(Ae=>Ae.name===c.item.name)){alert(`Program name = [${c.item.name}] already exists.`);return}if(!H){W("onClose",{eventId:c.eventId},H);var _e=document.getElementById(i.value),Me=$e.getOrCreateInstance(_e);Me.hide();return}const A=c,le=L.moment(A.item.dateScheduledStart).utc().format(),X=L.moment(A.item.dateScheduledStart).add(A.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),fe={eventId:A.eventId,programTemplateId:A.selected.programTemplate.programTemplateId,channelId:A.selected.channel.channelId,name:A.item.name,dateScheduledStart:le,dateScheduledEnd:X,adBreaks:A.selected.programTemplate.adBreaks.map(Ce=>({sourceLocationId:A.selected.programTemplate.sourceLocationId,vodSourceId:Ce.vodSourceId,offsetMillis:Ce.offsetMillis,durationInMillis:Ce.durationInMillis}))};W("onClose",fe,H);var _e=document.getElementById(i.value),Me=$e.getOrCreateInstance(_e);Me.hide()},V=async()=>{await a(!0)},f=async()=>{try{const H=`/api/v1/channels/${K.value}/`;await F.get(H).then(n=>{c.selected.channel=n.data})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},r=async()=>{await p(),await se(),await v()},v=async()=>{try{const H=`/api/v1/programTemplates/lookup/by-channel/${K.value}`;await F.get(H).then(n=>{c.lookups.programTemplates=n.data,c.lookups.programTemplates.length===1&&(c.item.programTemplateId=c.lookups.programTemplates[0].id)}),c.item.programTemplateId&&await m()}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},m=async()=>{await g(c.item.programTemplateId)},g=async H=>{try{const n=`/api/v1/programTemplates/${H}/`;await F.get(n).then(X=>{c.selected.programTemplate=X.data;const fe=c.selected.programTemplate;fe.startOffsetTime=L.moment.utc(fe.startOffsetMillis).format("HH:mm:ss"),fe.endOffsetTime=L.moment.utc(fe.endOffsetMillis).format("HH:mm:ss"),fe.durationTime=L.moment.utc(fe.durationInMillis).format("HH:mm:ss"),fe.adBreaksDurationTime=L.moment.utc(fe.adBreaksDurationInMillis).format("HH:mm:ss"),fe.totalProgramTemplateDurationTime=L.moment.utc(fe.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),fe.adBreaks.forEach(_e=>{_e.vodSourceId=null})});const A=c,le=A.selected.channel.outputs[0].outputType;await x(A.selected.programTemplate.sourceLocationId,le)}catch(n){E.value=L.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},p=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.sourceLocations=n.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await Y(c.item.sourceLocationId)}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},Y=async H=>{try{let n=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(n).then(A=>{c.lookups.vodSources=A.data})}catch(n){E.value=L.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},x=async(H,n)=>{try{let A=`/api/v1/vodsources/lookup/source-location/${H}/output-type/${n}`;await F.get(A).then(le=>{c.lookups.adBreakVodSources=le.data})}catch(A){E.value=L.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},se=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${K.value}`;await F.get(H).then(n=>{c.lookups.channelPrograms=n.data;const A=c.lookups.channelPrograms.length})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}};return u({open:O,close:a}),(H,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Pp,[e("div",Vp,[e("div",Up,[e("h5",Op,b(o(_))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=A=>a(!1)),"aria-label":"Close"})]),e("div",Ap,[o(E)?(t(),s("div",Dp,[n[14]||(n[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Hp)])):T("",!0),o(G).size>0?(t(),s("div",Ep,[n[15]||(n[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),A=>(t(),s("li",null,b(A),1))),256))])])):T("",!0),e("div",Lp,[e("div",Bp,[e("div",qp,[I(e("select",{"onUpdate:modelValue":n[1]||(n[1]=A=>c.item.programTemplateId=A),class:"form-select",onChange:n[2]||(n[2]=A=>m()),id:"sourceLocationId"},[(t(!0),s(q,null,j(c.lookups.programTemplates,A=>(t(),s("option",{value:A.id}," ["+b(o(L).moment.utc(A.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+b(A.name),9,Np))),256))],544),[[pe,c.item.programTemplateId]]),n[16]||(n[16]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Rp,[e("div",zp,[e("div",Fp,[I(e("input",{"onUpdate:modelValue":n[3]||(n[3]=A=>c.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),n[17]||(n[17]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",jp,[(t(!0),s(q,null,j(o(l).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])]),e("div",Gp,[e("div",Yp,[I(e("input",{"onUpdate:modelValue":n[4]||(n[4]=A=>c.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[N,c.item.dateScheduledStart]]),n[18]||(n[18]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",Wp,[(t(!0),s(q,null,j(o(l).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])])]),c.selected.programTemplate?(t(),s("div",Kp,[e("div",Jp,[e("div",Qp,[e("div",Xp,[I(e("input",{"onUpdate:modelValue":n[5]||(n[5]=A=>c.selected.programTemplate.startOffsetTime=A),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[N,c.selected.programTemplate.startOffsetTime]]),n[19]||(n[19]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Zp,[e("div",ev,[I(e("input",{"onUpdate:modelValue":n[6]||(n[6]=A=>c.selected.programTemplate.endOffsetTime=A),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[N,c.selected.programTemplate.endOffsetTime]]),n[20]||(n[20]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",tv,[e("div",sv,[I(e("input",{"onUpdate:modelValue":n[7]||(n[7]=A=>c.selected.programTemplate.durationTime=A),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[N,c.selected.programTemplate.durationTime]]),n[21]||(n[21]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",ov,[e("div",av,[e("div",lv,[I(e("input",{"onUpdate:modelValue":n[8]||(n[8]=A=>c.selected.programTemplate.adBreaksDurationTime=A),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[N,c.selected.programTemplate.adBreaksDurationTime]]),n[22]||(n[22]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",nv,[e("div",rv,[I(e("input",{"onUpdate:modelValue":n[9]||(n[9]=A=>c.selected.programTemplate.totalProgramTemplateDurationTime=A),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[N,c.selected.programTemplate.totalProgramTemplateDurationTime]]),n[23]||(n[23]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",iv,[e("div",dv,[e("div",uv,[I(e("input",{"onUpdate:modelValue":n[10]||(n[10]=A=>c.selected.programTemplate.sourceLocation.name=A),id:"name",class:"form-control",disabled:""},null,512),[[N,c.selected.programTemplate.sourceLocation.name]]),n[24]||(n[24]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",cv,[e("div",mv,[I(e("input",{"onUpdate:modelValue":n[11]||(n[11]=A=>c.selected.programTemplate.vodSource.name=A),id:"name",class:"form-control",disabled:""},null,512),[[N,c.selected.programTemplate.vodSource.name]]),n[25]||(n[25]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):T("",!0),n[28]||(n[28]=e("hr",null,null,-1)),c.selected.programTemplate?(t(),s("div",fv,[n[27]||(n[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",pv,[e("table",vv,[n[26]||(n[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(c.selected.programTemplate.adBreaks,(A,le)=>(t(),s("tr",null,[e("td",null,b(le+1),1),e("td",null,b(o(L).moment.utc(A.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(L).moment.utc(A.durationInMillis).format("HH:mm:ss")),1),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,j(c.lookups.adBreakVodSources,X=>(t(),s(q,null,[X.durationInMillis===A.durationInMillis?(t(),s("option",{key:0,value:X.id}," ["+b(o(L).moment.utc(X.durationInMillis).format("HH:mm:ss"))+"] "+b(X.name),9,bv)):T("",!0)],64))),256))],8,gv),[[pe,A.vodSourceId]])])]))),256))])])])])):T("",!0)])]),e("div",yv,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:n[12]||(n[12]=A=>V()),class:"btn btn-primary",type:"button"},n[29]||(n[29]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$v),e("button",{onClick:n[13]||(n[13]=A=>a(!1)),class:"btn btn-secondary ms-1"},n[30]||(n[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,xp))}},hv=["id"],_v={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},kv={class:"modal-content"},Sv={class:"modal-header bg-primary text-white"},Tv={class:"modal-title",id:"exampleModalLabel"},Mv={class:"modal-body"},Cv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Iv=["innerHTML"],xv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Pv={key:2,class:"container"},Vv={class:"row row-cols-1 row-cols-sm-3"},Uv={class:"col"},Ov={class:"form-floating mb-2"},Av={id:"name",class:"form-control",placeholder:"Name"},Dv={key:0,class:"text-wrap"},Hv={class:"badge bg-info"},Ev={key:0,class:"d-block invalid-feedback"},Lv={class:"col"},Bv={class:"form-floating mb-2"},qv={key:0,class:"d-block invalid-feedback"},Nv={class:"col"},Rv={class:"form-floating mb-2"},zv={key:0,class:"d-block invalid-feedback"},Fv={key:0},jv={class:"row row-cols-1 row-cols-sm-3"},Gv={class:"col"},Yv={class:"form-floating mb-2"},Wv={class:"col"},Kv={class:"form-floating mb-2"},Jv={class:"col"},Qv={class:"form-floating mb-2"},Xv={class:"row row-cols-1 row-cols-sm-2"},Zv={class:"col"},eg={class:"form-floating mb-2"},tg={class:"col"},sg={class:"form-floating mb-2"},og={class:"row row-cols-1 row-cols-sm-2"},ag={key:0,class:"col"},lg={class:"form-floating mb-2"},ng={key:1,class:"col"},rg={class:"form-floating mb-2"},ig={key:1},dg={class:"table-responsive border mt-1"},ug={class:"table mb-0"},cg=["onUpdate:modelValue"],mg=["value"],fg={class:"modal-footer"},pg=["disabled"],ot={__name:"_editProgram",emits:["onClose"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=w,K=ae(),i=ae("modalEditProgram"),c=ue({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),P={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},l=ye(P,c);ne(async()=>{l.value.$reset()});const O=async(m,g)=>{K.value=m;const p=c;if(G.value.clear(),E.value="",p.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},p.item=null,await f(),g){const n=L.moment(g).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=n}await r(),l.value.$reset();var Y=document.getElementById(i.value),x=$e.getOrCreateInstance(Y);x.show()},a=async m=>{if(!m){W("onClose",m);var x=document.getElementById(i.value),se=$e.getOrCreateInstance(x);se.hide();return}const g=c,p=L.moment(g.item.dateScheduledStart).utc().format(),Y={programId:K.value,name:g.item.name,dateScheduledStart:p,adBreaks:g.item.adBreaks.map(H=>({sourceLocationId:g.item.sourceLocationId,vodSourceId:H.vodSourceId,offsetMillis:H.offsetMillis,durationInMillis:H.durationInMillis}))};try{await F.put("/api/v1/programs/",Y).then(n=>{$.success("Edit Program","Program was edited.")})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0);return}finally{}W("onClose",m);var x=document.getElementById(i.value),se=$e.getOrCreateInstance(x);se.hide()},V=async()=>{await a(!0)},f=async()=>{try{const m=`/api/v1/programs/${K.value}/`;await F.get(m).then(Y=>{c.item=Y.data;const x=c.item,n=L.moment(x.dateScheduledStart).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=n,x.startOffsetTime=L.moment.utc(x.startOffsetMillis).format("HH:mm:ss"),x.endOffsetTime=L.moment.utc(x.endOffsetMillis).format("HH:mm:ss"),x.durationTime=L.moment.utc(x.durationInMillis).format("HH:mm:ss"),x.adBreaksDurationTime=L.moment.utc(x.adBreaksDurationInMillis).format("HH:mm:ss"),x.totalProgramTemplateDurationTime=L.moment.utc(x.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const g=c,p=g.item.channel.outputs[0].outputType;await v(g.item.sourceLocationId,p)}catch(m){E.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},r=async()=>{},v=async(m,g)=>{try{let p=`/api/v1/vodsources/lookup/source-location/${m}/output-type/${g}`;await F.get(p).then(Y=>{c.lookups.adBreakVodSources=Y.data})}catch(p){E.value=L.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}};return u({open:O,close:a}),(m,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",_v,[e("div",kv,[e("div",Sv,[e("h5",Tv,b(o(_))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=p=>a(!1)),"aria-label":"Close"})]),e("div",Mv,[o(E)?(t(),s("div",Cv,[g[12]||(g[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Iv)])):T("",!0),o(G).size>0?(t(),s("div",xv,[g[13]||(g[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),p=>(t(),s("li",null,b(p),1))),256))])])):T("",!0),c.item?(t(),s("div",Pv,[e("div",Vv,[e("div",Uv,[e("div",Ov,[e("div",Av,[c.item.relativeProgram?(t(),s("span",Dv,[B(b(c.item.relativeProgram.name)+" - ",1),e("span",Hv,b(o(L).moment(c.item.relativeProgram.scheduledDateStart).format("DD/MM/YYYY HH:mm a")),1)])):T("",!0)]),g[14]||(g[14]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(l).item.name.$error?(t(),s("div",Ev,[(t(!0),s(q,null,j(o(l).item.name.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):T("",!0)])]),e("div",Lv,[e("div",Bv,[I(e("input",{"onUpdate:modelValue":g[1]||(g[1]=p=>c.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),g[15]||(g[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",qv,[(t(!0),s(q,null,j(o(l).item.name.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):T("",!0)])]),e("div",Nv,[e("div",Rv,[I(e("input",{"onUpdate:modelValue":g[2]||(g[2]=p=>c.item.dateScheduledStart=p),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[N,c.item.dateScheduledStart]]),g[16]||(g[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",zv,[(t(!0),s(q,null,j(o(l).item.dateScheduledStart.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):T("",!0)])])]),c.item?(t(),s("div",Fv,[e("div",jv,[e("div",Gv,[e("div",Yv,[I(e("input",{"onUpdate:modelValue":g[3]||(g[3]=p=>c.item.startOffsetTime=p),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[N,c.item.startOffsetTime]]),g[17]||(g[17]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Wv,[e("div",Kv,[I(e("input",{"onUpdate:modelValue":g[4]||(g[4]=p=>c.item.endOffsetTime=p),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[N,c.item.endOffsetTime]]),g[18]||(g[18]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Jv,[e("div",Qv,[I(e("input",{"onUpdate:modelValue":g[5]||(g[5]=p=>c.item.durationTime=p),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[N,c.item.durationTime]]),g[19]||(g[19]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Xv,[e("div",Zv,[e("div",eg,[I(e("input",{"onUpdate:modelValue":g[6]||(g[6]=p=>c.item.adBreaksDurationTime=p),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[N,c.item.adBreaksDurationTime]]),g[20]||(g[20]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",tg,[e("div",sg,[I(e("input",{"onUpdate:modelValue":g[7]||(g[7]=p=>c.item.totalProgramTemplateDurationTime=p),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[N,c.item.totalProgramTemplateDurationTime]]),g[21]||(g[21]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",og,[c.item.sourceLocation?(t(),s("div",ag,[e("div",lg,[I(e("input",{"onUpdate:modelValue":g[8]||(g[8]=p=>c.item.sourceLocation.name=p),id:"name",class:"form-control",disabled:""},null,512),[[N,c.item.sourceLocation.name]]),g[22]||(g[22]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):T("",!0),c.item.vodSource?(t(),s("div",ng,[e("div",rg,[I(e("input",{"onUpdate:modelValue":g[9]||(g[9]=p=>c.item.vodSource.name=p),id:"name",class:"form-control",disabled:""},null,512),[[N,c.item.vodSource.name]]),g[23]||(g[23]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):T("",!0)])])):T("",!0),g[26]||(g[26]=e("hr",null,null,-1)),c.item?(t(),s("div",ig,[g[25]||(g[25]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",dg,[e("table",ug,[g[24]||(g[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(c.item.adBreaks,(p,Y)=>(t(),s("tr",null,[e("td",null,b(Y+1),1),e("td",null,b(o(L).moment.utc(p.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(L).moment.utc(p.durationInMillis).format("HH:mm:ss")),1),e("td",null,[I(e("select",{"onUpdate:modelValue":x=>p.vodSourceId=x,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,j(c.lookups.adBreakVodSources,x=>(t(),s(q,null,[x.durationInMillis===p.durationInMillis?(t(),s("option",{key:0,value:x.id}," ["+b(o(L).moment.utc(x.durationInMillis).format("HH:mm:ss"))+"] "+b(x.name),9,mg)):T("",!0)],64))),256))],8,cg),[[pe,p.vodSourceId]])])]))),256))])])])])):T("",!0)])):T("",!0)]),e("div",fg,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:g[10]||(g[10]=p=>V()),class:"btn btn-primary ms-2",type:"button"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pg),e("button",{onClick:g[11]||(g[11]=p=>a(!1)),class:"btn btn-secondary ms-1"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,hv))}},vg={class:"d-flex justify-content-end"},gg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(d){const{appTitle:u,pageTitle:w,busy:_,infoMessage:y,warningMessage:z,errorMessage:S,router:G,axios:R,utils:k,toasts:E,close:J,security:F}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),L=d,$=ae(null),C=ae(null),h=ae(null),W={viewType:"Week",cellDuration:15,startDate:Ie.DayPilot.Date.today(),onTimeRangeSelected:f=>{var r=f.control;const v={start:f.start,end:f.end,id:Ie.DayPilot.guid(),text:"NEW",tags:{type:"new"}};r.events.add(v);var m=r.events.find(v.id);O(m)},onBeforeEventRender:f=>{if(f.data.barColor="green",!!f.data.tags)switch(f.data.tags.type){case"new":f.data.barColor="yellow";break;case"business":f.data.barColor="#3498db";break;case"personal":f.data.barColor="#2ecc71";break;case"vacation":f.data.barColor="#f1c40f";break;default:f.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:async f=>{const r=f.newStart.value,v=f.e.id(),m=k.moment(r).utc().format();try{let g="/api/v1/programs/scheduled-date-start";const p={programId:v,dateScheduledStart:m};await R.put(g,p).then(Y=>{E.success("Program date scheduled start was edited.")})}catch(g){S.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0);return}finally{}await P()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async f=>{var r=f.e.id();V(r)},contextMenu:new Ie.DayPilot.Menu([{text:"Clone",onClick:async f=>{const r=f.source.id();try{let v=`/api/v1/programs/${r}/clone`;await R.post(v).then(m=>{E.success("Clone Program","Program was cloned.")})}catch(v){S.value=k.getErrorMessageAsHtml(v),window.scrollTo(0,0);return}finally{await P()}}},{text:"Delete",onClick:async f=>{if(!confirm("Do you want to remove this program?"))return;const v=f.source.id();try{let m=`/api/v1/programs/${v}/`;await R.delete(m).then(g=>{E.success("Delete Program","Program was deleted.")}),$.value.control.events.remove(f.source)}catch(m){S.value=k.getErrorMessageAsHtml(m),window.scrollTo(0,0);return}finally{await P()}}}])},K=ae([]),i=()=>{$.value.control.update({events:K.value})},c=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});ne(async()=>{await P()});const P=async()=>{await l(),await i()},l=async()=>{const f=c;if(!_.value)try{_.value=!0,S.value="";const r=`/api/v1/channels/${L.id}/`;await R.get(r).then(v=>{f.item=v.data;const m=f.item.outputs,g=f.item.programs.map(p=>{let Y=`${p.name}`,x=`[${p.name}]`;return p.relativeProgram&&(x+=` => [${p.relativeProgram.name}]`),{start:k.moment(p.dateScheduledStart).utc(!0).format(),end:k.moment(p.dateScheduledEnd).utc(!0).format(),id:p.programId,text:Y,toolTip:x}});K.value=g})}catch(r){S.value=k.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{_.value=!1}},O=f=>{C.value.open(L.id,f.id(),f.start().value)},a=async(f,r)=>{var v=$.value,m=v.control.events.find(f.eventId);if(!r&&m){$.value.control.events.remove(m);return}v.control.events.find(H=>H.text()==f.name)&&(alert("Program already exists in this channel. Removing in the calendar."),$.value.control.events.remove(m));const p=k.moment(f.dateScheduledStart).utc(!0).format(),Y=k.moment(f.dateScheduledEnd).utc(!0).format(),x=new Ie.DayPilot.Date(p),se=new Ie.DayPilot.Date(Y);m.text(f.name),m.start(new Ie.DayPilot.Date(x)),m.end(new Ie.DayPilot.Date(se)),m.data.tags.program=f,m.commit(),$.value.control.update(),await R.post("/api/v1/programs/from-template/",f).then(H=>{E.success("Add New Program",`Program [${f.name}] was added to this channel.`)},H=>{const n=k.getErrorMessageAsHtml(H);alert(n)}),await P()},V=(f,r)=>{h.value.open(f,r)};return(f,r)=>{const v=Q("router-link"),m=Q("PageHeader"),g=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(m,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(w),"header-break":"row row-cols-2"},{default:U(()=>[e("div",vg,[e("button",{onClick:r[0]||(r[0]=p=>P()),class:"btn btn-secondary ms-1"},r[1]||(r[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),D(v,{to:`${d.urlView}/${d.id}`,class:"btn btn-secondary ms-1"},{default:U(()=>r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),D(g,{errorMessage:o(S),vuelidate:f.v$},{default:U(()=>[e("div",null,[D(o(Ie.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:$},null,512),D(wv,{ref_key:"modalAddProgram",ref:C,onOnClose:a},null,512),D(ot,{ref_key:"modalEditProgram",ref:h,onOnClose:P},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},bg=["id"],yg={class:"modal-dialog modal-xl modal-fullscreen-md-down"},$g={class:"modal-content"},wg={class:"modal-header bg-primary text-white"},hg={class:"modal-title",id:"exampleModalLabel"},_g={class:"modal-body"},kg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Sg=["innerHTML"],Tg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Mg={class:"container"},Cg={class:"row row-cols-1 row-cols-sm-3"},Ig={class:"col"},xg={class:"form-floating mb-2"},Pg=["disabled"],Vg=["value"],Ug={class:"col"},Og={class:"form-floating mb-2"},Ag={key:0,class:"d-block invalid-feedback"},Dg={class:"col"},Hg={class:"form-floating mb-2"},Eg={key:0,class:"d-block invalid-feedback"},Lg={class:"row row-cols-sm-2"},Bg={class:"col"},qg={class:"form-floating mb-2"},Ng=["value"],Rg={key:0,class:"d-block invalid-feedback"},zg={class:"col"},Fg={class:"form-floating mb-2"},jg=["value"],Gg={key:0,class:"d-block invalid-feedback"},Yg={class:"col"},Wg={class:"input-group mb-1"},Kg={class:"form-floating"},Jg={key:0,class:"input-group-text"},Qg={key:0},Xg={key:1},Zg={key:2},e1={key:3,class:"d-block invalid-feedback"},t1={class:"col"},s1={class:"input-group mb-1"},o1={class:"form-floating"},a1={key:0,class:"input-group-text"},l1={key:0},n1={key:1},r1={key:2,class:"d-block invalid-feedback"},i1={class:"table-responsive border mt-1"},d1={class:"table"},u1={class:"input-group mb-1"},c1=["onUpdate:modelValue"],m1={key:0,class:"input-group-text"},f1=["onUpdate:modelValue"],p1=["value"],v1=["onUpdate:modelValue"],g1=["value"],b1=["onClick"],y1={class:"modal-footer"},$1=["disabled"],w1={__name:"_addProgram",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=w,K=ae(),i=ae("modalAddProgram"),c=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),P={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:Z.withMessage("Date Scheduled Start is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:Z.withMessage("startOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:Z.withMessage("endOffsetMillis is required.",ee),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},l=ye(P,c);ne(async()=>{l.value.$reset()});const O=async H=>{K.value=H;const n=c;G.value.clear(),E.value="";const A=L.moment().local().add(2,"m"),X=A.format("YYYY-MM-DD HH:mm"),fe=A.format("YYYY_MM_DD")+"_PROGRAM_";n.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},n.item={name:fe,relativeProgramId:null,dateScheduledStart:X,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await f(),l.value.$reset();var _e=document.getElementById(i.value),Me=$e.getOrCreateInstance(_e);Me.show()},a=async()=>{var H=document.getElementById(i.value),n=$e.getOrCreateInstance(H);n.hide(),W("refresh")},V=async()=>{const H=c;if(z.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const le=H.item;delete le.vodSource,le.channelId=K.value;var A=le.dateScheduledStart;le.dateScheduledStart=L.moment(A).utc().format(),await F.post("/api/v1/programs/",le).then(X=>{$.success("Add Program","Program added to Channel",{async onClose(){}})}),await a()}catch(le){E.value=L.getErrorMessageAsHtml(le),window.scrollTo(0,0)}finally{z.value=!1}},f=async()=>{await r(),await m(),await p()},r=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.sourceLocations=n.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await v(c.item.sourceLocationId)}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},v=async H=>{try{let n=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(n).then(A=>{c.lookups.vodSources=A.data})}catch(n){E.value=L.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},m=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.adBreakSourceLocations=n.data})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},g=async H=>{try{let n=`/api/v1/vodSources/lookup/source-location/${H}`;await F.get(n).then(A=>{c.lookups.adBreakVodSources=A.data})}catch(n){E.value=L.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},p=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${K.value}`;await F.get(H).then(n=>{if(c.lookups.channelPrograms=n.data,c.lookups.channelPrograms.length===1){const le=c.lookups.channelPrograms[0];c.item.relativeProgramId=le.id}})}catch(H){E.value=L.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},Y=()=>{const H={offsetMillis:0,sourceLocationId:null,vodSourceId:null},n=c.item.adBreaks.length;if(n>0){const A=c.item.adBreaks[n-1];H.offsetMillis=A.offsetMillis+1e4}c.item.adBreaks.push(H)},x=H=>{c.item.adBreaks.splice(H,1)},se=()=>{const H=c.item.vodSource;c.item.vodSourceId=H.id};return u({open:O,close:a}),(H,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",yg,[e("div",$g,[e("div",wg,[e("h5",hg,b(o(_))+" - "+b(o(y)),1),n[11]||(n[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",_g,[o(E)?(t(),s("div",kg,[n[12]||(n[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Sg)])):T("",!0),o(G).size>0?(t(),s("div",Tg,[n[13]||(n[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),A=>(t(),s("li",null,b(A),1))),256))])])):T("",!0),e("div",Mg,[e("div",Cg,[e("div",Ig,[e("div",xg,[I(e("select",{"onUpdate:modelValue":n[0]||(n[0]=A=>c.item.relativeProgramId=A),class:"form-select",id:"sourceLocationId",disabled:c.lookups.channelPrograms.length<=0},[(t(!0),s(q,null,j(c.lookups.channelPrograms,A=>(t(),s("option",{value:A.id},b(A.name),9,Vg))),256))],8,Pg),[[pe,c.item.relativeProgramId]]),n[14]||(n[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",Ug,[e("div",Og,[I(e("input",{"onUpdate:modelValue":n[1]||(n[1]=A=>c.item.name=A),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),n[15]||(n[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",Ag,[(t(!0),s(q,null,j(o(l).item.name.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])]),e("div",Dg,[e("div",Hg,[I(e("input",{"onUpdate:modelValue":n[2]||(n[2]=A=>c.item.dateScheduledStart=A),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[N,c.item.dateScheduledStart]]),n[16]||(n[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(l).item.dateScheduledStart.$error?(t(),s("div",Eg,[(t(!0),s(q,null,j(o(l).item.dateScheduledStart.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])])]),e("div",Lg,[e("div",Bg,[e("div",qg,[I(e("select",{"onUpdate:modelValue":n[3]||(n[3]=A=>c.item.sourceLocationId=A),onChange:n[4]||(n[4]=A=>v(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j(c.lookups.sourceLocations,A=>(t(),s("option",{value:A.id},b(A.name),9,Ng))),256))],544),[[pe,c.item.sourceLocationId]]),n[17]||(n[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(l).item.sourceLocationId.$error?(t(),s("div",Rg,[(t(!0),s(q,null,j(o(l).item.sourceLocationId.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])]),e("div",zg,[e("div",Fg,[I(e("select",{"onUpdate:modelValue":n[5]||(n[5]=A=>c.item.vodSource=A),onChange:n[6]||(n[6]=A=>se()),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,j(c.lookups.vodSources,A=>(t(),s("option",{value:A},b(A.name),9,jg))),256))],544),[[pe,c.item.vodSource]]),n[18]||(n[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(l).item.vodSourceId.$error?(t(),s("div",Gg,[(t(!0),s(q,null,j(o(l).item.vodSourceId.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])]),e("div",Yg,[e("div",Wg,[e("div",Kg,[I(e("input",{"onUpdate:modelValue":n[7]||(n[7]=A=>c.item.startOffsetMillis=A),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[N,c.item.startOffsetMillis]]),n[19]||(n[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),c.item.startOffsetMillis>0?(t(),s("span",Jg,b(o(L).moment.utc(c.item.startOffsetMillis).format("HH:mm:ss")),1)):T("",!0)]),c.item.startOffsetMillis>0&&c.item.startOffsetMillis<3e4?(t(),s("div",Qg,n[20]||(n[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):T("",!0),c.item.startOffsetMillis>c.item.endOffsetMillis&&c.item.endOffsetMillis>0?(t(),s("div",Xg,n[21]||(n[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):T("",!0),c.item.vodSource&&c.item.startOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",Zg,n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):T("",!0),o(l).item.startOffsetMillis.$error?(t(),s("div",e1,[(t(!0),s(q,null,j(o(l).item.startOffsetMillis.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)]),e("div",t1,[e("div",s1,[e("div",o1,[I(e("input",{"onUpdate:modelValue":n[8]||(n[8]=A=>c.item.endOffsetMillis=A),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[N,c.item.endOffsetMillis]]),n[23]||(n[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),c.item.endOffsetMillis>0?(t(),s("span",a1,b(o(L).moment.utc(c.item.endOffsetMillis).format("HH:mm:ss")),1)):T("",!0)]),c.item.endOffsetMillis>0&&c.item.endOffsetMillis<3e4?(t(),s("div",l1,n[24]||(n[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):T("",!0),c.item.vodSource&&c.item.endOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",n1,n[25]||(n[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):T("",!0),o(l).item.endOffsetMillis.$error?(t(),s("div",r1,[(t(!0),s(q,null,j(o(l).item.endOffsetMillis.$errors,A=>(t(),s("div",{key:A.$uid},b(A.$message),1))),128))])):T("",!0)])]),n[29]||(n[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[n[26]||(n[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:Y,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",i1,[e("table",d1,[n[28]||(n[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(q,null,j(c.item.adBreaks,(A,le)=>(t(),s("tr",null,[e("td",null,b(le+1),1),e("td",null,[e("div",u1,[I(e("input",{"onUpdate:modelValue":X=>A.offsetMillis=X,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,c1),[[N,A.offsetMillis]]),A.offsetMillis>0?(t(),s("span",m1,b(o(L).moment.utc(A.offsetMillis).format("HH:mm:ss")),1)):T("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.sourceLocationId=X,onChange:n[9]||(n[9]=X=>g(c.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(q,null,j(c.lookups.adBreakSourceLocations,X=>(t(),s("option",{value:X.id},b(X.name),9,p1))),256))],40,f1),[[pe,A.sourceLocationId]])]),e("td",null,[I(e("select",{"onUpdate:modelValue":X=>A.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(q,null,j(c.lookups.adBreakVodSources,X=>(t(),s("option",{value:X.id},b(X.name),9,g1))),256))],8,v1),[[pe,A.vodSourceId]])]),e("td",null,[e("button",{onClick:X=>x(le),class:"btn btn-outline-warning"},n[27]||(n[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,b1)])]))),256))])])])])])]),e("div",y1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:n[10]||(n[10]=A=>V()),class:"btn btn-primary",type:"button"},n[30]||(n[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$1),n[31]||(n[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,bg))}},h1=["id"],_1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},k1={class:"modal-content"},S1={class:"modal-header bg-primary","data-bs-theme":"dark"},T1={class:"modal-title",id:"exampleModalLabel"},M1={class:"modal-body"},C1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},I1=["innerHTML"],x1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},P1={class:"container"},V1={class:"col"},U1={class:"form-floating mb-2"},O1={class:"col"},A1={class:"form-floating mb-2"},D1={key:0,class:"d-block invalid-feedback"},H1={class:"col"},E1={class:"form-floating mb-2 d-none"},L1={key:0,class:"d-block invalid-feedback"},B1={class:"col"},q1={class:"form-floating mb-2"},N1={key:0,class:"d-block invalid-feedback"},R1={class:"modal-footer"},z1=["disabled"],F1={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=w,K=ae(),i=ae("modalAddPlaybackConfiguration"),c=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),P={item:{name:{required:Z.withMessage("Name is required.",ee),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:Z.withMessage("adDecisionServerUrl is required.",ee),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:Z.withMessage("videoContentSourceUrl is required.",ee),$autoDirty:!0,$lazy:!0}}},l=ye(P,c);ne(async()=>{l.value.$reset()});const O=async(f,r)=>{K.value=f;const v=c;G.value.clear(),E.value="";const m=r,g=m.lastIndexOf("/"),p=m.substring(0,g),Y=m.substring(g+1).replace(".","_");v.item={name:Y,originalVideoContentSourceUrl:r,videoContentSourceUrl:p,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},l.value.$reset();var x=document.getElementById(i.value),se=$e.getOrCreateInstance(x);se.show()},a=async()=>{var f=document.getElementById(i.value),r=$e.getOrCreateInstance(f);r.hide(),W("refresh")},V=async()=>{const f=c;if(z.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const v=f.item;v.channelOutputId=K.value,await F.put("/api/v1/channelOutputs/playback/",v).then(m=>{$.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await a()}catch(v){E.value=L.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:O,close:a}),(f,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",_1,[e("div",k1,[e("div",S1,[e("h5",T1,b(o(_))+" - "+b(o(y)),1),r[5]||(r[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",M1,[o(E)?(t(),s("div",C1,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,I1)])):T("",!0),o(G).size>0?(t(),s("div",x1,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),v=>(t(),s("li",null,b(v),1))),256))])])):T("",!0),e("div",P1,[e("div",V1,[e("div",U1,[I(e("textarea",{"onUpdate:modelValue":r[0]||(r[0]=v=>c.item.originalVideoContentSourceUrl=v),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[N,c.item.originalVideoContentSourceUrl]]),r[8]||(r[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",O1,[e("div",A1,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[N,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(l).item.name.$error?(t(),s("div",D1,[(t(!0),s(q,null,j(o(l).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):T("",!0)])]),e("div",H1,[e("div",E1,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>c.item.videoContentSourceUrl=v),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[N,c.item.videoContentSourceUrl]]),r[10]||(r[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),r[11]||(r[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(l).item.videoContentSourceUrl.$error?(t(),s("div",L1,[(t(!0),s(q,null,j(o(l).item.videoContentSourceUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):T("",!0)])]),e("div",B1,[e("div",q1,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>c.item.adDecisionServerUrl=v),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[N,c.item.adDecisionServerUrl]]),r[12]||(r[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(l).item.adDecisionServerUrl.$error?(t(),s("div",N1,[(t(!0),s(q,null,j(o(l).item.adDecisionServerUrl.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):T("",!0)])])])]),e("div",R1,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:r[4]||(r[4]=v=>V()),class:"btn btn-primary",type:"button"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,z1),r[14]||(r[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,h1))}},j1=["id"],G1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Y1={class:"modal-content"},W1={class:"modal-header bg-primary text-white"},K1={class:"modal-title",id:"exampleModalLabel"},J1={class:"modal-body"},Q1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},X1=["innerHTML"],Z1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},eb={class:"container"},tb={class:"col"},sb={class:"form-floating mb-2"},ob=["value"],ab={key:0,class:"d-block invalid-feedback"},lb={class:"col"},nb={class:"form-floating mb-2"},rb={key:0,class:"d-block invalid-feedback"},ib={class:"col"},db={class:"form-floating mb-2"},ub={key:0,class:"d-block invalid-feedback"},cb={class:"modal-footer"},mb=["disabled"],fb={__name:"_addChannelOutput",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=w,K=ae(),i=ae("modalAddChannelOutput"),c=ue({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),P={item:{sourceGroupId:{required:Z.withMessage("Source Group is required.",ee),$autoDirty:!0,$lazy:!0},manifestName:{required:Z.withMessage("Manifest Name is required.",ee),$autoDirty:!0,$lazy:!0},outputType:{required:Z.withMessage("Output Type is required.",ee),$autoDirty:!0,$lazy:!0}}},l=ye(P,c);ne(async()=>{l.value.$reset()});const O=async()=>{await a()},a=async()=>{try{await F.get("/api/v1/sourceGroups/lookup/").then(m=>{c.lookups.sourceGroups=m.data,c.lookups.sourceGroups.length===1&&(c.item.sourceGroupId=c.lookups.sourceGroups[0].id)})}catch(v){E.value=L.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},V=async v=>{K.value=v;const m=c;G.value.clear(),E.value="",m.lookups={sourceGroups:[]},m.item={sourceGroupId:null,outputType:null},await O(),l.value.$reset();var g=document.getElementById(i.value),p=$e.getOrCreateInstance(g);p.show()},f=async()=>{var v=document.getElementById(i.value),m=$e.getOrCreateInstance(v);m.hide(),W("refresh")},r=async()=>{const v=c;if(z.value)return;if(!await l.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const g=v.item;g.channelId=K.value,await F.post("/api/v1/channelOutputs",g).then(p=>{$.success("Add Channel Output","Channel output added.")}),await f()}catch(g){E.value=L.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{z.value=!1}};return u({open:V,close:f}),(v,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:i.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",G1,[e("div",Y1,[e("div",W1,[e("h5",K1,b(o(_))+" - "+b(o(y)),1),m[4]||(m[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",J1,[o(E)?(t(),s("div",Q1,[m[5]||(m[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,X1)])):T("",!0),o(G).size>0?(t(),s("div",Z1,[m[6]||(m[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),g=>(t(),s("li",null,b(g),1))),256))])])):T("",!0),e("div",eb,[e("div",tb,[e("div",sb,[I(e("select",{"onUpdate:modelValue":m[0]||(m[0]=g=>c.item.sourceGroupId=g),class:"form-select",id:"sourceGroupId"},[(t(!0),s(q,null,j(c.lookups.sourceGroups,g=>(t(),s("option",{value:g.id},b(g.name),9,ob))),256))],512),[[pe,c.item.sourceGroupId]]),m[7]||(m[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(l).item.sourceGroupId.$error?(t(),s("div",ab,[(t(!0),s(q,null,j(o(l).item.sourceGroupId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):T("",!0)])]),e("div",lb,[e("div",nb,[I(e("select",{"onUpdate:modelValue":m[1]||(m[1]=g=>c.item.outputType=g),class:"form-select",id:"outputType"},m[8]||(m[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,c.item.outputType]]),m[9]||(m[9]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(l).item.outputType.$error?(t(),s("div",rb,[(t(!0),s(q,null,j(o(l).item.outputType.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):T("",!0)])]),e("div",ib,[e("div",db,[I(e("input",{"onUpdate:modelValue":m[2]||(m[2]=g=>c.item.manifestName=g),class:"form-control",id:"manifestName"},null,512),[[N,c.item.manifestName]]),m[10]||(m[10]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(l).item.manifestName.$error?(t(),s("div",ub,[(t(!0),s(q,null,j(o(l).item.manifestName.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):T("",!0)])])])]),e("div",cb,[e("button",{disabled:o(l).$dirty&&o(l).$invalid,onClick:m[3]||(m[3]=g=>r()),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mb),m[12]||(m[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,j1))}},pb=["id"],vb={class:"modal-dialog modal-xl modal-fullscreen-md-down"},gb={class:"modal-content"},bb={class:"modal-header bg-primary text-white"},yb={class:"modal-title",id:"exampleModalLabel"},$b={class:"modal-body"},wb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hb=["innerHTML"],_b={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kb={class:"container"},Sb={class:"col"},Tb={class:"form-floating mb-2"},Mb=["value"],Cb={key:0,class:"d-block invalid-feedback"},Ib={class:"col"},xb={class:"form-floating mb-2"},Pb=["value"],Vb={key:0,class:"d-block invalid-feedback"},Ub={class:"modal-footer"},Ob=["disabled"],Ab={__name:"_editFillerSlate",emits:["refresh"],setup(d,{expose:u,emit:w}){const{appTitle:_,pageTitle:y,busy:z,isDirty:S,validations:G,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:F,utils:L,toasts:$,closeWithReturnUrl:C,security:h}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=w,K=ae("modalEditFillerSlate"),i=ue({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null}}),c={item:{channelId:{required:Z.withMessage("channelId is required.",ee),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:Z.withMessage("sourceLocationId is required.",ee),$autoDirty:!0,$lazy:!0},vodSourceId:{required:Z.withMessage("vodSourceId is required.",ee),$autoDirty:!0,$lazy:!0}}},P=ye(c,i);ne(async()=>{P.value.$reset()});const l=async()=>{await O()},O=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(g=>{i.lookups.sourceLocations=g.data}),i.item.sourceLocationId&&await a(i.item.sourceLocationId)}catch(m){E.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},a=async m=>{try{let g=`/api/v1/vodSources/lookup/source-Location/${m}/`;await F.get(g).then(p=>{i.lookups.vodSources=p.data})}catch(g){E.value=L.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},V=async(m,g,p)=>{const Y=i;G.value.clear(),E.value="",Y.lookups={sourceLocations:[],vodSources:[]},Y.item={channelId:m,sourceLocationId:g,vodSourceId:p},await l(),P.value.$reset();var x=document.getElementById(K.value),se=$e.getOrCreateInstance(x);se.show()},f=async()=>{var m=document.getElementById(K.value),g=$e.getOrCreateInstance(m);g.hide(),W("refresh")},r=async()=>{const m=i;if(z.value)return;if(!await P.value.$validate()){window.scrollTo(0,0);return}try{z.value=!0,E.value="";const p=m.item;await F.put("/api/v1/channels/filler-slate",p).then(Y=>{$.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await f()}catch(p){E.value=L.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{z.value=!1}},v=async()=>{i.item.vodSourceId=null,await a(i.item.sourceLocationId)};return u({open:V,close:f}),(m,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:K.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vb,[e("div",gb,[e("div",bb,[e("h5",yb,b(o(_))+" - "+b(o(y)),1),g[4]||(g[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",$b,[o(E)?(t(),s("div",wb,[g[5]||(g[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,hb)])):T("",!0),o(G).size>0?(t(),s("div",_b,[g[6]||(g[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(o(G).values(),p=>(t(),s("li",null,b(p),1))),256))])])):T("",!0),e("div",kb,[e("div",Sb,[e("div",Tb,[I(e("select",{"onUpdate:modelValue":g[0]||(g[0]=p=>i.item.sourceLocationId=p),onChange:g[1]||(g[1]=p=>v()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(q,null,j(i.lookups.sourceLocations,p=>(t(),s("option",{value:p.id},b(p.name),9,Mb))),256))],544),[[pe,i.item.sourceLocationId]]),g[7]||(g[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(P).item.sourceLocationId.$error?(t(),s("div",Cb,[(t(!0),s(q,null,j(o(P).item.sourceLocationId.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):T("",!0)])]),e("div",Ib,[e("div",xb,[I(e("select",{"onUpdate:modelValue":g[2]||(g[2]=p=>i.item.vodSourceId=p),class:"form-select",id:"vodSourceId"},[(t(!0),s(q,null,j(i.lookups.vodSources,p=>(t(),s("option",{value:p.id},b(p.name),9,Pb))),256))],512),[[pe,i.item.vodSourceId]]),g[8]||(g[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(P).item.vodSourceId.$error?(t(),s("div",Vb,[(t(!0),s(q,null,j(o(P).item.vodSourceId.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):T("",!0)])])])]),e("div",Ub,[e("button",{disabled:o(P).$dirty&&o(P).$invalid,onClick:g[3]||(g[3]=p=>r()),class:"btn btn-primary",type:"button"},g[9]||(g[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ob),g[10]||(g[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,pb))}},Db={class:"d-flex flex-row justify-content-end"},Hb={key:0,class:"dropdown"},Eb={key:0,class:"fas fa-fw fa-play"},Lb={key:1,class:"fas fa-fw fa-stop"},Bb={class:"dropdown-menu"},qb={key:0},Nb={key:1},Rb={key:0},zb={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Fb={class:"nav-item",role:"presentation"},jb={class:"nav-item",role:"presentation"},Gb={class:"nav-item",role:"presentation"},Yb={class:"nav-item",role:"presentation"},Wb={class:"tab-content",id:"myTabContent"},Kb={class:"mt-2"},Jb={class:"row row-cols-1 row-cols-sm-3"},Qb={class:"col"},Xb={class:"form-floating mb-2"},Zb={class:"col"},ey={class:"form-floating mb-2"},ty={class:"col"},sy={class:"form-floating mb-2"},oy={class:"d-flex flex-row justify-content-start align-items-center"},ay={key:0,class:"ms-2"},ly={class:"row row-cols-sm-2 mt-1"},ny={class:"col"},ry={class:"form-floating mb-2"},iy={class:"col"},dy={class:"form-floating mb-2"},uy={class:"col mt-2"},cy={class:"form-floating mb-2"},my={class:"mt-2"},fy={class:"d-flex flex-row justify-content-start align-items-center"},py={class:"ms-2"},vy={key:0,class:"alert bg-warning mt-2"},gy={class:"table-responsive border mt-1"},by={class:"table table-bordered1 mb-0"},yy={key:0,class:"text-wrap"},$y={key:1,class:"text-warning"},wy={key:0,class:"text-end"},hy=["onClick"],_y={key:1,class:"text-end"},ky=["onClick"],Sy={key:0},Ty={colspan:"999"},My={class:"d-flex flex-row justify-content-start align-items-center"},Cy={class:"ms-2"},Iy={if:"item.playbackUrl"},xy=["onClick"],Py={key:0,class:"table-responsive border mt-2"},Vy={class:"table mb-0 table-small"},Uy={class:"text-end"},Oy=["onClick"],Ay=["onClick"],Dy=["onClick"],Hy={key:1,class:"mt-2"},Ey={class:"container1"},Ly={class:"row row-cols-1 row-cols-sm-2"},By={class:"col-sm-3"},qy={class:"input-group mb-2"},Ny={class:"form-floating border-success"},Ry=["onUpdate:modelValue"],zy=["onClick"],Fy={class:"col-sm-9"},jy={class:"input-group mb-2"},Gy={class:"form-floating"},Yy=["onUpdate:modelValue"],Wy=["onClick"],Ky={class:"col"},Jy={class:"form-floating mb-2"},Qy=["onUpdate:modelValue"],Xy={class:"mt-2"},Zy={class:"table-responsive border"},e$={class:"table table-hover mb-0 caption-top"},t$={key:0,class:"fas fa-fw fa-check-circle text-success"},s$={class:"badge bg-info"},o$={key:0,class:""},a$={key:1,class:"mt-1"},l$={class:"mt-1"},n$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},r$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},i$={class:"badge bg-info me-2"},d$={class:"text-end"},u$={class:"dropdown"},c$={class:"dropdown-menu"},m$=["onClick"],f$={key:0},p$=["onClick"],v$=["onClick"],g$=["onClick"],b$={class:"text-end mt-2 d-none"},y$={class:"mt-2"},$$={key:0,class:"fas fa-fw fa-check-circle text-success"},w$={key:1,class:"fas fa-fw fa-times-circle text-warning"},h$={key:0,class:"fas fa-fw fa-check-circle text-success"},_$={key:1,class:"fas fa-fw fa-times-circle text-warning"},k$={key:0,class:"fas fa-fw fa-check-circle text-success"},S$={key:1,class:"fas fa-fw fa-times-circle text-warning"},T$={key:0,class:"fas fa-fw fa-check text-warning"},M$={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},C$={key:0,class:"fas fa-fw fa-check-circle text-success"},I$={key:1,class:"fas fa-fw fa-times-circle text-warning"},x$={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(d){const u=d,{appTitle:w,pageTitle:_,busy:y,isDirty:z,validations:S,infoMessage:G,warningMessage:R,errorMessage:k,router:E,axios:J,utils:F,toasts:L,close:$,closeWithReturnUrl:C,generateReturnUrl:h,security:W}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});be("$config");const K=ve();K.user;const i=ue({user:K.user,item:null}),c=ae(null),P=ae(null),l=ae(null),O=ae(null),a=ae(null),V=ae(),f=Oe(()=>i.item&&i.item.state==="RUNNING");ne(async()=>{await g(),V.value=F.getPageTab("channel")||"information-tab"});const r=re=>{F.setPageTab("channel",re),V.value=re},v=re=>re===V.value?"active":"",m=re=>re===V.value?"show active":"",g=async()=>{const re=i;if(!y.value)try{y.value=!0,k.value="",i.item=null;const M=`/api/v1/channels/${u.id}/`;await J.get(M).then(ge=>{re.item=ge.data,re.item.outputs.forEach(De=>{De.playbackConfigurations.forEach(te=>{if(De.playbackUrl){const Ve=De.playbackUrl,ce=Ve.lastIndexOf("/"),Fe=Ve.substring(0,ce),Ee=Ve.substring(ce+1),je=te.hlsConfigurationManifestEndpointPrefix;je&&(te.hlsPlaylist=je+Ee)}})})})}catch(M){k.value=F.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{y.value=!1}},p=async()=>{await g()},Y=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/channels/${u.id}/publish/`).then(M=>{L.success("Publish Channel","Channel was published.")}),y.value=!1,await p()}catch(M){k.value=F.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{y.value=!1}}},x=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/channels/${u.id}/unpublish/`).then(M=>{L.warning("Remove Channel","Channel was removed.")}),y.value=!1,await p()}catch(M){k.value=F.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{y.value=!1}}},se=()=>{c.value.open(u.id)},H=re=>{re.outputType==="HLS"&&P.value.open(re.channelOutputId,re.playbackUrl)},n=()=>{l.value.open(u.id)},A=re=>{O.value.open(re)},le=(re,M)=>{a.value.open(u.id,re,M)},X=async re=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${re}/`).then(ge=>{L.success("Delete Program","Program was deleted..",{async onClose(){}})}),y.value=!1,await p()}catch(ge){k.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},fe=async re=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/channelOutputs/${re}/`).then(ge=>{L.success("Delete Channel Output","Channel output was deleted..")}),y.value=!1,await p()}catch(ge){k.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},_e=async re=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/programs/${re}/publish/`).then(ge=>{L.success("Publish Program","Program was published..",{async onClose(){}})}),y.value=!1,await p()}catch(ge){k.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Me=async re=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${re}/unpublish/`).then(ge=>{L.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),y.value=!1,await p()}catch(ge){k.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Ce=async re=>{if(!y.value){k.value=null;try{y.value=!0,await J.put(`/api/v1/channels/${u.id}/change-state/${re}`).then(M=>{L.success("Update Channel state","Change state was updated")}),y.value=!1,await p()}catch(M){k.value=F.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{y.value=!1}}},Ae=async re=>{if(!y.value)try{y.value=!0,k.value="",await J.post(`/api/v1/channelOutputs/${re}/playback/publish/`).then(M=>{L.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),y.value=!1,await p()}catch(M){k.value=F.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{y.value=!1}},lt=async re=>{if(confirm("Do you want to remove this Playback Configuration?")&&!y.value)try{y.value=!0,k.value="",await J.delete(`/api/v1/channelOutputs/${re}/playback/`).then(ge=>{L.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),y.value=!1,await p()}catch(ge){k.value=F.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}},qe=re=>{const M=`https://www.hlsplayer.org/play?url=${encodeURIComponent(re)}`;window.open(M,"_blank")};return(re,M)=>{const ge=Q("router-link"),ze=Q("PageHeader"),De=Q("PageBody");return t(),ie(de,null,{default:U(()=>[e("div",null,[D(ze,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:U(()=>[e("div",Db,[i.item?(t(),s("div",Hb,[e("button",{class:oe([[f.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[f.value?(t(),s("span",Eb)):(t(),s("span",Lb)),B(" "+b(i.item.state),1)],2),e("ul",Bb,[i.item.arn?(t(),s("li",qb,[f.value?(t(),s("button",{key:0,onClick:M[0]||(M[0]=te=>Ce("STOPPED")),class:"dropdown-item"},M[18]||(M[18]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),B("Stop ")]))):(t(),s("button",{key:1,onClick:M[1]||(M[1]=te=>Ce("RUNNING")),class:"dropdown-item"},M[19]||(M[19]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),B("Start ")])))])):T("",!0),f.value?T("",!0):(t(),s("li",Nb,[i.item.arn?(t(),s("button",{key:0,onClick:M[2]||(M[2]=te=>x()),class:"dropdown-item"},M[20]||(M[20]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),B("Unpublish ")]))):(t(),s("button",{key:1,onClick:M[3]||(M[3]=te=>Y()),class:"dropdown-item"},M[21]||(M[21]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Publish ")])))])),i.item.arn?(t(),s(q,{key:2},[M[23]||(M[23]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:M[4]||(M[4]=te=>Y()),class:"dropdown-item"},M[22]||(M[22]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Republish ")]))])],64)):T("",!0)])])):T("",!0),D(ge,{to:`${d.urlSchedulePrograms}/${d.id}`,class:"ms-2 btn btn-primary"},{default:U(()=>M[24]||(M[24]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:M[5]||(M[5]=te=>p()),class:"ms-2 btn btn-secondary"},M[25]||(M[25]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:M[6]||(M[6]=te=>o(C)(u.urlMain)),class:"btn btn-secondary ms-1"},M[26]||(M[26]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),D(De,{errorMessage:o(k)},{default:U(()=>[i.item?(t(),s("div",Rb,[e("ul",zb,[e("li",Fb,[e("button",{onClick:M[7]||(M[7]=te=>r("information-tab")),class:oe([v("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},M[27]||(M[27]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),B("Information ")]),2)]),e("li",jb,[e("button",{onClick:M[8]||(M[8]=te=>r("outputPlayback-tab")),class:oe([v("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},M[28]||(M[28]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),B("Output/Playback ")]),2)]),e("li",Gb,[e("button",{onClick:M[9]||(M[9]=te=>r("programs-tab")),class:oe([v("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},M[29]||(M[29]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),B("Programs ")]),2)]),e("li",Yb,[e("button",{onClick:M[10]||(M[10]=te=>r("checklist-tab")),class:oe([v("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},M[30]||(M[30]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),B("Checklist ")]),2)])]),e("div",Wb,[e("div",{class:oe([m("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Kb,[e("div",Jb,[e("div",Qb,[e("div",Xb,[I(e("input",{"onUpdate:modelValue":M[11]||(M[11]=te=>i.item.name=te),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[N,i.item.name]]),M[31]||(M[31]=e("label",{for:"name"},"Name",-1))])]),e("div",Zb,[e("div",ey,[I(e("input",{"onUpdate:modelValue":M[12]||(M[12]=te=>i.item.playbackMode=te),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[N,i.item.playbackMode]]),M[32]||(M[32]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",ty,[e("div",sy,[I(e("input",{"onUpdate:modelValue":M[13]||(M[13]=te=>i.item.tier=te),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[N,i.item.tier]]),M[33]||(M[33]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",oy,[M[35]||(M[35]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),f.value?T("",!0):(t(),s("div",ay,[e("button",{onClick:M[14]||(M[14]=te=>le(i.item.fillerSlateSourceLocation.sourceLocationId,i.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},M[34]||(M[34]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",ly,[e("div",ny,[e("div",ry,[D(ge,{to:`${d.urlViewSourceLocation}/${i.item.fillerSlateSourceLocation.sourceLocationId}/${o(h)()}`,class:oe([[i.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:U(()=>[B(b(i.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),M[36]||(M[36]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",iy,[e("div",dy,[D(ge,{to:`${d.urlViewVodSource}/${i.item.fillerSlateVodSource.vodSourceId}/${o(h)()}`,class:oe([[i.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:U(()=>[B(b(i.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),M[37]||(M[37]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",uy,[e("div",cy,[I(e("textarea",{"onUpdate:modelValue":M[15]||(M[15]=te=>i.item.policy=te),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[N,i.item.policy]]),M[38]||(M[38]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:oe([m("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",my,[e("div",null,[e("div",fy,[M[40]||(M[40]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",py,[e("button",{onClick:M[16]||(M[16]=te=>n()),class:"btn btn-outline-primary btn-sm"},M[39]||(M[39]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),i.item.outputs.length<=0?(t(),s("div",vy,M[41]||(M[41]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),B("Channel Output is required ")]))):T("",!0),e("div",gy,[e("table",by,[M[57]||(M[57]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Type"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.outputs,(te,Ve)=>(t(),s(q,{key:te.channelOutputId},[e("tr",null,[e("td",null,b(Ve+1),1),e("td",null,[e("div",null,b(te.outputType),1)]),e("td",null,[e("div",null,b(te.manifestName),1)]),e("td",null,[e("div",null,[D(ge,{to:`${d.urlViewSourceGroup}/${te.sourceGroupId}/${o(h)()}`},{default:U(()=>[B(b(te.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[te.playbackUrl?(t(),s("div",yy,b(te.playbackUrl),1)):(t(),s("div",$y,M[42]||(M[42]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),B("Publish channel to get the playback url ")])))]),f.value?(t(),s("td",wy,[e("div",null,[f.value?(t(),s("button",{key:0,onClick:ce=>qe(te.playbackUrl),class:"btn btn-outline-info btn-sm"},M[43]||(M[43]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]),8,hy)):T("",!0)])])):(t(),s("td",_y,[e("button",{onClick:ce=>fe(te.channelOutputId),class:"btn btn-outline-warning btn-sm"},M[44]||(M[44]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ky)]))]),te.playbackUrl?(t(),s("tr",Sy,[M[56]||(M[56]=e("td",null,null,-1)),e("td",Ty,[e("div",My,[M[46]||(M[46]=e("h5",null,[B("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",Cy,[e("div",Iy,[e("button",{onClick:ce=>H(te),class:"btn btn-outline-primary btn-sm"},M[45]||(M[45]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,xy)])])]),te.playbackConfigurations.length>0?(t(),s("div",Py,[e("table",Vy,[e("tbody",null,[(t(!0),s(q,null,j(te.playbackConfigurations,(ce,Fe)=>(t(),s("tr",null,[e("td",null,b(Fe+1),1),e("td",null,b(ce.name),1),e("td",Uy,[f.value&&ce.hlsPlaylist?(t(),s("button",{key:0,onClick:Ee=>qe(ce.hlsPlaylist),class:"btn btn-outline-info btn-sm"},M[47]||(M[47]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]),8,Oy)):T("",!0),ce.arn?T("",!0):(t(),s("button",{key:1,onClick:Ee=>Ae(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},M[48]||(M[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Ay)),e("button",{onClick:Ee=>lt(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},M[49]||(M[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Dy)])]))),256))])])])):T("",!0),te.playbackConfiguration?(t(),s("div",Hy,[e("div",Ey,[e("div",Ly,[e("div",By,[e("div",qy,[e("div",Ny,[I(e("input",{"onUpdate:modelValue":ce=>te.playbackConfiguration.name=ce,type:"text",class:oe([[te.playbackConfiguration.arn?"is-valid":"is-invalid"],"form-control"]),id:"name",disabled:""},null,10,Ry),[[N,te.playbackConfiguration.name]]),M[50]||(M[50]=e("label",{for:"name"}," Name ",-1))]),te.playbackConfiguration.arn?T("",!0):(t(),s("button",{key:0,onClick:ce=>re.publishPlaybackConfiguration(te),class:"btn btn-outline-primary btn-sm"},M[51]||(M[51]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Publish ")]),8,zy))])]),e("div",Fy,[e("div",jy,[e("div",Gy,[I(e("input",{"onUpdate:modelValue":ce=>te.playbackConfiguration.hlsConfigurationManifestEndpointPrefix=ce,type:"text",class:"form-control",id:"playbackConfigurationhlsConfigurationManifestEndpointPrefix",disabled:""},null,8,Yy),[[N,te.playbackConfiguration.hlsConfigurationManifestEndpointPrefix]]),M[52]||(M[52]=e("label",{for:"hlsConfigurationManifestEndpointPrefix"},"HLS Configuration Manifest Endpoint Prefix",-1))]),f.value&&te.playbackConfiguration.hlsPlaylist?(t(),s("button",{key:0,onClick:ce=>qe(te.playbackConfiguration.hlsPlaylist),class:"btn btn-outline-info"},M[53]||(M[53]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),B("View ")]),8,Wy)):T("",!0)])])]),M[55]||(M[55]=e("div",{class:"row row-cols-1 row-cols-sm-21"},[e("div",{class:"col"})],-1)),e("div",Ky,[e("div",Jy,[I(e("textarea",{"onUpdate:modelValue":ce=>te.playbackConfiguration.adDecisionServerUrl=ce,class:"form-control",id:"playbackConfigurationadDecisionServerUrl",style:{height:"8rem"},disabled:""},null,8,Qy),[[N,te.playbackConfiguration.adDecisionServerUrl]]),M[54]||(M[54]=e("label",{for:"playbackConfigurationadDecisionServerUrl"},"Ad Decision Server Url",-1))])])])])):T("",!0)])])):T("",!0)],64))),128))]),_:1},512),[[he,i.item.outputs.length>0]])])])])])],2),e("div",{class:oe([m("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Xy,[e("div",Zy,[e("table",e$,[M[71]||(M[71]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),I(D(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:U(()=>[(t(!0),s(q,null,j(i.item.programs,(te,Ve)=>(t(),s("tr",{key:te.programId},[e("td",null,b(Ve+1),1),e("td",null,[te.arn?(t(),s("span",t$)):T("",!0),B(" "+b(te.name)+" ",1),M[61]||(M[61]=e("br",null,null,-1)),e("div",null,[e("div",null,[M[58]||(M[58]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),B(b(o(F).moment(te.dateScheduledStart).format("llll")),1)]),e("div",null,[M[59]||(M[59]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),B(b(o(F).moment(te.dateScheduledEnd).format("llll")),1)])]),te.relativeProgram?(t(),s(q,{key:1},[M[60]||(M[60]=B(" Relative Program: ")),e("span",s$,b(te.relativeProgram.name),1)],64)):T("",!0)]),e("td",null,[te.totalProgramTemplateDurationInMillis!==te.durationInMillis?(t(),s("div",o$,[M[62]||(M[62]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),B(" "+b(o(F).moment.utc(te.startOffsetMillis).format("HH:mm:ss"))+" - "+b(o(F).moment.utc(te.endOffsetMillis).format("HH:mm:ss")),1)])):T("",!0),te.adBreaksDurationInMillis?(t(),s("div",a$,[M[63]||(M[63]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),B(" Ads: "+b(o(F).moment.utc(te.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):T("",!0),e("div",l$,[M[64]||(M[64]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),B(" Total: "+b(o(F).moment.utc(te.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[B(b(te.vodSource.video.title)+" ",1),M[65]||(M[65]=e("br",null,null,-1)),B(" ("+b(o(F).moment.utc(te.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),s(q,null,j(te.adBreaks,ce=>(t(),s("li",null,[ce.vodSource.arn?(t(),s("span",n$)):(t(),s("span",r$)),e("span",i$,b(o(F).moment.utc(ce.offsetMillis).format("HH:mm:ss")),1),D(ge,{to:`${d.urlViewVodSource}/${ce.vodSource.vodSourceId}/${o(h)()}`},{default:U(()=>[B(b(ce.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",d$,[e("div",u$,[M[70]||(M[70]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",c$,[e("li",null,[e("button",{onClick:ce=>A(te.programId),class:"dropdown-item"},M[66]||(M[66]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),B("Edit ")]),8,m$)]),te.arn?(t(),s("li",f$,[e("button",{onClick:ce=>Me(te.programId),class:"dropdown-item"},M[67]||(M[67]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),B("Unpublish ")]),8,p$)])):(t(),s(q,{key:1},[e("li",null,[e("button",{onClick:ce=>_e(te.programId),class:"dropdown-item"},M[68]||(M[68]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),B("Publish ")]),8,v$)]),e("li",null,[e("button",{onClick:ce=>X(te.programId),class:"dropdown-item"},M[69]||(M[69]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),B("Remove ")]),8,g$)])],64))])])])]))),128))]),_:1},512),[[he,i.item.programs.length>0]])])]),e("div",b$,[e("button",{onClick:M[17]||(M[17]=te=>se()),class:"btn btn-outline-primary"},M[72]||(M[72]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),B("Program ")]))])])],2),e("div",{class:oe([m("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",y$,[M[79]||(M[79]=B(" Checklist ")),e("ul",null,[e("li",null,[i.item.fillerSlateSourceLocation.arn?(t(),s("span",$$)):(t(),s("span",w$)),M[73]||(M[73]=B(" Filler Slate Source Location "))]),e("li",null,[i.item.fillerSlateVodSource.arn?(t(),s("span",h$)):(t(),s("span",_$)),M[74]||(M[74]=B(" Filler Slate VOD Source "))]),e("li",null,[i.item.outputs.length>0?(t(),s("span",k$)):(t(),s("span",S$)),M[76]||(M[76]=B(" Outputs ")),e("ul",null,[e("li",null,[i.item.outputs.some(te=>te.playbackConfigurations.length>0)?(t(),s("span",T$)):(t(),s("span",M$)),M[75]||(M[75]=B(" Ad Insertion setup "))])])]),e("li",null,[i.item.programs.length>0?(t(),s("span",C$)):(t(),s("span",I$)),M[77]||(M[77]=B(" Programs "))]),M[78]||(M[78]=B(" u l "))])])],2)])])):T("",!0)]),_:1},8,["errorMessage"]),D(w1,{ref_key:"modalAddProgram",ref:c,onRefresh:p},null,512),D(F1,{ref_key:"modalAddPlaybackConfiguration",ref:P,onRefresh:p},null,512),D(fb,{ref_key:"modalAddChannelOutput",ref:l,onRefresh:p},null,512),D(ot,{ref_key:"modalEditProgram",ref:O,onOnClose:p},null,512),D(Ab,{ref_key:"modalEditFillerSlate",ref:a,onRefresh:p},null,512)])]),_:1})}}},P$={path:"/",component:Go,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:pa},{path:"users/add",component:Ba},{path:"users",component:Ka},{path:"users/view/:id",component:yl,props:!0},{path:"videos/add",component:jl},{path:"videos/edit/:id",component:pn,props:!0},{path:"videos",component:kn},{path:"videos/view/:id",component:Jn,props:!0},{path:"source-groups/add",component:tr},{path:"source-groups/edit/:id",component:ar,props:!0},{path:"source-groups",component:fr},{path:"source-groups/view/:id",component:Pr,props:!0},{path:"source-locations/add",component:Er},{path:"source-locations/edit/:id",component:qr,props:!0},{path:"source-locations",component:Kr},{path:"source-locations/view/:id",component:wi,props:!0},{path:"vod-sources/add",component:Yi},{path:"vod-sources/edit/:id",component:Ji,props:!0},{path:"vod-sources",component:rd},{path:"vod-sources/view/:id",component:mc,props:!0},{path:"channels/add",component:bp},{path:"channels/edit/:id",component:wp,props:!0},{path:"channels",component:Ip},{path:"channels/schedule-programs/:id",component:gg,props:!0},{path:"channels/view/:id",component:x$,props:!0},{path:"program-templates/add",component:Jc},{path:"program-templates/edit/:id",component:Um,props:!0},{path:"program-templates",component:zm},{path:"program-templates/view/:id",component:Gf,props:!0}]},at=ut({history:ct("/"),linkActiveClass:"active",routes:[{...oo},{path:"/administrator",redirect:"/"},{...P$}]}),V$={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const d=this,w=new mt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();w.on("onNotificationCreated",function(_){let y=_.content;_.notificationEntityClassText==="Deposit"&&(y+="<br/>",y+=`<a href="${d.urlViewDeposit}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="Withdraw"&&(y+="<br/>",y+=`<a href="${d.urlViewWithdraw}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.notificationEntityClassText==="ManualModeOfPayment"&&(y+="<br/>",y+=`<a href="${d.urlViewManualModeOfPayment}${_.referenceId}">Click ${_.notificationEntityClassText} here</a>`),_.iconClass;let z="secondary";switch(_.notificationType){case 1:z="success";break;case 3:z="info";break;case 3:z="success";break;case 4:z="info";break;case 5:z="warning";break;case 6:z="error";break}d.$toast[z](_.subject,y,{timeOut:1e4});const S=_.subject,k={body:y,icon:"/img/192x102.png"};new Notification(S,k)}),w.on("jobUpdated",function(_){d.$bus.$emit("event:job-updated",_)}),await w.start().then(function(){}).catch(function(_){})}}};function U$(d,u,w,_,y,z){return t(),s("div")}const O$=ke(V$,[["render",U$],["__scopeId","data-v-5b4a9fa2"]]),A$={class:"navbar bg-light","data-bs-theme":"light"},D$={class:"container-md"},H$={class:"col-sm-auto"},E$={class:"navbar-brand mb-0"},L$={class:"col-sm flex-fill"},B$={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(d){return(u,w)=>(t(),ie(de,null,{default:U(()=>[e("div",null,[e("nav",A$,[e("div",D$,[e("div",{class:oe([d.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",H$,[xe(u.$slots,"title",{},()=>[e("h1",E$,[e("i",{class:oe([d.pageIcon,"me-1"])},null,2),e("span",null,b(d.pageTitle),1)])])]),e("div",L$,[xe(u.$slots,"default")])],2)])])])]),_:3}))}},q$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},N$=["innerHTML"],R$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},z$={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(u,w)=>(t(),ie(de,null,{default:U(()=>[xe(u.$slots,"default",{},()=>[d.errorMessage?(t(),s("div",q$,[w[0]||(w[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),B("Error ")],-1)),e("div",{innerHTML:d.errorMessage},null,8,N$)])):T("",!0),d.vuelidate&&d.vuelidate.$error?(t(),s("div",R$,[w[1]||(w[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),B("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(q,null,j(d.vuelidate.$errors,_=>(t(),s("li",{key:_.$uid},[_.$validator==="$each"?(t(),s(q,{key:0},[B(" Check errors in '"+b(_.$property)+"' ",1)],64)):(t(),s(q,{key:1},[B(b(_.$message),1)],64))]))),128))])])):T("",!0)])]),_:3}))}},F$={class:"mt-2 container-md"},j$={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(d){return(u,w)=>{const _=Q("PageMessages");return t(),ie(de,null,{default:U(()=>[e("div",F$,[D(_,{errorMessage:d.errorMessage,vuelidate:d.vuelidate},null,8,["errorMessage","vuelidate"]),xe(u.$slots,"default")])]),_:3})}}},G$={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const d=this;d.busy||(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveFirst(){const d=this;if(d.busy)return;d.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await d.search(1))},async moveLast(){const d=this;if(d.busy)return;const u=d.filter;u.pageIndex!==u.totalPages&&(document.activeElement&&document.activeElement.blur(),await d.search(u.totalPages))},async move(d){const u=this;if(u.busy)return;const w=u.filter,_=w.pageIndex+d;_>=0&&_<=w.totalPages&&(document.activeElement&&document.activeElement.blur(),await u.search(_))}}},Y$={class:"mt-2"},W$={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},K$={key:0,class:"col-sm order-2 order-sm-1"},J$={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Q$={class:"me-1 fw-bold"},X$={class:"fw-bold"},Z$={class:"ms-1"},ew={class:"col-sm order-1 order-sm-2"},tw={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},sw={key:0,class:"page-item"},ow={key:1,class:"page-item"},aw={key:2,class:"page-item"},lw={class:"page-item active"},nw={class:"page-link"},rw={key:3,class:"page-item"},iw={key:4,class:"page-item"},dw={key:5,class:"page-item"},uw={key:1,class:"text-info font-weight-bold text-center"},cw={key:0},mw={key:1};function fw(d,u,w,_,y,z){return t(),s("div",Y$,[w.filter.items.length?(t(),s("div",W$,[w.showPerPage?(t(),s("div",K$,[e("div",J$,[e("div",null,[e("span",Q$,b(w.filter.totalCount),1),u[8]||(u[8]=B("records in ")),e("span",X$,b(w.filter.totalPages),1),u[9]||(u[9]=B(" page(s) "))]),e("div",Z$,[I(e("select",{"onUpdate:modelValue":u[0]||(u[0]=S=>w.filter.pageSize=S),onChange:u[1]||(u[1]=(...S)=>z.changePagination&&z.changePagination(...S)),class:"form-select form-select-sm me-1"},u[10]||(u[10]=[We('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[pe,w.filter.pageSize]])]),u[11]||(u[11]=e("div",{class:"ms-1"},"per page",-1))])])):T("",!0),e("div",ew,[e("ul",tw,[w.filter.pageIndex!==1?(t(),s("li",sw,[e("button",{class:"page-link","aria-label":"Previous",onClick:u[2]||(u[2]=(...S)=>z.moveFirst&&z.moveFirst(...S))},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):T("",!0),w.filter.pageIndex>2?(t(),s("li",ow,[e("button",{class:"page-link",onClick:u[3]||(u[3]=S=>z.move(-2))},b(w.filter.pageIndex-2),1)])):T("",!0),w.filter.pageIndex>1?(t(),s("li",aw,[e("button",{class:"page-link",onClick:u[4]||(u[4]=S=>z.move(-1))},b(w.filter.pageIndex-1),1)])):T("",!0),e("li",lw,[e("span",nw,b(w.filter.pageIndex),1)]),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",rw,[e("button",{class:"page-link",onClick:u[5]||(u[5]=S=>z.move(1))},b(w.filter.pageIndex+1),1)])):T("",!0),w.filter.pageIndex<w.filter.totalPages-1?(t(),s("li",iw,[e("button",{class:"page-link",onClick:u[6]||(u[6]=S=>z.move(2))},b(w.filter.pageIndex+2),1)])):T("",!0),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",dw,[e("button",{class:"page-link","aria-label":"Next",onClick:u[7]||(u[7]=(...S)=>z.moveLast&&z.moveLast(...S))},u[13]||(u[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):T("",!0)])])])):(t(),s("div",uw,[w.noRecords?(t(),s("div",cw,b(w.noRecords),1)):(t(),s("div",mw,"No record(s) found."))]))])}const pw=ke(G$,[["render",fw]]),vw={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let d=this;if(!d.enabled)return;let u=d.filter;u.sortField===d.field?u.sortOrder===0?u.sortField=null:u.sortOrder=u.sortOrder===0?1:0:(u.sortField=d.field,u.sortOrder=1),d.$emit("search")}}},gw={class:"align-self-center"};function bw(d,u,w,_,y,z){return t(),s("div",{onClick:u[0]||(u[0]=(...S)=>z.click&&z.click(...S)),class:"d-flex flex-row justify-content-start align-content-center",style:Xe({cursor:w.enabled?"pointer":""})},[xe(d.$slots,"default"),e("span",gw,[w.showSort?(t(),s("span",{key:0,class:oe([{"fa-sort text-gray-500":!z.currentSortField(),"fa-sort-up":z.currentSortField()&&z.sortUp(),"fa-sort-down":z.currentSortField()&&!z.sortUp()},"fas fa-fw mr-1"])},null,2)):T("",!0)])],4)}const yw=ke(vw,[["render",bw]]),$w={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(d){const u=this;u.setSelected(d),u.$emit("onSelectedRow",d)}}},ww={class:"table-responsive m-0"},hw=["href"],_w={key:1},kw=["onClick"],Sw={class:"form-group row no-gutters"},Tw={class:"col-5 col-form-label"},Mw={class:"col align-self-center"},Cw=["href"],Iw={key:1};function xw(d,u,w,_,y,z){return t(),s("div",null,[e("div",ww,[e("table",{class:oe(["table table-hover d-none d-md-table card",w.tableCss])},[e("thead",null,[xe(d.$slots,"header",{},()=>[u[0]||(u[0]=e("th",null,"#",-1)),(t(!0),s(q,null,j(w.header.columns,S=>(t(),s("th",null,b(S.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(q,null,j(w.items,(S,G)=>xe(d.$slots,"table-row",{key:`row1-${S[w.header.key]}`,item:S,index:G},()=>[e("td",null,b(w.getRowNumber(G)),1),(t(!0),s(q,null,j(w.header.columns,R=>(t(),s("td",null,[R.href?(t(),s("a",{key:0,href:R.href(S[w.header.key]),class:"font-weight-bold"},b(S[R.field]),9,hw)):(t(),s("span",_w,b(S[R.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:oe(["d-block d-md-none",w.rowCss])},[(t(!0),s(q,null,j(w.items,(S,G)=>(t(),s("div",{key:`row2-${S[w.header.key]}`,onClick:R=>z.onSelectedRow(S),class:"border"},[e("div",{class:oe(["p-2",{"b-left":w.isSelected(S)}])},[xe(d.$slots,"table-list",{item:S,index:G},()=>[(t(!0),s(q,null,j(w.header.columns,R=>(t(),s("div",Sw,[e("label",Tw,b(R.title),1),e("div",Mw,[R.href?(t(),s("a",{key:0,href:R.href(S[w.header.key]),class:"font-weight-bold"},b(S[R.field]),9,Cw)):(t(),s("span",Iw,b(S[R.field]),1))])]))),256))],!0)],2)],8,kw))),128))],2)])}const Pw=ke($w,[["render",xw],["__scopeId","data-v-65929213"]]),Se=ft(vt);Se.use(pt());Se.use(at);Se.component("m-notification",O$);Se.component("m-pagination",pw);Se.component("sort-field",yw);Se.component("table-list",Pw);Se.component("Toasts",Ro);Se.component("PageHeader",B$);Se.component("PageMessages",z$);Se.component("PageBody",j$);const Vw="https://sonyfastpoc.azurewebsites.net/",Uw="Arcadian-Sony FAST",Ow=void 0,Aw={API_URL:Vw,appName:Uw,tenantId:Ow};Se.provide("$config",Aw);Se.provide("$bus",Re);Se.mount("#app");
