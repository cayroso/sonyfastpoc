import{o as t,c as le,r as G,h as Ge,d as Ne,a as ne,e as Me,b as o,f as e,g as S,w as h,i as O,t as g,F as L,j,k,l as ie,m as He,n as fe,p as Be,q as Te,u as Je,s as Le,P as De,v as de,x as te,y as se,z as $e,T as re,A as i,B as Ke,C as I,D as H,E as Qe,G as ae,H as qe,I as ge,J as _e,K as ye,L as ve,M as he,N as Ie,O as Xe,Q as Ze,R as et,S as tt,U as we,V as st,W as ot}from"./vendor-LMzySn7w-chunk.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const P of c)if(P.type==="childList")for(const b of P.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function u(c){const P={};return c.integrity&&(P.integrity=c.integrity),c.referrerPolicy&&(P.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?P.credentials="include":c.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function f(c){if(c.ep)return;c.ep=!0;const P=u(c);fetch(c.href,P)}})();const lt={__name:"App",setup(a){return(n,u)=>{const f=G("router-view");return t(),le(f)}}};function Re(){const a=U=>{var R;let _=U,E=_.response,F="";if(!_.response)return U.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const D=`${window.location.pathname}${window.location.search}`;F=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(D)}`}'>here</a> to login.`}else if(E.status===400){let D=_.response.data.errors;F=_.response.data.title||_.response.data,D&&(F+="<ul>");for(let V in D){let N=D[V];for(let d in D[V]){let J=N[d];F+=`<li>${J}</li>`}}D&&(F+="</ul>"),F||(F=_.message),F&&F.content&&(F=F.content)}else E.status===404?F=((R=E==null?void 0:E.data)==null?void 0:R.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(F=_.message,F===""&&(F=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return F},n=U=>JSON.parse(JSON.stringify(U)),u=U=>{if(typeof U!="number")return U;var _=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return _.format(U)},f=(U,_,E)=>{const R={value:_,expiry:new Date().getTime()+E};debugger;localStorage.setItem(U,JSON.stringify(R))},c=U=>{debugger;const _=localStorage.getItem(U);if(!_)return null;const E=JSON.parse(_);return new Date().getTime()>E.expiry?(localStorage.removeItem(U),null):E.value},P="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:a,clone:n,toCurrency:u,moment:Ge,localStorageSetWithExpiry:f,localStorageGetWithExpiry:c,setPageTab:(U,_)=>{var E=localStorage.getItem(P);E?E=JSON.parse(E):E={},E[U]=_,localStorage.setItem(P,JSON.stringify(E))},getPageTab:U=>{var _=localStorage.getItem(P);return _?_=JSON.parse(_):_={},_[U]}}}const at=Re(),je=JSON.parse(localStorage.getItem("user"))||{},nt=at.moment.utc(je.exp*1e3),it=nt.isAfter()?je:null,ue=Ne({id:"auth",state:()=>({user:it,returnUrl:null}),actions:{async login(a){try{this.user=a,localStorage.setItem("user",JSON.stringify(a))}catch(n){debugger;alert(n)}},logout(){this.user=null,localStorage.removeItem("user"),Ye.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),rt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(rt));const dt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ue=dt,ze=Ne("msal",()=>{const a=ne({auth:{clientId:Ue.VITE_AUTH_CLIENT_ID,authority:Ue.VITE_AUTH_AUTHORITY_URL,redirectUri:Ue.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),n=ne("");return{msalConfig:a,accessToken:n,setAccessToken:f=>{n.value=f}}}),Ve={$on:(...a)=>Me.on(...a),$once:(...a)=>Me.once(...a),$off:(...a)=>Me.off(...a),$emit:(...a)=>Me.emit(...a)};function ut(){const a=(P,b,B,U)=>{Ve.$emit("toast-message",{title:P,message:b,type:B,options:U})};return{success:(P,b,B={})=>{a(P,b,"success",B)},warning:(P,b,B={})=>{a(P,b,"warning",B)},info:(P,b,B={})=>{a(P,b,"info",B)},error:(P,b,B={})=>{a(P,b,"danger",B)}}}const pe=(a,n)=>{const u=a.__vccOpts||a;for(const[f,c]of n)u[f]=c;return u},ct={data(){return{notifications:[],messages:[]}},async created(){const a=this;a.$bus.$on("event:notification-received",()=>{a.getUnreadNotifications()}),a.$bus.$on("event:notification-marked-as-read",n=>{a.notifications.some(f=>f.notificationId===n)&&a.getUnreadNotifications()}),a.$bus.$on("event:notification-removed",n=>{a.notifications.some(f=>f.notificationId===n)&&a.getUnreadNotifications()}),a.$bus.$on("event:chat-marked-as-read",a.onChatMarkedAsRead),a.$bus.$on("event:chat-message-received",a.onChatMessageReceived)},async mounted(){const a=this,n=a.$refs.notifications,u=a.$refs.messages;n&&n.offsetParent,u&&u.offsetParent&&await a.getUnreadChats()},methods:{async logout(){const a=this;try{await a.$util.axios.post("/api/accounts/logout").then(n=>{const u="/";a.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){a.$util.href(u)}})})}catch(n){a.$util.handleError(n)}},async onChatMarkedAsRead(a){let n=this,u=n.messages.find(f=>f.chatId===a);if(u){let f=n.messages.indexOf(u);n.messages.splice(f,1)}},async onChatMessageReceived(a){let n=this,u=n.messages.find(c=>c.chatId===a.chatId);if(u)u.lastMessageText=a.content;else{var f={chatId:a.chatId,isRead:!1,lastDateSent:a.dateSent,lastMessageText:a.content,senderFirstLastName:`${a.sender.firstName} ${a.sender.lastName}`,senderInitials:a.sender.initials,senderProfilePicture32:a.sender.profilePicture32,urlPicture:n.$util.getProfilePictureUrl(a.sender.profilePicture32,a.sender.initials)};n.messages.push(f)}},async getUnreadNotifications(){const a=this;try{await a.$util.axios.get("api/accounts/unread-notifications").then(n=>{a.notifications=n.data})}catch(n){a.$util.handleError(n)}},async getUnreadChats(){const a=this;try{await a.$util.axios.get("api/accounts/unread-chats").then(n=>{a.messages=n.data;for(let u in a.messages){let f=a.messages[u];a.$set(f,"urlPicture",a.$util.getProfilePictureUrl(f.senderProfilePicture32,f.senderInitials))}})}catch(n){a.$util.handleError(n)}},viewNotification(a){this.$bus.$emit("event:open-notification",a)},viewChat(a){this.$bus.$emit("event:open-chat",a)},showHiddenElements(){let n=this.$el.getElementsByClassName("initialHidden");for(let u=0;u<n.length;u++)n[u].classList.remove("invisible")}}},mt={mixins:[ct],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const n=ue().user;return{user:n,username:n?n.nameFull:"Guest"}},async mounted(){},methods:{isActive(a){return window.location.href.indexOf(a)>-1},async openModalSearchUser747(a){this.$refs.refModalSearchUser747.open(a)}}},ft={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},pt={class:"container-md"},vt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},gt={class:"navbar-nav"},bt={class:"nav-item dropdown"},yt={class:"dropdown-menu","aria-labelledby":"dropdown01"},$t={class:"nav-item dropdown"},wt={class:"dropdown-menu","aria-labelledby":"dropdown01"},ht={class:"navbar-nav ms-auto"},_t={class:"nav-item dropdown"},kt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},St={class:"d-inline d-sm-none d-md-inline"},Mt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Tt={class:"text-capitalize"};function It(a,n,u,f,c,P){const b=G("router-link");return t(),o("nav",ft,[e("div",pt,[S(b,{class:"navbar-brand",to:"/member"},{default:h(()=>[O(g(u.appName),1)]),_:1}),n[14]||(n[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",vt,[e("ul",gt,[e("li",bt,[n[3]||(n[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",yt,[e("li",null,[S(b,{class:"dropdown-item",to:"/member/announcements"},{default:h(()=>n[0]||(n[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),O(" Announcements ")])),_:1})]),e("li",null,[S(b,{class:"dropdown-item",to:"/member/posts"},{default:h(()=>n[1]||(n[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),O(" Posts ")])),_:1})]),e("li",null,[S(b,{class:"dropdown-item",to:"/member/yellow-pages"},{default:h(()=>n[2]||(n[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),O(" Yellow Pages ")])),_:1})])])]),e("li",$t,[n[5]||(n[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",wt,[e("li",null,[S(b,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:h(()=>n[4]||(n[4]=[O(" Property Monthly Dues ")])),_:1})])])])]),e("ul",ht,[e("li",_t,[e("a",kt,[e("span",null,[n[6]||(n[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",St,g(c.username),1)])]),e("ul",Mt,[n[9]||(n[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),n[10]||(n[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),n[11]||(n[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),n[12]||(n[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),c.user&&c.user.roles.length>1?(t(!0),o(L,{key:0},j(c.user.roles,B=>(t(),o("li",null,[S(b,{to:`/${B.toLowerCase()}`,class:"dropdown-item"},{default:h(()=>[e("span",Tt,g(B),1)]),_:2},1032,["to"])]))),256)):k("",!0),e("li",null,[S(b,{to:"/",class:"dropdown-item"},{default:h(()=>n[7]||(n[7]=[O(" Main ")])),_:1})]),n[13]||(n[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[S(b,{to:"/account/logout",class:"dropdown-item"},{default:h(()=>n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),O("Logout ")])),_:1})])])])])])])])}const Pt=pe(mt,[["render",It]]),xt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const a=document.getElementById("top");a&&a.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let a=this;if(!a.$el.getElementsByClassName)return;let n=a.$el.getElementsByClassName("initialHidden");for(let u=0;u<n.length;u++){let f=n[u];f.classList.remove("invisible"),f.classList.remove("d-none")}},close(){const a=this,n=document.referrer.toLowerCase();n&&n.includes("/account/login")?a.$router.go(-2):a.$router.go(-1)},toggle(a){const n=this;n.toggles[a]=!n.toggles[a],localStorage.setItem(n.togglesKey,JSON.stringify(n.toggles))}}},Ct={mixins:[xt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(a){return window.location.href.indexOf(a)>-1}}},Ut={class:"footer sticky-bottom"},Vt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},At={class:"container-md"},Et={class:"navbar-text small p-0"},Ot={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Nt={class:"container-md"},Ht={class:"navbar-nav nav-fill w-100"},Bt={class:"nav-item dropup"},Lt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"nav-item dropup"},qt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function Rt(a,n,u,f,c,P){const b=G("router-link");return t(),o("footer",Ut,[e("div",Vt,[e("div",At,[e("span",Et,"©"+g(c.copyright),1)])]),e("nav",Ot,[e("div",Nt,[e("ul",Ht,[e("li",Bt,[n[3]||(n[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Lt,[e("li",null,[S(b,{class:"dropdown-item",to:"/member/announcements"},{default:h(()=>n[0]||(n[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),O(" Announcements ")])),_:1})]),e("li",null,[S(b,{class:"dropdown-item",to:"/member/posts"},{default:h(()=>n[1]||(n[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),O(" Posts ")])),_:1})]),e("li",null,[S(b,{class:"dropdown-item",to:"/member/yellow-pages"},{default:h(()=>n[2]||(n[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),O(" Yellow Pages ")])),_:1})])])]),e("li",Dt,[n[5]||(n[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",qt,[e("li",null,[S(b,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:h(()=>n[4]||(n[4]=[O(" Property Monthly Dues ")])),_:1})])])])])])])])}const jt=pe(Ct,[["render",Rt]]),zt={name:"AdminLayout",components:{TopNav:Pt,BottomNav:jt},inject:["$config"],mounted(){const n=this.$config;document.title=`Account - ${n.appName}`}},Ft={class:"d-flex flex-column vh-100"};function Yt(a,n,u,f,c,P){const b=G("Toasts"),B=G("router-view");return t(),o("div",Ft,[S(b),S(B,{class:"flex-grow-1 mb-2"})])}const Wt=pe(zt,[["render",Yt]]),Gt={__name:"index",setup(a){return ue().user,ie(()=>{}),(u,f)=>(t(),o("div",null,f[0]||(f[0]=[He('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},Jt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Kt=Jt;function Qt(){fe("$config");const a=Kt.VITE_API_URL,n=Be.create({baseURL:a});return Te.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),n.interceptors.request.use(u=>{Te.start();const{user:f}=ue();return f&&f.token&&(u.headers?(u.headers.Authorization||(u.headers.Authorization=`Bearer ${f.token}`),u.headers["Access-Control-Allow-Origin"]||(u.headers["Access-Control-Allow-Origin"]="*")):u.headers={Authorization:`Bearer ${f.token}`,"Access-Control-Allow-Origin":"*"}),u}),n.interceptors.response.use(u=>(Te.done(),u),u=>{throw Te.done(),u}),n}function ce(a){if(!a.appTitle)throw Error("App Title is required.");if(!a.pageTitle)throw Error("Page Title is required.");const n=Je(),u=Le(),f=Qt(),c=Re(),P=ut(),B=ue().user,U=()=>B&&B.roles&&B.roles.includes("System"),_=()=>B&&B.roles&&B.roles.includes("administrator"),E=()=>B&&B.roles&&B.roles.includes("employee"),F=()=>B&&B.roles&&B.roles.includes("Member"),R=()=>{let s=n.path;return n.query.returnUrl&&(s=n.query.returnUrl),s=`?returnUrl=${encodeURIComponent(s)}`,s},D=async()=>{const s=document.referrer.toLowerCase();s&&s.includes("/accounts/login")?await u.go(-2):await u.go(-1)},V=s=>{var q;const v=n.path,l=(q=n.query)==null?void 0:q.returnUrl;l&&!(v.startsWith(l)||l.startsWith(v))?u.push(l):u.push(s)},N=a.appTitle,d=a.pageTitle,J=ne(!1),z=ne(new Map),r=ne(""),y=ne(""),M=ne("");return{appTitle:N,pageTitle:d,busy:J,validations:z,infoMessage:r,warningMessage:y,errorMessage:M,router:u,route:n,axios:f,utils:c,toasts:P,close:D,closeWithReturnUrl:V,generateReturnUrl:R,security:{userId:B?B.userId:"",isSystem:U(),isAdministrator:_(),isEmployee:E(),isMember:F()}}}const Xt={class:"h-100 d-flex align-items-center justify-content-center"},Zt={class:"form-signin w-100 m-auto"},es={class:"h3 mb-3 fw-normal"},ts={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ss=["innerHTML"],os={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ls={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(a){fe("$config");const n=ue(),u=ze(),f=new De(u.msalConfig),c=de({username:"",password:""}),P={username:{required:te.withMessage("Username is required.",se),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",se),$autoDirty:!0,$lazy:!0}},b=$e(P,c),{appTitle:B,pageTitle:U,busy:_,isDirty:E,validations:F,infoMessage:R,warningMessage:D,errorMessage:V,router:N,route:d,axios:J,utils:z,toasts:r,close:y,security:M}=ce({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ie(async()=>{await f.initialize()});const s=async()=>{await f.loginPopup({}).then(()=>{debugger;const q=f.getAllAccounts()[0];f.setActiveAccount(q)}).catch(l=>{console.error(`error during authentication: ${l}`)});var v={account:f.getActiveAccount(),scopes:[]};await f.acquireTokenSilent(v).then(l=>{debugger;const p=l.account.idToken,C=Ke(p);if(C.token=l.accessToken,console.log(l),!C.roles){debugger;C.roles=[]}C.userId=C.sub,n.login(C);var x=d.query.returnUrl;x?N.push(decodeURIComponent(x)):C.roles.length===1?N.push(`/${C.roles[0].toLowerCase()}`):N.push("/")}).catch(l=>{console.error(`error during acquireTokenSilent: ${l}`)})};return(v,l)=>(t(),le(re,null,{default:h(()=>[e("div",Xt,[e("main",Zt,[e("div",null,[e("h1",es,g(i(B)),1),e("div",null,[i(V)?(t(),o("div",ts,[l[1]||(l[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(V)},null,8,ss)])):k("",!0),i(b).$error?(t(),o("div",os,[l[2]||(l[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(i(b).$errors,q=>(t(),o("li",{key:q.$uid},g(q.$message),1))),128))])])):k("",!0)]),e("button",{onClick:l[0]||(l[0]=q=>s()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},as=pe(ls,[["__scopeId","data-v-896956d0"]]),ns={class:"h-100 d-flex align-items-center justify-content-center"},is={__name:"logout",setup(a){const n=ue();return n.user,ie(async()=>{n.logoutWithRedirect()}),(u,f)=>(t(),o("div",ns,f[0]||(f[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[O(" You have logged out from HOA MS."),e("br"),O(" Click "),e("a",{href:"/",class:"d-inline"},"here"),O(" to go back to home page. ")])],-1)])))}},rs={class:"h-100 d-flex align-items-center justify-content-center"},ds={class:"card m-3"},us={class:"card-header"},cs={class:"card-body"},ms={class:"m-2"},fs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ps=["innerHTML"],vs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},gs={class:"row row-cols-1 row-cols-sm-3"},bs={class:"col-sm"},ys={class:"form-group"},$s={key:0,class:"d-block invalid-feedback"},ws={class:"col-sm"},hs={class:"form-group"},_s={key:0,class:"d-block invalid-feedback"},ks={class:"col-sm"},Ss={class:"form-group"},Ms={key:0,class:"d-block invalid-feedback"},Ts={class:"row row-cols-1 row-cols-sm-3"},Is={class:"col"},Ps={class:"form-group"},xs={key:0,class:"d-block invalid-feedback"},Cs={class:"col"},Us={class:"form-group"},Vs={key:0,class:"d-block invalid-feedback"},As={class:"row row-cols-1 row-cols-sm-3"},Es={class:"col-sm"},Os={class:"form-group"},Ns={key:0,class:"d-block invalid-feedback"},Hs={class:"col-sm"},Bs={class:"form-group"},Ls={key:0,class:"d-block invalid-feedback"},Ds={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},qs={class:"col"},Rs=["disabled"],js={class:"col"},zs={class:"col"},Fs={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(a){const n=de({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),u=(M,s)=>M===s.password,f={firstName:{required:te.withMessage("First name is required.",se),$autoDirty:!0,$lazy:!0},middleName:{required:te.withMessage("Middle name is required.",se),$autoDirty:!0,$lazy:!0},lastName:{required:te.withMessage("Last name is required.",se),$autoDirty:!0,$lazy:!0},phoneNumber:{required:te.withMessage("Phone number is required.",se),$autoDirty:!0,$lazy:!0},email:{required:te.withMessage("Email is required.",se),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",se),$autoDirty:!0,$lazy:!0},confirmPassword:{required:te.withMessage("Confirm password is required.",se),confirmSamePassword:te.withMessage("Password and confirm passwrod are different.",u),$autoDirty:!0,$lazy:!0}},c=$e(f,n),{appTitle:P,pageTitle:b,busy:B,isDirty:U,validations:_,infoMessage:E,warningMessage:F,errorMessage:R,router:D,axios:V,utils:N,toasts:d,close:J,security:z}=ce({appTitle:"HOA MS",pageTitle:"Register User"}),r=fe("$config");ie(()=>{});const y=async()=>{const M=n;if(B.value)return;if(!await c.value.$validate()){window.scrollTo(0,0);return}R.value=null;try{B.value=!0;const v=N.clone(M);v.tenantid=r.tenantId;debugger;await V({method:"post",url:"/api/v1/accounts/register",data:v}).then(l=>{d.success("Register","Registration was successfull.",{onClose:async()=>{await D.push("/accounts/login")}})})}catch(v){R.value=N.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{B.value=!1}};return(M,s)=>{const v=G("router-link");return t(),le(re,null,{default:h(()=>[e("div",rs,[e("div",ds,[e("h4",us,g(i(b)),1),e("div",cs,[e("div",ms,[i(R)?(t(),o("div",fs,[s[8]||(s[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(R)},null,8,ps)])):k("",!0),i(c).$error?(t(),o("div",vs,[s[9]||(s[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(i(c).$errors,l=>(t(),o("li",{key:l.$uid},g(l.$message),1))),128))])])):k("",!0)]),e("div",gs,[e("div",bs,[e("div",ys,[s[10]||(s[10]=e("label",null,"First Name",-1)),I(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>n.firstName=l),type:"text",class:"form-control"},null,512),[[H,n.firstName]]),i(c).firstName.$error?(t(),o("div",$s,[(t(!0),o(L,null,j(i(c).firstName.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])]),e("div",ws,[e("div",hs,[s[11]||(s[11]=e("label",null,"Middle Name",-1)),I(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>n.middleName=l),type:"text",class:"form-control"},null,512),[[H,n.middleName]]),i(c).middleName.$error?(t(),o("div",_s,[(t(!0),o(L,null,j(i(c).middleName.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])]),e("div",ks,[e("div",Ss,[s[12]||(s[12]=e("label",null,"Last Name",-1)),I(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>n.lastName=l),type:"text",class:"form-control"},null,512),[[H,n.lastName]]),i(c).lastName.$error?(t(),o("div",Ms,[(t(!0),o(L,null,j(i(c).lastName.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])])]),e("div",Ts,[e("div",Is,[e("div",Ps,[s[13]||(s[13]=e("label",null,"Phone Number",-1)),I(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>n.phoneNumber=l),type:"tel",class:"form-control"},null,512),[[H,n.phoneNumber]]),i(c).phoneNumber.$error?(t(),o("div",xs,[(t(!0),o(L,null,j(i(c).phoneNumber.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])]),e("div",Cs,[e("div",Us,[s[14]||(s[14]=e("label",null,"Email",-1)),I(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>n.email=l),type:"email",class:"form-control"},null,512),[[H,n.email]]),i(c).email.$error?(t(),o("div",Vs,[(t(!0),o(L,null,j(i(c).email.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])])]),e("div",As,[e("div",Es,[e("div",Os,[s[15]||(s[15]=e("label",null,"Password",-1)),I(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>n.password=l),type:"password",class:"form-control"},null,512),[[H,n.password]]),i(c).password.$error?(t(),o("div",Ns,[(t(!0),o(L,null,j(i(c).password.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])]),e("div",Hs,[e("div",Bs,[s[16]||(s[16]=e("label",null,"Confirm Password",-1)),I(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>n.confirmPassword=l),type:"password",class:"form-control"},null,512),[[H,n.confirmPassword]]),i(c).confirmPassword.$error?(t(),o("div",Ls,[(t(!0),o(L,null,j(i(c).confirmPassword.$errors,l=>(t(),o("div",{key:l.$uid},g(l.$message),1))),128))])):k("",!0)])])]),e("div",Ds,[e("div",qs,[e("button",{disabled:i(c).$dirty&&i(c).$invalid,onClick:s[7]||(s[7]=l=>y()),class:"btn btn-primary w-100"},s[17]||(s[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),O("Register ")]),8,Rs)]),e("div",js,[S(v,{to:"/",class:"btn btn-outline-primary w-100"},{default:h(()=>s[18]||(s[18]=[O("Home")])),_:1})]),e("div",zs,[S(v,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:h(()=>s[19]||(s[19]=[O("Login")])),_:1})])])])])])]),_:1})}}},Ys={path:"/accounts",component:Wt,props:!1,meta:{},children:[{path:"",component:Gt},{path:"login",component:as},{path:"logout",component:is},{path:"register",component:Fs}]};function Fe(){const a=Le(),n=U=>window.location.href.indexOf(U)>-1,u=U=>localStorage.getItem("data-bs-theme")||U,f=U=>{document.documentElement.setAttribute("data-bs-theme",U),localStorage.setItem("data-bs-theme",U)},c=async()=>await Be.get("https://bootswatch.com/api/5.json").then(U=>U.data),P=U=>{const _=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");_&&U?(_.setAttribute("href",U),localStorage.setItem("bootswatch-theme",U)):alert("cannot query css link")},b=U=>{B(),a.push(U)},B=()=>{if(screen.width<576){const _=document.getElementById("navbarCollapse");if(_){const E=Qe.getInstance(_);E&&E.hide()}}};return{isActive:n,getCurrentBsTheme:u,changeBsTheme:f,getBootswatch:c,changeTheme:P,navigate:b,collapseNavbar:B}}const Ws={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},Gs={class:"container-md"},Js={class:"navbar-collapse collapse",id:"navbarCollapse"},Ks={class:"navbar-nav"},Qs={class:"nav-item"},Xs={class:"nav-item"},Zs={class:"nav-item"},eo={class:"d-none nav-item dropdown"},to={class:"dropdown-menu","aria-labelledby":"dropdown01"},so={class:"nav-item"},oo={class:"nav-item dropdown d-none"},lo={class:"dropdown-menu","aria-labelledby":"dropdown01"},ao={class:"nav-item dropdown d-none"},no={class:"dropdown-menu","aria-labelledby":"dropdown01"},io={class:"navbar-nav ms-auto"},ro={class:"nav-item dropdown"},uo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},co=["onClick"],mo={class:"nav-item dropdown"},fo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},po={class:"d-inline d-sm-none d-md-inline"},vo={key:0},go={key:1},bo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},yo={key:0},$o={key:1},wo={__name:"topNav",props:{appName:{type:String,default:"Sony FAST"}},setup(a){const n=ze(),{isActive:u,getCurrentBsTheme:f,changeBsTheme:c,getBootswatch:P,changeTheme:b,navigate:B,collapseNavbar:U}=Fe(),_=ue(),E=_.user,F=de({user:E,username:E?E.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});ie(async()=>{const N=F;N.bootswatch=await P();const d=f(N.bsTheme);d&&(N.bsTheme=d,c(N.bsTheme));const J=localStorage.getItem("bootswatch-theme");J&&(N.currentTheme=J,b(J))});const R=N=>{b(N),F.currentTheme=N,U()},D=N=>{c(N),F.bsTheme=N,U()},V=async()=>{_.logoutWithRedirect();const N=new De(n.msalConfig);await N.initialize();const d={mainWindowRedirectUri:"/"};await N.logoutPopup(d)};return(N,d)=>{const J=G("router-link");return t(),le(re,null,{default:h(()=>[e("nav",Ws,[e("div",Gs,[S(J,{class:"navbar-brand",to:"/administrator"},{default:h(()=>[O(g(a.appName),1)]),_:1}),d[26]||(d[26]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Js,[e("ul",Ks,[e("li",Qs,[S(J,{to:"/videos",onClick:i(U),class:"nav-link"},{default:h(()=>d[3]||(d[3]=[O(" Videos ")])),_:1},8,["onClick"])]),e("li",Xs,[S(J,{to:"/source-locations",onClick:i(U),class:"nav-link"},{default:h(()=>d[4]||(d[4]=[O(" Source Locations ")])),_:1},8,["onClick"])]),e("li",Zs,[S(J,{to:"/vod-sources",onClick:i(U),class:"nav-link"},{default:h(()=>d[5]||(d[5]=[O(" Video on Demand (VOD) ")])),_:1},8,["onClick"])]),e("li",eo,[d[8]||(d[8]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"}," Sources ",-1)),e("ul",to,[e("li",null,[S(J,{to:"/source-locations",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[6]||(d[6]=[O(" Source Locations ")])),_:1},8,["onClick"])]),e("li",null,[S(J,{to:"/vod-sources",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[7]||(d[7]=[O(" Video on Demand (VOD) ")])),_:1},8,["onClick"])])])]),e("li",so,[S(J,{to:"/channels",onClick:i(U),class:"nav-link"},{default:h(()=>d[9]||(d[9]=[O(" Channels ")])),_:1},8,["onClick"])]),e("li",oo,[d[13]||(d[13]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-film me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Movies")])],-1)),e("ul",lo,[e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[10]||(d[10]=[O(" Movies ")])),_:1},8,["onClick"])]),e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[11]||(d[11]=[O(" Movie Alphas ")])),_:1},8,["onClick"])]),e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[12]||(d[12]=[O(" Movie Alpha Media ")])),_:1},8,["onClick"])])])]),e("li",ao,[d[18]||(d[18]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-tv me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Series")])],-1)),e("ul",no,[e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[14]||(d[14]=[O(" Series ")])),_:1},8,["onClick"])]),e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[15]||(d[15]=[O(" Seasons ")])),_:1},8,["onClick"])]),e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[16]||(d[16]=[O(" Episodes ")])),_:1},8,["onClick"])]),e("li",null,[S(J,{to:"/movies",onClick:i(U),class:"dropdown-item"},{default:h(()=>d[17]||(d[17]=[O(" Episode Alphas ")])),_:1},8,["onClick"])])])])]),e("ul",io,[e("li",ro,[d[22]||(d[22]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),O("Themes ")],-1)),e("ul",uo,[e("li",null,[F.bsTheme==="dark"?(t(),o("button",{key:0,onClick:d[0]||(d[0]=z=>D("light")),class:"dropdown-item"},d[19]||(d[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),O("Dark Mode ")]))):(t(),o("button",{key:1,onClick:d[1]||(d[1]=z=>D("dark")),class:"dropdown-item"},d[20]||(d[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),O("Light Mode ")])))]),d[21]||(d[21]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),o(L,null,j(F.bootswatch.themes,z=>(t(),o("li",null,[e("button",{onClick:r=>R(z.cssCdn),class:ae(["dropdown-item",{active:F.currentTheme===z.cssCdn}])},g(z.name),11,co)]))),256))])]),e("li",mo,[e("a",fo,[e("span",null,[d[23]||(d[23]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",po,[i(E)?(t(),o("span",vo,g(i(E).name),1)):(t(),o("span",go," Guest "))])])]),e("ul",bo,[i(E)?(t(),o("li",yo,[e("button",{onClick:d[2]||(d[2]=z=>V()),class:"dropdown-item"},d[24]||(d[24]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),O("Logout ")]))])):(t(),o("li",$o,[S(J,{to:"/accounts/login",class:"dropdown-item"},{default:h(()=>d[25]||(d[25]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),O("Login ")])),_:1})]))])])])])])])]),_:1})}}},ho={class:"footer sticky-bottom"},_o={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},ko={class:"container-md"},So={class:"navbar-text small p-0"},Mo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(a){Fe();const n=fe("$config"),f=ue().user;let P=new Date().getFullYear();const b=de({user:f,username:f?f.nameFull:"Guest",copyright:`2020-${P} ${n.appName}`});return ie(async()=>{}),(B,U)=>(t(),o("footer",ho,[e("div",_o,[e("div",ko,[e("span",So,"©"+g(b.copyright),1)])])]))}},To={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ve.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(a){a.message&&this.addMessage(a.title,a.message,a.type,a.options)},async addMessage(a,n,u,f={}){var c={id:this.count++,title:a,message:n,type:u,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};c=Object.assign({},c,f),this.messages.unshift(c),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),c.timeOut>0&&await this.startTimeout(c)},async startTimeout(a,n=0){const u=this,f=performance.now(),c=async()=>{a.animationFrame=requestAnimationFrame(async P=>{const b=P+n-f;if(!u.exists(a)||a.paused){cancelAnimationFrame(a.animationFrame);return}else if(b<a.timeOut){const B=b/a.timeOut;a.progress=B,await c()}else{a.progress=1,cancelAnimationFrame(a.animationFrame),u.remove(a);return}})};await c()},pauseProgress(a){a.timeOut<=0||(a.paused=!0)},async resumeProgress(a){a.timeOut<=0||(a.paused=!1,await this.startTimeout(a,a.timeOut*a.progress))},getCurrentProgress(a){return Math.round(a.progress*100)===100?100:a.progress*100},getIconClass(a){const n=a.type;let u="";switch(n){case"success":u="fas fa-fw fa-circle-check";break;case"info":u="fas fa-fw fa-circle-info";break;case"warning":u="fas fa-fw fa-circle-exclamation";break;case"danger":u="fas fa-fw fa-triangle-exclamation";break}let f=u;return a.rtl?"icon-right "+f:"icon-left "+f},async remove(a){const n=this.messages.findIndex(u=>u.id===a.id);this.messages.splice(n,1),typeof a.onClose=="function"&&await a.onClose()},exists(a){return this.messages.findIndex(u=>u.id===a.id)!==-1}}},Io={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Po=["onMouseover","onMouseout"],xo={class:"me-auto text-white"},Co=["onClick"],Uo={class:"toast-body"},Vo=["innerHTML"],Ao={key:0,class:"progress m-1",style:{height:"4px"}};function Eo(a,n,u,f,c,P){return t(),le(re,null,{default:h(()=>[e("div",Io,[S(ge,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:h(()=>[(t(!0),o(L,null,j(c.messages,b=>(t(),o("div",{key:b.id,class:ae(["toast show mb-2 ms-auto",`border-${b.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:B=>P.pauseProgress(b),onMouseout:B=>P.resumeProgress(b)},[e("div",{class:ae(["toast-header",`bg-${b.type}`])},[e("strong",xo,[e("i",{class:ae([P.getIconClass(b),"me-1"])},null,2),O(g(b.title),1)]),b.closeable?(t(),o("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:B=>P.remove(b)},n[0]||(n[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Co)):k("",!0)],2),e("div",Uo,[e("div",{innerHTML:b.message},null,8,Vo)]),b.timeOut>0&&b.showProgress?(t(),o("div",Ao,[e("div",{class:ae(`bg-${b.type}`),style:qe({width:P.getCurrentProgress(b)+"%"})},null,6)])):k("",!0)],42,Po))),128))]),_:1})])]),_:1})}const Oo=pe(To,[["render",Eo],["__scopeId","data-v-5272bd9a"]]),No={name:"AdminLayout",components:{TopNav:wo,BottomNav:Mo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Ho={class:"d-flex flex-column vh-100"};function Bo(a,n,u,f,c,P){const b=G("Toasts"),B=G("TopNav"),U=G("router-view"),_=G("BottomNav");return t(),o("div",Ho,[S(b),S(B),S(U,{class:"flex-grow-1 mb-2"}),n[0]||(n[0]=e("div",{class:"pt-2"},null,-1)),S(_)])}const Lo=pe(No,[["render",Bo]]),Do={class:"d-flex flex-row justify-content-end"},qo={class:"mt-2 container-md"},Ro={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},jo=["innerHTML"],zo={class:"card card-body mb-2"},Fo={key:0,class:"fas fa-fw fa-circle-check text-success"},Yo={key:1,class:"fas fa-fw fa-times-circle text-danger"},Wo={key:0,class:"fas fa-fw fa-circle-check text-success"},Go={key:1,class:"fas fa-fw fa-times-circle text-danger"},Jo={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},Ko={class:"col"},Qo={class:"card h-100 shadow-sm"},Xo={class:"card-body"},Zo={class:"col"},el={class:"card h-100 shadow-sm"},tl={class:"card-body"},sl={__name:"Index",setup(a){const{appTitle:n,pageTitle:u,busy:f,isDirty:c,validations:P,infoMessage:b,warningMessage:B,errorMessage:U,router:_,axios:E,utils:F,toasts:R,close:D,generateReturnUrl:V,security:N}=ce({appTitle:"ARC AIO",pageTitle:"Dashboard"});fe("$config"),ue().user;const J=de({item:null});ne("805630ed-f288-4f2f-83a4-6c71312f6970"),ne(),ie(async()=>{});const z=async()=>{const y=J;if(!f.value)try{f.value=!0;const M="/api/v1/dashboard/administrators/";y.item=[],await E.get(M).then(s=>{y.item=s.data})}catch(M){U.value=F.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{f.value=!1}},r=async()=>{await z()};return(y,M)=>{const s=G("PageHeader"),v=G("router-link");return t(),le(re,null,{default:h(()=>[e("div",null,[S(s,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:i(u),"header-break":"row row-cols-2"},{default:h(()=>[e("div",Do,[e("button",{onClick:M[0]||(M[0]=l=>r()),class:"ms-2 btn btn-secondary"},M[1]||(M[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",qo,[i(U)?(t(),o("div",Ro,[M[2]||(M[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:JSON.stringify(i(U))},null,8,jo)])):k("",!0),M[14]||(M[14]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),O("UNDER CONSTRUCTION ")],-1)),e("div",zo,[M[5]||(M[5]=O(" Security ")),e("ul",null,[e("li",null,[i(N).isAdministrator?(t(),o("span",Fo)):(t(),o("span",Yo)),M[3]||(M[3]=O(" Administrator "))]),e("li",null,[i(N).isEmployee?(t(),o("span",Wo)):(t(),o("span",Go)),M[4]||(M[4]=O(" Employee "))])])]),e("div",Jo,[e("div",Ko,[e("div",Qo,[M[7]||(M[7]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),O("Human Resources ")])],-1)),e("div",Xo,[e("ul",null,[e("li",null,[S(v,{to:"/movies"},{default:h(()=>M[6]||(M[6]=[O(" Employees ")])),_:1})])])])])]),e("div",Zo,[e("div",el,[M[13]||(M[13]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),O("TBD ")])],-1)),e("div",tl,[e("ul",null,[e("li",null,[S(v,{to:"/media-videos"},{default:h(()=>M[8]||(M[8]=[O(" TBD ")])),_:1})]),e("li",null,[S(v,{to:"/movies"},{default:h(()=>M[9]||(M[9]=[O(" TBD ")])),_:1})]),e("li",null,[S(v,{to:"/movies"},{default:h(()=>M[10]||(M[10]=[O(" TBD ")])),_:1})]),e("li",null,[S(v,{to:"/movies"},{default:h(()=>M[11]||(M[11]=[O(" TBD ")])),_:1})]),e("li",null,[S(v,{to:"/movies"},{default:h(()=>M[12]||(M[12]=[O(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},ol={class:"d-flex justify-content-end"},ll=["disabled"],al={class:"input-group"},nl={class:"row row-cols-1 row-cols-sm-2 mt-3"},il={class:"col text-center mb-2"},rl=["src"],dl={class:"col"},ul={class:"form-floating mb-2"},cl={key:0,class:"d-block invalid-feedback"},ml={class:"form-floating mb-2"},fl={class:"row row-cols-sm-2"},pl={class:"col"},vl={class:"form-floating mb-2"},gl={class:"col"},bl={class:"form-floating mb-2"},yl={class:"row row-cols-sm-2"},$l={class:"col"},wl={class:"form-floating mb-2"},hl={class:"col"},_l={class:"form-floating mb-2"},kl={class:"col"},Sl={class:"form-floating mb-2"},Ml={class:"col"},Tl={class:"form-floating mb-2"},Ae="YYYY-MM-DD HH:mm",Il={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,security:R}=ce({appTitle:"ARC AIO",pageTitle:"Add User"}),D=a,V=_.moment().local();V.format(Ae),V.add(24,"hours").format(Ae);const N=ne("a22de760-358d-4a0e-83ad-2624a5c11f73"),d=de({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),J={item:{userId:{required:te.withMessage("User Id is required.",se),$autoDirty:!0,$lazy:!0}}},z=$e(J,d);ie(async()=>{});const r=async()=>{const M=d;if(!f.value)try{f.value=!0,M.item=null;const s=`/api/v1/users/get-from-entra-id/${N.value}`;await U.get(s).then(v=>{M.item=v.data})}catch(s){b.value=_.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{f.value=!1}},y=async()=>{const M=d;if(f.value)return;if(!await z.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,b.value="",await U.post(`/api/v1/users/add-from-entra-id/${M.item.userId}`).then(v=>{E.success("Add User","User added",{onClose:async()=>{const l=`${D.urlView}/${v.data}`;await B.push(l)}})})}catch(v){b.value=_.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{f.value=!1}};return(M,s)=>{const v=G("router-link"),l=G("PageHeader"),q=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:i(u),"header-break":"row row-cols-2"},{default:h(()=>[e("div",ol,[e("button",{disabled:i(z).$dirty&&i(z).$invalid,onClick:s[0]||(s[0]=p=>y()),class:"btn btn-primary"},s[12]||(s[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ll),S(v,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:h(()=>s[13]||(s[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),S(q,{errorMessage:i(b),vuelidate:i(z)},{default:h(()=>[e("div",null,[e("div",null,[e("div",al,[I(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>N.value=p),onKeyup:s[2]||(s[2]=_e(p=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[H,N.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:s[3]||(s[3]=p=>r())},s[14]||(s[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",nl,[e("div",il,[e("img",{src:d.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,rl)]),e("div",dl,[e("div",ul,[I(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>d.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,d.item.userId]]),s[15]||(s[15]=e("label",{for:"userId"},"User Id",-1)),i(z).item.userId.$error?(t(),o("div",cl,[(t(!0),o(L,null,j(i(z).item.userId.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)]),e("div",ml,[I(e("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>d.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,d.item.displayName]]),s[16]||(s[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",fl,[e("div",pl,[e("div",vl,[I(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>d.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,d.item.givenName]]),s[17]||(s[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",gl,[e("div",bl,[I(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>d.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,d.item.surname]]),s[18]||(s[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",yl,[e("div",$l,[e("div",wl,[I(e("input",{"onUpdate:modelValue":s[8]||(s[8]=p=>d.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,d.item.email]]),s[19]||(s[19]=e("label",{for:"email"},"Email",-1))])]),e("div",hl,[e("div",_l,[I(e("input",{"onUpdate:modelValue":s[9]||(s[9]=p=>d.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,d.item.mobilePhone]]),s[20]||(s[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",kl,[e("div",Sl,[I(e("input",{"onUpdate:modelValue":s[10]||(s[10]=p=>d.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,d.item.principalName]]),s[21]||(s[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Ml,[e("div",Tl,[I(e("input",{"onUpdate:modelValue":s[11]||(s[11]=p=>d.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,d.item.jobTitle]]),s[22]||(s[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Se(a){if(!a.cacheKey)throw Error("Cache Key required.");if(!a.baseUrl)throw Error("Base Url required.");const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,closeWithReturnUrl:R,generateReturnUrl:D,security:V}=ce({appTitle:a.appTitle,pageTitle:a.pageTitle}),N=JSON.parse(JSON.stringify(a.filter));N.pageIndex=N.pageIndex||1,N.pageSize=N.pageSize||15,N.sortField=N.sortField||"",N.sortOrder=N.sortOrder||1,N.updateUrl=N.updateUrl||!1,N.items=N.items||[],N.query=N.query||{},N.query.criteria=N.query.criteria||"";const d=ne(N),J=()=>{var C;if(f.value){console.log("Paginated search is currently busy.");return}const l=JSON.parse(localStorage.getItem(a.cacheKey))||{},q=new URLSearchParams(window.location.search),p=d.value;p.query.criteria=q.get("c")||l.criteria||p.query.criteria||"",p.pageIndex=parseInt(q.get("p"),10)||l.pageIndex||p.pageIndex||1,p.pageSize=parseInt(q.get("s"),10)||l.pageSize||p.pageSize||5,p.sortField=q.get("sf")||l.sortField||p.sortField||"",p.sortOrder=parseInt(q.get("so"),10)||l.sortOrder||p.sortOrder||1,p.visible=l.visible||p.visible,(C=a.initializeFilter)==null||C.call(a,d,a.cacheKey)},z=()=>{if(a.getQuery)return a.getQuery(d.value);{const l=d.value;return["?c=",encodeURIComponent(l.query.criteria),"&p=",l.pageIndex,"&s=",l.pageSize,"&sf=",l.sortField,"&so=",l.sortOrder].join("")}},r=()=>{if(a.saveQuery)a.saveQuery(d.value,a.cacheKey);else{const l=d.value;localStorage.setItem(a.cacheKey,JSON.stringify({criteria:l.query.criteria,pageIndex:l.pageIndex,pageSize:l.pageSize,sortField:l.sortField,sortOrder:l.sortOrder,visible:l.visible}))}};return{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,closeWithReturnUrl:R,generateReturnUrl:D,security:V,filter:d,initializeFilter:J,getQuery:z,saveQuery:r,search:async l=>{var p;let q=d.value;if(f.value){console.log("Paginated search is currently busy.");return}l>0&&(q.pageIndex=l);try{f.value=!0,b.value="";const C=z();q.selected=null,await U(`${a.baseUrl}/${C}`).then(async x=>{var K;Array.isArray(x.data)?q.items=x.data:q=Object.assign(q,x.data);let $=location.pathname;$.endsWith("/")?$+=C:$+="/"+C,q.updateUrl&&window.history.replaceState(C,`${n}-search`,$),q.items.forEach(Z=>{Z.expand=!1}),r(),(K=a.successAction)==null||K.call(a,d.value)})}catch(C){if(localStorage.removeItem(a.cacheKey),a.failAction)a.failAction(C);else{const x=_.getErrorMessageAsHtml(C);b.value=x,E.error("Error Occured",x)}}finally{f.value=!1,(p=a.finalAction)==null||p.call(a)}},getRowNumber:l=>{const q=d.value;return(q.pageIndex-1)*q.pageSize+(l+1)},setSelected:l=>{const q=d.value;q.selected&&l&&q.selected===l?q.selected=null:(q.selected&&(q.selected.expand=!1),q.selected=l,q.selected.expand=!0)},isSelected:l=>{const q=d.value;return l===null||q.selected===null?!1:l===q.selected}}}const Pl={class:"d-flex justify-content-end"},xl={key:0},Cl={class:"ms-1"},Ul={class:"input-group"},Vl={class:"table-responsive"},Al={class:"table table-hover mb-0"},El=["textContent"],Ol=["src"],Nl="/api/v1/users/search",Hl={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(a){fe("$config");const u=ue().user,{appTitle:f,pageTitle:c,busy:P,infoMessage:b,warningMessage:B,errorMessage:U,router:_,axios:E,utils:F,toasts:R,close:D,security:V,filter:N,initializeFilter:d,getQuery:J,saveQuery:z,search:r,getRowNumber:y,setSelected:M,isSelected:s}=Se({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${u==null?void 0:u.userId}/users/search`,baseUrl:Nl,filter:{updateUrl:!0}});return ie(async()=>{d(),await r()}),(v,l)=>{const q=G("router-link"),p=G("PageHeader"),C=G("m-pagination"),x=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(p,{"page-icon":"fas fa-fw fa-users",pageTitle:i(c)},{default:h(()=>[e("div",Pl,[i(V).isAdministrator?(t(),o("div",xl,[S(q,{to:a.urlAdd,class:"btn btn-primary"},{default:h(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):k("",!0),e("div",Cl,[e("div",Ul,[I(e("input",{"onUpdate:modelValue":l[0]||(l[0]=$=>i(N).query.criteria=$),onKeyup:l[1]||(l[1]=_e($=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(N).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=$=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),S(x,{errorMessage:i(U)},{default:h(()=>[e("div",Vl,[e("table",Al,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(i(N).items,($,K)=>(t(),o("tr",{key:$.movieId},[e("td",{textContent:g(i(y)(K)),class:"text-center"},null,8,El),e("td",null,[$.photoBase64?(t(),o("img",{key:0,src:$.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Ol)):k("",!0)]),e("td",null,[S(q,{to:`${a.urlView}/${$.userId}`,class:"d-inline-block text-truncate"},{default:h(()=>[O(g($.displayName),1)]),_:2},1032,["to"])]),e("td",null,g($.email),1),e("td",null,g($.jobTitle),1)]))),128))]),_:1},512),[[ye,i(N).items.length>0]])])]),S(C,{filter:i(N),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Bl={class:"d-flex flex-row justify-content-end"},Ll={key:0},Dl={class:"row row-cols-1 row-cols-sm-2 mt-3"},ql={class:"col text-center mb-2"},Rl=["src"],jl={class:"col"},zl={class:"form-floating mb-2"},Fl={class:"form-floating mb-2"},Yl={class:"row row-cols-sm-2"},Wl={class:"col"},Gl={class:"form-floating mb-2"},Jl={class:"col"},Kl={class:"form-floating mb-2"},Ql={class:"row row-cols-sm-2"},Xl={class:"col"},Zl={class:"form-floating mb-2"},ea={class:"col"},ta={class:"form-floating mb-2"},sa={class:"col"},oa={class:"form-floating mb-2"},la={class:"col"},aa={class:"form-floating mb-2"},na={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:P,validations:b,infoMessage:B,warningMessage:U,errorMessage:_,router:E,axios:F,utils:R,toasts:D,close:V,closeWithReturnUrl:N,generateReturnUrl:d,security:J}=ce({appTitle:"ARC CMS",pageTitle:"View User"});fe("$config");const z=ue();z.user;const r=de({user:z.user,item:null});ie(async()=>{await y()});const y=async()=>{const v=r;if(!c.value)try{c.value=!0,_.value="",r.item=null;const l=`/api/v1/users/get-from-db/${n.id}/`;await F.get(l).then(q=>{v.item=q.data})}catch(l){_.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}},M=async()=>{await y()},s=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/users/${n.id}/`).then(l=>{D.warning("Delete User","User was deleted.",{async onClose(){await E.push(n.urlMain)}})})}catch(l){_.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}}};return(v,l)=>{const q=G("router-link"),p=G("PageHeader"),C=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(p,{"page-icon":"fas fa-fw fa-user",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:h(()=>[e("div",Bl,[i(J).isAdministrator?(t(),o(L,{key:0},[S(q,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:h(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=x=>s()),class:"ms-1 btn btn-warning"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):k("",!0),e("button",{onClick:l[1]||(l[1]=x=>M()),class:"ms-2 btn btn-secondary"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=x=>i(N)(n.urlMain)),class:"btn btn-secondary ms-1"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),S(C,{errorMessage:i(_)},{default:h(()=>[r.item?(t(),o("div",Ll,[e("div",null,[e("div",Dl,[e("div",ql,[e("img",{src:r.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,Rl)]),e("div",jl,[e("div",zl,[I(e("input",{"onUpdate:modelValue":l[3]||(l[3]=x=>r.item.userId=x),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,r.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",Fl,[I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=x=>r.item.displayName=x),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,r.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Yl,[e("div",Wl,[e("div",Gl,[I(e("input",{"onUpdate:modelValue":l[5]||(l[5]=x=>r.item.givenName=x),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,r.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Jl,[e("div",Kl,[I(e("input",{"onUpdate:modelValue":l[6]||(l[6]=x=>r.item.surname=x),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,r.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Ql,[e("div",Xl,[e("div",Zl,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=x=>r.item.email=x),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,r.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",ea,[e("div",ta,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=x=>r.item.mobilePhone=x),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,r.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",sa,[e("div",oa,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=x=>r.item.principalName=x),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,r.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",la,[e("div",aa,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=x=>r.item.jobTitle=x),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,r.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):k("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},ia={class:"d-flex justify-content-end"},ra=["disabled"],da={class:"row row-cols-1 row-cols-sm-2"},ua={class:"col"},ca={class:"form-floating mb-2"},ma={key:0,class:"d-block invalid-feedback"},fa={class:"col"},pa={class:"input-group mb-2"},va={class:"form-floating"},ga={key:0,class:"d-block invalid-feedback"},ba={key:0,class:"input-group-text"},ya={class:"col"},$a={class:"form-floating mb-2"},wa={class:""},ha={class:"col"},_a={class:"form-floating mb-2"},ka={key:0,class:"d-block invalid-feedback"},Sa={class:"col"},Ma={class:"form-floating mb-2"},Ta={key:0,class:"d-block invalid-feedback"},Ia={class:""},Pa={class:"col"},xa={class:"form-floating mb-2"},Ca={key:0,class:"d-block invalid-feedback"},Ua={class:"col"},Va={class:"input-group mb-2"},Aa={class:"form-floating"},Ea=["href"],Oa={key:0,class:"d-block invalid-feedback"},Na={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,security:R}=ce({appTitle:"Sony FAST",pageTitle:"Add Video"}),D=a,V=de({lookups:{visibilityTypes:[]},item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),N={item:{title:{title:te.withMessage("title is required.",se),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("durationInMillis is required.",se),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:te.withMessage("rawBaseUrl is required.",se),$autoDirty:!0,$lazy:!0},rawPath:{title:te.withMessage("rawPath is required.",se),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:te.withMessage("hlsBaseUrl is required.",se),$autoDirty:!0,$lazy:!0},hlsPath:{title:te.withMessage("hlsPath is required.",se),$autoDirty:!0,$lazy:!0}}},d=$e(N,V);ie(async()=>{});const J=async()=>{const z=V;if(f.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,b.value="";const y=_.clone(z.item);debugger;await U.post("/api/v1/videos/",y).then(M=>{E.success("Add Video","Video added",{onClose:async()=>{const s=`${D.urlView}/${M.data}`;await B.push(s)}})})}catch(y){b.value=_.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{f.value=!1}};return(z,r)=>{const y=G("router-link"),M=G("PageHeader"),s=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(M,{"page-icon":"fas fa-fw fa-video",pageTitle:i(u),"header-break":"row row-cols-2"},{default:h(()=>[e("div",ia,[e("button",{disabled:i(d).$dirty&&i(d).$invalid,onClick:r[0]||(r[0]=v=>J()),class:"btn btn-primary"},r[8]||(r[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ra),S(y,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:h(()=>r[9]||(r[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),S(s,{errorMessage:i(b),vuelidate:i(d)},{default:h(()=>[e("div",null,[e("div",da,[e("div",ua,[e("div",ca,[I(e("input",{"onUpdate:modelValue":r[1]||(r[1]=v=>V.item.title=v),id:"name",class:"form-control",placeholder:"Title"},null,512),[[H,V.item.title]]),r[10]||(r[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),i(d).item.title.$error?(t(),o("div",ma,[(t(!0),o(L,null,j(i(d).item.title.$errors,v=>(t(),o("div",{key:v.$uid},g(v.$message),1))),128))])):k("",!0)])]),e("div",fa,[e("div",pa,[e("div",va,[I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=v=>V.item.durationInMillis=v),type:"number",id:"durationInMillis",class:"form-control",placeholder:"Duration In Millis"},null,512),[[H,V.item.durationInMillis]]),r[11]||(r[11]=e("label",{for:"durationInMillis",class:"small fw-bold"},"Duration In Millis",-1)),i(d).item.durationInMillis.$error?(t(),o("div",ga,[(t(!0),o(L,null,j(i(d).item.durationInMillis.$errors,v=>(t(),o("div",{key:v.$uid},g(v.$message),1))),128))])):k("",!0)]),V.item.durationInMillis>0?(t(),o("span",ba,g(i(_).moment.utc(V.item.durationInMillis).format("HH:mm:ss")),1)):k("",!0)])])]),e("div",ya,[e("div",$a,[I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=v=>V.item.description=v),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[H,V.item.description]]),r[12]||(r[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",wa,[r[15]||(r[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",ha,[e("div",_a,[I(e("input",{"onUpdate:modelValue":r[4]||(r[4]=v=>V.item.rawBaseUrl=v),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[H,V.item.rawBaseUrl]]),r[13]||(r[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),i(d).item.rawBaseUrl.$error?(t(),o("div",ka,[(t(!0),o(L,null,j(i(d).item.rawBaseUrl.$errors,v=>(t(),o("div",{key:v.$uid},g(v.$message),1))),128))])):k("",!0)])]),e("div",Sa,[e("div",Ma,[I(e("input",{"onUpdate:modelValue":r[5]||(r[5]=v=>V.item.rawPath=v),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[H,V.item.rawPath]]),r[14]||(r[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),i(d).item.rawPath.$error?(t(),o("div",Ta,[(t(!0),o(L,null,j(i(d).item.rawPath.$errors,v=>(t(),o("div",{key:v.$uid},g(v.$message),1))),128))])):k("",!0)])]),e("div",Ia,[r[19]||(r[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Pa,[e("div",xa,[I(e("input",{"onUpdate:modelValue":r[6]||(r[6]=v=>V.item.hlsBaseUrl=v),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[H,V.item.hlsBaseUrl]]),r[16]||(r[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),i(d).item.hlsBaseUrl.$error?(t(),o("div",Ca,[(t(!0),o(L,null,j(i(d).item.hlsBaseUrl.$errors,v=>(t(),o("div",{key:v.$uid},g(v.$message),1))),128))])):k("",!0)])]),e("div",Ua,[e("div",Va,[e("div",Aa,[I(e("input",{"onUpdate:modelValue":r[7]||(r[7]=v=>V.item.hlsPath=v),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[H,V.item.hlsPath]]),r[17]||(r[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),V.item.hlsBaseUrl&&V.item.hlsPath?(t(),o("a",{key:0,href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(V.item.hlsBaseUrl+V.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},r[18]||(r[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),O("View ")],-1)]),8,Ea)):k("",!0)]),i(d).item.hlsPath.$error?(t(),o("div",Oa,[(t(!0),o(L,null,j(i(d).item.hlsPath.$errors,v=>(t(),o("div",{key:v.$uid},g(v.$message),1))),128))])):k("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ha={key:0,class:"d-flex justify-content-end"},Ba=["disabled"],La={key:0},Da={class:"row row-cols-1 row-cols-sm-2"},qa={class:"col"},Ra={class:"form-floating mb-2"},ja={key:0,class:"d-block invalid-feedback"},za={class:"col"},Fa={class:"form-floating mb-2"},Ya={key:0,class:"d-block invalid-feedback"},Wa={class:"row row-cols-sm-2"},Ga={class:"col"},Ja={class:"form-floating mb-2"},Ka={class:"form-floating mb-2"},Qa={key:0,class:"d-block invalid-feedback"},Xa={class:"form-floating mb-2"},Za={key:0,class:"d-block invalid-feedback"},en={class:"col"},tn={class:"form-floating mb-2"},Pe={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,security:R}=ce({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),D=a,V=de({editorElementId:"editor",htmlContent:"",item:null}),N={item:{title:{required:te.withMessage("Title is required.",se),$autoDirty:!0,$lazy:!0},eidr:{required:te.withMessage("eidr is required.",se),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:te.withMessage("eidrPrefix is required.",se),$autoDirty:!0,$lazy:!0}},htmlContent:{required:te.withMessage("Content is required.",se),$autoDirty:!0,$lazy:!0}},d=$e(N,V);ie(async()=>{await r()});const J=()=>{const M=V;var s=document.getElementById(M.editorElementId);s.innerHTML=M.htmlContent},z=M=>{const s=V;s.htmlContent=M.target.innerHTML;var v=document.getElementById(s.editorElementId);v.value=s.htmlContent},r=async()=>{const M=V;if(!f.value)try{f.value=!0,V.item=null,await U.get(`/api/v1/movies/${D.id}`).then(s=>{M.item=s.data,M.htmlContent=M.item.description}),J()}catch(s){b.value=_.getErrorMessageAsHtml(s)}finally{f.value=!1}},y=async()=>{const M=V;if(f.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,b.value="";const v=_.clone(M.item);v.description=M.htmlContent,await U.put("/api/v1/movies",v).then(l=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const q=`${D.urlView}/${D.id}`;await B.push(q)}})})}catch(v){b.value=_.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{f.value=!1}};return(M,s)=>{const v=G("router-link"),l=G("PageHeader"),q=G("PageBody");return t(),o("div",null,[S(l,{"page-icon":"fas fa-fw fa-film",pageTitle:i(u),"header-break":"row row-cols-2 row-cols-sm-2"},{default:h(()=>[V.item?(t(),o("div",Ha,[e("button",{disabled:i(d).$dirty&&i(d).$invalid,onClick:s[0]||(s[0]=p=>y()),class:"btn btn-primary"},s[7]||(s[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ba),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},s[8]||(s[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),S(v,{to:`${D.urlView}/${D.id}`,class:"ms-1 btn btn-secondary"},{default:h(()=>s[9]||(s[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):k("",!0)]),_:1},8,["pageTitle"]),S(q,{errorMessage:i(b),vuelidate:i(d)},{default:h(()=>[V.item?(t(),o("div",La,[e("div",Da,[e("div",qa,[e("div",Ra,[I(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>V.item.eidrPrefix=p),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[H,V.item.eidrPrefix]]),s[10]||(s[10]=e("label",{for:"title"},"Eidr Prefix",-1)),i(d).item.eidrPrefix.$error?(t(),o("div",ja,[(t(!0),o(L,null,j(i(d).item.eidrPrefix.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)])]),e("div",za,[e("div",Fa,[I(e("input",{"onUpdate:modelValue":s[2]||(s[2]=p=>V.item.eidr=p),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[H,V.item.eidr]]),s[11]||(s[11]=e("label",{for:"title"},"Eidr",-1)),i(d).item.eidr.$error?(t(),o("div",Ya,[(t(!0),o(L,null,j(i(d).item.eidr.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)])])]),e("div",Wa,[e("div",Ga,[e("div",Ja,[I(e("input",{"onUpdate:modelValue":s[3]||(s[3]=p=>V.item.releaseYear=p),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[H,V.item.releaseYear]]),s[12]||(s[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Ka,[I(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>V.item.title=p),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[H,V.item.title]]),s[13]||(s[13]=e("label",{for:"title"},"Title",-1)),i(d).item.title.$error?(t(),o("div",Qa,[(t(!0),o(L,null,j(i(d).item.title.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)])])]),e("div",null,[e("div",Xa,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:s[5]||(s[5]=p=>z(p))},null,32),s[14]||(s[14]=e("label",{for:"editor"},"Content",-1)),i(d).htmlContent.$error?(t(),o("div",Za,[(t(!0),o(L,null,j(i(d).htmlContent.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)])]),e("div",en,[e("div",tn,[I(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=p=>V.item.metadata=p),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[H,V.item.metadata]]),s[15]||(s[15]=e("label",{for:"title"},"Metadata",-1))])])])):k("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},sn={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function on(a,n,u,f,c,P){const b=G("Page");return t(),le(b,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const ln=pe(sn,[["render",on]]),an={class:"d-flex justify-content-end"},nn={class:"ms-1"},rn={class:"input-group"},dn={class:"table-responsive"},un={class:"table table-hover mb-0"},cn=["textContent"],mn={class:"text-end ms-sm-5 pe-sm-5"},fn="/api/v1/videos/search",pn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(a){fe("$config");const u=ue().user,{appTitle:f,pageTitle:c,busy:P,infoMessage:b,warningMessage:B,errorMessage:U,router:_,axios:E,utils:F,toasts:R,close:D,security:V,filter:N,initializeFilter:d,getQuery:J,saveQuery:z,search:r,getRowNumber:y,setSelected:M,isSelected:s}=Se({appTitle:"Sony FAST",pageTitle:"Videos",cacheKey:`${u==null?void 0:u.userId}/videos/search`,baseUrl:fn,filter:{updateUrl:!0}});return ie(async()=>{d(),await r()}),(v,l)=>{const q=G("router-link"),p=G("PageHeader"),C=G("m-pagination"),x=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:i(c)},{default:h(()=>[e("div",an,[S(q,{to:a.urlAdd,class:"btn btn-primary"},{default:h(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",nn,[e("div",rn,[I(e("input",{"onUpdate:modelValue":l[0]||(l[0]=$=>i(N).query.criteria=$),onKeyup:l[1]||(l[1]=_e($=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(N).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=$=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),S(x,{errorMessage:i(U)},{default:h(()=>[e("div",dn,[e("table",un,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(i(N).items,($,K)=>(t(),o("tr",{key:$.movieId},[e("td",{textContent:g(i(y)(K)),class:"text-center"},null,8,cn),e("td",null,[S(q,{to:`${a.urlView}/${$.videoId}`,class:"d-inline-block text-truncate"},{default:h(()=>[O(g($.title),1)]),_:2},1032,["to"])]),e("td",null,g($.description),1),e("td",mn,[e("div",null,g(i(F).moment.utc($.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[ye,i(N).items.length>0]])])]),S(C,{filter:i(N),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},vn={class:"d-flex flex-row justify-content-end"},gn={key:0},bn={class:"row row-cols-sm-2"},yn={class:"col"},$n={class:"form-floating mb-2"},wn={class:"col"},hn={class:"form-floating mb-2"},_n={class:"col"},kn={class:"form-floating mb-2"},Sn={class:"row row-cols-sm-2"},Mn={class:"col"},Tn={class:"form-floating mb-2"},In={class:"col"},Pn={class:"form-floating mb-2"},xn={class:"row row-cols-sm-2"},Cn={class:"col"},Un={class:"form-floating mb-2"},Vn={class:"col"},An={class:"form-floating mb-2"},En={class:"row row-cols-sm-2"},On={class:"col"},Nn={class:"form-floating mb-2"},Hn={class:"col"},Bn={class:"form-floating mb-2"},Ln={class:"table-responsive"},Dn={class:"table table-hover mb-0 caption-top"},qn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:P,validations:b,infoMessage:B,warningMessage:U,errorMessage:_,router:E,axios:F,utils:R,toasts:D,close:V,closeWithReturnUrl:N,generateReturnUrl:d,security:J}=ce({appTitle:"Sony FAST",pageTitle:"View Video"});fe("$config");const z=ue();z.user;const r=de({user:z.user,item:null});ie(async()=>{await y()});const y=async()=>{const v=r;if(!c.value)try{c.value=!0,_.value="",r.item=null;const l=`/api/v1/videos/${n.id}/`;await F.get(l).then(q=>{v.item=q.data,v.item.duration=R.moment.utc(v.item.durationInMillis).format("HH:mm:ss")})}catch(l){_.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}},M=async()=>{await y()},s=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/users/${n.id}/`).then(l=>{D.warning("Delete User","User was deleted.",{async onClose(){await E.push(n.urlMain)}})})}catch(l){_.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}}};return(v,l)=>{const q=G("router-link"),p=G("PageHeader"),C=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:h(()=>[e("div",vn,[i(J).isAdministrator?(t(),o(L,{key:0},[S(q,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:h(()=>l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=x=>s()),class:"ms-1 btn btn-warning"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):k("",!0),e("button",{onClick:l[1]||(l[1]=x=>M()),class:"ms-2 btn btn-secondary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=x=>i(N)(n.urlMain)),class:"btn btn-secondary ms-1"},l[15]||(l[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),S(C,{errorMessage:i(_)},{default:h(()=>[r.item?(t(),o("div",gn,[e("div",null,[e("div",bn,[e("div",yn,[e("div",$n,[I(e("input",{"onUpdate:modelValue":l[3]||(l[3]=x=>r.item.title=x),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[H,r.item.title]]),l[16]||(l[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",wn,[e("div",hn,[I(e("input",{"onUpdate:modelValue":l[4]||(l[4]=x=>r.item.duration=x),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[H,r.item.duration]]),l[17]||(l[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",_n,[e("div",kn,[I(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=x=>r.item.description=x),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[H,r.item.description]]),l[18]||(l[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",Sn,[e("div",Mn,[e("div",Tn,[I(e("input",{"onUpdate:modelValue":l[6]||(l[6]=x=>r.item.rawBaseUrl=x),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[H,r.item.rawBaseUrl]]),l[19]||(l[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",In,[e("div",Pn,[I(e("input",{"onUpdate:modelValue":l[7]||(l[7]=x=>r.item.rawPath=x),class:"form-control",id:"rawPath",disabled:""},null,512),[[H,r.item.rawPath]]),l[20]||(l[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",xn,[e("div",Cn,[e("div",Un,[I(e("input",{"onUpdate:modelValue":l[8]||(l[8]=x=>r.item.hlsBaseUrl=x),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[H,r.item.hlsBaseUrl]]),l[21]||(l[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Vn,[e("div",An,[I(e("input",{"onUpdate:modelValue":l[9]||(l[9]=x=>r.item.hlsPath=x),class:"form-control",id:"hlsPath",disabled:""},null,512),[[H,r.item.hlsPath]]),l[22]||(l[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",En,[e("div",On,[e("div",Nn,[I(e("input",{"onUpdate:modelValue":l[10]||(l[10]=x=>r.item.dashBaseUrl=x),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[H,r.item.dashBaseUrl]]),l[23]||(l[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Hn,[e("div",Bn,[I(e("input",{"onUpdate:modelValue":l[11]||(l[11]=x=>r.item.dashPath=x),class:"form-control",id:"dashPath",disabled:""},null,512),[[H,r.item.dashPath]]),l[24]||(l[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Ln,[e("table",Dn,[l[25]||(l[25]=e("caption",null,"VOD Sources",-1)),l[26]||(l[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.vodSources,(x,$)=>(t(),o("tr",{key:x.vodSourceId},[e("td",null,g($+1),1),e("td",null,[S(q,{to:`${n.urlViewVodSource}/${encodeURIComponent(x.vodSourceId)}/${i(d)()}`},{default:h(()=>[O(g(x.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[ye,r.item.vodSources.length>0]])])])])):k("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Rn={class:"d-flex justify-content-end"},jn=["disabled"],zn={class:"input-group"},Fn={class:"row row-cols-1 row-cols-sm-2 mt-3"},Yn={class:"col text-center mb-2"},Wn=["src"],Gn={class:"col"},Jn={class:"form-floating mb-2"},Kn={key:0,class:"d-block invalid-feedback"},Qn={class:"form-floating mb-2"},Xn={class:"row row-cols-sm-2"},Zn={class:"col"},ei={class:"form-floating mb-2"},ti={class:"col"},si={class:"form-floating mb-2"},oi={class:"row row-cols-sm-2"},li={class:"col"},ai={class:"form-floating mb-2"},ni={class:"col"},ii={class:"form-floating mb-2"},ri={class:"col"},di={class:"form-floating mb-2"},ui={class:"col"},ci={class:"form-floating mb-2"},Ee="YYYY-MM-DD HH:mm",mi={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,security:R}=ce({appTitle:"ARC AIO",pageTitle:"Add User"}),D=a,V=_.moment().local();V.format(Ee),V.add(24,"hours").format(Ee);const N=ne("a22de760-358d-4a0e-83ad-2624a5c11f73"),d=de({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),J={item:{userId:{required:te.withMessage("User Id is required.",se),$autoDirty:!0,$lazy:!0}}},z=$e(J,d);ie(async()=>{});const r=async()=>{const M=d;if(!f.value)try{f.value=!0,M.item=null;const s=`/api/v1/users/get-from-entra-id/${N.value}`;await U.get(s).then(v=>{M.item=v.data})}catch(s){b.value=_.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{f.value=!1}},y=async()=>{const M=d;if(f.value)return;if(!await z.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,b.value="",await U.post(`/api/v1/users/add-from-entra-id/${M.item.userId}`).then(v=>{E.success("Add User","User added",{onClose:async()=>{const l=`${D.urlView}/${v.data}`;await B.push(l)}})})}catch(v){b.value=_.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{f.value=!1}};return(M,s)=>{const v=G("router-link"),l=G("PageHeader"),q=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:i(u),"header-break":"row row-cols-2"},{default:h(()=>[e("div",Rn,[e("button",{disabled:i(z).$dirty&&i(z).$invalid,onClick:s[0]||(s[0]=p=>y()),class:"btn btn-primary"},s[12]||(s[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jn),S(v,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:h(()=>s[13]||(s[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),S(q,{errorMessage:i(b),vuelidate:i(z)},{default:h(()=>[e("div",null,[e("div",null,[e("div",zn,[I(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>N.value=p),onKeyup:s[2]||(s[2]=_e(p=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[H,N.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:s[3]||(s[3]=p=>r())},s[14]||(s[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Fn,[e("div",Yn,[e("img",{src:d.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,Wn)]),e("div",Gn,[e("div",Jn,[I(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>d.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,d.item.userId]]),s[15]||(s[15]=e("label",{for:"userId"},"User Id",-1)),i(z).item.userId.$error?(t(),o("div",Kn,[(t(!0),o(L,null,j(i(z).item.userId.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)]),e("div",Qn,[I(e("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>d.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,d.item.displayName]]),s[16]||(s[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Xn,[e("div",Zn,[e("div",ei,[I(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>d.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,d.item.givenName]]),s[17]||(s[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",ti,[e("div",si,[I(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>d.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,d.item.surname]]),s[18]||(s[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",oi,[e("div",li,[e("div",ai,[I(e("input",{"onUpdate:modelValue":s[8]||(s[8]=p=>d.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,d.item.email]]),s[19]||(s[19]=e("label",{for:"email"},"Email",-1))])]),e("div",ni,[e("div",ii,[I(e("input",{"onUpdate:modelValue":s[9]||(s[9]=p=>d.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,d.item.mobilePhone]]),s[20]||(s[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",ri,[e("div",di,[I(e("input",{"onUpdate:modelValue":s[10]||(s[10]=p=>d.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,d.item.principalName]]),s[21]||(s[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",ui,[e("div",ci,[I(e("input",{"onUpdate:modelValue":s[11]||(s[11]=p=>d.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,d.item.jobTitle]]),s[22]||(s[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},fi={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function pi(a,n,u,f,c,P){const b=G("Page");return t(),le(b,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const vi=pe(fi,[["render",pi]]),gi={class:"d-flex justify-content-end"},bi={key:0},yi={class:"ms-1"},$i={class:"input-group"},wi={class:"table-responsive"},hi={class:"table table-hover mb-0"},_i=["textContent"],ki={key:0,class:"fas fa-fw fa-check-circle text-success"},Si="/api/v1/sourcelocations/search",Mi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(a){fe("$config");const u=ue().user,{appTitle:f,pageTitle:c,busy:P,infoMessage:b,warningMessage:B,errorMessage:U,router:_,axios:E,utils:F,toasts:R,close:D,security:V,filter:N,initializeFilter:d,getQuery:J,saveQuery:z,search:r,getRowNumber:y,setSelected:M,isSelected:s}=Se({appTitle:"Sony FAST",pageTitle:"Source Locations",cacheKey:`${u==null?void 0:u.userId}/source-locations/search`,baseUrl:Si,filter:{updateUrl:!0}});return ie(async()=>{d(),await r()}),(v,l)=>{const q=G("router-link"),p=G("PageHeader"),C=G("m-pagination"),x=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(p,{"page-icon":"fas fa-fw fa-building",pageTitle:i(c)},{default:h(()=>[e("div",gi,[i(V).isAdministrator?(t(),o("div",bi,[S(q,{to:a.urlAdd,class:"btn btn-primary"},{default:h(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):k("",!0),e("div",yi,[e("div",$i,[I(e("input",{"onUpdate:modelValue":l[0]||(l[0]=$=>i(N).query.criteria=$),onKeyup:l[1]||(l[1]=_e($=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(N).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=$=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),S(x,{errorMessage:i(U)},{default:h(()=>[e("div",wi,[e("table",hi,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(i(N).items,($,K)=>(t(),o("tr",{key:$.movieId},[e("td",{textContent:g(i(y)(K)),class:"text-center"},null,8,_i),e("td",null,[S(q,{to:`${a.urlView}/${$.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:h(()=>[$.arn?(t(),o("span",ki)):k("",!0),O(" "+g($.name),1)]),_:2},1032,["to"])]),e("td",null,g($.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[ye,i(N).items.length>0]])])]),S(C,{filter:i(N),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ti={class:"d-flex flex-row justify-content-end"},Ii={key:0},Pi={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},xi={class:"nav-item",role:"presentation"},Ci={class:"nav-item",role:"presentation"},Ui={class:"nav-item",role:"presentation"},Vi={class:"tab-content",id:"myTabContent"},Ai={class:"mt-2"},Ei={class:"col"},Oi={class:"form-floating mb-2"},Ni={class:"col"},Hi={class:"form-floating mb-2"},Bi={class:"mt-2"},Li={class:"table-responsive border"},Di={class:"table table-hover mb-0"},qi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Ri={class:"mt-2"},ji={class:"table-responsive border"},zi={class:"table table-hover mb-0"},Fi={key:0,class:"fas fa-fw fa-check-circle text-success"},Yi={key:1},Wi={key:2},Gi={key:0},Ji={class:"badge bg-info"},Ki={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:P,validations:b,infoMessage:B,warningMessage:U,errorMessage:_,router:E,axios:F,utils:R,toasts:D,close:V,closeWithReturnUrl:N,generateReturnUrl:d,security:J}=ce({appTitle:"Sony FAST",pageTitle:"View Source Location"});fe("$config");const z=ue();z.user;const r=de({user:z.user,item:null}),y=ne();ie(async()=>{await l(),y.value=R.getPageTab("sourceLocation")||"information-tab"});const M=x=>{R.setPageTab("sourceLocation",x),y.value=x},s=x=>x!==y.value?"":"active",v=x=>x!==y.value?"":"show active",l=async()=>{const x=r;if(!c.value)try{c.value=!0,_.value="",r.item=null;const $=`/api/v1/sourcelocations/${n.id}/`;await F.get($).then(K=>{x.item=K.data})}catch($){_.value=R.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{c.value=!1}},q=async()=>{await l()},p=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!c.value){_.value=null;try{c.value=!0,await F.post(`/api/v1/sourcelocations/publish/${n.id}/`).then($=>{D.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),c.value=!1,await q()}catch($){_.value=R.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{c.value=!1}}},C=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/sourcelocations/unpublish/${n.id}/`).then($=>{D.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),c.value=!1,await q()}catch($){_.value=R.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{c.value=!1}}};return(x,$)=>{const K=G("router-link"),Z=G("PageHeader"),oe=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(Z,{"page-icon":"fas fa-fw fa-building",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:h(()=>[e("div",Ti,[i(J).isAdministrator?(t(),o(L,{key:0},[S(K,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:h(()=>$[10]||($[10]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:$[0]||($[0]=w=>x.remove()),class:"ms-1 btn btn-warning"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):k("",!0),r.item?(t(),o(L,{key:1},[r.item.arn?(t(),o("button",{key:0,onClick:$[1]||($[1]=w=>C()),class:"ms-1 btn btn-warning"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),o("button",{key:1,onClick:$[2]||($[2]=w=>p()),class:"ms-1 btn btn-primary"},$[13]||($[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):k("",!0),e("button",{onClick:$[3]||($[3]=w=>q()),class:"ms-2 btn btn-secondary"},$[14]||($[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:$[4]||($[4]=w=>i(N)(n.urlMain)),class:"btn btn-secondary ms-1"},$[15]||($[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),S(oe,{errorMessage:i(_)},{default:h(()=>[r.item?(t(),o("div",Ii,[e("div",null,[e("ul",Pi,[e("li",xi,[e("button",{onClick:$[5]||($[5]=w=>M("information-tab")),class:ae([s("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ci,[e("button",{onClick:$[6]||($[6]=w=>M("vodSources-tab")),class:ae([s("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Ui,[e("button",{onClick:$[7]||($[7]=w=>M("programs-tab")),class:ae([s("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Vi,[e("div",{class:ae([v("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Ai,[e("div",Ei,[e("div",Oi,[I(e("input",{"onUpdate:modelValue":$[8]||($[8]=w=>r.item.name=w),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[H,r.item.name]]),$[16]||($[16]=e("label",{for:"name"},"Name",-1))])]),e("div",Ni,[e("div",Hi,[I(e("input",{"onUpdate:modelValue":$[9]||($[9]=w=>r.item.httpConfigurationBaseUrl=w),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[H,r.item.httpConfigurationBaseUrl]]),$[17]||($[17]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:ae([v("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Bi,[e("div",Li,[e("table",Di,[$[18]||($[18]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.vodSources,(w,m)=>(t(),o("tr",{key:w.vodSourceId},[e("td",null,g(m+1),1),e("td",null,[w.arn?(t(),o("span",qi)):k("",!0),S(K,{to:`${n.urlViewVodSource}/${encodeURIComponent(w.vodSourceId)}/${i(d)()}`},{default:h(()=>[O(g(w.name),1)]),_:2},1032,["to"])]),e("td",null,[S(K,{to:`${n.urlViewVideo}/${encodeURIComponent(w.video.videoId)}/${i(d)()}`},{default:h(()=>[O(g(w.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,g(i(R).moment.utc(w.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[ye,r.item.vodSources.length>0]])])])])],2),e("div",{class:ae([v("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Ri,[e("div",ji,[e("table",zi,[$[19]||($[19]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Relative Program"),e("th",null,"Date Scheduled Start"),e("th",null,"Channel")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.programs,(w,m)=>(t(),o("tr",{key:w.programId},[e("td",null,g(m+1),1),e("td",null,[w.arn?(t(),o("span",Fi)):k("",!0),O(" "+g(w.name)+" ("+g(w.transitionType)+") ",1),w.startOffsetMillis>0?(t(),o("div",Yi," Start Offset: "+g(w.startOffsetMillis/6e4)+" seconds ",1)):k("",!0),w.endOffsetMillis>0?(t(),o("div",Wi," End Offset: "+g(w.endOffsetMillis/6e4)+" seconds ",1)):k("",!0)]),e("td",null,[w.relativeProgram?(t(),o("div",Gi,g(w.relativeProgram.name)+" ["+g(w.relativePosition)+"] ",1)):k("",!0)]),e("td",null,[O(g(i(R).moment(w.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",Ji,g(i(R).moment(w.dateScheduledStart).fromNow()),1)])]),e("td",null,[S(K,{to:`${n.urlViewChannel}/${encodeURIComponent(w.channel.channelId)}/${i(d)()}`},{default:h(()=>[O(g(w.channel.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[ye,r.item.programs.length>0]])])])])],2)])])])):k("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Qi={class:"d-flex justify-content-end"},Xi=["disabled"],Zi={class:"col"},er={class:"form-floating mb-2"},tr={key:0,class:"d-block invalid-feedback"},sr={class:"row row-cols-1 row-cols-sm-2"},or={class:"col"},lr={class:"form-floating mb-2"},ar=["value"],nr={key:0,class:"d-block invalid-feedback"},ir={class:"col"},rr={class:"form-floating mb-2"},dr=["value"],ur={key:0,class:"d-block invalid-feedback"},cr={class:"table-responsive border mt-1"},mr={class:"table mb-0"},fr={class:"input-group mb-1"},pr=["onUpdate:modelValue"],vr={class:"input-group mb-1"},gr=["onUpdate:modelValue"],br=["onClick"],yr={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,security:R}=ce({appTitle:"Sony FAST",pageTitle:"Add VOD Source"}),D=a,V=de({lookups:{sourceLocations:[]},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),N={item:{name:{required:te.withMessage("name is required.",se),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("videoId is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("name is required.",se),$autoDirty:!0,$lazy:!0}}},d=$e(N,V);ie(async()=>{await J()});const J=async()=>{try{if(await U.get("/api/v1/sourcelocations/lookup/").then(v=>{V.lookups.sourceLocations=v.data}),V.lookups.sourceLocations.length===1){const v=V.lookups.sourceLocations[0];V.item.sourceLocationId=v.id,await z(v.baseUrl)}}catch(s){b.value=_.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{}},z=async s=>{try{const v=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(s)}`;await U.get(v).then(l=>{V.lookups.videos=l.data,V.lookups.videos.length===1&&(V.item.videoId=V.lookups.videos[0].id)})}catch(v){b.value=_.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},r=async()=>{const s=V;if(f.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,b.value="";const l=_.clone(s.item);l.videoId=l.video.id,delete l.video,await U.post("/api/v1/vodSources/",l).then(q=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const p=`${D.urlView}/${q.data}`;await B.push(p)}})})}catch(l){b.value=_.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{f.value=!1}},y=()=>{const s={path:"",sourceGroup:"test_linear_group_1",type:"HLS"},v=V.item.video;v&&(s.path=v.hlsPath),V.item.packageConfigurations.push(s)},M=s=>{V.item.packageConfigurations.splice(s,1)};return(s,v)=>{const l=G("router-link"),q=G("PageHeader"),p=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(q,{"page-icon":"fas fa-fw fa-tag",pageTitle:i(u),"header-break":"row row-cols-2"},{default:h(()=>[e("div",Qi,[e("button",{disabled:i(d).$dirty&&i(d).$invalid,onClick:v[0]||(v[0]=C=>r()),class:"btn btn-primary"},v[5]||(v[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xi),S(l,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:h(()=>v[6]||(v[6]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),S(p,{errorMessage:i(b),vuelidate:i(d)},{default:h(()=>[e("div",null,[e("div",Zi,[e("div",er,[I(e("input",{"onUpdate:modelValue":v[1]||(v[1]=C=>V.item.name=C),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,V.item.name]]),v[7]||(v[7]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(d).item.name.$error?(t(),o("div",tr,[(t(!0),o(L,null,j(i(d).item.name.$errors,C=>(t(),o("div",{key:C.$uid},g(C.$message),1))),128))])):k("",!0)])]),e("div",sr,[e("div",or,[e("div",lr,[I(e("select",{"onUpdate:modelValue":v[2]||(v[2]=C=>V.item.sourceLocationId=C),class:"form-select",id:"sourceLocationId"},[(t(!0),o(L,null,j(V.lookups.sourceLocations,C=>(t(),o("option",{value:C.id},g(C.name),9,ar))),256))],512),[[ve,V.item.sourceLocationId]]),v[8]||(v[8]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(d).item.sourceLocationId.$error?(t(),o("div",nr,[(t(!0),o(L,null,j(i(d).item.sourceLocationId.$errors,C=>(t(),o("div",{key:C.$uid},g(C.$message),1))),128))])):k("",!0)])]),e("div",ir,[e("div",rr,[I(e("select",{"onUpdate:modelValue":v[3]||(v[3]=C=>V.item.video=C),onChange:v[4]||(v[4]=C=>V.item.videoId=V.item.video.id),class:"form-select",id:"videoId"},[(t(!0),o(L,null,j(V.lookups.videos,C=>(t(),o("option",{value:C},g(C.name),9,dr))),256))],544),[[ve,V.item.video]]),v[9]||(v[9]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),i(d).item.videoId.$error?(t(),o("div",ur,[(t(!0),o(L,null,j(i(d).item.videoId.$errors,C=>(t(),o("div",{key:C.$uid},g(C.$message),1))),128))])):k("",!0)])])]),v[14]||(v[14]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[v[11]||(v[11]=e("fieldset",null,[e("legend",null," HTTP Package Configurations ")],-1)),e("button",{onClick:y,class:"btn btn-outline-primary"},v[10]||(v[10]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Insert Package Configuration ")]))]),e("div",cr,[e("table",mr,[v[13]||(v[13]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),o(L,null,j(V.item.packageConfigurations,(C,x)=>(t(),o("tr",null,[e("td",null,g(x+1),1),e("td",null,[e("div",fr,[I(e("input",{"onUpdate:modelValue":$=>C.path=$,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,pr),[[H,C.path]])])]),e("td",null,[e("div",vr,[I(e("input",{"onUpdate:modelValue":$=>C.sourceGroup=$,type:"text",class:"form-control",placeholder:"Enter Source Group."},null,8,gr),[[H,C.sourceGroup]])])]),e("td",null,g(C.type),1),e("td",null,[e("button",{onClick:$=>M(x),class:"btn btn-outline-warning"},v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,br)])]))),256))])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},$r={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function wr(a,n,u,f,c,P){const b=G("Page");return t(),le(b,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const hr=pe($r,[["render",wr]]),_r={class:"d-flex justify-content-end"},kr={key:0},Sr={class:"ms-1"},Mr={class:"input-group"},Tr={class:"table-responsive"},Ir={class:"table table-hover mb-0"},Pr=["textContent"],xr={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Cr={class:"small"},Ur="/api/v1/vodsources/search",Vr={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(a){fe("$config");const u=ue().user,{appTitle:f,pageTitle:c,busy:P,infoMessage:b,warningMessage:B,errorMessage:U,router:_,axios:E,utils:F,toasts:R,close:D,closeWithReturnUrl:V,generateReturnUrl:N,security:d,filter:J,initializeFilter:z,getQuery:r,saveQuery:y,search:M,getRowNumber:s,setSelected:v,isSelected:l}=Se({appTitle:"Sony FAST",pageTitle:"VOD Sources",cacheKey:`${u==null?void 0:u.userId}/vod-sources/search`,baseUrl:Ur,filter:{updateUrl:!0}});return ie(async()=>{z(),await M()}),(q,p)=>{const C=G("router-link"),x=G("PageHeader"),$=G("m-pagination"),K=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(x,{"page-icon":"fas fa-fw fa-bookmark",pageTitle:i(c)},{default:h(()=>[e("div",_r,[i(d).isAdministrator?(t(),o("div",kr,[S(C,{to:a.urlAdd,class:"btn btn-primary"},{default:h(()=>p[3]||(p[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):k("",!0),S(C,{to:a.urlAdd,class:"btn btn-primary"},{default:h(()=>p[4]||(p[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Sr,[e("div",Mr,[I(e("input",{"onUpdate:modelValue":p[0]||(p[0]=Z=>i(J).query.criteria=Z),onKeyup:p[1]||(p[1]=_e(Z=>i(M)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(J).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:p[2]||(p[2]=Z=>i(M)(1))},p[5]||(p[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),S(K,{errorMessage:i(U)},{default:h(()=>[e("div",Tr,[e("table",Ir,[p[6]||(p[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(i(J).items,(Z,oe)=>(t(),o("tr",{key:Z.movieId},[e("td",{textContent:g(i(s)(oe)),class:"text-center"},null,8,Pr),e("td",null,[S(C,{to:`${a.urlView}/${Z.vodSourceId}`,class:"d-inline-block text-truncate"},{default:h(()=>[Z.arn?(t(),o("span",xr)):k("",!0),O(g(Z.name),1)]),_:2},1032,["to"])]),e("td",null,[S(C,{to:`${a.urlViewVideo}/${encodeURIComponent(Z.video.videoId)}/${i(N)()}`},{default:h(()=>[O(g(Z.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Cr,"Duration: "+g(i(F).moment.utc(Z.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[ye,i(J).items.length>0]])])]),S($,{filter:i(J),search:i(M),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ar=["id"],Er={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Or={class:"modal-content"},Nr={class:"modal-header bg-primary text-white"},Hr={class:"modal-title",id:"exampleModalLabel"},Br={class:"modal-body"},Lr={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Dr=["innerHTML"],qr={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Rr={class:"container"},jr={class:"col"},zr={class:"form-floating mb-2"},Fr={class:"col"},Yr={class:"form-floating mb-2"},Wr={key:0,class:"d-block invalid-feedback"},Gr={class:"col"},Jr={class:"form-floating mb-2"},Kr={key:0,class:"d-block invalid-feedback"},Qr={class:"col"},Xr={class:"form-floating mb-2"},Zr={key:0,class:"d-block invalid-feedback"},ed={class:"modal-footer"},td=["disabled"],sd={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:P,isDirty:b,validations:B,infoMessage:U,warningMessage:_,errorMessage:E,router:F,axios:R,utils:D,toasts:V,closeWithReturnUrl:N,security:d}=ce({appTitle:"Sony FAST",pageTitle:"Add Playback Configuration"}),J=u,z=ne(),r=ne("modalAddPlaybackConfiguration"),y=de({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),M={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",se),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",se),$autoDirty:!0,$lazy:!0}}},s=$e(M,y);ie(async()=>{s.value.$reset()});const v=async(p,C)=>{z.value=p;const x=y;B.value.clear(),E.value="";const $=C,K=$.lastIndexOf("/"),Z=$.substring(0,K),oe="ad_campaign_"+$.substring(K+1).replace(".","_");x.item={name:oe,originalVideoContentSourceUrl:C,videoContentSourceUrl:Z,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},s.value.$reset();var w=document.getElementById(r.value),m=he.getOrCreateInstance(w);m.show()},l=async()=>{var p=document.getElementById(r.value),C=he.getOrCreateInstance(p);C.hide(),J("refresh")},q=async()=>{const p=y;if(P.value)return;if(!await s.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,E.value="";const x=p.item;x.vodSourceId=z.value,await R.post("/api/v1/playbackconfigurations/",x).then($=>{V.success("Add Playback Configuration","Playback configuration added to VOD Source.",{async onClose(){}})}),await l()}catch(x){E.value=D.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{P.value=!1}};return n({open:v,close:l}),(p,C)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Er,[e("div",Or,[e("div",Nr,[e("h5",Hr,g(i(f))+" - "+g(i(c)),1),C[5]||(C[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Br,[i(E)?(t(),o("div",Lr,[C[6]||(C[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,Dr)])):k("",!0),i(B).size>0?(t(),o("div",qr,[C[7]||(C[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(i(B).values(),x=>(t(),o("li",null,g(x),1))),256))])])):k("",!0),e("div",Rr,[e("div",jr,[e("div",zr,[I(e("input",{"onUpdate:modelValue":C[0]||(C[0]=x=>y.item.originalVideoContentSourceUrl=x),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[H,y.item.originalVideoContentSourceUrl]]),C[8]||(C[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",Fr,[e("div",Yr,[I(e("input",{"onUpdate:modelValue":C[1]||(C[1]=x=>y.item.name=x),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,y.item.name]]),C[9]||(C[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(s).item.name.$error?(t(),o("div",Wr,[(t(!0),o(L,null,j(i(s).item.name.$errors,x=>(t(),o("div",{key:x.$uid},g(x.$message),1))),128))])):k("",!0)])]),e("div",Gr,[e("div",Jr,[I(e("input",{"onUpdate:modelValue":C[2]||(C[2]=x=>y.item.videoContentSourceUrl=x),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[H,y.item.videoContentSourceUrl]]),C[10]||(C[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),C[11]||(C[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),i(s).item.videoContentSourceUrl.$error?(t(),o("div",Kr,[(t(!0),o(L,null,j(i(s).item.videoContentSourceUrl.$errors,x=>(t(),o("div",{key:x.$uid},g(x.$message),1))),128))])):k("",!0)])]),e("div",Qr,[e("div",Xr,[I(e("textarea",{"onUpdate:modelValue":C[3]||(C[3]=x=>y.item.adDecisionServerUrl=x),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[H,y.item.adDecisionServerUrl]]),C[12]||(C[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),i(s).item.adDecisionServerUrl.$error?(t(),o("div",Zr,[(t(!0),o(L,null,j(i(s).item.adDecisionServerUrl.$errors,x=>(t(),o("div",{key:x.$uid},g(x.$message),1))),128))])):k("",!0)])])])]),e("div",ed,[e("button",{disabled:i(s).$dirty&&i(s).$invalid,onClick:C[4]||(C[4]=x=>q()),class:"btn btn-primary",type:"button"},C[13]||(C[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,td),C[14]||(C[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Ar))}},od={class:"d-flex flex-row justify-content-end"},ld={key:0},ad={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},nd={class:"nav-item",role:"presentation"},id={class:"nav-item",role:"presentation"},rd={class:"nav-item",role:"presentation"},dd={class:"tab-content",id:"myTabContent"},ud={class:"mt-2"},cd={class:"col"},md={class:"form-floating mb-2"},fd={class:"table-responsive border mt-2"},pd={class:"table table-hover mb-0 caption-top"},vd={class:"mt-2"},gd={class:"row row-cols-sm-2"},bd={class:"col"},yd={class:"form-floating mb-2"},$d={class:"col"},wd={class:"form-floating mb-2"},hd={class:"row row-cols-sm-2"},_d={class:"col"},kd={class:"form-floating mb-2"},Sd={class:"col"},Md={class:"input-group mb-2"},Td={class:"form-floating"},Id=["href"],Pd={class:"row row-cols-sm-2"},xd={class:"col"},Cd={class:"form-floating mb-2"},Ud={class:"col"},Vd={class:"input-group mb-2"},Ad={class:"form-floating"},Ed=["href"],Od={class:"row row-cols-sm-2"},Nd={class:"col"},Hd={class:"form-floating mb-2"},Bd={class:"col"},Ld={class:"input-group mb-2"},Dd={class:"form-floating"},qd={class:"mt-2"},Rd={class:"table-responsive border mt-2"},jd={class:"table mb-0"},zd={class:"row"},Fd={class:"col-sm-9"},Yd={key:0,class:"fas fa-fw fa-check-circle text-success"},Wd={class:"col-sm-9"},Gd={class:"col-sm-9"},Jd={class:"text-break border p-2"},Kd={class:"col-sm-3"},Qd={class:"d-flex flex-row justify-content-between"},Xd=["href"],Zd={class:"col-sm-9"},eu={class:"text-break border p-2"},tu=["href"],su={class:"col-sm-3"},ou={class:"d-flex flex-row justify-content-between"},lu=["href"],au={class:"col-sm-9"},nu={class:"text-break border p-2"},iu={class:"d-flex flex-row"},ru=["onClick"],du=["onClick"],uu=["onClick"],cu={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:P,validations:b,infoMessage:B,warningMessage:U,errorMessage:_,router:E,axios:F,utils:R,toasts:D,close:V,closeWithReturnUrl:N,generateReturnUrl:d,security:J}=ce({appTitle:"Sony FAST",pageTitle:"View VOD Source"});fe("$config");const z=ue();z.user;const r=de({user:z.user,item:null}),y=ne(),M=ne();ie(async()=>{await q(),y.value=R.getPageTab("vodSource")||"information-tab"});const s=w=>{R.setPageTab("vodSource",w),y.value=w},v=w=>w!==y.value?"":"active",l=w=>w!==y.value?"":"show active",q=async()=>{const w=r;if(!c.value)try{c.value=!0,_.value="",r.item=null;const m=`/api/v1/vodsources/${n.id}/`;await F.get(m).then(X=>{w.item=X.data;const A=R.moment.utc(w.item.video.durationInMillis).format("HH:mm:ss");w.item.video.duration=A;const Y=w.item.video.hlsPath,W=Y.substring(Y.lastIndexOf("/")+1);w.item.playbackConfigurations.forEach(ee=>{ee.dashConfigurationManifestEndpointPrefix&&(ee.dashConfigurationManifestEndpointPrefix+=W),ee.hlsConfigurationManifestEndpointPrefix&&(ee.hlsConfigurationManifestEndpointPrefix+=W)})})}catch(m){_.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{c.value=!1}},p=async()=>{await q()},C=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!c.value){_.value=null;try{c.value=!0,await F.post(`/api/v1/vodsources/publish/${n.id}/`).then(m=>{D.success("Publish VOD","VOD was published.",{async onClose(){}})}),c.value=!1,await p()}catch(m){_.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{c.value=!1}}},x=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/vodsources/unpublish/${n.id}/`).then(m=>{D.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),c.value=!1,await p()}catch(m){_.value=R.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{c.value=!1}}},$=w=>{if(w==="HLS"){const m=r.item.video.hlsBaseUrl+r.item.video.hlsPath;M.value.open(n.id,m)}},K=async w=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!c.value){_.value=null;try{c.value=!0,await F.post(`/api/v1/playbackconfigurations/publish/${w}/`).then(X=>{D.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),c.value=!1,await p()}catch(X){_.value=R.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{c.value=!1}}},Z=async w=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/playbackconfigurations/unpublish/${w}/`).then(X=>{D.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),c.value=!1,await p()}catch(X){_.value=R.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{c.value=!1}}},oe=async w=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/playbackconfigurations/${w}/`).then(X=>{D.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),c.value=!1,await p()}catch(X){_.value=R.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{c.value=!1}}};return(w,m)=>{const X=G("router-link"),A=G("PageHeader"),Y=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(A,{"page-icon":"fas fa-fw fa-bookmark",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:h(()=>[e("div",od,[i(J).isAdministrator?(t(),o(L,{key:0},[S(X,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:h(()=>m[20]||(m[20]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:m[0]||(m[0]=W=>w.remove()),class:"ms-1 btn btn-warning"},m[21]||(m[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):k("",!0),r.item?(t(),o(L,{key:1},[r.item.arn?(t(),o("button",{key:0,onClick:m[1]||(m[1]=W=>x()),class:"ms-1 btn btn-danger"},m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),o("button",{key:1,onClick:m[2]||(m[2]=W=>C()),class:"ms-1 btn btn-primary"},m[23]||(m[23]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):k("",!0),e("button",{onClick:m[3]||(m[3]=W=>p()),class:"ms-2 btn btn-secondary"},m[24]||(m[24]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[4]||(m[4]=W=>i(N)(n.urlMain)),class:"btn btn-secondary ms-1"},m[25]||(m[25]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),S(Y,{errorMessage:i(_)},{default:h(()=>[r.item?(t(),o("div",ld,[e("div",null,[e("ul",ad,[e("li",nd,[e("button",{onClick:m[5]||(m[5]=W=>s("information-tab")),class:ae([v("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",id,[e("button",{onClick:m[6]||(m[6]=W=>s("video-tab")),class:ae([v("video-tab"),"nav-link"]),id:"video-tab","data-bs-toggle":"tab","data-bs-target":"#video",type:"button",role:"tab","aria-controls":"video","aria-selected":"false"}," Video ",2)]),e("li",rd,[e("button",{onClick:m[7]||(m[7]=W=>s("playbackConfigurations-tab")),class:ae([v("playbackConfigurations-tab"),"nav-link"]),id:"playbackConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#playbackConfigurations",type:"button",role:"tab","aria-controls":"playbackConfigurations","aria-selected":"false"}," Playback Configurations ",2)])]),e("div",dd,[e("div",{class:ae([l("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ud,[e("div",cd,[e("div",md,[I(e("input",{"onUpdate:modelValue":m[8]||(m[8]=W=>r.item.name=W),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[H,r.item.name]]),m[26]||(m[26]=e("label",{for:"name"},"Name",-1))])]),m[28]||(m[28]=e("fieldset",null,[e("legend",null,"HTTP Package Configurations")],-1)),e("div",fd,[e("table",pd,[m[27]||(m[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.packageConfigurations,(W,ee)=>(t(),o("tr",{key:W.packageConfigurationId},[e("td",null,g(ee+1),1),e("td",null,g(W.path),1),e("td",null,g(W.sourceGroup),1),e("td",null,g(W.type),1)]))),128))]),_:1},512),[[ye,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:ae([l("video-tab"),"tab-pane fade"]),id:"video",role:"tabpanel","aria-labelledby":"video-tab"},[e("div",vd,[e("div",null,[e("div",gd,[e("div",bd,[e("div",yd,[I(e("input",{"onUpdate:modelValue":m[9]||(m[9]=W=>r.item.video.title=W),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[H,r.item.video.title]]),m[29]||(m[29]=e("label",{for:"title"},"Title",-1))])]),e("div",$d,[e("div",wd,[I(e("input",{"onUpdate:modelValue":m[10]||(m[10]=W=>r.item.video.duration=W),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[H,r.item.video.duration]]),m[30]||(m[30]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",hd,[e("div",_d,[e("div",kd,[I(e("input",{"onUpdate:modelValue":m[11]||(m[11]=W=>r.item.video.rawBaseUrl=W),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[H,r.item.video.rawBaseUrl]]),m[31]||(m[31]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Sd,[e("div",Md,[e("div",Td,[I(e("input",{"onUpdate:modelValue":m[12]||(m[12]=W=>r.item.video.rawPath=W),class:"form-control",id:"rawPath",disabled:""},null,512),[[H,r.item.video.rawPath]]),m[32]||(m[32]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(r.item.video.rawBaseUrl+r.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},m[33]||(m[33]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),O("View ")],-1)]),8,Id)])])]),e("div",Pd,[e("div",xd,[e("div",Cd,[I(e("input",{"onUpdate:modelValue":m[13]||(m[13]=W=>r.item.video.hlsBaseUrl=W),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[H,r.item.video.hlsBaseUrl]]),m[34]||(m[34]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Ud,[e("div",Vd,[e("div",Ad,[I(e("input",{"onUpdate:modelValue":m[14]||(m[14]=W=>r.item.video.hlsPath=W),class:"form-control",id:"hlsPath",disabled:""},null,512),[[H,r.item.video.hlsPath]]),m[35]||(m[35]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(r.item.video.hlsBaseUrl+r.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},m[36]||(m[36]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),O("View ")],-1)]),8,Ed),r.item.video.hlsPath?(t(),o("button",{key:0,onClick:m[15]||(m[15]=W=>$("HLS")),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},m[37]||(m[37]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Playback Config ")]))):k("",!0)])])]),e("div",Od,[e("div",Nd,[e("div",Hd,[I(e("input",{"onUpdate:modelValue":m[16]||(m[16]=W=>r.item.video.dashBaseUrl=W),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[H,r.item.video.dashBaseUrl]]),m[38]||(m[38]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Bd,[e("div",Ld,[e("div",Dd,[I(e("input",{"onUpdate:modelValue":m[17]||(m[17]=W=>r.item.video.dashPath=W),class:"form-control",id:"dashPath",disabled:""},null,512),[[H,r.item.video.dashPath]]),m[39]||(m[39]=e("label",{for:"dashPath"},"DASH Path",-1))]),r.item.video.dashPath?(t(),o("button",{key:0,onClick:m[18]||(m[18]=W=>$()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},m[40]||(m[40]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Playback Configuration ")]))):k("",!0)])])])])])],2),e("div",{class:ae([l("playbackConfigurations-tab"),"tab-pane fade"]),id:"playbackConfigurations",role:"tabpanel","aria-labelledby":"playbackConfigurations-tab"},[e("div",qd,[e("div",Rd,[e("table",jd,[m[52]||(m[52]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.playbackConfigurations,(W,ee)=>(t(),o("tr",{key:W.playbackConfigurationId},[e("td",null,g(ee+1),1),e("td",null,[e("dl",zd,[m[46]||(m[46]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",Fd,[W.arn?(t(),o("span",Yd)):k("",!0),O(g(W.name),1)]),m[47]||(m[47]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",Wd,g(W.videoContentSourceUrl),1),m[48]||(m[48]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",Gd,[e("div",Jd,g(W.adDecisionServerUrl),1)]),r.item.video.dashPath&&W.dashConfigurationManifestEndpointPrefix?(t(),o(L,{key:0},[e("dt",Kd,[e("div",Qd,[m[42]||(m[42]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/dashjs?streamUrl=${encodeURIComponent(W.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},m[41]||(m[41]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View DASH ")]),8,Xd)])])]),e("dd",Zd,[e("div",eu,g(W.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(W.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},m[43]||(m[43]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View DASH ")]),8,tu)])])],64)):k("",!0),r.item.video.hlsPath&&W.hlsConfigurationManifestEndpointPrefix?(t(),o(L,{key:1},[e("dt",su,[e("div",ou,[m[45]||(m[45]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(W.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},m[44]||(m[44]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View ")]),8,lu)])])]),e("dd",au,[e("div",nu,g(W.hlsConfigurationManifestEndpointPrefix),1)])],64)):k("",!0)])]),e("td",null,[e("div",iu,[W.arn?(t(),o("button",{key:0,onClick:T=>Z(W.playbackConfigurationId),class:"btn btn-outline-warning"},m[49]||(m[49]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,ru)):(t(),o("button",{key:1,onClick:T=>K(W.playbackConfigurationId),class:"btn btn-outline-primary"},m[50]||(m[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,du)),W.arn?k("",!0):(t(),o("button",{key:2,onClick:T=>oe(W.playbackConfigurationId),class:"btn btn-outline-danger ms-1"},m[51]||(m[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,uu))])])]))),128))]),_:1},512),[[ye,r.item.playbackConfigurations.length>0]])])])])],2)])])])):k("",!0)]),_:1},8,["errorMessage"]),S(sd,{ref_key:"modalAddPlaybackConfiguration",ref:M,onRefresh:m[19]||(m[19]=W=>p())},null,512)])]),_:1})}}},mu={class:"d-flex justify-content-end"},fu=["disabled"],pu={class:"input-group"},vu={class:"row row-cols-1 row-cols-sm-2 mt-3"},gu={class:"col text-center mb-2"},bu=["src"],yu={class:"col"},$u={class:"form-floating mb-2"},wu={key:0,class:"d-block invalid-feedback"},hu={class:"form-floating mb-2"},_u={class:"row row-cols-sm-2"},ku={class:"col"},Su={class:"form-floating mb-2"},Mu={class:"col"},Tu={class:"form-floating mb-2"},Iu={class:"row row-cols-sm-2"},Pu={class:"col"},xu={class:"form-floating mb-2"},Cu={class:"col"},Uu={class:"form-floating mb-2"},Vu={class:"col"},Au={class:"form-floating mb-2"},Eu={class:"col"},Ou={class:"form-floating mb-2"},Oe="YYYY-MM-DD HH:mm",Nu={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:P,errorMessage:b,router:B,axios:U,utils:_,toasts:E,close:F,security:R}=ce({appTitle:"ARC AIO",pageTitle:"Add User"}),D=a,V=_.moment().local();V.format(Oe),V.add(24,"hours").format(Oe);const N=ne("a22de760-358d-4a0e-83ad-2624a5c11f73"),d=de({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),J={item:{userId:{required:te.withMessage("User Id is required.",se),$autoDirty:!0,$lazy:!0}}},z=$e(J,d);ie(async()=>{});const r=async()=>{const M=d;if(!f.value)try{f.value=!0,M.item=null;const s=`/api/v1/users/get-from-entra-id/${N.value}`;await U.get(s).then(v=>{M.item=v.data})}catch(s){b.value=_.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{f.value=!1}},y=async()=>{const M=d;if(f.value)return;if(!await z.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,b.value="",await U.post(`/api/v1/users/add-from-entra-id/${M.item.userId}`).then(v=>{E.success("Add User","User added",{onClose:async()=>{const l=`${D.urlView}/${v.data}`;await B.push(l)}})})}catch(v){b.value=_.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{f.value=!1}};return(M,s)=>{const v=G("router-link"),l=G("PageHeader"),q=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:i(u),"header-break":"row row-cols-2"},{default:h(()=>[e("div",mu,[e("button",{disabled:i(z).$dirty&&i(z).$invalid,onClick:s[0]||(s[0]=p=>y()),class:"btn btn-primary"},s[12]||(s[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fu),S(v,{to:D.urlMain,class:"btn btn-secondary ms-2"},{default:h(()=>s[13]||(s[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),S(q,{errorMessage:i(b),vuelidate:i(z)},{default:h(()=>[e("div",null,[e("div",null,[e("div",pu,[I(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>N.value=p),onKeyup:s[2]||(s[2]=_e(p=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[H,N.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:s[3]||(s[3]=p=>r())},s[14]||(s[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",vu,[e("div",gu,[e("img",{src:d.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,bu)]),e("div",yu,[e("div",$u,[I(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>d.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,d.item.userId]]),s[15]||(s[15]=e("label",{for:"userId"},"User Id",-1)),i(z).item.userId.$error?(t(),o("div",wu,[(t(!0),o(L,null,j(i(z).item.userId.$errors,p=>(t(),o("div",{key:p.$uid},g(p.$message),1))),128))])):k("",!0)]),e("div",hu,[I(e("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>d.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,d.item.displayName]]),s[16]||(s[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",_u,[e("div",ku,[e("div",Su,[I(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>d.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,d.item.givenName]]),s[17]||(s[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Mu,[e("div",Tu,[I(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>d.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,d.item.surname]]),s[18]||(s[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Iu,[e("div",Pu,[e("div",xu,[I(e("input",{"onUpdate:modelValue":s[8]||(s[8]=p=>d.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,d.item.email]]),s[19]||(s[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Cu,[e("div",Uu,[I(e("input",{"onUpdate:modelValue":s[9]||(s[9]=p=>d.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,d.item.mobilePhone]]),s[20]||(s[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Vu,[e("div",Au,[I(e("input",{"onUpdate:modelValue":s[10]||(s[10]=p=>d.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,d.item.principalName]]),s[21]||(s[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Eu,[e("div",Ou,[I(e("input",{"onUpdate:modelValue":s[11]||(s[11]=p=>d.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,d.item.jobTitle]]),s[22]||(s[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Hu={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Bu(a,n,u,f,c,P){const b=G("Page");return t(),le(b,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const Lu=pe(Hu,[["render",Bu]]),Du={class:"d-flex justify-content-end"},qu={key:0},Ru={class:"ms-1"},ju={class:"input-group"},zu={class:"table-responsive"},Fu={class:"table table-hover mb-0"},Yu=["textContent"],Wu="/api/v1/channels/search",Gu={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(a){fe("$config");const u=ue().user,{appTitle:f,pageTitle:c,busy:P,infoMessage:b,warningMessage:B,errorMessage:U,router:_,axios:E,utils:F,toasts:R,close:D,security:V,filter:N,initializeFilter:d,getQuery:J,saveQuery:z,search:r,getRowNumber:y,setSelected:M,isSelected:s}=Se({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${u==null?void 0:u.userId}/Channels/search`,baseUrl:Wu,filter:{updateUrl:!0}});return ie(async()=>{d(),await r()}),(v,l)=>{const q=G("router-link"),p=G("PageHeader"),C=G("m-pagination"),x=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(p,{"page-icon":"fas fa-fw fa-microphone",pageTitle:i(c)},{default:h(()=>[e("div",Du,[i(V).isAdministrator?(t(),o("div",qu,[S(q,{to:a.urlAdd,class:"btn btn-primary"},{default:h(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):k("",!0),e("div",Ru,[e("div",ju,[I(e("input",{"onUpdate:modelValue":l[0]||(l[0]=$=>i(N).query.criteria=$),onKeyup:l[1]||(l[1]=_e($=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(N).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=$=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),S(x,{errorMessage:i(U)},{default:h(()=>[e("div",zu,[e("table",Fu,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(i(N).items,($,K)=>(t(),o("tr",{key:$.channelId},[e("td",{textContent:g(i(y)(K)),class:"text-center"},null,8,Yu),e("td",null,[S(q,{to:`${a.urlView}/${$.channelId}`,class:"d-inline-block text-truncate"},{default:h(()=>[O(g($.name),1)]),_:2},1032,["to"])]),e("td",null,g($.playbackMode),1),e("td",null,g($.tier),1)]))),128))]),_:1},512),[[ye,i(N).items.length>0]])])]),S(C,{filter:i(N),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ju=["id"],Ku={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Qu={class:"modal-content"},Xu={class:"modal-header bg-primary text-white"},Zu={class:"modal-title",id:"exampleModalLabel"},ec={class:"modal-body"},tc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},sc=["innerHTML"],oc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},lc={class:"container"},ac={class:"row row-cols-1 row-cols-sm-3"},nc={class:"col"},ic={class:"form-floating mb-2"},rc=["disabled"],dc=["value"],uc={class:"col"},cc={class:"form-floating mb-2"},mc={key:0,class:"d-block invalid-feedback"},fc={class:"col"},pc={class:"form-floating mb-2"},vc={key:0,class:"d-block invalid-feedback"},gc={class:"row row-cols-sm-2"},bc={class:"col"},yc={class:"form-floating mb-2"},$c=["value"],wc={key:0,class:"d-block invalid-feedback"},hc={class:"col"},_c={class:"form-floating mb-2"},kc=["value"],Sc={key:0,class:"d-block invalid-feedback"},Mc={class:"col"},Tc={class:"input-group mb-1"},Ic={class:"form-floating"},Pc={key:0,class:"input-group-text"},xc={key:0},Cc={key:1},Uc={key:2},Vc={key:3,class:"d-block invalid-feedback"},Ac={class:"col"},Ec={class:"input-group mb-1"},Oc={class:"form-floating"},Nc={key:0,class:"input-group-text"},Hc={key:0},Bc={key:1},Lc={key:2,class:"d-block invalid-feedback"},Dc={class:"table-responsive border mt-1"},qc={class:"table"},Rc={class:"input-group mb-1"},jc=["onUpdate:modelValue"],zc={key:0,class:"input-group-text"},Fc=["onUpdate:modelValue"],Yc=["value"],Wc=["onUpdate:modelValue"],Gc=["value"],Jc=["onClick"],Kc={class:"modal-footer"},Qc=["disabled"],Xc={__name:"_addProgram",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:P,isDirty:b,validations:B,infoMessage:U,warningMessage:_,errorMessage:E,router:F,axios:R,utils:D,toasts:V,closeWithReturnUrl:N,security:d}=ce({appTitle:"Sony FAST",pageTitle:"Add Program"}),J=u,z=ne(),r=ne("modalAddProgram"),y=de({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),M={item:{name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",se),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",se),minValue:Ie(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Ie(0),$autoDirty:!0,$lazy:!0}}},s=$e(M,y);ie(async()=>{s.value.$reset()});const v=async X=>{z.value=X;const A=y;B.value.clear(),E.value="";const Y=D.moment().local().add(2,"m"),ee=Y.format("YYYY-MM-DD HH:mm"),T=Y.format("YYYY_MM_DD")+"_PROGRAM_";A.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},A.item={name:T,relativeProgramId:null,dateScheduledStart:ee,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await p(),s.value.$reset();var me=document.getElementById(r.value),xe=he.getOrCreateInstance(me);xe.show()},l=async()=>{var X=document.getElementById(r.value),A=he.getOrCreateInstance(X);A.hide(),J("refresh")},q=async()=>{const X=y;if(P.value)return;if(!await s.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,E.value="";const W=X.item;delete W.vodSource,W.channelId=z.value;var Y=W.dateScheduledStart;W.dateScheduledStart=D.moment(Y).utc().format(),await R.post("/api/v1/programs/",W).then(ee=>{V.success("Add Program","Program added to Channel",{async onClose(){}})}),await l()}catch(W){E.value=D.getErrorMessageAsHtml(W),window.scrollTo(0,0)}finally{P.value=!1}},p=async()=>{await C(),await $(),await Z()},C=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(A=>{y.lookups.sourceLocations=A.data,y.lookups.sourceLocations.length===1&&(y.item.sourceLocationId=y.lookups.sourceLocations[0].id)}),y.item.sourceLocationId&&await x(y.item.sourceLocationId)}catch(X){E.value=D.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{}},x=async X=>{try{let A="/api/v1/vodSources/lookup/";X&&(A+=`?sourceLocationId=${X}`),await R.get(A).then(Y=>{y.lookups.vodSources=Y.data})}catch(A){E.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},$=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(A=>{y.lookups.adBreakSourceLocations=A.data})}catch(X){E.value=D.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{}},K=async X=>{try{let A="/api/v1/vodSources/lookup/";X&&(A+=`?sourceLocationId=${X}`),await R.get(A).then(Y=>{y.lookups.adBreakVodSources=Y.data})}catch(A){E.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{}},Z=async()=>{try{const X=`/api/v1/programs/lookup/?channelId=${z.value}`;await R.get(X).then(A=>{if(y.lookups.channelPrograms=A.data,y.lookups.channelPrograms.length===1){const W=y.lookups.channelPrograms[0];y.item.relativeProgramId=W.id}})}catch(X){E.value=D.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{}},oe=()=>{const X={offsetMillis:0,sourceLocationId:null,vodSourceId:null},A=y.item.adBreaks.length;if(A>0){const Y=y.item.adBreaks[A-1];X.offsetMillis=Y.offsetMillis+1e4}y.item.adBreaks.push(X)},w=X=>{y.item.adBreaks.splice(X,1)},m=()=>{const X=y.item.vodSource;y.item.vodSourceId=X.id};return n({open:v,close:l}),(X,A)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ku,[e("div",Qu,[e("div",Xu,[e("h5",Zu,g(i(f))+" - "+g(i(c)),1),A[11]||(A[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",ec,[i(E)?(t(),o("div",tc,[A[12]||(A[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,sc)])):k("",!0),i(B).size>0?(t(),o("div",oc,[A[13]||(A[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(i(B).values(),Y=>(t(),o("li",null,g(Y),1))),256))])])):k("",!0),e("div",lc,[e("div",ac,[e("div",nc,[e("div",ic,[I(e("select",{"onUpdate:modelValue":A[0]||(A[0]=Y=>y.item.relativeProgramId=Y),class:"form-select",id:"sourceLocationId",disabled:y.lookups.channelPrograms.length<=0},[(t(!0),o(L,null,j(y.lookups.channelPrograms,Y=>(t(),o("option",{value:Y.id},g(Y.name),9,dc))),256))],8,rc),[[ve,y.item.relativeProgramId]]),A[14]||(A[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",uc,[e("div",cc,[I(e("input",{"onUpdate:modelValue":A[1]||(A[1]=Y=>y.item.name=Y),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,y.item.name]]),A[15]||(A[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(s).item.name.$error?(t(),o("div",mc,[(t(!0),o(L,null,j(i(s).item.name.$errors,Y=>(t(),o("div",{key:Y.$uid},g(Y.$message),1))),128))])):k("",!0)])]),e("div",fc,[e("div",pc,[I(e("input",{"onUpdate:modelValue":A[2]||(A[2]=Y=>y.item.dateScheduledStart=Y),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[H,y.item.dateScheduledStart]]),A[16]||(A[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),i(s).item.dateScheduledStart.$error?(t(),o("div",vc,[(t(!0),o(L,null,j(i(s).item.dateScheduledStart.$errors,Y=>(t(),o("div",{key:Y.$uid},g(Y.$message),1))),128))])):k("",!0)])])]),e("div",gc,[e("div",bc,[e("div",yc,[I(e("select",{"onUpdate:modelValue":A[3]||(A[3]=Y=>y.item.sourceLocationId=Y),onChange:A[4]||(A[4]=Y=>x(y.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),o(L,null,j(y.lookups.sourceLocations,Y=>(t(),o("option",{value:Y.id},g(Y.name),9,$c))),256))],544),[[ve,y.item.sourceLocationId]]),A[17]||(A[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(s).item.sourceLocationId.$error?(t(),o("div",wc,[(t(!0),o(L,null,j(i(s).item.sourceLocationId.$errors,Y=>(t(),o("div",{key:Y.$uid},g(Y.$message),1))),128))])):k("",!0)])]),e("div",hc,[e("div",_c,[I(e("select",{"onUpdate:modelValue":A[5]||(A[5]=Y=>y.item.vodSource=Y),onChange:A[6]||(A[6]=Y=>m()),class:"form-select",id:"vodSourceId"},[(t(!0),o(L,null,j(y.lookups.vodSources,Y=>(t(),o("option",{value:Y},g(Y.name),9,kc))),256))],544),[[ve,y.item.vodSource]]),A[18]||(A[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),i(s).item.vodSourceId.$error?(t(),o("div",Sc,[(t(!0),o(L,null,j(i(s).item.vodSourceId.$errors,Y=>(t(),o("div",{key:Y.$uid},g(Y.$message),1))),128))])):k("",!0)])]),e("div",Mc,[e("div",Tc,[e("div",Ic,[I(e("input",{"onUpdate:modelValue":A[7]||(A[7]=Y=>y.item.startOffsetMillis=Y),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[H,y.item.startOffsetMillis]]),A[19]||(A[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),y.item.startOffsetMillis>0?(t(),o("span",Pc,g(i(D).moment.utc(y.item.startOffsetMillis).format("HH:mm:ss")),1)):k("",!0)]),y.item.startOffsetMillis>0&&y.item.startOffsetMillis<3e4?(t(),o("div",xc,A[20]||(A[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):k("",!0),y.item.startOffsetMillis>y.item.endOffsetMillis&&y.item.endOffsetMillis>0?(t(),o("div",Cc,A[21]||(A[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):k("",!0),y.item.vodSource&&y.item.startOffsetMillis>y.item.vodSource.durationInMillis?(t(),o("div",Uc,A[22]||(A[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):k("",!0),i(s).item.startOffsetMillis.$error?(t(),o("div",Vc,[(t(!0),o(L,null,j(i(s).item.startOffsetMillis.$errors,Y=>(t(),o("div",{key:Y.$uid},g(Y.$message),1))),128))])):k("",!0)]),e("div",Ac,[e("div",Ec,[e("div",Oc,[I(e("input",{"onUpdate:modelValue":A[8]||(A[8]=Y=>y.item.endOffsetMillis=Y),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[H,y.item.endOffsetMillis]]),A[23]||(A[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),y.item.endOffsetMillis>0?(t(),o("span",Nc,g(i(D).moment.utc(y.item.endOffsetMillis).format("HH:mm:ss")),1)):k("",!0)]),y.item.endOffsetMillis>0&&y.item.endOffsetMillis<3e4?(t(),o("div",Hc,A[24]||(A[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):k("",!0),y.item.vodSource&&y.item.endOffsetMillis>y.item.vodSource.durationInMillis?(t(),o("div",Bc,A[25]||(A[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):k("",!0),i(s).item.endOffsetMillis.$error?(t(),o("div",Lc,[(t(!0),o(L,null,j(i(s).item.endOffsetMillis.$errors,Y=>(t(),o("div",{key:Y.$uid},g(Y.$message),1))),128))])):k("",!0)])]),A[29]||(A[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[A[26]||(A[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:oe,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Dc,[e("table",qc,[A[28]||(A[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),o(L,null,j(y.item.adBreaks,(Y,W)=>(t(),o("tr",null,[e("td",null,g(W+1),1),e("td",null,[e("div",Rc,[I(e("input",{"onUpdate:modelValue":ee=>Y.offsetMillis=ee,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,jc),[[H,Y.offsetMillis]]),Y.offsetMillis>0?(t(),o("span",zc,g(i(D).moment.utc(Y.offsetMillis).format("HH:mm:ss")),1)):k("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":ee=>Y.sourceLocationId=ee,onChange:A[9]||(A[9]=ee=>K(y.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),o(L,null,j(y.lookups.adBreakSourceLocations,ee=>(t(),o("option",{value:ee.id},g(ee.name),9,Yc))),256))],40,Fc),[[ve,Y.sourceLocationId]])]),e("td",null,[I(e("select",{"onUpdate:modelValue":ee=>Y.vodSourceId=ee,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),o(L,null,j(y.lookups.adBreakVodSources,ee=>(t(),o("option",{value:ee.id},g(ee.name),9,Gc))),256))],8,Wc),[[ve,Y.vodSourceId]])]),e("td",null,[e("button",{onClick:ee=>w(W),class:"btn btn-outline-warning"},A[27]||(A[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Jc)])]))),256))])])])])])]),e("div",Kc,[e("button",{disabled:i(s).$dirty&&i(s).$invalid,onClick:A[10]||(A[10]=Y=>q()),class:"btn btn-primary",type:"button"},A[30]||(A[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qc),A[31]||(A[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Ju))}},Zc=["id"],em={class:"modal-dialog modal-xl modal-fullscreen-md-down"},tm={class:"modal-content"},sm={class:"modal-header bg-primary text-white"},om={class:"modal-title",id:"exampleModalLabel"},lm={class:"modal-body"},am={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},nm=["innerHTML"],im={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},rm={class:"container"},dm={class:"row row-cols-1 row-cols-sm-3"},um={class:"col"},cm={class:"form-floating mb-2"},mm=["value"],fm={key:0,class:"d-block invalid-feedback"},pm={class:"col"},vm={class:"form-floating mb-2"},gm={key:0,class:"d-block invalid-feedback"},bm={class:"col"},ym={class:"form-floating mb-2"},$m={key:0,class:"d-block invalid-feedback"},wm={class:"row row-cols-sm-2"},hm={class:"col"},_m={class:"input-group mb-1"},km={class:"form-floating"},Sm={key:0,class:"input-group-text"},Mm={key:0},Tm={key:1},Im={key:2},Pm={key:3,class:"d-block invalid-feedback"},xm={class:"col"},Cm={class:"input-group mb-1"},Um={class:"form-floating"},Vm={key:0,class:"input-group-text"},Am={key:0},Em={key:1},Om={key:2,class:"d-block invalid-feedback"},Nm={class:"table-responsive border mt-1"},Hm={class:"table"},Bm={class:"input-group mb-1"},Lm=["onUpdate:modelValue"],Dm={key:0,class:"input-group-text"},qm=["onUpdate:modelValue"],Rm=["value"],jm=["onUpdate:modelValue"],zm=["value"],Fm=["onClick"],Ym={class:"modal-footer"},Wm=["disabled"],Gm={__name:"_editProgram",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:P,isDirty:b,validations:B,infoMessage:U,warningMessage:_,errorMessage:E,router:F,axios:R,utils:D,toasts:V,closeWithReturnUrl:N,security:d}=ce({appTitle:"Sony FAST",pageTitle:"Edit Program"}),J=u,z=ne("modalEditProgram"),r=de({lookups:{adBreakSourceLocations:[],adBreakVodSources:[],channels:[]},item:{programId:null,channelId:null,name:null,dateScheduledStart:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),y={item:{programId:{required:te.withMessage("programId is required.",se),$autoDirty:!0,$lazy:!0},channelId:{required:te.withMessage("channelId is required.",se),$autoDirty:!0,$lazy:!0},name:{required:te.withMessage("Name is required.",se),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",se),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Ie(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",se),minValue:Ie(0),$autoDirty:!0,$lazy:!0}}},M=$e(y,r);ie(async()=>{M.value.$reset()});const s=async oe=>{const w=r;B.value.clear(),E.value="",w.lookups={adBreakSourceLocations:[],adBreakVodSources:[],channels:[]},w.item={programId:null,channelId:null,name:null,dateScheduledStart:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await l(oe),await p(),M.value.$reset();var m=document.getElementById(z.value),X=he.getOrCreateInstance(m);X.show()},v=async()=>{var oe=document.getElementById(z.value),w=he.getOrCreateInstance(oe);w.hide(),J("refresh")},l=async oe=>{const w=r;if(!P.value)try{P.value=!0,E.value="",await R.get(`/api/v1/programs/${oe}`).then(m=>{w.item=m.data;const Y=D.moment(w.item.dateScheduledStart).format("YYYY-MM-DD HH:mm");w.item.dateScheduledStart=Y})}catch(m){E.value=D.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{P.value=!1}},q=async()=>{const oe=r;if(P.value)return;if(!await M.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,E.value="";const X=D.clone(oe.item);var m=X.dateScheduledStart;X.dateScheduledStart=D.moment(m).utc().format(),await R.put("/api/v1/programs/",X).then(A=>{V.success("Edit Program","Program was edited.")}),await v()}catch(X){E.value=D.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{P.value=!1}},p=async()=>{await C(),await $()},C=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(m=>{r.lookups.adBreakSourceLocations=m.data});const w=r.lookups.adBreakSourceLocations.length}catch(oe){E.value=D.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{}},x=async oe=>{try{let w="/api/v1/vodSources/lookup/";oe&&(w+=`?sourceLocationId=${oe}`),await R.get(w).then(m=>{r.lookups.adBreakVodSources=m.data})}catch(w){E.value=D.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},$=async()=>{try{await R.get("/api/v1/channels/lookup/").then(w=>{r.lookups.channels=w.data})}catch(oe){E.value=D.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{}},K=()=>{const oe={offsetMillis:0,sourceLocationId:null,vodSourceId:null},w=r.item.adBreaks.length;if(w>0){const m=r.item.adBreaks[w-1];oe.offsetMillis=m.offsetMillis+1e4}r.item.adBreaks.push(oe)},Z=oe=>{r.item.adBreaks.splice(oe,1)};return n({open:s,close:v}),(oe,w)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:z.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",em,[e("div",tm,[e("div",sm,[e("h5",om,g(i(f))+" - "+g(i(c)),1),w[7]||(w[7]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",lm,[i(E)?(t(),o("div",am,[w[8]||(w[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,nm)])):k("",!0),i(B).size>0?(t(),o("div",im,[w[9]||(w[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(i(B).values(),m=>(t(),o("li",null,g(m),1))),256))])])):k("",!0),e("div",rm,[e("div",dm,[e("div",um,[e("div",cm,[I(e("select",{"onUpdate:modelValue":w[0]||(w[0]=m=>r.item.channelId=m),class:"form-select",id:"sourceLocationId"},[(t(!0),o(L,null,j(r.lookups.channels,m=>(t(),o("option",{value:m.id},g(m.name),9,mm))),256))],512),[[ve,r.item.channelId]]),w[10]||(w[10]=e("label",{for:"channelId",class:"small fw-bold"},"Channel",-1)),i(M).item.channelId.$error?(t(),o("div",fm,[(t(!0),o(L,null,j(i(M).item.channelId.$errors,m=>(t(),o("div",{key:m.$uid},g(m.$message),1))),128))])):k("",!0)])]),e("div",pm,[e("div",vm,[I(e("input",{"onUpdate:modelValue":w[1]||(w[1]=m=>r.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,r.item.name]]),w[11]||(w[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(M).item.name.$error?(t(),o("div",gm,[(t(!0),o(L,null,j(i(M).item.name.$errors,m=>(t(),o("div",{key:m.$uid},g(m.$message),1))),128))])):k("",!0)])]),e("div",bm,[e("div",ym,[I(e("input",{"onUpdate:modelValue":w[2]||(w[2]=m=>r.item.dateScheduledStart=m),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[H,r.item.dateScheduledStart]]),w[12]||(w[12]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),i(M).item.dateScheduledStart.$error?(t(),o("div",$m,[(t(!0),o(L,null,j(i(M).item.dateScheduledStart.$errors,m=>(t(),o("div",{key:m.$uid},g(m.$message),1))),128))])):k("",!0)])])]),e("div",wm,[e("div",hm,[e("div",_m,[e("div",km,[I(e("input",{"onUpdate:modelValue":w[3]||(w[3]=m=>r.item.startOffsetMillis=m),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[H,r.item.startOffsetMillis]]),w[13]||(w[13]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),r.item.startOffsetMillis>0?(t(),o("span",Sm,g(i(D).moment.utc(r.item.startOffsetMillis).format("HH:mm:ss")),1)):k("",!0)]),r.item.startOffsetMillis>0&&r.item.startOffsetMillis<3e4?(t(),o("div",Mm,w[14]||(w[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):k("",!0),r.item.startOffsetMillis>r.item.endOffsetMillis&&r.item.endOffsetMillis>0?(t(),o("div",Tm,w[15]||(w[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):k("",!0),r.item.vodSource&&r.item.startOffsetMillis>r.item.vodSource.durationInMillis?(t(),o("div",Im,w[16]||(w[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):k("",!0),i(M).item.startOffsetMillis.$error?(t(),o("div",Pm,[(t(!0),o(L,null,j(i(M).item.startOffsetMillis.$errors,m=>(t(),o("div",{key:m.$uid},g(m.$message),1))),128))])):k("",!0)]),e("div",xm,[e("div",Cm,[e("div",Um,[I(e("input",{"onUpdate:modelValue":w[4]||(w[4]=m=>r.item.endOffsetMillis=m),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[H,r.item.endOffsetMillis]]),w[17]||(w[17]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),r.item.endOffsetMillis>0?(t(),o("span",Vm,g(i(D).moment.utc(r.item.endOffsetMillis).format("HH:mm:ss")),1)):k("",!0)]),r.item.endOffsetMillis>0&&r.item.endOffsetMillis<3e4?(t(),o("div",Am,w[18]||(w[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):k("",!0),r.item.vodSource&&r.item.endOffsetMillis>r.item.vodSource.durationInMillis?(t(),o("div",Em,w[19]||(w[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):k("",!0),i(M).item.endOffsetMillis.$error?(t(),o("div",Om,[(t(!0),o(L,null,j(i(M).item.endOffsetMillis.$errors,m=>(t(),o("div",{key:m.$uid},g(m.$message),1))),128))])):k("",!0)])]),w[23]||(w[23]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[w[20]||(w[20]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:K,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Nm,[e("table",Hm,[w[22]||(w[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),o(L,null,j(r.item.adBreaks,(m,X)=>(t(),o("tr",null,[e("td",null,g(X+1),1),e("td",null,[e("div",Bm,[I(e("input",{"onUpdate:modelValue":A=>m.offsetMillis=A,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Lm),[[H,m.offsetMillis]]),m.offsetMillis>0?(t(),o("span",Dm,g(i(D).moment.utc(m.offsetMillis).format("HH:mm:ss")),1)):k("",!0)])]),e("td",null,[I(e("select",{"onUpdate:modelValue":A=>m.sourceLocationId=A,onChange:w[5]||(w[5]=A=>x(r.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),o(L,null,j(r.lookups.adBreakSourceLocations,A=>(t(),o("option",{value:A.id},g(A.name),9,Rm))),256))],40,qm),[[ve,m.sourceLocationId]])]),e("td",null,[I(e("select",{"onUpdate:modelValue":A=>m.vodSourceId=A,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),o(L,null,j(r.lookups.adBreakVodSources,A=>(t(),o("option",{value:A.id},g(A.name),9,zm))),256))],8,jm),[[ve,m.vodSourceId]])]),e("td",null,[e("button",{onClick:A=>Z(X),class:"btn btn-outline-warning"},w[21]||(w[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Fm)])]))),256))])])])])])]),e("div",Ym,[e("button",{disabled:i(M).$dirty&&i(M).$invalid,onClick:w[6]||(w[6]=m=>q()),class:"btn btn-primary",type:"button"},w[24]||(w[24]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Wm),w[25]||(w[25]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Zc))}},Jm=["id"],Km={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Qm={class:"modal-content"},Xm={class:"modal-header bg-primary text-white"},Zm={class:"modal-title",id:"exampleModalLabel"},ef={class:"modal-body"},tf={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},sf=["innerHTML"],of={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},lf={class:"container"},af={class:"col"},nf={class:"form-floating mb-2"},rf=["value"],df={key:0,class:"d-block invalid-feedback"},uf={class:"col"},cf={class:"form-floating mb-2"},mf=["value"],ff={key:0,class:"d-block invalid-feedback"},pf={class:"modal-footer"},vf=["disabled"],gf={__name:"_editFillerSlate",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:P,isDirty:b,validations:B,infoMessage:U,warningMessage:_,errorMessage:E,router:F,axios:R,utils:D,toasts:V,closeWithReturnUrl:N,security:d}=ce({appTitle:"Sony FAST",pageTitle:"Edit Filler Slate"}),J=u,z=ne(),r=ne("modalEditFillerSlate"),y=de({lookups:{sourceLocations:[],vodSources:[]},item:{sourceLocationId:null,vodSourceId:null}}),M={item:{sourceLocationId:{required:te.withMessage("sourceLocationId is required.",se),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",se),$autoDirty:!0,$lazy:!0}}},s=$e(M,y);ie(async()=>{s.value.$reset()});const v=async()=>{await l()},l=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(K=>{y.lookups.sourceLocations=K.data,y.lookups.sourceLocations.length===1&&(y.item.sourceLocationId=y.lookups.sourceLocations[0].id)}),y.item.sourceLocationId&&await q(y.item.sourceLocationId)}catch($){E.value=D.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},q=async $=>{try{let K="/api/v1/vodSources/lookup/";$&&(K+=`?sourceLocationId=${$}`),await R.get(K).then(Z=>{y.lookups.vodSources=Z.data})}catch(K){E.value=D.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},p=async $=>{z.value=$;const K=y;B.value.clear(),E.value="",K.lookups={sourceLocations:[],vodSources:[]},K.item={sourceLocationId:null,vodSourceId:null},await v(),s.value.$reset();var Z=document.getElementById(r.value),oe=he.getOrCreateInstance(Z);oe.show()},C=async()=>{var $=document.getElementById(r.value),K=he.getOrCreateInstance($);K.hide(),J("refresh")},x=async()=>{const $=y;if(P.value)return;if(!await s.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,E.value="";const Z=$.item;Z.channelId=z.value,await R.put("/api/v1/channels/filler-slate",Z).then(oe=>{V.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await C()}catch(Z){E.value=D.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{P.value=!1}};return n({open:p,close:C}),($,K)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Km,[e("div",Qm,[e("div",Xm,[e("h5",Zm,g(i(f))+" - "+g(i(c)),1),K[4]||(K[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",ef,[i(E)?(t(),o("div",tf,[K[5]||(K[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,sf)])):k("",!0),i(B).size>0?(t(),o("div",of,[K[6]||(K[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(i(B).values(),Z=>(t(),o("li",null,g(Z),1))),256))])])):k("",!0),e("div",lf,[e("div",af,[e("div",nf,[I(e("select",{"onUpdate:modelValue":K[0]||(K[0]=Z=>y.item.sourceLocationId=Z),onChange:K[1]||(K[1]=Z=>q(y.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),o(L,null,j(y.lookups.sourceLocations,Z=>(t(),o("option",{value:Z.id},g(Z.name),9,rf))),256))],544),[[ve,y.item.sourceLocationId]]),K[7]||(K[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(s).item.sourceLocationId.$error?(t(),o("div",df,[(t(!0),o(L,null,j(i(s).item.sourceLocationId.$errors,Z=>(t(),o("div",{key:Z.$uid},g(Z.$message),1))),128))])):k("",!0)])]),e("div",uf,[e("div",cf,[I(e("select",{"onUpdate:modelValue":K[2]||(K[2]=Z=>y.item.vodSourceId=Z),class:"form-select",id:"vodSourceId"},[(t(!0),o(L,null,j(y.lookups.vodSources,Z=>(t(),o("option",{value:Z.id},g(Z.name),9,mf))),256))],512),[[ve,y.item.vodSourceId]]),K[8]||(K[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),i(s).item.vodSourceId.$error?(t(),o("div",ff,[(t(!0),o(L,null,j(i(s).item.vodSourceId.$errors,Z=>(t(),o("div",{key:Z.$uid},g(Z.$message),1))),128))])):k("",!0)])])])]),e("div",pf,[e("button",{disabled:i(s).$dirty&&i(s).$invalid,onClick:K[3]||(K[3]=Z=>x()),class:"btn btn-primary",type:"button"},K[9]||(K[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vf),K[10]||(K[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Jm))}},bf={class:"d-flex flex-row justify-content-end"},yf={key:0},$f={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},wf={class:"nav-item",role:"presentation"},hf={class:"nav-item",role:"presentation"},_f={class:"tab-content",id:"myTabContent"},kf={class:"mt-2"},Sf={class:"row row-cols-1 row-cols-sm-3"},Mf={class:"col"},Tf={class:"form-floating mb-2"},If={class:"col"},Pf={class:"form-floating mb-2"},xf={class:"col"},Cf={class:"form-floating mb-2"},Uf={class:"col"},Vf={class:"form-floating mb-2"},Af={class:"d-flex flex-row justify-content-between"},Ef={key:0},Of={class:"row row-cols-sm-2"},Nf={class:"col"},Hf={class:"form-floating mb-2"},Bf={class:"col"},Lf={class:"form-floating mb-2"},Df={class:"table-responsive border"},qf={class:"table mb-0"},Rf={class:"text-wrap"},jf=["href"],zf={class:"mt-2"},Ff={class:"table-responsive border"},Yf={class:"table table-hover mb-0 caption-top"},Wf={key:0,class:"fas fa-fw fa-check-circle text-success"},Gf={class:"badge bg-info"},Jf={key:0,class:"mb-1"},Kf={key:1,class:"mb-1"},Qf={key:2,class:"mb-1"},Xf={key:3,class:"mb-1"},Zf={key:4,class:"mb-1"},ep={key:5,class:"mb-1"},tp={class:"badge bg-info me-2"},sp={class:"text-end"},op=["onClick"],lp=["onClick"],ap=["onClick"],np=["onClick"],ip={class:"text-end mt-2"},rp={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:P,validations:b,infoMessage:B,warningMessage:U,errorMessage:_,router:E,axios:F,utils:R,toasts:D,close:V,closeWithReturnUrl:N,generateReturnUrl:d,security:J}=ce({appTitle:"Sony FAST",pageTitle:"View Channel"});fe("$config");const z=ue();z.user;const r=de({user:z.user,item:null}),y=ne(null),M=ne(null),s=ne(null),v=ne(),l=Xe(()=>r.item&&r.item.state==="RUNNING");ie(async()=>{await x(),v.value=R.getPageTab("channel")||"information-tab"});const q=ee=>{R.setPageTab("channel",ee),v.value=ee},p=ee=>ee===v.value?"active":"",C=ee=>ee===v.value?"show active":"",x=async()=>{const ee=r;if(!c.value)try{c.value=!0,_.value="",r.item=null;const T=`/api/v1/channels/${n.id}/`;await F.get(T).then(me=>{ee.item=me.data})}catch(T){_.value=R.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{c.value=!1}},$=async()=>{await x()},K=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!c.value){_.value=null;try{c.value=!0,await F.post(`/api/v1/channels/publish/${n.id}/`).then(T=>{D.success("Publish Channel","Channel was published.")}),c.value=!1,await $()}catch(T){_.value=R.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{c.value=!1}}},Z=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/channels/unpublish/${n.id}/`).then(T=>{D.warning("Remove Channel","Channel was removed.")}),c.value=!1,await $()}catch(T){_.value=R.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{c.value=!1}}},oe=()=>{y.value.open(n.id)},w=ee=>{M.value.open(ee)},m=()=>{s.value.open(n.id)},X=async ee=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/programs/${ee}/`).then(me=>{D.success("Delete Program","Program was deleted..",{async onClose(){}})}),c.value=!1,await $()}catch(me){_.value=R.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{c.value=!1}}},A=async ee=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!c.value){_.value=null;try{c.value=!0,await F.post(`/api/v1/programs/publish/${ee}/`).then(me=>{D.success("Publish Program","Program was published..",{async onClose(){}})}),c.value=!1,await $()}catch(me){_.value=R.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{c.value=!1}}},Y=async ee=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!c.value){_.value=null;try{c.value=!0,await F.delete(`/api/v1/programs/unpublish/${ee}/`).then(me=>{D.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),c.value=!1,await $()}catch(me){_.value=R.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{c.value=!1}}},W=async ee=>{if(!c.value){_.value=null;try{c.value=!0,await F.put(`/api/v1/channels/${n.id}/change-state/${ee}`).then(T=>{D.success("Update Channel state","Change state was updated")}),c.value=!1,await $()}catch(T){_.value=R.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{c.value=!1}}};return(ee,T)=>{const me=G("router-link"),xe=G("PageHeader"),We=G("PageBody");return t(),le(re,null,{default:h(()=>[e("div",null,[S(xe,{"page-icon":"fas fa-fw fa-microphone",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:h(()=>[e("div",bf,[(i(J).isAdministrator,k("",!0)),r.item?(t(),o(L,{key:1},[r.item.arn?(t(),o(L,{key:0},[l.value?l.value?(t(),o("button",{key:1,onClick:T[2]||(T[2]=Q=>W("STOPPED")),class:"ms-1 btn btn-warning"},T[19]||(T[19]=[e("span",{class:"fas fa-fw fa-stop"},null,-1)]))):k("",!0):(t(),o("button",{key:0,onClick:T[1]||(T[1]=Q=>W("RUNNING")),class:"ms-1 btn btn-success"},T[18]||(T[18]=[e("span",{class:"fas fa-fw fa-play"},null,-1)])))],64)):k("",!0),r.item.arn&&!l.value?(t(),o("button",{key:1,onClick:T[3]||(T[3]=Q=>K()),class:"ms-1 btn btn-primary"},T[20]||(T[20]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),O("Republish ")]))):k("",!0),l.value?k("",!0):(t(),o(L,{key:2},[r.item.arn?(t(),o("button",{key:0,onClick:T[4]||(T[4]=Q=>Z()),class:"ms-1 btn btn-danger"},T[21]||(T[21]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),O("Unpublish ")]))):(t(),o("button",{key:1,onClick:T[5]||(T[5]=Q=>K()),class:"ms-1 btn btn-primary"},T[22]||(T[22]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),O("Publish ")])))],64))],64)):k("",!0),e("button",{onClick:T[6]||(T[6]=Q=>$()),class:"ms-2 btn btn-secondary"},T[23]||(T[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:T[7]||(T[7]=Q=>i(N)(n.urlMain)),class:"btn btn-secondary ms-1"},T[24]||(T[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),S(We,{errorMessage:i(_)},{default:h(()=>[r.item?(t(),o("div",yf,[e("ul",$f,[e("li",wf,[e("button",{onClick:T[8]||(T[8]=Q=>q("information-tab")),class:ae([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},T[25]||(T[25]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),O("Information ")]),2)]),e("li",hf,[e("button",{onClick:T[9]||(T[9]=Q=>q("programs-tab")),class:ae([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},T[26]||(T[26]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),O("Programs ")]),2)])]),e("div",_f,[e("div",{class:ae([C("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",kf,[e("div",Sf,[e("div",Mf,[e("div",Tf,[I(e("input",{"onUpdate:modelValue":T[10]||(T[10]=Q=>r.item.name=Q),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[H,r.item.name]]),T[27]||(T[27]=e("label",{for:"name"},"Name",-1))])]),e("div",If,[e("div",Pf,[I(e("input",{"onUpdate:modelValue":T[11]||(T[11]=Q=>r.item.playbackMode=Q),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[H,r.item.playbackMode]]),T[28]||(T[28]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",xf,[e("div",Cf,[I(e("input",{"onUpdate:modelValue":T[12]||(T[12]=Q=>r.item.tier=Q),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[H,r.item.tier]]),T[29]||(T[29]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",Uf,[e("div",Vf,[I(e("textarea",{"onUpdate:modelValue":T[13]||(T[13]=Q=>r.item.policy=Q),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[H,r.item.policy]]),T[30]||(T[30]=e("label",{for:"policy"},"Policy",-1))])]),e("div",Af,[T[32]||(T[32]=e("fieldset",null,[e("legend",null,"Filler Slate")],-1)),l.value?k("",!0):(t(),o("div",Ef,[e("button",{onClick:T[14]||(T[14]=Q=>m()),class:"btn btn-outline-primary btn-sm"},T[31]||(T[31]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),O(" Edit ")]))]))]),e("div",Of,[e("div",Nf,[e("div",Hf,[S(me,{to:`${a.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${i(d)()}`,class:"form-control",id:"fillerSlateSourceLocationName",disabled:""},{default:h(()=>[O(g(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to"]),T[33]||(T[33]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",Bf,[e("div",Lf,[S(me,{to:`${a.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${i(d)()}`,class:"form-control",id:"fillerSlateSourceLocationName",disabled:""},{default:h(()=>[O(g(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to"]),T[34]||(T[34]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])]),e("fieldset",null,[T[37]||(T[37]=e("legend",null,"Outputs",-1)),e("div",Df,[e("table",qf,[T[36]||(T[36]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Type"),e("th",null,"Source Group"),e("th",null,"Playback Url"),e("th")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.outputs,(Q,Ce)=>(t(),o("tr",{key:Q.channelOutputId},[e("td",null,g(Ce+1),1),e("td",null,g(Q.outputType),1),e("td",null,g(Q.sourceGroup),1),e("td",null,[e("div",Rf,g(Q.playbackUrl),1)]),e("td",null,[l.value?(t(),o("a",{key:0,href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(Q.playbackUrl)}`,target:"_blank",class:"btn btn-outline-info btn-sm"},T[35]||(T[35]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View ")]),8,jf)):k("",!0)])]))),128))]),_:1},512),[[ye,r.item.outputs.length>0]])])])])])],2),e("div",{class:ae([C("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",zf,[e("div",Ff,[e("table",Yf,[T[53]||(T[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),I(S(ge,{tag:"tbody",name:"list",class:"table-group-divider"},{default:h(()=>[(t(!0),o(L,null,j(r.item.programs,(Q,Ce)=>(t(),o("tr",{key:Q.programId},[e("td",null,g(Ce+1),1),e("td",null,[Q.arn?(t(),o("span",Wf)):k("",!0),O(" "+g(Q.name)+" ",1),T[40]||(T[40]=e("br",null,null,-1)),T[41]||(T[41]=e("span",{class:"fas fa-fw fa-calendar me-1"},null,-1)),O(g(i(R).moment(Q.dateScheduledStart).format("LLLL"))+" ",1),Q.relativeProgram?(t(),o(L,{key:1},[T[38]||(T[38]=e("br",null,null,-1)),T[39]||(T[39]=O(" Relative Program: ")),e("span",Gf,g(Q.relativeProgram.name),1)],64)):k("",!0)]),e("td",null,[Q.startOffsetMillis>0?(t(),o("div",Jf,[T[42]||(T[42]=e("span",{class:"fas fa-fw fa-hourglass-start me-1"},null,-1)),O(g(i(R).moment.utc(Q.startOffsetMillis).format("HH:mm:ss")),1)])):k("",!0),Q.endOffsetMillis>0?(t(),o("div",Kf,[T[43]||(T[43]=e("span",{class:"fas fa-fw fa-hourglass-end me-1"},null,-1)),O(g(i(R).moment.utc(Q.endOffsetMillis).format("HH:mm:ss")),1)])):k("",!0),Q.startOffsetMillis>0&&Q.endOffsetMillis>0?(t(),o("div",Qf,[T[44]||(T[44]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(g(i(R).moment.utc(Q.endOffsetMillis-Q.startOffsetMillis).format("HH:mm:ss")),1)])):Q.startOffsetMillis>0&&Q.endOffsetMillis<=0?(t(),o("div",Xf,[T[45]||(T[45]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(g(i(R).moment.utc(Q.vodSource.video.durationInMillis-Q.startOffsetMillis).format("HH:mm:ss")),1)])):Q.startOffsetMillis<=0&&Q.endOffsetMillis>0?(t(),o("div",Zf,[T[46]||(T[46]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(g(i(R).moment.utc(Q.endOffsetMillis).format("HH:mm:ss")),1)])):Q.startOffsetMillis<=0&&Q.endOffsetMillis<=0?(t(),o("div",ep,[T[47]||(T[47]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(g(i(R).moment.utc(Q.vodSource.video.durationInMillis).format("HH:mm:ss")),1)])):k("",!0)]),e("td",null,[O(g(Q.vodSource.video.title)+" ",1),T[48]||(T[48]=e("br",null,null,-1)),O(" ("+g(i(R).moment.utc(Q.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),o(L,null,j(Q.adBreaks,ke=>(t(),o("li",null,[e("span",tp,g(i(R).moment.utc(ke.offsetMillis).format("HH:mm:ss")),1),S(me,{to:`${a.urlViewVodSource}/${ke.vodSource.vodSourceId}/${i(d)()}`},{default:h(()=>[O(g(ke.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",sp,[Q.arn?(t(),o("button",{key:0,onClick:ke=>Y(Q.programId),class:"btn btn-sm btn-outline-warning"},T[49]||(T[49]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,op)):(t(),o(L,{key:1},[e("button",{onClick:ke=>A(Q.programId),class:"btn btn-sm btn-outline-primary ms-1"},T[50]||(T[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,lp),e("button",{onClick:ke=>X(Q.programId),class:"btn btn-sm btn-outline-danger ms-1"},T[51]||(T[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ap)],64)),e("button",{onClick:ke=>w(Q.programId),class:"btn btn-sm btn-outline-primary ms-2"},T[52]||(T[52]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]),8,np)])]))),128))]),_:1},512),[[ye,r.item.programs.length>0]])])]),e("div",ip,[e("button",{onClick:T[15]||(T[15]=Q=>oe()),class:"btn btn-outline-primary"},T[54]||(T[54]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Program ")]))])])],2)])])):k("",!0)]),_:1},8,["errorMessage"]),S(Xc,{ref_key:"modalAddProgram",ref:y,onRefresh:$},null,512),S(Gm,{ref_key:"modalEditProgram",ref:M,onRefresh:$},null,512),S(gf,{ref_key:"modalEditFillerSlate",ref:s,onRefresh:$},null,512)])]),_:1})}}},dp={path:"/",component:Lo,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:sl},{path:"users/add",component:Il},{path:"users",component:Hl},{path:"users/view/:id",component:na,props:!0},{path:"videos/add",component:Na},{path:"videos/edit/:id",component:ln,props:!0},{path:"videos",component:pn},{path:"videos/view/:id",component:qn,props:!0},{path:"source-locations/add",component:mi},{path:"source-locations/edit/:id",component:vi,props:!0},{path:"source-locations",component:Mi},{path:"source-locations/view/:id",component:Ki,props:!0},{path:"vod-sources/add",component:yr},{path:"vod-sources/edit/:id",component:hr,props:!0},{path:"vod-sources",component:Vr},{path:"vod-sources/view/:id",component:cu,props:!0},{path:"channels/add",component:Nu},{path:"channels/edit/:id",component:Lu,props:!0},{path:"channels",component:Gu},{path:"channels/view/:id",component:rp,props:!0}]},Ye=Ze({history:et("/"),linkActiveClass:"active",routes:[{...Ys},{path:"/administrator",redirect:"/"},{...dp}]}),up={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const a=this,u=new tt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();u.on("onNotificationCreated",function(f){let c=f.content;f.notificationEntityClassText==="Deposit"&&(c+="<br/>",c+=`<a href="${a.urlViewDeposit}${f.referenceId}">Click ${f.notificationEntityClassText} here</a>`),f.notificationEntityClassText==="Withdraw"&&(c+="<br/>",c+=`<a href="${a.urlViewWithdraw}${f.referenceId}">Click ${f.notificationEntityClassText} here</a>`),f.notificationEntityClassText==="ManualModeOfPayment"&&(c+="<br/>",c+=`<a href="${a.urlViewManualModeOfPayment}${f.referenceId}">Click ${f.notificationEntityClassText} here</a>`),f.iconClass;let P="secondary";switch(f.notificationType){case 1:P="success";break;case 3:P="info";break;case 3:P="success";break;case 4:P="info";break;case 5:P="warning";break;case 6:P="error";break}a.$toast[P](f.subject,c,{timeOut:1e4});const b=f.subject,_={body:c,icon:"/img/192x102.png"};new Notification(b,_)}),u.on("jobUpdated",function(f){a.$bus.$emit("event:job-updated",f)}),await u.start().then(function(){}).catch(function(f){})}}};function cp(a,n,u,f,c,P){return t(),o("div")}const mp=pe(up,[["render",cp],["__scopeId","data-v-5b4a9fa2"]]),fp={class:"navbar bg-light","data-bs-theme":"light"},pp={class:"container-md"},vp={class:"col-sm-auto"},gp={class:"navbar-brand mb-0"},bp={class:"col-sm flex-fill"},yp={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(a){return(n,u)=>(t(),le(re,null,{default:h(()=>[e("div",null,[e("nav",fp,[e("div",pp,[e("div",{class:ae([a.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",vp,[we(n.$slots,"title",{},()=>[e("h1",gp,[e("i",{class:ae([a.pageIcon,"me-1"])},null,2),e("span",null,g(a.pageTitle),1)])])]),e("div",bp,[we(n.$slots,"default")])],2)])])])]),_:3}))}},$p={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},wp=["innerHTML"],hp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},_p={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(a){return(n,u)=>(t(),le(re,null,{default:h(()=>[we(n.$slots,"default",{},()=>[a.errorMessage?(t(),o("div",$p,[u[0]||(u[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:a.errorMessage},null,8,wp)])):k("",!0),a.vuelidate&&a.vuelidate.$error?(t(),o("div",hp,[u[1]||(u[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(L,null,j(a.vuelidate.$errors,f=>(t(),o("li",{key:f.$uid},g(f.$message),1))),128))])])):k("",!0)])]),_:3}))}},kp={class:"mt-2 container-md"},Sp={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(a){return(n,u)=>{const f=G("PageMessages");return t(),le(re,null,{default:h(()=>[e("div",kp,[S(f,{errorMessage:a.errorMessage,vuelidate:a.vuelidate},null,8,["errorMessage","vuelidate"]),we(n.$slots,"default")])]),_:3})}}},Mp={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const a=this;a.busy||(document.activeElement&&document.activeElement.blur(),await a.search(1))},async moveFirst(){const a=this;if(a.busy)return;a.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await a.search(1))},async moveLast(){const a=this;if(a.busy)return;const n=a.filter;n.pageIndex!==n.totalPages&&(document.activeElement&&document.activeElement.blur(),await a.search(n.totalPages))},async move(a){const n=this;if(n.busy)return;const u=n.filter,f=u.pageIndex+a;f>=0&&f<=u.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(f))}}},Tp={class:"mt-2"},Ip={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},Pp={key:0,class:"col-sm order-2 order-sm-1"},xp={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Cp={class:"me-1 fw-bold"},Up={class:"fw-bold"},Vp={class:"ms-1"},Ap={class:"col-sm order-1 order-sm-2"},Ep={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Op={key:0,class:"page-item"},Np={key:1,class:"page-item"},Hp={key:2,class:"page-item"},Bp={class:"page-item active"},Lp={class:"page-link"},Dp={key:3,class:"page-item"},qp={key:4,class:"page-item"},Rp={key:5,class:"page-item"},jp={key:1,class:"text-info font-weight-bold text-center"},zp={key:0},Fp={key:1};function Yp(a,n,u,f,c,P){return t(),o("div",Tp,[u.filter.items.length?(t(),o("div",Ip,[u.showPerPage?(t(),o("div",Pp,[e("div",xp,[e("div",null,[e("span",Cp,g(u.filter.totalCount),1),n[8]||(n[8]=O("records in ")),e("span",Up,g(u.filter.totalPages),1),n[9]||(n[9]=O(" page(s) "))]),e("div",Vp,[I(e("select",{"onUpdate:modelValue":n[0]||(n[0]=b=>u.filter.pageSize=b),onChange:n[1]||(n[1]=(...b)=>P.changePagination&&P.changePagination(...b)),class:"form-select form-select-sm me-1"},n[10]||(n[10]=[He('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ve,u.filter.pageSize]])]),n[11]||(n[11]=e("div",{class:"ms-1"},"per page",-1))])])):k("",!0),e("div",Ap,[e("ul",Ep,[u.filter.pageIndex!==1?(t(),o("li",Op,[e("button",{class:"page-link","aria-label":"Previous",onClick:n[2]||(n[2]=(...b)=>P.moveFirst&&P.moveFirst(...b))},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):k("",!0),u.filter.pageIndex>2?(t(),o("li",Np,[e("button",{class:"page-link",onClick:n[3]||(n[3]=b=>P.move(-2))},g(u.filter.pageIndex-2),1)])):k("",!0),u.filter.pageIndex>1?(t(),o("li",Hp,[e("button",{class:"page-link",onClick:n[4]||(n[4]=b=>P.move(-1))},g(u.filter.pageIndex-1),1)])):k("",!0),e("li",Bp,[e("span",Lp,g(u.filter.pageIndex),1)]),u.filter.pageIndex<u.filter.totalPages?(t(),o("li",Dp,[e("button",{class:"page-link",onClick:n[5]||(n[5]=b=>P.move(1))},g(u.filter.pageIndex+1),1)])):k("",!0),u.filter.pageIndex<u.filter.totalPages-1?(t(),o("li",qp,[e("button",{class:"page-link",onClick:n[6]||(n[6]=b=>P.move(2))},g(u.filter.pageIndex+2),1)])):k("",!0),u.filter.pageIndex<u.filter.totalPages?(t(),o("li",Rp,[e("button",{class:"page-link","aria-label":"Next",onClick:n[7]||(n[7]=(...b)=>P.moveLast&&P.moveLast(...b))},n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):k("",!0)])])])):(t(),o("div",jp,[u.noRecords?(t(),o("div",zp,g(u.noRecords),1)):(t(),o("div",Fp,"No record(s) found."))]))])}const Wp=pe(Mp,[["render",Yp]]),Gp={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let a=this;if(!a.enabled)return;let n=a.filter;n.sortField===a.field?n.sortOrder===0?n.sortField=null:n.sortOrder=n.sortOrder===0?1:0:(n.sortField=a.field,n.sortOrder=1),a.$emit("search")}}},Jp={class:"align-self-center"};function Kp(a,n,u,f,c,P){return t(),o("div",{onClick:n[0]||(n[0]=(...b)=>P.click&&P.click(...b)),class:"d-flex flex-row justify-content-start align-content-center",style:qe({cursor:u.enabled?"pointer":""})},[we(a.$slots,"default"),e("span",Jp,[u.showSort?(t(),o("span",{key:0,class:ae([{"fa-sort text-gray-500":!P.currentSortField(),"fa-sort-up":P.currentSortField()&&P.sortUp(),"fa-sort-down":P.currentSortField()&&!P.sortUp()},"fas fa-fw mr-1"])},null,2)):k("",!0)])],4)}const Qp=pe(Gp,[["render",Kp]]),Xp={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(a){const n=this;n.setSelected(a),n.$emit("onSelectedRow",a)}}},Zp={class:"table-responsive m-0"},ev=["href"],tv={key:1},sv=["onClick"],ov={class:"form-group row no-gutters"},lv={class:"col-5 col-form-label"},av={class:"col align-self-center"},nv=["href"],iv={key:1};function rv(a,n,u,f,c,P){return t(),o("div",null,[e("div",Zp,[e("table",{class:ae(["table table-hover d-none d-md-table card",u.tableCss])},[e("thead",null,[we(a.$slots,"header",{},()=>[n[0]||(n[0]=e("th",null,"#",-1)),(t(!0),o(L,null,j(u.header.columns,b=>(t(),o("th",null,g(b.title),1))),256))],!0)]),e("tbody",null,[(t(!0),o(L,null,j(u.items,(b,B)=>we(a.$slots,"table-row",{key:`row1-${b[u.header.key]}`,item:b,index:B},()=>[e("td",null,g(u.getRowNumber(B)),1),(t(!0),o(L,null,j(u.header.columns,U=>(t(),o("td",null,[U.href?(t(),o("a",{key:0,href:U.href(b[u.header.key]),class:"font-weight-bold"},g(b[U.field]),9,ev)):(t(),o("span",tv,g(b[U.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:ae(["d-block d-md-none",u.rowCss])},[(t(!0),o(L,null,j(u.items,(b,B)=>(t(),o("div",{key:`row2-${b[u.header.key]}`,onClick:U=>P.onSelectedRow(b),class:"border"},[e("div",{class:ae(["p-2",{"b-left":u.isSelected(b)}])},[we(a.$slots,"table-list",{item:b,index:B},()=>[(t(!0),o(L,null,j(u.header.columns,U=>(t(),o("div",ov,[e("label",lv,g(U.title),1),e("div",av,[U.href?(t(),o("a",{key:0,href:U.href(b[u.header.key]),class:"font-weight-bold"},g(b[U.field]),9,nv)):(t(),o("span",iv,g(b[U.field]),1))])]))),256))],!0)],2)],8,sv))),128))],2)])}const dv=pe(Xp,[["render",rv],["__scopeId","data-v-65929213"]]),be=st(lt);be.use(ot());be.use(Ye);be.component("m-notification",mp);be.component("m-pagination",Wp);be.component("sort-field",Qp);be.component("table-list",dv);be.component("Toasts",Oo);be.component("PageHeader",yp);be.component("PageMessages",_p);be.component("PageBody",Sp);const uv="https://sonyfastpoc.azurewebsites.net/",cv="Sony FAST",mv=void 0,fv={API_URL:uv,appName:cv,tenantId:mv};be.provide("$config",fv);be.provide("$bus",Ve);be.mount("#app");
