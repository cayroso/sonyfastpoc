import{o as t,c as ce,r as ee,h as Ze,u as et,a as ze,d as tt,b as re,e as Be,f as s,g as e,i as N,w as E,j,t as v,F as O,k as L,l as U,m as de,n as Ge,p as Se,q as st,s as Ne,P as ot,v as me,x as te,y as oe,z as ye,T as fe,A as o,B as ct,C as q,D as Q,E as mt,G as le,H as at,I as ke,J as he,K as Ue,L as ue,M as De,N as Te,O as qe,Q as _e,R as Ae,S as Pe,U as Xe,V as ft,W as pt,X as vt,Y as Oe,Z as gt,_ as bt}from"./vendor-Dc7uHhsK-chunk.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))x(k);new MutationObserver(k=>{for(const A of k)if(A.type==="childList")for(const C of A.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&x(C)}).observe(document,{childList:!0,subtree:!0});function h(k){const A={};return k.integrity&&(A.integrity=k.integrity),k.referrerPolicy&&(A.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?A.credentials="include":k.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function x(k){if(k.ep)return;k.ep=!0;const A=h(k);fetch(k.href,A)}})();const yt={__name:"App",setup(l){return(p,h)=>{const x=ee("router-view");return t(),ce(x)}}};function je(){const l=et();ze();const p=P=>{var _;let H=P,c=H.response,T="";if(!H.response)return P.message;if(c.status===500){if(typeof c.data=="string")return c.data;if(c.data.content)return c.data.content;if(c.data.detail)return c.data.detail}if(c.status===401){const G=`${window.location.pathname}${window.location.search}`;T=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(G)}`}'>here</a> to login.`}else if(c.status===400){let G=H.response.data.errors;T=H.response.data.title||H.response.data,G&&(T+="<ul>");for(let J in G){let d=G[J];for(let g in G[J]){let Y=d[g];T+=`<li>${Y}</li>`}}G&&(T+="</ul>"),T||(T=H.message),T&&T.content&&(T=T.content)}else c.status===404?T=((_=c==null?void 0:c.data)==null?void 0:_.title)||(c==null?void 0:c.data)||"Record not found.":typeof c.data=="string"&&(T=H.message,T===""&&(T=`Error <b>Http ${c.status}</b>.<br/>Please contact the System Administrator.`));return T},h=P=>JSON.parse(JSON.stringify(P)),x=P=>{if(typeof P!="number")return P;var H=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return H.format(P)},k=(P,H,c)=>{const _={value:H,expiry:new Date().getTime()+c};debugger;localStorage.setItem(P,JSON.stringify(_))},A=P=>{debugger;const H=localStorage.getItem(P);if(!H)return null;const c=JSON.parse(H);return new Date().getTime()>c.expiry?(localStorage.removeItem(P),null):c.value},C="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:p,clone:h,toCurrency:x,moment:Ze,localStorageSetWithExpiry:k,localStorageGetWithExpiry:A,setPageTab:(P,H)=>{var c=localStorage.getItem(C);c?c=JSON.parse(c):c={},c[P]=H,localStorage.setItem(C,JSON.stringify(c))},getPageTab:P=>{var H=localStorage.getItem(C);return H?H=JSON.parse(H):H={},H[P]},createHlsStream:(P,H,c)=>{var T=new Hls({autoStartLoad:c??!0});return T.on(Hls.Events.MEDIA_ATTACHED,function(){}),T.on(Hls.Events.MANIFEST_PARSED,function(_,G){console.log("manifest loaded, found "+G.levels.length+" quality level")}),T.on(Hls.Events.ERROR,function(_,G){if(G.fatal)switch(G.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),T.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",G);break;default:T.destroy();break}}),T.loadSource(H),T.attachMedia(P),T},isValidTime:P=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(P),generateReturnUrl:()=>{let P=l.path;return l.query.returnUrl&&(P=l.query.returnUrl),P=`?returnUrl=${encodeURIComponent(P)}`,P}}}const $t=je(),lt=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(lt.exp*1e3),ht=wt.isAfter()?lt:null,be=tt({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(l){try{this.user=l,localStorage.setItem("user",JSON.stringify(l))}catch(p){debugger;alert(p)}},logout(){this.user=null,localStorage.removeItem("user"),it.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),_t="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(_t));const kt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Fe=kt,nt=tt("msal",()=>{const l=re({auth:{clientId:Fe.VITE_AUTH_CLIENT_ID,authority:Fe.VITE_AUTH_AUTHORITY_URL,redirectUri:Fe.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),p=re("");return{msalConfig:l,accessToken:p,setAccessToken:x=>{p.value=x}}}),Ye={$on:(...l)=>Be.on(...l),$once:(...l)=>Be.once(...l),$off:(...l)=>Be.off(...l),$emit:(...l)=>Be.emit(...l)};function St(){const l=(A,C,F,R)=>{Ye.$emit("toast-message",{title:A,message:C,type:F,options:R})};return{success:(A,C,F={})=>{l(A,C,"success",F)},warning:(A,C,F={})=>{l(A,C,"warning",F)},info:(A,C,F={})=>{l(A,C,"info",F)},error:(A,C,F={})=>{l(A,C,"danger",F)}}}const Me=(l,p)=>{const h=l.__vccOpts||l;for(const[x,k]of p)h[x]=k;return h},Tt={data(){return{notifications:[],messages:[]}},async created(){const l=this;l.$bus.$on("event:notification-received",()=>{l.getUnreadNotifications()}),l.$bus.$on("event:notification-marked-as-read",p=>{l.notifications.some(x=>x.notificationId===p)&&l.getUnreadNotifications()}),l.$bus.$on("event:notification-removed",p=>{l.notifications.some(x=>x.notificationId===p)&&l.getUnreadNotifications()}),l.$bus.$on("event:chat-marked-as-read",l.onChatMarkedAsRead),l.$bus.$on("event:chat-message-received",l.onChatMessageReceived)},async mounted(){const l=this,p=l.$refs.notifications,h=l.$refs.messages;p&&p.offsetParent,h&&h.offsetParent&&await l.getUnreadChats()},methods:{async logout(){const l=this;try{await l.$util.axios.post("/api/accounts/logout").then(p=>{const h="/";l.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){l.$util.href(h)}})})}catch(p){l.$util.handleError(p)}},async onChatMarkedAsRead(l){let p=this,h=p.messages.find(x=>x.chatId===l);if(h){let x=p.messages.indexOf(h);p.messages.splice(x,1)}},async onChatMessageReceived(l){let p=this,h=p.messages.find(k=>k.chatId===l.chatId);if(h)h.lastMessageText=l.content;else{var x={chatId:l.chatId,isRead:!1,lastDateSent:l.dateSent,lastMessageText:l.content,senderFirstLastName:`${l.sender.firstName} ${l.sender.lastName}`,senderInitials:l.sender.initials,senderProfilePicture32:l.sender.profilePicture32,urlPicture:p.$util.getProfilePictureUrl(l.sender.profilePicture32,l.sender.initials)};p.messages.push(x)}},async getUnreadNotifications(){const l=this;try{await l.$util.axios.get("api/accounts/unread-notifications").then(p=>{l.notifications=p.data})}catch(p){l.$util.handleError(p)}},async getUnreadChats(){const l=this;try{await l.$util.axios.get("api/accounts/unread-chats").then(p=>{l.messages=p.data;for(let h in l.messages){let x=l.messages[h];l.$set(x,"urlPicture",l.$util.getProfilePictureUrl(x.senderProfilePicture32,x.senderInitials))}})}catch(p){l.$util.handleError(p)}},viewNotification(l){this.$bus.$emit("event:open-notification",l)},viewChat(l){this.$bus.$emit("event:open-chat",l)},showHiddenElements(){let p=this.$el.getElementsByClassName("initialHidden");for(let h=0;h<p.length;h++)p[h].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const p=be().user;return{user:p,username:p?p.nameFull:"Guest"}},async mounted(){},methods:{isActive(l){return window.location.href.indexOf(l)>-1},async openModalSearchUser747(l){this.$refs.refModalSearchUser747.open(l)}}},It={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},xt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Vt={class:"navbar-nav"},Pt={class:"nav-item dropdown"},Ot={class:"dropdown-menu","aria-labelledby":"dropdown01"},At={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"navbar-nav ms-auto"},Ht={class:"nav-item dropdown"},Lt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},qt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Bt={class:"text-capitalize"};function Nt(l,p,h,x,k,A){const C=ee("router-link");return t(),s("nav",It,[e("div",Ct,[N(C,{class:"navbar-brand",to:"/member"},{default:E(()=>[j(v(h.appName),1)]),_:1}),p[14]||(p[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",xt,[e("ul",Vt,[e("li",Pt,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ot,[e("li",null,[N(C,{class:"dropdown-item",to:"/member/announcements"},{default:E(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),j(" Announcements ")])),_:1})]),e("li",null,[N(C,{class:"dropdown-item",to:"/member/posts"},{default:E(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),j(" Posts ")])),_:1})]),e("li",null,[N(C,{class:"dropdown-item",to:"/member/yellow-pages"},{default:E(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),j(" Yellow Pages ")])),_:1})])])]),e("li",At,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ut,[e("li",null,[N(C,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:E(()=>p[4]||(p[4]=[j(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Dt,[e("li",Ht,[e("a",Lt,[e("span",null,[p[6]||(p[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,v(k.username),1)])]),e("ul",qt,[p[9]||(p[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),p[10]||(p[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),p[11]||(p[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),p[12]||(p[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),k.user&&k.user.roles.length>1?(t(!0),s(O,{key:0},L(k.user.roles,F=>(t(),s("li",null,[N(C,{to:`/${F.toLowerCase()}`,class:"dropdown-item"},{default:E(()=>[e("span",Bt,v(F),1)]),_:2},1032,["to"])]))),256)):U("",!0),e("li",null,[N(C,{to:"/",class:"dropdown-item"},{default:E(()=>p[7]||(p[7]=[j(" Main ")])),_:1})]),p[13]||(p[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[N(C,{to:"/account/logout",class:"dropdown-item"},{default:E(()=>p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),j("Logout ")])),_:1})])])])])])])])}const Rt=Me(Mt,[["render",Nt]]),Ft={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const l=document.getElementById("top");l&&l.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let l=this;if(!l.$el.getElementsByClassName)return;let p=l.$el.getElementsByClassName("initialHidden");for(let h=0;h<p.length;h++){let x=p[h];x.classList.remove("invisible"),x.classList.remove("d-none")}},close(){const l=this,p=document.referrer.toLowerCase();p&&p.includes("/account/login")?l.$router.go(-2):l.$router.go(-1)},toggle(l){const p=this;p.toggles[l]=!p.toggles[l],localStorage.setItem(p.togglesKey,JSON.stringify(p.toggles))}}},zt={mixins:[Ft],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(l){return window.location.href.indexOf(l)>-1}}},Gt={class:"footer sticky-bottom"},jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(l,p,h,x,k,A){const C=ee("router-link");return t(),s("footer",Gt,[e("div",jt,[e("div",Yt,[e("span",Wt,"©"+v(k.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[N(C,{class:"dropdown-item",to:"/member/announcements"},{default:E(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),j(" Announcements ")])),_:1})]),e("li",null,[N(C,{class:"dropdown-item",to:"/member/posts"},{default:E(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),j(" Posts ")])),_:1})]),e("li",null,[N(C,{class:"dropdown-item",to:"/member/yellow-pages"},{default:E(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),j(" Yellow Pages ")])),_:1})])])]),e("li",es,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[N(C,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:E(()=>p[4]||(p[4]=[j(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Me(zt,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const p=this.$config;document.title=`Account - ${p.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(l,p,h,x,k,A){const C=ee("Toasts"),F=ee("router-view");return t(),s("div",ls,[N(C),N(F,{class:"flex-grow-1 mb-2"})])}const rs=Me(as,[["render",ns]]),is={__name:"index",setup(l){return be().user,de(()=>{}),(h,x)=>(t(),s("div",null,x[0]||(x[0]=[Ge('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){Se("$config");const l=us.VITE_API_URL,p=st.create({baseURL:l});return Ne.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),p.interceptors.request.use(h=>{Ne.start();const{user:x}=be();return x&&x.token&&(h.headers?(h.headers.Authorization||(h.headers.Authorization=`Bearer ${x.token}`),h.headers["Access-Control-Allow-Origin"]||(h.headers["Access-Control-Allow-Origin"]="*")):h.headers={Authorization:`Bearer ${x.token}`,"Access-Control-Allow-Origin":"*"}),h}),p.interceptors.response.use(h=>(Ne.done(),h),h=>{throw Ne.done(),h}),p}function ve(l){if(!l.appTitle)throw Error("App Title is required.");if(!l.pageTitle)throw Error("Page Title is required.");const p=et(),h=ze(),x=cs(),k=je(),A=St(),F=be().user,R=()=>F&&F.roles&&F.roles.includes("System"),V=()=>F&&F.roles&&F.roles.includes("administrator"),z=()=>F&&F.roles&&F.roles.includes("employee"),Z=()=>F&&F.roles&&F.roles.includes("Member"),P=async()=>{const Y=document.referrer.toLowerCase();Y&&Y.includes("/accounts/login")?await h.go(-2):await h.go(-1)},H=Y=>{var f;const b=p.path,M=(f=p.query)==null?void 0:f.returnUrl;M&&!(b.startsWith(M)||M.startsWith(b))?h.push(M):h.push(Y)},c=l.appTitle,T=l.pageTitle,_=re(!1),G=re(new Map),J=re(""),d=re(""),g=re("");return{appTitle:c,pageTitle:T,busy:_,validations:G,infoMessage:J,warningMessage:d,errorMessage:g,router:h,route:p,axios:x,utils:k,toasts:A,close:P,closeWithReturnUrl:H,generateReturnUrl:k.generateReturnUrl,security:{userId:F?F.userId:"",isSystem:R(),isAdministrator:V(),isEmployee:z(),isMember:Z()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(l){Se("$config");const p=be(),h=nt(),x=new ot(h.msalConfig),k=me({username:"",password:""}),A={username:{required:te.withMessage("Username is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0}},C=ye(A,k),{appTitle:F,pageTitle:R,busy:V,isDirty:z,validations:Z,infoMessage:P,warningMessage:H,errorMessage:c,router:T,route:_,axios:G,utils:J,toasts:d,close:g,security:Y}=ve({appTitle:"Sony FAST POC",pageTitle:"Sign On"});de(async()=>{await x.initialize()});const b=async()=>{await x.loginPopup({}).then(()=>{debugger;const S=x.getAllAccounts()[0];x.setActiveAccount(S)}).catch(f=>{console.error(`error during authentication: ${f}`)});var M={account:x.getActiveAccount(),scopes:[]};await x.acquireTokenSilent(M).then(f=>{debugger;const I=f.account.idToken,u=ct(I);if(u.token=f.accessToken,console.log(f),!u.roles){debugger;u.roles=[]}u.userId=u.sub,p.login(u);var i=_.query.returnUrl;i?T.push(decodeURIComponent(i)):u.roles.length===1?T.push(`/${u.roles[0].toLowerCase()}`):T.push("/")}).catch(f=>{console.error(`error during acquireTokenSilent: ${f}`)})};return(M,f)=>(t(),ce(fe,null,{default:E(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,v(o(F)),1),e("div",null,[o(c)?(t(),s("div",vs,[f[1]||(f[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(c)},null,8,gs)])):U("",!0),o(C).$error?(t(),s("div",bs,[f[2]||(f[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(C).$errors,S=>(t(),s("li",{key:S.$uid},v(S.$message),1))),128))])])):U("",!0)]),e("button",{onClick:f[0]||(f[0]=S=>b()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Me(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(l){const p=be();return p.user,de(async()=>{p.logoutWithRedirect()}),(h,x)=>(t(),s("div",ws,x[0]||(x[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[j(" You have logged out from HOA MS."),e("br"),j(" Click "),e("a",{href:"/",class:"d-inline"},"here"),j(" to go back to home page. ")])],-1)])))}},_s={class:"h-100 d-flex align-items-center justify-content-center"},ks={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],xs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vs={class:"row row-cols-1 row-cols-sm-3"},Ps={class:"col-sm"},Os={class:"form-group"},As={key:0,class:"d-block invalid-feedback"},Us={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},Fs={key:0,class:"d-block invalid-feedback"},zs={class:"col"},Gs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Ys={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(l){const p=me({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),h=(Y,b)=>Y===b.password,x={firstName:{required:te.withMessage("First name is required.",oe),$autoDirty:!0,$lazy:!0},middleName:{required:te.withMessage("Middle name is required.",oe),$autoDirty:!0,$lazy:!0},lastName:{required:te.withMessage("Last name is required.",oe),$autoDirty:!0,$lazy:!0},phoneNumber:{required:te.withMessage("Phone number is required.",oe),$autoDirty:!0,$lazy:!0},email:{required:te.withMessage("Email is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0},confirmPassword:{required:te.withMessage("Confirm password is required.",oe),confirmSamePassword:te.withMessage("Password and confirm passwrod are different.",h),$autoDirty:!0,$lazy:!0}},k=ye(x,p),{appTitle:A,pageTitle:C,busy:F,isDirty:R,validations:V,infoMessage:z,warningMessage:Z,errorMessage:P,router:H,axios:c,utils:T,toasts:_,close:G,security:J}=ve({appTitle:"HOA MS",pageTitle:"Register User"}),d=Se("$config");de(()=>{});const g=async()=>{const Y=p;if(F.value)return;if(!await k.value.$validate()){window.scrollTo(0,0);return}P.value=null;try{F.value=!0;const M=T.clone(Y);M.tenantid=d.tenantId;debugger;await c({method:"post",url:"/api/v1/accounts/register",data:M}).then(f=>{_.success("Register","Registration was successfull.",{onClose:async()=>{await H.push("/accounts/login")}})})}catch(M){P.value=T.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{F.value=!1}};return(Y,b)=>{const M=ee("router-link");return t(),ce(fe,null,{default:E(()=>[e("div",_s,[e("div",ks,[e("h4",Ss,v(o(C)),1),e("div",Ts,[e("div",Ms,[o(P)?(t(),s("div",Is,[b[8]||(b[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(P)},null,8,Cs)])):U("",!0),o(k).$error?(t(),s("div",xs,[b[9]||(b[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(k).$errors,f=>(t(),s("li",{key:f.$uid},v(f.$message),1))),128))])])):U("",!0)]),e("div",Vs,[e("div",Ps,[e("div",Os,[b[10]||(b[10]=e("label",null,"First Name",-1)),q(e("input",{"onUpdate:modelValue":b[0]||(b[0]=f=>p.firstName=f),type:"text",class:"form-control"},null,512),[[Q,p.firstName]]),o(k).firstName.$error?(t(),s("div",As,[(t(!0),s(O,null,L(o(k).firstName.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])]),e("div",Us,[e("div",Ds,[b[11]||(b[11]=e("label",null,"Middle Name",-1)),q(e("input",{"onUpdate:modelValue":b[1]||(b[1]=f=>p.middleName=f),type:"text",class:"form-control"},null,512),[[Q,p.middleName]]),o(k).middleName.$error?(t(),s("div",Hs,[(t(!0),s(O,null,L(o(k).middleName.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])]),e("div",Ls,[e("div",Es,[b[12]||(b[12]=e("label",null,"Last Name",-1)),q(e("input",{"onUpdate:modelValue":b[2]||(b[2]=f=>p.lastName=f),type:"text",class:"form-control"},null,512),[[Q,p.lastName]]),o(k).lastName.$error?(t(),s("div",qs,[(t(!0),s(O,null,L(o(k).lastName.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])])]),e("div",Bs,[e("div",Ns,[e("div",Rs,[b[13]||(b[13]=e("label",null,"Phone Number",-1)),q(e("input",{"onUpdate:modelValue":b[3]||(b[3]=f=>p.phoneNumber=f),type:"tel",class:"form-control"},null,512),[[Q,p.phoneNumber]]),o(k).phoneNumber.$error?(t(),s("div",Fs,[(t(!0),s(O,null,L(o(k).phoneNumber.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])]),e("div",zs,[e("div",Gs,[b[14]||(b[14]=e("label",null,"Email",-1)),q(e("input",{"onUpdate:modelValue":b[4]||(b[4]=f=>p.email=f),type:"email",class:"form-control"},null,512),[[Q,p.email]]),o(k).email.$error?(t(),s("div",js,[(t(!0),s(O,null,L(o(k).email.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])])]),e("div",Ys,[e("div",Ws,[e("div",Ks,[b[15]||(b[15]=e("label",null,"Password",-1)),q(e("input",{"onUpdate:modelValue":b[5]||(b[5]=f=>p.password=f),type:"password",class:"form-control"},null,512),[[Q,p.password]]),o(k).password.$error?(t(),s("div",Js,[(t(!0),s(O,null,L(o(k).password.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])]),e("div",Qs,[e("div",Xs,[b[16]||(b[16]=e("label",null,"Confirm Password",-1)),q(e("input",{"onUpdate:modelValue":b[6]||(b[6]=f=>p.confirmPassword=f),type:"password",class:"form-control"},null,512),[[Q,p.confirmPassword]]),o(k).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(O,null,L(o(k).confirmPassword.$errors,f=>(t(),s("div",{key:f.$uid},v(f.$message),1))),128))])):U("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(k).$dirty&&o(k).$invalid,onClick:b[7]||(b[7]=f=>g()),class:"btn btn-primary w-100"},b[17]||(b[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),j("Register ")]),8,so)]),e("div",oo,[N(M,{to:"/",class:"btn btn-outline-primary w-100"},{default:E(()=>b[18]||(b[18]=[j("Home")])),_:1})]),e("div",ao,[N(M,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:E(()=>b[19]||(b[19]=[j("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function We(){const l=ze(),p=R=>window.location.href.indexOf(R)>-1,h=R=>localStorage.getItem("data-bs-theme")||R,x=R=>{document.documentElement.setAttribute("data-bs-theme",R),localStorage.setItem("data-bs-theme",R)},k=async()=>await st.get("https://bootswatch.com/api/5.json").then(R=>R.data),A=R=>{const V=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");V&&R?(V.setAttribute("href",R),localStorage.setItem("bootswatch-theme",R)):alert("cannot query css link")},C=R=>{F(),l.push(R)},F=()=>{if(screen.width<576){const V=document.getElementById("navbarCollapse");if(V){const z=mt.getInstance(V);z&&z.hide()}}};return{isActive:p,getCurrentBsTheme:h,changeBsTheme:x,getBootswatch:k,changeTheme:A,navigate:C,collapseNavbar:F}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],_o={class:"nav-item dropdown"},ko={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},xo={key:1},Vo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(l){const p=nt(),{isActive:h,getCurrentBsTheme:x,changeBsTheme:k,getBootswatch:A,changeTheme:C,navigate:F,collapseNavbar:R}=We(),V=be(),z=V.user,Z=me({user:z,username:z?z.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});de(async()=>{const T=Z;T.bootswatch=await A();const _=x(T.bsTheme);debugger;_&&(T.bsTheme=_,k(T.bsTheme));const G=localStorage.getItem("bootswatch-theme");G&&(T.currentTheme=G,C(G))});const P=T=>{C(T),Z.currentTheme=T,R()},H=T=>{k(T),Z.bsTheme=T,R()},c=async()=>{V.logoutWithRedirect();const T=new ot(p.msalConfig);await T.initialize();const _={mainWindowRedirectUri:"/"};await T.logoutPopup(_)};return(T,_)=>{const G=ee("router-link");return t(),ce(fe,null,{default:E(()=>[e("nav",ro,[e("div",io,[N(G,{class:"navbar-brand",to:"/administrator"},{default:E(()=>[j(v(l.appName),1)]),_:1}),_[18]||(_[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[N(G,{to:"/videos",onClick:o(R),class:"nav-link"},{default:E(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[_[6]||(_[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[N(G,{to:"/source-groups",onClick:o(R),class:"dropdown-item"},{default:E(()=>_[4]||(_[4]=[j(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[N(G,{to:"/source-locations",onClick:o(R),class:"dropdown-item"},{default:E(()=>_[5]||(_[5]=[j(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[N(G,{to:"/vod-sources",onClick:o(R),class:"nav-link"},{default:E(()=>_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[_[10]||(_[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[N(G,{to:"/program-templates",onClick:o(R),class:"dropdown-item"},{default:E(()=>_[8]||(_[8]=[j(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[N(G,{to:"/channels",onClick:o(R),class:"dropdown-item"},{default:E(()=>_[9]||(_[9]=[j(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[_[14]||(_[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[Z.bsTheme==="dark"?(t(),s("button",{key:0,onClick:_[0]||(_[0]=J=>H("light")),class:"dropdown-item"},_[11]||(_[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),j("Dark Mode ")]))):(t(),s("button",{key:1,onClick:_[1]||(_[1]=J=>H("dark")),class:"dropdown-item"},_[12]||(_[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),j("Light Mode ")])))]),_[13]||(_[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,L(Z.bootswatch.themes,J=>(t(),s("li",null,[e("button",{onClick:d=>P(J.cssCdn),class:le(["dropdown-item",{active:Z.currentTheme===J.cssCdn}])},v(J.name),11,ho)]))),256))])]),e("li",_o,[e("a",ko,[e("span",null,[_[15]||(_[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(z)?(t(),s("span",To,v(o(z).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Io,[o(z)?(t(),s("li",Co,[e("button",{onClick:_[2]||(_[2]=J=>c()),class:"dropdown-item"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),j("Logout ")]))])):(t(),s("li",xo,[N(G,{to:"/accounts/login",class:"dropdown-item"},{default:E(()=>_[17]||(_[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),j("Login ")])),_:1})]))])])])])])])]),_:1})}}},Po={class:"d-flex flex-column text-bg-dark"},Oo={class:"navbar bg-primary bg-gradient shadow","data-bs-theme":"dark"},Ao={class:"navbar-brand me-0 mb-1 px-0 px-md-2"},Uo={class:"d-none d-md-inline"},Do={class:"nav nav-pills flex-column mb-auto h-100 px-1"},Ho={class:"nav-item mt-3"},Lo={class:"nav-item"},Eo={class:"nav-item"},qo={class:"nav-item"},Bo={class:"nav-item"},No={class:"nav-item"},Ro={class:"nav-item dropdown"},Fo={class:"dropdown-menu overflow-y-auto","aria-labelledby":"dropdown01"},zo=["onClick"],Go={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(l){const{isActive:p,getCurrentBsTheme:h,changeBsTheme:x,getBootswatch:k,changeTheme:A,navigate:C,collapseNavbar:F}=We(),R=me({bsTheme:"dark",currentTheme:"",bootswatch:{}});de(async()=>{const Z=R;Z.bootswatch=await k();const P=h(Z.bsTheme);P&&(Z.bsTheme=P,x(Z.bsTheme));const H=localStorage.getItem("bootswatch-theme");H&&(Z.currentTheme=H,A(H))});const V=Z=>{A(Z),R.currentTheme=Z,F()},z=Z=>{x(Z),R.bsTheme=Z,F()};return(Z,P)=>{const H=ee("router-link");return t(),s("div",Po,[e("nav",Oo,[N(H,{to:"/",class:"text-decoration-none w-100 text-center"},{default:E(()=>[e("h1",Ao,[P[2]||(P[2]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Uo,v(l.appName),1)])]),_:1})]),e("ul",Do,[e("li",Ho,[N(H,{to:"/videos",onClick:o(F),class:"nav-link"},{default:E(()=>P[3]||(P[3]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Videos",-1)])),_:1},8,["onClick"])]),e("li",Lo,[N(H,{to:"/source-groups",onClick:o(F),class:"nav-link"},{default:E(()=>P[4]||(P[4]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Groups",-1)])),_:1},8,["onClick"])]),e("li",Eo,[N(H,{to:"/source-locations",onClick:o(F),class:"nav-link"},{default:E(()=>P[5]||(P[5]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Locations",-1)])),_:1},8,["onClick"])]),e("li",qo,[N(H,{to:"/vod-sources",onClick:o(F),class:"nav-link"},{default:E(()=>P[6]||(P[6]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"VODs",-1)])),_:1},8,["onClick"])]),e("li",Bo,[N(H,{to:"/program-templates",onClick:o(F),class:"nav-link"},{default:E(()=>P[7]||(P[7]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Program Templates",-1)])),_:1},8,["onClick"])]),e("li",No,[N(H,{to:"/channels",onClick:o(F),class:"nav-link"},{default:E(()=>P[8]||(P[8]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Channels",-1)])),_:1},8,["onClick"])]),e("li",Ro,[P[12]||(P[12]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-md-inline ms-1"},"Themes")],-1)),e("ul",Fo,[e("li",null,[R.bsTheme==="dark"?(t(),s("button",{key:0,onClick:P[0]||(P[0]=c=>z("light")),class:"dropdown-item"},P[9]||(P[9]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),j("Dark Mode ")]))):(t(),s("button",{key:1,onClick:P[1]||(P[1]=c=>z("dark")),class:"dropdown-item"},P[10]||(P[10]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),j("Light Mode ")])))]),P[11]||(P[11]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,L(R.bootswatch.themes,c=>(t(),s("li",null,[e("button",{onClick:T=>V(c.cssCdn),class:le(["dropdown-item",{active:R.currentTheme===c.cssCdn}])},v(c.name),11,zo)]))),256))])])])])}}},jo={class:"footer sticky-bottom"},Yo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},Wo={class:"container-md"},Ko={class:"navbar-text small p-0"},Jo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(l){We();const p=Se("$config"),x=be().user;let A=new Date().getFullYear();const C=me({user:x,username:x?x.nameFull:"Guest",copyright:`2020-${A} ${p.appName}`});return de(async()=>{}),(F,R)=>(t(),s("footer",jo,[e("div",Yo,[e("div",Wo,[e("span",Ko,"©"+v(C.copyright),1)])])]))}},Qo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ye.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(l){l.message&&this.addMessage(l.title,l.message,l.type,l.options)},async addMessage(l,p,h,x={}){var k={id:this.count++,title:l,message:p,type:h,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};k=Object.assign({},k,x),this.messages.unshift(k),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),k.timeOut>0&&await this.startTimeout(k)},async startTimeout(l,p=0){const h=this,x=performance.now(),k=async()=>{l.animationFrame=requestAnimationFrame(async A=>{const C=A+p-x;if(!h.exists(l)||l.paused){cancelAnimationFrame(l.animationFrame);return}else if(C<l.timeOut){const F=C/l.timeOut;l.progress=F,await k()}else{l.progress=1,cancelAnimationFrame(l.animationFrame),h.remove(l);return}})};await k()},pauseProgress(l){l.timeOut<=0||(l.paused=!0)},async resumeProgress(l){l.timeOut<=0||(l.paused=!1,await this.startTimeout(l,l.timeOut*l.progress))},getCurrentProgress(l){return Math.round(l.progress*100)===100?100:l.progress*100},getIconClass(l){const p=l.type;let h="";switch(p){case"success":h="fas fa-fw fa-circle-check";break;case"info":h="fas fa-fw fa-circle-info";break;case"warning":h="fas fa-fw fa-circle-exclamation";break;case"danger":h="fas fa-fw fa-triangle-exclamation";break}let x=h;return l.rtl?"icon-right "+x:"icon-left "+x},async remove(l){const p=this.messages.findIndex(h=>h.id===l.id);this.messages.splice(p,1),typeof l.onClose=="function"&&await l.onClose()},exists(l){return this.messages.findIndex(h=>h.id===l.id)!==-1}}},Xo={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Zo=["onMouseover","onMouseout"],ea={class:"me-auto text-white"},ta=["onClick"],sa={class:"toast-body"},oa=["innerHTML"],aa={key:0,class:"progress m-1",style:{height:"4px"}};function la(l,p,h,x,k,A){return t(),ce(fe,null,{default:E(()=>[e("div",Xo,[N(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:E(()=>[(t(!0),s(O,null,L(k.messages,C=>(t(),s("div",{key:C.id,class:le(["toast show mb-2 ms-auto",`border-${C.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:F=>A.pauseProgress(C),onMouseout:F=>A.resumeProgress(C)},[e("div",{class:le(["toast-header",`bg-${C.type}`])},[e("strong",ea,[e("i",{class:le([A.getIconClass(C),"me-1"])},null,2),j(v(C.title),1)]),C.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:F=>A.remove(C)},p[0]||(p[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ta)):U("",!0)],2),e("div",sa,[e("div",{innerHTML:C.message},null,8,oa)]),C.timeOut>0&&C.showProgress?(t(),s("div",aa,[e("div",{class:le(`bg-${C.type}`),style:at({width:A.getCurrentProgress(C)+"%"})},null,6)])):U("",!0)],42,Zo))),128))]),_:1})])]),_:1})}const na=Me(Qo,[["render",la],["__scopeId","data-v-5272bd9a"]]),ra={name:"AdminLayout",components:{TopNav:Vo,SideNav:Go,BottomNav:Jo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},ia={class:"d-flex flex-row vh-100"},da={class:"d-flex flex-column w-100"};function ua(l,p,h,x,k,A){const C=ee("Toasts"),F=ee("SideNav"),R=ee("router-view");return t(),s("div",ia,[N(C),N(F),e("div",da,[N(R,{class:"vh-100 overflow-y-auto"})])])}const ca=Me(ra,[["render",ua]]),ma={class:"mt-2 container-md"},fa={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},pa=["innerHTML"],va={class:"row gx-2 mb-3"},ga={class:"col-md-4"},ba=["id"],ya={class:"col-md-8 overflow-x-auto"},$a={class:"d-flex flex-column align-items-start"},wa=["src"],ha={class:""},_a={class:"d-flex flex-row"},ka={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Sa={class:"text-center"},Ta=["src"],Ma={class:"text-end"},Ia={class:"text-wrap text-truncate"},Ca={class:"overflow-y-auto"},xa={class:"badge bg-info me-2"},Va={key:0,class:"badge bg-warning mb-1"},Pa={class:"row mt-3 d-none"},Oa={class:"col-12 col-sm-6 offset-sm-3"},Aa={class:"card"},Ua={class:"card-body"},Da={class:"card card-body mb-2 d-none"},Ha={key:0,class:"fas fa-fw fa-circle-check text-success"},La={key:1,class:"fas fa-fw fa-times-circle text-danger"},Ea={key:0,class:"fas fa-fw fa-circle-check text-success"},qa={key:1,class:"fas fa-fw fa-times-circle text-danger"},Ba={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,isDirty:k,validations:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,generateReturnUrl:c,security:T}=ve({appTitle:"ARC AIO",pageTitle:"Dashboard"});Se("$config"),be().user;const G=me({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),de(async()=>{await g()});const J=async()=>{const M=G;if(!x.value)try{x.value=!0;const f="/api/v1/channels/epg/";M.item=[],await z.get(f).then(S=>{M.item=S.data}),M.item.forEach(S=>{Y(S)})}catch(f){R.value=Z.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{x.value=!1}},d=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await z.get("/api/v1/channels/reset/").then(S=>{P.success("Reset All Data","Reset data was successful.")})}catch(f){R.value=Z.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{x.value=!1}},g=async()=>{await J()},Y=M=>{if(M.manifestUrl&&Hls.isSupported()){b(M);var f=document.getElementById(`video-${M.id}`);if(!f)return;M.hls&&M.hls.destroy(),M.hls=Z.createHlsStream(f,M.manifestUrl);return}},b=M=>{M.outputs&&M.outputs.forEach(S=>{if(S.hls){debugger;S.hls.detachMedia(),S.hls.destroy(),delete S.hls}S.playbackConfigurations.forEach(I=>{if(I.hls){debugger;I.hls.detachMedia(),I.hls.destroy(),delete I.hls}})})};return(M,f)=>{const S=ee("PageHeader"),I=ee("router-link");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(h)},{default:E(()=>[e("button",{onClick:f[0]||(f[0]=u=>d()),class:"ms-2 btn btn-danger"},f[2]||(f[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),j("Reset All Data ")])),e("button",{onClick:f[1]||(f[1]=u=>g()),class:"ms-2 btn btn-secondary"},f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))]),_:1},8,["pageTitle"]),e("div",ma,[o(R)?(t(),s("div",fa,[f[4]||(f[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(R))},null,8,pa)])):U("",!0),(t(!0),s(O,null,L(G.item,u=>(t(),s("div",null,[e("div",va,[e("div",ga,[u.manifestUrl?(t(),s("video",{key:0,id:`video-${u.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,ba)):U("",!0)]),e("div",ya,[e("div",$a,[e("div",null,[e("h4",null,[e("img",{src:u.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,wa),N(I,{to:`${l.urlViewChannel}/${u.id}/${o(c)()}`},{default:E(()=>[j(v(u.title),1)]),_:2},1032,["to"])])]),e("div",ha,[e("div",_a,[(t(!0),s(O,null,L(u.programs,i=>(t(),s("div",ka,[e("div",Sa,[e("img",{src:i.image,class:"img-fluid border",style:{height:"64px"}},null,8,Ta)]),e("div",Ma,v(o(Z).moment(i.since).format("hh:mm a"))+"-"+v(o(Z).moment(i.till).format("hh:mm a")),1),e("div",Ia,v(i.title),1),e("div",Ca,[(t(!0),s(O,null,L(i.genres,a=>(t(),s("span",xa,v(a),1))),256))]),o(Z).moment().isAfter(i.since)&&o(Z).moment().isBefore(i.till)?(t(),s("span",Va,"Now Playing")):U("",!0)]))),256))])])])])])]))),256)),e("div",Pa,[e("div",Oa,[e("div",Aa,[f[14]||(f[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",Ua,[e("ol",null,[f[8]||(f[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[N(I,{to:`/videos/add/${o(c)()}`},{default:E(()=>f[5]||(f[5]=[j(" Create a Video. ")])),_:1},8,["to"])]),f[9]||(f[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[N(I,{to:"/program-templates/add"},{default:E(()=>f[6]||(f[6]=[j(" ut Create Program Template. ")])),_:1}),f[7]||(f[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup theclip ranges.li"),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),f[10]||(f[10]=e("li",null,[j(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),f[11]||(f[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),f[12]||(f[12]=e("li",null," Publish Channel. ",-1)),f[13]||(f[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",Da,[f[17]||(f[17]=j(" Security ")),e("ul",null,[e("li",null,[o(T).isAdministrator?(t(),s("span",Ha)):(t(),s("span",La)),f[15]||(f[15]=j(" Administrator "))]),e("li",null,[o(T).isEmployee?(t(),s("span",Ea)):(t(),s("span",qa)),f[16]||(f[16]=j(" Employee "))])])])])])]),_:1})}}};function He(l){if(!l.cacheKey)throw Error("Cache Key required.");if(!l.baseUrl)throw Error("Base Url required.");const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,closeWithReturnUrl:P,generateReturnUrl:H,security:c}=ve({appTitle:l.appTitle,pageTitle:l.pageTitle}),T=JSON.parse(JSON.stringify(l.filter));T.pageIndex=T.pageIndex||1,T.pageSize=T.pageSize||5,T.sortField=T.sortField||"",T.sortOrder=T.sortOrder||1,T.updateUrl=T.updateUrl||!1,T.items=T.items||[],T.query=T.query||{},T.query.criteria=T.query.criteria||"";const _=re(T),G=()=>{var u;if(x.value){console.log("Paginated search is currently busy.");return}const f=JSON.parse(localStorage.getItem(l.cacheKey))||{},S=new URLSearchParams(window.location.search),I=_.value;I.query.criteria=S.get("c")||f.criteria||I.query.criteria||"",I.pageIndex=parseInt(S.get("p"),10)||f.pageIndex||I.pageIndex||1,I.pageSize=parseInt(S.get("s"),10)||f.pageSize||I.pageSize||5,I.sortField=S.get("sf")||f.sortField||I.sortField||"",I.sortOrder=parseInt(S.get("so"),10)||f.sortOrder||I.sortOrder||1,I.visible=f.visible||I.visible,(u=l.initializeFilter)==null||u.call(l,_,l.cacheKey)},J=()=>{if(l.getQuery)return l.getQuery(_.value);{const f=_.value;return["?c=",encodeURIComponent(f.query.criteria),"&p=",f.pageIndex,"&s=",f.pageSize,"&sf=",f.sortField,"&so=",f.sortOrder].join("")}},d=()=>{if(l.saveQuery)l.saveQuery(_.value,l.cacheKey);else{const f=_.value;localStorage.setItem(l.cacheKey,JSON.stringify({criteria:f.query.criteria,pageIndex:f.pageIndex,pageSize:f.pageSize,sortField:f.sortField,sortOrder:f.sortOrder,visible:f.visible}))}};return{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,closeWithReturnUrl:P,generateReturnUrl:H,security:c,filter:_,initializeFilter:G,getQuery:J,saveQuery:d,search:async f=>{var I;let S=_.value;if(x.value){console.log("Paginated search is currently busy.");return}f>0&&(S.pageIndex=f);try{x.value=!0,C.value="";const u=J();S.selected=null,await R(`${l.baseUrl}/${u}`).then(async i=>{var r;Array.isArray(i.data)?S.items=i.data:S=Object.assign(S,i.data);let a=location.pathname;a.endsWith("/")?a+=u:a+="/"+u,S.updateUrl&&window.history.replaceState(u,`${p}-search`,a),S.items.forEach($=>{$.expand=!1}),d(),(r=l.successAction)==null||r.call(l,_.value)})}catch(u){if(localStorage.removeItem(l.cacheKey),l.failAction)l.failAction(u);else{const i=V.getErrorMessageAsHtml(u);C.value=i,z.error("Error Occured",i)}}finally{x.value=!1,(I=l.finalAction)==null||I.call(l)}},getRowNumber:f=>{const S=_.value;return(S.pageIndex-1)*S.pageSize+(f+1)},setSelected:f=>{const S=_.value;S.selected&&f&&S.selected===f?S.selected=null:(S.selected&&(S.selected.expand=!1),S.selected=f,S.selected.expand=!0)},isSelected:f=>{const S=_.value;return f===null||S.selected===null?!1:f===S.selected}}}const Na=["disabled"],Ra={class:"row row-cols-1 row-cols-sm-3"},Fa={class:"col"},za={class:"form-floating mb-2"},Ga={key:0,class:"d-block invalid-feedback"},ja={class:"col"},Ya={class:"form-floating"},Wa={class:"col"},Ka={class:"form-floating"},Ja={class:"col"},Qa={class:"form-floating mb-2"},Xa={class:"row row-cols-1 row-cols-sm-2"},Za={class:"col"},el={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},tl={class:"col"},sl={class:"form-check"},ol=["onUpdate:modelValue","id"],al=["for"],ll={class:"col"},nl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},rl={class:"col"},il={class:"form-check"},dl=["onUpdate:modelValue","id"],ul=["for"],cl={class:"table-responsive mt-2"},ml={class:"text-end"},fl={class:"table table-sm mb-0 mt-2"},pl={class:"align-middle"},vl={class:"text-center"},gl=["onUpdate:modelValue"],bl=["onUpdate:modelValue"],yl=["onUpdate:modelValue"],$l={class:"text-start"},wl=["onClick"],hl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),H=l,c=me({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:V.moment().format("YYYY-MM-DD"),formats:[]}}),T={item:{title:{title:te.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("Duration is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:te.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},_=ye(T,c),G=he(()=>{const b=V.moment;if(c.durationTime&&c.durationTime!=="00:00:00"&&V.isValidTime(c.durationTime)){const M=b().startOf("day"),f=M.format("YYYY-MM-DD ")+c.durationTime,I=b(f).subtract(M);return c.item.durationInMillis=I.valueOf(),c.item.durationInMillis}return 0});de(async()=>{await d()});const J=async()=>{const b=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const f=V.clone(b.item);f.durationInMillis=G.value;const S=V.moment(b.item.dateReleased).utc(!0).format();f.dateReleased=S;const I=c.lookups.genres.filter(i=>i.selected).map(i=>i.id);f.genres=I;const u=c.lookups.categories.filter(i=>i.selected).map(i=>i.id);f.categories=u;debugger;await R.post("/api/v1/videos/",f).then(i=>{z.success("Add Video","Video added",{onClose:async()=>{const a=`${H.urlView}/${i.data}`;await F.push(a)}})})}catch(f){C.value=V.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{x.value=!1}},d=async()=>{try{await R.get("/api/v1/lookups/video-genres/").then(b=>{const f=b.data.filter(S=>S.id!==0);c.lookups.genres=f})}catch(b){C.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},g=()=>{const b={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};c.item.formats.push(b)},Y=b=>{c.item.formats.splice(b,1)};return(b,M)=>{const f=ee("router-link"),S=ee("PageHeader"),I=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-video",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:M[0]||(M[0]=u=>J()),class:"btn btn-primary"},M[6]||(M[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Na),N(f,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>M[7]||(M[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(I,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[e("div",null,[e("div",Ra,[e("div",Fa,[e("div",za,[q(e("input",{"onUpdate:modelValue":M[1]||(M[1]=u=>c.item.title=u),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Q,c.item.title]]),M[8]||(M[8]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(_).item.title.$error?(t(),s("div",Ga,[(t(!0),s(O,null,L(o(_).item.title.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",ja,[e("div",Ya,[q(e("input",{"onUpdate:modelValue":M[2]||(M[2]=u=>c.item.dateReleased=u),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Q,c.item.dateReleased]]),M[9]||(M[9]=e("label",{for:"dateReleased",class:"small fw-bold"},"Date Released",-1))])]),e("div",Wa,[e("div",Ka,[q(e("input",{"onUpdate:modelValue":M[3]||(M[3]=u=>c.durationTime=u),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Q,c.durationTime]]),M[10]||(M[10]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Ja,[e("div",Qa,[q(e("textarea",{"onUpdate:modelValue":M[4]||(M[4]=u=>c.item.description=u),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Q,c.item.description]]),M[11]||(M[11]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Xa,[e("div",Za,[M[12]||(M[12]=e("h5",null,"Genres",-1)),e("div",el,[(t(!0),s(O,null,L(c.lookups.genres,u=>(t(),s("div",tl,[e("div",sl,[q(e("input",{"onUpdate:modelValue":i=>u.selected=i,class:"form-check-input",type:"checkbox",id:u.name},null,8,ol),[[Ue,u.selected]]),e("label",{class:"form-check-label",for:u.name},v(u.name),9,al)])]))),256))])]),e("div",ll,[M[13]||(M[13]=e("h5",null,"Categories",-1)),e("div",nl,[(t(!0),s(O,null,L(c.lookups.categories,u=>(t(),s("div",rl,[e("div",il,[q(e("input",{"onUpdate:modelValue":i=>u.selected=i,class:"form-check-input",type:"checkbox",id:u.name},null,8,dl),[[Ue,u.selected]]),e("label",{class:"form-check-label",for:u.name},v(u.name),9,ul)])]))),256))])])]),e("div",cl,[e("div",ml,[e("button",{onClick:M[5]||(M[5]=u=>g()),class:"btn btn-outline-primary btn-sm"},M[14]||(M[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",fl,[M[17]||(M[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.formats,(u,i)=>(t(),s("tr",pl,[e("td",vl,v(i+1),1),e("td",null,[q(e("select",{"onUpdate:modelValue":a=>u.format=a,class:"form-control"},M[15]||(M[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,gl),[[ue,u.format]])]),e("td",null,[q(e("input",{"onUpdate:modelValue":a=>u.serverUrl=a,type:"text",class:"form-control"},null,8,bl),[[Q,u.serverUrl]])]),e("td",null,[q(e("input",{"onUpdate:modelValue":a=>u.path=a,type:"text",class:"form-control"},null,8,yl),[[Q,u.path]])]),e("td",$l,[e("button",{onClick:a=>Y(i),class:"btn btn-outline-warning btn-sm"},M[16]||(M[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,wl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},_l=["disabled"],kl={class:"row row-cols-1 row-cols-sm-3"},Sl={class:"col"},Tl={class:"form-floating mb-2"},Ml={key:0,class:"d-block invalid-feedback"},Il={class:"col"},Cl={class:"form-floating"},xl={class:"col"},Vl={class:"form-floating"},Pl={class:"col"},Ol={class:"form-floating mb-2"},Al={class:"col"},Ul={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Dl={class:"col"},Hl={class:"form-check"},Ll=["onUpdate:modelValue","id"],El=["for"],ql={class:"col"},Bl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Nl={class:"col"},Rl={class:"form-check"},Fl=["onUpdate:modelValue","id"],zl=["for"],Gl={class:"table-responsive mt-2"},jl={class:"text-end"},Yl={class:"table table-sm mb-0 mt-2"},Wl={class:"align-middle"},Kl={class:"text-center"},Jl=["onUpdate:modelValue"],Ql=["value"],Xl=["onUpdate:modelValue"],Zl=["onUpdate:modelValue"],en={class:"text-start"},tn=["onClick"],sn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),H=l,c=me({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),T={item:{title:{title:te.withMessage("title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("durationInMillis is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:te.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},_=ye(T,c),G=he(()=>{const f=V.moment;if(c.durationTime&&c.durationTime!=="00:00:00"&&V.isValidTime(c.durationTime)){const S=f().startOf("day"),I=S.format("YYYY-MM-DD ")+c.durationTime,i=f(I).subtract(S);return c.item.durationInMillis=i.valueOf(),c.item.durationInMillis}return 0});de(async()=>{await d(),await g(),await J()});const J=async()=>{try{await R.get(`/api/v1/videos/${H.id}/`).then(f=>{c.item=f.data;const S=V.moment(c.item.dateReleased).format("YYYY-MM-DD");c.item.dateReleased=S;const I=c.lookups.genres,u=c.item.genres.map(r=>r.genre);I.forEach(r=>{r.selected=u.includes(r.id)});const i=c.lookups.categories,a=c.item.categories.map(r=>r.category);i.forEach(r=>{r.selected=a.includes(r.id)})})}catch(f){C.value=V.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},d=async()=>{try{await R.get("/api/v1/lookups/video-genres/").then(f=>{const I=f.data.filter(u=>u.id!==0);c.lookups.genres=I})}catch(f){C.value=V.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},g=async()=>{try{await R.get("/api/v1/lookups/video-formats/").then(f=>{const I=f.data.filter(u=>u.id!==0);c.lookups.formats=I})}catch(f){C.value=V.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},Y=async()=>{const f=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const I=V.clone(f.item);I.durationInMillis=G.value;const u=V.moment(f.item.dateReleased).utc(!0).format();I.dateReleased=u;const i=c.lookups.genres.filter(r=>r.selected).map(r=>r.id);I.genres=i;const a=c.lookups.categories.filter(r=>r.selected).map(r=>r.id);I.categories=a;debugger;await R.put("/api/v1/videos/",I).then(r=>{z.success("Edit Video","Video edited.",{onClose:async()=>{const $=`${H.urlView}/${H.id}`;await F.push($)}})})}catch(I){C.value=V.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{x.value=!1}},b=()=>{const f={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};c.item.formats.push(f)},M=f=>{c.item.formats.splice(f,1)};return(f,S)=>{const I=ee("router-link"),u=ee("PageHeader"),i=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(u,{"page-icon":"fas fa-fw fa-video",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:S[0]||(S[0]=a=>Y()),class:"btn btn-primary"},S[6]||(S[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_l),e("button",{onClick:J,class:"btn btn-secondary ms-2"},S[7]||(S[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(I,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-2"},{default:E(()=>S[8]||(S[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(i,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[e("div",null,[e("div",kl,[e("div",Sl,[e("div",Tl,[q(e("input",{"onUpdate:modelValue":S[1]||(S[1]=a=>c.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Q,c.item.title]]),S[9]||(S[9]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(_).item.title.$error?(t(),s("div",Ml,[(t(!0),s(O,null,L(o(_).item.title.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])]),e("div",Il,[e("div",Cl,[q(e("input",{"onUpdate:modelValue":S[2]||(S[2]=a=>c.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Q,c.item.dateReleased]]),S[10]||(S[10]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",xl,[e("div",Vl,[q(e("input",{"onUpdate:modelValue":S[3]||(S[3]=a=>c.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Q,c.durationTime]]),S[11]||(S[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Pl,[e("div",Ol,[q(e("textarea",{"onUpdate:modelValue":S[4]||(S[4]=a=>c.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Q,c.item.description]]),S[12]||(S[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Al,[S[13]||(S[13]=e("h5",null,"Genres",-1)),e("div",Ul,[(t(!0),s(O,null,L(c.lookups.genres,a=>(t(),s("div",Dl,[e("div",Hl,[q(e("input",{"onUpdate:modelValue":r=>a.selected=r,class:"form-check-input",type:"checkbox",id:a.name},null,8,Ll),[[Ue,a.selected]]),e("label",{class:"form-check-label",for:a.name},v(a.name),9,El)])]))),256))])]),e("div",ql,[S[14]||(S[14]=e("h5",null,"Categories",-1)),e("div",Bl,[(t(!0),s(O,null,L(c.lookups.categories,a=>(t(),s("div",Nl,[e("div",Rl,[q(e("input",{"onUpdate:modelValue":r=>a.selected=r,class:"form-check-input",type:"checkbox",id:a.name},null,8,Fl),[[Ue,a.selected]]),e("label",{class:"form-check-label",for:a.name},v(a.name),9,zl)])]))),256))])]),e("div",Gl,[e("div",jl,[e("button",{onClick:S[5]||(S[5]=a=>b()),class:"btn btn-outline-primary btn-sm"},S[15]||(S[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Yl,[S[17]||(S[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.formats,(a,r)=>(t(),s("tr",Wl,[e("td",Kl,v(r+1),1),e("td",null,[q(e("select",{"onUpdate:modelValue":$=>a.format=$,class:"form-control"},[(t(!0),s(O,null,L(c.lookups.formats,$=>(t(),s("option",{value:$.id},v($.name),9,Ql))),256))],8,Jl),[[ue,a.format]])]),e("td",null,[q(e("input",{"onUpdate:modelValue":$=>a.serverUrl=$,type:"text",class:"form-control"},null,8,Xl),[[Q,a.serverUrl]])]),e("td",null,[q(e("input",{"onUpdate:modelValue":$=>a.path=$,type:"text",class:"form-control"},null,8,Zl),[[Q,a.path]])]),e("td",en,[e("button",{onClick:$=>M(r),class:"btn btn-outline-warning btn-sm"},S[16]||(S[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,tn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},on={class:"ms-2"},an={class:"input-group"},ln=["value"],nn={class:"ms-1"},rn={class:"input-group"},dn={class:"ms-1"},un={class:"input-group"},cn={class:"table-responsive border shadow-sm"},mn={class:"table table-hover mb-0"},fn=["textContent"],pn={class:"d-flex flex-row justify-content-start"},vn={class:"mt-1"},gn=["src"],bn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},yn={class:"ms-2"},$n={key:0},wn={class:"badge bg-primary me-1"},hn={key:0},_n={class:"badge bg-info me-1"},kn={class:"text-center"},Sn={class:"text-end"},Tn=["onClick"],Mn={key:0,class:"fas fa-fw fa-chevron-circle-up"},In={key:1,class:"fas fa-fw fa-chevron-circle-down"},Cn={key:0},xn={colspan:"999"},Vn={class:""},Pn={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},On={class:"col mb-2"},An={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},Un={class:"col col-lg-auto mb-2"},Dn={key:0},Hn={class:"badge bg-secondary me-1"},Ln="/api/v1/videos/search",En={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(l){Se("$config");const h=be().user,{appTitle:x,pageTitle:k,busy:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,security:c,filter:T,initializeFilter:_,getQuery:G,saveQuery:J,search:d,getRowNumber:g,setSelected:Y,isSelected:b}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${h==null?void 0:h.userId}/videos/search`,baseUrl:Ln,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(f,S)=>{const I=f.value,u=new URLSearchParams(window.location.search),i=JSON.parse(localStorage.getItem(S))||{};I.query.genre=u.get("genre")||i.genre||I.query.genre||0,I.query.category=u.get("category")||i.category||I.query.category||0},getQuery:f=>["?c=",encodeURIComponent(f.query.criteria),"&p=",f.pageIndex,"&s=",f.pageSize,"&sf=",f.sortField,"&so=",f.sortOrder,"&genre=",f.query.genre,"&category=",f.query.category].join(""),saveQuery:(f,S)=>{localStorage.setItem(S,JSON.stringify({criteria:f.query.criteria,pageIndex:f.pageIndex,pageSize:f.pageSize,sortField:f.sortField,sortOrder:f.sortOrder,visible:f.visible,genre:f.query.genre,category:f.query.category}))}});de(async()=>{_(),await M(),await d()});const M=async()=>{try{await z.get("/api/v1/lookups/video-genres/").then(f=>{const S=f.data;T.value.lookups.genres=S})}catch(f){R.value=Z.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}};return(f,S)=>{const I=ee("router-view"),u=ee("router-link"),i=ee("PageHeader"),a=ee("m-pagination"),r=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(I),N(i,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:E(()=>[N(u,{to:l.urlAdd,class:"btn btn-primary"},{default:E(()=>S[5]||(S[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",on,[e("div",an,[S[6]||(S[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),q(e("select",{"onUpdate:modelValue":S[0]||(S[0]=$=>o(T).query.genre=$),class:"form-select"},[(t(!0),s(O,null,L(o(T).lookups.genres,$=>(t(),s("option",{value:$.id},v($.name),9,ln))),256))],512),[[ue,o(T).query.genre]])])]),e("div",nn,[e("div",rn,[S[8]||(S[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),q(e("select",{"onUpdate:modelValue":S[1]||(S[1]=$=>o(T).query.category=$),class:"form-select"},S[7]||(S[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(T).query.category]])])]),e("div",dn,[e("div",un,[q(e("input",{"onUpdate:modelValue":S[2]||(S[2]=$=>o(T).query.criteria=$),onKeyup:S[3]||(S[3]=De($=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:S[4]||(S[4]=$=>o(d)(1))},S[9]||(S[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(r,{errorMessage:o(R)},{default:E(()=>[e("div",cn,[e("table",mn,[S[14]||(S[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:""},"Genre"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(o(T).items,($,w)=>(t(),s(O,{key:$.videoId},[e("tr",null,[e("td",{textContent:v(o(g)(w)),class:"text-center"},null,8,fn),e("td",null,[e("div",pn,[e("div",null,[$.thumbnails.length>0?(t(!0),s(O,{key:0},L($.thumbnails,m=>(t(),s("div",vn,[e("img",{src:m.url,class:"img-fuild border",width:"128"},null,8,gn)]))),256)):(t(),s("img",bn))]),e("div",yn,[N(u,{to:`${l.urlView}/${$.videoId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[j(v($.title),1)]),_:2},1032,["to"]),e("div",null,[$.categories.length>0?(t(),s("div",$n,[(t(!0),s(O,null,L($.categories,m=>(t(),s("span",wn,v(m.categoryName),1))),256))])):U("",!0)])])])]),e("td",null,[$.genres.length>0?(t(),s("div",hn,[(t(!0),s(O,null,L($.genres,m=>(t(),s("span",_n,v(m.genreName),1))),256))])):U("",!0)]),e("td",kn,v(o(Z).moment.utc($.durationInMillis).format("HH:mm:ss")),1),e("td",Sn,[e("button",{onClick:m=>$.expand=!$.expand,class:le([[$.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[$.expand?(t(),s("span",Mn)):(t(),s("span",In))],10,Tn)])]),$.expand?(t(),s("tr",Cn,[S[13]||(S[13]=e("td",null,null,-1)),e("td",xn,[e("div",Vn,[e("div",Pn,[e("div",On,[S[10]||(S[10]=e("h6",{class:"fw-bold"},"Description",-1)),e("div",null,v($.description),1)]),e("div",An,[S[11]||(S[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,v(o(Ze).utc($.dateReleased).format("l")),1)]),e("div",Un,[S[12]||(S[12]=e("h6",{class:"fw-bold"},"Formats",-1)),$.formats.length>0?(t(),s("div",Dn,[(t(!0),s(O,null,L($.formats,m=>(t(),s("span",Hn,v(m.formatName),1))),256))])):U("",!0)])])])])])):U("",!0)],64))),128))]),_:1},512),[[Te,o(T).items.length>0]])])]),N(a,{filter:o(T),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},qn={key:0},Bn={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Nn={class:"nav-item",role:"presentation"},Rn={class:"nav-item",role:"presentation"},Fn={class:"nav-item",role:"presentation"},zn={class:"nav-item",role:"presentation"},Gn={class:"tab-content",id:"myTabContent"},jn={class:"mt-2"},Yn={class:"row row-cols-1 row-cols-sm-2"},Wn={class:"col"},Kn=["id"],Jn={class:"text-end"},Qn={class:"col"},Xn={class:"col"},Zn={class:"form-floating mb-2"},er={class:"row row-cols-1 row-cols-sm-2"},tr={class:"col"},sr={class:"form-floating mb-2"},or={class:"col"},ar={class:"form-floating mb-2"},lr={class:"col"},nr={class:"form-floating mb-2"},rr={class:"mt-1"},ir={class:"badge bg-info me-1"},dr={class:"badge bg-primary me-1"},ur={class:"mt-2"},cr={class:"table-responsive border"},mr={class:"table table-hover mb-0"},fr={class:"table-group-divider"},pr={class:"align-middle"},vr={class:"text-center"},gr={class:"mt-2"},br={class:"text-end"},yr={class:"table-responsive border mt-2"},$r={class:"table table-hover mb-0 caption-top"},wr={class:"mt-2"},hr={class:"table-responsive"},_r={class:"table table-hover mb-0 caption-top"},kr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(l){const p=l,{appTitle:h,pageTitle:x,busy:k,isDirty:A,validations:C,infoMessage:F,warningMessage:R,errorMessage:V,router:z,axios:Z,utils:P,toasts:H,close:c,closeWithReturnUrl:T,generateReturnUrl:_,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});Se("$config");const J=be();J.user;const d=me({user:J.user,item:null,hls:null}),g=re();de(async()=>{await f(),g.value=P.getPageTab("video")||"information-tab"}),qe(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const Y=i=>{P.setPageTab("video",i),g.value=i},b=i=>i!==g.value?"":"active",M=i=>i!==g.value?"":"show active",f=async()=>{const i=d;if(!k.value)try{k.value=!0,V.value="",d.item=null;const a=`/api/v1/videos/${p.id}/`;await Z.get(a).then(r=>{i.item=r.data,i.item.duration=P.moment.utc(i.item.durationInMillis).format("HH:mm:ss"),i.item.dateReleased=P.moment.utc(i.item.dateReleased).format("ll")}),I()}catch(a){V.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{await f()},I=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),d.hls&&d.hls.destroy();const a=`video-${d.item.videoId}`;var i=document.getElementById(a);const r=d.item.formats.find(w=>w.formatName==="HLS"),$=r.serverUrl+r.path;d.hls=P.createHlsStream(i,$,!1)}},u=async()=>{if(!k.value)try{k.value=!0,V.value="";const i=`/api/v1/videos/${p.id}/get-blank-frames/`;await Z.post(i).then(a=>{}),k.value=!1,await S()}catch(i){V.value=P.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{k.value=!1}};return(i,a)=>{const r=ee("router-link"),$=ee("PageHeader"),w=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N($,{"page-icon":"fas fa-fw fa-video",pageTitle:o(x)},{default:E(()=>[N(r,{to:`${l.urlAddVodSource}/${o(_)()}&videoId=${l.id}`,class:"btn btn-primary"},{default:E(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-plus"},null,-1),j("Create VOD ")])),_:1},8,["to"]),N(r,{to:`${l.urlEdit}/${l.id}`,class:"btn btn-primary ms-1"},{default:E(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=m=>S()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=m=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(w,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",qn,[e("div",null,[e("ul",Bn,[e("li",Nn,[e("button",{onClick:a[2]||(a[2]=m=>Y("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Rn,[e("button",{onClick:a[3]||(a[3]=m=>Y("formats-tab")),class:le([b("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",Fn,[e("button",{onClick:a[4]||(a[4]=m=>Y("blankFrames-tab")),class:le([b("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",zn,[e("button",{onClick:a[5]||(a[5]=m=>Y("vodSources-tab")),class:le([b("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",Gn,[e("div",{class:le([M("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",jn,[e("div",Yn,[e("div",Wn,[e("video",{id:`video-${d.item.videoId}`,controls:"",muted:"",autoplay:"",class:"card-img-top object-fit-contain border"},null,8,Kn),e("div",Jn,[e("button",{onClick:a[6]||(a[6]=m=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},a[16]||(a[16]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])]),e("div",Qn,[e("div",Xn,[e("div",Zn,[q(e("input",{"onUpdate:modelValue":a[7]||(a[7]=m=>d.item.title=m),type:"text",class:"form-control",id:"title",placeholder:"Title",readonly:""},null,512),[[Q,d.item.title]]),a[17]||(a[17]=e("label",{for:"title"},"Title",-1))])]),e("div",er,[e("div",tr,[e("div",sr,[q(e("input",{"onUpdate:modelValue":a[8]||(a[8]=m=>d.item.dateReleased=m),type:"text",class:"form-control",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Q,d.item.dateReleased]]),a[18]||(a[18]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",or,[e("div",ar,[q(e("input",{"onUpdate:modelValue":a[9]||(a[9]=m=>d.item.duration=m),type:"text",class:"form-control",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Q,d.item.duration]]),a[19]||(a[19]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",lr,[e("div",nr,[q(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=m=>d.item.description=m),type:"text",class:"form-control",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Q,d.item.description]]),a[20]||(a[20]=e("label",{for:"description"},"Description",-1))])]),e("div",rr,[(t(!0),s(O,null,L(d.item.genres,m=>(t(),s("span",ir,v(m.genreName),1))),256)),(t(!0),s(O,null,L(d.item.categories,m=>(t(),s("span",dr,v(m.categoryName),1))),256))])])])])],2),e("div",{class:le([M("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",ur,[e("div",cr,[e("table",mr,[a[21]||(a[21]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",fr,[(t(!0),s(O,null,L(d.item.formats,(m,X)=>(t(),s("tr",pr,[e("td",vr,v(X+1),1),e("td",null,v(m.formatName),1),e("td",null,v(m.serverUrl),1),e("td",null,v(m.path),1)]))),256))])])])])],2),e("div",{class:le([M("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",gr,[e("div",null,[e("div",br,[e("button",{onClick:a[11]||(a[11]=m=>u()),class:"btn btn-outline-primary btn-sm"},a[22]||(a[22]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),j("Process ")]))]),e("div",yr,[e("table",$r,[a[23]||(a[23]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.blankFrames,(m,X)=>(t(),s("tr",{key:m.videoBlankFrameId},[e("td",null,v(X+1),1),e("td",null,v(o(P).moment.utc(m.startInMillis).format("HH:mm:ss")),1),e("td",null,v(o(P).moment.utc(m.endInMillis).format("HH:mm:ss")),1),e("td",null,v(o(P).moment.utc(m.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,d.item.blankFrames.length>0]])])])])])],2),e("div",{class:le([M("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",wr,[e("div",hr,[e("table",_r,[a[24]||(a[24]=e("caption",null,"VOD Sources",-1)),a[25]||(a[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.vodSources,(m,X)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,v(X+1),1),e("td",null,[N(r,{to:`${p.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(_)()}`},{default:E(()=>[j(v(m.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,d.item.vodSources.length>0]])])])])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Sr=["disabled"],Tr={class:"form-floating mb-2"},Mr={key:0,class:"d-block invalid-feedback"},Ir={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),H=l,c=me({lookups:{},item:{name:null}}),T={item:{name:{required:te.withMessage("name is required.",oe),$autoDirty:!0,$lazy:!0}}},_=ye(T,c);de(async()=>{});const G=async()=>{const J=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const g=V.clone(J.item);await R.post("/api/v1/sourcegroups/",g).then(Y=>{z.success("Add Source Group","Source group added.",{onClose:async()=>{const b=`${H.urlView}/${Y.data}`;await F.push(b)}})})}catch(g){C.value=V.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{x.value=!1}};return(J,d)=>{const g=ee("router-link"),Y=ee("PageHeader"),b=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(Y,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:d[0]||(d[0]=M=>G()),class:"btn btn-primary"},d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Sr),N(g,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(b,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[e("div",null,[e("div",Tr,[q(e("input",{"onUpdate:modelValue":d[1]||(d[1]=M=>c.item.name=M),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Q,c.item.name]]),d[4]||(d[4]=e("label",{for:"name"},"Name",-1)),o(_).item.name.$error?(t(),s("div",Mr,[(t(!0),s(O,null,L(o(_).item.name.$errors,M=>(t(),s("div",{key:M.$uid},v(M.$message),1))),128))])):U("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Cr={key:0,class:"d-flex justify-content-end"},xr=["disabled"],Vr={key:0},Pr={class:"row row-cols-1 row-cols-sm-2"},Or={class:"col"},Ar={class:"form-floating mb-2"},Ur={key:0,class:"d-block invalid-feedback"},Dr={class:"col"},Hr={class:"form-floating mb-2"},Lr={key:0,class:"d-block invalid-feedback"},Er={class:"row row-cols-sm-2"},qr={class:"col"},Br={class:"form-floating mb-2"},Nr={class:"form-floating mb-2"},Rr={key:0,class:"d-block invalid-feedback"},Fr={class:"form-floating mb-2"},zr={key:0,class:"d-block invalid-feedback"},Gr={class:"col"},jr={class:"form-floating mb-2"},Ke={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),H=l,c=me({editorElementId:"editor",htmlContent:"",item:null}),T={item:{title:{required:te.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},eidr:{required:te.withMessage("eidr is required.",oe),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:te.withMessage("eidrPrefix is required.",oe),$autoDirty:!0,$lazy:!0}},htmlContent:{required:te.withMessage("Content is required.",oe),$autoDirty:!0,$lazy:!0}},_=ye(T,c);de(async()=>{await d()});const G=()=>{const Y=c;var b=document.getElementById(Y.editorElementId);b.innerHTML=Y.htmlContent},J=Y=>{const b=c;b.htmlContent=Y.target.innerHTML;var M=document.getElementById(b.editorElementId);M.value=b.htmlContent},d=async()=>{const Y=c;if(!x.value)try{x.value=!0,c.item=null,await R.get(`/api/v1/movies/${H.id}`).then(b=>{Y.item=b.data,Y.htmlContent=Y.item.description}),G()}catch(b){C.value=V.getErrorMessageAsHtml(b)}finally{x.value=!1}},g=async()=>{const Y=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const M=V.clone(Y.item);M.description=Y.htmlContent,await R.put("/api/v1/movies",M).then(f=>{z.success("Edit Movie","Movie edited",{onClose:async()=>{const S=`${H.urlView}/${H.id}`;await F.push(S)}})})}catch(M){C.value=V.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{x.value=!1}};return(Y,b)=>{const M=ee("router-link"),f=ee("PageHeader"),S=ee("PageBody");return t(),s("div",null,[N(f,{"page-icon":"fas fa-fw fa-film",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:E(()=>[c.item?(t(),s("div",Cr,[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:b[0]||(b[0]=I=>g()),class:"btn btn-primary"},b[7]||(b[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xr),e("button",{onClick:d,class:"ms-2 btn btn-secondary"},b[8]||(b[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(M,{to:`${H.urlView}/${H.id}`,class:"ms-1 btn btn-secondary"},{default:E(()=>b[9]||(b[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):U("",!0)]),_:1},8,["pageTitle"]),N(S,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[c.item?(t(),s("div",Vr,[e("div",Pr,[e("div",Or,[e("div",Ar,[q(e("input",{"onUpdate:modelValue":b[1]||(b[1]=I=>c.item.eidrPrefix=I),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Q,c.item.eidrPrefix]]),b[10]||(b[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(_).item.eidrPrefix.$error?(t(),s("div",Ur,[(t(!0),s(O,null,L(o(_).item.eidrPrefix.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):U("",!0)])]),e("div",Dr,[e("div",Hr,[q(e("input",{"onUpdate:modelValue":b[2]||(b[2]=I=>c.item.eidr=I),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Q,c.item.eidr]]),b[11]||(b[11]=e("label",{for:"title"},"Eidr",-1)),o(_).item.eidr.$error?(t(),s("div",Lr,[(t(!0),s(O,null,L(o(_).item.eidr.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):U("",!0)])])]),e("div",Er,[e("div",qr,[e("div",Br,[q(e("input",{"onUpdate:modelValue":b[3]||(b[3]=I=>c.item.releaseYear=I),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Q,c.item.releaseYear]]),b[12]||(b[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Nr,[q(e("input",{"onUpdate:modelValue":b[4]||(b[4]=I=>c.item.title=I),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Q,c.item.title]]),b[13]||(b[13]=e("label",{for:"title"},"Title",-1)),o(_).item.title.$error?(t(),s("div",Rr,[(t(!0),s(O,null,L(o(_).item.title.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):U("",!0)])])]),e("div",null,[e("div",Fr,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:b[5]||(b[5]=I=>J(I))},null,32),b[14]||(b[14]=e("label",{for:"editor"},"Content",-1)),o(_).htmlContent.$error?(t(),s("div",zr,[(t(!0),s(O,null,L(o(_).htmlContent.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):U("",!0)])]),e("div",Gr,[e("div",jr,[q(e("textarea",{"onUpdate:modelValue":b[6]||(b[6]=I=>c.item.metadata=I),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Q,c.item.metadata]]),b[15]||(b[15]=e("label",{for:"title"},"Metadata",-1))])])])):U("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},Yr={components:{Page:Ke},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Wr(l,p,h,x,k,A){const C=ee("Page");return t(),ce(C,{id:h.id,urlView:h.urlView},null,8,["id","urlView"])}const Kr=Me(Yr,[["render",Wr]]),Jr={class:"ms-2"},Qr={class:"input-group"},Xr={class:"table-responsive border shadow-sm"},Zr={class:"table table-hover mb-0"},ei=["textContent"],ti={key:0,class:"fas fa-fw fa-check-circle text-success"},si="/api/v1/sourcegroups/search",oi={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(l){Se("$config");const h=be().user,{appTitle:x,pageTitle:k,busy:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,security:c,filter:T,initializeFilter:_,getQuery:G,saveQuery:J,search:d,getRowNumber:g,setSelected:Y,isSelected:b}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${h==null?void 0:h.userId}/source-groups/search`,baseUrl:si,filter:{updateUrl:!0}});return de(async()=>{_(),await d()}),(M,f)=>{const S=ee("router-link"),I=ee("PageHeader"),u=ee("m-pagination"),i=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(I,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k)},{default:E(()=>[N(S,{to:l.urlAdd,class:"btn btn-primary"},{default:E(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Jr,[e("div",Qr,[q(e("input",{"onUpdate:modelValue":f[0]||(f[0]=a=>o(T).query.criteria=a),onKeyup:f[1]||(f[1]=De(a=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Q,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:f[2]||(f[2]=a=>o(d)(1))},f[4]||(f[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(i,{errorMessage:o(R)},{default:E(()=>[e("div",Xr,[e("table",Zr,[f[5]||(f[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(o(T).items,(a,r)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:v(o(g)(r)),class:"text-center"},null,8,ei),e("td",null,[N(S,{to:`${l.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[a.arn?(t(),s("span",ti)):U("",!0),j(" "+v(a.name),1)]),_:2},1032,["to"])]),e("td",null,v(a.channelOutputs),1),e("td",null,v(a.packageConfigurations),1)]))),128))]),_:1},512),[[Te,o(T).items.length>0]])])]),N(u,{filter:o(T),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ai={key:0},li={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},ni={class:"nav-item",role:"presentation"},ri={class:"nav-item",role:"presentation"},ii={class:"nav-item",role:"presentation"},di={class:"tab-content",id:"myTabContent"},ui={class:"mt-2"},ci={class:"col"},mi={class:"form-floating mb-2"},fi={class:"mt-2"},pi={class:"table-responsive border"},vi={class:"table table-hover mb-0"},gi={class:"mt-2"},bi={class:"table-responsive border"},yi={class:"table table-hover mb-0"},$i={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:h,pageTitle:x,busy:k,isDirty:A,validations:C,infoMessage:F,warningMessage:R,errorMessage:V,router:z,axios:Z,utils:P,toasts:H,close:c,closeWithReturnUrl:T,generateReturnUrl:_,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});Se("$config");const J=be();J.user;const d=me({user:J.user,item:null}),g=re();de(async()=>{await f(),g.value=P.getPageTab("sourceGroup")||"information-tab"});const Y=u=>{P.setPageTab("sourceGroup",u),g.value=u},b=u=>u!==g.value?"":"active",M=u=>u!==g.value?"":"show active",f=async()=>{const u=d;if(!k.value)try{k.value=!0,V.value="",d.item=null;const i=`/api/v1/sourcegroups/${p.id}/`;await Z.get(i).then(a=>{u.item=a.data})}catch(i){V.value=P.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{if(!k.value)try{k.value=!0,V.value="";const u=`/api/v1/sourcegroups/${p.id}/`;await Z.delete(u).then(i=>{H.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${p.urlMain}/`;await z.push(a)}})})}catch(u){V.value=P.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{k.value=!1}},I=async()=>{await f()};return(u,i)=>{const a=ee("PageHeader"),r=ee("router-link"),$=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(x)},{default:E(()=>[e("button",{onClick:i[0]||(i[0]=w=>S()),class:"ms-1 btn btn-warning"},i[7]||(i[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:i[1]||(i[1]=w=>I()),class:"ms-2 btn btn-secondary"},i[8]||(i[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:i[2]||(i[2]=w=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},i[9]||(i[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N($,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",ai,[e("div",null,[e("ul",li,[e("li",ni,[e("button",{onClick:i[3]||(i[3]=w=>Y("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ri,[e("button",{onClick:i[4]||(i[4]=w=>Y("channelOutputs-tab")),class:le([b("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",ii,[e("button",{onClick:i[5]||(i[5]=w=>Y("packageConfigurations-tab")),class:le([b("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",di,[e("div",{class:le([M("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ui,[e("div",ci,[e("div",mi,[q(e("input",{"onUpdate:modelValue":i[6]||(i[6]=w=>d.item.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),i[10]||(i[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:le([M("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",fi,[e("div",pi,[e("table",vi,[i[11]||(i[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.channelOutputs,(w,m)=>(t(),s("tr",{key:w.channelOutputId},[e("td",null,v(m+1),1),e("td",null,[N(r,{to:`${l.urlViewChannel}/${w.channelId}/${o(_)()}`},{default:E(()=>[j(v(w.manifestName),1)]),_:2},1032,["to"])]),e("td",null,v(w.outputType),1)]))),128))]),_:1},512),[[Te,d.item.channelOutputs.length>0]])])])])],2),e("div",{class:le([M("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",gi,[e("div",bi,[e("table",yi,[i[12]||(i[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.packageConfigurations,(w,m)=>(t(),s("tr",{key:w.packageConfigurationId},[e("td",null,v(m+1),1),e("td",null,[N(r,{to:`${l.urlViewVodSource}/${w.vodSourceId}/${o(_)()}`},{default:E(()=>[j(v(w.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,v(w.path),1),e("td",null,v(w.type),1)]))),128))]),_:1},512),[[Te,d.item.packageConfigurations.length>0]])])])])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},wi=["disabled"],hi={class:"form-floating mb-2"},_i={key:0,class:"d-block invalid-feedback"},ki={class:"form-floating mb-2"},Si={key:0,class:"d-block invalid-feedback"},Ti={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),H=l,c=me({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),T={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:te.withMessage("HTTP Configuration Base Url is required.",oe),$autoDirty:!0,$lazy:!0}}},_=ye(T,c);de(async()=>{});const G=async()=>{const J=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const g=V.clone(J.item);await R.post("/api/v1/sourcelocations/",g).then(Y=>{z.success("Add Source Location","Source location added.",{onClose:async()=>{const b=`${H.urlView}/${Y.data}`;await F.push(b)}})})}catch(g){C.value=V.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{x.value=!1}};return(J,d)=>{const g=ee("router-link"),Y=ee("PageHeader"),b=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(Y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:d[0]||(d[0]=M=>G()),class:"btn btn-primary"},d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wi),N(g,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>d[4]||(d[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(b,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[e("div",null,[e("div",hi,[q(e("input",{"onUpdate:modelValue":d[1]||(d[1]=M=>c.item.name=M),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Q,c.item.name]]),d[5]||(d[5]=e("label",{for:"name"},"Name",-1)),o(_).item.name.$error?(t(),s("div",_i,[(t(!0),s(O,null,L(o(_).item.name.$errors,M=>(t(),s("div",{key:M.$uid},v(M.$message),1))),128))])):U("",!0)]),e("div",ki,[q(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=M=>c.item.httpConfigurationBaseUrl=M),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Q,c.item.httpConfigurationBaseUrl]]),d[6]||(d[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(_).item.httpConfigurationBaseUrl.$error?(t(),s("div",Si,[(t(!0),s(O,null,L(o(_).item.httpConfigurationBaseUrl.$errors,M=>(t(),s("div",{key:M.$uid},v(M.$message),1))),128))])):U("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Mi={components:{Page:Ke},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ii(l,p,h,x,k,A){const C=ee("Page");return t(),ce(C,{id:h.id,urlView:h.urlView},null,8,["id","urlView"])}const Ci=Me(Mi,[["render",Ii]]),xi={class:"ms-1"},Vi={class:"input-group"},Pi={class:"table-responsive border shadow-sm"},Oi={class:"table table-hover mb-0"},Ai={class:"text-center"},Ui=["textContent"],Di={key:0,class:"fas fa-fw fa-check-circle text-success"},Hi={class:"text-center"},Li=["onUpdate:modelValue"],Ei="/api/v1/sourcelocations/search",qi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(l){Se("$config");const h=be().user,{appTitle:x,pageTitle:k,busy:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,security:c,filter:T,initializeFilter:_,getQuery:G,saveQuery:J,search:d,getRowNumber:g,setSelected:Y,isSelected:b}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${h==null?void 0:h.userId}/source-locations/search`,baseUrl:Ei,filter:{updateUrl:!0}}),M=he(()=>{const I=T.value;return I&&I.items?I.items.filter(a=>a.selected):null});de(async()=>{_(),await d()});const f=async()=>{if(!(M.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!A.value){R.value=null;try{A.value=!0;const i={sourceLocationIds:M.value.map(a=>a.sourceLocationId)};await z.post("/api/v1/sourceLocations/publish/",i).then(a=>{P.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),A.value=!1,await d()}catch(u){R.value=Z.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{A.value=!1}}},S=async()=>{if(!(M.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!A.value){R.value=null;try{A.value=!0;const i={sourceLocationIds:M.value.map(a=>a.sourceLocationId)};await z.post("/api/v1/sourceLocations/unpublish/",i).then(a=>{P.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),A.value=!1,await d()}catch(u){R.value=Z.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{A.value=!1}}};return(I,u)=>{const i=ee("router-link"),a=ee("PageHeader"),r=ee("m-pagination"),$=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k)},{default:E(()=>[N(i,{to:l.urlAdd,class:"btn btn-primary ms-2"},{default:E(()=>u[3]||(u[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",xi,[e("div",Vi,[q(e("input",{"onUpdate:modelValue":u[0]||(u[0]=w=>o(T).query.criteria=w),onKeyup:u[1]||(u[1]=De(w=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:u[2]||(u[2]=w=>o(d)(1))},u[4]||(u[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N($,{errorMessage:o(R)},{default:E(()=>[e("div",Pi,[e("table",Oi,[e("thead",null,[e("tr",null,[u[7]||(u[7]=e("td",{class:"text-center"},"#",-1)),u[8]||(u[8]=e("th",null,"Name",-1)),u[9]||(u[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",Ai,[M.value.length?(t(),s(O,{key:0},[e("button",{onClick:f,class:"btn btn-primary btn-sm"},u[5]||(u[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:S,class:"btn btn-warning btn-sm ms-1"},u[6]||(u[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):U("",!0)])])]),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(o(T).items,(w,m)=>(t(),s("tr",{key:w.sourceLocationId},[e("td",{textContent:v(o(g)(m)),class:"text-center"},null,8,Ui),e("td",null,[N(i,{to:`${l.urlView}/${w.sourceLocationId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[w.arn?(t(),s("span",Di)):U("",!0),j(" "+v(w.name),1)]),_:2},1032,["to"])]),e("td",null,v(w.httpConfigurationBaseUrl),1),e("td",Hi,[q(e("input",{"onUpdate:modelValue":X=>w.selected=X,type:"checkbox",class:"form-check-input"},null,8,Li),[[Ue,w.selected]])])]))),128))]),_:1},512),[[Te,o(T).items.length>0]])])]),N(r,{filter:o(T),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Bi={key:0},Ni={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ri={class:"nav-item",role:"presentation"},Fi={class:"nav-item",role:"presentation"},zi={class:"nav-item",role:"presentation"},Gi={class:"tab-content",id:"myTabContent"},ji={class:"mt-2"},Yi={class:"col"},Wi={class:"form-floating mb-2"},Ki={class:"col"},Ji={class:"form-floating mb-2"},Qi={class:"mt-2"},Xi={class:"table-responsive border"},Zi={class:"table table-hover mb-0"},ed={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},td={class:"mt-2"},sd={class:"table-responsive border"},od={class:"table table-hover mb-0"},ad={key:0,class:"fas fa-fw fa-check-circle text-success"},ld={class:"badge bg-info"},nd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:h,pageTitle:x,busy:k,isDirty:A,validations:C,infoMessage:F,warningMessage:R,errorMessage:V,router:z,axios:Z,utils:P,toasts:H,close:c,closeWithReturnUrl:T,generateReturnUrl:_,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});Se("$config");const J=be();J.user;const d=me({user:J.user,item:null}),g=re();de(async()=>{await f(),g.value=P.getPageTab("sourceLocation")||"information-tab"});const Y=i=>{P.setPageTab("sourceLocation",i),g.value=i},b=i=>i!==g.value?"":"active",M=i=>i!==g.value?"":"show active",f=async()=>{const i=d;if(!k.value)try{k.value=!0,V.value="",d.item=null;const a=`/api/v1/sourcelocations/${p.id}/`;await Z.get(a).then(r=>{i.item=r.data})}catch(a){V.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{await f()},I=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!k.value){V.value=null;try{k.value=!0;const a={sourceLocationIds:[p.id]};await Z.post("/api/v1/sourcelocations/publish/",a).then(r=>{H.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),k.value=!1,await S()}catch(a){V.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}},u=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!k.value){V.value=null;try{k.value=!0;const a={sourceLocationIds:[p.id]};await Z.post("/api/v1/sourcelocations/unpublish/",a).then(r=>{H.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),k.value=!1,await S()}catch(a){V.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}};return(i,a)=>{const r=ee("PageHeader"),$=ee("router-link"),w=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(r,{"page-icon":"fas fa-fw fa-building",pageTitle:o(x)},{default:E(()=>[d.item?(t(),s(O,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=m=>u()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=m=>I()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):U("",!0),e("button",{onClick:a[2]||(a[2]=m=>S()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=m=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(w,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",Bi,[e("div",null,[e("ul",Ni,[e("li",Ri,[e("button",{onClick:a[4]||(a[4]=m=>Y("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Fi,[e("button",{onClick:a[5]||(a[5]=m=>Y("vodSources-tab")),class:le([b("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",zi,[e("button",{onClick:a[6]||(a[6]=m=>Y("programs-tab")),class:le([b("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Gi,[e("div",{class:le([M("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ji,[e("div",Yi,[e("div",Wi,[q(e("input",{"onUpdate:modelValue":a[7]||(a[7]=m=>d.item.name=m),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Ki,[e("div",Ji,[q(e("input",{"onUpdate:modelValue":a[8]||(a[8]=m=>d.item.httpConfigurationBaseUrl=m),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Q,d.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:le([M("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Qi,[e("div",Xi,[e("table",Zi,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.vodSources,(m,X)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,v(X+1),1),e("td",null,[m.arn?(t(),s("span",ed)):U("",!0),N($,{to:`${p.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(_)()}`},{default:E(()=>[j(v(m.name),1)]),_:2},1032,["to"])]),e("td",null,[N($,{to:`${p.urlViewVideo}/${encodeURIComponent(m.video.videoId)}/${o(_)()}`},{default:E(()=>[j(v(m.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,v(o(P).moment.utc(m.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Te,d.item.vodSources.length>0]])])])])],2),e("div",{class:le([M("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",td,[e("div",sd,[e("table",od,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.programs,(m,X)=>(t(),s("tr",{key:m.programId},[e("td",null,v(X+1),1),e("td",null,[N($,{to:`${p.urlViewChannel}/${encodeURIComponent(m.channel.channelId)}/${o(_)()}`},{default:E(()=>[j(v(m.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[m.arn?(t(),s("span",ad)):U("",!0),j(" "+v(m.name)+" ",1),e("div",null," Start: "+v(o(P).moment.utc(m.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+v(o(P).moment.utc(m.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[j(v(o(P).moment(m.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",ld,v(o(P).moment(m.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Te,d.item.programs.length>0]])])])])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},rd=["disabled"],id={class:"col"},dd={class:"form-floating mb-2"},ud={key:0,class:"d-block invalid-feedback"},cd={class:"row row-cols-1 row-cols-sm-2"},md={class:"col"},fd={class:"form-floating mb-2"},pd=["value"],vd={key:0,class:"d-block invalid-feedback"},gd={class:"col"},bd={class:"form-floating mb-2"},yd=["readonly"],$d=["value"],wd={key:0,class:"d-block invalid-feedback"},hd={key:0},_d={class:"d-flex flex-row justify-content-start"},kd={key:0,class:"d-inline invalid-feedback"},Sd={class:"table-responsive border mt-1"},Td={class:"table mb-0 caption-top"},Md={class:"align-middle"},Id=["onUpdate:modelValue"],Cd=["value"],xd=["onUpdate:modelValue"],Vd=["value"],Pd=["onClick"],Od={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,route:R,axios:V,utils:z,toasts:Z,close:P,closeWithReturnUrl:H,security:c}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),T=l,_=me({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),G=(a,r,$)=>a.length>0,J={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",G),$each:te.forEach({path:{required:te.withMessage("Path is required.",oe)},sourceGroupId:{required:te.withMessage("Source Group is required.",oe)}}),$autoDirty:!0,$lazy:!0}}},d=ye(J,_);de(async()=>{await g(),await Y()});const g=async()=>{try{await V.get("/api/v1/sourcegroups/lookup/").then(r=>{_.lookups.sourceGroups=r.data})}catch(a){C.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},Y=async()=>{try{if(await V.get("/api/v1/sourcelocations/lookup/").then(r=>{_.lookups.sourceLocations=r.data}),_.lookups.sourceLocations.length===1){const r=_.lookups.sourceLocations[0];_.selected.sourceLocation=r,await b()}}catch(a){C.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},b=async()=>{const a=_.selected.sourceLocation;_.item.sourceLocationId=a.id,await M(a.baseUrl)},M=async a=>{try{const r=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await V.get(r).then(w=>{_.lookups.videos=w.data,_.lookups.videos.length===1&&(_.item.videoId=_.lookups.videos[0].id)});const $=R.query.videoId;if($){const w=_.lookups.videos.find(m=>m.id==$);w&&(_.selected.video=w,await f())}}catch(r){C.value=z.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},f=async()=>{_.item.videoId=_.selected.video.id,await S(_.item.videoId)},S=async a=>{try{const r=`/api/v1/videos/${a}/formats`;await V.get(r).then($=>{_.selected.video.formats=$.data})}catch(r){C.value=z.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},I=async()=>{const a=_;if(x.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const $=z.clone(a.item),w=a.item.packageConfigurations.filter(m=>m.selectedFormat&&m.sourceGroupId);w.forEach(m=>{const X=m.selectedFormat;m.path=X.path,m.format=X.format,delete m.selectedFormat}),$.packageConfigurations=w,delete $.video,await V.post("/api/v1/vodSources/",$).then(m=>{debugger;Z.success("Add VOD Source","VOD source added",{onClose:async()=>{const X=`${T.urlView}/${m.data}`;await F.push(X)}})})}catch($){C.value=z.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{x.value=!1}},u=()=>{const a={sourceGroupId:null,selectedFormat:null},r=_.selected.video;if(r){const $=r.formats.find(w=>w.formatName==="HLS");a.path=`${$.serverUrl}${$.path}`}_.item.packageConfigurations.push(a)},i=a=>{_.item.packageConfigurations.splice(a,1)};return(a,r)=>{const $=ee("PageHeader"),w=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:r[0]||(r[0]=m=>I()),class:"btn btn-primary"},r[6]||(r[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,rd),e("button",{onClick:r[1]||(r[1]=m=>o(H)(T.urlMain)),class:"btn btn-secondary ms-1"},r[7]||(r[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(w,{errorMessage:o(C),vuelidate:o(d)},{default:E(()=>[e("div",null,[e("div",id,[e("div",dd,[q(e("input",{"onUpdate:modelValue":r[2]||(r[2]=m=>_.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,_.item.name]]),r[8]||(r[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(d).item.name.$error?(t(),s("div",ud,[(t(!0),s(O,null,L(o(d).item.name.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",cd,[e("div",md,[e("div",fd,[q(e("select",{"onUpdate:modelValue":r[3]||(r[3]=m=>_.selected.sourceLocation=m),onChange:r[4]||(r[4]=m=>b()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(_.lookups.sourceLocations,m=>(t(),s("option",{value:m},v(m.name),9,pd))),256))],544),[[ue,_.selected.sourceLocation]]),r[9]||(r[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(d).item.sourceLocationId.$error?(t(),s("div",vd,[(t(!0),s(O,null,L(o(d).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",gd,[e("div",bd,[q(e("select",{"onUpdate:modelValue":r[5]||(r[5]=m=>_.selected.video=m),onChange:f,class:"form-select",id:"videoId",readonly:_.item.packageConfigurations.length>0},[(t(!0),s(O,null,L(_.lookups.videos,m=>(t(),s("option",{value:m},v(m.name),9,$d))),256))],40,yd),[[ue,_.selected.video]]),r[10]||(r[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(d).item.videoId.$error?(t(),s("div",wd,[(t(!0),s(O,null,L(o(d).item.videoId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])])]),_.item.videoId?(t(),s("div",hd,[e("div",_d,[e("fieldset",null,[e("legend",null,[r[12]||(r[12]=j(" Package Configurations ")),o(d).item.packageConfigurations.$error?(t(),s("span",kd,r[11]||(r[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):U("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:u,class:"btn btn-outline-primary"},r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Sd,[e("table",Td,[r[15]||(r[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",Md,[(t(!0),s(O,null,L(_.item.packageConfigurations,(m,X)=>(t(),s("tr",null,[e("td",null,v(X+1),1),e("td",null,[q(e("select",{"onUpdate:modelValue":K=>m.selectedFormat=K,class:"form-select",id:"videoId"},[(t(!0),s(O,null,L(_.selected.video.formats,K=>(t(),s("option",{value:K},v(K.path),9,Cd))),256))],8,Id),[[ue,m.selectedFormat]]),o(d).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(d).item.packageConfigurations.$each.$response.$errors[X].path,K=>(t(),s("div",{key:K,class:"d-block invalid-feedback"},v(K.$message),1))),128)):U("",!0)]),e("td",null,[m.selectedFormat?(t(),s(O,{key:0},[j(v(m.selectedFormat.formatName),1)],64)):U("",!0)]),e("td",null,[e("div",null,[q(e("select",{"onUpdate:modelValue":K=>m.sourceGroupId=K,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(_.lookups.sourceGroups,K=>(t(),s("option",{value:K.id},v(K.name),9,Vd))),256))],8,xd),[[ue,m.sourceGroupId]]),o(d).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(d).item.packageConfigurations.$each.$response.$errors[X].path,K=>(t(),s("div",{key:K,class:"d-block invalid-feedback"},v(K.$message),1))),128)):U("",!0)])]),e("td",null,[e("button",{onClick:K=>i(X),class:"btn btn-outline-warning"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Pd)])]))),256))])])])])):U("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ad=["disabled"],Ud={key:0},Dd={class:"col"},Hd={class:"form-floating mb-2"},Ld={key:0,class:"d-block invalid-feedback"},Ed={class:"row row-cols-1 row-cols-sm-2"},qd={class:"col"},Bd={class:"form-floating mb-2"},Nd=["value"],Rd={key:0,class:"d-block invalid-feedback"},Fd={class:"col"},zd={class:"form-floating mb-2"},Gd=["disabled"],jd=["value"],Yd={key:0,class:"d-block invalid-feedback"},Wd={key:0},Kd={class:"d-flex flex-row justify-content-between mt-3"},Jd={key:0,class:"d-inline invalid-feedback"},Qd={class:"table-responsive border mt-1"},Xd={class:"table mb-0 caption-top"},Zd={class:"input-group mb-1"},eu=["onUpdate:modelValue"],tu=["onUpdate:modelValue"],su=["value"],ou=["onUpdate:modelValue"],au=["onClick"],lu={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),H=l,c=me({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),T=(a,r,$)=>a.length>0,_={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",T),$each:te.forEach({path:{required:te.withMessage("Path is required.",oe)},sourceGroupId:{required:te.withMessage("Source Group is required.",oe)}})}}},G=ye(_,c);de(async()=>{await J(),await g(),await Y()});const J=async()=>{await d()},d=async()=>{const a=c;if(!x.value)try{x.value=!0,C.value="",c.item=null;const r=`/api/v1/vodsources/${H.id}/`;await R.get(r).then($=>{a.item=$.data;const w=a.item,m=V.moment.utc(a.item.video.durationInMillis).format("HH:mm:ss");w.video.duration=m})}catch(r){C.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{x.value=!1}},g=async()=>{try{await R.get("/api/v1/sourcegroups/lookup/").then(r=>{c.lookups.sourceGroups=r.data})}catch(a){C.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},Y=async()=>{try{if(await R.get("/api/v1/sourcelocations/lookup/").then(r=>{c.lookups.sourceLocations=r.data}),c.lookups.sourceLocations.length>0){const r=c.lookups.sourceLocations.find($=>$.id===c.item.sourceLocationId);c.selected.sourceLocation=r,await b()}}catch(a){C.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},b=async()=>{const a=c.selected.sourceLocation;c.item.sourceLocationId=a.id,await M(a.baseUrl)},M=async a=>{try{const r=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await R.get(r).then($=>{if(c.lookups.videos=$.data,c.lookups.videos.length>0){const w=c.lookups.videos.find(m=>m.id==c.item.videoId);c.selected.video=w}})}catch(r){C.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},f=async()=>{c.item.videoId=c.selected.video.id,await S(c.item.videoId)},S=async a=>{try{const r=`/api/v1/videos/${a}/formats`;await R.get(r).then($=>{c.selected.video.formats=$.data;debugger})}catch(r){C.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},I=async()=>{const a=c;if(x.value)return;if(!await G.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const $=V.clone(a.item);$.videoId=c.selected.video.id,delete $.video,await R.put("/api/v1/vodsources/",$).then(w=>{z.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const m=`${H.urlView}/${H.id}`;await F.push(m)}})})}catch($){C.value=V.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{x.value=!1}},u=()=>{debugger;const a={path:"",sourceGroupId:null,type:"HLS"},r=c.item.video;if(r){const $=r.formats.find(w=>w.formatName==="HLS");debugger;a.path=`${$.serverUrl}${$.path}`}c.item.packageConfigurations.push(a)},i=a=>{c.item.packageConfigurations.splice(a,1)};return(a,r)=>{const $=ee("router-link"),w=ee("PageHeader"),m=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(w,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(G).$dirty&&o(G).$invalid,onClick:r[0]||(r[0]=X=>I()),class:"btn btn-primary"},r[6]||(r[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ad),e("button",{onClick:r[1]||(r[1]=X=>J()),class:"btn btn-secondary ms-2"},r[7]||(r[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N($,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-1"},{default:E(()=>r[8]||(r[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(m,{errorMessage:o(C),vuelidate:o(G)},{default:E(()=>[c.item?(t(),s("div",Ud,[e("div",Dd,[e("div",Hd,[q(e("input",{"onUpdate:modelValue":r[2]||(r[2]=X=>c.item.name=X),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,c.item.name]]),r[9]||(r[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(G).item.name.$error?(t(),s("div",Ld,[(t(!0),s(O,null,L(o(G).item.name.$errors,X=>(t(),s("div",{key:X.$uid},v(X.$message),1))),128))])):U("",!0)])]),e("div",Ed,[e("div",qd,[e("div",Bd,[q(e("select",{"onUpdate:modelValue":r[3]||(r[3]=X=>c.selected.sourceLocation=X),onChange:r[4]||(r[4]=X=>b()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(c.lookups.sourceLocations,X=>(t(),s("option",{value:X},v(X.name),9,Nd))),256))],544),[[ue,c.selected.sourceLocation]]),r[10]||(r[10]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(G).item.sourceLocationId.$error?(t(),s("div",Rd,[(t(!0),s(O,null,L(o(G).item.sourceLocationId.$errors,X=>(t(),s("div",{key:X.$uid},v(X.$message),1))),128))])):U("",!0)])]),e("div",Fd,[e("div",zd,[q(e("select",{"onUpdate:modelValue":r[5]||(r[5]=X=>c.selected.video=X),onChange:f,class:"form-select",id:"videoId",disabled:c.item.packageConfigurations.length>0},[(t(!0),s(O,null,L(c.lookups.videos,X=>(t(),s("option",{value:X},v(X.name),9,jd))),256))],40,Gd),[[ue,c.selected.video]]),r[11]||(r[11]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(G).item.videoId.$error?(t(),s("div",Yd,[(t(!0),s(O,null,L(o(G).item.videoId.$errors,X=>(t(),s("div",{key:X.$uid},v(X.$message),1))),128))])):U("",!0)])])]),c.item.videoId?(t(),s("div",Wd,[e("div",Kd,[e("div",null,[e("h5",null,[r[13]||(r[13]=j(" Package Configurations ")),o(G).item.packageConfigurations.$error?(t(),s("span",Jd,r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):U("",!0)])]),e("button",{onClick:u,class:"btn btn-outline-primary"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),j("Package Configuration ")]))]),e("div",Qd,[e("table",Xd,[r[17]||(r[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.packageConfigurations,(X,K)=>(t(),s("tr",null,[e("td",null,v(K+1),1),e("td",null,[e("div",Zd,[q(e("input",{"onUpdate:modelValue":y=>X.path=y,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,eu),[[Q,X.path]])]),o(G).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(G).item.packageConfigurations.$each.$response.$errors[K].path,y=>(t(),s("div",{key:y,class:"d-block invalid-feedback"},v(y.$message),1))),128)):U("",!0)]),e("td",null,[e("div",null,[q(e("select",{"onUpdate:modelValue":y=>X.sourceGroupId=y,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(c.lookups.sourceGroups,y=>(t(),s("option",{value:y.id},v(y.name),9,su))),256))],8,tu),[[ue,X.sourceGroupId]]),o(G).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(G).item.packageConfigurations.$each.$response.$errors[K].path,y=>(t(),s("div",{key:y,class:"d-block invalid-feedback"},v(y.$message),1))),128)):U("",!0)])]),e("td",null,[q(e("select",{"onUpdate:modelValue":y=>X.type=y,class:"form-select",id:"type"},r[15]||(r[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,ou),[[ue,X.type]])]),e("td",null,[e("button",{onClick:y=>i(K),class:"btn btn-outline-warning"},r[16]||(r[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,au)])]))),256))])])])])):U("",!0)])):U("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},nu={class:"ms-2"},ru={class:"input-group"},iu=["value"],du={class:"ms-1"},uu={class:"input-group"},cu=["value"],mu={class:"ms-1"},fu={class:"input-group"},pu={class:"ms-1"},vu={class:"input-group"},gu={class:"table-responsive border shadow-sm"},bu={class:"table table-hover mb-0"},yu={class:"text-center"},$u=["textContent"],wu={class:"d-flex flex-row justify-content-start"},hu={class:"mt-1"},_u=["src"],ku={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Su={class:"ms-2"},Tu={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Mu={class:"badge bg-primary me-1"},Iu={key:0},Cu={class:"badge bg-info me-1"},xu={class:"d-flex flex-row justify-content-start"},Vu={class:"ms-2"},Pu={class:"small"},Ou={class:"badge bg-secondary me-1"},Au={class:"text-center"},Uu=["onUpdate:modelValue"],Du="/api/v1/vodsources/search",Hu={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(l){Se("$config");const h=be().user,{appTitle:x,pageTitle:k,busy:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,closeWithReturnUrl:c,generateReturnUrl:T,security:_,filter:G,initializeFilter:J,getQuery:d,saveQuery:g,search:Y,getRowNumber:b,setSelected:M,isSelected:f}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${h==null?void 0:h.userId}/vod-sources/search`,baseUrl:Du,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:($,w)=>{const m=$.value,X=new URLSearchParams(window.location.search),K=JSON.parse(localStorage.getItem(w))||{};m.query.category=X.get("category")||K.category||m.query.category||0,m.query.genre=X.get("genre")||K.genre||m.query.genre||0,m.query.sourceLocationId=X.get("slid")||K.sourceLocationId||m.query.sourceLocationId||""},getQuery:$=>["?c=",encodeURIComponent($.query.criteria),"&p=",$.pageIndex,"&s=",$.pageSize,"&sf=",$.sortField,"&so=",$.sortOrder,"&category=",$.query.category,"&genre=",$.query.genre,"&slid=",$.query.sourceLocationId].join(""),saveQuery:($,w)=>{localStorage.setItem(w,JSON.stringify({criteria:$.query.criteria,pageIndex:$.pageIndex,pageSize:$.pageSize,sortField:$.sortField,sortOrder:$.sortOrder,visible:$.visible,category:$.query.category,genre:$.query.genre,sourceLocationId:$.query.sourceLocationId}))}}),S=he(()=>{const $=G.value;return $&&$.items?$.items.filter(X=>X.selected):[]});de(async()=>{J(),await a(),await r(),await Y()});const I=async()=>{if(!(S.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!A.value){R.value=null;try{A.value=!0;const m={vodSourceIds:S.value.map(X=>X.vodSourceId)};await z.post("/api/v1/vodsources/publish/",m).then(X=>{P.success("Publish VODs","VODs was published.",{async onClose(){}})}),A.value=!1,await Y()}catch(w){R.value=Z.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{A.value=!1}}},u=async()=>{if(!(S.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!A.value){R.value=null;try{A.value=!0;const m={vodSourceIds:S.value.map(X=>X.vodSourceId)};await z.post("/api/v1/vodsources/unpublish/",m).then(X=>{P.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),A.value=!1,await Y()}catch(w){R.value=Z.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{A.value=!1}}},i=()=>{const $=G.value.items;if($.length<1)return;const w=!$[0].selected;G.value.items.forEach(m=>{m.selected=w})},a=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(w=>{G.value.lookups.sourceLocations=w.data})}catch($){R.value=Z.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},r=async()=>{try{await z.get("/api/v1/lookups/video-genres/").then($=>{const w=$.data;G.value.lookups.genres=w})}catch($){R.value=Z.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return re(!1),($,w)=>{const m=ee("router-link"),X=ee("PageHeader"),K=ee("m-pagination"),y=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(X,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(k)},{default:E(()=>[N(m,{to:l.urlAdd,class:"btn btn-primary"},{default:E(()=>w[6]||(w[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",nu,[e("div",ru,[w[8]||(w[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),q(e("select",{"onUpdate:modelValue":w[0]||(w[0]=n=>o(G).query.sourceLocationId=n),class:"form-select"},[w[7]||(w[7]=e("option",{value:""},"All",-1)),(t(!0),s(O,null,L(o(G).lookups.sourceLocations,n=>(t(),s("option",{value:n.id},v(n.name),9,iu))),256))],512),[[ue,o(G).query.sourceLocationId]])])]),e("div",du,[e("div",uu,[w[9]||(w[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),q(e("select",{"onUpdate:modelValue":w[1]||(w[1]=n=>o(G).query.genre=n),class:"form-select"},[(t(!0),s(O,null,L(o(G).lookups.genres,n=>(t(),s("option",{value:n.id},v(n.name),9,cu))),256))],512),[[ue,o(G).query.genre]])])]),e("div",mu,[e("div",fu,[w[11]||(w[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),q(e("select",{"onUpdate:modelValue":w[2]||(w[2]=n=>o(G).query.category=n),class:"form-select"},w[10]||(w[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(G).query.category]])])]),e("div",pu,[e("div",vu,[q(e("input",{"onUpdate:modelValue":w[3]||(w[3]=n=>o(G).query.criteria=n),onKeyup:w[4]||(w[4]=De(n=>o(Y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(G).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:w[5]||(w[5]=n=>o(Y)(1))},w[12]||(w[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(R)},{default:E(()=>[e("div",gu,[e("table",bu,[e("thead",null,[e("tr",null,[w[16]||(w[16]=e("td",{class:"text-center"},"#",-1)),w[17]||(w[17]=e("th",null,"Name",-1)),w[18]||(w[18]=e("th",null,"Video Title",-1)),e("th",yu,[S.value.length?(t(),s(O,{key:0},[e("button",{onClick:I,class:"btn btn-sm btn-primary"},w[13]||(w[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:u,class:"btn btn-sm btn-warning ms-1"},w[14]||(w[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):U("",!0),e("button",{onClick:i,class:"btn btn-sm btn-outline-primary ms-2"},w[15]||(w[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(o(G).items,(n,B)=>(t(),s("tr",{key:n.vodSourceId},[e("td",{textContent:v(o(b)(B)),class:"text-center"},null,8,$u),e("td",null,[e("div",wu,[e("div",null,[n.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(n.video.thumbnails,se=>(t(),s("div",hu,[e("img",{src:se.url,class:"img-fuild border",width:"128"},null,8,_u)]))),256)):(t(),s("img",ku))]),e("div",Su,[N(m,{to:`${l.urlView}/${n.vodSourceId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[n.arn?(t(),s("span",Tu)):U("",!0),j(v(n.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,L(n.video.categories,se=>(t(),s("div",null,[e("span",Mu,v(se.categoryName),1)]))),256)),n.video.genres.length>0?(t(),s("div",Iu,[(t(!0),s(O,null,L(n.video.genres,se=>(t(),s("span",Cu,v(se.genreName),1))),256))])):U("",!0)])])])]),e("td",null,[e("div",xu,[e("div",Vu,[N(m,{to:`${l.urlViewVideo}/${encodeURIComponent(n.video.videoId)}/${o(T)()}`,class:"text-decoration-none"},{default:E(()=>[j(v(n.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Pu,v(o(Z).moment.utc(n.video.durationInMillis).format("HH:mm:ss")),1)]),n.video.formats.length>0?(t(!0),s(O,{key:0},L(n.video.formats,se=>(t(),s("span",Ou,v(se.formatName),1))),256)):U("",!0)])])]),e("td",Au,[q(e("input",{"onUpdate:modelValue":se=>n.selected=se,type:"checkbox",class:"form-check-input"},null,8,Uu),[[Ue,n.selected]])])]))),128))]),_:1},512),[[Te,o(G).items.length>0]])])]),N(K,{filter:o(G),search:o(Y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Lu=["id"],Eu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},qu={class:"modal-content"},Bu={class:"modal-header"},Nu={class:"modal-title"},Ru={class:"modal-body"},Fu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},zu=["innerHTML"],Gu={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ju={class:"container"},Yu={class:"col"},Wu={class:"form-floating mb-2"},Ku=["value"],Ju={key:0,class:"d-block invalid-feedback"},Qu={class:"col"},Xu={class:"form-floating mb-2"},Zu={key:0,class:"d-block invalid-feedback"},ec={class:"col"},tc={class:"form-floating mb-2"},sc={key:0,class:"d-block invalid-feedback"},oc={class:"modal-footer"},ac=["disabled"],lc={__name:"_addPackageConfiguration",emits:["refresh"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),G=h;re();const J=re("modalAddChannelOutput"),d=me({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),g={item:{sourceGroupId:{required:te.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("VOD Source is required.",oe),$autoDirty:!0,$lazy:!0},path:{required:te.withMessage("Path is required.",oe),$autoDirty:!0,$lazy:!0},type:{required:te.withMessage("Type is required.",oe),$autoDirty:!0,$lazy:!0}}},Y=ye(g,d);de(async()=>{Y.value.$reset()});const b=async()=>{await M()},M=async()=>{try{await P.get("/api/v1/sourceGroups/lookup/").then(i=>{d.lookups.sourceGroups=i.data,d.lookups.sourceGroups.length===1&&(d.item.sourceGroupId=d.lookups.sourceGroups[0].id)})}catch(u){z.value=H.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},f=async u=>{const i=d;F.value.clear(),z.value="",i.lookups={sourceGroups:[]},i.item={sourceGroupId:null,vodSourceId:u,path:null,type:null},await b(),Y.value.$reset();var a=document.getElementById(J.value),r=_e.getOrCreateInstance(a);r.show()},S=async()=>{var u=document.getElementById(J.value),i=_e.getOrCreateInstance(u);i.hide(),G("refresh")},I=async()=>{const u=d;if(A.value)return;const i=await Y.value.$validate();debugger;if(!i){window.scrollTo(0,0);return}try{A.value=!0,z.value="";const a=u.item;await P.post("/api/v1/vodSources/package-configurations/",a).then(r=>{c.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await S()}catch(a){z.value=H.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{A.value=!1}};return p({open:f,close:S}),(u,i)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Eu,[e("div",qu,[e("div",Bu,[e("h5",Nu,[i[5]||(i[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=a=>S()),"aria-label":"Close"})]),e("div",Ru,[o(z)?(t(),s("div",Fu,[i[6]||(i[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,zu)])):U("",!0),o(F).size>0?(t(),s("div",Gu,[i[7]||(i[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),a=>(t(),s("li",null,v(a),1))),256))])])):U("",!0),e("div",ju,[e("div",Yu,[e("div",Wu,[q(e("select",{"onUpdate:modelValue":i[1]||(i[1]=a=>d.item.sourceGroupId=a),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(d.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},v(a.name),9,Ku))),256))],512),[[ue,d.item.sourceGroupId]]),i[8]||(i[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(Y).item.sourceGroupId.$error?(t(),s("div",Ju,[(t(!0),s(O,null,L(o(Y).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])]),e("div",Qu,[e("div",Xu,[q(e("select",{"onUpdate:modelValue":i[2]||(i[2]=a=>d.item.type=a),class:"form-select",id:"type"},i[9]||(i[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,d.item.type]]),i[10]||(i[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(Y).item.type.$error?(t(),s("div",Zu,[(t(!0),s(O,null,L(o(Y).item.type.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])]),e("div",ec,[e("div",tc,[q(e("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>d.item.path=a),class:"form-control",id:"path"},null,512),[[Q,d.item.path]]),i[11]||(i[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(Y).item.path.$error?(t(),s("div",sc,[(t(!0),s(O,null,L(o(Y).item.path.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):U("",!0)])])])]),e("div",oc,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:i[4]||(i[4]=a=>I()),class:"btn btn-primary",type:"button"},i[12]||(i[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ac),i[13]||(i[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Lu))}},nc=["id"],rc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ic={class:"modal-content"},dc={class:"modal-header"},uc={class:"modal-title"},cc={class:"modal-body"},mc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},fc=["innerHTML"],pc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},vc={class:"container"},gc={class:"col"},bc={class:"form-floating mb-2"},yc={class:"col"},$c={class:"form-floating mb-2"},wc={key:0,class:"d-block invalid-feedback"},hc={class:"col"},_c={class:"form-floating mb-2"},kc={key:0,class:"d-block invalid-feedback"},Sc={class:"col"},Tc={class:"form-floating mb-2"},Mc={key:0,class:"d-block invalid-feedback"},Ic={class:"modal-footer"},Cc=["disabled"],xc={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),G=h,J=re(),d=re("modalAddPlaybackConfiguration"),g=me({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},b=ye(Y,g);de(async()=>{b.value.$reset()});const M=async(I,u)=>{J.value=I;const i=g;F.value.clear(),z.value="";const a=u,r=a.lastIndexOf("/"),$=a.substring(0,r),w="ad_campaign_"+a.substring(r+1).replace(".","_");i.item={name:w,originalVideoContentSourceUrl:u,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},b.value.$reset();var m=document.getElementById(d.value),X=_e.getOrCreateInstance(m);X.show()},f=async()=>{var I=document.getElementById(d.value),u=_e.getOrCreateInstance(I);u.hide(),G("refresh")},S=async()=>{const I=g;if(A.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{A.value=!0,z.value="";const i=I.item;i.vodSourceId=J.value,await P.post("/api/v1/playbackconfigurations/vodsource",i).then(a=>{c.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await f()}catch(i){z.value=H.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{A.value=!1}};return p({open:M,close:f}),(I,u)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",rc,[e("div",ic,[e("div",dc,[e("h5",uc,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=i=>f()),"aria-label":"Close"})]),e("div",cc,[o(z)?(t(),s("div",mc,[u[7]||(u[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,fc)])):U("",!0),o(F).size>0?(t(),s("div",pc,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),i=>(t(),s("li",null,v(i),1))),256))])])):U("",!0),e("div",vc,[e("div",gc,[e("div",bc,[q(e("input",{"onUpdate:modelValue":u[1]||(u[1]=i=>g.item.originalVideoContentSourceUrl=i),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Q,g.item.originalVideoContentSourceUrl]]),u[9]||(u[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",yc,[e("div",$c,[q(e("input",{"onUpdate:modelValue":u[2]||(u[2]=i=>g.item.name=i),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),u[10]||(u[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",wc,[(t(!0),s(O,null,L(o(b).item.name.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",hc,[e("div",_c,[q(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>g.item.videoContentSourceUrl=i),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Q,g.item.videoContentSourceUrl]]),u[11]||(u[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),u[12]||(u[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(b).item.videoContentSourceUrl.$error?(t(),s("div",kc,[(t(!0),s(O,null,L(o(b).item.videoContentSourceUrl.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",Sc,[e("div",Tc,[q(e("textarea",{"onUpdate:modelValue":u[4]||(u[4]=i=>g.item.adDecisionServerUrl=i),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Q,g.item.adDecisionServerUrl]]),u[13]||(u[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(b).item.adDecisionServerUrl.$error?(t(),s("div",Mc,[(t(!0),s(O,null,L(o(b).item.adDecisionServerUrl.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])])])]),e("div",Ic,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:u[5]||(u[5]=i=>S()),class:"btn btn-primary",type:"button"},u[14]||(u[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Cc),u[15]||(u[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,nc))}},Vc={key:0},Pc={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Oc={class:"nav-item",role:"presentation"},Ac={class:"nav-item",role:"presentation"},Uc={class:"nav-item",role:"presentation"},Dc={class:"nav-item",role:"presentation"},Hc={class:"nav-item",role:"presentation"},Lc={class:"nav-item",role:"presentation"},Ec={class:"tab-content",id:"myTabContent"},qc={class:"mt-2"},Bc={class:"col"},Nc={class:"form-floating mb-2"},Rc={class:"mt-2"},Fc={class:"badge bg-info me-1"},zc={class:"mt-2"},Gc={class:"row row-cols-sm-2"},jc={class:"col"},Yc={class:"form-floating mb-2"},Wc={class:"form-control"},Kc={class:"col"},Jc={class:"form-floating mb-2"},Qc={class:"mt-1"},Xc={class:"badge bg-info me-1"},Zc={class:"badge bg-primary me-1"},em={class:"table-responsive border mt-1"},tm={class:"table table-hover mb-0"},sm={class:"table-group-divider"},om={class:"align-middle"},am={class:"text-center"},lm={class:"mt-2"},nm={class:"mt-2 text-end"},rm={class:"table-responsive border mt-2"},im={class:"table table-hover mb-0 caption-top"},dm={class:"text-end"},um=["onClick"],cm={class:"mt-2"},mm={class:"mt-1"},fm=["id"],pm={class:"text-end"},vm={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(l){const p=l,{appTitle:h,pageTitle:x,busy:k,isDirty:A,validations:C,infoMessage:F,warningMessage:R,errorMessage:V,router:z,axios:Z,utils:P,toasts:H,close:c,closeWithReturnUrl:T,generateReturnUrl:_,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});Se("$config");const J=be();J.user;const d=me({user:J.user,item:null,hls:null}),g=re();re(null);const Y=re();de(async()=>{await S();const w=P.getPageTab("vodSource")||"information-tab";b(w)}),qe(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const b=w=>{P.setPageTab("vodSource",w),g.value=w},M=w=>w!==g.value?"":"active",f=w=>w!==g.value?"":"show active",S=async()=>{const w=d;if(!k.value)try{k.value=!0,V.value="",d.item=null;const m=`/api/v1/vodsources/${p.id}/`;await Z.get(m).then(X=>{w.item=X.data;const K=w.item,y=P.moment.utc(w.item.video.durationInMillis).format("HH:mm:ss");K.video.duration=y}),$()}catch(m){V.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{k.value=!1}},I=async()=>{await S()},u=()=>{Y.value.open(p.id)},i=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!k.value){V.value=null;try{k.value=!0;const m={vodSourceIds:[p.id]};await Z.post("/api/v1/vodsources/publish/",m).then(X=>{H.success("Publish VOD","VOD was published.",{async onClose(){}})}),k.value=!1,await I()}catch(m){V.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{k.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!k.value){V.value=null;try{k.value=!0;const m={vodSourceIds:[p.id]};await Z.post("/api/v1/vodsources/unpublish/",m).then(X=>{H.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),k.value=!1,await I()}catch(m){V.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{k.value=!1}}},r=async w=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!k.value){V.value=null;try{k.value=!0,await Z.delete(`/api/v1/vodSources/package-configurations/${w}/`).then(X=>{H.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),k.value=!1,await I()}catch(X){V.value=P.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{k.value=!1}}},$=()=>{if(Hls.isSupported()){d.hls&&d.hls.destroy();const w=`video-${d.item.vodSourceId}`,m=document.getElementById(w),X=d.item.video.formats.find(y=>y.formatName==="HLS"),K=`${X.serverUrl}${X.path}`;d.hls=P.createHlsStream(m,K,!1)}};return(w,m)=>{const X=ee("router-link"),K=ee("PageHeader"),y=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(K,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(x)},{default:E(()=>[d.item?(t(),s(O,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:m[0]||(m[0]=n=>a()),class:"ms-1 btn btn-warning"},m[15]||(m[15]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:m[1]||(m[1]=n=>i()),class:"ms-1 btn btn-primary"},m[16]||(m[16]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):U("",!0),N(X,{to:`${l.urlEdit}/${l.id}`,class:"ms-2 btn btn-primary"},{default:E(()=>m[17]||(m[17]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:m[2]||(m[2]=n=>I()),class:"ms-2 btn btn-secondary"},m[18]||(m[18]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[3]||(m[3]=n=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},m[19]||(m[19]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",Vc,[e("div",null,[e("ul",Pc,[e("li",Oc,[e("button",{onClick:m[4]||(m[4]=n=>b("information-tab")),class:le([M("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ac,[e("button",{onClick:m[5]||(m[5]=n=>b("packageConfigurations-tab")),class:le([M("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Uc,[e("button",{onClick:m[6]||(m[6]=n=>b("viewStream-tab")),class:le([M("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View ",2)]),e("li",Dc,[e("button",{onClick:m[7]||(m[7]=n=>b("channels-tab")),class:le([M("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},m[20]||(m[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),j("Channels ")]),2)]),e("li",Hc,[e("button",{onClick:m[8]||(m[8]=n=>b("programs-tab")),class:le([M("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},m[21]||(m[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),j("Programs ")]),2)]),e("li",Lc,[e("button",{onClick:m[9]||(m[9]=n=>b("programTemplates-tab")),class:le([M("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},m[22]||(m[22]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),j("Program Templates ")]),2)])]),e("div",Ec,[e("div",{class:le([f("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",qc,[e("div",Bc,[e("div",Nc,[q(e("input",{"onUpdate:modelValue":m[10]||(m[10]=n=>d.item.name=n),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),m[23]||(m[23]=e("label",{for:"name"},"Name",-1))])]),e("div",Rc,[e("div",null,[(t(!0),s(O,null,L(d.item.types,n=>(t(),s("span",Fc,v(n.typeName),1))),256))])]),e("div",zc,[m[27]||(m[27]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Gc,[e("div",jc,[e("div",Yc,[e("div",Wc,[N(X,{to:`${l.urlViewVideo}/${d.item.video.videoId}/${o(_)()}`},{default:E(()=>[j(v(d.item.video.title),1)]),_:1},8,["to"])]),m[24]||(m[24]=e("label",{for:"title"},"Title",-1))])]),e("div",Kc,[e("div",Jc,[q(e("input",{"onUpdate:modelValue":m[11]||(m[11]=n=>d.item.video.duration=n),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[Q,d.item.video.duration]]),m[25]||(m[25]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Qc,[(t(!0),s(O,null,L(d.item.video.genres,n=>(t(),s("span",Xc,v(n.genreName),1))),256)),(t(!0),s(O,null,L(d.item.video.categories,n=>(t(),s("span",Zc,v(n.categoryName),1))),256))]),e("div",em,[e("table",tm,[m[26]||(m[26]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",sm,[(t(!0),s(O,null,L(d.item.video.formats,(n,B)=>(t(),s("tr",om,[e("td",am,v(B+1),1),e("td",null,v(n.formatName),1),e("td",null,v(n.serverUrl),1),e("td",null,v(n.path),1)]))),256))])])])])])])],2),e("div",{class:le([f("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",lm,[e("div",nm,[e("button",{onClick:m[12]||(m[12]=n=>u()),class:"btn btn-primary"},m[28]||(m[28]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),j("Add ")]))]),e("div",rm,[e("table",im,[m[30]||(m[30]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.packageConfigurations,(n,B)=>(t(),s("tr",{key:n.packageConfigurationId,class:"align-middle"},[e("td",null,v(B+1),1),e("td",null,v(n.path),1),e("td",null,v(n.sourceGroup.name),1),e("td",null,v(n.type),1),e("td",dm,[e("button",{onClick:se=>r(n.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},m[29]||(m[29]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,um)])]))),128))]),_:1},512),[[Te,d.item.packageConfigurations.length>0]])])])])],2),e("div",{class:le([f("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",cm,[e("div",mm,[e("video",{id:`video-${d.item.vodSourceId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,fm),e("div",pm,[e("button",{onClick:m[13]||(m[13]=n=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},m[31]||(m[31]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:le([f("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},m[32]||(m[32]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:le([f("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},m[33]||(m[33]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:le([f("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},m[34]||(m[34]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):U("",!0)]),_:1},8,["errorMessage"]),N(lc,{ref_key:"modalAddPackageConfiguration",ref:Y,onRefresh:I},null,512),N(xc,{ref:"modalAddPlaybackConfiguration",onRefresh:m[14]||(m[14]=n=>I())},null,512)])]),_:1})}}},gm=["disabled"],bm={class:"container1"},ym={class:"row"},$m={class:"col-12 col-lg-6"},wm={class:"col"},hm={class:"form-floating mb-2"},_m=["value"],km={key:0,class:"d-block invalid-feedback"},Sm={class:"col"},Tm={class:"form-floating mb-2"},Mm=["disabled"],Im=["value"],Cm={key:0,class:"d-block invalid-feedback"},xm={class:"col-12 col-lg-6"},Vm={class:"col"},Pm={class:"form-floating mb-2"},Om={key:0,class:"d-block invalid-feedback"},Am={class:"row row-cols-1 row-cols-sm-3 mt-2"},Um={class:"col"},Dm={class:"form-floating mb-2"},Hm={key:0},Lm={key:1},Em={key:2},qm={key:3,class:"d-block invalid-feedback"},Bm={class:"col"},Nm={class:"form-floating mb-2"},Rm={key:0},Fm={key:1},zm={key:2,class:"d-block invalid-feedback"},Gm={class:"col"},jm={class:"form-floating mb-2"},Ym={key:0,class:"mt-3"},Wm={class:"table-responsive border mt-1"},Km={class:"table table-borderless table-sm mb-0 align-middle"},Jm=["onUpdate:modelValue","onChange"],Qm={key:0},Xm=["onUpdate:modelValue","onChange"],Zm={class:"text-start"},ef=["onClick"],tf={class:"col mt-2"},sf={class:"row row-cols-1 row-cols-sm-2"},of={class:"col"},af={class:"form-floating mb-2"},lf={class:"col"},nf={class:"form-floating mb-2"},rf={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),H=l,c=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),T={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},_=ye(T,c),G=he(()=>{const y=V.moment;if(c.startOffsetTime&&c.startOffsetTime!=="00:00:00"&&V.isValidTime(c.startOffsetTime)){const n=y().startOf("day"),B=n.format("YYYY-MM-DD ")+c.startOffsetTime,ne=y(B).subtract(n);return c.item.startOffsetMillis=ne.valueOf(),c.item.startOffsetMillis}return 0}),J=he(()=>{const y=V.moment;if(c.endOffsetTime&&c.endOffsetTime!=="00:00:00"&&V.isValidTime(c.endOffsetTime)){const n=y().startOf("day"),B=n.format("YYYY-MM-DD ")+c.endOffsetTime,ne=y(B).subtract(n);return c.item.endOffsetMillis=ne.valueOf(),c.item.endOffsetMillis}return 0}),d=he(()=>c.item.endOffsetMillis-c.item.startOffsetMillis),g=he(()=>V.moment.utc(d.value).format("HH:mm:ss")),Y=he(()=>{const y=c.item.adBreaks;return y&&y.length>0?y.reduce((B,se,ne)=>B+se.durationInMillis,0):0}),b=he(()=>{const y=d.value+Y.value;return V.moment.utc(y).format("HH:mm:ss")}),M=he(()=>V.moment.utc(Y.value).format("HH:mm:ss"));de(async()=>{await f()}),qe(()=>{c.hls&&(c.hls.stopLoad(),c.hls.destroy())});const f=async()=>{await S(),await r()},S=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.sourceLocations=n.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await I(c.item.sourceLocationId)}catch(y){C.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},I=async y=>{try{const n=`/api/v1/vodSources/lookup/source-location/${y}/?category=3`;await R.get(n).then(B=>{c.lookups.vodSources=B.data})}catch(n){C.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},u=async()=>{const y=c.selected.vodSource;c.item.vodSourceId=y.id,c.endOffsetTime=V.moment.utc(y.durationInMillis).format("HH:mm:ss"),await Promise.all([i(y.id),a(y.id)])},i=async y=>{try{let n=`/api/v1/vodSources/${y}/hls`;const B=await R.get(n).then(ne=>ne.data);if(c.hls){c.hls.loadSource(B);return}const se=document.getElementById("video-add-program-template");c.hls=V.createHlsStream(se,B,"Previewing filler slate.")}catch(n){C.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},a=async y=>{try{let n=`/api/v1/vodSources/${y}/blank-frames`;const B=await R.get(n).then(se=>se.data);B&&B.length>0&&(c.item.adBreaks=B.map(se=>{const ne=(se.endInMillis-se.startInMillis)/2+se.startInMillis;return{offsetTime:V.moment.utc(ne).format("HH:mm:ss"),offsetMillis:ne,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(n){C.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},r=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.adBreakSourceLocations=n.data})}catch(y){C.value=V.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},$=()=>{const y={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};c.item.adBreaks.push(y)},w=y=>{c.item.adBreaks.splice(y,1)},m=y=>{const n=V.moment,B=n().startOf("day"),se=B.format("YYYY-MM-DD ")+y.offsetTime,W=n(se).subtract(B);y.offsetMillis=W.valueOf()},X=y=>{const n=V.moment,B=n().startOf("day"),se=B.format("YYYY-MM-DD ")+y.durationTime,W=n(se).subtract(B);y.durationInMillis=W.valueOf()},K=async()=>{const y=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const B=V.clone(y.item),se=B.adBreaks.filter(ne=>ne.durationInMillis>0);B.adBreaks=se,await R.post("/api/v1/programtemplates/",B).then(ne=>{z.success("Add Program Template","Program template added.",{onClose:async()=>{const W=`${H.urlView}/${ne.data}`;await F.push(W)}})})}catch(B){C.value=V.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{x.value=!1}};return(y,n)=>{const B=ee("router-link"),se=ee("PageHeader"),ne=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:n[0]||(n[0]=W=>K()),class:"btn btn-primary"},n[11]||(n[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,gm),N(B,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(ne,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[e("div",null,[e("div",bm,[e("div",ym,[e("div",$m,[e("div",wm,[e("div",hm,[q(e("select",{"onUpdate:modelValue":n[1]||(n[1]=W=>c.item.sourceLocationId=W),onChange:n[2]||(n[2]=W=>I(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(c.lookups.sourceLocations,W=>(t(),s("option",{value:W.id},v(W.name),9,_m))),256))],544),[[ue,c.item.sourceLocationId]]),n[13]||(n[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(_).item.sourceLocationId.$error?(t(),s("div",km,[(t(!0),s(O,null,L(o(_).item.sourceLocationId.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),e("div",Sm,[e("div",Tm,[q(e("select",{"onUpdate:modelValue":n[3]||(n[3]=W=>c.selected.vodSource=W),onChange:n[4]||(n[4]=W=>u()),class:"form-select",id:"vodSourceId",disabled:c.item.adBreaks.length>0},[(t(!0),s(O,null,L(c.lookups.vodSources,W=>(t(),s("option",{value:W},v(o(V).moment.utc(W.durationInMillis).format("HH:mm:ss"))+" - "+v(W.name),9,Im))),256))],40,Mm),[[ue,c.selected.vodSource]]),n[14]||(n[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(_).item.vodSourceId.$error?(t(),s("div",Cm,[(t(!0),s(O,null,L(o(_).item.vodSourceId.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),n[15]||(n[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",xm,[e("div",Vm,[e("div",Pm,[q(e("input",{"onUpdate:modelValue":n[5]||(n[5]=W=>c.item.name=W),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,c.item.name]]),n[16]||(n[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(_).item.name.$error?(t(),s("div",Om,[(t(!0),s(O,null,L(o(_).item.name.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),e("div",Am,[e("div",Um,[e("div",null,[e("div",Dm,[q(e("input",{"onUpdate:modelValue":n[6]||(n[6]=W=>c.startOffsetTime=W),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Q,c.startOffsetTime]]),n[17]||(n[17]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),G.value>0&&G.value<3e4?(t(),s("div",Hm,n[18]||(n[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):U("",!0),G.value>J.value&&J.value>0?(t(),s("div",Lm,n[19]||(n[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):U("",!0),c.selected.vodSource&&G.value>=c.selected.vodSource.durationInMillis?(t(),s("div",Em,n[20]||(n[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(_).item.startOffsetMillis.$error?(t(),s("div",qm,[(t(!0),s(O,null,L(o(_).item.startOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),e("div",Bm,[e("div",null,[e("div",Nm,[q(e("input",{"onUpdate:modelValue":n[7]||(n[7]=W=>c.endOffsetTime=W),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Q,c.endOffsetTime]]),n[21]||(n[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),J.value>0&&J.value<3e4?(t(),s("div",Rm,n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):U("",!0),c.selected.vodSource&&J.value>c.selected.vodSource.durationInMillis?(t(),s("div",Fm,n[23]||(n[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(_).item.endOffsetMillis.$error?(t(),s("div",zm,[(t(!0),s(O,null,L(o(_).item.endOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),e("div",Gm,[e("div",jm,[q(e("input",{"onUpdate:modelValue":n[8]||(n[8]=W=>g.value=W),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,g.value]]),n[24]||(n[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),c.item.vodSourceId?(t(),s("div",Ym,[e("div",{class:"d-flex flex-row justify-content-between"},[n[26]||(n[26]=e("div",null,[e("h5",null," Ad Break ")],-1)),e("button",{onClick:$,class:"btn btn-outline-primary btn-sm"},n[25]||(n[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Wm,[e("table",Km,[n[29]||(n[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(c.item.adBreaks,(W,$e)=>(t(),s("tr",null,[e("td",null,v($e+1),1),e("td",null,[q(e("input",{"onUpdate:modelValue":ge=>W.offsetTime=ge,onChange:ge=>m(W),type:"time",step:"1",class:"form-control"},null,40,Jm),[[Q,W.offsetTime]]),W.offsetMillis>=c.selected.vodSource.durationInMillis?(t(),s("div",Qm,n[27]||(n[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0)]),e("td",null,[q(e("input",{"onUpdate:modelValue":ge=>W.durationTime=ge,onChange:ge=>X(W),type:"time",step:"1",class:"form-control"},null,40,Xm),[[Q,W.durationTime]])]),e("td",Zm,[e("button",{onClick:ge=>w($e),class:"btn btn-outline-warning btn-sm"},n[28]||(n[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ef)])]))),256))])]),n[30]||(n[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),j(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):U("",!0),e("div",tf,[n[33]||(n[33]=e("h5",null," Duration ",-1)),e("div",sf,[e("div",of,[e("div",af,[q(e("input",{"onUpdate:modelValue":n[9]||(n[9]=W=>M.value=W),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Q,M.value]]),n[31]||(n[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",lf,[e("div",nf,[q(e("input",{"onUpdate:modelValue":n[10]||(n[10]=W=>b.value=W),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Q,b.value]]),n[32]||(n[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},df=["disabled"],uf={class:"container1"},cf={class:"row"},mf={class:"col-12 col-lg-6"},ff={class:"col"},pf={class:"form-floating mb-2"},vf=["value"],gf={key:0,class:"d-block invalid-feedback"},bf={class:"col"},yf={class:"form-floating mb-2"},$f=["value"],wf={key:0,class:"d-block invalid-feedback"},hf={class:"col-12 col-lg-6"},_f={class:"col"},kf={class:"form-floating mb-2"},Sf={key:0,class:"d-block invalid-feedback"},Tf={class:"row row-cols- row-cols-sm-3"},Mf={class:"col"},If={class:"form-floating mb-2"},Cf={key:0},xf={key:1},Vf={key:2},Pf={key:3,class:"d-block invalid-feedback"},Of={class:"col"},Af={class:"form-floating"},Uf={key:0},Df={key:1},Hf={key:2,class:"d-block invalid-feedback"},Lf={class:"col"},Ef={class:"form-floating mb-2"},qf={key:0,class:"mt-2"},Bf={class:"table-responsive border mt-1"},Nf={class:"table table-borderless table-sm mb-0 align-middle"},Rf=["onUpdate:modelValue","onChange"],Ff={key:0},zf=["onUpdate:modelValue","onChange"],Gf=["onClick"],jf={class:"col mt-2"},Yf={class:"row row-cols-1 row-cols-sm-2"},Wf={class:"col"},Kf={class:"form-floating mb-2"},Jf={class:"col"},Qf={class:"form-floating mb-2"},Xf={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,closeWithReturnUrl:P,security:H}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),c=l,T=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),_={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0}}},G=ye(_,T),J=he(()=>{if(T.startOffsetTime&&T.startOffsetTime!=="00:00:00"&&V.isValidTime(T.startOffsetTime)){const n=V.moment,B=n().startOf("day"),ne=n(T.startOffsetTime,"hh:mm:ss").diff(B);return T.item.startOffsetMillis=ne.valueOf(),T.item.startOffsetMillis}return 0}),d=he(()=>{if(T.endOffsetTime&&T.endOffsetTime!=="00:00:00"&&V.isValidTime(T.endOffsetTime)){const n=V.moment,B=n().startOf("day"),ne=n(T.endOffsetTime,"hh:mm:ss").diff(B);return T.item.endOffsetMillis=ne.valueOf(),T.item.endOffsetMillis}return 0}),g=he(()=>T.item.endOffsetMillis-T.item.startOffsetMillis),Y=he(()=>V.moment.utc(g.value).format("HH:mm:ss")),b=he(()=>{const n=T.item.adBreaks;return n&&n.length>0?n.reduce((se,ne,W)=>se+ne.durationInMillis,0):0}),M=he(()=>{const n=g.value+b.value;return V.moment.utc(n).format("HH:mm:ss")}),f=he(()=>V.moment.utc(b.value).format("HH:mm:ss"));de(async()=>{await S()});const S=async()=>{await I(),await u()},I=async()=>{try{const n=`/api/v1/programtemplates/${c.id}/`;await R.get(n).then(B=>{T.item=B.data,T.startOffsetTime=V.moment.utc(T.item.startOffsetMillis).format("HH:mm:ss"),T.endOffsetTime=V.moment.utc(T.item.endOffsetMillis).format("HH:mm:ss");const se=T.startOffsetTime,ne=T.endOffsetTime;T.item.adBreaks.forEach(W=>{W.offsetTime=V.moment.utc(W.offsetMillis).format("HH:mm:ss"),W.durationTime=V.moment.utc(W.durationInMillis).format("HH:mm:ss")})})}catch(n){C.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},u=async()=>{await i()},i=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(B=>{T.lookups.sourceLocations=B.data}),T.item.sourceLocationId&&await a(T.item.sourceLocationId)}catch(n){C.value=V.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},a=async n=>{try{const B=`/api/v1/vodSources/lookup/source-location/${n}/?type=3`;await R.get(B).then(ne=>{T.lookups.vodSources=ne.data});const se=T.lookups.vodSources.find(ne=>ne.id==T.item.vodSourceId);T.selected.vodSource=se,await r()}catch(B){C.value=V.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},r=async()=>{const n=T.selected.vodSource;n&&(T.item.vodSourceId!=n.id&&(T.startOffsetTime=V.moment.utc(0).format("HH:mm:ss"),T.endOffsetTime=V.moment.utc(n.durationInMillis).format("HH:mm:ss")),T.item.vodSourceId=n.id,await $(n.id))},$=async n=>{try{let B=`/api/v1/vodSources/${n}/hls`;const se=await R.get(B).then(W=>W.data);T.hls&&T.hls.destroy();const ne=document.getElementById("video-edit-program-template");T.hls=V.createHlsStream(ne,se,"Previewing VOD Content.")}catch(B){C.value=V.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{}},w=()=>{const n={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};T.item.adBreaks.push(n)},m=n=>{T.item.adBreaks.splice(n,1)},X=n=>{const B=V.moment,se=B().startOf("day"),ne=se.format("YYYY-MM-DD ")+n.offsetTime,$e=B(ne).subtract(se);n.offsetMillis=$e.valueOf()},K=n=>{const B=V.moment,se=B().startOf("day"),ne=se.format("YYYY-MM-DD ")+n.durationTime,$e=B(ne).subtract(se);n.durationInMillis=$e.valueOf()},y=async()=>{const n=T;if(x.value)return;if(!await G.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const se=V.clone(n.item);debugger;se.startOffsetMillis=J.value,se.endOffsetMillis=d.value,await R.put("/api/v1/programtemplates/",se).then(ne=>{z.success("Edit Program Template","Program template edit.",{onClose:async()=>{const W=`${c.urlView}/${c.id}`;await F.push(W)}})})}catch(se){C.value=V.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{x.value=!1}};return(n,B)=>{const se=ee("PageHeader"),ne=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(G).$dirty&&o(G).$invalid,onClick:B[0]||(B[0]=W=>y()),class:"btn btn-primary"},B[13]||(B[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,df),e("button",{onClick:B[1]||(B[1]=W=>S()),class:"btn btn-secondary ms-2"},B[14]||(B[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:B[2]||(B[2]=W=>o(P)(c.urlMain)),class:"btn btn-secondary ms-1"},B[15]||(B[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(ne,{errorMessage:o(C),vuelidate:o(G)},{default:E(()=>[e("div",null,[e("div",uf,[e("div",cf,[e("div",mf,[e("div",ff,[e("div",pf,[q(e("select",{"onUpdate:modelValue":B[3]||(B[3]=W=>T.item.sourceLocationId=W),onChange:B[4]||(B[4]=W=>a(T.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(T.lookups.sourceLocations,W=>(t(),s("option",{value:W.id},v(W.name),9,vf))),256))],544),[[ue,T.item.sourceLocationId]]),B[16]||(B[16]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(G).item.sourceLocationId.$error?(t(),s("div",gf,[(t(!0),s(O,null,L(o(G).item.sourceLocationId.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),e("div",bf,[e("div",yf,[q(e("select",{"onUpdate:modelValue":B[5]||(B[5]=W=>T.selected.vodSource=W),onChange:B[6]||(B[6]=W=>r()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(T.lookups.vodSources,W=>(t(),s("option",{value:W},v(o(V).moment.utc(W.durationInMillis).format("HH:mm:ss"))+" - "+v(W.name),9,$f))),256))],544),[[ue,T.selected.vodSource]]),B[17]||(B[17]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(G).item.vodSourceId.$error?(t(),s("div",wf,[(t(!0),s(O,null,L(o(G).item.vodSourceId.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),B[18]||(B[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",hf,[e("div",_f,[e("div",kf,[q(e("input",{"onUpdate:modelValue":B[7]||(B[7]=W=>T.item.name=W),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,T.item.name]]),B[19]||(B[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(G).item.name.$error?(t(),s("div",Sf,[(t(!0),s(O,null,L(o(G).item.name.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)])]),e("div",Tf,[e("div",Mf,[e("div",If,[q(e("input",{"onUpdate:modelValue":B[8]||(B[8]=W=>T.startOffsetTime=W),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Q,T.startOffsetTime]]),B[20]||(B[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),J.value>0&&J.value<3e4?(t(),s("div",Cf,B[21]||(B[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):U("",!0),J.value>d.value&&d.value>0?(t(),s("div",xf,B[22]||(B[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):U("",!0),T.selected.vodSource&&J.value>=T.selected.vodSource.durationInMillis?(t(),s("div",Vf,B[23]||(B[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(G).item.startOffsetMillis.$error?(t(),s("div",Pf,[(t(!0),s(O,null,L(o(G).item.startOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)]),e("div",Of,[e("div",Af,[q(e("input",{"onUpdate:modelValue":B[9]||(B[9]=W=>T.endOffsetTime=W),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Q,T.endOffsetTime]]),B[24]||(B[24]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),d.value>0&&d.value<3e4?(t(),s("div",Uf,B[25]||(B[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):U("",!0),T.selected.vodSource&&d.value>T.selected.vodSource.durationInMillis?(t(),s("div",Df,B[26]||(B[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0),o(G).item.endOffsetMillis.$error?(t(),s("div",Hf,[(t(!0),s(O,null,L(o(G).item.endOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},v(W.$message),1))),128))])):U("",!0)]),e("div",Lf,[e("div",Ef,[q(e("input",{"onUpdate:modelValue":B[10]||(B[10]=W=>Y.value=W),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,Y.value]]),B[27]||(B[27]=e("label",{for:"durationTime"},"Clip",-1))])])]),T.selected.vodSource?(t(),s("div",qf,[e("div",{class:"d-flex flex-row justify-content-between"},[B[29]||(B[29]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary btn-sm"},B[28]||(B[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Bf,[e("table",Nf,[B[32]||(B[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(T.item.adBreaks,(W,$e)=>(t(),s("tr",null,[e("td",null,v($e+1),1),e("td",null,[q(e("input",{"onUpdate:modelValue":ge=>W.offsetTime=ge,onChange:ge=>X(W),type:"time",step:"1",class:"form-control"},null,40,Rf),[[Q,W.offsetTime]]),W.offsetMillis>=T.selected.vodSource.durationInMillis?(t(),s("div",Ff,B[30]||(B[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):U("",!0)]),e("td",null,[q(e("input",{"onUpdate:modelValue":ge=>W.durationTime=ge,onChange:ge=>K(W),type:"time",step:"1",class:"form-control"},null,40,zf),[[Q,W.durationTime]])]),e("td",null,[e("button",{onClick:ge=>m($e),class:"btn btn-outline-warning btn-sm"},B[31]||(B[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gf)])]))),256))])]),B[33]||(B[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),j(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):U("",!0),e("div",jf,[B[36]||(B[36]=e("h5",null," Duration ",-1)),e("div",Yf,[e("div",Wf,[e("div",Kf,[q(e("input",{"onUpdate:modelValue":B[11]||(B[11]=W=>f.value=W),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Q,f.value]]),B[34]||(B[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Jf,[e("div",Qf,[q(e("input",{"onUpdate:modelValue":B[12]||(B[12]=W=>M.value=W),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Q,M.value]]),B[35]||(B[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Zf={class:"ms-1"},ep={class:"input-group"},tp={class:"table-responsive border shadow-sm"},sp={class:"table table-hover mb-0"},op=["textContent"],ap={class:"d-flex flex-row"},lp={class:""},np={class:"mb-1"},rp=["src"],ip={class:"ms-2"},dp={key:0,class:"fas fa-fw fa-check-circle text-success"},up={class:"text-wrap text-truncate",style:{width:"20px !important"}},cp={class:"badge bg-primary me-1"},mp={key:0},fp={class:"badge bg-info me-1"},pp={class:"text-end me-0 me-sm-5"},vp="/api/v1/programTemplates/search",gp={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(l){Se("$config");const h=be().user,{appTitle:x,pageTitle:k,busy:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,generateReturnUrl:c,security:T,filter:_,initializeFilter:G,getQuery:J,saveQuery:d,search:g,getRowNumber:Y,setSelected:b,isSelected:M}=He({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${h==null?void 0:h.userId}/program-templates/search`,baseUrl:vp,filter:{updateUrl:!0}});return de(async()=>{G(),await g()}),(f,S)=>{const I=ee("router-link"),u=ee("PageHeader"),i=ee("m-pagination"),a=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(u,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:E(()=>[N(I,{to:l.urlAdd,class:"btn btn-primary"},{default:E(()=>S[3]||(S[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zf,[e("div",ep,[q(e("input",{"onUpdate:modelValue":S[0]||(S[0]=r=>o(_).query.criteria=r),onKeyup:S[1]||(S[1]=De(r=>o(g)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(_).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:S[2]||(S[2]=r=>o(g)(1))},S[4]||(S[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(a,{errorMessage:o(R)},{default:E(()=>[e("div",tp,[e("table",sp,[S[5]||(S[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(o(_).items,(r,$)=>(t(),s("tr",{key:r.programTemplateId},[e("td",{textContent:v(o(Y)($)),class:"text-center"},null,8,op),e("td",null,[e("div",ap,[e("div",lp,[r.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(r.vodSource.video.thumbnails,w=>(t(),s("div",np,[e("img",{src:w.url,class:"img-fuild border",width:"128"},null,8,rp)]))),256)):U("",!0)]),e("div",ip,[N(I,{to:`${l.urlView}/${r.programTemplateId}`,class:"text-decoration-none"},{default:E(()=>[r.arn?(t(),s("span",dp)):U("",!0),e("span",up,v(r.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,L(r.vodSource.video.categories,w=>(t(),s("div",null,[e("span",cp,v(w.categoryName),1)]))),256)),r.vodSource.video.genres.length>0?(t(),s("div",mp,[(t(!0),s(O,null,L(r.vodSource.video.genres,w=>(t(),s("span",fp,v(w.genreName),1))),256))])):U("",!0)])])])]),e("td",pp,v(o(Z).moment.utc(r.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[N(I,{to:`${l.urlViewSourceLocation}/${r.sourceLocationId}/${o(c)()}`,class:"text-decoration-none"},{default:E(()=>[j(v(r.sourceLocation.name),1)]),_:2},1032,["to"])]),e("td",null,[N(I,{to:`${l.urlViewVodSource}/${r.vodSourceId}/${o(c)()}`,class:"text-decoration-none"},{default:E(()=>[j(v(r.vodSource.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,o(_).items.length>0]])])]),N(i,{filter:o(_),search:o(g),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},bp={key:0},yp={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},$p={class:"nav-item",role:"presentation"},wp={class:"nav-item",role:"presentation"},hp={class:"nav-item d-none",role:"presentation"},_p={class:"tab-content",id:"myTabContent"},kp={class:"mt-2"},Sp={class:""},Tp={class:"row row-cols-1 row-cols-lg-2"},Mp={class:"col"},Ip={class:"col"},Cp={class:"form-floating mb-2"},xp={class:"col"},Vp={class:"form-floating mb-2"},Pp={class:"col"},Op={class:"col"},Ap={class:"form-floating mb-2"},Up={class:"row row-cols-1 row-cols-sm-3"},Dp={class:"col"},Hp={class:"form-floating mb-2"},Lp={class:"col"},Ep={class:"form-floating mb-2"},qp={class:"col"},Bp={class:"form-floating mb-2"},Np={class:"row row-cols-1 row-cols-sm-2"},Rp={class:"col"},Fp={class:"form-floating mb-2"},zp={class:"col"},Gp={class:"form-floating mb-2"},jp={class:"mt-2"},Yp={class:"table-responsive"},Wp={class:"table table-hover mb-0"},Kp={class:"text-center"},Jp={class:"mt-2"},Qp={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:h,pageTitle:x,busy:k,isDirty:A,validations:C,infoMessage:F,warningMessage:R,errorMessage:V,router:z,axios:Z,utils:P,toasts:H,close:c,closeWithReturnUrl:T,generateReturnUrl:_,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});Se("$config");const J=be();J.user;const d=me({user:J.user,item:null,hls:null}),g=re();de(async()=>{await f(),g.value=P.getPageTab("programTemplate")||"information-tab"});const Y=u=>{P.setPageTab("programTemplate",u),g.value=u},b=u=>u!==g.value?"":"active",M=u=>u!==g.value?"":"show active",f=async()=>{const u=d;if(!k.value)try{k.value=!0,V.value="",d.item=null;const i=`/api/v1/programTemplates/${p.id}/`;await Z.get(i).then(a=>{u.item=a.data;const r=u.item;r.startOffsetTime=P.moment.utc(r.startOffsetMillis).format("HH:mm:ss"),r.endOffsetTime=P.moment.utc(r.endOffsetMillis).format("HH:mm:ss"),r.durationTime=P.moment.utc(r.durationInMillis).format("HH:mm:ss"),r.adBreaksDurationTime=P.moment.utc(r.adBreaksDurationInMillis).format("HH:mm:ss"),r.totalProgramTemplateDurationTime=P.moment.utc(r.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const $=r.vodSource.video,w=$.durationInMillis;$.durationInMillis=P.moment.utc(w).format("HH:mm:ss")}),d.item.vodSource&&await I(d.item.vodSourceId)}catch(i){V.value=P.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{await f()},I=async u=>{try{let i=`/api/v1/vodSources/${u}/hls`;const a=await Z.get(i).then($=>$.data);d.hls&&d.hls.destroy();const r=document.getElementById("video-view-program-template");d.hls=P.createHlsStream(r,a,"Previewing VOD.")}catch(i){V.value=P.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}};return(u,i)=>{const a=ee("router-link"),r=ee("PageHeader"),$=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(r,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(x)},{default:E(()=>[N(a,{to:`${l.urlEdit}/${l.id}/${o(_)()}`,class:"ms-2 btn btn-primary"},{default:E(()=>i[13]||(i[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:i[0]||(i[0]=w=>S()),class:"ms-2 btn btn-secondary"},i[14]||(i[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:i[1]||(i[1]=w=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},i[15]||(i[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N($,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",bp,[e("div",null,[e("ul",yp,[e("li",$p,[e("button",{onClick:i[2]||(i[2]=w=>Y("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",wp,[e("button",{onClick:i[3]||(i[3]=w=>Y("adBreaks-tab")),class:le([b("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",hp,[e("button",{onClick:i[4]||(i[4]=w=>Y("programs-tab")),class:le([b("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",_p,[e("div",{class:le([M("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",kp,[e("div",Sp,[e("div",Tp,[e("div",Mp,[e("div",Ip,[e("div",Cp,[q(e("input",{"onUpdate:modelValue":i[5]||(i[5]=w=>d.item.sourceLocation.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.sourceLocation.name]]),i[16]||(i[16]=e("label",{for:"name",class:"small fw-bold"},"Source Location",-1))])]),e("div",xp,[e("div",Vp,[q(e("input",{"onUpdate:modelValue":i[6]||(i[6]=w=>d.item.vodSource.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.vodSource.name]]),i[17]||(i[17]=e("label",{for:"name",class:"small fw-bold"},"VOD Name",-1))])]),i[18]||(i[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",Pp,[e("div",Op,[e("div",Ap,[q(e("input",{"onUpdate:modelValue":i[7]||(i[7]=w=>d.item.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),i[19]||(i[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1))])]),e("div",Up,[e("div",Dp,[e("div",Hp,[q(e("input",{"onUpdate:modelValue":i[8]||(i[8]=w=>d.item.startOffsetTime=w),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Q,d.item.startOffsetTime]]),i[20]||(i[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start Offset",-1))])]),e("div",Lp,[e("div",Ep,[q(e("input",{"onUpdate:modelValue":i[9]||(i[9]=w=>d.item.endOffsetTime=w),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Q,d.item.endOffsetTime]]),i[21]||(i[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End Offset",-1))])]),e("div",qp,[e("div",Bp,[q(e("input",{"onUpdate:modelValue":i[10]||(i[10]=w=>d.item.durationTime=w),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,d.item.durationTime]]),i[22]||(i[22]=e("label",{for:"durationTime",class:"small fw-bold"},"Clip",-1))])])]),i[25]||(i[25]=e("h5",null," Duration ",-1)),e("div",Np,[e("div",Rp,[e("div",Fp,[q(e("input",{"onUpdate:modelValue":i[11]||(i[11]=w=>d.item.adBreaksDurationTime=w),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Q,d.item.adBreaksDurationTime]]),i[23]||(i[23]=e("label",{for:"adBreaksDurationTime",class:"small fw-bold"},"Total Ad Breaks",-1))])]),e("div",zp,[e("div",Gp,[q(e("input",{"onUpdate:modelValue":i[12]||(i[12]=w=>d.item.totalProgramTemplateDurationTime=w),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Q,d.item.totalProgramTemplateDurationTime]]),i[24]||(i[24]=e("label",{for:"totalProgramTemplateDurationTime",class:"small fw-bold"},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:le([M("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",jp,[e("div",Yp,[e("table",Wp,[i[26]||(i[26]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.adBreaks,(w,m)=>(t(),s("tr",{key:w.programTemplateAdBreakId},[e("td",Kp,v(m+1),1),e("td",null,v(o(P).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(P).moment.utc(w.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,d.item.adBreaks.length>0]])])])])],2),e("div",{class:le([M("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Jp,[e("pre",null,v(d.item.programs),1)])],2)])])])):U("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Xp=["disabled"],Zp={class:"row row-cols-1 row-cols-sm-3"},ev={class:"col-sm-6"},tv={class:"form-floating mb-2"},sv={key:0,class:"d-block invalid-feedback"},ov={class:"col-sm-3"},av={class:"form-floating mb-2"},lv={key:0,class:"d-block invalid-feedback"},nv={class:"col-sm-3"},rv={class:"form-floating mb-2"},iv={key:0,class:"d-block invalid-feedback"},dv={class:"row row-cols-1 row-cols-sm-2"},uv={class:"col"},cv={class:"form-floating mb-2"},mv=["value"],fv={key:0,class:"d-block invalid-feedback"},pv={class:"col"},vv={class:"form-floating mb-2"},gv=["value"],bv={key:0,class:"d-block invalid-feedback"},yv={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),H=l,c=me({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),T={item:{name:{title:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},tier:{title:te.withMessage("Tier is required.",oe),$autoDirty:!0,$lazy:!0},playbackMode:{title:te.withMessage("PlaybackMode is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:te.withMessage("Filler Slate Source Location is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:te.withMessage("Filler Slate Vod Source is required.",oe),$autoDirty:!0,$lazy:!0},policy:{title:te.withMessage("Policy is required.",oe),$autoDirty:!0,$lazy:!0}}},_=ye(T,c);de(async()=>{await G()});const G=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(M=>{c.lookups.sourceLocations=M.data,c.lookups.sourceLocations.length===1&&(c.item.fillerSlateSourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.fillerSlateSourceLocationId&&await d(c.item.fillerSlateSourceLocationId)}catch(b){C.value=V.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},J=async()=>{c.item.fillerSlateVodSourceId=null,await d(c.item.fillerSlateSourceLocationId)},d=async b=>{try{let M=`/api/v1/vodSources/lookup/source-location/${b}/?category=2`;await R.get(M).then(f=>{c.lookups.vodSources=f.data})}catch(M){C.value=V.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},g=()=>{if(c.item.name){const b=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${c.item.name}"}]}`;c.item.policy=b}else c.item.policy=null},Y=async()=>{const b=c;if(x.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,C.value="";const f=V.clone(b.item);await R.post("/api/v1/channels/",f).then(S=>{z.success("Add Channel","Channel added.",{onClose:async()=>{const I=`${H.urlView}/${S.data}`;await F.push(I)}})})}catch(f){C.value=V.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{x.value=!1}};return(b,M)=>{const f=ee("router-link"),S=ee("PageHeader"),I=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(h)},{default:E(()=>[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:M[0]||(M[0]=u=>Y()),class:"btn btn-primary"},M[8]||(M[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xp),N(f,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:E(()=>M[9]||(M[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(I,{errorMessage:o(C),vuelidate:o(_)},{default:E(()=>[e("div",null,[e("div",Zp,[e("div",ev,[e("div",tv,[q(e("input",{"onUpdate:modelValue":M[1]||(M[1]=u=>c.item.name=u),onChange:M[2]||(M[2]=u=>g()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Q,c.item.name]]),M[10]||(M[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(_).item.name.$error?(t(),s("div",sv,[(t(!0),s(O,null,L(o(_).item.name.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",ov,[e("div",av,[q(e("input",{"onUpdate:modelValue":M[3]||(M[3]=u=>c.item.tier=u),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Q,c.item.tier]]),M[11]||(M[11]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(_).item.tier.$error?(t(),s("div",lv,[(t(!0),s(O,null,L(o(_).item.tier.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",nv,[e("div",rv,[q(e("input",{"onUpdate:modelValue":M[4]||(M[4]=u=>c.item.playbackMode=u),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Q,c.item.playbackMode]]),M[12]||(M[12]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(_).item.playbackMode.$error?(t(),s("div",iv,[(t(!0),s(O,null,L(o(_).item.playbackMode.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])])]),M[15]||(M[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",dv,[e("div",uv,[e("div",cv,[q(e("select",{"onUpdate:modelValue":M[5]||(M[5]=u=>c.item.fillerSlateSourceLocationId=u),onChange:M[6]||(M[6]=u=>J()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(O,null,L(c.lookups.sourceLocations,u=>(t(),s("option",{value:u.id},v(u.name),9,mv))),256))],544),[[ue,c.item.fillerSlateSourceLocationId]]),M[13]||(M[13]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(_).item.fillerSlateSourceLocationId.$error?(t(),s("div",fv,[(t(!0),s(O,null,L(o(_).item.fillerSlateSourceLocationId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])]),e("div",pv,[e("div",vv,[q(e("select",{"onUpdate:modelValue":M[7]||(M[7]=u=>c.item.fillerSlateVodSourceId=u),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(O,null,L(c.lookups.vodSources,u=>(t(),s("option",{value:u.id},v(u.name),9,gv))),256))],512),[[ue,c.item.fillerSlateVodSourceId]]),M[14]||(M[14]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(_).item.fillerSlateVodSourceId.$error?(t(),s("div",bv,[(t(!0),s(O,null,L(o(_).item.fillerSlateVodSourceId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):U("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},$v={components:{Page:Ke},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function wv(l,p,h,x,k,A){const C=ee("Page");return t(),ce(C,{id:h.id,urlView:h.urlView},null,8,["id","urlView"])}const hv=Me($v,[["render",wv]]),_v={class:"ms-1"},kv={class:"input-group"},Sv={class:"table-responsive border shadow-sm"},Tv={class:"table table-hover mb-0"},Mv=["textContent"],Iv={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Cv={key:0,class:"badge bg-success"},xv={key:1,class:"badge bg-secondary"},Vv="/api/v1/channels/search",Pv={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(l){Se("$config");const h=be().user,{appTitle:x,pageTitle:k,busy:A,infoMessage:C,warningMessage:F,errorMessage:R,router:V,axios:z,utils:Z,toasts:P,close:H,security:c,filter:T,initializeFilter:_,getQuery:G,saveQuery:J,search:d,getRowNumber:g,setSelected:Y,isSelected:b}=He({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${h==null?void 0:h.userId}/Channels/search`,baseUrl:Vv,filter:{updateUrl:!0}});return de(async()=>{_(),await d()}),(M,f)=>{const S=ee("router-link"),I=ee("PageHeader"),u=ee("m-pagination"),i=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(I,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k)},{default:E(()=>[N(S,{to:l.urlAdd,class:"btn btn-primary"},{default:E(()=>f[3]||(f[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",_v,[e("div",kv,[q(e("input",{"onUpdate:modelValue":f[0]||(f[0]=a=>o(T).query.criteria=a),onKeyup:f[1]||(f[1]=De(a=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:f[2]||(f[2]=a=>o(d)(1))},f[4]||(f[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(i,{errorMessage:o(R)},{default:E(()=>[e("div",Sv,[e("table",Tv,[f[5]||(f[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(o(T).items,(a,r)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:v(o(g)(r)),class:"text-center"},null,8,Mv),e("td",null,[N(S,{to:`${l.urlView}/${a.channelId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:E(()=>[a.arn?(t(),s("span",Iv)):U("",!0),j(v(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",Cv,v(a.state),1)):a.state==="STOPPED"?(t(),s("span",xv,v(a.state),1)):U("",!0)])]),e("td",null,v(a.playbackMode),1),e("td",null,v(a.tier),1)]))),128))]),_:1},512),[[Te,o(T).items.length>0]])])]),N(u,{filter:o(T),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ov=["id"],Av={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Uv={class:"modal-content"},Dv={class:"modal-header"},Hv={class:"modal-title"},Lv={class:"modal-body"},Ev={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},qv=["innerHTML"],Bv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Nv={class:"container"},Rv={class:"col"},Fv={class:"form-floating mb-2"},zv=["value"],Gv={class:"row row-cols-1 row-cols-sm-2"},jv={class:"col"},Yv={class:"form-floating mb-2"},Wv={key:0,class:"d-block invalid-feedback"},Kv={class:"col"},Jv={class:"form-floating mb-2"},Qv={key:0,class:"d-block invalid-feedback"},Xv={key:0},Zv={class:"row row-cols-1 row-cols-sm-3"},eg={class:"col"},tg={class:"form-floating mb-2"},sg={class:"col"},og={class:"form-floating mb-2"},ag={class:"col"},lg={class:"form-floating mb-2"},ng={class:"row row-cols-1 row-cols-sm-2"},rg={class:"col"},ig={class:"form-floating mb-2"},dg={class:"col"},ug={class:"form-floating mb-2"},cg={class:"row row-cols-1 row-cols-sm-2"},mg={class:"col"},fg={class:"form-floating mb-2"},pg={class:"col"},vg={class:"form-floating mb-2"},gg={key:1},bg={class:"table-responsive border mt-1"},yg={class:"table mb-0"},$g=["onUpdate:modelValue"],wg=["value"],hg={class:"modal-footer"},_g=["disabled"],kg={__name:"_addProgramFromTemplate",emits:["onClose"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),G=h,J=re(),d=re("modalAddProgramFromTemplate"),g=me({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=ye(Y,g);de(async()=>{b.value.$reset()});const M=async(K,y,n)=>{J.value=K;const B=g;F.value.clear(),z.value="";const se=H.moment(n),W=se.format("YYYY-MM-DD HH:mm"),$e=se.format("YYYYMMDD_HHmm")+"_PRG_";B.eventId=y,B.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},B.selected={programTemplate:null},B.item={programTemplateId:null,name:$e,dateScheduledStart:W,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await I(),await u(),b.value.$reset();var ge=document.getElementById(d.value),Le=_e.getOrCreateInstance(ge);Le.show()},f=async K=>{const y=g.selected.channel.programs;if(K&&y.find(Le=>Le.name===g.item.name)){alert(`Program name = [${g.item.name}] already exists.`);return}if(!K){G("onClose",{eventId:g.eventId},K);var W=document.getElementById(d.value),$e=_e.getOrCreateInstance(W);$e.hide();return}const n=g;n.item.dateScheduledStart;debugger;const B=H.moment(n.item.dateScheduledStart).utc(!0).format(),se=H.moment(n.item.dateScheduledStart).add(n.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format(),ne={eventId:n.eventId,programTemplateId:n.selected.programTemplate.programTemplateId,channelId:n.selected.channel.channelId,name:n.item.name,dateScheduledStart:B,dateScheduledEnd:se,adBreaks:n.selected.programTemplate.adBreaks.map(ge=>({sourceLocationId:n.selected.programTemplate.sourceLocationId,vodSourceId:ge.vodSourceId,offsetMillis:ge.offsetMillis,durationInMillis:ge.durationInMillis}))};G("onClose",ne,K);var W=document.getElementById(d.value),$e=_e.getOrCreateInstance(W);$e.hide()},S=async()=>{await f(!0)},I=async()=>{try{const K=`/api/v1/channels/${J.value}/`;await P.get(K).then(y=>{g.selected.channel=y.data})}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},u=async()=>{await $(),await X(),await i()},i=async()=>{try{const K=`/api/v1/programTemplates/lookup/by-channel/${J.value}`;await P.get(K).then(y=>{g.lookups.programTemplates=y.data,g.lookups.programTemplates.length===1&&(g.item.programTemplateId=g.lookups.programTemplates[0].id)}),g.item.programTemplateId&&await a()}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},a=async()=>{await r(g.item.programTemplateId)},r=async K=>{try{const y=`/api/v1/programTemplates/${K}/`;await P.get(y).then(se=>{g.selected.programTemplate=se.data;const ne=g.selected.programTemplate;ne.startOffsetTime=H.moment.utc(ne.startOffsetMillis).format("HH:mm:ss"),ne.endOffsetTime=H.moment.utc(ne.endOffsetMillis).format("HH:mm:ss"),ne.durationTime=H.moment.utc(ne.durationInMillis).format("HH:mm:ss"),ne.adBreaksDurationTime=H.moment.utc(ne.adBreaksDurationInMillis).format("HH:mm:ss"),ne.totalProgramTemplateDurationTime=H.moment.utc(ne.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ne.adBreaks.forEach(W=>{W.vodSourceId=null})});const n=g,B=n.selected.channel.outputs[0].outputType;await m(n.selected.programTemplate.sourceLocationId,B)}catch(y){z.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},$=async()=>{try{await P.get("/api/v1/sourcelocations/lookup/").then(y=>{g.lookups.sourceLocations=y.data,g.lookups.sourceLocations.length===1&&(g.item.sourceLocationId=g.lookups.sourceLocations[0].id)}),g.item.sourceLocationId&&await w(g.item.sourceLocationId)}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},w=async K=>{try{let y=`/api/v1/vodSources/lookup/source-location/${K}`;await P.get(y).then(n=>{g.lookups.vodSources=n.data})}catch(y){z.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},m=async(K,y)=>{try{let n=`/api/v1/vodsources/lookup/source-location/${K}/output-type/${y}`;await P.get(n).then(B=>{g.lookups.adBreakVodSources=B.data})}catch(n){z.value=H.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},X=async()=>{try{const K=`/api/v1/programs/lookup/?channelId=${J.value}`;await P.get(K).then(y=>{g.lookups.channelPrograms=y.data;const n=g.lookups.channelPrograms.length})}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}};return p({open:M,close:f}),(K,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-hidden":"true"},[e("div",Av,[e("div",Uv,[e("div",Dv,[e("h5",Hv,[y[14]||(y[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=n=>f(!1)),"aria-label":"Close"})]),e("div",Lv,[o(z)?(t(),s("div",Ev,[y[15]||(y[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,qv)])):U("",!0),o(F).size>0?(t(),s("div",Bv,[y[16]||(y[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),n=>(t(),s("li",null,v(n),1))),256))])])):U("",!0),e("div",Nv,[e("div",Rv,[e("div",Fv,[q(e("select",{"onUpdate:modelValue":y[1]||(y[1]=n=>g.item.programTemplateId=n),class:"form-select",onChange:y[2]||(y[2]=n=>a()),id:"sourceLocationId"},[(t(!0),s(O,null,L(g.lookups.programTemplates,n=>(t(),s("option",{value:n.id}," ["+v(o(H).moment.utc(n.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+v(n.name),9,zv))),256))],544),[[ue,g.item.programTemplateId]]),y[17]||(y[17]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Gv,[e("div",jv,[e("div",Yv,[q(e("input",{"onUpdate:modelValue":y[3]||(y[3]=n=>g.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),y[18]||(y[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Wv,[(t(!0),s(O,null,L(o(b).item.name.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",Kv,[e("div",Jv,[q(e("input",{"onUpdate:modelValue":y[4]||(y[4]=n=>g.item.dateScheduledStart=n),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Q,g.item.dateScheduledStart]]),y[19]||(y[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",Qv,[(t(!0),s(O,null,L(o(b).item.dateScheduledStart.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])])]),g.selected.programTemplate?(t(),s("div",Xv,[e("div",Zv,[e("div",eg,[e("div",tg,[q(e("input",{"onUpdate:modelValue":y[5]||(y[5]=n=>g.selected.programTemplate.startOffsetTime=n),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Q,g.selected.programTemplate.startOffsetTime]]),y[20]||(y[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",sg,[e("div",og,[q(e("input",{"onUpdate:modelValue":y[6]||(y[6]=n=>g.selected.programTemplate.endOffsetTime=n),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Q,g.selected.programTemplate.endOffsetTime]]),y[21]||(y[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",ag,[e("div",lg,[q(e("input",{"onUpdate:modelValue":y[7]||(y[7]=n=>g.selected.programTemplate.durationTime=n),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,g.selected.programTemplate.durationTime]]),y[22]||(y[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",ng,[e("div",rg,[e("div",ig,[q(e("input",{"onUpdate:modelValue":y[8]||(y[8]=n=>g.selected.programTemplate.adBreaksDurationTime=n),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Q,g.selected.programTemplate.adBreaksDurationTime]]),y[23]||(y[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",dg,[e("div",ug,[q(e("input",{"onUpdate:modelValue":y[9]||(y[9]=n=>g.selected.programTemplate.totalProgramTemplateDurationTime=n),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Q,g.selected.programTemplate.totalProgramTemplateDurationTime]]),y[24]||(y[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",cg,[e("div",mg,[e("div",fg,[q(e("input",{"onUpdate:modelValue":y[10]||(y[10]=n=>g.selected.programTemplate.sourceLocation.name=n),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.selected.programTemplate.sourceLocation.name]]),y[25]||(y[25]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",pg,[e("div",vg,[q(e("input",{"onUpdate:modelValue":y[11]||(y[11]=n=>g.selected.programTemplate.vodSource.name=n),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.selected.programTemplate.vodSource.name]]),y[26]||(y[26]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):U("",!0),y[29]||(y[29]=e("hr",null,null,-1)),g.selected.programTemplate?(t(),s("div",gg,[y[28]||(y[28]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",bg,[e("table",yg,[y[27]||(y[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(g.selected.programTemplate.adBreaks,(n,B)=>(t(),s("tr",null,[e("td",null,v(B+1),1),e("td",null,v(o(H).moment.utc(n.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(H).moment.utc(n.durationInMillis).format("HH:mm:ss")),1),e("td",null,[q(e("select",{"onUpdate:modelValue":se=>n.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(g.lookups.adBreakVodSources,se=>(t(),s(O,null,[se.durationInMillis===n.durationInMillis?(t(),s("option",{key:0,value:se.id}," ["+v(o(H).moment.utc(se.durationInMillis).format("HH:mm:ss"))+"] "+v(se.name),9,wg)):U("",!0)],64))),256))],8,$g),[[ue,n.vodSourceId]])])]))),256))])])])])):U("",!0)])]),e("div",hg,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:y[12]||(y[12]=n=>S()),class:"btn btn-primary",type:"button"},y[30]||(y[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_g),e("button",{onClick:y[13]||(y[13]=n=>f(!1)),class:"btn btn-secondary ms-1"},y[31]||(y[31]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Ov))}},Sg=["id"],Tg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mg={class:"modal-content"},Ig={class:"modal-header"},Cg={class:"modal-title"},xg={class:"modal-body"},Vg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Pg=["innerHTML"],Og={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ag={key:2,class:"container"},Ug={class:"row row-cols-1 row-cols-sm-2"},Dg={key:0,class:"col"},Hg={class:"form-floating mb-2"},Lg={key:1,class:"col"},Eg={class:"form-floating mb-2"},qg={class:"row row-cols-1 row-cols-sm-3"},Bg={class:"col"},Ng={class:"form-floating mb-2"},Rg={id:"name",class:"form-control",placeholder:"Name"},Fg={key:0,class:"text-wrap"},zg={key:0,class:"d-block invalid-feedback"},Gg={class:"col"},jg={class:"form-floating mb-2"},Yg={key:0,class:"d-block invalid-feedback"},Wg={class:"col"},Kg={class:"form-floating mb-2"},Jg={key:0,class:"d-block invalid-feedback"},Qg={class:"row row-cols-1 row-cols-sm-3"},Xg={class:"col"},Zg={class:"form-floating mb-2"},e1={class:"col"},t1={class:"form-floating mb-2"},s1={class:"col"},o1={class:"form-floating mb-2"},a1={class:"row row-cols-1 row-cols-sm-2"},l1={class:"col"},n1={class:"form-floating mb-2"},r1={class:"col"},i1={class:"form-floating mb-2"},d1={key:0},u1={class:"table-responsive border mt-1"},c1={class:"table mb-0"},m1=["onUpdate:modelValue"],f1=["value"],p1={class:"modal-footer"},v1=["disabled"],rt={__name:"_editProgram",emits:["onClose"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),G=h,J=re(),d=re("modalEditProgram"),g=me({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=ye(Y,g);de(async()=>{b.value.$reset()});const M=async(a,r)=>{J.value=a;const $=g;F.value.clear(),z.value="",$.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},$.item=null,await I(),g.item.dateScheduledStart=null,await u(),b.value.$reset();var w=document.getElementById(d.value),m=_e.getOrCreateInstance(w);m.show()},f=async a=>{if(!a){G("onClose",a);var m=document.getElementById(d.value),X=_e.getOrCreateInstance(m);X.hide();return}const r=g,$=H.moment(r.item.dateScheduledStart).utc().format(),w={programId:J.value,name:r.item.name,dateScheduledStart:$,adBreaks:r.item.adBreaks.map(K=>({sourceLocationId:r.item.sourceLocationId,vodSourceId:K.vodSourceId,offsetMillis:K.offsetMillis,durationInMillis:K.durationInMillis}))};try{await P.put("/api/v1/programs/",w).then(y=>{c.success("Edit Program","Program was edited.")})}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0);return}finally{}G("onClose",a);var m=document.getElementById(d.value),X=_e.getOrCreateInstance(m);X.hide()},S=async()=>{await f(!0)},I=async()=>{try{const a=`/api/v1/programs/${J.value}/`;await P.get(a).then(w=>{g.item=w.data;const m=g.item,y=H.moment(m.dateScheduledStart).format("YYYY-MM-DD HH:mm");g.item.dateScheduledStart=y,m.startOffsetTime=H.moment.utc(m.startOffsetMillis).format("HH:mm:ss"),m.endOffsetTime=H.moment.utc(m.endOffsetMillis).format("HH:mm:ss"),m.durationTime=H.moment.utc(m.durationInMillis).format("HH:mm:ss"),m.adBreaksDurationTime=H.moment.utc(m.adBreaksDurationInMillis).format("HH:mm:ss"),m.totalProgramTemplateDurationTime=H.moment.utc(m.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const r=g,$=r.item.channel.outputs[0].outputType;await i(r.item.sourceLocationId,$)}catch(a){z.value=H.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},u=async()=>{},i=async(a,r)=>{try{let $=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${r}`;await P.get($).then(w=>{g.lookups.adBreakVodSources=w.data})}catch($){z.value=H.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return p({open:M,close:f}),(a,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Tg,[e("div",Mg,[e("div",Ig,[e("h5",Cg,[r[12]||(r[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:r[0]||(r[0]=$=>f(!1)),"aria-label":"Close"})]),e("div",xg,[o(z)?(t(),s("div",Vg,[r[13]||(r[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Pg)])):U("",!0),o(F).size>0?(t(),s("div",Og,[r[14]||(r[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),$=>(t(),s("li",null,v($),1))),256))])])):U("",!0),g.item?(t(),s("div",Ag,[e("div",Ug,[g.item.sourceLocation?(t(),s("div",Dg,[e("div",Hg,[q(e("input",{"onUpdate:modelValue":r[1]||(r[1]=$=>g.item.sourceLocation.name=$),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.item.sourceLocation.name]]),r[15]||(r[15]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):U("",!0),g.item.vodSource?(t(),s("div",Lg,[e("div",Eg,[q(e("input",{"onUpdate:modelValue":r[2]||(r[2]=$=>g.item.vodSource.name=$),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.item.vodSource.name]]),r[16]||(r[16]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):U("",!0)]),e("div",qg,[e("div",Bg,[e("div",Ng,[e("div",Rg,[g.item.relativeProgram?(t(),s("span",Fg,v(g.item.relativeProgram.name),1)):U("",!0)]),r[17]||(r[17]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(b).item.name.$error?(t(),s("div",zg,[(t(!0),s(O,null,L(o(b).item.name.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):U("",!0)])]),e("div",Gg,[e("div",jg,[q(e("input",{"onUpdate:modelValue":r[3]||(r[3]=$=>g.item.name=$),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),r[18]||(r[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Yg,[(t(!0),s(O,null,L(o(b).item.name.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):U("",!0)])]),e("div",Wg,[e("div",Kg,[q(e("input",{"onUpdate:modelValue":r[4]||(r[4]=$=>g.item.dateScheduledStart=$),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Q,g.item.dateScheduledStart]]),r[19]||(r[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",Jg,[(t(!0),s(O,null,L(o(b).item.dateScheduledStart.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):U("",!0)])])]),e("div",null,[e("div",Qg,[e("div",Xg,[e("div",Zg,[q(e("input",{"onUpdate:modelValue":r[5]||(r[5]=$=>g.item.startOffsetTime=$),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Q,g.item.startOffsetTime]]),r[20]||(r[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",e1,[e("div",t1,[q(e("input",{"onUpdate:modelValue":r[6]||(r[6]=$=>g.item.endOffsetTime=$),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Q,g.item.endOffsetTime]]),r[21]||(r[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",s1,[e("div",o1,[q(e("input",{"onUpdate:modelValue":r[7]||(r[7]=$=>g.item.durationTime=$),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,g.item.durationTime]]),r[22]||(r[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",a1,[e("div",l1,[e("div",n1,[q(e("input",{"onUpdate:modelValue":r[8]||(r[8]=$=>g.item.adBreaksDurationTime=$),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Q,g.item.adBreaksDurationTime]]),r[23]||(r[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",r1,[e("div",i1,[q(e("input",{"onUpdate:modelValue":r[9]||(r[9]=$=>g.item.totalProgramTemplateDurationTime=$),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Q,g.item.totalProgramTemplateDurationTime]]),r[24]||(r[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])]),r[27]||(r[27]=e("hr",null,null,-1)),g.item?(t(),s("div",d1,[r[26]||(r[26]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",u1,[e("table",c1,[r[25]||(r[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(g.item.adBreaks,($,w)=>(t(),s("tr",null,[e("td",null,v(w+1),1),e("td",null,v(o(H).moment.utc($.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(H).moment.utc($.durationInMillis).format("HH:mm:ss")),1),e("td",null,[q(e("select",{"onUpdate:modelValue":m=>$.vodSourceId=m,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(g.lookups.adBreakVodSources,m=>(t(),s(O,null,[m.durationInMillis===$.durationInMillis?(t(),s("option",{key:0,value:m.id}," ["+v(o(H).moment.utc(m.durationInMillis).format("HH:mm:ss"))+"] "+v(m.name),9,f1)):U("",!0)],64))),256))],8,m1),[[ue,$.vodSourceId]])])]))),256))])])])])):U("",!0)])):U("",!0)]),e("div",p1,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:r[10]||(r[10]=$=>S()),class:"btn btn-primary ms-2",type:"button"},r[28]||(r[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,v1),e("button",{onClick:r[11]||(r[11]=$=>f(!1)),class:"btn btn-secondary ms-1"},r[29]||(r[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Sg))}},g1={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(l){const{appTitle:p,pageTitle:h,busy:x,infoMessage:k,warningMessage:A,errorMessage:C,router:F,axios:R,utils:V,toasts:z,close:Z,security:P}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),H=l,c=re(null),T=re(null),_=re(null),G={viewType:"Week",cellDuration:15,startDate:Pe.DayPilot.Date.today(),onTimeRangeSelected:I=>{var u=I.control;const i={start:I.start,end:I.end,id:Pe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};u.events.add(i);var a=u.events.find(i.id);M(a)},onBeforeEventRender:I=>{if(I.data.barColor="green",!!I.data.tags)switch(I.data.tags.type){case"new":I.data.barColor="yellow";break;case"business":I.data.barColor="red";break;case"personal":I.data.barColor="greem";break;case"vacation":I.data.barColor="black";break;default:I.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async I=>{const u=I.newStart.value,i=I.e.id(),a=V.moment(u).utc().format();try{let r="/api/v1/programs/scheduled-date-start";const $={programId:i,dateScheduledStart:a};await R.put(r,$).then(w=>{z.success("Program date scheduled start was edited.")})}catch(r){C.value=V.getErrorMessageAsHtml(r),window.scrollTo(0,0);return}finally{}await Y()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async I=>{var u=I.e.id();S(u)},contextMenu:new Pe.DayPilot.Menu([{text:"Clone",onClick:async I=>{const u=I.source.id();try{let i=`/api/v1/programs/${u}/clone`;await R.post(i).then(a=>{z.success("Clone Program","Program was cloned.")})}catch(i){C.value=V.getErrorMessageAsHtml(i),window.scrollTo(0,0);return}finally{await Y()}}},{text:"Delete",onClick:async I=>{if(!confirm("Do you want to remove this program?"))return;const i=I.source.id();try{let a=`/api/v1/programs/${i}/`;await R.delete(a).then(r=>{z.success("Delete Program","Program was deleted.")}),c.value.control.events.remove(I.source)}catch(a){C.value=V.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await Y()}}}])},J=re([]),d=()=>{c.value.control.update({events:J.value})},g=me({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});de(async()=>{await Y()});const Y=async()=>{await b(),await d()},b=async()=>{const I=g;if(!x.value)try{x.value=!0,C.value="";const u=`/api/v1/channels/${H.id}/`;await R.get(u).then(i=>{I.item=i.data;const a=I.item.outputs,r=I.item.programs.map($=>{let w=`${$.name}`,m=`[${$.name}]`;return $.relativeProgram&&(m+=` => [${$.relativeProgram.name}]`),{start:V.moment.utc($.dateScheduledStart).utc(!0).format(),end:V.moment.utc($.dateScheduledEnd).utc(!0).format(),id:$.programId,text:w,toolTip:m}});J.value=r})}catch(u){C.value=V.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{x.value=!1}},M=I=>{T.value.open(H.id,I.id(),I.start().value)},f=async(I,u)=>{var i=c.value,a=i.control.events.find(I.eventId);if(!u&&a){c.value.control.events.remove(a);return}i.control.events.find(K=>K.text()==I.name)&&(alert("Program already exists in this channel. Removing in the calendar."),c.value.control.events.remove(a));const $=V.moment(I.dateScheduledStart).utc(!0).format(),w=V.moment(I.dateScheduledEnd).utc(!0).format(),m=new Pe.DayPilot.Date($),X=new Pe.DayPilot.Date(w);a.text(I.name),a.start(new Pe.DayPilot.Date(m)),a.end(new Pe.DayPilot.Date(X)),a.data.tags.program=I,a.commit(),c.value.control.update(),await R.post("/api/v1/programs/",I).then(K=>{z.success("Add New Program",`Program [${I.name}] was added to this channel.`)},K=>{const y=V.getErrorMessageAsHtml(K);alert(y)}),await Y()},S=(I,u)=>{_.value.open(I,u)};return(I,u)=>{const i=ee("router-link"),a=ee("PageHeader"),r=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(h)},{default:E(()=>[e("button",{onClick:u[0]||(u[0]=$=>Y()),class:"btn btn-secondary ms-1"},u[1]||(u[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(i,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-1"},{default:E(()=>u[2]||(u[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(r,{errorMessage:o(C),vuelidate:I.v$},{default:E(()=>[e("div",null,[N(o(Pe.DayPilotCalendar),{id:"dp",config:G,ref_key:"calendarRef",ref:c},null,512),N(kg,{ref_key:"modalAddProgram",ref:T,onOnClose:f},null,512),N(rt,{ref_key:"modalEditProgram",ref:_,onOnClose:Y},null,512)])]),_:1},8,["errorMessage","vuelidate"]),u[3]||(u[3]=j(" > "))])]),_:1})}}},b1=["id"],y1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},$1={class:"modal-content"},w1={class:"modal-header"},h1={class:"modal-title"},_1={class:"modal-body"},k1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},S1=["innerHTML"],T1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},M1={class:"container"},I1={class:"row row-cols-1 row-cols-sm-3"},C1={class:"col"},x1={class:"form-floating mb-2"},V1=["disabled"],P1=["value"],O1={class:"col"},A1={class:"form-floating mb-2"},U1={key:0,class:"d-block invalid-feedback"},D1={class:"col"},H1={class:"form-floating mb-2"},L1={key:0,class:"d-block invalid-feedback"},E1={class:"row row-cols-sm-2"},q1={class:"col"},B1={class:"form-floating mb-2"},N1=["value"],R1={key:0,class:"d-block invalid-feedback"},F1={class:"col"},z1={class:"form-floating mb-2"},G1=["value"],j1={key:0,class:"d-block invalid-feedback"},Y1={class:"col"},W1={class:"input-group mb-1"},K1={class:"form-floating"},J1={key:0,class:"input-group-text"},Q1={key:0},X1={key:1},Z1={key:2},eb={key:3,class:"d-block invalid-feedback"},tb={class:"col"},sb={class:"input-group mb-1"},ob={class:"form-floating"},ab={key:0,class:"input-group-text"},lb={key:0},nb={key:1},rb={key:2,class:"d-block invalid-feedback"},ib={class:"table-responsive border mt-1"},db={class:"table"},ub={class:"input-group mb-1"},cb=["onUpdate:modelValue"],mb={key:0,class:"input-group-text"},fb=["onUpdate:modelValue"],pb=["value"],vb=["onUpdate:modelValue"],gb=["value"],bb=["onClick"],yb={class:"modal-footer"},$b=["disabled"],wb={__name:"_addProgram",emits:["refresh"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),G=h,J=re(),d=re("modalAddProgram"),g=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=ye(Y,g);de(async()=>{b.value.$reset()});const M=async K=>{J.value=K;const y=g;F.value.clear(),z.value="";const n=H.moment().local().add(2,"m"),se=n.format("YYYY-MM-DD HH:mm"),ne=n.format("YYYY_MM_DD")+"_PROGRAM_";y.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},y.item={name:ne,relativeProgramId:null,dateScheduledStart:se,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await I(),b.value.$reset();var W=document.getElementById(d.value),$e=_e.getOrCreateInstance(W);$e.show()},f=async()=>{var K=document.getElementById(d.value),y=_e.getOrCreateInstance(K);y.hide(),G("refresh")},S=async()=>{const K=g;if(A.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{A.value=!0,z.value="";const B=K.item;delete B.vodSource,B.channelId=J.value;var n=B.dateScheduledStart;B.dateScheduledStart=H.moment(n).utc().format(),await P.post("/api/v1/programs/",B).then(se=>{c.success("Add Program","Program added to Channel",{async onClose(){}})}),await f()}catch(B){z.value=H.getErrorMessageAsHtml(B),window.scrollTo(0,0)}finally{A.value=!1}},I=async()=>{await u(),await a(),await $()},u=async()=>{try{await P.get("/api/v1/sourcelocations/lookup/").then(y=>{g.lookups.sourceLocations=y.data,g.lookups.sourceLocations.length===1&&(g.item.sourceLocationId=g.lookups.sourceLocations[0].id)}),g.item.sourceLocationId&&await i(g.item.sourceLocationId)}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},i=async K=>{try{let y=`/api/v1/vodSources/lookup/source-location/${K}`;await P.get(y).then(n=>{g.lookups.vodSources=n.data})}catch(y){z.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},a=async()=>{try{await P.get("/api/v1/sourcelocations/lookup/").then(y=>{g.lookups.adBreakSourceLocations=y.data})}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},r=async K=>{try{let y=`/api/v1/vodSources/lookup/source-location/${K}`;await P.get(y).then(n=>{g.lookups.adBreakVodSources=n.data})}catch(y){z.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},$=async()=>{try{const K=`/api/v1/programs/lookup/?channelId=${J.value}`;await P.get(K).then(y=>{if(g.lookups.channelPrograms=y.data,g.lookups.channelPrograms.length===1){const B=g.lookups.channelPrograms[0];g.item.relativeProgramId=B.id}})}catch(K){z.value=H.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},w=()=>{const K={offsetMillis:0,sourceLocationId:null,vodSourceId:null},y=g.item.adBreaks.length;if(y>0){const n=g.item.adBreaks[y-1];K.offsetMillis=n.offsetMillis+1e4}g.item.adBreaks.push(K)},m=K=>{g.item.adBreaks.splice(K,1)},X=()=>{const K=g.item.vodSource;g.item.vodSourceId=K.id};return p({open:M,close:f}),(K,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",y1,[e("div",$1,[e("div",w1,[e("h5",h1,[y[12]||(y[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=n=>f()),"aria-label":"Close"})]),e("div",_1,[o(z)?(t(),s("div",k1,[y[13]||(y[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,S1)])):U("",!0),o(F).size>0?(t(),s("div",T1,[y[14]||(y[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),n=>(t(),s("li",null,v(n),1))),256))])])):U("",!0),e("div",M1,[e("div",I1,[e("div",C1,[e("div",x1,[q(e("select",{"onUpdate:modelValue":y[1]||(y[1]=n=>g.item.relativeProgramId=n),class:"form-select",id:"sourceLocationId",disabled:g.lookups.channelPrograms.length<=0},[(t(!0),s(O,null,L(g.lookups.channelPrograms,n=>(t(),s("option",{value:n.id},v(n.name),9,P1))),256))],8,V1),[[ue,g.item.relativeProgramId]]),y[15]||(y[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",O1,[e("div",A1,[q(e("input",{"onUpdate:modelValue":y[2]||(y[2]=n=>g.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),y[16]||(y[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",U1,[(t(!0),s(O,null,L(o(b).item.name.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",D1,[e("div",H1,[q(e("input",{"onUpdate:modelValue":y[3]||(y[3]=n=>g.item.dateScheduledStart=n),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Q,g.item.dateScheduledStart]]),y[17]||(y[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",L1,[(t(!0),s(O,null,L(o(b).item.dateScheduledStart.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])])]),e("div",E1,[e("div",q1,[e("div",B1,[q(e("select",{"onUpdate:modelValue":y[4]||(y[4]=n=>g.item.sourceLocationId=n),onChange:y[5]||(y[5]=n=>i(g.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(g.lookups.sourceLocations,n=>(t(),s("option",{value:n.id},v(n.name),9,N1))),256))],544),[[ue,g.item.sourceLocationId]]),y[18]||(y[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(b).item.sourceLocationId.$error?(t(),s("div",R1,[(t(!0),s(O,null,L(o(b).item.sourceLocationId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",F1,[e("div",z1,[q(e("select",{"onUpdate:modelValue":y[6]||(y[6]=n=>g.item.vodSource=n),onChange:y[7]||(y[7]=n=>X()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(g.lookups.vodSources,n=>(t(),s("option",{value:n},v(n.name),9,G1))),256))],544),[[ue,g.item.vodSource]]),y[19]||(y[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(b).item.vodSourceId.$error?(t(),s("div",j1,[(t(!0),s(O,null,L(o(b).item.vodSourceId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),e("div",Y1,[e("div",W1,[e("div",K1,[q(e("input",{"onUpdate:modelValue":y[8]||(y[8]=n=>g.item.startOffsetMillis=n),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Q,g.item.startOffsetMillis]]),y[20]||(y[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),g.item.startOffsetMillis>0?(t(),s("span",J1,v(o(H).moment.utc(g.item.startOffsetMillis).format("HH:mm:ss")),1)):U("",!0)]),g.item.startOffsetMillis>0&&g.item.startOffsetMillis<3e4?(t(),s("div",Q1,y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):U("",!0),g.item.startOffsetMillis>g.item.endOffsetMillis&&g.item.endOffsetMillis>0?(t(),s("div",X1,y[22]||(y[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):U("",!0),g.item.vodSource&&g.item.startOffsetMillis>g.item.vodSource.durationInMillis?(t(),s("div",Z1,y[23]||(y[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):U("",!0),o(b).item.startOffsetMillis.$error?(t(),s("div",eb,[(t(!0),s(O,null,L(o(b).item.startOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)]),e("div",tb,[e("div",sb,[e("div",ob,[q(e("input",{"onUpdate:modelValue":y[9]||(y[9]=n=>g.item.endOffsetMillis=n),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Q,g.item.endOffsetMillis]]),y[24]||(y[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),g.item.endOffsetMillis>0?(t(),s("span",ab,v(o(H).moment.utc(g.item.endOffsetMillis).format("HH:mm:ss")),1)):U("",!0)]),g.item.endOffsetMillis>0&&g.item.endOffsetMillis<3e4?(t(),s("div",lb,y[25]||(y[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):U("",!0),g.item.vodSource&&g.item.endOffsetMillis>g.item.vodSource.durationInMillis?(t(),s("div",nb,y[26]||(y[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):U("",!0),o(b).item.endOffsetMillis.$error?(t(),s("div",rb,[(t(!0),s(O,null,L(o(b).item.endOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):U("",!0)])]),y[30]||(y[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[y[27]||(y[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",ib,[e("table",db,[y[29]||(y[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(g.item.adBreaks,(n,B)=>(t(),s("tr",null,[e("td",null,v(B+1),1),e("td",null,[e("div",ub,[q(e("input",{"onUpdate:modelValue":se=>n.offsetMillis=se,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,cb),[[Q,n.offsetMillis]]),n.offsetMillis>0?(t(),s("span",mb,v(o(H).moment.utc(n.offsetMillis).format("HH:mm:ss")),1)):U("",!0)])]),e("td",null,[q(e("select",{"onUpdate:modelValue":se=>n.sourceLocationId=se,onChange:y[10]||(y[10]=se=>r(g.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(O,null,L(g.lookups.adBreakSourceLocations,se=>(t(),s("option",{value:se.id},v(se.name),9,pb))),256))],40,fb),[[ue,n.sourceLocationId]])]),e("td",null,[q(e("select",{"onUpdate:modelValue":se=>n.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(g.lookups.adBreakVodSources,se=>(t(),s("option",{value:se.id},v(se.name),9,gb))),256))],8,vb),[[ue,n.vodSourceId]])]),e("td",null,[e("button",{onClick:se=>m(B),class:"btn btn-outline-warning"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,bb)])]))),256))])])])])])]),e("div",yb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:y[11]||(y[11]=n=>S()),class:"btn btn-primary",type:"button"},y[31]||(y[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$b),y[32]||(y[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,b1))}},hb=["id"],_b={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},kb={class:"modal-content"},Sb={class:"modal-header"},Tb={class:"modal-title"},Mb={class:"modal-body"},Ib={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cb=["innerHTML"],xb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vb={class:"container"},Pb={class:"col"},Ob={class:"form-floating mb-2"},Ab={class:"col"},Ub={class:"form-floating mb-2"},Db={key:0,class:"d-block invalid-feedback"},Hb={class:"col"},Lb={class:"form-floating mb-2 d-none"},Eb={key:0,class:"d-block invalid-feedback"},qb={class:"col"},Bb={class:"form-floating mb-2"},Nb={key:0,class:"d-block invalid-feedback"},Rb={class:"modal-footer"},Fb=["disabled"],zb={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),G=h,J=re(),d=re("modalAddPlaybackConfiguration"),g=me({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},b=ye(Y,g);de(async()=>{b.value.$reset()});const M=async(I,u)=>{J.value=I;const i=g;F.value.clear(),z.value="";const a=u;let r=a.lastIndexOf("/");const $=a.substring(0,r);let w=a.substring(r+1);r=w.lastIndexOf("."),w=w.substring(0,r)+"_ADCAMPAIGN_",i.item={name:w,originalVideoContentSourceUrl:u,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},b.value.$reset();var m=document.getElementById(d.value),X=_e.getOrCreateInstance(m);X.show()},f=async()=>{var I=document.getElementById(d.value),u=_e.getOrCreateInstance(I);u.hide(),G("refresh")},S=async()=>{const I=g;if(A.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{A.value=!0,z.value="";const i=I.item;i.channelOutputId=J.value,await P.put("/api/v1/channelOutputs/playback/",i).then(a=>{c.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await f()}catch(i){z.value=H.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{A.value=!1}};return p({open:M,close:f}),(I,u)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",_b,[e("div",kb,[e("div",Sb,[e("h5",Tb,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=i=>f()),"aria-label":"Close"})]),e("div",Mb,[o(z)?(t(),s("div",Ib,[u[7]||(u[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Cb)])):U("",!0),o(F).size>0?(t(),s("div",xb,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),i=>(t(),s("li",null,v(i),1))),256))])])):U("",!0),e("div",Vb,[e("div",Pb,[e("div",Ob,[q(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=i=>g.item.originalVideoContentSourceUrl=i),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Q,g.item.originalVideoContentSourceUrl]]),u[9]||(u[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",Ab,[e("div",Ub,[q(e("input",{"onUpdate:modelValue":u[2]||(u[2]=i=>g.item.name=i),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),u[10]||(u[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Db,[(t(!0),s(O,null,L(o(b).item.name.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",Hb,[e("div",Lb,[q(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>g.item.videoContentSourceUrl=i),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Q,g.item.videoContentSourceUrl]]),u[11]||(u[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),u[12]||(u[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(b).item.videoContentSourceUrl.$error?(t(),s("div",Eb,[(t(!0),s(O,null,L(o(b).item.videoContentSourceUrl.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0)])]),e("div",qb,[e("div",Bb,[q(e("textarea",{"onUpdate:modelValue":u[4]||(u[4]=i=>g.item.adDecisionServerUrl=i),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Q,g.item.adDecisionServerUrl]]),u[13]||(u[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(b).item.adDecisionServerUrl.$error?(t(),s("div",Nb,[(t(!0),s(O,null,L(o(b).item.adDecisionServerUrl.$errors,i=>(t(),s("div",{key:i.$uid},v(i.$message),1))),128))])):U("",!0),u[14]||(u[14]=Ge('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",Rb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:u[5]||(u[5]=i=>S()),class:"btn btn-primary",type:"button"},u[15]||(u[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Fb),u[16]||(u[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,hb))}},Gb=["id"],jb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Yb={class:"modal-content"},Wb={class:"modal-header"},Kb={class:"modal-title"},Jb={class:"modal-body"},Qb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Xb=["innerHTML"],Zb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ey={class:"container"},ty={class:"col"},sy={class:"form-floating mb-2"},oy=["value"],ay={key:0,class:"d-block invalid-feedback"},ly={class:"col"},ny={class:"form-floating mb-2"},ry={key:0,class:"d-block invalid-feedback"},iy={class:"col"},dy={class:"form-floating mb-2"},uy={key:0,class:"d-block invalid-feedback"},cy={class:"modal-footer"},my=["disabled"],fy={__name:"_addChannelOutput",emits:["refresh"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),G=h,J=re(),d=re("modalAddChannelOutput"),g=me({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),Y={item:{sourceGroupId:{required:te.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},manifestName:{required:te.withMessage("Manifest Name is required.",oe),$autoDirty:!0,$lazy:!0},outputType:{required:te.withMessage("Output Type is required.",oe),$autoDirty:!0,$lazy:!0}}},b=ye(Y,g);de(async()=>{b.value.$reset()});const M=async()=>{await f()},f=async()=>{try{await P.get("/api/v1/sourceGroups/lookup/").then(a=>{g.lookups.sourceGroups=a.data,g.lookups.sourceGroups.length===1&&(g.item.sourceGroupId=g.lookups.sourceGroups[0].id)})}catch(i){z.value=H.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}},S=async i=>{J.value=i;const a=g;F.value.clear(),z.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await M(),b.value.$reset();var r=document.getElementById(d.value),$=_e.getOrCreateInstance(r);$.show()},I=async()=>{var i=document.getElementById(d.value),a=_e.getOrCreateInstance(i);a.hide(),G("refresh")},u=async()=>{const i=g;if(A.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{A.value=!0,z.value="";const r=i.item;r.channelId=J.value,await P.post("/api/v1/channelOutputs",r).then($=>{c.success("Add Channel Output","Channel output added.")}),await I()}catch(r){z.value=H.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{A.value=!1}};return p({open:S,close:I}),(i,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",jb,[e("div",Yb,[e("div",Wb,[e("h5",Kb,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Jb,[o(z)?(t(),s("div",Qb,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Xb)])):U("",!0),o(F).size>0?(t(),s("div",Zb,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),r=>(t(),s("li",null,v(r),1))),256))])])):U("",!0),e("div",ey,[e("div",ty,[e("div",sy,[q(e("select",{"onUpdate:modelValue":a[0]||(a[0]=r=>g.item.sourceGroupId=r),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(g.lookups.sourceGroups,r=>(t(),s("option",{value:r.id},v(r.name),9,oy))),256))],512),[[ue,g.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(b).item.sourceGroupId.$error?(t(),s("div",ay,[(t(!0),s(O,null,L(o(b).item.sourceGroupId.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):U("",!0)])]),e("div",ly,[e("div",ny,[q(e("select",{"onUpdate:modelValue":a[1]||(a[1]=r=>g.item.outputType=r),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,g.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(b).item.outputType.$error?(t(),s("div",ry,[(t(!0),s(O,null,L(o(b).item.outputType.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):U("",!0)])]),e("div",iy,[e("div",dy,[q(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>g.item.manifestName=r),class:"form-control",id:"manifestName"},null,512),[[Q,g.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(b).item.manifestName.$error?(t(),s("div",uy,[(t(!0),s(O,null,L(o(b).item.manifestName.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):U("",!0)])])])]),e("div",cy,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:a[3]||(a[3]=r=>u()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,my),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Gb))}},py=["id"],vy={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},gy={class:"modal-content"},by={class:"modal-header"},yy={class:"modal-title"},$y={class:"modal-body"},wy={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hy=["innerHTML"],_y={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ky={class:"container"},Sy={class:"col"},Ty={class:"form-floating mb-2"},My=["value"],Iy={key:0,class:"d-block invalid-feedback"},Cy={class:"col"},xy={class:"form-floating mb-2"},Vy=["value"],Py={key:0,class:"d-block invalid-feedback"},Oy={class:"col"},Ay={class:"card h-100"},Uy=["id"],Dy={class:"modal-footer"},Hy=["disabled"],Ly={__name:"_editFillerSlate",emits:["refresh"],setup(l,{expose:p,emit:h}){const{appTitle:x,pageTitle:k,busy:A,isDirty:C,validations:F,infoMessage:R,warningMessage:V,errorMessage:z,router:Z,axios:P,utils:H,toasts:c,closeWithReturnUrl:T,security:_}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),G=h,J=re("modalEditFillerSlate"),d=me({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),g={item:{channelId:{required:te.withMessage("channelId is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0}}},Y=ye(g,d);de(async()=>{Y.value.$reset()}),qe(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const b=async()=>{await M()},M=async()=>{try{await P.get("/api/v1/sourcelocations/lookup/").then(w=>{d.lookups.sourceLocations=w.data}),d.item.sourceLocationId&&await f(d.item.sourceLocationId)}catch($){z.value=H.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},f=async $=>{try{let w=`/api/v1/vodSources/lookup/source-Location/${$}/?type=2`;await P.get(w).then(m=>{d.lookups.vodSources=m.data})}catch(w){z.value=H.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},S=async($,w,m)=>{const X=d;F.value.clear(),z.value="",X.lookups={sourceLocations:[],vodSources:[]},X.item={channelId:$,sourceLocationId:w,vodSourceId:m},await b(),d.item.vodSourceId&&await r(d.item.vodSourceId),Y.value.$reset();var K=document.getElementById(J.value),y=_e.getOrCreateInstance(K);y.show()},I=async()=>{var $=document.getElementById(J.value),w=_e.getOrCreateInstance($);w.hide(),d.hls&&(d.hls.stopLoad(),d.hls.destroy()),G("refresh")},u=async()=>{const $=d;if(A.value)return;if(!await Y.value.$validate()){window.scrollTo(0,0);return}try{A.value=!0,z.value="";const m=$.item;await P.put("/api/v1/channels/filler-slate",m).then(X=>{c.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await I()}catch(m){z.value=H.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{A.value=!1}},i=async()=>{d.item.vodSourceId=null,await f(d.item.sourceLocationId)},a=async()=>{await r(d.item.vodSourceId)},r=async $=>{try{let w=`/api/v1/vodSources/${$}/hls`;const m=await P.get(w).then(K=>K.data);if(d.hls){d.hls.loadSource(m);return}const X=document.getElementById(`video-${d.item.channelId}`);d.hls=H.createHlsStream(X,m)}catch(w){z.value=H.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}};return p({open:S,close:I}),($,w)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vy,[e("div",gy,[e("div",by,[e("h5",yy,[w[6]||(w[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),j(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:w[0]||(w[0]=m=>I()),"aria-label":"Close"})]),e("div",$y,[o(z)?(t(),s("div",wy,[w[7]||(w[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,hy)])):U("",!0),o(F).size>0?(t(),s("div",_y,[w[8]||(w[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(F).values(),m=>(t(),s("li",null,v(m),1))),256))])])):U("",!0),e("div",ky,[e("div",Sy,[e("div",Ty,[q(e("select",{"onUpdate:modelValue":w[1]||(w[1]=m=>d.item.sourceLocationId=m),onChange:w[2]||(w[2]=m=>i()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(d.lookups.sourceLocations,m=>(t(),s("option",{value:m.id},v(m.name),9,My))),256))],544),[[ue,d.item.sourceLocationId]]),w[9]||(w[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(Y).item.sourceLocationId.$error?(t(),s("div",Iy,[(t(!0),s(O,null,L(o(Y).item.sourceLocationId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",Cy,[e("div",xy,[q(e("select",{"onUpdate:modelValue":w[3]||(w[3]=m=>d.item.vodSourceId=m),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(d.lookups.vodSources,m=>(t(),s("option",{value:m.id},v(m.name),9,Vy))),256))],544),[[ue,d.item.vodSourceId]]),w[10]||(w[10]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(Y).item.vodSourceId.$error?(t(),s("div",Py,[(t(!0),s(O,null,L(o(Y).item.vodSourceId.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):U("",!0)])]),e("div",Oy,[e("div",Ay,[e("video",{id:`video-${d.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,Uy)])])])]),e("div",Dy,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:w[4]||(w[4]=m=>u()),class:"btn btn-primary",type:"button"},w[11]||(w[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Hy),e("button",{onClick:w[5]||(w[5]=m=>I()),class:"btn btn-secondary ms-1"},w[12]||(w[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,py))}},Ey={class:"m-3"},qy={class:"row g-2 ms-lg-5"},By={class:"col-12 col-sm-4"},Ny={class:"row g-2 ms-lg-5"},Ry={class:"col-12 col-sm-4"},Fy={class:"col-12 col-sm-8"},zy={class:"mt-2"},Gy={class:"row row-cols-1 row-cols-sm-3 g-2 ms-lg-5"},jy={class:"col-sm-3"},Yy={class:"col-sm-3"},Wy={class:"col-sm-6"},Ky={class:"row row-cols-1 row-cols-sm-2 g-2 ms-lg-5"},Jy={class:"col"},Qy={class:"col"},Xy={class:"row row-cols-1 row-cols-sm-2 g-2 ms-lg-5"},Zy={class:"col"},e$={class:"col"},t$={key:0,class:"mt-2"},s$={class:"table-responsive border"},o$={class:"table table-sm table-bordered1 mb-0"},a$={class:"text-center me-1"},l$={class:"text-center"},n$={class:"text-center"},r$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},i$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},d$={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(l){const p=l,{moment:h,generateReturnUrl:x}=je();return de(()=>{p.item.value}),(k,A)=>{const C=ee("router-link");return t(),s("div",Ey,[e("div",null,[e("div",null,[A[1]||(A[1]=e("h5",null," VOD ",-1)),e("div",qy,[e("div",By,[A[0]||(A[0]=e("div",{class:"fw-light text-primary-emphasis"},"Title",-1)),e("div",null,[N(C,{to:`${l.urlViewVodSource}/${l.item.vodSourceId}/${o(x)()}`,class:"text-decoration-none"},{default:E(()=>[j(v(l.item.vodSource.name),1)]),_:1},8,["to"])])])])]),e("div",null,[A[4]||(A[4]=e("h5",null," Video ",-1)),e("div",Ny,[e("div",Ry,[A[2]||(A[2]=e("div",{class:"fw-light text-primary-emphasis"},"Title",-1)),e("div",null,[N(C,{to:`${l.urlViewVideo}/${l.item.vodSource.video.videoId}/${o(x)()}`,class:"text-decoration-none"},{default:E(()=>[j(v(l.item.vodSource.video.title),1)]),_:1},8,["to"])])]),e("div",Fy,[A[3]||(A[3]=e("div",{class:"fw-light text-primary-emphasis"},"Description",-1)),e("div",null,v(l.item.vodSource.video.description),1)])])]),e("div",zy,[A[12]||(A[12]=e("h5",null," Schedule ",-1)),e("div",Gy,[e("div",jy,[A[5]||(A[5]=e("div",{class:"fw-light text-primary-emphasis"},"Start Offset",-1)),e("div",null,v(o(h).utc(l.item.startOffsetMillis).format("HH:mm:ss")),1)]),e("div",Yy,[A[6]||(A[6]=e("div",{class:"fw-light text-primary-emphasis"},"End Offset",-1)),e("div",null,v(o(h).utc(l.item.endOffsetMillis).format("HH:mm:ss")),1)]),e("div",Wy,[A[7]||(A[7]=e("div",{class:"fw-light text-primary-emphasis"},"Clip",-1)),e("div",null,v(o(h).utc(l.item.durationInMillis).format("HH:mm:ss")),1)])]),e("div",Ky,[e("div",Jy,[A[8]||(A[8]=e("div",{class:"fw-light text-primary-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,v(o(h).utc(l.item.adBreaksDurationInMillis).format("HH:mm:ss")),1)]),e("div",Qy,[A[9]||(A[9]=e("div",{class:"fw-light text-primary-emphasis"},"Total Program Duration",-1)),e("div",null,v(o(h).utc(l.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("div",Xy,[e("div",Zy,[A[10]||(A[10]=e("div",{class:"fw-light text-primary-emphasis"},"Program Start",-1)),e("div",null,v(o(h).utc(l.item.dateScheduledStart).format("lll")),1)]),e("div",e$,[A[11]||(A[11]=e("div",{class:"fw-light text-primary-emphasis"},"Program End",-1)),e("div",null,v(o(h).utc(l.item.dateScheduledEnd).format("lll")),1)])])]),l.item.adBreaks.length?(t(),s("div",t$,[A[14]||(A[14]=e("h5",null," Ad Breaks ",-1)),e("div",s$,[e("table",o$,[e("tbody",null,[A[13]||(A[13]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(O,null,L(l.item.adBreaks,(F,R)=>(t(),s("tr",null,[e("td",a$,v(R+1),1),e("td",l$,v(o(h).utc(F.offsetMillis).format("HH:mm:ss")),1),e("td",n$,v(o(h).utc(F.durationInMillis).format("HH:mm:ss")),1),e("td",null,[N(C,{to:`${l.urlViewVodSource}/${F.vodSource.vodSourceId}/${o(x)()}`,class:"text-decoration-none"},{default:E(()=>[F.vodSource.arn?(t(),s("span",r$)):(t(),s("span",i$)),j(" "+v(F.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):U("",!0)])])}}},u$={key:0,class:"dropdown"},c$={key:0,class:"fas fa-fw fa-play"},m$={key:1,class:"fas fa-fw fa-stop"},f$={class:"dropdown-menu"},p$={key:0},v$={key:1},g$={key:0},b$={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},y$={class:"nav-item",role:"presentation"},$$={class:"nav-item",role:"presentation"},w$={class:"nav-item",role:"presentation"},h$={class:"nav-item",role:"presentation"},_$={class:"nav-item",role:"presentation"},k$={class:"tab-content",id:"myTabContent"},S$={class:"mt-2"},T$={class:"row row-cols-1 row-cols-sm-3"},M$={class:"col"},I$={class:"form-floating mb-2"},C$={class:"col"},x$={class:"form-floating mb-2"},V$={class:"col"},P$={class:"form-floating mb-2"},O$={class:"d-flex flex-row justify-content-start align-items-center"},A$={key:0,class:"ms-2"},U$={class:"row row-cols-sm-2 mt-1"},D$={class:"col"},H$={class:"form-floating mb-2"},L$={class:"col"},E$={class:"form-floating mb-2"},q$={class:"mt-2"},B$={class:"d-flex flex-row justify-content-start align-items-center"},N$={class:"ms-2"},R$={key:0,class:"alert bg-warning mt-2"},F$={class:"table-responsive border mt-1"},z$={class:"table table-bordered1 mb-0"},G$={class:"badge bg-info"},j$={key:0,class:"text-wrap"},Y$={key:1,class:"text-warning"},W$={key:0,class:"text-end"},K$={key:1,class:"text-end"},J$=["onClick"],Q$={key:0},X$={colspan:"999"},Z$={class:"d-flex flex-row justify-content-start align-items-center"},ew={class:"ms-2"},tw={if:"item.playbackUrl"},sw=["onClick"],ow={key:0,class:"table-responsive mt-2"},aw={class:"table table-borderless mb-0 table-sm"},lw={class:"align-middle1"},nw={class:"badge bg-success"},rw={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},iw={class:"text-end"},dw=["onClick"],uw=["onClick"],cw={class:"mt-2"},mw={class:"table-responsive border"},fw={class:"table mb-0 table-sm table-bordered1"},pw={class:"align-middle1"},vw={class:"text-end me-1"},gw={class:"d-flex flex-row justify-content-start"},bw={class:""},yw={class:"mb-1"},$w=["src"],ww={class:"ms-2"},hw={key:0,class:"fas fa-fw fa-check-circle text-success"},_w={class:"text-center"},kw={class:"text-center"},Sw={class:"text-end"},Tw={class:"btn-group position-static"},Mw=["onClick"],Iw={key:0,class:"fas fa-fw fa-chevron-circle-up"},Cw={key:1,class:"fas fa-fw fa-chevron-circle-down"},xw={class:"dropdown-menu"},Vw=["onClick"],Pw={key:0},Ow=["onClick"],Aw=["onClick"],Uw=["onClick"],Dw={key:0},Hw={colspan:"999"},Lw={class:"text-end mt-2 d-none"},Ew={class:"mt-2"},qw={class:"text-end mb-2"},Bw={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},Nw={class:"col"},Rw={class:"card shadow-sm"},Fw=["id"],zw={class:"p-1"},Gw={class:"card-title1 text-center"},jw={class:"col"},Yw={class:"card shadow-sm"},Ww=["id"],Kw={class:"p-1"},Jw={class:"card-title1 text-center text-truncate"},Qw={class:"small1"},Xw={class:"mt-2"},Zw={key:0,class:"fas fa-fw fa-check-circle text-success"},eh={key:1,class:"fas fa-fw fa-times-circle text-warning"},th={key:0,class:"fas fa-fw fa-check-circle text-success"},sh={key:1,class:"fas fa-fw fa-times-circle text-warning"},oh={key:0,class:"fas fa-fw fa-check-circle text-success"},ah={key:1,class:"fas fa-fw fa-times-circle text-warning"},lh={key:0,class:"fas fa-fw fa-check text-warning"},nh={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},rh={key:0,class:"fas fa-fw fa-check-circle text-success"},ih={key:1,class:"fas fa-fw fa-times-circle text-warning"},dh={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(l){const p=l,{appTitle:h,pageTitle:x,busy:k,isDirty:A,validations:C,infoMessage:F,warningMessage:R,errorMessage:V,router:z,axios:Z,utils:P,toasts:H,close:c,closeWithReturnUrl:T,generateReturnUrl:_,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});Se("$config");const J=be();J.user;const d=me({user:J.user,item:null}),g=re(null),Y=re(null),b=re(null),M=re(null),f=re(null),S=re(),I=he(()=>d.item&&d.item.state==="RUNNING");de(async()=>{await r();const ie=P.getPageTab("channel")||"information-tab";u(ie)}),qe(()=>{Ee()});const u=ie=>{P.setPageTab("channel",ie),S.value=ie,ie==="preview-tab"&&setTimeout(()=>{var D=document.getElementById("masonry");new Xe(D,{})},2e3)},i=ie=>ie===S.value?"active":"",a=ie=>ie===S.value?"show active":"",r=async()=>{const ie=d;if(Ee(),!k.value)try{k.value=!0,V.value="",d.item=null;const D=`/api/v1/channels/${p.id}/`;await Z.get(D).then(pe=>{ie.item=pe.data,ie.item.outputs.forEach(Ve=>{Ve.playbackConfigurations.forEach(ae=>{if(Ve.playbackUrl){const Ce=Ve.playbackUrl,we=Ce.lastIndexOf("/"),Je=Ce.substring(0,we),Re=Ce.substring(we+1),Qe=ae.hlsConfigurationManifestEndpointPrefix;Qe&&(ae.hlsPlaylist=Qe+Re)}})})})}catch(D){V.value=P.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{k.value=!1}},$=async()=>{await r()},w=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!k.value){V.value=null;try{k.value=!0,await Z.post(`/api/v1/channels/${p.id}/publish/`).then(D=>{H.success("Publish Channel","Channel was published.")}),k.value=!1,await $()}catch(D){V.value=P.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{k.value=!1}}},m=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!k.value){V.value=null;try{k.value=!0,await Z.delete(`/api/v1/channels/${p.id}/unpublish/`).then(D=>{H.warning("Remove Channel","Channel was removed.")}),k.value=!1,await $()}catch(D){V.value=P.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{k.value=!1}}},X=()=>{g.value.open(p.id)},K=ie=>{ie.outputType==="HLS"&&Y.value.open(ie.channelOutputId,ie.playbackUrl)},y=()=>{b.value.open(p.id)},n=ie=>{M.value.open(ie)},B=(ie,D)=>{f.value.open(p.id,ie,D)},se=async ie=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!k.value){V.value=null;try{k.value=!0,await Z.delete(`/api/v1/programs/${ie}/`).then(pe=>{H.success("Delete Program","Program was deleted..",{async onClose(){}})}),k.value=!1,await $()}catch(pe){V.value=P.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{k.value=!1}}},ne=async ie=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!k.value){V.value=null;try{k.value=!0,await Z.delete(`/api/v1/channelOutputs/${ie}/`).then(pe=>{H.success("Delete Channel Output","Channel output was deleted..")}),k.value=!1,await $()}catch(pe){V.value=P.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{k.value=!1}}},W=async ie=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!k.value){V.value=null;try{k.value=!0,await Z.post(`/api/v1/programs/${ie}/publish/`).then(pe=>{H.success("Publish Program","Program was published..",{async onClose(){}})}),k.value=!1,await $()}catch(pe){V.value=P.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{k.value=!1}}},$e=async ie=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!k.value){V.value=null;try{k.value=!0,await Z.delete(`/api/v1/programs/${ie}/unpublish/`).then(pe=>{H.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),k.value=!1,await $()}catch(pe){V.value=P.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{k.value=!1}}},ge=async ie=>{if(!k.value){V.value=null;try{k.value=!0,await Z.put(`/api/v1/channels/${p.id}/change-state/${ie}`).then(D=>{H.success("Update Channel state","Change state was updated")}),k.value=!1,ie==="STOPPED"&&S.value==="preview-tab"&&(Ee(),u("information-tab")),await $()}catch(D){V.value=P.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{k.value=!1}}},Le=async ie=>{if(!k.value)try{k.value=!0,V.value="",await Z.post(`/api/v1/channelOutputs/${ie}/playback/publish/`).then(D=>{H.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),k.value=!1,await $()}catch(D){V.value=P.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{k.value=!1}},dt=async ie=>{if(confirm("Do you want to remove this Playback Configuration?")&&!k.value)try{k.value=!0,V.value="",await Z.delete(`/api/v1/channelOutputs/${ie}/playback/`).then(pe=>{H.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),k.value=!1,await $()}catch(pe){V.value=P.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{k.value=!1}},ut=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ie=d.item.outputs;Ee(),ie.forEach(D=>{var pe=document.getElementById(`video-${D.channelOutputId}`);D.hls&&D.hls.destroy(),D.hls=P.createHlsStream(pe,D.playbackUrl,"Main playlist started."),pe.play(),D.playbackConfigurations.forEach(xe=>{if(xe.hls&&xe.hls.destroy(),xe.arn){var Ve=document.getElementById(`video-${xe.channelOutputPlaybackConfigurationId}`);try{xe.hls=P.createHlsStream(Ve,xe.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Ve.play()}catch(ae){H.error("Failed Stream SSAI Playlist",ae)}}})}),setTimeout(()=>{var D=document.getElementById("masonry");new Xe(D,{})},2e3)}},Ee=()=>{d.item&&d.item.outputs&&d.item.outputs.forEach(D=>{D.hls&&(D.hls.detachMedia(),D.hls.destroy(),delete D.hls),D.playbackConfigurations.forEach(pe=>{pe.hls&&(pe.hls.detachMedia(),pe.hls.destroy(),delete pe.hls)})})};return(ie,D)=>{const pe=ee("router-link"),xe=ee("PageHeader"),Ve=ee("PageBody");return t(),ce(fe,null,{default:E(()=>[e("div",null,[N(xe,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(x)},{default:E(()=>[d.item?(t(),s("div",u$,[e("button",{class:le([[I.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[I.value?(t(),s("span",c$)):(t(),s("span",m$)),j(" "+v(d.item.state),1)],2),e("ul",f$,[d.item.arn?(t(),s("li",p$,[I.value?(t(),s("button",{key:0,onClick:D[0]||(D[0]=ae=>ge("STOPPED")),class:"dropdown-item"},D[20]||(D[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),j("Stop ")]))):(t(),s("button",{key:1,onClick:D[1]||(D[1]=ae=>ge("RUNNING")),class:"dropdown-item"},D[21]||(D[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),j("Start ")])))])):U("",!0),I.value?U("",!0):(t(),s("li",v$,[d.item.arn?(t(),s("button",{key:0,onClick:D[2]||(D[2]=ae=>m()),class:"dropdown-item"},D[22]||(D[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),j("Unpublish ")]))):(t(),s("button",{key:1,onClick:D[3]||(D[3]=ae=>w()),class:"dropdown-item"},D[23]||(D[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),j("Publish ")])))])),d.item.arn?(t(),s(O,{key:2},[D[25]||(D[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:D[4]||(D[4]=ae=>w()),class:"dropdown-item"},D[24]||(D[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),j("Republish ")]))])],64)):U("",!0)])])):U("",!0),N(pe,{to:`${l.urlSchedulePrograms}/${l.id}`,class:"ms-2 btn btn-primary"},{default:E(()=>D[26]||(D[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:D[5]||(D[5]=ae=>$()),class:"ms-2 btn btn-secondary"},D[27]||(D[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:D[6]||(D[6]=ae=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},D[28]||(D[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(Ve,{errorMessage:o(V)},{default:E(()=>[d.item?(t(),s("div",g$,[e("ul",b$,[e("li",y$,[e("button",{onClick:D[7]||(D[7]=ae=>u("information-tab")),class:le([i("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},D[29]||(D[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),j("Information ")]),2)]),e("li",$$,[e("button",{onClick:D[8]||(D[8]=ae=>u("outputPlayback-tab")),class:le([i("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},D[30]||(D[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),j("Output/Playback ")]),2)]),e("li",w$,[e("button",{onClick:D[9]||(D[9]=ae=>u("programs-tab")),class:le([i("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},D[31]||(D[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),j("Programs ")]),2)]),e("li",h$,[e("button",{onClick:D[10]||(D[10]=ae=>u("preview-tab")),class:le([[I.value?"":"disabled",i("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},D[32]||(D[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),j("Preview ")]),2)]),e("li",_$,[e("button",{onClick:D[11]||(D[11]=ae=>u("checklist-tab")),class:le([i("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},D[33]||(D[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),j("Checklist ")]),2)])]),e("div",k$,[e("div",{class:le([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",S$,[e("div",T$,[e("div",M$,[e("div",I$,[q(e("input",{"onUpdate:modelValue":D[12]||(D[12]=ae=>d.item.name=ae),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),D[34]||(D[34]=e("label",{for:"name"},"Name",-1))])]),e("div",C$,[e("div",x$,[q(e("input",{"onUpdate:modelValue":D[13]||(D[13]=ae=>d.item.playbackMode=ae),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[Q,d.item.playbackMode]]),D[35]||(D[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",V$,[e("div",P$,[q(e("input",{"onUpdate:modelValue":D[14]||(D[14]=ae=>d.item.tier=ae),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[Q,d.item.tier]]),D[36]||(D[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",O$,[D[38]||(D[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),I.value?U("",!0):(t(),s("div",A$,[e("button",{onClick:D[15]||(D[15]=ae=>B(d.item.fillerSlateSourceLocation.sourceLocationId,d.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},D[37]||(D[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",U$,[e("div",D$,[e("div",H$,[N(pe,{to:`${l.urlViewSourceLocation}/${d.item.fillerSlateSourceLocation.sourceLocationId}/${o(_)()}`,class:le([[d.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:E(()=>[j(v(d.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),D[39]||(D[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",L$,[e("div",E$,[N(pe,{to:`${l.urlViewVodSource}/${d.item.fillerSlateVodSource.vodSourceId}/${o(_)()}`,class:le([[d.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:E(()=>[j(v(d.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),D[40]||(D[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:le([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",q$,[e("div",null,[e("div",B$,[D[42]||(D[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",N$,[e("button",{onClick:D[16]||(D[16]=ae=>y()),class:"btn btn-outline-primary btn-sm"},D[41]||(D[41]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),d.item.outputs.length<=0?(t(),s("div",R$,D[43]||(D[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),j("Channel Output is required ")]))):U("",!0),e("div",F$,[e("table",z$,[D[53]||(D[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.outputs,(ae,Ce)=>(t(),s(O,{key:ae.channelOutputId},[e("tr",null,[e("td",null,v(Ce+1),1),e("td",null,[e("div",null,v(ae.manifestName),1),e("div",null,[e("span",G$,v(ae.outputType),1)])]),e("td",null,[e("div",null,[N(pe,{to:`${l.urlViewSourceGroup}/${ae.sourceGroupId}/${o(_)()}`},{default:E(()=>[j(v(ae.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[ae.playbackUrl?(t(),s("div",j$,v(ae.playbackUrl),1)):(t(),s("div",Y$,D[44]||(D[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),j("Publish channel to get the playback url ")])))]),I.value?(t(),s("td",W$)):(t(),s("td",K$,[e("button",{onClick:we=>ne(ae.channelOutputId),class:"btn btn-outline-warning btn-sm"},D[45]||(D[45]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,J$)]))]),ae.playbackUrl?(t(),s("tr",Q$,[D[50]||(D[50]=e("td",null,null,-1)),D[51]||(D[51]=e("td",null,null,-1)),D[52]||(D[52]=e("td",null,null,-1)),e("td",X$,[e("div",Z$,[D[47]||(D[47]=e("h5",null,[j("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",ew,[e("div",tw,[e("button",{onClick:we=>K(ae),class:"btn btn-outline-primary btn-sm"},D[46]||(D[46]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,sw)])])]),ae.playbackConfigurations.length>0?(t(),s("div",ow,[e("table",aw,[e("tbody",null,[(t(!0),s(O,null,L(ae.playbackConfigurations,(we,Je)=>(t(),s("tr",lw,[e("td",null,v(Je+1),1),e("td",null,[e("span",nw,v(we.name),1),e("div",rw,[e("span",null,v(we.adDecisionServerUrl),1)])]),e("td",iw,[we.arn?U("",!0):(t(),s("button",{key:0,onClick:Re=>Le(we.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},D[48]||(D[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,dw)),e("button",{onClick:Re=>dt(we.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},D[49]||(D[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,uw)])]))),256))])])])):U("",!0)])])):U("",!0)],64))),128))]),_:1},512),[[Te,d.item.outputs.length>0]])])])])])],2),e("div",{class:le([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",cw,[e("div",mw,[e("table",fw,[D[60]||(D[60]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),q(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:E(()=>[(t(!0),s(O,null,L(d.item.programs,(ae,Ce)=>(t(),s(O,{key:ae.programId},[e("tr",pw,[e("td",vw,v(Ce+1),1),e("td",null,[e("div",gw,[e("div",bw,[ae.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(ae.vodSource.video.thumbnails,we=>(t(),s("div",yw,[e("img",{src:we.url,class:"img-fuild border",width:"128"},null,8,$w)]))),256)):U("",!0)]),e("div",ww,[e("div",null,[ae.arn?(t(),s("span",hw)):U("",!0),e("span",null,v(ae.name),1)]),e("div",null,[D[54]||(D[54]=e("span",{class:"fas fa-fw fa-calendar-check me-1"},null,-1)),j(v(o(P).moment.utc(ae.dateScheduledStart).calendar()),1)])])])]),e("td",_w,v(o(P).moment.utc(ae.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",kw,v(ae.adBreaks.length),1),e("td",Sw,[e("div",Tw,[e("button",{onClick:we=>ae.expand=!ae.expand,type:"button",class:le([[ae.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[ae.expand?(t(),s("span",Iw)):(t(),s("span",Cw))],10,Mw),D[59]||(D[59]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",xw,[e("li",null,[e("button",{onClick:we=>n(ae.programId),class:"dropdown-item"},D[55]||(D[55]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),j("Edit ")]),8,Vw)]),ae.arn?(t(),s("li",Pw,[e("button",{onClick:we=>$e(ae.programId),class:"dropdown-item"},D[56]||(D[56]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),j("Unpublish ")]),8,Ow)])):(t(),s(O,{key:1},[e("li",null,[e("button",{onClick:we=>W(ae.programId),class:"dropdown-item"},D[57]||(D[57]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),j("Publish ")]),8,Aw)]),e("li",null,[e("button",{onClick:we=>se(ae.programId),class:"dropdown-item"},D[58]||(D[58]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),j("Remove ")]),8,Uw)])],64))])])])]),ae.expand?(t(),s("tr",Dw,[e("td",Hw,[N(d$,{item:ae,urlViewVideo:l.urlViewVideo,urlViewVodSource:l.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):U("",!0)],64))),128))]),_:1},512),[[Te,d.item.programs.length>0]])])]),e("div",Lw,[e("button",{onClick:D[17]||(D[17]=ae=>X()),class:"btn btn-outline-primary"},D[61]||(D[61]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),j("Program ")]))])])],2),I.value?(t(),s("div",{key:0,class:le([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",Ew,[e("div",qw,[d.item.outputs[0].hls?(t(),s("button",{key:1,onClick:D[19]||(D[19]=ae=>Ee()),class:"btn btn-primary"},D[63]||(D[63]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:D[18]||(D[18]=ae=>ut()),class:"btn btn-primary"},D[62]||(D[62]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",Bw,[(t(!0),s(O,null,L(d.item.outputs,ae=>(t(),s(O,null,[e("div",Nw,[e("div",Rw,[e("video",{id:`video-${ae.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,Fw),e("div",zw,[e("div",Gw,v(ae.manifestName),1)])])]),(t(!0),s(O,null,L(ae.playbackConfigurations,(Ce,we)=>(t(),s("div",jw,[e("div",Yw,[e("video",{id:`video-${Ce.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,Ww),e("div",Kw,[e("div",Jw,[j(" #"+v(we+1)+" ",1),e("span",Qw,v(Ce.name),1)])])])]))),256))],64))),256))])])],2)):U("",!0),e("div",{class:le([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Xw,[D[69]||(D[69]=j(" Checklist ")),e("ul",null,[e("li",null,[d.item.fillerSlateSourceLocation.arn?(t(),s("span",Zw)):(t(),s("span",eh)),D[64]||(D[64]=j(" Filler Slate Source Location "))]),e("li",null,[d.item.fillerSlateVodSource.arn?(t(),s("span",th)):(t(),s("span",sh)),D[65]||(D[65]=j(" Filler Slate VOD Source "))]),e("li",null,[d.item.outputs.length>0?(t(),s("span",oh)):(t(),s("span",ah)),D[67]||(D[67]=j(" Outputs ")),e("ul",null,[e("li",null,[d.item.outputs.some(ae=>ae.playbackConfigurations.length>0)?(t(),s("span",lh)):(t(),s("span",nh)),D[66]||(D[66]=j(" Ad Insertion setup "))])])]),e("li",null,[d.item.programs.length>0?(t(),s("span",rh)):(t(),s("span",ih)),D[68]||(D[68]=j(" Programs "))])])])],2)])])):U("",!0)]),_:1},8,["errorMessage"]),N(wb,{ref_key:"modalAddProgram",ref:g,onRefresh:$},null,512),N(zb,{ref_key:"modalAddPlaybackConfiguration",ref:Y,onRefresh:$},null,512),N(fy,{ref_key:"modalAddChannelOutput",ref:b,onRefresh:$},null,512),N(rt,{ref_key:"modalEditProgram",ref:M,onOnClose:$},null,512),N(Ly,{ref_key:"modalEditFillerSlate",ref:f,onRefresh:$},null,512)])]),_:1})}}},uh={path:"/",component:ca,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Ba},{path:"videos",children:[{path:"",component:En},{path:"view/:id",component:kr,props:!0},{path:"add",component:hl},{path:"edit/:id",component:sn,props:!0}]},{path:"source-groups",children:[{path:"add",component:Ir},{path:"edit/:id",component:Kr,props:!0},{path:"",component:oi},{path:"view/:id",component:$i,props:!0}]},{path:"source-locations",children:[{path:"add",component:Ti},{path:"edit/:id",component:Ci,props:!0},{path:"",component:qi},{path:"view/:id",component:nd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:Od},{path:"edit/:id",component:lu,props:!0},{path:"",component:Hu},{path:"view/:id",component:vm,props:!0}]},{path:"channels",children:[{path:"add",component:yv},{path:"edit/:id",component:hv,props:!0},{path:"",component:Pv},{path:"schedule-programs/:id",component:g1,props:!0},{path:"view/:id",component:dh,props:!0}]},{path:"program-templates",children:[{path:"add",component:rf},{path:"edit/:id",component:Xf,props:!0},{path:"",component:gp},{path:"view/:id",component:Qp,props:!0}]}]},it=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{...uh}]}),ch={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const l=this,h=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();h.on("onNotificationCreated",function(x){let k=x.content;x.notificationEntityClassText==="Deposit"&&(k+="<br/>",k+=`<a href="${l.urlViewDeposit}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.notificationEntityClassText==="Withdraw"&&(k+="<br/>",k+=`<a href="${l.urlViewWithdraw}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.notificationEntityClassText==="ManualModeOfPayment"&&(k+="<br/>",k+=`<a href="${l.urlViewManualModeOfPayment}${x.referenceId}">Click ${x.notificationEntityClassText} here</a>`),x.iconClass;let A="secondary";switch(x.notificationType){case 1:A="success";break;case 3:A="info";break;case 3:A="success";break;case 4:A="info";break;case 5:A="warning";break;case 6:A="error";break}l.$toast[A](x.subject,k,{timeOut:1e4});const C=x.subject,V={body:k,icon:"/img/192x102.png"};new Notification(C,V)}),h.on("jobUpdated",function(x){l.$bus.$emit("event:job-updated",x)}),await h.start().then(function(){}).catch(function(x){})}}};function mh(l,p,h,x,k,A){return t(),s("div")}const fh=Me(ch,[["render",mh],["__scopeId","data-v-5b4a9fa2"]]),ph={class:"navbar bg-dark bg-gradient shadow","data-bs-theme":"dark"},vh={class:"container"},gh={class:"col-md"},bh={class:"navbar-brand mb-0"},yh={class:"col-md-auto"},$h={class:"d-flex flex-row align-items-center justify-content-end"},wh={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(l){return(p,h)=>(t(),ce(fe,null,{default:E(()=>[e("nav",ph,[e("div",vh,[e("div",gh,[Oe(p.$slots,"title",{},()=>[e("a",bh,[e("i",{class:le([l.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,v(l.pageTitle),1)])])]),e("div",yh,[e("div",$h,[Oe(p.$slots,"default")])])])])]),_:3}))}},hh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_h=["innerHTML"],kh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Sh={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(l){return(p,h)=>(t(),ce(fe,null,{default:E(()=>[Oe(p.$slots,"default",{},()=>[l.errorMessage?(t(),s("div",hh,[h[0]||(h[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),j("Error ")],-1)),e("div",{innerHTML:l.errorMessage},null,8,_h)])):U("",!0),l.vuelidate&&l.vuelidate.$error?(t(),s("div",kh,[h[1]||(h[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),j("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(l.vuelidate.$errors,x=>(t(),s("li",{key:x.$uid},[x.$validator==="$each"?(t(),s(O,{key:0},[j(" Check errors in '"+v(x.$property)+"' ",1)],64)):(t(),s(O,{key:1},[j(v(x.$message),1)],64))]))),128))])])):U("",!0)])]),_:3}))}},Th={class:"my-3 container-md container"},Mh={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(l){return(p,h)=>{const x=ee("PageMessages");return t(),ce(fe,null,{default:E(()=>[e("div",Th,[N(x,{errorMessage:l.errorMessage,vuelidate:l.vuelidate},null,8,["errorMessage","vuelidate"]),Oe(p.$slots,"default")])]),_:3})}}},Ih={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const l=this;l.busy||(document.activeElement&&document.activeElement.blur(),await l.search(1))},async moveFirst(){const l=this;if(l.busy)return;l.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await l.search(1))},async moveLast(){const l=this;if(l.busy)return;const p=l.filter;p.pageIndex!==p.totalPages&&(document.activeElement&&document.activeElement.blur(),await l.search(p.totalPages))},async move(l){const p=this;if(p.busy)return;const h=p.filter,x=h.pageIndex+l;x>=0&&x<=h.totalPages&&(document.activeElement&&document.activeElement.blur(),await p.search(x))}}},Ch={class:"mt-2"},xh={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},Vh={key:0,class:"col-sm order-2 order-sm-1"},Ph={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Oh={class:"me-1 fw-bold"},Ah={class:"fw-bold"},Uh={class:"ms-1"},Dh={class:"col-sm-auto ms-auto order-1 order-sm-2"},Hh={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Lh={key:0,class:"page-item"},Eh={key:1,class:"page-item"},qh={key:2,class:"page-item"},Bh={class:"page-item active"},Nh={class:"page-link"},Rh={key:3,class:"page-item"},Fh={key:4,class:"page-item"},zh={key:5,class:"page-item"},Gh={key:1,class:"text-info font-weight-bold text-center"},jh={key:0},Yh={key:1};function Wh(l,p,h,x,k,A){return t(),s("div",Ch,[h.filter.items.length?(t(),s("div",xh,[h.showPerPage?(t(),s("div",Vh,[e("div",Ph,[e("div",null,[e("span",Oh,v(h.filter.totalCount),1),p[8]||(p[8]=j("records in ")),e("span",Ah,v(h.filter.totalPages),1),p[9]||(p[9]=j(" page(s) "))]),e("div",Uh,[q(e("select",{"onUpdate:modelValue":p[0]||(p[0]=C=>h.filter.pageSize=C),onChange:p[1]||(p[1]=(...C)=>A.changePagination&&A.changePagination(...C)),class:"form-select form-select-sm me-1"},p[10]||(p[10]=[Ge('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ue,h.filter.pageSize]])]),p[11]||(p[11]=e("div",{class:"ms-1"},"per page",-1))])])):U("",!0),e("div",Dh,[e("ul",Hh,[h.filter.pageIndex!==1?(t(),s("li",Lh,[e("button",{class:"page-link","aria-label":"Previous",onClick:p[2]||(p[2]=(...C)=>A.moveFirst&&A.moveFirst(...C))},p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):U("",!0),h.filter.pageIndex>2?(t(),s("li",Eh,[e("button",{class:"page-link",onClick:p[3]||(p[3]=C=>A.move(-2))},v(h.filter.pageIndex-2),1)])):U("",!0),h.filter.pageIndex>1?(t(),s("li",qh,[e("button",{class:"page-link",onClick:p[4]||(p[4]=C=>A.move(-1))},v(h.filter.pageIndex-1),1)])):U("",!0),e("li",Bh,[e("span",Nh,v(h.filter.pageIndex),1)]),h.filter.pageIndex<h.filter.totalPages?(t(),s("li",Rh,[e("button",{class:"page-link",onClick:p[5]||(p[5]=C=>A.move(1))},v(h.filter.pageIndex+1),1)])):U("",!0),h.filter.pageIndex<h.filter.totalPages-1?(t(),s("li",Fh,[e("button",{class:"page-link",onClick:p[6]||(p[6]=C=>A.move(2))},v(h.filter.pageIndex+2),1)])):U("",!0),h.filter.pageIndex<h.filter.totalPages?(t(),s("li",zh,[e("button",{class:"page-link","aria-label":"Next",onClick:p[7]||(p[7]=(...C)=>A.moveLast&&A.moveLast(...C))},p[13]||(p[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):U("",!0)])])])):(t(),s("div",Gh,[h.noRecords?(t(),s("div",jh,v(h.noRecords),1)):(t(),s("div",Yh,"No record(s) found."))]))])}const Kh=Me(Ih,[["render",Wh]]),Jh={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let l=this;if(!l.enabled)return;let p=l.filter;p.sortField===l.field?p.sortOrder===0?p.sortField=null:p.sortOrder=p.sortOrder===0?1:0:(p.sortField=l.field,p.sortOrder=1),l.$emit("search")}}},Qh={class:"align-self-center"};function Xh(l,p,h,x,k,A){return t(),s("div",{onClick:p[0]||(p[0]=(...C)=>A.click&&A.click(...C)),class:"d-flex flex-row justify-content-start align-content-center",style:at({cursor:h.enabled?"pointer":""})},[Oe(l.$slots,"default"),e("span",Qh,[h.showSort?(t(),s("span",{key:0,class:le([{"fa-sort text-gray-500":!A.currentSortField(),"fa-sort-up":A.currentSortField()&&A.sortUp(),"fa-sort-down":A.currentSortField()&&!A.sortUp()},"fas fa-fw mr-1"])},null,2)):U("",!0)])],4)}const Zh=Me(Jh,[["render",Xh]]),e_={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(l){const p=this;p.setSelected(l),p.$emit("onSelectedRow",l)}}},t_={class:"table-responsive m-0"},s_=["href"],o_={key:1},a_=["onClick"],l_={class:"form-group row no-gutters"},n_={class:"col-5 col-form-label"},r_={class:"col align-self-center"},i_=["href"],d_={key:1};function u_(l,p,h,x,k,A){return t(),s("div",null,[e("div",t_,[e("table",{class:le(["table table-hover d-none d-md-table card",h.tableCss])},[e("thead",null,[Oe(l.$slots,"header",{},()=>[p[0]||(p[0]=e("th",null,"#",-1)),(t(!0),s(O,null,L(h.header.columns,C=>(t(),s("th",null,v(C.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(O,null,L(h.items,(C,F)=>Oe(l.$slots,"table-row",{key:`row1-${C[h.header.key]}`,item:C,index:F},()=>[e("td",null,v(h.getRowNumber(F)),1),(t(!0),s(O,null,L(h.header.columns,R=>(t(),s("td",null,[R.href?(t(),s("a",{key:0,href:R.href(C[h.header.key]),class:"font-weight-bold"},v(C[R.field]),9,s_)):(t(),s("span",o_,v(C[R.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:le(["d-block d-md-none",h.rowCss])},[(t(!0),s(O,null,L(h.items,(C,F)=>(t(),s("div",{key:`row2-${C[h.header.key]}`,onClick:R=>A.onSelectedRow(C),class:"border"},[e("div",{class:le(["p-2",{"b-left":h.isSelected(C)}])},[Oe(l.$slots,"table-list",{item:C,index:F},()=>[(t(!0),s(O,null,L(h.header.columns,R=>(t(),s("div",l_,[e("label",n_,v(R.title),1),e("div",r_,[R.href?(t(),s("a",{key:0,href:R.href(C[h.header.key]),class:"font-weight-bold"},v(C[R.field]),9,i_)):(t(),s("span",d_,v(C[R.field]),1))])]))),256))],!0)],2)],8,a_))),128))],2)])}const c_=Me(e_,[["render",u_],["__scopeId","data-v-65929213"]]),Ie=gt(yt);Ie.use(bt());Ie.use(it);Ie.component("m-notification",fh);Ie.component("m-pagination",Kh);Ie.component("sort-field",Zh);Ie.component("table-list",c_);Ie.component("Toasts",na);Ie.component("PageHeader",wh);Ie.component("PageMessages",Sh);Ie.component("PageBody",Mh);const m_="https://sonyfastpoc.azurewebsites.net/",f_="Arcadian-Sony FAST",p_=void 0,v_={API_URL:m_,appName:f_,tenantId:p_};Ie.provide("$config",v_);Ie.provide("$bus",Ye);Ie.mount("#app");
