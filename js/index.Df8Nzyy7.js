import{o as t,c as pe,r as te,h as st,u as je,d as ot,a as ue,e as Re,b as s,f as e,g as F,w as z,i as K,t as m,F as O,j as q,k as D,l as fe,m as Ye,n as xe,p as at,q as Fe,s as We,P as lt,v as ge,x as se,y as le,z as Te,T as be,A as o,B as pt,C as B,D as Z,E as nt,G as re,H as vt,I as rt,J as ke,K as Ae,L as Ie,M as Be,N as ve,O as Ue,Q as Se,R as he,S as Ne,U as Ee,V as tt,W as gt,X as bt,Y as yt,Z as qe,_ as $t,$ as wt}from"./vendor-Dwcj-3kd-chunk.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))P(k);new MutationObserver(k=>{for(const H of k)if(H.type==="childList")for(const V of H.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&P(V)}).observe(document,{childList:!0,subtree:!0});function S(k){const H={};return k.integrity&&(H.integrity=k.integrity),k.referrerPolicy&&(H.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?H.credentials="include":k.crossOrigin==="anonymous"?H.credentials="omit":H.credentials="same-origin",H}function P(k){if(k.ep)return;k.ep=!0;const H=S(k);fetch(k.href,H)}})();const ht={__name:"App",setup(l){return(p,S)=>{const P=te("router-view");return t(),pe(P)}}};function Ke(){const l=ee=>{var T;let E=ee,A=E.response,C="";if(!E.response)return ee.message;if(A.status===500){if(typeof A.data=="string")return A.data;if(A.data.content)return A.data.content;if(A.data.detail)return A.data.detail}if(A.status===401){const d=`${window.location.pathname}${window.location.search}`;C=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(d)}`}'>here</a> to login.`}else if(A.status===400){let d=E.response.data.errors;C=E.response.data.title||E.response.data,d&&(C+="<ul>");for(let X in d){let J=d[X];for(let r in d[X]){let f=J[r];C+=`<li>${f}</li>`}}d&&(C+="</ul>"),C||(C=E.message),C&&C.content&&(C=C.content)}else A.status===404?C=((T=A==null?void 0:A.data)==null?void 0:T.title)||(A==null?void 0:A.data)||"Record not found.":typeof A.data=="string"&&(C=E.message,C===""&&(C=`Error <b>Http ${A.status}</b>.<br/>Please contact the System Administrator.`));return C},p=ee=>JSON.parse(JSON.stringify(ee)),S=ee=>{if(typeof ee!="number")return ee;var E=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return E.format(ee)},P=(ee,E,A)=>{const T={value:E,expiry:new Date().getTime()+A};debugger;localStorage.setItem(ee,JSON.stringify(T))},k=ee=>{debugger;const E=localStorage.getItem(ee);if(!E)return null;const A=JSON.parse(E);return new Date().getTime()>A.expiry?(localStorage.removeItem(ee),null):A.value},H="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:l,clone:p,toCurrency:S,moment:st,localStorageSetWithExpiry:P,localStorageGetWithExpiry:k,setPageTab:(ee,E)=>{var A=localStorage.getItem(H);A?A=JSON.parse(A):A={},A[ee]=E,localStorage.setItem(H,JSON.stringify(A))},getPageTab:ee=>{var E=localStorage.getItem(H);return E?E=JSON.parse(E):E={},E[ee]},createHlsStream:(ee,E,A)=>{var C=new Hls({autoStartLoad:A??!0});return C.on(Hls.Events.MEDIA_ATTACHED,function(){}),C.on(Hls.Events.MANIFEST_PARSED,function(T,d){console.log("manifest loaded, found "+d.levels.length+" quality level")}),C.on(Hls.Events.ERROR,function(T,d){if(d.fatal)switch(d.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),C.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",d);break;default:C.destroy();break}}),C.loadSource(E),C.attachMedia(ee),C},isValidTime:ee=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(ee),generateReturnUrl:()=>{const ee=je();let E=ee.path;return ee.query.returnUrl&&(E=ee.query.returnUrl),E=`?returnUrl=${encodeURIComponent(E)}`,E}}}const _t=Ke(),it=JSON.parse(localStorage.getItem("user"))||{},kt=_t.moment.utc(it.exp*1e3),St=kt.isAfter()?it:null,we=ot({id:"auth",state:()=>({user:St,returnUrl:null}),actions:{async login(l){try{this.user=l,localStorage.setItem("user",JSON.stringify(l))}catch(p){debugger;alert(p)}},logout(){this.user=null,localStorage.removeItem("user"),ft.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),Tt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(Tt));const Mt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ge=Mt,dt=ot("msal",()=>{const l=ue({auth:{clientId:Ge.VITE_AUTH_CLIENT_ID,authority:Ge.VITE_AUTH_AUTHORITY_URL,redirectUri:Ge.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),p=ue("");return{msalConfig:l,accessToken:p,setAccessToken:P=>{p.value=P}}}),Qe={$on:(...l)=>Re.on(...l),$once:(...l)=>Re.once(...l),$off:(...l)=>Re.off(...l),$emit:(...l)=>Re.emit(...l)};function It(){const l=(H,V,Q,W)=>{Qe.$emit("toast-message",{title:H,message:V,type:Q,options:W})};return{success:(H,V,Q={})=>{l(H,V,"success",Q)},warning:(H,V,Q={})=>{l(H,V,"warning",Q)},info:(H,V,Q={})=>{l(H,V,"info",Q)},error:(H,V,Q={})=>{l(H,V,"danger",Q)}}}const Ve=(l,p)=>{const S=l.__vccOpts||l;for(const[P,k]of p)S[P]=k;return S},xt={data(){return{notifications:[],messages:[]}},async created(){const l=this;l.$bus.$on("event:notification-received",()=>{l.getUnreadNotifications()}),l.$bus.$on("event:notification-marked-as-read",p=>{l.notifications.some(P=>P.notificationId===p)&&l.getUnreadNotifications()}),l.$bus.$on("event:notification-removed",p=>{l.notifications.some(P=>P.notificationId===p)&&l.getUnreadNotifications()}),l.$bus.$on("event:chat-marked-as-read",l.onChatMarkedAsRead),l.$bus.$on("event:chat-message-received",l.onChatMessageReceived)},async mounted(){const l=this,p=l.$refs.notifications,S=l.$refs.messages;p&&p.offsetParent,S&&S.offsetParent&&await l.getUnreadChats()},methods:{async logout(){const l=this;try{await l.$util.axios.post("/api/accounts/logout").then(p=>{const S="/";l.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){l.$util.href(S)}})})}catch(p){l.$util.handleError(p)}},async onChatMarkedAsRead(l){let p=this,S=p.messages.find(P=>P.chatId===l);if(S){let P=p.messages.indexOf(S);p.messages.splice(P,1)}},async onChatMessageReceived(l){let p=this,S=p.messages.find(k=>k.chatId===l.chatId);if(S)S.lastMessageText=l.content;else{var P={chatId:l.chatId,isRead:!1,lastDateSent:l.dateSent,lastMessageText:l.content,senderFirstLastName:`${l.sender.firstName} ${l.sender.lastName}`,senderInitials:l.sender.initials,senderProfilePicture32:l.sender.profilePicture32,urlPicture:p.$util.getProfilePictureUrl(l.sender.profilePicture32,l.sender.initials)};p.messages.push(P)}},async getUnreadNotifications(){const l=this;try{await l.$util.axios.get("api/accounts/unread-notifications").then(p=>{l.notifications=p.data})}catch(p){l.$util.handleError(p)}},async getUnreadChats(){const l=this;try{await l.$util.axios.get("api/accounts/unread-chats").then(p=>{l.messages=p.data;for(let S in l.messages){let P=l.messages[S];l.$set(P,"urlPicture",l.$util.getProfilePictureUrl(P.senderProfilePicture32,P.senderInitials))}})}catch(p){l.$util.handleError(p)}},viewNotification(l){this.$bus.$emit("event:open-notification",l)},viewChat(l){this.$bus.$emit("event:open-chat",l)},showHiddenElements(){let p=this.$el.getElementsByClassName("initialHidden");for(let S=0;S<p.length;S++)p[S].classList.remove("invisible")}}},Ct={mixins:[xt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const p=we().user;return{user:p,username:p?p.nameFull:"Guest"}},async mounted(){},methods:{isActive(l){return window.location.href.indexOf(l)>-1},async openModalSearchUser747(l){this.$refs.refModalSearchUser747.open(l)}}},Vt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Pt={class:"container-md"},Ot={class:"navbar-collapse collapse",id:"navbarSideCollapse"},At={class:"navbar-nav"},Ut={class:"nav-item dropdown"},Dt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ht={class:"nav-item dropdown"},Lt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Et={class:"navbar-nav ms-auto"},qt={class:"nav-item dropdown"},Bt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Nt={class:"d-inline d-sm-none d-md-inline"},Rt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Ft={class:"text-capitalize"};function zt(l,p,S,P,k,H){const V=te("router-link");return t(),s("nav",Vt,[e("div",Pt,[F(V,{class:"navbar-brand",to:"/member"},{default:z(()=>[K(m(S.appName),1)]),_:1}),p[14]||(p[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Ot,[e("ul",At,[e("li",Ut,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Dt,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/announcements"},{default:z(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),K(" Announcements ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/posts"},{default:z(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),K(" Posts ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/yellow-pages"},{default:z(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),K(" Yellow Pages ")])),_:1})])])]),e("li",Ht,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Lt,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:z(()=>p[4]||(p[4]=[K(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Et,[e("li",qt,[e("a",Bt,[e("span",null,[p[6]||(p[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Nt,m(k.username),1)])]),e("ul",Rt,[p[9]||(p[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),p[10]||(p[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),p[11]||(p[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),p[12]||(p[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),k.user&&k.user.roles.length>1?(t(!0),s(O,{key:0},q(k.user.roles,Q=>(t(),s("li",null,[F(V,{to:`/${Q.toLowerCase()}`,class:"dropdown-item"},{default:z(()=>[e("span",Ft,m(Q),1)]),_:2},1032,["to"])]))),256)):D("",!0),e("li",null,[F(V,{to:"/",class:"dropdown-item"},{default:z(()=>p[7]||(p[7]=[K(" Main ")])),_:1})]),p[13]||(p[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[F(V,{to:"/account/logout",class:"dropdown-item"},{default:z(()=>p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),K("Logout ")])),_:1})])])])])])])])}const Gt=Ve(Ct,[["render",zt]]),jt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const l=document.getElementById("top");l&&l.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let l=this;if(!l.$el.getElementsByClassName)return;let p=l.$el.getElementsByClassName("initialHidden");for(let S=0;S<p.length;S++){let P=p[S];P.classList.remove("invisible"),P.classList.remove("d-none")}},close(){const l=this,p=document.referrer.toLowerCase();p&&p.includes("/account/login")?l.$router.go(-2):l.$router.go(-1)},toggle(l){const p=this;p.toggles[l]=!p.toggles[l],localStorage.setItem(p.togglesKey,JSON.stringify(p.toggles))}}},Yt={mixins:[jt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(l){return window.location.href.indexOf(l)>-1}}},Wt={class:"footer sticky-bottom"},Kt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Qt={class:"container-md"},Jt={class:"navbar-text small p-0"},Xt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Zt={class:"container-md"},es={class:"navbar-nav nav-fill w-100"},ts={class:"nav-item dropup"},ss={class:"dropdown-menu","aria-labelledby":"dropdown01"},os={class:"nav-item dropup"},as={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ls(l,p,S,P,k,H){const V=te("router-link");return t(),s("footer",Wt,[e("div",Kt,[e("div",Qt,[e("span",Jt,"©"+m(k.copyright),1)])]),e("nav",Xt,[e("div",Zt,[e("ul",es,[e("li",ts,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",ss,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/announcements"},{default:z(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),K(" Announcements ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/posts"},{default:z(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),K(" Posts ")])),_:1})]),e("li",null,[F(V,{class:"dropdown-item",to:"/member/yellow-pages"},{default:z(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),K(" Yellow Pages ")])),_:1})])])]),e("li",os,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",as,[e("li",null,[F(V,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:z(()=>p[4]||(p[4]=[K(" Property Monthly Dues ")])),_:1})])])])])])])])}const ns=Ve(Yt,[["render",ls]]),rs={name:"AdminLayout",components:{TopNav:Gt,BottomNav:ns},inject:["$config"],mounted(){const p=this.$config;document.title=`Account - ${p.appName}`}},is={class:"d-flex flex-column vh-100"};function ds(l,p,S,P,k,H){const V=te("Toasts"),Q=te("router-view");return t(),s("div",is,[F(V),F(Q,{class:"flex-grow-1 mb-2"})])}const us=Ve(rs,[["render",ds]]),cs={__name:"index",setup(l){return we().user,fe(()=>{}),(S,P)=>(t(),s("div",null,P[0]||(P[0]=[Ye('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ms={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},fs=ms;function ps(){xe("$config");const l=fs.VITE_API_URL,p=at.create({baseURL:l});return Fe.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),p.interceptors.request.use(S=>{Fe.start();const{user:P}=we();return P&&P.token&&(S.headers?(S.headers.Authorization||(S.headers.Authorization=`Bearer ${P.token}`),S.headers["Access-Control-Allow-Origin"]||(S.headers["Access-Control-Allow-Origin"]="*")):S.headers={Authorization:`Bearer ${P.token}`,"Access-Control-Allow-Origin":"*"}),S}),p.interceptors.response.use(S=>(Fe.done(),S),S=>{throw Fe.done(),S}),p}function $e(l){if(!l.appTitle)throw Error("App Title is required.");if(!l.pageTitle)throw Error("Page Title is required.");const p=je(),S=We(),P=ps(),k=Ke(),H=It(),Q=we().user,W=()=>Q&&Q.roles&&Q.roles.includes("System"),U=()=>Q&&Q.roles&&Q.roles.includes("administrator"),G=()=>Q&&Q.roles&&Q.roles.includes("employee"),ee=()=>Q&&Q.roles&&Q.roles.includes("Member"),E=async()=>{const Y=document.referrer.toLowerCase();Y&&Y.includes("/accounts/login")?await S.go(-2):await S.go(-1)},A=Y=>{var b;const u=p.path,I=(b=p.query)==null?void 0:b.returnUrl;I&&!(u.startsWith(I)||I.startsWith(u))?S.push(I):S.push(Y)},C=l.appTitle,T=l.pageTitle,d=ue(!1),X=ue(new Map),J=ue(""),r=ue(""),f=ue("");return{appTitle:C,pageTitle:T,busy:d,validations:X,infoMessage:J,warningMessage:r,errorMessage:f,router:S,route:p,axios:P,utils:k,toasts:H,close:E,closeWithReturnUrl:A,generateReturnUrl:k.generateReturnUrl,security:{userId:Q?Q.userId:"",isSystem:W(),isAdministrator:U(),isEmployee:G(),isMember:ee()}}}const vs={class:"h-100 d-flex align-items-center justify-content-center"},gs={class:"form-signin w-100 m-auto"},bs={class:"h3 mb-3 fw-normal"},ys={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$s=["innerHTML"],ws={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},hs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(l){xe("$config");const p=we(),S=dt(),P=new lt(S.msalConfig),k=ge({username:"",password:""}),H={username:{required:se.withMessage("Username is required.",le),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",le),$autoDirty:!0,$lazy:!0}},V=Te(H,k),{appTitle:Q,pageTitle:W,busy:U,isDirty:G,validations:ee,infoMessage:E,warningMessage:A,errorMessage:C,router:T,route:d,axios:X,utils:J,toasts:r,close:f,security:Y}=$e({appTitle:"Sony FAST POC",pageTitle:"Sign On"});fe(async()=>{await P.initialize()});const u=async()=>{await P.loginPopup({}).then(()=>{debugger;const _=P.getAllAccounts()[0];P.setActiveAccount(_)}).catch(b=>{console.error(`error during authentication: ${b}`)});var I={account:P.getActiveAccount(),scopes:[]};await P.acquireTokenSilent(I).then(b=>{debugger;const g=b.account.idToken,i=pt(g);if(i.token=b.accessToken,console.log(b),!i.roles){debugger;i.roles=[]}i.userId=i.sub,p.login(i);var n=d.query.returnUrl;n?T.push(decodeURIComponent(n)):i.roles.length===1?T.push(`/${i.roles[0].toLowerCase()}`):T.push("/")}).catch(b=>{console.error(`error during acquireTokenSilent: ${b}`)})};return(I,b)=>(t(),pe(be,null,{default:z(()=>[e("div",vs,[e("main",gs,[e("div",null,[e("h1",bs,m(o(Q)),1),e("div",null,[o(C)?(t(),s("div",ys,[b[1]||(b[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(C)},null,8,$s)])):D("",!0),o(V).$error?(t(),s("div",ws,[b[2]||(b[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(V).$errors,_=>(t(),s("li",{key:_.$uid},m(_.$message),1))),128))])])):D("",!0)]),e("button",{onClick:b[0]||(b[0]=_=>u()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},_s=Ve(hs,[["__scopeId","data-v-896956d0"]]),ks={class:"h-100 d-flex align-items-center justify-content-center"},Ss={__name:"logout",setup(l){const p=we();return p.user,fe(async()=>{p.logoutWithRedirect()}),(S,P)=>(t(),s("div",ks,P[0]||(P[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[K(" You have logged out from HOA MS."),e("br"),K(" Click "),e("a",{href:"/",class:"d-inline"},"here"),K(" to go back to home page. ")])],-1)])))}},Ts={class:"h-100 d-flex align-items-center justify-content-center"},Ms={class:"card m-3"},Is={class:"card-header"},xs={class:"card-body"},Cs={class:"m-2"},Vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ps=["innerHTML"],Os={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},As={class:"row row-cols-1 row-cols-sm-3"},Us={class:"col-sm"},Ds={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"col-sm"},Ns={class:"form-group"},Rs={key:0,class:"d-block invalid-feedback"},Fs={class:"row row-cols-1 row-cols-sm-3"},zs={class:"col"},Gs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Ys={class:"col"},Ws={class:"form-group"},Ks={key:0,class:"d-block invalid-feedback"},Qs={class:"row row-cols-1 row-cols-sm-3"},Js={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"col-sm"},to={class:"form-group"},so={key:0,class:"d-block invalid-feedback"},oo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},ao={class:"col"},lo=["disabled"],no={class:"col"},ro={class:"col"},io={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(l){const p=ge({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),S=(Y,u)=>Y===u.password,P={firstName:{required:se.withMessage("First name is required.",le),$autoDirty:!0,$lazy:!0},middleName:{required:se.withMessage("Middle name is required.",le),$autoDirty:!0,$lazy:!0},lastName:{required:se.withMessage("Last name is required.",le),$autoDirty:!0,$lazy:!0},phoneNumber:{required:se.withMessage("Phone number is required.",le),$autoDirty:!0,$lazy:!0},email:{required:se.withMessage("Email is required.",le),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",le),$autoDirty:!0,$lazy:!0},confirmPassword:{required:se.withMessage("Confirm password is required.",le),confirmSamePassword:se.withMessage("Password and confirm passwrod are different.",S),$autoDirty:!0,$lazy:!0}},k=Te(P,p),{appTitle:H,pageTitle:V,busy:Q,isDirty:W,validations:U,infoMessage:G,warningMessage:ee,errorMessage:E,router:A,axios:C,utils:T,toasts:d,close:X,security:J}=$e({appTitle:"HOA MS",pageTitle:"Register User"}),r=xe("$config");fe(()=>{});const f=async()=>{const Y=p;if(Q.value)return;if(!await k.value.$validate()){window.scrollTo(0,0);return}E.value=null;try{Q.value=!0;const I=T.clone(Y);I.tenantid=r.tenantId;debugger;await C({method:"post",url:"/api/v1/accounts/register",data:I}).then(b=>{d.success("Register","Registration was successfull.",{onClose:async()=>{await A.push("/accounts/login")}})})}catch(I){E.value=T.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{Q.value=!1}};return(Y,u)=>{const I=te("router-link");return t(),pe(be,null,{default:z(()=>[e("div",Ts,[e("div",Ms,[e("h4",Is,m(o(V)),1),e("div",xs,[e("div",Cs,[o(E)?(t(),s("div",Vs,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Ps)])):D("",!0),o(k).$error?(t(),s("div",Os,[u[9]||(u[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(k).$errors,b=>(t(),s("li",{key:b.$uid},m(b.$message),1))),128))])])):D("",!0)]),e("div",As,[e("div",Us,[e("div",Ds,[u[10]||(u[10]=e("label",null,"First Name",-1)),B(e("input",{"onUpdate:modelValue":u[0]||(u[0]=b=>p.firstName=b),type:"text",class:"form-control"},null,512),[[Z,p.firstName]]),o(k).firstName.$error?(t(),s("div",Hs,[(t(!0),s(O,null,q(o(k).firstName.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])]),e("div",Ls,[e("div",Es,[u[11]||(u[11]=e("label",null,"Middle Name",-1)),B(e("input",{"onUpdate:modelValue":u[1]||(u[1]=b=>p.middleName=b),type:"text",class:"form-control"},null,512),[[Z,p.middleName]]),o(k).middleName.$error?(t(),s("div",qs,[(t(!0),s(O,null,q(o(k).middleName.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])]),e("div",Bs,[e("div",Ns,[u[12]||(u[12]=e("label",null,"Last Name",-1)),B(e("input",{"onUpdate:modelValue":u[2]||(u[2]=b=>p.lastName=b),type:"text",class:"form-control"},null,512),[[Z,p.lastName]]),o(k).lastName.$error?(t(),s("div",Rs,[(t(!0),s(O,null,q(o(k).lastName.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])])]),e("div",Fs,[e("div",zs,[e("div",Gs,[u[13]||(u[13]=e("label",null,"Phone Number",-1)),B(e("input",{"onUpdate:modelValue":u[3]||(u[3]=b=>p.phoneNumber=b),type:"tel",class:"form-control"},null,512),[[Z,p.phoneNumber]]),o(k).phoneNumber.$error?(t(),s("div",js,[(t(!0),s(O,null,q(o(k).phoneNumber.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])]),e("div",Ys,[e("div",Ws,[u[14]||(u[14]=e("label",null,"Email",-1)),B(e("input",{"onUpdate:modelValue":u[4]||(u[4]=b=>p.email=b),type:"email",class:"form-control"},null,512),[[Z,p.email]]),o(k).email.$error?(t(),s("div",Ks,[(t(!0),s(O,null,q(o(k).email.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])])]),e("div",Qs,[e("div",Js,[e("div",Xs,[u[15]||(u[15]=e("label",null,"Password",-1)),B(e("input",{"onUpdate:modelValue":u[5]||(u[5]=b=>p.password=b),type:"password",class:"form-control"},null,512),[[Z,p.password]]),o(k).password.$error?(t(),s("div",Zs,[(t(!0),s(O,null,q(o(k).password.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])]),e("div",eo,[e("div",to,[u[16]||(u[16]=e("label",null,"Confirm Password",-1)),B(e("input",{"onUpdate:modelValue":u[6]||(u[6]=b=>p.confirmPassword=b),type:"password",class:"form-control"},null,512),[[Z,p.confirmPassword]]),o(k).confirmPassword.$error?(t(),s("div",so,[(t(!0),s(O,null,q(o(k).confirmPassword.$errors,b=>(t(),s("div",{key:b.$uid},m(b.$message),1))),128))])):D("",!0)])])]),e("div",oo,[e("div",ao,[e("button",{disabled:o(k).$dirty&&o(k).$invalid,onClick:u[7]||(u[7]=b=>f()),class:"btn btn-primary w-100"},u[17]||(u[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),K("Register ")]),8,lo)]),e("div",no,[F(I,{to:"/",class:"btn btn-outline-primary w-100"},{default:z(()=>u[18]||(u[18]=[K("Home")])),_:1})]),e("div",ro,[F(I,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:z(()=>u[19]||(u[19]=[K("Login")])),_:1})])])])])])]),_:1})}}},uo={path:"/accounts",component:us,props:!1,meta:{},children:[{path:"",component:cs},{path:"login",component:_s},{path:"logout",component:Ss},{path:"register",component:io}]};function Je(){const l=We(),p=W=>window.location.href.indexOf(W)>-1,S=W=>localStorage.getItem("data-bs-theme")||W,P=W=>{document.documentElement.setAttribute("data-bs-theme",W),localStorage.setItem("data-bs-theme",W)},k=async()=>await at.get("https://bootswatch.com/api/5.json").then(W=>W.data),H=W=>{const U=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");U&&W?(U.setAttribute("href",W),localStorage.setItem("bootswatch-theme",W)):alert("cannot query css link")},V=W=>{Q(),l.push(W)},Q=()=>{if(screen.width<576){const U=document.getElementById("navbarCollapse");if(U){const G=nt.getInstance(U);G&&G.hide()}}};return{isActive:p,getCurrentBsTheme:S,changeBsTheme:P,getBootswatch:k,changeTheme:H,navigate:V,collapseNavbar:Q}}const co={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},mo={class:"container-md"},fo={class:"navbar-collapse collapse",id:"navbarCollapse"},po={class:"navbar-nav"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"nav-item"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu","aria-labelledby":"dropdown01"},ho={class:"navbar-nav ms-auto"},_o={class:"nav-item dropdown"},ko={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},So=["onClick"],To={class:"nav-item dropdown"},Mo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Io={class:"d-sm-none d-xl-inline"},xo={key:0},Co={key:1},Vo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Po={key:0},Oo={key:1},Ao={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(l){const p=dt(),{isActive:S,getCurrentBsTheme:P,changeBsTheme:k,getBootswatch:H,changeTheme:V,navigate:Q,collapseNavbar:W}=Je(),U=we(),G=U.user,ee=ge({user:G,username:G?G.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const T=ee;T.bootswatch=await H();const d=P(T.bsTheme);debugger;d&&(T.bsTheme=d,k(T.bsTheme));const X=localStorage.getItem("bootswatch-theme");X&&(T.currentTheme=X,V(X))});const E=T=>{V(T),ee.currentTheme=T,W()},A=T=>{k(T),ee.bsTheme=T,W()},C=async()=>{U.logoutWithRedirect();const T=new lt(p.msalConfig);await T.initialize();const d={mainWindowRedirectUri:"/"};await T.logoutPopup(d)};return(T,d)=>{const X=te("router-link");return t(),pe(be,null,{default:z(()=>[e("nav",co,[e("div",mo,[F(X,{class:"navbar-brand",to:"/administrator"},{default:z(()=>[K(m(l.appName),1)]),_:1}),d[18]||(d[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",fo,[e("ul",po,[e("li",vo,[F(X,{to:"/videos",onClick:o(W),class:"nav-link"},{default:z(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",go,[d[6]||(d[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",bo,[e("li",null,[F(X,{to:"/source-groups",onClick:o(W),class:"dropdown-item"},{default:z(()=>d[4]||(d[4]=[K(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[F(X,{to:"/source-locations",onClick:o(W),class:"dropdown-item"},{default:z(()=>d[5]||(d[5]=[K(" Locations ")])),_:1},8,["onClick"])])])]),e("li",yo,[F(X,{to:"/vod-sources",onClick:o(W),class:"nav-link"},{default:z(()=>d[7]||(d[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",$o,[d[10]||(d[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",wo,[e("li",null,[F(X,{to:"/program-templates",onClick:o(W),class:"dropdown-item"},{default:z(()=>d[8]||(d[8]=[K(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[F(X,{to:"/channels",onClick:o(W),class:"dropdown-item"},{default:z(()=>d[9]||(d[9]=[K(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",ho,[e("li",_o,[d[14]||(d[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",ko,[e("li",null,[ee.bsTheme==="dark"?(t(),s("button",{key:0,onClick:d[0]||(d[0]=J=>A("light")),class:"dropdown-item"},d[11]||(d[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Dark Mode ")]))):(t(),s("button",{key:1,onClick:d[1]||(d[1]=J=>A("dark")),class:"dropdown-item"},d[12]||(d[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Light Mode ")])))]),d[13]||(d[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,q(ee.bootswatch.themes,J=>(t(),s("li",null,[e("button",{onClick:r=>E(J.cssCdn),class:re(["dropdown-item",{active:ee.currentTheme===J.cssCdn}])},m(J.name),11,So)]))),256))])]),e("li",To,[e("a",Mo,[e("span",null,[d[15]||(d[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Io,[o(G)?(t(),s("span",xo,m(o(G).name),1)):(t(),s("span",Co," Guest "))])])]),e("ul",Vo,[o(G)?(t(),s("li",Po,[e("button",{onClick:d[2]||(d[2]=J=>C()),class:"dropdown-item"},d[16]||(d[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),K("Logout ")]))])):(t(),s("li",Oo,[F(X,{to:"/accounts/login",class:"dropdown-item"},{default:z(()=>d[17]||(d[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),K("Login ")])),_:1})]))])])])])])])]),_:1})}}},Uo={id:"sideNav",class:"collapse collapse-horizontal show"},Do={class:"bg-dark min-vh-100 overflow-y-auto"},Ho={class:"navbar bg-primary bg-gradient shadow-sm","data-bs-theme":"dark"},Lo={class:"navbar-brand me-0 mb-1 px-2"},Eo={class:"d-none d-sm-inline"},qo={class:"nav nav-pills flex-column mb-auto px-1 mt-2",role:"tablist"},Bo={class:"nav-item dropdown"},No={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Ro={class:"nav-item dropdown"},Fo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},zo={class:"nav-item dropdown"},Go={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},jo={class:"nav-item dropdown"},Yo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Wo=["onClick"],Ko={key:0,class:"fas fa-fw fa-angle-double-left"},Qo={key:1,class:"fas fa-fw fa-angle-double-right"},Jo={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(l){const p=je(),S=We(),{isActive:P,getCurrentBsTheme:k,changeBsTheme:H,getBootswatch:V,changeTheme:Q,navigate:W,collapseNavbar:U}=Je(),G=ge({bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const r=G;r.bootswatch=await V();const f=k(r.bsTheme);f&&(r.bsTheme=f,H(r.bsTheme));const Y=localStorage.getItem("bootswatch-theme");Y&&(r.currentTheme=Y,Q(Y)),C();const u=document.getElementById("sideNav");u&&(A.value?u.classList.add("show"):u.classList.remove("show"))});const ee=r=>{Q(r),G.currentTheme=r},E=r=>{H(r),G.bsTheme=r},A=ue(!0),C=()=>{const r=localStorage.getItem("show-sideNav")||"true";A.value=r==="true"},T=()=>{localStorage.setItem("show-sideNav",A.value),nt.getInstance("#sideNav").toggle()},d=()=>{A.value=!A.value,T()},X=r=>{var f=p.path.startsWith(r);return f?"active":""},J=async(r,f)=>{const Y=vt.getInstance(`#${f}`);Y&&Y.hide(),await S.push(r)};return(r,f)=>{const Y=te("router-link");return t(),s("div",null,[e("div",Uo,[e("div",Do,[e("nav",Ho,[F(Y,{to:"/",class:"text-decoration-none w-100 text-center"},{default:z(()=>[e("h1",Lo,[f[8]||(f[8]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Eo,m(l.appName),1)])]),_:1})]),e("ul",qo,[e("li",Bo,[e("a",{class:re([X("/source-"),"nav-link dropdown-toggle"]),href:"#",id:"sourcesDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},f[9]||(f[9]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Sources",-1)]),2),e("ul",No,[e("li",null,[e("button",{onClick:f[0]||(f[0]=u=>J("/source-groups","sourcesDropdown")),class:re([X("/source-groups"),"dropdown-item"]),role:"button"},f[10]||(f[10]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)]),2),e("button",{onClick:f[1]||(f[1]=u=>J("/source-locations","sourcesDropdown")),class:re([X("/source-locations"),"dropdown-item"]),role:"button"},f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)]),2)])])]),e("li",Ro,[e("a",{class:re([[X("/videos"),X("/vod-sources")],"nav-link dropdown-toggle"]),href:"#",id:"assetsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Asset Library",-1)]),2),e("ul",Fo,[e("li",null,[e("button",{onClick:f[2]||(f[2]=u=>J("/videos","assetsDropdown")),class:re([X("/videos"),"dropdown-item"]),role:"button"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)]),2),e("button",{onClick:f[3]||(f[3]=u=>J("/vod-sources","assetsDropdown")),class:re([X("/vod-sources"),"dropdown-item"]),role:"button"},f[14]||(f[14]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VOD",-1)]),2)])])]),e("li",zo,[e("a",{class:re([[X("/program-templates"),X("/channels")],"nav-link dropdown-toggle"]),href:"#",id:"assemblyDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},f[15]||(f[15]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channel Assembly",-1)]),2),e("ul",Go,[e("li",null,[e("button",{onClick:f[4]||(f[4]=u=>J("/program-templates","assemblyDropdown")),class:re([X("/program-templates"),"dropdown-item"]),role:"button"},f[16]||(f[16]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)]),2),e("button",{onClick:f[5]||(f[5]=u=>J("/channels","assemblyDropdown")),class:re([X("/channels"),"dropdown-item"]),role:"button"},f[17]||(f[17]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)]),2)])])]),e("li",jo,[f[21]||(f[21]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",Yo,[e("li",null,[G.bsTheme==="dark"?(t(),s("button",{key:0,onClick:f[6]||(f[6]=u=>E("light")),class:"dropdown-item"},f[18]||(f[18]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Dark Mode ")]))):(t(),s("button",{key:1,onClick:f[7]||(f[7]=u=>E("dark")),class:"dropdown-item"},f[19]||(f[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),K("Light Mode ")])))]),f[20]||(f[20]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,q(G.bootswatch.themes,u=>(t(),s("li",null,[e("button",{onClick:I=>ee(u.cssCdn),class:re(["dropdown-item",{active:G.currentTheme===u.cssCdn}])},m(u.name),11,Wo)]))),256))])])])])]),e("button",{id:"sideNavToggler",onClick:d,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"2rem",height:"2rem"}},[A.value?(t(),s("span",Ko)):(t(),s("span",Qo))])])}}},Xo={class:"footer sticky-bottom"},Zo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},ea={class:"container-md"},ta={class:"navbar-text small p-0"},sa={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(l){Je();const p=xe("$config"),P=we().user;let H=new Date().getFullYear();const V=ge({user:P,username:P?P.nameFull:"Guest",copyright:`2020-${H} ${p.appName}`});return fe(async()=>{}),(Q,W)=>(t(),s("footer",Xo,[e("div",Zo,[e("div",ea,[e("span",ta,"©"+m(V.copyright),1)])])]))}},oa={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Qe.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(l){l.message&&this.addMessage(l.title,l.message,l.type,l.options)},async addMessage(l,p,S,P={}){var k={id:this.count++,title:l,message:p,type:S,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};k=Object.assign({},k,P),this.messages.unshift(k),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),k.timeOut>0&&await this.startTimeout(k)},async startTimeout(l,p=0){const S=this,P=performance.now(),k=async()=>{l.animationFrame=requestAnimationFrame(async H=>{const V=H+p-P;if(!S.exists(l)||l.paused){cancelAnimationFrame(l.animationFrame);return}else if(V<l.timeOut){const Q=V/l.timeOut;l.progress=Q,await k()}else{l.progress=1,cancelAnimationFrame(l.animationFrame),S.remove(l);return}})};await k()},pauseProgress(l){l.timeOut<=0||(l.paused=!0)},async resumeProgress(l){l.timeOut<=0||(l.paused=!1,await this.startTimeout(l,l.timeOut*l.progress))},getCurrentProgress(l){return Math.round(l.progress*100)===100?100:l.progress*100},getIconClass(l){const p=l.type;let S="";switch(p){case"success":S="fas fa-fw fa-circle-check";break;case"info":S="fas fa-fw fa-circle-info";break;case"warning":S="fas fa-fw fa-circle-exclamation";break;case"danger":S="fas fa-fw fa-triangle-exclamation";break}let P=S;return l.rtl?"icon-right "+P:"icon-left "+P},async remove(l){const p=this.messages.findIndex(S=>S.id===l.id);this.messages.splice(p,1),typeof l.onClose=="function"&&await l.onClose()},exists(l){return this.messages.findIndex(S=>S.id===l.id)!==-1}}},aa={"aria-live":"polite","aria-atomic":"true",class:"position-static"},la=["onMouseover","onMouseout"],na={class:"me-auto text-white"},ra=["onClick"],ia={class:"toast-body"},da=["innerHTML"],ua={key:0,class:"progress m-1",style:{height:"4px"}};function ca(l,p,S,P,k,H){return t(),pe(be,null,{default:z(()=>[e("div",aa,[F(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:z(()=>[(t(!0),s(O,null,q(k.messages,V=>(t(),s("div",{key:V.id,class:re(["toast show mb-2 ms-auto",`border-${V.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Q=>H.pauseProgress(V),onMouseout:Q=>H.resumeProgress(V)},[e("div",{class:re(["toast-header",`bg-${V.type}`])},[e("strong",na,[e("i",{class:re([H.getIconClass(V),"me-1"])},null,2),K(m(V.title),1)]),V.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Q=>H.remove(V)},p[0]||(p[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ra)):D("",!0)],2),e("div",ia,[e("div",{innerHTML:V.message},null,8,da)]),V.timeOut>0&&V.showProgress?(t(),s("div",ua,[e("div",{class:re(`bg-${V.type}`),style:rt({width:H.getCurrentProgress(V)+"%"})},null,6)])):D("",!0)],42,la))),128))]),_:1})])]),_:1})}const ma=Ve(oa,[["render",ca],["__scopeId","data-v-5272bd9a"]]),fa={name:"AdminLayout",components:{TopNav:Ao,SideNav:Jo,BottomNav:sa},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},pa={class:"d-flex flex-row flex-nowrap vh-100"};function va(l,p,S,P,k,H){const V=te("Toasts"),Q=te("SideNav"),W=te("router-view");return t(),s("div",pa,[F(V),F(Q),F(W,{class:"d-flex flex-column w-100 h-100"})])}const ga=Ve(fa,[["render",va]]),ba={class:"mt-2 container overflow-y-auto"},ya={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$a=["innerHTML"],wa={class:"row mb-3"},ha={class:"col-xl-4"},_a={class:""},ka=["id"],Sa={key:1,class:"card card-header text-bg-warning mb-2"},Ta={class:"col-xl-8 overflow-x-auto"},Ma={class:"d-flex flex-column align-items-start"},Ia=["src"],xa={class:""},Ca={class:"d-flex flex-row"},Va={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Pa={class:"text-center"},Oa=["src"],Aa={class:"text-end"},Ua={class:"text-wrap text-truncate"},Da={class:"overflow-y-auto"},Ha={class:"badge bg-info me-2"},La={key:0,class:"badge bg-warning mb-1"},Ea={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,isDirty:k,validations:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,generateReturnUrl:C,security:T}=$e({appTitle:"ARC AIO",pageTitle:"Dashboard"});xe("$config"),we().user;const X=ge({item:null});ue("805630ed-f288-4f2f-83a4-6c71312f6970"),ue(),fe(async()=>{await f()}),Ae(()=>{X.item.forEach(I=>{I.hls&&(I.hls.stopLoad(),I.hls.destroy())})});const J=async()=>{const I=X;if(!P.value)try{P.value=!0;const b="/api/v1/channels/epg/";I.item=[],await G.get(b).then(_=>{I.item=_.data}),I.item.forEach(_=>{Y(_)})}catch(b){W.value=ee.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}},r=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await G.get("/api/v1/channels/reset/").then(_=>{E.success("Reset All Data","Reset data was successful.")})}catch(b){W.value=ee.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}},f=async()=>{await J()},Y=I=>{if(I.manifestUrl&&Hls.isSupported()){u(I);var b=document.getElementById(`video-${I.id}`);if(!b)return;I.hls&&(I.hsl.stopLoad(),I.hls.destroy()),I.hls=ee.createHlsStream(b,I.manifestUrl);return}},u=I=>{I.outputs&&I.outputs.forEach(_=>{if(_.hls){debugger;_.hls.detachMedia(),_.hls.destroy(),delete _.hls}_.playbackConfigurations.forEach(g=>{if(g.hls){debugger;g.hls.detachMedia(),g.hls.destroy(),delete g.hls}})})};return(I,b)=>{const _=te("PageHeader"),g=te("router-link");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(S)},{default:z(()=>[e("div",null,[e("button",{onClick:b[0]||(b[0]=i=>r()),class:"ms-2 btn btn-danger"},b[2]||(b[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),K("Reset All Data ")])),e("button",{onClick:b[1]||(b[1]=i=>f()),class:"ms-2 btn btn-secondary"},b[3]||(b[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",ba,[o(W)?(t(),s("div",ya,[b[4]||(b[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(W))},null,8,$a)])):D("",!0),(t(!0),s(O,null,q(X.item,i=>(t(),s("div",null,[e("div",wa,[e("div",ha,[e("div",_a,[i.manifestUrl?(t(),s("video",{key:0,id:`video-${i.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,ka)):(t(),s("div",Sa," Channel not yet published "))])]),e("div",Ta,[e("div",Ma,[e("div",null,[e("h4",null,[e("img",{src:i.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Ia),F(g,{to:`${l.urlViewChannel}/${i.id}/${o(C)()}`},{default:z(()=>[K(m(i.title),1)]),_:2},1032,["to"])])]),e("div",xa,[e("div",Ca,[(t(!0),s(O,null,q(i.programs,n=>(t(),s("div",Va,[e("div",Pa,[e("img",{src:n.image,class:"img-fluid border",style:{height:"64px"}},null,8,Oa)]),e("div",Aa,m(o(ee).moment(n.since).format("hh:mm a"))+"-"+m(o(ee).moment(n.till).format("hh:mm a")),1),e("div",Ua,m(n.title),1),e("div",Da,[(t(!0),s(O,null,q(n.genres,a=>(t(),s("span",Ha,m(a),1))),256))]),o(ee).moment().isAfter(n.since)&&o(ee).moment().isBefore(n.till)?(t(),s("span",La,"Now Playing")):D("",!0)]))),256))])])])])])]))),256))])])]),_:1})}}};function De(l){if(!l.cacheKey)throw Error("Cache Key required.");if(!l.baseUrl)throw Error("Base Url required.");const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,closeWithReturnUrl:E,generateReturnUrl:A,security:C}=$e({appTitle:l.appTitle,pageTitle:l.pageTitle}),T=JSON.parse(JSON.stringify(l.filter));T.pageIndex=T.pageIndex||1,T.pageSize=T.pageSize||5,T.sortField=T.sortField||"",T.sortOrder=T.sortOrder||1,T.updateUrl=T.updateUrl||!1,T.items=T.items||[],T.query=T.query||{},T.query.criteria=T.query.criteria||"";const d=ue(T),X=()=>{var i;if(P.value){console.log("Paginated search is currently busy.");return}const b=JSON.parse(localStorage.getItem(l.cacheKey))||{},_=new URLSearchParams(window.location.search),g=d.value;g.query.criteria=_.get("c")||b.criteria||g.query.criteria||"",g.pageIndex=parseInt(_.get("p"),10)||b.pageIndex||g.pageIndex||1,g.pageSize=parseInt(_.get("s"),10)||b.pageSize||g.pageSize||5,g.sortField=_.get("sf")||b.sortField||g.sortField||"",g.sortOrder=parseInt(_.get("so"),10)||b.sortOrder||g.sortOrder||1,g.visible=b.visible||g.visible,(i=l.initializeFilter)==null||i.call(l,d,l.cacheKey)},J=()=>{if(l.getQuery)return l.getQuery(d.value);{const b=d.value;return["?c=",encodeURIComponent(b.query.criteria),"&p=",b.pageIndex,"&s=",b.pageSize,"&sf=",b.sortField,"&so=",b.sortOrder].join("")}},r=()=>{if(l.saveQuery)l.saveQuery(d.value,l.cacheKey);else{const b=d.value;localStorage.setItem(l.cacheKey,JSON.stringify({criteria:b.query.criteria,pageIndex:b.pageIndex,pageSize:b.pageSize,sortField:b.sortField,sortOrder:b.sortOrder,visible:b.visible}))}};return{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,closeWithReturnUrl:E,generateReturnUrl:A,security:C,filter:d,initializeFilter:X,getQuery:J,saveQuery:r,search:async b=>{var g;let _=d.value;if(P.value){console.log("Paginated search is currently busy.");return}b>0&&(_.pageIndex=b);try{P.value=!0,V.value="";const i=J();_.selected=null,await W(`${l.baseUrl}/${i}`).then(async n=>{var c;Array.isArray(n.data)?_.items=n.data:_=Object.assign(_,n.data);let a=location.pathname;a.endsWith("/")?a+=i:a+="/"+i,_.updateUrl&&window.history.replaceState(i,`${p}-search`,a),_.items.forEach(v=>{v.expand=!1}),r(),(c=l.successAction)==null||c.call(l,d.value)})}catch(i){if(localStorage.removeItem(l.cacheKey),l.failAction)l.failAction(i);else{const n=U.getErrorMessageAsHtml(i);V.value=n,G.error("Error Occured",n)}}finally{P.value=!1,(g=l.finalAction)==null||g.call(l)}},getRowNumber:b=>{const _=d.value;return(_.pageIndex-1)*_.pageSize+(b+1)},setSelected:b=>{const _=d.value;_.selected&&b&&_.selected===b?_.selected=null:(_.selected&&(_.selected.expand=!1),_.selected=b,_.selected.expand=!0)},isSelected:b=>{const _=d.value;return b===null||_.selected===null?!1:b===_.selected}}}const qa=["disabled"],Ba={class:"row row-cols-1 row-cols-sm-3"},Na={class:"col"},Ra={class:"form-floating mb-2"},Fa={key:0,class:"d-block invalid-feedback"},za={class:"col"},Ga={class:"form-floating"},ja={class:"col"},Ya={class:"form-floating"},Wa={class:"col"},Ka={class:"form-floating mb-2"},Qa={class:"row row-cols-1 row-cols-sm-2"},Ja={class:"col"},Xa={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},Za={class:"col"},el={class:"form-check"},tl=["onUpdate:modelValue","id"],sl=["for"],ol={class:"col"},al={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},ll={class:"col"},nl={class:"form-check"},rl=["onUpdate:modelValue","id"],il=["for"],dl={class:"table-responsive mt-2"},ul={class:"text-end"},cl={class:"table table-sm mb-0 mt-2"},ml={class:"align-middle"},fl={class:"text-center"},pl=["onUpdate:modelValue"],vl=["onUpdate:modelValue"],gl=["onUpdate:modelValue"],bl={class:"text-start"},yl=["onClick"],$l={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),A=l,C=ge({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:U.moment().format("YYYY-MM-DD"),formats:[]}}),T={item:{title:{title:se.withMessage("Title is required.",le),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("Duration is required.",le),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",le),$autoDirty:!0,$lazy:!0}}},d=Te(T,C),X=Ie(()=>{const u=U.moment;if(C.durationTime&&C.durationTime!=="00:00:00"&&U.isValidTime(C.durationTime)){const I=u().startOf("day"),b=I.format("YYYY-MM-DD ")+C.durationTime,g=u(b).subtract(I);return C.item.durationInMillis=g.valueOf(),C.item.durationInMillis}return 0});fe(async()=>{await r()});const J=async()=>{const u=C;if(P.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const b=U.clone(u.item);b.durationInMillis=X.value;const _=U.moment(u.item.dateReleased).utc(!0).format();b.dateReleased=_;const g=C.lookups.genres.filter(n=>n.selected).map(n=>n.id);b.genres=g;const i=C.lookups.categories.filter(n=>n.selected).map(n=>n.id);b.categories=i;debugger;await W.post("/api/v1/videos/",b).then(n=>{G.success("Add Video","Video added",{onClose:async()=>{const a=`${A.urlView}/${n.data}`;await Q.push(a)}})})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}},r=async()=>{try{await W.get("/api/v1/lookups/video-genres/").then(u=>{const b=u.data.filter(_=>_.id!==0);C.lookups.genres=b})}catch(u){V.value=U.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},f=()=>{const u={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};C.item.formats.push(u)},Y=u=>{C.item.formats.splice(u,1)};return(u,I)=>{const b=te("router-link"),_=te("PageHeader"),g=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:I[0]||(I[0]=i=>J()),class:"btn btn-primary"},I[6]||(I[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,qa),F(b,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>I[7]||(I[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(g,{errorMessage:o(V),vuelidate:o(d)},{default:z(()=>[e("div",null,[e("div",Ba,[e("div",Na,[e("div",Ra,[B(e("input",{"onUpdate:modelValue":I[1]||(I[1]=i=>C.item.title=i),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,C.item.title]]),I[8]||(I[8]=e("label",{for:"title",class:""},"Title",-1)),o(d).item.title.$error?(t(),s("div",Fa,[(t(!0),s(O,null,q(o(d).item.title.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):D("",!0)])]),e("div",za,[e("div",Ga,[B(e("input",{"onUpdate:modelValue":I[2]||(I[2]=i=>C.item.dateReleased=i),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,C.item.dateReleased]]),I[9]||(I[9]=e("label",{for:"dateReleased",class:""},"Date Released",-1))])]),e("div",ja,[e("div",Ya,[B(e("input",{"onUpdate:modelValue":I[3]||(I[3]=i=>C.durationTime=i),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,C.durationTime]]),I[10]||(I[10]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Wa,[e("div",Ka,[B(e("textarea",{"onUpdate:modelValue":I[4]||(I[4]=i=>C.item.description=i),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,C.item.description]]),I[11]||(I[11]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",Qa,[e("div",Ja,[I[12]||(I[12]=e("h5",null,"Genres",-1)),e("div",Xa,[(t(!0),s(O,null,q(C.lookups.genres,i=>(t(),s("div",Za,[e("div",el,[B(e("input",{"onUpdate:modelValue":n=>i.selected=n,class:"form-check-input",type:"checkbox",id:i.name},null,8,tl),[[Be,i.selected]]),e("label",{class:"form-check-label",for:i.name},m(i.name),9,sl)])]))),256))])]),e("div",ol,[I[13]||(I[13]=e("h5",null,"Categories",-1)),e("div",al,[(t(!0),s(O,null,q(C.lookups.categories,i=>(t(),s("div",ll,[e("div",nl,[B(e("input",{"onUpdate:modelValue":n=>i.selected=n,class:"form-check-input",type:"checkbox",id:i.name},null,8,rl),[[Be,i.selected]]),e("label",{class:"form-check-label",for:i.name},m(i.name),9,il)])]))),256))])])]),e("div",dl,[e("div",ul,[e("button",{onClick:I[5]||(I[5]=i=>f()),class:"btn btn-outline-primary btn-sm"},I[14]||(I[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",cl,[I[17]||(I[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(C.item.formats,(i,n)=>(t(),s("tr",ml,[e("td",fl,m(n+1),1),e("td",null,[B(e("select",{"onUpdate:modelValue":a=>i.format=a,class:"form-control"},I[15]||(I[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,pl),[[ve,i.format]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":a=>i.serverUrl=a,type:"text",class:"form-control"},null,8,vl),[[Z,i.serverUrl]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":a=>i.path=a,type:"text",class:"form-control"},null,8,gl),[[Z,i.path]])]),e("td",bl,[e("button",{onClick:a=>Y(n),class:"btn btn-outline-warning btn-sm"},I[16]||(I[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},wl=["disabled"],hl={class:"row row-cols-1 row-cols-sm-3"},_l={class:"col"},kl={class:"form-floating mb-2"},Sl={key:0,class:"d-block invalid-feedback"},Tl={class:"col"},Ml={class:"form-floating"},Il={class:"col"},xl={class:"form-floating"},Cl={class:"col"},Vl={class:"form-floating mb-2"},Pl={class:"col"},Ol={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Al={class:"col"},Ul={class:"form-check"},Dl=["onUpdate:modelValue","id"],Hl=["for"],Ll={class:"col"},El={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},ql={class:"col"},Bl={class:"form-check"},Nl=["onUpdate:modelValue","id"],Rl=["for"],Fl={class:"table-responsive mt-2"},zl={class:"text-end"},Gl={class:"table table-sm mb-0 mt-2 border"},jl={class:"align-middle"},Yl={class:"text-center"},Wl=["onUpdate:modelValue"],Kl=["value"],Ql=["onUpdate:modelValue"],Jl=["onUpdate:modelValue"],Xl={class:"text-end"},Zl=["onClick"],en={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),A=l,C=ge({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),T={item:{title:{title:se.withMessage("title is required.",le),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("durationInMillis is required.",le),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",le),$autoDirty:!0,$lazy:!0}}},d=Te(T,C),X=Ie(()=>{const b=U.moment;if(C.durationTime&&C.durationTime!=="00:00:00"&&U.isValidTime(C.durationTime)){const _=b().startOf("day"),g=_.format("YYYY-MM-DD ")+C.durationTime,n=b(g).subtract(_);return C.item.durationInMillis=n.valueOf(),C.item.durationInMillis}return 0});fe(async()=>{await r(),await f(),await J()});const J=async()=>{try{await W.get(`/api/v1/videos/${A.id}/`).then(b=>{C.item=b.data;const _=U.moment(C.item.dateReleased).format("YYYY-MM-DD");C.item.dateReleased=_;const g=C.lookups.genres,i=C.item.genres.map(c=>c.genre);g.forEach(c=>{c.selected=i.includes(c.id)});const n=C.lookups.categories,a=C.item.categories.map(c=>c.category);n.forEach(c=>{c.selected=a.includes(c.id)})})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},r=async()=>{try{await W.get("/api/v1/lookups/video-genres/").then(b=>{const g=b.data.filter(i=>i.id!==0);C.lookups.genres=g})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},f=async()=>{try{await W.get("/api/v1/lookups/video-formats/").then(b=>{const g=b.data.filter(i=>i.id!==0);C.lookups.formats=g})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},Y=async()=>{const b=C;if(P.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const g=U.clone(b.item);g.durationInMillis=X.value;const i=U.moment(b.item.dateReleased).utc(!0).format();g.dateReleased=i;const n=C.lookups.genres.filter(c=>c.selected).map(c=>c.id);g.genres=n;const a=C.lookups.categories.filter(c=>c.selected).map(c=>c.id);g.categories=a;debugger;await W.put("/api/v1/videos/",g).then(c=>{G.success("Edit Video","Video edited.",{onClose:async()=>{const v=`${A.urlView}/${A.id}`;await Q.push(v)}})})}catch(g){V.value=U.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{P.value=!1}},u=()=>{const b={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};C.item.formats.push(b)},I=b=>{C.item.formats.splice(b,1)};return(b,_)=>{const g=te("router-link"),i=te("PageHeader"),n=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(i,{"page-icon":"fas fa-fw fa-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:_[0]||(_[0]=a=>Y()),class:"btn btn-primary"},_[6]||(_[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wl),e("button",{onClick:J,class:"btn btn-secondary ms-2"},_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(g,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-2"},{default:z(()=>_[8]||(_[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(n,{errorMessage:o(V),vuelidate:o(d)},{default:z(()=>[e("div",null,[e("div",hl,[e("div",_l,[e("div",kl,[B(e("input",{"onUpdate:modelValue":_[1]||(_[1]=a=>C.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,C.item.title]]),_[9]||(_[9]=e("label",{for:"title",class:""},"Title",-1)),o(d).item.title.$error?(t(),s("div",Sl,[(t(!0),s(O,null,q(o(d).item.title.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):D("",!0)])]),e("div",Tl,[e("div",Ml,[B(e("input",{"onUpdate:modelValue":_[2]||(_[2]=a=>C.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,C.item.dateReleased]]),_[10]||(_[10]=e("label",{for:"dateReleased",class:""},"Duration Time",-1))])]),e("div",Il,[e("div",xl,[B(e("input",{"onUpdate:modelValue":_[3]||(_[3]=a=>C.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,C.durationTime]]),_[11]||(_[11]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Cl,[e("div",Vl,[B(e("textarea",{"onUpdate:modelValue":_[4]||(_[4]=a=>C.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,C.item.description]]),_[12]||(_[12]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",Pl,[_[13]||(_[13]=e("b",null,"Genres",-1)),e("div",Ol,[(t(!0),s(O,null,q(C.lookups.genres,a=>(t(),s("div",Al,[e("div",Ul,[B(e("input",{"onUpdate:modelValue":c=>a.selected=c,class:"form-check-input",type:"checkbox",id:a.name},null,8,Dl),[[Be,a.selected]]),e("label",{class:"form-check-label",for:a.name},m(a.name),9,Hl)])]))),256))])]),e("div",Ll,[_[14]||(_[14]=e("b",null,"Categories",-1)),e("div",El,[(t(!0),s(O,null,q(C.lookups.categories,a=>(t(),s("div",ql,[e("div",Bl,[B(e("input",{"onUpdate:modelValue":c=>a.selected=c,class:"form-check-input",type:"checkbox",id:a.name},null,8,Nl),[[Be,a.selected]]),e("label",{class:"form-check-label",for:a.name},m(a.name),9,Rl)])]))),256))])]),e("div",Fl,[e("div",zl,[e("button",{onClick:_[5]||(_[5]=a=>u()),class:"btn btn-outline-primary btn-sm"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Gl,[_[17]||(_[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(C.item.formats,(a,c)=>(t(),s("tr",jl,[e("td",Yl,m(c+1),1),e("td",null,[B(e("select",{"onUpdate:modelValue":v=>a.format=v,class:"form-control"},[(t(!0),s(O,null,q(C.lookups.formats,v=>(t(),s("option",{value:v.id},m(v.name),9,Kl))),256))],8,Wl),[[ve,a.format]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":v=>a.serverUrl=v,type:"text",class:"form-control"},null,8,Ql),[[Z,a.serverUrl]])]),e("td",null,[B(e("input",{"onUpdate:modelValue":v=>a.path=v,type:"text",class:"form-control"},null,8,Jl),[[Z,a.path]])]),e("td",Xl,[e("button",{onClick:v=>I(c),class:"btn btn-outline-warning btn-sm"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Zl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},tn={class:"ms-2"},sn={class:"input-group"},on=["value"],an={class:"ms-1"},ln={class:"input-group"},nn={class:"ms-1"},rn={class:"input-group"},dn={class:"table-responsive border shadow-sm"},un={class:"table table-hover mb-0"},cn=["textContent"],mn={class:"d-flex flex-row justify-content-start"},fn={class:"mt-1"},pn=["src"],vn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},gn={class:"ms-2"},bn={key:0},yn={class:"badge bg-primary me-1"},$n={key:1},wn={class:"badge bg-info me-1"},hn={class:"text-center"},_n={class:"text-end"},kn=["onClick"],Sn={key:0,class:"fas fa-fw fa-chevron-circle-up"},Tn={key:1,class:"fas fa-fw fa-chevron-circle-down"},Mn={key:0},In={colspan:"999"},xn={class:""},Cn={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},Vn={class:"col mb-2"},Pn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},On={class:"col col-lg-auto mb-2"},An={key:0},Un={class:"badge bg-secondary me-1"},Dn="/api/v1/videos/search",Hn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,security:C,filter:T,initializeFilter:d,getQuery:X,saveQuery:J,search:r,getRowNumber:f,setSelected:Y,isSelected:u}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${S==null?void 0:S.userId}/videos/search`,baseUrl:Dn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(b,_)=>{const g=b.value,i=new URLSearchParams(window.location.search),n=JSON.parse(localStorage.getItem(_))||{};g.query.genre=i.get("genre")||n.genre||g.query.genre||0,g.query.category=i.get("category")||n.category||g.query.category||0},getQuery:b=>["?c=",encodeURIComponent(b.query.criteria),"&p=",b.pageIndex,"&s=",b.pageSize,"&sf=",b.sortField,"&so=",b.sortOrder,"&genre=",b.query.genre,"&category=",b.query.category].join(""),saveQuery:(b,_)=>{localStorage.setItem(_,JSON.stringify({criteria:b.query.criteria,pageIndex:b.pageIndex,pageSize:b.pageSize,sortField:b.sortField,sortOrder:b.sortOrder,visible:b.visible,genre:b.query.genre,category:b.query.category}))}});fe(async()=>{d(),await I(),await r()});const I=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(b=>{const _=b.data;T.value.lookups.genres=_})}catch(b){W.value=ee.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}};return(b,_)=>{const g=te("router-link"),i=te("PageHeader"),n=te("m-pagination"),a=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(i,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:z(()=>[F(g,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>_[5]||(_[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",tn,[e("div",sn,[_[6]||(_[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),B(e("select",{"onUpdate:modelValue":_[0]||(_[0]=c=>o(T).query.genre=c),class:"form-select"},[(t(!0),s(O,null,q(o(T).lookups.genres,c=>(t(),s("option",{value:c.id},m(c.name),9,on))),256))],512),[[ve,o(T).query.genre]])])]),e("div",an,[e("div",ln,[_[8]||(_[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),B(e("select",{"onUpdate:modelValue":_[1]||(_[1]=c=>o(T).query.category=c),class:"form-select"},_[7]||(_[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ve,o(T).query.category]])])]),e("div",nn,[e("div",rn,[B(e("input",{"onUpdate:modelValue":_[2]||(_[2]=c=>o(T).query.criteria=c),onKeyup:_[3]||(_[3]=Ue(c=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[4]||(_[4]=c=>o(r)(1))},_[9]||(_[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(a,{errorMessage:o(W)},{default:z(()=>[e("div",dn,[e("table",un,[_[14]||(_[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(c,v)=>(t(),s(O,{key:c.videoId},[e("tr",null,[e("td",{textContent:m(o(f)(v)),class:"text-center"},null,8,cn),e("td",null,[e("div",mn,[e("div",null,[c.thumbnails.length>0?(t(!0),s(O,{key:0},q(c.thumbnails,w=>(t(),s("div",fn,[e("img",{src:w.url,class:"img-fuild border",width:"128"},null,8,pn)]))),256)):(t(),s("img",vn))]),e("div",gn,[F(g,{to:`${l.urlView}/${c.videoId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[K(m(c.title),1)]),_:2},1032,["to"]),e("div",null,[c.categories.length>0?(t(),s("div",bn,[(t(!0),s(O,null,q(c.categories,w=>(t(),s("span",yn,m(w.categoryName),1))),256))])):D("",!0),c.genres.length>0?(t(),s("div",$n,[(t(!0),s(O,null,q(c.genres,w=>(t(),s("span",wn,m(w.genreName),1))),256))])):D("",!0)])])])]),e("td",hn,m(o(ee).moment.utc(c.durationInMillis).format("HH:mm:ss")),1),e("td",_n,[e("button",{onClick:w=>c.expand=!c.expand,class:re([[c.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[c.expand?(t(),s("span",Sn)):(t(),s("span",Tn))],10,kn)])]),c.expand?(t(),s("tr",Mn,[_[13]||(_[13]=e("td",null,null,-1)),e("td",In,[e("div",xn,[e("div",Cn,[e("div",Vn,[_[10]||(_[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,m(c.description),1)]),e("div",Pn,[_[11]||(_[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,m(o(st).utc(c.dateReleased).format("l")),1)]),e("div",On,[_[12]||(_[12]=e("h6",{class:"fw-bold"},"Formats",-1)),c.formats.length>0?(t(),s("div",An,[(t(!0),s(O,null,q(c.formats,w=>(t(),s("span",Un,m(w.formatName),1))),256))])):D("",!0)])])])])])):D("",!0)],64))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(n,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ln={key:0},En={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},qn={class:"nav-item",role:"presentation"},Bn={class:"nav-item",role:"presentation"},Nn={class:"nav-item",role:"presentation"},Rn={class:"nav-item",role:"presentation"},Fn={class:"tab-content",id:"myTabContent"},zn={class:"mt-2"},Gn={class:"row row-cols-1 row-cols-sm-2"},jn={class:"col"},Yn=["id"],Wn={class:"col"},Kn={class:"col"},Qn={class:"form-floating mb-2"},Jn={class:"row row-cols-1 row-cols-sm-2"},Xn={class:"col"},Zn={class:"form-floating mb-2"},er={class:"col"},tr={class:"form-floating mb-2"},sr={class:"col"},or={class:"form-floating mb-2"},ar={class:"mt-1"},lr={class:"badge bg-info me-1"},nr={class:"badge bg-primary me-1"},rr={class:"mt-2"},ir={class:"table-responsive border"},dr={class:"table table-hover mb-0"},ur={class:"table-group-divider"},cr={class:"align-middle"},mr={class:"text-center"},fr={class:"mt-2"},pr={class:"text-end"},vr={class:"table-responsive border mt-2"},gr={class:"table table-hover mb-0 caption-top"},br={class:"mt-2"},yr={class:"table-responsive"},$r={class:"table table-hover mb-0 caption-top"},wr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:Q,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:E,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:d,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});xe("$config");const J=we();J.user;const r=ge({user:J.user,item:null,hls:null}),f=ue();fe(async()=>{await b(),f.value=E.getPageTab("video")||"information-tab"}),Ae(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const Y=n=>{E.setPageTab("video",n),f.value=n},u=n=>n!==f.value?"":"active",I=n=>n!==f.value?"":"show active",b=async()=>{const n=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const a=`/api/v1/videos/${p.id}/`;await ee.get(a).then(c=>{n.item=c.data,n.item.duration=E.moment.utc(n.item.durationInMillis).format("HH:mm:ss"),n.item.dateReleased=E.moment.utc(n.item.dateReleased).format("ll")}),g()}catch(a){U.value=E.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{await b()},g=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),r.hls&&r.hls.destroy();const a=`video-${r.item.videoId}`;var n=document.getElementById(a);const c=r.item.formats.find(w=>w.formatName==="HLS"),v=c.serverUrl+c.path;r.hls=E.createHlsStream(n,v,!1),r.hls.startLoad(-1)}},i=async()=>{if(!k.value)try{k.value=!0,U.value="";const n=`/api/v1/videos/${p.id}/get-blank-frames/`;await ee.post(n).then(a=>{}),k.value=!1,await _()}catch(n){U.value=E.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}};return(n,a)=>{const c=te("router-link"),v=te("PageHeader"),w=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(v,{"page-icon":"fas fa-fw fa-video",pageTitle:o(P)},{default:z(()=>[F(c,{to:`${l.urlEdit}/${l.id}`,class:"btn btn-primary ms-1"},{default:z(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=y=>_()),class:"ms-2 btn btn-secondary"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=y=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(w,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",Ln,[e("div",null,[e("ul",En,[e("li",qn,[e("button",{onClick:a[2]||(a[2]=y=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Bn,[e("button",{onClick:a[3]||(a[3]=y=>Y("formats-tab")),class:re([u("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",Nn,[e("button",{onClick:a[4]||(a[4]=y=>Y("blankFrames-tab")),class:re([u("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",Rn,[e("button",{onClick:a[5]||(a[5]=y=>Y("vodSources-tab")),class:re([u("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",Fn,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",zn,[e("div",Gn,[e("div",jn,[e("video",{id:`video-${r.item.videoId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,Yn)]),e("div",Wn,[e("div",Kn,[e("div",Qn,[B(e("input",{"onUpdate:modelValue":a[6]||(a[6]=y=>r.item.title=y),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,r.item.title]]),a[14]||(a[14]=e("label",{for:"title"},"Title",-1))])]),e("div",Jn,[e("div",Xn,[e("div",Zn,[B(e("input",{"onUpdate:modelValue":a[7]||(a[7]=y=>r.item.dateReleased=y),type:"text",class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Z,r.item.dateReleased]]),a[15]||(a[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",er,[e("div",tr,[B(e("input",{"onUpdate:modelValue":a[8]||(a[8]=y=>r.item.duration=y),type:"text",class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Z,r.item.duration]]),a[16]||(a[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",sr,[e("div",or,[B(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=y=>r.item.description=y),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,r.item.description]]),a[17]||(a[17]=e("label",{for:"description"},"Description",-1))])]),e("div",ar,[(t(!0),s(O,null,q(r.item.genres,y=>(t(),s("span",lr,m(y.genreName),1))),256)),(t(!0),s(O,null,q(r.item.categories,y=>(t(),s("span",nr,m(y.categoryName),1))),256))])])])])],2),e("div",{class:re([I("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",rr,[e("div",ir,[e("table",dr,[a[18]||(a[18]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",ur,[(t(!0),s(O,null,q(r.item.formats,(y,M)=>(t(),s("tr",cr,[e("td",mr,m(M+1),1),e("td",null,m(y.formatName),1),e("td",null,m(y.serverUrl),1),e("td",null,m(y.path),1)]))),256))])])])])],2),e("div",{class:re([I("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",fr,[e("div",null,[e("div",pr,[e("button",{onClick:a[10]||(a[10]=y=>i()),class:"btn btn-outline-primary btn-sm"},a[19]||(a[19]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),K("Process ")]))]),e("div",vr,[e("table",gr,[a[20]||(a[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.blankFrames,(y,M)=>(t(),s("tr",{key:y.videoBlankFrameId},[e("td",null,m(M+1),1),e("td",null,m(o(E).moment.utc(y.startInMillis).format("HH:mm:ss")),1),e("td",null,m(o(E).moment.utc(y.endInMillis).format("HH:mm:ss")),1),e("td",null,m(o(E).moment.utc(y.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Se,r.item.blankFrames.length>0]])])])])])],2),e("div",{class:re([I("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",br,[e("div",yr,[e("table",$r,[a[21]||(a[21]=e("caption",null,"VOD Sources",-1)),a[22]||(a[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.vodSources,(y,M)=>(t(),s("tr",{key:y.vodSourceId},[e("td",null,m(M+1),1),e("td",null,[F(c,{to:`${p.urlViewVodSource}/${encodeURIComponent(y.vodSourceId)}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(y.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Se,r.item.vodSources.length>0]])])])])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},hr=["disabled"],_r={class:"form-floating mb-2"},kr={key:0,class:"d-block invalid-feedback"},Sr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),A=l,C=ge({lookups:{},item:{name:null}}),T={item:{name:{required:se.withMessage("name is required.",le),$autoDirty:!0,$lazy:!0}}},d=Te(T,C);fe(async()=>{});const X=async()=>{const J=C;if(P.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const f=U.clone(J.item);await W.post("/api/v1/sourcegroups/",f).then(Y=>{G.success("Add Source Group","Source group added.",{onClose:async()=>{const u=`${A.urlView}/${Y.data}`;await Q.push(u)}})})}catch(f){V.value=U.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{P.value=!1}};return(J,r)=>{const f=te("router-link"),Y=te("PageHeader"),u=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(Y,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:r[0]||(r[0]=I=>X()),class:"btn btn-primary"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hr),F(f,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(u,{errorMessage:o(V),vuelidate:o(d)},{default:z(()=>[e("div",null,[e("div",_r,[B(e("input",{"onUpdate:modelValue":r[1]||(r[1]=I=>C.item.name=I),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,C.item.name]]),r[4]||(r[4]=e("label",{for:"name"},"Name",-1)),o(d).item.name.$error?(t(),s("div",kr,[(t(!0),s(O,null,q(o(d).item.name.$errors,I=>(t(),s("div",{key:I.$uid},m(I.$message),1))),128))])):D("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Tr={key:0,class:"d-flex justify-content-end"},Mr=["disabled"],Ir={key:0},xr={class:"row row-cols-1 row-cols-sm-2"},Cr={class:"col"},Vr={class:"form-floating mb-2"},Pr={key:0,class:"d-block invalid-feedback"},Or={class:"col"},Ar={class:"form-floating mb-2"},Ur={key:0,class:"d-block invalid-feedback"},Dr={class:"row row-cols-sm-2"},Hr={class:"col"},Lr={class:"form-floating mb-2"},Er={class:"form-floating mb-2"},qr={key:0,class:"d-block invalid-feedback"},Br={class:"form-floating mb-2"},Nr={key:0,class:"d-block invalid-feedback"},Rr={class:"col"},Fr={class:"form-floating mb-2"},Xe={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),A=l,C=ge({editorElementId:"editor",htmlContent:"",item:null}),T={item:{title:{required:se.withMessage("Title is required.",le),$autoDirty:!0,$lazy:!0},eidr:{required:se.withMessage("eidr is required.",le),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:se.withMessage("eidrPrefix is required.",le),$autoDirty:!0,$lazy:!0}},htmlContent:{required:se.withMessage("Content is required.",le),$autoDirty:!0,$lazy:!0}},d=Te(T,C);fe(async()=>{await r()});const X=()=>{const Y=C;var u=document.getElementById(Y.editorElementId);u.innerHTML=Y.htmlContent},J=Y=>{const u=C;u.htmlContent=Y.target.innerHTML;var I=document.getElementById(u.editorElementId);I.value=u.htmlContent},r=async()=>{const Y=C;if(!P.value)try{P.value=!0,C.item=null,await W.get(`/api/v1/movies/${A.id}`).then(u=>{Y.item=u.data,Y.htmlContent=Y.item.description}),X()}catch(u){V.value=U.getErrorMessageAsHtml(u)}finally{P.value=!1}},f=async()=>{const Y=C;if(P.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const I=U.clone(Y.item);I.description=Y.htmlContent,await W.put("/api/v1/movies",I).then(b=>{G.success("Edit Movie","Movie edited",{onClose:async()=>{const _=`${A.urlView}/${A.id}`;await Q.push(_)}})})}catch(I){V.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{P.value=!1}};return(Y,u)=>{const I=te("router-link"),b=te("PageHeader"),_=te("PageBody");return t(),s("div",null,[F(b,{"page-icon":"fas fa-fw fa-film",pageTitle:o(S),"header-break":"row row-cols-2 row-cols-sm-2"},{default:z(()=>[C.item?(t(),s("div",Tr,[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:u[0]||(u[0]=g=>f()),class:"btn btn-primary"},u[7]||(u[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Mr),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(I,{to:`${A.urlView}/${A.id}`,class:"ms-1 btn btn-secondary"},{default:z(()=>u[9]||(u[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):D("",!0)]),_:1},8,["pageTitle"]),F(_,{errorMessage:o(V),vuelidate:o(d)},{default:z(()=>[C.item?(t(),s("div",Ir,[e("div",xr,[e("div",Cr,[e("div",Vr,[B(e("input",{"onUpdate:modelValue":u[1]||(u[1]=g=>C.item.eidrPrefix=g),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Z,C.item.eidrPrefix]]),u[10]||(u[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(d).item.eidrPrefix.$error?(t(),s("div",Pr,[(t(!0),s(O,null,q(o(d).item.eidrPrefix.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):D("",!0)])]),e("div",Or,[e("div",Ar,[B(e("input",{"onUpdate:modelValue":u[2]||(u[2]=g=>C.item.eidr=g),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Z,C.item.eidr]]),u[11]||(u[11]=e("label",{for:"title"},"Eidr",-1)),o(d).item.eidr.$error?(t(),s("div",Ur,[(t(!0),s(O,null,q(o(d).item.eidr.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):D("",!0)])])]),e("div",Dr,[e("div",Hr,[e("div",Lr,[B(e("input",{"onUpdate:modelValue":u[3]||(u[3]=g=>C.item.releaseYear=g),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Z,C.item.releaseYear]]),u[12]||(u[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Er,[B(e("input",{"onUpdate:modelValue":u[4]||(u[4]=g=>C.item.title=g),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Z,C.item.title]]),u[13]||(u[13]=e("label",{for:"title"},"Title",-1)),o(d).item.title.$error?(t(),s("div",qr,[(t(!0),s(O,null,q(o(d).item.title.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):D("",!0)])])]),e("div",null,[e("div",Br,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:u[5]||(u[5]=g=>J(g))},null,32),u[14]||(u[14]=e("label",{for:"editor"},"Content",-1)),o(d).htmlContent.$error?(t(),s("div",Nr,[(t(!0),s(O,null,q(o(d).htmlContent.$errors,g=>(t(),s("div",{key:g.$uid},m(g.$message),1))),128))])):D("",!0)])]),e("div",Rr,[e("div",Fr,[B(e("textarea",{"onUpdate:modelValue":u[6]||(u[6]=g=>C.item.metadata=g),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Z,C.item.metadata]]),u[15]||(u[15]=e("label",{for:"title"},"Metadata",-1))])])])):D("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},zr={components:{Page:Xe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Gr(l,p,S,P,k,H){const V=te("Page");return t(),pe(V,{id:S.id,urlView:S.urlView},null,8,["id","urlView"])}const jr=Ve(zr,[["render",Gr]]),Yr={class:"ms-2"},Wr={class:"input-group"},Kr={class:"table-responsive border shadow-sm"},Qr={class:"table table-hover mb-0"},Jr=["textContent"],Xr={key:0,class:"fas fa-fw fa-check-circle text-success"},Zr="/api/v1/sourcegroups/search",ei={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,security:C,filter:T,initializeFilter:d,getQuery:X,saveQuery:J,search:r,getRowNumber:f,setSelected:Y,isSelected:u}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${S==null?void 0:S.userId}/source-groups/search`,baseUrl:Zr,filter:{updateUrl:!0}});return fe(async()=>{d(),await r()}),(I,b)=>{const _=te("router-link"),g=te("PageHeader"),i=te("m-pagination"),n=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(g,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k)},{default:z(()=>[F(_,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>b[3]||(b[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Yr,[e("div",Wr,[B(e("input",{"onUpdate:modelValue":b[0]||(b[0]=a=>o(T).query.criteria=a),onKeyup:b[1]||(b[1]=Ue(a=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:b[2]||(b[2]=a=>o(r)(1))},b[4]||(b[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(n,{errorMessage:o(W)},{default:z(()=>[e("div",Kr,[e("table",Qr,[b[5]||(b[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(a,c)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:m(o(f)(c)),class:"text-center"},null,8,Jr),e("td",null,[F(_,{to:`${l.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[a.arn?(t(),s("span",Xr)):D("",!0),K(" "+m(a.name),1)]),_:2},1032,["to"])]),e("td",null,m(a.channelOutputs),1),e("td",null,m(a.packageConfigurations),1)]))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(i,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ti={key:0},si={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},oi={class:"nav-item",role:"presentation"},ai={class:"nav-item",role:"presentation"},li={class:"nav-item",role:"presentation"},ni={class:"tab-content",id:"myTabContent"},ri={class:"mt-2"},ii={class:"form-floating mb-2"},di={class:"mt-2"},ui={class:"table-responsive border"},ci={class:"table table-hover mb-0"},mi={class:"mt-2"},fi={class:"table-responsive border"},pi={class:"table table-hover mb-0"},vi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:Q,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:E,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:d,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});xe("$config");const J=we();J.user;const r=ge({user:J.user,item:null}),f=ue();fe(async()=>{await b(),f.value=E.getPageTab("sourceGroup")||"information-tab"});const Y=i=>{E.setPageTab("sourceGroup",i),f.value=i},u=i=>i!==f.value?"":"active",I=i=>i!==f.value?"":"show active",b=async()=>{const i=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const n=`/api/v1/sourcegroups/${p.id}/`;await ee.get(n).then(a=>{i.item=a.data})}catch(n){U.value=E.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{if(!k.value)try{k.value=!0,U.value="";const i=`/api/v1/sourcegroups/${p.id}/`;await ee.delete(i).then(n=>{A.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${p.urlMain}/`;await G.push(a)}})})}catch(i){U.value=E.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{k.value=!1}},g=async()=>{await b()};return(i,n)=>{const a=te("PageHeader"),c=te("router-link"),v=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(P)},{default:z(()=>[e("button",{onClick:n[0]||(n[0]=w=>_()),class:"ms-1 btn btn-warning"},n[7]||(n[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:n[1]||(n[1]=w=>g()),class:"ms-2 btn btn-secondary"},n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[2]||(n[2]=w=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},n[9]||(n[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",ti,[e("div",null,[e("ul",si,[e("li",oi,[e("button",{onClick:n[3]||(n[3]=w=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ai,[e("button",{onClick:n[4]||(n[4]=w=>Y("channelOutputs-tab")),class:re([u("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",li,[e("button",{onClick:n[5]||(n[5]=w=>Y("packageConfigurations-tab")),class:re([u("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",ni,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ri,[e("div",ii,[B(e("input",{"onUpdate:modelValue":n[6]||(n[6]=w=>r.item.name=w),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),n[10]||(n[10]=e("label",{for:"name"},"Name",-1))])])],2),e("div",{class:re([I("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",di,[e("div",ui,[e("table",ci,[n[11]||(n[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.channelOutputs,(w,y)=>(t(),s("tr",{key:w.channelOutputId},[e("td",null,m(y+1),1),e("td",null,[F(c,{to:`${l.urlViewChannel}/${w.channelId}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(w.manifestName),1)]),_:2},1032,["to"])]),e("td",null,m(w.outputType),1)]))),128))]),_:1},512),[[Se,r.item.channelOutputs.length>0]])])])])],2),e("div",{class:re([I("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",mi,[e("div",fi,[e("table",pi,[n[12]||(n[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.packageConfigurations,(w,y)=>(t(),s("tr",{key:w.packageConfigurationId},[e("td",null,m(y+1),1),e("td",null,[F(c,{to:`${l.urlViewVodSource}/${w.vodSourceId}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(w.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,m(w.path),1),e("td",null,m(w.type),1)]))),128))]),_:1},512),[[Se,r.item.packageConfigurations.length>0]])])])])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},gi=["disabled"],bi={class:"form-floating mb-2"},yi={key:0,class:"d-block invalid-feedback"},$i={class:"form-floating mb-2"},wi={key:0,class:"d-block invalid-feedback"},hi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),A=l,C=ge({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),T={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:se.withMessage("HTTP Configuration Base Url is required.",le),$autoDirty:!0,$lazy:!0}}},d=Te(T,C);fe(async()=>{});const X=async()=>{const J=C;if(P.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const f=U.clone(J.item);await W.post("/api/v1/sourcelocations/",f).then(Y=>{G.success("Add Source Location","Source location added.",{onClose:async()=>{const u=`${A.urlView}/${Y.data}`;await Q.push(u)}})})}catch(f){V.value=U.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{P.value=!1}};return(J,r)=>{const f=te("router-link"),Y=te("PageHeader"),u=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(Y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:r[0]||(r[0]=I=>X()),class:"btn btn-primary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,gi),F(f,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(u,{errorMessage:o(V),vuelidate:o(d)},{default:z(()=>[e("div",null,[e("div",bi,[B(e("input",{"onUpdate:modelValue":r[1]||(r[1]=I=>C.item.name=I),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,C.item.name]]),r[5]||(r[5]=e("label",{for:"name"},"Name",-1)),o(d).item.name.$error?(t(),s("div",yi,[(t(!0),s(O,null,q(o(d).item.name.$errors,I=>(t(),s("div",{key:I.$uid},m(I.$message),1))),128))])):D("",!0)]),e("div",$i,[B(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=I=>C.item.httpConfigurationBaseUrl=I),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Z,C.item.httpConfigurationBaseUrl]]),r[6]||(r[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(d).item.httpConfigurationBaseUrl.$error?(t(),s("div",wi,[(t(!0),s(O,null,q(o(d).item.httpConfigurationBaseUrl.$errors,I=>(t(),s("div",{key:I.$uid},m(I.$message),1))),128))])):D("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},_i={components:{Page:Xe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ki(l,p,S,P,k,H){const V=te("Page");return t(),pe(V,{id:S.id,urlView:S.urlView},null,8,["id","urlView"])}const Si=Ve(_i,[["render",ki]]),Ti={class:"ms-1"},Mi={class:"input-group"},Ii={class:"table-responsive border shadow-sm"},xi={class:"table table-hover mb-0"},Ci={class:"text-center"},Vi=["textContent"],Pi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Oi={class:"text-center"},Ai=["onUpdate:modelValue"],Ui="/api/v1/sourcelocations/search",Di={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,security:C,filter:T,initializeFilter:d,getQuery:X,saveQuery:J,search:r,getRowNumber:f,setSelected:Y,isSelected:u}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${S==null?void 0:S.userId}/source-locations/search`,baseUrl:Ui,filter:{updateUrl:!0}}),I=Ie(()=>{const g=T.value;return g&&g.items?g.items.filter(a=>a.selected):null});fe(async()=>{d(),await r()});const b=async()=>{if(!(I.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!H.value){W.value=null;try{H.value=!0;const n={sourceLocationIds:I.value.map(a=>a.sourceLocationId)};await G.post("/api/v1/sourceLocations/publish/",n).then(a=>{E.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),H.value=!1,await r()}catch(i){W.value=ee.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{H.value=!1}}},_=async()=>{if(!(I.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!H.value){W.value=null;try{H.value=!0;const n={sourceLocationIds:I.value.map(a=>a.sourceLocationId)};await G.post("/api/v1/sourceLocations/unpublish/",n).then(a=>{E.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),H.value=!1,await r()}catch(i){W.value=ee.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{H.value=!1}}};return(g,i)=>{const n=te("router-link"),a=te("PageHeader"),c=te("m-pagination"),v=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k)},{default:z(()=>[F(n,{to:l.urlAdd,class:"btn btn-primary ms-2"},{default:z(()=>i[3]||(i[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ti,[e("div",Mi,[B(e("input",{"onUpdate:modelValue":i[0]||(i[0]=w=>o(T).query.criteria=w),onKeyup:i[1]||(i[1]=Ue(w=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:i[2]||(i[2]=w=>o(r)(1))},i[4]||(i[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(W)},{default:z(()=>[e("div",Ii,[e("table",xi,[e("thead",null,[e("tr",null,[i[7]||(i[7]=e("td",{class:"text-center"},"#",-1)),i[8]||(i[8]=e("th",null,"Name",-1)),i[9]||(i[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",Ci,[I.value.length?(t(),s(O,{key:0},[e("button",{onClick:b,class:"btn btn-primary btn-sm"},i[5]||(i[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:_,class:"btn btn-warning btn-sm ms-1"},i[6]||(i[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):D("",!0)])])]),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(w,y)=>(t(),s("tr",{key:w.sourceLocationId},[e("td",{textContent:m(o(f)(y)),class:"text-center"},null,8,Vi),e("td",null,[F(n,{to:`${l.urlView}/${w.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[w.arn?(t(),s("i",Pi)):D("",!0),e("span",null,m(w.name),1)]),_:2},1032,["to"])]),e("td",null,m(w.httpConfigurationBaseUrl),1),e("td",Oi,[B(e("input",{"onUpdate:modelValue":M=>w.selected=M,type:"checkbox",class:"form-check-input"},null,8,Ai),[[Be,w.selected]])])]))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(c,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Hi={key:0},Li={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ei={class:"nav-item",role:"presentation"},qi={class:"nav-item",role:"presentation"},Bi={class:"nav-item",role:"presentation"},Ni={class:"tab-content",id:"myTabContent"},Ri={class:"mt-2"},Fi={class:"col"},zi={class:"form-floating mb-2"},Gi={class:"col"},ji={class:"form-floating mb-2"},Yi={class:"mt-2"},Wi={class:"table-responsive border"},Ki={class:"table table-hover mb-0"},Qi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Ji={class:"mt-2"},Xi={class:"table-responsive border"},Zi={class:"table table-hover mb-0"},ed={key:0,class:"fas fa-fw fa-check-circle text-success"},td={class:"badge bg-info"},sd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:Q,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:E,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:d,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});xe("$config");const J=we();J.user;const r=ge({user:J.user,item:null}),f=ue();fe(async()=>{await b(),f.value=E.getPageTab("sourceLocation")||"information-tab"});const Y=n=>{E.setPageTab("sourceLocation",n),f.value=n},u=n=>n!==f.value?"":"active",I=n=>n!==f.value?"":"show active",b=async()=>{const n=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const a=`/api/v1/sourcelocations/${p.id}/`;await ee.get(a).then(c=>{n.item=c.data})}catch(a){U.value=E.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{await b()},g=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!k.value){U.value=null;try{k.value=!0;const a={sourceLocationIds:[p.id]};await ee.post("/api/v1/sourcelocations/publish/",a).then(c=>{A.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),k.value=!1,await _()}catch(a){U.value=E.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}},i=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!k.value){U.value=null;try{k.value=!0;const a={sourceLocationIds:[p.id]};await ee.post("/api/v1/sourcelocations/unpublish/",a).then(c=>{A.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),k.value=!1,await _()}catch(a){U.value=E.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}};return(n,a)=>{const c=te("PageHeader"),v=te("router-link"),w=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(c,{"page-icon":"fas fa-fw fa-building",pageTitle:o(P)},{default:z(()=>[r.item?(t(),s(O,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=y=>i()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=y=>g()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):D("",!0),e("button",{onClick:a[2]||(a[2]=y=>_()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=y=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(w,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",Hi,[e("div",null,[e("ul",Li,[e("li",Ei,[e("button",{onClick:a[4]||(a[4]=y=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",qi,[e("button",{onClick:a[5]||(a[5]=y=>Y("vodSources-tab")),class:re([u("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Bi,[e("button",{onClick:a[6]||(a[6]=y=>Y("programs-tab")),class:re([u("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Ni,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Ri,[e("div",Fi,[e("div",zi,[B(e("input",{"onUpdate:modelValue":a[7]||(a[7]=y=>r.item.name=y),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Gi,[e("div",ji,[B(e("input",{"onUpdate:modelValue":a[8]||(a[8]=y=>r.item.httpConfigurationBaseUrl=y),type:"text",class:"form-control-plaintext",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Z,r.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:re([I("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Yi,[e("div",Wi,[e("table",Ki,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.vodSources,(y,M)=>(t(),s("tr",{key:y.vodSourceId},[e("td",null,m(M+1),1),e("td",null,[y.arn?(t(),s("span",Qi)):D("",!0),F(v,{to:`${p.urlViewVodSource}/${encodeURIComponent(y.vodSourceId)}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(y.name),1)]),_:2},1032,["to"])]),e("td",null,[F(v,{to:`${p.urlViewVideo}/${encodeURIComponent(y.video.videoId)}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(y.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,m(o(E).moment.utc(y.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Se,r.item.vodSources.length>0]])])])])],2),e("div",{class:re([I("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Ji,[e("div",Xi,[e("table",Zi,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.programs,(y,M)=>(t(),s("tr",{key:y.programId},[e("td",null,m(M+1),1),e("td",null,[F(v,{to:`${p.urlViewChannel}/${encodeURIComponent(y.channel.channelId)}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(y.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[y.arn?(t(),s("span",ed)):D("",!0),K(" "+m(y.name)+" ",1),e("div",null," Start: "+m(o(E).moment.utc(y.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+m(o(E).moment.utc(y.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[K(m(o(E).moment(y.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",td,m(o(E).moment(y.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Se,r.item.programs.length>0]])])])])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},od=["id"],ad={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ld={class:"modal-content"},nd={class:"modal-header"},rd={class:"modal-title"},id={class:"modal-body p-1"},dd={class:"row row-cols-1 row-cols-sm-3"},ud={class:"col"},cd={class:"form-floating mb-2"},md=["value"],fd={class:"col"},pd={class:"form-floating mb-2"},vd=["value"],gd={class:"col"},bd={class:"input-group mb-2"},yd={class:"form-floating"},$d={class:"row row-cols-1 row-cols-sm-2"},wd={class:"col-sm-4"},hd={class:"card"},_d={key:0,class:"mt-2"},kd={class:"col"},Sd={class:"form-floating mb-2"},Td={class:"col ms-2 my-2"},Md={class:"badge bg-info me-1"},Id={class:"badge bg-primary me-1"},xd={class:"row row-cols-1 row-cols-sm-2"},Cd={class:"col"},Vd={class:"form-floating mb-2"},Pd={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Od={class:"col"},Ad={class:"form-floating mb-2"},Ud={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Dd={class:"col"},Hd={class:"form-floating mb-2"},Ld={class:"col-sm-8"},Ed={class:"table-responsive border shadow-sm"},qd={class:"table table-sm table-hover mb-0 overflow-auto"},Bd=["textContent"],Nd={class:"d-flex flex-row justify-content-start"},Rd={class:"mt-1"},Fd=["src"],zd={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Gd={class:"ms-2"},jd=["onClick"],Yd={class:"modal-footer"},Wd="/api/v1/videos/search",ut={__name:"_selectVideo",emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,security:T,filter:d,initializeFilter:X,getQuery:J,saveQuery:r,search:f,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select Video",cacheKey:`${k==null?void 0:k.userId}/videos/select`,baseUrl:Wd,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(M,$)=>{const N=M.value,h=new URLSearchParams(window.location.search),x=JSON.parse(localStorage.getItem($))||{};N.query.genre=h.get("genre")||x.genre||N.query.genre||0,N.query.category=h.get("category")||x.category||N.query.category||0},getQuery:M=>["?c=",encodeURIComponent(M.query.criteria),"&p=",M.pageIndex,"&s=",M.pageSize,"&sf=",M.sortField,"&so=",M.sortOrder,"&genre=",M.query.genreId,"&category=",M.query.categoryId,"&sourceLocationId=",M.query.sourceLocationId].join(""),saveQuery:(M,$)=>{localStorage.setItem($,JSON.stringify({criteria:M.query.criteria,pageIndex:M.pageIndex,pageSize:M.pageSize,sortField:M.sortField,sortOrder:M.sortOrder,visible:M.visible,genre:M.query.genre,category:M.query.category}))}}),b=S,_=ue("modalSelectVideo"),g=ge({video:null,hls:null});fe(async()=>{X(),await i()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const i=async()=>{await c(),await v()},n=async M=>{d.value.query.sourceLocationId=M,G.value="",await f();var $=document.getElementById(_.value),N=he.getOrCreateInstance($);N.show()},a=async()=>{var M=document.getElementById(_.value),$=he.getOrCreateInstance(M);$.hide(),g.hls&&(g.hls.stopLoad(),g.hls.destroy()),b("close",g.video)},c=async M=>{try{const N=await E.get("/api/v1/lookups/video-categories/").then(h=>h.data);d.value.lookups.categories=N}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},v=async M=>{try{const N=await E.get("/api/v1/lookups/video-genres/").then(h=>h.data);d.value.lookups.genres=N}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},w=M=>{g.video=M,y()},y=()=>{if(Hls.isSupported()){g.hls&&(g.hls.stopLoad(),g.hls.destroy());var M=document.getElementById("video-select-preview");const N=g.video.formats.find(x=>x.formatName==="HLS"),h=N.serverUrl+N.path;g.hls=A.createHlsStream(M,h)}};return p({open:n,close:a}),(M,$)=>{const N=te("m-pagination"),h=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ad,[e("div",ld,[e("div",nd,[e("h5",rd,[$[10]||($[10]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),K(m(o(V)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=x=>a()),"aria-label":"Close"})]),e("div",id,[F(h,{errorMessage:o(G)},{default:z(()=>[e("div",dd,[e("div",ud,[e("div",cd,[B(e("select",{"onUpdate:modelValue":$[1]||($[1]=x=>o(d).query.categoryId=x),class:"form-select",id:"category"},[(t(!0),s(O,null,q(o(d).lookups.categories,x=>(t(),s("option",{value:x.id},m(x.name),9,md))),256))],512),[[ve,o(d).query.categoryId]]),$[11]||($[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",fd,[e("div",pd,[B(e("select",{"onUpdate:modelValue":$[2]||($[2]=x=>o(d).query.genreId=x),class:"form-select",id:"genre"},[(t(!0),s(O,null,q(o(d).lookups.genres,x=>(t(),s("option",{value:x.id},m(x.name),9,vd))),256))],512),[[ve,o(d).query.genreId]]),$[12]||($[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",gd,[e("div",bd,[e("div",yd,[B(e("input",{"onUpdate:modelValue":$[3]||($[3]=x=>o(d).query.criteria=x),onKeyup:$[4]||($[4]=Ue(x=>o(f)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(d).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[5]||($[5]=x=>o(f)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",$d,[e("div",wd,[e("div",hd,[$[19]||($[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.video?(t(),s("div",_d,[e("div",kd,[e("div",Sd,[B(e("input",{"onUpdate:modelValue":$[6]||($[6]=x=>g.video.title=x),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.video.title]]),$[15]||($[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Td,[e("div",null,[(t(!0),s(O,null,q(g.video.genres,x=>(t(),s("span",Md,m(x.genreName),1))),256)),(t(!0),s(O,null,q(g.video.categories,x=>(t(),s("span",Id,m(x.categoryName),1))),256))])]),e("div",xd,[e("div",Cd,[e("div",Vd,[e("div",Pd,m(o(A).moment(g.video.dateReleased).calendar()),1),$[16]||($[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Od,[e("div",Ad,[e("div",Ud,m(o(A).moment.utc(g.video.durationInMillis).format("HH:mm:ss")),1),$[17]||($[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Dd,[e("div",Hd,[B(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=x=>g.video.description=x),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.video.description]]),$[18]||($[18]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])]),e("div",Ld,[e("div",Ed,[e("table",qd,[$[20]||($[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(d).items,(x,ne)=>(t(),s("tr",{key:x.videoId},[e("td",{textContent:m(o(Y)(ne)),class:"text-center"},null,8,Bd),e("td",null,[e("div",Nd,[e("div",null,[x.thumbnails.length>0?(t(!0),s(O,{key:0},q(x.thumbnails,ie=>(t(),s("div",Rd,[e("img",{src:ie.url,class:"img-fuild border",width:"128"},null,8,Fd)]))),256)):(t(),s("img",zd))]),e("div",Gd,[e("a",{onClick:ie=>w(x),class:"text-wrap link-offset-2",role:"button"},m(x.title),9,jd)])])])]))),128))]),_:1},512),[[Se,o(d).items.length>0]])])]),F(N,{filter:o(d),search:o(f),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",Yd,[e("button",{onClick:$[8]||($[8]=x=>a()),class:"btn btn-primary",type:"button"},$[21]||($[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[9]||($[9]=x=>a()),class:"btn btn-secondary ms-1"},$[22]||($[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,od)}}},Kd=["disabled"],Qd={class:"col"},Jd={class:"form-floating mb-2"},Xd={key:0,class:"d-block invalid-feedback"},Zd={class:"row row-cols-1 row-cols-sm-2"},eu={class:"col"},tu={class:"form-floating mb-2"},su=["value"],ou={key:0,class:"d-block invalid-feedback"},au={class:"col"},lu={class:"input-group mb-2"},nu={class:"form-floating"},ru={id:"video",class:"form-control",placeholder:"Title"},iu={key:0},du={class:"d-flex flex-row justify-content-start"},uu={key:0,class:"d-inline invalid-feedback"},cu={class:"table-responsive border mt-1"},mu={class:"table mb-0 caption-top"},fu={class:"align-middle"},pu=["onUpdate:modelValue"],vu=["value"],gu=["onUpdate:modelValue"],bu=["value"],yu=["onClick"],$u={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,route:W,axios:U,utils:G,toasts:ee,close:E,closeWithReturnUrl:A,security:C}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),T=l,d=ge({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),X=ue(),J=(c,v,w)=>c.length>0,r={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",le),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",J),$each:se.forEach({path:{required:se.withMessage("Path is required.",le)},sourceGroupId:{required:se.withMessage("Source Group is required.",le)}}),$autoDirty:!0,$lazy:!0}}},f=Te(r,d);fe(async()=>{if(await Y(),await u(),W.query.videoId)debugger});const Y=async()=>{try{await U.get("/api/v1/sourcegroups/lookup/").then(v=>{d.lookups.sourceGroups=v.data})}catch(c){V.value=G.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},u=async()=>{try{if(await U.get("/api/v1/sourcelocations/lookup/").then(v=>{d.lookups.sourceLocations=v.data}),d.lookups.sourceLocations.length===1){const v=d.lookups.sourceLocations[0];d.selected.sourceLocation=v,await I()}}catch(c){V.value=G.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},I=async()=>{const c=d.selected.sourceLocation;d.item.sourceLocationId=c.id},b=async()=>{d.item.videoId=d.selected.video.videoId,await _(d.item.videoId)},_=async c=>{try{const v=`/api/v1/videos/${c}/formats`;await U.get(v).then(w=>{d.selected.video.formats=w.data})}catch(v){V.value=G.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},g=async()=>{const c=d;if(P.value)return;if(!await f.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const w=G.clone(c.item),y=c.item.packageConfigurations.filter(M=>M.selectedFormat&&M.sourceGroupId);y.forEach(M=>{const $=M.selectedFormat;M.path=$.path,M.format=$.format,delete M.selectedFormat}),w.packageConfigurations=y,delete w.video,await U.post("/api/v1/vodSources/",w).then(M=>{debugger;ee.success("Add VOD Source","VOD source added",{onClose:async()=>{const $=`${T.urlView}/${M.data}`;await Q.push($)}})})}catch(w){V.value=G.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{P.value=!1}},i=()=>{const c={sourceGroupId:null,selectedFormat:null},v=d.selected.video;if(v){const w=v.formats.find(y=>y.formatName==="HLS");c.path=`${w.serverUrl}${w.path}`}d.item.packageConfigurations.push(c)},n=c=>{d.item.packageConfigurations.splice(c,1)},a=async c=>{c&&(d.selected.video=c,await b())};return(c,v)=>{const w=te("PageHeader"),y=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(w,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(f).$dirty&&o(f).$invalid,onClick:v[0]||(v[0]=M=>g()),class:"btn btn-primary"},v[6]||(v[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kd),e("button",{onClick:v[1]||(v[1]=M=>o(A)(T.urlMain)),class:"btn btn-secondary ms-1"},v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(y,{errorMessage:o(V),vuelidate:o(f)},{default:z(()=>[e("div",null,[e("div",Qd,[e("div",Jd,[B(e("input",{"onUpdate:modelValue":v[2]||(v[2]=M=>d.item.name=M),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,d.item.name]]),v[8]||(v[8]=e("label",{for:"name",class:""},"Name",-1)),o(f).item.name.$error?(t(),s("div",Xd,[(t(!0),s(O,null,q(o(f).item.name.$errors,M=>(t(),s("div",{key:M.$uid},m(M.$message),1))),128))])):D("",!0)])]),e("div",Zd,[e("div",eu,[e("div",tu,[B(e("select",{"onUpdate:modelValue":v[3]||(v[3]=M=>d.selected.sourceLocation=M),onChange:v[4]||(v[4]=M=>I()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(d.lookups.sourceLocations,M=>(t(),s("option",{value:M},m(M.name),9,su))),256))],544),[[ve,d.selected.sourceLocation]]),v[9]||(v[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(f).item.sourceLocationId.$error?(t(),s("div",ou,[(t(!0),s(O,null,q(o(f).item.sourceLocationId.$errors,M=>(t(),s("div",{key:M.$uid},m(M.$message),1))),128))])):D("",!0)])]),e("div",au,[e("div",lu,[e("div",nu,[e("div",ru,[d.selected.video?(t(),s(O,{key:0},[K(m(o(G).moment.utc(d.selected.video.durationInMillis).format("HH:mm:ss"))+" - "+m(d.selected.video.title),1)],64)):D("",!0)]),v[10]||(v[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:v[5]||(v[5]=M=>X.value.open(d.selected.sourceLocation.id)),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),d.item.videoId?(t(),s("div",iu,[e("div",du,[e("fieldset",null,[e("legend",null,[v[13]||(v[13]=K(" Package Configurations ")),o(f).item.packageConfigurations.$error?(t(),s("span",uu,v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):D("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:i,class:"btn btn-outline-primary"},v[14]||(v[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",cu,[e("table",mu,[v[16]||(v[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",fu,[(t(!0),s(O,null,q(d.item.packageConfigurations,(M,$)=>(t(),s("tr",null,[e("td",null,m($+1),1),e("td",null,[B(e("select",{"onUpdate:modelValue":N=>M.selectedFormat=N,class:"form-select",id:"videoId"},[(t(!0),s(O,null,q(d.selected.video.formats,N=>(t(),s("option",{value:N},m(N.path),9,vu))),256))],8,pu),[[ve,M.selectedFormat]]),o(f).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(f).item.packageConfigurations.$each.$response.$errors[$].path,N=>(t(),s("div",{key:N,class:"d-block invalid-feedback"},m(N.$message),1))),128)):D("",!0)]),e("td",null,[M.selectedFormat?(t(),s(O,{key:0},[K(m(M.selectedFormat.formatName),1)],64)):D("",!0)]),e("td",null,[e("div",null,[B(e("select",{"onUpdate:modelValue":N=>M.sourceGroupId=N,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(d.lookups.sourceGroups,N=>(t(),s("option",{value:N.id},m(N.name),9,bu))),256))],8,gu),[[ve,M.sourceGroupId]]),o(f).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(f).item.packageConfigurations.$each.$response.$errors[$].path,N=>(t(),s("div",{key:N,class:"d-block invalid-feedback"},m(N.$message),1))),128)):D("",!0)])]),e("td",null,[e("button",{onClick:N=>n($),class:"btn btn-outline-warning"},v[15]||(v[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yu)])]))),256))])])])])):D("",!0)])]),_:1},8,["errorMessage","vuelidate"]),F(ut,{ref_key:"modalSelectVideo",ref:X,onClose:a},null,512)])]),_:1})}}},wu=["disabled"],hu={key:0},_u={class:"col"},ku={class:"form-floating mb-2"},Su={key:0,class:"d-block invalid-feedback"},Tu={class:"row row-cols-1 row-cols-sm-2"},Mu={class:"col"},Iu={class:"form-floating mb-2"},xu=["value"],Cu={key:0,class:"d-block invalid-feedback"},Vu={class:"col"},Pu={class:"col"},Ou=["disabled"],Au={class:"form-floating"},Uu={id:"video",class:"form-control",placeholder:"Title"},Du={key:0},Hu={class:"d-flex flex-row justify-content-between mt-3"},Lu={key:0,class:"d-inline invalid-feedback"},Eu={class:"table-responsive border mt-1"},qu={class:"table mb-0 caption-top"},Bu={class:"input-group mb-1"},Nu=["onUpdate:modelValue"],Ru=["onUpdate:modelValue"],Fu=["value"],zu=["onUpdate:modelValue"],Gu=["onClick"],ju={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),A=l,C=ue(),T=ge({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),d=(c,v,w)=>c.length>0,X={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",le),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",d),$each:se.forEach({path:{required:se.withMessage("Path is required.",le)},sourceGroupId:{required:se.withMessage("Source Group is required.",le)}})}}},J=Te(X,T);fe(async()=>{await r(),await u(),await I()});const r=async()=>{await f(),await Y()},f=async()=>{const c=T;if(!P.value)try{P.value=!0,V.value="",T.item=null;const v=`/api/v1/vodsources/${A.id}/`;await W.get(v).then(w=>{c.item=w.data;const y=c.item,M=U.moment.utc(c.item.video.durationInMillis).format("HH:mm:ss");y.video.duration=M})}catch(v){V.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{P.value=!1}},Y=async()=>{const c=T;if(!P.value)try{P.value=!0,V.value="";const v=`/api/v1/videos/${c.item.videoId}/`;await W.get(v).then(w=>{c.selected.video=w.data})}catch(v){V.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{P.value=!1}},u=async()=>{try{await W.get("/api/v1/sourcegroups/lookup/").then(v=>{T.lookups.sourceGroups=v.data})}catch(c){V.value=U.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},I=async()=>{try{if(await W.get("/api/v1/sourcelocations/lookup/").then(v=>{T.lookups.sourceLocations=v.data}),T.lookups.sourceLocations.length>0){const v=T.lookups.sourceLocations.find(w=>w.id===T.item.sourceLocationId);T.selected.sourceLocation=v}}catch(c){V.value=U.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{}},b=async()=>{T.item.videoId=T.selected.video.videoId,await _(T.item.videoId)},_=async c=>{try{const v=`/api/v1/videos/${c}/formats`;await W.get(v).then(w=>{T.selected.video.formats=w.data;debugger})}catch(v){V.value=U.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},g=async()=>{const c=T;if(P.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const w=U.clone(c.item);delete w.video,delete w.programs,delete w.sourceLocation,await W.put("/api/v1/vodsources/",w).then(y=>{G.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const M=`${A.urlView}/${A.id}`;await Q.push(M)}})})}catch(w){V.value=U.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{P.value=!1}},i=()=>{debugger;const c={path:"",sourceGroupId:null,type:"HLS"},v=T.selected.video;if(v){const w=v.formats.find(y=>y.formatName==="HLS");c.path=`${w.path}`}T.item.packageConfigurations.push(c)},n=c=>{T.item.packageConfigurations.splice(c,1)},a=async c=>{c&&(T.selected.video=c,T.item.packageConfigurations=[],await b())};return(c,v)=>{const w=te("router-link"),y=te("PageHeader"),M=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(y,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:v[0]||(v[0]=$=>g()),class:"btn btn-primary"},v[5]||(v[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wu),e("button",{onClick:v[1]||(v[1]=$=>r()),class:"btn btn-secondary ms-2"},v[6]||(v[6]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(w,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-1"},{default:z(()=>v[7]||(v[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(M,{errorMessage:o(V),vuelidate:o(J)},{default:z(()=>[T.item?(t(),s("div",hu,[e("div",_u,[e("div",ku,[B(e("input",{"onUpdate:modelValue":v[2]||(v[2]=$=>T.item.name=$),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,T.item.name]]),v[8]||(v[8]=e("label",{for:"name",class:""},"Name",-1)),o(J).item.name.$error?(t(),s("div",Su,[(t(!0),s(O,null,q(o(J).item.name.$errors,$=>(t(),s("div",{key:$.$uid},m($.$message),1))),128))])):D("",!0)])]),e("div",Tu,[e("div",Mu,[e("div",Iu,[B(e("select",{"onUpdate:modelValue":v[3]||(v[3]=$=>T.selected.sourceLocation=$),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(T.lookups.sourceLocations,$=>(t(),s("option",{value:$},m($.name),9,xu))),256))],512),[[ve,T.selected.sourceLocation]]),v[9]||(v[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(J).item.sourceLocationId.$error?(t(),s("div",Cu,[(t(!0),s(O,null,q(o(J).item.sourceLocationId.$errors,$=>(t(),s("div",{key:$.$uid},m($.$message),1))),128))])):D("",!0)])]),e("div",Vu,[e("div",Pu,[e("div",{class:"input-group mb-2",disabled:T.item.packageConfigurations.length>0},[e("div",Au,[e("div",Uu,[T.selected.video?(t(),s(O,{key:0},[K(m(T.selected.video.title),1)],64)):D("",!0)]),v[10]||(v[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:v[4]||(v[4]=$=>C.value.open(T.selected.sourceLocation.id)),class:"btn btn-primary",type:"button"},v[11]||(v[11]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))],8,Ou)])])]),T.item.videoId?(t(),s("div",Du,[e("div",Hu,[e("div",null,[e("h5",null,[v[13]||(v[13]=K(" Package Configurations ")),o(J).item.packageConfigurations.$error?(t(),s("span",Lu,v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):D("",!0)])]),e("button",{onClick:i,class:"btn btn-outline-primary"},v[14]||(v[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),K("Package Configuration ")]))]),e("div",Eu,[e("table",qu,[v[17]||(v[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(T.item.packageConfigurations,($,N)=>(t(),s("tr",null,[e("td",null,m(N+1),1),e("td",null,[e("div",Bu,[B(e("input",{"onUpdate:modelValue":h=>$.path=h,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Nu),[[Z,$.path]])]),o(J).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(J).item.packageConfigurations.$each.$response.$errors[N].path,h=>(t(),s("div",{key:h,class:"d-block invalid-feedback"},m(h.$message),1))),128)):D("",!0)]),e("td",null,[e("div",null,[B(e("select",{"onUpdate:modelValue":h=>$.sourceGroupId=h,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(T.lookups.sourceGroups,h=>(t(),s("option",{value:h.id},m(h.name),9,Fu))),256))],8,Ru),[[ve,$.sourceGroupId]]),o(J).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},q(o(J).item.packageConfigurations.$each.$response.$errors[N].path,h=>(t(),s("div",{key:h,class:"d-block invalid-feedback"},m(h.$message),1))),128)):D("",!0)])]),e("td",null,[B(e("select",{"onUpdate:modelValue":h=>$.type=h,class:"form-select",id:"type"},v[15]||(v[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,zu),[[ve,$.type]])]),e("td",null,[e("button",{onClick:h=>n(N),class:"btn btn-outline-warning"},v[16]||(v[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gu)])]))),256))])])])])):D("",!0)])):D("",!0)]),_:1},8,["errorMessage","vuelidate"]),F(ut,{ref_key:"modalSelectVideo",ref:C,onClose:a},null,512)])]),_:1})}}},Yu={class:"ms-2"},Wu={class:"input-group"},Ku=["value"],Qu={class:"ms-1"},Ju={class:"input-group"},Xu=["value"],Zu={class:"ms-1"},ec={class:"input-group"},tc={class:"ms-1"},sc={class:"input-group"},oc={class:"table-responsive border shadow-sm"},ac={class:"table table-hover mb-0"},lc={class:"text-center"},nc=["textContent"],rc={class:"d-flex flex-row justify-content-start"},ic={class:"mt-1"},dc=["src"],uc={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},cc={class:"ms-2"},mc={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},fc={class:"badge bg-primary me-1"},pc={key:0},vc={class:"badge bg-info me-1"},gc={class:"d-flex flex-row justify-content-start"},bc={class:"ms-2"},yc={class:"small"},$c={class:"badge bg-secondary me-1"},wc={class:"text-center"},hc=["onUpdate:modelValue"],_c="/api/v1/vodsources/search",kc={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,closeWithReturnUrl:C,generateReturnUrl:T,security:d,filter:X,initializeFilter:J,getQuery:r,saveQuery:f,search:Y,getRowNumber:u,setSelected:I,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${S==null?void 0:S.userId}/vod-sources/search`,baseUrl:_c,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(v,w)=>{const y=v.value,M=new URLSearchParams(window.location.search),$=JSON.parse(localStorage.getItem(w))||{};y.query.category=M.get("category")||$.category||y.query.category||0,y.query.genre=M.get("genre")||$.genre||y.query.genre||0,y.query.sourceLocationId=M.get("slid")||$.sourceLocationId||y.query.sourceLocationId||""},getQuery:v=>["?c=",encodeURIComponent(v.query.criteria),"&p=",v.pageIndex,"&s=",v.pageSize,"&sf=",v.sortField,"&so=",v.sortOrder,"&category=",v.query.category,"&genre=",v.query.genre,"&slid=",v.query.sourceLocationId].join(""),saveQuery:(v,w)=>{localStorage.setItem(w,JSON.stringify({criteria:v.query.criteria,pageIndex:v.pageIndex,pageSize:v.pageSize,sortField:v.sortField,sortOrder:v.sortOrder,visible:v.visible,category:v.query.category,genre:v.query.genre,sourceLocationId:v.query.sourceLocationId}))}}),_=Ie(()=>{const v=X.value;return v&&v.items?v.items.filter(M=>M.selected):[]});fe(async()=>{J(),await a(),await c(),await Y()});const g=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!H.value){W.value=null;try{H.value=!0;const y={vodSourceIds:_.value.map(M=>M.vodSourceId)};await G.post("/api/v1/vodsources/publish/",y).then(M=>{E.success("Publish VODs","VODs was published.",{async onClose(){}})}),H.value=!1,await Y()}catch(w){W.value=ee.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{H.value=!1}}},i=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!H.value){W.value=null;try{H.value=!0;const y={vodSourceIds:_.value.map(M=>M.vodSourceId)};await G.post("/api/v1/vodsources/unpublish/",y).then(M=>{E.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),H.value=!1,await Y()}catch(w){W.value=ee.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{H.value=!1}}},n=()=>{const v=X.value.items;if(v.length<1)return;const w=!v[0].selected;X.value.items.forEach(y=>{y.selected=w})},a=async()=>{try{await G.get("/api/v1/sourcelocations/lookup/").then(w=>{X.value.lookups.sourceLocations=w.data})}catch(v){W.value=ee.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},c=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(v=>{const w=v.data;X.value.lookups.genres=w})}catch(v){W.value=ee.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return ue(!1),(v,w)=>{const y=te("router-link"),M=te("PageHeader"),$=te("m-pagination"),N=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(M,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(k)},{default:z(()=>[F(y,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>w[6]||(w[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Yu,[e("div",Wu,[w[8]||(w[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),B(e("select",{"onUpdate:modelValue":w[0]||(w[0]=h=>o(X).query.sourceLocationId=h),class:"form-select"},[w[7]||(w[7]=e("option",{value:""},"All",-1)),(t(!0),s(O,null,q(o(X).lookups.sourceLocations,h=>(t(),s("option",{value:h.id},m(h.name),9,Ku))),256))],512),[[ve,o(X).query.sourceLocationId]])])]),e("div",Qu,[e("div",Ju,[w[9]||(w[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),B(e("select",{"onUpdate:modelValue":w[1]||(w[1]=h=>o(X).query.genre=h),class:"form-select"},[(t(!0),s(O,null,q(o(X).lookups.genres,h=>(t(),s("option",{value:h.id},m(h.name),9,Xu))),256))],512),[[ve,o(X).query.genre]])])]),e("div",Zu,[e("div",ec,[w[11]||(w[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),B(e("select",{"onUpdate:modelValue":w[2]||(w[2]=h=>o(X).query.category=h),class:"form-select"},w[10]||(w[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ve,o(X).query.category]])])]),e("div",tc,[e("div",sc,[B(e("input",{"onUpdate:modelValue":w[3]||(w[3]=h=>o(X).query.criteria=h),onKeyup:w[4]||(w[4]=Ue(h=>o(Y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(X).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:w[5]||(w[5]=h=>o(Y)(1))},w[12]||(w[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(N,{errorMessage:o(W)},{default:z(()=>[e("div",oc,[e("table",ac,[e("thead",null,[e("tr",null,[w[16]||(w[16]=e("td",{class:"text-center"},"#",-1)),w[17]||(w[17]=e("th",null,"Name",-1)),w[18]||(w[18]=e("th",null,"Video Title",-1)),e("th",lc,[_.value.length?(t(),s(O,{key:0},[e("button",{onClick:g,class:"btn btn-sm btn-primary"},w[13]||(w[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:i,class:"btn btn-sm btn-warning ms-1"},w[14]||(w[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):D("",!0),e("button",{onClick:n,class:"btn btn-sm btn-outline-primary ms-2"},w[15]||(w[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(X).items,(h,x)=>(t(),s("tr",{key:h.vodSourceId},[e("td",{textContent:m(o(u)(x)),class:"text-center"},null,8,nc),e("td",null,[e("div",rc,[e("div",null,[h.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(h.video.thumbnails,ne=>(t(),s("div",ic,[e("img",{src:ne.url,class:"img-fuild border",width:"128"},null,8,dc)]))),256)):(t(),s("img",uc))]),e("div",cc,[F(y,{to:`${l.urlView}/${h.vodSourceId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[h.arn?(t(),s("span",mc)):D("",!0),K(m(h.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,q(h.video.categories,ne=>(t(),s("div",null,[e("span",fc,m(ne.categoryName),1)]))),256)),h.video.genres.length>0?(t(),s("div",pc,[(t(!0),s(O,null,q(h.video.genres,ne=>(t(),s("span",vc,m(ne.genreName),1))),256))])):D("",!0)])])])]),e("td",null,[e("div",gc,[e("div",bc,[F(y,{to:`${l.urlViewVideo}/${encodeURIComponent(h.video.videoId)}/${o(T)()}`,class:"link-offset-2"},{default:z(()=>[K(m(h.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",yc,m(o(ee).moment.utc(h.video.durationInMillis).format("HH:mm:ss")),1)]),h.video.formats.length>0?(t(!0),s(O,{key:0},q(h.video.formats,ne=>(t(),s("span",$c,m(ne.formatName),1))),256)):D("",!0)])])]),e("td",wc,[B(e("input",{"onUpdate:modelValue":ne=>h.selected=ne,type:"checkbox",class:"form-check-input"},null,8,hc),[[Be,h.selected]])])]))),128))]),_:1},512),[[Se,o(X).items.length>0]])])]),F($,{filter:o(X),search:o(Y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Sc=["id"],Tc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mc={class:"modal-content"},Ic={class:"modal-header"},xc={class:"modal-title"},Cc={class:"modal-body"},Vc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Pc=["innerHTML"],Oc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ac={class:"container"},Uc={class:"col"},Dc={class:"form-floating mb-2"},Hc=["value"],Lc={key:0,class:"d-block invalid-feedback"},Ec={class:"col"},qc={class:"form-floating mb-2"},Bc={key:0,class:"d-block invalid-feedback"},Nc={class:"col"},Rc={class:"form-floating mb-2"},Fc={key:0,class:"d-block invalid-feedback"},zc={class:"modal-footer"},Gc=["disabled"],jc={__name:"_addPackageConfiguration",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),X=S;ue();const J=ue("modalAddChannelOutput"),r=ge({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),f={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("VOD Source is required.",le),$autoDirty:!0,$lazy:!0},path:{required:se.withMessage("Path is required.",le),$autoDirty:!0,$lazy:!0},type:{required:se.withMessage("Type is required.",le),$autoDirty:!0,$lazy:!0}}},Y=Te(f,r);fe(async()=>{Y.value.$reset()});const u=async()=>{await I()},I=async()=>{try{await E.get("/api/v1/sourceGroups/lookup/").then(n=>{r.lookups.sourceGroups=n.data,r.lookups.sourceGroups.length===1&&(r.item.sourceGroupId=r.lookups.sourceGroups[0].id)})}catch(i){G.value=A.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}},b=async i=>{const n=r;Q.value.clear(),G.value="",n.lookups={sourceGroups:[]},n.item={sourceGroupId:null,vodSourceId:i,path:null,type:null},await u(),Y.value.$reset();var a=document.getElementById(J.value),c=he.getOrCreateInstance(a);c.show()},_=async()=>{var i=document.getElementById(J.value),n=he.getOrCreateInstance(i);n.hide(),X("refresh")},g=async()=>{const i=r;if(H.value)return;const n=await Y.value.$validate();debugger;if(!n){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const a=i.item;await E.post("/api/v1/vodSources/package-configurations/",a).then(c=>{C.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await _()}catch(a){G.value=A.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:b,close:_}),(i,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Tc,[e("div",Mc,[e("div",Ic,[e("h5",xc,[n[5]||(n[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=a=>_()),"aria-label":"Close"})]),e("div",Cc,[o(G)?(t(),s("div",Vc,[n[6]||(n[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Pc)])):D("",!0),o(Q).size>0?(t(),s("div",Oc,[n[7]||(n[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),a=>(t(),s("li",null,m(a),1))),256))])])):D("",!0),e("div",Ac,[e("div",Uc,[e("div",Dc,[B(e("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>r.item.sourceGroupId=a),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(r.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},m(a.name),9,Hc))),256))],512),[[ve,r.item.sourceGroupId]]),n[8]||(n[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(Y).item.sourceGroupId.$error?(t(),s("div",Lc,[(t(!0),s(O,null,q(o(Y).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):D("",!0)])]),e("div",Ec,[e("div",qc,[B(e("select",{"onUpdate:modelValue":n[2]||(n[2]=a=>r.item.type=a),class:"form-select",id:"type"},n[9]||(n[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ve,r.item.type]]),n[10]||(n[10]=e("label",{for:"type",class:""},"Type",-1)),o(Y).item.type.$error?(t(),s("div",Bc,[(t(!0),s(O,null,q(o(Y).item.type.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):D("",!0)])]),e("div",Nc,[e("div",Rc,[B(e("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>r.item.path=a),class:"form-control",id:"path"},null,512),[[Z,r.item.path]]),n[11]||(n[11]=e("label",{for:"path",class:""},"Path",-1)),o(Y).item.path.$error?(t(),s("div",Fc,[(t(!0),s(O,null,q(o(Y).item.path.$errors,a=>(t(),s("div",{key:a.$uid},m(a.$message),1))),128))])):D("",!0)])])])]),e("div",zc,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:n[4]||(n[4]=a=>g()),class:"btn btn-primary",type:"button"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gc),n[13]||(n[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Sc))}},Yc=["id"],Wc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Kc={class:"modal-content"},Qc={class:"modal-header"},Jc={class:"modal-title"},Xc={class:"modal-body"},Zc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},em=["innerHTML"],tm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},sm={class:"container"},om={class:"col"},am={class:"form-floating mb-2"},lm={class:"col"},nm={class:"form-floating mb-2"},rm={key:0,class:"d-block invalid-feedback"},im={class:"col"},dm={class:"form-floating mb-2"},um={key:0,class:"d-block invalid-feedback"},cm={class:"col"},mm={class:"form-floating mb-2"},fm={key:0,class:"d-block invalid-feedback"},pm={class:"modal-footer"},vm=["disabled"],gm={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),X=S,J=ue(),r=ue("modalAddPlaybackConfiguration"),f=ge({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",le),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(Y,f);fe(async()=>{u.value.$reset()});const I=async(g,i)=>{J.value=g;const n=f;Q.value.clear(),G.value="";const a=i,c=a.lastIndexOf("/"),v=a.substring(0,c),w="ad_campaign_"+a.substring(c+1).replace(".","_");n.item={name:w,originalVideoContentSourceUrl:i,videoContentSourceUrl:v,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},u.value.$reset();var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.show()},b=async()=>{var g=document.getElementById(r.value),i=he.getOrCreateInstance(g);i.hide(),X("refresh")},_=async()=>{const g=f;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const n=g.item;n.vodSourceId=J.value,await E.post("/api/v1/playbackconfigurations/vodsource",n).then(a=>{C.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await b()}catch(n){G.value=A.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:I,close:b}),(g,i)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Wc,[e("div",Kc,[e("div",Qc,[e("h5",Jc,[i[6]||(i[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=n=>b()),"aria-label":"Close"})]),e("div",Xc,[o(G)?(t(),s("div",Zc,[i[7]||(i[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,em)])):D("",!0),o(Q).size>0?(t(),s("div",tm,[i[8]||(i[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),n=>(t(),s("li",null,m(n),1))),256))])])):D("",!0),e("div",sm,[e("div",om,[e("div",am,[B(e("input",{"onUpdate:modelValue":i[1]||(i[1]=n=>f.item.originalVideoContentSourceUrl=n),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Z,f.item.originalVideoContentSourceUrl]]),i[9]||(i[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",lm,[e("div",nm,[B(e("input",{"onUpdate:modelValue":i[2]||(i[2]=n=>f.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,f.item.name]]),i[10]||(i[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",rm,[(t(!0),s(O,null,q(o(u).item.name.$errors,n=>(t(),s("div",{key:n.$uid},m(n.$message),1))),128))])):D("",!0)])]),e("div",im,[e("div",dm,[B(e("input",{"onUpdate:modelValue":i[3]||(i[3]=n=>f.item.videoContentSourceUrl=n),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,f.item.videoContentSourceUrl]]),i[11]||(i[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),i[12]||(i[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(u).item.videoContentSourceUrl.$error?(t(),s("div",um,[(t(!0),s(O,null,q(o(u).item.videoContentSourceUrl.$errors,n=>(t(),s("div",{key:n.$uid},m(n.$message),1))),128))])):D("",!0)])]),e("div",cm,[e("div",mm,[B(e("textarea",{"onUpdate:modelValue":i[4]||(i[4]=n=>f.item.adDecisionServerUrl=n),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,f.item.adDecisionServerUrl]]),i[13]||(i[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(u).item.adDecisionServerUrl.$error?(t(),s("div",fm,[(t(!0),s(O,null,q(o(u).item.adDecisionServerUrl.$errors,n=>(t(),s("div",{key:n.$uid},m(n.$message),1))),128))])):D("",!0)])])])]),e("div",pm,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:i[5]||(i[5]=n=>_()),class:"btn btn-primary",type:"button"},i[14]||(i[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vm),i[15]||(i[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Yc))}},bm={key:0},ym={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},$m={class:"nav-item",role:"presentation"},wm={class:"nav-item",role:"presentation"},hm={class:"nav-item",role:"presentation"},_m={class:"nav-item",role:"presentation"},km={class:"nav-item",role:"presentation"},Sm={class:"tab-content",id:"myTabContent"},Tm={class:"mt-2"},Mm={class:"row row-cols-1 row-cols-sm-2"},Im={class:"col"},xm=["id"],Cm={class:"col"},Vm={class:"col"},Pm={class:"form-floating mb-2"},Om={class:"mt-2"},Am={class:"row row-cols-sm-2"},Um={class:"col"},Dm={class:"form-floating mb-2"},Hm={class:"form-control-plaintext"},Lm={class:"col"},Em={class:"form-floating mb-2"},qm={class:"mt-1"},Bm={class:"badge bg-info me-1"},Nm={class:"badge bg-primary me-1"},Rm={class:"badge bg-info me-1"},Fm={class:"table-responsive border mt-1"},zm={class:"table table-hover mb-0"},Gm={class:"table-group-divider"},jm={class:"align-middle"},Ym={class:"text-center"},Wm={class:"text-truncate text-wrap"},Km={class:"text-truncate text-wrap"},Qm={class:"mt-2"},Jm={class:"mt-2 text-end"},Xm={class:"table-responsive border mt-2"},Zm={class:"table table-hover mb-0 caption-top"},ef={class:"text-end"},tf=["onClick"],sf={class:"mt-2"},of={class:"mt-1"},af=["id"],lf={class:"text-end"},nf={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:Q,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:E,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:d,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});xe("$config");const J=we();J.user;const r=ge({user:J.user,item:null,hls:null}),f=ue();ue(null);const Y=ue();fe(async()=>{await _();const w=E.getPageTab("vodSource")||"information-tab";u(w)}),Ae(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const u=w=>{E.setPageTab("vodSource",w),f.value=w},I=w=>w!==f.value?"":"active",b=w=>w!==f.value?"":"show active",_=async()=>{const w=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const y=`/api/v1/vodsources/${p.id}/`;await ee.get(y).then(M=>{w.item=M.data;const $=w.item,N=E.moment.utc(w.item.video.durationInMillis).format("HH:mm:ss");$.video.duration=N}),v()}catch(y){U.value=E.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{k.value=!1}},g=async()=>{await _()},i=()=>{Y.value.open(p.id)},n=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!k.value){U.value=null;try{k.value=!0;const y={vodSourceIds:[p.id]};await ee.post("/api/v1/vodsources/publish/",y).then(M=>{A.success("Publish VOD","VOD was published.",{async onClose(){}})}),k.value=!1,await g()}catch(y){U.value=E.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{k.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!k.value){U.value=null;try{k.value=!0;const y={vodSourceIds:[p.id]};await ee.post("/api/v1/vodsources/unpublish/",y).then(M=>{A.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),k.value=!1,await g()}catch(y){U.value=E.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{k.value=!1}}},c=async w=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/vodSources/package-configurations/${w}/`).then(M=>{A.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),k.value=!1,await g()}catch(M){U.value=E.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{k.value=!1}}},v=()=>{if(Hls.isSupported()){r.hls&&(r.hls.stopLoad(),r.hls.destroy());const w=`video-${r.item.vodSourceId}`,y=document.getElementById(w),M=r.item.video.formats.find(N=>N.formatName==="HLS"),$=`${M.serverUrl}${M.path}`;r.hls=E.createHlsStream(y,$)}};return(w,y)=>{const M=te("router-link"),$=te("PageHeader"),N=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(P)},{default:z(()=>[r.item?(t(),s(O,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:y[0]||(y[0]=h=>a()),class:"ms-1 btn btn-warning"},y[14]||(y[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:y[1]||(y[1]=h=>n()),class:"ms-1 btn btn-primary"},y[15]||(y[15]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):D("",!0),F(M,{to:`${l.urlEdit}/${l.id}`,class:"ms-2 btn btn-primary"},{default:z(()=>y[16]||(y[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:y[2]||(y[2]=h=>g()),class:"ms-2 btn btn-secondary"},y[17]||(y[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:y[3]||(y[3]=h=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},y[18]||(y[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(N,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",bm,[e("div",null,[e("ul",ym,[e("li",$m,[e("button",{onClick:y[4]||(y[4]=h=>u("information-tab")),class:re([I("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",wm,[e("button",{onClick:y[5]||(y[5]=h=>u("packageConfigurations-tab")),class:re([I("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",hm,[e("button",{onClick:y[6]||(y[6]=h=>u("channels-tab")),class:re([I("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},y[19]||(y[19]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),K("Channels ")]),2)]),e("li",_m,[e("button",{onClick:y[7]||(y[7]=h=>u("programs-tab")),class:re([I("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},y[20]||(y[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),K("Programs ")]),2)]),e("li",km,[e("button",{onClick:y[8]||(y[8]=h=>u("programTemplates-tab")),class:re([I("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),K("Program Templates ")]),2)])]),e("div",Sm,[e("div",{class:re([b("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Tm,[e("div",Mm,[e("div",Im,[e("video",{id:`video-${r.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,xm)]),e("div",Cm,[e("div",Vm,[e("div",Pm,[B(e("input",{"onUpdate:modelValue":y[9]||(y[9]=h=>r.item.name=h),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),y[22]||(y[22]=e("label",{for:"name"},"Name",-1))])]),e("div",Om,[y[26]||(y[26]=e("b",null," Video Information ",-1)),e("div",null,[e("div",Am,[e("div",Um,[e("div",Dm,[e("div",Hm,[F(M,{to:`${l.urlViewVideo}/${r.item.video.videoId}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(r.item.video.title),1)]),_:1},8,["to"])]),y[23]||(y[23]=e("label",{for:"title"},"Title",-1))])]),e("div",Lm,[e("div",Em,[B(e("input",{"onUpdate:modelValue":y[10]||(y[10]=h=>r.item.video.duration=h),type:"text",class:"form-control-plaintext",id:"duration",readonly:""},null,512),[[Z,r.item.video.duration]]),y[24]||(y[24]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",qm,[(t(!0),s(O,null,q(r.item.video.genres,h=>(t(),s("span",Bm,m(h.genreName),1))),256)),(t(!0),s(O,null,q(r.item.video.categories,h=>(t(),s("span",Nm,m(h.categoryName),1))),256)),(t(!0),s(O,null,q(r.item.video.categories,h=>(t(),s("span",Rm,m(h.categoryName),1))),256))]),e("div",Fm,[e("table",zm,[y[25]||(y[25]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Gm,[(t(!0),s(O,null,q(r.item.video.formats,(h,x)=>(t(),s("tr",jm,[e("td",Ym,m(x+1),1),e("td",null,m(h.formatName),1),e("td",null,[e("div",Wm,m(h.serverUrl),1)]),e("td",null,[e("div",Km,m(h.path),1)])]))),256))])])])])])])])])],2),e("div",{class:re([b("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Qm,[e("div",Jm,[e("button",{onClick:y[11]||(y[11]=h=>i()),class:"btn btn-primary"},y[27]||(y[27]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),K("Add ")]))]),e("div",Xm,[e("table",Zm,[y[29]||(y[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.packageConfigurations,(h,x)=>(t(),s("tr",{key:h.packageConfigurationId,class:"align-middle"},[e("td",null,m(x+1),1),e("td",null,m(h.path),1),e("td",null,m(h.sourceGroup.name),1),e("td",null,m(h.type),1),e("td",ef,[e("button",{onClick:ne=>c(h.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,tf)])]))),128))]),_:1},512),[[Se,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:re([b("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",sf,[e("div",of,[e("video",{id:`video-${r.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,af),e("div",lf,[e("button",{onClick:y[12]||(y[12]=h=>r.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},y[30]||(y[30]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:re([b("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},y[31]||(y[31]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:re([b("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},y[32]||(y[32]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:re([b("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},y[33]||(y[33]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):D("",!0)]),_:1},8,["errorMessage"]),F(jc,{ref_key:"modalAddPackageConfiguration",ref:Y,onRefresh:g},null,512),F(gm,{ref:"modalAddPlaybackConfiguration",onRefresh:y[13]||(y[13]=h=>g())},null,512)])]),_:1})}}},rf=["id"],df={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},uf={class:"modal-content"},cf={class:"modal-header"},mf={class:"modal-title"},ff={class:"modal-body p-1"},pf={class:"row row-cols-1 row-cols-sm-3"},vf={class:"col"},gf={class:"form-floating mb-2"},bf=["value"],yf={class:"col"},$f={class:"form-floating mb-2"},wf=["value"],hf={class:"col"},_f={class:"input-group mb-2"},kf={class:"form-floating"},Sf={class:"row row-cols-1 row-cols-sm-2 g-2"},Tf={class:"col-sm-4"},Mf={class:"card"},If={key:0,class:"mt-2"},xf={class:"col"},Cf={class:"form-floating mb-2"},Vf={class:"col ms-2 my-2"},Pf={class:"badge bg-info me-1"},Of={class:"badge bg-primary me-1"},Af={class:"row row-cols-1 row-cols-sm-2"},Uf={class:"col"},Df={class:"form-floating mb-2"},Hf={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Lf={class:"col"},Ef={class:"form-floating mb-2"},qf={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Bf={class:"col"},Nf={class:"form-floating mb-2"},Rf={class:"col-sm-8"},Ff={class:"table-responsive border shadow-sm"},zf={class:"table table-sm table-hover mb-0 overflow-auto"},Gf=["textContent"],jf={class:"d-flex flex-row justify-content-start"},Yf={class:"mt-1"},Wf=["src"],Kf={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Qf={class:"ms-2"},Jf=["onClick"],Xf={class:"modal-footer"},Zf="/api/v1/vodSources/search",ct={__name:"_selectVodSource",emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,security:T,filter:d,initializeFilter:X,getQuery:J,saveQuery:r,search:f,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select VOD Source",cacheKey:`${k==null?void 0:k.userId}/vodsources/select`,baseUrl:Zf,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(M,$)=>{const N=M.value,h=new URLSearchParams(window.location.search),x=JSON.parse(localStorage.getItem($))||{};N.query.genre=h.get("genre")||x.genre||N.query.genre||0,N.query.category=h.get("category")||x.category||N.query.category||0},getQuery:M=>["?c=",encodeURIComponent(M.query.criteria),"&p=",M.pageIndex,"&s=",M.pageSize,"&sf=",M.sortField,"&so=",M.sortOrder,"&genre=",M.query.genreId,"&category=",M.query.categoryId,"&sourceLocationId=",M.query.sourceLocationId].join(""),saveQuery:(M,$)=>{localStorage.setItem($,JSON.stringify({criteria:M.query.criteria,pageIndex:M.pageIndex,pageSize:M.pageSize,sortField:M.sortField,sortOrder:M.sortOrder,visible:M.visible,genre:M.query.genre,category:M.query.category}))}}),b=S,_=ue("modalSelectVodSource"),g=ge({vodSource:null,hls:null});fe(async()=>{X(),await i()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const i=async()=>{await c(),await v()},n=async M=>{d.value.query.sourceLocationId=M,G.value="",await f();var $=document.getElementById(_.value),N=he.getOrCreateInstance($);N.show()},a=async()=>{var M=document.getElementById(_.value),$=he.getOrCreateInstance(M);$.hide(),g.hls&&(g.hls.stopLoad(),g.hls.destroy()),b("close",g.vodSource)},c=async M=>{try{const N=await E.get("/api/v1/lookups/video-categories/").then(h=>h.data);d.value.lookups.categories=N}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},v=async M=>{try{const N=await E.get("/api/v1/lookups/video-genres/").then(h=>h.data);d.value.lookups.genres=N}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},w=M=>{g.vodSource=M,y()},y=()=>{if(Hls.isSupported()){g.hls&&(g.hls.stopLoad(),g.hls.destroy());var M=document.getElementById("video-select-preview");const N=g.vodSource.video.formats.find(x=>x.formatName==="HLS"),h=N.serverUrl+N.path;g.hls=A.createHlsStream(M,h)}};return p({open:n,close:a}),(M,$)=>{const N=te("m-pagination"),h=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",df,[e("div",uf,[e("div",cf,[e("h5",mf,[$[10]||($[10]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(V)),1)]),e("button",{type:"button",class:"btn-close",onClick:$[0]||($[0]=x=>a()),"aria-label":"Close"})]),e("div",ff,[F(h,{errorMessage:o(G)},{default:z(()=>[e("div",pf,[e("div",vf,[e("div",gf,[B(e("select",{"onUpdate:modelValue":$[1]||($[1]=x=>o(d).query.categoryId=x),class:"form-select",id:"category"},[(t(!0),s(O,null,q(o(d).lookups.categories,x=>(t(),s("option",{value:x.id},m(x.name),9,bf))),256))],512),[[ve,o(d).query.categoryId]]),$[11]||($[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",yf,[e("div",$f,[B(e("select",{"onUpdate:modelValue":$[2]||($[2]=x=>o(d).query.genreId=x),class:"form-select",id:"genre"},[(t(!0),s(O,null,q(o(d).lookups.genres,x=>(t(),s("option",{value:x.id},m(x.name),9,wf))),256))],512),[[ve,o(d).query.genreId]]),$[12]||($[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",hf,[e("div",_f,[e("div",kf,[B(e("input",{"onUpdate:modelValue":$[3]||($[3]=x=>o(d).query.criteria=x),onKeyup:$[4]||($[4]=Ue(x=>o(f)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(d).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[5]||($[5]=x=>o(f)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Sf,[e("div",Tf,[e("div",Mf,[$[19]||($[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.vodSource?(t(),s("div",If,[e("div",xf,[e("div",Cf,[B(e("input",{"onUpdate:modelValue":$[6]||($[6]=x=>g.vodSource.video.title=x),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.vodSource.video.title]]),$[15]||($[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Vf,[e("div",null,[(t(!0),s(O,null,q(g.vodSource.video.genres,x=>(t(),s("span",Pf,m(x.genreName),1))),256)),(t(!0),s(O,null,q(g.vodSource.video.categories,x=>(t(),s("span",Of,m(x.categoryName),1))),256))])]),e("div",Af,[e("div",Uf,[e("div",Df,[e("div",Hf,m(o(A).moment(g.vodSource.video.dateReleased).calendar()),1),$[16]||($[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Lf,[e("div",Ef,[e("div",qf,m(o(A).moment.utc(g.vodSource.video.durationInMillis).format("HH:mm:ss")),1),$[17]||($[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Bf,[e("div",Nf,[B(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=x=>g.vodSource.video.description=x),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.vodSource.video.description]]),$[18]||($[18]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])]),e("div",Rf,[e("div",Ff,[e("table",zf,[$[20]||($[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(d).items,(x,ne)=>(t(),s("tr",{key:x.videoId},[e("td",{textContent:m(o(Y)(ne)),class:"text-center"},null,8,Gf),e("td",null,[e("div",jf,[e("div",null,[x.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(x.video.thumbnails,ie=>(t(),s("div",Yf,[e("img",{src:ie.url,class:"img-fuild border",width:"128"},null,8,Wf)]))),256)):(t(),s("img",Kf))]),e("div",Qf,[e("a",{onClick:ie=>w(x),class:"text-wrap link-offset-2",role:"button"},m(x.name),9,Jf)])])])]))),128))]),_:1},512),[[Se,o(d).items.length>0]])])]),F(N,{filter:o(d),search:o(f),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",Xf,[e("button",{onClick:$[8]||($[8]=x=>a()),class:"btn btn-primary",type:"button"},$[21]||($[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[9]||($[9]=x=>a()),class:"btn btn-secondary ms-1"},$[22]||($[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,rf)}}},ep=["disabled"],tp={class:"container1"},sp={class:"row"},op={class:"col-12 col-lg-6"},ap={class:"col"},lp={class:"form-floating mb-2"},np=["value"],rp={key:0,class:"d-block invalid-feedback"},ip={class:"col"},dp={class:"input-group mb-2"},up={class:"form-floating"},cp={id:"selectedVodSource",class:"form-control",placeholder:"Title"},mp={class:"col-12 col-lg-6"},fp={class:"col"},pp={class:"form-floating mb-2"},vp={key:0,class:"d-block invalid-feedback"},gp={class:"row row-cols-1 row-cols-sm-3 mt-2"},bp={class:"col"},yp={class:"form-floating mb-2"},$p={key:0},wp={key:1},hp={key:2},_p={key:3,class:"d-block invalid-feedback"},kp={class:"col"},Sp={class:"form-floating mb-2"},Tp={key:0},Mp={key:1},Ip={key:2,class:"d-block invalid-feedback"},xp={class:"col"},Cp={class:"form-floating mb-2"},Vp={key:0,class:"mt-3"},Pp={class:"table-responsive border mt-1"},Op={class:"table table-borderless table-sm mb-0 align-middle"},Ap={class:"text-center"},Up=["onUpdate:modelValue","onChange"],Dp={key:0},Hp=["onUpdate:modelValue","onChange"],Lp={class:"text-start"},Ep=["onClick"],qp={class:"col mt-2"},Bp={class:"row row-cols-1 row-cols-sm-2"},Np={class:"col"},Rp={class:"form-floating mb-2"},Fp={class:"col"},zp={class:"form-floating mb-2"},Gp={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),A=l,C=ue(),T=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),d={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0}}},X=Te(d,T),J=Ie(()=>{const h=U.moment;if(T.startOffsetTime&&T.startOffsetTime!=="00:00:00"&&U.isValidTime(T.startOffsetTime)){const x=h().startOf("day"),ne=x.format("YYYY-MM-DD ")+T.startOffsetTime,j=h(ne).subtract(x);return T.item.startOffsetMillis=j.valueOf(),T.item.startOffsetMillis}return 0}),r=Ie(()=>{const h=U.moment;if(T.endOffsetTime&&T.endOffsetTime!=="00:00:00"&&U.isValidTime(T.endOffsetTime)){const x=h().startOf("day"),ne=x.format("YYYY-MM-DD ")+T.endOffsetTime,j=h(ne).subtract(x);return T.item.endOffsetMillis=j.valueOf(),T.item.endOffsetMillis}return 0}),f=Ie(()=>T.item.endOffsetMillis-T.item.startOffsetMillis),Y=Ie(()=>U.moment.utc(f.value).format("HH:mm:ss")),u=Ie(()=>{const h=T.item.adBreaks;return h&&h.length>0?h.reduce((ne,ie,j)=>ne+ie.durationInMillis,0):0}),I=Ie(()=>{const h=f.value+u.value;return U.moment.utc(h).format("HH:mm:ss")}),b=Ie(()=>U.moment.utc(u.value).format("HH:mm:ss"));fe(async()=>{await _()}),Ae(()=>{T.hls&&(T.hls.stopLoad(),T.hls.destroy())});const _=async()=>{await g(),await a()},g=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(x=>{T.lookups.sourceLocations=x.data,T.lookups.sourceLocations.length===1&&(T.item.sourceLocationId=T.lookups.sourceLocations[0].id)}),T.item.sourceLocationId&&await i(T.item.sourceLocationId)}catch(h){V.value=U.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},i=async h=>{try{const x=`/api/v1/vodSources/lookup/source-location/${h}/?category=3`;await W.get(x).then(ne=>{T.lookups.vodSources=ne.data})}catch(x){V.value=U.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},n=async h=>{try{let x=`/api/v1/vodSources/${h}/blank-frames`;const ne=await W.get(x).then(ie=>ie.data);T.item.adBreaks=[],ne&&ne.length>0&&(T.item.adBreaks=ne.map(ie=>{const j=(ie.endInMillis-ie.startInMillis)/2+ie.startInMillis;return{offsetTime:U.moment.utc(j).format("HH:mm:ss"),offsetMillis:j,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(x){V.value=U.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{}},a=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(x=>{T.lookups.adBreakSourceLocations=x.data})}catch(h){V.value=U.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{}},c=()=>{const h={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};T.item.adBreaks.push(h)},v=h=>{T.item.adBreaks.splice(h,1)},w=h=>{const x=U.moment,ne=x().startOf("day"),ie=ne.format("YYYY-MM-DD ")+h.offsetTime,R=x(ie).subtract(ne);h.offsetMillis=R.valueOf()},y=h=>{const x=U.moment,ne=x().startOf("day"),ie=ne.format("YYYY-MM-DD ")+h.durationTime,R=x(ie).subtract(ne);h.durationInMillis=R.valueOf()},M=async()=>{const h=T;if(P.value)return;if(!await X.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const ne=U.clone(h.item),ie=ne.adBreaks.filter(j=>j.durationInMillis>0);ne.adBreaks=ie,await W.post("/api/v1/programtemplates/",ne).then(j=>{G.success("Add Program Template","Program template added.",{onClose:async()=>{const R=`${A.urlView}/${j.data}`;await Q.push(R)}})})}catch(ne){V.value=U.getErrorMessageAsHtml(ne),window.scrollTo(0,0)}finally{P.value=!1}},$=async h=>{h&&(T.selected.vodSource=h,T.item.vodSourceId=h.vodSourceId,T.endOffsetTime=U.moment.utc(h.video.durationInMillis).format("HH:mm:ss"),await n(h.vodSourceId),N())},N=()=>{if(Hls.isSupported()){T.hls&&(T.hls.stopLoad(),T.hls.destroy());var h=document.getElementById("video-add-program-template");const ne=T.selected.vodSource.video.formats.find(j=>j.formatName==="HLS"),ie=ne.serverUrl+ne.path;T.hls=U.createHlsStream(h,ie)}};return(h,x)=>{const ne=te("router-link"),ie=te("PageHeader"),j=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(ie,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(X).$dirty&&o(X).$invalid,onClick:x[0]||(x[0]=R=>M()),class:"btn btn-primary"},x[10]||(x[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ep),F(ne,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>x[11]||(x[11]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(j,{errorMessage:o(V),vuelidate:o(X)},{default:z(()=>[e("div",null,[e("div",tp,[e("div",sp,[e("div",op,[e("div",ap,[e("div",lp,[B(e("select",{"onUpdate:modelValue":x[1]||(x[1]=R=>T.item.sourceLocationId=R),onChange:x[2]||(x[2]=R=>i(T.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(T.lookups.sourceLocations,R=>(t(),s("option",{value:R.id},m(R.name),9,np))),256))],544),[[ve,T.item.sourceLocationId]]),x[12]||(x[12]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(X).item.sourceLocationId.$error?(t(),s("div",rp,[(t(!0),s(O,null,q(o(X).item.sourceLocationId.$errors,R=>(t(),s("div",{key:R.$uid},m(R.$message),1))),128))])):D("",!0)])]),e("div",ip,[e("div",dp,[e("div",up,[e("div",cp,[T.selected.vodSource?(t(),s(O,{key:0},[K(" ["+m(o(U).moment.utc(T.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(T.selected.vodSource.name),1)],64)):D("",!0)]),x[13]||(x[13]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),e("button",{onClick:x[3]||(x[3]=R=>C.value.open(T.sourceLocationId)),class:"btn btn-primary",type:"button"},x[14]||(x[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),x[15]||(x[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",mp,[e("div",fp,[e("div",pp,[B(e("input",{"onUpdate:modelValue":x[4]||(x[4]=R=>T.item.name=R),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,T.item.name]]),x[16]||(x[16]=e("label",{for:"name",class:""},"Name",-1)),o(X).item.name.$error?(t(),s("div",vp,[(t(!0),s(O,null,q(o(X).item.name.$errors,R=>(t(),s("div",{key:R.$uid},m(R.$message),1))),128))])):D("",!0)])]),e("div",gp,[e("div",bp,[e("div",null,[e("div",yp,[B(e("input",{"onUpdate:modelValue":x[5]||(x[5]=R=>T.startOffsetTime=R),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,T.startOffsetTime]]),x[17]||(x[17]=e("label",{for:"startOffsetTime",class:""}," Start OffSet Time ",-1))]),J.value>0&&J.value<3e4?(t(),s("div",$p,x[18]||(x[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):D("",!0),J.value>r.value&&r.value>0?(t(),s("div",wp,x[19]||(x[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):D("",!0),T.selected.vodSource&&J.value>=T.selected.vodSource.durationInMillis?(t(),s("div",hp,x[20]||(x[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(X).item.startOffsetMillis.$error?(t(),s("div",_p,[(t(!0),s(O,null,q(o(X).item.startOffsetMillis.$errors,R=>(t(),s("div",{key:R.$uid},m(R.$message),1))),128))])):D("",!0)])]),e("div",kp,[e("div",null,[e("div",Sp,[B(e("input",{"onUpdate:modelValue":x[6]||(x[6]=R=>T.endOffsetTime=R),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,T.endOffsetTime]]),x[21]||(x[21]=e("label",{for:"endOffsetTime",class:""}," End OffSet Time ",-1))]),r.value>0&&r.value<3e4?(t(),s("div",Tp,x[22]||(x[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):D("",!0),T.selected.vodSource&&r.value>T.selected.vodSource.durationInMillis?(t(),s("div",Mp,x[23]||(x[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(X).item.endOffsetMillis.$error?(t(),s("div",Ip,[(t(!0),s(O,null,q(o(X).item.endOffsetMillis.$errors,R=>(t(),s("div",{key:R.$uid},m(R.$message),1))),128))])):D("",!0)])]),e("div",xp,[e("div",Cp,[B(e("input",{"onUpdate:modelValue":x[7]||(x[7]=R=>Y.value=R),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,Y.value]]),x[24]||(x[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),T.item.vodSourceId?(t(),s("div",Vp,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[x[26]||(x[26]=e("div",{class:"fw-bold small"}," Ad Break ",-1)),e("div",null,[e("button",{onClick:c,class:"btn btn-outline-primary btn-sm"},x[25]||(x[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Pp,[e("table",Op,[x[29]||(x[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(T.item.adBreaks,(R,oe)=>(t(),s("tr",null,[e("td",Ap,m(oe+1),1),e("td",null,[B(e("input",{"onUpdate:modelValue":ce=>R.offsetTime=ce,onChange:ce=>w(R),type:"time",step:"1",class:"form-control"},null,40,Up),[[Z,R.offsetTime]]),R.offsetMillis>=T.selected.vodSource.durationInMillis?(t(),s("div",Dp,x[27]||(x[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0)]),e("td",null,[B(e("input",{"onUpdate:modelValue":ce=>R.durationTime=ce,onChange:ce=>y(R),type:"time",step:"1",class:"form-control"},null,40,Hp),[[Z,R.durationTime]])]),e("td",Lp,[e("button",{onClick:ce=>v(oe),class:"btn btn-outline-warning btn-sm"},x[28]||(x[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ep)])]))),256))])]),x[30]||(x[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),K(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):D("",!0),e("div",qp,[x[33]||(x[33]=e("div",{class:"fw-bold small"}," Duration ",-1)),e("div",Bp,[e("div",Np,[e("div",Rp,[B(e("input",{"onUpdate:modelValue":x[8]||(x[8]=R=>b.value=R),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,b.value]]),x[31]||(x[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Fp,[e("div",zp,[B(e("input",{"onUpdate:modelValue":x[9]||(x[9]=R=>I.value=R),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[Z,I.value]]),x[32]||(x[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"]),F(ct,{ref_key:"modalSelectVodSource",ref:C,onClose:$},null,512)])]),_:1})}}},jp=["disabled"],Yp={class:"container1"},Wp={class:"row"},Kp={class:"col-12 col-lg-6"},Qp={class:"col"},Jp={class:"form-floating mb-2"},Xp=["value"],Zp={key:0,class:"d-block invalid-feedback"},ev={class:"col"},tv={class:"input-group mb-2"},sv={class:"form-floating"},ov={id:"selectedVodSource",class:"form-control",placeholder:"Title"},av={class:"col-12 col-lg-6"},lv={class:"col"},nv={class:"form-floating mb-2"},rv={key:0,class:"d-block invalid-feedback"},iv={class:"row row-cols- row-cols-sm-3"},dv={class:"col"},uv={class:"form-floating mb-2"},cv={key:0},mv={key:1},fv={key:2},pv={key:3,class:"d-block invalid-feedback"},vv={class:"col"},gv={class:"form-floating"},bv={key:0},yv={key:1},$v={key:2,class:"d-block invalid-feedback"},wv={class:"col"},hv={class:"form-floating mb-2"},_v={key:0,class:"mt-2"},kv={class:"table-responsive border mt-1"},Sv={class:"table table-borderless table-sm mb-0 align-middle"},Tv=["onUpdate:modelValue","onChange"],Mv={key:0},Iv=["onUpdate:modelValue","onChange"],xv=["onClick"],Cv={class:"col mt-2"},Vv={class:"row row-cols-1 row-cols-sm-2"},Pv={class:"col"},Ov={class:"form-floating mb-2"},Av={class:"col"},Uv={class:"form-floating mb-2"},Dv={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,closeWithReturnUrl:E,security:A}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),C=l,T=ue(),d=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),X={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),$autoDirty:!0,$lazy:!0}}},J=Te(X,d),r=Ie(()=>{if(d.startOffsetTime&&d.startOffsetTime!=="00:00:00"&&U.isValidTime(d.startOffsetTime)){const j=U.moment,R=j().startOf("day"),ce=j(d.startOffsetTime,"hh:mm:ss").diff(R);return d.item.startOffsetMillis=ce.valueOf(),d.item.startOffsetMillis}return 0}),f=Ie(()=>{if(d.endOffsetTime&&d.endOffsetTime!=="00:00:00"&&U.isValidTime(d.endOffsetTime)){const j=U.moment,R=j().startOf("day"),ce=j(d.endOffsetTime,"hh:mm:ss").diff(R);return d.item.endOffsetMillis=ce.valueOf(),d.item.endOffsetMillis}return 0}),Y=Ie(()=>d.item.endOffsetMillis-d.item.startOffsetMillis),u=Ie(()=>U.moment.utc(Y.value).format("HH:mm:ss")),I=Ie(()=>{const j=d.item.adBreaks;return j&&j.length>0?j.reduce((oe,ce,ae)=>oe+ce.durationInMillis,0):0}),b=Ie(()=>{const j=Y.value+I.value;return U.moment.utc(j).format("HH:mm:ss")}),_=Ie(()=>U.moment.utc(I.value).format("HH:mm:ss"));fe(async()=>{await g()});const g=async()=>{await i(),await n(),await a()},i=async()=>{try{const j=`/api/v1/programtemplates/${C.id}/`;await W.get(j).then(R=>{d.item=R.data}),d.startOffsetTime=U.moment.utc(d.item.startOffsetMillis).format("HH:mm:ss"),d.endOffsetTime=U.moment.utc(d.item.endOffsetMillis).format("HH:mm:ss"),d.item.adBreaks.forEach(R=>{R.offsetTime=U.moment.utc(R.offsetMillis).format("HH:mm:ss"),R.durationTime=U.moment.utc(R.durationInMillis).format("HH:mm:ss")})}catch(j){V.value=U.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},n=async()=>{try{const j=`/api/v1/vodSources/${d.item.vodSourceId}/`;await W.get(j).then(R=>{d.selected.vodSource=R.data}),ne()}catch(j){V.value=U.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},a=async()=>{await c()},c=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(R=>{d.lookups.sourceLocations=R.data}),d.item.sourceLocationId&&await v(d.item.sourceLocationId)}catch(j){V.value=U.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},v=async j=>{try{const R=`/api/v1/vodSources/lookup/source-location/${j}/?type=3`;await W.get(R).then(oe=>{d.lookups.vodSources=oe.data})}catch(R){V.value=U.getErrorMessageAsHtml(R),window.scrollTo(0,0)}finally{}},w=async()=>{const j=d.selected.vodSource;j&&(d.startOffsetTime=U.moment.utc(0).format("HH:mm:ss"),d.endOffsetTime=U.moment.utc(j.video.durationInMillis).format("HH:mm:ss"),d.item.vodSourceId=j.vodSourceId)},y=()=>{const j={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};d.item.adBreaks.push(j)},M=j=>{d.item.adBreaks.splice(j,1)},$=j=>{const R=U.moment,oe=R().startOf("day"),ce=oe.format("YYYY-MM-DD ")+j.offsetTime,Ce=R(ce).subtract(oe);j.offsetMillis=Ce.valueOf()},N=j=>{const R=U.moment,oe=R().startOf("day"),ce=oe.format("YYYY-MM-DD ")+j.durationTime,Ce=R(ce).subtract(oe);j.durationInMillis=Ce.valueOf()},h=async()=>{const j=d;if(P.value)return;if(!await J.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const oe=U.clone(j.item);debugger;oe.startOffsetMillis=r.value,oe.endOffsetMillis=f.value,await W.put("/api/v1/programtemplates/",oe).then(ce=>{G.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ae=`${C.urlView}/${C.id}`;await Q.push(ae)}})})}catch(oe){V.value=U.getErrorMessageAsHtml(oe),window.scrollTo(0,0)}finally{P.value=!1}},x=async j=>{if(j){d.selected.vodSource=j,d.item.vodSourceId=j.vodSourceId,w();debugger;await ie(j.vodSourceId),ne()}},ne=()=>{if(Hls.isSupported()){d.hls&&(d.hls.stopLoad(),d.hls.destroy());var j=document.getElementById("video-edit-program-template");const oe=d.selected.vodSource.video.formats.find(ae=>ae.formatName==="HLS"),ce=oe.serverUrl+oe.path;d.hls=U.createHlsStream(j,ce)}},ie=async j=>{try{let R=`/api/v1/vodSources/${j}/blank-frames`;const oe=await W.get(R).then(ce=>ce.data);d.item.adBreaks=[],oe&&oe.length>0&&(d.item.adBreaks=oe.map(ce=>{const ae=(ce.endInMillis-ce.startInMillis)/2+ce.startInMillis;return{offsetTime:U.moment.utc(ae).format("HH:mm:ss"),offsetMillis:ae,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(R){V.value=U.getErrorMessageAsHtml(R),window.scrollTo(0,0)}finally{}};return(j,R)=>{const oe=te("PageHeader"),ce=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(oe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(J).$dirty&&o(J).$invalid,onClick:R[0]||(R[0]=ae=>h()),class:"btn btn-primary"},R[12]||(R[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,jp),e("button",{onClick:R[1]||(R[1]=ae=>g()),class:"btn btn-secondary ms-2"},R[13]||(R[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:R[2]||(R[2]=ae=>o(E)(C.urlMain)),class:"btn btn-secondary ms-1"},R[14]||(R[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(ce,{errorMessage:o(V),vuelidate:o(J)},{default:z(()=>[e("div",null,[e("div",Yp,[e("div",Wp,[e("div",Kp,[e("div",Qp,[e("div",Jp,[B(e("select",{"onUpdate:modelValue":R[3]||(R[3]=ae=>d.item.sourceLocationId=ae),onChange:R[4]||(R[4]=ae=>v(d.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(d.lookups.sourceLocations,ae=>(t(),s("option",{value:ae.id},m(ae.name),9,Xp))),256))],544),[[ve,d.item.sourceLocationId]]),R[15]||(R[15]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(J).item.sourceLocationId.$error?(t(),s("div",Zp,[(t(!0),s(O,null,q(o(J).item.sourceLocationId.$errors,ae=>(t(),s("div",{key:ae.$uid},m(ae.$message),1))),128))])):D("",!0)])]),e("div",ev,[e("div",tv,[e("div",sv,[e("div",ov,[d.selected.vodSource?(t(),s(O,{key:0},[K(" ["+m(o(U).moment.utc(d.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+m(d.selected.vodSource.name),1)],64)):D("",!0)]),R[16]||(R[16]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),e("button",{onClick:R[5]||(R[5]=ae=>T.value.open(d.sourceLocationId)),class:"btn btn-primary",type:"button"},R[17]||(R[17]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),R[18]||(R[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",av,[e("div",lv,[e("div",nv,[B(e("input",{"onUpdate:modelValue":R[6]||(R[6]=ae=>d.item.name=ae),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,d.item.name]]),R[19]||(R[19]=e("label",{for:"name",class:""},"Name",-1)),o(J).item.name.$error?(t(),s("div",rv,[(t(!0),s(O,null,q(o(J).item.name.$errors,ae=>(t(),s("div",{key:ae.$uid},m(ae.$message),1))),128))])):D("",!0)])]),e("div",iv,[e("div",dv,[e("div",uv,[B(e("input",{"onUpdate:modelValue":R[7]||(R[7]=ae=>d.startOffsetTime=ae),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,d.startOffsetTime]]),R[20]||(R[20]=e("label",{for:"startOffsetTime",class:""},"Start OffSet Time",-1))]),r.value>0&&r.value<3e4?(t(),s("div",cv,R[21]||(R[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):D("",!0),r.value>f.value&&f.value>0?(t(),s("div",mv,R[22]||(R[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):D("",!0),d.selected.vodSource&&r.value>=d.selected.vodSource.durationInMillis?(t(),s("div",fv,R[23]||(R[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(J).item.startOffsetMillis.$error?(t(),s("div",pv,[(t(!0),s(O,null,q(o(J).item.startOffsetMillis.$errors,ae=>(t(),s("div",{key:ae.$uid},m(ae.$message),1))),128))])):D("",!0)]),e("div",vv,[e("div",gv,[B(e("input",{"onUpdate:modelValue":R[8]||(R[8]=ae=>d.endOffsetTime=ae),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,d.endOffsetTime]]),R[24]||(R[24]=e("label",{for:"endOffsetTime",class:""},"End OffSet Time",-1))]),f.value>0&&f.value<3e4?(t(),s("div",bv,R[25]||(R[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):D("",!0),d.selected.vodSource&&f.value>d.selected.vodSource.durationInMillis?(t(),s("div",yv,R[26]||(R[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0),o(J).item.endOffsetMillis.$error?(t(),s("div",$v,[(t(!0),s(O,null,q(o(J).item.endOffsetMillis.$errors,ae=>(t(),s("div",{key:ae.$uid},m(ae.$message),1))),128))])):D("",!0)]),e("div",wv,[e("div",hv,[B(e("input",{"onUpdate:modelValue":R[9]||(R[9]=ae=>u.value=ae),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,u.value]]),R[27]||(R[27]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),d.selected.vodSource?(t(),s("div",_v,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[R[29]||(R[29]=e("b",null," Ad Break ",-1)),e("div",null,[e("button",{onClick:y,class:"btn btn-outline-primary btn-sm"},R[28]||(R[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",kv,[e("table",Sv,[R[32]||(R[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(d.item.adBreaks,(ae,Ce)=>(t(),s("tr",null,[e("td",null,m(Ce+1),1),e("td",null,[B(e("input",{"onUpdate:modelValue":_e=>ae.offsetTime=_e,onChange:_e=>$(ae),type:"time",step:"1",class:"form-control"},null,40,Tv),[[Z,ae.offsetTime]]),ae.offsetMillis>=d.selected.vodSource.durationInMillis?(t(),s("div",Mv,R[30]||(R[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):D("",!0)]),e("td",null,[B(e("input",{"onUpdate:modelValue":_e=>ae.durationTime=_e,onChange:_e=>N(ae),type:"time",step:"1",class:"form-control"},null,40,Iv),[[Z,ae.durationTime]])]),e("td",null,[e("button",{onClick:_e=>M(Ce),class:"btn btn-outline-warning btn-sm"},R[31]||(R[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,xv)])]))),256))])]),R[33]||(R[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),K(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):D("",!0),e("div",Cv,[R[36]||(R[36]=e("b",null," Duration ",-1)),e("div",Vv,[e("div",Pv,[e("div",Ov,[B(e("input",{"onUpdate:modelValue":R[10]||(R[10]=ae=>_.value=ae),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,_.value]]),R[34]||(R[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Av,[e("div",Uv,[B(e("input",{"onUpdate:modelValue":R[11]||(R[11]=ae=>b.value=ae),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[Z,b.value]]),R[35]||(R[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"]),F(ct,{ref_key:"modalSelectVodSource",ref:T,onClose:x},null,512)])]),_:1})}}},Hv={class:"ms-1"},Lv={class:"input-group"},Ev={class:"table-responsive border shadow-sm"},qv={class:"table table-hover mb-0"},Bv=["textContent"],Nv={class:"d-flex flex-row"},Rv={class:""},Fv={class:"mb-1"},zv=["src"],Gv={class:"ms-2"},jv={key:0,class:"fas fa-fw fa-check-circle text-success"},Yv={class:"text-wrap text-truncate",style:{width:"20px !important"}},Wv={class:"badge bg-primary me-1"},Kv={key:0},Qv={class:"badge bg-info me-1"},Jv={class:"text-end me-0 me-sm-5"},Xv={class:"text-center"},Zv={class:"mt-1"},eg="/api/v1/programTemplates/search",tg={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,generateReturnUrl:C,security:T,filter:d,initializeFilter:X,getQuery:J,saveQuery:r,search:f,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${S==null?void 0:S.userId}/program-templates/search`,baseUrl:eg,filter:{updateUrl:!0}});return fe(async()=>{X(),await f()}),(b,_)=>{const g=te("router-link"),i=te("PageHeader"),n=te("m-pagination"),a=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(i,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:z(()=>[F(g,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Hv,[e("div",Lv,[B(e("input",{"onUpdate:modelValue":_[0]||(_[0]=c=>o(d).query.criteria=c),onKeyup:_[1]||(_[1]=Ue(c=>o(f)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(d).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[2]||(_[2]=c=>o(f)(1))},_[4]||(_[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(a,{errorMessage:o(W)},{default:z(()=>[e("div",Ev,[e("table",qv,[_[5]||(_[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th",null,"Source")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(d).items,(c,v)=>(t(),s("tr",{key:c.programTemplateId},[e("td",{textContent:m(o(Y)(v)),class:"text-center"},null,8,Bv),e("td",null,[e("div",Nv,[e("div",Rv,[c.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(c.vodSource.video.thumbnails,w=>(t(),s("div",Fv,[e("img",{src:w.url,class:"img-fuild border",width:"128"},null,8,zv)]))),256)):D("",!0)]),e("div",Gv,[F(g,{to:`${l.urlView}/${c.programTemplateId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[c.arn?(t(),s("span",jv)):D("",!0),e("span",Yv,m(c.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,q(c.vodSource.video.categories,w=>(t(),s("div",null,[e("span",Wv,m(w.categoryName),1)]))),256)),c.vodSource.video.genres.length>0?(t(),s("div",Kv,[(t(!0),s(O,null,q(c.vodSource.video.genres,w=>(t(),s("span",Qv,m(w.genreName),1))),256))])):D("",!0)])])])]),e("td",Jv,m(o(ee).moment.utc(c.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",Xv,m(c.adBreaks.length),1),e("td",null,[e("div",null,[F(g,{to:`${l.urlViewSourceLocation}/${c.sourceLocationId}/${o(C)()}`,class:"link-offset-2"},{default:z(()=>[K(m(c.sourceLocation.name),1)]),_:2},1032,["to"])]),e("div",Zv,[F(g,{to:`${l.urlViewVodSource}/${c.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:z(()=>[K(m(c.vodSource.name),1)]),_:2},1032,["to"])])])]))),128))]),_:1},512),[[Se,o(d).items.length>0]])])]),F(n,{filter:o(d),search:o(f),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},sg={key:0},og={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},ag={class:"nav-item",role:"presentation"},lg={class:"nav-item",role:"presentation"},ng={class:"nav-item d-none",role:"presentation"},rg={class:"tab-content",id:"myTabContent"},ig={class:"mt-2"},dg={class:""},ug={class:"row row-cols-1 row-cols-lg-2"},cg={class:"col"},mg={class:"col"},fg={class:"form-floating mb-2"},pg={id:"sourceLocation",class:"form-control-plaintext"},vg={class:"col"},gg={class:"form-floating mb-2"},bg={id:"vodSource",class:"form-control-plaintext"},yg={class:"col"},$g={class:"col"},wg={class:"form-floating mb-2"},hg={class:"row row-cols-1 row-cols-sm-3"},_g={class:"col"},kg={class:"form-floating mb-2"},Sg={class:"col"},Tg={class:"form-floating mb-2"},Mg={class:"col"},Ig={class:"form-floating mb-2"},xg={class:"row row-cols-1 row-cols-sm-3"},Cg={class:"col"},Vg={class:"form-floating mb-2"},Pg={class:"col"},Og={class:"form-floating mb-2"},Ag={class:"mt-2"},Ug={class:"table-responsive"},Dg={class:"table table-hover mb-0"},Hg={class:"text-center"},Lg={class:"mt-2"},Eg={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:Q,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:E,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:d,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});xe("$config");const J=we();J.user;const r=ge({user:J.user,item:null,hls:null}),f=ue();fe(async()=>{await b(),f.value=E.getPageTab("programTemplate")||"information-tab"});const Y=i=>{E.setPageTab("programTemplate",i),f.value=i},u=i=>i!==f.value?"":"active",I=i=>i!==f.value?"":"show active",b=async()=>{const i=r;if(!k.value)try{k.value=!0,U.value="",r.item=null;const n=`/api/v1/programTemplates/${p.id}/`;await ee.get(n).then(a=>{i.item=a.data;const c=i.item;c.startOffsetTime=E.moment.utc(c.startOffsetMillis).format("HH:mm:ss"),c.endOffsetTime=E.moment.utc(c.endOffsetMillis).format("HH:mm:ss"),c.durationTime=E.moment.utc(c.durationInMillis).format("HH:mm:ss"),c.adBreaksDurationTime=E.moment.utc(c.adBreaksDurationInMillis).format("HH:mm:ss"),c.totalProgramTemplateDurationTime=E.moment.utc(c.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const v=c.vodSource.video,w=v.durationInMillis;v.durationInMillis=E.moment.utc(w).format("HH:mm:ss")}),r.item.vodSource&&await g(r.item.vodSourceId)}catch(n){U.value=E.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{k.value=!1}},_=async()=>{await b()},g=async i=>{try{let n=`/api/v1/vodSources/${i}/hls`;const a=await ee.get(n).then(v=>v.data);r.hls&&r.hls.destroy();const c=document.getElementById("video-view-program-template");r.hls=E.createHlsStream(c,a,"Previewing VOD.")}catch(n){U.value=E.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}};return(i,n)=>{const a=te("router-link"),c=te("PageHeader"),v=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(c,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(P)},{default:z(()=>[F(a,{to:`${l.urlEdit}/${l.id}/${o(d)()}`,class:"ms-2 btn btn-primary"},{default:z(()=>n[11]||(n[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:n[0]||(n[0]=w=>_()),class:"ms-2 btn btn-secondary"},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[1]||(n[1]=w=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(v,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",sg,[e("div",null,[e("ul",og,[e("li",ag,[e("button",{onClick:n[2]||(n[2]=w=>Y("information-tab")),class:re([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",lg,[e("button",{onClick:n[3]||(n[3]=w=>Y("adBreaks-tab")),class:re([u("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",ng,[e("button",{onClick:n[4]||(n[4]=w=>Y("programs-tab")),class:re([u("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",rg,[e("div",{class:re([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ig,[e("div",dg,[e("div",ug,[e("div",cg,[e("div",mg,[e("div",fg,[e("div",pg,[F(a,{to:`${l.urlViewSourceLocation}/${r.item.sourceLocationId}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(r.item.sourceLocation.name),1)]),_:1},8,["to"])]),n[14]||(n[14]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",vg,[e("div",gg,[e("div",bg,[F(a,{to:`${l.urlViewVodSource}/${r.item.vodSourceId}/${o(d)()}`,class:"link-offset-2"},{default:z(()=>[K(m(r.item.vodSource.name),1)]),_:1},8,["to"])]),n[15]||(n[15]=e("label",{for:"vodSource",class:""},"VOD Name",-1))])]),n[16]||(n[16]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",yg,[e("div",$g,[e("div",wg,[B(e("input",{"onUpdate:modelValue":n[5]||(n[5]=w=>r.item.name=w),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),n[17]||(n[17]=e("label",{for:"name",class:""},"Name",-1))])]),e("div",hg,[e("div",_g,[e("div",kg,[B(e("input",{"onUpdate:modelValue":n[6]||(n[6]=w=>r.item.startOffsetTime=w),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[Z,r.item.startOffsetTime]]),n[18]||(n[18]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",Sg,[e("div",Tg,[B(e("input",{"onUpdate:modelValue":n[7]||(n[7]=w=>r.item.endOffsetTime=w),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[Z,r.item.endOffsetTime]]),n[19]||(n[19]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",Mg,[e("div",Ig,[B(e("input",{"onUpdate:modelValue":n[8]||(n[8]=w=>r.item.durationTime=w),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,r.item.durationTime]]),n[20]||(n[20]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",xg,[e("div",Cg,[e("div",Vg,[B(e("input",{"onUpdate:modelValue":n[9]||(n[9]=w=>r.item.adBreaksDurationTime=w),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,r.item.adBreaksDurationTime]]),n[21]||(n[21]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks",-1))])]),e("div",Pg,[e("div",Og,[B(e("input",{"onUpdate:modelValue":n[10]||(n[10]=w=>r.item.totalProgramTemplateDurationTime=w),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,r.item.totalProgramTemplateDurationTime]]),n[22]||(n[22]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:re([I("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Ag,[e("div",Ug,[e("table",Dg,[n[23]||(n[23]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.adBreaks,(w,y)=>(t(),s("tr",{key:w.programTemplateAdBreakId},[e("td",Hg,m(y+1),1),e("td",null,m(o(E).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(E).moment.utc(w.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Se,r.item.adBreaks.length>0]])])])])],2),e("div",{class:re([I("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Lg,[e("pre",null,m(r.item.programs),1)])],2)])])])):D("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},qg=["disabled"],Bg={class:"row row-cols-1 row-cols-sm-3"},Ng={class:"col-sm-6"},Rg={class:"form-floating mb-2"},Fg={key:0,class:"d-block invalid-feedback"},zg={class:"col-sm-3"},Gg={class:"form-floating mb-2"},jg={key:0,class:"d-block invalid-feedback"},Yg={class:"col-sm-3"},Wg={class:"form-floating mb-2"},Kg={key:0,class:"d-block invalid-feedback"},Qg={class:"row row-cols-1 row-cols-sm-2"},Jg={class:"col"},Xg={class:"form-floating mb-2"},Zg=["value"],e1={key:0,class:"d-block invalid-feedback"},t1={class:"col"},s1={class:"form-floating mb-2"},o1=["value"],a1={key:0,class:"d-block invalid-feedback"},l1={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),A=l,C=ge({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),T={item:{name:{title:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},tier:{title:se.withMessage("Tier is required.",le),$autoDirty:!0,$lazy:!0},playbackMode:{title:se.withMessage("PlaybackMode is required.",le),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:se.withMessage("Filler Slate Source Location is required.",le),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:se.withMessage("Filler Slate Vod Source is required.",le),$autoDirty:!0,$lazy:!0},policy:{title:se.withMessage("Policy is required.",le),$autoDirty:!0,$lazy:!0}}},d=Te(T,C);fe(async()=>{await X()});const X=async()=>{try{await W.get("/api/v1/sourcelocations/lookup/").then(I=>{C.lookups.sourceLocations=I.data,C.lookups.sourceLocations.length===1&&(C.item.fillerSlateSourceLocationId=C.lookups.sourceLocations[0].id)}),C.item.fillerSlateSourceLocationId&&await r(C.item.fillerSlateSourceLocationId)}catch(u){V.value=U.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},J=async()=>{C.item.fillerSlateVodSourceId=null,await r(C.item.fillerSlateSourceLocationId)},r=async u=>{try{let I=`/api/v1/vodSources/lookup/source-location/${u}/?category=2`;await W.get(I).then(b=>{C.lookups.vodSources=b.data})}catch(I){V.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},f=()=>{if(C.item.name){const u=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${C.item.name}"}]}`;C.item.policy=u}else C.item.policy=null},Y=async()=>{const u=C;if(P.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,V.value="";const b=U.clone(u.item);await W.post("/api/v1/channels/",b).then(_=>{G.success("Add Channel","Channel added.",{onClose:async()=>{const g=`${A.urlView}/${_.data}`;await Q.push(g)}})})}catch(b){V.value=U.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{P.value=!1}};return(u,I)=>{const b=te("router-link"),_=te("PageHeader"),g=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(_,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(S)},{default:z(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:I[0]||(I[0]=i=>Y()),class:"btn btn-primary"},I[8]||(I[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,qg),F(b,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:z(()=>I[9]||(I[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(g,{errorMessage:o(V),vuelidate:o(d)},{default:z(()=>[e("div",null,[e("div",Bg,[e("div",Ng,[e("div",Rg,[B(e("input",{"onUpdate:modelValue":I[1]||(I[1]=i=>C.item.name=i),onChange:I[2]||(I[2]=i=>f()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Z,C.item.name]]),I[10]||(I[10]=e("label",{for:"name",class:""},"Name",-1)),o(d).item.name.$error?(t(),s("div",Fg,[(t(!0),s(O,null,q(o(d).item.name.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):D("",!0)])]),e("div",zg,[e("div",Gg,[B(e("input",{"onUpdate:modelValue":I[3]||(I[3]=i=>C.item.tier=i),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Z,C.item.tier]]),I[11]||(I[11]=e("label",{for:"tier",class:""},"Tier",-1)),o(d).item.tier.$error?(t(),s("div",jg,[(t(!0),s(O,null,q(o(d).item.tier.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):D("",!0)])]),e("div",Yg,[e("div",Wg,[B(e("input",{"onUpdate:modelValue":I[4]||(I[4]=i=>C.item.playbackMode=i),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Z,C.item.playbackMode]]),I[12]||(I[12]=e("label",{for:"playbackMode",class:""},"PlaybackMode",-1)),o(d).item.playbackMode.$error?(t(),s("div",Kg,[(t(!0),s(O,null,q(o(d).item.playbackMode.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):D("",!0)])])]),I[15]||(I[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",Qg,[e("div",Jg,[e("div",Xg,[B(e("select",{"onUpdate:modelValue":I[5]||(I[5]=i=>C.item.fillerSlateSourceLocationId=i),onChange:I[6]||(I[6]=i=>J()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(O,null,q(C.lookups.sourceLocations,i=>(t(),s("option",{value:i.id},m(i.name),9,Zg))),256))],544),[[ve,C.item.fillerSlateSourceLocationId]]),I[13]||(I[13]=e("label",{for:"fillerSlateSourceLocationId",class:""},"Source Location",-1)),o(d).item.fillerSlateSourceLocationId.$error?(t(),s("div",e1,[(t(!0),s(O,null,q(o(d).item.fillerSlateSourceLocationId.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):D("",!0)])]),e("div",t1,[e("div",s1,[B(e("select",{"onUpdate:modelValue":I[7]||(I[7]=i=>C.item.fillerSlateVodSourceId=i),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(O,null,q(C.lookups.vodSources,i=>(t(),s("option",{value:i.id},m(i.name),9,o1))),256))],512),[[ve,C.item.fillerSlateVodSourceId]]),I[14]||(I[14]=e("label",{for:"fillerSlateVodSourceId",class:""},"VOD Source",-1)),o(d).item.fillerSlateVodSourceId.$error?(t(),s("div",a1,[(t(!0),s(O,null,q(o(d).item.fillerSlateVodSourceId.$errors,i=>(t(),s("div",{key:i.$uid},m(i.$message),1))),128))])):D("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},n1={components:{Page:Xe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function r1(l,p,S,P,k,H){const V=te("Page");return t(),pe(V,{id:S.id,urlView:S.urlView},null,8,["id","urlView"])}const i1=Ve(n1,[["render",r1]]),d1={class:"ms-1"},u1={class:"input-group"},c1={class:"table-responsive border shadow-sm"},m1={class:"table table-hover mb-0"},f1=["textContent"],p1={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},v1={key:0,class:"badge text-bg-success"},g1={key:1,class:"badge text-bg-secondary"},b1="/api/v1/channels/search",y1={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(l){xe("$config");const S=we().user,{appTitle:P,pageTitle:k,busy:H,infoMessage:V,warningMessage:Q,errorMessage:W,router:U,axios:G,utils:ee,toasts:E,close:A,security:C,filter:T,initializeFilter:d,getQuery:X,saveQuery:J,search:r,getRowNumber:f,setSelected:Y,isSelected:u}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${S==null?void 0:S.userId}/Channels/search`,baseUrl:b1,filter:{updateUrl:!0}});return fe(async()=>{d(),await r()}),(I,b)=>{const _=te("router-link"),g=te("PageHeader"),i=te("m-pagination"),n=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(g,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k)},{default:z(()=>[F(_,{to:l.urlAdd,class:"btn btn-primary"},{default:z(()=>b[3]||(b[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",d1,[e("div",u1,[B(e("input",{"onUpdate:modelValue":b[0]||(b[0]=a=>o(T).query.criteria=a),onKeyup:b[1]||(b[1]=Ue(a=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(T).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:b[2]||(b[2]=a=>o(r)(1))},b[4]||(b[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),F(n,{errorMessage:o(W)},{default:z(()=>[e("div",c1,[e("table",m1,[b[5]||(b[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(T).items,(a,c)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:m(o(f)(c)),class:"text-center"},null,8,f1),e("td",null,[F(_,{to:`${l.urlView}/${a.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:z(()=>[a.arn?(t(),s("span",p1)):D("",!0),K(m(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",v1,m(a.state),1)):a.state==="STOPPED"?(t(),s("span",g1,m(a.state),1)):D("",!0)])]),e("td",null,m(a.playbackMode),1),e("td",null,m(a.tier),1)]))),128))]),_:1},512),[[Se,o(T).items.length>0]])])]),F(i,{filter:o(T),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},$1=["id"],w1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},h1={class:"modal-content"},_1={class:"modal-header"},k1={class:"modal-title"},S1={class:"modal-body p-1"},T1={class:"row row-cols-1 row-cols-sm-2 g-2"},M1={class:"col-sm-4"},I1={class:"card"},x1={key:0,class:"mt-2"},C1={class:"col"},V1={class:"form-floating mb-2"},P1={class:"col ms-2 my-2"},O1={class:"badge bg-info me-1"},A1={class:"badge bg-primary me-1"},U1={class:"row row-cols-1 row-cols-sm-2"},D1={class:"col"},H1={class:"form-floating mb-2"},L1={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},E1={class:"col"},q1={class:"form-floating mb-2"},B1={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},N1={class:"col"},R1={class:"form-floating mb-2"},F1={class:"col-sm-8"},z1={class:"col"},G1={class:"input-group mb-2"},j1={class:"form-floating"},Y1={class:"table-responsive border shadow-sm"},W1={class:"table table-sm table-hover mb-0 overflow-auto"},K1=["textContent"],Q1={class:"d-flex flex-row justify-content-start"},J1={class:"mt-1"},X1=["src"],Z1={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},eb={class:"ms-2"},tb=["onClick"],sb={class:"modal-footer"},ob="/api/v1/programtemplates/search",ab={__name:"_selectProgramTemplate",emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,security:T,filter:d,initializeFilter:X,getQuery:J,saveQuery:r,search:f,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select Program Template",cacheKey:`${k==null?void 0:k.userId}/program-templates/select`,baseUrl:ob,filter:{updateUrl:!0,lookups:{genres:[]},query:{}}}),b=S,_=ue("modalSelectProgramTemplate"),g=ge({programTemplate:null,hls:null});fe(async()=>{X(),await i()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const i=async()=>{await c(),await v()},n=async y=>{d.value.query.sourceLocationId=y,G.value="",await f();var M=document.getElementById(_.value),$=he.getOrCreateInstance(M);$.show()},a=async()=>{var y=document.getElementById(_.value),M=he.getOrCreateInstance(y);M.hide(),g.hls&&(g.hls.stopLoad(),g.hls.destroy()),b("close",g.programTemplate)},c=async y=>{try{const $=await E.get("/api/v1/lookups/video-categories/").then(N=>N.data);d.value.lookups.categories=$}catch(M){G.value=A.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},v=async y=>{try{const $=await E.get("/api/v1/lookups/video-genres/").then(N=>N.data);d.value.lookups.genres=$}catch(M){G.value=A.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},w=y=>{g.programTemplate=y,a()};return p({open:n,close:a}),(y,M)=>{const $=te("m-pagination"),N=te("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:_.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",w1,[e("div",h1,[e("div",_1,[e("h5",k1,[M[8]||(M[8]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),K(m(o(V)),1)]),e("button",{type:"button",class:"btn-close",onClick:M[0]||(M[0]=h=>a()),"aria-label":"Close"})]),e("div",S1,[F(N,{errorMessage:o(G)},{default:z(()=>[e("div",T1,[e("div",M1,[e("div",I1,[M[13]||(M[13]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.programTemplate?(t(),s("div",x1,[e("div",C1,[e("div",V1,[B(e("input",{"onUpdate:modelValue":M[1]||(M[1]=h=>g.programTemplate.vodSource.video.title=h),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.programTemplate.vodSource.video.title]]),M[9]||(M[9]=e("label",{for:"title"},"Title",-1))])]),e("div",P1,[e("div",null,[(t(!0),s(O,null,q(g.programTemplate.vodSource.video.genres,h=>(t(),s("span",O1,m(h.genreName),1))),256)),(t(!0),s(O,null,q(g.programTemplate.vodSource.video.categories,h=>(t(),s("span",A1,m(h.categoryName),1))),256))])]),e("div",U1,[e("div",D1,[e("div",H1,[e("div",L1,m(o(A).moment(g.programTemplate.vodSource.video.dateReleased).calendar()),1),M[10]||(M[10]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",E1,[e("div",q1,[e("div",B1,m(o(A).moment.utc(g.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),M[11]||(M[11]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",N1,[e("div",R1,[B(e("textarea",{"onUpdate:modelValue":M[2]||(M[2]=h=>g.programTemplate.vodSource.video.description=h),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.programTemplate.vodSource.video.description]]),M[12]||(M[12]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])]),e("div",F1,[e("div",z1,[e("div",G1,[e("div",j1,[B(e("input",{"onUpdate:modelValue":M[3]||(M[3]=h=>o(d).query.criteria=h),onKeyup:M[4]||(M[4]=Ue(h=>o(f)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(d).query.criteria]]),M[14]||(M[14]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:M[5]||(M[5]=h=>o(f)(1))},M[15]||(M[15]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Y1,[e("table",W1,[M[16]||(M[16]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(d).items,(h,x)=>(t(),s("tr",{key:h.videoId},[e("td",{textContent:m(o(Y)(x)),class:"text-center"},null,8,K1),e("td",null,[e("div",Q1,[e("div",null,[h.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(h.vodSource.video.thumbnails,ne=>(t(),s("div",J1,[e("img",{src:ne.url,class:"img-fuild border",width:"128"},null,8,X1)]))),256)):(t(),s("img",Z1))]),e("div",eb,[e("a",{onClick:ne=>w(h),class:"text-wrap link-offset-2",role:"button"},m(h.name),9,tb)])])])]))),128))]),_:1},512),[[Se,o(d).items.length>0]])])]),F($,{filter:o(d),search:o(f),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",sb,[e("button",{onClick:M[6]||(M[6]=h=>a()),class:"btn btn-primary",type:"button"},M[17]||(M[17]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:M[7]||(M[7]=h=>a()),class:"btn btn-secondary ms-1"},M[18]||(M[18]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,$1)}}},lb={key:0,class:"modal-content"},nb={class:"modal-header"},rb={class:"modal-title"},ib={class:"modal-body1"},db={class:"row row-cols-1 row-cols-sm-2 g-2"},ub={class:"card"},cb={key:0,class:"mt-2"},mb={class:"col"},fb={class:"form-floating mb-2"},pb={class:"col ms-2 my-2"},vb={class:"badge bg-info me-1"},gb={class:"badge bg-primary me-1"},bb={class:"row row-cols-1 row-cols-sm-2"},yb={class:"col"},$b={class:"form-floating mb-2"},wb={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},hb={class:"col"},_b={class:"form-floating mb-2"},kb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Sb={class:"col"},Tb={class:"form-floating mb-2"},Mb={class:"col"},Ib={class:"input-group mb-2"},xb={class:"form-floating"},Cb={class:"table-responsive border shadow-sm"},Vb={class:"table table-sm table-hover mb-0 overflow-auto"},Pb=["textContent"],Ob={class:"d-flex flex-row justify-content-start"},Ab={class:"mt-1"},Ub=["src"],Db={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Hb={class:"ms-2"},Lb=["onClick"],Eb={class:"modal-footer"},qb="/api/v1/programtemplates/search",Bb={__name:"_selectProgramTemplateInline",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(l,{expose:p,emit:S}){const k=we().user,{appTitle:H,pageTitle:V,busy:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,security:T,filter:d,initializeFilter:X,getQuery:J,saveQuery:r,search:f,getRowNumber:Y,setSelected:u,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Select Program Template",cacheKey:`${k==null?void 0:k.userId}/program-templates/select`,baseUrl:qb,filter:{updateUrl:!0,lookups:{genres:[]},query:{}},successAction:()=>{g.programTemplate&&(g.programTemplate=null)}}),b=l,_=S;ue("modalSelectProgramTemplateInline");const g=ge({programTemplate:null,hls:null});fe(async()=>{X(),await i()}),Ae(()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy())});const i=async()=>{await c(),await v()},n=async M=>{d.value.query.sourceLocationId=M,G.value="",await f(),b.isOpen=!0},a=async()=>{g.hls&&(g.hls.stopLoad(),g.hls.destroy()),_("close",g.programTemplate),b.isOpen=!1},c=async M=>{try{const N=await E.get("/api/v1/lookups/video-categories/").then(h=>h.data);d.value.lookups.categories=N}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},v=async M=>{try{const N=await E.get("/api/v1/lookups/video-genres/").then(h=>h.data);d.value.lookups.genres=N}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},w=M=>{g.programTemplate=M,y()},y=()=>{if(Hls.isSupported()){g.hls&&(g.hls.stopLoad(),g.hls.destroy());var M=document.getElementById("video-select-preview");const N=g.programTemplate.vodSource.video.formats.find(x=>x.formatName==="HLS"),h=N.serverUrl+N.path;g.hls=A.createHlsStream(M,h)}};return p({open:n,close:a}),(M,$)=>{const N=te("m-pagination"),h=te("PageBody");return t(),pe(be,null,{default:z(()=>[l.isOpen?(t(),s("div",lb,[e("div",nb,[e("h6",rb,[$[7]||($[7]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),K(m(o(V)),1)])]),e("div",ib,[F(h,{errorMessage:o(G)},{default:z(()=>[e("div",db,[e("div",{class:re([g.programTemplate?"col-sm-4":"d-none"])},[e("div",ub,[$[12]||($[12]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),g.programTemplate?(t(),s("div",cb,[e("div",mb,[e("div",fb,[B(e("input",{"onUpdate:modelValue":$[0]||($[0]=x=>g.programTemplate.vodSource.video.title=x),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,g.programTemplate.vodSource.video.title]]),$[8]||($[8]=e("label",{for:"title"},"Title",-1))])]),e("div",pb,[e("div",null,[(t(!0),s(O,null,q(g.programTemplate.vodSource.video.genres,x=>(t(),s("span",vb,m(x.genreName),1))),256)),(t(!0),s(O,null,q(g.programTemplate.vodSource.video.categories,x=>(t(),s("span",gb,m(x.categoryName),1))),256))])]),e("div",bb,[e("div",yb,[e("div",$b,[e("div",wb,m(o(A).moment(g.programTemplate.vodSource.video.dateReleased).calendar()),1),$[9]||($[9]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",hb,[e("div",_b,[e("div",kb,m(o(A).moment.utc(g.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),$[10]||($[10]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Sb,[e("div",Tb,[B(e("textarea",{"onUpdate:modelValue":$[1]||($[1]=x=>g.programTemplate.vodSource.video.description=x),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,g.programTemplate.vodSource.video.description]]),$[11]||($[11]=e("label",{for:"description"},"Description",-1))])])])):D("",!0)])],2),e("div",{class:re([g.programTemplate?"col-sm-8":"col-sm-12"])},[e("div",Mb,[e("div",Ib,[e("div",xb,[B(e("input",{"onUpdate:modelValue":$[2]||($[2]=x=>o(d).query.criteria=x),onKeyup:$[3]||($[3]=Ue(x=>o(f)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o(d).query.criteria]]),$[13]||($[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:$[4]||($[4]=x=>o(f)(1))},$[14]||($[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Cb,[e("table",Vb,[$[15]||($[15]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(o(d).items,(x,ne)=>(t(),s("tr",{key:x.videoId},[e("td",{textContent:m(o(Y)(ne)),class:"text-center"},null,8,Pb),e("td",null,[e("div",Ob,[e("div",null,[x.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(x.vodSource.video.thumbnails,ie=>(t(),s("div",Ab,[e("img",{src:ie.url,class:"img-fuild border",width:"128"},null,8,Ub)]))),256)):(t(),s("img",Db))]),e("div",Hb,[e("a",{onClick:ie=>w(x),class:"text-wrap link-offset-2",role:"button"},m(x.name),9,Lb)])])])]))),128))]),_:1},512),[[Se,o(d).items.length>0]])])]),F(N,{filter:o(d),search:o(f),showPerPage:!0},null,8,["filter","search"])],2)])]),_:1},8,["errorMessage"])]),e("div",Eb,[e("button",{onClick:$[5]||($[5]=x=>a()),class:"btn btn-primary",type:"button"},$[16]||($[16]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:$[6]||($[6]=x=>a(!1)),class:"btn btn-secondary ms-1"},$[17]||($[17]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])):D("",!0)]),_:1})}}},Nb=["id"],Rb={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Fb={class:"modal-content"},zb={class:"modal-header"},Gb={class:"modal-title"},jb={class:"modal-body"},Yb={key:0},Wb={class:"row row-cols-1 row-cols-sm-3"},Kb={class:"col-sm-3"},Qb={class:"form-floating mb-2"},Jb={key:0,class:"d-block invalid-feedback"},Xb={class:"col-sm-3"},Zb={class:"form-floating mb-2"},ey={key:0,class:"d-block invalid-feedback"},ty={class:"col-sm-6"},sy={class:"input-group mb-2"},oy={class:"form-floating"},ay={id:"programTemplateId",class:"form-control",placeholder:"Title"},ly={key:0,class:"d-block invalid-feedback"},ny={key:0},ry={class:"row row-cols-1 row-cols-sm-2"},iy={class:"col"},dy={class:"row row-cols-1"},uy={class:"col"},cy={class:"form-floating mb-2"},my={class:"col"},fy={class:"form-floating mb-2"},py={class:"row row-cols-1 row-cols-sm-3"},vy={class:"col"},gy={class:"form-floating mb-2"},by={class:"col"},yy={class:"form-floating mb-2"},$y={class:"col"},wy={class:"form-floating mb-2"},hy={class:"row row-cols-1 row-cols-sm-3"},_y={class:"col"},ky={class:"form-floating mb-2"},Sy={class:"col"},Ty={class:"form-floating mb-2"},My={key:1},Iy={class:"table-responsive border mt-1"},xy={class:"table table-sm mb-0"},Cy=["onUpdate:modelValue"],Vy=["value"],Py={key:0,class:"modal-footer"},Oy=["disabled"],Ay={__name:"_addProgram",emits:["onClose"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),X=S,J=ue(),r=ue(),f=ue(),Y=ue("modalAddProgramFromTemplate"),u=ge({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplate:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),I=(ie,j,R)=>ie.length<=0?!0:ie.every(ce=>ce.vodSourceId),b={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},programTemplateId:{required:se.withMessage("Program Template is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},adBreaks:{adBreaksRequired:se.withMessage("Ad Break is not properly configured.",I),$each:se.forEach({vodSourceId:{required:se.withMessage("Vod Source is required.",le)}})}}},_=Te(b,u);fe(async()=>{_.value.$reset()});const g=async(ie,j,R)=>{f.value=ie;const oe=u;Q.value.clear(),G.value="";const ce=A.moment(R),Ce=ce.format("YYYY-MM-DD HH:mm"),_e=ce.format("YYYYMMDD_HHmm")+"_PRG_";oe.eventId=j,oe.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},oe.selected={programTemplate:null},oe.item={programTemplateId:null,name:_e,dateScheduledStart:Ce,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await a(),_.value.$reset();var me=document.getElementById(Y.value),L=he.getOrCreateInstance(me);L.show()},i=async ie=>{if(!ie){X("onClose",{eventId:u.eventId},ie);var j=document.getElementById(Y.value),R=he.getOrCreateInstance(j);R.hide();return}if(!await _.value.$validate()){window.scrollTo(0,0);return}const ce=u,ae=A.moment(ce.item.dateScheduledStart).utc(!0).format(),Ce=A.moment(ce.item.dateScheduledStart).add(ce.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();u.item={eventId:ce.eventId,programTemplateId:ce.selected.programTemplate.programTemplateId,channelId:f.value,name:ce.item.name,dateScheduledStart:ae,dateScheduledEnd:Ce,adBreaks:ce.selected.programTemplate.adBreaks.map(_e=>({sourceLocationId:ce.selected.programTemplate.sourceLocationId,vodSourceId:_e.vodSourceId,offsetMillis:_e.offsetMillis,durationInMillis:_e.durationInMillis}))},await E.post("/api/v1/programs/",u.item).then(_e=>{C.success("Add New Program",`Program [${u.item.name}] was added to this channel.`),X("onClose",u.item,ie);var me=document.getElementById(Y.value),L=he.getOrCreateInstance(me);L.hide()},_e=>{G.value=A.getErrorMessageAsHtml(_e)})},n=async()=>{await i(!0)},a=async()=>{await M(),await c(),await v()},c=async()=>{try{const ie=`/api/v1/channelOutputs/get-by-channel/${f.value}`;await E.get(ie).then(j=>{u.lookups.channelOutputs=j.data}),u.item.programTemplateId&&await w()}catch(ie){G.value=A.getErrorMessageAsHtml(ie),window.scrollTo(0,0)}finally{}},v=async()=>{try{const ie=`/api/v1/programTemplates/lookup/by-channel/${f.value}`;await E.get(ie).then(j=>{u.lookups.programTemplates=j.data,u.lookups.programTemplates.length===1&&(u.item.programTemplateId=u.lookups.programTemplates[0].id)}),u.item.programTemplateId&&await w(u.item.programTemplateId)}catch(ie){G.value=A.getErrorMessageAsHtml(ie),window.scrollTo(0,0)}finally{}},w=async ie=>{await y(ie)},y=async ie=>{try{const j=`/api/v1/programTemplates/${ie}/`;await E.get(j).then(ce=>{u.selected.programTemplate=ce.data;const ae=u.selected.programTemplate;ae.startOffsetTime=A.moment.utc(ae.startOffsetMillis).format("HH:mm:ss"),ae.endOffsetTime=A.moment.utc(ae.endOffsetMillis).format("HH:mm:ss"),ae.durationTime=A.moment.utc(ae.durationInMillis).format("HH:mm:ss"),ae.adBreaksDurationTime=A.moment.utc(ae.adBreaksDurationInMillis).format("HH:mm:ss"),ae.totalProgramTemplateDurationTime=A.moment.utc(ae.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ae.adBreaks.forEach(Ce=>{Ce.vodSourceId=null}),u.item.programTemplateId=ae.programTemplateId,u.item.adBreaks=ae.adBreaks});const R=u,oe=R.lookups.channelOutputs[0].outputType;await N(R.selected.programTemplate.sourceLocationId,oe)}catch(j){G.value=A.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},M=async()=>{try{await E.get("/api/v1/sourcelocations/lookup/").then(j=>{u.lookups.sourceLocations=j.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await $(u.item.sourceLocationId)}catch(ie){G.value=A.getErrorMessageAsHtml(ie),window.scrollTo(0,0)}finally{}},$=async ie=>{try{let j=`/api/v1/vodSources/lookup/source-location/${ie}`;await E.get(j).then(R=>{u.lookups.vodSources=R.data})}catch(j){G.value=A.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{}},N=async(ie,j)=>{try{let R=`/api/v1/vodsources/lookup/source-location/${ie}/output-type/${j}`;await E.get(R).then(oe=>{u.lookups.adBreakVodSources=oe.data})}catch(R){G.value=A.getErrorMessageAsHtml(R),window.scrollTo(0,0)}finally{}},h=async ie=>{ne.value=!1,ie&&(await w(ie.programTemplateId),x())},x=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());var ie=document.getElementById("video-add-program");const R=u.selected.programTemplate.vodSource.video.formats.find(ce=>ce.formatName==="HLS"),oe=R.serverUrl+R.path;u.hls=A.createHlsStream(ie,oe)}},ne=ue(!1);return p({open:g,close:i}),(ie,j)=>{const R=te("PageMessages");return t(),pe(be,null,{default:z(()=>[e("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Y.value,tabindex:"-1","aria-hidden":"true"},[e("div",Rb,[e("div",Fb,[e("div",zb,[e("h5",Gb,[j[13]||(j[13]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:j[0]||(j[0]=oe=>i(!1)),"aria-label":"Close"})]),e("div",jb,[F(R,{errorMessage:o(G),vuelidate:o(_)},null,8,["errorMessage","vuelidate"]),F(Bb,{ref_key:"modalSelectProgramTemplateInline",ref:r,isOpen:ne.value,onClose:h},null,8,["isOpen"]),ne.value?D("",!0):(t(),s("div",Yb,[e("div",Wb,[e("div",Kb,[e("div",Qb,[B(e("input",{"onUpdate:modelValue":j[1]||(j[1]=oe=>u.item.name=oe),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),j[14]||(j[14]=e("label",{for:"name",class:""},"Name",-1)),o(_).item.name.$error?(t(),s("div",Jb,[(t(!0),s(O,null,q(o(_).item.name.$errors,oe=>(t(),s("div",{key:oe.$uid},m(oe.$message),1))),128))])):D("",!0)])]),e("div",Xb,[e("div",Zb,[B(e("input",{"onUpdate:modelValue":j[2]||(j[2]=oe=>u.item.dateScheduledStart=oe),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,u.item.dateScheduledStart]]),j[15]||(j[15]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(_).item.dateScheduledStart.$error?(t(),s("div",ey,[(t(!0),s(O,null,q(o(_).item.dateScheduledStart.$errors,oe=>(t(),s("div",{key:oe.$uid},m(oe.$message),1))),128))])):D("",!0)])]),e("div",ty,[e("div",sy,[e("div",oy,[e("div",ay,[u.selected.programTemplate?(t(),s(O,{key:0},[K(m(u.selected.programTemplate.name),1)],64)):D("",!0)]),j[16]||(j[16]=e("label",{for:"programTemplateId",class:""},"Program Template",-1))]),e("button",{onClick:j[3]||(j[3]=oe=>ne.value=!ne.value),class:"btn btn-primary",type:"button"},j[17]||(j[17]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))]),o(_).item.programTemplateId.$error?(t(),s("div",ly,[(t(!0),s(O,null,q(o(_).item.programTemplateId.$errors,oe=>(t(),s("div",{key:oe.$uid},m(oe.$message),1))),128))])):D("",!0)])]),u.selected.programTemplate?(t(),s("div",ny,[e("div",ry,[j[25]||(j[25]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1)),e("div",iy,[e("div",dy,[u.selected.programTemplate?(t(),s(O,{key:0},[e("div",uy,[e("div",cy,[B(e("input",{"onUpdate:modelValue":j[4]||(j[4]=oe=>u.selected.programTemplate.sourceLocation.name=oe),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[Z,u.selected.programTemplate.sourceLocation.name]]),j[18]||(j[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1))])]),e("div",my,[e("div",fy,[B(e("input",{"onUpdate:modelValue":j[5]||(j[5]=oe=>u.selected.programTemplate.vodSource.name=oe),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[Z,u.selected.programTemplate.vodSource.name]]),j[19]||(j[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1))])])],64)):D("",!0)]),e("div",py,[e("div",vy,[e("div",gy,[B(e("input",{"onUpdate:modelValue":j[6]||(j[6]=oe=>u.selected.programTemplate.startOffsetTime=oe),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[Z,u.selected.programTemplate.startOffsetTime]]),j[20]||(j[20]=e("label",{for:"startOffsetTime"},"Total Program Duration",-1))])]),e("div",by,[e("div",yy,[B(e("input",{"onUpdate:modelValue":j[7]||(j[7]=oe=>u.selected.programTemplate.endOffsetTime=oe),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[Z,u.selected.programTemplate.endOffsetTime]]),j[21]||(j[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",$y,[e("div",wy,[B(e("input",{"onUpdate:modelValue":j[8]||(j[8]=oe=>u.selected.programTemplate.durationTime=oe),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.durationTime]]),j[22]||(j[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",hy,[e("div",_y,[e("div",ky,[B(e("input",{"onUpdate:modelValue":j[9]||(j[9]=oe=>u.selected.programTemplate.adBreaksDurationTime=oe),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.adBreaksDurationTime]]),j[23]||(j[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Sy,[e("div",Ty,[B(e("input",{"onUpdate:modelValue":j[10]||(j[10]=oe=>u.selected.programTemplate.totalProgramTemplateDurationTime=oe),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.totalProgramTemplateDurationTime]]),j[24]||(j[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])])])])):D("",!0),u.selected.programTemplate&&u.selected.programTemplate.adBreaks.length>0?(t(),s("div",My,[j[27]||(j[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("b",null," Ad Break ")],-1)),e("div",Iy,[e("table",xy,[j[26]||(j[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(u.item.adBreaks,(oe,ce)=>(t(),s("tr",null,[e("td",null,m(ce+1),1),e("td",null,m(o(A).moment.utc(oe.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(A).moment.utc(oe.durationInMillis).format("HH:mm:ss")),1),e("td",null,[u.lookups.adBreakVodSources.length>0?(t(),s(O,{key:0},[B(e("select",{"onUpdate:modelValue":ae=>oe.vodSourceId=ae,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,q(u.lookups.adBreakVodSources,ae=>(t(),s(O,null,[ae.durationInMillis===oe.durationInMillis?(t(),s("option",{key:0,value:ae.id}," ["+m(o(A).moment.utc(ae.durationInMillis).format("HH:mm:ss"))+"] "+m(ae.name),9,Vy)):D("",!0)],64))),256))],8,Cy),[[ve,oe.vodSourceId]]),o(_).item.adBreaks.$each.$response?(t(!0),s(O,{key:0},q(o(_).item.adBreaks.$each.$response.$errors[ce].vodSourceId,ae=>(t(),s("div",{key:ae,class:"d-block invalid-feedback"},m(ae.$message),1))),128)):D("",!0)],64)):D("",!0)])]))),256))])])])])):D("",!0)]))]),ne.value?D("",!0):(t(),s("div",Py,[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:j[11]||(j[11]=oe=>n()),class:"btn btn-primary",type:"button"},j[28]||(j[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Oy),e("button",{onClick:j[12]||(j[12]=oe=>i(!1)),class:"btn btn-secondary ms-1"},j[29]||(j[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))]))])]),F(ab,{ref_key:"modalSelectProgramTemplate",ref:J,onClose:h},null,512)],8,Nb)]),_:1})}}},Uy=["id"],Dy={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Hy={class:"modal-content"},Ly={class:"modal-header"},Ey={class:"modal-title"},qy={class:"modal-body"},By={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ny=["innerHTML"],Ry={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Fy={key:2,class:"container"},zy={class:"row row-cols-1 row-cols-sm-2"},Gy={class:"col"},jy={class:"form-floating mb-2"},Yy={class:"col"},Wy={class:"form-floating mb-2"},Ky={class:"row row-cols-1 row-cols-sm-3 mt-2"},Qy={class:"col"},Jy={class:"form-floating mb-2"},Xy={class:"col"},Zy={class:"form-floating mb-2"},e$={key:0,class:"d-block invalid-feedback"},t$={class:"col"},s$={class:"form-floating mb-2"},o$={key:0,class:"d-block invalid-feedback"},a$={class:"row row-cols-1 row-cols-sm-3"},l$={class:"col"},n$={class:"form-floating mb-2"},r$={class:"col"},i$={class:"form-floating mb-2"},d$={class:"col"},u$={class:"form-floating mb-2"},c$={class:"row row-cols-1 row-cols-sm-3"},m$={class:"col"},f$={class:"form-floating mb-2"},p$={class:"col"},v$={class:"form-floating mb-2"},g$={key:0,class:"col"},b$={class:"form-floating mb-2"},y$={key:0},$$={class:"table-responsive border mt-1"},w$={class:"table mb-0"},h$=["onUpdate:modelValue"],_$=["value"],k$={class:"modal-footer"},S$=["disabled"],mt={__name:"_editProgram",emits:["onClose"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),X=S,J=ue(),r=ue("modalEditProgram"),f=ge({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0}}},u=Te(Y,f);fe(async()=>{u.value.$reset()});const I=async(a,c)=>{J.value=a;const v=f;Q.value.clear(),G.value="",v.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},v.item=null,await g(),await i(),u.value.$reset();var w=document.getElementById(r.value),y=he.getOrCreateInstance(w);y.show()},b=async a=>{if(!a){X("onClose",a);var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.hide();return}const c=f,v=A.moment(c.item.dateScheduledStart).utc(!0).format(),w={programId:J.value,name:c.item.name,dateScheduledStart:v,adBreaks:c.item.adBreaks.map($=>({sourceLocationId:c.item.sourceLocationId,vodSourceId:$.vodSourceId,offsetMillis:$.offsetMillis,durationInMillis:$.durationInMillis}))};try{await E.put("/api/v1/programs/",w).then(N=>{C.success("Edit Program","Program was edited.")})}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0);return}finally{}X("onClose",a);var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.hide()},_=async()=>{await b(!0)},g=async()=>{try{const a=`/api/v1/programs/${J.value}/`;await E.get(a).then(w=>{f.item=w.data;const y=f.item,N=A.moment.utc(y.dateScheduledStart).format("YYYY-MM-DD HH:mm");f.item.dateScheduledStart=N,y.startOffsetTime=A.moment.utc(y.startOffsetMillis).format("HH:mm:ss"),y.endOffsetTime=A.moment.utc(y.endOffsetMillis).format("HH:mm:ss"),y.durationTime=A.moment.utc(y.durationInMillis).format("HH:mm:ss"),y.adBreaksDurationTime=A.moment.utc(y.adBreaksDurationInMillis).format("HH:mm:ss"),y.totalProgramTemplateDurationTime=A.moment.utc(y.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const c=f,v=c.item.channel.outputs[0].outputType;await n(c.item.sourceLocationId,v)}catch(a){G.value=A.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},i=async()=>{},n=async(a,c)=>{try{let v=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${c}`;await E.get(v).then(w=>{f.lookups.adBreakVodSources=w.data})}catch(v){G.value=A.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return p({open:I,close:b}),(a,c)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Dy,[e("div",Hy,[e("div",Ly,[e("h5",Ey,[c[14]||(c[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:c[0]||(c[0]=v=>b(!1)),"aria-label":"Close"})]),e("div",qy,[o(G)?(t(),s("div",By,[c[15]||(c[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Ny)])):D("",!0),o(Q).size>0?(t(),s("div",Ry,[c[16]||(c[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),v=>(t(),s("li",null,m(v),1))),256))])])):D("",!0),f.item?(t(),s("div",Fy,[e("div",zy,[e("div",Gy,[e("div",jy,[f.item.sourceLocation?B((t(),s("input",{key:0,"onUpdate:modelValue":c[1]||(c[1]=v=>f.item.sourceLocation.name=v),id:"sourceLocation",class:"form-control-plaintext",readonly:""},null,512)),[[Z,f.item.sourceLocation.name]]):D("",!0),c[17]||(c[17]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",Yy,[e("div",Wy,[f.item.vodSource?B((t(),s("input",{key:0,"onUpdate:modelValue":c[2]||(c[2]=v=>f.item.vodSource.name=v),id:"vodSource",class:"form-control-plaintext",readonly:""},null,512)),[[Z,f.item.vodSource.name]]):D("",!0),c[18]||(c[18]=e("label",{for:"vodSource",class:""},"VOD Source",-1))])])]),e("div",Ky,[e("div",Qy,[e("div",Jy,[f.item.relativeProgram?B((t(),s("input",{key:0,"onUpdate:modelValue":c[3]||(c[3]=v=>f.item.relativeProgram.name=v),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512)),[[Z,f.item.relativeProgram.name]]):D("",!0),c[19]||(c[19]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])]),e("div",Xy,[e("div",Zy,[B(e("input",{"onUpdate:modelValue":c[4]||(c[4]=v=>f.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,f.item.name]]),c[20]||(c[20]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",e$,[(t(!0),s(O,null,q(o(u).item.name.$errors,v=>(t(),s("div",{key:v.$uid},m(v.$message),1))),128))])):D("",!0)])]),e("div",t$,[e("div",s$,[B(e("input",{"onUpdate:modelValue":c[5]||(c[5]=v=>f.item.dateScheduledStart=v),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,f.item.dateScheduledStart]]),c[21]||(c[21]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(u).item.dateScheduledStart.$error?(t(),s("div",o$,[(t(!0),s(O,null,q(o(u).item.dateScheduledStart.$errors,v=>(t(),s("div",{key:v.$uid},m(v.$message),1))),128))])):D("",!0)])])]),e("div",null,[e("div",a$,[e("div",l$,[e("div",n$,[B(e("input",{"onUpdate:modelValue":c[6]||(c[6]=v=>f.item.startOffsetTime=v),id:"startOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,f.item.startOffsetTime]]),c[22]||(c[22]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",r$,[e("div",i$,[B(e("input",{"onUpdate:modelValue":c[7]||(c[7]=v=>f.item.endOffsetTime=v),id:"endOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,f.item.endOffsetTime]]),c[23]||(c[23]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",d$,[e("div",u$,[B(e("input",{"onUpdate:modelValue":c[8]||(c[8]=v=>f.item.durationTime=v),id:"durationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,f.item.durationTime]]),c[24]||(c[24]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",c$,[e("div",m$,[e("div",f$,[B(e("input",{"onUpdate:modelValue":c[9]||(c[9]=v=>f.item.adBreaksDurationTime=v),id:"adBreaksDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,f.item.adBreaksDurationTime]]),c[25]||(c[25]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks Duration",-1))])]),e("div",p$,[e("div",v$,[B(e("input",{"onUpdate:modelValue":c[10]||(c[10]=v=>f.item.totalProgramTemplateDurationTime=v),id:"totalProgramTemplateDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,f.item.totalProgramTemplateDurationTime]]),c[26]||(c[26]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])]),f.item.relativeProgram?(t(),s("div",g$,[e("div",b$,[B(e("input",{"onUpdate:modelValue":c[11]||(c[11]=v=>f.item.relativeProgram.name=v),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512),[[Z,f.item.relativeProgram.name]]),c[27]||(c[27]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])])):D("",!0)])]),c[30]||(c[30]=e("hr",null,null,-1)),f.item?(t(),s("div",y$,[c[29]||(c[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",$$,[e("table",w$,[c[28]||(c[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(f.item.adBreaks,(v,w)=>(t(),s("tr",null,[e("td",null,m(w+1),1),e("td",null,m(o(A).moment.utc(v.offsetMillis).format("HH:mm:ss")),1),e("td",null,m(o(A).moment.utc(v.durationInMillis).format("HH:mm:ss")),1),e("td",null,[B(e("select",{"onUpdate:modelValue":y=>v.vodSourceId=y,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,q(f.lookups.adBreakVodSources,y=>(t(),s(O,null,[y.durationInMillis===v.durationInMillis?(t(),s("option",{key:0,value:y.id}," ["+m(o(A).moment.utc(y.durationInMillis).format("HH:mm:ss"))+"] "+m(y.name),9,_$)):D("",!0)],64))),256))],8,h$),[[ve,v.vodSourceId]])])]))),256))])])])])):D("",!0)])):D("",!0)]),e("div",k$,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:c[12]||(c[12]=v=>_()),class:"btn btn-primary ms-2",type:"button"},c[31]||(c[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,S$),e("button",{onClick:c[13]||(c[13]=v=>b(!1)),class:"btn btn-secondary ms-1"},c[32]||(c[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Uy))}},T$={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(l){const{appTitle:p,pageTitle:S,busy:P,infoMessage:k,warningMessage:H,errorMessage:V,router:Q,axios:W,utils:U,toasts:G,close:ee,security:E}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),A=l,C=ue(null),T=ue(null),d=ue(null),X={viewType:"Week",cellDuration:15,startDate:Ee.DayPilot.Date.today(),onTimeRangeSelected:g=>{var i=g.control;const n={start:g.start,end:g.end,id:Ee.DayPilot.guid(),text:"NEW",tags:{type:"new"}};i.events.add(n);var a=i.events.find(n.id);I(a)},onBeforeEventRender:g=>{if(g.data.barColor="green",!!g.data.tags)switch(g.data.tags.type){case"new":g.data.barColor="yellow";break;case"business":g.data.barColor="red";break;case"personal":g.data.barColor="greem";break;case"vacation":g.data.barColor="black";break;default:g.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async g=>{const i=g.newStart.value,n=g.e.id(),a=U.moment(i).utc(!0).format();try{let c="/api/v1/programs/scheduled-date-start";const v={programId:n,dateScheduledStart:a};await W.put(c,v).then(w=>{G.success("Program date scheduled start was edited.")})}catch(c){V.value=U.getErrorMessageAsHtml(c),window.scrollTo(0,0);return}finally{}await Y()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async g=>{var i=g.e.id();_(i)},contextMenu:new Ee.DayPilot.Menu([{text:"Clone",onClick:async g=>{const i=g.source.id();try{let n=`/api/v1/programs/${i}/clone`;await W.post(n).then(a=>{G.success("Clone Program","Program was cloned.")})}catch(n){V.value=U.getErrorMessageAsHtml(n),window.scrollTo(0,0);return}finally{await Y()}}},{text:"Delete",onClick:async g=>{if(!confirm("Do you want to remove this program?"))return;const n=g.source.id();try{let a=`/api/v1/programs/${n}/`;await W.delete(a).then(c=>{G.success("Delete Program","Program was deleted.")}),C.value.control.events.remove(g.source)}catch(a){V.value=U.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await Y()}}}])},J=ue([]),r=()=>{C.value.control.update({events:J.value})},f=ge({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});fe(async()=>{await Y()});const Y=async()=>{await u(),await r()},u=async()=>{const g=f;if(!P.value)try{P.value=!0,V.value="";const i=`/api/v1/channels/${A.id}/`;await W.get(i).then(n=>{g.item=n.data;const a=g.item.outputs,c=g.item.programs.map(v=>{let w=`${v.name}`,y=`[${v.name}]`;return v.relativeProgram&&(y+=` => [${v.relativeProgram.name}]`),{start:U.moment.utc(v.dateScheduledStart).format(),end:U.moment.utc(v.dateScheduledEnd).format(),id:v.programId,text:w,toolTip:y}});J.value=c})}catch(i){V.value=U.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{P.value=!1}},I=g=>{T.value.open(A.id,g.id(),g.start().value)},b=async(g,i)=>{var n=C.value,a=n.control.events.find(g.eventId);if(!i&&a){C.value.control.events.remove(a);return}n.control.events.find($=>$.text()==g.name)&&(alert("Program already exists in this channel. Removing in the calendar."),C.value.control.events.remove(a));const v=U.moment(g.dateScheduledStart).utc(!0).format(),w=U.moment(g.dateScheduledEnd).utc(!0).format(),y=new Ee.DayPilot.Date(v),M=new Ee.DayPilot.Date(w);a.text(g.name),a.start(new Ee.DayPilot.Date(y)),a.end(new Ee.DayPilot.Date(M)),a.data.tags.program=g,a.commit(),C.value.control.update(),await Y()},_=(g,i)=>{d.value.open(g,i)};return(g,i)=>{const n=te("router-link"),a=te("PageHeader"),c=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(S)},{default:z(()=>[e("button",{onClick:i[0]||(i[0]=v=>Y()),class:"btn btn-secondary ms-1"},i[1]||(i[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),F(n,{to:`${l.urlView}/${l.id}`,class:"btn btn-secondary ms-1"},{default:z(()=>i[2]||(i[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),F(c,{errorMessage:o(V)},{default:z(()=>[e("div",null,[F(o(Ee.DayPilotCalendar),{id:"dp",config:X,ref_key:"calendarRef",ref:C},null,512),F(Ay,{ref_key:"modalAddProgram",ref:T,onOnClose:b},null,512),F(mt,{ref_key:"modalEditProgram",ref:d,onOnClose:Y},null,512)])]),_:1},8,["errorMessage"])])]),_:1})}}},M$=["id"],I$={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},x$={class:"modal-content"},C$={class:"modal-header"},V$={class:"modal-title"},P$={class:"modal-body"},O$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},A$=["innerHTML"],U$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},D$={class:"container"},H$={class:"row row-cols-1 row-cols-sm-3"},L$={class:"col"},E$={class:"form-floating mb-2"},q$=["disabled"],B$=["value"],N$={class:"col"},R$={class:"form-floating mb-2"},F$={key:0,class:"d-block invalid-feedback"},z$={class:"col"},G$={class:"form-floating mb-2"},j$={key:0,class:"d-block invalid-feedback"},Y$={class:"row row-cols-sm-2"},W$={class:"col"},K$={class:"form-floating mb-2"},Q$=["value"],J$={key:0,class:"d-block invalid-feedback"},X$={class:"col"},Z$={class:"form-floating mb-2"},ew=["value"],tw={key:0,class:"d-block invalid-feedback"},sw={class:"col"},ow={class:"input-group mb-1"},aw={class:"form-floating"},lw={key:0,class:"input-group-text"},nw={key:0},rw={key:1},iw={key:2},dw={key:3,class:"d-block invalid-feedback"},uw={class:"col"},cw={class:"input-group mb-1"},mw={class:"form-floating"},fw={key:0,class:"input-group-text"},pw={key:0},vw={key:1},gw={key:2,class:"d-block invalid-feedback"},bw={class:"table-responsive border mt-1"},yw={class:"table"},$w={class:"input-group mb-1"},ww=["onUpdate:modelValue"],hw={key:0,class:"input-group-text"},_w=["onUpdate:modelValue"],kw=["value"],Sw=["onUpdate:modelValue"],Tw=["value"],Mw=["onClick"],Iw={class:"modal-footer"},xw=["disabled"],Cw={__name:"_addProgram",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),X=S,J=ue(),r=ue("modalAddProgram"),f=ge({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",le),minValue:Ne(0),$autoDirty:!0,$lazy:!0}}},u=Te(Y,f);fe(async()=>{u.value.$reset()});const I=async $=>{J.value=$;const N=f;Q.value.clear(),G.value="";const h=A.moment().local().add(2,"m"),ne=h.format("YYYY-MM-DD HH:mm"),ie=h.format("YYYY_MM_DD")+"_PROGRAM_";N.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},N.item={name:ie,relativeProgramId:null,dateScheduledStart:ne,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await g(),u.value.$reset();var j=document.getElementById(r.value),R=he.getOrCreateInstance(j);R.show()},b=async()=>{var $=document.getElementById(r.value),N=he.getOrCreateInstance($);N.hide(),X("refresh")},_=async()=>{const $=f;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const x=$.item;delete x.vodSource,x.channelId=J.value;var h=x.dateScheduledStart;x.dateScheduledStart=A.moment(h).utc().format(),await E.post("/api/v1/programs/",x).then(ne=>{C.success("Add Program","Program added to Channel",{async onClose(){}})}),await b()}catch(x){G.value=A.getErrorMessageAsHtml(x),window.scrollTo(0,0)}finally{H.value=!1}},g=async()=>{await i(),await a(),await v()},i=async()=>{try{await E.get("/api/v1/sourcelocations/lookup/").then(N=>{f.lookups.sourceLocations=N.data,f.lookups.sourceLocations.length===1&&(f.item.sourceLocationId=f.lookups.sourceLocations[0].id)}),f.item.sourceLocationId&&await n(f.item.sourceLocationId)}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},n=async $=>{try{let N=`/api/v1/vodSources/lookup/source-location/${$}`;await E.get(N).then(h=>{f.lookups.vodSources=h.data})}catch(N){G.value=A.getErrorMessageAsHtml(N),window.scrollTo(0,0)}finally{}},a=async()=>{try{await E.get("/api/v1/sourcelocations/lookup/").then(N=>{f.lookups.adBreakSourceLocations=N.data})}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},c=async $=>{try{let N=`/api/v1/vodSources/lookup/source-location/${$}`;await E.get(N).then(h=>{f.lookups.adBreakVodSources=h.data})}catch(N){G.value=A.getErrorMessageAsHtml(N),window.scrollTo(0,0)}finally{}},v=async()=>{try{const $=`/api/v1/programs/lookup/?channelId=${J.value}`;await E.get($).then(N=>{if(f.lookups.channelPrograms=N.data,f.lookups.channelPrograms.length===1){const x=f.lookups.channelPrograms[0];f.item.relativeProgramId=x.id}})}catch($){G.value=A.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},w=()=>{const $={offsetMillis:0,sourceLocationId:null,vodSourceId:null},N=f.item.adBreaks.length;if(N>0){const h=f.item.adBreaks[N-1];$.offsetMillis=h.offsetMillis+1e4}f.item.adBreaks.push($)},y=$=>{f.item.adBreaks.splice($,1)},M=()=>{const $=f.item.vodSource;f.item.vodSourceId=$.id};return p({open:I,close:b}),($,N)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",I$,[e("div",x$,[e("div",C$,[e("h5",V$,[N[12]||(N[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:N[0]||(N[0]=h=>b()),"aria-label":"Close"})]),e("div",P$,[o(G)?(t(),s("div",O$,[N[13]||(N[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,A$)])):D("",!0),o(Q).size>0?(t(),s("div",U$,[N[14]||(N[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),h=>(t(),s("li",null,m(h),1))),256))])])):D("",!0),e("div",D$,[e("div",H$,[e("div",L$,[e("div",E$,[B(e("select",{"onUpdate:modelValue":N[1]||(N[1]=h=>f.item.relativeProgramId=h),class:"form-select",id:"sourceLocationId",disabled:f.lookups.channelPrograms.length<=0},[(t(!0),s(O,null,q(f.lookups.channelPrograms,h=>(t(),s("option",{value:h.id},m(h.name),9,B$))),256))],8,q$),[[ve,f.item.relativeProgramId]]),N[15]||(N[15]=e("label",{for:"relativeProgramId",class:""},"Relative Program",-1))])]),e("div",N$,[e("div",R$,[B(e("input",{"onUpdate:modelValue":N[2]||(N[2]=h=>f.item.name=h),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,f.item.name]]),N[16]||(N[16]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",F$,[(t(!0),s(O,null,q(o(u).item.name.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):D("",!0)])]),e("div",z$,[e("div",G$,[B(e("input",{"onUpdate:modelValue":N[3]||(N[3]=h=>f.item.dateScheduledStart=h),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,f.item.dateScheduledStart]]),N[17]||(N[17]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(u).item.dateScheduledStart.$error?(t(),s("div",j$,[(t(!0),s(O,null,q(o(u).item.dateScheduledStart.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):D("",!0)])])]),e("div",Y$,[e("div",W$,[e("div",K$,[B(e("select",{"onUpdate:modelValue":N[4]||(N[4]=h=>f.item.sourceLocationId=h),onChange:N[5]||(N[5]=h=>n(f.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(f.lookups.sourceLocations,h=>(t(),s("option",{value:h.id},m(h.name),9,Q$))),256))],544),[[ve,f.item.sourceLocationId]]),N[18]||(N[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(u).item.sourceLocationId.$error?(t(),s("div",J$,[(t(!0),s(O,null,q(o(u).item.sourceLocationId.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):D("",!0)])]),e("div",X$,[e("div",Z$,[B(e("select",{"onUpdate:modelValue":N[6]||(N[6]=h=>f.item.vodSource=h),onChange:N[7]||(N[7]=h=>M()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,q(f.lookups.vodSources,h=>(t(),s("option",{value:h},m(h.name),9,ew))),256))],544),[[ve,f.item.vodSource]]),N[19]||(N[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(u).item.vodSourceId.$error?(t(),s("div",tw,[(t(!0),s(O,null,q(o(u).item.vodSourceId.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):D("",!0)])]),e("div",sw,[e("div",ow,[e("div",aw,[B(e("input",{"onUpdate:modelValue":N[8]||(N[8]=h=>f.item.startOffsetMillis=h),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Z,f.item.startOffsetMillis]]),N[20]||(N[20]=e("label",{for:"startOffsetMillis",class:""},"Start OffSet Millis",-1))]),f.item.startOffsetMillis>0?(t(),s("span",lw,m(o(A).moment.utc(f.item.startOffsetMillis).format("HH:mm:ss")),1)):D("",!0)]),f.item.startOffsetMillis>0&&f.item.startOffsetMillis<3e4?(t(),s("div",nw,N[21]||(N[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):D("",!0),f.item.startOffsetMillis>f.item.endOffsetMillis&&f.item.endOffsetMillis>0?(t(),s("div",rw,N[22]||(N[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):D("",!0),f.item.vodSource&&f.item.startOffsetMillis>f.item.vodSource.durationInMillis?(t(),s("div",iw,N[23]||(N[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):D("",!0),o(u).item.startOffsetMillis.$error?(t(),s("div",dw,[(t(!0),s(O,null,q(o(u).item.startOffsetMillis.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):D("",!0)]),e("div",uw,[e("div",cw,[e("div",mw,[B(e("input",{"onUpdate:modelValue":N[9]||(N[9]=h=>f.item.endOffsetMillis=h),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Z,f.item.endOffsetMillis]]),N[24]||(N[24]=e("label",{for:"endOffsetMillis",class:""},"End OffSet Millis",-1))]),f.item.endOffsetMillis>0?(t(),s("span",fw,m(o(A).moment.utc(f.item.endOffsetMillis).format("HH:mm:ss")),1)):D("",!0)]),f.item.endOffsetMillis>0&&f.item.endOffsetMillis<3e4?(t(),s("div",pw,N[25]||(N[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):D("",!0),f.item.vodSource&&f.item.endOffsetMillis>f.item.vodSource.durationInMillis?(t(),s("div",vw,N[26]||(N[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):D("",!0),o(u).item.endOffsetMillis.$error?(t(),s("div",gw,[(t(!0),s(O,null,q(o(u).item.endOffsetMillis.$errors,h=>(t(),s("div",{key:h.$uid},m(h.$message),1))),128))])):D("",!0)])]),N[30]||(N[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[N[27]||(N[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",bw,[e("table",yw,[N[29]||(N[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,q(f.item.adBreaks,(h,x)=>(t(),s("tr",null,[e("td",null,m(x+1),1),e("td",null,[e("div",$w,[B(e("input",{"onUpdate:modelValue":ne=>h.offsetMillis=ne,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,ww),[[Z,h.offsetMillis]]),h.offsetMillis>0?(t(),s("span",hw,m(o(A).moment.utc(h.offsetMillis).format("HH:mm:ss")),1)):D("",!0)])]),e("td",null,[B(e("select",{"onUpdate:modelValue":ne=>h.sourceLocationId=ne,onChange:N[10]||(N[10]=ne=>c(f.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(O,null,q(f.lookups.adBreakSourceLocations,ne=>(t(),s("option",{value:ne.id},m(ne.name),9,kw))),256))],40,_w),[[ve,h.sourceLocationId]])]),e("td",null,[B(e("select",{"onUpdate:modelValue":ne=>h.vodSourceId=ne,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,q(f.lookups.adBreakVodSources,ne=>(t(),s("option",{value:ne.id},m(ne.name),9,Tw))),256))],8,Sw),[[ve,h.vodSourceId]])]),e("td",null,[e("button",{onClick:ne=>y(x),class:"btn btn-outline-warning"},N[28]||(N[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Mw)])]))),256))])])])])])]),e("div",Iw,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:N[11]||(N[11]=h=>_()),class:"btn btn-primary",type:"button"},N[31]||(N[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xw),N[32]||(N[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,M$))}},Vw=["id"],Pw={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Ow={class:"modal-content"},Aw={class:"modal-header"},Uw={class:"modal-title"},Dw={class:"modal-body"},Hw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Lw=["innerHTML"],Ew={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qw={class:"container"},Bw={class:"col"},Nw={class:"form-floating mb-2"},Rw={class:"col"},Fw={class:"form-floating mb-2"},zw={key:0,class:"d-block invalid-feedback"},Gw={class:"col"},jw={class:"form-floating mb-2 d-none"},Yw={key:0,class:"d-block invalid-feedback"},Ww={class:"col"},Kw={class:"form-floating mb-2"},Qw={key:0,class:"d-block invalid-feedback"},Jw={class:"modal-footer"},Xw=["disabled"],Zw={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),X=S,J=ue(),r=ue("modalAddPlaybackConfiguration"),f=ge({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:se.withMessage("Name is required.",le),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",le),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(Y,f);fe(async()=>{u.value.$reset()});const I=async(g,i)=>{J.value=g;const n=f;Q.value.clear(),G.value="";const a=i;let c=a.lastIndexOf("/");const v=a.substring(0,c);let w=a.substring(c+1);c=w.lastIndexOf("."),w=w.substring(0,c)+"_ADCAMPAIGN_",n.item={name:w,originalVideoContentSourceUrl:i,videoContentSourceUrl:v,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},u.value.$reset();var y=document.getElementById(r.value),M=he.getOrCreateInstance(y);M.show()},b=async()=>{var g=document.getElementById(r.value),i=he.getOrCreateInstance(g);i.hide(),X("refresh")},_=async()=>{const g=f;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const n=g.item;n.channelOutputId=J.value,await E.put("/api/v1/channelOutputs/playback/",n).then(a=>{C.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await b()}catch(n){G.value=A.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:I,close:b}),(g,i)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Pw,[e("div",Ow,[e("div",Aw,[e("h5",Uw,[i[6]||(i[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=n=>b()),"aria-label":"Close"})]),e("div",Dw,[o(G)?(t(),s("div",Hw,[i[7]||(i[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Lw)])):D("",!0),o(Q).size>0?(t(),s("div",Ew,[i[8]||(i[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),n=>(t(),s("li",null,m(n),1))),256))])])):D("",!0),e("div",qw,[e("div",Bw,[e("div",Nw,[B(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=n=>f.item.originalVideoContentSourceUrl=n),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Z,f.item.originalVideoContentSourceUrl]]),i[9]||(i[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",Rw,[e("div",Fw,[B(e("input",{"onUpdate:modelValue":i[2]||(i[2]=n=>f.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,f.item.name]]),i[10]||(i[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",zw,[(t(!0),s(O,null,q(o(u).item.name.$errors,n=>(t(),s("div",{key:n.$uid},m(n.$message),1))),128))])):D("",!0)])]),e("div",Gw,[e("div",jw,[B(e("input",{"onUpdate:modelValue":i[3]||(i[3]=n=>f.item.videoContentSourceUrl=n),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,f.item.videoContentSourceUrl]]),i[11]||(i[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),i[12]||(i[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(u).item.videoContentSourceUrl.$error?(t(),s("div",Yw,[(t(!0),s(O,null,q(o(u).item.videoContentSourceUrl.$errors,n=>(t(),s("div",{key:n.$uid},m(n.$message),1))),128))])):D("",!0)])]),e("div",Ww,[e("div",Kw,[B(e("textarea",{"onUpdate:modelValue":i[4]||(i[4]=n=>f.item.adDecisionServerUrl=n),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,f.item.adDecisionServerUrl]]),i[13]||(i[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(u).item.adDecisionServerUrl.$error?(t(),s("div",Qw,[(t(!0),s(O,null,q(o(u).item.adDecisionServerUrl.$errors,n=>(t(),s("div",{key:n.$uid},m(n.$message),1))),128))])):D("",!0),i[14]||(i[14]=Ye('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",Jw,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:i[5]||(i[5]=n=>_()),class:"btn btn-primary",type:"button"},i[15]||(i[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Xw),i[16]||(i[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vw))}},eh=["id"],th={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},sh={class:"modal-content"},oh={class:"modal-header"},ah={class:"modal-title"},lh={class:"modal-body"},nh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},rh=["innerHTML"],ih={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},dh={class:"container"},uh={class:"col"},ch={class:"form-floating mb-2"},mh=["value"],fh={key:0,class:"d-block invalid-feedback"},ph={class:"col"},vh={class:"form-floating mb-2"},gh={key:0,class:"d-block invalid-feedback"},bh={class:"col"},yh={class:"form-floating mb-2"},$h={key:0,class:"d-block invalid-feedback"},wh={class:"modal-footer"},hh=["disabled"],_h={__name:"_addChannelOutput",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),X=S,J=ue(),r=ue("modalAddChannelOutput"),f=ge({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),Y={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",le),$autoDirty:!0,$lazy:!0},manifestName:{required:se.withMessage("Manifest Name is required.",le),$autoDirty:!0,$lazy:!0},outputType:{required:se.withMessage("Output Type is required.",le),$autoDirty:!0,$lazy:!0}}},u=Te(Y,f);fe(async()=>{u.value.$reset()});const I=async()=>{await b()},b=async()=>{try{await E.get("/api/v1/sourceGroups/lookup/").then(a=>{f.lookups.sourceGroups=a.data,f.lookups.sourceGroups.length===1&&(f.item.sourceGroupId=f.lookups.sourceGroups[0].id)})}catch(n){G.value=A.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},_=async n=>{J.value=n;const a=f;Q.value.clear(),G.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await I(),u.value.$reset();var c=document.getElementById(r.value),v=he.getOrCreateInstance(c);v.show()},g=async()=>{var n=document.getElementById(r.value),a=he.getOrCreateInstance(n);a.hide(),X("refresh")},i=async()=>{const n=f;if(H.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const c=n.item;c.channelId=J.value,await E.post("/api/v1/channelOutputs",c).then(v=>{C.success("Add Channel Output","Channel output added.")}),await g()}catch(c){G.value=A.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{H.value=!1}};return p({open:_,close:g}),(n,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",th,[e("div",sh,[e("div",oh,[e("h5",ah,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",lh,[o(G)?(t(),s("div",nh,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,rh)])):D("",!0),o(Q).size>0?(t(),s("div",ih,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),c=>(t(),s("li",null,m(c),1))),256))])])):D("",!0),e("div",dh,[e("div",uh,[e("div",ch,[B(e("select",{"onUpdate:modelValue":a[0]||(a[0]=c=>f.item.sourceGroupId=c),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,q(f.lookups.sourceGroups,c=>(t(),s("option",{value:c.id},m(c.name),9,mh))),256))],512),[[ve,f.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(u).item.sourceGroupId.$error?(t(),s("div",fh,[(t(!0),s(O,null,q(o(u).item.sourceGroupId.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):D("",!0)])]),e("div",ph,[e("div",vh,[B(e("select",{"onUpdate:modelValue":a[1]||(a[1]=c=>f.item.outputType=c),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ve,f.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:""},"Output Type",-1)),o(u).item.outputType.$error?(t(),s("div",gh,[(t(!0),s(O,null,q(o(u).item.outputType.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):D("",!0)])]),e("div",bh,[e("div",yh,[B(e("input",{"onUpdate:modelValue":a[2]||(a[2]=c=>f.item.manifestName=c),class:"form-control",id:"manifestName"},null,512),[[Z,f.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:""},"Manifest Name",-1)),o(u).item.manifestName.$error?(t(),s("div",$h,[(t(!0),s(O,null,q(o(u).item.manifestName.$errors,c=>(t(),s("div",{key:c.$uid},m(c.$message),1))),128))])):D("",!0)])])])]),e("div",wh,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:a[3]||(a[3]=c=>i()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hh),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,eh))}},kh=["id"],Sh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Th={class:"modal-content"},Mh={class:"modal-header"},Ih={class:"modal-title"},xh={class:"modal-body"},Ch={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Vh=["innerHTML"],Ph={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Oh={class:"container"},Ah={class:"col"},Uh={class:"form-floating mb-2"},Dh=["value"],Hh={key:0,class:"d-block invalid-feedback"},Lh={class:"col"},Eh={class:"form-floating mb-2"},qh=["value"],Bh={key:0,class:"d-block invalid-feedback"},Nh={class:"col"},Rh={class:"card h-100"},Fh=["id"],zh={class:"modal-footer"},Gh=["disabled"],jh={__name:"_editFillerSlate",emits:["refresh"],setup(l,{expose:p,emit:S}){const{appTitle:P,pageTitle:k,busy:H,isDirty:V,validations:Q,infoMessage:W,warningMessage:U,errorMessage:G,router:ee,axios:E,utils:A,toasts:C,closeWithReturnUrl:T,security:d}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),X=S,J=ue("modalEditFillerSlate"),r=ge({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),f={item:{channelId:{required:se.withMessage("channelId is required.",le),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",le),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",le),$autoDirty:!0,$lazy:!0}}},Y=Te(f,r);fe(async()=>{Y.value.$reset()}),Ae(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const u=async()=>{await I()},I=async()=>{try{await E.get("/api/v1/sourcelocations/lookup/").then(w=>{r.lookups.sourceLocations=w.data}),r.item.sourceLocationId&&await b(r.item.sourceLocationId)}catch(v){G.value=A.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},b=async v=>{try{let w=`/api/v1/vodSources/lookup/source-Location/${v}/?type=2`;await E.get(w).then(y=>{r.lookups.vodSources=y.data})}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},_=async(v,w,y)=>{const M=r;Q.value.clear(),G.value="",M.lookups={sourceLocations:[],vodSources:[]},M.item={channelId:v,sourceLocationId:w,vodSourceId:y},await u(),r.item.vodSourceId&&await c(r.item.vodSourceId),Y.value.$reset();var $=document.getElementById(J.value),N=he.getOrCreateInstance($);N.show()},g=async()=>{var v=document.getElementById(J.value),w=he.getOrCreateInstance(v);w.hide(),r.hls&&(r.hls.stopLoad(),r.hls.destroy()),X("refresh")},i=async()=>{const v=r;if(H.value)return;if(!await Y.value.$validate()){window.scrollTo(0,0);return}try{H.value=!0,G.value="";const y=v.item;await E.put("/api/v1/channels/filler-slate",y).then(M=>{C.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await g()}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{H.value=!1}},n=async()=>{r.item.vodSourceId=null,await b(r.item.sourceLocationId)},a=async()=>{await c(r.item.vodSourceId)},c=async v=>{try{let w=`/api/v1/vodSources/${v}/hls`;const y=await E.get(w).then($=>$.data);if(r.hls){r.hls.loadSource(y);return}const M=document.getElementById(`video-${r.item.channelId}`);r.hls=A.createHlsStream(M,y)}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}};return p({open:_,close:g}),(v,w)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:J.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Sh,[e("div",Th,[e("div",Mh,[e("h5",Ih,[w[6]||(w[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),K(m(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:w[0]||(w[0]=y=>g()),"aria-label":"Close"})]),e("div",xh,[o(G)?(t(),s("div",Ch,[w[7]||(w[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Vh)])):D("",!0),o(Q).size>0?(t(),s("div",Ph,[w[8]||(w[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(o(Q).values(),y=>(t(),s("li",null,m(y),1))),256))])])):D("",!0),e("div",Oh,[e("div",Ah,[e("div",Uh,[B(e("select",{"onUpdate:modelValue":w[1]||(w[1]=y=>r.item.sourceLocationId=y),onChange:w[2]||(w[2]=y=>n()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,q(r.lookups.sourceLocations,y=>(t(),s("option",{value:y.id},m(y.name),9,Dh))),256))],544),[[ve,r.item.sourceLocationId]]),w[9]||(w[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(Y).item.sourceLocationId.$error?(t(),s("div",Hh,[(t(!0),s(O,null,q(o(Y).item.sourceLocationId.$errors,y=>(t(),s("div",{key:y.$uid},m(y.$message),1))),128))])):D("",!0)])]),e("div",Lh,[e("div",Eh,[B(e("select",{"onUpdate:modelValue":w[3]||(w[3]=y=>r.item.vodSourceId=y),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,q(r.lookups.vodSources,y=>(t(),s("option",{value:y.id},m(y.name),9,qh))),256))],544),[[ve,r.item.vodSourceId]]),w[10]||(w[10]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(Y).item.vodSourceId.$error?(t(),s("div",Bh,[(t(!0),s(O,null,q(o(Y).item.vodSourceId.$errors,y=>(t(),s("div",{key:y.$uid},m(y.$message),1))),128))])):D("",!0)])]),e("div",Nh,[e("div",Rh,[e("video",{id:`video-${r.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,Fh)])])])]),e("div",zh,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:w[4]||(w[4]=y=>i()),class:"btn btn-primary",type:"button"},w[11]||(w[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gh),e("button",{onClick:w[5]||(w[5]=y=>g()),class:"btn btn-secondary ms-1"},w[12]||(w[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,kh))}},Yh={class:"my-2"},Wh={class:""},Kh={class:"form-floating mb-2"},Qh={id:"vodSourceTitle",class:"form-control-plaintext"},Jh={class:"row"},Xh={class:"col-12 col-md-4"},Zh={class:"form-floating mb-2"},e_={id:"vodSourceVideoTitle",class:"form-control-plaintext"},t_={class:"col-12 col-md-8"},s_={class:"form-floating mb-2"},o_={id:"vodSourceVideoDesc",class:"form-control-plaintext"},a_={class:"mt-2"},l_={class:"row row-cols-1 row-cols-sm-3"},n_={class:"col"},r_={class:"form-floating mb-2"},i_={id:"startOffsetMillis",class:"form-control-plaintext"},d_={class:"col"},u_={class:"form-floating mb-2"},c_={id:"endOffsetMillis",class:"form-control-plaintext"},m_={class:"col"},f_={class:"form-floating mb-2"},p_={id:"durationInMillis",class:"form-control-plaintext"},v_={class:"row row-cols-1 row-cols-sm-3"},g_={class:"col"},b_={class:"form-floating mb-2"},y_={id:"adBreaksDurationInMillis",class:"form-control-plaintext"},$_={class:"col"},w_={class:"form-floating mb-2"},h_={id:"totalProgramTemplateDurationInMillis",class:"form-control-plaintext"},__={class:"row row-cols-1 row-cols-sm-3"},k_={class:"col"},S_={class:"form-floating mb-2"},T_={id:"dateScheduledStart",class:"form-control-plaintext"},M_={class:"col"},I_={class:"form-floating mb-2"},x_={id:"dateScheduledEnd",class:"form-control-plaintext"},C_={key:0,class:"col"},V_={class:"form-floating mb-2"},P_={id:"relativeProgram",class:"form-control-plaintext"},O_={key:0,class:"mt-2"},A_={class:"table-responsive border"},U_={class:"table table-sm table-bordered1 mb-0"},D_={class:"text-center me-1"},H_={class:"text-center"},L_={class:"text-center"},E_={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},q_={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},B_={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(l){const p=l,{moment:S,generateReturnUrl:P}=Ke();return fe(()=>{p.item.value}),(k,H)=>{const V=te("router-link");return t(),s("div",Yh,[e("div",null,[H[1]||(H[1]=e("h5",null," VOD ",-1)),e("div",Wh,[e("div",Kh,[e("div",Qh,[F(V,{to:`${l.urlViewVodSource}/${l.item.vodSourceId}/${o(P)()}`,class:"link-offset-2"},{default:z(()=>[K(m(l.item.vodSource.name),1)]),_:1},8,["to"])]),H[0]||(H[0]=e("label",{for:"vodSourceTitle"},"Title",-1))])])]),e("div",null,[H[4]||(H[4]=e("h5",null," Video ",-1)),e("div",Jh,[e("div",Xh,[e("div",Zh,[e("div",e_,[F(V,{to:`${l.urlViewVideo}/${l.item.vodSource.video.videoId}/${o(P)()}`,class:"link-offset-2"},{default:z(()=>[K(m(l.item.vodSource.video.title),1)]),_:1},8,["to"])]),H[2]||(H[2]=e("label",{for:"vodSourceVideoTitle"},"Title",-1))])]),e("div",t_,[e("div",s_,[e("div",o_,m(l.item.vodSource.video.description),1),H[3]||(H[3]=e("label",{for:"vodSourceVideoDesc"},"Description",-1))])])])]),e("div",a_,[H[13]||(H[13]=e("h5",null," Schedule ",-1)),e("div",l_,[e("div",n_,[e("div",r_,[e("div",i_,m(o(S).utc(l.item.startOffsetMillis).format("HH:mm:ss")),1),H[5]||(H[5]=e("label",{for:"startOffsetMillis"},"Start Offset",-1))])]),e("div",d_,[e("div",u_,[e("div",c_,m(o(S).utc(l.item.endOffsetMillis).format("HH:mm:ss")),1),H[6]||(H[6]=e("label",{for:"endOffsetMillis"},"End Offset",-1))])]),e("div",m_,[e("div",f_,[e("div",p_,m(o(S).utc(l.item.durationInMillis).format("HH:mm:ss")),1),H[7]||(H[7]=e("label",{for:"durationInMillis"},"Clip Duration",-1))])])]),e("div",v_,[e("div",g_,[e("div",b_,[e("div",y_,m(o(S).utc(l.item.adBreaksDurationInMillis).format("HH:mm:ss")),1),H[8]||(H[8]=e("label",{for:"adBreaksDurationInMillis"},"Total Ad Breaks Duration",-1))])]),e("div",$_,[e("div",w_,[e("div",h_,m(o(S).utc(l.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),H[9]||(H[9]=e("label",{for:"totalProgramTemplateDurationInMillis"},"Total Program Duration",-1))])])]),e("div",__,[e("div",k_,[e("div",S_,[e("div",T_,m(o(S).utc(l.item.dateScheduledStart).format("lll")),1),H[10]||(H[10]=e("label",{for:"dateScheduledStart"},"Program Start",-1))])]),e("div",M_,[e("div",I_,[e("div",x_,m(o(S).utc(l.item.dateScheduledEnd).format("lll")),1),H[11]||(H[11]=e("label",{for:"dateScheduledEnd"},"Program End",-1))])]),l.item.relativeProgram?(t(),s("div",C_,[e("div",V_,[e("div",P_,m(l.item.relativeProgram.name),1),H[12]||(H[12]=e("label",{for:"relativeProgram"},"Relative Program",-1))])])):D("",!0)])]),l.item.adBreaks.length?(t(),s("div",O_,[H[15]||(H[15]=e("h5",null," Ad Breaks ",-1)),e("div",A_,[e("table",U_,[e("tbody",null,[H[14]||(H[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(O,null,q(l.item.adBreaks,(Q,W)=>(t(),s("tr",null,[e("td",D_,m(W+1),1),e("td",H_,m(o(S).utc(Q.offsetMillis).format("HH:mm:ss")),1),e("td",L_,m(o(S).utc(Q.durationInMillis).format("HH:mm:ss")),1),e("td",null,[F(V,{to:`${l.urlViewVodSource}/${Q.vodSource.vodSourceId}/${o(P)()}`,class:"link-offset-2"},{default:z(()=>[Q.vodSource.arn?(t(),s("span",E_)):(t(),s("span",q_)),K(" "+m(Q.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):D("",!0)])}}},N_={key:0,class:"dropdown"},R_={key:0,class:"fas fa-fw fa-play"},F_={key:1,class:"fas fa-fw fa-stop"},z_={class:"dropdown-menu"},G_={key:0},j_={key:1},Y_={key:0},W_={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},K_={class:"nav-item",role:"presentation"},Q_={class:"nav-item",role:"presentation"},J_={class:"nav-item",role:"presentation"},X_={class:"nav-item",role:"presentation"},Z_={class:"nav-item",role:"presentation"},e2={class:"tab-content",id:"myTabContent"},t2={class:"mt-2"},s2={class:"row row-cols-1 row-cols-sm-3"},o2={class:"col"},a2={class:"form-floating mb-2"},l2={class:"col"},n2={class:"form-floating mb-2"},r2={class:"col"},i2={class:"form-floating mb-2"},d2={class:"d-flex flex-row justify-content-start align-items-center"},u2={key:0,class:"ms-2"},c2={class:"row row-cols-sm-2 mt-1"},m2={class:"col"},f2={class:"form-floating mb-2"},p2={class:"form-control-plaintext",readonly:""},v2={class:"col"},g2={class:"form-floating mb-2"},b2={class:"form-control-plaintext",readonly:""},y2={class:"mt-2"},$2={class:"d-flex flex-row justify-content-start align-items-center"},w2={class:"ms-2"},h2={key:0,class:"alert bg-warning mt-2"},_2={class:"table-responsive border mt-1"},k2={class:"table table-bordered1 mb-0"},S2={class:"badge bg-info"},T2={key:0,class:"text-wrap"},M2={key:1,class:"text-warning"},I2={key:0,class:"text-end"},x2={key:1,class:"text-end"},C2=["onClick"],V2={key:0},P2={colspan:"999"},O2={class:"d-flex flex-row justify-content-start align-items-center"},A2={class:"ms-2"},U2={if:"item.playbackUrl"},D2=["onClick"],H2={key:0,class:"table-responsive mt-2"},L2={class:"table table-borderless mb-0 table-sm"},E2={class:"align-middle1"},q2={class:"badge bg-success"},B2={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},N2={class:"text-end"},R2=["onClick"],F2=["onClick"],z2={class:"mt-2"},G2={class:"table-responsive border"},j2={class:"table mb-0 table-sm table-bordered1"},Y2={class:"align-middle1"},W2={class:"text-center me-1"},K2={class:"d-flex flex-row justify-content-start"},Q2={class:""},J2={class:"mb-1"},X2=["src"],Z2={class:"ms-2"},ek={key:0,class:"fas fa-fw fa-check-circle text-success"},tk={class:"fw-lighter small"},sk={class:"fw-lighter small"},ok={class:"text-center"},ak={class:"text-center"},lk={class:"text-end"},nk={class:"btn-group position-static"},rk=["onClick"],ik={key:0,class:"fas fa-fw fa-chevron-circle-up"},dk={key:1,class:"fas fa-fw fa-chevron-circle-down"},uk={class:"dropdown-menu"},ck=["onClick"],mk={key:0},fk=["onClick"],pk=["onClick"],vk=["onClick"],gk={key:0},bk={colspan:"999"},yk={class:"text-end mt-2 d-none"},$k={class:"mt-2"},wk={class:"text-end mb-2"},hk={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},_k={class:"col"},kk={class:"card shadow-sm"},Sk=["id"],Tk={class:"p-1"},Mk={class:"card-title1 text-center"},Ik={class:"col"},xk={class:"card shadow-sm"},Ck=["id"],Vk={class:"p-1"},Pk={class:"card-title1 text-center text-truncate"},Ok={class:"small1"},Ak={class:"mt-2"},Uk={key:0,class:"fas fa-fw fa-check-circle text-success"},Dk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Hk={key:0,class:"fas fa-fw fa-check-circle text-success"},Lk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Ek={key:0,class:"fas fa-fw fa-check-circle text-success"},qk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Bk={key:0,class:"fas fa-fw fa-check text-warning"},Nk={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},Rk={key:0,class:"fas fa-fw fa-check-circle text-success"},Fk={key:1,class:"fas fa-fw fa-times-circle text-warning"},zk={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(l){const p=l,{appTitle:S,pageTitle:P,busy:k,isDirty:H,validations:V,infoMessage:Q,warningMessage:W,errorMessage:U,router:G,axios:ee,utils:E,toasts:A,close:C,closeWithReturnUrl:T,generateReturnUrl:d,security:X}=$e({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});xe("$config");const J=we();J.user;const r=ge({user:J.user,item:null}),f=ue(null),Y=ue(null),u=ue(null),I=ue(null),b=ue(null),_=ue(),g=Ie(()=>r.item&&r.item.state==="RUNNING");fe(async()=>{await c();const me=E.getPageTab("channel")||"information-tab";i(me)}),Ae(()=>{_e()});const i=me=>{E.setPageTab("channel",me),_.value=me,me==="preview-tab"&&setTimeout(()=>{var L=document.getElementById("masonry");new tt(L,{})},2e3)},n=me=>me===_.value?"active":"",a=me=>me===_.value?"show active":"",c=async()=>{const me=r;if(_e(),!k.value)try{k.value=!0,U.value="",r.item=null;const L=`/api/v1/channels/${p.id}/`;await ee.get(L).then(ye=>{me.item=ye.data,me.item.outputs.forEach(Le=>{Le.playbackConfigurations.forEach(de=>{if(Le.playbackUrl){const Oe=Le.playbackUrl,Me=Oe.lastIndexOf("/"),Ze=Oe.substring(0,Me),ze=Oe.substring(Me+1),et=de.hlsConfigurationManifestEndpointPrefix;et&&(de.hlsPlaylist=et+ze)}})})})}catch(L){U.value=E.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{k.value=!1}},v=async()=>{await c()},w=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!k.value){U.value=null;try{k.value=!0,await ee.post(`/api/v1/channels/${p.id}/publish/`).then(L=>{A.success("Publish Channel","Channel was published.")}),k.value=!1,await v()}catch(L){U.value=E.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{k.value=!1}}},y=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/channels/${p.id}/unpublish/`).then(L=>{A.warning("Remove Channel","Channel was removed.")}),k.value=!1,await v()}catch(L){U.value=E.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{k.value=!1}}},M=()=>{f.value.open(p.id)},$=me=>{me.outputType==="HLS"&&Y.value.open(me.channelOutputId,me.playbackUrl)},N=()=>{u.value.open(p.id)},h=me=>{I.value.open(me)},x=(me,L)=>{b.value.open(p.id,me,L)},ne=async me=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/programs/${me}/`).then(ye=>{A.success("Delete Program","Program was deleted..",{async onClose(){}})}),k.value=!1,await v()}catch(ye){U.value=E.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},ie=async me=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/channelOutputs/${me}/`).then(ye=>{A.success("Delete Channel Output","Channel output was deleted..")}),k.value=!1,await v()}catch(ye){U.value=E.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},j=async me=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!k.value){U.value=null;try{k.value=!0,await ee.post(`/api/v1/programs/${me}/publish/`).then(ye=>{A.success("Publish Program","Program was published..",{async onClose(){}})}),k.value=!1,await v()}catch(ye){U.value=E.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},R=async me=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!k.value){U.value=null;try{k.value=!0,await ee.delete(`/api/v1/programs/${me}/unpublish/`).then(ye=>{A.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),k.value=!1,await v()}catch(ye){U.value=E.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}}},oe=async me=>{if(!k.value){U.value=null;try{k.value=!0,await ee.put(`/api/v1/channels/${p.id}/change-state/${me}`).then(L=>{A.success("Update Channel state","Change state was updated")}),k.value=!1,me==="STOPPED"&&_.value==="preview-tab"&&(_e(),i("information-tab")),await v()}catch(L){U.value=E.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{k.value=!1}}},ce=async me=>{if(!k.value)try{k.value=!0,U.value="",await ee.post(`/api/v1/channelOutputs/${me}/playback/publish/`).then(L=>{A.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),k.value=!1,await v()}catch(L){U.value=E.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{k.value=!1}},ae=async me=>{if(confirm("Do you want to remove this Playback Configuration?")&&!k.value)try{k.value=!0,U.value="",await ee.delete(`/api/v1/channelOutputs/${me}/playback/`).then(ye=>{A.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),k.value=!1,await v()}catch(ye){U.value=E.getErrorMessageAsHtml(ye),window.scrollTo(0,0)}finally{k.value=!1}},Ce=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const me=r.item.outputs;_e(),me.forEach(L=>{var ye=document.getElementById(`video-${L.channelOutputId}`);L.hls&&L.hls.destroy(),L.hls=E.createHlsStream(ye,L.playbackUrl,"Main playlist started."),ye.play(),L.playbackConfigurations.forEach(He=>{if(He.hls&&He.hls.destroy(),He.arn){var Le=document.getElementById(`video-${He.channelOutputPlaybackConfigurationId}`);try{He.hls=E.createHlsStream(Le,He.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Le.play()}catch(de){A.error("Failed Stream SSAI Playlist",de)}}})}),setTimeout(()=>{var L=document.getElementById("masonry");new tt(L,{})},2e3)}},_e=()=>{r.item&&r.item.outputs&&r.item.outputs.forEach(L=>{L.hls&&(L.hls.detachMedia(),L.hls.destroy(),delete L.hls),L.playbackConfigurations.forEach(ye=>{ye.hls&&(ye.hls.detachMedia(),ye.hls.destroy(),delete ye.hls)})})};return(me,L)=>{const ye=te("router-link"),He=te("PageHeader"),Le=te("PageBody");return t(),pe(be,null,{default:z(()=>[e("div",null,[F(He,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(P)},{default:z(()=>[r.item?(t(),s("div",N_,[e("button",{class:re([[g.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[g.value?(t(),s("span",R_)):(t(),s("span",F_)),K(" "+m(r.item.state),1)],2),e("ul",z_,[r.item.arn?(t(),s("li",G_,[g.value?(t(),s("button",{key:0,onClick:L[0]||(L[0]=de=>oe("STOPPED")),class:"dropdown-item"},L[20]||(L[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),K("Stop ")]))):(t(),s("button",{key:1,onClick:L[1]||(L[1]=de=>oe("RUNNING")),class:"dropdown-item"},L[21]||(L[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),K("Start ")])))])):D("",!0),g.value?D("",!0):(t(),s("li",j_,[r.item.arn?(t(),s("button",{key:0,onClick:L[2]||(L[2]=de=>y()),class:"dropdown-item"},L[22]||(L[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),K("Unpublish ")]))):(t(),s("button",{key:1,onClick:L[3]||(L[3]=de=>w()),class:"dropdown-item"},L[23]||(L[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),K("Publish ")])))])),r.item.arn?(t(),s(O,{key:2},[L[25]||(L[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:L[4]||(L[4]=de=>w()),class:"dropdown-item"},L[24]||(L[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),K("Republish ")]))])],64)):D("",!0)])])):D("",!0),F(ye,{to:`${l.urlSchedulePrograms}/${l.id}`,class:"ms-2 btn btn-primary"},{default:z(()=>L[26]||(L[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:L[5]||(L[5]=de=>v()),class:"ms-2 btn btn-secondary"},L[27]||(L[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:L[6]||(L[6]=de=>o(T)(p.urlMain)),class:"btn btn-secondary ms-1"},L[28]||(L[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),F(Le,{errorMessage:o(U)},{default:z(()=>[r.item?(t(),s("div",Y_,[e("ul",W_,[e("li",K_,[e("button",{onClick:L[7]||(L[7]=de=>i("information-tab")),class:re([n("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},L[29]||(L[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),K("Information ")]),2)]),e("li",Q_,[e("button",{onClick:L[8]||(L[8]=de=>i("outputPlayback-tab")),class:re([n("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},L[30]||(L[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),K("Output/Playback ")]),2)]),e("li",J_,[e("button",{onClick:L[9]||(L[9]=de=>i("programs-tab")),class:re([n("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},L[31]||(L[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),K("Programs ")]),2)]),e("li",X_,[e("button",{onClick:L[10]||(L[10]=de=>i("preview-tab")),class:re([[g.value?"":"disabled",n("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},L[32]||(L[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),K("Preview ")]),2)]),e("li",Z_,[e("button",{onClick:L[11]||(L[11]=de=>i("checklist-tab")),class:re([n("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},L[33]||(L[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),K("Checklist ")]),2)])]),e("div",e2,[e("div",{class:re([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",t2,[e("div",s2,[e("div",o2,[e("div",a2,[B(e("input",{"onUpdate:modelValue":L[12]||(L[12]=de=>r.item.name=de),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,r.item.name]]),L[34]||(L[34]=e("label",{for:"name"},"Name",-1))])]),e("div",l2,[e("div",n2,[B(e("input",{"onUpdate:modelValue":L[13]||(L[13]=de=>r.item.playbackMode=de),type:"text",class:"form-control-plaintext",id:"playbackMode",readonly:""},null,512),[[Z,r.item.playbackMode]]),L[35]||(L[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",r2,[e("div",i2,[B(e("input",{"onUpdate:modelValue":L[14]||(L[14]=de=>r.item.tier=de),type:"text",class:"form-control-plaintext",id:"tier",readonly:""},null,512),[[Z,r.item.tier]]),L[36]||(L[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",d2,[L[38]||(L[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),g.value?D("",!0):(t(),s("div",u2,[e("button",{onClick:L[15]||(L[15]=de=>x(r.item.fillerSlateSourceLocation.sourceLocationId,r.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},L[37]||(L[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",c2,[e("div",m2,[e("div",f2,[e("div",p2,[F(ye,{to:`${l.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${o(d)()}`,class:re([[r.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName"},{default:z(()=>[K(m(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"])]),L[39]||(L[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",v2,[e("div",g2,[e("div",b2,[F(ye,{to:`${l.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${o(d)()}`,class:re([[r.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:z(()=>[K(m(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"])]),L[40]||(L[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:re([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",y2,[e("div",null,[e("div",$2,[L[42]||(L[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",w2,[e("button",{onClick:L[16]||(L[16]=de=>N()),class:"btn btn-outline-primary btn-sm"},L[41]||(L[41]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),r.item.outputs.length<=0?(t(),s("div",h2,L[43]||(L[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),K("Channel Output is required ")]))):D("",!0),e("div",_2,[e("table",k2,[L[53]||(L[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.outputs,(de,Oe)=>(t(),s(O,{key:de.channelOutputId},[e("tr",null,[e("td",null,m(Oe+1),1),e("td",null,[e("div",null,m(de.manifestName),1),e("div",null,[e("span",S2,m(de.outputType),1)])]),e("td",null,[e("div",null,[F(ye,{to:`${l.urlViewSourceGroup}/${de.sourceGroupId}/${o(d)()}`,class:"link-offset-2",tag:"button"},{default:z(()=>[K(m(de.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[de.playbackUrl?(t(),s("div",T2,m(de.playbackUrl),1)):(t(),s("div",M2,L[44]||(L[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),K("Publish channel to get the playback url ")])))]),g.value?(t(),s("td",I2)):(t(),s("td",x2,[e("button",{onClick:Me=>ie(de.channelOutputId),class:"btn btn-outline-warning btn-sm"},L[45]||(L[45]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,C2)]))]),de.playbackUrl?(t(),s("tr",V2,[L[50]||(L[50]=e("td",null,null,-1)),L[51]||(L[51]=e("td",null,null,-1)),L[52]||(L[52]=e("td",null,null,-1)),e("td",P2,[e("div",O2,[L[47]||(L[47]=e("h5",null,[K("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",A2,[e("div",U2,[e("button",{onClick:Me=>$(de),class:"btn btn-outline-primary btn-sm"},L[46]||(L[46]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,D2)])])]),de.playbackConfigurations.length>0?(t(),s("div",H2,[e("table",L2,[e("tbody",null,[(t(!0),s(O,null,q(de.playbackConfigurations,(Me,Ze)=>(t(),s("tr",E2,[e("td",null,m(Ze+1),1),e("td",null,[e("span",q2,m(Me.name),1),e("div",B2,[e("span",null,m(Me.adDecisionServerUrl),1)])]),e("td",N2,[Me.arn?D("",!0):(t(),s("button",{key:0,onClick:ze=>ce(Me.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},L[48]||(L[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,R2)),e("button",{onClick:ze=>ae(Me.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},L[49]||(L[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,F2)])]))),256))])])])):D("",!0)])])):D("",!0)],64))),128))]),_:1},512),[[Se,r.item.outputs.length>0]])])])])])],2),e("div",{class:re([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",z2,[e("div",G2,[e("table",j2,[L[60]||(L[60]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),B(F(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:z(()=>[(t(!0),s(O,null,q(r.item.programs,(de,Oe)=>(t(),s(O,{key:de.programId},[e("tr",Y2,[e("td",W2,m(Oe+1),1),e("td",null,[e("div",K2,[e("div",Q2,[de.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},q(de.vodSource.video.thumbnails,Me=>(t(),s("div",J2,[e("img",{src:Me.url,class:"img-fuild border",width:"128"},null,8,X2)]))),256)):D("",!0)]),e("div",Z2,[e("div",null,[de.arn?(t(),s("span",ek)):D("",!0),e("span",null,m(de.name),1)]),e("div",null,[e("span",tk,m(o(E).moment.utc(de.dateScheduledStart).calendar())+" (utc)",1)]),e("div",null,[e("span",sk,m(o(E).moment(de.dateScheduledStart).calendar())+" (local)",1)])])])]),e("td",ok,m(o(E).moment.utc(de.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",ak,m(de.adBreaks.length),1),e("td",lk,[e("div",nk,[e("button",{onClick:Me=>de.expand=!de.expand,type:"button",class:re([[de.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[de.expand?(t(),s("span",ik)):(t(),s("span",dk))],10,rk),L[58]||(L[58]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",uk,[e("li",null,[e("button",{onClick:Me=>h(de.programId),class:"dropdown-item"},L[54]||(L[54]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),K("Edit ")]),8,ck)]),de.arn?(t(),s("li",mk,[e("button",{onClick:Me=>R(de.programId),class:"dropdown-item"},L[55]||(L[55]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),K("Unpublish ")]),8,fk)])):(t(),s(O,{key:1},[e("li",null,[e("button",{onClick:Me=>j(de.programId),class:"dropdown-item"},L[56]||(L[56]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),K("Publish ")]),8,pk)]),e("li",null,[e("button",{onClick:Me=>ne(de.programId),class:"dropdown-item"},L[57]||(L[57]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),K("Remove ")]),8,vk)])],64))])])])]),de.expand?(t(),s("tr",gk,[L[59]||(L[59]=e("td",null,null,-1)),e("td",bk,[F(B_,{item:de,urlViewVideo:l.urlViewVideo,urlViewVodSource:l.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):D("",!0)],64))),128))]),_:1},512),[[Se,r.item.programs.length>0]])])]),e("div",yk,[e("button",{onClick:L[17]||(L[17]=de=>M()),class:"btn btn-outline-primary"},L[61]||(L[61]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),K("Program ")]))])])],2),g.value?(t(),s("div",{key:0,class:re([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",$k,[e("div",wk,[r.item.outputs[0].hls?(t(),s("button",{key:1,onClick:L[19]||(L[19]=de=>_e()),class:"btn btn-primary"},L[63]||(L[63]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:L[18]||(L[18]=de=>Ce()),class:"btn btn-primary"},L[62]||(L[62]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",hk,[(t(!0),s(O,null,q(r.item.outputs,de=>(t(),s(O,null,[e("div",_k,[e("div",kk,[e("video",{id:`video-${de.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,Sk),e("div",Tk,[e("div",Mk,m(de.manifestName),1)])])]),(t(!0),s(O,null,q(de.playbackConfigurations,(Oe,Me)=>(t(),s("div",Ik,[e("div",xk,[e("video",{id:`video-${Oe.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,Ck),e("div",Vk,[e("div",Pk,[K(" #"+m(Me+1)+" ",1),e("span",Ok,m(Oe.name),1)])])])]))),256))],64))),256))])])],2)):D("",!0),e("div",{class:re([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Ak,[L[69]||(L[69]=K(" Checklist ")),e("ul",null,[e("li",null,[r.item.fillerSlateSourceLocation.arn?(t(),s("span",Uk)):(t(),s("span",Dk)),L[64]||(L[64]=K(" Filler Slate Source Location "))]),e("li",null,[r.item.fillerSlateVodSource.arn?(t(),s("span",Hk)):(t(),s("span",Lk)),L[65]||(L[65]=K(" Filler Slate VOD Source "))]),e("li",null,[r.item.outputs.length>0?(t(),s("span",Ek)):(t(),s("span",qk)),L[67]||(L[67]=K(" Outputs ")),e("ul",null,[e("li",null,[r.item.outputs.some(de=>de.playbackConfigurations.length>0)?(t(),s("span",Bk)):(t(),s("span",Nk)),L[66]||(L[66]=K(" Ad Insertion setup "))])])]),e("li",null,[r.item.programs.length>0?(t(),s("span",Rk)):(t(),s("span",Fk)),L[68]||(L[68]=K(" Programs "))])])])],2)])])):D("",!0)]),_:1},8,["errorMessage"]),F(Cw,{ref_key:"modalAddProgram",ref:f,onRefresh:v},null,512),F(Zw,{ref_key:"modalAddPlaybackConfiguration",ref:Y,onRefresh:v},null,512),F(_h,{ref_key:"modalAddChannelOutput",ref:u,onRefresh:v},null,512),F(mt,{ref_key:"modalEditProgram",ref:I,onOnClose:v},null,512),F(jh,{ref_key:"modalEditFillerSlate",ref:b,onRefresh:v},null,512)])]),_:1})}}},Gk={path:"/",component:ga,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Ea},{path:"videos",children:[{path:"",component:Hn},{path:"view/:id",component:wr,props:!0},{path:"add",component:$l},{path:"edit/:id",component:en,props:!0}]},{path:"source-groups",children:[{path:"add",component:Sr},{path:"edit/:id",component:jr,props:!0},{path:"",component:ei},{path:"view/:id",component:vi,props:!0}]},{path:"source-locations",children:[{path:"add",component:hi},{path:"edit/:id",component:Si,props:!0},{path:"",component:Di},{path:"view/:id",component:sd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:$u},{path:"edit/:id",component:ju,props:!0},{path:"",component:kc},{path:"view/:id",component:nf,props:!0}]},{path:"channels",children:[{path:"add",component:l1},{path:"edit/:id",component:i1,props:!0},{path:"",component:y1},{path:"schedule-programs/:id",component:T$,props:!0},{path:"view/:id",component:zk,props:!0}]},{path:"program-templates",children:[{path:"add",component:Gp},{path:"edit/:id",component:Dv,props:!0},{path:"",component:tg},{path:"view/:id",component:Eg,props:!0}]}]},ft=gt({history:bt("/"),linkActiveClass:"active",routes:[{...uo},{path:"/administrator",redirect:"/"},{...Gk}]}),jk={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const l=this,S=new yt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();S.on("onNotificationCreated",function(P){let k=P.content;P.notificationEntityClassText==="Deposit"&&(k+="<br/>",k+=`<a href="${l.urlViewDeposit}${P.referenceId}">Click ${P.notificationEntityClassText} here</a>`),P.notificationEntityClassText==="Withdraw"&&(k+="<br/>",k+=`<a href="${l.urlViewWithdraw}${P.referenceId}">Click ${P.notificationEntityClassText} here</a>`),P.notificationEntityClassText==="ManualModeOfPayment"&&(k+="<br/>",k+=`<a href="${l.urlViewManualModeOfPayment}${P.referenceId}">Click ${P.notificationEntityClassText} here</a>`),P.iconClass;let H="secondary";switch(P.notificationType){case 1:H="success";break;case 3:H="info";break;case 3:H="success";break;case 4:H="info";break;case 5:H="warning";break;case 6:H="error";break}l.$toast[H](P.subject,k,{timeOut:1e4});const V=P.subject,U={body:k,icon:"/img/192x102.png"};new Notification(V,U)}),S.on("jobUpdated",function(P){l.$bus.$emit("event:job-updated",P)}),await S.start().then(function(){}).catch(function(P){})}}};function Yk(l,p,S,P,k,H){return t(),s("div")}const Wk=Ve(jk,[["render",Yk],["__scopeId","data-v-5b4a9fa2"]]),Kk={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},Qk={class:"container"},Jk={class:"col-md"},Xk={class:"navbar-brand mb-0 ms-1 align-middle"},Zk={class:"col-md-auto"},eS={class:"d-flex flex-row align-items-center justify-content-end"},tS={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(l){return(p,S)=>(t(),pe(be,null,{default:z(()=>[e("nav",Kk,[e("div",Qk,[e("div",Jk,[qe(p.$slots,"title",{},()=>[e("a",Xk,[e("i",{class:re([l.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,m(l.pageTitle),1)])],!0)]),e("div",Zk,[e("div",eS,[qe(p.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},sS=Ve(tS,[["__scopeId","data-v-eb40af38"]]),oS={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},aS=["innerHTML"],lS={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},nS={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(l){return(p,S)=>(t(),pe(be,null,{default:z(()=>[qe(p.$slots,"default",{},()=>[l.errorMessage?(t(),s("div",oS,[S[0]||(S[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),K("Error ")],-1)),e("div",{innerHTML:l.errorMessage},null,8,aS)])):D("",!0),l.vuelidate&&l.vuelidate.$error?(t(),s("div",lS,[S[1]||(S[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),K("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,q(l.vuelidate.$errors,P=>(t(),s("li",{key:P.$uid},[P.$validator==="$each"?(t(),s(O,{key:0},[K(" Check errors in '"+m(P.$property)+"' ",1)],64)):(t(),s(O,{key:1},[K(m(P.$message),1)],64))]))),128))])])):D("",!0)])]),_:3}))}},rS={class:"py-3 container flex-grow-1 overflow-y-auto"},iS={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(l){return(p,S)=>{const P=te("PageMessages");return t(),pe(be,null,{default:z(()=>[e("div",rS,[F(P,{errorMessage:l.errorMessage,vuelidate:l.vuelidate},null,8,["errorMessage","vuelidate"]),qe(p.$slots,"default")])]),_:3})}}},dS={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const l=this;l.busy||(document.activeElement&&document.activeElement.blur(),await l.search(1))},async moveFirst(){const l=this;if(l.busy)return;l.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await l.search(1))},async moveLast(){const l=this;if(l.busy)return;const p=l.filter;p.pageIndex!==p.totalPages&&(document.activeElement&&document.activeElement.blur(),await l.search(p.totalPages))},async move(l){const p=this;if(p.busy)return;const S=p.filter,P=S.pageIndex+l;P>=0&&P<=S.totalPages&&(document.activeElement&&document.activeElement.blur(),await p.search(P))}}},uS={class:"mt-2"},cS={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},mS={key:0,class:"col-sm order-2 order-sm-1"},fS={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},pS={class:"me-1 fw-bold"},vS={class:"fw-bold"},gS={class:"ms-1"},bS={class:"col-sm-auto ms-auto order-1 order-sm-2"},yS={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},$S={key:0,class:"page-item"},wS={key:1,class:"page-item"},hS={key:2,class:"page-item"},_S={class:"page-item active"},kS={class:"page-link"},SS={key:3,class:"page-item"},TS={key:4,class:"page-item"},MS={key:5,class:"page-item"},IS={key:1,class:"text-info font-weight-bold text-center"},xS={key:0},CS={key:1};function VS(l,p,S,P,k,H){return t(),s("div",uS,[S.filter.items.length?(t(),s("div",cS,[S.showPerPage?(t(),s("div",mS,[e("div",fS,[e("div",null,[e("span",pS,m(S.filter.totalCount),1),p[8]||(p[8]=K("records in ")),e("span",vS,m(S.filter.totalPages),1),p[9]||(p[9]=K(" page(s) "))]),e("div",gS,[B(e("select",{"onUpdate:modelValue":p[0]||(p[0]=V=>S.filter.pageSize=V),onChange:p[1]||(p[1]=(...V)=>H.changePagination&&H.changePagination(...V)),class:"form-select form-select-sm me-1"},p[10]||(p[10]=[Ye('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ve,S.filter.pageSize]])]),p[11]||(p[11]=e("div",{class:"ms-1"},"per page",-1))])])):D("",!0),e("div",bS,[e("ul",yS,[S.filter.pageIndex!==1?(t(),s("li",$S,[e("button",{class:"page-link","aria-label":"Previous",onClick:p[2]||(p[2]=(...V)=>H.moveFirst&&H.moveFirst(...V))},p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):D("",!0),S.filter.pageIndex>2?(t(),s("li",wS,[e("button",{class:"page-link",onClick:p[3]||(p[3]=V=>H.move(-2))},m(S.filter.pageIndex-2),1)])):D("",!0),S.filter.pageIndex>1?(t(),s("li",hS,[e("button",{class:"page-link",onClick:p[4]||(p[4]=V=>H.move(-1))},m(S.filter.pageIndex-1),1)])):D("",!0),e("li",_S,[e("span",kS,m(S.filter.pageIndex),1)]),S.filter.pageIndex<S.filter.totalPages?(t(),s("li",SS,[e("button",{class:"page-link",onClick:p[5]||(p[5]=V=>H.move(1))},m(S.filter.pageIndex+1),1)])):D("",!0),S.filter.pageIndex<S.filter.totalPages-1?(t(),s("li",TS,[e("button",{class:"page-link",onClick:p[6]||(p[6]=V=>H.move(2))},m(S.filter.pageIndex+2),1)])):D("",!0),S.filter.pageIndex<S.filter.totalPages?(t(),s("li",MS,[e("button",{class:"page-link","aria-label":"Next",onClick:p[7]||(p[7]=(...V)=>H.moveLast&&H.moveLast(...V))},p[13]||(p[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):D("",!0)])])])):(t(),s("div",IS,[S.noRecords?(t(),s("div",xS,m(S.noRecords),1)):(t(),s("div",CS,"No record(s) found."))]))])}const PS=Ve(dS,[["render",VS]]),OS={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let l=this;if(!l.enabled)return;let p=l.filter;p.sortField===l.field?p.sortOrder===0?p.sortField=null:p.sortOrder=p.sortOrder===0?1:0:(p.sortField=l.field,p.sortOrder=1),l.$emit("search")}}},AS={class:"align-self-center"};function US(l,p,S,P,k,H){return t(),s("div",{onClick:p[0]||(p[0]=(...V)=>H.click&&H.click(...V)),class:"d-flex flex-row justify-content-start align-content-center",style:rt({cursor:S.enabled?"pointer":""})},[qe(l.$slots,"default"),e("span",AS,[S.showSort?(t(),s("span",{key:0,class:re([{"fa-sort text-gray-500":!H.currentSortField(),"fa-sort-up":H.currentSortField()&&H.sortUp(),"fa-sort-down":H.currentSortField()&&!H.sortUp()},"fas fa-fw mr-1"])},null,2)):D("",!0)])],4)}const DS=Ve(OS,[["render",US]]),HS={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(l){const p=this;p.setSelected(l),p.$emit("onSelectedRow",l)}}},LS={class:"table-responsive m-0"},ES=["href"],qS={key:1},BS=["onClick"],NS={class:"form-group row no-gutters"},RS={class:"col-5 col-form-label"},FS={class:"col align-self-center"},zS=["href"],GS={key:1};function jS(l,p,S,P,k,H){return t(),s("div",null,[e("div",LS,[e("table",{class:re(["table table-hover d-none d-md-table card",S.tableCss])},[e("thead",null,[qe(l.$slots,"header",{},()=>[p[0]||(p[0]=e("th",null,"#",-1)),(t(!0),s(O,null,q(S.header.columns,V=>(t(),s("th",null,m(V.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(O,null,q(S.items,(V,Q)=>qe(l.$slots,"table-row",{key:`row1-${V[S.header.key]}`,item:V,index:Q},()=>[e("td",null,m(S.getRowNumber(Q)),1),(t(!0),s(O,null,q(S.header.columns,W=>(t(),s("td",null,[W.href?(t(),s("a",{key:0,href:W.href(V[S.header.key]),class:"font-weight-bold"},m(V[W.field]),9,ES)):(t(),s("span",qS,m(V[W.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:re(["d-block d-md-none",S.rowCss])},[(t(!0),s(O,null,q(S.items,(V,Q)=>(t(),s("div",{key:`row2-${V[S.header.key]}`,onClick:W=>H.onSelectedRow(V),class:"border"},[e("div",{class:re(["p-2",{"b-left":S.isSelected(V)}])},[qe(l.$slots,"table-list",{item:V,index:Q},()=>[(t(!0),s(O,null,q(S.header.columns,W=>(t(),s("div",NS,[e("label",RS,m(W.title),1),e("div",FS,[W.href?(t(),s("a",{key:0,href:W.href(V[S.header.key]),class:"font-weight-bold"},m(V[W.field]),9,zS)):(t(),s("span",GS,m(V[W.field]),1))])]))),256))],!0)],2)],8,BS))),128))],2)])}const YS=Ve(HS,[["render",jS],["__scopeId","data-v-65929213"]]),Pe=$t(ht);Pe.use(wt());Pe.use(ft);Pe.component("m-notification",Wk);Pe.component("m-pagination",PS);Pe.component("sort-field",DS);Pe.component("table-list",YS);Pe.component("Toasts",ma);Pe.component("PageHeader",sS);Pe.component("PageMessages",nS);Pe.component("PageBody",iS);const WS="https://sonyfastpoc.azurewebsites.net/",KS="Arcadian-Sony FAST",QS=void 0,JS={API_URL:WS,appName:KS,tenantId:QS};Pe.provide("$config",JS);Pe.provide("$bus",Qe);Pe.mount("#app");
