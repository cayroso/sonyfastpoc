import{o as t,c as ce,r as ee,h as Ze,u as Fe,d as et,a as re,e as qe,b as s,f as e,g as N,w as B,i as J,t as c,F as O,j as L,k as H,l as de,m as ze,n as Se,p as tt,q as Be,s as Ge,P as st,v as me,x as se,y as oe,z as be,T as fe,A as o,B as mt,C as R,D as Z,E as ot,G as ae,H as ft,I as at,J as ke,K as $e,L as He,M as ue,N as Ue,O as Te,Q as Ee,R as he,S as Ae,U as Pe,V as Xe,W as pt,X as vt,Y as gt,Z as Oe,_ as bt,$ as yt}from"./vendor-E6lz2drn-chunk.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))C(h);new MutationObserver(h=>{for(const P of h)if(P.type==="childList")for(const M of P.addedNodes)M.tagName==="LINK"&&M.rel==="modulepreload"&&C(M)}).observe(document,{childList:!0,subtree:!0});function w(h){const P={};return h.integrity&&(P.integrity=h.integrity),h.referrerPolicy&&(P.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?P.credentials="include":h.crossOrigin==="anonymous"?P.credentials="omit":P.credentials="same-origin",P}function C(h){if(h.ep)return;h.ep=!0;const P=w(h);fetch(h.href,P)}})();const $t={__name:"App",setup(n){return(f,w)=>{const C=ee("router-view");return t(),ce(C)}}};function je(){const n=X=>{var V;let D=X,U=D.response,m="";if(!D.response)return X.message;if(U.status===500){if(typeof U.data=="string")return U.data;if(U.data.content)return U.data.content;if(U.data.detail)return U.data.detail}if(U.status===401){const $=`${window.location.pathname}${window.location.search}`;m=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent($)}`}'>here</a> to login.`}else if(U.status===400){let $=D.response.data.errors;m=D.response.data.title||D.response.data,$&&(m+="<ul>");for(let G in $){let Q=$[G];for(let r in $[G]){let u=Q[r];m+=`<li>${u}</li>`}}$&&(m+="</ul>"),m||(m=D.message),m&&m.content&&(m=m.content)}else U.status===404?m=((V=U==null?void 0:U.data)==null?void 0:V.title)||(U==null?void 0:U.data)||"Record not found.":typeof U.data=="string"&&(m=D.message,m===""&&(m=`Error <b>Http ${U.status}</b>.<br/>Please contact the System Administrator.`));return m},f=X=>JSON.parse(JSON.stringify(X)),w=X=>{if(typeof X!="number")return X;var D=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return D.format(X)},C=(X,D,U)=>{const V={value:D,expiry:new Date().getTime()+U};debugger;localStorage.setItem(X,JSON.stringify(V))},h=X=>{debugger;const D=localStorage.getItem(X);if(!D)return null;const U=JSON.parse(D);return new Date().getTime()>U.expiry?(localStorage.removeItem(X),null):U.value},P="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:n,clone:f,toCurrency:w,moment:Ze,localStorageSetWithExpiry:C,localStorageGetWithExpiry:h,setPageTab:(X,D)=>{var U=localStorage.getItem(P);U?U=JSON.parse(U):U={},U[X]=D,localStorage.setItem(P,JSON.stringify(U))},getPageTab:X=>{var D=localStorage.getItem(P);return D?D=JSON.parse(D):D={},D[X]},createHlsStream:(X,D,U)=>{var m=new Hls({autoStartLoad:U??!0});return m.on(Hls.Events.MEDIA_ATTACHED,function(){}),m.on(Hls.Events.MANIFEST_PARSED,function(V,$){console.log("manifest loaded, found "+$.levels.length+" quality level")}),m.on(Hls.Events.ERROR,function(V,$){if($.fatal)switch($.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),m.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",$);break;default:m.destroy();break}}),m.loadSource(D),m.attachMedia(X),m},isValidTime:X=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(X),generateReturnUrl:()=>{const X=Fe();let D=X.path;return X.query.returnUrl&&(D=X.query.returnUrl),D=`?returnUrl=${encodeURIComponent(D)}`,D}}}const wt=je(),lt=JSON.parse(localStorage.getItem("user"))||{},ht=wt.moment.utc(lt.exp*1e3),_t=ht.isAfter()?lt:null,ge=et({id:"auth",state:()=>({user:_t,returnUrl:null}),actions:{async login(n){try{this.user=n,localStorage.setItem("user",JSON.stringify(n))}catch(f){debugger;alert(f)}},logout(){this.user=null,localStorage.removeItem("user"),it.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),kt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(kt));const St={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Re=St,nt=et("msal",()=>{const n=re({auth:{clientId:Re.VITE_AUTH_CLIENT_ID,authority:Re.VITE_AUTH_AUTHORITY_URL,redirectUri:Re.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),f=re("");return{msalConfig:n,accessToken:f,setAccessToken:C=>{f.value=C}}}),Ye={$on:(...n)=>qe.on(...n),$once:(...n)=>qe.once(...n),$off:(...n)=>qe.off(...n),$emit:(...n)=>qe.emit(...n)};function Tt(){const n=(P,M,Y,F)=>{Ye.$emit("toast-message",{title:P,message:M,type:Y,options:F})};return{success:(P,M,Y={})=>{n(P,M,"success",Y)},warning:(P,M,Y={})=>{n(P,M,"warning",Y)},info:(P,M,Y={})=>{n(P,M,"info",Y)},error:(P,M,Y={})=>{n(P,M,"danger",Y)}}}const Me=(n,f)=>{const w=n.__vccOpts||n;for(const[C,h]of f)w[C]=h;return w},Mt={data(){return{notifications:[],messages:[]}},async created(){const n=this;n.$bus.$on("event:notification-received",()=>{n.getUnreadNotifications()}),n.$bus.$on("event:notification-marked-as-read",f=>{n.notifications.some(C=>C.notificationId===f)&&n.getUnreadNotifications()}),n.$bus.$on("event:notification-removed",f=>{n.notifications.some(C=>C.notificationId===f)&&n.getUnreadNotifications()}),n.$bus.$on("event:chat-marked-as-read",n.onChatMarkedAsRead),n.$bus.$on("event:chat-message-received",n.onChatMessageReceived)},async mounted(){const n=this,f=n.$refs.notifications,w=n.$refs.messages;f&&f.offsetParent,w&&w.offsetParent&&await n.getUnreadChats()},methods:{async logout(){const n=this;try{await n.$util.axios.post("/api/accounts/logout").then(f=>{const w="/";n.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){n.$util.href(w)}})})}catch(f){n.$util.handleError(f)}},async onChatMarkedAsRead(n){let f=this,w=f.messages.find(C=>C.chatId===n);if(w){let C=f.messages.indexOf(w);f.messages.splice(C,1)}},async onChatMessageReceived(n){let f=this,w=f.messages.find(h=>h.chatId===n.chatId);if(w)w.lastMessageText=n.content;else{var C={chatId:n.chatId,isRead:!1,lastDateSent:n.dateSent,lastMessageText:n.content,senderFirstLastName:`${n.sender.firstName} ${n.sender.lastName}`,senderInitials:n.sender.initials,senderProfilePicture32:n.sender.profilePicture32,urlPicture:f.$util.getProfilePictureUrl(n.sender.profilePicture32,n.sender.initials)};f.messages.push(C)}},async getUnreadNotifications(){const n=this;try{await n.$util.axios.get("api/accounts/unread-notifications").then(f=>{n.notifications=f.data})}catch(f){n.$util.handleError(f)}},async getUnreadChats(){const n=this;try{await n.$util.axios.get("api/accounts/unread-chats").then(f=>{n.messages=f.data;for(let w in n.messages){let C=n.messages[w];n.$set(C,"urlPicture",n.$util.getProfilePictureUrl(C.senderProfilePicture32,C.senderInitials))}})}catch(f){n.$util.handleError(f)}},viewNotification(n){this.$bus.$emit("event:open-notification",n)},viewChat(n){this.$bus.$emit("event:open-chat",n)},showHiddenElements(){let f=this.$el.getElementsByClassName("initialHidden");for(let w=0;w<f.length;w++)f[w].classList.remove("invisible")}}},It={mixins:[Mt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const f=ge().user;return{user:f,username:f?f.nameFull:"Guest"}},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1},async openModalSearchUser747(n){this.$refs.refModalSearchUser747.open(n)}}},Ct={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},xt={class:"container-md"},Vt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Pt={class:"navbar-nav"},Ot={class:"nav-item dropdown"},At={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ht={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Dt={class:"navbar-nav ms-auto"},Lt={class:"nav-item dropdown"},Et={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},qt={class:"d-inline d-sm-none d-md-inline"},Bt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Nt={class:"text-capitalize"};function Rt(n,f,w,C,h,P){const M=ee("router-link");return t(),s("nav",Ct,[e("div",xt,[N(M,{class:"navbar-brand",to:"/member"},{default:B(()=>[J(c(w.appName),1)]),_:1}),f[14]||(f[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Vt,[e("ul",Pt,[e("li",Ot,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",At,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/announcements"},{default:B(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),J(" Announcements ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/posts"},{default:B(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),J(" Posts ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/yellow-pages"},{default:B(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),J(" Yellow Pages ")])),_:1})])])]),e("li",Ht,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ut,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:B(()=>f[4]||(f[4]=[J(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Dt,[e("li",Lt,[e("a",Et,[e("span",null,[f[6]||(f[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",qt,c(h.username),1)])]),e("ul",Bt,[f[9]||(f[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),f[10]||(f[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),f[11]||(f[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),f[12]||(f[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),h.user&&h.user.roles.length>1?(t(!0),s(O,{key:0},L(h.user.roles,Y=>(t(),s("li",null,[N(M,{to:`/${Y.toLowerCase()}`,class:"dropdown-item"},{default:B(()=>[e("span",Nt,c(Y),1)]),_:2},1032,["to"])]))),256)):H("",!0),e("li",null,[N(M,{to:"/",class:"dropdown-item"},{default:B(()=>f[7]||(f[7]=[J(" Main ")])),_:1})]),f[13]||(f[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[N(M,{to:"/account/logout",class:"dropdown-item"},{default:B(()=>f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),J("Logout ")])),_:1})])])])])])])])}const Ft=Me(It,[["render",Rt]]),zt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const n=document.getElementById("top");n&&n.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let n=this;if(!n.$el.getElementsByClassName)return;let f=n.$el.getElementsByClassName("initialHidden");for(let w=0;w<f.length;w++){let C=f[w];C.classList.remove("invisible"),C.classList.remove("d-none")}},close(){const n=this,f=document.referrer.toLowerCase();f&&f.includes("/account/login")?n.$router.go(-2):n.$router.go(-1)},toggle(n){const f=this;f.toggles[n]=!f.toggles[n],localStorage.setItem(f.togglesKey,JSON.stringify(f.toggles))}}},Gt={mixins:[zt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1}}},jt={class:"footer sticky-bottom"},Yt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Wt={class:"container-md"},Kt={class:"navbar-text small p-0"},Jt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Qt={class:"container-md"},Xt={class:"navbar-nav nav-fill w-100"},Zt={class:"nav-item dropup"},es={class:"dropdown-menu","aria-labelledby":"dropdown01"},ts={class:"nav-item dropup"},ss={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function os(n,f,w,C,h,P){const M=ee("router-link");return t(),s("footer",jt,[e("div",Yt,[e("div",Wt,[e("span",Kt,"©"+c(h.copyright),1)])]),e("nav",Jt,[e("div",Qt,[e("ul",Xt,[e("li",Zt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",es,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/announcements"},{default:B(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),J(" Announcements ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/posts"},{default:B(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),J(" Posts ")])),_:1})]),e("li",null,[N(M,{class:"dropdown-item",to:"/member/yellow-pages"},{default:B(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),J(" Yellow Pages ")])),_:1})])])]),e("li",ts,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ss,[e("li",null,[N(M,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:B(()=>f[4]||(f[4]=[J(" Property Monthly Dues ")])),_:1})])])])])])])])}const as=Me(Gt,[["render",os]]),ls={name:"AdminLayout",components:{TopNav:Ft,BottomNav:as},inject:["$config"],mounted(){const f=this.$config;document.title=`Account - ${f.appName}`}},ns={class:"d-flex flex-column vh-100"};function rs(n,f,w,C,h,P){const M=ee("Toasts"),Y=ee("router-view");return t(),s("div",ns,[N(M),N(Y,{class:"flex-grow-1 mb-2"})])}const is=Me(ls,[["render",rs]]),ds={__name:"index",setup(n){return ge().user,de(()=>{}),(w,C)=>(t(),s("div",null,C[0]||(C[0]=[ze('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},us={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},cs=us;function ms(){Se("$config");const n=cs.VITE_API_URL,f=tt.create({baseURL:n});return Be.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),f.interceptors.request.use(w=>{Be.start();const{user:C}=ge();return C&&C.token&&(w.headers?(w.headers.Authorization||(w.headers.Authorization=`Bearer ${C.token}`),w.headers["Access-Control-Allow-Origin"]||(w.headers["Access-Control-Allow-Origin"]="*")):w.headers={Authorization:`Bearer ${C.token}`,"Access-Control-Allow-Origin":"*"}),w}),f.interceptors.response.use(w=>(Be.done(),w),w=>{throw Be.done(),w}),f}function ve(n){if(!n.appTitle)throw Error("App Title is required.");if(!n.pageTitle)throw Error("Page Title is required.");const f=Fe(),w=Ge(),C=ms(),h=je(),P=Tt(),Y=ge().user,F=()=>Y&&Y.roles&&Y.roles.includes("System"),x=()=>Y&&Y.roles&&Y.roles.includes("administrator"),z=()=>Y&&Y.roles&&Y.roles.includes("employee"),X=()=>Y&&Y.roles&&Y.roles.includes("Member"),D=async()=>{const j=document.referrer.toLowerCase();j&&j.includes("/accounts/login")?await w.go(-2):await w.go(-1)},U=j=>{var g;const b=f.path,k=(g=f.query)==null?void 0:g.returnUrl;k&&!(b.startsWith(k)||k.startsWith(b))?w.push(k):w.push(j)},m=n.appTitle,V=n.pageTitle,$=re(!1),G=re(new Map),Q=re(""),r=re(""),u=re("");return{appTitle:m,pageTitle:V,busy:$,validations:G,infoMessage:Q,warningMessage:r,errorMessage:u,router:w,route:f,axios:C,utils:h,toasts:P,close:D,closeWithReturnUrl:U,generateReturnUrl:h.generateReturnUrl,security:{userId:Y?Y.userId:"",isSystem:F(),isAdministrator:x(),isEmployee:z(),isMember:X()}}}const fs={class:"h-100 d-flex align-items-center justify-content-center"},ps={class:"form-signin w-100 m-auto"},vs={class:"h3 mb-3 fw-normal"},gs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},bs=["innerHTML"],ys={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},$s={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(n){Se("$config");const f=ge(),w=nt(),C=new st(w.msalConfig),h=me({username:"",password:""}),P={username:{required:se.withMessage("Username is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0}},M=be(P,h),{appTitle:Y,pageTitle:F,busy:x,isDirty:z,validations:X,infoMessage:D,warningMessage:U,errorMessage:m,router:V,route:$,axios:G,utils:Q,toasts:r,close:u,security:j}=ve({appTitle:"Sony FAST POC",pageTitle:"Sign On"});de(async()=>{await C.initialize()});const b=async()=>{await C.loginPopup({}).then(()=>{debugger;const _=C.getAllAccounts()[0];C.setActiveAccount(_)}).catch(g=>{console.error(`error during authentication: ${g}`)});var k={account:C.getActiveAccount(),scopes:[]};await C.acquireTokenSilent(k).then(g=>{debugger;const S=g.account.idToken,d=mt(S);if(d.token=g.accessToken,console.log(g),!d.roles){debugger;d.roles=[]}d.userId=d.sub,f.login(d);var i=$.query.returnUrl;i?V.push(decodeURIComponent(i)):d.roles.length===1?V.push(`/${d.roles[0].toLowerCase()}`):V.push("/")}).catch(g=>{console.error(`error during acquireTokenSilent: ${g}`)})};return(k,g)=>(t(),ce(fe,null,{default:B(()=>[e("div",fs,[e("main",ps,[e("div",null,[e("h1",vs,c(o(Y)),1),e("div",null,[o(m)?(t(),s("div",gs,[g[1]||(g[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(m)},null,8,bs)])):H("",!0),o(M).$error?(t(),s("div",ys,[g[2]||(g[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(M).$errors,_=>(t(),s("li",{key:_.$uid},c(_.$message),1))),128))])])):H("",!0)]),e("button",{onClick:g[0]||(g[0]=_=>b()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},ws=Me($s,[["__scopeId","data-v-896956d0"]]),hs={class:"h-100 d-flex align-items-center justify-content-center"},_s={__name:"logout",setup(n){const f=ge();return f.user,de(async()=>{f.logoutWithRedirect()}),(w,C)=>(t(),s("div",hs,C[0]||(C[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[J(" You have logged out from HOA MS."),e("br"),J(" Click "),e("a",{href:"/",class:"d-inline"},"here"),J(" to go back to home page. ")])],-1)])))}},ks={class:"h-100 d-flex align-items-center justify-content-center"},Ss={class:"card m-3"},Ts={class:"card-header"},Ms={class:"card-body"},Is={class:"m-2"},Cs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},xs=["innerHTML"],Vs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ps={class:"row row-cols-1 row-cols-sm-3"},Os={class:"col-sm"},As={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Us={class:"col-sm"},Ds={class:"form-group"},Ls={key:0,class:"d-block invalid-feedback"},Es={class:"col-sm"},qs={class:"form-group"},Bs={key:0,class:"d-block invalid-feedback"},Ns={class:"row row-cols-1 row-cols-sm-3"},Rs={class:"col"},Fs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Gs={class:"col"},js={class:"form-group"},Ys={key:0,class:"d-block invalid-feedback"},Ws={class:"row row-cols-1 row-cols-sm-3"},Ks={class:"col-sm"},Js={class:"form-group"},Qs={key:0,class:"d-block invalid-feedback"},Xs={class:"col-sm"},Zs={class:"form-group"},eo={key:0,class:"d-block invalid-feedback"},to={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},so={class:"col"},oo=["disabled"],ao={class:"col"},lo={class:"col"},no={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(n){const f=me({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),w=(j,b)=>j===b.password,C={firstName:{required:se.withMessage("First name is required.",oe),$autoDirty:!0,$lazy:!0},middleName:{required:se.withMessage("Middle name is required.",oe),$autoDirty:!0,$lazy:!0},lastName:{required:se.withMessage("Last name is required.",oe),$autoDirty:!0,$lazy:!0},phoneNumber:{required:se.withMessage("Phone number is required.",oe),$autoDirty:!0,$lazy:!0},email:{required:se.withMessage("Email is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:se.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0},confirmPassword:{required:se.withMessage("Confirm password is required.",oe),confirmSamePassword:se.withMessage("Password and confirm passwrod are different.",w),$autoDirty:!0,$lazy:!0}},h=be(C,f),{appTitle:P,pageTitle:M,busy:Y,isDirty:F,validations:x,infoMessage:z,warningMessage:X,errorMessage:D,router:U,axios:m,utils:V,toasts:$,close:G,security:Q}=ve({appTitle:"HOA MS",pageTitle:"Register User"}),r=Se("$config");de(()=>{});const u=async()=>{const j=f;if(Y.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}D.value=null;try{Y.value=!0;const k=V.clone(j);k.tenantid=r.tenantId;debugger;await m({method:"post",url:"/api/v1/accounts/register",data:k}).then(g=>{$.success("Register","Registration was successfull.",{onClose:async()=>{await U.push("/accounts/login")}})})}catch(k){D.value=V.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{Y.value=!1}};return(j,b)=>{const k=ee("router-link");return t(),ce(fe,null,{default:B(()=>[e("div",ks,[e("div",Ss,[e("h4",Ts,c(o(M)),1),e("div",Ms,[e("div",Is,[o(D)?(t(),s("div",Cs,[b[8]||(b[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(D)},null,8,xs)])):H("",!0),o(h).$error?(t(),s("div",Vs,[b[9]||(b[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(h).$errors,g=>(t(),s("li",{key:g.$uid},c(g.$message),1))),128))])])):H("",!0)]),e("div",Ps,[e("div",Os,[e("div",As,[b[10]||(b[10]=e("label",null,"First Name",-1)),R(e("input",{"onUpdate:modelValue":b[0]||(b[0]=g=>f.firstName=g),type:"text",class:"form-control"},null,512),[[Z,f.firstName]]),o(h).firstName.$error?(t(),s("div",Hs,[(t(!0),s(O,null,L(o(h).firstName.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])]),e("div",Us,[e("div",Ds,[b[11]||(b[11]=e("label",null,"Middle Name",-1)),R(e("input",{"onUpdate:modelValue":b[1]||(b[1]=g=>f.middleName=g),type:"text",class:"form-control"},null,512),[[Z,f.middleName]]),o(h).middleName.$error?(t(),s("div",Ls,[(t(!0),s(O,null,L(o(h).middleName.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])]),e("div",Es,[e("div",qs,[b[12]||(b[12]=e("label",null,"Last Name",-1)),R(e("input",{"onUpdate:modelValue":b[2]||(b[2]=g=>f.lastName=g),type:"text",class:"form-control"},null,512),[[Z,f.lastName]]),o(h).lastName.$error?(t(),s("div",Bs,[(t(!0),s(O,null,L(o(h).lastName.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])])]),e("div",Ns,[e("div",Rs,[e("div",Fs,[b[13]||(b[13]=e("label",null,"Phone Number",-1)),R(e("input",{"onUpdate:modelValue":b[3]||(b[3]=g=>f.phoneNumber=g),type:"tel",class:"form-control"},null,512),[[Z,f.phoneNumber]]),o(h).phoneNumber.$error?(t(),s("div",zs,[(t(!0),s(O,null,L(o(h).phoneNumber.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])]),e("div",Gs,[e("div",js,[b[14]||(b[14]=e("label",null,"Email",-1)),R(e("input",{"onUpdate:modelValue":b[4]||(b[4]=g=>f.email=g),type:"email",class:"form-control"},null,512),[[Z,f.email]]),o(h).email.$error?(t(),s("div",Ys,[(t(!0),s(O,null,L(o(h).email.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])])]),e("div",Ws,[e("div",Ks,[e("div",Js,[b[15]||(b[15]=e("label",null,"Password",-1)),R(e("input",{"onUpdate:modelValue":b[5]||(b[5]=g=>f.password=g),type:"password",class:"form-control"},null,512),[[Z,f.password]]),o(h).password.$error?(t(),s("div",Qs,[(t(!0),s(O,null,L(o(h).password.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])]),e("div",Xs,[e("div",Zs,[b[16]||(b[16]=e("label",null,"Confirm Password",-1)),R(e("input",{"onUpdate:modelValue":b[6]||(b[6]=g=>f.confirmPassword=g),type:"password",class:"form-control"},null,512),[[Z,f.confirmPassword]]),o(h).confirmPassword.$error?(t(),s("div",eo,[(t(!0),s(O,null,L(o(h).confirmPassword.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):H("",!0)])])]),e("div",to,[e("div",so,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:b[7]||(b[7]=g=>u()),class:"btn btn-primary w-100"},b[17]||(b[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),J("Register ")]),8,oo)]),e("div",ao,[N(k,{to:"/",class:"btn btn-outline-primary w-100"},{default:B(()=>b[18]||(b[18]=[J("Home")])),_:1})]),e("div",lo,[N(k,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:B(()=>b[19]||(b[19]=[J("Login")])),_:1})])])])])])]),_:1})}}},ro={path:"/accounts",component:is,props:!1,meta:{},children:[{path:"",component:ds},{path:"login",component:ws},{path:"logout",component:_s},{path:"register",component:no}]};function We(){const n=Ge(),f=F=>window.location.href.indexOf(F)>-1,w=F=>localStorage.getItem("data-bs-theme")||F,C=F=>{document.documentElement.setAttribute("data-bs-theme",F),localStorage.setItem("data-bs-theme",F)},h=async()=>await tt.get("https://bootswatch.com/api/5.json").then(F=>F.data),P=F=>{const x=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");x&&F?(x.setAttribute("href",F),localStorage.setItem("bootswatch-theme",F)):alert("cannot query css link")},M=F=>{Y(),n.push(F)},Y=()=>{if(screen.width<576){const x=document.getElementById("navbarCollapse");if(x){const z=ot.getInstance(x);z&&z.hide()}}};return{isActive:f,getCurrentBsTheme:w,changeBsTheme:C,getBootswatch:h,changeTheme:P,navigate:M,collapseNavbar:Y}}const io={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},uo={class:"container-md"},co={class:"navbar-collapse collapse",id:"navbarCollapse"},mo={class:"navbar-nav"},fo={class:"nav-item"},po={class:"nav-item dropdown"},vo={class:"dropdown-menu","aria-labelledby":"dropdown01"},go={class:"nav-item"},bo={class:"nav-item dropdown"},yo={class:"dropdown-menu","aria-labelledby":"dropdown01"},$o={class:"navbar-nav ms-auto"},wo={class:"nav-item dropdown"},ho={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},_o=["onClick"],ko={class:"nav-item dropdown"},So={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},To={class:"d-sm-none d-xl-inline"},Mo={key:0},Io={key:1},Co={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},xo={key:0},Vo={key:1},Po={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(n){const f=nt(),{isActive:w,getCurrentBsTheme:C,changeBsTheme:h,getBootswatch:P,changeTheme:M,navigate:Y,collapseNavbar:F}=We(),x=ge(),z=x.user,X=me({user:z,username:z?z.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});de(async()=>{const V=X;V.bootswatch=await P();const $=C(V.bsTheme);debugger;$&&(V.bsTheme=$,h(V.bsTheme));const G=localStorage.getItem("bootswatch-theme");G&&(V.currentTheme=G,M(G))});const D=V=>{M(V),X.currentTheme=V,F()},U=V=>{h(V),X.bsTheme=V,F()},m=async()=>{x.logoutWithRedirect();const V=new st(f.msalConfig);await V.initialize();const $={mainWindowRedirectUri:"/"};await V.logoutPopup($)};return(V,$)=>{const G=ee("router-link");return t(),ce(fe,null,{default:B(()=>[e("nav",io,[e("div",uo,[N(G,{class:"navbar-brand",to:"/administrator"},{default:B(()=>[J(c(n.appName),1)]),_:1}),$[18]||($[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",co,[e("ul",mo,[e("li",fo,[N(G,{to:"/videos",onClick:o(F),class:"nav-link"},{default:B(()=>$[3]||($[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",po,[$[6]||($[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",vo,[e("li",null,[N(G,{to:"/source-groups",onClick:o(F),class:"dropdown-item"},{default:B(()=>$[4]||($[4]=[J(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[N(G,{to:"/source-locations",onClick:o(F),class:"dropdown-item"},{default:B(()=>$[5]||($[5]=[J(" Locations ")])),_:1},8,["onClick"])])])]),e("li",go,[N(G,{to:"/vod-sources",onClick:o(F),class:"nav-link"},{default:B(()=>$[7]||($[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",bo,[$[10]||($[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",yo,[e("li",null,[N(G,{to:"/program-templates",onClick:o(F),class:"dropdown-item"},{default:B(()=>$[8]||($[8]=[J(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[N(G,{to:"/channels",onClick:o(F),class:"dropdown-item"},{default:B(()=>$[9]||($[9]=[J(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",$o,[e("li",wo,[$[14]||($[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",ho,[e("li",null,[X.bsTheme==="dark"?(t(),s("button",{key:0,onClick:$[0]||($[0]=Q=>U("light")),class:"dropdown-item"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Dark Mode ")]))):(t(),s("button",{key:1,onClick:$[1]||($[1]=Q=>U("dark")),class:"dropdown-item"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Light Mode ")])))]),$[13]||($[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,L(X.bootswatch.themes,Q=>(t(),s("li",null,[e("button",{onClick:r=>D(Q.cssCdn),class:ae(["dropdown-item",{active:X.currentTheme===Q.cssCdn}])},c(Q.name),11,_o)]))),256))])]),e("li",ko,[e("a",So,[e("span",null,[$[15]||($[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",To,[o(z)?(t(),s("span",Mo,c(o(z).name),1)):(t(),s("span",Io," Guest "))])])]),e("ul",Co,[o(z)?(t(),s("li",xo,[e("button",{onClick:$[2]||($[2]=Q=>m()),class:"dropdown-item"},$[16]||($[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),J("Logout ")]))])):(t(),s("li",Vo,[N(G,{to:"/accounts/login",class:"dropdown-item"},{default:B(()=>$[17]||($[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),J("Login ")])),_:1})]))])])])])])])]),_:1})}}},Oo={id:"sideNav",class:"collapse collapse-horizontal show"},Ao={class:"bg-dark min-vh-100 overflow-y-auto"},Ho={class:"navbar bg-primary bg-gradient shadow-sm","data-bs-theme":"dark"},Uo={class:"navbar-brand me-0 mb-1 px-2"},Do={class:"d-none d-sm-inline"},Lo={class:"nav nav-pills flex-column mb-auto px-1 mt-2",role:"tablist"},Eo={class:"nav-item dropdown"},qo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Bo={class:"nav-item dropdown"},No={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Ro={class:"nav-item dropdown"},Fo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},zo={class:"nav-item dropdown"},Go={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},jo=["onClick"],Yo={key:0,class:"fas fa-fw fa-angle-double-left"},Wo={key:1,class:"fas fa-fw fa-angle-double-right"},Ko={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(n){const f=Fe(),w=Ge(),{isActive:C,getCurrentBsTheme:h,changeBsTheme:P,getBootswatch:M,changeTheme:Y,navigate:F,collapseNavbar:x}=We(),z=me({bsTheme:"dark",currentTheme:"",bootswatch:{}});de(async()=>{const r=z;r.bootswatch=await M();const u=h(r.bsTheme);u&&(r.bsTheme=u,P(r.bsTheme));const j=localStorage.getItem("bootswatch-theme");j&&(r.currentTheme=j,Y(j)),m();const b=document.getElementById("sideNav");b&&(U.value?b.classList.add("show"):b.classList.remove("show"))});const X=r=>{Y(r),z.currentTheme=r},D=r=>{P(r),z.bsTheme=r},U=re(!0),m=()=>{const r=localStorage.getItem("show-sideNav");U.value=r==="true"},V=()=>{localStorage.setItem("show-sideNav",U.value),ot.getInstance("#sideNav").toggle()},$=()=>{U.value=!U.value,V()},G=r=>{var u=f.path.startsWith(r);return u?"active":""},Q=async(r,u)=>{const j=ft.getInstance(`#${u}`);j&&j.hide(),await w.push(r)};return(r,u)=>{const j=ee("router-link");return t(),s("div",null,[e("div",Oo,[e("div",Ao,[e("nav",Ho,[N(j,{to:"/",class:"text-decoration-none w-100 text-center"},{default:B(()=>[e("h1",Uo,[u[8]||(u[8]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Do,c(n.appName),1)])]),_:1})]),e("ul",Lo,[e("li",Eo,[e("a",{class:ae([G("/source-"),"nav-link dropdown-toggle"]),href:"#",id:"sourcesDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},u[9]||(u[9]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Sources",-1)]),2),e("ul",qo,[e("li",null,[e("button",{onClick:u[0]||(u[0]=b=>Q("/source-groups","sourcesDropdown")),class:ae([G("/source-groups"),"dropdown-item"]),role:"button"},u[10]||(u[10]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)]),2),e("button",{onClick:u[1]||(u[1]=b=>Q("/source-locations","sourcesDropdown")),class:ae([G("/source-locations"),"dropdown-item"]),role:"button"},u[11]||(u[11]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)]),2)])])]),e("li",Bo,[e("a",{class:ae([[G("/videos"),G("/vod-sources")],"nav-link dropdown-toggle"]),href:"#",id:"assetsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Asset Library",-1)]),2),e("ul",No,[e("li",null,[e("button",{onClick:u[2]||(u[2]=b=>Q("/videos","assetsDropdown")),class:ae([G("/videos"),"dropdown-item"]),role:"button"},u[13]||(u[13]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)]),2),e("button",{onClick:u[3]||(u[3]=b=>Q("/vod-sources","assetsDropdown")),class:ae([G("/vod-sources"),"dropdown-item"]),role:"button"},u[14]||(u[14]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VOD",-1)]),2)])])]),e("li",Ro,[e("a",{class:ae([[G("/program-templates"),G("/channels")],"nav-link dropdown-toggle"]),href:"#",id:"assemblyDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},u[15]||(u[15]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channel Assembly",-1)]),2),e("ul",Fo,[e("li",null,[e("button",{onClick:u[4]||(u[4]=b=>Q("/program-templates","assemblyDropdown")),class:ae([G("/program-templates"),"dropdown-item"]),role:"button"},u[16]||(u[16]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)]),2),e("button",{onClick:u[5]||(u[5]=b=>Q("/channels","assemblyDropdown")),class:ae([G("/channels"),"dropdown-item"]),role:"button"},u[17]||(u[17]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)]),2)])])]),e("li",zo,[u[21]||(u[21]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",Go,[e("li",null,[z.bsTheme==="dark"?(t(),s("button",{key:0,onClick:u[6]||(u[6]=b=>D("light")),class:"dropdown-item"},u[18]||(u[18]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Dark Mode ")]))):(t(),s("button",{key:1,onClick:u[7]||(u[7]=b=>D("dark")),class:"dropdown-item"},u[19]||(u[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),J("Light Mode ")])))]),u[20]||(u[20]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(O,null,L(z.bootswatch.themes,b=>(t(),s("li",null,[e("button",{onClick:k=>X(b.cssCdn),class:ae(["dropdown-item",{active:z.currentTheme===b.cssCdn}])},c(b.name),11,jo)]))),256))])])])])]),e("button",{id:"sideNavToggler",onClick:$,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"1.75rem",height:"1.75rem"}},[U.value?(t(),s("span",Yo)):(t(),s("span",Wo))])])}}},Jo={class:"footer sticky-bottom"},Qo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},Xo={class:"container-md"},Zo={class:"navbar-text small p-0"},ea={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(n){We();const f=Se("$config"),C=ge().user;let P=new Date().getFullYear();const M=me({user:C,username:C?C.nameFull:"Guest",copyright:`2020-${P} ${f.appName}`});return de(async()=>{}),(Y,F)=>(t(),s("footer",Jo,[e("div",Qo,[e("div",Xo,[e("span",Zo,"©"+c(M.copyright),1)])])]))}},ta={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ye.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(n){n.message&&this.addMessage(n.title,n.message,n.type,n.options)},async addMessage(n,f,w,C={}){var h={id:this.count++,title:n,message:f,type:w,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};h=Object.assign({},h,C),this.messages.unshift(h),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),h.timeOut>0&&await this.startTimeout(h)},async startTimeout(n,f=0){const w=this,C=performance.now(),h=async()=>{n.animationFrame=requestAnimationFrame(async P=>{const M=P+f-C;if(!w.exists(n)||n.paused){cancelAnimationFrame(n.animationFrame);return}else if(M<n.timeOut){const Y=M/n.timeOut;n.progress=Y,await h()}else{n.progress=1,cancelAnimationFrame(n.animationFrame),w.remove(n);return}})};await h()},pauseProgress(n){n.timeOut<=0||(n.paused=!0)},async resumeProgress(n){n.timeOut<=0||(n.paused=!1,await this.startTimeout(n,n.timeOut*n.progress))},getCurrentProgress(n){return Math.round(n.progress*100)===100?100:n.progress*100},getIconClass(n){const f=n.type;let w="";switch(f){case"success":w="fas fa-fw fa-circle-check";break;case"info":w="fas fa-fw fa-circle-info";break;case"warning":w="fas fa-fw fa-circle-exclamation";break;case"danger":w="fas fa-fw fa-triangle-exclamation";break}let C=w;return n.rtl?"icon-right "+C:"icon-left "+C},async remove(n){const f=this.messages.findIndex(w=>w.id===n.id);this.messages.splice(f,1),typeof n.onClose=="function"&&await n.onClose()},exists(n){return this.messages.findIndex(w=>w.id===n.id)!==-1}}},sa={"aria-live":"polite","aria-atomic":"true",class:"position-static"},oa=["onMouseover","onMouseout"],aa={class:"me-auto text-white"},la=["onClick"],na={class:"toast-body"},ra=["innerHTML"],ia={key:0,class:"progress m-1",style:{height:"4px"}};function da(n,f,w,C,h,P){return t(),ce(fe,null,{default:B(()=>[e("div",sa,[N(ke,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:B(()=>[(t(!0),s(O,null,L(h.messages,M=>(t(),s("div",{key:M.id,class:ae(["toast show mb-2 ms-auto",`border-${M.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Y=>P.pauseProgress(M),onMouseout:Y=>P.resumeProgress(M)},[e("div",{class:ae(["toast-header",`bg-${M.type}`])},[e("strong",aa,[e("i",{class:ae([P.getIconClass(M),"me-1"])},null,2),J(c(M.title),1)]),M.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Y=>P.remove(M)},f[0]||(f[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,la)):H("",!0)],2),e("div",na,[e("div",{innerHTML:M.message},null,8,ra)]),M.timeOut>0&&M.showProgress?(t(),s("div",ia,[e("div",{class:ae(`bg-${M.type}`),style:at({width:P.getCurrentProgress(M)+"%"})},null,6)])):H("",!0)],42,oa))),128))]),_:1})])]),_:1})}const ua=Me(ta,[["render",da],["__scopeId","data-v-5272bd9a"]]),ca={name:"AdminLayout",components:{TopNav:Po,SideNav:Ko,BottomNav:ea},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},ma={class:"d-flex flex-row flex-nowrap vh-100"};function fa(n,f,w,C,h,P){const M=ee("Toasts"),Y=ee("SideNav"),F=ee("router-view");return t(),s("div",ma,[N(M),N(Y),N(F,{class:"d-flex flex-column w-100 h-100"})])}const pa=Me(ca,[["render",fa]]),va={class:"mt-2 container overflow-y-auto"},ga={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ba=["innerHTML"],ya={class:"row mb-3"},$a={class:"col-xl-4"},wa={class:""},ha=["id"],_a={key:1,class:"card card-header text-bg-warning mb-2"},ka={class:"col-xl-8 overflow-x-auto"},Sa={class:"d-flex flex-column align-items-start"},Ta=["src"],Ma={class:""},Ia={class:"d-flex flex-row"},Ca={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},xa={class:"text-center"},Va=["src"],Pa={class:"text-end"},Oa={class:"text-wrap text-truncate"},Aa={class:"overflow-y-auto"},Ha={class:"badge bg-info me-2"},Ua={key:0,class:"badge bg-warning mb-1"},Da={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,isDirty:h,validations:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,generateReturnUrl:m,security:V}=ve({appTitle:"ARC AIO",pageTitle:"Dashboard"});Se("$config"),ge().user;const G=me({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),de(async()=>{await u()});const Q=async()=>{const k=G;if(!C.value)try{C.value=!0;const g="/api/v1/channels/epg/";k.item=[],await z.get(g).then(_=>{k.item=_.data}),k.item.forEach(_=>{j(_)})}catch(g){F.value=X.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{C.value=!1}},r=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await z.get("/api/v1/channels/reset/").then(_=>{D.success("Reset All Data","Reset data was successful.")})}catch(g){F.value=X.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{C.value=!1}},u=async()=>{await Q()},j=k=>{if(k.manifestUrl&&Hls.isSupported()){b(k);var g=document.getElementById(`video-${k.id}`);if(!g)return;k.hls&&k.hls.destroy(),k.hls=X.createHlsStream(g,k.manifestUrl);return}},b=k=>{k.outputs&&k.outputs.forEach(_=>{if(_.hls){debugger;_.hls.detachMedia(),_.hls.destroy(),delete _.hls}_.playbackConfigurations.forEach(S=>{if(S.hls){debugger;S.hls.detachMedia(),S.hls.destroy(),delete S.hls}})})};return(k,g)=>{const _=ee("PageHeader"),S=ee("router-link");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(_,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(w)},{default:B(()=>[e("div",null,[e("button",{onClick:g[0]||(g[0]=d=>r()),class:"ms-2 btn btn-danger"},g[2]||(g[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),J("Reset All Data ")])),e("button",{onClick:g[1]||(g[1]=d=>u()),class:"ms-2 btn btn-secondary"},g[3]||(g[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",va,[o(F)?(t(),s("div",ga,[g[4]||(g[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(F))},null,8,ba)])):H("",!0),(t(!0),s(O,null,L(G.item,d=>(t(),s("div",null,[e("div",ya,[e("div",$a,[e("div",wa,[d.manifestUrl?(t(),s("video",{key:0,id:`video-${d.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,ha)):(t(),s("div",_a," Channel not yet published "))])]),e("div",ka,[e("div",Sa,[e("div",null,[e("h4",null,[e("img",{src:d.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Ta),N(S,{to:`${n.urlViewChannel}/${d.id}/${o(m)()}`},{default:B(()=>[J(c(d.title),1)]),_:2},1032,["to"])])]),e("div",Ma,[e("div",Ia,[(t(!0),s(O,null,L(d.programs,i=>(t(),s("div",Ca,[e("div",xa,[e("img",{src:i.image,class:"img-fluid border",style:{height:"64px"}},null,8,Va)]),e("div",Pa,c(o(X).moment(i.since).format("hh:mm a"))+"-"+c(o(X).moment(i.till).format("hh:mm a")),1),e("div",Oa,c(i.title),1),e("div",Aa,[(t(!0),s(O,null,L(i.genres,a=>(t(),s("span",Ha,c(a),1))),256))]),o(X).moment().isAfter(i.since)&&o(X).moment().isBefore(i.till)?(t(),s("span",Ua,"Now Playing")):H("",!0)]))),256))])])])])])]))),256))])])]),_:1})}}};function De(n){if(!n.cacheKey)throw Error("Cache Key required.");if(!n.baseUrl)throw Error("Base Url required.");const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,closeWithReturnUrl:D,generateReturnUrl:U,security:m}=ve({appTitle:n.appTitle,pageTitle:n.pageTitle}),V=JSON.parse(JSON.stringify(n.filter));V.pageIndex=V.pageIndex||1,V.pageSize=V.pageSize||5,V.sortField=V.sortField||"",V.sortOrder=V.sortOrder||1,V.updateUrl=V.updateUrl||!1,V.items=V.items||[],V.query=V.query||{},V.query.criteria=V.query.criteria||"";const $=re(V),G=()=>{var d;if(C.value){console.log("Paginated search is currently busy.");return}const g=JSON.parse(localStorage.getItem(n.cacheKey))||{},_=new URLSearchParams(window.location.search),S=$.value;S.query.criteria=_.get("c")||g.criteria||S.query.criteria||"",S.pageIndex=parseInt(_.get("p"),10)||g.pageIndex||S.pageIndex||1,S.pageSize=parseInt(_.get("s"),10)||g.pageSize||S.pageSize||5,S.sortField=_.get("sf")||g.sortField||S.sortField||"",S.sortOrder=parseInt(_.get("so"),10)||g.sortOrder||S.sortOrder||1,S.visible=g.visible||S.visible,(d=n.initializeFilter)==null||d.call(n,$,n.cacheKey)},Q=()=>{if(n.getQuery)return n.getQuery($.value);{const g=$.value;return["?c=",encodeURIComponent(g.query.criteria),"&p=",g.pageIndex,"&s=",g.pageSize,"&sf=",g.sortField,"&so=",g.sortOrder].join("")}},r=()=>{if(n.saveQuery)n.saveQuery($.value,n.cacheKey);else{const g=$.value;localStorage.setItem(n.cacheKey,JSON.stringify({criteria:g.query.criteria,pageIndex:g.pageIndex,pageSize:g.pageSize,sortField:g.sortField,sortOrder:g.sortOrder,visible:g.visible}))}};return{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,closeWithReturnUrl:D,generateReturnUrl:U,security:m,filter:$,initializeFilter:G,getQuery:Q,saveQuery:r,search:async g=>{var S;let _=$.value;if(C.value){console.log("Paginated search is currently busy.");return}g>0&&(_.pageIndex=g);try{C.value=!0,M.value="";const d=Q();_.selected=null,await F(`${n.baseUrl}/${d}`).then(async i=>{var l;Array.isArray(i.data)?_.items=i.data:_=Object.assign(_,i.data);let a=location.pathname;a.endsWith("/")?a+=d:a+="/"+d,_.updateUrl&&window.history.replaceState(d,`${f}-search`,a),_.items.forEach(I=>{I.expand=!1}),r(),(l=n.successAction)==null||l.call(n,$.value)})}catch(d){if(localStorage.removeItem(n.cacheKey),n.failAction)n.failAction(d);else{const i=x.getErrorMessageAsHtml(d);M.value=i,z.error("Error Occured",i)}}finally{C.value=!1,(S=n.finalAction)==null||S.call(n)}},getRowNumber:g=>{const _=$.value;return(_.pageIndex-1)*_.pageSize+(g+1)},setSelected:g=>{const _=$.value;_.selected&&g&&_.selected===g?_.selected=null:(_.selected&&(_.selected.expand=!1),_.selected=g,_.selected.expand=!0)},isSelected:g=>{const _=$.value;return g===null||_.selected===null?!1:g===_.selected}}}const La=["disabled"],Ea={class:"row row-cols-1 row-cols-sm-3"},qa={class:"col"},Ba={class:"form-floating mb-2"},Na={key:0,class:"d-block invalid-feedback"},Ra={class:"col"},Fa={class:"form-floating"},za={class:"col"},Ga={class:"form-floating"},ja={class:"col"},Ya={class:"form-floating mb-2"},Wa={class:"row row-cols-1 row-cols-sm-2"},Ka={class:"col"},Ja={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},Qa={class:"col"},Xa={class:"form-check"},Za=["onUpdate:modelValue","id"],el=["for"],tl={class:"col"},sl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},ol={class:"col"},al={class:"form-check"},ll=["onUpdate:modelValue","id"],nl=["for"],rl={class:"table-responsive mt-2"},il={class:"text-end"},dl={class:"table table-sm mb-0 mt-2"},ul={class:"align-middle"},cl={class:"text-center"},ml=["onUpdate:modelValue"],fl=["onUpdate:modelValue"],pl=["onUpdate:modelValue"],vl={class:"text-start"},gl=["onClick"],bl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),U=n,m=me({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:x.moment().format("YYYY-MM-DD"),formats:[]}}),V={item:{title:{title:se.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("Duration is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},$=be(V,m),G=$e(()=>{const b=x.moment;if(m.durationTime&&m.durationTime!=="00:00:00"&&x.isValidTime(m.durationTime)){const k=b().startOf("day"),g=k.format("YYYY-MM-DD ")+m.durationTime,S=b(g).subtract(k);return m.item.durationInMillis=S.valueOf(),m.item.durationInMillis}return 0});de(async()=>{await r()});const Q=async()=>{const b=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const g=x.clone(b.item);g.durationInMillis=G.value;const _=x.moment(b.item.dateReleased).utc(!0).format();g.dateReleased=_;const S=m.lookups.genres.filter(i=>i.selected).map(i=>i.id);g.genres=S;const d=m.lookups.categories.filter(i=>i.selected).map(i=>i.id);g.categories=d;debugger;await F.post("/api/v1/videos/",g).then(i=>{z.success("Add Video","Video added",{onClose:async()=>{const a=`${U.urlView}/${i.data}`;await Y.push(a)}})})}catch(g){M.value=x.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{C.value=!1}},r=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(b=>{const g=b.data.filter(_=>_.id!==0);m.lookups.genres=g})}catch(b){M.value=x.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},u=()=>{const b={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};m.item.formats.push(b)},j=b=>{m.item.formats.splice(b,1)};return(b,k)=>{const g=ee("router-link"),_=ee("PageHeader"),S=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(_,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:k[0]||(k[0]=d=>Q()),class:"btn btn-primary"},k[6]||(k[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,La),N(g,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:B(()=>k[7]||(k[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(S,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[e("div",null,[e("div",Ea,[e("div",qa,[e("div",Ba,[R(e("input",{"onUpdate:modelValue":k[1]||(k[1]=d=>m.item.title=d),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,m.item.title]]),k[8]||(k[8]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o($).item.title.$error?(t(),s("div",Na,[(t(!0),s(O,null,L(o($).item.title.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):H("",!0)])]),e("div",Ra,[e("div",Fa,[R(e("input",{"onUpdate:modelValue":k[2]||(k[2]=d=>m.item.dateReleased=d),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,m.item.dateReleased]]),k[9]||(k[9]=e("label",{for:"dateReleased",class:"small fw-bold"},"Date Released",-1))])]),e("div",za,[e("div",Ga,[R(e("input",{"onUpdate:modelValue":k[3]||(k[3]=d=>m.durationTime=d),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,m.durationTime]]),k[10]||(k[10]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",ja,[e("div",Ya,[R(e("textarea",{"onUpdate:modelValue":k[4]||(k[4]=d=>m.item.description=d),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,m.item.description]]),k[11]||(k[11]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Wa,[e("div",Ka,[k[12]||(k[12]=e("h5",null,"Genres",-1)),e("div",Ja,[(t(!0),s(O,null,L(m.lookups.genres,d=>(t(),s("div",Qa,[e("div",Xa,[R(e("input",{"onUpdate:modelValue":i=>d.selected=i,class:"form-check-input",type:"checkbox",id:d.name},null,8,Za),[[He,d.selected]]),e("label",{class:"form-check-label",for:d.name},c(d.name),9,el)])]))),256))])]),e("div",tl,[k[13]||(k[13]=e("h5",null,"Categories",-1)),e("div",sl,[(t(!0),s(O,null,L(m.lookups.categories,d=>(t(),s("div",ol,[e("div",al,[R(e("input",{"onUpdate:modelValue":i=>d.selected=i,class:"form-check-input",type:"checkbox",id:d.name},null,8,ll),[[He,d.selected]]),e("label",{class:"form-check-label",for:d.name},c(d.name),9,nl)])]))),256))])])]),e("div",rl,[e("div",il,[e("button",{onClick:k[5]||(k[5]=d=>u()),class:"btn btn-outline-primary btn-sm"},k[14]||(k[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",dl,[k[17]||(k[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(m.item.formats,(d,i)=>(t(),s("tr",ul,[e("td",cl,c(i+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":a=>d.format=a,class:"form-control"},k[15]||(k[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,ml),[[ue,d.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":a=>d.serverUrl=a,type:"text",class:"form-control"},null,8,fl),[[Z,d.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":a=>d.path=a,type:"text",class:"form-control"},null,8,pl),[[Z,d.path]])]),e("td",vl,[e("button",{onClick:a=>j(i),class:"btn btn-outline-warning btn-sm"},k[16]||(k[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,gl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yl=["disabled"],$l={class:"row row-cols-1 row-cols-sm-3"},wl={class:"col"},hl={class:"form-floating mb-2"},_l={key:0,class:"d-block invalid-feedback"},kl={class:"col"},Sl={class:"form-floating"},Tl={class:"col"},Ml={class:"form-floating"},Il={class:"col"},Cl={class:"form-floating mb-2"},xl={class:"col"},Vl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Pl={class:"col"},Ol={class:"form-check"},Al=["onUpdate:modelValue","id"],Hl=["for"],Ul={class:"col"},Dl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Ll={class:"col"},El={class:"form-check"},ql=["onUpdate:modelValue","id"],Bl=["for"],Nl={class:"table-responsive mt-2"},Rl={class:"text-end"},Fl={class:"table table-sm mb-0 mt-2"},zl={class:"align-middle"},Gl={class:"text-center"},jl=["onUpdate:modelValue"],Yl=["value"],Wl=["onUpdate:modelValue"],Kl=["onUpdate:modelValue"],Jl={class:"text-start"},Ql=["onClick"],Xl={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),U=n,m=me({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),V={item:{title:{title:se.withMessage("title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:se.withMessage("durationInMillis is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:se.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},$=be(V,m),G=$e(()=>{const g=x.moment;if(m.durationTime&&m.durationTime!=="00:00:00"&&x.isValidTime(m.durationTime)){const _=g().startOf("day"),S=_.format("YYYY-MM-DD ")+m.durationTime,i=g(S).subtract(_);return m.item.durationInMillis=i.valueOf(),m.item.durationInMillis}return 0});de(async()=>{await r(),await u(),await Q()});const Q=async()=>{try{await F.get(`/api/v1/videos/${U.id}/`).then(g=>{m.item=g.data;const _=x.moment(m.item.dateReleased).format("YYYY-MM-DD");m.item.dateReleased=_;const S=m.lookups.genres,d=m.item.genres.map(l=>l.genre);S.forEach(l=>{l.selected=d.includes(l.id)});const i=m.lookups.categories,a=m.item.categories.map(l=>l.category);i.forEach(l=>{l.selected=a.includes(l.id)})})}catch(g){M.value=x.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},r=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(g=>{const S=g.data.filter(d=>d.id!==0);m.lookups.genres=S})}catch(g){M.value=x.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},u=async()=>{try{await F.get("/api/v1/lookups/video-formats/").then(g=>{const S=g.data.filter(d=>d.id!==0);m.lookups.formats=S})}catch(g){M.value=x.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},j=async()=>{const g=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const S=x.clone(g.item);S.durationInMillis=G.value;const d=x.moment(g.item.dateReleased).utc(!0).format();S.dateReleased=d;const i=m.lookups.genres.filter(l=>l.selected).map(l=>l.id);S.genres=i;const a=m.lookups.categories.filter(l=>l.selected).map(l=>l.id);S.categories=a;debugger;await F.put("/api/v1/videos/",S).then(l=>{z.success("Edit Video","Video edited.",{onClose:async()=>{const I=`${U.urlView}/${U.id}`;await Y.push(I)}})})}catch(S){M.value=x.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{C.value=!1}},b=()=>{const g={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};m.item.formats.push(g)},k=g=>{m.item.formats.splice(g,1)};return(g,_)=>{const S=ee("router-link"),d=ee("PageHeader"),i=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:_[0]||(_[0]=a=>j()),class:"btn btn-primary"},_[6]||(_[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,yl),e("button",{onClick:Q,class:"btn btn-secondary ms-2"},_[7]||(_[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(S,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-2"},{default:B(()=>_[8]||(_[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(i,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[e("div",null,[e("div",$l,[e("div",wl,[e("div",hl,[R(e("input",{"onUpdate:modelValue":_[1]||(_[1]=a=>m.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Z,m.item.title]]),_[9]||(_[9]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o($).item.title.$error?(t(),s("div",_l,[(t(!0),s(O,null,L(o($).item.title.$errors,a=>(t(),s("div",{key:a.$uid},c(a.$message),1))),128))])):H("",!0)])]),e("div",kl,[e("div",Sl,[R(e("input",{"onUpdate:modelValue":_[2]||(_[2]=a=>m.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Z,m.item.dateReleased]]),_[10]||(_[10]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",Tl,[e("div",Ml,[R(e("input",{"onUpdate:modelValue":_[3]||(_[3]=a=>m.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Z,m.durationTime]]),_[11]||(_[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Il,[e("div",Cl,[R(e("textarea",{"onUpdate:modelValue":_[4]||(_[4]=a=>m.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,m.item.description]]),_[12]||(_[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",xl,[_[13]||(_[13]=e("h5",null,"Genres",-1)),e("div",Vl,[(t(!0),s(O,null,L(m.lookups.genres,a=>(t(),s("div",Pl,[e("div",Ol,[R(e("input",{"onUpdate:modelValue":l=>a.selected=l,class:"form-check-input",type:"checkbox",id:a.name},null,8,Al),[[He,a.selected]]),e("label",{class:"form-check-label",for:a.name},c(a.name),9,Hl)])]))),256))])]),e("div",Ul,[_[14]||(_[14]=e("h5",null,"Categories",-1)),e("div",Dl,[(t(!0),s(O,null,L(m.lookups.categories,a=>(t(),s("div",Ll,[e("div",El,[R(e("input",{"onUpdate:modelValue":l=>a.selected=l,class:"form-check-input",type:"checkbox",id:a.name},null,8,ql),[[He,a.selected]]),e("label",{class:"form-check-label",for:a.name},c(a.name),9,Bl)])]))),256))])]),e("div",Nl,[e("div",Rl,[e("button",{onClick:_[5]||(_[5]=a=>b()),class:"btn btn-outline-primary btn-sm"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Fl,[_[17]||(_[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(m.item.formats,(a,l)=>(t(),s("tr",zl,[e("td",Gl,c(l+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":I=>a.format=I,class:"form-control"},[(t(!0),s(O,null,L(m.lookups.formats,I=>(t(),s("option",{value:I.id},c(I.name),9,Yl))),256))],8,jl),[[ue,a.format]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":I=>a.serverUrl=I,type:"text",class:"form-control"},null,8,Wl),[[Z,a.serverUrl]])]),e("td",null,[R(e("input",{"onUpdate:modelValue":I=>a.path=I,type:"text",class:"form-control"},null,8,Kl),[[Z,a.path]])]),e("td",Jl,[e("button",{onClick:I=>k(l),class:"btn btn-outline-warning btn-sm"},_[16]||(_[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ql)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Zl={class:"ms-2"},en={class:"input-group"},tn=["value"],sn={class:"ms-1"},on={class:"input-group"},an={class:"ms-1"},ln={class:"input-group"},nn={class:"table-responsive border shadow-sm"},rn={class:"table table-hover mb-0"},dn=["textContent"],un={class:"d-flex flex-row justify-content-start"},cn={class:"mt-1"},mn=["src"],fn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},pn={class:"ms-2"},vn={key:0},gn={class:"badge bg-primary me-1"},bn={key:1},yn={class:"badge bg-info me-1"},$n={class:"text-center"},wn={class:"text-end"},hn=["onClick"],_n={key:0,class:"fas fa-fw fa-chevron-circle-up"},kn={key:1,class:"fas fa-fw fa-chevron-circle-down"},Sn={key:0},Tn={colspan:"999"},Mn={class:""},In={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},Cn={class:"col mb-2"},xn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},Vn={class:"col col-lg-auto mb-2"},Pn={key:0},On={class:"badge bg-secondary me-1"},An="/api/v1/videos/search",Hn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:C,pageTitle:h,busy:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,security:m,filter:V,initializeFilter:$,getQuery:G,saveQuery:Q,search:r,getRowNumber:u,setSelected:j,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${w==null?void 0:w.userId}/videos/search`,baseUrl:An,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(g,_)=>{const S=g.value,d=new URLSearchParams(window.location.search),i=JSON.parse(localStorage.getItem(_))||{};S.query.genre=d.get("genre")||i.genre||S.query.genre||0,S.query.category=d.get("category")||i.category||S.query.category||0},getQuery:g=>["?c=",encodeURIComponent(g.query.criteria),"&p=",g.pageIndex,"&s=",g.pageSize,"&sf=",g.sortField,"&so=",g.sortOrder,"&genre=",g.query.genre,"&category=",g.query.category].join(""),saveQuery:(g,_)=>{localStorage.setItem(_,JSON.stringify({criteria:g.query.criteria,pageIndex:g.pageIndex,pageSize:g.pageSize,sortField:g.sortField,sortOrder:g.sortOrder,visible:g.visible,genre:g.query.genre,category:g.query.category}))}});de(async()=>{$(),await k(),await r()});const k=async()=>{try{await z.get("/api/v1/lookups/video-genres/").then(g=>{const _=g.data;V.value.lookups.genres=_})}catch(g){F.value=X.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}};return(g,_)=>{const S=ee("router-link"),d=ee("PageHeader"),i=ee("m-pagination"),a=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(d,{"page-icon":"fas fa-fw fa-video",pageTitle:o(h)},{default:B(()=>[N(S,{to:n.urlAdd,class:"btn btn-primary"},{default:B(()=>_[5]||(_[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Zl,[e("div",en,[_[6]||(_[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":_[0]||(_[0]=l=>o(V).query.genre=l),class:"form-select"},[(t(!0),s(O,null,L(o(V).lookups.genres,l=>(t(),s("option",{value:l.id},c(l.name),9,tn))),256))],512),[[ue,o(V).query.genre]])])]),e("div",sn,[e("div",on,[_[8]||(_[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":_[1]||(_[1]=l=>o(V).query.category=l),class:"form-select"},_[7]||(_[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(V).query.category]])])]),e("div",an,[e("div",ln,[R(e("input",{"onUpdate:modelValue":_[2]||(_[2]=l=>o(V).query.criteria=l),onKeyup:_[3]||(_[3]=Ue(l=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(V).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[4]||(_[4]=l=>o(r)(1))},_[9]||(_[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(a,{errorMessage:o(F)},{default:B(()=>[e("div",nn,[e("table",rn,[_[14]||(_[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(o(V).items,(l,I)=>(t(),s(O,{key:l.videoId},[e("tr",null,[e("td",{textContent:c(o(u)(I)),class:"text-center"},null,8,dn),e("td",null,[e("div",un,[e("div",null,[l.thumbnails.length>0?(t(!0),s(O,{key:0},L(l.thumbnails,y=>(t(),s("div",cn,[e("img",{src:y.url,class:"img-fuild border",width:"128"},null,8,mn)]))),256)):(t(),s("img",fn))]),e("div",pn,[N(S,{to:`${n.urlView}/${l.videoId}`,class:"d-inline-block text-truncate link-offset-2"},{default:B(()=>[J(c(l.title),1)]),_:2},1032,["to"]),e("div",null,[l.categories.length>0?(t(),s("div",vn,[(t(!0),s(O,null,L(l.categories,y=>(t(),s("span",gn,c(y.categoryName),1))),256))])):H("",!0),l.genres.length>0?(t(),s("div",bn,[(t(!0),s(O,null,L(l.genres,y=>(t(),s("span",yn,c(y.genreName),1))),256))])):H("",!0)])])])]),e("td",$n,c(o(X).moment.utc(l.durationInMillis).format("HH:mm:ss")),1),e("td",wn,[e("button",{onClick:y=>l.expand=!l.expand,class:ae([[l.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[l.expand?(t(),s("span",_n)):(t(),s("span",kn))],10,hn)])]),l.expand?(t(),s("tr",Sn,[_[13]||(_[13]=e("td",null,null,-1)),e("td",Tn,[e("div",Mn,[e("div",In,[e("div",Cn,[_[10]||(_[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,c(l.description),1)]),e("div",xn,[_[11]||(_[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,c(o(Ze).utc(l.dateReleased).format("l")),1)]),e("div",Vn,[_[12]||(_[12]=e("h6",{class:"fw-bold"},"Formats",-1)),l.formats.length>0?(t(),s("div",Pn,[(t(!0),s(O,null,L(l.formats,y=>(t(),s("span",On,c(y.formatName),1))),256))])):H("",!0)])])])])])):H("",!0)],64))),128))]),_:1},512),[[Te,o(V).items.length>0]])])]),N(i,{filter:o(V),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Un={key:0},Dn={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ln={class:"nav-item",role:"presentation"},En={class:"nav-item",role:"presentation"},qn={class:"nav-item",role:"presentation"},Bn={class:"nav-item",role:"presentation"},Nn={class:"tab-content",id:"myTabContent"},Rn={class:"mt-2"},Fn={class:"row row-cols-1 row-cols-sm-2"},zn={class:"col"},Gn=["id"],jn={class:"text-end"},Yn={class:"col"},Wn={class:"col"},Kn={class:"form-floating mb-2"},Jn={class:"row row-cols-1 row-cols-sm-2"},Qn={class:"col"},Xn={class:"form-floating mb-2"},Zn={class:"col"},er={class:"form-floating mb-2"},tr={class:"col"},sr={class:"form-floating mb-2"},or={class:"mt-1"},ar={class:"badge bg-info me-1"},lr={class:"badge bg-primary me-1"},nr={class:"mt-2"},rr={class:"table-responsive border"},ir={class:"table table-hover mb-0"},dr={class:"table-group-divider"},ur={class:"align-middle"},cr={class:"text-center"},mr={class:"mt-2"},fr={class:"text-end"},pr={class:"table-responsive border mt-2"},vr={class:"table table-hover mb-0 caption-top"},gr={class:"mt-2"},br={class:"table-responsive"},yr={class:"table table-hover mb-0 caption-top"},$r={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){const f=n,{appTitle:w,pageTitle:C,busy:h,isDirty:P,validations:M,infoMessage:Y,warningMessage:F,errorMessage:x,router:z,axios:X,utils:D,toasts:U,close:m,closeWithReturnUrl:V,generateReturnUrl:$,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});Se("$config");const Q=ge();Q.user;const r=me({user:Q.user,item:null,hls:null}),u=re();de(async()=>{await g(),u.value=D.getPageTab("video")||"information-tab"}),Ee(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const j=i=>{D.setPageTab("video",i),u.value=i},b=i=>i!==u.value?"":"active",k=i=>i!==u.value?"":"show active",g=async()=>{const i=r;if(!h.value)try{h.value=!0,x.value="",r.item=null;const a=`/api/v1/videos/${f.id}/`;await X.get(a).then(l=>{i.item=l.data,i.item.duration=D.moment.utc(i.item.durationInMillis).format("HH:mm:ss"),i.item.dateReleased=D.moment.utc(i.item.dateReleased).format("ll")}),S()}catch(a){x.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await g()},S=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),r.hls&&r.hls.destroy();const a=`video-${r.item.videoId}`;var i=document.getElementById(a);const l=r.item.formats.find(y=>y.formatName==="HLS"),I=l.serverUrl+l.path;r.hls=D.createHlsStream(i,I,!1)}},d=async()=>{if(!h.value)try{h.value=!0,x.value="";const i=`/api/v1/videos/${f.id}/get-blank-frames/`;await X.post(i).then(a=>{}),h.value=!1,await _()}catch(i){x.value=D.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{h.value=!1}};return(i,a)=>{const l=ee("router-link"),I=ee("PageHeader"),y=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(I,{"page-icon":"fas fa-fw fa-video",pageTitle:o(C)},{default:B(()=>[N(l,{to:`${n.urlAddVodSource}/${o($)()}&videoId=${n.id}`,class:"btn btn-primary"},{default:B(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-plus"},null,-1),J("Create VOD ")])),_:1},8,["to"]),N(l,{to:`${n.urlEdit}/${n.id}`,class:"btn btn-primary ms-1"},{default:B(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=p=>_()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=p=>o(V)(f.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(x)},{default:B(()=>[r.item?(t(),s("div",Un,[e("div",null,[e("ul",Dn,[e("li",Ln,[e("button",{onClick:a[2]||(a[2]=p=>j("information-tab")),class:ae([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",En,[e("button",{onClick:a[3]||(a[3]=p=>j("formats-tab")),class:ae([b("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",qn,[e("button",{onClick:a[4]||(a[4]=p=>j("blankFrames-tab")),class:ae([b("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",Bn,[e("button",{onClick:a[5]||(a[5]=p=>j("vodSources-tab")),class:ae([b("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",Nn,[e("div",{class:ae([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Rn,[e("div",Fn,[e("div",zn,[e("video",{id:`video-${r.item.videoId}`,controls:"",muted:"",autoplay:"",class:"card-img-top object-fit-contain border"},null,8,Gn),e("div",jn,[e("button",{onClick:a[6]||(a[6]=p=>r.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},a[16]||(a[16]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])]),e("div",Yn,[e("div",Wn,[e("div",Kn,[R(e("input",{"onUpdate:modelValue":a[7]||(a[7]=p=>r.item.title=p),type:"text",class:"form-control",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,r.item.title]]),a[17]||(a[17]=e("label",{for:"title"},"Title",-1))])]),e("div",Jn,[e("div",Qn,[e("div",Xn,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=p=>r.item.dateReleased=p),type:"text",class:"form-control",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Z,r.item.dateReleased]]),a[18]||(a[18]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Zn,[e("div",er,[R(e("input",{"onUpdate:modelValue":a[9]||(a[9]=p=>r.item.duration=p),type:"text",class:"form-control",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Z,r.item.duration]]),a[19]||(a[19]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",tr,[e("div",sr,[R(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=p=>r.item.description=p),type:"text",class:"form-control",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,r.item.description]]),a[20]||(a[20]=e("label",{for:"description"},"Description",-1))])]),e("div",or,[(t(!0),s(O,null,L(r.item.genres,p=>(t(),s("span",ar,c(p.genreName),1))),256)),(t(!0),s(O,null,L(r.item.categories,p=>(t(),s("span",lr,c(p.categoryName),1))),256))])])])])],2),e("div",{class:ae([k("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",nr,[e("div",rr,[e("table",ir,[a[21]||(a[21]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",dr,[(t(!0),s(O,null,L(r.item.formats,(p,K)=>(t(),s("tr",ur,[e("td",cr,c(K+1),1),e("td",null,c(p.formatName),1),e("td",null,c(p.serverUrl),1),e("td",null,c(p.path),1)]))),256))])])])])],2),e("div",{class:ae([k("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",mr,[e("div",null,[e("div",fr,[e("button",{onClick:a[11]||(a[11]=p=>d()),class:"btn btn-outline-primary btn-sm"},a[22]||(a[22]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),J("Process ")]))]),e("div",pr,[e("table",vr,[a[23]||(a[23]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.blankFrames,(p,K)=>(t(),s("tr",{key:p.videoBlankFrameId},[e("td",null,c(K+1),1),e("td",null,c(o(D).moment.utc(p.startInMillis).format("HH:mm:ss")),1),e("td",null,c(o(D).moment.utc(p.endInMillis).format("HH:mm:ss")),1),e("td",null,c(o(D).moment.utc(p.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,r.item.blankFrames.length>0]])])])])])],2),e("div",{class:ae([k("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",gr,[e("div",br,[e("table",yr,[a[24]||(a[24]=e("caption",null,"VOD Sources",-1)),a[25]||(a[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.vodSources,(p,K)=>(t(),s("tr",{key:p.vodSourceId},[e("td",null,c(K+1),1),e("td",null,[N(l,{to:`${f.urlViewVodSource}/${encodeURIComponent(p.vodSourceId)}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(p.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,r.item.vodSources.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},wr=["disabled"],hr={class:"form-floating mb-2"},_r={key:0,class:"d-block invalid-feedback"},kr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),U=n,m=me({lookups:{},item:{name:null}}),V={item:{name:{required:se.withMessage("name is required.",oe),$autoDirty:!0,$lazy:!0}}},$=be(V,m);de(async()=>{});const G=async()=>{const Q=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const u=x.clone(Q.item);await F.post("/api/v1/sourcegroups/",u).then(j=>{z.success("Add Source Group","Source group added.",{onClose:async()=>{const b=`${U.urlView}/${j.data}`;await Y.push(b)}})})}catch(u){M.value=x.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{C.value=!1}};return(Q,r)=>{const u=ee("router-link"),j=ee("PageHeader"),b=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(j,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:r[0]||(r[0]=k=>G()),class:"btn btn-primary"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wr),N(u,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:B(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(b,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[e("div",null,[e("div",hr,[R(e("input",{"onUpdate:modelValue":r[1]||(r[1]=k=>m.item.name=k),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,m.item.name]]),r[4]||(r[4]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",_r,[(t(!0),s(O,null,L(o($).item.name.$errors,k=>(t(),s("div",{key:k.$uid},c(k.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Sr={key:0,class:"d-flex justify-content-end"},Tr=["disabled"],Mr={key:0},Ir={class:"row row-cols-1 row-cols-sm-2"},Cr={class:"col"},xr={class:"form-floating mb-2"},Vr={key:0,class:"d-block invalid-feedback"},Pr={class:"col"},Or={class:"form-floating mb-2"},Ar={key:0,class:"d-block invalid-feedback"},Hr={class:"row row-cols-sm-2"},Ur={class:"col"},Dr={class:"form-floating mb-2"},Lr={class:"form-floating mb-2"},Er={key:0,class:"d-block invalid-feedback"},qr={class:"form-floating mb-2"},Br={key:0,class:"d-block invalid-feedback"},Nr={class:"col"},Rr={class:"form-floating mb-2"},Ke={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),U=n,m=me({editorElementId:"editor",htmlContent:"",item:null}),V={item:{title:{required:se.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},eidr:{required:se.withMessage("eidr is required.",oe),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:se.withMessage("eidrPrefix is required.",oe),$autoDirty:!0,$lazy:!0}},htmlContent:{required:se.withMessage("Content is required.",oe),$autoDirty:!0,$lazy:!0}},$=be(V,m);de(async()=>{await r()});const G=()=>{const j=m;var b=document.getElementById(j.editorElementId);b.innerHTML=j.htmlContent},Q=j=>{const b=m;b.htmlContent=j.target.innerHTML;var k=document.getElementById(b.editorElementId);k.value=b.htmlContent},r=async()=>{const j=m;if(!C.value)try{C.value=!0,m.item=null,await F.get(`/api/v1/movies/${U.id}`).then(b=>{j.item=b.data,j.htmlContent=j.item.description}),G()}catch(b){M.value=x.getErrorMessageAsHtml(b)}finally{C.value=!1}},u=async()=>{const j=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const k=x.clone(j.item);k.description=j.htmlContent,await F.put("/api/v1/movies",k).then(g=>{z.success("Edit Movie","Movie edited",{onClose:async()=>{const _=`${U.urlView}/${U.id}`;await Y.push(_)}})})}catch(k){M.value=x.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{C.value=!1}};return(j,b)=>{const k=ee("router-link"),g=ee("PageHeader"),_=ee("PageBody");return t(),s("div",null,[N(g,{"page-icon":"fas fa-fw fa-film",pageTitle:o(w),"header-break":"row row-cols-2 row-cols-sm-2"},{default:B(()=>[m.item?(t(),s("div",Sr,[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:b[0]||(b[0]=S=>u()),class:"btn btn-primary"},b[7]||(b[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Tr),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},b[8]||(b[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(k,{to:`${U.urlView}/${U.id}`,class:"ms-1 btn btn-secondary"},{default:B(()=>b[9]||(b[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):H("",!0)]),_:1},8,["pageTitle"]),N(_,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[m.item?(t(),s("div",Mr,[e("div",Ir,[e("div",Cr,[e("div",xr,[R(e("input",{"onUpdate:modelValue":b[1]||(b[1]=S=>m.item.eidrPrefix=S),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Z,m.item.eidrPrefix]]),b[10]||(b[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o($).item.eidrPrefix.$error?(t(),s("div",Vr,[(t(!0),s(O,null,L(o($).item.eidrPrefix.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):H("",!0)])]),e("div",Pr,[e("div",Or,[R(e("input",{"onUpdate:modelValue":b[2]||(b[2]=S=>m.item.eidr=S),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Z,m.item.eidr]]),b[11]||(b[11]=e("label",{for:"title"},"Eidr",-1)),o($).item.eidr.$error?(t(),s("div",Ar,[(t(!0),s(O,null,L(o($).item.eidr.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):H("",!0)])])]),e("div",Hr,[e("div",Ur,[e("div",Dr,[R(e("input",{"onUpdate:modelValue":b[3]||(b[3]=S=>m.item.releaseYear=S),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Z,m.item.releaseYear]]),b[12]||(b[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Lr,[R(e("input",{"onUpdate:modelValue":b[4]||(b[4]=S=>m.item.title=S),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Z,m.item.title]]),b[13]||(b[13]=e("label",{for:"title"},"Title",-1)),o($).item.title.$error?(t(),s("div",Er,[(t(!0),s(O,null,L(o($).item.title.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",qr,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:b[5]||(b[5]=S=>Q(S))},null,32),b[14]||(b[14]=e("label",{for:"editor"},"Content",-1)),o($).htmlContent.$error?(t(),s("div",Br,[(t(!0),s(O,null,L(o($).htmlContent.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):H("",!0)])]),e("div",Nr,[e("div",Rr,[R(e("textarea",{"onUpdate:modelValue":b[6]||(b[6]=S=>m.item.metadata=S),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Z,m.item.metadata]]),b[15]||(b[15]=e("label",{for:"title"},"Metadata",-1))])])])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},Fr={components:{Page:Ke},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function zr(n,f,w,C,h,P){const M=ee("Page");return t(),ce(M,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Gr=Me(Fr,[["render",zr]]),jr={class:"ms-2"},Yr={class:"input-group"},Wr={class:"table-responsive border shadow-sm"},Kr={class:"table table-hover mb-0"},Jr=["textContent"],Qr={key:0,class:"fas fa-fw fa-check-circle text-success"},Xr="/api/v1/sourcegroups/search",Zr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:C,pageTitle:h,busy:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,security:m,filter:V,initializeFilter:$,getQuery:G,saveQuery:Q,search:r,getRowNumber:u,setSelected:j,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${w==null?void 0:w.userId}/source-groups/search`,baseUrl:Xr,filter:{updateUrl:!0}});return de(async()=>{$(),await r()}),(k,g)=>{const _=ee("router-link"),S=ee("PageHeader"),d=ee("m-pagination"),i=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(h)},{default:B(()=>[N(_,{to:n.urlAdd,class:"btn btn-primary"},{default:B(()=>g[3]||(g[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",jr,[e("div",Yr,[R(e("input",{"onUpdate:modelValue":g[0]||(g[0]=a=>o(V).query.criteria=a),onKeyup:g[1]||(g[1]=Ue(a=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Z,o(V).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:g[2]||(g[2]=a=>o(r)(1))},g[4]||(g[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(i,{errorMessage:o(F)},{default:B(()=>[e("div",Wr,[e("table",Kr,[g[5]||(g[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(o(V).items,(a,l)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:c(o(u)(l)),class:"text-center"},null,8,Jr),e("td",null,[N(_,{to:`${n.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:B(()=>[a.arn?(t(),s("span",Qr)):H("",!0),J(" "+c(a.name),1)]),_:2},1032,["to"])]),e("td",null,c(a.channelOutputs),1),e("td",null,c(a.packageConfigurations),1)]))),128))]),_:1},512),[[Te,o(V).items.length>0]])])]),N(d,{filter:o(V),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},ei={key:0},ti={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},si={class:"nav-item",role:"presentation"},oi={class:"nav-item",role:"presentation"},ai={class:"nav-item",role:"presentation"},li={class:"tab-content",id:"myTabContent"},ni={class:"mt-2"},ri={class:"col"},ii={class:"form-floating mb-2"},di={class:"mt-2"},ui={class:"table-responsive border"},ci={class:"table table-hover mb-0"},mi={class:"mt-2"},fi={class:"table-responsive border"},pi={class:"table table-hover mb-0"},vi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const f=n,{appTitle:w,pageTitle:C,busy:h,isDirty:P,validations:M,infoMessage:Y,warningMessage:F,errorMessage:x,router:z,axios:X,utils:D,toasts:U,close:m,closeWithReturnUrl:V,generateReturnUrl:$,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});Se("$config");const Q=ge();Q.user;const r=me({user:Q.user,item:null}),u=re();de(async()=>{await g(),u.value=D.getPageTab("sourceGroup")||"information-tab"});const j=d=>{D.setPageTab("sourceGroup",d),u.value=d},b=d=>d!==u.value?"":"active",k=d=>d!==u.value?"":"show active",g=async()=>{const d=r;if(!h.value)try{h.value=!0,x.value="",r.item=null;const i=`/api/v1/sourcegroups/${f.id}/`;await X.get(i).then(a=>{d.item=a.data})}catch(i){x.value=D.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{if(!h.value)try{h.value=!0,x.value="";const d=`/api/v1/sourcegroups/${f.id}/`;await X.delete(d).then(i=>{U.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${f.urlMain}/`;await z.push(a)}})})}catch(d){x.value=D.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{h.value=!1}},S=async()=>{await g()};return(d,i)=>{const a=ee("PageHeader"),l=ee("router-link"),I=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(C)},{default:B(()=>[e("button",{onClick:i[0]||(i[0]=y=>_()),class:"ms-1 btn btn-warning"},i[7]||(i[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:i[1]||(i[1]=y=>S()),class:"ms-2 btn btn-secondary"},i[8]||(i[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:i[2]||(i[2]=y=>o(V)(f.urlMain)),class:"btn btn-secondary ms-1"},i[9]||(i[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(I,{errorMessage:o(x)},{default:B(()=>[r.item?(t(),s("div",ei,[e("div",null,[e("ul",ti,[e("li",si,[e("button",{onClick:i[3]||(i[3]=y=>j("information-tab")),class:ae([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",oi,[e("button",{onClick:i[4]||(i[4]=y=>j("channelOutputs-tab")),class:ae([b("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",ai,[e("button",{onClick:i[5]||(i[5]=y=>j("packageConfigurations-tab")),class:ae([b("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",li,[e("div",{class:ae([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ni,[e("div",ri,[e("div",ii,[R(e("input",{"onUpdate:modelValue":i[6]||(i[6]=y=>r.item.name=y),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.name]]),i[10]||(i[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:ae([k("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",di,[e("div",ui,[e("table",ci,[i[11]||(i[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.channelOutputs,(y,p)=>(t(),s("tr",{key:y.channelOutputId},[e("td",null,c(p+1),1),e("td",null,[N(l,{to:`${n.urlViewChannel}/${y.channelId}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(y.manifestName),1)]),_:2},1032,["to"])]),e("td",null,c(y.outputType),1)]))),128))]),_:1},512),[[Te,r.item.channelOutputs.length>0]])])])])],2),e("div",{class:ae([k("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",mi,[e("div",fi,[e("table",pi,[i[12]||(i[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.packageConfigurations,(y,p)=>(t(),s("tr",{key:y.packageConfigurationId},[e("td",null,c(p+1),1),e("td",null,[N(l,{to:`${n.urlViewVodSource}/${y.vodSourceId}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(y.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,c(y.path),1),e("td",null,c(y.type),1)]))),128))]),_:1},512),[[Te,r.item.packageConfigurations.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},gi=["disabled"],bi={class:"form-floating mb-2"},yi={key:0,class:"d-block invalid-feedback"},$i={class:"form-floating mb-2"},wi={key:0,class:"d-block invalid-feedback"},hi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),U=n,m=me({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),V={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:se.withMessage("HTTP Configuration Base Url is required.",oe),$autoDirty:!0,$lazy:!0}}},$=be(V,m);de(async()=>{});const G=async()=>{const Q=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const u=x.clone(Q.item);await F.post("/api/v1/sourcelocations/",u).then(j=>{z.success("Add Source Location","Source location added.",{onClose:async()=>{const b=`${U.urlView}/${j.data}`;await Y.push(b)}})})}catch(u){M.value=x.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{C.value=!1}};return(Q,r)=>{const u=ee("router-link"),j=ee("PageHeader"),b=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(j,{"page-icon":"fas fa-fw fa-building",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:r[0]||(r[0]=k=>G()),class:"btn btn-primary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,gi),N(u,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:B(()=>r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(b,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[e("div",null,[e("div",bi,[R(e("input",{"onUpdate:modelValue":r[1]||(r[1]=k=>m.item.name=k),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Z,m.item.name]]),r[5]||(r[5]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",yi,[(t(!0),s(O,null,L(o($).item.name.$errors,k=>(t(),s("div",{key:k.$uid},c(k.$message),1))),128))])):H("",!0)]),e("div",$i,[R(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=k=>m.item.httpConfigurationBaseUrl=k),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Z,m.item.httpConfigurationBaseUrl]]),r[6]||(r[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o($).item.httpConfigurationBaseUrl.$error?(t(),s("div",wi,[(t(!0),s(O,null,L(o($).item.httpConfigurationBaseUrl.$errors,k=>(t(),s("div",{key:k.$uid},c(k.$message),1))),128))])):H("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},_i={components:{Page:Ke},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ki(n,f,w,C,h,P){const M=ee("Page");return t(),ce(M,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const Si=Me(_i,[["render",ki]]),Ti={class:"ms-1"},Mi={class:"input-group"},Ii={class:"table-responsive border shadow-sm"},Ci={class:"table table-hover mb-0"},xi={class:"text-center"},Vi=["textContent"],Pi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Oi={class:"text-center"},Ai=["onUpdate:modelValue"],Hi="/api/v1/sourcelocations/search",Ui={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:C,pageTitle:h,busy:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,security:m,filter:V,initializeFilter:$,getQuery:G,saveQuery:Q,search:r,getRowNumber:u,setSelected:j,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${w==null?void 0:w.userId}/source-locations/search`,baseUrl:Hi,filter:{updateUrl:!0}}),k=$e(()=>{const S=V.value;return S&&S.items?S.items.filter(a=>a.selected):null});de(async()=>{$(),await r()});const g=async()=>{if(!(k.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!P.value){F.value=null;try{P.value=!0;const i={sourceLocationIds:k.value.map(a=>a.sourceLocationId)};await z.post("/api/v1/sourceLocations/publish/",i).then(a=>{D.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),P.value=!1,await r()}catch(d){F.value=X.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{P.value=!1}}},_=async()=>{if(!(k.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!P.value){F.value=null;try{P.value=!0;const i={sourceLocationIds:k.value.map(a=>a.sourceLocationId)};await z.post("/api/v1/sourceLocations/unpublish/",i).then(a=>{D.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),P.value=!1,await r()}catch(d){F.value=X.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{P.value=!1}}};return(S,d)=>{const i=ee("router-link"),a=ee("PageHeader"),l=ee("m-pagination"),I=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(h)},{default:B(()=>[N(i,{to:n.urlAdd,class:"btn btn-primary ms-2"},{default:B(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Ti,[e("div",Mi,[R(e("input",{"onUpdate:modelValue":d[0]||(d[0]=y=>o(V).query.criteria=y),onKeyup:d[1]||(d[1]=Ue(y=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(V).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=y=>o(r)(1))},d[4]||(d[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(I,{errorMessage:o(F)},{default:B(()=>[e("div",Ii,[e("table",Ci,[e("thead",null,[e("tr",null,[d[7]||(d[7]=e("td",{class:"text-center"},"#",-1)),d[8]||(d[8]=e("th",null,"Name",-1)),d[9]||(d[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",xi,[k.value.length?(t(),s(O,{key:0},[e("button",{onClick:g,class:"btn btn-primary btn-sm"},d[5]||(d[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:_,class:"btn btn-warning btn-sm ms-1"},d[6]||(d[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0)])])]),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(o(V).items,(y,p)=>(t(),s("tr",{key:y.sourceLocationId},[e("td",{textContent:c(o(u)(p)),class:"text-center"},null,8,Vi),e("td",null,[N(i,{to:`${n.urlView}/${y.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:B(()=>[y.arn?(t(),s("i",Pi)):H("",!0),e("span",null,c(y.name),1)]),_:2},1032,["to"])]),e("td",null,c(y.httpConfigurationBaseUrl),1),e("td",Oi,[R(e("input",{"onUpdate:modelValue":K=>y.selected=K,type:"checkbox",class:"form-check-input"},null,8,Ai),[[He,y.selected]])])]))),128))]),_:1},512),[[Te,o(V).items.length>0]])])]),N(l,{filter:o(V),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Di={key:0},Li={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Ei={class:"nav-item",role:"presentation"},qi={class:"nav-item",role:"presentation"},Bi={class:"nav-item",role:"presentation"},Ni={class:"tab-content",id:"myTabContent"},Ri={class:"mt-2"},Fi={class:"col"},zi={class:"form-floating mb-2"},Gi={class:"col"},ji={class:"form-floating mb-2"},Yi={class:"mt-2"},Wi={class:"table-responsive border"},Ki={class:"table table-hover mb-0"},Ji={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Qi={class:"mt-2"},Xi={class:"table-responsive border"},Zi={class:"table table-hover mb-0"},ed={key:0,class:"fas fa-fw fa-check-circle text-success"},td={class:"badge bg-info"},sd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const f=n,{appTitle:w,pageTitle:C,busy:h,isDirty:P,validations:M,infoMessage:Y,warningMessage:F,errorMessage:x,router:z,axios:X,utils:D,toasts:U,close:m,closeWithReturnUrl:V,generateReturnUrl:$,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});Se("$config");const Q=ge();Q.user;const r=me({user:Q.user,item:null}),u=re();de(async()=>{await g(),u.value=D.getPageTab("sourceLocation")||"information-tab"});const j=i=>{D.setPageTab("sourceLocation",i),u.value=i},b=i=>i!==u.value?"":"active",k=i=>i!==u.value?"":"show active",g=async()=>{const i=r;if(!h.value)try{h.value=!0,x.value="",r.item=null;const a=`/api/v1/sourcelocations/${f.id}/`;await X.get(a).then(l=>{i.item=l.data})}catch(a){x.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await g()},S=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!h.value){x.value=null;try{h.value=!0;const a={sourceLocationIds:[f.id]};await X.post("/api/v1/sourcelocations/publish/",a).then(l=>{U.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),h.value=!1,await _()}catch(a){x.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!h.value){x.value=null;try{h.value=!0;const a={sourceLocationIds:[f.id]};await X.post("/api/v1/sourcelocations/unpublish/",a).then(l=>{U.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),h.value=!1,await _()}catch(a){x.value=D.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}}};return(i,a)=>{const l=ee("PageHeader"),I=ee("router-link"),y=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(l,{"page-icon":"fas fa-fw fa-building",pageTitle:o(C)},{default:B(()=>[r.item?(t(),s(O,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=p=>d()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=p=>S()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),e("button",{onClick:a[2]||(a[2]=p=>_()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=p=>o(V)(f.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(x)},{default:B(()=>[r.item?(t(),s("div",Di,[e("div",null,[e("ul",Li,[e("li",Ei,[e("button",{onClick:a[4]||(a[4]=p=>j("information-tab")),class:ae([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",qi,[e("button",{onClick:a[5]||(a[5]=p=>j("vodSources-tab")),class:ae([b("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Bi,[e("button",{onClick:a[6]||(a[6]=p=>j("programs-tab")),class:ae([b("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Ni,[e("div",{class:ae([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Ri,[e("div",Fi,[e("div",zi,[R(e("input",{"onUpdate:modelValue":a[7]||(a[7]=p=>r.item.name=p),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",Gi,[e("div",ji,[R(e("input",{"onUpdate:modelValue":a[8]||(a[8]=p=>r.item.httpConfigurationBaseUrl=p),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Z,r.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:ae([k("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Yi,[e("div",Wi,[e("table",Ki,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.vodSources,(p,K)=>(t(),s("tr",{key:p.vodSourceId},[e("td",null,c(K+1),1),e("td",null,[p.arn?(t(),s("span",Ji)):H("",!0),N(I,{to:`${f.urlViewVodSource}/${encodeURIComponent(p.vodSourceId)}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(p.name),1)]),_:2},1032,["to"])]),e("td",null,[N(I,{to:`${f.urlViewVideo}/${encodeURIComponent(p.video.videoId)}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(p.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,c(o(D).moment.utc(p.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Te,r.item.vodSources.length>0]])])])])],2),e("div",{class:ae([k("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Qi,[e("div",Xi,[e("table",Zi,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.programs,(p,K)=>(t(),s("tr",{key:p.programId},[e("td",null,c(K+1),1),e("td",null,[N(I,{to:`${f.urlViewChannel}/${encodeURIComponent(p.channel.channelId)}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(p.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[p.arn?(t(),s("span",ed)):H("",!0),J(" "+c(p.name)+" ",1),e("div",null," Start: "+c(o(D).moment.utc(p.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+c(o(D).moment.utc(p.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[J(c(o(D).moment(p.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",td,c(o(D).moment(p.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Te,r.item.programs.length>0]])])])])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},od=["disabled"],ad={class:"col"},ld={class:"form-floating mb-2"},nd={key:0,class:"d-block invalid-feedback"},rd={class:"row row-cols-1 row-cols-sm-2"},id={class:"col"},dd={class:"form-floating mb-2"},ud=["value"],cd={key:0,class:"d-block invalid-feedback"},md={class:"col"},fd={class:"form-floating mb-2"},pd=["readonly"],vd=["value"],gd={key:0,class:"d-block invalid-feedback"},bd={key:0},yd={class:"d-flex flex-row justify-content-start"},$d={key:0,class:"d-inline invalid-feedback"},wd={class:"table-responsive border mt-1"},hd={class:"table mb-0 caption-top"},_d={class:"align-middle"},kd=["onUpdate:modelValue"],Sd=["value"],Td=["onUpdate:modelValue"],Md=["value"],Id=["onClick"],Cd={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,route:F,axios:x,utils:z,toasts:X,close:D,closeWithReturnUrl:U,security:m}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),V=n,$=me({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),G=(a,l,I)=>a.length>0,Q={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",G),$each:se.forEach({path:{required:se.withMessage("Path is required.",oe)},sourceGroupId:{required:se.withMessage("Source Group is required.",oe)}}),$autoDirty:!0,$lazy:!0}}},r=be(Q,$);de(async()=>{await u(),await j()});const u=async()=>{try{await x.get("/api/v1/sourcegroups/lookup/").then(l=>{$.lookups.sourceGroups=l.data})}catch(a){M.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},j=async()=>{try{if(await x.get("/api/v1/sourcelocations/lookup/").then(l=>{$.lookups.sourceLocations=l.data}),$.lookups.sourceLocations.length===1){const l=$.lookups.sourceLocations[0];$.selected.sourceLocation=l,await b()}}catch(a){M.value=z.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},b=async()=>{const a=$.selected.sourceLocation;$.item.sourceLocationId=a.id,await k(a.baseUrl)},k=async a=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await x.get(l).then(y=>{$.lookups.videos=y.data,$.lookups.videos.length===1&&($.item.videoId=$.lookups.videos[0].id)});const I=F.query.videoId;if(I){const y=$.lookups.videos.find(p=>p.id==I);y&&($.selected.video=y,await g())}}catch(l){M.value=z.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},g=async()=>{$.item.videoId=$.selected.video.id,await _($.item.videoId)},_=async a=>{try{const l=`/api/v1/videos/${a}/formats`;await x.get(l).then(I=>{$.selected.video.formats=I.data})}catch(l){M.value=z.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},S=async()=>{const a=$;if(C.value)return;if(!await r.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const I=z.clone(a.item),y=a.item.packageConfigurations.filter(p=>p.selectedFormat&&p.sourceGroupId);y.forEach(p=>{const K=p.selectedFormat;p.path=K.path,p.format=K.format,delete p.selectedFormat}),I.packageConfigurations=y,delete I.video,await x.post("/api/v1/vodSources/",I).then(p=>{debugger;X.success("Add VOD Source","VOD source added",{onClose:async()=>{const K=`${V.urlView}/${p.data}`;await Y.push(K)}})})}catch(I){M.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{C.value=!1}},d=()=>{const a={sourceGroupId:null,selectedFormat:null},l=$.selected.video;if(l){const I=l.formats.find(y=>y.formatName==="HLS");a.path=`${I.serverUrl}${I.path}`}$.item.packageConfigurations.push(a)},i=a=>{$.item.packageConfigurations.splice(a,1)};return(a,l)=>{const I=ee("PageHeader"),y=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(I,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o(r).$dirty&&o(r).$invalid,onClick:l[0]||(l[0]=p=>S()),class:"btn btn-primary"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,od),e("button",{onClick:l[1]||(l[1]=p=>o(U)(V.urlMain)),class:"btn btn-secondary ms-1"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(y,{errorMessage:o(M),vuelidate:o(r)},{default:B(()=>[e("div",null,[e("div",ad,[e("div",ld,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=p=>$.item.name=p),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,$.item.name]]),l[8]||(l[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(r).item.name.$error?(t(),s("div",nd,[(t(!0),s(O,null,L(o(r).item.name.$errors,p=>(t(),s("div",{key:p.$uid},c(p.$message),1))),128))])):H("",!0)])]),e("div",rd,[e("div",id,[e("div",dd,[R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=p=>$.selected.sourceLocation=p),onChange:l[4]||(l[4]=p=>b()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L($.lookups.sourceLocations,p=>(t(),s("option",{value:p},c(p.name),9,ud))),256))],544),[[ue,$.selected.sourceLocation]]),l[9]||(l[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(r).item.sourceLocationId.$error?(t(),s("div",cd,[(t(!0),s(O,null,L(o(r).item.sourceLocationId.$errors,p=>(t(),s("div",{key:p.$uid},c(p.$message),1))),128))])):H("",!0)])]),e("div",md,[e("div",fd,[R(e("select",{"onUpdate:modelValue":l[5]||(l[5]=p=>$.selected.video=p),onChange:g,class:"form-select",id:"videoId",readonly:$.item.packageConfigurations.length>0},[(t(!0),s(O,null,L($.lookups.videos,p=>(t(),s("option",{value:p},c(p.name),9,vd))),256))],40,pd),[[ue,$.selected.video]]),l[10]||(l[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(r).item.videoId.$error?(t(),s("div",gd,[(t(!0),s(O,null,L(o(r).item.videoId.$errors,p=>(t(),s("div",{key:p.$uid},c(p.$message),1))),128))])):H("",!0)])])]),$.item.videoId?(t(),s("div",bd,[e("div",yd,[e("fieldset",null,[e("legend",null,[l[12]||(l[12]=J(" Package Configurations ")),o(r).item.packageConfigurations.$error?(t(),s("span",$d,l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:d,class:"btn btn-outline-primary"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",wd,[e("table",hd,[l[15]||(l[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",_d,[(t(!0),s(O,null,L($.item.packageConfigurations,(p,K)=>(t(),s("tr",null,[e("td",null,c(K+1),1),e("td",null,[R(e("select",{"onUpdate:modelValue":q=>p.selectedFormat=q,class:"form-select",id:"videoId"},[(t(!0),s(O,null,L($.selected.video.formats,q=>(t(),s("option",{value:q},c(q.path),9,Sd))),256))],8,kd),[[ue,p.selectedFormat]]),o(r).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(r).item.packageConfigurations.$each.$response.$errors[K].path,q=>(t(),s("div",{key:q,class:"d-block invalid-feedback"},c(q.$message),1))),128)):H("",!0)]),e("td",null,[p.selectedFormat?(t(),s(O,{key:0},[J(c(p.selectedFormat.formatName),1)],64)):H("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":q=>p.sourceGroupId=q,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L($.lookups.sourceGroups,q=>(t(),s("option",{value:q.id},c(q.name),9,Md))),256))],8,Td),[[ue,p.sourceGroupId]]),o(r).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(r).item.packageConfigurations.$each.$response.$errors[K].path,q=>(t(),s("div",{key:q,class:"d-block invalid-feedback"},c(q.$message),1))),128)):H("",!0)])]),e("td",null,[e("button",{onClick:q=>i(K),class:"btn btn-outline-warning"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Id)])]))),256))])])])])):H("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},xd=["disabled"],Vd={key:0},Pd={class:"col"},Od={class:"form-floating mb-2"},Ad={key:0,class:"d-block invalid-feedback"},Hd={class:"row row-cols-1 row-cols-sm-2"},Ud={class:"col"},Dd={class:"form-floating mb-2"},Ld=["value"],Ed={key:0,class:"d-block invalid-feedback"},qd={class:"col"},Bd={class:"form-floating mb-2"},Nd=["disabled"],Rd=["value"],Fd={key:0,class:"d-block invalid-feedback"},zd={key:0},Gd={class:"d-flex flex-row justify-content-between mt-3"},jd={key:0,class:"d-inline invalid-feedback"},Yd={class:"table-responsive border mt-1"},Wd={class:"table mb-0 caption-top"},Kd={class:"input-group mb-1"},Jd=["onUpdate:modelValue"],Qd=["onUpdate:modelValue"],Xd=["value"],Zd=["onUpdate:modelValue"],eu=["onClick"],tu={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),U=n,m=me({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),V=(a,l,I)=>a.length>0,$={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:se.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:se.withMessage("PackageConfigurations is required.",V),$each:se.forEach({path:{required:se.withMessage("Path is required.",oe)},sourceGroupId:{required:se.withMessage("Source Group is required.",oe)}})}}},G=be($,m);de(async()=>{await Q(),await u(),await j()});const Q=async()=>{await r()},r=async()=>{const a=m;if(!C.value)try{C.value=!0,M.value="",m.item=null;const l=`/api/v1/vodsources/${U.id}/`;await F.get(l).then(I=>{a.item=I.data;const y=a.item,p=x.moment.utc(a.item.video.durationInMillis).format("HH:mm:ss");y.video.duration=p})}catch(l){M.value=x.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{C.value=!1}},u=async()=>{try{await F.get("/api/v1/sourcegroups/lookup/").then(l=>{m.lookups.sourceGroups=l.data})}catch(a){M.value=x.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},j=async()=>{try{if(await F.get("/api/v1/sourcelocations/lookup/").then(l=>{m.lookups.sourceLocations=l.data}),m.lookups.sourceLocations.length>0){const l=m.lookups.sourceLocations.find(I=>I.id===m.item.sourceLocationId);m.selected.sourceLocation=l,await b()}}catch(a){M.value=x.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},b=async()=>{const a=m.selected.sourceLocation;m.item.sourceLocationId=a.id,await k(a.baseUrl)},k=async a=>{try{const l=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await F.get(l).then(I=>{if(m.lookups.videos=I.data,m.lookups.videos.length>0){const y=m.lookups.videos.find(p=>p.id==m.item.videoId);m.selected.video=y}})}catch(l){M.value=x.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},g=async()=>{m.item.videoId=m.selected.video.id,await _(m.item.videoId)},_=async a=>{try{const l=`/api/v1/videos/${a}/formats`;await F.get(l).then(I=>{m.selected.video.formats=I.data;debugger})}catch(l){M.value=x.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},S=async()=>{const a=m;if(C.value)return;if(!await G.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const I=x.clone(a.item);I.videoId=m.selected.video.id,delete I.video,await F.put("/api/v1/vodsources/",I).then(y=>{z.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const p=`${U.urlView}/${U.id}`;await Y.push(p)}})})}catch(I){M.value=x.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{C.value=!1}},d=()=>{debugger;const a={path:"",sourceGroupId:null,type:"HLS"},l=m.item.video;if(l){const I=l.formats.find(y=>y.formatName==="HLS");debugger;a.path=`${I.serverUrl}${I.path}`}m.item.packageConfigurations.push(a)},i=a=>{m.item.packageConfigurations.splice(a,1)};return(a,l)=>{const I=ee("router-link"),y=ee("PageHeader"),p=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(y,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o(G).$dirty&&o(G).$invalid,onClick:l[0]||(l[0]=K=>S()),class:"btn btn-primary"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,xd),e("button",{onClick:l[1]||(l[1]=K=>Q()),class:"btn btn-secondary ms-2"},l[7]||(l[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(I,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:B(()=>l[8]||(l[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(p,{errorMessage:o(M),vuelidate:o(G)},{default:B(()=>[m.item?(t(),s("div",Vd,[e("div",Pd,[e("div",Od,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=K=>m.item.name=K),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,m.item.name]]),l[9]||(l[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(G).item.name.$error?(t(),s("div",Ad,[(t(!0),s(O,null,L(o(G).item.name.$errors,K=>(t(),s("div",{key:K.$uid},c(K.$message),1))),128))])):H("",!0)])]),e("div",Hd,[e("div",Ud,[e("div",Dd,[R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=K=>m.selected.sourceLocation=K),onChange:l[4]||(l[4]=K=>b()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(m.lookups.sourceLocations,K=>(t(),s("option",{value:K},c(K.name),9,Ld))),256))],544),[[ue,m.selected.sourceLocation]]),l[10]||(l[10]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(G).item.sourceLocationId.$error?(t(),s("div",Ed,[(t(!0),s(O,null,L(o(G).item.sourceLocationId.$errors,K=>(t(),s("div",{key:K.$uid},c(K.$message),1))),128))])):H("",!0)])]),e("div",qd,[e("div",Bd,[R(e("select",{"onUpdate:modelValue":l[5]||(l[5]=K=>m.selected.video=K),onChange:g,class:"form-select",id:"videoId",disabled:m.item.packageConfigurations.length>0},[(t(!0),s(O,null,L(m.lookups.videos,K=>(t(),s("option",{value:K},c(K.name),9,Rd))),256))],40,Nd),[[ue,m.selected.video]]),l[11]||(l[11]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(G).item.videoId.$error?(t(),s("div",Fd,[(t(!0),s(O,null,L(o(G).item.videoId.$errors,K=>(t(),s("div",{key:K.$uid},c(K.$message),1))),128))])):H("",!0)])])]),m.item.videoId?(t(),s("div",zd,[e("div",Gd,[e("div",null,[e("h5",null,[l[13]||(l[13]=J(" Package Configurations ")),o(G).item.packageConfigurations.$error?(t(),s("span",jd,l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):H("",!0)])]),e("button",{onClick:d,class:"btn btn-outline-primary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Package Configuration ")]))]),e("div",Yd,[e("table",Wd,[l[17]||(l[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(m.item.packageConfigurations,(K,q)=>(t(),s("tr",null,[e("td",null,c(q+1),1),e("td",null,[e("div",Kd,[R(e("input",{"onUpdate:modelValue":T=>K.path=T,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,Jd),[[Z,K.path]])]),o(G).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(G).item.packageConfigurations.$each.$response.$errors[q].path,T=>(t(),s("div",{key:T,class:"d-block invalid-feedback"},c(T.$message),1))),128)):H("",!0)]),e("td",null,[e("div",null,[R(e("select",{"onUpdate:modelValue":T=>K.sourceGroupId=T,class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(m.lookups.sourceGroups,T=>(t(),s("option",{value:T.id},c(T.name),9,Xd))),256))],8,Qd),[[ue,K.sourceGroupId]]),o(G).item.packageConfigurations.$each.$response?(t(!0),s(O,{key:0},L(o(G).item.packageConfigurations.$each.$response.$errors[q].path,T=>(t(),s("div",{key:T,class:"d-block invalid-feedback"},c(T.$message),1))),128)):H("",!0)])]),e("td",null,[R(e("select",{"onUpdate:modelValue":T=>K.type=T,class:"form-select",id:"type"},l[15]||(l[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Zd),[[ue,K.type]])]),e("td",null,[e("button",{onClick:T=>i(q),class:"btn btn-outline-warning"},l[16]||(l[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,eu)])]))),256))])])])])):H("",!0)])):H("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},su={class:"ms-2"},ou={class:"input-group"},au=["value"],lu={class:"ms-1"},nu={class:"input-group"},ru=["value"],iu={class:"ms-1"},du={class:"input-group"},uu={class:"ms-1"},cu={class:"input-group"},mu={class:"table-responsive border shadow-sm"},fu={class:"table table-hover mb-0"},pu={class:"text-center"},vu=["textContent"],gu={class:"d-flex flex-row justify-content-start"},bu={class:"mt-1"},yu=["src"],$u={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},wu={class:"ms-2"},hu={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},_u={class:"badge bg-primary me-1"},ku={key:0},Su={class:"badge bg-info me-1"},Tu={class:"d-flex flex-row justify-content-start"},Mu={class:"ms-2"},Iu={class:"small"},Cu={class:"badge bg-secondary me-1"},xu={class:"text-center"},Vu=["onUpdate:modelValue"],Pu="/api/v1/vodsources/search",Ou={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:C,pageTitle:h,busy:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,closeWithReturnUrl:m,generateReturnUrl:V,security:$,filter:G,initializeFilter:Q,getQuery:r,saveQuery:u,search:j,getRowNumber:b,setSelected:k,isSelected:g}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${w==null?void 0:w.userId}/vod-sources/search`,baseUrl:Pu,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(I,y)=>{const p=I.value,K=new URLSearchParams(window.location.search),q=JSON.parse(localStorage.getItem(y))||{};p.query.category=K.get("category")||q.category||p.query.category||0,p.query.genre=K.get("genre")||q.genre||p.query.genre||0,p.query.sourceLocationId=K.get("slid")||q.sourceLocationId||p.query.sourceLocationId||""},getQuery:I=>["?c=",encodeURIComponent(I.query.criteria),"&p=",I.pageIndex,"&s=",I.pageSize,"&sf=",I.sortField,"&so=",I.sortOrder,"&category=",I.query.category,"&genre=",I.query.genre,"&slid=",I.query.sourceLocationId].join(""),saveQuery:(I,y)=>{localStorage.setItem(y,JSON.stringify({criteria:I.query.criteria,pageIndex:I.pageIndex,pageSize:I.pageSize,sortField:I.sortField,sortOrder:I.sortOrder,visible:I.visible,category:I.query.category,genre:I.query.genre,sourceLocationId:I.query.sourceLocationId}))}}),_=$e(()=>{const I=G.value;return I&&I.items?I.items.filter(K=>K.selected):[]});de(async()=>{Q(),await a(),await l(),await j()});const S=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!P.value){F.value=null;try{P.value=!0;const p={vodSourceIds:_.value.map(K=>K.vodSourceId)};await z.post("/api/v1/vodsources/publish/",p).then(K=>{D.success("Publish VODs","VODs was published.",{async onClose(){}})}),P.value=!1,await j()}catch(y){F.value=X.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{P.value=!1}}},d=async()=>{if(!(_.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!P.value){F.value=null;try{P.value=!0;const p={vodSourceIds:_.value.map(K=>K.vodSourceId)};await z.post("/api/v1/vodsources/unpublish/",p).then(K=>{D.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),P.value=!1,await j()}catch(y){F.value=X.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{P.value=!1}}},i=()=>{const I=G.value.items;if(I.length<1)return;const y=!I[0].selected;G.value.items.forEach(p=>{p.selected=y})},a=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(y=>{G.value.lookups.sourceLocations=y.data})}catch(I){F.value=X.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},l=async()=>{try{await z.get("/api/v1/lookups/video-genres/").then(I=>{const y=I.data;G.value.lookups.genres=y})}catch(I){F.value=X.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}};return re(!1),(I,y)=>{const p=ee("router-link"),K=ee("PageHeader"),q=ee("m-pagination"),T=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(K,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(h)},{default:B(()=>[N(p,{to:n.urlAdd,class:"btn btn-primary"},{default:B(()=>y[6]||(y[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",su,[e("div",ou,[y[8]||(y[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),R(e("select",{"onUpdate:modelValue":y[0]||(y[0]=v=>o(G).query.sourceLocationId=v),class:"form-select"},[y[7]||(y[7]=e("option",{value:""},"All",-1)),(t(!0),s(O,null,L(o(G).lookups.sourceLocations,v=>(t(),s("option",{value:v.id},c(v.name),9,au))),256))],512),[[ue,o(G).query.sourceLocationId]])])]),e("div",lu,[e("div",nu,[y[9]||(y[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),R(e("select",{"onUpdate:modelValue":y[1]||(y[1]=v=>o(G).query.genre=v),class:"form-select"},[(t(!0),s(O,null,L(o(G).lookups.genres,v=>(t(),s("option",{value:v.id},c(v.name),9,ru))),256))],512),[[ue,o(G).query.genre]])])]),e("div",iu,[e("div",du,[y[11]||(y[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),R(e("select",{"onUpdate:modelValue":y[2]||(y[2]=v=>o(G).query.category=v),class:"form-select"},y[10]||(y[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(G).query.category]])])]),e("div",uu,[e("div",cu,[R(e("input",{"onUpdate:modelValue":y[3]||(y[3]=v=>o(G).query.criteria=v),onKeyup:y[4]||(y[4]=Ue(v=>o(j)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(G).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:y[5]||(y[5]=v=>o(j)(1))},y[12]||(y[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(T,{errorMessage:o(F)},{default:B(()=>[e("div",mu,[e("table",fu,[e("thead",null,[e("tr",null,[y[16]||(y[16]=e("td",{class:"text-center"},"#",-1)),y[17]||(y[17]=e("th",null,"Name",-1)),y[18]||(y[18]=e("th",null,"Video Title",-1)),e("th",pu,[_.value.length?(t(),s(O,{key:0},[e("button",{onClick:S,class:"btn btn-sm btn-primary"},y[13]||(y[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:d,class:"btn btn-sm btn-warning ms-1"},y[14]||(y[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):H("",!0),e("button",{onClick:i,class:"btn btn-sm btn-outline-primary ms-2"},y[15]||(y[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(o(G).items,(v,E)=>(t(),s("tr",{key:v.vodSourceId},[e("td",{textContent:c(o(b)(E)),class:"text-center"},null,8,vu),e("td",null,[e("div",gu,[e("div",null,[v.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(v.video.thumbnails,te=>(t(),s("div",bu,[e("img",{src:te.url,class:"img-fuild border",width:"128"},null,8,yu)]))),256)):(t(),s("img",$u))]),e("div",wu,[N(p,{to:`${n.urlView}/${v.vodSourceId}`,class:"d-inline-block text-truncate link-offset-2"},{default:B(()=>[v.arn?(t(),s("span",hu)):H("",!0),J(c(v.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,L(v.video.categories,te=>(t(),s("div",null,[e("span",_u,c(te.categoryName),1)]))),256)),v.video.genres.length>0?(t(),s("div",ku,[(t(!0),s(O,null,L(v.video.genres,te=>(t(),s("span",Su,c(te.genreName),1))),256))])):H("",!0)])])])]),e("td",null,[e("div",Tu,[e("div",Mu,[N(p,{to:`${n.urlViewVideo}/${encodeURIComponent(v.video.videoId)}/${o(V)()}`,class:"link-offset-2"},{default:B(()=>[J(c(v.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Iu,c(o(X).moment.utc(v.video.durationInMillis).format("HH:mm:ss")),1)]),v.video.formats.length>0?(t(!0),s(O,{key:0},L(v.video.formats,te=>(t(),s("span",Cu,c(te.formatName),1))),256)):H("",!0)])])]),e("td",xu,[R(e("input",{"onUpdate:modelValue":te=>v.selected=te,type:"checkbox",class:"form-check-input"},null,8,Vu),[[He,v.selected]])])]))),128))]),_:1},512),[[Te,o(G).items.length>0]])])]),N(q,{filter:o(G),search:o(j),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Au=["id"],Hu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Uu={class:"modal-content"},Du={class:"modal-header"},Lu={class:"modal-title"},Eu={class:"modal-body"},qu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Bu=["innerHTML"],Nu={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ru={class:"container"},Fu={class:"col"},zu={class:"form-floating mb-2"},Gu=["value"],ju={key:0,class:"d-block invalid-feedback"},Yu={class:"col"},Wu={class:"form-floating mb-2"},Ku={key:0,class:"d-block invalid-feedback"},Ju={class:"col"},Qu={class:"form-floating mb-2"},Xu={key:0,class:"d-block invalid-feedback"},Zu={class:"modal-footer"},ec=["disabled"],tc={__name:"_addPackageConfiguration",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),G=w;re();const Q=re("modalAddChannelOutput"),r=me({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),u={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("VOD Source is required.",oe),$autoDirty:!0,$lazy:!0},path:{required:se.withMessage("Path is required.",oe),$autoDirty:!0,$lazy:!0},type:{required:se.withMessage("Type is required.",oe),$autoDirty:!0,$lazy:!0}}},j=be(u,r);de(async()=>{j.value.$reset()});const b=async()=>{await k()},k=async()=>{try{await D.get("/api/v1/sourceGroups/lookup/").then(i=>{r.lookups.sourceGroups=i.data,r.lookups.sourceGroups.length===1&&(r.item.sourceGroupId=r.lookups.sourceGroups[0].id)})}catch(d){z.value=U.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},g=async d=>{const i=r;Y.value.clear(),z.value="",i.lookups={sourceGroups:[]},i.item={sourceGroupId:null,vodSourceId:d,path:null,type:null},await b(),j.value.$reset();var a=document.getElementById(Q.value),l=he.getOrCreateInstance(a);l.show()},_=async()=>{var d=document.getElementById(Q.value),i=he.getOrCreateInstance(d);i.hide(),G("refresh")},S=async()=>{const d=r;if(P.value)return;const i=await j.value.$validate();debugger;if(!i){window.scrollTo(0,0);return}try{P.value=!0,z.value="";const a=d.item;await D.post("/api/v1/vodSources/package-configurations/",a).then(l=>{m.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await _()}catch(a){z.value=U.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:g,close:_}),(d,i)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Q.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Hu,[e("div",Uu,[e("div",Du,[e("h5",Lu,[i[5]||(i[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:i[0]||(i[0]=a=>_()),"aria-label":"Close"})]),e("div",Eu,[o(z)?(t(),s("div",qu,[i[6]||(i[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Bu)])):H("",!0),o(Y).size>0?(t(),s("div",Nu,[i[7]||(i[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),a=>(t(),s("li",null,c(a),1))),256))])])):H("",!0),e("div",Ru,[e("div",Fu,[e("div",zu,[R(e("select",{"onUpdate:modelValue":i[1]||(i[1]=a=>r.item.sourceGroupId=a),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(r.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},c(a.name),9,Gu))),256))],512),[[ue,r.item.sourceGroupId]]),i[8]||(i[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(j).item.sourceGroupId.$error?(t(),s("div",ju,[(t(!0),s(O,null,L(o(j).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},c(a.$message),1))),128))])):H("",!0)])]),e("div",Yu,[e("div",Wu,[R(e("select",{"onUpdate:modelValue":i[2]||(i[2]=a=>r.item.type=a),class:"form-select",id:"type"},i[9]||(i[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,r.item.type]]),i[10]||(i[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(j).item.type.$error?(t(),s("div",Ku,[(t(!0),s(O,null,L(o(j).item.type.$errors,a=>(t(),s("div",{key:a.$uid},c(a.$message),1))),128))])):H("",!0)])]),e("div",Ju,[e("div",Qu,[R(e("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>r.item.path=a),class:"form-control",id:"path"},null,512),[[Z,r.item.path]]),i[11]||(i[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(j).item.path.$error?(t(),s("div",Xu,[(t(!0),s(O,null,L(o(j).item.path.$errors,a=>(t(),s("div",{key:a.$uid},c(a.$message),1))),128))])):H("",!0)])])])]),e("div",Zu,[e("button",{disabled:o(j).$dirty&&o(j).$invalid,onClick:i[4]||(i[4]=a=>S()),class:"btn btn-primary",type:"button"},i[12]||(i[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ec),i[13]||(i[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Au))}},sc=["id"],oc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ac={class:"modal-content"},lc={class:"modal-header"},nc={class:"modal-title"},rc={class:"modal-body"},ic={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},dc=["innerHTML"],uc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},cc={class:"container"},mc={class:"col"},fc={class:"form-floating mb-2"},pc={class:"col"},vc={class:"form-floating mb-2"},gc={key:0,class:"d-block invalid-feedback"},bc={class:"col"},yc={class:"form-floating mb-2"},$c={key:0,class:"d-block invalid-feedback"},wc={class:"col"},hc={class:"form-floating mb-2"},_c={key:0,class:"d-block invalid-feedback"},kc={class:"modal-footer"},Sc=["disabled"],Tc={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),G=w,Q=re(),r=re("modalAddPlaybackConfiguration"),u=me({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),j={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},b=be(j,u);de(async()=>{b.value.$reset()});const k=async(S,d)=>{Q.value=S;const i=u;Y.value.clear(),z.value="";const a=d,l=a.lastIndexOf("/"),I=a.substring(0,l),y="ad_campaign_"+a.substring(l+1).replace(".","_");i.item={name:y,originalVideoContentSourceUrl:d,videoContentSourceUrl:I,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},b.value.$reset();var p=document.getElementById(r.value),K=he.getOrCreateInstance(p);K.show()},g=async()=>{var S=document.getElementById(r.value),d=he.getOrCreateInstance(S);d.hide(),G("refresh")},_=async()=>{const S=u;if(P.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,z.value="";const i=S.item;i.vodSourceId=Q.value,await D.post("/api/v1/playbackconfigurations/vodsource",i).then(a=>{m.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await g()}catch(i){z.value=U.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:k,close:g}),(S,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",oc,[e("div",ac,[e("div",lc,[e("h5",nc,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=i=>g()),"aria-label":"Close"})]),e("div",rc,[o(z)?(t(),s("div",ic,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,dc)])):H("",!0),o(Y).size>0?(t(),s("div",uc,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),i=>(t(),s("li",null,c(i),1))),256))])])):H("",!0),e("div",cc,[e("div",mc,[e("div",fc,[R(e("input",{"onUpdate:modelValue":d[1]||(d[1]=i=>u.item.originalVideoContentSourceUrl=i),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Z,u.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",pc,[e("div",vc,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=i=>u.item.name=i),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",gc,[(t(!0),s(O,null,L(o(b).item.name.$errors,i=>(t(),s("div",{key:i.$uid},c(i.$message),1))),128))])):H("",!0)])]),e("div",bc,[e("div",yc,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=i=>u.item.videoContentSourceUrl=i),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,u.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(b).item.videoContentSourceUrl.$error?(t(),s("div",$c,[(t(!0),s(O,null,L(o(b).item.videoContentSourceUrl.$errors,i=>(t(),s("div",{key:i.$uid},c(i.$message),1))),128))])):H("",!0)])]),e("div",wc,[e("div",hc,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=i=>u.item.adDecisionServerUrl=i),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,u.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(b).item.adDecisionServerUrl.$error?(t(),s("div",_c,[(t(!0),s(O,null,L(o(b).item.adDecisionServerUrl.$errors,i=>(t(),s("div",{key:i.$uid},c(i.$message),1))),128))])):H("",!0)])])])]),e("div",kc,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:d[5]||(d[5]=i=>_()),class:"btn btn-primary",type:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Sc),d[15]||(d[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,sc))}},Mc={key:0},Ic={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Cc={class:"nav-item",role:"presentation"},xc={class:"nav-item",role:"presentation"},Vc={class:"nav-item",role:"presentation"},Pc={class:"nav-item",role:"presentation"},Oc={class:"nav-item",role:"presentation"},Ac={class:"nav-item",role:"presentation"},Hc={class:"tab-content",id:"myTabContent"},Uc={class:"mt-2"},Dc={class:"col"},Lc={class:"form-floating mb-2"},Ec={class:"mt-2"},qc={class:"badge bg-info me-1"},Bc={class:"mt-2"},Nc={class:"row row-cols-sm-2"},Rc={class:"col"},Fc={class:"form-floating mb-2"},zc={class:"form-control"},Gc={class:"col"},jc={class:"form-floating mb-2"},Yc={class:"mt-1"},Wc={class:"badge bg-info me-1"},Kc={class:"badge bg-primary me-1"},Jc={class:"table-responsive border mt-1"},Qc={class:"table table-hover mb-0"},Xc={class:"table-group-divider"},Zc={class:"align-middle"},em={class:"text-center"},tm={class:"mt-2"},sm={class:"mt-2 text-end"},om={class:"table-responsive border mt-2"},am={class:"table table-hover mb-0 caption-top"},lm={class:"text-end"},nm=["onClick"],rm={class:"mt-2"},im={class:"mt-1"},dm=["id"],um={class:"text-end"},cm={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){const f=n,{appTitle:w,pageTitle:C,busy:h,isDirty:P,validations:M,infoMessage:Y,warningMessage:F,errorMessage:x,router:z,axios:X,utils:D,toasts:U,close:m,closeWithReturnUrl:V,generateReturnUrl:$,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});Se("$config");const Q=ge();Q.user;const r=me({user:Q.user,item:null,hls:null}),u=re();re(null);const j=re();de(async()=>{await _();const y=D.getPageTab("vodSource")||"information-tab";b(y)}),Ee(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const b=y=>{D.setPageTab("vodSource",y),u.value=y},k=y=>y!==u.value?"":"active",g=y=>y!==u.value?"":"show active",_=async()=>{const y=r;if(!h.value)try{h.value=!0,x.value="",r.item=null;const p=`/api/v1/vodsources/${f.id}/`;await X.get(p).then(K=>{y.item=K.data;const q=y.item,T=D.moment.utc(y.item.video.durationInMillis).format("HH:mm:ss");q.video.duration=T}),I()}catch(p){x.value=D.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{h.value=!1}},S=async()=>{await _()},d=()=>{j.value.open(f.id)},i=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!h.value){x.value=null;try{h.value=!0;const p={vodSourceIds:[f.id]};await X.post("/api/v1/vodsources/publish/",p).then(K=>{U.success("Publish VOD","VOD was published.",{async onClose(){}})}),h.value=!1,await S()}catch(p){x.value=D.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{h.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!h.value){x.value=null;try{h.value=!0;const p={vodSourceIds:[f.id]};await X.post("/api/v1/vodsources/unpublish/",p).then(K=>{U.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),h.value=!1,await S()}catch(p){x.value=D.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{h.value=!1}}},l=async y=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!h.value){x.value=null;try{h.value=!0,await X.delete(`/api/v1/vodSources/package-configurations/${y}/`).then(K=>{U.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),h.value=!1,await S()}catch(K){x.value=D.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{h.value=!1}}},I=()=>{if(Hls.isSupported()){r.hls&&r.hls.destroy();const y=`video-${r.item.vodSourceId}`,p=document.getElementById(y),K=r.item.video.formats.find(T=>T.formatName==="HLS"),q=`${K.serverUrl}${K.path}`;r.hls=D.createHlsStream(p,q,!1)}};return(y,p)=>{const K=ee("router-link"),q=ee("PageHeader"),T=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(q,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(C)},{default:B(()=>[r.item?(t(),s(O,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:p[0]||(p[0]=v=>a()),class:"ms-1 btn btn-warning"},p[15]||(p[15]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:p[1]||(p[1]=v=>i()),class:"ms-1 btn btn-primary"},p[16]||(p[16]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):H("",!0),N(K,{to:`${n.urlEdit}/${n.id}`,class:"ms-2 btn btn-primary"},{default:B(()=>p[17]||(p[17]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:p[2]||(p[2]=v=>S()),class:"ms-2 btn btn-secondary"},p[18]||(p[18]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:p[3]||(p[3]=v=>o(V)(f.urlMain)),class:"btn btn-secondary ms-1"},p[19]||(p[19]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(T,{errorMessage:o(x)},{default:B(()=>[r.item?(t(),s("div",Mc,[e("div",null,[e("ul",Ic,[e("li",Cc,[e("button",{onClick:p[4]||(p[4]=v=>b("information-tab")),class:ae([k("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",xc,[e("button",{onClick:p[5]||(p[5]=v=>b("packageConfigurations-tab")),class:ae([k("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Vc,[e("button",{onClick:p[6]||(p[6]=v=>b("viewStream-tab")),class:ae([k("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View ",2)]),e("li",Pc,[e("button",{onClick:p[7]||(p[7]=v=>b("channels-tab")),class:ae([k("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},p[20]||(p[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Channels ")]),2)]),e("li",Oc,[e("button",{onClick:p[8]||(p[8]=v=>b("programs-tab")),class:ae([k("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},p[21]||(p[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Programs ")]),2)]),e("li",Ac,[e("button",{onClick:p[9]||(p[9]=v=>b("programTemplates-tab")),class:ae([k("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},p[22]||(p[22]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),J("Program Templates ")]),2)])]),e("div",Hc,[e("div",{class:ae([g("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Uc,[e("div",Dc,[e("div",Lc,[R(e("input",{"onUpdate:modelValue":p[10]||(p[10]=v=>r.item.name=v),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.name]]),p[23]||(p[23]=e("label",{for:"name"},"Name",-1))])]),e("div",Ec,[e("div",null,[(t(!0),s(O,null,L(r.item.types,v=>(t(),s("span",qc,c(v.typeName),1))),256))])]),e("div",Bc,[p[27]||(p[27]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Nc,[e("div",Rc,[e("div",Fc,[e("div",zc,[N(K,{to:`${n.urlViewVideo}/${r.item.video.videoId}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(r.item.video.title),1)]),_:1},8,["to"])]),p[24]||(p[24]=e("label",{for:"title"},"Title",-1))])]),e("div",Gc,[e("div",jc,[R(e("input",{"onUpdate:modelValue":p[11]||(p[11]=v=>r.item.video.duration=v),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[Z,r.item.video.duration]]),p[25]||(p[25]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Yc,[(t(!0),s(O,null,L(r.item.video.genres,v=>(t(),s("span",Wc,c(v.genreName),1))),256)),(t(!0),s(O,null,L(r.item.video.categories,v=>(t(),s("span",Kc,c(v.categoryName),1))),256))]),e("div",Jc,[e("table",Qc,[p[26]||(p[26]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Xc,[(t(!0),s(O,null,L(r.item.video.formats,(v,E)=>(t(),s("tr",Zc,[e("td",em,c(E+1),1),e("td",null,c(v.formatName),1),e("td",null,c(v.serverUrl),1),e("td",null,c(v.path),1)]))),256))])])])])])])],2),e("div",{class:ae([g("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",tm,[e("div",sm,[e("button",{onClick:p[12]||(p[12]=v=>d()),class:"btn btn-primary"},p[28]||(p[28]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Add ")]))]),e("div",om,[e("table",am,[p[30]||(p[30]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.packageConfigurations,(v,E)=>(t(),s("tr",{key:v.packageConfigurationId,class:"align-middle"},[e("td",null,c(E+1),1),e("td",null,c(v.path),1),e("td",null,c(v.sourceGroup.name),1),e("td",null,c(v.type),1),e("td",lm,[e("button",{onClick:te=>l(v.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},p[29]||(p[29]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,nm)])]))),128))]),_:1},512),[[Te,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:ae([g("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",rm,[e("div",im,[e("video",{id:`video-${r.item.vodSourceId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,dm),e("div",um,[e("button",{onClick:p[13]||(p[13]=v=>r.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},p[31]||(p[31]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:ae([g("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},p[32]||(p[32]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:ae([g("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},p[33]||(p[33]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:ae([g("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},p[34]||(p[34]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):H("",!0)]),_:1},8,["errorMessage"]),N(tc,{ref_key:"modalAddPackageConfiguration",ref:j,onRefresh:S},null,512),N(Tc,{ref:"modalAddPlaybackConfiguration",onRefresh:p[14]||(p[14]=v=>S())},null,512)])]),_:1})}}},mm=["disabled"],fm={class:"container1"},pm={class:"row"},vm={class:"col-12 col-lg-6"},gm={class:"col"},bm={class:"form-floating mb-2"},ym=["value"],$m={key:0,class:"d-block invalid-feedback"},wm={class:"col"},hm={class:"form-floating mb-2"},_m=["disabled"],km=["value"],Sm={key:0,class:"d-block invalid-feedback"},Tm={class:"col-12 col-lg-6"},Mm={class:"col"},Im={class:"form-floating mb-2"},Cm={key:0,class:"d-block invalid-feedback"},xm={class:"row row-cols-1 row-cols-sm-3 mt-2"},Vm={class:"col"},Pm={class:"form-floating mb-2"},Om={key:0},Am={key:1},Hm={key:2},Um={key:3,class:"d-block invalid-feedback"},Dm={class:"col"},Lm={class:"form-floating mb-2"},Em={key:0},qm={key:1},Bm={key:2,class:"d-block invalid-feedback"},Nm={class:"col"},Rm={class:"form-floating mb-2"},Fm={key:0,class:"mt-3"},zm={class:"table-responsive border mt-1"},Gm={class:"table table-borderless table-sm mb-0 align-middle"},jm={class:"text-center"},Ym=["onUpdate:modelValue","onChange"],Wm={key:0},Km=["onUpdate:modelValue","onChange"],Jm={class:"text-start"},Qm=["onClick"],Xm={class:"col mt-2"},Zm={class:"row row-cols-1 row-cols-sm-2"},ef={class:"col"},tf={class:"form-floating mb-2"},sf={class:"col"},of={class:"form-floating mb-2"},af={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),U=n,m=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),V={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},$=be(V,m),G=$e(()=>{const T=x.moment;if(m.startOffsetTime&&m.startOffsetTime!=="00:00:00"&&x.isValidTime(m.startOffsetTime)){const v=T().startOf("day"),E=v.format("YYYY-MM-DD ")+m.startOffsetTime,ne=T(E).subtract(v);return m.item.startOffsetMillis=ne.valueOf(),m.item.startOffsetMillis}return 0}),Q=$e(()=>{const T=x.moment;if(m.endOffsetTime&&m.endOffsetTime!=="00:00:00"&&x.isValidTime(m.endOffsetTime)){const v=T().startOf("day"),E=v.format("YYYY-MM-DD ")+m.endOffsetTime,ne=T(E).subtract(v);return m.item.endOffsetMillis=ne.valueOf(),m.item.endOffsetMillis}return 0}),r=$e(()=>m.item.endOffsetMillis-m.item.startOffsetMillis),u=$e(()=>x.moment.utc(r.value).format("HH:mm:ss")),j=$e(()=>{const T=m.item.adBreaks;return T&&T.length>0?T.reduce((E,te,ne)=>E+te.durationInMillis,0):0}),b=$e(()=>{const T=r.value+j.value;return x.moment.utc(T).format("HH:mm:ss")}),k=$e(()=>x.moment.utc(j.value).format("HH:mm:ss"));de(async()=>{await g()}),Ee(()=>{m.hls&&(m.hls.stopLoad(),m.hls.destroy())});const g=async()=>{await _(),await l()},_=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(v=>{m.lookups.sourceLocations=v.data,m.lookups.sourceLocations.length===1&&(m.item.sourceLocationId=m.lookups.sourceLocations[0].id)}),m.item.sourceLocationId&&await S(m.item.sourceLocationId)}catch(T){M.value=x.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},S=async T=>{try{const v=`/api/v1/vodSources/lookup/source-location/${T}/?category=3`;await F.get(v).then(E=>{m.lookups.vodSources=E.data})}catch(v){M.value=x.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},d=async()=>{const T=m.selected.vodSource;m.item.vodSourceId=T.id,m.endOffsetTime=x.moment.utc(T.durationInMillis).format("HH:mm:ss"),await Promise.all([i(T.id),a(T.id)])},i=async T=>{try{let v=`/api/v1/vodSources/${T}/hls`;const E=await F.get(v).then(ne=>ne.data);if(m.hls){m.hls.loadSource(E);return}const te=document.getElementById("video-add-program-template");m.hls=x.createHlsStream(te,E,"Previewing filler slate.")}catch(v){M.value=x.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},a=async T=>{try{let v=`/api/v1/vodSources/${T}/blank-frames`;const E=await F.get(v).then(te=>te.data);E&&E.length>0&&(m.item.adBreaks=E.map(te=>{const ne=(te.endInMillis-te.startInMillis)/2+te.startInMillis;return{offsetTime:x.moment.utc(ne).format("HH:mm:ss"),offsetMillis:ne,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(v){M.value=x.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},l=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(v=>{m.lookups.adBreakSourceLocations=v.data})}catch(T){M.value=x.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},I=()=>{const T={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};m.item.adBreaks.push(T)},y=T=>{m.item.adBreaks.splice(T,1)},p=T=>{const v=x.moment,E=v().startOf("day"),te=E.format("YYYY-MM-DD ")+T.offsetTime,W=v(te).subtract(E);T.offsetMillis=W.valueOf()},K=T=>{const v=x.moment,E=v().startOf("day"),te=E.format("YYYY-MM-DD ")+T.durationTime,W=v(te).subtract(E);T.durationInMillis=W.valueOf()},q=async()=>{const T=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const E=x.clone(T.item),te=E.adBreaks.filter(ne=>ne.durationInMillis>0);E.adBreaks=te,await F.post("/api/v1/programtemplates/",E).then(ne=>{z.success("Add Program Template","Program template added.",{onClose:async()=>{const W=`${U.urlView}/${ne.data}`;await Y.push(W)}})})}catch(E){M.value=x.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{C.value=!1}};return(T,v)=>{const E=ee("router-link"),te=ee("PageHeader"),ne=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(te,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:v[0]||(v[0]=W=>q()),class:"btn btn-primary"},v[11]||(v[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mm),N(E,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:B(()=>v[12]||(v[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(ne,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[e("div",null,[e("div",fm,[e("div",pm,[e("div",vm,[e("div",gm,[e("div",bm,[R(e("select",{"onUpdate:modelValue":v[1]||(v[1]=W=>m.item.sourceLocationId=W),onChange:v[2]||(v[2]=W=>S(m.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(m.lookups.sourceLocations,W=>(t(),s("option",{value:W.id},c(W.name),9,ym))),256))],544),[[ue,m.item.sourceLocationId]]),v[13]||(v[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o($).item.sourceLocationId.$error?(t(),s("div",$m,[(t(!0),s(O,null,L(o($).item.sourceLocationId.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),e("div",wm,[e("div",hm,[R(e("select",{"onUpdate:modelValue":v[3]||(v[3]=W=>m.selected.vodSource=W),onChange:v[4]||(v[4]=W=>d()),class:"form-select",id:"vodSourceId",disabled:m.item.adBreaks.length>0},[(t(!0),s(O,null,L(m.lookups.vodSources,W=>(t(),s("option",{value:W},c(o(x).moment.utc(W.durationInMillis).format("HH:mm:ss"))+" - "+c(W.name),9,km))),256))],40,_m),[[ue,m.selected.vodSource]]),v[14]||(v[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o($).item.vodSourceId.$error?(t(),s("div",Sm,[(t(!0),s(O,null,L(o($).item.vodSourceId.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),v[15]||(v[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Tm,[e("div",Mm,[e("div",Im,[R(e("input",{"onUpdate:modelValue":v[5]||(v[5]=W=>m.item.name=W),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,m.item.name]]),v[16]||(v[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o($).item.name.$error?(t(),s("div",Cm,[(t(!0),s(O,null,L(o($).item.name.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),e("div",xm,[e("div",Vm,[e("div",null,[e("div",Pm,[R(e("input",{"onUpdate:modelValue":v[6]||(v[6]=W=>m.startOffsetTime=W),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,m.startOffsetTime]]),v[17]||(v[17]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),G.value>0&&G.value<3e4?(t(),s("div",Om,v[18]||(v[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),G.value>Q.value&&Q.value>0?(t(),s("div",Am,v[19]||(v[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),m.selected.vodSource&&G.value>=m.selected.vodSource.durationInMillis?(t(),s("div",Hm,v[20]||(v[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o($).item.startOffsetMillis.$error?(t(),s("div",Um,[(t(!0),s(O,null,L(o($).item.startOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),e("div",Dm,[e("div",null,[e("div",Lm,[R(e("input",{"onUpdate:modelValue":v[7]||(v[7]=W=>m.endOffsetTime=W),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,m.endOffsetTime]]),v[21]||(v[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),Q.value>0&&Q.value<3e4?(t(),s("div",Em,v[22]||(v[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),m.selected.vodSource&&Q.value>m.selected.vodSource.durationInMillis?(t(),s("div",qm,v[23]||(v[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o($).item.endOffsetMillis.$error?(t(),s("div",Bm,[(t(!0),s(O,null,L(o($).item.endOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),e("div",Nm,[e("div",Rm,[R(e("input",{"onUpdate:modelValue":v[8]||(v[8]=W=>u.value=W),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,u.value]]),v[24]||(v[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),m.item.vodSourceId?(t(),s("div",Fm,[e("div",{class:"d-flex flex-row justify-content-between"},[v[26]||(v[26]=e("div",null,[e("h5",null," Ad Break ")],-1)),e("button",{onClick:I,class:"btn btn-outline-primary btn-sm"},v[25]||(v[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",zm,[e("table",Gm,[v[29]||(v[29]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(m.item.adBreaks,(W,_e)=>(t(),s("tr",null,[e("td",jm,c(_e+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>W.offsetTime=we,onChange:we=>p(W),type:"time",step:"1",class:"form-control"},null,40,Ym),[[Z,W.offsetTime]]),W.offsetMillis>=m.selected.vodSource.durationInMillis?(t(),s("div",Wm,v[27]||(v[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>W.durationTime=we,onChange:we=>K(W),type:"time",step:"1",class:"form-control"},null,40,Km),[[Z,W.durationTime]])]),e("td",Jm,[e("button",{onClick:we=>y(_e),class:"btn btn-outline-warning btn-sm"},v[28]||(v[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Qm)])]))),256))])]),v[30]||(v[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),J(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0),e("div",Xm,[v[33]||(v[33]=e("h5",null," Duration ",-1)),e("div",Zm,[e("div",ef,[e("div",tf,[R(e("input",{"onUpdate:modelValue":v[9]||(v[9]=W=>k.value=W),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,k.value]]),v[31]||(v[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",sf,[e("div",of,[R(e("input",{"onUpdate:modelValue":v[10]||(v[10]=W=>b.value=W),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Z,b.value]]),v[32]||(v[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},lf=["disabled"],nf={class:"container1"},rf={class:"row"},df={class:"col-12 col-lg-6"},uf={class:"col"},cf={class:"form-floating mb-2"},mf=["value"],ff={key:0,class:"d-block invalid-feedback"},pf={class:"col"},vf={class:"form-floating mb-2"},gf=["value"],bf={key:0,class:"d-block invalid-feedback"},yf={class:"col-12 col-lg-6"},$f={class:"col"},wf={class:"form-floating mb-2"},hf={key:0,class:"d-block invalid-feedback"},_f={class:"row row-cols- row-cols-sm-3"},kf={class:"col"},Sf={class:"form-floating mb-2"},Tf={key:0},Mf={key:1},If={key:2},Cf={key:3,class:"d-block invalid-feedback"},xf={class:"col"},Vf={class:"form-floating"},Pf={key:0},Of={key:1},Af={key:2,class:"d-block invalid-feedback"},Hf={class:"col"},Uf={class:"form-floating mb-2"},Df={key:0,class:"mt-2"},Lf={class:"table-responsive border mt-1"},Ef={class:"table table-borderless table-sm mb-0 align-middle"},qf=["onUpdate:modelValue","onChange"],Bf={key:0},Nf=["onUpdate:modelValue","onChange"],Rf=["onClick"],Ff={class:"col mt-2"},zf={class:"row row-cols-1 row-cols-sm-2"},Gf={class:"col"},jf={class:"form-floating mb-2"},Yf={class:"col"},Wf={class:"form-floating mb-2"},Kf={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,closeWithReturnUrl:D,security:U}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),m=n,V=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),$={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0}}},G=be($,V),Q=$e(()=>{if(V.startOffsetTime&&V.startOffsetTime!=="00:00:00"&&x.isValidTime(V.startOffsetTime)){const v=x.moment,E=v().startOf("day"),ne=v(V.startOffsetTime,"hh:mm:ss").diff(E);return V.item.startOffsetMillis=ne.valueOf(),V.item.startOffsetMillis}return 0}),r=$e(()=>{if(V.endOffsetTime&&V.endOffsetTime!=="00:00:00"&&x.isValidTime(V.endOffsetTime)){const v=x.moment,E=v().startOf("day"),ne=v(V.endOffsetTime,"hh:mm:ss").diff(E);return V.item.endOffsetMillis=ne.valueOf(),V.item.endOffsetMillis}return 0}),u=$e(()=>V.item.endOffsetMillis-V.item.startOffsetMillis),j=$e(()=>x.moment.utc(u.value).format("HH:mm:ss")),b=$e(()=>{const v=V.item.adBreaks;return v&&v.length>0?v.reduce((te,ne,W)=>te+ne.durationInMillis,0):0}),k=$e(()=>{const v=u.value+b.value;return x.moment.utc(v).format("HH:mm:ss")}),g=$e(()=>x.moment.utc(b.value).format("HH:mm:ss"));de(async()=>{await _()});const _=async()=>{await S(),await d()},S=async()=>{try{const v=`/api/v1/programtemplates/${m.id}/`;await F.get(v).then(E=>{V.item=E.data,V.startOffsetTime=x.moment.utc(V.item.startOffsetMillis).format("HH:mm:ss"),V.endOffsetTime=x.moment.utc(V.item.endOffsetMillis).format("HH:mm:ss");const te=V.startOffsetTime,ne=V.endOffsetTime;V.item.adBreaks.forEach(W=>{W.offsetTime=x.moment.utc(W.offsetMillis).format("HH:mm:ss"),W.durationTime=x.moment.utc(W.durationInMillis).format("HH:mm:ss")})})}catch(v){M.value=x.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},d=async()=>{await i()},i=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(E=>{V.lookups.sourceLocations=E.data}),V.item.sourceLocationId&&await a(V.item.sourceLocationId)}catch(v){M.value=x.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},a=async v=>{try{const E=`/api/v1/vodSources/lookup/source-location/${v}/?type=3`;await F.get(E).then(ne=>{V.lookups.vodSources=ne.data});const te=V.lookups.vodSources.find(ne=>ne.id==V.item.vodSourceId);V.selected.vodSource=te,await l()}catch(E){M.value=x.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},l=async()=>{const v=V.selected.vodSource;v&&(V.item.vodSourceId!=v.id&&(V.startOffsetTime=x.moment.utc(0).format("HH:mm:ss"),V.endOffsetTime=x.moment.utc(v.durationInMillis).format("HH:mm:ss")),V.item.vodSourceId=v.id,await I(v.id))},I=async v=>{try{let E=`/api/v1/vodSources/${v}/hls`;const te=await F.get(E).then(W=>W.data);V.hls&&V.hls.destroy();const ne=document.getElementById("video-edit-program-template");V.hls=x.createHlsStream(ne,te,"Previewing VOD Content.")}catch(E){M.value=x.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{}},y=()=>{const v={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};V.item.adBreaks.push(v)},p=v=>{V.item.adBreaks.splice(v,1)},K=v=>{const E=x.moment,te=E().startOf("day"),ne=te.format("YYYY-MM-DD ")+v.offsetTime,_e=E(ne).subtract(te);v.offsetMillis=_e.valueOf()},q=v=>{const E=x.moment,te=E().startOf("day"),ne=te.format("YYYY-MM-DD ")+v.durationTime,_e=E(ne).subtract(te);v.durationInMillis=_e.valueOf()},T=async()=>{const v=V;if(C.value)return;if(!await G.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const te=x.clone(v.item);debugger;te.startOffsetMillis=Q.value,te.endOffsetMillis=r.value,await F.put("/api/v1/programtemplates/",te).then(ne=>{z.success("Edit Program Template","Program template edit.",{onClose:async()=>{const W=`${m.urlView}/${m.id}`;await Y.push(W)}})})}catch(te){M.value=x.getErrorMessageAsHtml(te),window.scrollTo(0,0)}finally{C.value=!1}};return(v,E)=>{const te=ee("PageHeader"),ne=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(te,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o(G).$dirty&&o(G).$invalid,onClick:E[0]||(E[0]=W=>T()),class:"btn btn-primary"},E[13]||(E[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,lf),e("button",{onClick:E[1]||(E[1]=W=>_()),class:"btn btn-secondary ms-2"},E[14]||(E[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:E[2]||(E[2]=W=>o(D)(m.urlMain)),class:"btn btn-secondary ms-1"},E[15]||(E[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(ne,{errorMessage:o(M),vuelidate:o(G)},{default:B(()=>[e("div",null,[e("div",nf,[e("div",rf,[e("div",df,[e("div",uf,[e("div",cf,[R(e("select",{"onUpdate:modelValue":E[3]||(E[3]=W=>V.item.sourceLocationId=W),onChange:E[4]||(E[4]=W=>a(V.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(V.lookups.sourceLocations,W=>(t(),s("option",{value:W.id},c(W.name),9,mf))),256))],544),[[ue,V.item.sourceLocationId]]),E[16]||(E[16]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(G).item.sourceLocationId.$error?(t(),s("div",ff,[(t(!0),s(O,null,L(o(G).item.sourceLocationId.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),e("div",pf,[e("div",vf,[R(e("select",{"onUpdate:modelValue":E[5]||(E[5]=W=>V.selected.vodSource=W),onChange:E[6]||(E[6]=W=>l()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(V.lookups.vodSources,W=>(t(),s("option",{value:W},c(o(x).moment.utc(W.durationInMillis).format("HH:mm:ss"))+" - "+c(W.name),9,gf))),256))],544),[[ue,V.selected.vodSource]]),E[17]||(E[17]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(G).item.vodSourceId.$error?(t(),s("div",bf,[(t(!0),s(O,null,L(o(G).item.vodSourceId.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),E[18]||(E[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",yf,[e("div",$f,[e("div",wf,[R(e("input",{"onUpdate:modelValue":E[7]||(E[7]=W=>V.item.name=W),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,V.item.name]]),E[19]||(E[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(G).item.name.$error?(t(),s("div",hf,[(t(!0),s(O,null,L(o(G).item.name.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)])]),e("div",_f,[e("div",kf,[e("div",Sf,[R(e("input",{"onUpdate:modelValue":E[8]||(E[8]=W=>V.startOffsetTime=W),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Z,V.startOffsetTime]]),E[20]||(E[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),Q.value>0&&Q.value<3e4?(t(),s("div",Tf,E[21]||(E[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),Q.value>r.value&&r.value>0?(t(),s("div",Mf,E[22]||(E[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):H("",!0),V.selected.vodSource&&Q.value>=V.selected.vodSource.durationInMillis?(t(),s("div",If,E[23]||(E[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(G).item.startOffsetMillis.$error?(t(),s("div",Cf,[(t(!0),s(O,null,L(o(G).item.startOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)]),e("div",xf,[e("div",Vf,[R(e("input",{"onUpdate:modelValue":E[9]||(E[9]=W=>V.endOffsetTime=W),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Z,V.endOffsetTime]]),E[24]||(E[24]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),r.value>0&&r.value<3e4?(t(),s("div",Pf,E[25]||(E[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),V.selected.vodSource&&r.value>V.selected.vodSource.durationInMillis?(t(),s("div",Of,E[26]||(E[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0),o(G).item.endOffsetMillis.$error?(t(),s("div",Af,[(t(!0),s(O,null,L(o(G).item.endOffsetMillis.$errors,W=>(t(),s("div",{key:W.$uid},c(W.$message),1))),128))])):H("",!0)]),e("div",Hf,[e("div",Uf,[R(e("input",{"onUpdate:modelValue":E[10]||(E[10]=W=>j.value=W),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,j.value]]),E[27]||(E[27]=e("label",{for:"durationTime"},"Clip",-1))])])]),V.selected.vodSource?(t(),s("div",Df,[e("div",{class:"d-flex flex-row justify-content-between"},[E[29]||(E[29]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:y,class:"btn btn-outline-primary btn-sm"},E[28]||(E[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Lf,[e("table",Ef,[E[32]||(E[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(V.item.adBreaks,(W,_e)=>(t(),s("tr",null,[e("td",null,c(_e+1),1),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>W.offsetTime=we,onChange:we=>K(W),type:"time",step:"1",class:"form-control"},null,40,qf),[[Z,W.offsetTime]]),W.offsetMillis>=V.selected.vodSource.durationInMillis?(t(),s("div",Bf,E[30]||(E[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):H("",!0)]),e("td",null,[R(e("input",{"onUpdate:modelValue":we=>W.durationTime=we,onChange:we=>q(W),type:"time",step:"1",class:"form-control"},null,40,Nf),[[Z,W.durationTime]])]),e("td",null,[e("button",{onClick:we=>p(_e),class:"btn btn-outline-warning btn-sm"},E[31]||(E[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Rf)])]))),256))])]),E[33]||(E[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),J(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):H("",!0),e("div",Ff,[E[36]||(E[36]=e("h5",null," Duration ",-1)),e("div",zf,[e("div",Gf,[e("div",jf,[R(e("input",{"onUpdate:modelValue":E[11]||(E[11]=W=>g.value=W),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,g.value]]),E[34]||(E[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Yf,[e("div",Wf,[R(e("input",{"onUpdate:modelValue":E[12]||(E[12]=W=>k.value=W),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Z,k.value]]),E[35]||(E[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Jf={class:"ms-1"},Qf={class:"input-group"},Xf={class:"table-responsive border shadow-sm"},Zf={class:"table table-hover mb-0"},ep=["textContent"],tp={class:"d-flex flex-row"},sp={class:""},op={class:"mb-1"},ap=["src"],lp={class:"ms-2"},np={key:0,class:"fas fa-fw fa-check-circle text-success"},rp={class:"text-wrap text-truncate",style:{width:"20px !important"}},ip={class:"badge bg-primary me-1"},dp={key:0},up={class:"badge bg-info me-1"},cp={class:"text-end me-0 me-sm-5"},mp="/api/v1/programTemplates/search",fp={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:C,pageTitle:h,busy:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,generateReturnUrl:m,security:V,filter:$,initializeFilter:G,getQuery:Q,saveQuery:r,search:u,getRowNumber:j,setSelected:b,isSelected:k}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${w==null?void 0:w.userId}/program-templates/search`,baseUrl:mp,filter:{updateUrl:!0}});return de(async()=>{G(),await u()}),(g,_)=>{const S=ee("router-link"),d=ee("PageHeader"),i=ee("m-pagination"),a=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(d,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h)},{default:B(()=>[N(S,{to:n.urlAdd,class:"btn btn-primary"},{default:B(()=>_[3]||(_[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Jf,[e("div",Qf,[R(e("input",{"onUpdate:modelValue":_[0]||(_[0]=l=>o($).query.criteria=l),onKeyup:_[1]||(_[1]=Ue(l=>o(u)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o($).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:_[2]||(_[2]=l=>o(u)(1))},_[4]||(_[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(a,{errorMessage:o(F)},{default:B(()=>[e("div",Xf,[e("table",Zf,[_[5]||(_[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(o($).items,(l,I)=>(t(),s("tr",{key:l.programTemplateId},[e("td",{textContent:c(o(j)(I)),class:"text-center"},null,8,ep),e("td",null,[e("div",tp,[e("div",sp,[l.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(l.vodSource.video.thumbnails,y=>(t(),s("div",op,[e("img",{src:y.url,class:"img-fuild border",width:"128"},null,8,ap)]))),256)):H("",!0)]),e("div",lp,[N(S,{to:`${n.urlView}/${l.programTemplateId}`,class:"d-inline-block text-truncate link-offset-2"},{default:B(()=>[l.arn?(t(),s("span",np)):H("",!0),e("span",rp,c(l.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(O,null,L(l.vodSource.video.categories,y=>(t(),s("div",null,[e("span",ip,c(y.categoryName),1)]))),256)),l.vodSource.video.genres.length>0?(t(),s("div",dp,[(t(!0),s(O,null,L(l.vodSource.video.genres,y=>(t(),s("span",up,c(y.genreName),1))),256))])):H("",!0)])])])]),e("td",cp,c(o(X).moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[N(S,{to:`${n.urlViewSourceLocation}/${l.sourceLocationId}/${o(m)()}`,class:"link-offset-2"},{default:B(()=>[J(c(l.sourceLocation.name),1)]),_:2},1032,["to"])]),e("td",null,[N(S,{to:`${n.urlViewVodSource}/${l.vodSourceId}/${o(m)()}`,class:"link-offset-2"},{default:B(()=>[J(c(l.vodSource.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,o($).items.length>0]])])]),N(i,{filter:o($),search:o(u),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},pp={key:0},vp={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},gp={class:"nav-item",role:"presentation"},bp={class:"nav-item",role:"presentation"},yp={class:"nav-item d-none",role:"presentation"},$p={class:"tab-content",id:"myTabContent"},wp={class:"mt-2"},hp={class:""},_p={class:"row row-cols-1 row-cols-lg-2"},kp={class:"col"},Sp={class:"col"},Tp={class:"form-floating mb-2"},Mp={class:"col"},Ip={class:"form-floating mb-2"},Cp={class:"col"},xp={class:"col"},Vp={class:"form-floating mb-2"},Pp={class:"row row-cols-1 row-cols-sm-3"},Op={class:"col"},Ap={class:"form-floating mb-2"},Hp={class:"col"},Up={class:"form-floating mb-2"},Dp={class:"col"},Lp={class:"form-floating mb-2"},Ep={class:"row row-cols-1 row-cols-sm-2"},qp={class:"col"},Bp={class:"form-floating mb-2"},Np={class:"col"},Rp={class:"form-floating mb-2"},Fp={class:"mt-2"},zp={class:"table-responsive"},Gp={class:"table table-hover mb-0"},jp={class:"text-center"},Yp={class:"mt-2"},Wp={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const f=n,{appTitle:w,pageTitle:C,busy:h,isDirty:P,validations:M,infoMessage:Y,warningMessage:F,errorMessage:x,router:z,axios:X,utils:D,toasts:U,close:m,closeWithReturnUrl:V,generateReturnUrl:$,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});Se("$config");const Q=ge();Q.user;const r=me({user:Q.user,item:null,hls:null}),u=re();de(async()=>{await g(),u.value=D.getPageTab("programTemplate")||"information-tab"});const j=d=>{D.setPageTab("programTemplate",d),u.value=d},b=d=>d!==u.value?"":"active",k=d=>d!==u.value?"":"show active",g=async()=>{const d=r;if(!h.value)try{h.value=!0,x.value="",r.item=null;const i=`/api/v1/programTemplates/${f.id}/`;await X.get(i).then(a=>{d.item=a.data;const l=d.item;l.startOffsetTime=D.moment.utc(l.startOffsetMillis).format("HH:mm:ss"),l.endOffsetTime=D.moment.utc(l.endOffsetMillis).format("HH:mm:ss"),l.durationTime=D.moment.utc(l.durationInMillis).format("HH:mm:ss"),l.adBreaksDurationTime=D.moment.utc(l.adBreaksDurationInMillis).format("HH:mm:ss"),l.totalProgramTemplateDurationTime=D.moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const I=l.vodSource.video,y=I.durationInMillis;I.durationInMillis=D.moment.utc(y).format("HH:mm:ss")}),r.item.vodSource&&await S(r.item.vodSourceId)}catch(i){x.value=D.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{h.value=!1}},_=async()=>{await g()},S=async d=>{try{let i=`/api/v1/vodSources/${d}/hls`;const a=await X.get(i).then(I=>I.data);r.hls&&r.hls.destroy();const l=document.getElementById("video-view-program-template");r.hls=D.createHlsStream(l,a,"Previewing VOD.")}catch(i){x.value=D.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}};return(d,i)=>{const a=ee("router-link"),l=ee("PageHeader"),I=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(l,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(C)},{default:B(()=>[N(a,{to:`${n.urlEdit}/${n.id}/${o($)()}`,class:"ms-2 btn btn-primary"},{default:B(()=>i[13]||(i[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:i[0]||(i[0]=y=>_()),class:"ms-2 btn btn-secondary"},i[14]||(i[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:i[1]||(i[1]=y=>o(V)(f.urlMain)),class:"btn btn-secondary ms-1"},i[15]||(i[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(I,{errorMessage:o(x)},{default:B(()=>[r.item?(t(),s("div",pp,[e("div",null,[e("ul",vp,[e("li",gp,[e("button",{onClick:i[2]||(i[2]=y=>j("information-tab")),class:ae([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",bp,[e("button",{onClick:i[3]||(i[3]=y=>j("adBreaks-tab")),class:ae([b("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",yp,[e("button",{onClick:i[4]||(i[4]=y=>j("programs-tab")),class:ae([b("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",$p,[e("div",{class:ae([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",wp,[e("div",hp,[e("div",_p,[e("div",kp,[e("div",Sp,[e("div",Tp,[R(e("input",{"onUpdate:modelValue":i[5]||(i[5]=y=>r.item.sourceLocation.name=y),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.sourceLocation.name]]),i[16]||(i[16]=e("label",{for:"name",class:"small fw-bold"},"Source Location",-1))])]),e("div",Mp,[e("div",Ip,[R(e("input",{"onUpdate:modelValue":i[6]||(i[6]=y=>r.item.vodSource.name=y),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.vodSource.name]]),i[17]||(i[17]=e("label",{for:"name",class:"small fw-bold"},"VOD Name",-1))])]),i[18]||(i[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",Cp,[e("div",xp,[e("div",Vp,[R(e("input",{"onUpdate:modelValue":i[7]||(i[7]=y=>r.item.name=y),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.name]]),i[19]||(i[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1))])]),e("div",Pp,[e("div",Op,[e("div",Ap,[R(e("input",{"onUpdate:modelValue":i[8]||(i[8]=y=>r.item.startOffsetTime=y),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Z,r.item.startOffsetTime]]),i[20]||(i[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start Offset",-1))])]),e("div",Hp,[e("div",Up,[R(e("input",{"onUpdate:modelValue":i[9]||(i[9]=y=>r.item.endOffsetTime=y),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Z,r.item.endOffsetTime]]),i[21]||(i[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End Offset",-1))])]),e("div",Dp,[e("div",Lp,[R(e("input",{"onUpdate:modelValue":i[10]||(i[10]=y=>r.item.durationTime=y),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Z,r.item.durationTime]]),i[22]||(i[22]=e("label",{for:"durationTime",class:"small fw-bold"},"Clip",-1))])])]),i[25]||(i[25]=e("h5",null," Duration ",-1)),e("div",Ep,[e("div",qp,[e("div",Bp,[R(e("input",{"onUpdate:modelValue":i[11]||(i[11]=y=>r.item.adBreaksDurationTime=y),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,r.item.adBreaksDurationTime]]),i[23]||(i[23]=e("label",{for:"adBreaksDurationTime",class:"small fw-bold"},"Total Ad Breaks",-1))])]),e("div",Np,[e("div",Rp,[R(e("input",{"onUpdate:modelValue":i[12]||(i[12]=y=>r.item.totalProgramTemplateDurationTime=y),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,r.item.totalProgramTemplateDurationTime]]),i[24]||(i[24]=e("label",{for:"totalProgramTemplateDurationTime",class:"small fw-bold"},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:ae([k("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Fp,[e("div",zp,[e("table",Gp,[i[26]||(i[26]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.adBreaks,(y,p)=>(t(),s("tr",{key:y.programTemplateAdBreakId},[e("td",jp,c(p+1),1),e("td",null,c(o(D).moment.utc(y.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(D).moment.utc(y.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,r.item.adBreaks.length>0]])])])])],2),e("div",{class:ae([k("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Yp,[e("pre",null,c(r.item.programs),1)])],2)])])])):H("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Kp=["disabled"],Jp={class:"row row-cols-1 row-cols-sm-3"},Qp={class:"col-sm-6"},Xp={class:"form-floating mb-2"},Zp={key:0,class:"d-block invalid-feedback"},ev={class:"col-sm-3"},tv={class:"form-floating mb-2"},sv={key:0,class:"d-block invalid-feedback"},ov={class:"col-sm-3"},av={class:"form-floating mb-2"},lv={key:0,class:"d-block invalid-feedback"},nv={class:"row row-cols-1 row-cols-sm-2"},rv={class:"col"},iv={class:"form-floating mb-2"},dv=["value"],uv={key:0,class:"d-block invalid-feedback"},cv={class:"col"},mv={class:"form-floating mb-2"},fv=["value"],pv={key:0,class:"d-block invalid-feedback"},vv={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),U=n,m=me({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),V={item:{name:{title:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},tier:{title:se.withMessage("Tier is required.",oe),$autoDirty:!0,$lazy:!0},playbackMode:{title:se.withMessage("PlaybackMode is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:se.withMessage("Filler Slate Source Location is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:se.withMessage("Filler Slate Vod Source is required.",oe),$autoDirty:!0,$lazy:!0},policy:{title:se.withMessage("Policy is required.",oe),$autoDirty:!0,$lazy:!0}}},$=be(V,m);de(async()=>{await G()});const G=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(k=>{m.lookups.sourceLocations=k.data,m.lookups.sourceLocations.length===1&&(m.item.fillerSlateSourceLocationId=m.lookups.sourceLocations[0].id)}),m.item.fillerSlateSourceLocationId&&await r(m.item.fillerSlateSourceLocationId)}catch(b){M.value=x.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},Q=async()=>{m.item.fillerSlateVodSourceId=null,await r(m.item.fillerSlateSourceLocationId)},r=async b=>{try{let k=`/api/v1/vodSources/lookup/source-location/${b}/?category=2`;await F.get(k).then(g=>{m.lookups.vodSources=g.data})}catch(k){M.value=x.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},u=()=>{if(m.item.name){const b=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${m.item.name}"}]}`;m.item.policy=b}else m.item.policy=null},j=async()=>{const b=m;if(C.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{C.value=!0,M.value="";const g=x.clone(b.item);await F.post("/api/v1/channels/",g).then(_=>{z.success("Add Channel","Channel added.",{onClose:async()=>{const S=`${U.urlView}/${_.data}`;await Y.push(S)}})})}catch(g){M.value=x.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{C.value=!1}};return(b,k)=>{const g=ee("router-link"),_=ee("PageHeader"),S=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(_,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(w)},{default:B(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:k[0]||(k[0]=d=>j()),class:"btn btn-primary"},k[8]||(k[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kp),N(g,{to:U.urlMain,class:"btn btn-secondary ms-2"},{default:B(()=>k[9]||(k[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(S,{errorMessage:o(M),vuelidate:o($)},{default:B(()=>[e("div",null,[e("div",Jp,[e("div",Qp,[e("div",Xp,[R(e("input",{"onUpdate:modelValue":k[1]||(k[1]=d=>m.item.name=d),onChange:k[2]||(k[2]=d=>u()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Z,m.item.name]]),k[10]||(k[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o($).item.name.$error?(t(),s("div",Zp,[(t(!0),s(O,null,L(o($).item.name.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):H("",!0)])]),e("div",ev,[e("div",tv,[R(e("input",{"onUpdate:modelValue":k[3]||(k[3]=d=>m.item.tier=d),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Z,m.item.tier]]),k[11]||(k[11]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o($).item.tier.$error?(t(),s("div",sv,[(t(!0),s(O,null,L(o($).item.tier.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):H("",!0)])]),e("div",ov,[e("div",av,[R(e("input",{"onUpdate:modelValue":k[4]||(k[4]=d=>m.item.playbackMode=d),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Z,m.item.playbackMode]]),k[12]||(k[12]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o($).item.playbackMode.$error?(t(),s("div",lv,[(t(!0),s(O,null,L(o($).item.playbackMode.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):H("",!0)])])]),k[15]||(k[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",nv,[e("div",rv,[e("div",iv,[R(e("select",{"onUpdate:modelValue":k[5]||(k[5]=d=>m.item.fillerSlateSourceLocationId=d),onChange:k[6]||(k[6]=d=>Q()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(O,null,L(m.lookups.sourceLocations,d=>(t(),s("option",{value:d.id},c(d.name),9,dv))),256))],544),[[ue,m.item.fillerSlateSourceLocationId]]),k[13]||(k[13]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o($).item.fillerSlateSourceLocationId.$error?(t(),s("div",uv,[(t(!0),s(O,null,L(o($).item.fillerSlateSourceLocationId.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):H("",!0)])]),e("div",cv,[e("div",mv,[R(e("select",{"onUpdate:modelValue":k[7]||(k[7]=d=>m.item.fillerSlateVodSourceId=d),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(O,null,L(m.lookups.vodSources,d=>(t(),s("option",{value:d.id},c(d.name),9,fv))),256))],512),[[ue,m.item.fillerSlateVodSourceId]]),k[14]||(k[14]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o($).item.fillerSlateVodSourceId.$error?(t(),s("div",pv,[(t(!0),s(O,null,L(o($).item.fillerSlateVodSourceId.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):H("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},gv={components:{Page:Ke},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function bv(n,f,w,C,h,P){const M=ee("Page");return t(),ce(M,{id:w.id,urlView:w.urlView},null,8,["id","urlView"])}const yv=Me(gv,[["render",bv]]),$v={class:"ms-1"},wv={class:"input-group"},hv={class:"table-responsive border shadow-sm"},_v={class:"table table-hover mb-0"},kv=["textContent"],Sv={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Tv={key:0,class:"badge text-bg-success"},Mv={key:1,class:"badge text-bg-secondary"},Iv="/api/v1/channels/search",Cv={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(n){Se("$config");const w=ge().user,{appTitle:C,pageTitle:h,busy:P,infoMessage:M,warningMessage:Y,errorMessage:F,router:x,axios:z,utils:X,toasts:D,close:U,security:m,filter:V,initializeFilter:$,getQuery:G,saveQuery:Q,search:r,getRowNumber:u,setSelected:j,isSelected:b}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${w==null?void 0:w.userId}/Channels/search`,baseUrl:Iv,filter:{updateUrl:!0}});return de(async()=>{$(),await r()}),(k,g)=>{const _=ee("router-link"),S=ee("PageHeader"),d=ee("m-pagination"),i=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(S,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(h)},{default:B(()=>[N(_,{to:n.urlAdd,class:"btn btn-primary"},{default:B(()=>g[3]||(g[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",$v,[e("div",wv,[R(e("input",{"onUpdate:modelValue":g[0]||(g[0]=a=>o(V).query.criteria=a),onKeyup:g[1]||(g[1]=Ue(a=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(V).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:g[2]||(g[2]=a=>o(r)(1))},g[4]||(g[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),N(i,{errorMessage:o(F)},{default:B(()=>[e("div",hv,[e("table",_v,[g[5]||(g[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(o(V).items,(a,l)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:c(o(u)(l)),class:"text-center"},null,8,kv),e("td",null,[N(_,{to:`${n.urlView}/${a.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:B(()=>[a.arn?(t(),s("span",Sv)):H("",!0),J(c(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",Tv,c(a.state),1)):a.state==="STOPPED"?(t(),s("span",Mv,c(a.state),1)):H("",!0)])]),e("td",null,c(a.playbackMode),1),e("td",null,c(a.tier),1)]))),128))]),_:1},512),[[Te,o(V).items.length>0]])])]),N(d,{filter:o(V),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},xv=["id"],Vv={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Pv={class:"modal-content"},Ov={class:"modal-header"},Av={class:"modal-title"},Hv={class:"modal-body"},Uv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Dv=["innerHTML"],Lv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Ev={class:"container"},qv={class:"col"},Bv={class:"form-floating mb-2"},Nv=["value"],Rv={class:"row row-cols-1 row-cols-sm-2"},Fv={class:"col"},zv={class:"form-floating mb-2"},Gv={key:0,class:"d-block invalid-feedback"},jv={class:"col"},Yv={class:"form-floating mb-2"},Wv={key:0,class:"d-block invalid-feedback"},Kv={key:0},Jv={class:"row row-cols-1 row-cols-sm-3"},Qv={class:"col"},Xv={class:"col"},Zv={class:"col"},eg={class:"row row-cols-1 row-cols-sm-2"},tg={class:"col"},sg={class:"col"},og={class:"row row-cols-1 row-cols-sm-2"},ag={class:"col"},lg={class:"col"},ng={key:1},rg={class:"table-responsive border mt-1"},ig={class:"table mb-0"},dg=["onUpdate:modelValue"],ug=["value"],cg={class:"modal-footer"},mg=["disabled"],fg={__name:"_addProgramFromTemplate",emits:["onClose"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),G=w,Q=re(),r=re("modalAddProgramFromTemplate"),u=me({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=be(j,u);de(async()=>{b.value.$reset()});const k=async(K,q,T)=>{Q.value=K;const v=u;Y.value.clear(),z.value="";const E=U.moment(T),ne=E.format("YYYY-MM-DD HH:mm"),W=E.format("YYYYMMDD_HHmm")+"_PRG_";v.eventId=q,v.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},v.selected={programTemplate:null},v.item={programTemplateId:null,name:W,dateScheduledStart:ne,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await S(),b.value.$reset();var _e=document.getElementById(r.value),we=he.getOrCreateInstance(_e);we.show()},g=async K=>{if(!K){G("onClose",{eventId:u.eventId},K);var te=document.getElementById(r.value),ne=he.getOrCreateInstance(te);ne.hide();return}const q=u;q.item.dateScheduledStart;const T=U.moment(q.item.dateScheduledStart).utc(!0).format(),v=U.moment(q.item.dateScheduledStart).add(q.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();debugger;const E={eventId:q.eventId,programTemplateId:q.selected.programTemplate.programTemplateId,channelId:Q.value,name:q.item.name,dateScheduledStart:T,dateScheduledEnd:v,adBreaks:q.selected.programTemplate.adBreaks.map(W=>({sourceLocationId:q.selected.programTemplate.sourceLocationId,vodSourceId:W.vodSourceId,offsetMillis:W.offsetMillis,durationInMillis:W.durationInMillis}))};await D.post("/api/v1/programs/",E).then(W=>{m.success("Add New Program",`Program [${E.name}] was added to this channel.`)},W=>{const _e=U.getErrorMessageAsHtml(W);alert(_e)}),G("onClose",E,K);var te=document.getElementById(r.value),ne=he.getOrCreateInstance(te);ne.hide()},_=async()=>{await g(!0)},S=async()=>{await I(),await d(),await i()},d=async()=>{try{const K=`/api/v1/channelOutputs/get-by-channel/${Q.value}`;await D.get(K).then(q=>{u.lookups.channelOutputs=q.data}),u.item.programTemplateId&&await a()}catch(K){z.value=U.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},i=async()=>{try{const K=`/api/v1/programTemplates/lookup/by-channel/${Q.value}`;await D.get(K).then(q=>{u.lookups.programTemplates=q.data,u.lookups.programTemplates.length===1&&(u.item.programTemplateId=u.lookups.programTemplates[0].id)}),u.item.programTemplateId&&await a()}catch(K){z.value=U.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},a=async()=>{await l(u.item.programTemplateId)},l=async K=>{try{const q=`/api/v1/programTemplates/${K}/`;await D.get(q).then(E=>{u.selected.programTemplate=E.data;const te=u.selected.programTemplate;te.startOffsetTime=U.moment.utc(te.startOffsetMillis).format("HH:mm:ss"),te.endOffsetTime=U.moment.utc(te.endOffsetMillis).format("HH:mm:ss"),te.durationTime=U.moment.utc(te.durationInMillis).format("HH:mm:ss"),te.adBreaksDurationTime=U.moment.utc(te.adBreaksDurationInMillis).format("HH:mm:ss"),te.totalProgramTemplateDurationTime=U.moment.utc(te.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),te.adBreaks.forEach(ne=>{ne.vodSourceId=null})});const T=u,v=T.lookups.channelOutputs[0].outputType;await p(T.selected.programTemplate.sourceLocationId,v)}catch(q){z.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},I=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(q=>{u.lookups.sourceLocations=q.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await y(u.item.sourceLocationId)}catch(K){z.value=U.getErrorMessageAsHtml(K),window.scrollTo(0,0)}finally{}},y=async K=>{try{let q=`/api/v1/vodSources/lookup/source-location/${K}`;await D.get(q).then(T=>{u.lookups.vodSources=T.data})}catch(q){z.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},p=async(K,q)=>{try{let T=`/api/v1/vodsources/lookup/source-location/${K}/output-type/${q}`;await D.get(T).then(v=>{u.lookups.adBreakVodSources=v.data})}catch(T){z.value=U.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}};return f({open:k,close:g}),(K,q)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-hidden":"true"},[e("div",Vv,[e("div",Pv,[e("div",Ov,[e("h5",Av,[q[7]||(q[7]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:q[0]||(q[0]=T=>g(!1)),"aria-label":"Close"})]),e("div",Hv,[o(z)?(t(),s("div",Uv,[q[8]||(q[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Dv)])):H("",!0),o(Y).size>0?(t(),s("div",Lv,[q[9]||(q[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),T=>(t(),s("li",null,c(T),1))),256))])])):H("",!0),e("div",Ev,[e("div",qv,[e("div",Bv,[R(e("select",{"onUpdate:modelValue":q[1]||(q[1]=T=>u.item.programTemplateId=T),class:"form-select",onChange:q[2]||(q[2]=T=>a()),id:"sourceLocationId"},[(t(!0),s(O,null,L(u.lookups.programTemplates,T=>(t(),s("option",{value:T.id}," ["+c(o(U).moment.utc(T.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+c(T.name),9,Nv))),256))],544),[[ue,u.item.programTemplateId]]),q[10]||(q[10]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",Rv,[e("div",Fv,[e("div",zv,[R(e("input",{"onUpdate:modelValue":q[3]||(q[3]=T=>u.item.name=T),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),q[11]||(q[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Gv,[(t(!0),s(O,null,L(o(b).item.name.$errors,T=>(t(),s("div",{key:T.$uid},c(T.$message),1))),128))])):H("",!0)])]),e("div",jv,[e("div",Yv,[R(e("input",{"onUpdate:modelValue":q[4]||(q[4]=T=>u.item.dateScheduledStart=T),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,u.item.dateScheduledStart]]),q[12]||(q[12]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",Wv,[(t(!0),s(O,null,L(o(b).item.dateScheduledStart.$errors,T=>(t(),s("div",{key:T.$uid},c(T.$message),1))),128))])):H("",!0)])])]),u.selected.programTemplate?(t(),s("div",Kv,[e("div",Jv,[e("div",Qv,[e("div",null,[q[13]||(q[13]=e("div",{class:"small text-primary-emphasis"},"Start Offset",-1)),e("div",null,c(u.selected.programTemplate.startOffsetTime),1)])]),e("div",Xv,[e("div",null,[q[14]||(q[14]=e("div",{class:"small text-primary-emphasis"},"End Offset",-1)),e("div",null,c(u.selected.programTemplate.endOffsetTime),1)])]),e("div",Zv,[e("div",null,[q[15]||(q[15]=e("div",{class:"small text-primary-emphasis"},"Clip Duration",-1)),e("div",null,c(u.selected.programTemplate.durationTime),1)])])]),e("div",eg,[e("div",tg,[e("div",null,[q[16]||(q[16]=e("div",{class:"small text-primary-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,c(u.selected.programTemplate.adBreaksDurationTime),1)])]),e("div",sg,[e("div",null,[q[17]||(q[17]=e("div",{class:"small text-primary-emphasis"},"Total Program Duration",-1)),e("div",null,c(u.selected.programTemplate.totalProgramTemplateDurationTime),1)])])]),e("div",og,[e("div",ag,[e("div",null,[q[18]||(q[18]=e("div",{class:"small text-primary-emphasis"},"Source Location",-1)),e("div",null,c(u.selected.programTemplate.sourceLocation.name),1)])]),e("div",lg,[e("div",null,[q[19]||(q[19]=e("div",{class:"small text-primary-emphasis"},"VOD Source",-1)),e("div",null,c(u.selected.programTemplate.vodSource.name),1)])])])])):H("",!0),q[22]||(q[22]=e("hr",null,null,-1)),u.selected.programTemplate?(t(),s("div",ng,[q[21]||(q[21]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",rg,[e("table",ig,[q[20]||(q[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(u.selected.programTemplate.adBreaks,(T,v)=>(t(),s("tr",null,[e("td",null,c(v+1),1),e("td",null,c(o(U).moment.utc(T.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(U).moment.utc(T.durationInMillis).format("HH:mm:ss")),1),e("td",null,[R(e("select",{"onUpdate:modelValue":E=>T.vodSourceId=E,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(u.lookups.adBreakVodSources,E=>(t(),s(O,null,[E.durationInMillis===T.durationInMillis?(t(),s("option",{key:0,value:E.id}," ["+c(o(U).moment.utc(E.durationInMillis).format("HH:mm:ss"))+"] "+c(E.name),9,ug)):H("",!0)],64))),256))],8,dg),[[ue,T.vodSourceId]])])]))),256))])])])])):H("",!0)])]),e("div",cg,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:q[5]||(q[5]=T=>_()),class:"btn btn-primary",type:"button"},q[23]||(q[23]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mg),e("button",{onClick:q[6]||(q[6]=T=>g(!1)),class:"btn btn-secondary ms-1"},q[24]||(q[24]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,xv))}},pg=["id"],vg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},gg={class:"modal-content"},bg={class:"modal-header"},yg={class:"modal-title"},$g={class:"modal-body"},wg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hg=["innerHTML"],_g={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},kg={key:2,class:"container"},Sg={class:"row row-cols-1 row-cols-sm-2"},Tg={class:"col"},Mg={key:0},Ig={class:"col"},Cg={key:0},xg={class:"row row-cols-1 row-cols-sm-3 mt-2"},Vg={class:"col"},Pg={key:0},Og={class:"col"},Ag={class:"form-floating mb-2"},Hg={key:0,class:"d-block invalid-feedback"},Ug={class:"col"},Dg={class:"form-floating mb-2"},Lg={key:0,class:"d-block invalid-feedback"},Eg={class:"row row-cols-1 row-cols-sm-3"},qg={class:"col"},Bg={class:"col"},Ng={class:"col"},Rg={class:"row row-cols-1 row-cols-sm-2 mt-2"},Fg={class:"col"},zg={class:"col"},Gg={key:0},jg={class:"table-responsive border mt-1"},Yg={class:"table mb-0"},Wg=["onUpdate:modelValue"],Kg=["value"],Jg={class:"modal-footer"},Qg=["disabled"],rt={__name:"_editProgram",emits:["onClose"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),G=w,Q=re(),r=re("modalEditProgram"),u=me({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=be(j,u);de(async()=>{b.value.$reset()});const k=async(a,l)=>{Q.value=a;const I=u;Y.value.clear(),z.value="",I.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},I.item=null,await S(),await d(),b.value.$reset();var y=document.getElementById(r.value),p=he.getOrCreateInstance(y);p.show()},g=async a=>{if(!a){G("onClose",a);var p=document.getElementById(r.value),K=he.getOrCreateInstance(p);K.hide();return}const l=u,I=U.moment(l.item.dateScheduledStart).utc(!0).format(),y={programId:Q.value,name:l.item.name,dateScheduledStart:I,adBreaks:l.item.adBreaks.map(q=>({sourceLocationId:l.item.sourceLocationId,vodSourceId:q.vodSourceId,offsetMillis:q.offsetMillis,durationInMillis:q.durationInMillis}))};try{await D.put("/api/v1/programs/",y).then(T=>{m.success("Edit Program","Program was edited.")})}catch(q){z.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0);return}finally{}G("onClose",a);var p=document.getElementById(r.value),K=he.getOrCreateInstance(p);K.hide()},_=async()=>{await g(!0)},S=async()=>{try{const a=`/api/v1/programs/${Q.value}/`;await D.get(a).then(y=>{u.item=y.data;const p=u.item,T=U.moment.utc(p.dateScheduledStart).format("YYYY-MM-DD HH:mm");u.item.dateScheduledStart=T,p.startOffsetTime=U.moment.utc(p.startOffsetMillis).format("HH:mm:ss"),p.endOffsetTime=U.moment.utc(p.endOffsetMillis).format("HH:mm:ss"),p.durationTime=U.moment.utc(p.durationInMillis).format("HH:mm:ss"),p.adBreaksDurationTime=U.moment.utc(p.adBreaksDurationInMillis).format("HH:mm:ss"),p.totalProgramTemplateDurationTime=U.moment.utc(p.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const l=u,I=l.item.channel.outputs[0].outputType;await i(l.item.sourceLocationId,I)}catch(a){z.value=U.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},d=async()=>{},i=async(a,l)=>{try{let I=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${l}`;await D.get(I).then(y=>{u.lookups.adBreakVodSources=y.data})}catch(I){z.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}};return f({open:k,close:g}),(a,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",vg,[e("div",gg,[e("div",bg,[e("h5",yg,[l[5]||(l[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=I=>g(!1)),"aria-label":"Close"})]),e("div",$g,[o(z)?(t(),s("div",wg,[l[6]||(l[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,hg)])):H("",!0),o(Y).size>0?(t(),s("div",_g,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),I=>(t(),s("li",null,c(I),1))),256))])])):H("",!0),u.item?(t(),s("div",kg,[e("div",Sg,[e("div",Tg,[e("div",null,[l[8]||(l[8]=e("div",{class:"small text-primary-emphasis"},"Source Location",-1)),u.item.sourceLocation?(t(),s("div",Mg,c(u.item.sourceLocation.name),1)):H("",!0)])]),e("div",Ig,[e("div",null,[l[9]||(l[9]=e("div",{class:"small text-primary-emphasis"},"Source Location",-1)),u.item.vodSource?(t(),s("div",Cg,c(u.item.vodSource.name),1)):H("",!0)])])]),e("div",xg,[e("div",Vg,[e("div",null,[l[10]||(l[10]=e("div",{class:"small text-primary-emphasis"},"Relative Program",-1)),u.item.relativeProgram?(t(),s("div",Pg,c(u.item.relativeProgram.name),1)):H("",!0)])]),e("div",Og,[e("div",Ag,[R(e("input",{"onUpdate:modelValue":l[1]||(l[1]=I=>u.item.name=I),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),l[11]||(l[11]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Hg,[(t(!0),s(O,null,L(o(b).item.name.$errors,I=>(t(),s("div",{key:I.$uid},c(I.$message),1))),128))])):H("",!0)])]),e("div",Ug,[e("div",Dg,[R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=I=>u.item.dateScheduledStart=I),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,u.item.dateScheduledStart]]),l[12]||(l[12]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",Lg,[(t(!0),s(O,null,L(o(b).item.dateScheduledStart.$errors,I=>(t(),s("div",{key:I.$uid},c(I.$message),1))),128))])):H("",!0)])])]),e("div",null,[e("div",Eg,[e("div",qg,[e("div",null,[l[13]||(l[13]=e("div",{class:"small text-primary-emphasis"},"Start Offset",-1)),e("div",null,c(u.item.startOffsetTime),1)])]),e("div",Bg,[e("div",null,[l[14]||(l[14]=e("div",{class:"small text-primary-emphasis"},"End Offset",-1)),e("div",null,c(u.item.endOffsetTime),1)])]),e("div",Ng,[e("div",null,[l[15]||(l[15]=e("div",{class:"small text-primary-emphasis"},"Clip Duration",-1)),e("div",null,c(u.item.durationTime),1)])])]),e("div",Rg,[e("div",Fg,[e("div",null,[l[16]||(l[16]=e("div",{class:"small text-primary-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,c(u.item.adBreaksDurationTime),1)])]),e("div",zg,[e("div",null,[l[17]||(l[17]=e("div",{class:"small text-primary-emphasis"},"Total Program Duration",-1)),e("div",null,c(u.item.totalProgramTemplateDurationTime),1)])])])]),l[20]||(l[20]=e("hr",null,null,-1)),u.item?(t(),s("div",Gg,[l[19]||(l[19]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",jg,[e("table",Yg,[l[18]||(l[18]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(u.item.adBreaks,(I,y)=>(t(),s("tr",null,[e("td",null,c(y+1),1),e("td",null,c(o(U).moment.utc(I.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(U).moment.utc(I.durationInMillis).format("HH:mm:ss")),1),e("td",null,[R(e("select",{"onUpdate:modelValue":p=>I.vodSourceId=p,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(u.lookups.adBreakVodSources,p=>(t(),s(O,null,[p.durationInMillis===I.durationInMillis?(t(),s("option",{key:0,value:p.id}," ["+c(o(U).moment.utc(p.durationInMillis).format("HH:mm:ss"))+"] "+c(p.name),9,Kg)):H("",!0)],64))),256))],8,Wg),[[ue,I.vodSourceId]])])]))),256))])])])])):H("",!0)])):H("",!0)]),e("div",Jg,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:l[3]||(l[3]=I=>_()),class:"btn btn-primary ms-2",type:"button"},l[21]||(l[21]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qg),e("button",{onClick:l[4]||(l[4]=I=>g(!1)),class:"btn btn-secondary ms-1"},l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,pg))}},Xg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:f,pageTitle:w,busy:C,infoMessage:h,warningMessage:P,errorMessage:M,router:Y,axios:F,utils:x,toasts:z,close:X,security:D}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),U=n,m=re(null),V=re(null),$=re(null),G={viewType:"Week",cellDuration:15,startDate:Pe.DayPilot.Date.today(),onTimeRangeSelected:S=>{var d=S.control;const i={start:S.start,end:S.end,id:Pe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};d.events.add(i);var a=d.events.find(i.id);k(a)},onBeforeEventRender:S=>{if(S.data.barColor="green",!!S.data.tags)switch(S.data.tags.type){case"new":S.data.barColor="yellow";break;case"business":S.data.barColor="red";break;case"personal":S.data.barColor="greem";break;case"vacation":S.data.barColor="black";break;default:S.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async S=>{const d=S.newStart.value,i=S.e.id(),a=x.moment(d).utc(!0).format();try{let l="/api/v1/programs/scheduled-date-start";const I={programId:i,dateScheduledStart:a};await F.put(l,I).then(y=>{z.success("Program date scheduled start was edited.")})}catch(l){M.value=x.getErrorMessageAsHtml(l),window.scrollTo(0,0);return}finally{}await j()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async S=>{var d=S.e.id();_(d)},contextMenu:new Pe.DayPilot.Menu([{text:"Clone",onClick:async S=>{const d=S.source.id();try{let i=`/api/v1/programs/${d}/clone`;await F.post(i).then(a=>{z.success("Clone Program","Program was cloned.")})}catch(i){M.value=x.getErrorMessageAsHtml(i),window.scrollTo(0,0);return}finally{await j()}}},{text:"Delete",onClick:async S=>{if(!confirm("Do you want to remove this program?"))return;const i=S.source.id();try{let a=`/api/v1/programs/${i}/`;await F.delete(a).then(l=>{z.success("Delete Program","Program was deleted.")}),m.value.control.events.remove(S.source)}catch(a){M.value=x.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await j()}}}])},Q=re([]),r=()=>{m.value.control.update({events:Q.value})},u=me({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});de(async()=>{await j()});const j=async()=>{await b(),await r()},b=async()=>{const S=u;if(!C.value)try{C.value=!0,M.value="";const d=`/api/v1/channels/${U.id}/`;await F.get(d).then(i=>{S.item=i.data;const a=S.item.outputs,l=S.item.programs.map(I=>{let y=`${I.name}`,p=`[${I.name}]`;return I.relativeProgram&&(p+=` => [${I.relativeProgram.name}]`),{start:x.moment.utc(I.dateScheduledStart).format(),end:x.moment.utc(I.dateScheduledEnd).format(),id:I.programId,text:y,toolTip:p}});Q.value=l})}catch(d){M.value=x.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{C.value=!1}},k=S=>{V.value.open(U.id,S.id(),S.start().value)},g=async(S,d)=>{var i=m.value,a=i.control.events.find(S.eventId);if(!d&&a){m.value.control.events.remove(a);return}i.control.events.find(q=>q.text()==S.name)&&(alert("Program already exists in this channel. Removing in the calendar."),m.value.control.events.remove(a));const I=x.moment(S.dateScheduledStart).utc(!0).format(),y=x.moment(S.dateScheduledEnd).utc(!0).format(),p=new Pe.DayPilot.Date(I),K=new Pe.DayPilot.Date(y);a.text(S.name),a.start(new Pe.DayPilot.Date(p)),a.end(new Pe.DayPilot.Date(K)),a.data.tags.program=S,a.commit(),m.value.control.update(),await j()},_=(S,d)=>{$.value.open(S,d)};return(S,d)=>{const i=ee("router-link"),a=ee("PageHeader"),l=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(w)},{default:B(()=>[e("button",{onClick:d[0]||(d[0]=I=>j()),class:"btn btn-secondary ms-1"},d[1]||(d[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),N(i,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:B(()=>d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),N(l,{errorMessage:o(M),vuelidate:S.v$},{default:B(()=>[e("div",null,[N(o(Pe.DayPilotCalendar),{id:"dp",config:G,ref_key:"calendarRef",ref:m},null,512),N(fg,{ref_key:"modalAddProgram",ref:V,onOnClose:g},null,512),N(rt,{ref_key:"modalEditProgram",ref:$,onOnClose:j},null,512)])]),_:1},8,["errorMessage","vuelidate"]),d[3]||(d[3]=J(" > "))])]),_:1})}}},Zg=["id"],e1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},t1={class:"modal-content"},s1={class:"modal-header"},o1={class:"modal-title"},a1={class:"modal-body"},l1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},n1=["innerHTML"],r1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},i1={class:"container"},d1={class:"row row-cols-1 row-cols-sm-3"},u1={class:"col"},c1={class:"form-floating mb-2"},m1=["disabled"],f1=["value"],p1={class:"col"},v1={class:"form-floating mb-2"},g1={key:0,class:"d-block invalid-feedback"},b1={class:"col"},y1={class:"form-floating mb-2"},$1={key:0,class:"d-block invalid-feedback"},w1={class:"row row-cols-sm-2"},h1={class:"col"},_1={class:"form-floating mb-2"},k1=["value"],S1={key:0,class:"d-block invalid-feedback"},T1={class:"col"},M1={class:"form-floating mb-2"},I1=["value"],C1={key:0,class:"d-block invalid-feedback"},x1={class:"col"},V1={class:"input-group mb-1"},P1={class:"form-floating"},O1={key:0,class:"input-group-text"},A1={key:0},H1={key:1},U1={key:2},D1={key:3,class:"d-block invalid-feedback"},L1={class:"col"},E1={class:"input-group mb-1"},q1={class:"form-floating"},B1={key:0,class:"input-group-text"},N1={key:0},R1={key:1},F1={key:2,class:"d-block invalid-feedback"},z1={class:"table-responsive border mt-1"},G1={class:"table"},j1={class:"input-group mb-1"},Y1=["onUpdate:modelValue"],W1={key:0,class:"input-group-text"},K1=["onUpdate:modelValue"],J1=["value"],Q1=["onUpdate:modelValue"],X1=["value"],Z1=["onClick"],eb={class:"modal-footer"},tb=["disabled"],sb={__name:"_addProgram",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),G=w,Q=re(),r=re("modalAddProgram"),u=me({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),j={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:se.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:se.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:se.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=be(j,u);de(async()=>{b.value.$reset()});const k=async q=>{Q.value=q;const T=u;Y.value.clear(),z.value="";const v=U.moment().local().add(2,"m"),te=v.format("YYYY-MM-DD HH:mm"),ne=v.format("YYYY_MM_DD")+"_PROGRAM_";T.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},T.item={name:ne,relativeProgramId:null,dateScheduledStart:te,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await S(),b.value.$reset();var W=document.getElementById(r.value),_e=he.getOrCreateInstance(W);_e.show()},g=async()=>{var q=document.getElementById(r.value),T=he.getOrCreateInstance(q);T.hide(),G("refresh")},_=async()=>{const q=u;if(P.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,z.value="";const E=q.item;delete E.vodSource,E.channelId=Q.value;var v=E.dateScheduledStart;E.dateScheduledStart=U.moment(v).utc().format(),await D.post("/api/v1/programs/",E).then(te=>{m.success("Add Program","Program added to Channel",{async onClose(){}})}),await g()}catch(E){z.value=U.getErrorMessageAsHtml(E),window.scrollTo(0,0)}finally{P.value=!1}},S=async()=>{await d(),await a(),await I()},d=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(T=>{u.lookups.sourceLocations=T.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await i(u.item.sourceLocationId)}catch(q){z.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},i=async q=>{try{let T=`/api/v1/vodSources/lookup/source-location/${q}`;await D.get(T).then(v=>{u.lookups.vodSources=v.data})}catch(T){z.value=U.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},a=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(T=>{u.lookups.adBreakSourceLocations=T.data})}catch(q){z.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},l=async q=>{try{let T=`/api/v1/vodSources/lookup/source-location/${q}`;await D.get(T).then(v=>{u.lookups.adBreakVodSources=v.data})}catch(T){z.value=U.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},I=async()=>{try{const q=`/api/v1/programs/lookup/?channelId=${Q.value}`;await D.get(q).then(T=>{if(u.lookups.channelPrograms=T.data,u.lookups.channelPrograms.length===1){const E=u.lookups.channelPrograms[0];u.item.relativeProgramId=E.id}})}catch(q){z.value=U.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},y=()=>{const q={offsetMillis:0,sourceLocationId:null,vodSourceId:null},T=u.item.adBreaks.length;if(T>0){const v=u.item.adBreaks[T-1];q.offsetMillis=v.offsetMillis+1e4}u.item.adBreaks.push(q)},p=q=>{u.item.adBreaks.splice(q,1)},K=()=>{const q=u.item.vodSource;u.item.vodSourceId=q.id};return f({open:k,close:g}),(q,T)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",e1,[e("div",t1,[e("div",s1,[e("h5",o1,[T[12]||(T[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:T[0]||(T[0]=v=>g()),"aria-label":"Close"})]),e("div",a1,[o(z)?(t(),s("div",l1,[T[13]||(T[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,n1)])):H("",!0),o(Y).size>0?(t(),s("div",r1,[T[14]||(T[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),v=>(t(),s("li",null,c(v),1))),256))])])):H("",!0),e("div",i1,[e("div",d1,[e("div",u1,[e("div",c1,[R(e("select",{"onUpdate:modelValue":T[1]||(T[1]=v=>u.item.relativeProgramId=v),class:"form-select",id:"sourceLocationId",disabled:u.lookups.channelPrograms.length<=0},[(t(!0),s(O,null,L(u.lookups.channelPrograms,v=>(t(),s("option",{value:v.id},c(v.name),9,f1))),256))],8,m1),[[ue,u.item.relativeProgramId]]),T[15]||(T[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",p1,[e("div",v1,[R(e("input",{"onUpdate:modelValue":T[2]||(T[2]=v=>u.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),T[16]||(T[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",g1,[(t(!0),s(O,null,L(o(b).item.name.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):H("",!0)])]),e("div",b1,[e("div",y1,[R(e("input",{"onUpdate:modelValue":T[3]||(T[3]=v=>u.item.dateScheduledStart=v),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,u.item.dateScheduledStart]]),T[17]||(T[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",$1,[(t(!0),s(O,null,L(o(b).item.dateScheduledStart.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):H("",!0)])])]),e("div",w1,[e("div",h1,[e("div",_1,[R(e("select",{"onUpdate:modelValue":T[4]||(T[4]=v=>u.item.sourceLocationId=v),onChange:T[5]||(T[5]=v=>i(u.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(u.lookups.sourceLocations,v=>(t(),s("option",{value:v.id},c(v.name),9,k1))),256))],544),[[ue,u.item.sourceLocationId]]),T[18]||(T[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(b).item.sourceLocationId.$error?(t(),s("div",S1,[(t(!0),s(O,null,L(o(b).item.sourceLocationId.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):H("",!0)])]),e("div",T1,[e("div",M1,[R(e("select",{"onUpdate:modelValue":T[6]||(T[6]=v=>u.item.vodSource=v),onChange:T[7]||(T[7]=v=>K()),class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(u.lookups.vodSources,v=>(t(),s("option",{value:v},c(v.name),9,I1))),256))],544),[[ue,u.item.vodSource]]),T[19]||(T[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(b).item.vodSourceId.$error?(t(),s("div",C1,[(t(!0),s(O,null,L(o(b).item.vodSourceId.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):H("",!0)])]),e("div",x1,[e("div",V1,[e("div",P1,[R(e("input",{"onUpdate:modelValue":T[8]||(T[8]=v=>u.item.startOffsetMillis=v),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Z,u.item.startOffsetMillis]]),T[20]||(T[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),u.item.startOffsetMillis>0?(t(),s("span",O1,c(o(U).moment.utc(u.item.startOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),u.item.startOffsetMillis>0&&u.item.startOffsetMillis<3e4?(t(),s("div",A1,T[21]||(T[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):H("",!0),u.item.startOffsetMillis>u.item.endOffsetMillis&&u.item.endOffsetMillis>0?(t(),s("div",H1,T[22]||(T[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):H("",!0),u.item.vodSource&&u.item.startOffsetMillis>u.item.vodSource.durationInMillis?(t(),s("div",U1,T[23]||(T[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(b).item.startOffsetMillis.$error?(t(),s("div",D1,[(t(!0),s(O,null,L(o(b).item.startOffsetMillis.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):H("",!0)]),e("div",L1,[e("div",E1,[e("div",q1,[R(e("input",{"onUpdate:modelValue":T[9]||(T[9]=v=>u.item.endOffsetMillis=v),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Z,u.item.endOffsetMillis]]),T[24]||(T[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),u.item.endOffsetMillis>0?(t(),s("span",B1,c(o(U).moment.utc(u.item.endOffsetMillis).format("HH:mm:ss")),1)):H("",!0)]),u.item.endOffsetMillis>0&&u.item.endOffsetMillis<3e4?(t(),s("div",N1,T[25]||(T[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):H("",!0),u.item.vodSource&&u.item.endOffsetMillis>u.item.vodSource.durationInMillis?(t(),s("div",R1,T[26]||(T[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):H("",!0),o(b).item.endOffsetMillis.$error?(t(),s("div",F1,[(t(!0),s(O,null,L(o(b).item.endOffsetMillis.$errors,v=>(t(),s("div",{key:v.$uid},c(v.$message),1))),128))])):H("",!0)])]),T[30]||(T[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[T[27]||(T[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:y,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",z1,[e("table",G1,[T[29]||(T[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(O,null,L(u.item.adBreaks,(v,E)=>(t(),s("tr",null,[e("td",null,c(E+1),1),e("td",null,[e("div",j1,[R(e("input",{"onUpdate:modelValue":te=>v.offsetMillis=te,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Y1),[[Z,v.offsetMillis]]),v.offsetMillis>0?(t(),s("span",W1,c(o(U).moment.utc(v.offsetMillis).format("HH:mm:ss")),1)):H("",!0)])]),e("td",null,[R(e("select",{"onUpdate:modelValue":te=>v.sourceLocationId=te,onChange:T[10]||(T[10]=te=>l(u.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(O,null,L(u.lookups.adBreakSourceLocations,te=>(t(),s("option",{value:te.id},c(te.name),9,J1))),256))],40,K1),[[ue,v.sourceLocationId]])]),e("td",null,[R(e("select",{"onUpdate:modelValue":te=>v.vodSourceId=te,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(O,null,L(u.lookups.adBreakVodSources,te=>(t(),s("option",{value:te.id},c(te.name),9,X1))),256))],8,Q1),[[ue,v.vodSourceId]])]),e("td",null,[e("button",{onClick:te=>p(E),class:"btn btn-outline-warning"},T[28]||(T[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Z1)])]))),256))])])])])])]),e("div",eb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:T[11]||(T[11]=v=>_()),class:"btn btn-primary",type:"button"},T[31]||(T[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,tb),T[32]||(T[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Zg))}},ob=["id"],ab={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},lb={class:"modal-content"},nb={class:"modal-header"},rb={class:"modal-title"},ib={class:"modal-body"},db={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ub=["innerHTML"],cb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},mb={class:"container"},fb={class:"col"},pb={class:"form-floating mb-2"},vb={class:"col"},gb={class:"form-floating mb-2"},bb={key:0,class:"d-block invalid-feedback"},yb={class:"col"},$b={class:"form-floating mb-2 d-none"},wb={key:0,class:"d-block invalid-feedback"},hb={class:"col"},_b={class:"form-floating mb-2"},kb={key:0,class:"d-block invalid-feedback"},Sb={class:"modal-footer"},Tb=["disabled"],Mb={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),G=w,Q=re(),r=re("modalAddPlaybackConfiguration"),u=me({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),j={item:{name:{required:se.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:se.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:se.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},b=be(j,u);de(async()=>{b.value.$reset()});const k=async(S,d)=>{Q.value=S;const i=u;Y.value.clear(),z.value="";const a=d;let l=a.lastIndexOf("/");const I=a.substring(0,l);let y=a.substring(l+1);l=y.lastIndexOf("."),y=y.substring(0,l)+"_ADCAMPAIGN_",i.item={name:y,originalVideoContentSourceUrl:d,videoContentSourceUrl:I,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},b.value.$reset();var p=document.getElementById(r.value),K=he.getOrCreateInstance(p);K.show()},g=async()=>{var S=document.getElementById(r.value),d=he.getOrCreateInstance(S);d.hide(),G("refresh")},_=async()=>{const S=u;if(P.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,z.value="";const i=S.item;i.channelOutputId=Q.value,await D.put("/api/v1/channelOutputs/playback/",i).then(a=>{m.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await g()}catch(i){z.value=U.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:k,close:g}),(S,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ab,[e("div",lb,[e("div",nb,[e("h5",rb,[d[6]||(d[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:d[0]||(d[0]=i=>g()),"aria-label":"Close"})]),e("div",ib,[o(z)?(t(),s("div",db,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,ub)])):H("",!0),o(Y).size>0?(t(),s("div",cb,[d[8]||(d[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),i=>(t(),s("li",null,c(i),1))),256))])])):H("",!0),e("div",mb,[e("div",fb,[e("div",pb,[R(e("textarea",{"onUpdate:modelValue":d[1]||(d[1]=i=>u.item.originalVideoContentSourceUrl=i),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Z,u.item.originalVideoContentSourceUrl]]),d[9]||(d[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",vb,[e("div",gb,[R(e("input",{"onUpdate:modelValue":d[2]||(d[2]=i=>u.item.name=i),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),d[10]||(d[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",bb,[(t(!0),s(O,null,L(o(b).item.name.$errors,i=>(t(),s("div",{key:i.$uid},c(i.$message),1))),128))])):H("",!0)])]),e("div",yb,[e("div",$b,[R(e("input",{"onUpdate:modelValue":d[3]||(d[3]=i=>u.item.videoContentSourceUrl=i),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,u.item.videoContentSourceUrl]]),d[11]||(d[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[12]||(d[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(b).item.videoContentSourceUrl.$error?(t(),s("div",wb,[(t(!0),s(O,null,L(o(b).item.videoContentSourceUrl.$errors,i=>(t(),s("div",{key:i.$uid},c(i.$message),1))),128))])):H("",!0)])]),e("div",hb,[e("div",_b,[R(e("textarea",{"onUpdate:modelValue":d[4]||(d[4]=i=>u.item.adDecisionServerUrl=i),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,u.item.adDecisionServerUrl]]),d[13]||(d[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(b).item.adDecisionServerUrl.$error?(t(),s("div",kb,[(t(!0),s(O,null,L(o(b).item.adDecisionServerUrl.$errors,i=>(t(),s("div",{key:i.$uid},c(i.$message),1))),128))])):H("",!0),d[14]||(d[14]=ze('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",Sb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:d[5]||(d[5]=i=>_()),class:"btn btn-primary",type:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Tb),d[16]||(d[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,ob))}},Ib=["id"],Cb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},xb={class:"modal-content"},Vb={class:"modal-header"},Pb={class:"modal-title"},Ob={class:"modal-body"},Ab={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Hb=["innerHTML"],Ub={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Db={class:"container"},Lb={class:"col"},Eb={class:"form-floating mb-2"},qb=["value"],Bb={key:0,class:"d-block invalid-feedback"},Nb={class:"col"},Rb={class:"form-floating mb-2"},Fb={key:0,class:"d-block invalid-feedback"},zb={class:"col"},Gb={class:"form-floating mb-2"},jb={key:0,class:"d-block invalid-feedback"},Yb={class:"modal-footer"},Wb=["disabled"],Kb={__name:"_addChannelOutput",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),G=w,Q=re(),r=re("modalAddChannelOutput"),u=me({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),j={item:{sourceGroupId:{required:se.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},manifestName:{required:se.withMessage("Manifest Name is required.",oe),$autoDirty:!0,$lazy:!0},outputType:{required:se.withMessage("Output Type is required.",oe),$autoDirty:!0,$lazy:!0}}},b=be(j,u);de(async()=>{b.value.$reset()});const k=async()=>{await g()},g=async()=>{try{await D.get("/api/v1/sourceGroups/lookup/").then(a=>{u.lookups.sourceGroups=a.data,u.lookups.sourceGroups.length===1&&(u.item.sourceGroupId=u.lookups.sourceGroups[0].id)})}catch(i){z.value=U.getErrorMessageAsHtml(i),window.scrollTo(0,0)}finally{}},_=async i=>{Q.value=i;const a=u;Y.value.clear(),z.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await k(),b.value.$reset();var l=document.getElementById(r.value),I=he.getOrCreateInstance(l);I.show()},S=async()=>{var i=document.getElementById(r.value),a=he.getOrCreateInstance(i);a.hide(),G("refresh")},d=async()=>{const i=u;if(P.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,z.value="";const l=i.item;l.channelId=Q.value,await D.post("/api/v1/channelOutputs",l).then(I=>{m.success("Add Channel Output","Channel output added.")}),await S()}catch(l){z.value=U.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{P.value=!1}};return f({open:_,close:S}),(i,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Cb,[e("div",xb,[e("div",Vb,[e("h5",Pb,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Ob,[o(z)?(t(),s("div",Ab,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Hb)])):H("",!0),o(Y).size>0?(t(),s("div",Ub,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),l=>(t(),s("li",null,c(l),1))),256))])])):H("",!0),e("div",Db,[e("div",Lb,[e("div",Eb,[R(e("select",{"onUpdate:modelValue":a[0]||(a[0]=l=>u.item.sourceGroupId=l),class:"form-select",id:"sourceGroupId"},[(t(!0),s(O,null,L(u.lookups.sourceGroups,l=>(t(),s("option",{value:l.id},c(l.name),9,qb))),256))],512),[[ue,u.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(b).item.sourceGroupId.$error?(t(),s("div",Bb,[(t(!0),s(O,null,L(o(b).item.sourceGroupId.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):H("",!0)])]),e("div",Nb,[e("div",Rb,[R(e("select",{"onUpdate:modelValue":a[1]||(a[1]=l=>u.item.outputType=l),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,u.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(b).item.outputType.$error?(t(),s("div",Fb,[(t(!0),s(O,null,L(o(b).item.outputType.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):H("",!0)])]),e("div",zb,[e("div",Gb,[R(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>u.item.manifestName=l),class:"form-control",id:"manifestName"},null,512),[[Z,u.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(b).item.manifestName.$error?(t(),s("div",jb,[(t(!0),s(O,null,L(o(b).item.manifestName.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):H("",!0)])])])]),e("div",Yb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:a[3]||(a[3]=l=>d()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Wb),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Ib))}},Jb=["id"],Qb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Xb={class:"modal-content"},Zb={class:"modal-header"},ey={class:"modal-title"},ty={class:"modal-body"},sy={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},oy=["innerHTML"],ay={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ly={class:"container"},ny={class:"col"},ry={class:"form-floating mb-2"},iy=["value"],dy={key:0,class:"d-block invalid-feedback"},uy={class:"col"},cy={class:"form-floating mb-2"},my=["value"],fy={key:0,class:"d-block invalid-feedback"},py={class:"col"},vy={class:"card h-100"},gy=["id"],by={class:"modal-footer"},yy=["disabled"],$y={__name:"_editFillerSlate",emits:["refresh"],setup(n,{expose:f,emit:w}){const{appTitle:C,pageTitle:h,busy:P,isDirty:M,validations:Y,infoMessage:F,warningMessage:x,errorMessage:z,router:X,axios:D,utils:U,toasts:m,closeWithReturnUrl:V,security:$}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),G=w,Q=re("modalEditFillerSlate"),r=me({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),u={item:{channelId:{required:se.withMessage("channelId is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:se.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:se.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0}}},j=be(u,r);de(async()=>{j.value.$reset()}),Ee(()=>{r.hls&&(r.hls.stopLoad(),r.hls.destroy())});const b=async()=>{await k()},k=async()=>{try{await D.get("/api/v1/sourcelocations/lookup/").then(y=>{r.lookups.sourceLocations=y.data}),r.item.sourceLocationId&&await g(r.item.sourceLocationId)}catch(I){z.value=U.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},g=async I=>{try{let y=`/api/v1/vodSources/lookup/source-Location/${I}/?type=2`;await D.get(y).then(p=>{r.lookups.vodSources=p.data})}catch(y){z.value=U.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},_=async(I,y,p)=>{const K=r;Y.value.clear(),z.value="",K.lookups={sourceLocations:[],vodSources:[]},K.item={channelId:I,sourceLocationId:y,vodSourceId:p},await b(),r.item.vodSourceId&&await l(r.item.vodSourceId),j.value.$reset();var q=document.getElementById(Q.value),T=he.getOrCreateInstance(q);T.show()},S=async()=>{var I=document.getElementById(Q.value),y=he.getOrCreateInstance(I);y.hide(),r.hls&&(r.hls.stopLoad(),r.hls.destroy()),G("refresh")},d=async()=>{const I=r;if(P.value)return;if(!await j.value.$validate()){window.scrollTo(0,0);return}try{P.value=!0,z.value="";const p=I.item;await D.put("/api/v1/channels/filler-slate",p).then(K=>{m.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await S()}catch(p){z.value=U.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{P.value=!1}},i=async()=>{r.item.vodSourceId=null,await g(r.item.sourceLocationId)},a=async()=>{await l(r.item.vodSourceId)},l=async I=>{try{let y=`/api/v1/vodSources/${I}/hls`;const p=await D.get(y).then(q=>q.data);if(r.hls){r.hls.loadSource(p);return}const K=document.getElementById(`video-${r.item.channelId}`);r.hls=U.createHlsStream(K,p)}catch(y){z.value=U.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}};return f({open:_,close:S}),(I,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Q.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Qb,[e("div",Xb,[e("div",Zb,[e("h5",ey,[y[6]||(y[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),J(c(o(h)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=p=>S()),"aria-label":"Close"})]),e("div",ty,[o(z)?(t(),s("div",sy,[y[7]||(y[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,oy)])):H("",!0),o(Y).size>0?(t(),s("div",ay,[y[8]||(y[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(o(Y).values(),p=>(t(),s("li",null,c(p),1))),256))])])):H("",!0),e("div",ly,[e("div",ny,[e("div",ry,[R(e("select",{"onUpdate:modelValue":y[1]||(y[1]=p=>r.item.sourceLocationId=p),onChange:y[2]||(y[2]=p=>i()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(O,null,L(r.lookups.sourceLocations,p=>(t(),s("option",{value:p.id},c(p.name),9,iy))),256))],544),[[ue,r.item.sourceLocationId]]),y[9]||(y[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(j).item.sourceLocationId.$error?(t(),s("div",dy,[(t(!0),s(O,null,L(o(j).item.sourceLocationId.$errors,p=>(t(),s("div",{key:p.$uid},c(p.$message),1))),128))])):H("",!0)])]),e("div",uy,[e("div",cy,[R(e("select",{"onUpdate:modelValue":y[3]||(y[3]=p=>r.item.vodSourceId=p),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(O,null,L(r.lookups.vodSources,p=>(t(),s("option",{value:p.id},c(p.name),9,my))),256))],544),[[ue,r.item.vodSourceId]]),y[10]||(y[10]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(j).item.vodSourceId.$error?(t(),s("div",fy,[(t(!0),s(O,null,L(o(j).item.vodSourceId.$errors,p=>(t(),s("div",{key:p.$uid},c(p.$message),1))),128))])):H("",!0)])]),e("div",py,[e("div",vy,[e("video",{id:`video-${r.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,gy)])])])]),e("div",by,[e("button",{disabled:o(j).$dirty&&o(j).$invalid,onClick:y[4]||(y[4]=p=>d()),class:"btn btn-primary",type:"button"},y[11]||(y[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,yy),e("button",{onClick:y[5]||(y[5]=p=>S()),class:"btn btn-secondary ms-1"},y[12]||(y[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Jb))}},wy={class:"my-2"},hy={class:"ms-lg-5"},_y={class:"row g-2 ms-lg-5"},ky={class:"col-12 col-sm-4"},Sy={class:"col-12 col-sm-8"},Ty={class:"mt-2"},My={class:"row row-cols-1 row-cols-sm-3 g-2 ms-lg-5"},Iy={class:"col-sm-3"},Cy={class:"col-sm-3"},xy={class:"col-sm-6"},Vy={class:"row row-cols-1 row-cols-sm-2 g-2 ms-lg-5"},Py={class:"col"},Oy={class:"col"},Ay={class:"row row-cols-1 row-cols-sm-2 g-2 ms-lg-5"},Hy={class:"col"},Uy={class:"col"},Dy={key:0,class:"col"},Ly={key:0,class:"mt-2"},Ey={class:"table-responsive border"},qy={class:"table table-sm table-bordered1 mb-0"},By={class:"text-center me-1"},Ny={class:"text-center"},Ry={class:"text-center"},Fy={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},zy={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},Gy={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(n){const f=n,{moment:w,generateReturnUrl:C}=je();return de(()=>{f.item.value}),(h,P)=>{const M=ee("router-link");return t(),s("div",wy,[e("div",null,[P[1]||(P[1]=e("h5",null," VOD ",-1)),e("div",hy,[P[0]||(P[0]=e("div",{class:"text-info-emphasis"},"Title",-1)),e("div",null,[N(M,{to:`${n.urlViewVodSource}/${n.item.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:B(()=>[J(c(n.item.vodSource.name),1)]),_:1},8,["to"])])])]),e("div",null,[P[4]||(P[4]=e("h5",null," Video ",-1)),e("div",_y,[e("div",ky,[P[2]||(P[2]=e("div",{class:"text-info-emphasis"},"Title",-1)),e("div",null,[N(M,{to:`${n.urlViewVideo}/${n.item.vodSource.video.videoId}/${o(C)()}`,class:"link-offset-2"},{default:B(()=>[J(c(n.item.vodSource.video.title),1)]),_:1},8,["to"])])]),e("div",Sy,[P[3]||(P[3]=e("div",{class:"text-info-emphasis"},"Description",-1)),e("div",null,c(n.item.vodSource.video.description),1)])])]),e("div",Ty,[P[13]||(P[13]=e("h5",null," Schedule ",-1)),e("div",My,[e("div",Iy,[P[5]||(P[5]=e("div",{class:"text-info-emphasis"},"Start Offset",-1)),e("div",null,c(o(w).utc(n.item.startOffsetMillis).format("HH:mm:ss")),1)]),e("div",Cy,[P[6]||(P[6]=e("div",{class:"text-info-emphasis"},"End Offset",-1)),e("div",null,c(o(w).utc(n.item.endOffsetMillis).format("HH:mm:ss")),1)]),e("div",xy,[P[7]||(P[7]=e("div",{class:"text-info-emphasis"},"Clip",-1)),e("div",null,c(o(w).utc(n.item.durationInMillis).format("HH:mm:ss")),1)])]),e("div",Vy,[e("div",Py,[P[8]||(P[8]=e("div",{class:"text-info-emphasis"},"Total Ad Breaks Duration",-1)),e("div",null,c(o(w).utc(n.item.adBreaksDurationInMillis).format("HH:mm:ss")),1)]),e("div",Oy,[P[9]||(P[9]=e("div",{class:"text-info-emphasis"},"Total Program Duration",-1)),e("div",null,c(o(w).utc(n.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("div",Ay,[e("div",Hy,[P[10]||(P[10]=e("div",{class:"text-info-emphasis"},"Program Start",-1)),e("div",null,c(o(w).utc(n.item.dateScheduledStart).format("lll")),1)]),e("div",Uy,[P[11]||(P[11]=e("div",{class:"text-info-emphasis"},"Program End",-1)),e("div",null,c(o(w).utc(n.item.dateScheduledEnd).format("lll")),1)]),n.item.relativeProgram?(t(),s("div",Dy,[P[12]||(P[12]=e("div",{class:"text-info-emphasis"},"Relative Program",-1)),e("div",null,c(n.item.relativeProgram.name),1)])):H("",!0)])]),n.item.adBreaks.length?(t(),s("div",Ly,[P[15]||(P[15]=e("h5",null," Ad Breaks ",-1)),e("div",Ey,[e("table",qy,[e("tbody",null,[P[14]||(P[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(O,null,L(n.item.adBreaks,(Y,F)=>(t(),s("tr",null,[e("td",By,c(F+1),1),e("td",Ny,c(o(w).utc(Y.offsetMillis).format("HH:mm:ss")),1),e("td",Ry,c(o(w).utc(Y.durationInMillis).format("HH:mm:ss")),1),e("td",null,[N(M,{to:`${n.urlViewVodSource}/${Y.vodSource.vodSourceId}/${o(C)()}`,class:"link-offset-2"},{default:B(()=>[Y.vodSource.arn?(t(),s("span",Fy)):(t(),s("span",zy)),J(" "+c(Y.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):H("",!0)])}}},jy={key:0,class:"dropdown"},Yy={key:0,class:"fas fa-fw fa-play"},Wy={key:1,class:"fas fa-fw fa-stop"},Ky={class:"dropdown-menu"},Jy={key:0},Qy={key:1},Xy={key:0},Zy={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},e$={class:"nav-item",role:"presentation"},t$={class:"nav-item",role:"presentation"},s$={class:"nav-item",role:"presentation"},o$={class:"nav-item",role:"presentation"},a$={class:"nav-item",role:"presentation"},l$={class:"tab-content",id:"myTabContent"},n$={class:"mt-2"},r$={class:"row row-cols-1 row-cols-sm-3"},i$={class:"col"},d$={class:"form-floating mb-2"},u$={class:"col"},c$={class:"form-floating mb-2"},m$={class:"col"},f$={class:"form-floating mb-2"},p$={class:"d-flex flex-row justify-content-start align-items-center"},v$={key:0,class:"ms-2"},g$={class:"row row-cols-sm-2 mt-1"},b$={class:"col"},y$={class:"form-floating mb-2"},$$={class:"col"},w$={class:"form-floating mb-2"},h$={class:"mt-2"},_$={class:"d-flex flex-row justify-content-start align-items-center"},k$={class:"ms-2"},S$={key:0,class:"alert bg-warning mt-2"},T$={class:"table-responsive border mt-1"},M$={class:"table table-bordered1 mb-0"},I$={class:"badge bg-info"},C$={key:0,class:"text-wrap"},x$={key:1,class:"text-warning"},V$={key:0,class:"text-end"},P$={key:1,class:"text-end"},O$=["onClick"],A$={key:0},H$={colspan:"999"},U$={class:"d-flex flex-row justify-content-start align-items-center"},D$={class:"ms-2"},L$={if:"item.playbackUrl"},E$=["onClick"],q$={key:0,class:"table-responsive mt-2"},B$={class:"table table-borderless mb-0 table-sm"},N$={class:"align-middle1"},R$={class:"badge bg-success"},F$={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},z$={class:"text-end"},G$=["onClick"],j$=["onClick"],Y$={class:"mt-2"},W$={class:"table-responsive border"},K$={class:"table mb-0 table-sm table-bordered1"},J$={class:"align-middle1"},Q$={class:"text-center me-1"},X$={class:"d-flex flex-row justify-content-start"},Z$={class:""},ew={class:"mb-1"},tw=["src"],sw={class:"ms-2"},ow={key:0,class:"fas fa-fw fa-check-circle text-success"},aw={class:"fw-lighter small"},lw={class:"fw-lighter small"},nw={class:"text-center"},rw={class:"text-center"},iw={class:"text-end"},dw={class:"btn-group position-static"},uw=["onClick"],cw={key:0,class:"fas fa-fw fa-chevron-circle-up"},mw={key:1,class:"fas fa-fw fa-chevron-circle-down"},fw={class:"dropdown-menu"},pw=["onClick"],vw={key:0},gw=["onClick"],bw=["onClick"],yw=["onClick"],$w={key:0},ww={colspan:"999"},hw={class:"text-end mt-2 d-none"},_w={class:"mt-2"},kw={class:"text-end mb-2"},Sw={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},Tw={class:"col"},Mw={class:"card shadow-sm"},Iw=["id"],Cw={class:"p-1"},xw={class:"card-title1 text-center"},Vw={class:"col"},Pw={class:"card shadow-sm"},Ow=["id"],Aw={class:"p-1"},Hw={class:"card-title1 text-center text-truncate"},Uw={class:"small1"},Dw={class:"mt-2"},Lw={key:0,class:"fas fa-fw fa-check-circle text-success"},Ew={key:1,class:"fas fa-fw fa-times-circle text-warning"},qw={key:0,class:"fas fa-fw fa-check-circle text-success"},Bw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Nw={key:0,class:"fas fa-fw fa-check-circle text-success"},Rw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Fw={key:0,class:"fas fa-fw fa-check text-warning"},zw={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},Gw={key:0,class:"fas fa-fw fa-check-circle text-success"},jw={key:1,class:"fas fa-fw fa-times-circle text-warning"},Yw={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(n){const f=n,{appTitle:w,pageTitle:C,busy:h,isDirty:P,validations:M,infoMessage:Y,warningMessage:F,errorMessage:x,router:z,axios:X,utils:D,toasts:U,close:m,closeWithReturnUrl:V,generateReturnUrl:$,security:G}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});Se("$config");const Q=ge();Q.user;const r=me({user:Q.user,item:null}),u=re(null),j=re(null),b=re(null),k=re(null),g=re(null),_=re(),S=$e(()=>r.item&&r.item.state==="RUNNING");de(async()=>{await l();const ie=D.getPageTab("channel")||"information-tab";d(ie)}),Ee(()=>{Le()});const d=ie=>{D.setPageTab("channel",ie),_.value=ie,ie==="preview-tab"&&setTimeout(()=>{var A=document.getElementById("masonry");new Xe(A,{})},2e3)},i=ie=>ie===_.value?"active":"",a=ie=>ie===_.value?"show active":"",l=async()=>{const ie=r;if(Le(),!h.value)try{h.value=!0,x.value="",r.item=null;const A=`/api/v1/channels/${f.id}/`;await X.get(A).then(pe=>{ie.item=pe.data,ie.item.outputs.forEach(Ve=>{Ve.playbackConfigurations.forEach(le=>{if(Ve.playbackUrl){const Ce=Ve.playbackUrl,ye=Ce.lastIndexOf("/"),Je=Ce.substring(0,ye),Ne=Ce.substring(ye+1),Qe=le.hlsConfigurationManifestEndpointPrefix;Qe&&(le.hlsPlaylist=Qe+Ne)}})})})}catch(A){x.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{h.value=!1}},I=async()=>{await l()},y=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!h.value){x.value=null;try{h.value=!0,await X.post(`/api/v1/channels/${f.id}/publish/`).then(A=>{U.success("Publish Channel","Channel was published.")}),h.value=!1,await I()}catch(A){x.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{h.value=!1}}},p=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!h.value){x.value=null;try{h.value=!0,await X.delete(`/api/v1/channels/${f.id}/unpublish/`).then(A=>{U.warning("Remove Channel","Channel was removed.")}),h.value=!1,await I()}catch(A){x.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{h.value=!1}}},K=()=>{u.value.open(f.id)},q=ie=>{ie.outputType==="HLS"&&j.value.open(ie.channelOutputId,ie.playbackUrl)},T=()=>{b.value.open(f.id)},v=ie=>{k.value.open(ie)},E=(ie,A)=>{g.value.open(f.id,ie,A)},te=async ie=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!h.value){x.value=null;try{h.value=!0,await X.delete(`/api/v1/programs/${ie}/`).then(pe=>{U.success("Delete Program","Program was deleted..",{async onClose(){}})}),h.value=!1,await I()}catch(pe){x.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},ne=async ie=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!h.value){x.value=null;try{h.value=!0,await X.delete(`/api/v1/channelOutputs/${ie}/`).then(pe=>{U.success("Delete Channel Output","Channel output was deleted..")}),h.value=!1,await I()}catch(pe){x.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},W=async ie=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!h.value){x.value=null;try{h.value=!0,await X.post(`/api/v1/programs/${ie}/publish/`).then(pe=>{U.success("Publish Program","Program was published..",{async onClose(){}})}),h.value=!1,await I()}catch(pe){x.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},_e=async ie=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!h.value){x.value=null;try{h.value=!0,await X.delete(`/api/v1/programs/${ie}/unpublish/`).then(pe=>{U.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),h.value=!1,await I()}catch(pe){x.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}}},we=async ie=>{if(!h.value){x.value=null;try{h.value=!0,await X.put(`/api/v1/channels/${f.id}/change-state/${ie}`).then(A=>{U.success("Update Channel state","Change state was updated")}),h.value=!1,ie==="STOPPED"&&_.value==="preview-tab"&&(Le(),d("information-tab")),await I()}catch(A){x.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{h.value=!1}}},dt=async ie=>{if(!h.value)try{h.value=!0,x.value="",await X.post(`/api/v1/channelOutputs/${ie}/playback/publish/`).then(A=>{U.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),h.value=!1,await I()}catch(A){x.value=D.getErrorMessageAsHtml(A),window.scrollTo(0,0)}finally{h.value=!1}},ut=async ie=>{if(confirm("Do you want to remove this Playback Configuration?")&&!h.value)try{h.value=!0,x.value="",await X.delete(`/api/v1/channelOutputs/${ie}/playback/`).then(pe=>{U.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),h.value=!1,await I()}catch(pe){x.value=D.getErrorMessageAsHtml(pe),window.scrollTo(0,0)}finally{h.value=!1}},ct=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ie=r.item.outputs;Le(),ie.forEach(A=>{var pe=document.getElementById(`video-${A.channelOutputId}`);A.hls&&A.hls.destroy(),A.hls=D.createHlsStream(pe,A.playbackUrl,"Main playlist started."),pe.play(),A.playbackConfigurations.forEach(xe=>{if(xe.hls&&xe.hls.destroy(),xe.arn){var Ve=document.getElementById(`video-${xe.channelOutputPlaybackConfigurationId}`);try{xe.hls=D.createHlsStream(Ve,xe.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Ve.play()}catch(le){U.error("Failed Stream SSAI Playlist",le)}}})}),setTimeout(()=>{var A=document.getElementById("masonry");new Xe(A,{})},2e3)}},Le=()=>{r.item&&r.item.outputs&&r.item.outputs.forEach(A=>{A.hls&&(A.hls.detachMedia(),A.hls.destroy(),delete A.hls),A.playbackConfigurations.forEach(pe=>{pe.hls&&(pe.hls.detachMedia(),pe.hls.destroy(),delete pe.hls)})})};return(ie,A)=>{const pe=ee("router-link"),xe=ee("PageHeader"),Ve=ee("PageBody");return t(),ce(fe,null,{default:B(()=>[e("div",null,[N(xe,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(C)},{default:B(()=>[r.item?(t(),s("div",jy,[e("button",{class:ae([[S.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[S.value?(t(),s("span",Yy)):(t(),s("span",Wy)),J(" "+c(r.item.state),1)],2),e("ul",Ky,[r.item.arn?(t(),s("li",Jy,[S.value?(t(),s("button",{key:0,onClick:A[0]||(A[0]=le=>we("STOPPED")),class:"dropdown-item"},A[20]||(A[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),J("Stop ")]))):(t(),s("button",{key:1,onClick:A[1]||(A[1]=le=>we("RUNNING")),class:"dropdown-item"},A[21]||(A[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),J("Start ")])))])):H("",!0),S.value?H("",!0):(t(),s("li",Qy,[r.item.arn?(t(),s("button",{key:0,onClick:A[2]||(A[2]=le=>p()),class:"dropdown-item"},A[22]||(A[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),J("Unpublish ")]))):(t(),s("button",{key:1,onClick:A[3]||(A[3]=le=>y()),class:"dropdown-item"},A[23]||(A[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Publish ")])))])),r.item.arn?(t(),s(O,{key:2},[A[25]||(A[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:A[4]||(A[4]=le=>y()),class:"dropdown-item"},A[24]||(A[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Republish ")]))])],64)):H("",!0)])])):H("",!0),N(pe,{to:`${n.urlSchedulePrograms}/${n.id}`,class:"ms-2 btn btn-primary"},{default:B(()=>A[26]||(A[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:A[5]||(A[5]=le=>I()),class:"ms-2 btn btn-secondary"},A[27]||(A[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:A[6]||(A[6]=le=>o(V)(f.urlMain)),class:"btn btn-secondary ms-1"},A[28]||(A[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),N(Ve,{errorMessage:o(x)},{default:B(()=>[r.item?(t(),s("div",Xy,[e("ul",Zy,[e("li",e$,[e("button",{onClick:A[7]||(A[7]=le=>d("information-tab")),class:ae([i("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},A[29]||(A[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),J("Information ")]),2)]),e("li",t$,[e("button",{onClick:A[8]||(A[8]=le=>d("outputPlayback-tab")),class:ae([i("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},A[30]||(A[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),J("Output/Playback ")]),2)]),e("li",s$,[e("button",{onClick:A[9]||(A[9]=le=>d("programs-tab")),class:ae([i("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},A[31]||(A[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),J("Programs ")]),2)]),e("li",o$,[e("button",{onClick:A[10]||(A[10]=le=>d("preview-tab")),class:ae([[S.value?"":"disabled",i("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},A[32]||(A[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),J("Preview ")]),2)]),e("li",a$,[e("button",{onClick:A[11]||(A[11]=le=>d("checklist-tab")),class:ae([i("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},A[33]||(A[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),J("Checklist ")]),2)])]),e("div",l$,[e("div",{class:ae([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",n$,[e("div",r$,[e("div",i$,[e("div",d$,[R(e("input",{"onUpdate:modelValue":A[12]||(A[12]=le=>r.item.name=le),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Z,r.item.name]]),A[34]||(A[34]=e("label",{for:"name"},"Name",-1))])]),e("div",u$,[e("div",c$,[R(e("input",{"onUpdate:modelValue":A[13]||(A[13]=le=>r.item.playbackMode=le),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[Z,r.item.playbackMode]]),A[35]||(A[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",m$,[e("div",f$,[R(e("input",{"onUpdate:modelValue":A[14]||(A[14]=le=>r.item.tier=le),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[Z,r.item.tier]]),A[36]||(A[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",p$,[A[38]||(A[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),S.value?H("",!0):(t(),s("div",v$,[e("button",{onClick:A[15]||(A[15]=le=>E(r.item.fillerSlateSourceLocation.sourceLocationId,r.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},A[37]||(A[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",g$,[e("div",b$,[e("div",y$,[N(pe,{to:`${n.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${o($)()}`,class:ae([[r.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:B(()=>[J(c(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),A[39]||(A[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",$$,[e("div",w$,[N(pe,{to:`${n.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${o($)()}`,class:ae([[r.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:B(()=>[J(c(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),A[40]||(A[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:ae([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",h$,[e("div",null,[e("div",_$,[A[42]||(A[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",k$,[e("button",{onClick:A[16]||(A[16]=le=>T()),class:"btn btn-outline-primary btn-sm"},A[41]||(A[41]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),r.item.outputs.length<=0?(t(),s("div",S$,A[43]||(A[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),J("Channel Output is required ")]))):H("",!0),e("div",T$,[e("table",M$,[A[53]||(A[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.outputs,(le,Ce)=>(t(),s(O,{key:le.channelOutputId},[e("tr",null,[e("td",null,c(Ce+1),1),e("td",null,[e("div",null,c(le.manifestName),1),e("div",null,[e("span",I$,c(le.outputType),1)])]),e("td",null,[e("div",null,[N(pe,{to:`${n.urlViewSourceGroup}/${le.sourceGroupId}/${o($)()}`,class:"link-offset-2"},{default:B(()=>[J(c(le.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[le.playbackUrl?(t(),s("div",C$,c(le.playbackUrl),1)):(t(),s("div",x$,A[44]||(A[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),J("Publish channel to get the playback url ")])))]),S.value?(t(),s("td",V$)):(t(),s("td",P$,[e("button",{onClick:ye=>ne(le.channelOutputId),class:"btn btn-outline-warning btn-sm"},A[45]||(A[45]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,O$)]))]),le.playbackUrl?(t(),s("tr",A$,[A[50]||(A[50]=e("td",null,null,-1)),A[51]||(A[51]=e("td",null,null,-1)),A[52]||(A[52]=e("td",null,null,-1)),e("td",H$,[e("div",U$,[A[47]||(A[47]=e("h5",null,[J("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",D$,[e("div",L$,[e("button",{onClick:ye=>q(le),class:"btn btn-outline-primary btn-sm"},A[46]||(A[46]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,E$)])])]),le.playbackConfigurations.length>0?(t(),s("div",q$,[e("table",B$,[e("tbody",null,[(t(!0),s(O,null,L(le.playbackConfigurations,(ye,Je)=>(t(),s("tr",N$,[e("td",null,c(Je+1),1),e("td",null,[e("span",R$,c(ye.name),1),e("div",F$,[e("span",null,c(ye.adDecisionServerUrl),1)])]),e("td",z$,[ye.arn?H("",!0):(t(),s("button",{key:0,onClick:Ne=>dt(ye.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},A[48]||(A[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,G$)),e("button",{onClick:Ne=>ut(ye.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},A[49]||(A[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,j$)])]))),256))])])])):H("",!0)])])):H("",!0)],64))),128))]),_:1},512),[[Te,r.item.outputs.length>0]])])])])])],2),e("div",{class:ae([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Y$,[e("div",W$,[e("table",K$,[A[60]||(A[60]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),R(N(ke,{tag:"tbody",name:"list",class:"table-group-divider"},{default:B(()=>[(t(!0),s(O,null,L(r.item.programs,(le,Ce)=>(t(),s(O,{key:le.programId},[e("tr",J$,[e("td",Q$,c(Ce+1),1),e("td",null,[e("div",X$,[e("div",Z$,[le.vodSource.video.thumbnails.length>0?(t(!0),s(O,{key:0},L(le.vodSource.video.thumbnails,ye=>(t(),s("div",ew,[e("img",{src:ye.url,class:"img-fuild border",width:"128"},null,8,tw)]))),256)):H("",!0)]),e("div",sw,[e("div",null,[le.arn?(t(),s("span",ow)):H("",!0),e("span",null,c(le.name),1)]),e("div",null,[e("span",aw,c(o(D).moment.utc(le.dateScheduledStart).calendar())+" (utc)",1)]),e("div",null,[e("span",lw,c(o(D).moment(le.dateScheduledStart).calendar())+" (local)",1)])])])]),e("td",nw,c(o(D).moment.utc(le.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",rw,c(le.adBreaks.length),1),e("td",iw,[e("div",dw,[e("button",{onClick:ye=>le.expand=!le.expand,type:"button",class:ae([[le.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[le.expand?(t(),s("span",cw)):(t(),s("span",mw))],10,uw),A[58]||(A[58]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",fw,[e("li",null,[e("button",{onClick:ye=>v(le.programId),class:"dropdown-item"},A[54]||(A[54]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),J("Edit ")]),8,pw)]),le.arn?(t(),s("li",vw,[e("button",{onClick:ye=>_e(le.programId),class:"dropdown-item"},A[55]||(A[55]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),J("Unpublish ")]),8,gw)])):(t(),s(O,{key:1},[e("li",null,[e("button",{onClick:ye=>W(le.programId),class:"dropdown-item"},A[56]||(A[56]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),J("Publish ")]),8,bw)]),e("li",null,[e("button",{onClick:ye=>te(le.programId),class:"dropdown-item"},A[57]||(A[57]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),J("Remove ")]),8,yw)])],64))])])])]),le.expand?(t(),s("tr",$w,[A[59]||(A[59]=e("td",null,null,-1)),e("td",ww,[N(Gy,{item:le,urlViewVideo:n.urlViewVideo,urlViewVodSource:n.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):H("",!0)],64))),128))]),_:1},512),[[Te,r.item.programs.length>0]])])]),e("div",hw,[e("button",{onClick:A[17]||(A[17]=le=>K()),class:"btn btn-outline-primary"},A[61]||(A[61]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),J("Program ")]))])])],2),S.value?(t(),s("div",{key:0,class:ae([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",_w,[e("div",kw,[r.item.outputs[0].hls?(t(),s("button",{key:1,onClick:A[19]||(A[19]=le=>Le()),class:"btn btn-primary"},A[63]||(A[63]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:A[18]||(A[18]=le=>ct()),class:"btn btn-primary"},A[62]||(A[62]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",Sw,[(t(!0),s(O,null,L(r.item.outputs,le=>(t(),s(O,null,[e("div",Tw,[e("div",Mw,[e("video",{id:`video-${le.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,Iw),e("div",Cw,[e("div",xw,c(le.manifestName),1)])])]),(t(!0),s(O,null,L(le.playbackConfigurations,(Ce,ye)=>(t(),s("div",Vw,[e("div",Pw,[e("video",{id:`video-${Ce.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,Ow),e("div",Aw,[e("div",Hw,[J(" #"+c(ye+1)+" ",1),e("span",Uw,c(Ce.name),1)])])])]))),256))],64))),256))])])],2)):H("",!0),e("div",{class:ae([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Dw,[A[69]||(A[69]=J(" Checklist ")),e("ul",null,[e("li",null,[r.item.fillerSlateSourceLocation.arn?(t(),s("span",Lw)):(t(),s("span",Ew)),A[64]||(A[64]=J(" Filler Slate Source Location "))]),e("li",null,[r.item.fillerSlateVodSource.arn?(t(),s("span",qw)):(t(),s("span",Bw)),A[65]||(A[65]=J(" Filler Slate VOD Source "))]),e("li",null,[r.item.outputs.length>0?(t(),s("span",Nw)):(t(),s("span",Rw)),A[67]||(A[67]=J(" Outputs ")),e("ul",null,[e("li",null,[r.item.outputs.some(le=>le.playbackConfigurations.length>0)?(t(),s("span",Fw)):(t(),s("span",zw)),A[66]||(A[66]=J(" Ad Insertion setup "))])])]),e("li",null,[r.item.programs.length>0?(t(),s("span",Gw)):(t(),s("span",jw)),A[68]||(A[68]=J(" Programs "))])])])],2)])])):H("",!0)]),_:1},8,["errorMessage"]),N(sb,{ref_key:"modalAddProgram",ref:u,onRefresh:I},null,512),N(Mb,{ref_key:"modalAddPlaybackConfiguration",ref:j,onRefresh:I},null,512),N(Kb,{ref_key:"modalAddChannelOutput",ref:b,onRefresh:I},null,512),N(rt,{ref_key:"modalEditProgram",ref:k,onOnClose:I},null,512),N($y,{ref_key:"modalEditFillerSlate",ref:g,onRefresh:I},null,512)])]),_:1})}}},Ww={path:"/",component:pa,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Da},{path:"videos",children:[{path:"",component:Hn},{path:"view/:id",component:$r,props:!0},{path:"add",component:bl},{path:"edit/:id",component:Xl,props:!0}]},{path:"source-groups",children:[{path:"add",component:kr},{path:"edit/:id",component:Gr,props:!0},{path:"",component:Zr},{path:"view/:id",component:vi,props:!0}]},{path:"source-locations",children:[{path:"add",component:hi},{path:"edit/:id",component:Si,props:!0},{path:"",component:Ui},{path:"view/:id",component:sd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:Cd},{path:"edit/:id",component:tu,props:!0},{path:"",component:Ou},{path:"view/:id",component:cm,props:!0}]},{path:"channels",children:[{path:"add",component:vv},{path:"edit/:id",component:yv,props:!0},{path:"",component:Cv},{path:"schedule-programs/:id",component:Xg,props:!0},{path:"view/:id",component:Yw,props:!0}]},{path:"program-templates",children:[{path:"add",component:af},{path:"edit/:id",component:Kf,props:!0},{path:"",component:fp},{path:"view/:id",component:Wp,props:!0}]}]},it=pt({history:vt("/"),linkActiveClass:"active",routes:[{...ro},{path:"/administrator",redirect:"/"},{...Ww}]}),Kw={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const n=this,w=new gt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();w.on("onNotificationCreated",function(C){let h=C.content;C.notificationEntityClassText==="Deposit"&&(h+="<br/>",h+=`<a href="${n.urlViewDeposit}${C.referenceId}">Click ${C.notificationEntityClassText} here</a>`),C.notificationEntityClassText==="Withdraw"&&(h+="<br/>",h+=`<a href="${n.urlViewWithdraw}${C.referenceId}">Click ${C.notificationEntityClassText} here</a>`),C.notificationEntityClassText==="ManualModeOfPayment"&&(h+="<br/>",h+=`<a href="${n.urlViewManualModeOfPayment}${C.referenceId}">Click ${C.notificationEntityClassText} here</a>`),C.iconClass;let P="secondary";switch(C.notificationType){case 1:P="success";break;case 3:P="info";break;case 3:P="success";break;case 4:P="info";break;case 5:P="warning";break;case 6:P="error";break}n.$toast[P](C.subject,h,{timeOut:1e4});const M=C.subject,x={body:h,icon:"/img/192x102.png"};new Notification(M,x)}),w.on("jobUpdated",function(C){n.$bus.$emit("event:job-updated",C)}),await w.start().then(function(){}).catch(function(C){})}}};function Jw(n,f,w,C,h,P){return t(),s("div")}const Qw=Me(Kw,[["render",Jw],["__scopeId","data-v-5b4a9fa2"]]),Xw={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},Zw={class:"container"},eh={class:"col-md"},th={class:"navbar-brand mb-0 ms-1 align-middle"},sh={class:"col-md-auto"},oh={class:"d-flex flex-row align-items-center justify-content-end"},ah={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(n){return(f,w)=>(t(),ce(fe,null,{default:B(()=>[e("nav",Xw,[e("div",Zw,[e("div",eh,[Oe(f.$slots,"title",{},()=>[e("a",th,[e("i",{class:ae([n.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,c(n.pageTitle),1)])],!0)]),e("div",sh,[e("div",oh,[Oe(f.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},lh=Me(ah,[["__scopeId","data-v-eb40af38"]]),nh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},rh=["innerHTML"],ih={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},dh={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(f,w)=>(t(),ce(fe,null,{default:B(()=>[Oe(f.$slots,"default",{},()=>[n.errorMessage?(t(),s("div",nh,[w[0]||(w[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),J("Error ")],-1)),e("div",{innerHTML:n.errorMessage},null,8,rh)])):H("",!0),n.vuelidate&&n.vuelidate.$error?(t(),s("div",ih,[w[1]||(w[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),J("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(O,null,L(n.vuelidate.$errors,C=>(t(),s("li",{key:C.$uid},[C.$validator==="$each"?(t(),s(O,{key:0},[J(" Check errors in '"+c(C.$property)+"' ",1)],64)):(t(),s(O,{key:1},[J(c(C.$message),1)],64))]))),128))])])):H("",!0)])]),_:3}))}},uh={class:"py-3 container-md flex-grow-1 overflow-y-auto"},ch={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(f,w)=>{const C=ee("PageMessages");return t(),ce(fe,null,{default:B(()=>[e("div",uh,[N(C,{errorMessage:n.errorMessage,vuelidate:n.vuelidate},null,8,["errorMessage","vuelidate"]),Oe(f.$slots,"default")])]),_:3})}}},mh={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const n=this;n.busy||(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveFirst(){const n=this;if(n.busy)return;n.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveLast(){const n=this;if(n.busy)return;const f=n.filter;f.pageIndex!==f.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(f.totalPages))},async move(n){const f=this;if(f.busy)return;const w=f.filter,C=w.pageIndex+n;C>=0&&C<=w.totalPages&&(document.activeElement&&document.activeElement.blur(),await f.search(C))}}},fh={class:"mt-2"},ph={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},vh={key:0,class:"col-sm order-2 order-sm-1"},gh={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},bh={class:"me-1 fw-bold"},yh={class:"fw-bold"},$h={class:"ms-1"},wh={class:"col-sm-auto ms-auto order-1 order-sm-2"},hh={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},_h={key:0,class:"page-item"},kh={key:1,class:"page-item"},Sh={key:2,class:"page-item"},Th={class:"page-item active"},Mh={class:"page-link"},Ih={key:3,class:"page-item"},Ch={key:4,class:"page-item"},xh={key:5,class:"page-item"},Vh={key:1,class:"text-info font-weight-bold text-center"},Ph={key:0},Oh={key:1};function Ah(n,f,w,C,h,P){return t(),s("div",fh,[w.filter.items.length?(t(),s("div",ph,[w.showPerPage?(t(),s("div",vh,[e("div",gh,[e("div",null,[e("span",bh,c(w.filter.totalCount),1),f[8]||(f[8]=J("records in ")),e("span",yh,c(w.filter.totalPages),1),f[9]||(f[9]=J(" page(s) "))]),e("div",$h,[R(e("select",{"onUpdate:modelValue":f[0]||(f[0]=M=>w.filter.pageSize=M),onChange:f[1]||(f[1]=(...M)=>P.changePagination&&P.changePagination(...M)),class:"form-select form-select-sm me-1"},f[10]||(f[10]=[ze('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ue,w.filter.pageSize]])]),f[11]||(f[11]=e("div",{class:"ms-1"},"per page",-1))])])):H("",!0),e("div",wh,[e("ul",hh,[w.filter.pageIndex!==1?(t(),s("li",_h,[e("button",{class:"page-link","aria-label":"Previous",onClick:f[2]||(f[2]=(...M)=>P.moveFirst&&P.moveFirst(...M))},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):H("",!0),w.filter.pageIndex>2?(t(),s("li",kh,[e("button",{class:"page-link",onClick:f[3]||(f[3]=M=>P.move(-2))},c(w.filter.pageIndex-2),1)])):H("",!0),w.filter.pageIndex>1?(t(),s("li",Sh,[e("button",{class:"page-link",onClick:f[4]||(f[4]=M=>P.move(-1))},c(w.filter.pageIndex-1),1)])):H("",!0),e("li",Th,[e("span",Mh,c(w.filter.pageIndex),1)]),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",Ih,[e("button",{class:"page-link",onClick:f[5]||(f[5]=M=>P.move(1))},c(w.filter.pageIndex+1),1)])):H("",!0),w.filter.pageIndex<w.filter.totalPages-1?(t(),s("li",Ch,[e("button",{class:"page-link",onClick:f[6]||(f[6]=M=>P.move(2))},c(w.filter.pageIndex+2),1)])):H("",!0),w.filter.pageIndex<w.filter.totalPages?(t(),s("li",xh,[e("button",{class:"page-link","aria-label":"Next",onClick:f[7]||(f[7]=(...M)=>P.moveLast&&P.moveLast(...M))},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):H("",!0)])])])):(t(),s("div",Vh,[w.noRecords?(t(),s("div",Ph,c(w.noRecords),1)):(t(),s("div",Oh,"No record(s) found."))]))])}const Hh=Me(mh,[["render",Ah]]),Uh={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let n=this;if(!n.enabled)return;let f=n.filter;f.sortField===n.field?f.sortOrder===0?f.sortField=null:f.sortOrder=f.sortOrder===0?1:0:(f.sortField=n.field,f.sortOrder=1),n.$emit("search")}}},Dh={class:"align-self-center"};function Lh(n,f,w,C,h,P){return t(),s("div",{onClick:f[0]||(f[0]=(...M)=>P.click&&P.click(...M)),class:"d-flex flex-row justify-content-start align-content-center",style:at({cursor:w.enabled?"pointer":""})},[Oe(n.$slots,"default"),e("span",Dh,[w.showSort?(t(),s("span",{key:0,class:ae([{"fa-sort text-gray-500":!P.currentSortField(),"fa-sort-up":P.currentSortField()&&P.sortUp(),"fa-sort-down":P.currentSortField()&&!P.sortUp()},"fas fa-fw mr-1"])},null,2)):H("",!0)])],4)}const Eh=Me(Uh,[["render",Lh]]),qh={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(n){const f=this;f.setSelected(n),f.$emit("onSelectedRow",n)}}},Bh={class:"table-responsive m-0"},Nh=["href"],Rh={key:1},Fh=["onClick"],zh={class:"form-group row no-gutters"},Gh={class:"col-5 col-form-label"},jh={class:"col align-self-center"},Yh=["href"],Wh={key:1};function Kh(n,f,w,C,h,P){return t(),s("div",null,[e("div",Bh,[e("table",{class:ae(["table table-hover d-none d-md-table card",w.tableCss])},[e("thead",null,[Oe(n.$slots,"header",{},()=>[f[0]||(f[0]=e("th",null,"#",-1)),(t(!0),s(O,null,L(w.header.columns,M=>(t(),s("th",null,c(M.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(O,null,L(w.items,(M,Y)=>Oe(n.$slots,"table-row",{key:`row1-${M[w.header.key]}`,item:M,index:Y},()=>[e("td",null,c(w.getRowNumber(Y)),1),(t(!0),s(O,null,L(w.header.columns,F=>(t(),s("td",null,[F.href?(t(),s("a",{key:0,href:F.href(M[w.header.key]),class:"font-weight-bold"},c(M[F.field]),9,Nh)):(t(),s("span",Rh,c(M[F.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:ae(["d-block d-md-none",w.rowCss])},[(t(!0),s(O,null,L(w.items,(M,Y)=>(t(),s("div",{key:`row2-${M[w.header.key]}`,onClick:F=>P.onSelectedRow(M),class:"border"},[e("div",{class:ae(["p-2",{"b-left":w.isSelected(M)}])},[Oe(n.$slots,"table-list",{item:M,index:Y},()=>[(t(!0),s(O,null,L(w.header.columns,F=>(t(),s("div",zh,[e("label",Gh,c(F.title),1),e("div",jh,[F.href?(t(),s("a",{key:0,href:F.href(M[w.header.key]),class:"font-weight-bold"},c(M[F.field]),9,Yh)):(t(),s("span",Wh,c(M[F.field]),1))])]))),256))],!0)],2)],8,Fh))),128))],2)])}const Jh=Me(qh,[["render",Kh],["__scopeId","data-v-65929213"]]),Ie=bt($t);Ie.use(yt());Ie.use(it);Ie.component("m-notification",Qw);Ie.component("m-pagination",Hh);Ie.component("sort-field",Eh);Ie.component("table-list",Jh);Ie.component("Toasts",ua);Ie.component("PageHeader",lh);Ie.component("PageMessages",dh);Ie.component("PageBody",ch);const Qh="https://sonyfastpoc.azurewebsites.net/",Xh="Arcadian-Sony FAST",Zh=void 0,e_={API_URL:Qh,appName:Xh,tenantId:Zh};Ie.provide("$config",e_);Ie.provide("$bus",Ye);Ie.mount("#app");
