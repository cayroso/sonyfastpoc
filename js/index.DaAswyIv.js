import{o as t,c as ie,r as Q,h as rt,d as We,a as ae,e as Be,b as s,f as e,g as A,w as V,i as L,t as b,F as N,j as G,k as M,l as ne,m as Ke,n as be,p as Je,q as Le,u as it,s as Qe,P as Xe,v as ue,x as ee,y as te,z as ye,T as de,A as o,B as dt,C,D as B,E as ut,G as oe,H as Ze,I as we,J as Ie,K as he,L as Oe,M as pe,N as $e,O as Te,Q as Ue,R as ct,S as mt,U as ft,V as xe,W as pt,X as vt}from"./vendor-DIDY8V1_-chunk.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))h(y);new MutationObserver(y=>{for(const q of y)if(q.type==="childList")for(const T of q.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&h(T)}).observe(document,{childList:!0,subtree:!0});function $(y){const q={};return y.integrity&&(q.integrity=y.integrity),y.referrerPolicy&&(q.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?q.credentials="include":y.crossOrigin==="anonymous"?q.credentials="omit":q.credentials="same-origin",q}function h(y){if(y.ep)return;y.ep=!0;const q=$(y);fetch(y.href,q)}})();const gt={__name:"App",setup(i){return(u,$)=>{const h=Q("router-view");return t(),ie(h)}}};function et(){const i=R=>{var z;let k=R,E=k.response,J="";if(!k.response)return R.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const H=`${window.location.pathname}${window.location.search}`;J=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(H)}`}'>here</a> to login.`}else if(E.status===400){let H=k.response.data.errors;J=k.response.data.title||k.response.data,H&&(J+="<ul>");for(let _ in H){let S=H[_];for(let w in H[_]){let K=S[w];J+=`<li>${K}</li>`}}H&&(J+="</ul>"),J||(J=k.message),J&&J.content&&(J=J.content)}else E.status===404?J=((z=E==null?void 0:E.data)==null?void 0:z.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(J=k.message,J===""&&(J=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return J},u=R=>JSON.parse(JSON.stringify(R)),$=R=>{if(typeof R!="number")return R;var k=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return k.format(R)},h=(R,k,E)=>{const z={value:k,expiry:new Date().getTime()+E};debugger;localStorage.setItem(R,JSON.stringify(z))},y=R=>{debugger;const k=localStorage.getItem(R);if(!k)return null;const E=JSON.parse(k);return new Date().getTime()>E.expiry?(localStorage.removeItem(R),null):E.value},q="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:i,clone:u,toCurrency:$,moment:rt,localStorageSetWithExpiry:h,localStorageGetWithExpiry:y,setPageTab:(R,k)=>{var E=localStorage.getItem(q);E?E=JSON.parse(E):E={},E[R]=k,localStorage.setItem(q,JSON.stringify(E))},getPageTab:R=>{var k=localStorage.getItem(q);return k?k=JSON.parse(k):k={},k[R]}}}const bt=et(),tt=JSON.parse(localStorage.getItem("user"))||{},yt=bt.moment.utc(tt.exp*1e3),$t=yt.isAfter()?tt:null,ve=We({id:"auth",state:()=>({user:$t,returnUrl:null}),actions:{async login(i){try{this.user=i,localStorage.setItem("user",JSON.stringify(i))}catch(u){debugger;alert(u)}},logout(){this.user=null,localStorage.removeItem("user"),lt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),wt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(wt));const ht={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},qe=ht,st=We("msal",()=>{const i=ae({auth:{clientId:qe.VITE_AUTH_CLIENT_ID,authority:qe.VITE_AUTH_AUTHORITY_URL,redirectUri:qe.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),u=ae("");return{msalConfig:i,accessToken:u,setAccessToken:h=>{u.value=h}}}),Re={$on:(...i)=>Be.on(...i),$once:(...i)=>Be.once(...i),$off:(...i)=>Be.off(...i),$emit:(...i)=>Be.emit(...i)};function _t(){const i=(q,T,Y,R)=>{Re.$emit("toast-message",{title:q,message:T,type:Y,options:R})};return{success:(q,T,Y={})=>{i(q,T,"success",Y)},warning:(q,T,Y={})=>{i(q,T,"warning",Y)},info:(q,T,Y={})=>{i(q,T,"info",Y)},error:(q,T,Y={})=>{i(q,T,"danger",Y)}}}const ke=(i,u)=>{const $=i.__vccOpts||i;for(const[h,y]of u)$[h]=y;return $},kt={data(){return{notifications:[],messages:[]}},async created(){const i=this;i.$bus.$on("event:notification-received",()=>{i.getUnreadNotifications()}),i.$bus.$on("event:notification-marked-as-read",u=>{i.notifications.some(h=>h.notificationId===u)&&i.getUnreadNotifications()}),i.$bus.$on("event:notification-removed",u=>{i.notifications.some(h=>h.notificationId===u)&&i.getUnreadNotifications()}),i.$bus.$on("event:chat-marked-as-read",i.onChatMarkedAsRead),i.$bus.$on("event:chat-message-received",i.onChatMessageReceived)},async mounted(){const i=this,u=i.$refs.notifications,$=i.$refs.messages;u&&u.offsetParent,$&&$.offsetParent&&await i.getUnreadChats()},methods:{async logout(){const i=this;try{await i.$util.axios.post("/api/accounts/logout").then(u=>{const $="/";i.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){i.$util.href($)}})})}catch(u){i.$util.handleError(u)}},async onChatMarkedAsRead(i){let u=this,$=u.messages.find(h=>h.chatId===i);if($){let h=u.messages.indexOf($);u.messages.splice(h,1)}},async onChatMessageReceived(i){let u=this,$=u.messages.find(y=>y.chatId===i.chatId);if($)$.lastMessageText=i.content;else{var h={chatId:i.chatId,isRead:!1,lastDateSent:i.dateSent,lastMessageText:i.content,senderFirstLastName:`${i.sender.firstName} ${i.sender.lastName}`,senderInitials:i.sender.initials,senderProfilePicture32:i.sender.profilePicture32,urlPicture:u.$util.getProfilePictureUrl(i.sender.profilePicture32,i.sender.initials)};u.messages.push(h)}},async getUnreadNotifications(){const i=this;try{await i.$util.axios.get("api/accounts/unread-notifications").then(u=>{i.notifications=u.data})}catch(u){i.$util.handleError(u)}},async getUnreadChats(){const i=this;try{await i.$util.axios.get("api/accounts/unread-chats").then(u=>{i.messages=u.data;for(let $ in i.messages){let h=i.messages[$];i.$set(h,"urlPicture",i.$util.getProfilePictureUrl(h.senderProfilePicture32,h.senderInitials))}})}catch(u){i.$util.handleError(u)}},viewNotification(i){this.$bus.$emit("event:open-notification",i)},viewChat(i){this.$bus.$emit("event:open-chat",i)},showHiddenElements(){let u=this.$el.getElementsByClassName("initialHidden");for(let $=0;$<u.length;$++)u[$].classList.remove("invisible")}}},St={mixins:[kt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const u=ve().user;return{user:u,username:u?u.nameFull:"Guest"}},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1},async openModalSearchUser747(i){this.$refs.refModalSearchUser747.open(i)}}},Tt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Mt={class:"container-md"},Ct={class:"navbar-collapse collapse",id:"navbarSideCollapse"},It={class:"navbar-nav"},xt={class:"nav-item dropdown"},Pt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ut={class:"nav-item dropdown"},Vt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ot={class:"navbar-nav ms-auto"},At={class:"nav-item dropdown"},Dt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},Ht={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Bt={class:"text-capitalize"};function Lt(i,u,$,h,y,q){const T=Q("router-link");return t(),s("nav",Tt,[e("div",Mt,[A(T,{class:"navbar-brand",to:"/member"},{default:V(()=>[L(b($.appName),1)]),_:1}),u[14]||(u[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Ct,[e("ul",It,[e("li",xt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Pt,[e("li",null,[A(T,{class:"dropdown-item",to:"/member/announcements"},{default:V(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),L(" Announcements ")])),_:1})]),e("li",null,[A(T,{class:"dropdown-item",to:"/member/posts"},{default:V(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),L(" Posts ")])),_:1})]),e("li",null,[A(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:V(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),L(" Yellow Pages ")])),_:1})])])]),e("li",Ut,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Vt,[e("li",null,[A(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:V(()=>u[4]||(u[4]=[L(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Ot,[e("li",At,[e("a",Dt,[e("span",null,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,b(y.username),1)])]),e("ul",Ht,[u[9]||(u[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),u[10]||(u[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),u[11]||(u[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),u[12]||(u[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),y.user&&y.user.roles.length>1?(t(!0),s(N,{key:0},G(y.user.roles,Y=>(t(),s("li",null,[A(T,{to:`/${Y.toLowerCase()}`,class:"dropdown-item"},{default:V(()=>[e("span",Bt,b(Y),1)]),_:2},1032,["to"])]))),256)):M("",!0),e("li",null,[A(T,{to:"/",class:"dropdown-item"},{default:V(()=>u[7]||(u[7]=[L(" Main ")])),_:1})]),u[13]||(u[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[A(T,{to:"/account/logout",class:"dropdown-item"},{default:V(()=>u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),L("Logout ")])),_:1})])])])])])])])}const Nt=ke(St,[["render",Lt]]),qt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const i=document.getElementById("top");i&&i.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let i=this;if(!i.$el.getElementsByClassName)return;let u=i.$el.getElementsByClassName("initialHidden");for(let $=0;$<u.length;$++){let h=u[$];h.classList.remove("invisible"),h.classList.remove("d-none")}},close(){const i=this,u=document.referrer.toLowerCase();u&&u.includes("/account/login")?i.$router.go(-2):i.$router.go(-1)},toggle(i){const u=this;u.toggles[i]=!u.toggles[i],localStorage.setItem(u.togglesKey,JSON.stringify(u.toggles))}}},Rt={mixins:[qt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1}}},zt={class:"footer sticky-bottom"},jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Ft={class:"container-md"},Gt={class:"navbar-text small p-0"},Yt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Wt={class:"container-md"},Kt={class:"navbar-nav nav-fill w-100"},Jt={class:"nav-item dropup"},Qt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function es(i,u,$,h,y,q){const T=Q("router-link");return t(),s("footer",zt,[e("div",jt,[e("div",Ft,[e("span",Gt,"©"+b(y.copyright),1)])]),e("nav",Yt,[e("div",Wt,[e("ul",Kt,[e("li",Jt,[u[3]||(u[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Qt,[e("li",null,[A(T,{class:"dropdown-item",to:"/member/announcements"},{default:V(()=>u[0]||(u[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),L(" Announcements ")])),_:1})]),e("li",null,[A(T,{class:"dropdown-item",to:"/member/posts"},{default:V(()=>u[1]||(u[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),L(" Posts ")])),_:1})]),e("li",null,[A(T,{class:"dropdown-item",to:"/member/yellow-pages"},{default:V(()=>u[2]||(u[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),L(" Yellow Pages ")])),_:1})])])]),e("li",Xt,[u[5]||(u[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",Zt,[e("li",null,[A(T,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:V(()=>u[4]||(u[4]=[L(" Property Monthly Dues ")])),_:1})])])])])])])])}const ts=ke(Rt,[["render",es]]),ss={name:"AdminLayout",components:{TopNav:Nt,BottomNav:ts},inject:["$config"],mounted(){const u=this.$config;document.title=`Account - ${u.appName}`}},os={class:"d-flex flex-column vh-100"};function as(i,u,$,h,y,q){const T=Q("Toasts"),Y=Q("router-view");return t(),s("div",os,[A(T),A(Y,{class:"flex-grow-1 mb-2"})])}const ls=ke(ss,[["render",as]]),ns={__name:"index",setup(i){return ve().user,ne(()=>{}),($,h)=>(t(),s("div",null,h[0]||(h[0]=[Ke('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},rs={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},is=rs;function ds(){be("$config");const i=is.VITE_API_URL,u=Je.create({baseURL:i});return Le.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),u.interceptors.request.use($=>{Le.start();const{user:h}=ve();return h&&h.token&&($.headers?($.headers.Authorization||($.headers.Authorization=`Bearer ${h.token}`),$.headers["Access-Control-Allow-Origin"]||($.headers["Access-Control-Allow-Origin"]="*")):$.headers={Authorization:`Bearer ${h.token}`,"Access-Control-Allow-Origin":"*"}),$}),u.interceptors.response.use($=>(Le.done(),$),$=>{throw Le.done(),$}),u}function me(i){if(!i.appTitle)throw Error("App Title is required.");if(!i.pageTitle)throw Error("Page Title is required.");const u=it(),$=Qe(),h=ds(),y=et(),q=_t(),Y=ve().user,R=()=>Y&&Y.roles&&Y.roles.includes("System"),k=()=>Y&&Y.roles&&Y.roles.includes("administrator"),E=()=>Y&&Y.roles&&Y.roles.includes("employee"),J=()=>Y&&Y.roles&&Y.roles.includes("Member"),z=()=>{let a=u.path;return u.query.returnUrl&&(a=u.query.returnUrl),a=`?returnUrl=${encodeURIComponent(a)}`,a},H=async()=>{const a=document.referrer.toLowerCase();a&&a.includes("/accounts/login")?await $.go(-2):await $.go(-1)},_=a=>{var U;const j=u.path,l=(U=u.query)==null?void 0:U.returnUrl;l&&!(j.startsWith(l)||l.startsWith(j))?$.push(l):$.push(a)},S=i.appTitle,w=i.pageTitle,K=ae(!1),W=ae(new Map),r=ae(""),c=ae(""),x=ae("");return{appTitle:S,pageTitle:w,busy:K,validations:W,infoMessage:r,warningMessage:c,errorMessage:x,router:$,route:u,axios:h,utils:y,toasts:q,close:H,closeWithReturnUrl:_,generateReturnUrl:z,security:{userId:Y?Y.userId:"",isSystem:R(),isAdministrator:k(),isEmployee:E(),isMember:J()}}}const us={class:"h-100 d-flex align-items-center justify-content-center"},cs={class:"form-signin w-100 m-auto"},ms={class:"h3 mb-3 fw-normal"},fs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ps=["innerHTML"],vs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},gs={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(i){be("$config");const u=ve(),$=st(),h=new Xe($.msalConfig),y=ue({username:"",password:""}),q={username:{required:ee.withMessage("Username is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0}},T=ye(q,y),{appTitle:Y,pageTitle:R,busy:k,isDirty:E,validations:J,infoMessage:z,warningMessage:H,errorMessage:_,router:S,route:w,axios:K,utils:W,toasts:r,close:c,security:x}=me({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ne(async()=>{await h.initialize()});const a=async()=>{await h.loginPopup({}).then(()=>{debugger;const U=h.getAllAccounts()[0];h.setActiveAccount(U)}).catch(l=>{console.error(`error during authentication: ${l}`)});var j={account:h.getActiveAccount(),scopes:[]};await h.acquireTokenSilent(j).then(l=>{debugger;const g=l.account.idToken,d=dt(g);if(d.token=l.accessToken,console.log(l),!d.roles){debugger;d.roles=[]}d.userId=d.sub,u.login(d);var m=w.query.returnUrl;m?S.push(decodeURIComponent(m)):d.roles.length===1?S.push(`/${d.roles[0].toLowerCase()}`):S.push("/")}).catch(l=>{console.error(`error during acquireTokenSilent: ${l}`)})};return(j,l)=>(t(),ie(de,null,{default:V(()=>[e("div",us,[e("main",cs,[e("div",null,[e("h1",ms,b(o(Y)),1),e("div",null,[o(_)?(t(),s("div",fs,[l[1]||(l[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(_)},null,8,ps)])):M("",!0),o(T).$error?(t(),s("div",vs,[l[2]||(l[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(T).$errors,U=>(t(),s("li",{key:U.$uid},b(U.$message),1))),128))])])):M("",!0)]),e("button",{onClick:l[0]||(l[0]=U=>a()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},bs=ke(gs,[["__scopeId","data-v-896956d0"]]),ys={class:"h-100 d-flex align-items-center justify-content-center"},$s={__name:"logout",setup(i){const u=ve();return u.user,ne(async()=>{u.logoutWithRedirect()}),($,h)=>(t(),s("div",ys,h[0]||(h[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[L(" You have logged out from HOA MS."),e("br"),L(" Click "),e("a",{href:"/",class:"d-inline"},"here"),L(" to go back to home page. ")])],-1)])))}},ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={class:"card m-3"},_s={class:"card-header"},ks={class:"card-body"},Ss={class:"m-2"},Ts={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ms=["innerHTML"],Cs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Is={class:"row row-cols-1 row-cols-sm-3"},xs={class:"col-sm"},Ps={class:"form-group"},Us={key:0,class:"d-block invalid-feedback"},Vs={class:"col-sm"},Os={class:"form-group"},As={key:0,class:"d-block invalid-feedback"},Ds={class:"col-sm"},Es={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Bs={class:"row row-cols-1 row-cols-sm-3"},Ls={class:"col"},Ns={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Rs={class:"col"},zs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Fs={class:"row row-cols-1 row-cols-sm-3"},Gs={class:"col-sm"},Ys={class:"form-group"},Ws={key:0,class:"d-block invalid-feedback"},Ks={class:"col-sm"},Js={class:"form-group"},Qs={key:0,class:"d-block invalid-feedback"},Xs={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},Zs={class:"col"},eo=["disabled"],to={class:"col"},so={class:"col"},oo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(i){const u=ue({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),$=(x,a)=>x===a.password,h={firstName:{required:ee.withMessage("First name is required.",te),$autoDirty:!0,$lazy:!0},middleName:{required:ee.withMessage("Middle name is required.",te),$autoDirty:!0,$lazy:!0},lastName:{required:ee.withMessage("Last name is required.",te),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ee.withMessage("Phone number is required.",te),$autoDirty:!0,$lazy:!0},email:{required:ee.withMessage("Email is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ee.withMessage("Confirm password is required.",te),confirmSamePassword:ee.withMessage("Password and confirm passwrod are different.",$),$autoDirty:!0,$lazy:!0}},y=ye(h,u),{appTitle:q,pageTitle:T,busy:Y,isDirty:R,validations:k,infoMessage:E,warningMessage:J,errorMessage:z,router:H,axios:_,utils:S,toasts:w,close:K,security:W}=me({appTitle:"HOA MS",pageTitle:"Register User"}),r=be("$config");ne(()=>{});const c=async()=>{const x=u;if(Y.value)return;if(!await y.value.$validate()){window.scrollTo(0,0);return}z.value=null;try{Y.value=!0;const j=S.clone(x);j.tenantid=r.tenantId;debugger;await _({method:"post",url:"/api/v1/accounts/register",data:j}).then(l=>{w.success("Register","Registration was successfull.",{onClose:async()=>{await H.push("/accounts/login")}})})}catch(j){z.value=S.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{Y.value=!1}};return(x,a)=>{const j=Q("router-link");return t(),ie(de,null,{default:V(()=>[e("div",ws,[e("div",hs,[e("h4",_s,b(o(T)),1),e("div",ks,[e("div",Ss,[o(z)?(t(),s("div",Ts,[a[8]||(a[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(z)},null,8,Ms)])):M("",!0),o(y).$error?(t(),s("div",Cs,[a[9]||(a[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(y).$errors,l=>(t(),s("li",{key:l.$uid},b(l.$message),1))),128))])])):M("",!0)]),e("div",Is,[e("div",xs,[e("div",Ps,[a[10]||(a[10]=e("label",null,"First Name",-1)),C(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>u.firstName=l),type:"text",class:"form-control"},null,512),[[B,u.firstName]]),o(y).firstName.$error?(t(),s("div",Us,[(t(!0),s(N,null,G(o(y).firstName.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])]),e("div",Vs,[e("div",Os,[a[11]||(a[11]=e("label",null,"Middle Name",-1)),C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>u.middleName=l),type:"text",class:"form-control"},null,512),[[B,u.middleName]]),o(y).middleName.$error?(t(),s("div",As,[(t(!0),s(N,null,G(o(y).middleName.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])]),e("div",Ds,[e("div",Es,[a[12]||(a[12]=e("label",null,"Last Name",-1)),C(e("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>u.lastName=l),type:"text",class:"form-control"},null,512),[[B,u.lastName]]),o(y).lastName.$error?(t(),s("div",Hs,[(t(!0),s(N,null,G(o(y).lastName.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])])]),e("div",Bs,[e("div",Ls,[e("div",Ns,[a[13]||(a[13]=e("label",null,"Phone Number",-1)),C(e("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>u.phoneNumber=l),type:"tel",class:"form-control"},null,512),[[B,u.phoneNumber]]),o(y).phoneNumber.$error?(t(),s("div",qs,[(t(!0),s(N,null,G(o(y).phoneNumber.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])]),e("div",Rs,[e("div",zs,[a[14]||(a[14]=e("label",null,"Email",-1)),C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=l=>u.email=l),type:"email",class:"form-control"},null,512),[[B,u.email]]),o(y).email.$error?(t(),s("div",js,[(t(!0),s(N,null,G(o(y).email.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])])]),e("div",Fs,[e("div",Gs,[e("div",Ys,[a[15]||(a[15]=e("label",null,"Password",-1)),C(e("input",{"onUpdate:modelValue":a[5]||(a[5]=l=>u.password=l),type:"password",class:"form-control"},null,512),[[B,u.password]]),o(y).password.$error?(t(),s("div",Ws,[(t(!0),s(N,null,G(o(y).password.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])]),e("div",Ks,[e("div",Js,[a[16]||(a[16]=e("label",null,"Confirm Password",-1)),C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=l=>u.confirmPassword=l),type:"password",class:"form-control"},null,512),[[B,u.confirmPassword]]),o(y).confirmPassword.$error?(t(),s("div",Qs,[(t(!0),s(N,null,G(o(y).confirmPassword.$errors,l=>(t(),s("div",{key:l.$uid},b(l.$message),1))),128))])):M("",!0)])])]),e("div",Xs,[e("div",Zs,[e("button",{disabled:o(y).$dirty&&o(y).$invalid,onClick:a[7]||(a[7]=l=>c()),class:"btn btn-primary w-100"},a[17]||(a[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),L("Register ")]),8,eo)]),e("div",to,[A(j,{to:"/",class:"btn btn-outline-primary w-100"},{default:V(()=>a[18]||(a[18]=[L("Home")])),_:1})]),e("div",so,[A(j,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:V(()=>a[19]||(a[19]=[L("Login")])),_:1})])])])])])]),_:1})}}},ao={path:"/accounts",component:ls,props:!1,meta:{},children:[{path:"",component:ns},{path:"login",component:bs},{path:"logout",component:$s},{path:"register",component:oo}]};function ot(){const i=Qe(),u=R=>window.location.href.indexOf(R)>-1,$=R=>localStorage.getItem("data-bs-theme")||R,h=R=>{document.documentElement.setAttribute("data-bs-theme",R),localStorage.setItem("data-bs-theme",R)},y=async()=>await Je.get("https://bootswatch.com/api/5.json").then(R=>R.data),q=R=>{const k=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");k&&R?(k.setAttribute("href",R),localStorage.setItem("bootswatch-theme",R)):alert("cannot query css link")},T=R=>{Y(),i.push(R)},Y=()=>{if(screen.width<576){const k=document.getElementById("navbarCollapse");if(k){const E=ut.getInstance(k);E&&E.hide()}}};return{isActive:u,getCurrentBsTheme:$,changeBsTheme:h,getBootswatch:y,changeTheme:q,navigate:T,collapseNavbar:Y}}const lo={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},no={class:"container-md"},ro={class:"navbar-collapse collapse",id:"navbarCollapse"},io={class:"navbar-nav"},uo={class:"nav-item"},co={class:"nav-item dropdown"},mo={class:"dropdown-menu","aria-labelledby":"dropdown01"},fo={class:"nav-item"},po={class:"nav-item dropdown"},vo={class:"dropdown-menu","aria-labelledby":"dropdown01"},go={class:"navbar-nav ms-auto"},bo={class:"nav-item dropdown"},yo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},$o=["onClick"],wo={class:"nav-item dropdown"},ho={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},_o={class:"d-sm-none d-xl-inline"},ko={key:0},So={key:1},To={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Mo={key:0},Co={key:1},Io={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(i){const u=st(),{isActive:$,getCurrentBsTheme:h,changeBsTheme:y,getBootswatch:q,changeTheme:T,navigate:Y,collapseNavbar:R}=ot(),k=ve(),E=k.user,J=ue({user:E,username:E?E.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});ne(async()=>{const S=J;S.bootswatch=await q();const w=h(S.bsTheme);w&&(S.bsTheme=w,y(S.bsTheme));const K=localStorage.getItem("bootswatch-theme");K&&(S.currentTheme=K,T(K))});const z=S=>{T(S),J.currentTheme=S,R()},H=S=>{y(S),J.bsTheme=S,R()},_=async()=>{k.logoutWithRedirect();const S=new Xe(u.msalConfig);await S.initialize();const w={mainWindowRedirectUri:"/"};await S.logoutPopup(w)};return(S,w)=>{const K=Q("router-link");return t(),ie(de,null,{default:V(()=>[e("nav",lo,[e("div",no,[A(K,{class:"navbar-brand",to:"/administrator"},{default:V(()=>[L(b(i.appName),1)]),_:1}),w[18]||(w[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",ro,[e("ul",io,[e("li",uo,[A(K,{to:"/videos",onClick:o(R),class:"nav-link"},{default:V(()=>w[3]||(w[3]=[e("span",{class:"fas fa-fw fa-file-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",co,[w[6]||(w[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",mo,[e("li",null,[A(K,{to:"/source-groups",onClick:o(R),class:"dropdown-item"},{default:V(()=>w[4]||(w[4]=[L(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[A(K,{to:"/source-locations",onClick:o(R),class:"dropdown-item"},{default:V(()=>w[5]||(w[5]=[L(" Locations ")])),_:1},8,["onClick"])])])]),e("li",fo,[A(K,{to:"/vod-sources",onClick:o(R),class:"nav-link"},{default:V(()=>w[7]||(w[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",po,[w[10]||(w[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",vo,[e("li",null,[A(K,{to:"/program-templates",onClick:o(R),class:"dropdown-item"},{default:V(()=>w[8]||(w[8]=[L(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[A(K,{to:"/channels",onClick:o(R),class:"dropdown-item"},{default:V(()=>w[9]||(w[9]=[L(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",go,[e("li",bo,[w[14]||(w[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",yo,[e("li",null,[J.bsTheme==="dark"?(t(),s("button",{key:0,onClick:w[0]||(w[0]=W=>H("light")),class:"dropdown-item"},w[11]||(w[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),L("Dark Mode ")]))):(t(),s("button",{key:1,onClick:w[1]||(w[1]=W=>H("dark")),class:"dropdown-item"},w[12]||(w[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),L("Light Mode ")])))]),w[13]||(w[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(N,null,G(J.bootswatch.themes,W=>(t(),s("li",null,[e("button",{onClick:r=>z(W.cssCdn),class:oe(["dropdown-item",{active:J.currentTheme===W.cssCdn}])},b(W.name),11,$o)]))),256))])]),e("li",wo,[e("a",ho,[e("span",null,[w[15]||(w[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",_o,[o(E)?(t(),s("span",ko,b(o(E).name),1)):(t(),s("span",So," Guest "))])])]),e("ul",To,[o(E)?(t(),s("li",Mo,[e("button",{onClick:w[2]||(w[2]=W=>_()),class:"dropdown-item"},w[16]||(w[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),L("Logout ")]))])):(t(),s("li",Co,[A(K,{to:"/accounts/login",class:"dropdown-item"},{default:V(()=>w[17]||(w[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),L("Login ")])),_:1})]))])])])])])])]),_:1})}}},xo={class:"footer sticky-bottom"},Po={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Uo={class:"container-md"},Vo={class:"navbar-text small p-0"},Oo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(i){ot();const u=be("$config"),h=ve().user;let q=new Date().getFullYear();const T=ue({user:h,username:h?h.nameFull:"Guest",copyright:`2020-${q} ${u.appName}`});return ne(async()=>{}),(Y,R)=>(t(),s("footer",xo,[e("div",Po,[e("div",Uo,[e("span",Vo,"©"+b(T.copyright),1)])])]))}},Ao={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Re.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(i){i.message&&this.addMessage(i.title,i.message,i.type,i.options)},async addMessage(i,u,$,h={}){var y={id:this.count++,title:i,message:u,type:$,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};y=Object.assign({},y,h),this.messages.unshift(y),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),y.timeOut>0&&await this.startTimeout(y)},async startTimeout(i,u=0){const $=this,h=performance.now(),y=async()=>{i.animationFrame=requestAnimationFrame(async q=>{const T=q+u-h;if(!$.exists(i)||i.paused){cancelAnimationFrame(i.animationFrame);return}else if(T<i.timeOut){const Y=T/i.timeOut;i.progress=Y,await y()}else{i.progress=1,cancelAnimationFrame(i.animationFrame),$.remove(i);return}})};await y()},pauseProgress(i){i.timeOut<=0||(i.paused=!0)},async resumeProgress(i){i.timeOut<=0||(i.paused=!1,await this.startTimeout(i,i.timeOut*i.progress))},getCurrentProgress(i){return Math.round(i.progress*100)===100?100:i.progress*100},getIconClass(i){const u=i.type;let $="";switch(u){case"success":$="fas fa-fw fa-circle-check";break;case"info":$="fas fa-fw fa-circle-info";break;case"warning":$="fas fa-fw fa-circle-exclamation";break;case"danger":$="fas fa-fw fa-triangle-exclamation";break}let h=$;return i.rtl?"icon-right "+h:"icon-left "+h},async remove(i){const u=this.messages.findIndex($=>$.id===i.id);this.messages.splice(u,1),typeof i.onClose=="function"&&await i.onClose()},exists(i){return this.messages.findIndex($=>$.id===i.id)!==-1}}},Do={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Eo=["onMouseover","onMouseout"],Ho={class:"me-auto text-white"},Bo=["onClick"],Lo={class:"toast-body"},No=["innerHTML"],qo={key:0,class:"progress m-1",style:{height:"4px"}};function Ro(i,u,$,h,y,q){return t(),ie(de,null,{default:V(()=>[e("div",Do,[A(we,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:V(()=>[(t(!0),s(N,null,G(y.messages,T=>(t(),s("div",{key:T.id,class:oe(["toast show mb-2 ms-auto",`border-${T.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:Y=>q.pauseProgress(T),onMouseout:Y=>q.resumeProgress(T)},[e("div",{class:oe(["toast-header",`bg-${T.type}`])},[e("strong",Ho,[e("i",{class:oe([q.getIconClass(T),"me-1"])},null,2),L(b(T.title),1)]),T.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:Y=>q.remove(T)},u[0]||(u[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,Bo)):M("",!0)],2),e("div",Lo,[e("div",{innerHTML:T.message},null,8,No)]),T.timeOut>0&&T.showProgress?(t(),s("div",qo,[e("div",{class:oe(`bg-${T.type}`),style:Ze({width:q.getCurrentProgress(T)+"%"})},null,6)])):M("",!0)],42,Eo))),128))]),_:1})])]),_:1})}const zo=ke(Ao,[["render",Ro],["__scopeId","data-v-5272bd9a"]]),jo={name:"AdminLayout",components:{TopNav:Io,BottomNav:Oo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Fo={class:"d-flex flex-column vh-100"};function Go(i,u,$,h,y,q){const T=Q("Toasts"),Y=Q("TopNav"),R=Q("router-view"),k=Q("BottomNav");return t(),s("div",Fo,[A(T),A(Y),A(R,{class:"flex-grow-1 mb-2"}),u[0]||(u[0]=e("div",{class:"pt-2"},null,-1)),A(k)])}const Yo=ke(jo,[["render",Go]]),Wo={class:"d-flex flex-row justify-content-end"},Ko={class:"mt-2 container-md"},Jo={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Qo=["innerHTML"],Xo={class:"text-center"},Zo={class:"row mt-3"},ea={class:"col-12 col-sm-6 offset-sm-3"},ta={class:"card"},sa={class:"card-body"},oa={class:"card card-body mb-2 d-none"},aa={key:0,class:"fas fa-fw fa-circle-check text-success"},la={key:1,class:"fas fa-fw fa-times-circle text-danger"},na={key:0,class:"fas fa-fw fa-circle-check text-success"},ra={key:1,class:"fas fa-fw fa-times-circle text-danger"},ia={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},da={class:"col"},ua={class:"card h-100 shadow-sm"},ca={class:"card-body"},ma={class:"col"},fa={class:"card h-100 shadow-sm"},pa={class:"card-body"},va={__name:"Index",setup(i){const{appTitle:u,pageTitle:$,busy:h,isDirty:y,validations:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,generateReturnUrl:_,security:S}=me({appTitle:"ARC AIO",pageTitle:"Dashboard"});be("$config"),ve().user;const K=ue({item:null});ae("805630ed-f288-4f2f-83a4-6c71312f6970"),ae(),ne(async()=>{});const W=async()=>{const x=K;if(!h.value)try{h.value=!0;const a="/api/v1/dashboard/administrators/";x.item=[],await E.get(a).then(j=>{x.item=j.data})}catch(a){R.value=J.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},r=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await E.get("/api/v1/channels/reset/").then(j=>{z.success("Reset All Data","Reset data was successful.")})}catch(a){R.value=J.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},c=async()=>{await W()};return(x,a)=>{const j=Q("PageHeader"),l=Q("router-link");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(j,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",Wo,[e("button",{onClick:a[0]||(a[0]=U=>c()),class:"ms-2 btn btn-secondary"},a[2]||(a[2]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Ko,[o(R)?(t(),s("div",Jo,[a[3]||(a[3]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(R))},null,8,Qo)])):M("",!0),a[26]||(a[26]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),L("UNDER CONSTRUCTION ")],-1)),e("div",Xo,[e("button",{onClick:a[1]||(a[1]=U=>r()),class:"btn btn-warning btn-lg"},a[4]||(a[4]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),L("Reset All Data ")]))]),e("div",Zo,[e("div",ea,[e("div",ta,[a[14]||(a[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",sa,[e("ol",null,[a[8]||(a[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[A(l,{to:`/videos/add/${o(_)()}`},{default:V(()=>a[5]||(a[5]=[L(" Create a Video. ")])),_:1},8,["to"])]),a[9]||(a[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[A(l,{to:"/program-templates/add"},{default:V(()=>a[6]||(a[6]=[L(" Create Program Template. ")])),_:1}),a[7]||(a[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup the clip ranges."),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),a[10]||(a[10]=e("li",null,[L(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),a[11]||(a[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),a[12]||(a[12]=e("li",null," Publish Channel. ",-1)),a[13]||(a[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",oa,[a[17]||(a[17]=L(" Security ")),e("ul",null,[e("li",null,[o(S).isAdministrator?(t(),s("span",aa)):(t(),s("span",la)),a[15]||(a[15]=L(" Administrator "))]),e("li",null,[o(S).isEmployee?(t(),s("span",na)):(t(),s("span",ra)),a[16]||(a[16]=L(" Employee "))])])]),e("div",ia,[e("div",da,[e("div",ua,[a[19]||(a[19]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),L("Human Resources ")])],-1)),e("div",ca,[e("ul",null,[e("li",null,[A(l,{to:"/movies"},{default:V(()=>a[18]||(a[18]=[L(" Employees ")])),_:1})])])])])]),e("div",ma,[e("div",fa,[a[25]||(a[25]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),L("TBD ")])],-1)),e("div",pa,[e("ul",null,[e("li",null,[A(l,{to:"/media-videos"},{default:V(()=>a[20]||(a[20]=[L(" TBD ")])),_:1})]),e("li",null,[A(l,{to:"/movies"},{default:V(()=>a[21]||(a[21]=[L(" TBD ")])),_:1})]),e("li",null,[A(l,{to:"/movies"},{default:V(()=>a[22]||(a[22]=[L(" TBD ")])),_:1})]),e("li",null,[A(l,{to:"/movies"},{default:V(()=>a[23]||(a[23]=[L(" TBD ")])),_:1})]),e("li",null,[A(l,{to:"/movies"},{default:V(()=>a[24]||(a[24]=[L(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},ga={class:"d-flex justify-content-end"},ba=["disabled"],ya={class:"input-group"},$a={class:"row row-cols-1 row-cols-sm-2 mt-3"},wa={class:"col text-center mb-2"},ha=["src"],_a={class:"col"},ka={class:"form-floating mb-2"},Sa={key:0,class:"d-block invalid-feedback"},Ta={class:"form-floating mb-2"},Ma={class:"row row-cols-sm-2"},Ca={class:"col"},Ia={class:"form-floating mb-2"},xa={class:"col"},Pa={class:"form-floating mb-2"},Ua={class:"row row-cols-sm-2"},Va={class:"col"},Oa={class:"form-floating mb-2"},Aa={class:"col"},Da={class:"form-floating mb-2"},Ea={class:"col"},Ha={class:"form-floating mb-2"},Ba={class:"col"},La={class:"form-floating mb-2"},Ge="YYYY-MM-DD HH:mm",Na={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"ARC AIO",pageTitle:"Add User"}),H=i,_=k.moment().local();_.format(Ge),_.add(24,"hours").format(Ge);const S=ae("a22de760-358d-4a0e-83ad-2624a5c11f73"),w=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),K={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},W=ye(K,w);ne(async()=>{});const r=async()=>{const x=w;if(!h.value)try{h.value=!0,x.item=null;const a=`/api/v1/users/get-from-entra-id/${S.value}`;await R.get(a).then(j=>{x.item=j.data})}catch(a){T.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},c=async()=>{const x=w;if(h.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="",await R.post(`/api/v1/users/add-from-entra-id/${x.item.userId}`).then(j=>{E.success("Add User","User added",{onClose:async()=>{const l=`${H.urlView}/${j.data}`;await Y.push(l)}})})}catch(j){T.value=k.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{h.value=!1}};return(x,a)=>{const j=Q("router-link"),l=Q("PageHeader"),U=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",ga,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:a[0]||(a[0]=g=>c()),class:"btn btn-primary"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ba),A(j,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(U,{errorMessage:o(T),vuelidate:o(W)},{default:V(()=>[e("div",null,[e("div",null,[e("div",ya,[C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=g=>S.value=g),onKeyup:a[2]||(a[2]=Ie(g=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[B,S.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[3]||(a[3]=g=>r())},a[14]||(a[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",$a,[e("div",wa,[e("img",{src:w.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,ha)]),e("div",_a,[e("div",ka,[C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=g=>w.item.userId=g),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[B,w.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1)),o(W).item.userId.$error?(t(),s("div",Sa,[(t(!0),s(N,null,G(o(W).item.userId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):M("",!0)]),e("div",Ta,[C(e("input",{"onUpdate:modelValue":a[5]||(a[5]=g=>w.item.displayName=g),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[B,w.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Ma,[e("div",Ca,[e("div",Ia,[C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=g=>w.item.givenName=g),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[B,w.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",xa,[e("div",Pa,[C(e("input",{"onUpdate:modelValue":a[7]||(a[7]=g=>w.item.surname=g),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[B,w.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Ua,[e("div",Va,[e("div",Oa,[C(e("input",{"onUpdate:modelValue":a[8]||(a[8]=g=>w.item.email=g),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[B,w.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Aa,[e("div",Da,[C(e("input",{"onUpdate:modelValue":a[9]||(a[9]=g=>w.item.mobilePhone=g),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[B,w.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Ea,[e("div",Ha,[C(e("input",{"onUpdate:modelValue":a[10]||(a[10]=g=>w.item.principalName=g),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[B,w.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Ba,[e("div",La,[C(e("input",{"onUpdate:modelValue":a[11]||(a[11]=g=>w.item.jobTitle=g),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[B,w.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Ve(i){if(!i.cacheKey)throw Error("Cache Key required.");if(!i.baseUrl)throw Error("Base Url required.");const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:z,generateReturnUrl:H,security:_}=me({appTitle:i.appTitle,pageTitle:i.pageTitle}),S=JSON.parse(JSON.stringify(i.filter));S.pageIndex=S.pageIndex||1,S.pageSize=S.pageSize||15,S.sortField=S.sortField||"",S.sortOrder=S.sortOrder||1,S.updateUrl=S.updateUrl||!1,S.items=S.items||[],S.query=S.query||{},S.query.criteria=S.query.criteria||"";const w=ae(S),K=()=>{var d;if(h.value){console.log("Paginated search is currently busy.");return}const l=JSON.parse(localStorage.getItem(i.cacheKey))||{},U=new URLSearchParams(window.location.search),g=w.value;g.query.criteria=U.get("c")||l.criteria||g.query.criteria||"",g.pageIndex=parseInt(U.get("p"),10)||l.pageIndex||g.pageIndex||1,g.pageSize=parseInt(U.get("s"),10)||l.pageSize||g.pageSize||5,g.sortField=U.get("sf")||l.sortField||g.sortField||"",g.sortOrder=parseInt(U.get("so"),10)||l.sortOrder||g.sortOrder||1,g.visible=l.visible||g.visible,(d=i.initializeFilter)==null||d.call(i,w,i.cacheKey)},W=()=>{if(i.getQuery)return i.getQuery(w.value);{const l=w.value;return["?c=",encodeURIComponent(l.query.criteria),"&p=",l.pageIndex,"&s=",l.pageSize,"&sf=",l.sortField,"&so=",l.sortOrder].join("")}},r=()=>{if(i.saveQuery)i.saveQuery(w.value,i.cacheKey);else{const l=w.value;localStorage.setItem(i.cacheKey,JSON.stringify({criteria:l.query.criteria,pageIndex:l.pageIndex,pageSize:l.pageSize,sortField:l.sortField,sortOrder:l.sortOrder,visible:l.visible}))}};return{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:z,generateReturnUrl:H,security:_,filter:w,initializeFilter:K,getQuery:W,saveQuery:r,search:async l=>{var g;let U=w.value;if(h.value){console.log("Paginated search is currently busy.");return}l>0&&(U.pageIndex=l);try{h.value=!0,T.value="";const d=W();U.selected=null,await R(`${i.baseUrl}/${d}`).then(async m=>{var f;Array.isArray(m.data)?U.items=m.data:U=Object.assign(U,m.data);let p=location.pathname;p.endsWith("/")?p+=d:p+="/"+d,U.updateUrl&&window.history.replaceState(d,`${u}-search`,p),U.items.forEach(v=>{v.expand=!1}),r(),(f=i.successAction)==null||f.call(i,w.value)})}catch(d){if(localStorage.removeItem(i.cacheKey),i.failAction)i.failAction(d);else{const m=k.getErrorMessageAsHtml(d);T.value=m,E.error("Error Occured",m)}}finally{h.value=!1,(g=i.finalAction)==null||g.call(i)}},getRowNumber:l=>{const U=w.value;return(U.pageIndex-1)*U.pageSize+(l+1)},setSelected:l=>{const U=w.value;U.selected&&l&&U.selected===l?U.selected=null:(U.selected&&(U.selected.expand=!1),U.selected=l,U.selected.expand=!0)},isSelected:l=>{const U=w.value;return l===null||U.selected===null?!1:l===U.selected}}}const qa={class:"d-flex justify-content-end"},Ra={key:0},za={class:"ms-1"},ja={class:"input-group"},Fa={class:"table-responsive"},Ga={class:"table table-hover mb-0"},Ya=["textContent"],Wa=["src"],Ka="/api/v1/users/search",Ja={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,security:_,filter:S,initializeFilter:w,getQuery:K,saveQuery:W,search:r,getRowNumber:c,setSelected:x,isSelected:a}=Ve({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${$==null?void 0:$.userId}/users/search`,baseUrl:Ka,filter:{updateUrl:!0}});return ne(async()=>{w(),await r()}),(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("m-pagination"),m=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-users",pageTitle:o(y)},{default:V(()=>[e("div",qa,[o(_).isAdministrator?(t(),s("div",Ra,[A(U,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):M("",!0),e("div",za,[e("div",ja,[C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>o(S).query.criteria=p),onKeyup:l[1]||(l[1]=Ie(p=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=p=>o(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(m,{errorMessage:o(R)},{default:V(()=>[e("div",Fa,[e("table",Ga,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(S).items,(p,f)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(c)(f)),class:"text-center"},null,8,Ya),e("td",null,[p.photoBase64?(t(),s("img",{key:0,src:p.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,Wa)):M("",!0)]),e("td",null,[A(U,{to:`${i.urlView}/${p.userId}`,class:"d-inline-block text-truncate"},{default:V(()=>[L(b(p.displayName),1)]),_:2},1032,["to"])]),e("td",null,b(p.email),1),e("td",null,b(p.jobTitle),1)]))),128))]),_:1},512),[[he,o(S).items.length>0]])])]),A(d,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Qa={class:"d-flex flex-row justify-content-end"},Xa={key:0},Za={class:"row row-cols-1 row-cols-sm-2 mt-3"},el={class:"col text-center mb-2"},tl=["src"],sl={class:"col"},ol={class:"form-floating mb-2"},al={class:"form-floating mb-2"},ll={class:"row row-cols-sm-2"},nl={class:"col"},rl={class:"form-floating mb-2"},il={class:"col"},dl={class:"form-floating mb-2"},ul={class:"row row-cols-sm-2"},cl={class:"col"},ml={class:"form-floating mb-2"},fl={class:"col"},pl={class:"form-floating mb-2"},vl={class:"col"},gl={class:"form-floating mb-2"},bl={class:"col"},yl={class:"form-floating mb-2"},$l={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"ARC CMS",pageTitle:"View User"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null});ne(async()=>{await c()});const c=async()=>{const j=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const l=`/api/v1/users/get-from-db/${u.id}/`;await J.get(l).then(U=>{j.item=U.data})}catch(l){k.value=z.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}},x=async()=>{await c()},a=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(l=>{H.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(l){k.value=z.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}}};return(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-user",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",Qa,[o(K).isAdministrator?(t(),s(N,{key:0},[A(U,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:V(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=m=>a()),class:"ms-1 btn btn-warning"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):M("",!0),e("button",{onClick:l[1]||(l[1]=m=>x()),class:"ms-2 btn btn-secondary"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=m=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(d,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",Xa,[e("div",null,[e("div",Za,[e("div",el,[e("img",{src:r.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,tl)]),e("div",sl,[e("div",ol,[C(e("input",{"onUpdate:modelValue":l[3]||(l[3]=m=>r.item.userId=m),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[B,r.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",al,[C(e("input",{"onUpdate:modelValue":l[4]||(l[4]=m=>r.item.displayName=m),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[B,r.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",ll,[e("div",nl,[e("div",rl,[C(e("input",{"onUpdate:modelValue":l[5]||(l[5]=m=>r.item.givenName=m),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[B,r.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",il,[e("div",dl,[C(e("input",{"onUpdate:modelValue":l[6]||(l[6]=m=>r.item.surname=m),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[B,r.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",ul,[e("div",cl,[e("div",ml,[C(e("input",{"onUpdate:modelValue":l[7]||(l[7]=m=>r.item.email=m),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[B,r.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",fl,[e("div",pl,[C(e("input",{"onUpdate:modelValue":l[8]||(l[8]=m=>r.item.mobilePhone=m),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[B,r.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",vl,[e("div",gl,[C(e("input",{"onUpdate:modelValue":l[9]||(l[9]=m=>r.item.principalName=m),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[B,r.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",bl,[e("div",yl,[C(e("input",{"onUpdate:modelValue":l[10]||(l[10]=m=>r.item.jobTitle=m),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[B,r.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):M("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},wl={class:"d-flex justify-content-end"},hl=["disabled"],_l={class:"row row-cols-1 row-cols-sm-2"},kl={class:"col"},Sl={class:"form-floating mb-2"},Tl={key:0,class:"d-block invalid-feedback"},Ml={class:"col"},Cl={class:"form-floating"},Il={class:"col"},xl={class:"form-floating mb-2"},Pl={class:""},Ul={class:"col"},Vl={class:"form-floating mb-2"},Ol={key:0,class:"d-block invalid-feedback"},Al={class:"col"},Dl={class:"form-floating mb-2"},El={key:0,class:"d-block invalid-feedback"},Hl={class:""},Bl={class:"col"},Ll={class:"form-floating mb-2"},Nl={key:0,class:"d-block invalid-feedback"},ql={class:"col"},Rl={class:"input-group mb-2"},zl={class:"form-floating"},jl=["href"],Fl={key:0,class:"d-block invalid-feedback"},Gl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),H=i,_=ue({lookups:{visibilityTypes:[]},durationTime:"00:00:00",item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),S={item:{title:{title:ee.withMessage("title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ee.withMessage("durationInMillis is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:ee.withMessage("rawBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},rawPath:{title:ee.withMessage("rawPath is required.",te),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:ee.withMessage("hlsBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},hlsPath:{title:ee.withMessage("hlsPath is required.",te),$autoDirty:!0,$lazy:!0}}},w=ye(S,_),K=Oe(()=>{const c=k.moment;if(_.durationTime&&_.durationTime!=="00:00:00"&&W(_.durationTime)){const x=c().startOf("day"),a=x.format("YYYY-MM-DD ")+_.durationTime,l=c(a).subtract(x);return _.item.durationInMillis=l.valueOf(),_.item.durationInMillis}return 0}),W=c=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(c);ne(async()=>{});const r=async()=>{const c=_;if(h.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const a=k.clone(c.item);a.durationInMillis=K.value;debugger;await R.post("/api/v1/videos/",a).then(j=>{E.success("Add Video","Video added",{onClose:async()=>{const l=`${H.urlView}/${j.data}`;await Y.push(l)}})})}catch(a){T.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}};return(c,x)=>{const a=Q("router-link"),j=Q("PageHeader"),l=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(j,{"page-icon":"fas fa-fw fa-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",wl,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:x[0]||(x[0]=U=>r()),class:"btn btn-primary"},x[8]||(x[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hl),A(a,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>x[9]||(x[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(l,{errorMessage:o(T),vuelidate:o(w)},{default:V(()=>[e("div",null,[e("div",_l,[e("div",kl,[e("div",Sl,[C(e("input",{"onUpdate:modelValue":x[1]||(x[1]=U=>_.item.title=U),id:"name",class:"form-control",placeholder:"Title"},null,512),[[B,_.item.title]]),x[10]||(x[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(w).item.title.$error?(t(),s("div",Tl,[(t(!0),s(N,null,G(o(w).item.title.$errors,U=>(t(),s("div",{key:U.$uid},b(U.$message),1))),128))])):M("",!0)])]),e("div",Ml,[e("div",Cl,[C(e("input",{"onUpdate:modelValue":x[2]||(x[2]=U=>_.durationTime=U),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[B,_.durationTime]]),x[11]||(x[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Il,[e("div",xl,[C(e("textarea",{"onUpdate:modelValue":x[3]||(x[3]=U=>_.item.description=U),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[B,_.item.description]]),x[12]||(x[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Pl,[x[15]||(x[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",Ul,[e("div",Vl,[C(e("input",{"onUpdate:modelValue":x[4]||(x[4]=U=>_.item.rawBaseUrl=U),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[B,_.item.rawBaseUrl]]),x[13]||(x[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(w).item.rawBaseUrl.$error?(t(),s("div",Ol,[(t(!0),s(N,null,G(o(w).item.rawBaseUrl.$errors,U=>(t(),s("div",{key:U.$uid},b(U.$message),1))),128))])):M("",!0)])]),e("div",Al,[e("div",Dl,[C(e("input",{"onUpdate:modelValue":x[5]||(x[5]=U=>_.item.rawPath=U),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[B,_.item.rawPath]]),x[14]||(x[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),o(w).item.rawPath.$error?(t(),s("div",El,[(t(!0),s(N,null,G(o(w).item.rawPath.$errors,U=>(t(),s("div",{key:U.$uid},b(U.$message),1))),128))])):M("",!0)])]),e("div",Hl,[x[19]||(x[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Bl,[e("div",Ll,[C(e("input",{"onUpdate:modelValue":x[6]||(x[6]=U=>_.item.hlsBaseUrl=U),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[B,_.item.hlsBaseUrl]]),x[16]||(x[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),o(w).item.hlsBaseUrl.$error?(t(),s("div",Nl,[(t(!0),s(N,null,G(o(w).item.hlsBaseUrl.$errors,U=>(t(),s("div",{key:U.$uid},b(U.$message),1))),128))])):M("",!0)])]),e("div",ql,[e("div",Rl,[e("div",zl,[C(e("input",{"onUpdate:modelValue":x[7]||(x[7]=U=>_.item.hlsPath=U),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[B,_.item.hlsPath]]),x[17]||(x[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),_.item.hlsBaseUrl&&_.item.hlsPath?(t(),s("a",{key:0,href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(_.item.hlsBaseUrl+_.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},x[18]||(x[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,jl)):M("",!0)]),o(w).item.hlsPath.$error?(t(),s("div",Fl,[(t(!0),s(N,null,G(o(w).item.hlsPath.$errors,U=>(t(),s("div",{key:U.$uid},b(U.$message),1))),128))])):M("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Yl={key:0,class:"d-flex justify-content-end"},Wl=["disabled"],Kl={key:0},Jl={class:"row row-cols-1 row-cols-sm-2"},Ql={class:"col"},Xl={class:"form-floating mb-2"},Zl={key:0,class:"d-block invalid-feedback"},en={class:"col"},tn={class:"form-floating mb-2"},sn={key:0,class:"d-block invalid-feedback"},on={class:"row row-cols-sm-2"},an={class:"col"},ln={class:"form-floating mb-2"},nn={class:"form-floating mb-2"},rn={key:0,class:"d-block invalid-feedback"},dn={class:"form-floating mb-2"},un={key:0,class:"d-block invalid-feedback"},cn={class:"col"},mn={class:"form-floating mb-2"},Ee={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),H=i,_=ue({editorElementId:"editor",htmlContent:"",item:null}),S={item:{title:{required:ee.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},eidr:{required:ee.withMessage("eidr is required.",te),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ee.withMessage("eidrPrefix is required.",te),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ee.withMessage("Content is required.",te),$autoDirty:!0,$lazy:!0}},w=ye(S,_);ne(async()=>{await r()});const K=()=>{const x=_;var a=document.getElementById(x.editorElementId);a.innerHTML=x.htmlContent},W=x=>{const a=_;a.htmlContent=x.target.innerHTML;var j=document.getElementById(a.editorElementId);j.value=a.htmlContent},r=async()=>{const x=_;if(!h.value)try{h.value=!0,_.item=null,await R.get(`/api/v1/movies/${H.id}`).then(a=>{x.item=a.data,x.htmlContent=x.item.description}),K()}catch(a){T.value=k.getErrorMessageAsHtml(a)}finally{h.value=!1}},c=async()=>{const x=_;if(h.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const j=k.clone(x.item);j.description=x.htmlContent,await R.put("/api/v1/movies",j).then(l=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const U=`${H.urlView}/${H.id}`;await Y.push(U)}})})}catch(j){T.value=k.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{h.value=!1}};return(x,a)=>{const j=Q("router-link"),l=Q("PageHeader"),U=Q("PageBody");return t(),s("div",null,[A(l,{"page-icon":"fas fa-fw fa-film",pageTitle:o($),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[_.item?(t(),s("div",Yl,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:a[0]||(a[0]=g=>c()),class:"btn btn-primary"},a[7]||(a[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Wl),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},a[8]||(a[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),A(j,{to:`${H.urlView}/${H.id}`,class:"ms-1 btn btn-secondary"},{default:V(()=>a[9]||(a[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):M("",!0)]),_:1},8,["pageTitle"]),A(U,{errorMessage:o(T),vuelidate:o(w)},{default:V(()=>[_.item?(t(),s("div",Kl,[e("div",Jl,[e("div",Ql,[e("div",Xl,[C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=g=>_.item.eidrPrefix=g),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[B,_.item.eidrPrefix]]),a[10]||(a[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(w).item.eidrPrefix.$error?(t(),s("div",Zl,[(t(!0),s(N,null,G(o(w).item.eidrPrefix.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):M("",!0)])]),e("div",en,[e("div",tn,[C(e("input",{"onUpdate:modelValue":a[2]||(a[2]=g=>_.item.eidr=g),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[B,_.item.eidr]]),a[11]||(a[11]=e("label",{for:"title"},"Eidr",-1)),o(w).item.eidr.$error?(t(),s("div",sn,[(t(!0),s(N,null,G(o(w).item.eidr.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):M("",!0)])])]),e("div",on,[e("div",an,[e("div",ln,[C(e("input",{"onUpdate:modelValue":a[3]||(a[3]=g=>_.item.releaseYear=g),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[B,_.item.releaseYear]]),a[12]||(a[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",nn,[C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=g=>_.item.title=g),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[B,_.item.title]]),a[13]||(a[13]=e("label",{for:"title"},"Title",-1)),o(w).item.title.$error?(t(),s("div",rn,[(t(!0),s(N,null,G(o(w).item.title.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):M("",!0)])])]),e("div",null,[e("div",dn,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:a[5]||(a[5]=g=>W(g))},null,32),a[14]||(a[14]=e("label",{for:"editor"},"Content",-1)),o(w).htmlContent.$error?(t(),s("div",un,[(t(!0),s(N,null,G(o(w).htmlContent.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):M("",!0)])]),e("div",cn,[e("div",mn,[C(e("textarea",{"onUpdate:modelValue":a[6]||(a[6]=g=>_.item.metadata=g),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[B,_.item.metadata]]),a[15]||(a[15]=e("label",{for:"title"},"Metadata",-1))])])])):M("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},fn={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function pn(i,u,$,h,y,q){const T=Q("Page");return t(),ie(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const vn=ke(fn,[["render",pn]]),gn={class:"d-flex justify-content-end"},bn={class:"ms-1"},yn={class:"input-group"},$n={class:"table-responsive"},wn={class:"table table-hover mb-0"},hn=["textContent"],_n={class:"text-end ms-sm-5 pe-sm-5"},kn="/api/v1/videos/search",Sn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,security:_,filter:S,initializeFilter:w,getQuery:K,saveQuery:W,search:r,getRowNumber:c,setSelected:x,isSelected:a}=Ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${$==null?void 0:$.userId}/videos/search`,baseUrl:kn,filter:{updateUrl:!0}});return ne(async()=>{w(),await r()}),(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("m-pagination"),m=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:V(()=>[e("div",gn,[A(U,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",bn,[e("div",yn,[C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>o(S).query.criteria=p),onKeyup:l[1]||(l[1]=Ie(p=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=p=>o(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(m,{errorMessage:o(R)},{default:V(()=>[e("div",$n,[e("table",wn,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(S).items,(p,f)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(c)(f)),class:"text-center"},null,8,hn),e("td",null,[A(U,{to:`${i.urlView}/${p.videoId}`,class:"d-inline-block text-truncate"},{default:V(()=>[L(b(p.title),1)]),_:2},1032,["to"])]),e("td",null,b(p.description),1),e("td",_n,[e("div",null,b(o(J).moment.utc(p.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[he,o(S).items.length>0]])])]),A(d,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Tn={class:"d-flex flex-row justify-content-end"},Mn={key:0},Cn={class:"row row-cols-sm-2"},In={class:"col"},xn={class:"form-floating mb-2"},Pn={class:"col"},Un={class:"form-floating mb-2"},Vn={class:"col"},On={class:"form-floating mb-2"},An={class:"row row-cols-sm-2"},Dn={class:"col"},En={class:"form-floating mb-2"},Hn={class:"col"},Bn={class:"form-floating mb-2"},Ln={class:"row row-cols-sm-2"},Nn={class:"col"},qn={class:"form-floating mb-2"},Rn={class:"col"},zn={class:"form-floating mb-2"},jn={class:"row row-cols-sm-2"},Fn={class:"col"},Gn={class:"form-floating mb-2"},Yn={class:"col"},Wn={class:"form-floating mb-2"},Kn={class:"table-responsive"},Jn={class:"table table-hover mb-0 caption-top"},Qn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null});ne(async()=>{await c()});const c=async()=>{const j=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const l=`/api/v1/videos/${u.id}/`;await J.get(l).then(U=>{j.item=U.data,j.item.duration=z.moment.utc(j.item.durationInMillis).format("HH:mm:ss")})}catch(l){k.value=z.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}},x=async()=>{await c()},a=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/users/${u.id}/`).then(l=>{H.warning("Delete User","User was deleted.",{async onClose(){await E.push(u.urlMain)}})})}catch(l){k.value=z.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{y.value=!1}}};return(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",Tn,[o(K).isAdministrator?(t(),s(N,{key:0},[A(U,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary d-none"},{default:V(()=>l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=m=>a()),class:"ms-1 btn btn-warning"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):M("",!0),e("button",{onClick:l[1]||(l[1]=m=>x()),class:"ms-2 btn btn-secondary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=m=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},l[15]||(l[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(d,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",Mn,[e("div",null,[e("div",Cn,[e("div",In,[e("div",xn,[C(e("input",{"onUpdate:modelValue":l[3]||(l[3]=m=>r.item.title=m),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[B,r.item.title]]),l[16]||(l[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",Pn,[e("div",Un,[C(e("input",{"onUpdate:modelValue":l[4]||(l[4]=m=>r.item.duration=m),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[B,r.item.duration]]),l[17]||(l[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",Vn,[e("div",On,[C(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=m=>r.item.description=m),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[B,r.item.description]]),l[18]||(l[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",An,[e("div",Dn,[e("div",En,[C(e("input",{"onUpdate:modelValue":l[6]||(l[6]=m=>r.item.rawBaseUrl=m),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[B,r.item.rawBaseUrl]]),l[19]||(l[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Hn,[e("div",Bn,[C(e("input",{"onUpdate:modelValue":l[7]||(l[7]=m=>r.item.rawPath=m),class:"form-control",id:"rawPath",disabled:""},null,512),[[B,r.item.rawPath]]),l[20]||(l[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Ln,[e("div",Nn,[e("div",qn,[C(e("input",{"onUpdate:modelValue":l[8]||(l[8]=m=>r.item.hlsBaseUrl=m),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[B,r.item.hlsBaseUrl]]),l[21]||(l[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Rn,[e("div",zn,[C(e("input",{"onUpdate:modelValue":l[9]||(l[9]=m=>r.item.hlsPath=m),class:"form-control",id:"hlsPath",disabled:""},null,512),[[B,r.item.hlsPath]]),l[22]||(l[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",jn,[e("div",Fn,[e("div",Gn,[C(e("input",{"onUpdate:modelValue":l[10]||(l[10]=m=>r.item.dashBaseUrl=m),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[B,r.item.dashBaseUrl]]),l[23]||(l[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Yn,[e("div",Wn,[C(e("input",{"onUpdate:modelValue":l[11]||(l[11]=m=>r.item.dashPath=m),class:"form-control",id:"dashPath",disabled:""},null,512),[[B,r.item.dashPath]]),l[24]||(l[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Kn,[e("table",Jn,[l[25]||(l[25]=e("caption",null,"VOD Sources",-1)),l[26]||(l[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.vodSources,(m,p)=>(t(),s("tr",{key:m.vodSourceId},[e("td",null,b(p+1),1),e("td",null,[A(U,{to:`${u.urlViewVodSource}/${encodeURIComponent(m.vodSourceId)}/${o(w)()}`},{default:V(()=>[L(b(m.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[he,r.item.vodSources.length>0]])])])])):M("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Xn={class:"d-flex justify-content-end"},Zn=["disabled"],er={class:"form-floating mb-2"},tr={key:0,class:"d-block invalid-feedback"},sr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),H=i,_=ue({lookups:{},item:{name:null}}),S={item:{name:{required:ee.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0}}},w=ye(S,_);ne(async()=>{});const K=async()=>{const W=_;if(h.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const c=k.clone(W.item);await R.post("/api/v1/sourcegroups/",c).then(x=>{E.success("Add Source Group","Source group added.",{onClose:async()=>{const a=`${H.urlView}/${x.data}`;await Y.push(a)}})})}catch(c){T.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{h.value=!1}};return(W,r)=>{const c=Q("router-link"),x=Q("PageHeader"),a=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(x,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",Xn,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:r[0]||(r[0]=j=>K()),class:"btn btn-primary"},r[2]||(r[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zn),A(c,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(a,{errorMessage:o(T),vuelidate:o(w)},{default:V(()=>[e("div",null,[e("div",er,[C(e("input",{"onUpdate:modelValue":r[1]||(r[1]=j=>_.item.name=j),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[B,_.item.name]]),r[4]||(r[4]=e("label",{for:"name"},"Name",-1)),o(w).item.name.$error?(t(),s("div",tr,[(t(!0),s(N,null,G(o(w).item.name.$errors,j=>(t(),s("div",{key:j.$uid},b(j.$message),1))),128))])):M("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},or={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ar(i,u,$,h,y,q){const T=Q("Page");return t(),ie(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const lr=ke(or,[["render",ar]]),nr={class:"d-flex justify-content-end"},rr={class:"ms-1"},ir={class:"input-group"},dr={class:"table-responsive"},ur={class:"table table-hover mb-0"},cr=["textContent"],mr={key:0,class:"fas fa-fw fa-check-circle text-success"},fr="/api/v1/sourcegroups/search",pr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,security:_,filter:S,initializeFilter:w,getQuery:K,saveQuery:W,search:r,getRowNumber:c,setSelected:x,isSelected:a}=Ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${$==null?void 0:$.userId}/source-groups/search`,baseUrl:fr,filter:{updateUrl:!0}});return ne(async()=>{w(),await r()}),(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("m-pagination"),m=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(y)},{default:V(()=>[e("div",nr,[A(U,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",rr,[e("div",ir,[C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>o(S).query.criteria=p),onKeyup:l[1]||(l[1]=Ie(p=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=p=>o(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(m,{errorMessage:o(R)},{default:V(()=>[e("div",dr,[e("table",ur,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(S).items,(p,f)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(c)(f)),class:"text-center"},null,8,cr),e("td",null,[A(U,{to:`${i.urlView}/${p.sourceGroupId}`,class:"d-inline-block text-truncate"},{default:V(()=>[p.arn?(t(),s("span",mr)):M("",!0),L(" "+b(p.name),1)]),_:2},1032,["to"])]),e("td",null,b(p.channelOutputs),1),e("td",null,b(p.packageConfigurations),1)]))),128))]),_:1},512),[[he,o(S).items.length>0]])])]),A(d,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},vr={class:"d-flex flex-row justify-content-end"},gr={key:0},br={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},yr={class:"nav-item",role:"presentation"},$r={class:"nav-item",role:"presentation"},wr={class:"nav-item",role:"presentation"},hr={class:"tab-content",id:"myTabContent"},_r={class:"mt-2"},kr={class:"col"},Sr={class:"form-floating mb-2"},Tr={class:"mt-2"},Mr={class:"table-responsive border"},Cr={class:"table table-hover mb-0"},Ir={class:"mt-2"},xr={class:"table-responsive border"},Pr={class:"table table-hover mb-0"},Ur={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null}),c=ae();ne(async()=>{await l(),c.value=z.getPageTab("sourceGroup")||"information-tab"});const x=d=>{z.setPageTab("sourceGroup",d),c.value=d},a=d=>d!==c.value?"":"active",j=d=>d!==c.value?"":"show active",l=async()=>{const d=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const m=`/api/v1/sourcegroups/${u.id}/`;await J.get(m).then(p=>{d.item=p.data})}catch(m){k.value=z.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{y.value=!1}},U=async()=>{if(!y.value)try{y.value=!0,k.value="";const d=`/api/v1/sourcegroups/${u.id}/`;await J.delete(d).then(m=>{H.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const p=`${u.urlMain}/`;await E.push(p)}})})}catch(d){k.value=z.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{y.value=!1}},g=async()=>{await l()};return(d,m)=>{const p=Q("PageHeader"),f=Q("router-link"),v=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(p,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",vr,[e("button",{onClick:m[0]||(m[0]=F=>U()),class:"ms-1 btn btn-warning"},m[7]||(m[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:m[1]||(m[1]=F=>g()),class:"ms-2 btn btn-secondary"},m[8]||(m[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:m[2]||(m[2]=F=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},m[9]||(m[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(v,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",gr,[e("div",null,[e("ul",br,[e("li",yr,[e("button",{onClick:m[3]||(m[3]=F=>x("information-tab")),class:oe([a("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",$r,[e("button",{onClick:m[4]||(m[4]=F=>x("channelOutputs-tab")),class:oe([a("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",wr,[e("button",{onClick:m[5]||(m[5]=F=>x("packageConfigurations-tab")),class:oe([a("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",hr,[e("div",{class:oe([j("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",_r,[e("div",kr,[e("div",Sr,[C(e("input",{"onUpdate:modelValue":m[6]||(m[6]=F=>r.item.name=F),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.name]]),m[10]||(m[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:oe([j("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Tr,[e("div",Mr,[e("table",Cr,[m[11]||(m[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.channelOutputs,(F,P)=>(t(),s("tr",{key:F.channelOutputId},[e("td",null,b(P+1),1),e("td",null,[A(f,{to:`${i.urlViewChannel}/${F.channelId}/${o(w)()}`},{default:V(()=>[L(b(F.manifestName),1)]),_:2},1032,["to"])]),e("td",null,b(F.outputType),1)]))),128))]),_:1},512),[[he,r.item.channelOutputs.length>0]])])])])],2),e("div",{class:oe([j("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Ir,[e("div",xr,[e("table",Pr,[m[12]||(m[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Vod"),e("th",null,"Type")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.packageConfigurations,(F,P)=>(t(),s("tr",{key:F.packageConfigurationId},[e("td",null,b(P+1),1),e("td",null,[A(f,{to:`${i.urlViewVodSource}/${F.vodSourceId}/${o(w)()}`},{default:V(()=>[L(b(F.path),1)]),_:2},1032,["to"])]),e("td",null,b(F.type),1)]))),128))]),_:1},512),[[he,r.item.packageConfigurations.length>0]])])])])],2)])])])):M("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Vr={class:"d-flex justify-content-end"},Or=["disabled"],Ar={class:"form-floating mb-2"},Dr={key:0,class:"d-block invalid-feedback"},Er={class:"form-floating mb-2"},Hr={key:0,class:"d-block invalid-feedback"},Br={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),H=i,_=ue({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),S={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:ee.withMessage("HTTP Configuration Base Url is required.",te),$autoDirty:!0,$lazy:!0}}},w=ye(S,_);ne(async()=>{});const K=async()=>{const W=_;if(h.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const c=k.clone(W.item);await R.post("/api/v1/sourcelocations/",c).then(x=>{E.success("Add Source Location","Source location added.",{onClose:async()=>{const a=`${H.urlView}/${x.data}`;await Y.push(a)}})})}catch(c){T.value=k.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{h.value=!1}};return(W,r)=>{const c=Q("router-link"),x=Q("PageHeader"),a=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(x,{"page-icon":"fas fa-fw fa-building",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",Vr,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:r[0]||(r[0]=j=>K()),class:"btn btn-primary"},r[3]||(r[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Or),A(c,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>r[4]||(r[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(a,{errorMessage:o(T),vuelidate:o(w)},{default:V(()=>[e("div",null,[e("div",Ar,[C(e("input",{"onUpdate:modelValue":r[1]||(r[1]=j=>_.item.name=j),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[B,_.item.name]]),r[5]||(r[5]=e("label",{for:"name"},"Name",-1)),o(w).item.name.$error?(t(),s("div",Dr,[(t(!0),s(N,null,G(o(w).item.name.$errors,j=>(t(),s("div",{key:j.$uid},b(j.$message),1))),128))])):M("",!0)]),e("div",Er,[C(e("textarea",{"onUpdate:modelValue":r[2]||(r[2]=j=>_.item.httpConfigurationBaseUrl=j),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[B,_.item.httpConfigurationBaseUrl]]),r[6]||(r[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(w).item.httpConfigurationBaseUrl.$error?(t(),s("div",Hr,[(t(!0),s(N,null,G(o(w).item.httpConfigurationBaseUrl.$errors,j=>(t(),s("div",{key:j.$uid},b(j.$message),1))),128))])):M("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Lr={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Nr(i,u,$,h,y,q){const T=Q("Page");return t(),ie(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const qr=ke(Lr,[["render",Nr]]),Rr={class:"d-flex justify-content-end"},zr={class:"ms-1"},jr={class:"input-group"},Fr={class:"table-responsive"},Gr={class:"table table-hover mb-0"},Yr=["textContent"],Wr={key:0,class:"fas fa-fw fa-check-circle text-success"},Kr="/api/v1/sourcelocations/search",Jr={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,security:_,filter:S,initializeFilter:w,getQuery:K,saveQuery:W,search:r,getRowNumber:c,setSelected:x,isSelected:a}=Ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${$==null?void 0:$.userId}/source-locations/search`,baseUrl:Kr,filter:{updateUrl:!0}});return ne(async()=>{w(),await r()}),(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("m-pagination"),m=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-building",pageTitle:o(y)},{default:V(()=>[e("div",Rr,[A(U,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",zr,[e("div",jr,[C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>o(S).query.criteria=p),onKeyup:l[1]||(l[1]=Ie(p=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=p=>o(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(m,{errorMessage:o(R)},{default:V(()=>[e("div",Fr,[e("table",Gr,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(S).items,(p,f)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(c)(f)),class:"text-center"},null,8,Yr),e("td",null,[A(U,{to:`${i.urlView}/${p.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:V(()=>[p.arn?(t(),s("span",Wr)):M("",!0),L(" "+b(p.name),1)]),_:2},1032,["to"])]),e("td",null,b(p.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[he,o(S).items.length>0]])])]),A(d,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Qr={class:"d-flex flex-row justify-content-end"},Xr={key:0},Zr={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},ei={class:"nav-item",role:"presentation"},ti={class:"nav-item",role:"presentation"},si={class:"nav-item",role:"presentation"},oi={class:"tab-content",id:"myTabContent"},ai={class:"mt-2"},li={class:"col"},ni={class:"form-floating mb-2"},ri={class:"col"},ii={class:"form-floating mb-2"},di={class:"mt-2"},ui={class:"table-responsive border"},ci={class:"table table-hover mb-0"},mi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},fi={class:"mt-2"},pi={class:"table-responsive border"},vi={class:"table table-hover mb-0"},gi={key:0,class:"fas fa-fw fa-check-circle text-success"},bi={key:1},yi={key:2},$i={key:0},wi={class:"badge bg-info"},hi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null}),c=ae();ne(async()=>{await l(),c.value=z.getPageTab("sourceLocation")||"information-tab"});const x=m=>{z.setPageTab("sourceLocation",m),c.value=m},a=m=>m!==c.value?"":"active",j=m=>m!==c.value?"":"show active",l=async()=>{const m=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const p=`/api/v1/sourcelocations/${u.id}/`;await J.get(p).then(f=>{m.item=f.data})}catch(p){k.value=z.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{y.value=!1}},U=async()=>{await l()},g=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/sourcelocations/${u.id}/publish/`).then(p=>{H.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),y.value=!1,await U()}catch(p){k.value=z.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{y.value=!1}}},d=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/sourcelocations/unpublish/${u.id}/`).then(p=>{H.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),y.value=!1,await U()}catch(p){k.value=z.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{y.value=!1}}};return(m,p)=>{const f=Q("PageHeader"),v=Q("router-link"),F=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(f,{"page-icon":"fas fa-fw fa-building",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",Qr,[r.item?(t(),s(N,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:p[0]||(p[0]=P=>d()),class:"ms-1 btn btn-warning"},p[9]||(p[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:p[1]||(p[1]=P=>g()),class:"ms-1 btn btn-primary"},p[10]||(p[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):M("",!0),e("button",{onClick:p[2]||(p[2]=P=>U()),class:"ms-2 btn btn-secondary"},p[11]||(p[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:p[3]||(p[3]=P=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(F,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",Xr,[e("div",null,[e("ul",Zr,[e("li",ei,[e("button",{onClick:p[4]||(p[4]=P=>x("information-tab")),class:oe([a("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ti,[e("button",{onClick:p[5]||(p[5]=P=>x("vodSources-tab")),class:oe([a("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",si,[e("button",{onClick:p[6]||(p[6]=P=>x("programs-tab")),class:oe([a("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",oi,[e("div",{class:oe([j("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ai,[e("div",li,[e("div",ni,[C(e("input",{"onUpdate:modelValue":p[7]||(p[7]=P=>r.item.name=P),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.name]]),p[13]||(p[13]=e("label",{for:"name"},"Name",-1))])]),e("div",ri,[e("div",ii,[C(e("input",{"onUpdate:modelValue":p[8]||(p[8]=P=>r.item.httpConfigurationBaseUrl=P),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[B,r.item.httpConfigurationBaseUrl]]),p[14]||(p[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:oe([j("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",di,[e("div",ui,[e("table",ci,[p[15]||(p[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.vodSources,(P,se)=>(t(),s("tr",{key:P.vodSourceId},[e("td",null,b(se+1),1),e("td",null,[P.arn?(t(),s("span",mi)):M("",!0),A(v,{to:`${u.urlViewVodSource}/${encodeURIComponent(P.vodSourceId)}/${o(w)()}`},{default:V(()=>[L(b(P.name),1)]),_:2},1032,["to"])]),e("td",null,[A(v,{to:`${u.urlViewVideo}/${encodeURIComponent(P.video.videoId)}/${o(w)()}`},{default:V(()=>[L(b(P.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,b(o(z).moment.utc(P.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,r.item.vodSources.length>0]])])])])],2),e("div",{class:oe([j("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",fi,[e("div",pi,[e("table",vi,[p[16]||(p[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Relative Program"),e("th",null,"Date Scheduled Start"),e("th",null,"Channel")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.programs,(P,se)=>(t(),s("tr",{key:P.programId},[e("td",null,b(se+1),1),e("td",null,[P.arn?(t(),s("span",gi)):M("",!0),L(" "+b(P.name)+" ("+b(P.transitionType)+") ",1),P.startOffsetMillis>0?(t(),s("div",bi," Start Offset: "+b(P.startOffsetMillis/6e4)+" seconds ",1)):M("",!0),P.endOffsetMillis>0?(t(),s("div",yi," End Offset: "+b(P.endOffsetMillis/6e4)+" seconds ",1)):M("",!0)]),e("td",null,[P.relativeProgram?(t(),s("div",$i,b(P.relativeProgram.name)+" ["+b(P.relativePosition)+"] ",1)):M("",!0)]),e("td",null,[L(b(o(z).moment(P.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",wi,b(o(z).moment(P.dateScheduledStart).fromNow()),1)])]),e("td",null,[A(v,{to:`${u.urlViewChannel}/${encodeURIComponent(P.channel.channelId)}/${o(w)()}`},{default:V(()=>[L(b(P.channel.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[he,r.item.programs.length>0]])])])])],2)])])])):M("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},_i={class:"d-flex justify-content-end"},ki=["disabled"],Si={class:"col"},Ti={class:"form-floating mb-2"},Mi={key:0,class:"d-block invalid-feedback"},Ci={class:"row row-cols-1 row-cols-sm-2"},Ii={class:"col"},xi={class:"form-floating mb-2"},Pi=["value"],Ui={key:0,class:"d-block invalid-feedback"},Vi={class:"col"},Oi={class:"form-floating mb-2"},Ai=["disabled"],Di=["value"],Ei={key:0,class:"d-block invalid-feedback"},Hi={key:0},Bi={class:"d-flex flex-row justify-content-between"},Li={key:0,class:"d-inline invalid-feedback"},Ni={class:"table-responsive border mt-1"},qi={class:"table mb-0 caption-top"},Ri={class:"input-group mb-1"},zi=["onUpdate:modelValue"],ji=["onUpdate:modelValue"],Fi=["value"],Gi=["onUpdate:modelValue"],Yi=["onClick"],Wi={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),H=i,_=ue({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),S=(U,g,d)=>U.length>0,w={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:ee.withMessage("Video is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("Source Locaton is required.",te),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ee.withMessage("PackageConfigurations is required.",S),$each:ee.forEach({path:{required:ee.withMessage("Path is required.",te)},sourceGroupId:{required:ee.withMessage("Source Group is required.",te)}}),$autoDirty:!0,$lazy:!0}}},K=ye(w,_);ne(async()=>{await W(),await r()});const W=async()=>{try{await R.get("/api/v1/sourcegroups/lookup/").then(g=>{_.lookups.sourceGroups=g.data})}catch(U){T.value=k.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},r=async()=>{try{if(await R.get("/api/v1/sourcelocations/lookup/").then(g=>{_.lookups.sourceLocations=g.data}),_.lookups.sourceLocations.length===1){const g=_.lookups.sourceLocations[0];_.selected.sourceLocation=g,await c()}}catch(U){T.value=k.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{}},c=async()=>{const U=_.selected.sourceLocation;_.item.sourceLocationId=U.id,await x(U.baseUrl)},x=async U=>{try{const g=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(U)}`;await R.get(g).then(d=>{_.lookups.videos=d.data,_.lookups.videos.length===1&&(_.item.videoId=_.lookups.videos[0].id)})}catch(g){T.value=k.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},a=async()=>{const U=_;if(h.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const d=k.clone(U.item);d.videoId=d.video.id,delete d.video,await R.post("/api/v1/vodSources/",d).then(m=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const p=`${H.urlView}/${m.data}`;await Y.push(p)}})})}catch(d){T.value=k.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{h.value=!1}},j=()=>{const U={path:"",sourceGroupId:null,type:"HLS"},g=_.item.video;g&&(U.path=g.hlsPath),_.item.packageConfigurations.push(U)},l=U=>{_.item.packageConfigurations.splice(U,1)};return(U,g)=>{const d=Q("router-link"),m=Q("PageHeader"),p=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(m,{"page-icon":"fas fa-fw fa-tag",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",_i,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:g[0]||(g[0]=f=>a()),class:"btn btn-primary"},g[6]||(g[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ki),A(d,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>g[7]||(g[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(p,{errorMessage:o(T),vuelidate:o(K)},{default:V(()=>[e("div",null,[e("div",Si,[e("div",Ti,[C(e("input",{"onUpdate:modelValue":g[1]||(g[1]=f=>_.item.name=f),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,_.item.name]]),g[8]||(g[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(K).item.name.$error?(t(),s("div",Mi,[(t(!0),s(N,null,G(o(K).item.name.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):M("",!0)])]),e("div",Ci,[e("div",Ii,[e("div",xi,[C(e("select",{"onUpdate:modelValue":g[2]||(g[2]=f=>_.selected.sourceLocation=f),onChange:g[3]||(g[3]=f=>c()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(N,null,G(_.lookups.sourceLocations,f=>(t(),s("option",{value:f},b(f.name),9,Pi))),256))],544),[[pe,_.selected.sourceLocation]]),g[9]||(g[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(K).item.sourceLocationId.$error?(t(),s("div",Ui,[(t(!0),s(N,null,G(o(K).item.sourceLocationId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):M("",!0)])]),e("div",Vi,[e("div",Oi,[C(e("select",{"onUpdate:modelValue":g[4]||(g[4]=f=>_.item.video=f),onChange:g[5]||(g[5]=f=>_.item.videoId=_.item.video.id),class:"form-select",id:"videoId",disabled:_.item.packageConfigurations.length>0},[(t(!0),s(N,null,G(_.lookups.videos,f=>(t(),s("option",{value:f},b(f.name),9,Di))),256))],40,Ai),[[pe,_.item.video]]),g[10]||(g[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(K).item.videoId.$error?(t(),s("div",Ei,[(t(!0),s(N,null,G(o(K).item.videoId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):M("",!0)])])]),g[17]||(g[17]=e("hr",null,null,-1)),_.item.videoId?(t(),s("div",Hi,[e("div",Bi,[e("fieldset",null,[e("legend",null,[g[12]||(g[12]=L(" Package Configurations ")),o(K).item.packageConfigurations.$error?(t(),s("span",Li,g[11]||(g[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):M("",!0)])]),e("button",{onClick:j,class:"btn btn-outline-primary"},g[13]||(g[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Package Configuration ")]))]),e("div",Ni,[e("table",qi,[g[16]||(g[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(N,null,G(_.item.packageConfigurations,(f,v)=>(t(),s("tr",null,[e("td",null,b(v+1),1),e("td",null,[e("div",Ri,[C(e("input",{"onUpdate:modelValue":F=>f.path=F,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,zi),[[B,f.path]])]),o(K).item.packageConfigurations.$each.$response?(t(!0),s(N,{key:0},G(o(K).item.packageConfigurations.$each.$response.$errors[v].path,F=>(t(),s("div",{key:F,class:"d-block invalid-feedback"},b(F.$message),1))),128)):M("",!0)]),e("td",null,[e("div",null,[C(e("select",{"onUpdate:modelValue":F=>f.sourceGroupId=F,class:"form-select",id:"sourceGroupId"},[(t(!0),s(N,null,G(_.lookups.sourceGroups,F=>(t(),s("option",{value:F.id},b(F.name),9,Fi))),256))],8,ji),[[pe,f.sourceGroupId]]),o(K).item.packageConfigurations.$each.$response?(t(!0),s(N,{key:0},G(o(K).item.packageConfigurations.$each.$response.$errors[v].path,F=>(t(),s("div",{key:F,class:"d-block invalid-feedback"},b(F.$message),1))),128)):M("",!0)])]),e("td",null,[C(e("select",{"onUpdate:modelValue":F=>f.type=F,class:"form-select",id:"type"},g[14]||(g[14]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Gi),[[pe,f.type]])]),e("td",null,[e("button",{onClick:F=>l(v),class:"btn btn-outline-warning"},g[15]||(g[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Yi)])]))),256))])])])])):M("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ki={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ji(i,u,$,h,y,q){const T=Q("Page");return t(),ie(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const Qi=ke(Ki,[["render",Ji]]),Xi={class:"d-flex justify-content-end"},Zi={key:0},ed={class:"ms-1"},td={class:"input-group"},sd={class:"table-responsive"},od={class:"table table-hover mb-0"},ad=["textContent"],ld={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},nd={class:"small"},rd="/api/v1/vodsources/search",id={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,closeWithReturnUrl:_,generateReturnUrl:S,security:w,filter:K,initializeFilter:W,getQuery:r,saveQuery:c,search:x,getRowNumber:a,setSelected:j,isSelected:l}=Ve({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${$==null?void 0:$.userId}/vod-sources/search`,baseUrl:rd,filter:{updateUrl:!0}});return ne(async()=>{W(),await x()}),(U,g)=>{const d=Q("router-link"),m=Q("PageHeader"),p=Q("m-pagination"),f=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(m,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(y)},{default:V(()=>[e("div",Xi,[o(w).isAdministrator?(t(),s("div",Zi,[A(d,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>g[3]||(g[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):M("",!0),A(d,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>g[4]||(g[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ed,[e("div",td,[C(e("input",{"onUpdate:modelValue":g[0]||(g[0]=v=>o(K).query.criteria=v),onKeyup:g[1]||(g[1]=Ie(v=>o(x)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(K).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:g[2]||(g[2]=v=>o(x)(1))},g[5]||(g[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(f,{errorMessage:o(R)},{default:V(()=>[e("div",sd,[e("table",od,[g[6]||(g[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(K).items,(v,F)=>(t(),s("tr",{key:v.movieId},[e("td",{textContent:b(o(a)(F)),class:"text-center"},null,8,ad),e("td",null,[A(d,{to:`${i.urlView}/${v.vodSourceId}`,class:"d-inline-block text-truncate"},{default:V(()=>[v.arn?(t(),s("span",ld)):M("",!0),L(b(v.name),1)]),_:2},1032,["to"])]),e("td",null,[A(d,{to:`${i.urlViewVideo}/${encodeURIComponent(v.video.videoId)}/${o(S)()}`},{default:V(()=>[L(b(v.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",nd,"Duration: "+b(o(J).moment.utc(v.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[he,o(K).items.length>0]])])]),A(p,{filter:o(K),search:o(x),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},dd=["id"],ud={class:"modal-dialog modal-xl modal-fullscreen-md-down"},cd={class:"modal-content"},md={class:"modal-header bg-primary text-white"},fd={class:"modal-title",id:"exampleModalLabel"},pd={class:"modal-body"},vd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gd=["innerHTML"],bd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},yd={class:"container"},$d={class:"col"},wd={class:"form-floating mb-2"},hd=["value"],_d={key:0,class:"d-block invalid-feedback"},kd={class:"col"},Sd={class:"form-floating mb-2"},Td={key:0,class:"d-block invalid-feedback"},Md={class:"col"},Cd={class:"form-floating mb-2"},Id={key:0,class:"d-block invalid-feedback"},xd={class:"modal-footer"},Pd=["disabled"],Ud={__name:"_addPackageConfiguration",emits:["refresh"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),K=$;ae();const W=ae("modalAddChannelOutput"),r=ue({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),c={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("VOD Source is required.",te),$autoDirty:!0,$lazy:!0},path:{required:ee.withMessage("Path is required.",te),$autoDirty:!0,$lazy:!0},type:{required:ee.withMessage("Type is required.",te),$autoDirty:!0,$lazy:!0}}},x=ye(c,r);ne(async()=>{x.value.$reset()});const a=async()=>{await j()},j=async()=>{try{await z.get("/api/v1/sourceGroups/lookup/").then(m=>{r.lookups.sourceGroups=m.data,r.lookups.sourceGroups.length===1&&(r.item.sourceGroupId=r.lookups.sourceGroups[0].id)})}catch(d){E.value=H.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},l=async d=>{const m=r;Y.value.clear(),E.value="",m.lookups={sourceGroups:[]},m.item={sourceGroupId:null,vodSourceId:d,path:null,type:null},await a(),x.value.$reset();var p=document.getElementById(W.value),f=$e.getOrCreateInstance(p);f.show()},U=async()=>{var d=document.getElementById(W.value),m=$e.getOrCreateInstance(d);m.hide(),K("refresh")},g=async()=>{const d=r;if(q.value)return;const m=await x.value.$validate();debugger;if(!m){window.scrollTo(0,0);return}try{q.value=!0,E.value="";const p=d.item;await z.post("/api/v1/vodSources/package-configurations/",p).then(f=>{_.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await U()}catch(p){E.value=H.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{q.value=!1}};return u({open:l,close:U}),(d,m)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:W.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",ud,[e("div",cd,[e("div",md,[e("h5",fd,b(o(h))+" - "+b(o(y)),1),m[4]||(m[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",pd,[o(E)?(t(),s("div",vd,[m[5]||(m[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,gd)])):M("",!0),o(Y).size>0?(t(),s("div",bd,[m[6]||(m[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),p=>(t(),s("li",null,b(p),1))),256))])])):M("",!0),e("div",yd,[e("div",$d,[e("div",wd,[C(e("select",{"onUpdate:modelValue":m[0]||(m[0]=p=>r.item.sourceGroupId=p),class:"form-select",id:"sourceGroupId"},[(t(!0),s(N,null,G(r.lookups.sourceGroups,p=>(t(),s("option",{value:p.id},b(p.name),9,hd))),256))],512),[[pe,r.item.sourceGroupId]]),m[7]||(m[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(x).item.sourceGroupId.$error?(t(),s("div",_d,[(t(!0),s(N,null,G(o(x).item.sourceGroupId.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):M("",!0)])]),e("div",kd,[e("div",Sd,[C(e("select",{"onUpdate:modelValue":m[1]||(m[1]=p=>r.item.type=p),class:"form-select",id:"type"},m[8]||(m[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,r.item.type]]),m[9]||(m[9]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(x).item.type.$error?(t(),s("div",Td,[(t(!0),s(N,null,G(o(x).item.type.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):M("",!0)])]),e("div",Md,[e("div",Cd,[C(e("input",{"onUpdate:modelValue":m[2]||(m[2]=p=>r.item.path=p),class:"form-control",id:"path"},null,512),[[B,r.item.path]]),m[10]||(m[10]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(x).item.path.$error?(t(),s("div",Id,[(t(!0),s(N,null,G(o(x).item.path.$errors,p=>(t(),s("div",{key:p.$uid},b(p.$message),1))),128))])):M("",!0)])])])]),e("div",xd,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:m[3]||(m[3]=p=>g()),class:"btn btn-primary",type:"button"},m[11]||(m[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Pd),m[12]||(m[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,dd))}},Vd=["id"],Od={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Ad={class:"modal-content"},Dd={class:"modal-header bg-primary text-white"},Ed={class:"modal-title",id:"exampleModalLabel"},Hd={class:"modal-body"},Bd={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ld=["innerHTML"],Nd={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qd={class:"container"},Rd={class:"col"},zd={class:"form-floating mb-2"},jd={class:"col"},Fd={class:"form-floating mb-2"},Gd={key:0,class:"d-block invalid-feedback"},Yd={class:"col"},Wd={class:"form-floating mb-2"},Kd={key:0,class:"d-block invalid-feedback"},Jd={class:"col"},Qd={class:"form-floating mb-2"},Xd={key:0,class:"d-block invalid-feedback"},Zd={class:"modal-footer"},eu=["disabled"],tu={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),K=$,W=ae(),r=ae("modalAddPlaybackConfiguration"),c=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},a=ye(x,c);ne(async()=>{a.value.$reset()});const j=async(g,d)=>{W.value=g;const m=c;Y.value.clear(),E.value="";const p=d,f=p.lastIndexOf("/"),v=p.substring(0,f),F="ad_campaign_"+p.substring(f+1).replace(".","_");m.item={name:F,originalVideoContentSourceUrl:d,videoContentSourceUrl:v,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},a.value.$reset();var P=document.getElementById(r.value),se=$e.getOrCreateInstance(P);se.show()},l=async()=>{var g=document.getElementById(r.value),d=$e.getOrCreateInstance(g);d.hide(),K("refresh")},U=async()=>{const g=c;if(q.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{q.value=!0,E.value="";const m=g.item;m.vodSourceId=W.value,await z.post("/api/v1/playbackconfigurations/vodsource",m).then(p=>{_.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await l()}catch(m){E.value=H.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{q.value=!1}};return u({open:j,close:l}),(g,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Od,[e("div",Ad,[e("div",Dd,[e("h5",Ed,b(o(h))+" - "+b(o(y)),1),d[5]||(d[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Hd,[o(E)?(t(),s("div",Bd,[d[6]||(d[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Ld)])):M("",!0),o(Y).size>0?(t(),s("div",Nd,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),m=>(t(),s("li",null,b(m),1))),256))])])):M("",!0),e("div",qd,[e("div",Rd,[e("div",zd,[C(e("input",{"onUpdate:modelValue":d[0]||(d[0]=m=>c.item.originalVideoContentSourceUrl=m),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[B,c.item.originalVideoContentSourceUrl]]),d[8]||(d[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",jd,[e("div",Fd,[C(e("input",{"onUpdate:modelValue":d[1]||(d[1]=m=>c.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,c.item.name]]),d[9]||(d[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",Gd,[(t(!0),s(N,null,G(o(a).item.name.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):M("",!0)])]),e("div",Yd,[e("div",Wd,[C(e("input",{"onUpdate:modelValue":d[2]||(d[2]=m=>c.item.videoContentSourceUrl=m),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[B,c.item.videoContentSourceUrl]]),d[10]||(d[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[11]||(d[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(a).item.videoContentSourceUrl.$error?(t(),s("div",Kd,[(t(!0),s(N,null,G(o(a).item.videoContentSourceUrl.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):M("",!0)])]),e("div",Jd,[e("div",Qd,[C(e("textarea",{"onUpdate:modelValue":d[3]||(d[3]=m=>c.item.adDecisionServerUrl=m),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[B,c.item.adDecisionServerUrl]]),d[12]||(d[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(a).item.adDecisionServerUrl.$error?(t(),s("div",Xd,[(t(!0),s(N,null,G(o(a).item.adDecisionServerUrl.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):M("",!0)])])])]),e("div",Zd,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:d[4]||(d[4]=m=>U()),class:"btn btn-primary",type:"button"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,eu),d[14]||(d[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vd))}},su={class:"d-flex flex-row justify-content-end"},ou={key:0},au={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},lu={class:"nav-item",role:"presentation"},nu={class:"nav-item",role:"presentation"},ru={class:"nav-item",role:"presentation"},iu={class:"tab-content",id:"myTabContent"},du={class:"mt-2"},uu={class:"col"},cu={class:"form-floating mb-2"},mu={key:0,class:"table-responsive border mt-2"},fu={class:"table mb-0"},pu={class:"row"},vu={class:"col-sm-9"},gu={key:0,class:"fas fa-fw fa-check-circle text-success"},bu={class:"col-sm-9"},yu={class:"col-sm-9"},$u={class:"text-break border p-2"},wu={class:"col-sm-3"},hu={class:"d-flex flex-row justify-content-between"},_u=["href"],ku={class:"col-sm-9"},Su={class:"text-break border p-2"},Tu=["href"],Mu={class:"col-sm-3"},Cu={class:"d-flex flex-row justify-content-between"},Iu=["href"],xu={class:"col-sm-9"},Pu={class:"text-break border p-2"},Uu={class:"d-flex flex-row"},Vu=["onClick"],Ou=["onClick"],Au=["onClick"],Du={class:"mt-2"},Eu={class:"mt-2 text-end"},Hu={class:"table-responsive border mt-2"},Bu={class:"table table-hover mb-0 caption-top"},Lu={class:"text-end"},Nu=["onClick"],qu={class:"mt-2"},Ru={class:"row row-cols-sm-2"},zu={class:"col"},ju={class:"form-floating mb-2"},Fu={class:"col"},Gu={class:"form-floating mb-2"},Yu={class:"row row-cols-sm-2"},Wu={class:"col"},Ku={class:"form-floating mb-2"},Ju={class:"col"},Qu={class:"input-group mb-2"},Xu={class:"form-floating"},Zu=["href"],ec={class:"row row-cols-sm-2"},tc={class:"col"},sc={class:"form-floating mb-2"},oc={class:"col"},ac={class:"input-group mb-2"},lc={class:"form-floating"},nc=["href"],rc={class:"row row-cols-sm-2"},ic={class:"col"},dc={class:"form-floating mb-2"},uc={class:"col"},cc={class:"input-group mb-2"},mc={class:"form-floating"},fc={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null}),c=ae();ae(null);const x=ae();ne(async()=>{await U(),c.value=z.getPageTab("vodSource")||"information-tab"});const a=D=>{z.setPageTab("vodSource",D),c.value=D},j=D=>D!==c.value?"":"active",l=D=>D!==c.value?"":"show active",U=async()=>{const D=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const n=`/api/v1/vodsources/${u.id}/`;await J.get(n).then(O=>{D.item=O.data;const le=D.item,X=z.moment.utc(D.item.video.durationInMillis).format("HH:mm:ss");le.video.duration=X;const fe=le.video.hlsPath,_e=fe.substring(fe.lastIndexOf("/")+1)})}catch(n){k.value=z.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{y.value=!1}},g=async()=>{await U()},d=()=>{x.value.open(u.id)},m=D=>{if(D==="HLS"){const n=r.item.video.hlsBaseUrl+r.item.video.hlsPath;modalAddPlaybackConfiguration.value.open(u.id,n)}},p=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/vodsources/${u.id}/publish/`).then(n=>{H.success("Publish VOD","VOD was published.",{async onClose(){}})}),y.value=!1,await g()}catch(n){k.value=z.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{y.value=!1}}},f=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/vodsources/${u.id}/unpublish/`).then(n=>{H.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),y.value=!1,await g()}catch(n){k.value=z.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{y.value=!1}}},v=async D=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/playbackconfigurations/${D}/vodsource/publish/`).then(O=>{H.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),y.value=!1,await g()}catch(O){k.value=z.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{y.value=!1}}},F=async D=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${D}/vodsource/unpublish/`).then(O=>{H.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await g()}catch(O){k.value=z.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{y.value=!1}}},P=async D=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/vodSources/package-configurations/${D}/`).then(O=>{H.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),y.value=!1,await g()}catch(O){k.value=z.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{y.value=!1}}},se=async D=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/playbackconfigurations/${D}/vodsource/`).then(O=>{H.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),y.value=!1,await g()}catch(O){k.value=z.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{y.value=!1}}};return(D,n)=>{const O=Q("PageHeader"),le=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(O,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",su,[r.item?(t(),s(N,{key:0},[r.item.arn?(t(),s("button",{key:0,onClick:n[0]||(n[0]=X=>f()),class:"ms-1 btn btn-danger"},n[20]||(n[20]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:n[1]||(n[1]=X=>p()),class:"ms-1 btn btn-primary"},n[21]||(n[21]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):M("",!0),e("button",{onClick:n[2]||(n[2]=X=>g()),class:"ms-2 btn btn-secondary"},n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:n[3]||(n[3]=X=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},n[23]||(n[23]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(le,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",ou,[e("div",null,[e("ul",au,[e("li",lu,[e("button",{onClick:n[4]||(n[4]=X=>a("information-tab")),class:oe([j("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",nu,[e("button",{onClick:n[5]||(n[5]=X=>a("packageConfigurations-tab")),class:oe([j("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",ru,[e("button",{onClick:n[6]||(n[6]=X=>a("video-tab")),class:oe([j("video-tab"),"nav-link"]),id:"video-tab","data-bs-toggle":"tab","data-bs-target":"#video",type:"button",role:"tab","aria-controls":"video","aria-selected":"false"}," Video ",2)])]),e("div",iu,[e("div",{class:oe([l("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",du,[e("div",uu,[e("div",cu,[C(e("input",{"onUpdate:modelValue":n[7]||(n[7]=X=>r.item.name=X),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.name]]),n[24]||(n[24]=e("label",{for:"name"},"Name",-1))])]),n[37]||(n[37]=e("fieldset",null,[e("legend",null,"Playback Configurations (TODO)")],-1)),r.item.playbackConfigurations?(t(),s("div",mu,[e("table",fu,[n[36]||(n[36]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.playbackConfigurations,(X,fe)=>(t(),s("tr",{key:X.playbackConfigurationId},[e("td",null,b(fe+1),1),e("td",null,[e("dl",pu,[n[30]||(n[30]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",vu,[X.arn?(t(),s("span",gu)):M("",!0),L(b(X.name),1)]),n[31]||(n[31]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",bu,b(X.videoContentSourceUrl),1),n[32]||(n[32]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",yu,[e("div",$u,b(X.adDecisionServerUrl),1)]),r.item.video.dashPath&&X.dashConfigurationManifestEndpointPrefix?(t(),s(N,{key:0},[e("dt",wu,[e("div",hu,[n[26]||(n[26]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/dashjs?streamUrl=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},n[25]||(n[25]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),L("View DASH ")]),8,_u)])])]),e("dd",ku,[e("div",Su,b(X.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(X.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},n[27]||(n[27]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),L("View DASH ")]),8,Tu)])])],64)):M("",!0),r.item.video.hlsPath&&X.hlsConfigurationManifestEndpointPrefix?(t(),s(N,{key:1},[e("dt",Mu,[e("div",Cu,[n[29]||(n[29]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(X.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},n[28]||(n[28]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),L("View ")]),8,Iu)])])]),e("dd",xu,[e("div",Pu,b(X.hlsConfigurationManifestEndpointPrefix),1)])],64)):M("",!0)])]),e("td",null,[e("div",Uu,[X.arn?(t(),s("button",{key:0,onClick:_e=>F(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-warning"},n[33]||(n[33]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,Vu)):(t(),s("button",{key:1,onClick:_e=>v(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-primary"},n[34]||(n[34]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Ou)),X.arn?M("",!0):(t(),s("button",{key:2,onClick:_e=>se(X.vodSourcePlaybackConfigurationId),class:"btn btn-outline-danger ms-1"},n[35]||(n[35]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Au))])])]))),128))]),_:1},512),[[he,r.item.playbackConfigurations.length>0]])])])):M("",!0)])],2),e("div",{class:oe([l("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Du,[e("div",Eu,[e("button",{onClick:n[8]||(n[8]=X=>d()),class:"btn btn-primary"},n[38]||(n[38]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Add ")]))]),e("div",Hu,[e("table",Bu,[n[40]||(n[40]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.packageConfigurations,(X,fe)=>(t(),s("tr",{key:X.packageConfigurationId},[e("td",null,b(fe+1),1),e("td",null,b(X.path),1),e("td",null,b(X.sourceGroup.name),1),e("td",null,b(X.type),1),e("td",Lu,[e("button",{onClick:_e=>P(X.packageConfigurationId),class:"btn btn-outline-warning"},n[39]||(n[39]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Nu)])]))),128))]),_:1},512),[[he,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:oe([l("video-tab"),"tab-pane fade"]),id:"video",role:"tabpanel","aria-labelledby":"video-tab"},[e("div",qu,[e("div",null,[e("div",Ru,[e("div",zu,[e("div",ju,[C(e("input",{"onUpdate:modelValue":n[9]||(n[9]=X=>r.item.video.title=X),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[B,r.item.video.title]]),n[41]||(n[41]=e("label",{for:"title"},"Title",-1))])]),e("div",Fu,[e("div",Gu,[C(e("input",{"onUpdate:modelValue":n[10]||(n[10]=X=>r.item.video.duration=X),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[B,r.item.video.duration]]),n[42]||(n[42]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Yu,[e("div",Wu,[e("div",Ku,[C(e("input",{"onUpdate:modelValue":n[11]||(n[11]=X=>r.item.video.rawBaseUrl=X),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[B,r.item.video.rawBaseUrl]]),n[43]||(n[43]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Ju,[e("div",Qu,[e("div",Xu,[C(e("input",{"onUpdate:modelValue":n[12]||(n[12]=X=>r.item.video.rawPath=X),class:"form-control",id:"rawPath",disabled:""},null,512),[[B,r.item.video.rawPath]]),n[44]||(n[44]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(r.item.video.rawBaseUrl+r.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},n[45]||(n[45]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,Zu)])])]),e("div",ec,[e("div",tc,[e("div",sc,[C(e("input",{"onUpdate:modelValue":n[13]||(n[13]=X=>r.item.video.hlsBaseUrl=X),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[B,r.item.video.hlsBaseUrl]]),n[46]||(n[46]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",oc,[e("div",ac,[e("div",lc,[C(e("input",{"onUpdate:modelValue":n[14]||(n[14]=X=>r.item.video.hlsPath=X),class:"form-control",id:"hlsPath",disabled:""},null,512),[[B,r.item.video.hlsPath]]),n[47]||(n[47]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(r.item.video.hlsBaseUrl+r.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},n[48]||(n[48]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),L("View ")],-1)]),8,nc),r.item.video.hlsPath?(t(),s("button",{key:0,onClick:n[15]||(n[15]=X=>m("HLS")),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},n[49]||(n[49]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Playback Config ")]))):M("",!0)])])]),e("div",rc,[e("div",ic,[e("div",dc,[C(e("input",{"onUpdate:modelValue":n[16]||(n[16]=X=>r.item.video.dashBaseUrl=X),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[B,r.item.video.dashBaseUrl]]),n[50]||(n[50]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",uc,[e("div",cc,[e("div",mc,[C(e("input",{"onUpdate:modelValue":n[17]||(n[17]=X=>r.item.video.dashPath=X),class:"form-control",id:"dashPath",disabled:""},null,512),[[B,r.item.video.dashPath]]),n[51]||(n[51]=e("label",{for:"dashPath"},"DASH Path",-1))]),r.item.video.dashPath?(t(),s("button",{key:0,onClick:n[18]||(n[18]=X=>m()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},n[52]||(n[52]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Playback Configuration ")]))):M("",!0)])])])])])],2)])])])):M("",!0)]),_:1},8,["errorMessage"]),A(Ud,{ref_key:"modalAddPackageConfiguration",ref:x,onRefresh:g},null,512),A(tu,{ref:"modalAddPlaybackConfiguration",onRefresh:n[19]||(n[19]=X=>g())},null,512)])]),_:1})}}},pc={class:"d-flex justify-content-end"},vc=["disabled"],gc={class:"container"},bc={class:"row row-cols-1"},yc={class:"col"},$c={class:"form-floating mb-2"},wc={key:0,class:"d-block invalid-feedback"},hc={class:"row row-cols-sm-2"},_c={class:"col"},kc={class:"form-floating mb-2"},Sc=["value"],Tc={key:0,class:"d-block invalid-feedback"},Mc={class:"col"},Cc={class:"form-floating mb-2"},Ic=["disabled"],xc=["value"],Pc={key:0,class:"d-block invalid-feedback"},Uc={key:0,class:"row row-cols-1 row-cols-sm-2"},Vc={class:"col"},Oc={class:"form-floating"},Ac={key:0},Dc={key:1},Ec={key:2},Hc={key:3,class:"d-block invalid-feedback"},Bc={class:"col"},Lc={class:"form-floating"},Nc={key:0},qc={key:1},Rc={key:2,class:"d-block invalid-feedback"},zc={key:1,class:"mt-3"},jc={class:"table-responsive border mt-1"},Fc={class:"table table-borderless table-sm mb-0"},Gc=["onUpdate:modelValue","onChange"],Yc={key:0},Wc=["onUpdate:modelValue","onChange"],Kc={class:"text-end"},Jc=["onClick"],Qc={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),H=i,_=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),S={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},w=ye(S,_),K=Oe(()=>{const f=k.moment;if(_.startOffsetTime&&_.startOffsetTime!=="00:00:00"&&r(_.startOffsetTime)){const v=f().startOf("day"),F=v.format("YYYY-MM-DD ")+_.startOffsetTime,se=f(F).subtract(v);return _.item.startOffsetMillis=se.valueOf(),_.item.startOffsetMillis}return 0}),W=Oe(()=>{const f=k.moment;if(_.endOffsetTime&&_.endOffsetTime!=="00:00:00"&&r(_.endOffsetTime)){const v=f().startOf("day"),F=v.format("YYYY-MM-DD ")+_.endOffsetTime,se=f(F).subtract(v);return _.item.endOffsetMillis=se.valueOf(),_.item.endOffsetMillis}return 0}),r=f=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(f);ne(async()=>{await c()});const c=async()=>{await x(),await l()},x=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(v=>{_.lookups.sourceLocations=v.data,_.item.sourceLocationId=_.lookups.sourceLocations[0].id}),_.item.sourceLocationId&&await a(_.item.sourceLocationId)}catch(f){T.value=k.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},a=async f=>{try{const v=`/api/v1/vodSources/lookup/source-location/${f}/`;await R.get(v).then(F=>{_.lookups.vodSources=F.data})}catch(v){T.value=k.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}},j=async()=>{const f=_.selected.vodSource;_.item.vodSourceId=f.id,_.endOffsetTime=k.moment.utc(f.durationInMillis).format("HH:mm:ss")},l=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(v=>{_.lookups.adBreakSourceLocations=v.data})}catch(f){T.value=k.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},U=()=>{const f={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};_.item.adBreaks.push(f)},g=f=>{_.item.adBreaks.splice(f,1)},d=f=>{const v=k.moment,F=v().startOf("day"),P=F.format("YYYY-MM-DD ")+f.offsetTime,D=v(P).subtract(F);f.offsetMillis=D.valueOf()},m=f=>{const v=k.moment,F=v().startOf("day"),P=F.format("YYYY-MM-DD ")+f.durationTime,D=v(P).subtract(F);f.durationInMillis=D.valueOf()},p=async()=>{const f=_;if(h.value)return;if(!await w.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const F=k.clone(f.item);debugger;await R.post("/api/v1/programtemplates/",F).then(P=>{E.success("Add Program Template","Program template added.",{onClose:async()=>{const se=`${H.urlView}/${P.data}`;await Y.push(se)}})})}catch(F){T.value=k.getErrorMessageAsHtml(F),window.scrollTo(0,0)}finally{h.value=!1}};return(f,v)=>{const F=Q("router-link"),P=Q("PageHeader"),se=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(P,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",pc,[e("button",{disabled:o(w).$dirty&&o(w).$invalid,onClick:v[0]||(v[0]=D=>p()),class:"btn btn-primary"},v[8]||(v[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vc),A(F,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>v[9]||(v[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(se,{errorMessage:o(T),vuelidate:o(w)},{default:V(()=>[e("div",null,[e("div",gc,[e("div",bc,[e("div",yc,[e("div",$c,[C(e("input",{"onUpdate:modelValue":v[1]||(v[1]=D=>_.item.name=D),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,_.item.name]]),v[10]||(v[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(w).item.name.$error?(t(),s("div",wc,[(t(!0),s(N,null,G(o(w).item.name.$errors,D=>(t(),s("div",{key:D.$uid},b(D.$message),1))),128))])):M("",!0)])])]),e("div",hc,[e("div",_c,[e("div",kc,[C(e("select",{"onUpdate:modelValue":v[2]||(v[2]=D=>_.item.sourceLocationId=D),onChange:v[3]||(v[3]=D=>a(_.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(N,null,G(_.lookups.sourceLocations,D=>(t(),s("option",{value:D.id},b(D.name),9,Sc))),256))],544),[[pe,_.item.sourceLocationId]]),v[11]||(v[11]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(w).item.sourceLocationId.$error?(t(),s("div",Tc,[(t(!0),s(N,null,G(o(w).item.sourceLocationId.$errors,D=>(t(),s("div",{key:D.$uid},b(D.$message),1))),128))])):M("",!0)])]),e("div",Mc,[e("div",Cc,[C(e("select",{"onUpdate:modelValue":v[4]||(v[4]=D=>_.selected.vodSource=D),onChange:v[5]||(v[5]=D=>j()),class:"form-select",id:"vodSourceId",disabled:_.item.adBreaks.length>0},[(t(!0),s(N,null,G(_.lookups.vodSources,D=>(t(),s("option",{value:D},b(o(k).moment.utc(D.durationInMillis).format("HH:mm:ss"))+" - "+b(D.name),9,xc))),256))],40,Ic),[[pe,_.selected.vodSource]]),v[12]||(v[12]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(w).item.vodSourceId.$error?(t(),s("div",Pc,[(t(!0),s(N,null,G(o(w).item.vodSourceId.$errors,D=>(t(),s("div",{key:D.$uid},b(D.$message),1))),128))])):M("",!0)])])]),_.item.vodSourceId?(t(),s("div",Uc,[e("div",Vc,[e("div",Oc,[C(e("input",{"onUpdate:modelValue":v[6]||(v[6]=D=>_.startOffsetTime=D),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[B,_.startOffsetTime]]),v[13]||(v[13]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Ac,v[14]||(v[14]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):M("",!0),K.value>W.value&&W.value>0?(t(),s("div",Dc,v[15]||(v[15]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):M("",!0),_.selected.vodSource&&K.value>=_.selected.vodSource.durationInMillis?(t(),s("div",Ec,v[16]||(v[16]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):M("",!0),o(w).item.startOffsetMillis.$error?(t(),s("div",Hc,[(t(!0),s(N,null,G(o(w).item.startOffsetMillis.$errors,D=>(t(),s("div",{key:D.$uid},b(D.$message),1))),128))])):M("",!0)]),e("div",Bc,[e("div",Lc,[C(e("input",{"onUpdate:modelValue":v[7]||(v[7]=D=>_.endOffsetTime=D),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[B,_.endOffsetTime]]),v[17]||(v[17]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),W.value>0&&W.value<3e4?(t(),s("div",Nc,v[18]||(v[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):M("",!0),_.selected.vodSource&&W.value>_.selected.vodSource.durationInMillis?(t(),s("div",qc,v[19]||(v[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):M("",!0),o(w).item.endOffsetMillis.$error?(t(),s("div",Rc,[(t(!0),s(N,null,G(o(w).item.endOffsetMillis.$errors,D=>(t(),s("div",{key:D.$uid},b(D.$message),1))),128))])):M("",!0)])])):M("",!0),_.item.vodSourceId?(t(),s("div",zc,[e("div",{class:"d-flex flex-row justify-content-between"},[v[21]||(v[21]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:U,class:"btn btn-outline-primary"},v[20]||(v[20]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Ad Break ")]))]),e("div",jc,[e("table",Fc,[v[24]||(v[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(N,null,G(_.item.adBreaks,(D,n)=>(t(),s("tr",null,[e("td",null,b(n+1),1),e("td",null,[C(e("input",{"onUpdate:modelValue":O=>D.offsetTime=O,onChange:O=>d(D),type:"time",step:"1",class:"form-control"},null,40,Gc),[[B,D.offsetTime]]),D.offsetMillis>=_.selected.vodSource.durationInMillis?(t(),s("div",Yc,v[22]||(v[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):M("",!0)]),e("td",null,[C(e("input",{"onUpdate:modelValue":O=>D.durationTime=O,onChange:O=>m(D),type:"time",step:"1",class:"form-control"},null,40,Wc),[[B,D.durationTime]])]),e("td",Kc,[e("button",{onClick:O=>g(n),class:"btn btn-outline-warning"},v[23]||(v[23]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Jc)])]))),256))])]),v[25]||(v[25]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),L(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):M("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Xc={class:"d-flex justify-content-end"},Zc=["disabled"],em={class:"container"},tm={class:"row row-cols-1"},sm={class:"col"},om={class:"form-floating mb-2"},am={key:0,class:"d-block invalid-feedback"},lm={class:"row row-cols-sm-2"},nm={class:"col"},rm={class:"form-floating mb-2"},im=["value"],dm={key:0,class:"d-block invalid-feedback"},um={class:"col"},cm={class:"form-floating mb-2"},mm=["value"],fm={key:0,class:"d-block invalid-feedback"},pm={key:0,class:"row row-cols-1 row-cols-sm-2"},vm={class:"col"},gm={class:"form-floating"},bm={key:0},ym={key:1},$m={key:2},wm={key:3,class:"d-block invalid-feedback"},hm={class:"col"},_m={class:"form-floating"},km={key:0},Sm={key:1},Tm={key:2,class:"d-block invalid-feedback"},Mm={key:1,class:"mt-2"},Cm={class:"table-responsive border mt-1"},Im={class:"table"},xm=["onUpdate:modelValue","onChange"],Pm={key:0},Um=["onUpdate:modelValue","onChange"],Vm=["onClick"],Om={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,closeWithReturnUrl:z,security:H}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),_=i,S=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),w={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},K=ye(w,S),W=Oe(()=>{const F=k.moment;if(S.startOffsetTime&&S.startOffsetTime!=="00:00:00"&&c(S.startOffsetTime)){const P=F().startOf("day"),se=P.format("YYYY-MM-DD ")+S.startOffsetTime,n=F(se).subtract(P);return S.item.startOffsetMillis=n.valueOf(),S.item.startOffsetMillis}return 0}),r=Oe(()=>{const F=k.moment;if(S.endOffsetTime&&S.endOffsetTime!=="00:00:00"&&c(S.endOffsetTime)){const P=F().startOf("day"),se=P.format("YYYY-MM-DD ")+S.endOffsetTime,n=F(se).subtract(P);return S.item.endOffsetMillis=n.valueOf(),S.item.endOffsetMillis}return 0}),c=F=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(F);ne(async()=>{await x()});const x=async()=>{await a(),await j()},a=async()=>{try{const F=`/api/v1/programtemplates/${_.id}/`;await R.get(F).then(P=>{S.item=P.data,S.startOffsetTime=k.moment.utc(S.item.startOffsetMillis).format("HH:mm:ss"),S.endOffsetTime=k.moment.utc(S.item.endOffsetMillis).format("HH:mm:ss"),S.item.adBreaks.forEach(se=>{se.offsetTime=k.moment.utc(se.offsetMillis).format("HH:mm:ss"),se.durationTime=k.moment.utc(se.durationInMillis).format("HH:mm:ss")})})}catch(F){T.value=k.getErrorMessageAsHtml(F),window.scrollTo(0,0)}finally{}},j=async()=>{await l()},l=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(P=>{S.lookups.sourceLocations=P.data}),S.item.sourceLocationId&&await U(S.item.sourceLocationId)}catch(F){T.value=k.getErrorMessageAsHtml(F),window.scrollTo(0,0)}finally{}},U=async F=>{try{const P=`/api/v1/vodSources/lookup/source-location/${F}/`;await R.get(P).then(D=>{S.lookups.vodSources=D.data});const se=S.lookups.vodSources.find(D=>D.id==S.item.vodSourceId);S.selected.vodSource=se,await g()}catch(P){T.value=k.getErrorMessageAsHtml(P),window.scrollTo(0,0)}finally{}},g=async()=>{const F=S.selected.vodSource;S.item.vodSourceId=F.id,S.endOffsetTime=k.moment.utc(F.durationInMillis).format("HH:mm:ss")},d=()=>{const F={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};S.item.adBreaks.push(F)},m=F=>{S.item.adBreaks.splice(F,1)},p=F=>{const P=k.moment,se=P().startOf("day"),D=se.format("YYYY-MM-DD ")+F.offsetTime,O=P(D).subtract(se);F.offsetMillis=O.valueOf()},f=F=>{const P=k.moment,se=P().startOf("day"),D=se.format("YYYY-MM-DD ")+F.durationTime,O=P(D).subtract(se);F.durationInMillis=O.valueOf()},v=async()=>{const F=S;if(h.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="";const se=k.clone(F.item);debugger;se.startOffsetMillis=W.value,se.endOffsetMillis=r.value,await R.put("/api/v1/programtemplates/",se).then(D=>{E.success("Edit Program Template","Program template edit.",{onClose:async()=>{const n=`${_.urlView}/${_.id}`;await Y.push(n)}})})}catch(se){T.value=k.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{h.value=!1}};return(F,P)=>{const se=Q("PageHeader"),D=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",Xc,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:P[0]||(P[0]=n=>v()),class:"btn btn-primary"},P[10]||(P[10]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zc),e("button",{onClick:P[1]||(P[1]=n=>x()),class:"btn btn-secondary ms-2"},P[11]||(P[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:P[2]||(P[2]=n=>o(z)(_.urlMain)),class:"btn btn-secondary ms-1"},P[12]||(P[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(D,{errorMessage:o(T),vuelidate:o(K)},{default:V(()=>[e("div",null,[e("div",em,[e("div",tm,[e("div",sm,[e("div",om,[C(e("input",{"onUpdate:modelValue":P[3]||(P[3]=n=>S.item.name=n),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,S.item.name]]),P[13]||(P[13]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(K).item.name.$error?(t(),s("div",am,[(t(!0),s(N,null,G(o(K).item.name.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):M("",!0)])])]),e("div",lm,[e("div",nm,[e("div",rm,[C(e("select",{"onUpdate:modelValue":P[4]||(P[4]=n=>S.item.sourceLocationId=n),onChange:P[5]||(P[5]=n=>U(S.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(N,null,G(S.lookups.sourceLocations,n=>(t(),s("option",{value:n.id},b(n.name),9,im))),256))],544),[[pe,S.item.sourceLocationId]]),P[14]||(P[14]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(K).item.sourceLocationId.$error?(t(),s("div",dm,[(t(!0),s(N,null,G(o(K).item.sourceLocationId.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):M("",!0)])]),e("div",um,[e("div",cm,[C(e("select",{"onUpdate:modelValue":P[6]||(P[6]=n=>S.selected.vodSource=n),onChange:P[7]||(P[7]=n=>g()),class:"form-select",id:"vodSourceId"},[(t(!0),s(N,null,G(S.lookups.vodSources,n=>(t(),s("option",{value:n},b(o(k).moment.utc(n.durationInMillis).format("HH:mm:ss"))+" - "+b(n.name),9,mm))),256))],544),[[pe,S.selected.vodSource]]),P[15]||(P[15]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(K).item.vodSourceId.$error?(t(),s("div",fm,[(t(!0),s(N,null,G(o(K).item.vodSourceId.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):M("",!0)])])]),S.item.vodSourceId?(t(),s("div",pm,[e("div",vm,[L(" ["+b(W.value)+"] x ["+b(S.startOffsetMillis)+"] ",1),e("div",gm,[C(e("input",{"onUpdate:modelValue":P[8]||(P[8]=n=>S.startOffsetTime=n),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[B,S.startOffsetTime]]),P[16]||(P[16]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),W.value>0&&W.value<3e4?(t(),s("div",bm,P[17]||(P[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):M("",!0),W.value>r.value&&r.value>0?(t(),s("div",ym,P[18]||(P[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):M("",!0),S.selected.vodSource&&W.value>=S.selected.vodSource.durationInMillis?(t(),s("div",$m,P[19]||(P[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):M("",!0),o(K).item.startOffsetMillis.$error?(t(),s("div",wm,[(t(!0),s(N,null,G(o(K).item.startOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):M("",!0)]),e("div",hm,[e("div",_m,[C(e("input",{"onUpdate:modelValue":P[9]||(P[9]=n=>S.endOffsetTime=n),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[B,S.endOffsetTime]]),P[20]||(P[20]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),r.value>0&&r.value<3e4?(t(),s("div",km,P[21]||(P[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):M("",!0),S.selected.vodSource&&r.value>S.selected.vodSource.durationInMillis?(t(),s("div",Sm,P[22]||(P[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):M("",!0),o(K).item.endOffsetMillis.$error?(t(),s("div",Tm,[(t(!0),s(N,null,G(o(K).item.endOffsetMillis.$errors,n=>(t(),s("div",{key:n.$uid},b(n.$message),1))),128))])):M("",!0)])])):M("",!0),S.selected.vodSource?(t(),s("div",Mm,[e("div",{class:"d-flex flex-row justify-content-between"},[P[24]||(P[24]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:d,class:"btn btn-outline-primary"},P[23]||(P[23]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Ad Break ")]))]),e("div",Cm,[e("table",Im,[P[28]||(P[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th",null,"Source Location / VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(N,null,G(S.item.adBreaks,(n,O)=>(t(),s("tr",null,[e("td",null,b(O+1),1),e("td",null,[C(e("input",{"onUpdate:modelValue":le=>n.offsetTime=le,onChange:le=>p(n),type:"time",step:"1",class:"form-control"},null,40,xm),[[B,n.offsetTime]]),n.offsetMillis>=S.selected.vodSource.durationInMillis?(t(),s("div",Pm,P[25]||(P[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):M("",!0)]),e("td",null,[C(e("input",{"onUpdate:modelValue":le=>n.durationTime=le,onChange:le=>f(n),type:"time",step:"1",class:"form-control"},null,40,Um),[[B,n.durationTime]])]),P[27]||(P[27]=e("td",{class:"small"},[e("span",{class:"fas fa-fw fa-circle-info"}),L(" Source Location and Vod source will be defined in Program Instance. "),e("br"),L(" Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")],-1)),e("td",null,[e("button",{onClick:le=>m(O),class:"btn btn-outline-warning"},P[26]||(P[26]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Vm)])]))),256))])])])])):M("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Am={class:"d-flex justify-content-end"},Dm={class:"ms-1"},Em={class:"input-group"},Hm={class:"table-responsive"},Bm={class:"table table-hover mb-0"},Lm=["textContent"],Nm={key:0,class:"fas fa-fw fa-check-circle text-success"},qm={class:"text-end"},Rm={class:"border-top"},zm="/api/v1/programTemplates/search",jm={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,security:_,filter:S,initializeFilter:w,getQuery:K,saveQuery:W,search:r,getRowNumber:c,setSelected:x,isSelected:a}=Ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${$==null?void 0:$.userId}/program-templates/search`,baseUrl:zm,filter:{updateUrl:!0}});return ne(async()=>{w(),await r()}),(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("m-pagination"),m=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(y)},{default:V(()=>[e("div",Am,[A(U,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Dm,[e("div",Em,[C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>o(S).query.criteria=p),onKeyup:l[1]||(l[1]=Ie(p=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=p=>o(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(m,{errorMessage:o(R)},{default:V(()=>[e("div",Hm,[e("table",Bm,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Total Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(S).items,(p,f)=>(t(),s("tr",{key:p.movieId},[e("td",{textContent:b(o(c)(f)),class:"text-center"},null,8,Lm),e("td",null,[A(U,{to:`${i.urlView}/${p.programTemplateId}`,class:"d-inline-block text-truncate"},{default:V(()=>[p.arn?(t(),s("span",Nm)):M("",!0),L(" "+b(p.name),1)]),_:2},1032,["to"])]),e("td",qm,b(o(J).moment.utc(p.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[L(b(p.sourceLocation.name)+" ",1),e("div",Rm,b(p.sourceLocation.httpConfigurationBaseUrl),1)]),e("td",null,b(p.vodSource.name),1)]))),128))]),_:1},512),[[he,o(S).items.length>0]])])]),A(d,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Fm={class:"d-flex flex-row justify-content-end"},Gm={key:0},Ym={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Wm={class:"nav-item",role:"presentation"},Km={class:"nav-item",role:"presentation"},Jm={class:"nav-item",role:"presentation"},Qm={class:"tab-content",id:"myTabContent"},Xm={class:"mt-2"},Zm={class:"row row-cols-1 row-cols-sm-3"},ef={class:"col"},tf={class:"form-floating mb-2"},sf={class:"col"},of={class:"form-floating mb-2"},af={class:"col"},lf={class:"form-floating mb-2"},nf={class:"row row-cols-1 row-cols-sm-3"},rf={class:"col"},df={class:"form-floating mb-2"},uf={class:"col"},cf={class:"form-floating mb-2"},mf={class:"col"},ff={class:"form-floating mb-2"},pf={class:"row row-cols-1 row-cols-sm-2"},vf={class:"col-sm-4"},gf={class:"form-floating mb-2"},bf={class:"col-sm-8"},yf={class:"form-floating mb-2"},$f={class:""},wf={class:"col"},hf={class:"form-floating mb-2"},_f={class:"row row-cols-1 row-cols-sm-2"},kf={class:"col"},Sf={class:"form-floating mb-2"},Tf={class:"col"},Mf={class:"form-floating mb-2"},Cf={class:"row row-cols-1 row-cols-sm-2"},If={class:"col"},xf={class:"form-floating mb-2"},Pf={class:"col"},Uf={class:"form-floating mb-2"},Vf={class:"row row-cols-1 row-cols-sm-2"},Of={class:"col"},Af={class:"form-floating mb-2"},Df={class:"col"},Ef={class:"form-floating mb-2"},Hf={class:"row row-cols-1 row-cols-sm-2"},Bf={class:"col"},Lf={class:"form-floating mb-2"},Nf={class:"col"},qf={class:"form-floating mb-2"},Rf={class:"mt-2"},zf={class:"table-responsive"},jf={class:"table table-hover mb-0"},Ff={class:"text-center"},Gf={class:"mt-2"},Yf={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null}),c=ae();ne(async()=>{await l(),c.value=z.getPageTab("programTemplate")||"information-tab"});const x=g=>{z.setPageTab("programTemplate",g),c.value=g},a=g=>g!==c.value?"":"active",j=g=>g!==c.value?"":"show active",l=async()=>{const g=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const d=`/api/v1/programTemplates/${u.id}/`;await J.get(d).then(m=>{g.item=m.data;const p=g.item;p.startOffsetTime=z.moment.utc(p.startOffsetMillis).format("HH:mm:ss"),p.endOffsetTime=z.moment.utc(p.endOffsetMillis).format("HH:mm:ss"),p.durationTime=z.moment.utc(p.durationInMillis).format("HH:mm:ss"),p.adBreaksDurationTime=z.moment.utc(p.adBreaksDurationInMillis).format("HH:mm:ss"),p.totalProgramTemplateDurationTime=z.moment.utc(p.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const f=p.vodSource.video,v=f.durationInMillis;f.durationInMillis=z.moment.utc(v).format("HH:mm:ss")})}catch(d){k.value=z.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{y.value=!1}},U=async()=>{await l()};return(g,d)=>{const m=Q("router-link"),p=Q("PageHeader"),f=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",Fm,[A(m,{to:`${i.urlEdit}/${i.id}/${o(w)()}`,class:"ms-2 btn btn-primary"},{default:V(()=>d[22]||(d[22]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:d[0]||(d[0]=v=>U()),class:"ms-2 btn btn-secondary"},d[23]||(d[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:d[1]||(d[1]=v=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},d[24]||(d[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(f,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",Gm,[e("div",null,[e("ul",Ym,[e("li",Wm,[e("button",{onClick:d[2]||(d[2]=v=>x("information-tab")),class:oe([a("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Km,[e("button",{onClick:d[3]||(d[3]=v=>x("adBreaks-tab")),class:oe([a("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",Jm,[e("button",{onClick:d[4]||(d[4]=v=>x("programs-tab")),class:oe([a("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Qm,[e("div",{class:oe([j("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Xm,[e("div",Zm,[e("div",ef,[e("div",tf,[C(e("input",{"onUpdate:modelValue":d[5]||(d[5]=v=>r.item.name=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.name]]),d[25]||(d[25]=e("label",{for:"name"},"Name",-1))])]),e("div",sf,[e("div",of,[C(e("input",{"onUpdate:modelValue":d[6]||(d[6]=v=>r.item.startOffsetTime=v),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[B,r.item.startOffsetTime]]),d[26]||(d[26]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",af,[e("div",lf,[C(e("input",{"onUpdate:modelValue":d[7]||(d[7]=v=>r.item.endOffsetTime=v),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[B,r.item.endOffsetTime]]),d[27]||(d[27]=e("label",{for:"endOffsetTime"},"End Offset",-1))])])]),e("div",nf,[e("div",rf,[e("div",df,[C(e("input",{"onUpdate:modelValue":d[8]||(d[8]=v=>r.item.durationTime=v),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[B,r.item.durationTime]]),d[28]||(d[28]=e("label",{for:"durationTime"},"Clip Duration",-1))])]),e("div",uf,[e("div",cf,[C(e("input",{"onUpdate:modelValue":d[9]||(d[9]=v=>r.item.adBreaksDurationTime=v),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[B,r.item.adBreaksDurationTime]]),d[29]||(d[29]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",mf,[e("div",ff,[C(e("input",{"onUpdate:modelValue":d[10]||(d[10]=v=>r.item.totalProgramTemplateDurationTime=v),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[B,r.item.totalProgramTemplateDurationTime]]),d[30]||(d[30]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),d[45]||(d[45]=e("hr",null,null,-1)),e("div",null,[d[33]||(d[33]=e("div",null,[e("h5",null,"Source Location")],-1)),e("div",pf,[e("div",vf,[e("div",gf,[C(e("input",{"onUpdate:modelValue":d[11]||(d[11]=v=>r.item.sourceLocation.name=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.sourceLocation.name]]),d[31]||(d[31]=e("label",{for:"name"},"Name",-1))])]),e("div",bf,[e("div",yf,[C(e("input",{"onUpdate:modelValue":d[12]||(d[12]=v=>r.item.sourceLocation.httpConfigurationBaseUrl=v),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[B,r.item.sourceLocation.httpConfigurationBaseUrl]]),d[32]||(d[32]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])]),d[46]||(d[46]=e("hr",null,null,-1)),e("div",null,[d[43]||(d[43]=e("div",null,[e("h5",null,"VOD Source")],-1)),e("div",$f,[e("div",wf,[e("div",hf,[C(e("input",{"onUpdate:modelValue":d[13]||(d[13]=v=>r.item.vodSource.name=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.name]]),d[34]||(d[34]=e("label",{for:"name"},"VOD Name",-1))])])]),d[44]||(d[44]=e("div",null,[e("h6",null,"Video")],-1)),e("div",_f,[e("div",kf,[e("div",Sf,[C(e("input",{"onUpdate:modelValue":d[14]||(d[14]=v=>r.item.vodSource.video.title=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.title]]),d[35]||(d[35]=e("label",{for:"name"},"Video Name",-1))])]),e("div",Tf,[e("div",Mf,[C(e("input",{"onUpdate:modelValue":d[15]||(d[15]=v=>r.item.vodSource.video.durationInMillis=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.durationInMillis]]),d[36]||(d[36]=e("label",{for:"name"},"Video Duration",-1))])])]),e("div",Cf,[e("div",If,[e("div",xf,[C(e("input",{"onUpdate:modelValue":d[16]||(d[16]=v=>r.item.vodSource.video.rawBaseUrl=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.rawBaseUrl]]),d[37]||(d[37]=e("label",{for:"name"},"Raw Base Url",-1))])]),e("div",Pf,[e("div",Uf,[C(e("input",{"onUpdate:modelValue":d[17]||(d[17]=v=>r.item.vodSource.video.rawPath=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.rawPath]]),d[38]||(d[38]=e("label",{for:"name"},"Raw Path",-1))])])]),e("div",Vf,[e("div",Of,[e("div",Af,[C(e("input",{"onUpdate:modelValue":d[18]||(d[18]=v=>r.item.vodSource.video.hlsBaseUrl=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.hlsBaseUrl]]),d[39]||(d[39]=e("label",{for:"name"},"HLS Base Url",-1))])]),e("div",Df,[e("div",Ef,[C(e("input",{"onUpdate:modelValue":d[19]||(d[19]=v=>r.item.vodSource.video.hlsPath=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.hlsPath]]),d[40]||(d[40]=e("label",{for:"name"},"HLS Path",-1))])])]),e("div",Hf,[e("div",Bf,[e("div",Lf,[C(e("input",{"onUpdate:modelValue":d[20]||(d[20]=v=>r.item.vodSource.video.dashBaseUrl=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.dashBaseUrl]]),d[41]||(d[41]=e("label",{for:"name"},"DASH Base Url",-1))])]),e("div",Nf,[e("div",qf,[C(e("input",{"onUpdate:modelValue":d[21]||(d[21]=v=>r.item.vodSource.video.dashPath=v),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.vodSource.video.dashPath]]),d[42]||(d[42]=e("label",{for:"name"},"DASH Path",-1))])])])])])],2),e("div",{class:oe([j("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Rf,[e("div",zf,[e("table",jf,[d[47]||(d[47]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.adBreaks,(v,F)=>(t(),s("tr",{key:v.programTemplateAdBreakId},[e("td",Ff,b(F+1),1),e("td",null,b(o(z).moment.utc(v.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(z).moment.utc(v.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[he,r.item.adBreaks.length>0]])])])])],2),e("div",{class:oe([j("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Gf,[e("pre",null,b(r.item.programs),1)])],2)])])])):M("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Wf={class:"d-flex justify-content-end"},Kf=["disabled"],Jf={class:"input-group"},Qf={class:"row row-cols-1 row-cols-sm-2 mt-3"},Xf={class:"col text-center mb-2"},Zf=["src"],ep={class:"col"},tp={class:"form-floating mb-2"},sp={key:0,class:"d-block invalid-feedback"},op={class:"form-floating mb-2"},ap={class:"row row-cols-sm-2"},lp={class:"col"},np={class:"form-floating mb-2"},rp={class:"col"},ip={class:"form-floating mb-2"},dp={class:"row row-cols-sm-2"},up={class:"col"},cp={class:"form-floating mb-2"},mp={class:"col"},fp={class:"form-floating mb-2"},pp={class:"col"},vp={class:"form-floating mb-2"},gp={class:"col"},bp={class:"form-floating mb-2"},Ye="YYYY-MM-DD HH:mm",yp={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"ARC AIO",pageTitle:"Add User"}),H=i,_=k.moment().local();_.format(Ye),_.add(24,"hours").format(Ye);const S=ae("a22de760-358d-4a0e-83ad-2624a5c11f73"),w=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),K={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},W=ye(K,w);ne(async()=>{});const r=async()=>{const x=w;if(!h.value)try{h.value=!0,x.item=null;const a=`/api/v1/users/get-from-entra-id/${S.value}`;await R.get(a).then(j=>{x.item=j.data})}catch(a){T.value=k.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{h.value=!1}},c=async()=>{const x=w;if(h.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{h.value=!0,T.value="",await R.post(`/api/v1/users/add-from-entra-id/${x.item.userId}`).then(j=>{E.success("Add User","User added",{onClose:async()=>{const l=`${H.urlView}/${j.data}`;await Y.push(l)}})})}catch(j){T.value=k.getErrorMessageAsHtml(j),window.scrollTo(0,0)}finally{h.value=!1}};return(x,a)=>{const j=Q("router-link"),l=Q("PageHeader"),U=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",Wf,[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:a[0]||(a[0]=g=>c()),class:"btn btn-primary"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kf),A(j,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:V(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(U,{errorMessage:o(T),vuelidate:o(W)},{default:V(()=>[e("div",null,[e("div",null,[e("div",Jf,[C(e("input",{"onUpdate:modelValue":a[1]||(a[1]=g=>S.value=g),onKeyup:a[2]||(a[2]=Ie(g=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[B,S.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:a[3]||(a[3]=g=>r())},a[14]||(a[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",Qf,[e("div",Xf,[e("img",{src:w.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,Zf)]),e("div",ep,[e("div",tp,[C(e("input",{"onUpdate:modelValue":a[4]||(a[4]=g=>w.item.userId=g),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[B,w.item.userId]]),a[15]||(a[15]=e("label",{for:"userId"},"User Id",-1)),o(W).item.userId.$error?(t(),s("div",sp,[(t(!0),s(N,null,G(o(W).item.userId.$errors,g=>(t(),s("div",{key:g.$uid},b(g.$message),1))),128))])):M("",!0)]),e("div",op,[C(e("input",{"onUpdate:modelValue":a[5]||(a[5]=g=>w.item.displayName=g),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[B,w.item.displayName]]),a[16]||(a[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",ap,[e("div",lp,[e("div",np,[C(e("input",{"onUpdate:modelValue":a[6]||(a[6]=g=>w.item.givenName=g),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[B,w.item.givenName]]),a[17]||(a[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",rp,[e("div",ip,[C(e("input",{"onUpdate:modelValue":a[7]||(a[7]=g=>w.item.surname=g),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[B,w.item.surname]]),a[18]||(a[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",dp,[e("div",up,[e("div",cp,[C(e("input",{"onUpdate:modelValue":a[8]||(a[8]=g=>w.item.email=g),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[B,w.item.email]]),a[19]||(a[19]=e("label",{for:"email"},"Email",-1))])]),e("div",mp,[e("div",fp,[C(e("input",{"onUpdate:modelValue":a[9]||(a[9]=g=>w.item.mobilePhone=g),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[B,w.item.mobilePhone]]),a[20]||(a[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",pp,[e("div",vp,[C(e("input",{"onUpdate:modelValue":a[10]||(a[10]=g=>w.item.principalName=g),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[B,w.item.principalName]]),a[21]||(a[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",gp,[e("div",bp,[C(e("input",{"onUpdate:modelValue":a[11]||(a[11]=g=>w.item.jobTitle=g),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[B,w.item.jobTitle]]),a[22]||(a[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},$p={components:{Page:Ee},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function wp(i,u,$,h,y,q){const T=Q("Page");return t(),ie(T,{id:$.id,urlView:$.urlView},null,8,["id","urlView"])}const hp=ke($p,[["render",wp]]),_p={class:"d-flex justify-content-end"},kp={key:0},Sp={class:"ms-1"},Tp={class:"input-group"},Mp={class:"table-responsive"},Cp={class:"table table-hover mb-0"},Ip=["textContent"],xp="/api/v1/channels/search",Pp={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(i){be("$config");const $=ve().user,{appTitle:h,pageTitle:y,busy:q,infoMessage:T,warningMessage:Y,errorMessage:R,router:k,axios:E,utils:J,toasts:z,close:H,security:_,filter:S,initializeFilter:w,getQuery:K,saveQuery:W,search:r,getRowNumber:c,setSelected:x,isSelected:a}=Ve({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${$==null?void 0:$.userId}/Channels/search`,baseUrl:xp,filter:{updateUrl:!0}});return ne(async()=>{w(),await r()}),(j,l)=>{const U=Q("router-link"),g=Q("PageHeader"),d=Q("m-pagination"),m=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(g,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(y)},{default:V(()=>[e("div",_p,[o(_).isAdministrator?(t(),s("div",kp,[A(U,{to:i.urlAdd,class:"btn btn-primary"},{default:V(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):M("",!0),e("div",Sp,[e("div",Tp,[C(e("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>o(S).query.criteria=p),onKeyup:l[1]||(l[1]=Ie(p=>o(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[B,o(S).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=p=>o(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),A(m,{errorMessage:o(R)},{default:V(()=>[e("div",Mp,[e("table",Cp,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(o(S).items,(p,f)=>(t(),s("tr",{key:p.channelId},[e("td",{textContent:b(o(c)(f)),class:"text-center"},null,8,Ip),e("td",null,[A(U,{to:`${i.urlView}/${p.channelId}`,class:"d-inline-block text-truncate"},{default:V(()=>[L(b(p.name),1)]),_:2},1032,["to"])]),e("td",null,b(p.playbackMode),1),e("td",null,b(p.tier),1)]))),128))]),_:1},512),[[he,o(S).items.length>0]])])]),A(d,{filter:o(S),search:o(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Up=["id"],Vp={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Op={class:"modal-content"},Ap={class:"modal-header bg-primary text-white"},Dp={class:"modal-title",id:"exampleModalLabel"},Ep={class:"modal-body"},Hp={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Bp=["innerHTML"],Lp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Np={class:"container"},qp={class:"col"},Rp={class:"form-floating mb-2"},zp=["value"],jp={class:"row row-cols-1 row-cols-sm-2"},Fp={class:"col"},Gp={class:"form-floating mb-2"},Yp={key:0,class:"d-block invalid-feedback"},Wp={class:"col"},Kp={class:"form-floating mb-2"},Jp={key:0,class:"d-block invalid-feedback"},Qp={key:0},Xp={class:"row row-cols-1 row-cols-sm-3"},Zp={class:"col"},ev={class:"form-floating mb-2"},tv={class:"col"},sv={class:"form-floating mb-2"},ov={class:"col"},av={class:"form-floating mb-2"},lv={class:"row row-cols-1 row-cols-sm-2"},nv={class:"col"},rv={class:"form-floating mb-2"},iv={class:"col"},dv={class:"form-floating mb-2"},uv={class:"row row-cols-1 row-cols-sm-2"},cv={class:"col"},mv={class:"form-floating mb-2"},fv={class:"col"},pv={class:"form-floating mb-2"},vv={key:1},gv={class:"table-responsive border mt-1"},bv={class:"table mb-0"},yv=["onUpdate:modelValue"],$v=["value"],wv={class:"modal-footer"},hv=["disabled"],_v={__name:"_addProgramFromTemplate",emits:["onClose"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),K=$,W=ae(),r=ae("modalAddProgramFromTemplate"),c=ue({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},a=ye(x,c);ne(async()=>{a.value.$reset()});const j=async(D,n,O)=>{W.value=D;const le=c;Y.value.clear(),E.value="";const X=H.moment(O),_e=X.format("YYYY-MM-DD HH:mm"),Me=X.format("YYYYMMDD_HHmm")+"_PRG_";le.eventId=n,le.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},le.selected={programTemplate:null},le.item={programTemplateId:null,name:Me,dateScheduledStart:_e,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await g(),await d(),a.value.$reset();var Ce=document.getElementById(r.value),Ae=$e.getOrCreateInstance(Ce);Ae.show()},l=async D=>{const n=c.selected.channel.programs;if(D&&n.find(Ae=>Ae.name===c.item.name)){alert(`Program name = [${c.item.name}] already exists.`);return}if(!D){K("onClose",{eventId:c.eventId},D);var _e=document.getElementById(r.value),Me=$e.getOrCreateInstance(_e);Me.hide();return}const O=c,le=H.moment(O.item.dateScheduledStart).utc().format(),X=H.moment(O.item.dateScheduledStart).add(O.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),fe={eventId:O.eventId,programTemplateId:O.selected.programTemplate.programTemplateId,channelId:O.selected.channel.channelId,name:O.item.name,dateScheduledStart:le,dateScheduledEnd:X,adBreaks:O.selected.programTemplate.adBreaks.map(Ce=>({sourceLocationId:O.selected.programTemplate.sourceLocationId,vodSourceId:Ce.vodSourceId,offsetMillis:Ce.offsetMillis,durationInMillis:Ce.durationInMillis}))};K("onClose",fe,D);var _e=document.getElementById(r.value),Me=$e.getOrCreateInstance(_e);Me.hide()},U=async()=>{await l(!0)},g=async()=>{try{const D=`/api/v1/channels/${W.value}/`;await z.get(D).then(n=>{c.selected.channel=n.data})}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}},d=async()=>{await v(),await se(),await m()},m=async()=>{try{const D=`/api/v1/programTemplates/lookup/by-channel/${W.value}`;await z.get(D).then(n=>{c.lookups.programTemplates=n.data})}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}},p=async()=>{await f(c.item.programTemplateId)},f=async D=>{try{const n=`/api/v1/programTemplates/${D}/`;await z.get(n).then(X=>{c.selected.programTemplate=X.data;const fe=c.selected.programTemplate;fe.startOffsetTime=H.moment.utc(fe.startOffsetMillis).format("HH:mm:ss"),fe.endOffsetTime=H.moment.utc(fe.endOffsetMillis).format("HH:mm:ss"),fe.durationTime=H.moment.utc(fe.durationInMillis).format("HH:mm:ss"),fe.adBreaksDurationTime=H.moment.utc(fe.adBreaksDurationInMillis).format("HH:mm:ss"),fe.totalProgramTemplateDurationTime=H.moment.utc(fe.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),fe.adBreaks.forEach(_e=>{_e.vodSourceId=null})});const O=c,le=O.selected.channel.outputs[0].outputType;await P(O.selected.programTemplate.sourceLocationId,le)}catch(n){E.value=H.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},v=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.sourceLocations=n.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await F(c.item.sourceLocationId)}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}},F=async D=>{try{let n=`/api/v1/vodSources/lookup/source-location/${D}`;await z.get(n).then(O=>{c.lookups.vodSources=O.data})}catch(n){E.value=H.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},P=async(D,n)=>{try{let O=`/api/v1/vodsources/lookup/source-location/${D}/output-type/${n}`;await z.get(O).then(le=>{c.lookups.adBreakVodSources=le.data})}catch(O){E.value=H.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},se=async()=>{try{const D=`/api/v1/programs/lookup/?channelId=${W.value}`;await z.get(D).then(n=>{c.lookups.channelPrograms=n.data;const O=c.lookups.channelPrograms.length})}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}};return u({open:j,close:l}),(D,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Vp,[e("div",Op,[e("div",Ap,[e("h5",Dp,b(o(h))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=O=>l(!1)),"aria-label":"Close"})]),e("div",Ep,[o(E)?(t(),s("div",Hp,[n[14]||(n[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Bp)])):M("",!0),o(Y).size>0?(t(),s("div",Lp,[n[15]||(n[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),O=>(t(),s("li",null,b(O),1))),256))])])):M("",!0),e("div",Np,[e("div",qp,[e("div",Rp,[C(e("select",{"onUpdate:modelValue":n[1]||(n[1]=O=>c.item.programTemplateId=O),class:"form-select",onChange:n[2]||(n[2]=O=>p()),id:"sourceLocationId"},[(t(!0),s(N,null,G(c.lookups.programTemplates,O=>(t(),s("option",{value:O.id}," ["+b(o(H).moment.utc(O.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+b(O.name),9,zp))),256))],544),[[pe,c.item.programTemplateId]]),n[16]||(n[16]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",jp,[e("div",Fp,[e("div",Gp,[C(e("input",{"onUpdate:modelValue":n[3]||(n[3]=O=>c.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,c.item.name]]),n[17]||(n[17]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",Yp,[(t(!0),s(N,null,G(o(a).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])]),e("div",Wp,[e("div",Kp,[C(e("input",{"onUpdate:modelValue":n[4]||(n[4]=O=>c.item.dateScheduledStart=O),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[B,c.item.dateScheduledStart]]),n[18]||(n[18]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(a).item.dateScheduledStart.$error?(t(),s("div",Jp,[(t(!0),s(N,null,G(o(a).item.dateScheduledStart.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])])]),c.selected.programTemplate?(t(),s("div",Qp,[e("div",Xp,[e("div",Zp,[e("div",ev,[C(e("input",{"onUpdate:modelValue":n[5]||(n[5]=O=>c.selected.programTemplate.startOffsetTime=O),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[B,c.selected.programTemplate.startOffsetTime]]),n[19]||(n[19]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",tv,[e("div",sv,[C(e("input",{"onUpdate:modelValue":n[6]||(n[6]=O=>c.selected.programTemplate.endOffsetTime=O),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[B,c.selected.programTemplate.endOffsetTime]]),n[20]||(n[20]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",ov,[e("div",av,[C(e("input",{"onUpdate:modelValue":n[7]||(n[7]=O=>c.selected.programTemplate.durationTime=O),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[B,c.selected.programTemplate.durationTime]]),n[21]||(n[21]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",lv,[e("div",nv,[e("div",rv,[C(e("input",{"onUpdate:modelValue":n[8]||(n[8]=O=>c.selected.programTemplate.adBreaksDurationTime=O),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[B,c.selected.programTemplate.adBreaksDurationTime]]),n[22]||(n[22]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",iv,[e("div",dv,[C(e("input",{"onUpdate:modelValue":n[9]||(n[9]=O=>c.selected.programTemplate.totalProgramTemplateDurationTime=O),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[B,c.selected.programTemplate.totalProgramTemplateDurationTime]]),n[23]||(n[23]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",uv,[e("div",cv,[e("div",mv,[C(e("input",{"onUpdate:modelValue":n[10]||(n[10]=O=>c.selected.programTemplate.sourceLocation.name=O),id:"name",class:"form-control",disabled:""},null,512),[[B,c.selected.programTemplate.sourceLocation.name]]),n[24]||(n[24]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",fv,[e("div",pv,[C(e("input",{"onUpdate:modelValue":n[11]||(n[11]=O=>c.selected.programTemplate.vodSource.name=O),id:"name",class:"form-control",disabled:""},null,512),[[B,c.selected.programTemplate.vodSource.name]]),n[25]||(n[25]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):M("",!0),n[28]||(n[28]=e("hr",null,null,-1)),c.selected.programTemplate?(t(),s("div",vv,[n[27]||(n[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",gv,[e("table",bv,[n[26]||(n[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(N,null,G(c.selected.programTemplate.adBreaks,(O,le)=>(t(),s("tr",null,[e("td",null,b(le+1),1),e("td",null,b(o(H).moment.utc(O.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(H).moment.utc(O.durationInMillis).format("HH:mm:ss")),1),e("td",null,[C(e("select",{"onUpdate:modelValue":X=>O.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(N,null,G(c.lookups.adBreakVodSources,X=>(t(),s(N,null,[X.durationInMillis===O.durationInMillis?(t(),s("option",{key:0,value:X.id}," ["+b(o(H).moment.utc(X.durationInMillis).format("HH:mm:ss"))+"] "+b(X.name),9,$v)):M("",!0)],64))),256))],8,yv),[[pe,O.vodSourceId]])])]))),256))])])])])):M("",!0)])]),e("div",wv,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:n[12]||(n[12]=O=>U()),class:"btn btn-primary",type:"button"},n[29]||(n[29]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,hv),e("button",{onClick:n[13]||(n[13]=O=>l(!1)),class:"btn btn-secondary ms-1"},n[30]||(n[30]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Up))}},kv=["id"],Sv={class:"modal-dialog modal-xl modal-fullscreen-lg-down"},Tv={class:"modal-content"},Mv={class:"modal-header bg-primary text-white"},Cv={class:"modal-title",id:"exampleModalLabel"},Iv={class:"modal-body"},xv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Pv=["innerHTML"],Uv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vv={key:2,class:"container"},Ov={class:"row row-cols-1 row-cols-sm-3"},Av={class:"col"},Dv={class:"form-floating mb-2"},Ev={id:"name",class:"form-control",placeholder:"Name"},Hv={key:0},Bv={key:0,class:"d-block invalid-feedback"},Lv={class:"col"},Nv={class:"form-floating mb-2"},qv={key:0,class:"d-block invalid-feedback"},Rv={class:"col"},zv={class:"form-floating mb-2"},jv={key:0,class:"d-block invalid-feedback"},Fv={key:0},Gv={class:"row row-cols-1 row-cols-sm-3"},Yv={class:"col"},Wv={class:"form-floating mb-2"},Kv={class:"col"},Jv={class:"form-floating mb-2"},Qv={class:"col"},Xv={class:"form-floating mb-2"},Zv={class:"row row-cols-1 row-cols-sm-2"},eg={class:"col"},tg={class:"form-floating mb-2"},sg={class:"col"},og={class:"form-floating mb-2"},ag={class:"row row-cols-1 row-cols-sm-2"},lg={key:0,class:"col"},ng={class:"form-floating mb-2"},rg={key:1,class:"col"},ig={class:"form-floating mb-2"},dg={key:1},ug={class:"table-responsive border mt-1"},cg={class:"table mb-0"},mg=["onUpdate:modelValue"],fg=["value"],pg={class:"modal-footer"},vg=["disabled"],at={__name:"_editProgram",emits:["onClose"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),K=$,W=ae(),r=ae("modalEditProgram"),c=ue({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},a=ye(x,c);ne(async()=>{a.value.$reset()});const j=async(p,f)=>{W.value=p;const v=c;if(Y.value.clear(),E.value="",v.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},v.item=null,await g(),f){const n=H.moment(f).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=n}await d(),a.value.$reset();var F=document.getElementById(r.value),P=$e.getOrCreateInstance(F);P.show()},l=async p=>{if(!p){K("onClose",p);var P=document.getElementById(r.value),se=$e.getOrCreateInstance(P);se.hide();return}const f=c,v=H.moment(f.item.dateScheduledStart).utc().format(),F={programId:W.value,name:f.item.name,dateScheduledStart:v,adBreaks:f.item.adBreaks.map(D=>({sourceLocationId:f.item.sourceLocationId,vodSourceId:D.vodSourceId,offsetMillis:D.offsetMillis,durationInMillis:D.durationInMillis}))};try{await z.put("/api/v1/programs/",F).then(n=>{_.success("Edit Program","Program was edited.")})}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0);return}finally{}K("onClose",p);var P=document.getElementById(r.value),se=$e.getOrCreateInstance(P);se.hide()},U=async()=>{await l(!0)},g=async()=>{try{const p=`/api/v1/programs/${W.value}/`;await z.get(p).then(F=>{c.item=F.data;const P=c.item,n=H.moment(P.dateScheduledStart).format("YYYY-MM-DD HH:mm");c.item.dateScheduledStart=n,P.startOffsetTime=H.moment.utc(P.startOffsetMillis).format("HH:mm:ss"),P.endOffsetTime=H.moment.utc(P.endOffsetMillis).format("HH:mm:ss"),P.durationTime=H.moment.utc(P.durationInMillis).format("HH:mm:ss"),P.adBreaksDurationTime=H.moment.utc(P.adBreaksDurationInMillis).format("HH:mm:ss"),P.totalProgramTemplateDurationTime=H.moment.utc(P.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const f=c,v=f.item.channel.outputs[0].outputType;await m(f.item.sourceLocationId,v)}catch(p){E.value=H.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},d=async()=>{},m=async(p,f)=>{try{let v=`/api/v1/vodsources/lookup/source-location/${p}/output-type/${f}`;await z.get(v).then(F=>{c.lookups.adBreakVodSources=F.data})}catch(v){E.value=H.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{}};return u({open:j,close:l}),(p,f)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Sv,[e("div",Tv,[e("div",Mv,[e("h5",Cv,b(o(h))+" - "+b(o(y)),1),e("button",{type:"button",class:"btn-close",onClick:f[0]||(f[0]=v=>l(!1)),"aria-label":"Close"})]),e("div",Iv,[o(E)?(t(),s("div",xv,[f[12]||(f[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Pv)])):M("",!0),o(Y).size>0?(t(),s("div",Uv,[f[13]||(f[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),v=>(t(),s("li",null,b(v),1))),256))])])):M("",!0),c.item?(t(),s("div",Vv,[e("div",Ov,[e("div",Av,[e("div",Dv,[e("div",Ev,[c.item.relativeProgram?(t(),s("span",Hv,b(c.item.relativeProgram.name)+" - "+b(o(H).moment(c.item.relativeProgram.scheduledDateStart).format("DD/MM/YYYY HH:mm a")),1)):M("",!0)]),f[14]||(f[14]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(a).item.name.$error?(t(),s("div",Bv,[(t(!0),s(N,null,G(o(a).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):M("",!0)])]),e("div",Lv,[e("div",Nv,[C(e("input",{"onUpdate:modelValue":f[1]||(f[1]=v=>c.item.name=v),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,c.item.name]]),f[15]||(f[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",qv,[(t(!0),s(N,null,G(o(a).item.name.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):M("",!0)])]),e("div",Rv,[e("div",zv,[C(e("input",{"onUpdate:modelValue":f[2]||(f[2]=v=>c.item.dateScheduledStart=v),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[B,c.item.dateScheduledStart]]),f[16]||(f[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(a).item.dateScheduledStart.$error?(t(),s("div",jv,[(t(!0),s(N,null,G(o(a).item.dateScheduledStart.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):M("",!0)])])]),c.item?(t(),s("div",Fv,[e("div",Gv,[e("div",Yv,[e("div",Wv,[C(e("input",{"onUpdate:modelValue":f[3]||(f[3]=v=>c.item.startOffsetTime=v),type:"text",class:"form-control",id:"startOffsetTime",disabled:""},null,512),[[B,c.item.startOffsetTime]]),f[17]||(f[17]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Kv,[e("div",Jv,[C(e("input",{"onUpdate:modelValue":f[4]||(f[4]=v=>c.item.endOffsetTime=v),type:"text",class:"form-control",id:"endOffsetTime",disabled:""},null,512),[[B,c.item.endOffsetTime]]),f[18]||(f[18]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Qv,[e("div",Xv,[C(e("input",{"onUpdate:modelValue":f[5]||(f[5]=v=>c.item.durationTime=v),type:"text",class:"form-control",id:"durationTime",disabled:""},null,512),[[B,c.item.durationTime]]),f[19]||(f[19]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Zv,[e("div",eg,[e("div",tg,[C(e("input",{"onUpdate:modelValue":f[6]||(f[6]=v=>c.item.adBreaksDurationTime=v),type:"text",class:"form-control",id:"adBreaksDurationTime",disabled:""},null,512),[[B,c.item.adBreaksDurationTime]]),f[20]||(f[20]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",sg,[e("div",og,[C(e("input",{"onUpdate:modelValue":f[7]||(f[7]=v=>c.item.totalProgramTemplateDurationTime=v),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",disabled:""},null,512),[[B,c.item.totalProgramTemplateDurationTime]]),f[21]||(f[21]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",ag,[c.item.sourceLocation?(t(),s("div",lg,[e("div",ng,[C(e("input",{"onUpdate:modelValue":f[8]||(f[8]=v=>c.item.sourceLocation.name=v),id:"name",class:"form-control",disabled:""},null,512),[[B,c.item.sourceLocation.name]]),f[22]||(f[22]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):M("",!0),c.item.vodSource?(t(),s("div",rg,[e("div",ig,[C(e("input",{"onUpdate:modelValue":f[9]||(f[9]=v=>c.item.vodSource.name=v),id:"name",class:"form-control",disabled:""},null,512),[[B,c.item.vodSource.name]]),f[23]||(f[23]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):M("",!0)])])):M("",!0),f[27]||(f[27]=e("hr",null,null,-1)),c.item?(t(),s("div",dg,[f[26]||(f[26]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break "),L(" fi ")])],-1)),e("div",ug,[f[25]||(f[25]=L(" mt ")),e("table",cg,[f[24]||(f[24]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(N,null,G(c.item.adBreaks,(v,F)=>(t(),s("tr",null,[e("td",null,b(F+1),1),e("td",null,b(o(H).moment.utc(v.offsetMillis).format("HH:mm:ss")),1),e("td",null,b(o(H).moment.utc(v.durationInMillis).format("HH:mm:ss")),1),e("td",null,[C(e("select",{"onUpdate:modelValue":P=>v.vodSourceId=P,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(N,null,G(c.lookups.adBreakVodSources,P=>(t(),s(N,null,[P.durationInMillis===v.durationInMillis?(t(),s("option",{key:0,value:P.id}," ["+b(o(H).moment.utc(P.durationInMillis).format("HH:mm:ss"))+"] "+b(P.name),9,fg)):M("",!0)],64))),256))],8,mg),[[pe,v.vodSourceId]])])]))),256))])])])])):M("",!0)])):M("",!0)]),e("div",pg,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:f[10]||(f[10]=v=>U()),class:"btn btn-primary",type:"button"},f[28]||(f[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vg),e("button",{onClick:f[11]||(f[11]=v=>l(!1)),class:"btn btn-secondary ms-1"},f[29]||(f[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,kv))}},gg={class:"d-flex justify-content-end"},bg={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(i){const{appTitle:u,pageTitle:$,busy:h,infoMessage:y,warningMessage:q,errorMessage:T,router:Y,axios:R,utils:k,toasts:E,close:J,security:z}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),H=i,_=ae(null),S=ae(null),w=ae(null),K={viewType:"WorkWeek",cellDuration:60,startDate:Ue.DayPilot.Date.today(),onTimeRangeSelected:d=>{var m=d.control;const p={start:d.start,end:d.end,id:Ue.DayPilot.guid(),text:d.start+"-"+d.end,tags:{type:"new"}};m.events.add(p);var f=m.events.find(p.id);j(f)},onBeforeEventRender:d=>{if(d.data.barColor="green",!!d.data.tags)switch(d.data.tags.type){case"new":d.data.barColor="yellow";break;case"business":d.data.barColor="#3498db";break;case"personal":d.data.barColor="#2ecc71";break;case"vacation":d.data.barColor="#f1c40f";break;default:d.data.barColor="blue";break}},eventDeleteHandling:"Disabled",onEventMoved:d=>{const m=d.newStart.value,p=d.e.id();g(p,m)},onEventResized:()=>{console.log("Event resized")},onEventClicked:async d=>{var m=d.e.id();g(m)}},W=ae([]),r=()=>{_.value.control.update({events:W.value})},c=ue({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});ne(async()=>{await x()});const x=async()=>{await a(),await r()},a=async()=>{const d=c;if(!h.value)try{h.value=!0,T.value="";const m=`/api/v1/channels/${H.id}/`;await R.get(m).then(p=>{d.item=p.data;const f=d.item.outputs,v=d.item.programs.map(F=>({start:k.moment(F.dateScheduledStart).utc(!0).format(),end:k.moment(F.dateScheduledEnd).utc(!0).format(),id:F.programId,text:F.name}));W.value=v})}catch(m){T.value=k.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{h.value=!1}},j=d=>{S.value.open(H.id,d.id(),d.start().value)},l=(d,m)=>{var p=_.value,f=p.control.events.find(d.eventId);if(!m&&f){_.value.control.events.remove(f);return}p.control.events.find(n=>n.text()==d.name)&&(alert("Program already exists in this channel. Removing in the calendar."),_.value.control.events.remove(f));const F=k.moment(d.dateScheduledStart).utc(!0).format(),P=k.moment(d.dateScheduledEnd).utc(!0).format(),se=new Ue.DayPilot.Date(F),D=new Ue.DayPilot.Date(P);f.text(d.name),f.start(new Ue.DayPilot.Date(se)),f.end(new Ue.DayPilot.Date(D)),f.data.tags.program=d,f.commit(),_.value.control.update()},U=async()=>{if(!h.value){try{h.value=!0,T.value="",W.value.filter(f=>f.tags&&f.tags.type==="new").map(f=>f.tags.program).forEach(async f=>{await R.post("/api/v1/programs/from-template/",f).then(v=>{E.success("Add New Program",`Program [${f.name}] was added to this channel.`)},v=>{const F=k.getErrorMessageAsHtml(v);alert(F)})})}catch(d){const m=k.getErrorMessageAsHtml(d);alert(m),window.scrollTo(0,0)}finally{h.value=!1}await x()}},g=(d,m)=>{w.value.open(d,m)};return(d,m)=>{const p=Q("router-link"),f=Q("PageHeader"),v=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(f,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o($),"header-break":"row row-cols-2"},{default:V(()=>[e("div",gg,[e("button",{onClick:m[0]||(m[0]=F=>U()),class:"btn btn-primary"},m[2]||(m[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)])),e("button",{onClick:m[1]||(m[1]=F=>x()),class:"btn btn-secondary ms-1"},m[3]||(m[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),A(p,{to:`${i.urlView}/${i.id}`,class:"btn btn-secondary ms-2"},{default:V(()=>m[4]||(m[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),A(v,{errorMessage:o(T),vuelidate:d.v$},{default:V(()=>[e("div",null,[A(o(Ue.DayPilotCalendar),{id:"dp",config:K,ref_key:"calendarRef",ref:_},null,512),A(_v,{ref_key:"modalAddProgram",ref:S,onOnClose:l},null,512),A(at,{ref_key:"modalEditProgram",ref:w,onOnClose:x},null,512)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yg=["id"],$g={class:"modal-dialog modal-xl modal-fullscreen-md-down"},wg={class:"modal-content"},hg={class:"modal-header bg-primary text-white"},_g={class:"modal-title",id:"exampleModalLabel"},kg={class:"modal-body"},Sg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Tg=["innerHTML"],Mg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Cg={class:"container"},Ig={class:"row row-cols-1 row-cols-sm-3"},xg={class:"col"},Pg={class:"form-floating mb-2"},Ug=["disabled"],Vg=["value"],Og={class:"col"},Ag={class:"form-floating mb-2"},Dg={key:0,class:"d-block invalid-feedback"},Eg={class:"col"},Hg={class:"form-floating mb-2"},Bg={key:0,class:"d-block invalid-feedback"},Lg={class:"row row-cols-sm-2"},Ng={class:"col"},qg={class:"form-floating mb-2"},Rg=["value"],zg={key:0,class:"d-block invalid-feedback"},jg={class:"col"},Fg={class:"form-floating mb-2"},Gg=["value"],Yg={key:0,class:"d-block invalid-feedback"},Wg={class:"col"},Kg={class:"input-group mb-1"},Jg={class:"form-floating"},Qg={key:0,class:"input-group-text"},Xg={key:0},Zg={key:1},e1={key:2},t1={key:3,class:"d-block invalid-feedback"},s1={class:"col"},o1={class:"input-group mb-1"},a1={class:"form-floating"},l1={key:0,class:"input-group-text"},n1={key:0},r1={key:1},i1={key:2,class:"d-block invalid-feedback"},d1={class:"table-responsive border mt-1"},u1={class:"table"},c1={class:"input-group mb-1"},m1=["onUpdate:modelValue"],f1={key:0,class:"input-group-text"},p1=["onUpdate:modelValue"],v1=["value"],g1=["onUpdate:modelValue"],b1=["value"],y1=["onClick"],$1={class:"modal-footer"},w1=["disabled"],h1={__name:"_addProgram",emits:["refresh"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),K=$,W=ae(),r=ae("modalAddProgram"),c=ue({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Te(0),$autoDirty:!0,$lazy:!0}}},a=ye(x,c);ne(async()=>{a.value.$reset()});const j=async D=>{W.value=D;const n=c;Y.value.clear(),E.value="";const O=H.moment().local().add(2,"m"),X=O.format("YYYY-MM-DD HH:mm"),fe=O.format("YYYY_MM_DD")+"_PROGRAM_";n.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},n.item={name:fe,relativeProgramId:null,dateScheduledStart:X,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await g(),a.value.$reset();var _e=document.getElementById(r.value),Me=$e.getOrCreateInstance(_e);Me.show()},l=async()=>{var D=document.getElementById(r.value),n=$e.getOrCreateInstance(D);n.hide(),K("refresh")},U=async()=>{const D=c;if(q.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{q.value=!0,E.value="";const le=D.item;delete le.vodSource,le.channelId=W.value;var O=le.dateScheduledStart;le.dateScheduledStart=H.moment(O).utc().format(),await z.post("/api/v1/programs/",le).then(X=>{_.success("Add Program","Program added to Channel",{async onClose(){}})}),await l()}catch(le){E.value=H.getErrorMessageAsHtml(le),window.scrollTo(0,0)}finally{q.value=!1}},g=async()=>{await d(),await p(),await v()},d=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.sourceLocations=n.data,c.lookups.sourceLocations.length===1&&(c.item.sourceLocationId=c.lookups.sourceLocations[0].id)}),c.item.sourceLocationId&&await m(c.item.sourceLocationId)}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}},m=async D=>{try{let n=`/api/v1/vodSources/lookup/source-location/${D}`;await z.get(n).then(O=>{c.lookups.vodSources=O.data})}catch(n){E.value=H.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},p=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(n=>{c.lookups.adBreakSourceLocations=n.data})}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}},f=async D=>{try{let n=`/api/v1/vodSources/lookup/source-location/${D}`;await z.get(n).then(O=>{c.lookups.adBreakVodSources=O.data})}catch(n){E.value=H.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},v=async()=>{try{const D=`/api/v1/programs/lookup/?channelId=${W.value}`;await z.get(D).then(n=>{if(c.lookups.channelPrograms=n.data,c.lookups.channelPrograms.length===1){const le=c.lookups.channelPrograms[0];c.item.relativeProgramId=le.id}})}catch(D){E.value=H.getErrorMessageAsHtml(D),window.scrollTo(0,0)}finally{}},F=()=>{const D={offsetMillis:0,sourceLocationId:null,vodSourceId:null},n=c.item.adBreaks.length;if(n>0){const O=c.item.adBreaks[n-1];D.offsetMillis=O.offsetMillis+1e4}c.item.adBreaks.push(D)},P=D=>{c.item.adBreaks.splice(D,1)},se=()=>{const D=c.item.vodSource;c.item.vodSourceId=D.id};return u({open:j,close:l}),(D,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",$g,[e("div",wg,[e("div",hg,[e("h5",_g,b(o(h))+" - "+b(o(y)),1),n[11]||(n[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",kg,[o(E)?(t(),s("div",Sg,[n[12]||(n[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Tg)])):M("",!0),o(Y).size>0?(t(),s("div",Mg,[n[13]||(n[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),O=>(t(),s("li",null,b(O),1))),256))])])):M("",!0),e("div",Cg,[e("div",Ig,[e("div",xg,[e("div",Pg,[C(e("select",{"onUpdate:modelValue":n[0]||(n[0]=O=>c.item.relativeProgramId=O),class:"form-select",id:"sourceLocationId",disabled:c.lookups.channelPrograms.length<=0},[(t(!0),s(N,null,G(c.lookups.channelPrograms,O=>(t(),s("option",{value:O.id},b(O.name),9,Vg))),256))],8,Ug),[[pe,c.item.relativeProgramId]]),n[14]||(n[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",Og,[e("div",Ag,[C(e("input",{"onUpdate:modelValue":n[1]||(n[1]=O=>c.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,c.item.name]]),n[15]||(n[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",Dg,[(t(!0),s(N,null,G(o(a).item.name.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])]),e("div",Eg,[e("div",Hg,[C(e("input",{"onUpdate:modelValue":n[2]||(n[2]=O=>c.item.dateScheduledStart=O),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[B,c.item.dateScheduledStart]]),n[16]||(n[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(a).item.dateScheduledStart.$error?(t(),s("div",Bg,[(t(!0),s(N,null,G(o(a).item.dateScheduledStart.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])])]),e("div",Lg,[e("div",Ng,[e("div",qg,[C(e("select",{"onUpdate:modelValue":n[3]||(n[3]=O=>c.item.sourceLocationId=O),onChange:n[4]||(n[4]=O=>m(c.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(N,null,G(c.lookups.sourceLocations,O=>(t(),s("option",{value:O.id},b(O.name),9,Rg))),256))],544),[[pe,c.item.sourceLocationId]]),n[17]||(n[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(a).item.sourceLocationId.$error?(t(),s("div",zg,[(t(!0),s(N,null,G(o(a).item.sourceLocationId.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])]),e("div",jg,[e("div",Fg,[C(e("select",{"onUpdate:modelValue":n[5]||(n[5]=O=>c.item.vodSource=O),onChange:n[6]||(n[6]=O=>se()),class:"form-select",id:"vodSourceId"},[(t(!0),s(N,null,G(c.lookups.vodSources,O=>(t(),s("option",{value:O},b(O.name),9,Gg))),256))],544),[[pe,c.item.vodSource]]),n[18]||(n[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(a).item.vodSourceId.$error?(t(),s("div",Yg,[(t(!0),s(N,null,G(o(a).item.vodSourceId.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])]),e("div",Wg,[e("div",Kg,[e("div",Jg,[C(e("input",{"onUpdate:modelValue":n[7]||(n[7]=O=>c.item.startOffsetMillis=O),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[B,c.item.startOffsetMillis]]),n[19]||(n[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),c.item.startOffsetMillis>0?(t(),s("span",Qg,b(o(H).moment.utc(c.item.startOffsetMillis).format("HH:mm:ss")),1)):M("",!0)]),c.item.startOffsetMillis>0&&c.item.startOffsetMillis<3e4?(t(),s("div",Xg,n[20]||(n[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):M("",!0),c.item.startOffsetMillis>c.item.endOffsetMillis&&c.item.endOffsetMillis>0?(t(),s("div",Zg,n[21]||(n[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):M("",!0),c.item.vodSource&&c.item.startOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",e1,n[22]||(n[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):M("",!0),o(a).item.startOffsetMillis.$error?(t(),s("div",t1,[(t(!0),s(N,null,G(o(a).item.startOffsetMillis.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)]),e("div",s1,[e("div",o1,[e("div",a1,[C(e("input",{"onUpdate:modelValue":n[8]||(n[8]=O=>c.item.endOffsetMillis=O),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[B,c.item.endOffsetMillis]]),n[23]||(n[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),c.item.endOffsetMillis>0?(t(),s("span",l1,b(o(H).moment.utc(c.item.endOffsetMillis).format("HH:mm:ss")),1)):M("",!0)]),c.item.endOffsetMillis>0&&c.item.endOffsetMillis<3e4?(t(),s("div",n1,n[24]||(n[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):M("",!0),c.item.vodSource&&c.item.endOffsetMillis>c.item.vodSource.durationInMillis?(t(),s("div",r1,n[25]||(n[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):M("",!0),o(a).item.endOffsetMillis.$error?(t(),s("div",i1,[(t(!0),s(N,null,G(o(a).item.endOffsetMillis.$errors,O=>(t(),s("div",{key:O.$uid},b(O.$message),1))),128))])):M("",!0)])]),n[29]||(n[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[n[26]||(n[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:F,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",d1,[e("table",u1,[n[28]||(n[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(N,null,G(c.item.adBreaks,(O,le)=>(t(),s("tr",null,[e("td",null,b(le+1),1),e("td",null,[e("div",c1,[C(e("input",{"onUpdate:modelValue":X=>O.offsetMillis=X,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,m1),[[B,O.offsetMillis]]),O.offsetMillis>0?(t(),s("span",f1,b(o(H).moment.utc(O.offsetMillis).format("HH:mm:ss")),1)):M("",!0)])]),e("td",null,[C(e("select",{"onUpdate:modelValue":X=>O.sourceLocationId=X,onChange:n[9]||(n[9]=X=>f(c.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(N,null,G(c.lookups.adBreakSourceLocations,X=>(t(),s("option",{value:X.id},b(X.name),9,v1))),256))],40,p1),[[pe,O.sourceLocationId]])]),e("td",null,[C(e("select",{"onUpdate:modelValue":X=>O.vodSourceId=X,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(N,null,G(c.lookups.adBreakVodSources,X=>(t(),s("option",{value:X.id},b(X.name),9,b1))),256))],8,g1),[[pe,O.vodSourceId]])]),e("td",null,[e("button",{onClick:X=>P(le),class:"btn btn-outline-warning"},n[27]||(n[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,y1)])]))),256))])])])])])]),e("div",$1,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:n[10]||(n[10]=O=>U()),class:"btn btn-primary",type:"button"},n[30]||(n[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,w1),n[31]||(n[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,yg))}},_1=["id"],k1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},S1={class:"modal-content"},T1={class:"modal-header bg-primary","data-bs-theme":"dark"},M1={class:"modal-title",id:"exampleModalLabel"},C1={class:"modal-body"},I1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},x1=["innerHTML"],P1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},U1={class:"container"},V1={class:"col"},O1={class:"form-floating mb-2"},A1={class:"col"},D1={class:"form-floating mb-2"},E1={key:0,class:"d-block invalid-feedback"},H1={class:"col"},B1={class:"form-floating mb-2 d-none"},L1={key:0,class:"d-block invalid-feedback"},N1={class:"col"},q1={class:"form-floating mb-2"},R1={key:0,class:"d-block invalid-feedback"},z1={class:"modal-footer"},j1=["disabled"],F1={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),K=$,W=ae(),r=ae("modalAddPlaybackConfiguration"),c=ue({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),x={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},a=ye(x,c);ne(async()=>{a.value.$reset()});const j=async(g,d)=>{W.value=g;const m=c;Y.value.clear(),E.value="";const p=d,f=p.lastIndexOf("/"),v=p.substring(0,f),F=p.substring(f+1).replace(".","_");m.item={name:F,originalVideoContentSourceUrl:d,videoContentSourceUrl:v,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},a.value.$reset();var P=document.getElementById(r.value),se=$e.getOrCreateInstance(P);se.show()},l=async()=>{var g=document.getElementById(r.value),d=$e.getOrCreateInstance(g);d.hide(),K("refresh")},U=async()=>{const g=c;if(q.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{q.value=!0,E.value="";const m=g.item;m.channelOutputId=W.value,await z.put("/api/v1/channelOutputs/playback/",m).then(p=>{_.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await l()}catch(m){E.value=H.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{q.value=!1}};return u({open:j,close:l}),(g,d)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",k1,[e("div",S1,[e("div",T1,[e("h5",M1,b(o(h))+" - "+b(o(y)),1),d[5]||(d[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",C1,[o(E)?(t(),s("div",I1,[d[6]||(d[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,x1)])):M("",!0),o(Y).size>0?(t(),s("div",P1,[d[7]||(d[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),m=>(t(),s("li",null,b(m),1))),256))])])):M("",!0),e("div",U1,[e("div",V1,[e("div",O1,[C(e("textarea",{"onUpdate:modelValue":d[0]||(d[0]=m=>c.item.originalVideoContentSourceUrl=m),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[B,c.item.originalVideoContentSourceUrl]]),d[8]||(d[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",A1,[e("div",D1,[C(e("input",{"onUpdate:modelValue":d[1]||(d[1]=m=>c.item.name=m),id:"name",class:"form-control",placeholder:"Name"},null,512),[[B,c.item.name]]),d[9]||(d[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(a).item.name.$error?(t(),s("div",E1,[(t(!0),s(N,null,G(o(a).item.name.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):M("",!0)])]),e("div",H1,[e("div",B1,[C(e("input",{"onUpdate:modelValue":d[2]||(d[2]=m=>c.item.videoContentSourceUrl=m),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[B,c.item.videoContentSourceUrl]]),d[10]||(d[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),d[11]||(d[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(a).item.videoContentSourceUrl.$error?(t(),s("div",L1,[(t(!0),s(N,null,G(o(a).item.videoContentSourceUrl.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):M("",!0)])]),e("div",N1,[e("div",q1,[C(e("textarea",{"onUpdate:modelValue":d[3]||(d[3]=m=>c.item.adDecisionServerUrl=m),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[B,c.item.adDecisionServerUrl]]),d[12]||(d[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(a).item.adDecisionServerUrl.$error?(t(),s("div",R1,[(t(!0),s(N,null,G(o(a).item.adDecisionServerUrl.$errors,m=>(t(),s("div",{key:m.$uid},b(m.$message),1))),128))])):M("",!0)])])])]),e("div",z1,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:d[4]||(d[4]=m=>U()),class:"btn btn-primary",type:"button"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,j1),d[14]||(d[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,_1))}},G1=["id"],Y1={class:"modal-dialog modal-xl modal-fullscreen-md-down"},W1={class:"modal-content"},K1={class:"modal-header bg-primary text-white"},J1={class:"modal-title",id:"exampleModalLabel"},Q1={class:"modal-body"},X1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Z1=["innerHTML"],eb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},tb={class:"container"},sb={class:"col"},ob={class:"form-floating mb-2"},ab=["value"],lb={key:0,class:"d-block invalid-feedback"},nb={class:"col"},rb={class:"form-floating mb-2"},ib={key:0,class:"d-block invalid-feedback"},db={class:"col"},ub={class:"form-floating mb-2"},cb={key:0,class:"d-block invalid-feedback"},mb={class:"modal-footer"},fb=["disabled"],pb={__name:"_addChannelOutput",emits:["refresh"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),K=$,W=ae(),r=ae("modalAddChannelOutput"),c=ue({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),x={item:{sourceGroupId:{required:ee.withMessage("Source Group is required.",te),$autoDirty:!0,$lazy:!0},manifestName:{required:ee.withMessage("Manifest Name is required.",te),$autoDirty:!0,$lazy:!0},outputType:{required:ee.withMessage("Output Type is required.",te),$autoDirty:!0,$lazy:!0}}},a=ye(x,c);ne(async()=>{a.value.$reset()});const j=async()=>{await l()},l=async()=>{try{await z.get("/api/v1/sourceGroups/lookup/").then(p=>{c.lookups.sourceGroups=p.data,c.lookups.sourceGroups.length===1&&(c.item.sourceGroupId=c.lookups.sourceGroups[0].id)})}catch(m){E.value=H.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},U=async m=>{W.value=m;const p=c;Y.value.clear(),E.value="",p.lookups={sourceGroups:[]},p.item={sourceGroupId:null,outputType:null},await j(),a.value.$reset();var f=document.getElementById(r.value),v=$e.getOrCreateInstance(f);v.show()},g=async()=>{var m=document.getElementById(r.value),p=$e.getOrCreateInstance(m);p.hide(),K("refresh")},d=async()=>{const m=c;if(q.value)return;if(!await a.value.$validate()){window.scrollTo(0,0);return}try{q.value=!0,E.value="";const f=m.item;f.channelId=W.value,await z.post("/api/v1/channelOutputs",f).then(v=>{_.success("Add Channel Output","Channel output added.")}),await g()}catch(f){E.value=H.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{q.value=!1}};return u({open:U,close:g}),(m,p)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Y1,[e("div",W1,[e("div",K1,[e("h5",J1,b(o(h))+" - "+b(o(y)),1),p[4]||(p[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Q1,[o(E)?(t(),s("div",X1,[p[5]||(p[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,Z1)])):M("",!0),o(Y).size>0?(t(),s("div",eb,[p[6]||(p[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),f=>(t(),s("li",null,b(f),1))),256))])])):M("",!0),e("div",tb,[e("div",sb,[e("div",ob,[C(e("select",{"onUpdate:modelValue":p[0]||(p[0]=f=>c.item.sourceGroupId=f),class:"form-select",id:"sourceGroupId"},[(t(!0),s(N,null,G(c.lookups.sourceGroups,f=>(t(),s("option",{value:f.id},b(f.name),9,ab))),256))],512),[[pe,c.item.sourceGroupId]]),p[7]||(p[7]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(a).item.sourceGroupId.$error?(t(),s("div",lb,[(t(!0),s(N,null,G(o(a).item.sourceGroupId.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):M("",!0)])]),e("div",nb,[e("div",rb,[C(e("select",{"onUpdate:modelValue":p[1]||(p[1]=f=>c.item.outputType=f),class:"form-select",id:"outputType"},p[8]||(p[8]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[pe,c.item.outputType]]),p[9]||(p[9]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(a).item.outputType.$error?(t(),s("div",ib,[(t(!0),s(N,null,G(o(a).item.outputType.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):M("",!0)])]),e("div",db,[e("div",ub,[C(e("input",{"onUpdate:modelValue":p[2]||(p[2]=f=>c.item.manifestName=f),class:"form-control",id:"manifestName"},null,512),[[B,c.item.manifestName]]),p[10]||(p[10]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(a).item.manifestName.$error?(t(),s("div",cb,[(t(!0),s(N,null,G(o(a).item.manifestName.$errors,f=>(t(),s("div",{key:f.$uid},b(f.$message),1))),128))])):M("",!0)])])])]),e("div",mb,[e("button",{disabled:o(a).$dirty&&o(a).$invalid,onClick:p[3]||(p[3]=f=>d()),class:"btn btn-primary",type:"button"},p[11]||(p[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fb),p[12]||(p[12]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,G1))}},vb=["id"],gb={class:"modal-dialog modal-xl modal-fullscreen-md-down"},bb={class:"modal-content"},yb={class:"modal-header bg-primary text-white"},$b={class:"modal-title",id:"exampleModalLabel"},wb={class:"modal-body"},hb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_b=["innerHTML"],kb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Sb={class:"container"},Tb={class:"col"},Mb={class:"form-floating mb-2"},Cb=["value"],Ib={key:0,class:"d-block invalid-feedback"},xb={class:"col"},Pb={class:"form-floating mb-2"},Ub=["value"],Vb={key:0,class:"d-block invalid-feedback"},Ob={class:"modal-footer"},Ab=["disabled"],Db={__name:"_editFillerSlate",emits:["refresh"],setup(i,{expose:u,emit:$}){const{appTitle:h,pageTitle:y,busy:q,isDirty:T,validations:Y,infoMessage:R,warningMessage:k,errorMessage:E,router:J,axios:z,utils:H,toasts:_,closeWithReturnUrl:S,security:w}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),K=$,W=ae("modalEditFillerSlate"),r=ue({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null}}),c={item:{channelId:{required:ee.withMessage("channelId is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0}}},x=ye(c,r);ne(async()=>{x.value.$reset()});const a=async()=>{await j()},j=async()=>{try{await z.get("/api/v1/sourcelocations/lookup/").then(f=>{r.lookups.sourceLocations=f.data}),r.item.sourceLocationId&&await l(r.item.sourceLocationId)}catch(p){E.value=H.getErrorMessageAsHtml(p),window.scrollTo(0,0)}finally{}},l=async p=>{try{let f=`/api/v1/vodSources/lookup/source-Location/${p}/`;await z.get(f).then(v=>{r.lookups.vodSources=v.data})}catch(f){E.value=H.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},U=async(p,f,v)=>{const F=r;Y.value.clear(),E.value="",F.lookups={sourceLocations:[],vodSources:[]},F.item={channelId:p,sourceLocationId:f,vodSourceId:v},await a(),x.value.$reset();var P=document.getElementById(W.value),se=$e.getOrCreateInstance(P);se.show()},g=async()=>{var p=document.getElementById(W.value),f=$e.getOrCreateInstance(p);f.hide(),K("refresh")},d=async()=>{const p=r;if(q.value)return;if(!await x.value.$validate()){window.scrollTo(0,0);return}try{q.value=!0,E.value="";const v=p.item;await z.put("/api/v1/channels/filler-slate",v).then(F=>{_.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await g()}catch(v){E.value=H.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{q.value=!1}},m=async()=>{r.item.vodSourceId=null,await j()};return u({open:U,close:g}),(p,f)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:W.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",gb,[e("div",bb,[e("div",yb,[e("h5",$b,b(o(h))+" - "+b(o(y)),1),f[4]||(f[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",wb,[o(E)?(t(),s("div",hb,[f[5]||(f[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:o(E)},null,8,_b)])):M("",!0),o(Y).size>0?(t(),s("div",kb,[f[6]||(f[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(o(Y).values(),v=>(t(),s("li",null,b(v),1))),256))])])):M("",!0),e("div",Sb,[e("div",Tb,[e("div",Mb,[C(e("select",{"onUpdate:modelValue":f[0]||(f[0]=v=>r.item.sourceLocationId=v),onChange:f[1]||(f[1]=v=>m()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(N,null,G(r.lookups.sourceLocations,v=>(t(),s("option",{value:v.id},b(v.name),9,Cb))),256))],544),[[pe,r.item.sourceLocationId]]),f[7]||(f[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(x).item.sourceLocationId.$error?(t(),s("div",Ib,[(t(!0),s(N,null,G(o(x).item.sourceLocationId.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):M("",!0)])]),e("div",xb,[e("div",Pb,[C(e("select",{"onUpdate:modelValue":f[2]||(f[2]=v=>r.item.vodSourceId=v),class:"form-select",id:"vodSourceId"},[(t(!0),s(N,null,G(r.lookups.vodSources,v=>(t(),s("option",{value:v.id},b(v.name),9,Ub))),256))],512),[[pe,r.item.vodSourceId]]),f[8]||(f[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(x).item.vodSourceId.$error?(t(),s("div",Vb,[(t(!0),s(N,null,G(o(x).item.vodSourceId.$errors,v=>(t(),s("div",{key:v.$uid},b(v.$message),1))),128))])):M("",!0)])])])]),e("div",Ob,[e("button",{disabled:o(x).$dirty&&o(x).$invalid,onClick:f[3]||(f[3]=v=>d()),class:"btn btn-primary",type:"button"},f[9]||(f[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ab),f[10]||(f[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,vb))}},Eb={class:"d-flex flex-row justify-content-end"},Hb={key:0},Bb={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Lb={class:"nav-item",role:"presentation"},Nb={class:"nav-item",role:"presentation"},qb={class:"nav-item",role:"presentation"},Rb={class:"nav-item",role:"presentation"},zb={class:"tab-content",id:"myTabContent"},jb={class:"mt-2"},Fb={class:"row row-cols-1 row-cols-sm-3"},Gb={class:"col"},Yb={class:"form-floating mb-2"},Wb={class:"col"},Kb={class:"form-floating mb-2"},Jb={class:"col"},Qb={class:"form-floating mb-2"},Xb={class:"d-flex flex-row justify-content-between align-items-center"},Zb={key:0},ey={class:"row row-cols-sm-2 mt-1"},ty={class:"col"},sy={class:"form-floating mb-2"},oy={class:"col"},ay={class:"form-floating mb-2"},ly={class:"col mt-2"},ny={class:"form-floating mb-2"},ry={class:"mt-2"},iy={class:"d-flex flex-row justify-content-between align-items-center"},dy={key:0,class:"alert bg-warning mt-2"},uy={class:"table-responsive border mt-1"},cy={class:"table table-bordered1 mb-0"},my={key:0,class:"text-wrap"},fy={key:1,class:"text-warning"},py={key:0,class:"text-end"},vy=["onClick"],gy={key:1,class:"text-end"},by=["onClick"],yy={key:0},$y={colspan:"999",class:"bg-dark"},wy={class:"d-flex flex-row justify-content-between align-items-center"},hy={class:"ms-2"},_y={if:"item.playbackUrl"},ky=["onClick"],Sy={key:0,class:"table-responsive border"},Ty={class:"table mb-0 table-small"},My={class:"text-end"},Cy=["onClick"],Iy=["onClick"],xy=["onClick"],Py={key:1,class:"mt-2"},Uy={class:"container1"},Vy={class:"row row-cols-1 row-cols-sm-2"},Oy={class:"col-sm-3"},Ay={class:"input-group mb-2"},Dy={class:"form-floating border-success"},Ey=["onUpdate:modelValue"],Hy=["onClick"],By={class:"col-sm-9"},Ly={class:"input-group mb-2"},Ny={class:"form-floating"},qy=["onUpdate:modelValue"],Ry=["onClick"],zy={class:"col"},jy={class:"form-floating mb-2"},Fy=["onUpdate:modelValue"],Gy={class:"mt-2"},Yy={class:"table-responsive border"},Wy={class:"table table-hover mb-0 caption-top"},Ky={key:0,class:"fas fa-fw fa-check-circle text-success"},Jy={class:"badge bg-info"},Qy={key:0,class:""},Xy={key:1,class:"mt-1"},Zy={class:"mt-1"},e$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},t$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},s$={class:"badge bg-info me-2"},o$={class:"text-end"},a$=["onClick"],l$=["onClick"],n$=["onClick"],r$=["onClick"],i$={class:"text-end mt-2 d-none"},d$={class:"mt-2"},u$={key:0,class:"fas fa-fw fa-check-circle text-success"},c$={key:1,class:"fas fa-fw fa-times-circle text-warning"},m$={key:0,class:"fas fa-fw fa-check-circle text-success"},f$={key:1,class:"fas fa-fw fa-times-circle text-warning"},p$={key:0,class:"fas fa-fw fa-check-circle text-success"},v$={key:1,class:"fas fa-fw fa-times-circle text-warning"},g$={key:0,class:"fas fa-fw fa-check text-warning"},b$={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},y$={key:0,class:"fas fa-fw fa-check-circle text-success"},$$={key:1,class:"fas fa-fw fa-times-circle text-warning"},w$={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(i){const u=i,{appTitle:$,pageTitle:h,busy:y,isDirty:q,validations:T,infoMessage:Y,warningMessage:R,errorMessage:k,router:E,axios:J,utils:z,toasts:H,close:_,closeWithReturnUrl:S,generateReturnUrl:w,security:K}=me({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});be("$config");const W=ve();W.user;const r=ue({user:W.user,item:null}),c=ae(null),x=ae(null),a=ae(null),j=ae(null),l=ae(null),U=ae(),g=Oe(()=>r.item&&r.item.state==="RUNNING");ne(async()=>{await f(),U.value=z.getPageTab("channel")||"information-tab"});const d=re=>{z.setPageTab("channel",re),U.value=re},m=re=>re===U.value?"active":"",p=re=>re===U.value?"show active":"",f=async()=>{const re=r;if(!y.value)try{y.value=!0,k.value="",r.item=null;const I=`/api/v1/channels/${u.id}/`;await J.get(I).then(ge=>{re.item=ge.data,re.item.outputs.forEach(De=>{De.playbackConfigurations.forEach(Z=>{if(De.playbackUrl){const Pe=De.playbackUrl,ce=Pe.lastIndexOf("/"),je=Pe.substring(0,ce),He=Pe.substring(ce+1),Fe=Z.hlsConfigurationManifestEndpointPrefix;Fe&&(Z.hlsPlaylist=Fe+He)}})})})}catch(I){k.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{y.value=!1}},v=async()=>{await f()},F=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/channels/${u.id}/publish/`).then(I=>{H.success("Publish Channel","Channel was published.")}),y.value=!1,await v()}catch(I){k.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{y.value=!1}}},P=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/channels/${u.id}/unpublish/`).then(I=>{H.warning("Remove Channel","Channel was removed.")}),y.value=!1,await v()}catch(I){k.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{y.value=!1}}},se=()=>{c.value.open(u.id)},D=re=>{re.outputType==="HLS"&&x.value.open(re.channelOutputId,re.playbackUrl)},n=()=>{a.value.open(u.id)},O=re=>{j.value.open(re)},le=(re,I)=>{l.value.open(u.id,re,I)},X=async re=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${re}/`).then(ge=>{H.success("Delete Program","Program was deleted..",{async onClose(){}})}),y.value=!1,await v()}catch(ge){k.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},fe=async re=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/channelOutputs/${re}/`).then(ge=>{H.success("Delete Channel Output","Channel output was deleted..")}),y.value=!1,await v()}catch(ge){k.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},_e=async re=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!y.value){k.value=null;try{y.value=!0,await J.post(`/api/v1/programs/${re}/publish/`).then(ge=>{H.success("Publish Program","Program was published..",{async onClose(){}})}),y.value=!1,await v()}catch(ge){k.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Me=async re=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!y.value){k.value=null;try{y.value=!0,await J.delete(`/api/v1/programs/${re}/unpublish/`).then(ge=>{H.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),y.value=!1,await v()}catch(ge){k.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}}},Ce=async re=>{if(!y.value){k.value=null;try{y.value=!0,await J.put(`/api/v1/channels/${u.id}/change-state/${re}`).then(I=>{H.success("Update Channel state","Change state was updated")}),y.value=!1,await v()}catch(I){k.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{y.value=!1}}},Ae=async re=>{if(!y.value)try{y.value=!0,k.value="",await J.post(`/api/v1/channelOutputs/${re}/playback/publish/`).then(I=>{H.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),y.value=!1,await v()}catch(I){k.value=z.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{y.value=!1}},nt=async re=>{if(confirm("Do you want to remove this Playback Configuration?")&&!y.value)try{y.value=!0,k.value="",await J.delete(`/api/v1/channelOutputs/${re}/playback/`).then(ge=>{H.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),y.value=!1,await v()}catch(ge){k.value=z.getErrorMessageAsHtml(ge),window.scrollTo(0,0)}finally{y.value=!1}},Ne=re=>{const I=`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(re)}`;window.open(I,"_blank")};return(re,I)=>{const ge=Q("router-link"),ze=Q("PageHeader"),De=Q("PageBody");return t(),ie(de,null,{default:V(()=>[e("div",null,[A(ze,{"page-icon":"fas fa-fw fa-microphone",pageTitle:o(h),"header-break":"row row-cols-2 row-cols-sm-2"},{default:V(()=>[e("div",Eb,[(o(K).isAdministrator,M("",!0)),r.item?(t(),s(N,{key:1},[r.item.arn?(t(),s(N,{key:0},[g.value?g.value?(t(),s("button",{key:1,onClick:I[2]||(I[2]=Z=>Ce("STOPPED")),class:"ms-1 btn btn-warning"},I[22]||(I[22]=[e("span",{class:"fas fa-fw fa-stop"},null,-1)]))):M("",!0):(t(),s("button",{key:0,onClick:I[1]||(I[1]=Z=>Ce("RUNNING")),class:"ms-1 btn btn-success"},I[21]||(I[21]=[e("span",{class:"fas fa-fw fa-play"},null,-1)])))],64)):M("",!0),r.item.arn&&!g.value?(t(),s("button",{key:1,onClick:I[3]||(I[3]=Z=>F()),class:"ms-1 btn btn-primary"},I[23]||(I[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Republish ")]))):M("",!0),g.value?M("",!0):(t(),s(N,{key:2},[r.item.arn?(t(),s("button",{key:0,onClick:I[4]||(I[4]=Z=>P()),class:"ms-1 btn btn-danger"},I[24]||(I[24]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),L("Unpublish ")]))):(t(),s("button",{key:1,onClick:I[5]||(I[5]=Z=>F()),class:"ms-1 btn btn-primary"},I[25]||(I[25]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")])))],64))],64)):M("",!0),A(ge,{to:`${i.urlSchedulePrograms}/${i.id}`,class:"ms-2 btn btn-primary"},{default:V(()=>I[26]||(I[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:I[6]||(I[6]=Z=>v()),class:"ms-2 btn btn-secondary"},I[27]||(I[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:I[7]||(I[7]=Z=>o(S)(u.urlMain)),class:"btn btn-secondary ms-1"},I[28]||(I[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),A(De,{errorMessage:o(k)},{default:V(()=>[r.item?(t(),s("div",Hb,[e("ul",Bb,[e("li",Lb,[e("button",{onClick:I[8]||(I[8]=Z=>d("information-tab")),class:oe([m("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},I[29]||(I[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),L("Information ")]),2)]),e("li",Nb,[e("button",{onClick:I[9]||(I[9]=Z=>d("outputPlayback-tab")),class:oe([m("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},I[30]||(I[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),L("Output/Playback ")]),2)]),e("li",qb,[e("button",{onClick:I[10]||(I[10]=Z=>d("programs-tab")),class:oe([m("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},I[31]||(I[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),L("Programs ")]),2)]),e("li",Rb,[e("button",{onClick:I[11]||(I[11]=Z=>d("checklist-tab")),class:oe([m("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},I[32]||(I[32]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),L("Checklist ")]),2)])]),e("div",zb,[e("div",{class:oe([p("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",jb,[e("div",Fb,[e("div",Gb,[e("div",Yb,[C(e("input",{"onUpdate:modelValue":I[12]||(I[12]=Z=>r.item.name=Z),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[B,r.item.name]]),I[33]||(I[33]=e("label",{for:"name"},"Name",-1))])]),e("div",Wb,[e("div",Kb,[C(e("input",{"onUpdate:modelValue":I[13]||(I[13]=Z=>r.item.playbackMode=Z),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[B,r.item.playbackMode]]),I[34]||(I[34]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",Jb,[e("div",Qb,[C(e("input",{"onUpdate:modelValue":I[14]||(I[14]=Z=>r.item.tier=Z),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[B,r.item.tier]]),I[35]||(I[35]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",Xb,[I[37]||(I[37]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),g.value?M("",!0):(t(),s("div",Zb,[e("button",{onClick:I[15]||(I[15]=Z=>le(r.item.fillerSlateSourceLocation.sourceLocationId,r.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},I[36]||(I[36]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),L("Edit ")]))]))]),e("div",ey,[e("div",ty,[e("div",sy,[A(ge,{to:`${i.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${o(w)()}`,class:oe([[r.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:V(()=>[L(b(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),I[38]||(I[38]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",oy,[e("div",ay,[A(ge,{to:`${i.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${o(w)()}`,class:oe([[r.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",disabled:""},{default:V(()=>[L(b(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),I[39]||(I[39]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])]),e("div",ly,[e("div",ny,[C(e("textarea",{"onUpdate:modelValue":I[16]||(I[16]=Z=>r.item.policy=Z),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[B,r.item.policy]]),I[40]||(I[40]=e("label",{for:"policy"},"Policy",-1))])])])],2),e("div",{class:oe([p("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ry,[e("div",null,[e("div",iy,[I[42]||(I[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",null,[e("button",{onClick:I[17]||(I[17]=Z=>n()),class:"btn btn-primary"},I[41]||(I[41]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Add ")]))])]),r.item.outputs.length<=0?(t(),s("div",dy,I[43]||(I[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),L("Channel Output is required ")]))):M("",!0),e("div",uy,[e("table",cy,[I[59]||(I[59]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Type"),e("th",null,"Manifest Name"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.outputs,(Z,Pe)=>(t(),s(N,{key:Z.channelOutputId},[e("tr",null,[e("td",null,b(Pe+1),1),e("td",null,[e("div",null,b(Z.outputType),1)]),e("td",null,[e("div",null,b(Z.manifestName),1)]),e("td",null,[e("div",null,[A(ge,{to:`${i.urlViewSourceGroup}/${Z.sourceGroupId}/${o(w)()}`},{default:V(()=>[L(b(Z.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[Z.playbackUrl?(t(),s("div",my,b(Z.playbackUrl),1)):(t(),s("div",fy,I[44]||(I[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),L("Publish channel to get the playback url ")])))]),g.value?(t(),s("td",py,[e("div",null,[g.value?(t(),s("button",{key:0,onClick:ce=>Ne(Z.playbackUrl),class:"btn btn-outline-info btn-sm"},I[45]||(I[45]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]),8,vy)):M("",!0)])])):(t(),s("td",gy,[e("button",{onClick:ce=>fe(Z.channelOutputId),class:"btn btn-outline-warning"},I[46]||(I[46]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,by)]))]),Z.playbackUrl?(t(),s("tr",yy,[I[58]||(I[58]=e("td",null,null,-1)),e("td",$y,[e("div",wy,[I[48]||(I[48]=e("h5",null,[L("Configuration "),e("sub",null,"(Ad Insertion from ADS)")],-1)),e("div",hy,[e("div",_y,[e("button",{onClick:ce=>D(Z),class:"btn btn-primary btn-sm"},I[47]||(I[47]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Add ")]),8,ky)])])]),Z.playbackConfigurations.length>0?(t(),s("div",Sy,[e("table",Ty,[e("tbody",null,[(t(!0),s(N,null,G(Z.playbackConfigurations,(ce,je)=>(t(),s("tr",null,[e("td",null,b(je+1),1),e("td",null,b(ce.name),1),e("td",My,[g.value&&ce.hlsPlaylist?(t(),s("button",{key:0,onClick:He=>Ne(ce.hlsPlaylist),class:"btn btn-outline-info btn-sm"},I[49]||(I[49]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)]),8,Cy)):M("",!0),ce.arn?M("",!0):(t(),s("button",{key:1,onClick:He=>Ae(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},I[50]||(I[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,Iy)),e("button",{onClick:He=>nt(ce.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},I[51]||(I[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,xy)])]))),256))])])])):M("",!0),Z.playbackConfiguration?(t(),s("div",Py,[e("div",Uy,[e("div",Vy,[e("div",Oy,[e("div",Ay,[e("div",Dy,[C(e("input",{"onUpdate:modelValue":ce=>Z.playbackConfiguration.name=ce,type:"text",class:oe([[Z.playbackConfiguration.arn?"is-valid":"is-invalid"],"form-control"]),id:"name",disabled:""},null,10,Ey),[[B,Z.playbackConfiguration.name]]),I[52]||(I[52]=e("label",{for:"name"}," Name ",-1))]),Z.playbackConfiguration.arn?M("",!0):(t(),s("button",{key:0,onClick:ce=>re.publishPlaybackConfiguration(Z),class:"btn btn-outline-primary btn-sm"},I[53]||(I[53]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),L("Publish ")]),8,Hy))])]),e("div",By,[e("div",Ly,[e("div",Ny,[C(e("input",{"onUpdate:modelValue":ce=>Z.playbackConfiguration.hlsConfigurationManifestEndpointPrefix=ce,type:"text",class:"form-control",id:"playbackConfigurationhlsConfigurationManifestEndpointPrefix",disabled:""},null,8,qy),[[B,Z.playbackConfiguration.hlsConfigurationManifestEndpointPrefix]]),I[54]||(I[54]=e("label",{for:"hlsConfigurationManifestEndpointPrefix"},"HLS Configuration Manifest Endpoint Prefix",-1))]),g.value&&Z.playbackConfiguration.hlsPlaylist?(t(),s("button",{key:0,onClick:ce=>Ne(Z.playbackConfiguration.hlsPlaylist),class:"btn btn-outline-info"},I[55]||(I[55]=[e("span",{class:"fas fa-fw fa-eye me-1"},null,-1),L("View ")]),8,Ry)):M("",!0)])])]),I[57]||(I[57]=e("div",{class:"row row-cols-1 row-cols-sm-21"},[e("div",{class:"col"})],-1)),e("div",zy,[e("div",jy,[C(e("textarea",{"onUpdate:modelValue":ce=>Z.playbackConfiguration.adDecisionServerUrl=ce,class:"form-control",id:"playbackConfigurationadDecisionServerUrl",style:{height:"8rem"},disabled:""},null,8,Fy),[[B,Z.playbackConfiguration.adDecisionServerUrl]]),I[56]||(I[56]=e("label",{for:"playbackConfigurationadDecisionServerUrl"},"Ad Decision Server Url",-1))])])])])):M("",!0)])])):M("",!0)],64))),128))]),_:1},512),[[he,r.item.outputs.length>0]])])])])])],2),e("div",{class:oe([p("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Gy,[e("div",Yy,[e("table",Wy,[I[72]||(I[72]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),C(A(we,{tag:"tbody",name:"list",class:"table-group-divider"},{default:V(()=>[(t(!0),s(N,null,G(r.item.programs,(Z,Pe)=>(t(),s("tr",{key:Z.programId},[e("td",null,b(Pe+1),1),e("td",null,[Z.arn?(t(),s("span",Ky)):M("",!0),L(" "+b(Z.name)+" ",1),I[63]||(I[63]=e("br",null,null,-1)),e("div",null,[e("div",null,[I[60]||(I[60]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),L(b(o(z).moment(Z.dateScheduledStart).format("llll")),1)]),e("div",null,[I[61]||(I[61]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),L(b(o(z).moment(Z.dateScheduledEnd).format("llll")),1)])]),Z.relativeProgram?(t(),s(N,{key:1},[I[62]||(I[62]=L(" Relative Program: ")),e("span",Jy,b(Z.relativeProgram.name),1)],64)):M("",!0)]),e("td",null,[Z.totalProgramTemplateDurationInMillis!==Z.durationInMillis?(t(),s("div",Qy,[I[64]||(I[64]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),L(" "+b(o(z).moment.utc(Z.startOffsetMillis).format("HH:mm:ss"))+" - "+b(o(z).moment.utc(Z.endOffsetMillis).format("HH:mm:ss")),1)])):M("",!0),Z.adBreaksDurationInMillis?(t(),s("div",Xy,[I[65]||(I[65]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),L(" Ads: "+b(o(z).moment.utc(Z.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):M("",!0),e("div",Zy,[I[66]||(I[66]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),L(" Total: "+b(o(z).moment.utc(Z.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[L(b(Z.vodSource.video.title)+" ",1),I[67]||(I[67]=e("br",null,null,-1)),L(" ("+b(o(z).moment.utc(Z.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),s(N,null,G(Z.adBreaks,ce=>(t(),s("li",null,[ce.vodSource.arn?(t(),s("span",e$)):(t(),s("span",t$)),e("span",s$,b(o(z).moment.utc(ce.offsetMillis).format("HH:mm:ss")),1),A(ge,{to:`${i.urlViewVodSource}/${ce.vodSource.vodSourceId}/${o(w)()}`},{default:V(()=>[L(b(ce.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",o$,[Z.arn?(t(),s("button",{key:0,onClick:ce=>Me(Z.programId),class:"btn btn-sm btn-outline-warning"},I[68]||(I[68]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,a$)):(t(),s(N,{key:1},[e("button",{onClick:ce=>_e(Z.programId),class:"btn btn-sm btn-outline-primary ms-1"},I[69]||(I[69]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,l$),e("button",{onClick:ce=>X(Z.programId),class:"btn btn-sm btn-outline-danger ms-1"},I[70]||(I[70]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,n$)],64)),e("button",{onClick:ce=>O(Z.programId),class:"btn btn-sm btn-outline-primary ms-2"},I[71]||(I[71]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]),8,r$)])]))),128))]),_:1},512),[[he,r.item.programs.length>0]])])]),e("div",i$,[e("button",{onClick:I[18]||(I[18]=Z=>se()),class:"btn btn-outline-primary"},I[73]||(I[73]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),L("Program ")]))])])],2),e("div",{class:oe([p("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",d$,[I[79]||(I[79]=L(" Checklist ")),e("ul",null,[e("li",null,[r.item.fillerSlateSourceLocation.arn?(t(),s("span",u$)):(t(),s("span",c$)),I[74]||(I[74]=L(" Filler Slate Source Location "))]),e("li",null,[r.item.fillerSlateVodSource.arn?(t(),s("span",m$)):(t(),s("span",f$)),I[75]||(I[75]=L(" Filler Slate VOD Source "))]),e("li",null,[r.item.outputs.length>0?(t(),s("span",p$)):(t(),s("span",v$)),I[77]||(I[77]=L(" Outputs ")),e("ul",null,[e("li",null,[r.item.outputs.some(Z=>Z.playbackConfigurations.length>0)?(t(),s("span",g$)):(t(),s("span",b$)),I[76]||(I[76]=L(" Ad Insertion setup "))])])]),e("li",null,[r.item.programs.length>0?(t(),s("span",y$)):(t(),s("span",$$)),I[78]||(I[78]=L(" Programs "))])])])],2)])])):M("",!0)]),_:1},8,["errorMessage"]),A(h1,{ref_key:"modalAddProgram",ref:c,onRefresh:v},null,512),A(F1,{ref_key:"modalAddPlaybackConfiguration",ref:x,onRefresh:v},null,512),A(pb,{ref_key:"modalAddChannelOutput",ref:a,onRefresh:v},null,512),A(at,{ref_key:"modalEditProgram",ref:j,onOnClose:v},null,512),A(Db,{ref_key:"modalEditFillerSlate",ref:l,onRefresh:v},null,512)])]),_:1})}}},h$={path:"/",component:Yo,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:va},{path:"users/add",component:Na},{path:"users",component:Ja},{path:"users/view/:id",component:$l,props:!0},{path:"videos/add",component:Gl},{path:"videos/edit/:id",component:vn,props:!0},{path:"videos",component:Sn},{path:"videos/view/:id",component:Qn,props:!0},{path:"source-groups/add",component:sr},{path:"source-groups/edit/:id",component:lr,props:!0},{path:"source-groups",component:pr},{path:"source-groups/view/:id",component:Ur,props:!0},{path:"source-locations/add",component:Br},{path:"source-locations/edit/:id",component:qr,props:!0},{path:"source-locations",component:Jr},{path:"source-locations/view/:id",component:hi,props:!0},{path:"vod-sources/add",component:Wi},{path:"vod-sources/edit/:id",component:Qi,props:!0},{path:"vod-sources",component:id},{path:"vod-sources/view/:id",component:fc,props:!0},{path:"channels/add",component:yp},{path:"channels/edit/:id",component:hp,props:!0},{path:"channels",component:Pp},{path:"channels/schedule-programs/:id",component:bg,props:!0},{path:"channels/view/:id",component:w$,props:!0},{path:"program-templates/add",component:Qc},{path:"program-templates/edit/:id",component:Om,props:!0},{path:"program-templates",component:jm},{path:"program-templates/view/:id",component:Yf,props:!0}]},lt=ct({history:mt("/"),linkActiveClass:"active",routes:[{...ao},{path:"/administrator",redirect:"/"},{...h$}]}),_$={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const i=this,$=new ft().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();$.on("onNotificationCreated",function(h){let y=h.content;h.notificationEntityClassText==="Deposit"&&(y+="<br/>",y+=`<a href="${i.urlViewDeposit}${h.referenceId}">Click ${h.notificationEntityClassText} here</a>`),h.notificationEntityClassText==="Withdraw"&&(y+="<br/>",y+=`<a href="${i.urlViewWithdraw}${h.referenceId}">Click ${h.notificationEntityClassText} here</a>`),h.notificationEntityClassText==="ManualModeOfPayment"&&(y+="<br/>",y+=`<a href="${i.urlViewManualModeOfPayment}${h.referenceId}">Click ${h.notificationEntityClassText} here</a>`),h.iconClass;let q="secondary";switch(h.notificationType){case 1:q="success";break;case 3:q="info";break;case 3:q="success";break;case 4:q="info";break;case 5:q="warning";break;case 6:q="error";break}i.$toast[q](h.subject,y,{timeOut:1e4});const T=h.subject,k={body:y,icon:"/img/192x102.png"};new Notification(T,k)}),$.on("jobUpdated",function(h){i.$bus.$emit("event:job-updated",h)}),await $.start().then(function(){}).catch(function(h){})}}};function k$(i,u,$,h,y,q){return t(),s("div")}const S$=ke(_$,[["render",k$],["__scopeId","data-v-5b4a9fa2"]]),T$={class:"navbar bg-light","data-bs-theme":"light"},M$={class:"container-md"},C$={class:"col-sm-auto"},I$={class:"navbar-brand mb-0"},x$={class:"col-sm flex-fill"},P$={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(i){return(u,$)=>(t(),ie(de,null,{default:V(()=>[e("div",null,[e("nav",T$,[e("div",M$,[e("div",{class:oe([i.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",C$,[xe(u.$slots,"title",{},()=>[e("h1",I$,[e("i",{class:oe([i.pageIcon,"me-1"])},null,2),e("span",null,b(i.pageTitle),1)])])]),e("div",x$,[xe(u.$slots,"default")])],2)])])])]),_:3}))}},U$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},V$=["innerHTML"],O$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},A$={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(u,$)=>(t(),ie(de,null,{default:V(()=>[xe(u.$slots,"default",{},()=>[i.errorMessage?(t(),s("div",U$,[$[0]||($[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),L("Error ")],-1)),e("div",{innerHTML:i.errorMessage},null,8,V$)])):M("",!0),i.vuelidate&&i.vuelidate.$error?(t(),s("div",O$,[$[1]||($[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),L("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(N,null,G(i.vuelidate.$errors,h=>(t(),s("li",{key:h.$uid},[h.$validator==="$each"?(t(),s(N,{key:0},[L(" Check errors in '"+b(h.$property)+"' ",1)],64)):(t(),s(N,{key:1},[L(b(h.$message),1)],64))]))),128))])])):M("",!0)])]),_:3}))}},D$={class:"mt-2 container-md"},E$={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(u,$)=>{const h=Q("PageMessages");return t(),ie(de,null,{default:V(()=>[e("div",D$,[A(h,{errorMessage:i.errorMessage,vuelidate:i.vuelidate},null,8,["errorMessage","vuelidate"]),xe(u.$slots,"default")])]),_:3})}}},H$={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const i=this;i.busy||(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveFirst(){const i=this;if(i.busy)return;i.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveLast(){const i=this;if(i.busy)return;const u=i.filter;u.pageIndex!==u.totalPages&&(document.activeElement&&document.activeElement.blur(),await i.search(u.totalPages))},async move(i){const u=this;if(u.busy)return;const $=u.filter,h=$.pageIndex+i;h>=0&&h<=$.totalPages&&(document.activeElement&&document.activeElement.blur(),await u.search(h))}}},B$={class:"mt-2"},L$={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},N$={key:0,class:"col-sm order-2 order-sm-1"},q$={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},R$={class:"me-1 fw-bold"},z$={class:"fw-bold"},j$={class:"ms-1"},F$={class:"col-sm order-1 order-sm-2"},G$={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Y$={key:0,class:"page-item"},W$={key:1,class:"page-item"},K$={key:2,class:"page-item"},J$={class:"page-item active"},Q$={class:"page-link"},X$={key:3,class:"page-item"},Z$={key:4,class:"page-item"},ew={key:5,class:"page-item"},tw={key:1,class:"text-info font-weight-bold text-center"},sw={key:0},ow={key:1};function aw(i,u,$,h,y,q){return t(),s("div",B$,[$.filter.items.length?(t(),s("div",L$,[$.showPerPage?(t(),s("div",N$,[e("div",q$,[e("div",null,[e("span",R$,b($.filter.totalCount),1),u[8]||(u[8]=L("records in ")),e("span",z$,b($.filter.totalPages),1),u[9]||(u[9]=L(" page(s) "))]),e("div",j$,[C(e("select",{"onUpdate:modelValue":u[0]||(u[0]=T=>$.filter.pageSize=T),onChange:u[1]||(u[1]=(...T)=>q.changePagination&&q.changePagination(...T)),class:"form-select form-select-sm me-1"},u[10]||(u[10]=[Ke('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[pe,$.filter.pageSize]])]),u[11]||(u[11]=e("div",{class:"ms-1"},"per page",-1))])])):M("",!0),e("div",F$,[e("ul",G$,[$.filter.pageIndex!==1?(t(),s("li",Y$,[e("button",{class:"page-link","aria-label":"Previous",onClick:u[2]||(u[2]=(...T)=>q.moveFirst&&q.moveFirst(...T))},u[12]||(u[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):M("",!0),$.filter.pageIndex>2?(t(),s("li",W$,[e("button",{class:"page-link",onClick:u[3]||(u[3]=T=>q.move(-2))},b($.filter.pageIndex-2),1)])):M("",!0),$.filter.pageIndex>1?(t(),s("li",K$,[e("button",{class:"page-link",onClick:u[4]||(u[4]=T=>q.move(-1))},b($.filter.pageIndex-1),1)])):M("",!0),e("li",J$,[e("span",Q$,b($.filter.pageIndex),1)]),$.filter.pageIndex<$.filter.totalPages?(t(),s("li",X$,[e("button",{class:"page-link",onClick:u[5]||(u[5]=T=>q.move(1))},b($.filter.pageIndex+1),1)])):M("",!0),$.filter.pageIndex<$.filter.totalPages-1?(t(),s("li",Z$,[e("button",{class:"page-link",onClick:u[6]||(u[6]=T=>q.move(2))},b($.filter.pageIndex+2),1)])):M("",!0),$.filter.pageIndex<$.filter.totalPages?(t(),s("li",ew,[e("button",{class:"page-link","aria-label":"Next",onClick:u[7]||(u[7]=(...T)=>q.moveLast&&q.moveLast(...T))},u[13]||(u[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):M("",!0)])])])):(t(),s("div",tw,[$.noRecords?(t(),s("div",sw,b($.noRecords),1)):(t(),s("div",ow,"No record(s) found."))]))])}const lw=ke(H$,[["render",aw]]),nw={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let i=this;if(!i.enabled)return;let u=i.filter;u.sortField===i.field?u.sortOrder===0?u.sortField=null:u.sortOrder=u.sortOrder===0?1:0:(u.sortField=i.field,u.sortOrder=1),i.$emit("search")}}},rw={class:"align-self-center"};function iw(i,u,$,h,y,q){return t(),s("div",{onClick:u[0]||(u[0]=(...T)=>q.click&&q.click(...T)),class:"d-flex flex-row justify-content-start align-content-center",style:Ze({cursor:$.enabled?"pointer":""})},[xe(i.$slots,"default"),e("span",rw,[$.showSort?(t(),s("span",{key:0,class:oe([{"fa-sort text-gray-500":!q.currentSortField(),"fa-sort-up":q.currentSortField()&&q.sortUp(),"fa-sort-down":q.currentSortField()&&!q.sortUp()},"fas fa-fw mr-1"])},null,2)):M("",!0)])],4)}const dw=ke(nw,[["render",iw]]),uw={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(i){const u=this;u.setSelected(i),u.$emit("onSelectedRow",i)}}},cw={class:"table-responsive m-0"},mw=["href"],fw={key:1},pw=["onClick"],vw={class:"form-group row no-gutters"},gw={class:"col-5 col-form-label"},bw={class:"col align-self-center"},yw=["href"],$w={key:1};function ww(i,u,$,h,y,q){return t(),s("div",null,[e("div",cw,[e("table",{class:oe(["table table-hover d-none d-md-table card",$.tableCss])},[e("thead",null,[xe(i.$slots,"header",{},()=>[u[0]||(u[0]=e("th",null,"#",-1)),(t(!0),s(N,null,G($.header.columns,T=>(t(),s("th",null,b(T.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(N,null,G($.items,(T,Y)=>xe(i.$slots,"table-row",{key:`row1-${T[$.header.key]}`,item:T,index:Y},()=>[e("td",null,b($.getRowNumber(Y)),1),(t(!0),s(N,null,G($.header.columns,R=>(t(),s("td",null,[R.href?(t(),s("a",{key:0,href:R.href(T[$.header.key]),class:"font-weight-bold"},b(T[R.field]),9,mw)):(t(),s("span",fw,b(T[R.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:oe(["d-block d-md-none",$.rowCss])},[(t(!0),s(N,null,G($.items,(T,Y)=>(t(),s("div",{key:`row2-${T[$.header.key]}`,onClick:R=>q.onSelectedRow(T),class:"border"},[e("div",{class:oe(["p-2",{"b-left":$.isSelected(T)}])},[xe(i.$slots,"table-list",{item:T,index:Y},()=>[(t(!0),s(N,null,G($.header.columns,R=>(t(),s("div",vw,[e("label",gw,b(R.title),1),e("div",bw,[R.href?(t(),s("a",{key:0,href:R.href(T[$.header.key]),class:"font-weight-bold"},b(T[R.field]),9,yw)):(t(),s("span",$w,b(T[R.field]),1))])]))),256))],!0)],2)],8,pw))),128))],2)])}const hw=ke(uw,[["render",ww],["__scopeId","data-v-65929213"]]),Se=pt(gt);Se.use(vt());Se.use(lt);Se.component("m-notification",S$);Se.component("m-pagination",lw);Se.component("sort-field",dw);Se.component("table-list",hw);Se.component("Toasts",zo);Se.component("PageHeader",P$);Se.component("PageMessages",A$);Se.component("PageBody",E$);const _w="https://sonyfastpoc.azurewebsites.net/",kw="Arcadian-Sony FAST",Sw=void 0,Tw={API_URL:_w,appName:kw,tenantId:Sw};Se.provide("$config",Tw);Se.provide("$bus",Re);Se.mount("#app");
