import{r as se,o as t,c as ve,d as Ye,h as nt,u as We,a as ce,L as Ne,e as Re,b as s,f as e,g as z,w as R,i as Q,t as c,F as U,j as q,k as E,l as fe,m as Ke,n as Me,p as rt,q as Fe,s as Qe,P as ze,v as be,x as ae,y as re,z as Se,A as pt,B as o,T as ye,C as N,D as Z,E as it,G as te,H as vt,I as dt,J as _e,K as Ae,M as Ie,N as qe,O as ge,Q as Ue,R as ke,S as we,U as Ee,V as Be,W as De,X as lt,Y as gt,Z as bt,_ as yt,$ as He,a0 as $t,a1 as wt,a2 as ht}from"./vendor-SRKYyvx3-chunk.js";(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))V(_);new MutationObserver(_=>{for(const D of _)if(D.type==="childList")for(const P of D.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&V(P)}).observe(document,{childList:!0,subtree:!0});function I(_){const D={};return _.integrity&&(D.integrity=_.integrity),_.referrerPolicy&&(D.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?D.credentials="include":_.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function V(_){if(_.ep)return;_.ep=!0;const D=I(_);fetch(_.href,D)}})();const _t={__name:"App",setup(n){return(p,I)=>{const V=se("router-view");return t(),ve(V)}}},kt=Ye({id:"alert",state:()=>({alert:null}),actions:{success(n){this.alert={message:n,type:"alert-success"}},error(n){this.alert={message:n,type:"alert-danger"}},clear(){this.alert=null}}});function Je(){const n=B=>{var $;let A=B,i=A.response,x="";if(!A.response)return B.message;if(i.status===500){if(typeof i.data=="string")return i.data;if(i.data.content)return i.data.content;if(i.data.detail)return i.data.detail}if(i.status===401){const K=`${window.location.pathname}${window.location.search}`;x=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(K)}`}'>here</a> to login.`}else if(i.status===400){let K=A.response.data.errors;x=A.response.data.title||A.response.data,K&&(x+="<ul>");for(let X in K){let m=K[X];for(let v in K[X]){let Y=m[v];x+=`<li>${Y}</li>`}}K&&(x+="</ul>"),x||(x=A.message),x&&x.content&&(x=x.content)}else i.status===404?x=(($=i==null?void 0:i.data)==null?void 0:$.title)||(i==null?void 0:i.data)||"Record not found.":typeof i.data=="string"&&(x=A.message,x===""&&(x=`Error <b>Http ${i.status}</b>.<br/>Please contact the System Administrator.`));return x},p=B=>JSON.parse(JSON.stringify(B)),I=B=>{if(typeof B!="number")return B;var A=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return A.format(B)},V=(B,A,i)=>{const $={value:A,expiry:new Date().getTime()+i};debugger;localStorage.setItem(B,JSON.stringify($))},_=B=>{debugger;const A=localStorage.getItem(B);if(!A)return null;const i=JSON.parse(A);return new Date().getTime()>i.expiry?(localStorage.removeItem(B),null):i.value},D="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:n,clone:p,toCurrency:I,moment:nt,localStorageSetWithExpiry:V,localStorageGetWithExpiry:_,setPageTab:(B,A)=>{var i=localStorage.getItem(D);i?i=JSON.parse(i):i={},i[B]=A,localStorage.setItem(D,JSON.stringify(i))},getPageTab:B=>{var A=localStorage.getItem(D);return A?A=JSON.parse(A):A={},A[B]},createHlsStream:(B,A,i)=>{var x=new Hls({autoStartLoad:i??!0});return x.on(Hls.Events.MEDIA_ATTACHED,function(){}),x.on(Hls.Events.MANIFEST_PARSED,function($,K){console.log("manifest loaded, found "+K.levels.length+" quality level")}),x.on(Hls.Events.ERROR,function($,K){if(K.fatal)switch(K.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),x.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",K);break;default:x.destroy();break}}),x.loadSource(A),x.attachMedia(B),x},isValidTime:B=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(B),generateReturnUrl:()=>{const B=We();let A=B.path;return B.query.returnUrl&&(A=B.query.returnUrl),A=`?returnUrl=${encodeURIComponent(A)}`,A},getValidFeedbackCss:B=>B?"is-valid":"is-invalid"}}const St=Je(),ut=JSON.parse(localStorage.getItem("user"))||{},Tt=St.moment.utc(ut.exp*1e3),It=Tt.isAfter()?ut:null,he=Ye({id:"auth",state:()=>({user:It,returnUrl:null}),actions:{async login(n){try{this.user=n,localStorage.setItem("user",JSON.stringify(n))}catch(p){debugger;alert(p)}},logout(){this.user=null,localStorage.removeItem("user"),st.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),Mt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(Mt));const xt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://lively-bay-00480981e.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'"},je=xt,Xe=Ye("msal",()=>{const n=ce({auth:{clientId:je.VITE_AUTH_CLIENT_ID,authority:je.VITE_AUTH_AUTHORITY_URL,postLogoutUri:je.VITE_AUTH_POST_LOGOUT_URI},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1},system:{loggerOptions:{logLevel:Ne.Verbose,loggerCallback:(V,_,D)=>{if(!D)switch(V){case Ne.Error:console.error(_);return;case Ne.Info:console.info(_);return;case Ne.Verbose:console.debug(_);return;case Ne.Warning:console.warn(_);return}},piiLoggingEnabled:!1}}}),p=ce("");return{msalConfig:n,accessToken:p,setAccessToken:V=>{p.value=V}}}),Ze={$on:(...n)=>Re.on(...n),$once:(...n)=>Re.once(...n),$off:(...n)=>Re.off(...n),$emit:(...n)=>Re.emit(...n)};function Ct(){const n=(D,P,J,j)=>{Ze.$emit("toast-message",{title:D,message:P,type:J,options:j})};return{success:(D,P,J={})=>{n(D,P,"success",J)},warning:(D,P,J={})=>{n(D,P,"warning",J)},info:(D,P,J={})=>{n(D,P,"info",J)},error:(D,P,J={})=>{n(D,P,"danger",J)}}}const Ve=(n,p)=>{const I=n.__vccOpts||n;for(const[V,_]of p)I[V]=_;return I},Vt={data(){return{notifications:[],messages:[]}},async created(){const n=this;n.$bus.$on("event:notification-received",()=>{n.getUnreadNotifications()}),n.$bus.$on("event:notification-marked-as-read",p=>{n.notifications.some(V=>V.notificationId===p)&&n.getUnreadNotifications()}),n.$bus.$on("event:notification-removed",p=>{n.notifications.some(V=>V.notificationId===p)&&n.getUnreadNotifications()}),n.$bus.$on("event:chat-marked-as-read",n.onChatMarkedAsRead),n.$bus.$on("event:chat-message-received",n.onChatMessageReceived)},async mounted(){const n=this,p=n.$refs.notifications,I=n.$refs.messages;p&&p.offsetParent,I&&I.offsetParent&&await n.getUnreadChats()},methods:{async logout(){const n=this;try{await n.$util.axios.post("/api/accounts/logout").then(p=>{const I="/";n.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){n.$util.href(I)}})})}catch(p){n.$util.handleError(p)}},async onChatMarkedAsRead(n){let p=this,I=p.messages.find(V=>V.chatId===n);if(I){let V=p.messages.indexOf(I);p.messages.splice(V,1)}},async onChatMessageReceived(n){let p=this,I=p.messages.find(_=>_.chatId===n.chatId);if(I)I.lastMessageText=n.content;else{var V={chatId:n.chatId,isRead:!1,lastDateSent:n.dateSent,lastMessageText:n.content,senderFirstLastName:`${n.sender.firstName} ${n.sender.lastName}`,senderInitials:n.sender.initials,senderProfilePicture32:n.sender.profilePicture32,urlPicture:p.$util.getProfilePictureUrl(n.sender.profilePicture32,n.sender.initials)};p.messages.push(V)}},async getUnreadNotifications(){const n=this;try{await n.$util.axios.get("api/accounts/unread-notifications").then(p=>{n.notifications=p.data})}catch(p){n.$util.handleError(p)}},async getUnreadChats(){const n=this;try{await n.$util.axios.get("api/accounts/unread-chats").then(p=>{n.messages=p.data;for(let I in n.messages){let V=n.messages[I];n.$set(V,"urlPicture",n.$util.getProfilePictureUrl(V.senderProfilePicture32,V.senderInitials))}})}catch(p){n.$util.handleError(p)}},viewNotification(n){this.$bus.$emit("event:open-notification",n)},viewChat(n){this.$bus.$emit("event:open-chat",n)},showHiddenElements(){let p=this.$el.getElementsByClassName("initialHidden");for(let I=0;I<p.length;I++)p[I].classList.remove("invisible")}}},Pt={mixins:[Vt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const p=he().user;return{user:p,username:p?p.nameFull:"Guest"}},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1},async openModalSearchUser747(n){this.$refs.refModalSearchUser747.open(n)}}},Ot={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},At={class:"container-md"},Ut={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Lt={class:"navbar-nav"},Dt={class:"nav-item dropdown"},Ht={class:"dropdown-menu","aria-labelledby":"dropdown01"},Et={class:"nav-item dropdown"},qt={class:"dropdown-menu","aria-labelledby":"dropdown01"},Bt={class:"navbar-nav ms-auto"},Nt={class:"nav-item dropdown"},Rt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Ft={class:"d-inline d-sm-none d-md-inline"},zt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Gt={class:"text-capitalize"};function jt(n,p,I,V,_,D){const P=se("router-link");return t(),s("nav",Ot,[e("div",At,[z(P,{class:"navbar-brand",to:"/member"},{default:R(()=>[Q(c(I.appName),1)]),_:1}),p[14]||(p[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Ut,[e("ul",Lt,[e("li",Dt,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ht,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/announcements"},{default:R(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),Q(" Announcements ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/posts"},{default:R(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),Q(" Posts ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/yellow-pages"},{default:R(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),Q(" Yellow Pages ")])),_:1})])])]),e("li",Et,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",qt,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:R(()=>p[4]||(p[4]=[Q(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Bt,[e("li",Nt,[e("a",Rt,[e("span",null,[p[6]||(p[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Ft,c(_.username),1)])]),e("ul",zt,[p[9]||(p[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),p[10]||(p[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),p[11]||(p[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),p[12]||(p[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),_.user&&_.user.roles.length>1?(t(!0),s(U,{key:0},q(_.user.roles,J=>(t(),s("li",null,[z(P,{to:`/${J.toLowerCase()}`,class:"dropdown-item"},{default:R(()=>[e("span",Gt,c(J),1)]),_:2},1032,["to"])]))),256)):E("",!0),e("li",null,[z(P,{to:"/",class:"dropdown-item"},{default:R(()=>p[7]||(p[7]=[Q(" Main ")])),_:1})]),p[13]||(p[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[z(P,{to:"/account/logout",class:"dropdown-item"},{default:R(()=>p[8]||(p[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),Q("Logout ")])),_:1})])])])])])])])}const Yt=Ve(Pt,[["render",jt]]),Wt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const n=document.getElementById("top");n&&n.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let n=this;if(!n.$el.getElementsByClassName)return;let p=n.$el.getElementsByClassName("initialHidden");for(let I=0;I<p.length;I++){let V=p[I];V.classList.remove("invisible"),V.classList.remove("d-none")}},close(){const n=this,p=document.referrer.toLowerCase();p&&p.includes("/account/login")?n.$router.go(-2):n.$router.go(-1)},toggle(n){const p=this;p.toggles[n]=!p.toggles[n],localStorage.setItem(p.togglesKey,JSON.stringify(p.toggles))}}},Kt={mixins:[Wt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(n){return window.location.href.indexOf(n)>-1}}},Qt={class:"footer sticky-bottom"},Jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Xt={class:"container-md"},Zt={class:"navbar-text small p-0"},es={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},ts={class:"container-md"},ss={class:"navbar-nav nav-fill w-100"},os={class:"nav-item dropup"},as={class:"dropdown-menu","aria-labelledby":"dropdown01"},ls={class:"nav-item dropup"},ns={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function rs(n,p,I,V,_,D){const P=se("router-link");return t(),s("footer",Qt,[e("div",Jt,[e("div",Xt,[e("span",Zt,"©"+c(_.copyright),1)])]),e("nav",es,[e("div",ts,[e("ul",ss,[e("li",os,[p[3]||(p[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",as,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/announcements"},{default:R(()=>p[0]||(p[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),Q(" Announcements ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/posts"},{default:R(()=>p[1]||(p[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),Q(" Posts ")])),_:1})]),e("li",null,[z(P,{class:"dropdown-item",to:"/member/yellow-pages"},{default:R(()=>p[2]||(p[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),Q(" Yellow Pages ")])),_:1})])])]),e("li",ls,[p[5]||(p[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ns,[e("li",null,[z(P,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:R(()=>p[4]||(p[4]=[Q(" Property Monthly Dues ")])),_:1})])])])])])])])}const is=Ve(Kt,[["render",rs]]),ds={name:"AdminLayout",components:{TopNav:Yt,BottomNav:is},inject:["$config"],mounted(){const p=this.$config;document.title=`Account - ${p.appName}`}},us={class:"d-flex flex-column vh-100"};function cs(n,p,I,V,_,D){const P=se("Toasts"),J=se("router-view");return t(),s("div",us,[z(P),z(J,{class:"flex-grow-1 mb-2"})])}const ms=Ve(ds,[["render",cs]]),fs={__name:"index",setup(n){return he().user,fe(()=>{}),(I,V)=>(t(),s("div",null,V[0]||(V[0]=[Ke('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ps={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"80062e2b-831d-4e1d-8966-1c80a519cd09",VITE_AUTH_POST_LOGOUT_URI:"https://lively-bay-00480981e.5.azurestaticapps.net/",VITE_AUTH_REDIRECT_URI:"window.location.origin + '/accounts/loginRedirect'"},vs=ps;function gs(){Me("$config");const n=vs.VITE_API_URL,p=rt.create({baseURL:n});return Fe.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),p.interceptors.request.use(I=>{Fe.start();const{user:V}=he();return V&&V.token&&(I.headers?(I.headers.Authorization||(I.headers.Authorization=`Bearer ${V.token}`),I.headers["Access-Control-Allow-Origin"]||(I.headers["Access-Control-Allow-Origin"]="*")):I.headers={Authorization:`Bearer ${V.token}`,"Access-Control-Allow-Origin":"*"}),I}),p.interceptors.response.use(I=>(Fe.done(),I),I=>{throw Fe.done(),I}),p}function $e(n){if(!n.appTitle)throw Error("App Title is required.");if(!n.pageTitle)throw Error("Page Title is required.");const p=We(),I=Qe(),V=gs(),_=Je(),D=Ct(),J=he().user,j=()=>J&&J.roles&&J.roles.includes("System"),C=()=>J&&J.roles&&J.roles.includes("administrator"),G=()=>J&&J.roles&&J.roles.includes("employee"),oe=()=>J&&J.roles&&J.roles.includes("Member"),B=async()=>{const Y=document.referrer.toLowerCase();Y&&Y.includes("/accounts/login")?await I.go(-2):await I.go(-1)},A=Y=>{var d;const u=p.path,k=(d=p.query)==null?void 0:d.returnUrl;k&&!(u.startsWith(k)||k.startsWith(u))?I.push(k):I.push(Y)},i=n.appTitle,x=n.pageTitle,$=ce(!1),K=ce(new Map),X=ce(""),m=ce(""),v=ce("");return{appTitle:i,pageTitle:x,busy:$,validations:K,infoMessage:X,warningMessage:m,errorMessage:v,router:I,route:p,axios:V,utils:_,toasts:D,close:B,closeWithReturnUrl:A,generateReturnUrl:_.generateReturnUrl,security:{userId:J?J.userId:"",isSystem:j(),isAdministrator:C(),isEmployee:G(),isMember:oe()}}}const bs={class:"h-100 d-flex align-items-center justify-content-center"},ys={class:"form-signin w-100 m-auto"},$s={class:"h3 mb-3 fw-normal"},ws={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},hs=["innerHTML"],_s={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ks=["disabled"],Ss={key:0,class:"fas fa-fw fa-sync fa-spinner fa-spin me-2"},Ts={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(n){Me("$config");const p=he(),I=Xe(),V=new ze(I.msalConfig),_=be({username:"",password:""}),D={username:{required:ae.withMessage("Username is required.",re),$autoDirty:!0,$lazy:!0},password:{required:ae.withMessage("Password is required.",re),$autoDirty:!0,$lazy:!0}},P=Se(D,_),{appTitle:J,pageTitle:j,busy:C,isDirty:G,validations:oe,infoMessage:B,warningMessage:A,errorMessage:i,router:x,route:$,axios:K,utils:X,toasts:m,close:v,security:Y}=$e({appTitle:"Sony FAST POC",pageTitle:"Sign On"}),u={redirectUri:window.location.origin+"/accounts/login"};fe(async()=>{C.value=!0,await V.initialize();try{const b=await V.ssoSilent(u);if(b){await d(b.account);return}}catch(b){b.errorCode!=="login_required"&&m.error("Error while Signing In",b)}await V.handleRedirectPromise().then(async b=>{if(b){const l=V.getAllAccounts();if(l.length===0){await V.loginRedirect(u);return}const f=l[0];await d(f);return}else{m.info("SignIn","No recent session. Please sign in using your AD Account.");return}}).catch(b=>{debugger;m.error("Error while Signing In",b),console.log(b)}),C.value=!1});const k=async()=>{var b={account:V.getActiveAccount(),scopes:[]};await V.acquireTokenSilent(b).then(l=>{const a=l.account.idToken,r=pt(a);r.token=l.accessToken,console.log(l),r.roles||(r.roles=[]),r.userId=r.sub,p.login(r);var M=$.query.returnUrl;M?x.push(decodeURIComponent(M)):r.roles.length===1?x.push(`/${r.roles[0].toLowerCase()}`):x.push("/")}).catch(l=>{console.error(`error during acquireTokenSilent: ${l}`)})},d=async b=>{V.setActiveAccount(b),m.success("SignIn","Sign in successful.",{onClose:async()=>{await k()}})},h=async()=>{const b=V.getAllAccounts();if(b.length===0){await V.loginRedirect(u);return}const l=b[0];await d(l)};return(b,l)=>(t(),ve(ye,null,{default:R(()=>[e("div",bs,[e("main",ys,[e("div",null,[e("h1",$s,c(o(J)),1),e("div",null,[o(i)?(t(),s("div",ws,[l[1]||(l[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(i)},null,8,hs)])):E("",!0),o(P).$error?(t(),s("div",_s,[l[2]||(l[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(P).$errors,f=>(t(),s("li",{key:f.$uid},c(f.$message),1))),128))])])):E("",!0)]),e("button",{onClick:l[0]||(l[0]=f=>h()),disabled:o(C),class:"btn btn-primary w-100 py-2"},[o(C)?(t(),s("span",Ss)):E("",!0),l[3]||(l[3]=Q("Single Sign On "))],8,ks)])])])]),_:1}))}},Is=Ve(Ts,[["__scopeId","data-v-e1d5198f"]]),Ms={__name:"loginRedirect",setup(n){const p=useMsal(),I=new ze(p.msalConfig);debugger;return fe(async()=>{debugger;await I.initialize(),await I.handleRedirectPromise()}),(V,_)=>(t(),ve(ye,null,{default:R(()=>_[0]||(_[0]=[e("div",null," Login successful, redirecting... ",-1)])),_:1}))}},xs={class:"h-100 d-flex align-items-center justify-content-center"},Cs={__name:"logout",setup(n){const p=he();return p.user,fe(async()=>{p.logoutWithRedirect()}),(I,V)=>(t(),s("div",xs,V[0]||(V[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[Q(" You have logged out from HOA MS."),e("br"),Q(" Click "),e("a",{href:"/",class:"d-inline"},"here"),Q(" to go back to home page. ")])],-1)])))}},Vs={class:"h-100 d-flex align-items-center justify-content-center"},Ps={class:"card m-3"},Os={class:"card-header"},As={class:"card-body"},Us={class:"m-2"},Ls={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ds=["innerHTML"],Hs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Es={class:"row row-cols-1 row-cols-sm-3"},qs={class:"col-sm"},Bs={class:"form-group"},Ns={key:0,class:"d-block invalid-feedback"},Rs={class:"col-sm"},Fs={class:"form-group"},zs={key:0,class:"d-block invalid-feedback"},Gs={class:"col-sm"},js={class:"form-group"},Ys={key:0,class:"d-block invalid-feedback"},Ws={class:"row row-cols-1 row-cols-sm-3"},Ks={class:"col"},Qs={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Xs={class:"col"},Zs={class:"form-group"},eo={key:0,class:"d-block invalid-feedback"},to={class:"row row-cols-1 row-cols-sm-3"},so={class:"col-sm"},oo={class:"form-group"},ao={key:0,class:"d-block invalid-feedback"},lo={class:"col-sm"},no={class:"form-group"},ro={key:0,class:"d-block invalid-feedback"},io={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},uo={class:"col"},co=["disabled"],mo={class:"col"},fo={class:"col"},po={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(n){const p=be({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),I=(Y,u)=>Y===u.password,V={firstName:{required:ae.withMessage("First name is required.",re),$autoDirty:!0,$lazy:!0},middleName:{required:ae.withMessage("Middle name is required.",re),$autoDirty:!0,$lazy:!0},lastName:{required:ae.withMessage("Last name is required.",re),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ae.withMessage("Phone number is required.",re),$autoDirty:!0,$lazy:!0},email:{required:ae.withMessage("Email is required.",re),$autoDirty:!0,$lazy:!0},password:{required:ae.withMessage("Password is required.",re),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ae.withMessage("Confirm password is required.",re),confirmSamePassword:ae.withMessage("Password and confirm passwrod are different.",I),$autoDirty:!0,$lazy:!0}},_=Se(V,p),{appTitle:D,pageTitle:P,busy:J,isDirty:j,validations:C,infoMessage:G,warningMessage:oe,errorMessage:B,router:A,axios:i,utils:x,toasts:$,close:K,security:X}=$e({appTitle:"HOA MS",pageTitle:"Register User"}),m=Me("$config");fe(()=>{});const v=async()=>{const Y=p;if(J.value)return;if(!await _.value.$validate()){window.scrollTo(0,0);return}B.value=null;try{J.value=!0;const k=x.clone(Y);k.tenantid=m.tenantId;debugger;await i({method:"post",url:"/api/v1/accounts/register",data:k}).then(d=>{$.success("Register","Registration was successfull.",{onClose:async()=>{await A.push("/accounts/login")}})})}catch(k){B.value=x.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{J.value=!1}};return(Y,u)=>{const k=se("router-link");return t(),ve(ye,null,{default:R(()=>[e("div",Vs,[e("div",Ps,[e("h4",Os,c(o(P)),1),e("div",As,[e("div",Us,[o(B)?(t(),s("div",Ls,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(B)},null,8,Ds)])):E("",!0),o(_).$error?(t(),s("div",Hs,[u[9]||(u[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(_).$errors,d=>(t(),s("li",{key:d.$uid},c(d.$message),1))),128))])])):E("",!0)]),e("div",Es,[e("div",qs,[e("div",Bs,[u[10]||(u[10]=e("label",null,"First Name",-1)),N(e("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>p.firstName=d),type:"text",class:"form-control"},null,512),[[Z,p.firstName]]),o(_).firstName.$error?(t(),s("div",Ns,[(t(!0),s(U,null,q(o(_).firstName.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])]),e("div",Rs,[e("div",Fs,[u[11]||(u[11]=e("label",null,"Middle Name",-1)),N(e("input",{"onUpdate:modelValue":u[1]||(u[1]=d=>p.middleName=d),type:"text",class:"form-control"},null,512),[[Z,p.middleName]]),o(_).middleName.$error?(t(),s("div",zs,[(t(!0),s(U,null,q(o(_).middleName.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])]),e("div",Gs,[e("div",js,[u[12]||(u[12]=e("label",null,"Last Name",-1)),N(e("input",{"onUpdate:modelValue":u[2]||(u[2]=d=>p.lastName=d),type:"text",class:"form-control"},null,512),[[Z,p.lastName]]),o(_).lastName.$error?(t(),s("div",Ys,[(t(!0),s(U,null,q(o(_).lastName.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])])]),e("div",Ws,[e("div",Ks,[e("div",Qs,[u[13]||(u[13]=e("label",null,"Phone Number",-1)),N(e("input",{"onUpdate:modelValue":u[3]||(u[3]=d=>p.phoneNumber=d),type:"tel",class:"form-control"},null,512),[[Z,p.phoneNumber]]),o(_).phoneNumber.$error?(t(),s("div",Js,[(t(!0),s(U,null,q(o(_).phoneNumber.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])]),e("div",Xs,[e("div",Zs,[u[14]||(u[14]=e("label",null,"Email",-1)),N(e("input",{"onUpdate:modelValue":u[4]||(u[4]=d=>p.email=d),type:"email",class:"form-control"},null,512),[[Z,p.email]]),o(_).email.$error?(t(),s("div",eo,[(t(!0),s(U,null,q(o(_).email.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])])]),e("div",to,[e("div",so,[e("div",oo,[u[15]||(u[15]=e("label",null,"Password",-1)),N(e("input",{"onUpdate:modelValue":u[5]||(u[5]=d=>p.password=d),type:"password",class:"form-control"},null,512),[[Z,p.password]]),o(_).password.$error?(t(),s("div",ao,[(t(!0),s(U,null,q(o(_).password.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])]),e("div",lo,[e("div",no,[u[16]||(u[16]=e("label",null,"Confirm Password",-1)),N(e("input",{"onUpdate:modelValue":u[6]||(u[6]=d=>p.confirmPassword=d),type:"password",class:"form-control"},null,512),[[Z,p.confirmPassword]]),o(_).confirmPassword.$error?(t(),s("div",ro,[(t(!0),s(U,null,q(o(_).confirmPassword.$errors,d=>(t(),s("div",{key:d.$uid},c(d.$message),1))),128))])):E("",!0)])])]),e("div",io,[e("div",uo,[e("button",{disabled:o(_).$dirty&&o(_).$invalid,onClick:u[7]||(u[7]=d=>v()),class:"btn btn-primary w-100"},u[17]||(u[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),Q("Register ")]),8,co)]),e("div",mo,[z(k,{to:"/",class:"btn btn-outline-primary w-100"},{default:R(()=>u[18]||(u[18]=[Q("Home")])),_:1})]),e("div",fo,[z(k,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:R(()=>u[19]||(u[19]=[Q("Login")])),_:1})])])])])])]),_:1})}}},vo={path:"/accounts",component:ms,props:!1,meta:{},children:[{path:"",component:fs},{path:"login",component:Is},{path:"loginRedirect",component:Ms},{path:"logout",component:Cs},{path:"register",component:po}]};function et(){const n=Qe(),p=j=>window.location.href.indexOf(j)>-1,I=j=>localStorage.getItem("data-bs-theme")||j,V=j=>{document.documentElement.setAttribute("data-bs-theme",j),localStorage.setItem("data-bs-theme",j)},_=async()=>await rt.get("https://bootswatch.com/api/5.json").then(j=>j.data),D=j=>{const C=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");C&&j?(C.setAttribute("href",j),localStorage.setItem("bootswatch-theme",j)):alert("cannot query css link")},P=j=>{J(),n.push(j)},J=()=>{if(screen.width<576){const C=document.getElementById("navbarCollapse");if(C){const G=it.getInstance(C);G&&G.hide()}}};return{isActive:p,getCurrentBsTheme:I,changeBsTheme:V,getBootswatch:_,changeTheme:D,navigate:P,collapseNavbar:J}}const go={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},bo={class:"container-md"},yo={class:"navbar-collapse collapse",id:"navbarCollapse"},$o={class:"navbar-nav"},wo={class:"nav-item"},ho={class:"nav-item dropdown"},_o={class:"dropdown-menu","aria-labelledby":"dropdown01"},ko={class:"nav-item"},So={class:"nav-item dropdown"},To={class:"dropdown-menu","aria-labelledby":"dropdown01"},Io={class:"navbar-nav ms-auto"},Mo={class:"nav-item dropdown"},xo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co=["onClick"],Vo={class:"nav-item dropdown"},Po={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Oo={class:"d-sm-none d-xl-inline"},Ao={key:0},Uo={key:1},Lo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Do={key:0},Ho={key:1},Eo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(n){const p=Xe(),{isActive:I,getCurrentBsTheme:V,changeBsTheme:_,getBootswatch:D,changeTheme:P,navigate:J,collapseNavbar:j}=et(),C=he(),G=C.user,oe=be({user:G,username:G?G.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const x=oe;x.bootswatch=await D();const $=V(x.bsTheme);debugger;$&&(x.bsTheme=$,_(x.bsTheme));const K=localStorage.getItem("bootswatch-theme");K&&(x.currentTheme=K,P(K))});const B=x=>{P(x),oe.currentTheme=x,j()},A=x=>{_(x),oe.bsTheme=x,j()},i=async()=>{C.logoutWithRedirect();const x=new ze(p.msalConfig);await x.initialize();const $={mainWindowRedirectUri:"/"};await x.logoutPopup($)};return(x,$)=>{const K=se("router-link");return t(),ve(ye,null,{default:R(()=>[e("nav",go,[e("div",bo,[z(K,{class:"navbar-brand",to:"/administrator"},{default:R(()=>[Q(c(n.appName),1)]),_:1}),$[18]||($[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",yo,[e("ul",$o,[e("li",wo,[z(K,{to:"/videos",onClick:o(j),class:"nav-link"},{default:R(()=>$[3]||($[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",ho,[$[6]||($[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",_o,[e("li",null,[z(K,{to:"/source-groups",onClick:o(j),class:"dropdown-item"},{default:R(()=>$[4]||($[4]=[Q(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[z(K,{to:"/source-locations",onClick:o(j),class:"dropdown-item"},{default:R(()=>$[5]||($[5]=[Q(" Locations ")])),_:1},8,["onClick"])])])]),e("li",ko,[z(K,{to:"/vod-sources",onClick:o(j),class:"nav-link"},{default:R(()=>$[7]||($[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",So,[$[10]||($[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",To,[e("li",null,[z(K,{to:"/program-templates",onClick:o(j),class:"dropdown-item"},{default:R(()=>$[8]||($[8]=[Q(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[z(K,{to:"/channels",onClick:o(j),class:"dropdown-item"},{default:R(()=>$[9]||($[9]=[Q(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",Io,[e("li",Mo,[$[14]||($[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",xo,[e("li",null,[oe.bsTheme==="dark"?(t(),s("button",{key:0,onClick:$[0]||($[0]=X=>A("light")),class:"dropdown-item"},$[11]||($[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Q("Dark Mode ")]))):(t(),s("button",{key:1,onClick:$[1]||($[1]=X=>A("dark")),class:"dropdown-item"},$[12]||($[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Q("Light Mode ")])))]),$[13]||($[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(U,null,q(oe.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:m=>B(X.cssCdn),class:te(["dropdown-item",{active:oe.currentTheme===X.cssCdn}])},c(X.name),11,Co)]))),256))])]),e("li",Vo,[e("a",Po,[e("span",null,[$[15]||($[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Oo,[o(G)?(t(),s("span",Ao,c(o(G).name),1)):(t(),s("span",Uo," Guest "))])])]),e("ul",Lo,[o(G)?(t(),s("li",Do,[e("button",{onClick:$[2]||($[2]=X=>i()),class:"dropdown-item"},$[16]||($[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),Q("Logout ")]))])):(t(),s("li",Ho,[z(K,{to:"/accounts/login",class:"dropdown-item"},{default:R(()=>$[17]||($[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),Q("Login ")])),_:1})]))])])])])])])]),_:1})}}},qo={id:"sideNav",class:"collapse collapse-horizontal show"},Bo={class:"d-flex flex-column bg-dark min-vh-100 overflow-y-auto"},No={class:"navbar bg-primary bg-gradient shadow-sm","data-bs-theme":"dark"},Ro={class:"navbar-brand me-0 mb-1 px-2"},Fo={class:"d-none d-sm-inline"},zo={class:"nav nav-pills flex-column px-1 mt-2",role:"tablist"},Go={class:"nav-item dropdown"},jo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Yo={class:"nav-item dropdown"},Wo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Ko={class:"nav-item dropdown"},Qo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Jo={class:"nav-item dropdown"},Xo={class:"dropdown-menu dropdown-menu-end w-100","aria-labelledby":"dropdown01"},Zo=["onClick"],ea={class:"nav nav-pills flex-column mt-auto px-1 mb-3",role:"tablist"},ta={class:"nav-item dropdown"},sa={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},oa={class:"d-none d-sm-inline"},aa={key:0},la={key:1},na={class:"dropdown-menu dropdown-menu-end w-100 position-absolute","aria-labelledby":"dropdown01"},ra={key:0},ia={key:1},da={key:0,class:"fas fa-fw fa-angle-double-left"},ua={key:1,class:"fas fa-fw fa-angle-double-right"},ca={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-FAST"}},setup(n){const p=Xe(),I=We(),V=Qe(),_=he(),D=_.user,{isActive:P,getCurrentBsTheme:J,changeBsTheme:j,getBootswatch:C,changeTheme:G,navigate:oe,collapseNavbar:B}=et(),A=be({user:D,username:D?D.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});fe(async()=>{const k=A;k.bootswatch=await C();const d=J(k.bsTheme);d&&(k.bsTheme=d,j(k.bsTheme));const h=localStorage.getItem("bootswatch-theme");h&&(k.currentTheme=h,G(h)),X();const b=document.getElementById("sideNav");b&&(K.value?b.classList.add("show"):b.classList.remove("show"))});const i=k=>{G(k),A.currentTheme=k},x=k=>{j(k),A.bsTheme=k},$=async()=>{_.logoutWithRedirect();const k=new ze(p.msalConfig);await k.initialize();const d={mainWindowRedirectUri:window.location.origin};await k.logoutRedirect(d)},K=ce(!0),X=()=>{const k=localStorage.getItem("show-sideNav")||"true";K.value=k==="true"},m=()=>{localStorage.setItem("show-sideNav",K.value),it.getInstance("#sideNav").toggle()},v=()=>{K.value=!K.value,m()},Y=k=>{var d=I.path.startsWith(k);return d?"active":""},u=async(k,d)=>{const h=vt.getInstance(`#${d}`);h&&h.hide(),await V.push(k)};return(k,d)=>{const h=se("router-link");return t(),s("div",null,[e("div",qo,[e("div",Bo,[e("nav",No,[z(h,{to:"/",class:"text-decoration-none w-100 text-center"},{default:R(()=>[e("h1",Ro,[d[9]||(d[9]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Fo,c(n.appName),1)])]),_:1})]),e("ul",zo,[e("li",Go,[e("a",{class:te([Y("/source-"),"nav-link dropdown-toggle"]),href:"#",id:"sourcesDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},d[10]||(d[10]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Sources",-1)]),2),e("ul",jo,[e("li",null,[e("button",{onClick:d[0]||(d[0]=b=>u("/source-groups","sourcesDropdown")),class:te([Y("/source-groups"),"dropdown-item"]),role:"button"},d[11]||(d[11]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Groups",-1)]),2),e("button",{onClick:d[1]||(d[1]=b=>u("/source-locations","sourcesDropdown")),class:te([Y("/source-locations"),"dropdown-item"]),role:"button"},d[12]||(d[12]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Locations",-1)]),2)])])]),e("li",Yo,[e("a",{class:te([[Y("/videos"),Y("/vod-sources")],"nav-link dropdown-toggle"]),href:"#",id:"assetsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},d[13]||(d[13]=[e("span",{class:"fas fa-fw fa-photo-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Asset Library",-1)]),2),e("ul",Wo,[e("li",null,[e("button",{onClick:d[2]||(d[2]=b=>u("/videos","assetsDropdown")),class:te([Y("/videos"),"dropdown-item"]),role:"button"},d[14]||(d[14]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Videos",-1)]),2),e("button",{onClick:d[3]||(d[3]=b=>u("/vod-sources","assetsDropdown")),class:te([Y("/vod-sources"),"dropdown-item"]),role:"button"},d[15]||(d[15]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"VOD",-1)]),2)])])]),e("li",Ko,[e("a",{class:te([[Y("/program-templates"),Y("/channels")],"nav-link dropdown-toggle"]),href:"#",id:"assemblyDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},d[16]||(d[16]=[e("span",{class:"fas fa-fw fa-industry"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channel Assembly",-1)]),2),e("ul",Qo,[e("li",null,[e("button",{onClick:d[4]||(d[4]=b=>u("/program-templates","assemblyDropdown")),class:te([Y("/program-templates"),"dropdown-item"]),role:"button"},d[17]||(d[17]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Program Templates",-1)]),2),e("button",{onClick:d[5]||(d[5]=b=>u("/channels","assemblyDropdown")),class:te([Y("/channels"),"dropdown-item"]),role:"button"},d[18]||(d[18]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Channels",-1)]),2)])])]),e("li",Jo,[d[22]||(d[22]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-sm-inline ms-1"},"Themes")],-1)),e("ul",Xo,[e("li",null,[A.bsTheme==="dark"?(t(),s("button",{key:0,onClick:d[6]||(d[6]=b=>x("light")),class:"dropdown-item"},d[19]||(d[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Q("Dark Mode ")]))):(t(),s("button",{key:1,onClick:d[7]||(d[7]=b=>x("dark")),class:"dropdown-item"},d[20]||(d[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),Q("Light Mode ")])))]),d[21]||(d[21]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(U,null,q(A.bootswatch.themes,b=>(t(),s("li",null,[e("button",{onClick:l=>i(b.cssCdn),class:te(["dropdown-item",{active:A.currentTheme===b.cssCdn}])},c(b.name),11,Zo)]))),256))])])]),e("ul",ea,[e("li",ta,[e("a",sa,[e("span",null,[d[23]||(d[23]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",oa,[o(D)?(t(),s("span",aa,c(o(D).name),1)):(t(),s("span",la," Guest "))])])]),e("ul",na,[o(D)?(t(),s("li",ra,[e("button",{onClick:d[8]||(d[8]=b=>$()),class:"dropdown-item"},d[24]||(d[24]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),Q("Logout ")]))])):(t(),s("li",ia,[z(h,{to:"/accounts/login",class:"dropdown-item"},{default:R(()=>d[25]||(d[25]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),Q("Login ")])),_:1})]))])])])])]),e("button",{id:"sideNavToggler",onClick:v,"data-bs-target":"#sideNav","data-bs-toggle":"collapse",class:"d-none btn btn-sm btn-warning fixed-bottom z-3 p-0",style:{width:"2rem",height:"2rem"}},[K.value?(t(),s("span",da)):(t(),s("span",ua))])])}}},ma={class:"footer sticky-bottom"},fa={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},pa={class:"container-md"},va={class:"navbar-text small p-0"},ga={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(n){et();const p=Me("$config"),V=he().user;let D=new Date().getFullYear();const P=be({user:V,username:V?V.nameFull:"Guest",copyright:`2020-${D} ${p.appName}`});return fe(async()=>{}),(J,j)=>(t(),s("footer",ma,[e("div",fa,[e("div",pa,[e("span",va,"©"+c(P.copyright),1)])])]))}},ba={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ze.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(n){n.message&&this.addMessage(n.title,n.message,n.type,n.options)},async addMessage(n,p,I,V={}){var _={id:this.count++,title:n,message:p,type:I,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};_=Object.assign({},_,V),this.messages.unshift(_),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),_.timeOut>0&&await this.startTimeout(_)},async startTimeout(n,p=0){const I=this,V=performance.now(),_=async()=>{n.animationFrame=requestAnimationFrame(async D=>{const P=D+p-V;if(!I.exists(n)||n.paused){cancelAnimationFrame(n.animationFrame);return}else if(P<n.timeOut){const J=P/n.timeOut;n.progress=J,await _()}else{n.progress=1,cancelAnimationFrame(n.animationFrame),I.remove(n);return}})};await _()},pauseProgress(n){n.timeOut<=0||(n.paused=!0)},async resumeProgress(n){n.timeOut<=0||(n.paused=!1,await this.startTimeout(n,n.timeOut*n.progress))},getCurrentProgress(n){return Math.round(n.progress*100)===100?100:n.progress*100},getIconClass(n){const p=n.type;let I="";switch(p){case"success":I="fas fa-fw fa-circle-check";break;case"info":I="fas fa-fw fa-circle-info";break;case"warning":I="fas fa-fw fa-circle-exclamation";break;case"danger":I="fas fa-fw fa-triangle-exclamation";break}let V=I;return n.rtl?"icon-right "+V:"icon-left "+V},async remove(n){const p=this.messages.findIndex(I=>I.id===n.id);this.messages.splice(p,1),typeof n.onClose=="function"&&await n.onClose()},exists(n){return this.messages.findIndex(I=>I.id===n.id)!==-1}}},ya={"aria-live":"polite","aria-atomic":"true",class:"position-static"},$a=["onMouseover","onMouseout"],wa={class:"me-auto text-white"},ha=["onClick"],_a={class:"toast-body"},ka=["innerHTML"],Sa={key:0,class:"progress m-1",style:{height:"4px"}};function Ta(n,p,I,V,_,D){return t(),ve(ye,null,{default:R(()=>[e("div",ya,[z(_e,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:R(()=>[(t(!0),s(U,null,q(_.messages,P=>(t(),s("div",{key:P.id,class:te(["toast show mb-2 ms-auto",`border-${P.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:J=>D.pauseProgress(P),onMouseout:J=>D.resumeProgress(P)},[e("div",{class:te(["toast-header",`bg-${P.type}`])},[e("strong",wa,[e("i",{class:te([D.getIconClass(P),"me-1"])},null,2),Q(c(P.title),1)]),P.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:J=>D.remove(P)},p[0]||(p[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ha)):E("",!0)],2),e("div",_a,[e("div",{innerHTML:P.message},null,8,ka)]),P.timeOut>0&&P.showProgress?(t(),s("div",Sa,[e("div",{class:te(`bg-${P.type}`),style:dt({width:D.getCurrentProgress(P)+"%"})},null,6)])):E("",!0)],42,$a))),128))]),_:1})])]),_:1})}const Ia=Ve(ba,[["render",Ta],["__scopeId","data-v-5272bd9a"]]),Ma={name:"AdminLayout",components:{TopNav:Eo,SideNav:ca,BottomNav:ga},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},xa={class:"d-flex flex-row flex-nowrap vh-100"};function Ca(n,p,I,V,_,D){const P=se("Toasts"),J=se("SideNav"),j=se("router-view"),C=se("DialogsWrapper");return t(),s("div",xa,[z(P),z(J),z(j,{class:"d-flex flex-column w-100 h-100"}),z(C)])}const Va=Ve(Ma,[["render",Ca]]),Pa={class:"mt-2 container overflow-y-auto"},Oa={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Aa=["innerHTML"],Ua={class:"row mb-3"},La={class:"col-xl-4"},Da={class:""},Ha=["id"],Ea={key:1,class:"card card-header bg-warning-subtle mb-2"},qa={class:"col-xl-8 overflow-x-auto mt-2 mt-xl-0"},Ba={class:"d-flex flex-column align-items-start"},Na=["src"],Ra={class:""},Fa={class:"d-flex flex-row"},za={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Ga={class:"text-center"},ja=["src"],Ya={class:"text-end"},Wa={class:"text-wrap text-truncate"},Ka={class:"overflow-y-auto"},Qa={class:"badge bg-info me-2"},Ja={key:0,class:"badge bg-warning mb-1"},Xa={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,isDirty:_,validations:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,generateReturnUrl:i,security:x}=$e({appTitle:"ARC AIO",pageTitle:"Dashboard"});Me("$config"),he().user;const K=be({item:null});ce("805630ed-f288-4f2f-83a4-6c71312f6970"),ce(),fe(async()=>{await v()}),Ae(()=>{K.item.forEach(k=>{k.hls&&(k.hls.stopLoad(),k.hls.destroy())})});const X=async()=>{const k=K;if(!V.value)try{V.value=!0;const d="/api/v1/channels/epg/";k.item=[],await G.get(d).then(h=>{k.item=h.data}),k.item.forEach(h=>{Y(h)})}catch(d){j.value=oe.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{V.value=!1}},m=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await G.get("/api/v1/channels/reset/").then(h=>{B.success("Reset All Data","Reset data was successful.")})}catch(d){j.value=oe.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{V.value=!1}},v=async()=>{await X()},Y=k=>{if(k.manifestUrl&&Hls.isSupported()){u(k);var d=document.getElementById(`video-${k.id}`);if(!d)return;k.hls&&(k.hsl.stopLoad(),k.hls.destroy());let h=k.manifestUrl;k.hls=oe.createHlsStream(d,h);return}},u=k=>{k.outputs&&k.outputs.forEach(h=>{if(h.hls){debugger;h.hls.detachMedia(),h.hls.destroy(),delete h.hls}h.playbackConfigurations.forEach(b=>{if(b.hls){debugger;b.hls.detachMedia(),b.hls.destroy(),delete b.hls}})})};return(k,d)=>{const h=se("PageHeader"),b=se("router-link");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(h,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(I)},{default:R(()=>[e("div",null,[e("button",{onClick:d[0]||(d[0]=l=>m()),class:"ms-2 btn btn-danger"},d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),Q("Reset All Data ")])),e("button",{onClick:d[1]||(d[1]=l=>v()),class:"ms-2 btn btn-secondary"},d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Pa,[o(j)?(t(),s("div",Oa,[d[4]||(d[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(j))},null,8,Aa)])):E("",!0),(t(!0),s(U,null,q(K.item,l=>(t(),s("div",null,[e("div",Ua,[e("div",La,[e("div",Da,[l.manifestUrl?(t(),s("video",{key:0,id:`video-${l.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,Ha)):(t(),s("div",Ea," Channel not yet published "))])]),e("div",qa,[e("div",Ba,[e("div",null,[e("h4",null,[e("img",{src:l.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,Na),z(b,{to:`${n.urlViewChannel}/${l.id}/${o(i)()}`},{default:R(()=>[Q(c(l.title),1)]),_:2},1032,["to"])])]),e("div",Ra,[e("div",Fa,[(t(!0),s(U,null,q(l.programs,f=>(t(),s("div",za,[e("div",Ga,[e("img",{src:f.image,class:"img-fluid border",style:{height:"64px"}},null,8,ja)]),e("div",Ya,c(o(oe).moment(f.since).format("hh:mm a"))+"-"+c(o(oe).moment(f.till).format("hh:mm a")),1),e("div",Wa,c(f.title),1),e("div",Ka,[(t(!0),s(U,null,q(f.genres,a=>(t(),s("span",Qa,c(a),1))),256))]),o(oe).moment().isAfter(f.since)&&o(oe).moment().isBefore(f.till)?(t(),s("span",Ja,"Now Playing")):E("",!0)]))),256))])])])])])]))),256))])])]),_:1})}}};function Le(n){if(!n.cacheKey)throw Error("Cache Key required.");if(!n.baseUrl)throw Error("Base Url required.");const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,closeWithReturnUrl:B,generateReturnUrl:A,security:i}=$e({appTitle:n.appTitle,pageTitle:n.pageTitle}),x=JSON.parse(JSON.stringify(n.filter));x.pageIndex=x.pageIndex||1,x.pageSize=x.pageSize||5,x.sortField=x.sortField||"",x.sortOrder=x.sortOrder||1,x.updateUrl=x.updateUrl||!1,x.items=x.items||[],x.query=x.query||{},x.query.criteria=x.query.criteria||"";const $=ce(x),K=()=>{var l;if(V.value){console.log("Paginated search is currently busy.");return}const d=JSON.parse(localStorage.getItem(n.cacheKey))||{},h=new URLSearchParams(window.location.search),b=$.value;b.query.criteria=h.get("c")||d.criteria||b.query.criteria||"",b.pageIndex=parseInt(h.get("p"),10)||d.pageIndex||b.pageIndex||1,b.pageSize=parseInt(h.get("s"),10)||d.pageSize||b.pageSize||5,b.sortField=h.get("sf")||d.sortField||b.sortField||"",b.sortOrder=parseInt(h.get("so"),10)||d.sortOrder||b.sortOrder||1,b.visible=d.visible||b.visible,(l=n.initializeFilter)==null||l.call(n,$,n.cacheKey)},X=()=>{if(n.getQuery)return n.getQuery($.value);{const d=$.value;return["?c=",encodeURIComponent(d.query.criteria),"&p=",d.pageIndex,"&s=",d.pageSize,"&sf=",d.sortField,"&so=",d.sortOrder].join("")}},m=()=>{if(n.saveQuery)n.saveQuery($.value,n.cacheKey);else{const d=$.value;localStorage.setItem(n.cacheKey,JSON.stringify({criteria:d.query.criteria,pageIndex:d.pageIndex,pageSize:d.pageSize,sortField:d.sortField,sortOrder:d.sortOrder,visible:d.visible}))}};return{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,closeWithReturnUrl:B,generateReturnUrl:A,security:i,filter:$,initializeFilter:K,getQuery:X,saveQuery:m,search:async d=>{var b;let h=$.value;if(V.value){console.log("Paginated search is currently busy.");return}d>0&&(h.pageIndex=d);try{V.value=!0,P.value="";const l=X();h.selected=null,await j(`${n.baseUrl}/${l}`).then(async f=>{var r;Array.isArray(f.data)?h.items=f.data:h=Object.assign(h,f.data);let a=location.pathname;a.endsWith("/")?a+=l:a+="/"+l,h.updateUrl&&window.history.replaceState(l,`${p}-search`,a),h.items.forEach(M=>{M.expand=!1}),m(),(r=n.successAction)==null||r.call(n,$.value)})}catch(l){if(localStorage.removeItem(n.cacheKey),n.failAction)n.failAction(l);else{const f=C.getErrorMessageAsHtml(l);P.value=f,G.error("Error Occured",f)}}finally{V.value=!1,(b=n.finalAction)==null||b.call(n)}},getRowNumber:d=>{const h=$.value;return(h.pageIndex-1)*h.pageSize+(d+1)},setSelected:d=>{const h=$.value;h.selected&&d&&h.selected===d?h.selected=null:(h.selected&&(h.selected.expand=!1),h.selected=d,h.selected.expand=!0)},isSelected:d=>{const h=$.value;return d===null||h.selected===null?!1:d===h.selected}}}const Za=["disabled"],el={class:"row row-cols-1 row-cols-sm-3"},tl={class:"col"},sl={class:"form-floating mb-2"},ol={key:0,class:"d-block invalid-feedback"},al={class:"col"},ll={class:"form-floating"},nl={class:"col"},rl={class:"form-floating"},il={class:"col"},dl={class:"form-floating mb-2"},ul={class:"row row-cols-1 row-cols-sm-2"},cl={class:"col-sm-8"},ml={class:"ps-2"},fl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border"},pl={class:"col"},vl={class:"form-check"},gl=["onUpdate:modelValue","id"],bl=["for"],yl={class:"col-sm-4"},$l={class:"border p-2"},wl={class:"form-check"},hl=["onUpdate:modelValue","id"],_l=["for"],kl={class:"table-responsive mt-2"},Sl={class:"text-end"},Tl={class:"table table-sm mb-0 mt-2"},Il={class:"align-middle"},Ml={class:"text-center"},xl=["onUpdate:modelValue"],Cl=["onUpdate:modelValue"],Vl=["onUpdate:modelValue"],Pl={class:"text-start"},Ol=["onClick"],Al={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Video"}),A=n,i=be({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:C.moment().format("YYYY-MM-DD"),formats:[]}}),x={item:{title:{title:ae.withMessage("Title is required.",re),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ae.withMessage("Duration is required.",re),$autoDirty:!0,$lazy:!0},dateReleased:{title:ae.withMessage("Date Released is required.",re),$autoDirty:!0,$lazy:!0}}},$=Se(x,i),K=Ie(()=>{const u=C.moment;if(i.durationTime&&i.durationTime!=="00:00:00"&&C.isValidTime(i.durationTime)){const k=u().startOf("day"),d=k.format("YYYY-MM-DD ")+i.durationTime,b=u(d).subtract(k);return i.item.durationInMillis=b.valueOf(),i.item.durationInMillis}return 0});fe(async()=>{await m()});const X=async()=>{const u=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const d=C.clone(u.item);d.durationInMillis=K.value;const h=C.moment(u.item.dateReleased).utc(!0).format();d.dateReleased=h;const b=i.lookups.genres.filter(f=>f.selected).map(f=>f.id);d.genres=b;const l=i.lookups.categories.filter(f=>f.selected).map(f=>f.id);d.categories=l;debugger;await j.post("/api/v1/videos/",d).then(f=>{G.success("Add Video","Video added",{onClose:async()=>{const a=`${A.urlView}/${f.data}`;await J.push(a)}})})}catch(d){P.value=C.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{V.value=!1}},m=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(u=>{const d=u.data.filter(h=>h.id!==0);i.lookups.genres=d})}catch(u){P.value=C.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},v=()=>{const u={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};i.item.formats.push(u)},Y=u=>{i.item.formats.splice(u,1)};return(u,k)=>{const d=se("router-link"),h=se("PageHeader"),b=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(h,{"page-icon":"fas fa-fw fa-video",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:k[0]||(k[0]=l=>X()),class:"btn btn-primary"},k[6]||(k[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Za),z(d,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:R(()=>k[7]||(k[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(b,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[e("div",null,[e("div",el,[e("div",tl,[e("div",sl,[N(e("input",{"onUpdate:modelValue":k[1]||(k[1]=l=>i.item.title=l),id:"name",class:te([o(C).getValidFeedbackCss(i.item.title),"form-control"]),placeholder:"Title"},null,2),[[Z,i.item.title]]),k[8]||(k[8]=e("label",{for:"title",class:""},"Title",-1)),o($).item.title.$error?(t(),s("div",ol,[(t(!0),s(U,null,q(o($).item.title.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):E("",!0)])]),e("div",al,[e("div",ll,[N(e("input",{"onUpdate:modelValue":k[2]||(k[2]=l=>i.item.dateReleased=l),type:"date",step:"1",id:"dateReleased",class:te([o(C).getValidFeedbackCss(i.item.dateReleased),"form-control"])},null,2),[[Z,i.item.dateReleased]]),k[9]||(k[9]=e("label",{for:"dateReleased",class:""},"Date Released",-1))])]),e("div",nl,[e("div",rl,[N(e("input",{"onUpdate:modelValue":k[3]||(k[3]=l=>i.durationTime=l),type:"time",step:"1",id:"durationTime",class:te([o(C).getValidFeedbackCss(i.item.durationTime),"form-control"])},null,2),[[Z,i.durationTime]]),k[10]||(k[10]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",il,[e("div",dl,[N(e("textarea",{"onUpdate:modelValue":k[4]||(k[4]=l=>i.item.description=l),id:"name",class:te([o(C).getValidFeedbackCss(i.item.description),"form-control"]),placeholder:"Description",style:{height:"5rem"}},null,2),[[Z,i.item.description]]),k[11]||(k[11]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",ul,[e("div",cl,[k[12]||(k[12]=e("b",null,"Genres",-1)),e("div",ml,[e("div",fl,[(t(!0),s(U,null,q(i.lookups.genres,l=>(t(),s("div",pl,[e("div",vl,[N(e("input",{"onUpdate:modelValue":f=>l.selected=f,class:"form-check-input",type:"checkbox",id:l.name},null,8,gl),[[qe,l.selected]]),e("label",{class:"form-check-label",for:l.name},c(l.name),9,bl)])]))),256))])])]),e("div",yl,[k[13]||(k[13]=e("b",null,"Categories",-1)),e("div",$l,[(t(!0),s(U,null,q(i.lookups.categories,l=>(t(),s("div",wl,[N(e("input",{"onUpdate:modelValue":f=>l.selected=f,class:"form-check-input",type:"checkbox",id:l.name},null,8,hl),[[qe,l.selected]]),e("label",{class:"form-check-label",for:l.name},c(l.name),9,_l)]))),256))])])]),e("div",kl,[e("div",Sl,[e("button",{onClick:k[5]||(k[5]=l=>v()),class:"btn btn-outline-primary btn-sm"},k[14]||(k[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Tl,[k[17]||(k[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(i.item.formats,(l,f)=>(t(),s("tr",Il,[e("td",Ml,c(f+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":a=>l.format=a,class:"form-control"},k[15]||(k[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,xl),[[ge,l.format]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":a=>l.serverUrl=a,type:"text",class:"form-control"},null,8,Cl),[[Z,l.serverUrl]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":a=>l.path=a,type:"text",class:"form-control"},null,8,Vl),[[Z,l.path]])]),e("td",Pl,[e("button",{onClick:a=>Y(f),class:"btn btn-outline-warning btn-sm"},k[16]||(k[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ol)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ul=["disabled"],Ll={class:"row row-cols-1 row-cols-sm-3"},Dl={class:"col"},Hl={class:"form-floating mb-2"},El={key:0,class:"d-block invalid-feedback"},ql={class:"col"},Bl={class:"form-floating"},Nl={class:"col"},Rl={class:"form-floating"},Fl={class:"col"},zl={class:"form-floating mb-2"},Gl={class:"row row-cols-1 row-cols-sm-2"},jl={class:"col-sm-8"},Yl={class:"ps-2"},Wl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border"},Kl={class:"col"},Ql={class:"form-check"},Jl=["onUpdate:modelValue","id"],Xl=["for"],Zl={class:"col-sm-4"},en={class:"border p-2"},tn={class:"form-check"},sn=["onUpdate:modelValue","id"],on=["for"],an={class:"table-responsive mt-2"},ln={class:"text-end"},nn={class:"table table-sm mb-0 mt-2 border1"},rn={class:"align-middle"},dn={class:"text-center"},un=["onUpdate:modelValue"],cn=["value"],mn=["onUpdate:modelValue"],fn=["onUpdate:modelValue"],pn={class:"text-end"},vn=["onClick"],gn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Edit Video"}),A=n,i=be({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),x={item:{title:{title:ae.withMessage("title is required.",re),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ae.withMessage("durationInMillis is required.",re),$autoDirty:!0,$lazy:!0},dateReleased:{title:ae.withMessage("Date Released is required.",re),$autoDirty:!0,$lazy:!0}}},$=Se(x,i),K=Ie(()=>{const d=C.moment;if(i.durationTime&&i.durationTime!=="00:00:00"&&C.isValidTime(i.durationTime)){const h=d().startOf("day"),b=h.format("YYYY-MM-DD ")+i.durationTime,f=d(b).subtract(h);return i.item.durationInMillis=f.valueOf(),i.item.durationInMillis}return 0});fe(async()=>{await m(),await v(),await X()});const X=async()=>{try{await j.get(`/api/v1/videos/${A.id}/`).then(d=>{i.item=d.data;const h=C.moment(i.item.dateReleased).format("YYYY-MM-DD");i.item.dateReleased=h;const b=i.lookups.genres,l=i.item.genres.map(r=>r.genre);b.forEach(r=>{r.selected=l.includes(r.id)});const f=i.lookups.categories,a=i.item.categories.map(r=>r.category);f.forEach(r=>{r.selected=a.includes(r.id)})})}catch(d){P.value=C.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},m=async()=>{try{await j.get("/api/v1/lookups/video-genres/").then(d=>{const b=d.data.filter(l=>l.id!==0);i.lookups.genres=b})}catch(d){P.value=C.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},v=async()=>{try{await j.get("/api/v1/lookups/video-formats/").then(d=>{const b=d.data.filter(l=>l.id!==0);i.lookups.formats=b})}catch(d){P.value=C.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}},Y=async()=>{const d=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const b=C.clone(d.item);b.durationInMillis=K.value;const l=C.moment(d.item.dateReleased).utc(!0).format();b.dateReleased=l;const f=i.lookups.genres.filter(r=>r.selected).map(r=>r.id);b.genres=f;const a=i.lookups.categories.filter(r=>r.selected).map(r=>r.id);b.categories=a;debugger;await j.put("/api/v1/videos/",b).then(r=>{G.success("Edit Video","Video edited.",{onClose:async()=>{const M=`${A.urlView}/${A.id}`;await J.push(M)}})})}catch(b){P.value=C.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{V.value=!1}},u=()=>{const d={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};i.item.formats.push(d)},k=d=>{i.item.formats.splice(d,1)};return(d,h)=>{const b=se("router-link"),l=se("PageHeader"),f=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-video",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:h[0]||(h[0]=a=>Y()),class:"btn btn-primary"},h[6]||(h[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ul),e("button",{onClick:X,class:"btn btn-secondary ms-2"},h[7]||(h[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(b,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-2"},{default:R(()=>h[8]||(h[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(f,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[e("div",null,[e("div",Ll,[e("div",Dl,[e("div",Hl,[N(e("input",{"onUpdate:modelValue":h[1]||(h[1]=a=>i.item.title=a),id:"name",class:te([o(C).getValidFeedbackCss(i.item.title),"form-control"]),placeholder:"Title"},null,2),[[Z,i.item.title]]),h[9]||(h[9]=e("label",{for:"title",class:""},"Title",-1)),o($).item.title.$error?(t(),s("div",El,[(t(!0),s(U,null,q(o($).item.title.$errors,a=>(t(),s("div",{key:a.$uid},c(a.$message),1))),128))])):E("",!0)])]),e("div",ql,[e("div",Bl,[N(e("input",{"onUpdate:modelValue":h[2]||(h[2]=a=>i.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:te([o(C).getValidFeedbackCss(i.item.dateReleased),"form-control"])},null,2),[[Z,i.item.dateReleased]]),h[10]||(h[10]=e("label",{for:"dateReleased",class:""},"Duration Time",-1))])]),e("div",Nl,[e("div",Rl,[N(e("input",{"onUpdate:modelValue":h[3]||(h[3]=a=>i.durationTime=a),type:"time",step:"1",id:"durationTime",class:te([o(C).getValidFeedbackCss(i.item.ddurationTime),"form-control"])},null,2),[[Z,i.durationTime]]),h[11]||(h[11]=e("label",{for:"durationTime",class:""},"Duration Time",-1))])])]),e("div",Fl,[e("div",zl,[N(e("textarea",{"onUpdate:modelValue":h[4]||(h[4]=a=>i.item.description=a),id:"name",class:"form-control is-valid",placeholder:"Description",style:{height:"5rem"}},null,512),[[Z,i.item.description]]),h[12]||(h[12]=e("label",{for:"description",class:""},"Description",-1))])]),e("div",Gl,[e("div",jl,[h[13]||(h[13]=e("b",null,"Genres",-1)),e("div",Yl,[e("div",Wl,[(t(!0),s(U,null,q(i.lookups.genres,a=>(t(),s("div",Kl,[e("div",Ql,[N(e("input",{"onUpdate:modelValue":r=>a.selected=r,class:"form-check-input",type:"checkbox",id:a.name},null,8,Jl),[[qe,a.selected]]),e("label",{class:"form-check-label",for:a.name},c(a.name),9,Xl)])]))),256))])])]),e("div",Zl,[h[14]||(h[14]=e("b",null,"Categories",-1)),e("div",en,[(t(!0),s(U,null,q(i.lookups.categories,a=>(t(),s("div",tn,[N(e("input",{"onUpdate:modelValue":r=>a.selected=r,class:"form-check-input",type:"checkbox",id:a.name},null,8,sn),[[qe,a.selected]]),e("label",{class:"form-check-label",for:a.name},c(a.name),9,on)]))),256))])])]),e("div",an,[e("div",ln,[e("button",{onClick:h[5]||(h[5]=a=>u()),class:"btn btn-outline-primary btn-sm"},h[15]||(h[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",nn,[h[17]||(h[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(i.item.formats,(a,r)=>(t(),s("tr",rn,[e("td",dn,c(r+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":M=>a.format=M,class:"form-control"},[(t(!0),s(U,null,q(i.lookups.formats,M=>(t(),s("option",{value:M.id},c(M.name),9,cn))),256))],8,un),[[ge,a.format]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":M=>a.serverUrl=M,type:"text",class:"form-control"},null,8,mn),[[Z,a.serverUrl]])]),e("td",null,[N(e("input",{"onUpdate:modelValue":M=>a.path=M,type:"text",class:"form-control"},null,8,fn),[[Z,a.path]])]),e("td",pn,[e("button",{onClick:M=>k(r),class:"btn btn-outline-warning btn-sm"},h[16]||(h[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,vn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},bn={class:"ms-2"},yn={class:"input-group"},$n=["value"],wn={class:"ms-1"},hn={class:"input-group"},_n={class:"ms-1"},kn={class:"input-group"},Sn={class:"table-responsive border shadow-sm"},Tn={class:"table table-hover mb-0"},In=["textContent"],Mn={class:"d-flex flex-row justify-content-start"},xn={class:"mt-1"},Cn=["src"],Vn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Pn={class:"ms-2"},On={key:0},An={class:"badge bg-primary me-1"},Un={key:1},Ln={class:"badge bg-info me-1"},Dn={class:"text-center"},Hn={class:"text-end"},En=["onClick"],qn={key:0,class:"fas fa-fw fa-chevron-circle-up"},Bn={key:1,class:"fas fa-fw fa-chevron-circle-down"},Nn={key:0},Rn={colspan:"999"},Fn={class:""},zn={class:"d-flex flex-column flex-lg-row justify-content-between g-2"},Gn={class:"col mb-2"},jn={class:"col col-lg-auto mx-lg-5 px-lg-5 mb-2"},Yn={class:"col col-lg-auto mb-2"},Wn={key:0},Kn={class:"badge bg-secondary me-1"},Qn="/api/v1/videos/search",Jn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(n){Me("$config");const I=he().user,{appTitle:V,pageTitle:_,busy:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,security:i,filter:x,initializeFilter:$,getQuery:K,saveQuery:X,search:m,getRowNumber:v,setSelected:Y,isSelected:u}=Le({appTitle:"Arcadian-FAST",pageTitle:"Videos",cacheKey:`${I==null?void 0:I.userId}/videos/search`,baseUrl:Qn,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(d,h)=>{const b=d.value,l=new URLSearchParams(window.location.search),f=JSON.parse(localStorage.getItem(h))||{};b.query.genre=l.get("genre")||f.genre||b.query.genre||0,b.query.category=l.get("category")||f.category||b.query.category||0},getQuery:d=>["?c=",encodeURIComponent(d.query.criteria),"&p=",d.pageIndex,"&s=",d.pageSize,"&sf=",d.sortField,"&so=",d.sortOrder,"&genre=",d.query.genre,"&category=",d.query.category].join(""),saveQuery:(d,h)=>{localStorage.setItem(h,JSON.stringify({criteria:d.query.criteria,pageIndex:d.pageIndex,pageSize:d.pageSize,sortField:d.sortField,sortOrder:d.sortOrder,visible:d.visible,genre:d.query.genre,category:d.query.category}))}});fe(async()=>{$(),await k(),await m()});const k=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(d=>{const h=d.data;x.value.lookups.genres=h})}catch(d){j.value=oe.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{}};return(d,h)=>{const b=se("router-link"),l=se("PageHeader"),f=se("m-pagination"),a=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:R(()=>[z(b,{to:n.urlAdd,class:"btn btn-primary"},{default:R(()=>h[5]||(h[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",bn,[e("div",yn,[h[6]||(h[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),N(e("select",{"onUpdate:modelValue":h[0]||(h[0]=r=>o(x).query.genre=r),class:"form-select"},[(t(!0),s(U,null,q(o(x).lookups.genres,r=>(t(),s("option",{value:r.id},c(r.name),9,$n))),256))],512),[[ge,o(x).query.genre]])])]),e("div",wn,[e("div",hn,[h[8]||(h[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),N(e("select",{"onUpdate:modelValue":h[1]||(h[1]=r=>o(x).query.category=r),class:"form-select"},h[7]||(h[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ge,o(x).query.category]])])]),e("div",_n,[e("div",kn,[N(e("input",{"onUpdate:modelValue":h[2]||(h[2]=r=>o(x).query.criteria=r),onKeyup:h[3]||(h[3]=Ue(r=>o(m)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:h[4]||(h[4]=r=>o(m)(1))},h[9]||(h[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(a,{errorMessage:o(j)},{default:R(()=>[e("div",Sn,[e("table",Tn,[h[14]||(h[14]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o(x).items,(r,M)=>(t(),s(U,{key:r.videoId},[e("tr",null,[e("td",{textContent:c(o(v)(M)),class:"text-center"},null,8,In),e("td",null,[e("div",Mn,[e("div",null,[r.thumbnails.length>0?(t(!0),s(U,{key:0},q(r.thumbnails,w=>(t(),s("div",xn,[e("img",{src:w.url,class:"img-fuild border",width:"128"},null,8,Cn)]))),256)):(t(),s("img",Vn))]),e("div",Pn,[z(b,{to:`${n.urlView}/${r.videoId}`,class:"d-inline-block text-truncate link-offset-2"},{default:R(()=>[Q(c(r.title),1)]),_:2},1032,["to"]),e("div",null,[r.categories.length>0?(t(),s("div",On,[(t(!0),s(U,null,q(r.categories,w=>(t(),s("span",An,c(w.categoryName),1))),256))])):E("",!0),r.genres.length>0?(t(),s("div",Un,[(t(!0),s(U,null,q(r.genres,w=>(t(),s("span",Ln,c(w.genreName),1))),256))])):E("",!0)])])])]),e("td",Dn,c(o(oe).moment.utc(r.durationInMillis).format("HH:mm:ss")),1),e("td",Hn,[e("button",{onClick:w=>r.expand=!r.expand,class:te([[r.expand?"btn-primary":"btn-outline-primary"],"btn btn-sm"])},[r.expand?(t(),s("span",qn)):(t(),s("span",Bn))],10,En)])]),r.expand?(t(),s("tr",Nn,[h[13]||(h[13]=e("td",null,null,-1)),e("td",Rn,[e("div",Fn,[e("div",zn,[e("div",Gn,[h[10]||(h[10]=e("label",{class:"form-label"},"Description",-1)),e("div",null,c(r.description),1)]),e("div",jn,[h[11]||(h[11]=e("h6",{class:"fw-bold"},"Date Released",-1)),e("div",null,c(o(nt).utc(r.dateReleased).format("l")),1)]),e("div",Yn,[h[12]||(h[12]=e("h6",{class:"fw-bold"},"Formats",-1)),r.formats.length>0?(t(),s("div",Wn,[(t(!0),s(U,null,q(r.formats,w=>(t(),s("span",Kn,c(w.formatName),1))),256))])):E("",!0)])])])])])):E("",!0)],64))),128))]),_:1},512),[[ke,o(x).items.length>0]])])]),z(f,{filter:o(x),search:o(m),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Xn={key:0},Zn={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},er={class:"nav-item",role:"presentation"},tr={class:"nav-item",role:"presentation"},sr={class:"nav-item",role:"presentation"},or={class:"nav-item",role:"presentation"},ar={class:"tab-content",id:"myTabContent"},lr={class:"mt-2"},nr={class:"row row-cols-1 row-cols-sm-2"},rr={class:"col"},ir=["id"],dr={class:"col"},ur={class:"col"},cr={class:"form-floating mb-2"},mr={class:"row row-cols-1 row-cols-sm-2"},fr={class:"col"},pr={class:"form-floating mb-2"},vr={class:"col"},gr={class:"form-floating mb-2"},br={class:"col"},yr={class:"form-floating mb-2"},$r={class:"mt-1"},wr={class:"badge bg-info me-1"},hr={class:"badge bg-primary me-1"},_r={class:"mt-2"},kr={class:"table-responsive border"},Sr={class:"table table-hover mb-0"},Tr={class:"table-group-divider"},Ir={class:"align-middle"},Mr={class:"text-center"},xr={class:"mt-2"},Cr={class:"text-end"},Vr={class:"table-responsive border mt-2"},Pr={class:"table table-hover mb-0 caption-top"},Or={class:"mt-2"},Ar={class:"table-responsive"},Ur={class:"table table-hover mb-0 caption-top"},Lr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){const p=n,{appTitle:I,pageTitle:V,busy:_,isDirty:D,validations:P,infoMessage:J,warningMessage:j,errorMessage:C,router:G,axios:oe,utils:B,toasts:A,close:i,closeWithReturnUrl:x,generateReturnUrl:$,security:K}=$e({appTitle:"Arcadian-FAST",pageTitle:"View Video"});Me("$config");const X=he();X.user;const m=be({user:X.user,item:null,hls:null}),v=ce();fe(async()=>{await d(),v.value=B.getPageTab("video")||"information-tab"}),Ae(()=>{m.hls&&(m.hls.stopLoad(),m.hls.destroy())});const Y=f=>{B.setPageTab("video",f),v.value=f},u=f=>f!==v.value?"":"active",k=f=>f!==v.value?"":"show active",d=async()=>{const f=m;if(!_.value)try{_.value=!0,C.value="",m.item=null;const a=`/api/v1/videos/${p.id}/`;await oe.get(a).then(r=>{f.item=r.data,f.item.duration=B.moment.utc(f.item.durationInMillis).format("HH:mm:ss"),f.item.dateReleased=B.moment.utc(f.item.dateReleased).format("ll")}),b()}catch(a){C.value=B.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}},h=async()=>{await d()},b=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),m.hls&&m.hls.destroy();const a=`video-${m.item.videoId}`;var f=document.getElementById(a);const r=m.item.formats.find(w=>w.formatName==="HLS"),M=r.serverUrl+r.path;m.hls=B.createHlsStream(f,M,!1),m.hls.startLoad(-1)}},l=async()=>{if(!_.value)try{_.value=!0,C.value="";const f=`/api/v1/videos/${p.id}/get-blank-frames/`;await oe.post(f).then(a=>{}),_.value=!1,await h()}catch(f){C.value=B.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{_.value=!1}};return(f,a)=>{const r=se("router-link"),M=se("PageHeader"),w=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(M,{"page-icon":"fas fa-fw fa-video",pageTitle:o(V)},{default:R(()=>[z(r,{to:`${n.urlEdit}/${n.id}`,class:"btn btn-primary ms-1"},{default:R(()=>a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=g=>h()),class:"ms-2 btn btn-secondary"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=g=>o(x)(p.urlMain)),class:"btn btn-secondary ms-1"},a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(w,{errorMessage:o(C)},{default:R(()=>[m.item?(t(),s("div",Xn,[e("div",null,[e("ul",Zn,[e("li",er,[e("button",{onClick:a[2]||(a[2]=g=>Y("information-tab")),class:te([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",tr,[e("button",{onClick:a[3]||(a[3]=g=>Y("formats-tab")),class:te([u("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",sr,[e("button",{onClick:a[4]||(a[4]=g=>Y("blankFrames-tab")),class:te([u("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",or,[e("button",{onClick:a[5]||(a[5]=g=>Y("vodSources-tab")),class:te([u("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",ar,[e("div",{class:te([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",lr,[e("div",nr,[e("div",rr,[e("video",{id:`video-${m.item.videoId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,ir)]),e("div",dr,[e("div",ur,[e("div",cr,[N(e("input",{"onUpdate:modelValue":a[6]||(a[6]=g=>m.item.title=g),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,m.item.title]]),a[14]||(a[14]=e("label",{for:"title"},"Title",-1))])]),e("div",mr,[e("div",fr,[e("div",pr,[N(e("input",{"onUpdate:modelValue":a[7]||(a[7]=g=>m.item.dateReleased=g),type:"text",class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Z,m.item.dateReleased]]),a[15]||(a[15]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",vr,[e("div",gr,[N(e("input",{"onUpdate:modelValue":a[8]||(a[8]=g=>m.item.duration=g),type:"text",class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Z,m.item.duration]]),a[16]||(a[16]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",br,[e("div",yr,[N(e("textarea",{"onUpdate:modelValue":a[9]||(a[9]=g=>m.item.description=g),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,m.item.description]]),a[17]||(a[17]=e("label",{for:"description"},"Description",-1))])]),e("div",$r,[(t(!0),s(U,null,q(m.item.genres,g=>(t(),s("span",wr,c(g.genreName),1))),256)),(t(!0),s(U,null,q(m.item.categories,g=>(t(),s("span",hr,c(g.categoryName),1))),256))])])])])],2),e("div",{class:te([k("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",_r,[e("div",kr,[e("table",Sr,[a[18]||(a[18]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Tr,[(t(!0),s(U,null,q(m.item.formats,(g,O)=>(t(),s("tr",Ir,[e("td",Mr,c(O+1),1),e("td",null,c(g.formatName),1),e("td",null,c(g.serverUrl),1),e("td",null,c(g.path),1)]))),256))])])])])],2),e("div",{class:te([k("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",xr,[e("div",null,[e("div",Cr,[e("button",{onClick:a[10]||(a[10]=g=>l()),class:"btn btn-outline-primary btn-sm"},a[19]||(a[19]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),Q("Process ")]))]),e("div",Vr,[e("table",Pr,[a[20]||(a[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.blankFrames,(g,O)=>(t(),s("tr",{key:g.videoBlankFrameId},[e("td",null,c(O+1),1),e("td",null,c(o(B).moment.utc(g.startInMillis).format("HH:mm:ss")),1),e("td",null,c(o(B).moment.utc(g.endInMillis).format("HH:mm:ss")),1),e("td",null,c(o(B).moment.utc(g.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[ke,m.item.blankFrames.length>0]])])])])])],2),e("div",{class:te([k("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Or,[e("div",Ar,[e("table",Ur,[a[21]||(a[21]=e("caption",null,"VOD Sources",-1)),a[22]||(a[22]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.vodSources,(g,O)=>(t(),s("tr",{key:g.vodSourceId},[e("td",null,c(O+1),1),e("td",null,[z(r,{to:`${p.urlViewVodSource}/${encodeURIComponent(g.vodSourceId)}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(g.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[ke,m.item.vodSources.length>0]])])])])],2)])])])):E("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Dr=["disabled"],Hr={class:"form-floating mb-2"},Er={key:0,class:"d-block invalid-feedback"},qr={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Source Group"}),A=n,i=be({lookups:{},item:{name:null}}),x={item:{name:{required:ae.withMessage("name is required.",re),$autoDirty:!0,$lazy:!0}}},$=Se(x,i);fe(async()=>{});const K=async()=>{const X=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const v=C.clone(X.item);await j.post("/api/v1/sourcegroups/",v).then(Y=>{G.success("Add Source Group","Source group added.",{onClose:async()=>{const u=`${A.urlView}/${Y.data}`;await J.push(u)}})})}catch(v){P.value=C.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{V.value=!1}};return(X,m)=>{const v=se("router-link"),Y=se("PageHeader"),u=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(Y,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:m[0]||(m[0]=k=>K()),class:"btn btn-primary"},m[2]||(m[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Dr),z(v,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:R(()=>m[3]||(m[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(u,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[e("div",null,[e("div",Hr,[N(e("input",{"onUpdate:modelValue":m[1]||(m[1]=k=>i.item.name=k),type:"text",class:te([o(C).getValidFeedbackCss(i.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[Z,i.item.name]]),m[4]||(m[4]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",Er,[(t(!0),s(U,null,q(o($).item.name.$errors,k=>(t(),s("div",{key:k.$uid},c(k.$message),1))),128))])):E("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Br={key:0,class:"d-flex justify-content-end"},Nr=["disabled"],Rr={key:0},Fr={class:"row row-cols-1 row-cols-sm-2"},zr={class:"col"},Gr={class:"form-floating mb-2"},jr={key:0,class:"d-block invalid-feedback"},Yr={class:"col"},Wr={class:"form-floating mb-2"},Kr={key:0,class:"d-block invalid-feedback"},Qr={class:"row row-cols-sm-2"},Jr={class:"col"},Xr={class:"form-floating mb-2"},Zr={class:"form-floating mb-2"},ei={key:0,class:"d-block invalid-feedback"},ti={class:"form-floating mb-2"},si={key:0,class:"d-block invalid-feedback"},oi={class:"col"},ai={class:"form-floating mb-2"},tt={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),A=n,i=be({editorElementId:"editor",htmlContent:"",item:null}),x={item:{title:{required:ae.withMessage("Title is required.",re),$autoDirty:!0,$lazy:!0},eidr:{required:ae.withMessage("eidr is required.",re),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ae.withMessage("eidrPrefix is required.",re),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ae.withMessage("Content is required.",re),$autoDirty:!0,$lazy:!0}},$=Se(x,i);fe(async()=>{await m()});const K=()=>{const Y=i;var u=document.getElementById(Y.editorElementId);u.innerHTML=Y.htmlContent},X=Y=>{const u=i;u.htmlContent=Y.target.innerHTML;var k=document.getElementById(u.editorElementId);k.value=u.htmlContent},m=async()=>{const Y=i;if(!V.value)try{V.value=!0,i.item=null,await j.get(`/api/v1/movies/${A.id}`).then(u=>{Y.item=u.data,Y.htmlContent=Y.item.description}),K()}catch(u){P.value=C.getErrorMessageAsHtml(u)}finally{V.value=!1}},v=async()=>{const Y=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const k=C.clone(Y.item);k.description=Y.htmlContent,await j.put("/api/v1/movies",k).then(d=>{G.success("Edit Movie","Movie edited",{onClose:async()=>{const h=`${A.urlView}/${A.id}`;await J.push(h)}})})}catch(k){P.value=C.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{V.value=!1}};return(Y,u)=>{const k=se("router-link"),d=se("PageHeader"),h=se("PageBody");return t(),s("div",null,[z(d,{"page-icon":"fas fa-fw fa-film",pageTitle:o(I),"header-break":"row row-cols-2 row-cols-sm-2"},{default:R(()=>[i.item?(t(),s("div",Br,[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:u[0]||(u[0]=b=>v()),class:"btn btn-primary"},u[7]||(u[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Nr),e("button",{onClick:m,class:"ms-2 btn btn-secondary"},u[8]||(u[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(k,{to:`${A.urlView}/${A.id}`,class:"ms-1 btn btn-secondary"},{default:R(()=>u[9]||(u[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):E("",!0)]),_:1},8,["pageTitle"]),z(h,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[i.item?(t(),s("div",Rr,[e("div",Fr,[e("div",zr,[e("div",Gr,[N(e("input",{"onUpdate:modelValue":u[1]||(u[1]=b=>i.item.eidrPrefix=b),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Z,i.item.eidrPrefix]]),u[10]||(u[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o($).item.eidrPrefix.$error?(t(),s("div",jr,[(t(!0),s(U,null,q(o($).item.eidrPrefix.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):E("",!0)])]),e("div",Yr,[e("div",Wr,[N(e("input",{"onUpdate:modelValue":u[2]||(u[2]=b=>i.item.eidr=b),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Z,i.item.eidr]]),u[11]||(u[11]=e("label",{for:"title"},"Eidr",-1)),o($).item.eidr.$error?(t(),s("div",Kr,[(t(!0),s(U,null,q(o($).item.eidr.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):E("",!0)])])]),e("div",Qr,[e("div",Jr,[e("div",Xr,[N(e("input",{"onUpdate:modelValue":u[3]||(u[3]=b=>i.item.releaseYear=b),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Z,i.item.releaseYear]]),u[12]||(u[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Zr,[N(e("input",{"onUpdate:modelValue":u[4]||(u[4]=b=>i.item.title=b),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Z,i.item.title]]),u[13]||(u[13]=e("label",{for:"title"},"Title",-1)),o($).item.title.$error?(t(),s("div",ei,[(t(!0),s(U,null,q(o($).item.title.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):E("",!0)])])]),e("div",null,[e("div",ti,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:u[5]||(u[5]=b=>X(b))},null,32),u[14]||(u[14]=e("label",{for:"editor"},"Content",-1)),o($).htmlContent.$error?(t(),s("div",si,[(t(!0),s(U,null,q(o($).htmlContent.$errors,b=>(t(),s("div",{key:b.$uid},c(b.$message),1))),128))])):E("",!0)])]),e("div",oi,[e("div",ai,[N(e("textarea",{"onUpdate:modelValue":u[6]||(u[6]=b=>i.item.metadata=b),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Z,i.item.metadata]]),u[15]||(u[15]=e("label",{for:"title"},"Metadata",-1))])])])):E("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},li={components:{Page:tt},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function ni(n,p,I,V,_,D){const P=se("Page");return t(),ve(P,{id:I.id,urlView:I.urlView},null,8,["id","urlView"])}const ri=Ve(li,[["render",ni]]),ii={class:"ms-2"},di={class:"input-group"},ui={class:"table-responsive border shadow-sm"},ci={class:"table table-hover mb-0"},mi=["textContent"],fi={key:0,class:"fas fa-fw fa-check-circle text-success"},pi="/api/v1/sourcegroups/search",vi={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(n){Me("$config");const I=he().user,{appTitle:V,pageTitle:_,busy:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,security:i,filter:x,initializeFilter:$,getQuery:K,saveQuery:X,search:m,getRowNumber:v,setSelected:Y,isSelected:u}=Le({appTitle:"Arcadian-FAST",pageTitle:"Source Groups",cacheKey:`${I==null?void 0:I.userId}/source-groups/search`,baseUrl:pi,filter:{updateUrl:!0}});return fe(async()=>{$(),await m()}),(k,d)=>{const h=se("router-link"),b=se("PageHeader"),l=se("m-pagination"),f=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(b,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_)},{default:R(()=>[z(h,{to:n.urlAdd,class:"btn btn-primary"},{default:R(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ii,[e("div",di,[N(e("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>o(x).query.criteria=a),onKeyup:d[1]||(d[1]=Ue(a=>o(m)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Z,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=a=>o(m)(1))},d[4]||(d[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(f,{errorMessage:o(j)},{default:R(()=>[e("div",ui,[e("table",ci,[d[5]||(d[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o(x).items,(a,r)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:c(o(v)(r)),class:"text-center"},null,8,mi),e("td",null,[z(h,{to:`${n.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate link-offset-2"},{default:R(()=>[a.arn?(t(),s("span",fi)):E("",!0),Q(" "+c(a.name),1)]),_:2},1032,["to"])]),e("td",null,c(a.channelOutputs),1),e("td",null,c(a.packageConfigurations),1)]))),128))]),_:1},512),[[ke,o(x).items.length>0]])])]),z(l,{filter:o(x),search:o(m),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},gi={key:0},bi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},yi={class:"nav-item",role:"presentation"},$i={class:"nav-item",role:"presentation"},wi={class:"nav-item",role:"presentation"},hi={class:"tab-content",id:"myTabContent"},_i={class:"mt-2"},ki={class:"form-floating mb-2"},Si={class:"mt-2"},Ti={class:"table-responsive border"},Ii={class:"table table-hover mb-0"},Mi={class:"mt-2"},xi={class:"table-responsive border"},Ci={class:"table table-hover mb-0"},Vi={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const p=n,{appTitle:I,pageTitle:V,busy:_,isDirty:D,validations:P,infoMessage:J,warningMessage:j,errorMessage:C,router:G,axios:oe,utils:B,toasts:A,close:i,closeWithReturnUrl:x,generateReturnUrl:$,security:K}=$e({appTitle:"Arcadian-FAST",pageTitle:"View Source Group"});Me("$config");const X=he();X.user;const m=be({user:X.user,item:null}),v=ce();fe(async()=>{await d(),v.value=B.getPageTab("sourceGroup")||"information-tab"});const Y=l=>{B.setPageTab("sourceGroup",l),v.value=l},u=l=>l!==v.value?"":"active",k=l=>l!==v.value?"":"show active",d=async()=>{const l=m;if(!_.value)try{_.value=!0,C.value="",m.item=null;const f=`/api/v1/sourcegroups/${p.id}/`;await oe.get(f).then(a=>{l.item=a.data})}catch(f){C.value=B.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{_.value=!1}},h=async()=>{if(!_.value)try{_.value=!0,C.value="";const l=`/api/v1/sourcegroups/${p.id}/`;await oe.delete(l).then(f=>{A.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${p.urlMain}/`;await G.push(a)}})})}catch(l){C.value=B.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{_.value=!1}},b=async()=>{await d()};return(l,f)=>{const a=se("PageHeader"),r=se("router-link"),M=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(V)},{default:R(()=>[e("button",{onClick:f[0]||(f[0]=w=>h()),class:"ms-1 btn btn-warning"},f[7]||(f[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:f[1]||(f[1]=w=>b()),class:"ms-2 btn btn-secondary"},f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:f[2]||(f[2]=w=>o(x)(p.urlMain)),class:"btn btn-secondary ms-1"},f[9]||(f[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(M,{errorMessage:o(C)},{default:R(()=>[m.item?(t(),s("div",gi,[e("div",null,[e("ul",bi,[e("li",yi,[e("button",{onClick:f[3]||(f[3]=w=>Y("information-tab")),class:te([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",$i,[e("button",{onClick:f[4]||(f[4]=w=>Y("channelOutputs-tab")),class:te([u("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",wi,[e("button",{onClick:f[5]||(f[5]=w=>Y("packageConfigurations-tab")),class:te([u("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",hi,[e("div",{class:te([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",_i,[e("div",ki,[N(e("input",{"onUpdate:modelValue":f[6]||(f[6]=w=>m.item.name=w),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,m.item.name]]),f[10]||(f[10]=e("label",{for:"name"},"Name",-1))])])],2),e("div",{class:te([k("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",Si,[e("div",Ti,[e("table",Ii,[f[11]||(f[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.channelOutputs,(w,g)=>(t(),s("tr",{key:w.channelOutputId},[e("td",null,c(g+1),1),e("td",null,[z(r,{to:`${n.urlViewChannel}/${w.channelId}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(w.manifestName),1)]),_:2},1032,["to"])]),e("td",null,c(w.outputType),1)]))),128))]),_:1},512),[[ke,m.item.channelOutputs.length>0]])])])])],2),e("div",{class:te([k("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",Mi,[e("div",xi,[e("table",Ci,[f[12]||(f[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.packageConfigurations,(w,g)=>(t(),s("tr",{key:w.packageConfigurationId},[e("td",null,c(g+1),1),e("td",null,[z(r,{to:`${n.urlViewVodSource}/${w.vodSourceId}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(w.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,c(w.path),1),e("td",null,c(w.type),1)]))),128))]),_:1},512),[[ke,m.item.packageConfigurations.length>0]])])])])],2)])])])):E("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Pi=["disabled"],Oi={class:"form-floating mb-2"},Ai={key:0,class:"d-block invalid-feedback"},Ui={class:"form-floating mb-2"},Li={key:0,class:"d-block invalid-feedback"},Di={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Source Location"}),A=n,i=be({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),x={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:ae.withMessage("HTTP Configuration Base Url is required.",re),$autoDirty:!0,$lazy:!0}}},$=Se(x,i);fe(async()=>{});const K=async()=>{const X=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const v=C.clone(X.item);await j.post("/api/v1/sourcelocations/",v).then(Y=>{G.success("Add Source Location","Source location added.",{onClose:async()=>{const u=`${A.urlView}/${Y.data}`;await J.push(u)}})})}catch(v){P.value=C.getErrorMessageAsHtml(v),window.scrollTo(0,0)}finally{V.value=!1}};return(X,m)=>{const v=se("router-link"),Y=se("PageHeader"),u=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(Y,{"page-icon":"fas fa-fw fa-building",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:m[0]||(m[0]=k=>K()),class:"btn btn-primary"},m[3]||(m[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Pi),z(v,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:R(()=>m[4]||(m[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(u,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[e("div",null,[e("div",Oi,[N(e("input",{"onUpdate:modelValue":m[1]||(m[1]=k=>i.item.name=k),type:"text",class:te([o(C).getValidFeedbackCss(i.item.name),"form-control"]),id:"name",placeholder:"Name"},null,2),[[Z,i.item.name]]),m[5]||(m[5]=e("label",{for:"name"},"Name",-1)),o($).item.name.$error?(t(),s("div",Ai,[(t(!0),s(U,null,q(o($).item.name.$errors,k=>(t(),s("div",{key:k.$uid},c(k.$message),1))),128))])):E("",!0)]),e("div",Ui,[N(e("textarea",{"onUpdate:modelValue":m[2]||(m[2]=k=>i.item.httpConfigurationBaseUrl=k),type:"text",class:te([o(C).getValidFeedbackCss(i.item.httpConfigurationBaseUrl),"form-control"]),id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,2),[[Z,i.item.httpConfigurationBaseUrl]]),m[6]||(m[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o($).item.httpConfigurationBaseUrl.$error?(t(),s("div",Li,[(t(!0),s(U,null,q(o($).item.httpConfigurationBaseUrl.$errors,k=>(t(),s("div",{key:k.$uid},c(k.$message),1))),128))])):E("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Hi={components:{Page:tt},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Ei(n,p,I,V,_,D){const P=se("Page");return t(),ve(P,{id:I.id,urlView:I.urlView},null,8,["id","urlView"])}const qi=Ve(Hi,[["render",Ei]]),Bi={class:"ms-1"},Ni={class:"input-group"},Ri={class:"table-responsive border shadow-sm"},Fi={class:"table table-hover mb-0"},zi={class:"text-center"},Gi=["textContent"],ji={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Yi={class:"text-center"},Wi=["onUpdate:modelValue"],Ki="/api/v1/sourcelocations/search",Qi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(n){Me("$config");const I=he().user,{appTitle:V,pageTitle:_,busy:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,security:i,filter:x,initializeFilter:$,getQuery:K,saveQuery:X,search:m,getRowNumber:v,setSelected:Y,isSelected:u}=Le({appTitle:"Arcadian-FAST",pageTitle:"Source Locations",cacheKey:`${I==null?void 0:I.userId}/source-locations/search`,baseUrl:Ki,filter:{updateUrl:!0}}),k=Ie(()=>{const b=x.value;return b&&b.items?b.items.filter(a=>a.selected):null});fe(async()=>{$(),await m()});const d=async()=>{if(!(k.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!D.value){j.value=null;try{D.value=!0;const f={sourceLocationIds:k.value.map(a=>a.sourceLocationId)};await G.post("/api/v1/sourceLocations/publish/",f).then(a=>{B.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),D.value=!1,await m()}catch(l){j.value=oe.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{D.value=!1}}},h=async()=>{if(!(k.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!D.value){j.value=null;try{D.value=!0;const f={sourceLocationIds:k.value.map(a=>a.sourceLocationId)};await G.post("/api/v1/sourceLocations/unpublish/",f).then(a=>{B.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),D.value=!1,await m()}catch(l){j.value=oe.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{D.value=!1}}};return(b,l)=>{const f=se("router-link"),a=se("PageHeader"),r=se("m-pagination"),M=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_)},{default:R(()=>[z(f,{to:n.urlAdd,class:"btn btn-primary ms-2"},{default:R(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Bi,[e("div",Ni,[N(e("input",{"onUpdate:modelValue":l[0]||(l[0]=w=>o(x).query.criteria=w),onKeyup:l[1]||(l[1]=Ue(w=>o(m)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=w=>o(m)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(M,{errorMessage:o(j)},{default:R(()=>[e("div",Ri,[e("table",Fi,[e("thead",null,[e("tr",null,[l[7]||(l[7]=e("td",{class:"text-center"},"#",-1)),l[8]||(l[8]=e("th",null,"Name",-1)),l[9]||(l[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",zi,[k.value.length?(t(),s(U,{key:0},[e("button",{onClick:d,class:"btn btn-primary btn-sm"},l[5]||(l[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:h,class:"btn btn-warning btn-sm ms-1"},l[6]||(l[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):E("",!0)])])]),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o(x).items,(w,g)=>(t(),s("tr",{key:w.sourceLocationId},[e("td",{textContent:c(o(v)(g)),class:"text-center"},null,8,Gi),e("td",null,[z(f,{to:`${n.urlView}/${w.sourceLocationId}`,class:"d-inline-block text-truncate link-offset-2"},{default:R(()=>[w.arn?(t(),s("i",ji)):E("",!0),e("span",null,c(w.name),1)]),_:2},1032,["to"])]),e("td",null,c(w.httpConfigurationBaseUrl),1),e("td",Yi,[N(e("input",{"onUpdate:modelValue":O=>w.selected=O,type:"checkbox",class:"form-check-input"},null,8,Wi),[[qe,w.selected]])])]))),128))]),_:1},512),[[ke,o(x).items.length>0]])])]),z(r,{filter:o(x),search:o(m),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ji={key:0},Xi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Zi={class:"nav-item",role:"presentation"},ed={class:"nav-item",role:"presentation"},td={class:"nav-item",role:"presentation"},sd={class:"tab-content",id:"myTabContent"},od={class:"mt-2"},ad={class:"col"},ld={class:"form-floating mb-2"},nd={class:"col"},rd={class:"form-floating mb-2"},id={class:"mt-2"},dd={class:"table-responsive border"},ud={class:"table table-hover mb-0"},cd={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},md={class:"mt-2"},fd={class:"table-responsive border"},pd={class:"table table-hover mb-0"},vd={key:0,class:"fas fa-fw fa-check-circle text-success"},gd={class:"badge bg-info"},bd={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const p=n,{appTitle:I,pageTitle:V,busy:_,isDirty:D,validations:P,infoMessage:J,warningMessage:j,errorMessage:C,router:G,axios:oe,utils:B,toasts:A,close:i,closeWithReturnUrl:x,generateReturnUrl:$,security:K}=$e({appTitle:"Arcadian-FAST",pageTitle:"View Source Location"});Me("$config");const X=he();X.user;const m=be({user:X.user,item:null}),v=ce();fe(async()=>{await d(),v.value=B.getPageTab("sourceLocation")||"information-tab"});const Y=f=>{B.setPageTab("sourceLocation",f),v.value=f},u=f=>f!==v.value?"":"active",k=f=>f!==v.value?"":"show active",d=async()=>{const f=m;if(!_.value)try{_.value=!0,C.value="",m.item=null;const a=`/api/v1/sourcelocations/${p.id}/`;await oe.get(a).then(r=>{f.item=r.data})}catch(a){C.value=B.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}},h=async()=>{await d()},b=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!_.value){C.value=null;try{_.value=!0;const a={sourceLocationIds:[p.id]};await oe.post("/api/v1/sourcelocations/publish/",a).then(r=>{A.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),_.value=!1,await h()}catch(a){C.value=B.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}}},l=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!_.value){C.value=null;try{_.value=!0;const a={sourceLocationIds:[p.id]};await oe.post("/api/v1/sourcelocations/unpublish/",a).then(r=>{A.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),_.value=!1,await h()}catch(a){C.value=B.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{_.value=!1}}};return(f,a)=>{const r=se("PageHeader"),M=se("router-link"),w=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(r,{"page-icon":"fas fa-fw fa-building",pageTitle:o(V)},{default:R(()=>[m.item?(t(),s(U,{key:0},[m.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=g=>l()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=g=>b()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):E("",!0),e("button",{onClick:a[2]||(a[2]=g=>h()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=g=>o(x)(p.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(w,{errorMessage:o(C)},{default:R(()=>[m.item?(t(),s("div",Ji,[e("div",null,[e("ul",Xi,[e("li",Zi,[e("button",{onClick:a[4]||(a[4]=g=>Y("information-tab")),class:te([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ed,[e("button",{onClick:a[5]||(a[5]=g=>Y("vodSources-tab")),class:te([u("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",td,[e("button",{onClick:a[6]||(a[6]=g=>Y("programs-tab")),class:te([u("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",sd,[e("div",{class:te([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",od,[e("div",ad,[e("div",ld,[N(e("input",{"onUpdate:modelValue":a[7]||(a[7]=g=>m.item.name=g),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,m.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",nd,[e("div",rd,[N(e("input",{"onUpdate:modelValue":a[8]||(a[8]=g=>m.item.httpConfigurationBaseUrl=g),type:"text",class:"form-control-plaintext",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Z,m.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:te([k("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",id,[e("div",dd,[e("table",ud,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.vodSources,(g,O)=>(t(),s("tr",{key:g.vodSourceId},[e("td",null,c(O+1),1),e("td",null,[g.arn?(t(),s("span",cd)):E("",!0),z(M,{to:`${p.urlViewVodSource}/${encodeURIComponent(g.vodSourceId)}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(g.name),1)]),_:2},1032,["to"])]),e("td",null,[z(M,{to:`${p.urlViewVideo}/${encodeURIComponent(g.video.videoId)}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(g.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,c(o(B).moment.utc(g.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[ke,m.item.vodSources.length>0]])])])])],2),e("div",{class:te([k("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",md,[e("div",fd,[e("table",pd,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.programs,(g,O)=>(t(),s("tr",{key:g.programId},[e("td",null,c(O+1),1),e("td",null,[z(M,{to:`${p.urlViewChannel}/${encodeURIComponent(g.channel.channelId)}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(g.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[g.arn?(t(),s("span",vd)):E("",!0),Q(" "+c(g.name)+" ",1),e("div",null," Start: "+c(o(B).moment.utc(g.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+c(o(B).moment.utc(g.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[Q(c(o(B).moment(g.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",gd,c(o(B).moment(g.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[ke,m.item.programs.length>0]])])])])],2)])])])):E("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},yd=["id"],$d={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},wd={class:"modal-content"},hd={class:"modal-header"},_d={class:"modal-title"},kd={class:"modal-body p-1"},Sd={class:"row row-cols-1 row-cols-sm-3"},Td={class:"col"},Id={class:"form-floating mb-2"},Md=["value"],xd={class:"col"},Cd={class:"form-floating mb-2"},Vd=["value"],Pd={class:"col"},Od={class:"input-group mb-2"},Ad={class:"form-floating"},Ud={class:"row row-cols-1 row-cols-sm-2"},Ld={class:"col-sm-4"},Dd={class:"card"},Hd={key:0,class:"mt-2"},Ed={class:"col"},qd={class:"form-floating mb-2"},Bd={class:"col ms-2 my-2"},Nd={class:"badge bg-info me-1"},Rd={class:"badge bg-primary me-1"},Fd={class:"row row-cols-1 row-cols-sm-2"},zd={class:"col"},Gd={class:"form-floating mb-2"},jd={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Yd={class:"col"},Wd={class:"form-floating mb-2"},Kd={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},Qd={class:"col"},Jd={class:"form-floating mb-2"},Xd={class:"col-sm-8"},Zd={class:"table-responsive border shadow-sm"},eu={class:"table table-sm table-hover mb-0 overflow-auto"},tu=["textContent"],su={class:"d-flex flex-row justify-content-start"},ou={class:"mt-1"},au=["src"],lu={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},nu={class:"ms-2"},ru=["onClick"],iu={class:"modal-footer"},du="/api/v1/videos/search",ct={__name:"_selectVideo",props:{sourceLocationId:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:p,emit:I}){const _=he().user,{appTitle:D,pageTitle:P,busy:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,security:x,filter:$,initializeFilter:K,getQuery:X,saveQuery:m,search:v,getRowNumber:Y,setSelected:u,isSelected:k}=Le({appTitle:"Arcadian-FAST",pageTitle:"Select Video",cacheKey:`${_==null?void 0:_.userId}/videos/select`,baseUrl:du,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(H,y)=>{const S=H.value,F=new URLSearchParams(window.location.search),W=JSON.parse(localStorage.getItem(y))||{};S.query.genreId=F.get("genre")||W.genreId||S.query.genreId||0,S.query.categoryId=F.get("category")||W.categoryId||S.query.categoryId||0},getQuery:H=>["?c=",encodeURIComponent(H.query.criteria),"&p=",H.pageIndex,"&s=",H.pageSize,"&sf=",H.sortField,"&so=",H.sortOrder,"&genre=",H.query.genreId,"&category=",H.query.categoryId,"&sourceLocationId=",H.query.sourceLocationId].join(""),saveQuery:(H,y)=>{localStorage.setItem(y,JSON.stringify({criteria:H.query.criteria,pageIndex:H.pageIndex,pageSize:H.pageSize,sortField:H.sortField,sortOrder:H.sortOrder,visible:H.visible,genreId:H.query.genreId,category:H.query.categoryId}))}}),d=I,h=n,b=ce("modalSelectVideo"),l=be({video:null,hls:null});fe(async()=>{K(),await f(),await a(),await v(1)}),Ae(()=>{l.hls&&(l.hls.stopLoad(),l.hls.destroy())});const f=async()=>{await M(),await w()},a=async()=>{$.value.query.sourceLocationId=h.sourceLocationId,G.value="";var H=document.getElementById(b.value),y=we.getOrCreateInstance(H);y.show()},r=async H=>{var y=document.getElementById(b.value),S=we.getOrCreateInstance(y);S.hide(),l.hls&&(l.hls.stopLoad(),l.hls.destroy()),d(H?"confirm":"cancel",H?l.video:null)},M=async H=>{try{const S=await B.get("/api/v1/lookups/video-categories/").then(F=>F.data);$.value.lookups.categories=S}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},w=async H=>{try{const S=await B.get("/api/v1/lookups/video-genres/").then(F=>F.data);$.value.lookups.genres=S}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},g=H=>{l.video=H,O()},O=()=>{if(Hls.isSupported()){l.hls&&(l.hls.stopLoad(),l.hls.destroy());var H=document.getElementById("video-select-preview");const S=l.video.formats.find(W=>W.formatName==="HLS"),F=S.serverUrl+S.path;l.hls=A.createHlsStream(H,F)}};return p({open:a,close:r}),(H,y)=>{const S=se("m-pagination"),F=se("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:b.value,tabindex:"-1","aria-hidden":"true"},[e("div",$d,[e("div",wd,[e("div",hd,[e("h5",_d,[y[10]||(y[10]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),Q(c(o(P)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=W=>r(!1)),"aria-label":"Close"})]),e("div",kd,[z(F,{errorMessage:o(G)},{default:R(()=>[e("div",Sd,[e("div",Td,[e("div",Id,[N(e("select",{"onUpdate:modelValue":y[1]||(y[1]=W=>o($).query.categoryId=W),class:"form-select",id:"category"},[(t(!0),s(U,null,q(o($).lookups.categories,W=>(t(),s("option",{value:W.id},c(W.name),9,Md))),256))],512),[[ge,o($).query.categoryId]]),y[11]||(y[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",xd,[e("div",Cd,[N(e("select",{"onUpdate:modelValue":y[2]||(y[2]=W=>o($).query.genreId=W),class:"form-select",id:"genre"},[(t(!0),s(U,null,q(o($).lookups.genres,W=>(t(),s("option",{value:W.id},c(W.name),9,Vd))),256))],512),[[ge,o($).query.genreId]]),y[12]||(y[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Pd,[e("div",Od,[e("div",Ad,[N(e("input",{"onUpdate:modelValue":y[3]||(y[3]=W=>o($).query.criteria=W),onKeyup:y[4]||(y[4]=Ue(W=>o(v)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o($).query.criteria]]),y[13]||(y[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:y[5]||(y[5]=W=>o(v)(1))},y[14]||(y[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Ud,[e("div",Ld,[e("div",Dd,[y[19]||(y[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),l.video?(t(),s("div",Hd,[e("div",Ed,[e("div",qd,[N(e("input",{"onUpdate:modelValue":y[6]||(y[6]=W=>l.video.title=W),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,l.video.title]]),y[15]||(y[15]=e("label",{for:"title"},"Title",-1))])]),e("div",Bd,[e("div",null,[(t(!0),s(U,null,q(l.video.genres,W=>(t(),s("span",Nd,c(W.genreName),1))),256)),(t(!0),s(U,null,q(l.video.categories,W=>(t(),s("span",Rd,c(W.categoryName),1))),256))])]),e("div",Fd,[e("div",zd,[e("div",Gd,[e("div",jd,c(o(A).moment(l.video.dateReleased).calendar()),1),y[16]||(y[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Yd,[e("div",Wd,[e("div",Kd,c(o(A).moment.utc(l.video.durationInMillis).format("HH:mm:ss")),1),y[17]||(y[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Qd,[e("div",Jd,[N(e("textarea",{"onUpdate:modelValue":y[7]||(y[7]=W=>l.video.description=W),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,l.video.description]]),y[18]||(y[18]=e("label",{for:"description"},"Description",-1))])])])):E("",!0)])]),e("div",Xd,[e("div",Zd,[e("table",eu,[y[20]||(y[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o($).items,(W,pe)=>(t(),s("tr",{key:W.videoId},[e("td",{textContent:c(o(Y)(pe)),class:"text-center"},null,8,tu),e("td",null,[e("div",su,[e("div",null,[W.thumbnails.length>0?(t(!0),s(U,{key:0},q(W.thumbnails,ee=>(t(),s("div",ou,[e("img",{src:ee.url,class:"img-fuild border",width:"128"},null,8,au)]))),256)):(t(),s("img",lu))]),e("div",nu,[e("a",{onClick:ee=>g(W),class:"text-wrap link-offset-2",role:"button"},c(W.title),9,ru)])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(S,{filter:o($),search:o(v),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",iu,[e("button",{onClick:y[8]||(y[8]=W=>r(!0)),class:"btn btn-primary",type:"button"},y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:y[9]||(y[9]=W=>r(!1)),class:"btn btn-secondary ms-1"},y[22]||(y[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,yd)}}},uu=["disabled"],cu={class:"col"},mu={class:"form-floating mb-2"},fu={key:0,class:"d-block invalid-feedback"},pu={class:"row row-cols-1 row-cols-sm-2"},vu={class:"col"},gu={class:"form-floating mb-2"},bu=["value"],yu={key:0,class:"d-block invalid-feedback"},$u={class:"col"},wu={class:"input-group mb-2"},hu={class:"form-floating"},_u={key:0},ku={class:"d-flex flex-row justify-content-start align-items-center"},Su={key:0,class:"d-inline invalid-feedback"},Tu={class:"table-responsive border mt-1"},Iu={class:"table table-sm mb-0 caption-top"},Mu={class:"align-middle"},xu=["onUpdate:modelValue"],Cu=["value"],Vu=["onUpdate:modelValue"],Pu=["value"],Ou=["onClick"],Au={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,route:j,axios:C,utils:G,toasts:oe,close:B,closeWithReturnUrl:A,security:i}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source"}),x=n,$=be({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),K=(a,r,M)=>a.length>0,X={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},videoId:{required:ae.withMessage("Video is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("Source Locaton is required.",re),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ae.withMessage("PackageConfigurations is required.",K),$each:ae.forEach({path:{required:ae.withMessage("Path is required.",re)},sourceGroupId:{required:ae.withMessage("Source Group is required.",re)}}),$autoDirty:!0,$lazy:!0}}},m=Se(X,$);fe(async()=>{if(await v(),await Y(),j.query.videoId)debugger});const v=async()=>{try{await C.get("/api/v1/sourcegroups/lookup/").then(r=>{$.lookups.sourceGroups=r.data})}catch(a){P.value=G.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},Y=async()=>{try{if(await C.get("/api/v1/sourcelocations/lookup/").then(r=>{$.lookups.sourceLocations=r.data}),$.lookups.sourceLocations.length===1){const r=$.lookups.sourceLocations[0];$.selected.sourceLocation=r,await u()}}catch(a){P.value=G.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},u=async()=>{const a=$.selected.sourceLocation;$.item.sourceLocationId=a.id},k=async()=>{$.item.videoId=$.selected.video.videoId,await d($.item.videoId)},d=async a=>{try{const r=`/api/v1/videos/${a}/formats`;await C.get(r).then(M=>{$.selected.video.formats=M.data})}catch(r){P.value=G.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},h=async()=>{const a=$;if(V.value)return;if(!await m.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const M=G.clone(a.item),w=a.item.packageConfigurations.filter(g=>g.selectedFormat&&g.sourceGroupId);w.forEach(g=>{const O=g.selectedFormat;g.path=O.path,g.format=O.format,delete g.selectedFormat}),M.packageConfigurations=w,delete M.video,await C.post("/api/v1/vodSources/",M).then(g=>{debugger;oe.success("Add VOD Source","VOD source added",{onClose:async()=>{const O=`${x.urlView}/${g.data}`;await J.push(O)}})})}catch(M){P.value=G.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{V.value=!1}},b=()=>{const a={sourceGroupId:null,selectedFormat:null},r=$.selected.video;if(r){const M=r.formats.find(w=>w.formatName==="HLS");a.path=`${M.serverUrl}${M.path}`}$.item.packageConfigurations.push(a)},l=a=>{$.item.packageConfigurations.splice(a,1)},f=async()=>{const a=Ee(ct,{sourceLocationId:$.selected.sourceLocation.id},{chore:!0,keepInitial:!1}),{data:r,isCanceled:M}=await a.reveal();a.closeAll(),!M&&r&&($.selected.video=r,await k())};return(a,r)=>{const M=se("PageHeader"),w=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(M,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o(m).$dirty&&o(m).$invalid,onClick:r[0]||(r[0]=g=>h()),class:"btn btn-primary"},r[6]||(r[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,uu),e("button",{onClick:r[1]||(r[1]=g=>o(A)(x.urlMain)),class:"btn btn-secondary ms-1"},r[7]||(r[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(w,{errorMessage:o(P),vuelidate:o(m)},{default:R(()=>[e("div",null,[e("div",cu,[e("div",mu,[N(e("input",{"onUpdate:modelValue":r[2]||(r[2]=g=>$.item.name=g),id:"name",class:te([o(G).getValidFeedbackCss($.item.name),"form-control"]),placeholder:"Name"},null,2),[[Z,$.item.name]]),r[8]||(r[8]=e("label",{for:"name",class:""},"Name",-1)),o(m).item.name.$error?(t(),s("div",fu,[(t(!0),s(U,null,q(o(m).item.name.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):E("",!0)])]),e("div",pu,[e("div",vu,[e("div",gu,[N(e("select",{"onUpdate:modelValue":r[3]||(r[3]=g=>$.selected.sourceLocation=g),onChange:r[4]||(r[4]=g=>u()),class:te([o(G).getValidFeedbackCss($.selected.sourceLocation),"form-select"]),id:"sourceLocationId"},[(t(!0),s(U,null,q($.lookups.sourceLocations,g=>(t(),s("option",{value:g},c(g.name),9,bu))),256))],34),[[ge,$.selected.sourceLocation]]),r[9]||(r[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(m).item.sourceLocationId.$error?(t(),s("div",yu,[(t(!0),s(U,null,q(o(m).item.sourceLocationId.$errors,g=>(t(),s("div",{key:g.$uid},c(g.$message),1))),128))])):E("",!0)])]),e("div",$u,[e("div",wu,[e("div",hu,[e("div",{id:"video",class:te([o(G).getValidFeedbackCss($.selected.video),"form-control"]),placeholder:"Title"},[$.selected.video?(t(),s(U,{key:0},[Q(c(o(G).moment.utc($.selected.video.durationInMillis).format("HH:mm:ss"))+" - "+c($.selected.video.title),1)],64)):E("",!0)],2),r[10]||(r[10]=e("label",{for:"video",class:""},"Video",-1))]),$.selected.sourceLocation?(t(),s("button",{key:0,onClick:r[5]||(r[5]=g=>f()),class:"btn btn-primary",type:"button"},r[11]||(r[11]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):E("",!0)])])]),$.item.videoId?(t(),s("div",_u,[e("div",ku,[e("fieldset",null,[e("legend",null,[r[13]||(r[13]=Q(" Package Configurations ")),o(m).item.packageConfigurations.$error?(t(),s("span",Su,r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):E("",!0)])]),e("div",{class:"ms-2"},[e("button",{onClick:b,class:"btn btn-outline-primary btn-sm"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Tu,[e("table",Iu,[r[16]||(r[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",Mu,[(t(!0),s(U,null,q($.item.packageConfigurations,(g,O)=>(t(),s("tr",null,[e("td",null,c(O+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":H=>g.selectedFormat=H,class:te([o(G).getValidFeedbackCss(g.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(U,null,q($.selected.video.formats,H=>(t(),s("option",{value:H},c(H.path),9,Cu))),256))],10,xu),[[ge,g.selectedFormat]]),o(m).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},q(o(m).item.packageConfigurations.$each.$response.$errors[O].path,H=>(t(),s("div",{key:H,class:"d-block invalid-feedback"},c(H.$message),1))),128)):E("",!0)]),e("td",null,[g.selectedFormat?(t(),s(U,{key:0},[Q(c(g.selectedFormat.formatName),1)],64)):E("",!0)]),e("td",null,[e("div",null,[N(e("select",{"onUpdate:modelValue":H=>g.sourceGroupId=H,class:te([o(G).getValidFeedbackCss(g.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(U,null,q($.lookups.sourceGroups,H=>(t(),s("option",{value:H.id},c(H.name),9,Pu))),256))],10,Vu),[[ge,g.sourceGroupId]]),o(m).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},q(o(m).item.packageConfigurations.$each.$response.$errors[O].path,H=>(t(),s("div",{key:H,class:"d-block invalid-feedback"},c(H.$message),1))),128)):E("",!0)])]),e("td",null,[e("button",{onClick:H=>l(O),class:"btn btn-outline-warning btn-sm"},r[15]||(r[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Ou)])]))),256))])])])])):E("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Uu=["disabled"],Lu={key:0},Du={class:"col"},Hu={class:"form-floating mb-2"},Eu={key:0,class:"d-block invalid-feedback"},qu={class:"row row-cols-1 row-cols-sm-2"},Bu={class:"col"},Nu={class:"form-floating mb-2"},Ru=["value"],Fu={key:0,class:"d-block invalid-feedback"},zu={class:"col"},Gu={class:"col"},ju=["disabled"],Yu={class:"form-floating"},Wu={id:"video",class:"form-control",placeholder:"Title"},Ku={key:0},Qu={class:"d-flex flex-row justify-content-between mt-3"},Ju={key:0,class:"d-inline invalid-feedback"},Xu={class:"table-responsive border mt-1"},Zu={class:"table table-sm mb-0"},ec={class:"align-middle"},tc=["onUpdate:modelValue"],sc=["value"],oc=["onUpdate:modelValue"],ac=["value"],lc={class:"text-end"},nc=["onClick"],rc={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Edit VOD Source"}),A=n,i=be({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),x=(a,r,M)=>a.length>0,$={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},videoId:{required:ae.withMessage("Video is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("Source Locaton is required.",re),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:ae.withMessage("PackageConfigurations is required.",x),$each:ae.forEach({path:{required:ae.withMessage("Path is required.",re)},sourceGroupId:{required:ae.withMessage("Source Group is required.",re)}})}}},K=Se($,i);fe(async()=>{await X(),await Y(),await u()});const X=async()=>{await m(),await v()},m=async()=>{const a=i;if(!V.value)try{V.value=!0,P.value="",i.item=null;const r=`/api/v1/vodsources/${A.id}/`;await j.get(r).then(M=>{a.item=M.data;const w=a.item,g=C.moment.utc(a.item.video.durationInMillis).format("HH:mm:ss");w.video.duration=g})}catch(r){P.value=C.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{V.value=!1}},v=async()=>{const a=i;if(!V.value)try{V.value=!0,P.value="";const r=`/api/v1/videos/${a.item.videoId}/`;await j.get(r).then(M=>{a.selected.video=M.data})}catch(r){P.value=C.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{V.value=!1}},Y=async()=>{try{await j.get("/api/v1/sourcegroups/lookup/").then(r=>{i.lookups.sourceGroups=r.data})}catch(a){P.value=C.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},u=async()=>{try{if(await j.get("/api/v1/sourcelocations/lookup/").then(r=>{i.lookups.sourceLocations=r.data}),i.lookups.sourceLocations.length>0){const r=i.lookups.sourceLocations.find(M=>M.id===i.item.sourceLocationId);i.selected.sourceLocation=r}}catch(a){P.value=C.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},k=async()=>{i.item.videoId=i.selected.video.videoId,i.item.packageConfigurations=[],await d(i.item.videoId)},d=async a=>{try{const r=`/api/v1/videos/${a}/formats`;await j.get(r).then(M=>{i.selected.video.formats=M.data;debugger})}catch(r){P.value=C.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},h=async()=>{const a=i;if(V.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const M=C.clone(a.item);delete M.video,delete M.programs,delete M.sourceLocation,await j.put("/api/v1/vodsources/",M).then(w=>{G.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const g=`${A.urlView}/${A.id}`;await J.push(g)}})})}catch(M){P.value=C.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{V.value=!1}},b=()=>{debugger;const a={path:"",sourceGroupId:null,type:"HLS"},r=i.selected.video;if(r){const M=r.formats.find(w=>w.formatName==="HLS");a.path=`${M.path}`}i.item.packageConfigurations.push(a)},l=a=>{i.item.packageConfigurations.splice(a,1)},f=async()=>{const a=Ee(ct,{sourceLocationId:i.selected.sourceLocation.id},{chore:!0,keepInitial:!1}),{data:r,isCanceled:M}=await a.reveal();a.close(),!M&&r&&(i.selected.video=r,await k())};return(a,r)=>{const M=se("router-link"),w=se("PageHeader"),g=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(w,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:r[0]||(r[0]=O=>h()),class:"btn btn-primary"},r[5]||(r[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Uu),e("button",{onClick:r[1]||(r[1]=O=>X()),class:"btn btn-secondary ms-2"},r[6]||(r[6]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(M,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:R(()=>r[7]||(r[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(g,{errorMessage:o(P),vuelidate:o(K)},{default:R(()=>[i.item?(t(),s("div",Lu,[e("div",Du,[e("div",Hu,[N(e("input",{"onUpdate:modelValue":r[2]||(r[2]=O=>i.item.name=O),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,i.item.name]]),r[8]||(r[8]=e("label",{for:"name",class:""},"Name",-1)),o(K).item.name.$error?(t(),s("div",Eu,[(t(!0),s(U,null,q(o(K).item.name.$errors,O=>(t(),s("div",{key:O.$uid},c(O.$message),1))),128))])):E("",!0)])]),e("div",qu,[e("div",Bu,[e("div",Nu,[N(e("select",{"onUpdate:modelValue":r[3]||(r[3]=O=>i.selected.sourceLocation=O),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,q(i.lookups.sourceLocations,O=>(t(),s("option",{value:O},c(O.name),9,Ru))),256))],512),[[ge,i.selected.sourceLocation]]),r[9]||(r[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(K).item.sourceLocationId.$error?(t(),s("div",Fu,[(t(!0),s(U,null,q(o(K).item.sourceLocationId.$errors,O=>(t(),s("div",{key:O.$uid},c(O.$message),1))),128))])):E("",!0)])]),e("div",zu,[e("div",Gu,[e("div",{class:"input-group mb-2",disabled:i.item.packageConfigurations.length>0},[e("div",Yu,[e("div",Wu,[i.selected.video?(t(),s(U,{key:0},[Q(c(i.selected.video.title),1)],64)):E("",!0)]),r[10]||(r[10]=e("label",{for:"video",class:""},"Video",-1))]),e("button",{onClick:r[4]||(r[4]=O=>f()),class:"btn btn-primary",type:"button"},r[11]||(r[11]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))],8,ju)])])]),i.item.videoId?(t(),s("div",Ku,[e("div",Qu,[e("div",null,[e("h5",null,[r[13]||(r[13]=Q(" Package Configurations ")),o(K).item.packageConfigurations.$error?(t(),s("span",Ju,r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):E("",!0)])]),e("button",{onClick:b,class:"btn btn-outline-primary btn-sm"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Xu,[e("table",Zu,[r[16]||(r[16]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",ec,[(t(!0),s(U,null,q(i.item.packageConfigurations,(O,H)=>(t(),s("tr",null,[e("td",null,c(H+1),1),e("td",null,[N(e("select",{"onUpdate:modelValue":y=>O.selectedFormat=y,class:te([o(C).getValidFeedbackCss(O.selectedFormat),"form-select"]),id:"videoId"},[(t(!0),s(U,null,q(i.selected.video.formats,y=>(t(),s("option",{value:y},c(y.path),9,sc))),256))],10,tc),[[ge,O.selectedFormat]]),o(K).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},q(o(K).item.packageConfigurations.$each.$response.$errors[H].path,y=>(t(),s("div",{key:y,class:"d-block invalid-feedback"},c(y.$message),1))),128)):E("",!0)]),e("td",null,[e("div",null,[N(e("select",{"onUpdate:modelValue":y=>O.sourceGroupId=y,class:"form-select",id:"sourceGroupId"},[(t(!0),s(U,null,q(i.lookups.sourceGroups,y=>(t(),s("option",{value:y.id},c(y.name),9,ac))),256))],8,oc),[[ge,O.sourceGroupId]]),o(K).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},q(o(K).item.packageConfigurations.$each.$response.$errors[H].path,y=>(t(),s("div",{key:y,class:"d-block invalid-feedback"},c(y.$message),1))),128)):E("",!0)])]),e("td",null,[O.selectedFormat?(t(),s(U,{key:0},[Q(c(O.selectedFormat.formatName),1)],64)):E("",!0)]),e("td",lc,[e("button",{onClick:y=>l(H),class:"btn btn-outline-warning btn-sm"},r[15]||(r[15]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,nc)])]))),256))])])])])):E("",!0)])):E("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ic={class:"ms-2"},dc={class:"input-group"},uc=["value"],cc={class:"ms-1"},mc={class:"input-group"},fc=["value"],pc={class:"ms-1"},vc={class:"input-group"},gc={class:"ms-1"},bc={class:"input-group"},yc={class:"table-responsive border shadow-sm"},$c={class:"table table-hover mb-0"},wc={class:"text-center"},hc=["textContent"],_c={class:"d-flex flex-row justify-content-start"},kc={class:"mt-1"},Sc=["src"],Tc={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Ic={class:"ms-2"},Mc={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},xc={class:"badge bg-primary me-1"},Cc={key:0},Vc={class:"badge bg-info me-1"},Pc={class:"d-flex flex-row justify-content-start"},Oc={class:"ms-2"},Ac={class:"small"},Uc={class:"badge bg-secondary me-1"},Lc={class:"text-center"},Dc=["onUpdate:modelValue"],Hc="/api/v1/vodsources/search",Ec={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){Me("$config");const I=he().user,{appTitle:V,pageTitle:_,busy:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,closeWithReturnUrl:i,generateReturnUrl:x,security:$,filter:K,initializeFilter:X,getQuery:m,saveQuery:v,search:Y,getRowNumber:u,setSelected:k,isSelected:d}=Le({appTitle:"Arcadian-FAST",pageTitle:"VOD Sources",cacheKey:`${I==null?void 0:I.userId}/vod-sources/search`,baseUrl:Hc,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:(M,w)=>{const g=M.value,O=new URLSearchParams(window.location.search),H=JSON.parse(localStorage.getItem(w))||{};g.query.category=O.get("category")||H.category||g.query.category||0,g.query.genre=O.get("genre")||H.genre||g.query.genre||0,g.query.sourceLocationId=O.get("slid")||H.sourceLocationId||g.query.sourceLocationId||""},getQuery:M=>["?c=",encodeURIComponent(M.query.criteria),"&p=",M.pageIndex,"&s=",M.pageSize,"&sf=",M.sortField,"&so=",M.sortOrder,"&category=",M.query.category,"&genre=",M.query.genre,"&slid=",M.query.sourceLocationId].join(""),saveQuery:(M,w)=>{localStorage.setItem(w,JSON.stringify({criteria:M.query.criteria,pageIndex:M.pageIndex,pageSize:M.pageSize,sortField:M.sortField,sortOrder:M.sortOrder,visible:M.visible,category:M.query.category,genre:M.query.genre,sourceLocationId:M.query.sourceLocationId}))}}),h=Ie(()=>{const M=K.value;return M&&M.items?M.items.filter(O=>O.selected):[]});fe(async()=>{X(),await a(),await r(),await Y()});const b=async()=>{if(!(h.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!D.value){j.value=null;try{D.value=!0;const g={vodSourceIds:h.value.map(O=>O.vodSourceId)};await G.post("/api/v1/vodsources/publish/",g).then(O=>{B.success("Publish VODs","VODs was published.",{async onClose(){}})}),D.value=!1,await Y()}catch(w){j.value=oe.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{D.value=!1}}},l=async()=>{if(!(h.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!D.value){j.value=null;try{D.value=!0;const g={vodSourceIds:h.value.map(O=>O.vodSourceId)};await G.post("/api/v1/vodsources/unpublish/",g).then(O=>{B.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),D.value=!1,await Y()}catch(w){j.value=oe.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{D.value=!1}}},f=()=>{const M=K.value.items;if(M.length<1)return;const w=!M[0].selected;K.value.items.forEach(g=>{g.selected=w})},a=async()=>{try{await G.get("/api/v1/sourcelocations/lookup/").then(w=>{K.value.lookups.sourceLocations=w.data})}catch(M){j.value=oe.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}},r=async()=>{try{await G.get("/api/v1/lookups/video-genres/").then(M=>{const w=M.data;K.value.lookups.genres=w})}catch(M){j.value=oe.getErrorMessageAsHtml(M),window.scrollTo(0,0)}finally{}};return ce(!1),(M,w)=>{const g=se("router-link"),O=se("PageHeader"),H=se("m-pagination"),y=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(O,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(_)},{default:R(()=>[z(g,{to:n.urlAdd,class:"btn btn-primary"},{default:R(()=>w[6]||(w[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",ic,[e("div",dc,[w[8]||(w[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),N(e("select",{"onUpdate:modelValue":w[0]||(w[0]=S=>o(K).query.sourceLocationId=S),class:"form-select"},[w[7]||(w[7]=e("option",{value:""},"All",-1)),(t(!0),s(U,null,q(o(K).lookups.sourceLocations,S=>(t(),s("option",{value:S.id},c(S.name),9,uc))),256))],512),[[ge,o(K).query.sourceLocationId]])])]),e("div",cc,[e("div",mc,[w[9]||(w[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),N(e("select",{"onUpdate:modelValue":w[1]||(w[1]=S=>o(K).query.genre=S),class:"form-select"},[(t(!0),s(U,null,q(o(K).lookups.genres,S=>(t(),s("option",{value:S.id},c(S.name),9,fc))),256))],512),[[ge,o(K).query.genre]])])]),e("div",pc,[e("div",vc,[w[11]||(w[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),N(e("select",{"onUpdate:modelValue":w[2]||(w[2]=S=>o(K).query.category=S),class:"form-select"},w[10]||(w[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ge,o(K).query.category]])])]),e("div",gc,[e("div",bc,[N(e("input",{"onUpdate:modelValue":w[3]||(w[3]=S=>o(K).query.criteria=S),onKeyup:w[4]||(w[4]=Ue(S=>o(Y)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(K).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:w[5]||(w[5]=S=>o(Y)(1))},w[12]||(w[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(y,{errorMessage:o(j)},{default:R(()=>[e("div",yc,[e("table",$c,[e("thead",null,[e("tr",null,[w[16]||(w[16]=e("td",{class:"text-center"},"#",-1)),w[17]||(w[17]=e("th",null,"Name",-1)),w[18]||(w[18]=e("th",null,"Video Title",-1)),e("th",wc,[h.value.length?(t(),s(U,{key:0},[e("button",{onClick:b,class:"btn btn-sm btn-primary"},w[13]||(w[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:l,class:"btn btn-sm btn-warning ms-1"},w[14]||(w[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):E("",!0),e("button",{onClick:f,class:"btn btn-sm btn-outline-primary ms-2"},w[15]||(w[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o(K).items,(S,F)=>(t(),s("tr",{key:S.vodSourceId},[e("td",{textContent:c(o(u)(F)),class:"text-center"},null,8,hc),e("td",null,[e("div",_c,[e("div",null,[S.video.thumbnails.length>0?(t(!0),s(U,{key:0},q(S.video.thumbnails,W=>(t(),s("div",kc,[e("img",{src:W.url,class:"img-fuild border",width:"128"},null,8,Sc)]))),256)):(t(),s("img",Tc))]),e("div",Ic,[z(g,{to:`${n.urlView}/${S.vodSourceId}`,class:"d-inline-block text-truncate link-offset-2"},{default:R(()=>[S.arn?(t(),s("span",Mc)):E("",!0),Q(c(S.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(U,null,q(S.video.categories,W=>(t(),s("div",null,[e("span",xc,c(W.categoryName),1)]))),256)),S.video.genres.length>0?(t(),s("div",Cc,[(t(!0),s(U,null,q(S.video.genres,W=>(t(),s("span",Vc,c(W.genreName),1))),256))])):E("",!0)])])])]),e("td",null,[e("div",Pc,[e("div",Oc,[z(g,{to:`${n.urlViewVideo}/${encodeURIComponent(S.video.videoId)}/${o(x)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(S.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",Ac,c(o(oe).moment.utc(S.video.durationInMillis).format("HH:mm:ss")),1)]),S.video.formats.length>0?(t(!0),s(U,{key:0},q(S.video.formats,W=>(t(),s("span",Uc,c(W.formatName),1))),256)):E("",!0)])])]),e("td",Lc,[N(e("input",{"onUpdate:modelValue":W=>S.selected=W,type:"checkbox",class:"form-check-input"},null,8,Dc),[[qe,S.selected]])])]))),128))]),_:1},512),[[ke,o(K).items.length>0]])])]),z(H,{filter:o(K),search:o(Y),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},qc=["id"],Bc={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Nc={class:"modal-content"},Rc={class:"modal-header"},Fc={class:"modal-title"},zc={class:"modal-body"},Gc={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},jc=["innerHTML"],Yc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Wc={class:"container"},Kc={class:"col"},Qc={class:"form-floating mb-2"},Jc=["value"],Xc={key:0,class:"d-block invalid-feedback"},Zc={class:"col"},em={class:"form-floating mb-2"},tm={key:0,class:"d-block invalid-feedback"},sm={class:"col"},om={class:"form-floating mb-2"},am=["value"],lm={key:0,class:"d-block invalid-feedback"},nm={class:"modal-footer"},rm=["disabled"],im={__name:"_addPackageConfiguration",emits:["refresh"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add VOD Source Package Configuration"}),K=I;ce();const X=ce("modalAddChannelOutput"),m=be({lookups:{sourceGroups:[],formats:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),v={item:{sourceGroupId:{required:ae.withMessage("Source Group is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ae.withMessage("VOD Source is required.",re),$autoDirty:!0,$lazy:!0},path:{required:ae.withMessage("Path is required.",re),$autoDirty:!0,$lazy:!0},type:{required:ae.withMessage("Type is required.",re),$autoDirty:!0,$lazy:!0}}},Y=Se(v,m);fe(async()=>{Y.value.$reset()});const u=async()=>{await k()},k=async()=>{try{await B.get("/api/v1/sourceGroups/lookup/").then(a=>{m.lookups.sourceGroups=a.data,m.lookups.sourceGroups.length===1&&(m.item.sourceGroupId=m.lookups.sourceGroups[0].id)})}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},d=async f=>{try{const a=`/api/v1/videos/${f}/formats/`;await B.get(a).then(r=>{m.lookups.formats=r.data})}catch(a){G.value=A.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},h=async(f,a)=>{const r=m;J.value.clear(),G.value="",r.lookups={sourceGroups:[],formats:[]},r.item={sourceGroupId:null,vodSourceId:f,path:null,type:null},await u(),await d(a),Y.value.$reset();var M=document.getElementById(X.value),w=we.getOrCreateInstance(M);w.show()},b=async()=>{var f=document.getElementById(X.value),a=we.getOrCreateInstance(f);a.hide(),K("refresh")},l=async()=>{const f=m;if(D.value)return;const a=await Y.value.$validate();debugger;if(!a){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const r=f.item;await B.post("/api/v1/vodSources/package-configurations/",r).then(M=>{i.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await b()}catch(r){G.value=A.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{D.value=!1}};return p({open:h,close:b}),(f,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Bc,[e("div",Nc,[e("div",Rc,[e("h5",Fc,[a[5]||(a[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=r=>b()),"aria-label":"Close"})]),e("div",zc,[o(G)?(t(),s("div",Gc,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,jc)])):E("",!0),o(J).size>0?(t(),s("div",Yc,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),r=>(t(),s("li",null,c(r),1))),256))])])):E("",!0),e("div",Wc,[e("div",Kc,[e("div",Qc,[N(e("select",{"onUpdate:modelValue":a[1]||(a[1]=r=>m.item.sourceGroupId=r),class:te([o(A).getValidFeedbackCss(m.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(U,null,q(m.lookups.sourceGroups,r=>(t(),s("option",{value:r.id},c(r.name),9,Jc))),256))],2),[[ge,m.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(Y).item.sourceGroupId.$error?(t(),s("div",Xc,[(t(!0),s(U,null,q(o(Y).item.sourceGroupId.$errors,r=>(t(),s("div",{key:r.$uid},c(r.$message),1))),128))])):E("",!0)])]),e("div",Zc,[e("div",em,[N(e("select",{"onUpdate:modelValue":a[2]||(a[2]=r=>m.item.type=r),class:te([o(A).getValidFeedbackCss(m.item.type),"form-select"]),id:"type"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[ge,m.item.type]]),a[10]||(a[10]=e("label",{for:"type",class:""},"Type",-1)),o(Y).item.type.$error?(t(),s("div",tm,[(t(!0),s(U,null,q(o(Y).item.type.$errors,r=>(t(),s("div",{key:r.$uid},c(r.$message),1))),128))])):E("",!0)])]),e("div",sm,[e("div",om,[N(e("select",{"onUpdate:modelValue":a[3]||(a[3]=r=>m.item.path=r),class:te([o(A).getValidFeedbackCss(m.item.path),"form-control"]),id:"path"},[(t(!0),s(U,null,q(m.lookups.formats,r=>(t(),s("option",{value:r.path},c(r.path),9,am))),256))],2),[[ge,m.item.path]]),a[11]||(a[11]=e("label",{for:"path",class:""},"Path",-1)),o(Y).item.path.$error?(t(),s("div",lm,[(t(!0),s(U,null,q(o(Y).item.path.$errors,r=>(t(),s("div",{key:r.$uid},c(r.$message),1))),128))])):E("",!0)])])])]),e("div",nm,[e("button",{disabled:o(Y).$dirty&&o(Y).$invalid,onClick:a[4]||(a[4]=r=>l()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,rm),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,qc))}},dm=["id"],um={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},cm={class:"modal-content"},mm={class:"modal-header"},fm={class:"modal-title"},pm={class:"modal-body"},vm={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gm=["innerHTML"],bm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ym={class:"container"},$m={class:"col"},wm={class:"form-floating mb-2"},hm={class:"col"},_m={class:"form-floating mb-2"},km={key:0,class:"d-block invalid-feedback"},Sm={class:"col"},Tm={class:"form-floating mb-2"},Im={key:0,class:"d-block invalid-feedback"},Mm={class:"col"},xm={class:"form-floating mb-2"},Cm={key:0,class:"d-block invalid-feedback"},Vm={class:"modal-footer"},Pm=["disabled"],Om={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Vod Source Playback Configuration"}),K=I,X=ce(),m=ce("modalAddPlaybackConfiguration"),v=be({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ae.withMessage("adDecisionServerUrl is required.",re),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ae.withMessage("videoContentSourceUrl is required.",re),$autoDirty:!0,$lazy:!0}}},u=Se(Y,v);fe(async()=>{u.value.$reset()});const k=async(b,l)=>{X.value=b;const f=v;J.value.clear(),G.value="";const a=l,r=a.lastIndexOf("/"),M=a.substring(0,r),w="ad_campaign_"+a.substring(r+1).replace(".","_");f.item={name:w,originalVideoContentSourceUrl:l,videoContentSourceUrl:M,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},u.value.$reset();var g=document.getElementById(m.value),O=we.getOrCreateInstance(g);O.show()},d=async()=>{var b=document.getElementById(m.value),l=we.getOrCreateInstance(b);l.hide(),K("refresh")},h=async()=>{const b=v;if(D.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const f=b.item;f.vodSourceId=X.value,await B.post("/api/v1/playbackconfigurations/vodsource",f).then(a=>{i.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await d()}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{D.value=!1}};return p({open:k,close:d}),(b,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:m.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",um,[e("div",cm,[e("div",mm,[e("h5",fm,[l[6]||(l[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=f=>d()),"aria-label":"Close"})]),e("div",pm,[o(G)?(t(),s("div",vm,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,gm)])):E("",!0),o(J).size>0?(t(),s("div",bm,[l[8]||(l[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),f=>(t(),s("li",null,c(f),1))),256))])])):E("",!0),e("div",ym,[e("div",$m,[e("div",wm,[N(e("input",{"onUpdate:modelValue":l[1]||(l[1]=f=>v.item.originalVideoContentSourceUrl=f),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Z,v.item.originalVideoContentSourceUrl]]),l[9]||(l[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",hm,[e("div",_m,[N(e("input",{"onUpdate:modelValue":l[2]||(l[2]=f=>v.item.name=f),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,v.item.name]]),l[10]||(l[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",km,[(t(!0),s(U,null,q(o(u).item.name.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):E("",!0)])]),e("div",Sm,[e("div",Tm,[N(e("input",{"onUpdate:modelValue":l[3]||(l[3]=f=>v.item.videoContentSourceUrl=f),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,v.item.videoContentSourceUrl]]),l[11]||(l[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),l[12]||(l[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(u).item.videoContentSourceUrl.$error?(t(),s("div",Im,[(t(!0),s(U,null,q(o(u).item.videoContentSourceUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):E("",!0)])]),e("div",Mm,[e("div",xm,[N(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=f=>v.item.adDecisionServerUrl=f),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,v.item.adDecisionServerUrl]]),l[13]||(l[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(u).item.adDecisionServerUrl.$error?(t(),s("div",Cm,[(t(!0),s(U,null,q(o(u).item.adDecisionServerUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):E("",!0)])])])]),e("div",Vm,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:l[5]||(l[5]=f=>h()),class:"btn btn-primary",type:"button"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Pm),l[15]||(l[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,dm))}},Am={key:0},Um={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Lm={class:"nav-item",role:"presentation"},Dm={class:"nav-item",role:"presentation"},Hm={class:"nav-item",role:"presentation"},Em={class:"nav-item",role:"presentation"},qm={class:"nav-item",role:"presentation"},Bm={class:"tab-content",id:"myTabContent"},Nm={class:"mt-2"},Rm={class:"row row-cols-1 row-cols-sm-2"},Fm={class:"col"},zm=["id"],Gm={class:"col"},jm={class:"col"},Ym={class:"form-floating mb-2"},Wm={class:"mt-2"},Km={class:"row row-cols-sm-2"},Qm={class:"col"},Jm={class:"form-floating mb-2"},Xm={class:"form-control-plaintext"},Zm={class:"col"},ef={class:"form-floating mb-2"},tf={class:"mt-1"},sf={class:"badge bg-info me-1"},of={class:"badge bg-primary me-1"},af={class:"badge bg-info me-1"},lf={class:"table-responsive border mt-1"},nf={class:"table table-hover mb-0"},rf={class:"table-group-divider"},df={class:"align-middle"},uf={class:"text-center"},cf={class:"text-truncate text-wrap"},mf={class:"text-truncate text-wrap"},ff={class:"mt-2"},pf={class:"mt-2 text-end"},vf={class:"table-responsive border mt-2"},gf={class:"table table-hover mb-0 caption-top"},bf={class:"text-end"},yf=["onClick"],$f={class:"mt-2"},wf={class:"mt-1"},hf=["id"],_f={class:"text-end"},kf={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(n){const p=n,{appTitle:I,pageTitle:V,busy:_,isDirty:D,validations:P,infoMessage:J,warningMessage:j,errorMessage:C,router:G,axios:oe,utils:B,toasts:A,close:i,closeWithReturnUrl:x,generateReturnUrl:$,security:K}=$e({appTitle:"Arcadian-FAST",pageTitle:"View VOD Source"});Me("$config");const X=he();X.user;const m=be({user:X.user,item:null,hls:null}),v=ce();ce(null);const Y=ce();fe(async()=>{await h();const w=B.getPageTab("vodSource")||"information-tab";u(w)}),Ae(()=>{m.hls&&(m.hls.stopLoad(),m.hls.destroy())});const u=w=>{B.setPageTab("vodSource",w),v.value=w},k=w=>w!==v.value?"":"active",d=w=>w!==v.value?"":"show active",h=async()=>{const w=m;if(!_.value)try{_.value=!0,C.value="",m.item=null;const g=`/api/v1/vodsources/${p.id}/`;await oe.get(g).then(O=>{w.item=O.data;const H=w.item,y=B.moment.utc(w.item.video.durationInMillis).format("HH:mm:ss");H.video.duration=y}),M()}catch(g){C.value=B.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}},b=async()=>{await h()},l=()=>{Y.value.open(m.item.vodSourceId,m.item.videoId)},f=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!_.value){C.value=null;try{_.value=!0;const g={vodSourceIds:[p.id]};await oe.post("/api/v1/vodsources/publish/",g).then(O=>{A.success("Publish VOD","VOD was published.",{async onClose(){}})}),_.value=!1,await b()}catch(g){C.value=B.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!_.value){C.value=null;try{_.value=!0;const g={vodSourceIds:[p.id]};await oe.post("/api/v1/vodsources/unpublish/",g).then(O=>{A.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),_.value=!1,await b()}catch(g){C.value=B.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{_.value=!1}}},r=async w=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!_.value){C.value=null;try{_.value=!0,await oe.delete(`/api/v1/vodSources/package-configurations/${w}/`).then(O=>{A.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),_.value=!1,await b()}catch(O){C.value=B.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{_.value=!1}}},M=()=>{if(Hls.isSupported()){m.hls&&(m.hls.stopLoad(),m.hls.destroy());const w=`video-${m.item.vodSourceId}`,g=document.getElementById(w),O=m.item.video.formats.find(y=>y.formatName==="HLS"),H=`${O.serverUrl}${O.path}`;m.hls=B.createHlsStream(g,H)}};return(w,g)=>{const O=se("router-link"),H=se("PageHeader"),y=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(H,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(V)},{default:R(()=>[m.item?(t(),s(U,{key:0},[m.item.arn?(t(),s("button",{key:0,onClick:g[0]||(g[0]=S=>a()),class:"ms-1 btn btn-warning"},g[14]||(g[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:g[1]||(g[1]=S=>f()),class:"ms-1 btn btn-primary"},g[15]||(g[15]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):E("",!0),z(O,{to:`${n.urlEdit}/${n.id}`,class:"ms-2 btn btn-primary"},{default:R(()=>g[16]||(g[16]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:g[2]||(g[2]=S=>b()),class:"ms-2 btn btn-secondary"},g[17]||(g[17]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:g[3]||(g[3]=S=>o(x)(p.urlMain)),class:"btn btn-secondary ms-1"},g[18]||(g[18]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(y,{errorMessage:o(C)},{default:R(()=>[m.item?(t(),s("div",Am,[e("div",null,[e("ul",Um,[e("li",Lm,[e("button",{onClick:g[4]||(g[4]=S=>u("information-tab")),class:te([k("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Dm,[e("button",{onClick:g[5]||(g[5]=S=>u("packageConfigurations-tab")),class:te([k("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",Hm,[e("button",{onClick:g[6]||(g[6]=S=>u("channels-tab")),class:te([k("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},g[19]||(g[19]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),Q("Channels ")]),2)]),e("li",Em,[e("button",{onClick:g[7]||(g[7]=S=>u("programs-tab")),class:te([k("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},g[20]||(g[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),Q("Programs ")]),2)]),e("li",qm,[e("button",{onClick:g[8]||(g[8]=S=>u("programTemplates-tab")),class:te([k("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},g[21]||(g[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),Q("Program Templates ")]),2)])]),e("div",Bm,[e("div",{class:te([d("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Nm,[e("div",Rm,[e("div",Fm,[e("video",{id:`video-${m.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,zm)]),e("div",Gm,[e("div",jm,[e("div",Ym,[N(e("input",{"onUpdate:modelValue":g[9]||(g[9]=S=>m.item.name=S),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,m.item.name]]),g[22]||(g[22]=e("label",{for:"name"},"Name",-1))])]),e("div",Wm,[g[26]||(g[26]=e("b",null," Video Information ",-1)),e("div",null,[e("div",Km,[e("div",Qm,[e("div",Jm,[e("div",Xm,[z(O,{to:`${n.urlViewVideo}/${m.item.video.videoId}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(m.item.video.title),1)]),_:1},8,["to"])]),g[23]||(g[23]=e("label",{for:"title"},"Title",-1))])]),e("div",Zm,[e("div",ef,[N(e("input",{"onUpdate:modelValue":g[10]||(g[10]=S=>m.item.video.duration=S),type:"text",class:"form-control-plaintext",id:"duration",readonly:""},null,512),[[Z,m.item.video.duration]]),g[24]||(g[24]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",tf,[(t(!0),s(U,null,q(m.item.video.genres,S=>(t(),s("span",sf,c(S.genreName),1))),256)),(t(!0),s(U,null,q(m.item.video.categories,S=>(t(),s("span",of,c(S.categoryName),1))),256)),(t(!0),s(U,null,q(m.item.video.categories,S=>(t(),s("span",af,c(S.categoryName),1))),256))]),e("div",lf,[e("table",nf,[g[25]||(g[25]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",rf,[(t(!0),s(U,null,q(m.item.video.formats,(S,F)=>(t(),s("tr",df,[e("td",uf,c(F+1),1),e("td",null,c(S.formatName),1),e("td",null,[e("div",cf,c(S.serverUrl),1)]),e("td",null,[e("div",mf,c(S.path),1)])]))),256))])])])])])])])])],2),e("div",{class:te([d("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",ff,[e("div",pf,[e("button",{onClick:g[11]||(g[11]=S=>l()),class:"btn btn-outline-primary btn-sm"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",vf,[e("table",gf,[g[29]||(g[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.packageConfigurations,(S,F)=>(t(),s("tr",{key:S.packageConfigurationId,class:"align-middle"},[e("td",null,c(F+1),1),e("td",null,c(S.path),1),e("td",null,c(S.sourceGroup.name),1),e("td",null,c(S.type),1),e("td",bf,[e("button",{onClick:W=>r(S.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},g[28]||(g[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,yf)])]))),128))]),_:1},512),[[ke,m.item.packageConfigurations.length>0]])])])])],2),e("div",{class:te([d("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",$f,[e("div",wf,[e("video",{id:`video-${m.item.vodSourceId}`,controls:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,hf),e("div",_f,[e("button",{onClick:g[12]||(g[12]=S=>m.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},g[30]||(g[30]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:te([d("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},g[31]||(g[31]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:te([d("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},g[32]||(g[32]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:te([d("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},g[33]||(g[33]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):E("",!0)]),_:1},8,["errorMessage"]),z(im,{ref_key:"modalAddPackageConfiguration",ref:Y,onRefresh:b},null,512),z(Om,{ref:"modalAddPlaybackConfiguration",onRefresh:g[13]||(g[13]=S=>b())},null,512)])]),_:1})}}},Sf=["id"],Tf={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},If={class:"modal-content"},Mf={class:"modal-header"},xf={class:"modal-title"},Cf={class:"modal-body p-1"},Vf={class:"row row-cols-1 row-cols-sm-3"},Pf={class:"col"},Of={class:"form-floating mb-2"},Af=["value"],Uf={class:"col"},Lf={class:"form-floating mb-2"},Df=["value"],Hf={class:"col"},Ef={class:"input-group mb-2"},qf={class:"form-floating"},Bf={class:"row row-cols-1 row-cols-sm-2 g-2"},Nf={class:"col-sm-4"},Rf={class:"card"},Ff={key:0,class:"mt-2"},zf={class:"col"},Gf={class:"form-floating mb-2"},jf={class:"col ms-2 my-2"},Yf={class:"badge bg-info me-1"},Wf={class:"badge bg-primary me-1"},Kf={class:"row row-cols-1 row-cols-sm-2"},Qf={class:"col"},Jf={class:"form-floating mb-2"},Xf={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Zf={class:"col"},ep={class:"form-floating mb-2"},tp={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},sp={class:"col"},op={class:"form-floating mb-2"},ap={class:"col-sm-8"},lp={class:"table-responsive border shadow-sm"},np={class:"table table-sm table-hover mb-0 overflow-auto"},rp=["textContent"],ip={class:"d-flex flex-row justify-content-start"},dp={class:"mt-1"},up=["src"],cp={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},mp={class:"ms-2"},fp=["onClick"],pp={class:"modal-footer"},vp="/api/v1/vodSources/search",mt={__name:"_selectVodSource",props:{sourceLocationId:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:p,emit:I}){const _=he().user,{appTitle:D,pageTitle:P,busy:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,security:x,filter:$,initializeFilter:K,getQuery:X,saveQuery:m,search:v,getRowNumber:Y,setSelected:u,isSelected:k}=Le({appTitle:"Arcadian-FAST",pageTitle:"Select VOD Source",cacheKey:`${_==null?void 0:_.userId}/vodsources/select`,baseUrl:vp,filter:{updateUrl:!0,lookups:{genres:[]},query:{genreId:0,categoryId:0,sourceLocationId:null}},initializeFilter:(H,y)=>{const S=H.value,F=new URLSearchParams(window.location.search),W=JSON.parse(localStorage.getItem(y))||{};S.query.genre=F.get("genre")||W.genre||S.query.genre||0,S.query.category=F.get("category")||W.category||S.query.category||0},getQuery:H=>["?c=",encodeURIComponent(H.query.criteria),"&p=",H.pageIndex,"&s=",H.pageSize,"&sf=",H.sortField,"&so=",H.sortOrder,"&genre=",H.query.genreId,"&category=",H.query.categoryId,"&slid=",H.query.sourceLocationId,"&withArn=true"].join(""),saveQuery:(H,y)=>{localStorage.setItem(y,JSON.stringify({criteria:H.query.criteria,pageIndex:H.pageIndex,pageSize:H.pageSize,sortField:H.sortField,sortOrder:H.sortOrder,visible:H.visible,genre:H.query.genre,category:H.query.category}))}}),d=I,h=n,b=ce("modalSelectVodSource"),l=be({vodSource:null,hls:null});fe(async()=>{K(),await f(),await a()}),Ae(()=>{l.hls&&(l.hls.stopLoad(),l.hls.destroy())});const f=async()=>{await M(),await w()},a=async()=>{$.value.query.sourceLocationId=h.sourceLocationId,G.value="",await v();var H=document.getElementById(b.value),y=we.getOrCreateInstance(H);y.show()},r=async()=>{var H=document.getElementById(b.value),y=we.getOrCreateInstance(H);y.hide(),l.hls&&(l.hls.stopLoad(),l.hls.destroy()),d(confirm?"confirm":"cancel",confirm?l.vodSource:null)},M=async H=>{try{const S=await B.get("/api/v1/lookups/video-categories/").then(F=>F.data);$.value.lookups.categories=S}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},w=async H=>{try{const S=await B.get("/api/v1/lookups/video-genres/").then(F=>F.data);$.value.lookups.genres=S}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},g=H=>{l.vodSource=H,O()},O=()=>{if(Hls.isSupported()){l.hls&&(l.hls.stopLoad(),l.hls.destroy());var H=document.getElementById("video-select-preview");const S=l.vodSource.video.formats.find(W=>W.formatName==="HLS"),F=S.serverUrl+S.path;l.hls=A.createHlsStream(H,F)}};return p({open:a,close:r}),(H,y)=>{const S=se("m-pagination"),F=se("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:b.value,tabindex:"-1","aria-hidden":"true"},[e("div",Tf,[e("div",If,[e("div",Mf,[e("h5",xf,[y[10]||(y[10]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(P)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=W=>r()),"aria-label":"Close"})]),e("div",Cf,[z(F,{errorMessage:o(G)},{default:R(()=>[e("div",Vf,[e("div",Pf,[e("div",Of,[N(e("select",{"onUpdate:modelValue":y[1]||(y[1]=W=>o($).query.categoryId=W),class:"form-select",id:"category"},[(t(!0),s(U,null,q(o($).lookups.categories,W=>(t(),s("option",{value:W.id},c(W.name),9,Af))),256))],512),[[ge,o($).query.categoryId]]),y[11]||(y[11]=e("label",{for:"category",class:""},"Category",-1))])]),e("div",Uf,[e("div",Lf,[N(e("select",{"onUpdate:modelValue":y[2]||(y[2]=W=>o($).query.genreId=W),class:"form-select",id:"genre"},[(t(!0),s(U,null,q(o($).lookups.genres,W=>(t(),s("option",{value:W.id},c(W.name),9,Df))),256))],512),[[ge,o($).query.genreId]]),y[12]||(y[12]=e("label",{for:"genre",class:""},"Genre",-1))])]),e("div",Hf,[e("div",Ef,[e("div",qf,[N(e("input",{"onUpdate:modelValue":y[3]||(y[3]=W=>o($).query.criteria=W),onKeyup:y[4]||(y[4]=Ue(W=>o(v)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o($).query.criteria]]),y[13]||(y[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:y[5]||(y[5]=W=>o(v)(1))},y[14]||(y[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),e("div",Bf,[e("div",Nf,[e("div",Rf,[y[19]||(y[19]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),l.vodSource?(t(),s("div",Ff,[e("div",zf,[e("div",Gf,[N(e("input",{"onUpdate:modelValue":y[6]||(y[6]=W=>l.vodSource.video.title=W),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,l.vodSource.video.title]]),y[15]||(y[15]=e("label",{for:"title"},"Title",-1))])]),e("div",jf,[e("div",null,[(t(!0),s(U,null,q(l.vodSource.video.genres,W=>(t(),s("span",Yf,c(W.genreName),1))),256)),(t(!0),s(U,null,q(l.vodSource.video.categories,W=>(t(),s("span",Wf,c(W.categoryName),1))),256))])]),e("div",Kf,[e("div",Qf,[e("div",Jf,[e("div",Xf,c(o(A).moment(l.vodSource.video.dateReleased).calendar()),1),y[16]||(y[16]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Zf,[e("div",ep,[e("div",tp,c(o(A).moment.utc(l.vodSource.video.durationInMillis).format("HH:mm:ss")),1),y[17]||(y[17]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",sp,[e("div",op,[N(e("textarea",{"onUpdate:modelValue":y[7]||(y[7]=W=>l.vodSource.video.description=W),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,l.vodSource.video.description]]),y[18]||(y[18]=e("label",{for:"description"},"Description",-1))])])])):E("",!0)])]),e("div",ap,[e("div",lp,[e("table",np,[y[20]||(y[20]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o($).items,(W,pe)=>(t(),s("tr",{key:W.videoId},[e("td",{textContent:c(o(Y)(pe)),class:"text-center"},null,8,rp),e("td",null,[e("div",ip,[e("div",null,[W.video.thumbnails.length>0?(t(!0),s(U,{key:0},q(W.video.thumbnails,ee=>(t(),s("div",dp,[e("img",{src:ee.url,class:"img-fuild border",width:"128"},null,8,up)]))),256)):(t(),s("img",cp))]),e("div",mp,[e("a",{onClick:ee=>g(W),class:"text-wrap link-offset-2",role:"button"},c(W.name),9,fp)])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(S,{filter:o($),search:o(v),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",pp,[e("button",{onClick:y[8]||(y[8]=W=>r()),class:"btn btn-primary",type:"button"},y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:y[9]||(y[9]=W=>r()),class:"btn btn-secondary ms-1"},y[22]||(y[22]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Sf)}}},gp=["disabled"],bp={class:"container1"},yp={class:"row"},$p={class:"col-12 col-lg-6"},wp={class:"col"},hp={class:"form-floating mb-2"},_p=["value"],kp={key:0,class:"d-block invalid-feedback"},Sp={class:"col"},Tp={class:"input-group mb-2"},Ip={class:"form-floating"},Mp={class:"col-12 col-lg-6"},xp={class:"col"},Cp={class:"form-floating mb-2"},Vp={key:0,class:"d-block invalid-feedback"},Pp={class:"row row-cols-1 row-cols-sm-3 mt-2"},Op={class:"col"},Ap={class:"form-floating mb-2"},Up={key:0},Lp={key:1},Dp={key:2},Hp={key:3,class:"d-block invalid-feedback"},Ep={class:"col"},qp={class:"form-floating mb-2"},Bp={key:0},Np={key:1},Rp={key:2,class:"d-block invalid-feedback"},Fp={class:"col"},zp={class:"form-floating mb-2"},Gp={key:0,class:"mt-3"},jp={class:"table-responsive border mt-1"},Yp={class:"table table-borderless table-sm mb-0 align-middle"},Wp={class:"text-center"},Kp=["onUpdate:modelValue","onChange"],Qp={key:0},Jp=["onUpdate:modelValue","onChange"],Xp={class:"text-start"},Zp=["onClick"],ev={class:"col mt-2"},tv={class:"row row-cols-1 row-cols-sm-2"},sv={class:"col"},ov={class:"form-floating mb-2"},av={class:"col"},lv={class:"form-floating mb-2"},nv={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Program Template"}),A=n,i=be({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},startOffsetTime:null,endOffsetTime:null,item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),x={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ae.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ae.withMessage("startOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ae.withMessage("endOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0}}},$=Se(x,i),K=Ie(()=>{const S=C.moment;if(i.startOffsetTime&&i.startOffsetTime!=="00:00:00"&&C.isValidTime(i.startOffsetTime)){const F=S().startOf("day"),W=F.format("YYYY-MM-DD ")+i.startOffsetTime,ee=S(W).subtract(F);return i.item.startOffsetMillis=ee.valueOf(),i.item.startOffsetMillis}return 0}),X=Ie(()=>{const S=C.moment;if(i.endOffsetTime&&i.endOffsetTime!=="00:00:00"&&C.isValidTime(i.endOffsetTime)){const F=S().startOf("day"),W=F.format("YYYY-MM-DD ")+i.endOffsetTime,ee=S(W).subtract(F);return i.item.endOffsetMillis=ee.valueOf(),i.item.endOffsetMillis}return 0}),m=Ie(()=>i.item.endOffsetMillis-i.item.startOffsetMillis),v=Ie(()=>C.moment.utc(m.value).format("HH:mm:ss")),Y=Ie(()=>{const S=i.item.adBreaks;return S&&S.length>0?S.reduce((W,pe,ee)=>W+pe.durationInMillis,0):0}),u=Ie(()=>{const S=m.value+Y.value;return C.moment.utc(S).format("HH:mm:ss")}),k=Ie(()=>C.moment.utc(Y.value).format("HH:mm:ss"));fe(async()=>{await d()}),Ae(()=>{i.hls&&(i.hls.stopLoad(),i.hls.destroy())});const d=async()=>{await h(),await a()},h=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(F=>{i.lookups.sourceLocations=F.data,i.lookups.sourceLocations.length===1&&(i.item.sourceLocationId=i.lookups.sourceLocations[0].id)}),i.item.sourceLocationId&&await b(i.item.sourceLocationId)}catch(S){P.value=C.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{}},b=async S=>{try{const F=`/api/v1/vodSources/lookup/source-location/${S}/?category=3`;await j.get(F).then(W=>{i.lookups.vodSources=W.data}),i.selected.vodSource=null,l()}catch(F){P.value=C.getErrorMessageAsHtml(F),window.scrollTo(0,0)}finally{}},l=async()=>{const S=i.selected.vodSource;S?(i.item.vodSourceId=S.id,i.endOffsetTime=C.moment.utc(S.durationInMillis).format("HH:mm:ss"),await f(S.vodSourceId),H()):(i.selected.vodSource=null,i.item.vodSourceId=null,i.startOffsetTime=null,i.endOffsetTime=null,i.hls&&(i.hls.stopLoad(),i.hls.destroy()))},f=async S=>{try{let F=`/api/v1/vodSources/${S}/blank-frames`;const W=await j.get(F).then(pe=>pe.data);i.item.adBreaks=[],W&&W.length>0&&(i.item.adBreaks=W.map(pe=>{const ee=(pe.endInMillis-pe.startInMillis)/2+pe.startInMillis;return{offsetTime:C.moment.utc(ee).format("HH:mm:ss"),offsetMillis:ee,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch{}finally{}},a=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(F=>{i.lookups.adBreakSourceLocations=F.data})}catch(S){P.value=C.getErrorMessageAsHtml(S),window.scrollTo(0,0)}finally{}},r=()=>{const S={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};i.item.adBreaks.push(S)},M=S=>{i.item.adBreaks.splice(S,1)},w=S=>{const F=C.moment,W=F().startOf("day"),pe=W.format("YYYY-MM-DD ")+S.offsetTime,T=F(pe).subtract(W);S.offsetMillis=T.valueOf()},g=S=>{const F=C.moment,W=F().startOf("day"),pe=W.format("YYYY-MM-DD ")+S.durationTime,T=F(pe).subtract(W);S.durationInMillis=T.valueOf()},O=async()=>{const S=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const W=C.clone(S.item),pe=W.adBreaks.filter(ee=>ee.durationInMillis>0);W.adBreaks=pe,await j.post("/api/v1/programtemplates/",W).then(ee=>{G.success("Add Program Template","Program template added.",{onClose:async()=>{const T=`${A.urlView}/${ee.data}`;await J.push(T)}})})}catch(W){P.value=C.getErrorMessageAsHtml(W),window.scrollTo(0,0)}finally{V.value=!1}},H=()=>{if(Hls.isSupported()){i.hls&&(i.hls.stopLoad(),i.hls.destroy());var S=document.getElementById("video-add-program-template");const W=i.selected.vodSource.video.formats.find(ee=>ee.formatName==="HLS"),pe=W.serverUrl+W.path;i.hls=C.createHlsStream(S,pe)}},y=async()=>{const S=Ee(mt,{sourceLocationId:i.item.sourceLocationId},{chore:!0,keepInitial:!1}),{data:F,isCanceled:W}=await S.reveal();if(S.closeAll(),!W&&F){const pe=F;i.selected.vodSource=pe,i.item.vodSourceId=pe.vodSourceId,i.startOffsetTime="00:00:00",i.endOffsetTime=C.moment.utc(pe.video.durationInMillis).format("HH:mm:ss"),await f(pe.vodSourceId),H()}};return(S,F)=>{const W=se("router-link"),pe=se("PageHeader"),ee=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(pe,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:F[0]||(F[0]=T=>O()),class:"btn btn-primary"},F[9]||(F[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,gp),z(W,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:R(()=>F[10]||(F[10]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(ee,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[e("div",null,[e("div",bp,[e("div",yp,[e("div",$p,[e("div",wp,[e("div",hp,[N(e("select",{"onUpdate:modelValue":F[1]||(F[1]=T=>i.item.sourceLocationId=T),onChange:F[2]||(F[2]=T=>b(i.item.sourceLocationId)),class:te([o(C).getValidFeedbackCss(i.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(U,null,q(i.lookups.sourceLocations,T=>(t(),s("option",{value:T.id},c(T.name),9,_p))),256))],34),[[ge,i.item.sourceLocationId]]),F[11]||(F[11]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o($).item.sourceLocationId.$error?(t(),s("div",kp,[(t(!0),s(U,null,q(o($).item.sourceLocationId.$errors,T=>(t(),s("div",{key:T.$uid},c(T.$message),1))),128))])):E("",!0)])]),e("div",Sp,[e("div",Tp,[e("div",Ip,[e("div",{id:"selectedVodSource",class:te([o(C).getValidFeedbackCss(i.selected.vodSource),"form-control"]),placeholder:"Title"},[i.selected.vodSource?(t(),s(U,{key:0},[Q(" ["+c(o(C).moment.utc(i.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+c(i.selected.vodSource.name),1)],64)):E("",!0)],2),F[12]||(F[12]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),i.item.sourceLocationId?(t(),s("button",{key:0,onClick:y,class:"btn btn-primary",type:"button"},F[13]||(F[13]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))):E("",!0)])]),F[14]||(F[14]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Mp,[e("div",xp,[e("div",Cp,[N(e("input",{"onUpdate:modelValue":F[3]||(F[3]=T=>i.item.name=T),id:"name",class:te([o(C).getValidFeedbackCss(i.item.name),"form-control"]),placeholder:"Name"},null,2),[[Z,i.item.name]]),F[15]||(F[15]=e("label",{for:"name",class:""},"Name",-1)),o($).item.name.$error?(t(),s("div",Vp,[(t(!0),s(U,null,q(o($).item.name.$errors,T=>(t(),s("div",{key:T.$uid},c(T.$message),1))),128))])):E("",!0)])]),e("div",Pp,[e("div",Op,[e("div",null,[e("div",Ap,[N(e("input",{"onUpdate:modelValue":F[4]||(F[4]=T=>i.startOffsetTime=T),type:"time",step:"1",id:"startOffsetTime",class:te([o(C).getValidFeedbackCss(i.startOffsetTime),"form-control"])},null,2),[[Z,i.startOffsetTime]]),F[16]||(F[16]=e("label",{for:"startOffsetTime",class:""}," Start OffSet Time ",-1))]),K.value>0&&K.value<3e4?(t(),s("div",Up,F[17]||(F[17]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):E("",!0),K.value>X.value&&X.value>0?(t(),s("div",Lp,F[18]||(F[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):E("",!0),i.selected.vodSource&&K.value>=i.selected.vodSource.durationInMillis?(t(),s("div",Dp,F[19]||(F[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):E("",!0),o($).item.startOffsetMillis.$error?(t(),s("div",Hp,[(t(!0),s(U,null,q(o($).item.startOffsetMillis.$errors,T=>(t(),s("div",{key:T.$uid},c(T.$message),1))),128))])):E("",!0)])]),e("div",Ep,[e("div",null,[e("div",qp,[N(e("input",{"onUpdate:modelValue":F[5]||(F[5]=T=>i.endOffsetTime=T),type:"time",step:"1",id:"endOffsetTime",class:te([o(C).getValidFeedbackCss(i.endOffsetTime),"form-control"])},null,2),[[Z,i.endOffsetTime]]),F[20]||(F[20]=e("label",{for:"endOffsetTime",class:""}," End OffSet Time ",-1))]),X.value>0&&X.value<3e4?(t(),s("div",Bp,F[21]||(F[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):E("",!0),i.selected.vodSource&&X.value>i.selected.vodSource.durationInMillis?(t(),s("div",Np,F[22]||(F[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):E("",!0),o($).item.endOffsetMillis.$error?(t(),s("div",Rp,[(t(!0),s(U,null,q(o($).item.endOffsetMillis.$errors,T=>(t(),s("div",{key:T.$uid},c(T.$message),1))),128))])):E("",!0)])]),e("div",Fp,[e("div",zp,[N(e("input",{"onUpdate:modelValue":F[6]||(F[6]=T=>v.value=T),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,v.value]]),F[23]||(F[23]=e("label",{for:"durationTime"},"Clip",-1))])])]),i.item.vodSourceId?(t(),s("div",Gp,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[F[25]||(F[25]=e("div",{class:"fw-bold small"}," Ad Break ",-1)),e("div",null,[e("button",{onClick:r,class:"btn btn-outline-primary btn-sm"},F[24]||(F[24]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",jp,[e("table",Yp,[F[28]||(F[28]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(i.item.adBreaks,(T,ue)=>(t(),s("tr",null,[e("td",Wp,c(ue+1),1),e("td",null,[N(e("input",{"onUpdate:modelValue":le=>T.offsetTime=le,onChange:le=>w(T),type:"time",step:"1",class:"form-control"},null,40,Kp),[[Z,T.offsetTime]]),T.offsetMillis>=i.selected.vodSource.durationInMillis?(t(),s("div",Qp,F[26]||(F[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):E("",!0)]),e("td",null,[N(e("input",{"onUpdate:modelValue":le=>T.durationTime=le,onChange:le=>g(T),type:"time",step:"1",class:"form-control"},null,40,Jp),[[Z,T.durationTime]])]),e("td",Xp,[e("button",{onClick:le=>M(ue),class:"btn btn-outline-warning btn-sm"},F[27]||(F[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Zp)])]))),256))])]),F[29]||(F[29]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),Q(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):E("",!0),e("div",ev,[F[32]||(F[32]=e("div",{class:"fw-bold small"}," Duration ",-1)),e("div",tv,[e("div",sv,[e("div",ov,[N(e("input",{"onUpdate:modelValue":F[7]||(F[7]=T=>k.value=T),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,k.value]]),F[30]||(F[30]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",av,[e("div",lv,[N(e("input",{"onUpdate:modelValue":F[8]||(F[8]=T=>u.value=T),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[Z,u.value]]),F[31]||(F[31]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},rv=["disabled"],iv={class:"container1"},dv={class:"row"},uv={class:"col-12 col-lg-6"},cv={class:"col"},mv={class:"form-floating mb-2"},fv=["value"],pv={key:0,class:"d-block invalid-feedback"},vv={class:"col"},gv={class:"input-group mb-2"},bv={class:"form-floating"},yv={id:"selectedVodSource",class:"form-control",placeholder:"Title"},$v={class:"col-12 col-lg-6"},wv={class:"col"},hv={class:"form-floating mb-2"},_v={key:0,class:"d-block invalid-feedback"},kv={class:"row row-cols- row-cols-sm-3"},Sv={class:"col"},Tv={class:"form-floating mb-2"},Iv={key:0},Mv={key:1},xv={key:2},Cv={key:3,class:"d-block invalid-feedback"},Vv={class:"col"},Pv={class:"form-floating"},Ov={key:0},Av={key:1},Uv={key:2,class:"d-block invalid-feedback"},Lv={class:"col"},Dv={class:"form-floating mb-2"},Hv={key:0,class:"mt-2"},Ev={class:"table-responsive border mt-1"},qv={class:"table table-borderless table-sm mb-0 align-middle"},Bv=["onUpdate:modelValue","onChange"],Nv={key:0},Rv=["onUpdate:modelValue","onChange"],Fv=["onClick"],zv={class:"col mt-2"},Gv={class:"row row-cols-1 row-cols-sm-2"},jv={class:"col"},Yv={class:"form-floating mb-2"},Wv={class:"col"},Kv={class:"form-floating mb-2"},Qv={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,closeWithReturnUrl:B,security:A}=$e({appTitle:"Arcadian-FAST",pageTitle:"Edit Program Template"}),i=n,x=be({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),$=ce(!0),K={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ae.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ae.withMessage("startOffsetMillis is required.",re),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ae.withMessage("endOffsetMillis is required.",re),$autoDirty:!0,$lazy:!0}}},X=Se(K,x),m=Ie(()=>{if(x.startOffsetTime&&x.startOffsetTime!=="00:00:00"&&C.isValidTime(x.startOffsetTime)){const ee=C.moment,T=ee().startOf("day"),le=ee(x.startOffsetTime,"hh:mm:ss").diff(T);return x.item.startOffsetMillis=le.valueOf(),x.item.startOffsetMillis}return 0}),v=Ie(()=>{if(x.endOffsetTime&&x.endOffsetTime!=="00:00:00"&&C.isValidTime(x.endOffsetTime)){const ee=C.moment,T=ee().startOf("day"),le=ee(x.endOffsetTime,"hh:mm:ss").diff(T);return x.item.endOffsetMillis=le.valueOf(),x.item.endOffsetMillis}return 0}),Y=Ie(()=>x.item.endOffsetMillis-x.item.startOffsetMillis),u=Ie(()=>C.moment.utc(Y.value).format("HH:mm:ss")),k=Ie(()=>{const ee=x.item.adBreaks;return ee&&ee.length>0?ee.reduce((ue,le,ie)=>ue+le.durationInMillis,0):0}),d=Ie(()=>{const ee=Y.value+k.value;return C.moment.utc(ee).format("HH:mm:ss")}),h=Ie(()=>C.moment.utc(k.value).format("HH:mm:ss"));fe(async()=>{await b()});const b=async()=>{await l(),await f(),await a()},l=async()=>{try{const ee=`/api/v1/programtemplates/${i.id}/`;await j.get(ee).then(T=>{x.item=T.data}),x.startOffsetTime=C.moment.utc(x.item.startOffsetMillis).format("HH:mm:ss"),x.endOffsetTime=C.moment.utc(x.item.endOffsetMillis).format("HH:mm:ss"),x.item.adBreaks.forEach(T=>{T.offsetTime=C.moment.utc(T.offsetMillis).format("HH:mm:ss"),T.durationTime=C.moment.utc(T.durationInMillis).format("HH:mm:ss")})}catch(ee){P.value=C.getErrorMessageAsHtml(ee),window.scrollTo(0,0)}finally{}},f=async()=>{try{const ee=`/api/v1/vodSources/${x.item.vodSourceId}/`;await j.get(ee).then(T=>{x.selected.vodSource=T.data}),F()}catch(ee){P.value=C.getErrorMessageAsHtml(ee),window.scrollTo(0,0)}finally{}},a=async()=>{await r()},r=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(T=>{x.lookups.sourceLocations=T.data}),x.item.sourceLocationId&&await M(x.item.sourceLocationId)}catch(ee){P.value=C.getErrorMessageAsHtml(ee),window.scrollTo(0,0)}finally{}},M=async ee=>{try{const T=`/api/v1/vodSources/lookup/source-location/${ee}/?type=3`;if(await j.get(T).then(ue=>{x.lookups.vodSources=ue.data}),$.value){$.value=!1;return}x.selected.vodSource=null,w()}catch(T){P.value=C.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},w=async()=>{const ee=x.selected.vodSource;if(ee){debugger;x.item.vodSourceId=ee.vodSourceId,x.startOffsetTime=C.moment.utc(0).format("HH:mm:ss"),x.endOffsetTime=C.moment.utc(ee.video.durationInMillis).format("HH:mm:ss"),F()}else x.selected.vodSource=null,x.item.vodSourceId=null,x.startOffsetTime=null,x.endOffsetTime=null,x.hls&&(x.hls.stopLoad(),x.hls.destroy())},g=()=>{const ee={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};x.item.adBreaks.push(ee)},O=ee=>{x.item.adBreaks.splice(ee,1)},H=ee=>{const T=C.moment,ue=T().startOf("day"),le=ue.format("YYYY-MM-DD ")+ee.offsetTime,ne=T(le).subtract(ue);ee.offsetMillis=ne.valueOf()},y=ee=>{const T=C.moment,ue=T().startOf("day"),le=ue.format("YYYY-MM-DD ")+ee.durationTime,ne=T(le).subtract(ue);ee.durationInMillis=ne.valueOf()},S=async()=>{const ee=x;if(V.value)return;if(!await X.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const ue=C.clone(ee.item);debugger;ue.startOffsetMillis=m.value,ue.endOffsetMillis=v.value,await j.put("/api/v1/programtemplates/",ue).then(le=>{G.success("Edit Program Template","Program template edit.",{onClose:async()=>{const ie=`${i.urlView}/${i.id}`;await J.push(ie)}})})}catch(ue){P.value=C.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{V.value=!1}},F=()=>{if(Hls.isSupported()){x.hls&&(x.hls.stopLoad(),x.hls.destroy());var ee=document.getElementById("video-edit-program-template");const ue=x.selected.vodSource.video.formats.find(ie=>ie.formatName==="HLS"),le=ue.serverUrl+ue.path;x.hls=C.createHlsStream(ee,le)}},W=async ee=>{try{let T=`/api/v1/vodSources/${ee}/blank-frames`;const ue=await j.get(T).then(le=>le.data);x.item.adBreaks=[],ue&&ue.length>0&&(x.item.adBreaks=ue.map(le=>{const ie=(le.endInMillis-le.startInMillis)/2+le.startInMillis;return{offsetTime:C.moment.utc(ie).format("HH:mm:ss"),offsetMillis:ie,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(T){P.value=C.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},pe=async()=>{const ee=Ee(mt,{sourceLocationId:x.sourceLocationId},{chore:!0,keepInitial:!1}),{data:T,isCanceled:ue}=await ee.reveal();if(ee.closeAll(),!ue&&T){const le=T;x.selected.vodSource=le,x.item.vodSourceId=le.vodSourceId,w();debugger;await W(le.vodSourceId)}};return(ee,T)=>{const ue=se("PageHeader"),le=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(ue,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o(X).$dirty&&o(X).$invalid,onClick:T[0]||(T[0]=ie=>S()),class:"btn btn-primary"},T[11]||(T[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,rv),e("button",{onClick:T[1]||(T[1]=ie=>b()),class:"btn btn-secondary ms-2"},T[12]||(T[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:T[2]||(T[2]=ie=>o(B)(i.urlMain)),class:"btn btn-secondary ms-1"},T[13]||(T[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(le,{errorMessage:o(P),vuelidate:o(X)},{default:R(()=>[e("div",null,[e("div",iv,[e("div",dv,[e("div",uv,[e("div",cv,[e("div",mv,[N(e("select",{"onUpdate:modelValue":T[3]||(T[3]=ie=>x.item.sourceLocationId=ie),onChange:T[4]||(T[4]=ie=>M(x.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,q(x.lookups.sourceLocations,ie=>(t(),s("option",{value:ie.id},c(ie.name),9,fv))),256))],544),[[ge,x.item.sourceLocationId]]),T[14]||(T[14]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(X).item.sourceLocationId.$error?(t(),s("div",pv,[(t(!0),s(U,null,q(o(X).item.sourceLocationId.$errors,ie=>(t(),s("div",{key:ie.$uid},c(ie.$message),1))),128))])):E("",!0)])]),e("div",vv,[e("div",gv,[e("div",bv,[e("div",yv,[x.selected.vodSource?(t(),s(U,{key:0},[Q(" ["+c(o(C).moment.utc(x.selected.vodSource.video.durationInMillis).format("HH:mm:ss"))+"] - "+c(x.selected.vodSource.name),1)],64)):E("",!0)]),T[15]||(T[15]=e("label",{for:"selectedVodSource",class:""},"VOD Source",-1))]),e("button",{onClick:pe,class:"btn btn-primary",type:"button"},T[16]||(T[16]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))])]),T[17]||(T[17]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",$v,[e("div",wv,[e("div",hv,[N(e("input",{"onUpdate:modelValue":T[5]||(T[5]=ie=>x.item.name=ie),id:"name",class:te([o(C).getValidFeedbackCss(x.item.name),"form-control"]),placeholder:"Name"},null,2),[[Z,x.item.name]]),T[18]||(T[18]=e("label",{for:"name",class:""},"Name",-1)),o(X).item.name.$error?(t(),s("div",_v,[(t(!0),s(U,null,q(o(X).item.name.$errors,ie=>(t(),s("div",{key:ie.$uid},' d" '+c(ie.$message),1))),128))])):E("",!0)])]),e("div",kv,[e("div",Sv,[e("div",Tv,[N(e("input",{"onUpdate:modelValue":T[6]||(T[6]=ie=>x.startOffsetTime=ie),type:"time",step:"1",id:"startOffsetTime",class:te([o(C).getValidFeedbackCss(x.startOffsetTime),"form-control"])},null,2),[[Z,x.startOffsetTime]]),T[19]||(T[19]=e("label",{for:"startOffsetTime",class:""},"Start OffSet Time",-1))]),m.value>0&&m.value<3e4?(t(),s("div",Iv,T[20]||(T[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):E("",!0),m.value>v.value&&v.value>0?(t(),s("div",Mv,T[21]||(T[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):E("",!0),x.selected.vodSource&&m.value>=x.selected.vodSource.durationInMillis?(t(),s("div",xv,T[22]||(T[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):E("",!0),o(X).item.startOffsetMillis.$error?(t(),s("div",Cv,[(t(!0),s(U,null,q(o(X).item.startOffsetMillis.$errors,ie=>(t(),s("div",{key:ie.$uid},c(ie.$message),1))),128))])):E("",!0)]),e("div",Vv,[e("div",Pv,[N(e("input",{"onUpdate:modelValue":T[7]||(T[7]=ie=>x.endOffsetTime=ie),type:"time",step:"1",id:"endOffsetTime",class:te([o(C).getValidFeedbackCss(x.endOffsetTime),"form-control"])},null,2),[[Z,x.endOffsetTime]]),T[23]||(T[23]=e("label",{for:"endOffsetTime",class:""},"End OffSet Time",-1))]),v.value>0&&v.value<3e4?(t(),s("div",Ov,T[24]||(T[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):E("",!0),x.selected.vodSource&&v.value>x.selected.vodSource.durationInMillis?(t(),s("div",Av,T[25]||(T[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):E("",!0),o(X).item.endOffsetMillis.$error?(t(),s("div",Uv,[(t(!0),s(U,null,q(o(X).item.endOffsetMillis.$errors,ie=>(t(),s("div",{key:ie.$uid},c(ie.$message),1))),128))])):E("",!0)]),e("div",Lv,[e("div",Dv,[N(e("input",{"onUpdate:modelValue":T[8]||(T[8]=ie=>u.value=ie),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,u.value]]),T[26]||(T[26]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),x.selected.vodSource?(t(),s("div",Hv,[e("div",{class:"d-flex flex-row justify-content-between align-items-center"},[T[28]||(T[28]=e("b",null," Ad Break ",-1)),e("div",null,[e("button",{onClick:g,class:"btn btn-outline-primary btn-sm"},T[27]||(T[27]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),e("div",Ev,[e("table",qv,[T[31]||(T[31]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(x.item.adBreaks,(ie,ne)=>(t(),s("tr",null,[e("td",null,c(ne+1),1),e("td",null,[N(e("input",{"onUpdate:modelValue":L=>ie.offsetTime=L,onChange:L=>H(ie),type:"time",step:"1",class:"form-control"},null,40,Bv),[[Z,ie.offsetTime]]),ie.offsetMillis>=x.selected.vodSource.durationInMillis?(t(),s("div",Nv,T[29]||(T[29]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):E("",!0)]),e("td",null,[N(e("input",{"onUpdate:modelValue":L=>ie.durationTime=L,onChange:L=>y(ie),type:"time",step:"1",class:"form-control"},null,40,Rv),[[Z,ie.durationTime]])]),e("td",null,[e("button",{onClick:L=>O(ne),class:"btn btn-outline-warning btn-sm"},T[30]||(T[30]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Fv)])]))),256))])]),T[32]||(T[32]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),Q(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):E("",!0),e("div",zv,[T[35]||(T[35]=e("b",null," Duration ",-1)),e("div",Gv,[e("div",jv,[e("div",Yv,[N(e("input",{"onUpdate:modelValue":T[9]||(T[9]=ie=>h.value=ie),type:"text",class:"form-control-plaintext",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Z,h.value]]),T[33]||(T[33]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Wv,[e("div",Kv,[N(e("input",{"onUpdate:modelValue":T[10]||(T[10]=ie=>d.value=ie),type:"text",class:"form-control-plaintext",id:"totalProgramDuration",readonly:""},null,512),[[Z,d.value]]),T[34]||(T[34]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Jv={class:"ms-1"},Xv={class:"input-group"},Zv={class:"table-responsive border shadow-sm"},eg={class:"table table-hover mb-0"},tg=["textContent"],sg={class:"d-flex flex-row"},og={class:""},ag={class:"mb-1"},lg=["src"],ng={class:"ms-2"},rg={key:0,class:"fas fa-fw fa-check-circle text-success"},ig={class:"text-wrap text-truncate",style:{width:"20px !important"}},dg={class:"badge bg-primary me-1"},ug={key:0},cg={class:"badge bg-info me-1"},mg={class:"text-end me-0 me-sm-5"},fg={class:"text-center"},pg={class:"mt-1"},vg="/api/v1/programTemplates/search",gg={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(n){Me("$config");const I=he().user,{appTitle:V,pageTitle:_,busy:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,generateReturnUrl:i,security:x,filter:$,initializeFilter:K,getQuery:X,saveQuery:m,search:v,getRowNumber:Y,setSelected:u,isSelected:k}=Le({appTitle:"Arcadian-FAST",pageTitle:"Program Templates",cacheKey:`${I==null?void 0:I.userId}/program-templates/search`,baseUrl:vg,filter:{updateUrl:!0}});return fe(async()=>{K(),await v()}),(d,h)=>{const b=se("router-link"),l=se("PageHeader"),f=se("m-pagination"),a=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(l,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:R(()=>[z(b,{to:n.urlAdd,class:"btn btn-primary"},{default:R(()=>h[3]||(h[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Jv,[e("div",Xv,[N(e("input",{"onUpdate:modelValue":h[0]||(h[0]=r=>o($).query.criteria=r),onKeyup:h[1]||(h[1]=Ue(r=>o(v)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o($).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:h[2]||(h[2]=r=>o(v)(1))},h[4]||(h[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(a,{errorMessage:o(j)},{default:R(()=>[e("div",Zv,[e("table",eg,[h[5]||(h[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th",null,"Source")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o($).items,(r,M)=>(t(),s("tr",{key:r.programTemplateId},[e("td",{textContent:c(o(Y)(M)),class:"text-center"},null,8,tg),e("td",null,[e("div",sg,[e("div",og,[r.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},q(r.vodSource.video.thumbnails,w=>(t(),s("div",ag,[e("img",{src:w.url,class:"img-fuild border",width:"128"},null,8,lg)]))),256)):E("",!0)]),e("div",ng,[z(b,{to:`${n.urlView}/${r.programTemplateId}`,class:"d-inline-block text-truncate link-offset-2"},{default:R(()=>[r.arn?(t(),s("span",rg)):E("",!0),e("span",ig,c(r.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(U,null,q(r.vodSource.video.categories,w=>(t(),s("div",null,[e("span",dg,c(w.categoryName),1)]))),256)),r.vodSource.video.genres.length>0?(t(),s("div",ug,[(t(!0),s(U,null,q(r.vodSource.video.genres,w=>(t(),s("span",cg,c(w.genreName),1))),256))])):E("",!0)])])])]),e("td",mg,c(o(oe).moment.utc(r.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",fg,c(r.adBreaks.length),1),e("td",null,[e("div",null,[z(b,{to:`${n.urlViewSourceLocation}/${r.sourceLocationId}/${o(i)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(r.sourceLocation.name),1)]),_:2},1032,["to"])]),e("div",pg,[z(b,{to:`${n.urlViewVodSource}/${r.vodSourceId}/${o(i)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(r.vodSource.name),1)]),_:2},1032,["to"])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(f,{filter:o($),search:o(v),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},bg={key:0},yg={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},$g={class:"nav-item",role:"presentation"},wg={class:"nav-item",role:"presentation"},hg={class:"nav-item d-none",role:"presentation"},_g={class:"tab-content",id:"myTabContent"},kg={class:"mt-2"},Sg={class:""},Tg={class:"row row-cols-1 row-cols-lg-2"},Ig={class:"col"},Mg={class:"col"},xg={class:"form-floating mb-2"},Cg={id:"sourceLocation",class:"form-control-plaintext"},Vg={class:"col"},Pg={class:"form-floating mb-2"},Og={id:"vodSource",class:"form-control-plaintext"},Ag={class:"col"},Ug={class:"col"},Lg={class:"form-floating mb-2"},Dg={class:"row row-cols-1 row-cols-sm-3"},Hg={class:"col"},Eg={class:"form-floating mb-2"},qg={class:"col"},Bg={class:"form-floating mb-2"},Ng={class:"col"},Rg={class:"form-floating mb-2"},Fg={class:"row row-cols-1 row-cols-sm-3"},zg={class:"col"},Gg={class:"form-floating mb-2"},jg={class:"col"},Yg={class:"form-floating mb-2"},Wg={class:"mt-2"},Kg={class:"table-responsive"},Qg={class:"table table-hover mb-0"},Jg={class:"text-center"},Xg={class:"mt-2"},Zg={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(n){const p=n,{appTitle:I,pageTitle:V,busy:_,isDirty:D,validations:P,infoMessage:J,warningMessage:j,errorMessage:C,router:G,axios:oe,utils:B,toasts:A,close:i,closeWithReturnUrl:x,generateReturnUrl:$,security:K}=$e({appTitle:"Arcadian-FAST",pageTitle:"View Program Template"});Me("$config");const X=he();X.user;const m=be({user:X.user,item:null,hls:null}),v=ce();fe(async()=>{await d(),v.value=B.getPageTab("programTemplate")||"information-tab"});const Y=l=>{B.setPageTab("programTemplate",l),v.value=l},u=l=>l!==v.value?"":"active",k=l=>l!==v.value?"":"show active",d=async()=>{const l=m;if(!_.value)try{_.value=!0,C.value="",m.item=null;const f=`/api/v1/programTemplates/${p.id}/`;await oe.get(f).then(a=>{l.item=a.data;const r=l.item;r.startOffsetTime=B.moment.utc(r.startOffsetMillis).format("HH:mm:ss"),r.endOffsetTime=B.moment.utc(r.endOffsetMillis).format("HH:mm:ss"),r.durationTime=B.moment.utc(r.durationInMillis).format("HH:mm:ss"),r.adBreaksDurationTime=B.moment.utc(r.adBreaksDurationInMillis).format("HH:mm:ss"),r.totalProgramTemplateDurationTime=B.moment.utc(r.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const M=r.vodSource.video,w=M.durationInMillis;M.durationInMillis=B.moment.utc(w).format("HH:mm:ss")}),m.item.vodSource&&await b(m.item.vodSourceId)}catch(f){C.value=B.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{_.value=!1}},h=async()=>{await d()},b=async l=>{try{let f=`/api/v1/vodSources/${l}/hls`;const a=await oe.get(f).then(M=>M.data);m.hls&&m.hls.destroy();const r=document.getElementById("video-view-program-template");m.hls=B.createHlsStream(r,a,"Previewing VOD.")}catch(f){C.value=B.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}};return(l,f)=>{const a=se("router-link"),r=se("PageHeader"),M=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(r,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(V)},{default:R(()=>[z(a,{to:`${n.urlEdit}/${n.id}/${o($)()}`,class:"ms-2 btn btn-primary"},{default:R(()=>f[11]||(f[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:f[0]||(f[0]=w=>h()),class:"ms-2 btn btn-secondary"},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:f[1]||(f[1]=w=>o(x)(p.urlMain)),class:"btn btn-secondary ms-1"},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(M,{errorMessage:o(C)},{default:R(()=>[m.item?(t(),s("div",bg,[e("div",null,[e("ul",yg,[e("li",$g,[e("button",{onClick:f[2]||(f[2]=w=>Y("information-tab")),class:te([u("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",wg,[e("button",{onClick:f[3]||(f[3]=w=>Y("adBreaks-tab")),class:te([u("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",hg,[e("button",{onClick:f[4]||(f[4]=w=>Y("programs-tab")),class:te([u("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",_g,[e("div",{class:te([k("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",kg,[e("div",Sg,[e("div",Tg,[e("div",Ig,[e("div",Mg,[e("div",xg,[e("div",Cg,[z(a,{to:`${n.urlViewSourceLocation}/${m.item.sourceLocationId}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(m.item.sourceLocation.name),1)]),_:1},8,["to"])]),f[14]||(f[14]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",Vg,[e("div",Pg,[e("div",Og,[z(a,{to:`${n.urlViewVodSource}/${m.item.vodSourceId}/${o($)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(m.item.vodSource.name),1)]),_:1},8,["to"])]),f[15]||(f[15]=e("label",{for:"vodSource",class:""},"VOD Name",-1))])]),f[16]||(f[16]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain border"})])],-1))]),e("div",Ag,[e("div",Ug,[e("div",Lg,[N(e("input",{"onUpdate:modelValue":f[5]||(f[5]=w=>m.item.name=w),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,m.item.name]]),f[17]||(f[17]=e("label",{for:"name",class:""},"Name",-1))])]),e("div",Dg,[e("div",Hg,[e("div",Eg,[N(e("input",{"onUpdate:modelValue":f[6]||(f[6]=w=>m.item.startOffsetTime=w),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[Z,m.item.startOffsetTime]]),f[18]||(f[18]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",qg,[e("div",Bg,[N(e("input",{"onUpdate:modelValue":f[7]||(f[7]=w=>m.item.endOffsetTime=w),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[Z,m.item.endOffsetTime]]),f[19]||(f[19]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",Ng,[e("div",Rg,[N(e("input",{"onUpdate:modelValue":f[8]||(f[8]=w=>m.item.durationTime=w),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,m.item.durationTime]]),f[20]||(f[20]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",Fg,[e("div",zg,[e("div",Gg,[N(e("input",{"onUpdate:modelValue":f[9]||(f[9]=w=>m.item.adBreaksDurationTime=w),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,m.item.adBreaksDurationTime]]),f[21]||(f[21]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks",-1))])]),e("div",jg,[e("div",Yg,[N(e("input",{"onUpdate:modelValue":f[10]||(f[10]=w=>m.item.totalProgramTemplateDurationTime=w),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,m.item.totalProgramTemplateDurationTime]]),f[22]||(f[22]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:te([k("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Wg,[e("div",Kg,[e("table",Qg,[f[23]||(f[23]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.adBreaks,(w,g)=>(t(),s("tr",{key:w.programTemplateAdBreakId},[e("td",Jg,c(g+1),1),e("td",null,c(o(B).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(B).moment.utc(w.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[ke,m.item.adBreaks.length>0]])])])])],2),e("div",{class:te([k("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Xg,[e("pre",null,c(m.item.programs),1)])],2)])])])):E("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},e1=["disabled"],t1={class:"row row-cols-1 row-cols-sm-3"},s1={class:"col-sm-6"},o1={class:"form-floating mb-2"},a1={key:0,class:"d-block invalid-feedback"},l1={class:"col-sm-3"},n1={class:"form-floating mb-2"},r1={key:0,class:"d-block invalid-feedback"},i1={class:"col-sm-3"},d1={class:"form-floating mb-2"},u1={key:0,class:"d-block invalid-feedback"},c1={class:"row row-cols-1 row-cols-sm-2"},m1={class:"col"},f1={class:"form-floating mb-2"},p1=["value"],v1={key:0,class:"d-block invalid-feedback"},g1={class:"col"},b1={class:"form-floating mb-2"},y1=["value"],$1={key:0,class:"d-block invalid-feedback"},w1={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Channel"}),A=n,i=be({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),x={item:{name:{title:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},tier:{title:ae.withMessage("Tier is required.",re),$autoDirty:!0,$lazy:!0},playbackMode:{title:ae.withMessage("PlaybackMode is required.",re),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:ae.withMessage("Filler Slate Source Location is required.",re),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:ae.withMessage("Filler Slate Vod Source is required.",re),$autoDirty:!0,$lazy:!0},policy:{title:ae.withMessage("Policy is required.",re),$autoDirty:!0,$lazy:!0}}},$=Se(x,i);fe(async()=>{await K()});const K=async()=>{try{await j.get("/api/v1/sourcelocations/lookup/").then(k=>{i.lookups.sourceLocations=k.data,i.lookups.sourceLocations.length===1&&(i.item.fillerSlateSourceLocationId=i.lookups.sourceLocations[0].id)}),i.item.fillerSlateSourceLocationId&&await m(i.item.fillerSlateSourceLocationId)}catch(u){P.value=C.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},X=async()=>{i.item.fillerSlateVodSourceId=null,await m(i.item.fillerSlateSourceLocationId)},m=async u=>{try{let k=`/api/v1/vodSources/lookup/source-location/${u}/?category=2`;await j.get(k).then(d=>{i.lookups.vodSources=d.data})}catch(k){P.value=C.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{}},v=()=>{if(i.item.name){const u=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${i.item.name}"}]}`;i.item.policy=u}else i.item.policy=null},Y=async()=>{const u=i;if(V.value)return;if(!await $.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,P.value="";const d=C.clone(u.item);await j.post("/api/v1/channels/",d).then(h=>{G.success("Add Channel","Channel added.",{onClose:async()=>{const b=`${A.urlView}/${h.data}`;await J.push(b)}})})}catch(d){P.value=C.getErrorMessageAsHtml(d),window.scrollTo(0,0)}finally{V.value=!1}};return(u,k)=>{const d=se("router-link"),h=se("PageHeader"),b=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(h,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(I)},{default:R(()=>[e("button",{disabled:o($).$dirty&&o($).$invalid,onClick:k[0]||(k[0]=l=>Y()),class:"btn btn-primary"},k[8]||(k[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,e1),z(d,{to:A.urlMain,class:"btn btn-secondary ms-2"},{default:R(()=>k[9]||(k[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(b,{errorMessage:o(P),vuelidate:o($)},{default:R(()=>[e("div",null,[e("div",t1,[e("div",s1,[e("div",o1,[N(e("input",{"onUpdate:modelValue":k[1]||(k[1]=l=>i.item.name=l),onChange:k[2]||(k[2]=l=>v()),id:"name",class:te([o(C).getValidFeedbackCss(i.item.name),"form-control"]),placeholder:"name"},null,34),[[Z,i.item.name]]),k[10]||(k[10]=e("label",{for:"name",class:""},"Name",-1)),o($).item.name.$error?(t(),s("div",a1,[(t(!0),s(U,null,q(o($).item.name.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):E("",!0)])]),e("div",l1,[e("div",n1,[N(e("input",{"onUpdate:modelValue":k[3]||(k[3]=l=>i.item.tier=l),id:"tier",class:"form-control-plaintext",placeholder:"tier",readonly:""},null,512),[[Z,i.item.tier]]),k[11]||(k[11]=e("label",{for:"tier",class:""},"Tier",-1)),o($).item.tier.$error?(t(),s("div",r1,[(t(!0),s(U,null,q(o($).item.tier.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):E("",!0)])]),e("div",i1,[e("div",d1,[N(e("input",{"onUpdate:modelValue":k[4]||(k[4]=l=>i.item.playbackMode=l),id:"playbackMode",class:"form-control-plaintext",placeholder:"playbackMode",readonly:""},null,512),[[Z,i.item.playbackMode]]),k[12]||(k[12]=e("label",{for:"playbackMode",class:""},"PlaybackMode",-1)),o($).item.playbackMode.$error?(t(),s("div",u1,[(t(!0),s(U,null,q(o($).item.playbackMode.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):E("",!0)])])]),k[15]||(k[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",c1,[e("div",m1,[e("div",f1,[N(e("select",{"onUpdate:modelValue":k[5]||(k[5]=l=>i.item.fillerSlateSourceLocationId=l),onChange:k[6]||(k[6]=l=>X()),class:te([o(C).getValidFeedbackCss(i.item.fillerSlateSourceLocationId),"form-select"]),id:"fillerSlateSourceLocationId"},[(t(!0),s(U,null,q(i.lookups.sourceLocations,l=>(t(),s("option",{value:l.id},c(l.name),9,p1))),256))],34),[[ge,i.item.fillerSlateSourceLocationId]]),k[13]||(k[13]=e("label",{for:"fillerSlateSourceLocationId",class:""},"Source Location",-1)),o($).item.fillerSlateSourceLocationId.$error?(t(),s("div",v1,[(t(!0),s(U,null,q(o($).item.fillerSlateSourceLocationId.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):E("",!0)])]),e("div",g1,[e("div",b1,[N(e("select",{"onUpdate:modelValue":k[7]||(k[7]=l=>i.item.fillerSlateVodSourceId=l),class:te([o(C).getValidFeedbackCss(i.item.fillerSlateVodSourceId),"form-select"]),id:"fillerSlateVodSourceId"},[(t(!0),s(U,null,q(i.lookups.vodSources,l=>(t(),s("option",{value:l.id},c(l.name),9,y1))),256))],2),[[ge,i.item.fillerSlateVodSourceId]]),k[14]||(k[14]=e("label",{for:"fillerSlateVodSourceId",class:""},"VOD Source",-1)),o($).item.fillerSlateVodSourceId.$error?(t(),s("div",$1,[(t(!0),s(U,null,q(o($).item.fillerSlateVodSourceId.$errors,l=>(t(),s("div",{key:l.$uid},c(l.$message),1))),128))])):E("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},h1={components:{Page:tt},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function _1(n,p,I,V,_,D){const P=se("Page");return t(),ve(P,{id:I.id,urlView:I.urlView},null,8,["id","urlView"])}const k1=Ve(h1,[["render",_1]]),S1={class:"ms-1"},T1={class:"input-group"},I1={class:"table-responsive border shadow-sm"},M1={class:"table table-hover mb-0"},x1=["textContent"],C1={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},V1={key:0,class:"badge text-bg-success"},P1={key:1,class:"badge text-bg-secondary"},O1="/api/v1/channels/search",A1={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(n){Me("$config");const I=he().user,{appTitle:V,pageTitle:_,busy:D,infoMessage:P,warningMessage:J,errorMessage:j,router:C,axios:G,utils:oe,toasts:B,close:A,security:i,filter:x,initializeFilter:$,getQuery:K,saveQuery:X,search:m,getRowNumber:v,setSelected:Y,isSelected:u}=Le({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${I==null?void 0:I.userId}/Channels/search`,baseUrl:O1,filter:{updateUrl:!0}});return fe(async()=>{$(),await m()}),(k,d)=>{const h=se("router-link"),b=se("PageHeader"),l=se("m-pagination"),f=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(b,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(_)},{default:R(()=>[z(h,{to:n.urlAdd,class:"btn btn-primary"},{default:R(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",S1,[e("div",T1,[N(e("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>o(x).query.criteria=a),onKeyup:d[1]||(d[1]=Ue(a=>o(m)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Z,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:d[2]||(d[2]=a=>o(m)(1))},d[4]||(d[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),z(f,{errorMessage:o(j)},{default:R(()=>[e("div",I1,[e("table",M1,[d[5]||(d[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o(x).items,(a,r)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:c(o(v)(r)),class:"text-center"},null,8,x1),e("td",null,[z(h,{to:`${n.urlView}/${a.channelId}`,class:"d-inline-block text-truncate link-offset-2"},{default:R(()=>[a.arn?(t(),s("span",C1)):E("",!0),Q(c(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",V1,c(a.state),1)):a.state==="STOPPED"?(t(),s("span",P1,c(a.state),1)):E("",!0)])]),e("td",null,c(a.playbackMode),1),e("td",null,c(a.tier),1)]))),128))]),_:1},512),[[ke,o(x).items.length>0]])])]),z(l,{filter:o(x),search:o(m),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},U1=["id"],L1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},D1={class:"modal-content"},H1={class:"modal-header"},E1={class:"modal-title"},q1={class:"modal-body p-1"},B1={class:"row row-cols-1 row-cols-sm-2 g-2"},N1={class:"col-sm-4"},R1={class:"card"},F1={key:0,class:"mt-2"},z1={class:"col"},G1={class:"form-floating mb-2"},j1={class:"col ms-2 my-2"},Y1={class:"badge bg-info me-1"},W1={class:"badge bg-primary me-1"},K1={class:"row row-cols-1 row-cols-sm-2"},Q1={class:"col"},J1={class:"form-floating mb-2"},X1={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Z1={class:"col"},eb={class:"form-floating mb-2"},tb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},sb={class:"col"},ob={class:"form-floating mb-2"},ab={class:"col-sm-8"},lb={class:"col"},nb={class:"input-group mb-2"},rb={class:"form-floating"},ib={class:"table-responsive border shadow-sm"},db={class:"table table-sm table-hover mb-0 overflow-auto"},ub=["textContent"],cb={class:"d-flex flex-row justify-content-start"},mb={class:"mt-1"},fb=["src"],pb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},vb={class:"ms-2"},gb=["onClick"],bb={class:"modal-footer"},yb="/api/v1/programtemplates/search",$b={__name:"_selectProgramTemplate",emits:["close"],setup(n,{expose:p,emit:I}){const _=he().user,{appTitle:D,pageTitle:P,busy:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,security:x,filter:$,initializeFilter:K,getQuery:X,saveQuery:m,search:v,getRowNumber:Y,setSelected:u,isSelected:k}=Le({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${_==null?void 0:_.userId}/program-templates/select`,baseUrl:yb,filter:{updateUrl:!0,lookups:{genres:[]},query:{}}}),d=I,h=ce("modalSelectProgramTemplate"),b=be({programTemplate:null,hls:null});fe(async()=>{K(),await l()}),Ae(()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy())});const l=async()=>{await r(),await M()},f=async g=>{$.value.query.sourceLocationId=g,G.value="",await v();var O=document.getElementById(h.value),H=we.getOrCreateInstance(O);H.show()},a=async()=>{var g=document.getElementById(h.value),O=we.getOrCreateInstance(g);O.hide(),b.hls&&(b.hls.stopLoad(),b.hls.destroy()),d("close",b.programTemplate)},r=async g=>{try{const H=await B.get("/api/v1/lookups/video-categories/").then(y=>y.data);$.value.lookups.categories=H}catch(O){G.value=A.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},M=async g=>{try{const H=await B.get("/api/v1/lookups/video-genres/").then(y=>y.data);$.value.lookups.genres=H}catch(O){G.value=A.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{}},w=g=>{b.programTemplate=g,a()};return p({open:f,close:a}),(g,O)=>{const H=se("m-pagination"),y=se("PageBody");return t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:h.value,tabindex:"-1","aria-hidden":"true"},[e("div",L1,[e("div",D1,[e("div",H1,[e("h5",E1,[O[8]||(O[8]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),Q(c(o(P)),1)]),e("button",{type:"button",class:"btn-close",onClick:O[0]||(O[0]=S=>a()),"aria-label":"Close"})]),e("div",q1,[z(y,{errorMessage:o(G)},{default:R(()=>[e("div",B1,[e("div",N1,[e("div",R1,[O[13]||(O[13]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),b.programTemplate?(t(),s("div",F1,[e("div",z1,[e("div",G1,[N(e("input",{"onUpdate:modelValue":O[1]||(O[1]=S=>b.programTemplate.vodSource.video.title=S),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,b.programTemplate.vodSource.video.title]]),O[9]||(O[9]=e("label",{for:"title"},"Title",-1))])]),e("div",j1,[e("div",null,[(t(!0),s(U,null,q(b.programTemplate.vodSource.video.genres,S=>(t(),s("span",Y1,c(S.genreName),1))),256)),(t(!0),s(U,null,q(b.programTemplate.vodSource.video.categories,S=>(t(),s("span",W1,c(S.categoryName),1))),256))])]),e("div",K1,[e("div",Q1,[e("div",J1,[e("div",X1,c(o(A).moment(b.programTemplate.vodSource.video.dateReleased).calendar()),1),O[10]||(O[10]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Z1,[e("div",eb,[e("div",tb,c(o(A).moment.utc(b.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),O[11]||(O[11]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",sb,[e("div",ob,[N(e("textarea",{"onUpdate:modelValue":O[2]||(O[2]=S=>b.programTemplate.vodSource.video.description=S),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,b.programTemplate.vodSource.video.description]]),O[12]||(O[12]=e("label",{for:"description"},"Description",-1))])])])):E("",!0)])]),e("div",ab,[e("div",lb,[e("div",nb,[e("div",rb,[N(e("input",{"onUpdate:modelValue":O[3]||(O[3]=S=>o($).query.criteria=S),onKeyup:O[4]||(O[4]=Ue(S=>o(v)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o($).query.criteria]]),O[14]||(O[14]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:O[5]||(O[5]=S=>o(v)(1))},O[15]||(O[15]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",ib,[e("table",db,[O[16]||(O[16]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o($).items,(S,F)=>(t(),s("tr",{key:S.videoId},[e("td",{textContent:c(o(Y)(F)),class:"text-center"},null,8,ub),e("td",null,[e("div",cb,[e("div",null,[S.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},q(S.vodSource.video.thumbnails,W=>(t(),s("div",mb,[e("img",{src:W.url,class:"img-fuild border",width:"128"},null,8,fb)]))),256)):(t(),s("img",pb))]),e("div",vb,[e("a",{onClick:W=>w(S),class:"text-wrap link-offset-2",role:"button"},c(S.name),9,gb)])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(H,{filter:o($),search:o(v),showPerPage:!0},null,8,["filter","search"])])])]),_:1},8,["errorMessage"])]),e("div",bb,[e("button",{onClick:O[6]||(O[6]=S=>a()),class:"btn btn-primary",type:"button"},O[17]||(O[17]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:O[7]||(O[7]=S=>a()),class:"btn btn-secondary ms-1"},O[18]||(O[18]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,U1)}}},wb={key:0,class:"modal-content"},hb={class:"modal-header"},_b={class:"modal-title"},kb={class:"modal-body1"},Sb={class:"row row-cols-1 row-cols-sm-2 g-2"},Tb={class:"card"},Ib={key:0,class:"mt-2"},Mb={class:"col"},xb={class:"form-floating mb-2"},Cb={class:"col ms-2 my-2"},Vb={class:"badge bg-info me-1"},Pb={class:"badge bg-primary me-1"},Ob={class:"row row-cols-1 row-cols-sm-2"},Ab={class:"col"},Ub={class:"form-floating mb-2"},Lb={class:"form-control-plaintext",id:"dateReleased",placeholder:"Date Released",readonly:""},Db={class:"col"},Hb={class:"form-floating mb-2"},Eb={class:"form-control-plaintext",id:"duration",placeholder:"Duration",readonly:""},qb={class:"col"},Bb={class:"form-floating mb-2"},Nb={class:"col"},Rb={class:"input-group mb-2"},Fb={class:"form-floating"},zb={class:"table-responsive border shadow-sm"},Gb={class:"table table-sm table-hover mb-0 overflow-auto"},jb=["textContent"],Yb={class:"d-flex flex-row justify-content-start"},Wb={class:"mt-1"},Kb=["src"],Qb={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Jb={class:"ms-2"},Xb=["onClick"],Zb={class:"modal-footer"},ey="/api/v1/programtemplates/search",ty={__name:"_selectProgramTemplateInline",props:{isOpen:{type:Boolean,required:!0}},emits:["close"],setup(n,{expose:p,emit:I}){const _=he().user,{appTitle:D,pageTitle:P,busy:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,security:x,filter:$,initializeFilter:K,getQuery:X,saveQuery:m,search:v,getRowNumber:Y,setSelected:u,isSelected:k}=Le({appTitle:"Arcadian-FAST",pageTitle:"Select Program Template",cacheKey:`${_==null?void 0:_.userId}/program-templates/select`,baseUrl:ey,filter:{updateUrl:!0,lookups:{genres:[]},query:{}},getQuery:O=>["?c=",encodeURIComponent(O.query.criteria),"&p=",O.pageIndex,"&s=",O.pageSize,"&sf=",O.sortField,"&so=",O.sortOrder,"&withArn=true"].join(""),successAction:()=>{b.programTemplate&&(b.programTemplate=null)}}),d=n,h=I;ce("modalSelectProgramTemplateInline");const b=be({programTemplate:null,hls:null});fe(async()=>{K(),await l()}),Ae(()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy())});const l=async()=>{await r(),await M()},f=async O=>{$.value.query.sourceLocationId=O,G.value="",await v(),d.isOpen=!0},a=async()=>{b.hls&&(b.hls.stopLoad(),b.hls.destroy()),h("close",b.programTemplate),d.isOpen=!1},r=async O=>{try{const y=await B.get("/api/v1/lookups/video-categories/").then(S=>S.data);$.value.lookups.categories=y}catch(H){G.value=A.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},M=async O=>{try{const y=await B.get("/api/v1/lookups/video-genres/").then(S=>S.data);$.value.lookups.genres=y}catch(H){G.value=A.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},w=O=>{b.programTemplate=O,g()},g=()=>{if(Hls.isSupported()){b.hls&&(b.hls.stopLoad(),b.hls.destroy());var O=document.getElementById("video-select-preview");const y=b.programTemplate.vodSource.video.formats.find(F=>F.formatName==="HLS"),S=y.serverUrl+y.path;b.hls=A.createHlsStream(O,S)}};return p({open:f,close:a}),(O,H)=>{const y=se("m-pagination"),S=se("PageBody");return t(),ve(ye,null,{default:R(()=>[n.isOpen?(t(),s("div",wb,[e("div",hb,[e("h6",_b,[H[7]||(H[7]=e("span",{class:"fas fa-fw fa-filter me-1"},null,-1)),Q(c(o(P)),1)])]),e("div",kb,[z(S,{errorMessage:o(G)},{default:R(()=>[e("div",Sb,[e("div",{class:te([b.programTemplate?"col-sm-4":"d-none"])},[e("div",Tb,[H[12]||(H[12]=e("video",{id:"video-select-preview",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,-1)),b.programTemplate?(t(),s("div",Ib,[e("div",Mb,[e("div",xb,[N(e("input",{"onUpdate:modelValue":H[0]||(H[0]=F=>b.programTemplate.vodSource.video.title=F),type:"text",class:"form-control-plaintext",id:"title",placeholder:"Title",readonly:""},null,512),[[Z,b.programTemplate.vodSource.video.title]]),H[8]||(H[8]=e("label",{for:"title"},"Title",-1))])]),e("div",Cb,[e("div",null,[(t(!0),s(U,null,q(b.programTemplate.vodSource.video.genres,F=>(t(),s("span",Vb,c(F.genreName),1))),256)),(t(!0),s(U,null,q(b.programTemplate.vodSource.video.categories,F=>(t(),s("span",Pb,c(F.categoryName),1))),256))])]),e("div",Ob,[e("div",Ab,[e("div",Ub,[e("div",Lb,c(o(A).moment(b.programTemplate.vodSource.video.dateReleased).calendar()),1),H[9]||(H[9]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Db,[e("div",Hb,[e("div",Eb,c(o(A).moment.utc(b.programTemplate.vodSource.video.durationInMillis).format("HH:mm:ss")),1),H[10]||(H[10]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",qb,[e("div",Bb,[N(e("textarea",{"onUpdate:modelValue":H[1]||(H[1]=F=>b.programTemplate.vodSource.video.description=F),type:"text",class:"form-control-plaintext",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Z,b.programTemplate.vodSource.video.description]]),H[11]||(H[11]=e("label",{for:"description"},"Description",-1))])])])):E("",!0)])],2),e("div",{class:te([b.programTemplate?"col-sm-8":"col-sm-12"])},[e("div",Nb,[e("div",Rb,[e("div",Fb,[N(e("input",{"onUpdate:modelValue":H[2]||(H[2]=F=>o($).query.criteria=F),onKeyup:H[3]||(H[3]=Ue(F=>o(v)(1),["enter"])),id:"criteria",type:"text",class:"form-control"},null,544),[[Z,o($).query.criteria]]),H[13]||(H[13]=e("label",{for:"criteria",class:""},"Criteria",-1))]),e("button",{class:"btn btn-primary",type:"button",onClick:H[4]||(H[4]=F=>o(v)(1))},H[14]||(H[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",zb,[e("table",Gb,[H[15]||(H[15]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(o($).items,(F,W)=>(t(),s("tr",{key:F.videoId},[e("td",{textContent:c(o(Y)(W)),class:"text-center"},null,8,jb),e("td",null,[e("div",Yb,[e("div",null,[F.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},q(F.vodSource.video.thumbnails,pe=>(t(),s("div",Wb,[e("img",{src:pe.url,class:"img-fuild border",width:"128"},null,8,Kb)]))),256)):(t(),s("img",Qb))]),e("div",Jb,[e("a",{onClick:pe=>w(F),class:"text-wrap link-offset-2",role:"button"},c(F.name),9,Xb)])])])]))),128))]),_:1},512),[[ke,o($).items.length>0]])])]),z(y,{filter:o($),search:o(v),showPerPage:!0},null,8,["filter","search"])],2)])]),_:1},8,["errorMessage"])]),e("div",Zb,[e("button",{onClick:H[5]||(H[5]=F=>a()),class:"btn btn-primary",type:"button"},H[16]||(H[16]=[e("span",{class:"fas fa-fw fa-circle-check"},null,-1)])),e("button",{onClick:H[6]||(H[6]=F=>a(!1)),class:"btn btn-secondary ms-1"},H[17]||(H[17]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])):E("",!0)]),_:1})}}},sy=["id"],oy={class:"modal-dialog modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ay={class:"modal-content"},ly={class:"modal-header"},ny={class:"modal-title"},ry={class:"modal-body"},iy={key:0},dy={class:"row row-cols-1 row-cols-sm-3"},uy={class:"col-sm-3"},cy={class:"form-floating mb-2"},my={key:0,class:"d-block invalid-feedback"},fy={class:"col-sm-3"},py={class:"form-floating mb-2"},vy={key:0,class:"d-block invalid-feedback"},gy={class:"col-sm-6"},by={class:"input-group mb-2"},yy={class:"form-floating"},$y={id:"programTemplateId",class:"form-control",placeholder:"Title"},wy={key:0,class:"d-block invalid-feedback"},hy={key:0},_y={class:"row row-cols-1 row-cols-sm-2"},ky={class:"col"},Sy={class:"row row-cols-1"},Ty={class:"col"},Iy={class:"form-floating mb-2"},My={class:"col"},xy={class:"form-floating mb-2"},Cy={class:"row row-cols-1 row-cols-sm-3"},Vy={class:"col"},Py={class:"form-floating mb-2"},Oy={class:"col"},Ay={class:"form-floating mb-2"},Uy={class:"col"},Ly={class:"form-floating mb-2"},Dy={class:"row row-cols-1 row-cols-sm-3"},Hy={class:"col"},Ey={class:"form-floating mb-2"},qy={class:"col"},By={class:"form-floating mb-2"},Ny={key:1},Ry={class:"table-responsive border mt-1"},Fy={class:"table table-sm mb-0"},zy=["onUpdate:modelValue","onChange"],Gy=["value"],jy={key:0,class:"modal-footer"},Yy=["disabled"],Wy={__name:"_addProgram",emits:["onClose"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),K=I,X=ce(),m=ce(),v=ce(),Y=ce("modalAddProgramFromTemplate"),u=be({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},selected:{programTemplate:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),k=(ee,T,ue)=>ee.length<=0?!0:ee.every(ie=>ie.vodSourceId),d={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},programTemplateId:{required:ae.withMessage("Program Template is required.",re),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ae.withMessage("Date Scheduled Start is required.",re),$autoDirty:!0,$lazy:!0},adBreaks:{adBreaksRequired:ae.withMessage("Ad Break is not properly configured.",k),$each:ae.forEach({vodSourceId:{required:ae.withMessage("Vod Source is required.",re)}})}}},h=Se(d,u);fe(async()=>{h.value.$reset()});const b=async(ee,T,ue)=>{v.value=ee;const le=u;J.value.clear(),G.value="";const ie=A.moment(ue),L=ie.format("YYYY-MM-DD HH:mm"),me=ie.format("YYYYMMDD_HHmm")+"_PRG_";le.eventId=T,le.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelOutputs:[],programTemplates:[]},le.selected={programTemplate:null},le.item={programTemplateId:null,name:me,dateScheduledStart:L,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await a(),h.value.$reset();var xe=document.getElementById(Y.value),Ce=we.getOrCreateInstance(xe);Ce.show()},l=async ee=>{if(!ee){K("onClose",{eventId:u.eventId},ee);var T=document.getElementById(Y.value),ue=we.getOrCreateInstance(T);ue.hide();return}if(!await h.value.$validate()){window.scrollTo(0,0);return}const ie=u,ne=A.moment(ie.item.dateScheduledStart).utc(!0).format(),L=A.moment(ie.item.dateScheduledStart).add(ie.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc(!0).format();u.item={eventId:ie.eventId,programTemplateId:ie.selected.programTemplate.programTemplateId,channelId:v.value,name:ie.item.name,dateScheduledStart:ne,dateScheduledEnd:L,adBreaks:ie.selected.programTemplate.adBreaks.map(me=>({sourceLocationId:me.sourceLocationId,vodSourceId:me.vodSourceId,offsetMillis:me.offsetMillis,durationInMillis:me.durationInMillis}))},await B.post("/api/v1/programs/",u.item).then(me=>{i.success("Add New Program",`Program [${u.item.name}] was added to this channel.`),K("onClose",u.item,ee);var xe=document.getElementById(Y.value),Ce=we.getOrCreateInstance(xe);Ce.hide()},me=>{G.value=A.getErrorMessageAsHtml(me)})},f=async()=>{await l(!0)},a=async()=>{await O(),await r(),await M()},r=async()=>{try{const ee=`/api/v1/channelOutputs/get-by-channel/${v.value}`;await B.get(ee).then(T=>{u.lookups.channelOutputs=T.data}),u.item.programTemplateId&&await w()}catch(ee){G.value=A.getErrorMessageAsHtml(ee),window.scrollTo(0,0)}finally{}},M=async()=>{try{const ee=`/api/v1/programTemplates/lookup/by-channel/${v.value}`;await B.get(ee).then(T=>{u.lookups.programTemplates=T.data,u.lookups.programTemplates.length===1&&(u.item.programTemplateId=u.lookups.programTemplates[0].id)}),u.item.programTemplateId&&await w(u.item.programTemplateId)}catch(ee){G.value=A.getErrorMessageAsHtml(ee),window.scrollTo(0,0)}finally{}},w=async ee=>{await g(ee)},g=async ee=>{try{const T=`/api/v1/programTemplates/${ee}/`;await B.get(T).then(ie=>{u.selected.programTemplate=ie.data;const ne=u.selected.programTemplate;ne.startOffsetTime=A.moment.utc(ne.startOffsetMillis).format("HH:mm:ss"),ne.endOffsetTime=A.moment.utc(ne.endOffsetMillis).format("HH:mm:ss"),ne.durationTime=A.moment.utc(ne.durationInMillis).format("HH:mm:ss"),ne.adBreaksDurationTime=A.moment.utc(ne.adBreaksDurationInMillis).format("HH:mm:ss"),ne.totalProgramTemplateDurationTime=A.moment.utc(ne.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ne.adBreaks.forEach(L=>{L.vodSourceId=null}),u.item.programTemplateId=ne.programTemplateId,u.item.adBreaks=ne.adBreaks});const ue=u,le=ue.lookups.channelOutputs[0].outputType;await y(ue.selected.programTemplate.sourceLocationId,le)}catch(T){G.value=A.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},O=async()=>{try{await B.get("/api/v1/sourcelocations/lookup/").then(T=>{u.lookups.sourceLocations=T.data,u.lookups.sourceLocations.length===1&&(u.item.sourceLocationId=u.lookups.sourceLocations[0].id)}),u.item.sourceLocationId&&await H(u.item.sourceLocationId)}catch(ee){G.value=A.getErrorMessageAsHtml(ee),window.scrollTo(0,0)}finally{}},H=async ee=>{try{let T=`/api/v1/vodSources/lookup/source-location/${ee}`;await B.get(T).then(ue=>{u.lookups.vodSources=ue.data})}catch(T){G.value=A.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{}},y=async(ee,T)=>{try{let ue=`/api/v1/vodsources/lookup/source-location/${ee}/output-type/${T}`;await B.get(ue).then(le=>{u.lookups.adBreakVodSources=le.data})}catch(ue){G.value=A.getErrorMessageAsHtml(ue),window.scrollTo(0,0)}finally{}},S=ee=>{const T=u.lookups.adBreakVodSources.find(ue=>ue.id==ee.vodSourceId);ee.sourceLocationId=T.sourceLocationId},F=async ee=>{pe.value=!1,ee&&(await w(ee.programTemplateId),W())},W=()=>{if(Hls.isSupported()){u.hls&&(u.hls.stopLoad(),u.hls.destroy());var ee=document.getElementById("video-add-program");const ue=u.selected.programTemplate.vodSource.video.formats.find(ie=>ie.formatName==="HLS"),le=ue.serverUrl+ue.path;u.hls=A.createHlsStream(ee,le)}},pe=ce(!1);return p({open:b,close:l}),(ee,T)=>{const ue=se("PageMessages");return t(),ve(ye,null,{default:R(()=>[e("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:Y.value,tabindex:"-1","aria-hidden":"true"},[e("div",oy,[e("div",ay,[e("div",ly,[e("h5",ny,[T[13]||(T[13]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:T[0]||(T[0]=le=>l(!1)),"aria-label":"Close"})]),e("div",ry,[z(ue,{errorMessage:o(G),vuelidate:o(h)},null,8,["errorMessage","vuelidate"]),z(ty,{ref_key:"modalSelectProgramTemplateInline",ref:m,isOpen:pe.value,onClose:F},null,8,["isOpen"]),pe.value?E("",!0):(t(),s("div",iy,[e("div",dy,[e("div",uy,[e("div",cy,[N(e("input",{"onUpdate:modelValue":T[1]||(T[1]=le=>u.item.name=le),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,u.item.name]]),T[14]||(T[14]=e("label",{for:"name",class:""},"Name",-1)),o(h).item.name.$error?(t(),s("div",my,[(t(!0),s(U,null,q(o(h).item.name.$errors,le=>(t(),s("div",{key:le.$uid},c(le.$message),1))),128))])):E("",!0)])]),e("div",fy,[e("div",py,[N(e("input",{"onUpdate:modelValue":T[2]||(T[2]=le=>u.item.dateScheduledStart=le),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,u.item.dateScheduledStart]]),T[15]||(T[15]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(h).item.dateScheduledStart.$error?(t(),s("div",vy,[(t(!0),s(U,null,q(o(h).item.dateScheduledStart.$errors,le=>(t(),s("div",{key:le.$uid},c(le.$message),1))),128))])):E("",!0)])]),e("div",gy,[e("div",by,[e("div",yy,[e("div",$y,[u.selected.programTemplate?(t(),s(U,{key:0},[Q(c(u.selected.programTemplate.name),1)],64)):E("",!0)]),T[16]||(T[16]=e("label",{for:"programTemplateId",class:""},"Program Template",-1))]),e("button",{onClick:T[3]||(T[3]=le=>pe.value=!pe.value),class:"btn btn-primary",type:"button"},T[17]||(T[17]=[e("i",{class:"fa-solid fa-filter"},null,-1)]))]),o(h).item.programTemplateId.$error?(t(),s("div",wy,[(t(!0),s(U,null,q(o(h).item.programTemplateId.$errors,le=>(t(),s("div",{key:le.$uid},c(le.$message),1))),128))])):E("",!0)])]),u.selected.programTemplate?(t(),s("div",hy,[e("div",_y,[T[25]||(T[25]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"})])],-1)),e("div",ky,[e("div",Sy,[u.selected.programTemplate?(t(),s(U,{key:0},[e("div",Ty,[e("div",Iy,[N(e("input",{"onUpdate:modelValue":T[4]||(T[4]=le=>u.selected.programTemplate.sourceLocation.name=le),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[Z,u.selected.programTemplate.sourceLocation.name]]),T[18]||(T[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1))])]),e("div",My,[e("div",xy,[N(e("input",{"onUpdate:modelValue":T[5]||(T[5]=le=>u.selected.programTemplate.vodSource.name=le),id:"name",class:"form-control-plaintext",readonly:""},null,512),[[Z,u.selected.programTemplate.vodSource.name]]),T[19]||(T[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1))])])],64)):E("",!0)]),e("div",Cy,[e("div",Vy,[e("div",Py,[N(e("input",{"onUpdate:modelValue":T[6]||(T[6]=le=>u.selected.programTemplate.startOffsetTime=le),type:"text",class:"form-control-plaintext",id:"startOffsetTime",readonly:""},null,512),[[Z,u.selected.programTemplate.startOffsetTime]]),T[20]||(T[20]=e("label",{for:"startOffsetTime"},"Total Program Duration",-1))])]),e("div",Oy,[e("div",Ay,[N(e("input",{"onUpdate:modelValue":T[7]||(T[7]=le=>u.selected.programTemplate.endOffsetTime=le),type:"text",class:"form-control-plaintext",id:"endOffsetTime",readonly:""},null,512),[[Z,u.selected.programTemplate.endOffsetTime]]),T[21]||(T[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Uy,[e("div",Ly,[N(e("input",{"onUpdate:modelValue":T[8]||(T[8]=le=>u.selected.programTemplate.durationTime=le),type:"text",class:"form-control-plaintext",id:"durationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.durationTime]]),T[22]||(T[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Dy,[e("div",Hy,[e("div",Ey,[N(e("input",{"onUpdate:modelValue":T[9]||(T[9]=le=>u.selected.programTemplate.adBreaksDurationTime=le),type:"text",class:"form-control-plaintext",id:"adBreaksDurationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.adBreaksDurationTime]]),T[23]||(T[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",qy,[e("div",By,[N(e("input",{"onUpdate:modelValue":T[10]||(T[10]=le=>u.selected.programTemplate.totalProgramTemplateDurationTime=le),type:"text",class:"form-control-plaintext",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Z,u.selected.programTemplate.totalProgramTemplateDurationTime]]),T[24]||(T[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])])])])):E("",!0),u.selected.programTemplate&&u.selected.programTemplate.adBreaks.length>0?(t(),s("div",Ny,[T[27]||(T[27]=e("div",{class:"d-flex flex-row justify-content-between"},[e("b",null," Ad Break ")],-1)),e("div",Ry,[e("table",Fy,[T[26]||(T[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(u.item.adBreaks,(le,ie)=>(t(),s("tr",null,[e("td",null,c(ie+1),1),e("td",null,c(o(A).moment.utc(le.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(A).moment.utc(le.durationInMillis).format("HH:mm:ss")),1),e("td",null,[u.lookups.adBreakVodSources.length>0?(t(),s(U,{key:0},[N(e("select",{"onUpdate:modelValue":ne=>le.vodSourceId=ne,onChange:ne=>S(le),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,q(u.lookups.adBreakVodSources,ne=>(t(),s(U,null,[ne.durationInMillis===le.durationInMillis?(t(),s("option",{key:0,value:ne.id}," ["+c(o(A).moment.utc(ne.durationInMillis).format("HH:mm:ss"))+"] "+c(ne.name),9,Gy)):E("",!0)],64))),256))],40,zy),[[ge,le.vodSourceId]]),o(h).item.adBreaks.$each.$response?(t(!0),s(U,{key:0},q(o(h).item.adBreaks.$each.$response.$errors[ie].vodSourceId,ne=>(t(),s("div",{key:ne,class:"d-block invalid-feedback"},c(ne.$message),1))),128)):E("",!0)],64)):E("",!0)])]))),256))])])])])):E("",!0)]))]),pe.value?E("",!0):(t(),s("div",jy,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:T[11]||(T[11]=le=>f()),class:"btn btn-primary",type:"button"},T[28]||(T[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Yy),e("button",{onClick:T[12]||(T[12]=le=>l(!1)),class:"btn btn-secondary ms-1"},T[29]||(T[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))]))])]),z($b,{ref_key:"modalSelectProgramTemplate",ref:X,onClose:F},null,512)],8,sy)]),_:1})}}},Ky=["id"],Qy={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Jy={class:"modal-content"},Xy={class:"modal-header"},Zy={class:"modal-title"},e$={class:"modal-body"},t$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},s$=["innerHTML"],o$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},a$={key:2,class:"container"},l$={class:"row row-cols-1 row-cols-sm-2"},n$={class:"col"},r$={class:"form-floating mb-2"},i$={class:"col"},d$={class:"form-floating mb-2"},u$={class:"row row-cols-1 row-cols-sm-3 mt-2"},c$={class:"col"},m$={class:"form-floating mb-2"},f$={class:"col"},p$={class:"form-floating mb-2"},v$={key:0,class:"d-block invalid-feedback"},g$={class:"col"},b$={class:"form-floating mb-2"},y$={key:0,class:"d-block invalid-feedback"},$$={class:"row row-cols-1 row-cols-sm-3"},w$={class:"col"},h$={class:"form-floating mb-2"},_$={class:"col"},k$={class:"form-floating mb-2"},S$={class:"col"},T$={class:"form-floating mb-2"},I$={class:"row row-cols-1 row-cols-sm-3"},M$={class:"col"},x$={class:"form-floating mb-2"},C$={class:"col"},V$={class:"form-floating mb-2"},P$={key:0,class:"col"},O$={class:"form-floating mb-2"},A$={key:0},U$={class:"table-responsive border mt-1"},L$={class:"table mb-0"},D$=["onUpdate:modelValue","onChange"],H$=["value"],E$={class:"modal-footer"},q$=["disabled"],ft={__name:"_editProgram",emits:["onClose"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Edit Program"}),K=I,X=ce(),m=ce("modalEditProgram"),v=be({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ae.withMessage("Date Scheduled Start is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ae.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ae.withMessage("startOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ae.withMessage("endOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0}}},u=Se(Y,v);fe(async()=>{u.value.$reset()});const k=async(r,M)=>{X.value=r;const w=v;J.value.clear(),G.value="",w.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},w.item=null,await b(),await l(),u.value.$reset();var g=document.getElementById(m.value),O=we.getOrCreateInstance(g);O.show()},d=async r=>{if(!r){K("onClose",r);var O=document.getElementById(m.value),H=we.getOrCreateInstance(O);H.hide();return}const M=v,w=A.moment(M.item.dateScheduledStart).utc(!0).format(),g={programId:X.value,name:M.item.name,dateScheduledStart:w,adBreaks:M.item.adBreaks.map(y=>({sourceLocationId:y.sourceLocationId,vodSourceId:y.vodSourceId,offsetMillis:y.offsetMillis,durationInMillis:y.durationInMillis}))};try{await B.put("/api/v1/programs/",g).then(S=>{i.success("Edit Program","Program was edited.")})}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0);return}finally{}K("onClose",r);var O=document.getElementById(m.value),H=we.getOrCreateInstance(O);H.hide()},h=async()=>{await d(!0)},b=async()=>{try{const r=`/api/v1/programs/${X.value}/`;await B.get(r).then(g=>{v.item=g.data;const O=v.item,S=A.moment.utc(O.dateScheduledStart).format("YYYY-MM-DD HH:mm");v.item.dateScheduledStart=S,O.startOffsetTime=A.moment.utc(O.startOffsetMillis).format("HH:mm:ss"),O.endOffsetTime=A.moment.utc(O.endOffsetMillis).format("HH:mm:ss"),O.durationTime=A.moment.utc(O.durationInMillis).format("HH:mm:ss"),O.adBreaksDurationTime=A.moment.utc(O.adBreaksDurationInMillis).format("HH:mm:ss"),O.totalProgramTemplateDurationTime=A.moment.utc(O.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const M=v,w=M.item.channel.outputs[0].outputType;await f(M.item.sourceLocationId,w)}catch(r){G.value=A.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},l=async()=>{},f=async(r,M)=>{try{let w=`/api/v1/vodsources/lookup/source-location/${r}/output-type/${M}`;await B.get(w).then(g=>{v.lookups.adBreakVodSources=g.data})}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},a=r=>{const M=v.lookups.adBreakVodSources.find(w=>w.id==r.vodSourceId);r.sourceLocationId=M.sourceLocationId};return p({open:k,close:d}),(r,M)=>(t(),s("div",{class:"modal show","data-bs-backdrop":"static","data-bs-keyboard":"false",id:m.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"false"},[e("div",Qy,[e("div",Jy,[e("div",Xy,[e("h5",Zy,[M[14]||(M[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:M[0]||(M[0]=w=>d(!1)),"aria-label":"Close"})]),e("div",e$,[o(G)?(t(),s("div",t$,[M[15]||(M[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,s$)])):E("",!0),o(J).size>0?(t(),s("div",o$,[M[16]||(M[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),w=>(t(),s("li",null,c(w),1))),256))])])):E("",!0),v.item?(t(),s("div",a$,[e("div",l$,[e("div",n$,[e("div",r$,[v.item.sourceLocation?N((t(),s("input",{key:0,"onUpdate:modelValue":M[1]||(M[1]=w=>v.item.sourceLocation.name=w),id:"sourceLocation",class:"form-control-plaintext",readonly:""},null,512)),[[Z,v.item.sourceLocation.name]]):E("",!0),M[17]||(M[17]=e("label",{for:"sourceLocation",class:""},"Source Location",-1))])]),e("div",i$,[e("div",d$,[v.item.vodSource?N((t(),s("input",{key:0,"onUpdate:modelValue":M[2]||(M[2]=w=>v.item.vodSource.name=w),id:"vodSource",class:"form-control-plaintext",readonly:""},null,512)),[[Z,v.item.vodSource.name]]):E("",!0),M[18]||(M[18]=e("label",{for:"vodSource",class:""},"VOD Source",-1))])])]),e("div",u$,[e("div",c$,[e("div",m$,[v.item.relativeProgram?N((t(),s("input",{key:0,"onUpdate:modelValue":M[3]||(M[3]=w=>v.item.relativeProgram.name=w),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512)),[[Z,v.item.relativeProgram.name]]):E("",!0),M[19]||(M[19]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])]),e("div",f$,[e("div",p$,[N(e("input",{"onUpdate:modelValue":M[4]||(M[4]=w=>v.item.name=w),id:"name",class:te([o(A).getValidFeedbackCss(v.item.name),"form-control"]),placeholder:"Name"},null,2),[[Z,v.item.name]]),M[20]||(M[20]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",v$,[(t(!0),s(U,null,q(o(u).item.name.$errors,w=>(t(),s("div",{key:w.$uid},c(w.$message),1))),128))])):E("",!0)])]),e("div",g$,[e("div",b$,[N(e("input",{"onUpdate:modelValue":M[5]||(M[5]=w=>v.item.dateScheduledStart=w),type:"datetime-local",id:"dateScheduledStart",class:te([o(A).getValidFeedbackCss(v.item.dateScheduledStart),"form-control"])},null,2),[[Z,v.item.dateScheduledStart]]),M[21]||(M[21]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(u).item.dateScheduledStart.$error?(t(),s("div",y$,[(t(!0),s(U,null,q(o(u).item.dateScheduledStart.$errors,w=>(t(),s("div",{key:w.$uid},c(w.$message),1))),128))])):E("",!0)])])]),e("div",null,[e("div",$$,[e("div",w$,[e("div",h$,[N(e("input",{"onUpdate:modelValue":M[6]||(M[6]=w=>v.item.startOffsetTime=w),id:"startOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,v.item.startOffsetTime]]),M[22]||(M[22]=e("label",{for:"startOffsetTime",class:""},"Start Offset",-1))])]),e("div",_$,[e("div",k$,[N(e("input",{"onUpdate:modelValue":M[7]||(M[7]=w=>v.item.endOffsetTime=w),id:"endOffsetTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,v.item.endOffsetTime]]),M[23]||(M[23]=e("label",{for:"endOffsetTime",class:""},"End Offset",-1))])]),e("div",S$,[e("div",T$,[N(e("input",{"onUpdate:modelValue":M[8]||(M[8]=w=>v.item.durationTime=w),id:"durationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,v.item.durationTime]]),M[24]||(M[24]=e("label",{for:"durationTime",class:""},"Clip Duration",-1))])])]),e("div",I$,[e("div",M$,[e("div",x$,[N(e("input",{"onUpdate:modelValue":M[9]||(M[9]=w=>v.item.adBreaksDurationTime=w),id:"adBreaksDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,v.item.adBreaksDurationTime]]),M[25]||(M[25]=e("label",{for:"adBreaksDurationTime",class:""},"Total Ad Breaks Duration",-1))])]),e("div",C$,[e("div",V$,[N(e("input",{"onUpdate:modelValue":M[10]||(M[10]=w=>v.item.totalProgramTemplateDurationTime=w),id:"totalProgramTemplateDurationTime",class:"form-control-plaintext",readonly:""},null,512),[[Z,v.item.totalProgramTemplateDurationTime]]),M[26]||(M[26]=e("label",{for:"totalProgramTemplateDurationTime",class:""},"Total Program Duration",-1))])]),v.item.relativeProgram?(t(),s("div",P$,[e("div",O$,[N(e("input",{"onUpdate:modelValue":M[11]||(M[11]=w=>v.item.relativeProgram.name=w),id:"relativeProgram",class:"form-control-plaintext",readonly:""},null,512),[[Z,v.item.relativeProgram.name]]),M[27]||(M[27]=e("label",{for:"relativeProgram",class:""},"Relative Program",-1))])])):E("",!0)])]),M[30]||(M[30]=e("hr",null,null,-1)),v.item?(t(),s("div",A$,[M[29]||(M[29]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",U$,[e("table",L$,[M[28]||(M[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(v.item.adBreaks,(w,g)=>(t(),s("tr",null,[e("td",null,c(g+1),1),e("td",null,c(o(A).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,c(o(A).moment.utc(w.durationInMillis).format("HH:mm:ss")),1),e("td",null,[N(e("select",{"onUpdate:modelValue":O=>w.vodSourceId=O,onChange:O=>a(w),class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,q(v.lookups.adBreakVodSources,O=>(t(),s(U,null,[O.durationInMillis===w.durationInMillis?(t(),s("option",{key:0,value:O.id}," ["+c(o(A).moment.utc(O.durationInMillis).format("HH:mm:ss"))+"] "+c(O.name),9,H$)):E("",!0)],64))),256))],40,D$),[[ge,w.vodSourceId]])])]))),256))])])])])):E("",!0)])):E("",!0)]),e("div",E$,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:M[12]||(M[12]=w=>h()),class:"btn btn-primary ms-2",type:"button"},M[31]||(M[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,q$),e("button",{onClick:M[13]||(M[13]=w=>d(!1)),class:"btn btn-secondary ms-1"},M[32]||(M[32]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Ky))}},B$={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(n){const{appTitle:p,pageTitle:I,busy:V,infoMessage:_,warningMessage:D,errorMessage:P,router:J,axios:j,utils:C,toasts:G,close:oe,security:B}=$e({appTitle:"Arcadian-FAST",pageTitle:"Schedule Channel Programs"}),A=n,i=ce(null),x=ce(null),$=ce(null),K={viewType:"Week",cellDuration:15,startDate:De.DayPilot.Date.today(),onTimeRangeSelected:b=>{var l=b.control;const f={start:b.start,end:b.end,id:De.DayPilot.guid(),text:"NEW",tags:{type:"new"}};l.events.add(f);var a=l.events.find(f.id);k(a)},onBeforeEventRender:b=>{if(b.data.barColor="green",!!b.data.tags)switch(b.data.tags.type){case"new":b.data.barColor="yellow";break;case"business":b.data.barColor="red";break;case"personal":b.data.barColor="greem";break;case"vacation":b.data.barColor="black";break;default:b.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async b=>{const l=b.newStart.value,f=b.e.id(),a=C.moment(l).utc(!0).format();try{let r="/api/v1/programs/scheduled-date-start";const M={programId:f,dateScheduledStart:a};await j.put(r,M).then(w=>{G.success("Program date scheduled start was edited.")})}catch(r){P.value=C.getErrorMessageAsHtml(r),window.scrollTo(0,0);return}finally{}await Y()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async b=>{var l=b.e.id();h(l)},contextMenu:new De.DayPilot.Menu([{text:"Clone",onClick:async b=>{const l=b.source.id();try{let f=`/api/v1/programs/${l}/clone`;await j.post(f).then(a=>{G.success("Clone Program","Program was cloned.")})}catch(f){P.value=C.getErrorMessageAsHtml(f),window.scrollTo(0,0);return}finally{await Y()}}},{text:"Delete",onClick:async b=>{if(!confirm("Do you want to remove this program?"))return;const f=b.source.id();try{let a=`/api/v1/programs/${f}/`;await j.delete(a).then(r=>{G.success("Delete Program","Program was deleted.")}),i.value.control.events.remove(b.source)}catch(a){P.value=C.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await Y()}}}])},X=ce([]),m=()=>{i.value.control.update({events:X.value})},v=be({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});fe(async()=>{await Y()});const Y=async()=>{await u(),await m()},u=async()=>{const b=v;if(!V.value)try{V.value=!0,P.value="";const l=`/api/v1/channels/${A.id}/`;await j.get(l).then(f=>{b.item=f.data;const a=b.item.outputs,r=b.item.programs.map(M=>{let w=`${M.name}`,g=`[${M.name}]`;return M.relativeProgram&&(g+=` => [${M.relativeProgram.name}]`),{start:C.moment.utc(M.dateScheduledStart).format(),end:C.moment.utc(M.dateScheduledEnd).format(),id:M.programId,text:w,toolTip:g}});X.value=r})}catch(l){P.value=C.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{V.value=!1}},k=b=>{x.value.open(A.id,b.id(),b.start().value)},d=async(b,l)=>{var f=i.value,a=f.control.events.find(b.eventId);if(!l&&a){i.value.control.events.remove(a);return}f.control.events.find(H=>H.text()==b.name)&&(alert("Program already exists in this channel. Removing in the calendar."),i.value.control.events.remove(a));const M=C.moment(b.dateScheduledStart).utc(!0).format(),w=C.moment(b.dateScheduledEnd).utc(!0).format(),g=new De.DayPilot.Date(M),O=new De.DayPilot.Date(w);a.text(b.name),a.start(new De.DayPilot.Date(g)),a.end(new De.DayPilot.Date(O)),a.data.tags.program=b,a.commit(),i.value.control.update(),await Y()},h=(b,l)=>{$.value.open(b,l)};return(b,l)=>{const f=se("router-link"),a=se("PageHeader"),r=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(I)},{default:R(()=>[e("button",{onClick:l[0]||(l[0]=M=>Y()),class:"btn btn-secondary ms-1"},l[1]||(l[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),z(f,{to:`${n.urlView}/${n.id}`,class:"btn btn-secondary ms-1"},{default:R(()=>l[2]||(l[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),z(r,{errorMessage:o(P)},{default:R(()=>[e("div",null,[z(o(De.DayPilotCalendar),{id:"dp",config:K,ref_key:"calendarRef",ref:i},null,512),z(Wy,{ref_key:"modalAddProgram",ref:x,onOnClose:d},null,512),z(ft,{ref_key:"modalEditProgram",ref:$,onOnClose:Y},null,512)])]),_:1},8,["errorMessage"])])]),_:1})}}},N$=["id"],R$={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},F$={class:"modal-content"},z$={class:"modal-header"},G$={class:"modal-title"},j$={class:"modal-body"},Y$={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},W$=["innerHTML"],K$={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Q$={class:"container"},J$={class:"row row-cols-1 row-cols-sm-3"},X$={class:"col"},Z$={class:"form-floating mb-2"},ew=["disabled"],tw=["value"],sw={class:"col"},ow={class:"form-floating mb-2"},aw={key:0,class:"d-block invalid-feedback"},lw={class:"col"},nw={class:"form-floating mb-2"},rw={key:0,class:"d-block invalid-feedback"},iw={class:"row row-cols-sm-2"},dw={class:"col"},uw={class:"form-floating mb-2"},cw=["value"],mw={key:0,class:"d-block invalid-feedback"},fw={class:"col"},pw={class:"form-floating mb-2"},vw=["value"],gw={key:0,class:"d-block invalid-feedback"},bw={class:"col"},yw={class:"input-group mb-1"},$w={class:"form-floating"},ww={key:0,class:"input-group-text"},hw={key:0},_w={key:1},kw={key:2},Sw={key:3,class:"d-block invalid-feedback"},Tw={class:"col"},Iw={class:"input-group mb-1"},Mw={class:"form-floating"},xw={key:0,class:"input-group-text"},Cw={key:0},Vw={key:1},Pw={key:2,class:"d-block invalid-feedback"},Ow={class:"table-responsive border mt-1"},Aw={class:"table"},Uw={class:"input-group mb-1"},Lw=["onUpdate:modelValue"],Dw={key:0,class:"input-group-text"},Hw=["onUpdate:modelValue"],Ew=["value"],qw=["onUpdate:modelValue"],Bw=["value"],Nw=["onClick"],Rw={class:"modal-footer"},Fw=["disabled"],zw={__name:"_addProgram",emits:["refresh"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Program"}),K=I,X=ce(),m=ce("modalAddProgram"),v=be({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),Y={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ae.withMessage("Date Scheduled Start is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ae.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ae.withMessage("startOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ae.withMessage("endOffsetMillis is required.",re),minValue:Be(0),$autoDirty:!0,$lazy:!0}}},u=Se(Y,v);fe(async()=>{u.value.$reset()});const k=async H=>{X.value=H;const y=v;J.value.clear(),G.value="";const S=A.moment().local().add(2,"m"),W=S.format("YYYY-MM-DD HH:mm"),pe=S.format("YYYY_MM_DD")+"_PROGRAM_";y.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},y.item={name:pe,relativeProgramId:null,dateScheduledStart:W,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await b(),u.value.$reset();var ee=document.getElementById(m.value),T=we.getOrCreateInstance(ee);T.show()},d=async()=>{var H=document.getElementById(m.value),y=we.getOrCreateInstance(H);y.hide(),K("refresh")},h=async()=>{const H=v;if(D.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const F=H.item;delete F.vodSource,F.channelId=X.value;var S=F.dateScheduledStart;F.dateScheduledStart=A.moment(S).utc().format(),await B.post("/api/v1/programs/",F).then(W=>{i.success("Add Program","Program added to Channel",{async onClose(){}})}),await d()}catch(F){G.value=A.getErrorMessageAsHtml(F),window.scrollTo(0,0)}finally{D.value=!1}},b=async()=>{await l(),await a(),await M()},l=async()=>{try{await B.get("/api/v1/sourcelocations/lookup/").then(y=>{v.lookups.sourceLocations=y.data,v.lookups.sourceLocations.length===1&&(v.item.sourceLocationId=v.lookups.sourceLocations[0].id)}),v.item.sourceLocationId&&await f(v.item.sourceLocationId)}catch(H){G.value=A.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},f=async H=>{try{let y=`/api/v1/vodSources/lookup/source-location/${H}`;await B.get(y).then(S=>{v.lookups.vodSources=S.data})}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},a=async()=>{try{await B.get("/api/v1/sourcelocations/lookup/").then(y=>{v.lookups.adBreakSourceLocations=y.data})}catch(H){G.value=A.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},r=async H=>{try{let y=`/api/v1/vodSources/lookup/source-location/${H}`;await B.get(y).then(S=>{v.lookups.adBreakVodSources=S.data})}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},M=async()=>{try{const H=`/api/v1/programs/lookup/?channelId=${X.value}`;await B.get(H).then(y=>{if(v.lookups.channelPrograms=y.data,v.lookups.channelPrograms.length===1){const F=v.lookups.channelPrograms[0];v.item.relativeProgramId=F.id}})}catch(H){G.value=A.getErrorMessageAsHtml(H),window.scrollTo(0,0)}finally{}},w=()=>{const H={offsetMillis:0,sourceLocationId:null,vodSourceId:null},y=v.item.adBreaks.length;if(y>0){const S=v.item.adBreaks[y-1];H.offsetMillis=S.offsetMillis+1e4}v.item.adBreaks.push(H)},g=H=>{v.item.adBreaks.splice(H,1)},O=()=>{const H=v.item.vodSource;v.item.vodSourceId=H.id};return p({open:k,close:d}),(H,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:m.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",R$,[e("div",F$,[e("div",z$,[e("h5",G$,[y[12]||(y[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=S=>d()),"aria-label":"Close"})]),e("div",j$,[o(G)?(t(),s("div",Y$,[y[13]||(y[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,W$)])):E("",!0),o(J).size>0?(t(),s("div",K$,[y[14]||(y[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),S=>(t(),s("li",null,c(S),1))),256))])])):E("",!0),e("div",Q$,[e("div",J$,[e("div",X$,[e("div",Z$,[N(e("select",{"onUpdate:modelValue":y[1]||(y[1]=S=>v.item.relativeProgramId=S),class:"form-select",id:"sourceLocationId",disabled:v.lookups.channelPrograms.length<=0},[(t(!0),s(U,null,q(v.lookups.channelPrograms,S=>(t(),s("option",{value:S.id},c(S.name),9,tw))),256))],8,ew),[[ge,v.item.relativeProgramId]]),y[15]||(y[15]=e("label",{for:"relativeProgramId",class:""},"Relative Program",-1))])]),e("div",sw,[e("div",ow,[N(e("input",{"onUpdate:modelValue":y[2]||(y[2]=S=>v.item.name=S),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,v.item.name]]),y[16]||(y[16]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",aw,[(t(!0),s(U,null,q(o(u).item.name.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):E("",!0)])]),e("div",lw,[e("div",nw,[N(e("input",{"onUpdate:modelValue":y[3]||(y[3]=S=>v.item.dateScheduledStart=S),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Z,v.item.dateScheduledStart]]),y[17]||(y[17]=e("label",{for:"dateScheduledStart",class:""},"Date Scheduled Start",-1)),o(u).item.dateScheduledStart.$error?(t(),s("div",rw,[(t(!0),s(U,null,q(o(u).item.dateScheduledStart.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):E("",!0)])])]),e("div",iw,[e("div",dw,[e("div",uw,[N(e("select",{"onUpdate:modelValue":y[4]||(y[4]=S=>v.item.sourceLocationId=S),onChange:y[5]||(y[5]=S=>f(v.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,q(v.lookups.sourceLocations,S=>(t(),s("option",{value:S.id},c(S.name),9,cw))),256))],544),[[ge,v.item.sourceLocationId]]),y[18]||(y[18]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(u).item.sourceLocationId.$error?(t(),s("div",mw,[(t(!0),s(U,null,q(o(u).item.sourceLocationId.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):E("",!0)])]),e("div",fw,[e("div",pw,[N(e("select",{"onUpdate:modelValue":y[6]||(y[6]=S=>v.item.vodSource=S),onChange:y[7]||(y[7]=S=>O()),class:"form-select",id:"vodSourceId"},[(t(!0),s(U,null,q(v.lookups.vodSources,S=>(t(),s("option",{value:S},c(S.name),9,vw))),256))],544),[[ge,v.item.vodSource]]),y[19]||(y[19]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(u).item.vodSourceId.$error?(t(),s("div",gw,[(t(!0),s(U,null,q(o(u).item.vodSourceId.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):E("",!0)])]),e("div",bw,[e("div",yw,[e("div",$w,[N(e("input",{"onUpdate:modelValue":y[8]||(y[8]=S=>v.item.startOffsetMillis=S),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Z,v.item.startOffsetMillis]]),y[20]||(y[20]=e("label",{for:"startOffsetMillis",class:""},"Start OffSet Millis",-1))]),v.item.startOffsetMillis>0?(t(),s("span",ww,c(o(A).moment.utc(v.item.startOffsetMillis).format("HH:mm:ss")),1)):E("",!0)]),v.item.startOffsetMillis>0&&v.item.startOffsetMillis<3e4?(t(),s("div",hw,y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):E("",!0),v.item.startOffsetMillis>v.item.endOffsetMillis&&v.item.endOffsetMillis>0?(t(),s("div",_w,y[22]||(y[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):E("",!0),v.item.vodSource&&v.item.startOffsetMillis>v.item.vodSource.durationInMillis?(t(),s("div",kw,y[23]||(y[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):E("",!0),o(u).item.startOffsetMillis.$error?(t(),s("div",Sw,[(t(!0),s(U,null,q(o(u).item.startOffsetMillis.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):E("",!0)]),e("div",Tw,[e("div",Iw,[e("div",Mw,[N(e("input",{"onUpdate:modelValue":y[9]||(y[9]=S=>v.item.endOffsetMillis=S),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Z,v.item.endOffsetMillis]]),y[24]||(y[24]=e("label",{for:"endOffsetMillis",class:""},"End OffSet Millis",-1))]),v.item.endOffsetMillis>0?(t(),s("span",xw,c(o(A).moment.utc(v.item.endOffsetMillis).format("HH:mm:ss")),1)):E("",!0)]),v.item.endOffsetMillis>0&&v.item.endOffsetMillis<3e4?(t(),s("div",Cw,y[25]||(y[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):E("",!0),v.item.vodSource&&v.item.endOffsetMillis>v.item.vodSource.durationInMillis?(t(),s("div",Vw,y[26]||(y[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):E("",!0),o(u).item.endOffsetMillis.$error?(t(),s("div",Pw,[(t(!0),s(U,null,q(o(u).item.endOffsetMillis.$errors,S=>(t(),s("div",{key:S.$uid},c(S.$message),1))),128))])):E("",!0)])]),y[30]||(y[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[y[27]||(y[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Ow,[e("table",Aw,[y[29]||(y[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,q(v.item.adBreaks,(S,F)=>(t(),s("tr",null,[e("td",null,c(F+1),1),e("td",null,[e("div",Uw,[N(e("input",{"onUpdate:modelValue":W=>S.offsetMillis=W,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Lw),[[Z,S.offsetMillis]]),S.offsetMillis>0?(t(),s("span",Dw,c(o(A).moment.utc(S.offsetMillis).format("HH:mm:ss")),1)):E("",!0)])]),e("td",null,[N(e("select",{"onUpdate:modelValue":W=>S.sourceLocationId=W,onChange:y[10]||(y[10]=W=>r(v.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(U,null,q(v.lookups.adBreakSourceLocations,W=>(t(),s("option",{value:W.id},c(W.name),9,Ew))),256))],40,Hw),[[ge,S.sourceLocationId]])]),e("td",null,[N(e("select",{"onUpdate:modelValue":W=>S.vodSourceId=W,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,q(v.lookups.adBreakVodSources,W=>(t(),s("option",{value:W.id},c(W.name),9,Bw))),256))],8,qw),[[ge,S.vodSourceId]])]),e("td",null,[e("button",{onClick:W=>g(F),class:"btn btn-outline-warning"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Nw)])]))),256))])])])])])]),e("div",Rw,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:y[11]||(y[11]=S=>h()),class:"btn btn-primary",type:"button"},y[31]||(y[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Fw),y[32]||(y[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,N$))}},Gw=["id"],jw={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Yw={class:"modal-content"},Ww={class:"modal-header"},Kw={class:"modal-title"},Qw={class:"modal-body"},Jw={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Xw=["innerHTML"],Zw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},eh={class:"container"},th={class:"col"},sh={class:"form-floating mb-2"},oh={class:"col"},ah={class:"form-floating mb-2"},lh={key:0,class:"d-block invalid-feedback"},nh={class:"col"},rh={class:"form-floating mb-2 d-none"},ih={key:0,class:"d-block invalid-feedback"},dh={class:"col"},uh={class:"form-floating mb-2"},ch={key:0,class:"d-block invalid-feedback"},mh={class:"modal-footer"},fh=["disabled"],ph={__name:"_addPlaybackConfiguration",props:{channelOutputId:{type:String,required:!0},playbackUrl:{type:String,required:!0}},emits:["confirm","cancel"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output Playback Configuration"}),K=I,X=n,m=ce("modalAddPlaybackConfiguration"),v=be({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),Y={item:{name:{required:ae.withMessage("Name is required.",re),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ae.withMessage("adDecisionServerUrl is required.",re),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ae.withMessage("videoContentSourceUrl is required.",re),$autoDirty:!0,$lazy:!0}}},u=Se(Y,v);fe(async()=>{u.value.$reset(),await k()});const k=async()=>{const b=v;J.value.clear(),G.value="";const l=X.playbackUrl;let f=l.lastIndexOf("/");const a=l.substring(0,f);let r=l.substring(f+1);f=r.lastIndexOf("."),r=r.substring(0,f)+"_ADCAMPAIGN_",b.item={name:r,originalVideoContentSourceUrl:X.playbackUrl,videoContentSourceUrl:a,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},u.value.$reset();var M=document.getElementById(m.value),w=we.getOrCreateInstance(M);w.show()},d=async()=>{var b=document.getElementById(m.value),l=we.getOrCreateInstance(b);l.hide(),K("cancel")},h=async()=>{const b=v;if(D.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const r=b.item;r.channelOutputId=X.channelOutputId,await B.put("/api/v1/channelOutputs/playback/",r).then(M=>{i.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})});var f=document.getElementById(m.value),a=we.getOrCreateInstance(f);a.hide(),K("confirm")}catch(r){G.value=A.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{D.value=!1}};return p({open:k,close:d}),(b,l)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:m.value,tabindex:"-1","aria-hidden":"false"},[e("div",jw,[e("div",Yw,[e("div",Ww,[e("h5",Kw,[l[6]||(l[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=f=>d()),"aria-label":"Close"})]),e("div",Qw,[o(G)?(t(),s("div",Jw,[l[7]||(l[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Xw)])):E("",!0),o(J).size>0?(t(),s("div",Zw,[l[8]||(l[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),f=>(t(),s("li",null,c(f),1))),256))])])):E("",!0),e("div",eh,[e("div",th,[e("div",sh,[N(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=f=>v.item.originalVideoContentSourceUrl=f),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Z,v.item.originalVideoContentSourceUrl]]),l[9]||(l[9]=e("label",{for:"originalVideoContentSourceUrl",class:""},"Original Video Content Source Url",-1))])]),e("div",oh,[e("div",ah,[N(e("input",{"onUpdate:modelValue":l[2]||(l[2]=f=>v.item.name=f),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Z,v.item.name]]),l[10]||(l[10]=e("label",{for:"name",class:""},"Name",-1)),o(u).item.name.$error?(t(),s("div",lh,[(t(!0),s(U,null,q(o(u).item.name.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):E("",!0)])]),e("div",nh,[e("div",rh,[N(e("input",{"onUpdate:modelValue":l[3]||(l[3]=f=>v.item.videoContentSourceUrl=f),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Z,v.item.videoContentSourceUrl]]),l[11]||(l[11]=e("label",{for:"videoContentSourceUrl",class:""},"Video Content Source Url",-1)),l[12]||(l[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(u).item.videoContentSourceUrl.$error?(t(),s("div",ih,[(t(!0),s(U,null,q(o(u).item.videoContentSourceUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):E("",!0)])]),e("div",dh,[e("div",uh,[N(e("textarea",{"onUpdate:modelValue":l[4]||(l[4]=f=>v.item.adDecisionServerUrl=f),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Z,v.item.adDecisionServerUrl]]),l[13]||(l[13]=e("label",{for:"adDecisionServerUrl",class:""},"Ad Decision Server Url",-1)),o(u).item.adDecisionServerUrl.$error?(t(),s("div",ch,[(t(!0),s(U,null,q(o(u).item.adDecisionServerUrl.$errors,f=>(t(),s("div",{key:f.$uid},c(f.$message),1))),128))])):E("",!0),l[14]||(l[14]=Ke('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",mh,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:l[5]||(l[5]=f=>h()),class:"btn btn-primary",type:"button"},l[15]||(l[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,fh),l[16]||(l[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Gw))}},vh=["id"],gh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},bh={class:"modal-content"},yh={class:"modal-header"},$h={class:"modal-title"},wh={class:"modal-body"},hh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_h=["innerHTML"],kh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Sh={class:"container"},Th={class:"col"},Ih={class:"form-floating mb-2"},Mh=["value"],xh={key:0,class:"d-block invalid-feedback"},Ch={class:"col"},Vh={class:"form-floating mb-2"},Ph={key:0,class:"d-block invalid-feedback"},Oh={class:"col"},Ah={class:"form-floating mb-2"},Uh={key:0,class:"d-block invalid-feedback"},Lh={class:"modal-footer"},Dh=["disabled"],Hh={__name:"_addChannelOutput",props:{channelId:{type:String}},emits:["confirm","cancel"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Add Channel Output"}),K=I,X=n,m=ce("modalAddChannelOutput"),v=be({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),Y={item:{sourceGroupId:{required:ae.withMessage("Source Group is required.",re),$autoDirty:!0,$lazy:!0},manifestName:{required:ae.withMessage("Manifest Name is required.",re),$autoDirty:!0,$lazy:!0},outputType:{required:ae.withMessage("Output Type is required.",re),$autoDirty:!0,$lazy:!0}}},u=Se(Y,v);fe(async()=>{u.value.$reset(),h()});const k=async()=>{await d()},d=async()=>{try{await B.get("/api/v1/sourceGroups/lookup/").then(a=>{v.lookups.sourceGroups=a.data,v.lookups.sourceGroups.length===1&&(v.item.sourceGroupId=v.lookups.sourceGroups[0].id)})}catch(f){G.value=A.getErrorMessageAsHtml(f),window.scrollTo(0,0)}finally{}},h=async()=>{const f=v;J.value.clear(),G.value="",f.lookups={sourceGroups:[]},f.item={sourceGroupId:null,outputType:null},await k(),u.value.$reset();var a=document.getElementById(m.value),r=we.getOrCreateInstance(a);r.show()},b=async()=>{var f=document.getElementById(m.value),a=we.getOrCreateInstance(f);a.hide(),K("cancel")},l=async()=>{const f=v;if(D.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const w=f.item;w.channelId=X.channelId,await B.post("/api/v1/channelOutputs",w).then(g=>{i.success("Add Channel Output","Channel output added.")});var r=document.getElementById(m.value),M=we.getOrCreateInstance(r);M.hide(),K("confirm")}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{D.value=!1}};return p({open:h,close:b}),(f,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:m.value,tabindex:"-1","aria-hidden":"true"},[e("div",gh,[e("div",bh,[e("div",yh,[e("h5",$h,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",wh,[o(G)?(t(),s("div",hh,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,_h)])):E("",!0),o(J).size>0?(t(),s("div",kh,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),r=>(t(),s("li",null,c(r),1))),256))])])):E("",!0),e("div",Sh,[e("div",Th,[e("div",Ih,[N(e("select",{"onUpdate:modelValue":a[0]||(a[0]=r=>v.item.sourceGroupId=r),class:te([o(A).getValidFeedbackCss(v.item.sourceGroupId),"form-select"]),id:"sourceGroupId"},[(t(!0),s(U,null,q(v.lookups.sourceGroups,r=>(t(),s("option",{value:r.id},c(r.name),9,Mh))),256))],2),[[ge,v.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:""},"Source Group",-1)),o(u).item.sourceGroupId.$error?(t(),s("div",xh,[(t(!0),s(U,null,q(o(u).item.sourceGroupId.$errors,r=>(t(),s("div",{key:r.$uid},c(r.$message),1))),128))])):E("",!0)])]),e("div",Ch,[e("div",Vh,[N(e("select",{"onUpdate:modelValue":a[1]||(a[1]=r=>v.item.outputType=r),class:te([o(A).getValidFeedbackCss(v.item.outputType),"form-select"]),id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),2),[[ge,v.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:""},"Output Type",-1)),o(u).item.outputType.$error?(t(),s("div",Ph,[(t(!0),s(U,null,q(o(u).item.outputType.$errors,r=>(t(),s("div",{key:r.$uid},c(r.$message),1))),128))])):E("",!0)])]),e("div",Oh,[e("div",Ah,[N(e("input",{"onUpdate:modelValue":a[2]||(a[2]=r=>v.item.manifestName=r),class:te([o(A).getValidFeedbackCss(v.item.manifestName),"form-control"]),id:"manifestName"},null,2),[[Z,v.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:""},"Manifest Name",-1)),o(u).item.manifestName.$error?(t(),s("div",Uh,[(t(!0),s(U,null,q(o(u).item.manifestName.$errors,r=>(t(),s("div",{key:r.$uid},c(r.$message),1))),128))])):E("",!0)])])])]),e("div",Lh,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:a[3]||(a[3]=r=>l()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Dh),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,vh))}},Eh=["id"],qh={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Bh={class:"modal-content"},Nh={class:"modal-header"},Rh={class:"modal-title"},Fh={class:"modal-body"},zh={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Gh=["innerHTML"],jh={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Yh={class:"container"},Wh={class:"col"},Kh={class:"form-floating mb-2"},Qh=["value"],Jh={key:0,class:"d-block invalid-feedback"},Xh={class:"col"},Zh={class:"form-floating mb-2"},e_=["value"],t_={key:0,class:"d-block invalid-feedback"},s_={class:"col"},o_={class:"card h-100"},a_=["id"],l_={class:"modal-footer"},n_=["disabled"],r_={__name:"_editFillerSlate",props:{channelId:{type:String},sourceLocationId:{type:String},vodSourceId:{type:String}},emits:["confirm","cancel"],setup(n,{expose:p,emit:I}){const{appTitle:V,pageTitle:_,busy:D,isDirty:P,validations:J,infoMessage:j,warningMessage:C,errorMessage:G,router:oe,axios:B,utils:A,toasts:i,closeWithReturnUrl:x,security:$}=$e({appTitle:"Arcadian-FAST",pageTitle:"Edit Filler Slate"}),K=I,X=n,m=ce("modalEditFillerSlate"),v=be({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),Y={item:{channelId:{required:ae.withMessage("channelId is required.",re),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ae.withMessage("sourceLocationId is required.",re),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ae.withMessage("vodSourceId is required.",re),$autoDirty:!0,$lazy:!0}}},u=Se(Y,v);fe(async()=>{b(),u.value.$reset()}),Ae(()=>{v.hls&&(v.hls.stopLoad(),v.hls.destroy())});const k=async()=>{await d()},d=async()=>{try{await B.get("/api/v1/sourcelocations/lookup/").then(g=>{v.lookups.sourceLocations=g.data}),v.item.sourceLocationId&&await h(v.item.sourceLocationId)}catch(w){G.value=A.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},h=async w=>{try{let g=`/api/v1/vodSources/lookup/source-Location/${w}/?type=2`;await B.get(g).then(O=>{v.lookups.vodSources=O.data})}catch(g){G.value=A.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},b=async()=>{const w=v;J.value.clear(),G.value="",w.lookups={sourceLocations:[],vodSources:[]},w.item={channelId:X.channelId,sourceLocationId:X.sourceLocationId,vodSourceId:X.vodSourceId},await k(),v.item.vodSourceId&&await M(v.item.vodSourceId),u.value.$reset();var g=document.getElementById(m.value),O=we.getOrCreateInstance(g);O.show()},l=async()=>{var w=document.getElementById(m.value),g=we.getOrCreateInstance(w);g.hide(),v.hls&&(v.hls.stopLoad(),v.hls.destroy()),K("cancel","cancel clicked")},f=async()=>{const w=v;if(D.value)return;if(!await u.value.$validate()){window.scrollTo(0,0);return}try{D.value=!0,G.value="";const y=w.item;await B.put("/api/v1/channels/filler-slate",y).then(S=>{i.success("Update Channel Filler Slate","Channel's Filler slate was updated.")});var O=document.getElementById(m.value),H=we.getOrCreateInstance(O);H.hide(),v.hls&&(v.hls.stopLoad(),v.hls.destroy()),K("confirm",v.item)}catch(y){G.value=A.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{D.value=!1}},a=async()=>{v.item.vodSourceId=null,await h(v.item.sourceLocationId)},r=async()=>{await M(v.item.vodSourceId)},M=async w=>{try{let g=`/api/v1/vodSources/${w}/hls`;const O=await B.get(g).then(y=>y.data);if(v.hls){v.hls.loadSource(O);return}const H=document.getElementById(`video-${v.item.channelId}`);v.hls=A.createHlsStream(H,O)}catch(g){G.value=A.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}};return p({open:b,close:l}),(w,g)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:m.value,tabindex:"-1","aria-hidden":"true"},[e("div",qh,[e("div",Bh,[e("div",Nh,[e("h5",Rh,[g[6]||(g[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),Q(c(o(_)),1)]),e("button",{type:"button",class:"btn-close",onClick:g[0]||(g[0]=O=>l()),"aria-label":"Close"})]),e("div",Fh,[o(G)?(t(),s("div",zh,[g[7]||(g[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:o(G)},null,8,Gh)])):E("",!0),o(J).size>0?(t(),s("div",jh,[g[8]||(g[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(o(J).values(),O=>(t(),s("li",null,c(O),1))),256))])])):E("",!0),e("div",Yh,[e("div",Wh,[e("div",Kh,[N(e("select",{"onUpdate:modelValue":g[1]||(g[1]=O=>v.item.sourceLocationId=O),onChange:g[2]||(g[2]=O=>a()),class:te([o(A).getValidFeedbackCss(v.item.sourceLocationId),"form-select"]),id:"sourceLocationId"},[(t(!0),s(U,null,q(v.lookups.sourceLocations,O=>(t(),s("option",{value:O.id},c(O.name),9,Qh))),256))],34),[[ge,v.item.sourceLocationId]]),g[9]||(g[9]=e("label",{for:"sourceLocationId",class:""},"Source Location",-1)),o(u).item.sourceLocationId.$error?(t(),s("div",Jh,[(t(!0),s(U,null,q(o(u).item.sourceLocationId.$errors,O=>(t(),s("div",{key:O.$uid},c(O.$message),1))),128))])):E("",!0)])]),e("div",Xh,[e("div",Zh,[N(e("select",{"onUpdate:modelValue":g[3]||(g[3]=O=>v.item.vodSourceId=O),onChange:r,class:te([o(A).getValidFeedbackCss(v.item.vodSourceId),"form-select"]),id:"vodSourceId"},[(t(!0),s(U,null,q(v.lookups.vodSources,O=>(t(),s("option",{value:O.id},c(O.name),9,e_))),256))],34),[[ge,v.item.vodSourceId]]),g[10]||(g[10]=e("label",{for:"vodSourceId",class:""},"VOD Source",-1)),o(u).item.vodSourceId.$error?(t(),s("div",t_,[(t(!0),s(U,null,q(o(u).item.vodSourceId.$errors,O=>(t(),s("div",{key:O.$uid},c(O.$message),1))),128))])):E("",!0)])]),e("div",s_,[e("div",o_,[e("video",{id:`video-${v.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,a_)])])])]),e("div",l_,[e("button",{disabled:o(u).$dirty&&o(u).$invalid,onClick:g[4]||(g[4]=O=>f()),class:"btn btn-primary",type:"button"},g[11]||(g[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,n_),e("button",{onClick:g[5]||(g[5]=O=>l()),class:"btn btn-secondary ms-1"},g[12]||(g[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Eh))}},i_={class:"my-2"},d_={class:""},u_={class:"form-floating mb-2"},c_={id:"vodSourceTitle",class:"form-control-plaintext"},m_={class:"row"},f_={class:"col-12 col-md-4"},p_={class:"form-floating mb-2"},v_={id:"vodSourceVideoTitle",class:"form-control-plaintext"},g_={class:"col-12 col-md-8"},b_={class:"form-floating mb-2"},y_={id:"vodSourceVideoDesc",class:"form-control-plaintext"},$_={class:"mt-2"},w_={class:"row row-cols-1 row-cols-sm-3"},h_={class:"col"},__={class:"form-floating mb-2"},k_={id:"startOffsetMillis",class:"form-control-plaintext"},S_={class:"col"},T_={class:"form-floating mb-2"},I_={id:"endOffsetMillis",class:"form-control-plaintext"},M_={class:"col"},x_={class:"form-floating mb-2"},C_={id:"durationInMillis",class:"form-control-plaintext"},V_={class:"row row-cols-1 row-cols-sm-3"},P_={class:"col"},O_={class:"form-floating mb-2"},A_={id:"adBreaksDurationInMillis",class:"form-control-plaintext"},U_={class:"col"},L_={class:"form-floating mb-2"},D_={id:"totalProgramTemplateDurationInMillis",class:"form-control-plaintext"},H_={class:"row row-cols-1 row-cols-sm-3"},E_={class:"col"},q_={class:"form-floating mb-2"},B_={id:"dateScheduledStart",class:"form-control-plaintext"},N_={class:"col"},R_={class:"form-floating mb-2"},F_={id:"dateScheduledEnd",class:"form-control-plaintext"},z_={key:0,class:"col"},G_={class:"form-floating mb-2"},j_={id:"relativeProgram",class:"form-control-plaintext"},Y_={key:0,class:"mt-2"},W_={class:"table-responsive border"},K_={class:"table table-sm table-bordered1 mb-0"},Q_={class:"text-center me-1"},J_={class:"text-center"},X_={class:"text-center"},Z_={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},e2={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},t2={__name:"_programDetail",props:{item:{type:Object,required:!0},urlViewVideo:{type:String,required:!0},urlViewVodSource:{type:String,required:!0}},setup(n){const p=n,{moment:I,generateReturnUrl:V}=Je();return fe(()=>{p.item.value}),(_,D)=>{const P=se("router-link");return t(),s("div",i_,[e("div",null,[D[1]||(D[1]=e("h5",null," VOD ",-1)),e("div",d_,[e("div",u_,[e("div",c_,[z(P,{to:`${n.urlViewVodSource}/${n.item.vodSourceId}/${o(V)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(n.item.vodSource.name),1)]),_:1},8,["to"])]),D[0]||(D[0]=e("label",{for:"vodSourceTitle"},"Title",-1))])])]),e("div",null,[D[4]||(D[4]=e("h5",null," Video ",-1)),e("div",m_,[e("div",f_,[e("div",p_,[e("div",v_,[z(P,{to:`${n.urlViewVideo}/${n.item.vodSource.video.videoId}/${o(V)()}`,class:"link-offset-2"},{default:R(()=>[Q(c(n.item.vodSource.video.title),1)]),_:1},8,["to"])]),D[2]||(D[2]=e("label",{for:"vodSourceVideoTitle"},"Title",-1))])]),e("div",g_,[e("div",b_,[e("div",y_,c(n.item.vodSource.video.description),1),D[3]||(D[3]=e("label",{for:"vodSourceVideoDesc"},"Description",-1))])])])]),e("div",$_,[D[13]||(D[13]=e("h5",null," Schedule ",-1)),e("div",w_,[e("div",h_,[e("div",__,[e("div",k_,c(o(I).utc(n.item.startOffsetMillis).format("HH:mm:ss")),1),D[5]||(D[5]=e("label",{for:"startOffsetMillis"},"Start Offset",-1))])]),e("div",S_,[e("div",T_,[e("div",I_,c(o(I).utc(n.item.endOffsetMillis).format("HH:mm:ss")),1),D[6]||(D[6]=e("label",{for:"endOffsetMillis"},"End Offset",-1))])]),e("div",M_,[e("div",x_,[e("div",C_,c(o(I).utc(n.item.durationInMillis).format("HH:mm:ss")),1),D[7]||(D[7]=e("label",{for:"durationInMillis"},"Clip Duration",-1))])])]),e("div",V_,[e("div",P_,[e("div",O_,[e("div",A_,c(o(I).utc(n.item.adBreaksDurationInMillis).format("HH:mm:ss")),1),D[8]||(D[8]=e("label",{for:"adBreaksDurationInMillis"},"Total Ad Breaks Duration",-1))])]),e("div",U_,[e("div",L_,[e("div",D_,c(o(I).utc(n.item.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),D[9]||(D[9]=e("label",{for:"totalProgramTemplateDurationInMillis"},"Total Program Duration",-1))])])]),e("div",H_,[e("div",E_,[e("div",q_,[e("div",B_,c(o(I).utc(n.item.dateScheduledStart).format("lll")),1),D[10]||(D[10]=e("label",{for:"dateScheduledStart"},"Program Start",-1))])]),e("div",N_,[e("div",R_,[e("div",F_,c(o(I).utc(n.item.dateScheduledEnd).format("lll")),1),D[11]||(D[11]=e("label",{for:"dateScheduledEnd"},"Program End",-1))])]),n.item.relativeProgram?(t(),s("div",z_,[e("div",G_,[e("div",j_,c(n.item.relativeProgram.name),1),D[12]||(D[12]=e("label",{for:"relativeProgram"},"Relative Program",-1))])])):E("",!0)])]),n.item.adBreaks.length?(t(),s("div",Y_,[D[15]||(D[15]=e("h5",null," Ad Breaks ",-1)),e("div",W_,[e("table",K_,[e("tbody",null,[D[14]||(D[14]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center1"},"VOD")],-1)),(t(!0),s(U,null,q(n.item.adBreaks,(J,j)=>(t(),s("tr",null,[e("td",Q_,c(j+1),1),e("td",J_,c(o(I).utc(J.offsetMillis).format("HH:mm:ss")),1),e("td",X_,c(o(I).utc(J.durationInMillis).format("HH:mm:ss")),1),e("td",null,[z(P,{to:`${n.urlViewVodSource}/${J.vodSource.vodSourceId}/${o(V)()}`,class:"link-offset-2"},{default:R(()=>[J.vodSource.arn?(t(),s("span",Z_)):(t(),s("span",e2)),Q(" "+c(J.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])])):E("",!0)])}}},s2={key:0,class:"dropdown"},o2={key:0,class:"fas fa-fw fa-play"},a2={key:1,class:"fas fa-fw fa-stop"},l2={class:"dropdown-menu"},n2={key:0},r2={key:1},i2={key:0},d2={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},u2={class:"nav-item",role:"presentation"},c2={class:"nav-item",role:"presentation"},m2={class:"nav-item",role:"presentation"},f2={class:"nav-item",role:"presentation"},p2={class:"nav-item",role:"presentation"},v2={class:"tab-content",id:"myTabContent"},g2={class:"mt-2"},b2={class:"row row-cols-1 row-cols-sm-3"},y2={class:"col"},$2={class:"form-floating mb-2"},w2={class:"col"},h2={class:"form-floating mb-2"},_2={class:"col"},k2={class:"form-floating mb-2"},S2={class:"d-flex flex-row justify-content-start align-items-center"},T2={key:0,class:"ms-2"},I2={class:"row row-cols-sm-2 mt-1"},M2={class:"col"},x2={class:"form-floating mb-2"},C2={class:"form-control-plaintext",readonly:""},V2={class:"col"},P2={class:"form-floating mb-2"},O2={class:"form-control-plaintext",readonly:""},A2={class:"mt-2"},U2={class:"d-flex flex-row justify-content-start align-items-center"},L2={class:"ms-2"},D2={key:0,class:"alert bg-warning mt-2"},H2={class:"table-responsive border mt-1"},E2={class:"table table-bordered1 mb-0"},q2={class:"badge bg-info"},B2={key:0,class:"text-wrap"},N2={key:1,class:"text-warning"},R2={key:0,class:"text-end"},F2={key:1,class:"text-end"},z2=["onClick"],G2={key:0},j2={colspan:"999"},Y2={class:"d-flex flex-row justify-content-start align-items-center"},W2={class:"ms-2"},K2={if:"item.playbackUrl"},Q2=["onClick"],J2={key:0,class:"table-responsive mt-2"},X2={class:"table table-borderless mb-0 table-sm"},Z2={class:"align-middle1"},ek={class:"badge bg-success"},tk={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},sk={class:"text-end"},ok=["onClick"],ak=["onClick"],lk={class:"mt-2"},nk={class:"table-responsive border"},rk={class:"table mb-0 table-sm table-bordered1"},ik={class:"align-middle1"},dk={class:"text-center me-1"},uk={class:"d-flex flex-row justify-content-start"},ck={class:""},mk={class:"mb-1"},fk=["src"],pk={class:"ms-2"},vk={key:0,class:"fas fa-fw fa-check-circle text-success"},gk={class:"fw-lighter small"},bk={class:"fw-lighter small"},yk={class:"text-center"},$k={class:"text-center"},wk={class:"text-end"},hk={class:"btn-group position-static"},_k=["onClick"],kk={key:0,class:"fas fa-fw fa-chevron-circle-up"},Sk={key:1,class:"fas fa-fw fa-chevron-circle-down"},Tk={class:"dropdown-menu"},Ik=["onClick"],Mk={key:0},xk=["onClick"],Ck=["onClick"],Vk=["onClick"],Pk={key:0},Ok={colspan:"999"},Ak={class:"text-end mt-2 d-none"},Uk={class:"mt-2"},Lk={class:"text-end mb-2"},Dk={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},Hk={class:"col"},Ek={class:"card shadow-sm"},qk=["id"],Bk={class:"p-1"},Nk={class:"card-title1 text-center"},Rk={class:"col"},Fk={class:"card shadow-sm"},zk=["id"],Gk={class:"p-1"},jk={class:"card-title1 text-center text-truncate"},Yk={class:"small1"},Wk={class:"mt-2"},Kk={key:0,class:"fas fa-fw fa-check-circle text-success"},Qk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Jk={key:0,class:"fas fa-fw fa-check-circle text-success"},Xk={key:1,class:"fas fa-fw fa-times-circle text-warning"},Zk={key:0,class:"fas fa-fw fa-check-circle text-success"},e0={key:1,class:"fas fa-fw fa-times-circle text-warning"},t0={key:0,class:"fas fa-fw fa-check text-warning"},s0={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},o0={key:0,class:"fas fa-fw fa-check-circle text-success"},a0={key:1,class:"fas fa-fw fa-times-circle text-warning"},l0={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(n){const p=n,{appTitle:I,pageTitle:V,busy:_,isDirty:D,validations:P,infoMessage:J,warningMessage:j,errorMessage:C,router:G,axios:oe,utils:B,toasts:A,close:i,closeWithReturnUrl:x,generateReturnUrl:$,security:K}=$e({appTitle:"Arcadian-FAST",pageTitle:"View Channel"});Me("$config");const X=he();X.user;const m=be({user:X.user,item:null}),v=ce(null),Y=ce(null),u=ce(),k=Ie(()=>m.item&&m.item.state==="RUNNING");fe(async()=>{await l();const ne=B.getPageTab("channel")||"information-tab";d(ne)}),Ae(()=>{ie()});const d=ne=>{B.setPageTab("channel",ne),u.value=ne,ne==="preview-tab"&&setTimeout(()=>{var L=document.getElementById("masonry");new lt(L,{})},2e3)},h=ne=>ne===u.value?"active":"",b=ne=>ne===u.value?"show active":"",l=async()=>{const ne=m;if(ie(),!_.value)try{_.value=!0,C.value="",m.item=null;const L=`/api/v1/channels/${p.id}/`;await oe.get(L).then(me=>{ne.item=me.data,ne.item.outputs.forEach(Ce=>{Ce.playbackConfigurations.forEach(de=>{if(Ce.playbackUrl){const Oe=Ce.playbackUrl,Te=Oe.lastIndexOf("/"),ot=Oe.substring(0,Te),Ge=Oe.substring(Te+1),at=de.hlsConfigurationManifestEndpointPrefix;at&&(de.hlsPlaylist=at+Ge)}})})})}catch(L){C.value=B.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{_.value=!1}},f=async()=>{if(confirm("Do you want to delete this Channel?")&&!_.value)try{_.value=!0,C.value="";const L=`/api/v1/channels/${p.id}/`;await oe.delete(L).then(me=>{}),x(p.urlMain)}catch(L){C.value=B.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{_.value=!1}},a=async()=>{await l()},r=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!_.value){C.value=null;try{_.value=!0,await oe.post(`/api/v1/channels/${p.id}/publish/`).then(L=>{A.success("Publish Channel","Channel was published.")}),_.value=!1,await a()}catch(L){C.value=B.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{_.value=!1}}},M=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!_.value){C.value=null;try{_.value=!0,await oe.delete(`/api/v1/channels/${p.id}/unpublish/`).then(L=>{A.warning("Remove Channel","Channel was removed.")}),_.value=!1,await a()}catch(L){C.value=B.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{_.value=!1}}},w=()=>{v.value.open(p.id)},g=async ne=>{if(ne.outputType==="HLS"){const L=Ee(ph,{channelOutputId:ne.channelOutputId,playbackUrl:ne.playbackUrl},{chore:!0,keepInitial:!1}),{data:me,isCanceled:xe}=await L.reveal();L.close(),xe||await a()}},O=async()=>{const ne=Ee(Hh,{channelId:m.item.channelId},{chore:!0,keepInitial:!1}),{data:L,isCanceled:me}=await ne.reveal();ne.close(),me||await a()},H=ne=>{Y.value.open(ne)},y=async(ne,L)=>{const me=Ee(r_,{channelId:m.item.channelId,sourceLocationId:m.item.fillerSlateSourceLocation.sourceLocationId,vodSourceId:m.item.fillerSlateVodSource.vodSourceId},{chore:!0,keepInitial:!1}),{data:xe,isCanceled:Ce}=await me.reveal();me.close(),Ce||await a()},S=async ne=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!_.value){C.value=null;try{_.value=!0,await oe.delete(`/api/v1/programs/${ne}/`).then(me=>{A.success("Delete Program","Program was deleted..",{async onClose(){}})}),_.value=!1,await a()}catch(me){C.value=B.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{_.value=!1}}},F=async ne=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!_.value){C.value=null;try{_.value=!0,await oe.delete(`/api/v1/channelOutputs/${ne}/`).then(me=>{A.success("Delete Channel Output","Channel output was deleted..")}),_.value=!1,await a()}catch(me){C.value=B.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{_.value=!1}}},W=async ne=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!_.value){C.value=null;try{_.value=!0,await oe.post(`/api/v1/programs/${ne}/publish/`).then(me=>{A.success("Publish Program","Program was published..",{async onClose(){}})}),_.value=!1,await a()}catch(me){C.value=B.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{_.value=!1}}},pe=async ne=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!_.value){C.value=null;try{_.value=!0,await oe.delete(`/api/v1/programs/${ne}/unpublish/`).then(me=>{A.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),_.value=!1,await a()}catch(me){C.value=B.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{_.value=!1}}},ee=async ne=>{if(!_.value){C.value=null;try{_.value=!0,await oe.put(`/api/v1/channels/${p.id}/change-state/${ne}`).then(L=>{A.success("Update Channel state","Change state was updated")}),_.value=!1,ne==="STOPPED"&&u.value==="preview-tab"&&(ie(),d("information-tab")),await a()}catch(L){C.value=B.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{_.value=!1}}},T=async ne=>{if(!_.value)try{_.value=!0,C.value="",await oe.post(`/api/v1/channelOutputs/${ne}/playback/publish/`).then(L=>{A.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),_.value=!1,await a()}catch(L){C.value=B.getErrorMessageAsHtml(L),window.scrollTo(0,0)}finally{_.value=!1}},ue=async ne=>{if(confirm("Do you want to remove this Playback Configuration?")&&!_.value)try{_.value=!0,C.value="",await oe.delete(`/api/v1/channelOutputs/${ne}/playback/`).then(me=>{A.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),_.value=!1,await a()}catch(me){C.value=B.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{_.value=!1}},le=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ne=m.item.outputs;ie(),ne.forEach(L=>{var me=document.getElementById(`video-${L.channelOutputId}`);L.hls&&L.hls.destroy(),L.hls=B.createHlsStream(me,L.playbackUrl,"Main playlist started."),me.play(),L.playbackConfigurations.forEach(xe=>{if(xe.hls&&xe.hls.destroy(),xe.arn){var Ce=document.getElementById(`video-${xe.channelOutputPlaybackConfigurationId}`);try{xe.hls=B.createHlsStream(Ce,xe.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Ce.play()}catch(de){A.error("Failed Stream SSAI Playlist",de)}}})}),setTimeout(()=>{var L=document.getElementById("masonry");new lt(L,{})},2e3)}},ie=()=>{m.item&&m.item.outputs&&m.item.outputs.forEach(L=>{L.hls&&(L.hls.detachMedia(),L.hls.destroy(),delete L.hls),L.playbackConfigurations.forEach(me=>{me.hls&&(me.hls.detachMedia(),me.hls.destroy(),delete me.hls)})})};return(ne,L)=>{const me=se("router-link"),xe=se("PageHeader"),Ce=se("PageBody");return t(),ve(ye,null,{default:R(()=>[e("div",null,[z(xe,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(V)},{default:R(()=>[e("button",{onClick:L[0]||(L[0]=de=>f()),class:"me-2 btn btn-danger"},L[21]||(L[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),m.item?(t(),s("div",s2,[e("button",{class:te([[k.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[k.value?(t(),s("span",o2)):(t(),s("span",a2)),Q(" "+c(m.item.state),1)],2),e("ul",l2,[m.item.arn?(t(),s("li",n2,[k.value?(t(),s("button",{key:0,onClick:L[1]||(L[1]=de=>ee("STOPPED")),class:"dropdown-item"},L[22]||(L[22]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),Q("Stop ")]))):(t(),s("button",{key:1,onClick:L[2]||(L[2]=de=>ee("RUNNING")),class:"dropdown-item"},L[23]||(L[23]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),Q("Start ")])))])):E("",!0),k.value?E("",!0):(t(),s("li",r2,[m.item.arn?(t(),s("button",{key:0,onClick:L[3]||(L[3]=de=>M()),class:"dropdown-item"},L[24]||(L[24]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),Q("Unpublish ")]))):(t(),s("button",{key:1,onClick:L[4]||(L[4]=de=>r()),class:"dropdown-item"},L[25]||(L[25]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Q("Publish ")])))])),m.item.arn?(t(),s(U,{key:2},[L[27]||(L[27]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:L[5]||(L[5]=de=>r()),class:"dropdown-item"},L[26]||(L[26]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Q("Republish ")]))])],64)):E("",!0)])])):E("",!0),z(me,{to:`${n.urlSchedulePrograms}/${n.id}`,class:"ms-2 btn btn-outline-primary"},{default:R(()=>L[28]||(L[28]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:L[6]||(L[6]=de=>a()),class:"ms-2 btn btn-secondary"},L[29]||(L[29]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:L[7]||(L[7]=de=>o(x)(p.urlMain)),class:"btn btn-secondary ms-1"},L[30]||(L[30]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),z(Ce,{errorMessage:o(C)},{default:R(()=>[m.item?(t(),s("div",i2,[e("ul",d2,[e("li",u2,[e("button",{onClick:L[8]||(L[8]=de=>d("information-tab")),class:te([h("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},L[31]||(L[31]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),Q("Information ")]),2)]),e("li",c2,[e("button",{onClick:L[9]||(L[9]=de=>d("outputPlayback-tab")),class:te([h("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},L[32]||(L[32]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),Q("Output/Playback ")]),2)]),e("li",m2,[e("button",{onClick:L[10]||(L[10]=de=>d("programs-tab")),class:te([h("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},L[33]||(L[33]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),Q("Programs ")]),2)]),e("li",f2,[e("button",{onClick:L[11]||(L[11]=de=>d("preview-tab")),class:te([[k.value?"":"disabled",h("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},L[34]||(L[34]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),Q("Preview ")]),2)]),e("li",p2,[e("button",{onClick:L[12]||(L[12]=de=>d("checklist-tab")),class:te([h("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},L[35]||(L[35]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),Q("Checklist ")]),2)])]),e("div",v2,[e("div",{class:te([b("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",g2,[e("div",b2,[e("div",y2,[e("div",$2,[N(e("input",{"onUpdate:modelValue":L[13]||(L[13]=de=>m.item.name=de),type:"text",class:"form-control-plaintext",id:"name",readonly:""},null,512),[[Z,m.item.name]]),L[36]||(L[36]=e("label",{for:"name"},"Name",-1))])]),e("div",w2,[e("div",h2,[N(e("input",{"onUpdate:modelValue":L[14]||(L[14]=de=>m.item.playbackMode=de),type:"text",class:"form-control-plaintext",id:"playbackMode",readonly:""},null,512),[[Z,m.item.playbackMode]]),L[37]||(L[37]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",_2,[e("div",k2,[N(e("input",{"onUpdate:modelValue":L[15]||(L[15]=de=>m.item.tier=de),type:"text",class:"form-control-plaintext",id:"tier",readonly:""},null,512),[[Z,m.item.tier]]),L[38]||(L[38]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",S2,[L[40]||(L[40]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),k.value?E("",!0):(t(),s("div",T2,[e("button",{onClick:L[16]||(L[16]=de=>y(m.item.fillerSlateSourceLocation.sourceLocationId,m.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},L[39]||(L[39]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",I2,[e("div",M2,[e("div",x2,[e("div",C2,[z(me,{to:`${n.urlViewSourceLocation}/${m.item.fillerSlateSourceLocation.sourceLocationId}/${o($)()}`,class:te([[m.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName"},{default:R(()=>[Q(c(m.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"])]),L[41]||(L[41]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",V2,[e("div",P2,[e("div",O2,[z(me,{to:`${n.urlViewVodSource}/${m.item.fillerSlateVodSource.vodSourceId}/${o($)()}`,class:te([[m.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"link-offset-2"]),id:"fillerSlateSourceLocationName",readonly:""},{default:R(()=>[Q(c(m.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"])]),L[42]||(L[42]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:te([b("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",A2,[e("div",null,[e("div",U2,[L[44]||(L[44]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",L2,[e("button",{onClick:L[17]||(L[17]=de=>O()),class:"btn btn-outline-primary btn-sm"},L[43]||(L[43]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),m.item.outputs.length<=0?(t(),s("div",D2,L[45]||(L[45]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),Q("Channel Output is required ")]))):E("",!0),e("div",H2,[e("table",E2,[L[55]||(L[55]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.outputs,(de,Oe)=>(t(),s(U,{key:de.channelOutputId},[e("tr",null,[e("td",null,c(Oe+1),1),e("td",null,[e("div",null,c(de.manifestName),1),e("div",null,[e("span",q2,c(de.outputType),1)])]),e("td",null,[e("div",null,[z(me,{to:`${n.urlViewSourceGroup}/${de.sourceGroupId}/${o($)()}`,class:"link-offset-2",tag:"button"},{default:R(()=>[Q(c(de.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[de.playbackUrl?(t(),s("div",B2,c(de.playbackUrl),1)):(t(),s("div",N2,L[46]||(L[46]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),Q("Publish channel to get the playback url ")])))]),k.value?(t(),s("td",R2)):(t(),s("td",F2,[e("button",{onClick:Te=>F(de.channelOutputId),class:"btn btn-outline-warning btn-sm"},L[47]||(L[47]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,z2)]))]),de.playbackUrl?(t(),s("tr",G2,[L[52]||(L[52]=e("td",null,null,-1)),L[53]||(L[53]=e("td",null,null,-1)),L[54]||(L[54]=e("td",null,null,-1)),e("td",j2,[e("div",Y2,[L[49]||(L[49]=e("h5",null,[Q("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",W2,[e("div",K2,[e("button",{onClick:Te=>g(de),class:"btn btn-outline-primary btn-sm"},L[48]||(L[48]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,Q2)])])]),de.playbackConfigurations.length>0?(t(),s("div",J2,[e("table",X2,[e("tbody",null,[(t(!0),s(U,null,q(de.playbackConfigurations,(Te,ot)=>(t(),s("tr",Z2,[e("td",null,c(ot+1),1),e("td",null,[e("span",ek,c(Te.name),1),e("div",tk,[e("span",null,c(Te.adDecisionServerUrl),1)])]),e("td",sk,[Te.arn?E("",!0):(t(),s("button",{key:0,onClick:Ge=>T(Te.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},L[50]||(L[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,ok)),e("button",{onClick:Ge=>ue(Te.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},L[51]||(L[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,ak)])]))),256))])])])):E("",!0)])])):E("",!0)],64))),128))]),_:1},512),[[ke,m.item.outputs.length>0]])])])])])],2),e("div",{class:te([b("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",lk,[e("div",nk,[e("table",rk,[L[62]||(L[62]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"# Ad Breaks"),e("th")])],-1)),N(z(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:R(()=>[(t(!0),s(U,null,q(m.item.programs,(de,Oe)=>(t(),s(U,{key:de.programId},[e("tr",ik,[e("td",dk,c(Oe+1),1),e("td",null,[e("div",uk,[e("div",ck,[de.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},q(de.vodSource.video.thumbnails,Te=>(t(),s("div",mk,[e("img",{src:Te.url,class:"img-fuild border",width:"128"},null,8,fk)]))),256)):E("",!0)]),e("div",pk,[e("div",null,[de.arn?(t(),s("span",vk)):E("",!0),e("span",null,c(de.name),1)]),e("div",null,[e("span",gk,c(o(B).moment.utc(de.dateScheduledStart).calendar())+" (utc)",1)]),e("div",null,[e("span",bk,c(o(B).moment(de.dateScheduledStart).calendar())+" (local)",1)])])])]),e("td",yk,c(o(B).moment.utc(de.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",$k,c(de.adBreaks.length),1),e("td",wk,[e("div",hk,[e("button",{onClick:Te=>de.expand=!de.expand,type:"button",class:te([[de.expand?"btn-secondary":"btn-outline-secondary"],"btn btn-sm"])},[de.expand?(t(),s("span",kk)):(t(),s("span",Sk))],10,_k),L[60]||(L[60]=e("button",{type:"button",class:"btn btn-secondary btn-sm dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"visually-hidden"},"Toggle Dropdown")],-1)),e("ul",Tk,[e("li",null,[e("button",{onClick:Te=>H(de.programId),class:"dropdown-item"},L[56]||(L[56]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),Q("Edit ")]),8,Ik)]),de.arn?(t(),s("li",Mk,[e("button",{onClick:Te=>pe(de.programId),class:"dropdown-item"},L[57]||(L[57]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),Q("Unpublish ")]),8,xk)])):(t(),s(U,{key:1},[e("li",null,[e("button",{onClick:Te=>W(de.programId),class:"dropdown-item"},L[58]||(L[58]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),Q("Publish ")]),8,Ck)]),e("li",null,[e("button",{onClick:Te=>S(de.programId),class:"dropdown-item"},L[59]||(L[59]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),Q("Remove ")]),8,Vk)])],64))])])])]),de.expand?(t(),s("tr",Pk,[L[61]||(L[61]=e("td",null,null,-1)),e("td",Ok,[z(t2,{item:de,urlViewVideo:n.urlViewVideo,urlViewVodSource:n.urlViewVodSource},null,8,["item","urlViewVideo","urlViewVodSource"])])])):E("",!0)],64))),128))]),_:1},512),[[ke,m.item.programs.length>0]])])]),e("div",Ak,[e("button",{onClick:L[18]||(L[18]=de=>w()),class:"btn btn-outline-primary"},L[63]||(L[63]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),Q("Program ")]))])])],2),k.value?(t(),s("div",{key:0,class:te([b("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",Uk,[e("div",Lk,[m.item.outputs[0].hls?(t(),s("button",{key:1,onClick:L[20]||(L[20]=de=>ie()),class:"btn btn-primary"},L[65]||(L[65]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:L[19]||(L[19]=de=>le()),class:"btn btn-primary"},L[64]||(L[64]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",Dk,[(t(!0),s(U,null,q(m.item.outputs,de=>(t(),s(U,null,[e("div",Hk,[e("div",Ek,[e("video",{id:`video-${de.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,qk),e("div",Bk,[e("div",Nk,c(de.manifestName),1)])])]),(t(!0),s(U,null,q(de.playbackConfigurations,(Oe,Te)=>(t(),s("div",Rk,[e("div",Fk,[e("video",{id:`video-${Oe.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,zk),e("div",Gk,[e("div",jk,[Q(" #"+c(Te+1)+" ",1),e("span",Yk,c(Oe.name),1)])])])]))),256))],64))),256))])])],2)):E("",!0),e("div",{class:te([b("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",Wk,[L[71]||(L[71]=Q(" Checklist ")),e("ul",null,[e("li",null,[m.item.fillerSlateSourceLocation.arn?(t(),s("span",Kk)):(t(),s("span",Qk)),L[66]||(L[66]=Q(" Filler Slate Source Location "))]),e("li",null,[m.item.fillerSlateVodSource.arn?(t(),s("span",Jk)):(t(),s("span",Xk)),L[67]||(L[67]=Q(" Filler Slate VOD Source "))]),e("li",null,[m.item.outputs.length>0?(t(),s("span",Zk)):(t(),s("span",e0)),L[69]||(L[69]=Q(" Outputs ")),e("ul",null,[e("li",null,[m.item.outputs.some(de=>de.playbackConfigurations.length>0)?(t(),s("span",t0)):(t(),s("span",s0)),L[68]||(L[68]=Q(" Ad Insertion setup "))])])]),e("li",null,[m.item.programs.length>0?(t(),s("span",o0)):(t(),s("span",a0)),L[70]||(L[70]=Q(" Programs "))])])])],2)])])):E("",!0)]),_:1},8,["errorMessage"]),z(zw,{ref_key:"modalAddProgram",ref:v,onRefresh:a},null,512),z(ft,{ref_key:"modalEditProgram",ref:Y,onOnClose:a},null,512)])]),_:1})}}},n0={path:"/",component:Va,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Xa},{path:"videos",children:[{path:"",component:Jn},{path:"view/:id",component:Lr,props:!0},{path:"add",component:Al},{path:"edit/:id",component:gn,props:!0}]},{path:"source-groups",children:[{path:"add",component:qr},{path:"edit/:id",component:ri,props:!0},{path:"",component:vi},{path:"view/:id",component:Vi,props:!0}]},{path:"source-locations",children:[{path:"add",component:Di},{path:"edit/:id",component:qi,props:!0},{path:"",component:Qi},{path:"view/:id",component:bd,props:!0}]},{path:"vod-sources",children:[{path:"add",component:Au},{path:"edit/:id",component:rc,props:!0},{path:"",component:Ec},{path:"view/:id",component:kf,props:!0}]},{path:"channels",children:[{path:"add",component:w1},{path:"edit/:id",component:k1,props:!0},{path:"",component:A1},{path:"schedule-programs/:id",component:B$,props:!0},{path:"view/:id",component:l0,props:!0}]},{path:"program-templates",children:[{path:"add",component:nv},{path:"edit/:id",component:Qv,props:!0},{path:"",component:gg},{path:"view/:id",component:Zg,props:!0}]}]},st=gt({history:bt("/"),linkActiveClass:"active",routes:[{...vo},{path:"/administrator",redirect:"/"},{...n0}]});st.beforeEach(async n=>{kt().clear();var I=n.meta;const V=["/accounts/login","/accounts/loginRedirect","/accounts/logout","/accounts/register"],_=I.requiresAuth&&!V.includes(n.path),D=he(),P=D.user;if(_&&!P)return D.returnUrl=n.fullPath,{path:"/accounts/login",query:{returnUrl:encodeURIComponent(n.fullPath)}};var J=n.meta.roles;if(J&&!D.user.roles.some(j=>J.includes(j)))return alert("You are not authorized to acccess this page."),{path:"/accounts/login/",query:{returnUrl:encodeURIComponent(n.fullPath)}}});const r0={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const n=this,I=new yt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();I.on("onNotificationCreated",function(V){let _=V.content;V.notificationEntityClassText==="Deposit"&&(_+="<br/>",_+=`<a href="${n.urlViewDeposit}${V.referenceId}">Click ${V.notificationEntityClassText} here</a>`),V.notificationEntityClassText==="Withdraw"&&(_+="<br/>",_+=`<a href="${n.urlViewWithdraw}${V.referenceId}">Click ${V.notificationEntityClassText} here</a>`),V.notificationEntityClassText==="ManualModeOfPayment"&&(_+="<br/>",_+=`<a href="${n.urlViewManualModeOfPayment}${V.referenceId}">Click ${V.notificationEntityClassText} here</a>`),V.iconClass;let D="secondary";switch(V.notificationType){case 1:D="success";break;case 3:D="info";break;case 3:D="success";break;case 4:D="info";break;case 5:D="warning";break;case 6:D="error";break}n.$toast[D](V.subject,_,{timeOut:1e4});const P=V.subject,C={body:_,icon:"/img/192x102.png"};new Notification(P,C)}),I.on("jobUpdated",function(V){n.$bus.$emit("event:job-updated",V)}),await I.start().then(function(){}).catch(function(V){})}}};function i0(n,p,I,V,_,D){return t(),s("div")}const d0=Ve(r0,[["render",i0],["__scopeId","data-v-5b4a9fa2"]]),u0={class:"navbar bg-dark bg-gradient shadow flex-grow-0","data-bs-theme":"dark"},c0={class:"container"},m0={class:"col-md"},f0={class:"navbar-brand mb-0 ms-1 align-middle"},p0={class:"col-md-auto"},v0={class:"d-flex flex-row align-items-center justify-content-end"},g0={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(n){return(p,I)=>(t(),ve(ye,null,{default:R(()=>[e("nav",u0,[e("div",c0,[e("div",m0,[He(p.$slots,"title",{},()=>[e("a",f0,[e("i",{class:te([n.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,c(n.pageTitle),1)])],!0)]),e("div",p0,[e("div",v0,[He(p.$slots,"default",{},void 0,!0)])])])])]),_:3}))}},b0=Ve(g0,[["__scopeId","data-v-eb40af38"]]),y0={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},$0=["innerHTML"],w0={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},h0={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(p,I)=>(t(),ve(ye,null,{default:R(()=>[He(p.$slots,"default",{},()=>[n.errorMessage?(t(),s("div",y0,[I[0]||(I[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),Q("Error ")],-1)),e("div",{innerHTML:n.errorMessage},null,8,$0)])):E("",!0),n.vuelidate&&n.vuelidate.$error?(t(),s("div",w0,[I[1]||(I[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),Q("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,q(n.vuelidate.$errors,V=>(t(),s("li",{key:V.$uid},[V.$validator==="$each"?(t(),s(U,{key:0},[Q(" Check errors in '"+c(V.$property)+"' ",1)],64)):(t(),s(U,{key:1},[Q(c(V.$message),1)],64))]))),128))])])):E("",!0)])]),_:3}))}},_0={class:"py-3 container flex-grow-1 overflow-y-auto"},k0={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(n){return(p,I)=>{const V=se("PageMessages");return t(),ve(ye,null,{default:R(()=>[e("div",_0,[z(V,{errorMessage:n.errorMessage,vuelidate:n.vuelidate},null,8,["errorMessage","vuelidate"]),He(p.$slots,"default")])]),_:3})}}},S0={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const n=this;n.busy||(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveFirst(){const n=this;if(n.busy)return;n.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await n.search(1))},async moveLast(){const n=this;if(n.busy)return;const p=n.filter;p.pageIndex!==p.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(p.totalPages))},async move(n){const p=this;if(p.busy)return;const I=p.filter,V=I.pageIndex+n;V>=0&&V<=I.totalPages&&(document.activeElement&&document.activeElement.blur(),await p.search(V))}}},T0={class:"mt-2"},I0={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},M0={key:0,class:"col-sm order-2 order-sm-1"},x0={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},C0={class:"me-1 fw-bold"},V0={class:"fw-bold"},P0={class:"ms-1"},O0={class:"col-sm-auto ms-auto order-1 order-sm-2"},A0={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},U0={key:0,class:"page-item"},L0={key:1,class:"page-item"},D0={key:2,class:"page-item"},H0={class:"page-item active"},E0={class:"page-link"},q0={key:3,class:"page-item"},B0={key:4,class:"page-item"},N0={key:5,class:"page-item"},R0={key:1,class:"text-info font-weight-bold text-center"},F0={key:0},z0={key:1};function G0(n,p,I,V,_,D){return t(),s("div",T0,[I.filter.items.length?(t(),s("div",I0,[I.showPerPage?(t(),s("div",M0,[e("div",x0,[e("div",null,[e("span",C0,c(I.filter.totalCount),1),p[8]||(p[8]=Q("records in ")),e("span",V0,c(I.filter.totalPages),1),p[9]||(p[9]=Q(" page(s) "))]),e("div",P0,[N(e("select",{"onUpdate:modelValue":p[0]||(p[0]=P=>I.filter.pageSize=P),onChange:p[1]||(p[1]=(...P)=>D.changePagination&&D.changePagination(...P)),class:"form-select form-select-sm me-1"},p[10]||(p[10]=[Ke('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ge,I.filter.pageSize]])]),p[11]||(p[11]=e("div",{class:"ms-1"},"per page",-1))])])):E("",!0),e("div",O0,[e("ul",A0,[I.filter.pageIndex!==1?(t(),s("li",U0,[e("button",{class:"page-link","aria-label":"Previous",onClick:p[2]||(p[2]=(...P)=>D.moveFirst&&D.moveFirst(...P))},p[12]||(p[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):E("",!0),I.filter.pageIndex>2?(t(),s("li",L0,[e("button",{class:"page-link",onClick:p[3]||(p[3]=P=>D.move(-2))},c(I.filter.pageIndex-2),1)])):E("",!0),I.filter.pageIndex>1?(t(),s("li",D0,[e("button",{class:"page-link",onClick:p[4]||(p[4]=P=>D.move(-1))},c(I.filter.pageIndex-1),1)])):E("",!0),e("li",H0,[e("span",E0,c(I.filter.pageIndex),1)]),I.filter.pageIndex<I.filter.totalPages?(t(),s("li",q0,[e("button",{class:"page-link",onClick:p[5]||(p[5]=P=>D.move(1))},c(I.filter.pageIndex+1),1)])):E("",!0),I.filter.pageIndex<I.filter.totalPages-1?(t(),s("li",B0,[e("button",{class:"page-link",onClick:p[6]||(p[6]=P=>D.move(2))},c(I.filter.pageIndex+2),1)])):E("",!0),I.filter.pageIndex<I.filter.totalPages?(t(),s("li",N0,[e("button",{class:"page-link","aria-label":"Next",onClick:p[7]||(p[7]=(...P)=>D.moveLast&&D.moveLast(...P))},p[13]||(p[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):E("",!0)])])])):(t(),s("div",R0,[I.noRecords?(t(),s("div",F0,c(I.noRecords),1)):(t(),s("div",z0,"No record(s) found."))]))])}const j0=Ve(S0,[["render",G0]]),Y0={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let n=this;if(!n.enabled)return;let p=n.filter;p.sortField===n.field?p.sortOrder===0?p.sortField=null:p.sortOrder=p.sortOrder===0?1:0:(p.sortField=n.field,p.sortOrder=1),n.$emit("search")}}},W0={class:"align-self-center"};function K0(n,p,I,V,_,D){return t(),s("div",{onClick:p[0]||(p[0]=(...P)=>D.click&&D.click(...P)),class:"d-flex flex-row justify-content-start align-content-center",style:dt({cursor:I.enabled?"pointer":""})},[He(n.$slots,"default"),e("span",W0,[I.showSort?(t(),s("span",{key:0,class:te([{"fa-sort text-gray-500":!D.currentSortField(),"fa-sort-up":D.currentSortField()&&D.sortUp(),"fa-sort-down":D.currentSortField()&&!D.sortUp()},"fas fa-fw mr-1"])},null,2)):E("",!0)])],4)}const Q0=Ve(Y0,[["render",K0]]),J0={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(n){const p=this;p.setSelected(n),p.$emit("onSelectedRow",n)}}},X0={class:"table-responsive m-0"},Z0=["href"],eS={key:1},tS=["onClick"],sS={class:"form-group row no-gutters"},oS={class:"col-5 col-form-label"},aS={class:"col align-self-center"},lS=["href"],nS={key:1};function rS(n,p,I,V,_,D){return t(),s("div",null,[e("div",X0,[e("table",{class:te(["table table-hover d-none d-md-table card",I.tableCss])},[e("thead",null,[He(n.$slots,"header",{},()=>[p[0]||(p[0]=e("th",null,"#",-1)),(t(!0),s(U,null,q(I.header.columns,P=>(t(),s("th",null,c(P.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(U,null,q(I.items,(P,J)=>He(n.$slots,"table-row",{key:`row1-${P[I.header.key]}`,item:P,index:J},()=>[e("td",null,c(I.getRowNumber(J)),1),(t(!0),s(U,null,q(I.header.columns,j=>(t(),s("td",null,[j.href?(t(),s("a",{key:0,href:j.href(P[I.header.key]),class:"font-weight-bold"},c(P[j.field]),9,Z0)):(t(),s("span",eS,c(P[j.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:te(["d-block d-md-none",I.rowCss])},[(t(!0),s(U,null,q(I.items,(P,J)=>(t(),s("div",{key:`row2-${P[I.header.key]}`,onClick:j=>D.onSelectedRow(P),class:"border"},[e("div",{class:te(["p-2",{"b-left":I.isSelected(P)}])},[He(n.$slots,"table-list",{item:P,index:J},()=>[(t(!0),s(U,null,q(I.header.columns,j=>(t(),s("div",sS,[e("label",oS,c(j.title),1),e("div",aS,[j.href?(t(),s("a",{key:0,href:j.href(P[I.header.key]),class:"font-weight-bold"},c(P[j.field]),9,lS)):(t(),s("span",nS,c(P[j.field]),1))])]))),256))],!0)],2)],8,tS))),128))],2)])}const iS=Ve(J0,[["render",rS],["__scopeId","data-v-65929213"]]),Pe=$t(_t);Pe.use(wt());Pe.use(ht);Pe.use(st);Pe.component("m-notification",d0);Pe.component("m-pagination",j0);Pe.component("sort-field",Q0);Pe.component("table-list",iS);Pe.component("Toasts",Ia);Pe.component("PageHeader",b0);Pe.component("PageMessages",h0);Pe.component("PageBody",k0);const dS="https://sonyfastpoc.azurewebsites.net/",uS="Arcadian-FAST",cS=void 0,mS={API_URL:dS,appName:uS,tenantId:cS};Pe.provide("$config",mS);Pe.provide("$bus",Ze);Pe.mount("#app");
