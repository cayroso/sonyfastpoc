import{o as t,c as ce,r as ee,h as dt,d as Qe,a as re,e as Ne,b as s,f as e,g as B,w as L,i as z,t as v,F as U,j as D,k as A,l as de,m as Ge,n as Se,p as Xe,q as Re,u as ut,s as Ze,P as et,v as fe,x as te,y as oe,z as $e,T as pe,A as o,B as ct,C as E,D as Q,E as mt,G as le,H as tt,I as _e,J as he,K as Ue,L as ue,M as He,N as Te,O as qe,Q as ke,R as Ae,S as Pe,U as Je,V as ft,W as pt,X as vt,Y as Oe,Z as gt,_ as bt}from"./vendor-BfSyRqtS-chunk.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))V(k);new MutationObserver(k=>{for(const R of k)if(R.type==="childList")for(const C of R.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&V(C)}).observe(document,{childList:!0,subtree:!0});function _(k){const R={};return k.integrity&&(R.integrity=k.integrity),k.referrerPolicy&&(R.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?R.credentials="include":k.crossOrigin==="anonymous"?R.credentials="omit":R.credentials="same-origin",R}function V(k){if(k.ep)return;k.ep=!0;const R=_(k);fetch(k.href,R)}})();const yt={__name:"App",setup(i){return(f,_)=>{const V=ee("router-view");return t(),ce(V)}}};function st(){const i=N=>{var p;let Y=N,M=Y.response,H="";if(!Y.response)return N.message;if(M.status===500){if(typeof M.data=="string")return M.data;if(M.data.content)return M.data.content;if(M.data.detail)return M.data.detail}if(M.status===401){const x=`${window.location.pathname}${window.location.search}`;H=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(x)}`}'>here</a> to login.`}else if(M.status===400){let x=Y.response.data.errors;H=Y.response.data.title||Y.response.data,x&&(H+="<ul>");for(let h in x){let W=x[h];for(let X in x[h]){let d=W[X];H+=`<li>${d}</li>`}}x&&(H+="</ul>"),H||(H=Y.message),H&&H.content&&(H=H.content)}else M.status===404?H=((p=M==null?void 0:M.data)==null?void 0:p.title)||(M==null?void 0:M.data)||"Record not found.":typeof M.data=="string"&&(H=Y.message,H===""&&(H=`Error <b>Http ${M.status}</b>.<br/>Please contact the System Administrator.`));return H},f=N=>JSON.parse(JSON.stringify(N)),_=N=>{if(typeof N!="number")return N;var Y=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return Y.format(N)},V=(N,Y,M)=>{const p={value:Y,expiry:new Date().getTime()+M};debugger;localStorage.setItem(N,JSON.stringify(p))},k=N=>{debugger;const Y=localStorage.getItem(N);if(!Y)return null;const M=JSON.parse(Y);return new Date().getTime()>M.expiry?(localStorage.removeItem(N),null):M.value},R="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:i,clone:f,toCurrency:_,moment:dt,localStorageSetWithExpiry:V,localStorageGetWithExpiry:k,setPageTab:(N,Y)=>{var M=localStorage.getItem(R);M?M=JSON.parse(M):M={},M[N]=Y,localStorage.setItem(R,JSON.stringify(M))},getPageTab:N=>{var Y=localStorage.getItem(R);return Y?Y=JSON.parse(Y):Y={},Y[N]},createHlsStream:(N,Y,M)=>{var H=new Hls({autoStartLoad:M??!0});return H.on(Hls.Events.MEDIA_ATTACHED,function(){}),H.on(Hls.Events.MANIFEST_PARSED,function(p,x){console.log("manifest loaded, found "+x.levels.length+" quality level")}),H.on(Hls.Events.ERROR,function(p,x){if(x.fatal)switch(x.type){case Hls.ErrorTypes.MEDIA_ERROR:console.log("fatal media error encountered, try to recover"),H.recoverMediaError();break;case Hls.ErrorTypes.NETWORK_ERROR:console.error("fatal network error encountered",x);break;default:H.destroy();break}}),H.loadSource(Y),H.attachMedia(N),H},isValidTime:N=>/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/.test(N)}}const $t=st(),ot=JSON.parse(localStorage.getItem("user"))||{},wt=$t.moment.utc(ot.exp*1e3),ht=wt.isAfter()?ot:null,ye=Qe({id:"auth",state:()=>({user:ht,returnUrl:null}),actions:{async login(i){try{this.user=i,localStorage.setItem("user",JSON.stringify(i))}catch(f){debugger;alert(f)}},logout(){this.user=null,localStorage.removeItem("user"),nt.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),kt="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(kt));const _t={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},ze=_t,at=Qe("msal",()=>{const i=re({auth:{clientId:ze.VITE_AUTH_CLIENT_ID,authority:ze.VITE_AUTH_AUTHORITY_URL,redirectUri:ze.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),f=re("");return{msalConfig:i,accessToken:f,setAccessToken:V=>{f.value=V}}}),je={$on:(...i)=>Ne.on(...i),$once:(...i)=>Ne.once(...i),$off:(...i)=>Ne.off(...i),$emit:(...i)=>Ne.emit(...i)};function St(){const i=(R,C,G,F)=>{je.$emit("toast-message",{title:R,message:C,type:G,options:F})};return{success:(R,C,G={})=>{i(R,C,"success",G)},warning:(R,C,G={})=>{i(R,C,"warning",G)},info:(R,C,G={})=>{i(R,C,"info",G)},error:(R,C,G={})=>{i(R,C,"danger",G)}}}const Me=(i,f)=>{const _=i.__vccOpts||i;for(const[V,k]of f)_[V]=k;return _},Tt={data(){return{notifications:[],messages:[]}},async created(){const i=this;i.$bus.$on("event:notification-received",()=>{i.getUnreadNotifications()}),i.$bus.$on("event:notification-marked-as-read",f=>{i.notifications.some(V=>V.notificationId===f)&&i.getUnreadNotifications()}),i.$bus.$on("event:notification-removed",f=>{i.notifications.some(V=>V.notificationId===f)&&i.getUnreadNotifications()}),i.$bus.$on("event:chat-marked-as-read",i.onChatMarkedAsRead),i.$bus.$on("event:chat-message-received",i.onChatMessageReceived)},async mounted(){const i=this,f=i.$refs.notifications,_=i.$refs.messages;f&&f.offsetParent,_&&_.offsetParent&&await i.getUnreadChats()},methods:{async logout(){const i=this;try{await i.$util.axios.post("/api/accounts/logout").then(f=>{const _="/";i.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){i.$util.href(_)}})})}catch(f){i.$util.handleError(f)}},async onChatMarkedAsRead(i){let f=this,_=f.messages.find(V=>V.chatId===i);if(_){let V=f.messages.indexOf(_);f.messages.splice(V,1)}},async onChatMessageReceived(i){let f=this,_=f.messages.find(k=>k.chatId===i.chatId);if(_)_.lastMessageText=i.content;else{var V={chatId:i.chatId,isRead:!1,lastDateSent:i.dateSent,lastMessageText:i.content,senderFirstLastName:`${i.sender.firstName} ${i.sender.lastName}`,senderInitials:i.sender.initials,senderProfilePicture32:i.sender.profilePicture32,urlPicture:f.$util.getProfilePictureUrl(i.sender.profilePicture32,i.sender.initials)};f.messages.push(V)}},async getUnreadNotifications(){const i=this;try{await i.$util.axios.get("api/accounts/unread-notifications").then(f=>{i.notifications=f.data})}catch(f){i.$util.handleError(f)}},async getUnreadChats(){const i=this;try{await i.$util.axios.get("api/accounts/unread-chats").then(f=>{i.messages=f.data;for(let _ in i.messages){let V=i.messages[_];i.$set(V,"urlPicture",i.$util.getProfilePictureUrl(V.senderProfilePicture32,V.senderInitials))}})}catch(f){i.$util.handleError(f)}},viewNotification(i){this.$bus.$emit("event:open-notification",i)},viewChat(i){this.$bus.$emit("event:open-chat",i)},showHiddenElements(){let f=this.$el.getElementsByClassName("initialHidden");for(let _=0;_<f.length;_++)f[_].classList.remove("invisible")}}},Mt={mixins:[Tt],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const f=ye().user;return{user:f,username:f?f.nameFull:"Guest"}},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1},async openModalSearchUser747(i){this.$refs.refModalSearchUser747.open(i)}}},It={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},Ct={class:"container-md"},xt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},Vt={class:"navbar-nav"},Pt={class:"nav-item dropdown"},Ot={class:"dropdown-menu","aria-labelledby":"dropdown01"},At={class:"nav-item dropdown"},Ut={class:"dropdown-menu","aria-labelledby":"dropdown01"},Ht={class:"navbar-nav ms-auto"},Dt={class:"nav-item dropdown"},Lt={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},Et={class:"d-inline d-sm-none d-md-inline"},qt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Bt={class:"text-capitalize"};function Nt(i,f,_,V,k,R){const C=ee("router-link");return t(),s("nav",It,[e("div",Ct,[B(C,{class:"navbar-brand",to:"/member"},{default:L(()=>[z(v(_.appName),1)]),_:1}),f[14]||(f[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",xt,[e("ul",Vt,[e("li",Pt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",Ot,[e("li",null,[B(C,{class:"dropdown-item",to:"/member/announcements"},{default:L(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),z(" Announcements ")])),_:1})]),e("li",null,[B(C,{class:"dropdown-item",to:"/member/posts"},{default:L(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),z(" Posts ")])),_:1})]),e("li",null,[B(C,{class:"dropdown-item",to:"/member/yellow-pages"},{default:L(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),z(" Yellow Pages ")])),_:1})])])]),e("li",At,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",Ut,[e("li",null,[B(C,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:L(()=>f[4]||(f[4]=[z(" Property Monthly Dues ")])),_:1})])])])]),e("ul",Ht,[e("li",Dt,[e("a",Lt,[e("span",null,[f[6]||(f[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",Et,v(k.username),1)])]),e("ul",qt,[f[9]||(f[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),f[10]||(f[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),f[11]||(f[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),f[12]||(f[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),k.user&&k.user.roles.length>1?(t(!0),s(U,{key:0},D(k.user.roles,G=>(t(),s("li",null,[B(C,{to:`/${G.toLowerCase()}`,class:"dropdown-item"},{default:L(()=>[e("span",Bt,v(G),1)]),_:2},1032,["to"])]))),256)):A("",!0),e("li",null,[B(C,{to:"/",class:"dropdown-item"},{default:L(()=>f[7]||(f[7]=[z(" Main ")])),_:1})]),f[13]||(f[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[B(C,{to:"/account/logout",class:"dropdown-item"},{default:L(()=>f[8]||(f[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),z("Logout ")])),_:1})])])])])])])])}const Rt=Me(Mt,[["render",Nt]]),Ft={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const i=document.getElementById("top");i&&i.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let i=this;if(!i.$el.getElementsByClassName)return;let f=i.$el.getElementsByClassName("initialHidden");for(let _=0;_<f.length;_++){let V=f[_];V.classList.remove("invisible"),V.classList.remove("d-none")}},close(){const i=this,f=document.referrer.toLowerCase();f&&f.includes("/account/login")?i.$router.go(-2):i.$router.go(-1)},toggle(i){const f=this;f.toggles[i]=!f.toggles[i],localStorage.setItem(f.togglesKey,JSON.stringify(f.toggles))}}},zt={mixins:[Ft],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(i){return window.location.href.indexOf(i)>-1}}},Gt={class:"footer sticky-bottom"},jt={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Yt={class:"container-md"},Wt={class:"navbar-text small p-0"},Kt={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Jt={class:"container-md"},Qt={class:"navbar-nav nav-fill w-100"},Xt={class:"nav-item dropup"},Zt={class:"dropdown-menu","aria-labelledby":"dropdown01"},es={class:"nav-item dropup"},ts={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function ss(i,f,_,V,k,R){const C=ee("router-link");return t(),s("footer",Gt,[e("div",jt,[e("div",Yt,[e("span",Wt,"©"+v(k.copyright),1)])]),e("nav",Kt,[e("div",Jt,[e("ul",Qt,[e("li",Xt,[f[3]||(f[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Zt,[e("li",null,[B(C,{class:"dropdown-item",to:"/member/announcements"},{default:L(()=>f[0]||(f[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),z(" Announcements ")])),_:1})]),e("li",null,[B(C,{class:"dropdown-item",to:"/member/posts"},{default:L(()=>f[1]||(f[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),z(" Posts ")])),_:1})]),e("li",null,[B(C,{class:"dropdown-item",to:"/member/yellow-pages"},{default:L(()=>f[2]||(f[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),z(" Yellow Pages ")])),_:1})])])]),e("li",es,[f[5]||(f[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",ts,[e("li",null,[B(C,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:L(()=>f[4]||(f[4]=[z(" Property Monthly Dues ")])),_:1})])])])])])])])}const os=Me(zt,[["render",ss]]),as={name:"AdminLayout",components:{TopNav:Rt,BottomNav:os},inject:["$config"],mounted(){const f=this.$config;document.title=`Account - ${f.appName}`}},ls={class:"d-flex flex-column vh-100"};function ns(i,f,_,V,k,R){const C=ee("Toasts"),G=ee("router-view");return t(),s("div",ls,[B(C),B(G,{class:"flex-grow-1 mb-2"})])}const rs=Me(as,[["render",ns]]),is={__name:"index",setup(i){return ye().user,de(()=>{}),(_,V)=>(t(),s("div",null,V[0]||(V[0]=[Ge('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},ds={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Arcadian-Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},us=ds;function cs(){Se("$config");const i=us.VITE_API_URL,f=Xe.create({baseURL:i});return Re.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),f.interceptors.request.use(_=>{Re.start();const{user:V}=ye();return V&&V.token&&(_.headers?(_.headers.Authorization||(_.headers.Authorization=`Bearer ${V.token}`),_.headers["Access-Control-Allow-Origin"]||(_.headers["Access-Control-Allow-Origin"]="*")):_.headers={Authorization:`Bearer ${V.token}`,"Access-Control-Allow-Origin":"*"}),_}),f.interceptors.response.use(_=>(Re.done(),_),_=>{throw Re.done(),_}),f}function ve(i){if(!i.appTitle)throw Error("App Title is required.");if(!i.pageTitle)throw Error("Page Title is required.");const f=ut(),_=Ze(),V=cs(),k=st(),R=St(),G=ye().user,F=()=>G&&G.roles&&G.roles.includes("System"),P=()=>G&&G.roles&&G.roles.includes("administrator"),N=()=>G&&G.roles&&G.roles.includes("employee"),Y=()=>G&&G.roles&&G.roles.includes("Member"),M=()=>{let b=f.path;return f.query.returnUrl&&(b=f.query.returnUrl),b=`?returnUrl=${encodeURIComponent(b)}`,b},H=async()=>{const b=document.referrer.toLowerCase();b&&b.includes("/accounts/login")?await _.go(-2):await _.go(-1)},p=b=>{var S;const I=f.path,m=(S=f.query)==null?void 0:S.returnUrl;m&&!(I.startsWith(m)||m.startsWith(I))?_.push(m):_.push(b)},x=i.appTitle,h=i.pageTitle,W=re(!1),X=re(new Map),d=re(""),g=re(""),K=re("");return{appTitle:x,pageTitle:h,busy:W,validations:X,infoMessage:d,warningMessage:g,errorMessage:K,router:_,route:f,axios:V,utils:k,toasts:R,close:H,closeWithReturnUrl:p,generateReturnUrl:M,security:{userId:G?G.userId:"",isSystem:F(),isAdministrator:P(),isEmployee:N(),isMember:Y()}}}const ms={class:"h-100 d-flex align-items-center justify-content-center"},fs={class:"form-signin w-100 m-auto"},ps={class:"h3 mb-3 fw-normal"},vs={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},gs=["innerHTML"],bs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ys={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(i){Se("$config");const f=ye(),_=at(),V=new et(_.msalConfig),k=fe({username:"",password:""}),R={username:{required:te.withMessage("Username is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0}},C=$e(R,k),{appTitle:G,pageTitle:F,busy:P,isDirty:N,validations:Y,infoMessage:M,warningMessage:H,errorMessage:p,router:x,route:h,axios:W,utils:X,toasts:d,close:g,security:K}=ve({appTitle:"Sony FAST POC",pageTitle:"Sign On"});de(async()=>{await V.initialize()});const b=async()=>{await V.loginPopup({}).then(()=>{debugger;const S=V.getAllAccounts()[0];V.setActiveAccount(S)}).catch(m=>{console.error(`error during authentication: ${m}`)});var I={account:V.getActiveAccount(),scopes:[]};await V.acquireTokenSilent(I).then(m=>{debugger;const T=m.account.idToken,u=ct(T);if(u.token=m.accessToken,console.log(m),!u.roles){debugger;u.roles=[]}u.userId=u.sub,f.login(u);var r=h.query.returnUrl;r?x.push(decodeURIComponent(r)):u.roles.length===1?x.push(`/${u.roles[0].toLowerCase()}`):x.push("/")}).catch(m=>{console.error(`error during acquireTokenSilent: ${m}`)})};return(I,m)=>(t(),ce(pe,null,{default:L(()=>[e("div",ms,[e("main",fs,[e("div",null,[e("h1",ps,v(o(G)),1),e("div",null,[o(p)?(t(),s("div",vs,[m[1]||(m[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(p)},null,8,gs)])):A("",!0),o(C).$error?(t(),s("div",bs,[m[2]||(m[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(C).$errors,S=>(t(),s("li",{key:S.$uid},v(S.$message),1))),128))])])):A("",!0)]),e("button",{onClick:m[0]||(m[0]=S=>b()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},$s=Me(ys,[["__scopeId","data-v-896956d0"]]),ws={class:"h-100 d-flex align-items-center justify-content-center"},hs={__name:"logout",setup(i){const f=ye();return f.user,de(async()=>{f.logoutWithRedirect()}),(_,V)=>(t(),s("div",ws,V[0]||(V[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[z(" You have logged out from HOA MS."),e("br"),z(" Click "),e("a",{href:"/",class:"d-inline"},"here"),z(" to go back to home page. ")])],-1)])))}},ks={class:"h-100 d-flex align-items-center justify-content-center"},_s={class:"card m-3"},Ss={class:"card-header"},Ts={class:"card-body"},Ms={class:"m-2"},Is={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Cs=["innerHTML"],xs={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Vs={class:"row row-cols-1 row-cols-sm-3"},Ps={class:"col-sm"},Os={class:"form-group"},As={key:0,class:"d-block invalid-feedback"},Us={class:"col-sm"},Hs={class:"form-group"},Ds={key:0,class:"d-block invalid-feedback"},Ls={class:"col-sm"},Es={class:"form-group"},qs={key:0,class:"d-block invalid-feedback"},Bs={class:"row row-cols-1 row-cols-sm-3"},Ns={class:"col"},Rs={class:"form-group"},Fs={key:0,class:"d-block invalid-feedback"},zs={class:"col"},Gs={class:"form-group"},js={key:0,class:"d-block invalid-feedback"},Ys={class:"row row-cols-1 row-cols-sm-3"},Ws={class:"col-sm"},Ks={class:"form-group"},Js={key:0,class:"d-block invalid-feedback"},Qs={class:"col-sm"},Xs={class:"form-group"},Zs={key:0,class:"d-block invalid-feedback"},eo={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},to={class:"col"},so=["disabled"],oo={class:"col"},ao={class:"col"},lo={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(i){const f=fe({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),_=(K,b)=>K===b.password,V={firstName:{required:te.withMessage("First name is required.",oe),$autoDirty:!0,$lazy:!0},middleName:{required:te.withMessage("Middle name is required.",oe),$autoDirty:!0,$lazy:!0},lastName:{required:te.withMessage("Last name is required.",oe),$autoDirty:!0,$lazy:!0},phoneNumber:{required:te.withMessage("Phone number is required.",oe),$autoDirty:!0,$lazy:!0},email:{required:te.withMessage("Email is required.",oe),$autoDirty:!0,$lazy:!0},password:{required:te.withMessage("Password is required.",oe),$autoDirty:!0,$lazy:!0},confirmPassword:{required:te.withMessage("Confirm password is required.",oe),confirmSamePassword:te.withMessage("Password and confirm passwrod are different.",_),$autoDirty:!0,$lazy:!0}},k=$e(V,f),{appTitle:R,pageTitle:C,busy:G,isDirty:F,validations:P,infoMessage:N,warningMessage:Y,errorMessage:M,router:H,axios:p,utils:x,toasts:h,close:W,security:X}=ve({appTitle:"HOA MS",pageTitle:"Register User"}),d=Se("$config");de(()=>{});const g=async()=>{const K=f;if(G.value)return;if(!await k.value.$validate()){window.scrollTo(0,0);return}M.value=null;try{G.value=!0;const I=x.clone(K);I.tenantid=d.tenantId;debugger;await p({method:"post",url:"/api/v1/accounts/register",data:I}).then(m=>{h.success("Register","Registration was successfull.",{onClose:async()=>{await H.push("/accounts/login")}})})}catch(I){M.value=x.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{G.value=!1}};return(K,b)=>{const I=ee("router-link");return t(),ce(pe,null,{default:L(()=>[e("div",ks,[e("div",_s,[e("h4",Ss,v(o(C)),1),e("div",Ts,[e("div",Ms,[o(M)?(t(),s("div",Is,[b[8]||(b[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(M)},null,8,Cs)])):A("",!0),o(k).$error?(t(),s("div",xs,[b[9]||(b[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(k).$errors,m=>(t(),s("li",{key:m.$uid},v(m.$message),1))),128))])])):A("",!0)]),e("div",Vs,[e("div",Ps,[e("div",Os,[b[10]||(b[10]=e("label",null,"First Name",-1)),E(e("input",{"onUpdate:modelValue":b[0]||(b[0]=m=>f.firstName=m),type:"text",class:"form-control"},null,512),[[Q,f.firstName]]),o(k).firstName.$error?(t(),s("div",As,[(t(!0),s(U,null,D(o(k).firstName.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])]),e("div",Us,[e("div",Hs,[b[11]||(b[11]=e("label",null,"Middle Name",-1)),E(e("input",{"onUpdate:modelValue":b[1]||(b[1]=m=>f.middleName=m),type:"text",class:"form-control"},null,512),[[Q,f.middleName]]),o(k).middleName.$error?(t(),s("div",Ds,[(t(!0),s(U,null,D(o(k).middleName.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])]),e("div",Ls,[e("div",Es,[b[12]||(b[12]=e("label",null,"Last Name",-1)),E(e("input",{"onUpdate:modelValue":b[2]||(b[2]=m=>f.lastName=m),type:"text",class:"form-control"},null,512),[[Q,f.lastName]]),o(k).lastName.$error?(t(),s("div",qs,[(t(!0),s(U,null,D(o(k).lastName.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])])]),e("div",Bs,[e("div",Ns,[e("div",Rs,[b[13]||(b[13]=e("label",null,"Phone Number",-1)),E(e("input",{"onUpdate:modelValue":b[3]||(b[3]=m=>f.phoneNumber=m),type:"tel",class:"form-control"},null,512),[[Q,f.phoneNumber]]),o(k).phoneNumber.$error?(t(),s("div",Fs,[(t(!0),s(U,null,D(o(k).phoneNumber.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])]),e("div",zs,[e("div",Gs,[b[14]||(b[14]=e("label",null,"Email",-1)),E(e("input",{"onUpdate:modelValue":b[4]||(b[4]=m=>f.email=m),type:"email",class:"form-control"},null,512),[[Q,f.email]]),o(k).email.$error?(t(),s("div",js,[(t(!0),s(U,null,D(o(k).email.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])])]),e("div",Ys,[e("div",Ws,[e("div",Ks,[b[15]||(b[15]=e("label",null,"Password",-1)),E(e("input",{"onUpdate:modelValue":b[5]||(b[5]=m=>f.password=m),type:"password",class:"form-control"},null,512),[[Q,f.password]]),o(k).password.$error?(t(),s("div",Js,[(t(!0),s(U,null,D(o(k).password.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])]),e("div",Qs,[e("div",Xs,[b[16]||(b[16]=e("label",null,"Confirm Password",-1)),E(e("input",{"onUpdate:modelValue":b[6]||(b[6]=m=>f.confirmPassword=m),type:"password",class:"form-control"},null,512),[[Q,f.confirmPassword]]),o(k).confirmPassword.$error?(t(),s("div",Zs,[(t(!0),s(U,null,D(o(k).confirmPassword.$errors,m=>(t(),s("div",{key:m.$uid},v(m.$message),1))),128))])):A("",!0)])])]),e("div",eo,[e("div",to,[e("button",{disabled:o(k).$dirty&&o(k).$invalid,onClick:b[7]||(b[7]=m=>g()),class:"btn btn-primary w-100"},b[17]||(b[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),z("Register ")]),8,so)]),e("div",oo,[B(I,{to:"/",class:"btn btn-outline-primary w-100"},{default:L(()=>b[18]||(b[18]=[z("Home")])),_:1})]),e("div",ao,[B(I,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:L(()=>b[19]||(b[19]=[z("Login")])),_:1})])])])])])]),_:1})}}},no={path:"/accounts",component:rs,props:!1,meta:{},children:[{path:"",component:is},{path:"login",component:$s},{path:"logout",component:hs},{path:"register",component:lo}]};function Ye(){const i=Ze(),f=F=>window.location.href.indexOf(F)>-1,_=F=>localStorage.getItem("data-bs-theme")||F,V=F=>{document.documentElement.setAttribute("data-bs-theme",F),localStorage.setItem("data-bs-theme",F)},k=async()=>await Xe.get("https://bootswatch.com/api/5.json").then(F=>F.data),R=F=>{const P=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");P&&F?(P.setAttribute("href",F),localStorage.setItem("bootswatch-theme",F)):alert("cannot query css link")},C=F=>{G(),i.push(F)},G=()=>{if(screen.width<576){const P=document.getElementById("navbarCollapse");if(P){const N=mt.getInstance(P);N&&N.hide()}}};return{isActive:f,getCurrentBsTheme:_,changeBsTheme:V,getBootswatch:k,changeTheme:R,navigate:C,collapseNavbar:G}}const ro={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},io={class:"container-md"},uo={class:"navbar-collapse collapse",id:"navbarCollapse"},co={class:"navbar-nav"},mo={class:"nav-item"},fo={class:"nav-item dropdown"},po={class:"dropdown-menu","aria-labelledby":"dropdown01"},vo={class:"nav-item"},go={class:"nav-item dropdown"},bo={class:"dropdown-menu","aria-labelledby":"dropdown01"},yo={class:"navbar-nav ms-auto"},$o={class:"nav-item dropdown"},wo={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},ho=["onClick"],ko={class:"nav-item dropdown"},_o={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},So={class:"d-sm-none d-xl-inline"},To={key:0},Mo={key:1},Io={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Co={key:0},xo={key:1},Vo={__name:"topNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(i){const f=at(),{isActive:_,getCurrentBsTheme:V,changeBsTheme:k,getBootswatch:R,changeTheme:C,navigate:G,collapseNavbar:F}=Ye(),P=ye(),N=P.user,Y=fe({user:N,username:N?N.nameFull:"Guest",bsTheme:"light",currentTheme:"",bootswatch:{}});de(async()=>{const x=Y;x.bootswatch=await R();const h=V(x.bsTheme);h&&(x.bsTheme=h,k(x.bsTheme));const W=localStorage.getItem("bootswatch-theme");W&&(x.currentTheme=W,C(W))});const M=x=>{C(x),Y.currentTheme=x,F()},H=x=>{k(x),Y.bsTheme=x,F()},p=async()=>{P.logoutWithRedirect();const x=new et(f.msalConfig);await x.initialize();const h={mainWindowRedirectUri:"/"};await x.logoutPopup(h)};return(x,h)=>{const W=ee("router-link");return t(),ce(pe,null,{default:L(()=>[e("nav",ro,[e("div",io,[B(W,{class:"navbar-brand",to:"/administrator"},{default:L(()=>[z(v(i.appName),1)]),_:1}),h[18]||(h[18]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",uo,[e("ul",co,[e("li",mo,[B(W,{to:"/videos",onClick:o(F),class:"nav-link"},{default:L(()=>h[3]||(h[3]=[e("span",{class:"fas fa-fw fa-video me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Videos ",-1)])),_:1},8,["onClick"])]),e("li",fo,[h[6]||(h[6]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-warehouse me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Sources ")],-1)),e("ul",po,[e("li",null,[B(W,{to:"/source-groups",onClick:o(F),class:"dropdown-item"},{default:L(()=>h[4]||(h[4]=[z(" Groups ")])),_:1},8,["onClick"])]),e("li",null,[B(W,{to:"/source-locations",onClick:o(F),class:"dropdown-item"},{default:L(()=>h[5]||(h[5]=[z(" Locations ")])),_:1},8,["onClick"])])])]),e("li",vo,[B(W,{to:"/vod-sources",onClick:o(F),class:"nav-link"},{default:L(()=>h[7]||(h[7]=[e("span",{class:"fas fa-fw fa-tags me-1"},null,-1),e("span",{class:"d-sm-none d-xl-inline"}," Video on Demand (VOD) ",-1)])),_:1},8,["onClick"])]),e("li",go,[h[10]||(h[10]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-microphone-lines me-1"}),e("span",{class:"d-sm-none d-xl-inline"}," Channel Assembly ")],-1)),e("ul",bo,[e("li",null,[B(W,{to:"/program-templates",onClick:o(F),class:"dropdown-item"},{default:L(()=>h[8]||(h[8]=[z(" Program Templates ")])),_:1},8,["onClick"])]),e("li",null,[B(W,{to:"/channels",onClick:o(F),class:"dropdown-item"},{default:L(()=>h[9]||(h[9]=[z(" Channels ")])),_:1},8,["onClick"])])])])]),e("ul",yo,[e("li",$o,[h[14]||(h[14]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),e("span",{class:"d-sm-none d-xl-inline"},"Themes")],-1)),e("ul",wo,[e("li",null,[Y.bsTheme==="dark"?(t(),s("button",{key:0,onClick:h[0]||(h[0]=X=>H("light")),class:"dropdown-item"},h[11]||(h[11]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Dark Mode ")]))):(t(),s("button",{key:1,onClick:h[1]||(h[1]=X=>H("dark")),class:"dropdown-item"},h[12]||(h[12]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Light Mode ")])))]),h[13]||(h[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(U,null,D(Y.bootswatch.themes,X=>(t(),s("li",null,[e("button",{onClick:d=>M(X.cssCdn),class:le(["dropdown-item",{active:Y.currentTheme===X.cssCdn}])},v(X.name),11,ho)]))),256))])]),e("li",ko,[e("a",_o,[e("span",null,[h[15]||(h[15]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",So,[o(N)?(t(),s("span",To,v(o(N).name),1)):(t(),s("span",Mo," Guest "))])])]),e("ul",Io,[o(N)?(t(),s("li",Co,[e("button",{onClick:h[2]||(h[2]=X=>p()),class:"dropdown-item"},h[16]||(h[16]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),z("Logout ")]))])):(t(),s("li",xo,[B(W,{to:"/accounts/login",class:"dropdown-item"},{default:L(()=>h[17]||(h[17]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),z("Login ")])),_:1})]))])])])])])])]),_:1})}}},Po={class:"d-flex flex-column text-bg-dark"},Oo={class:"navbar bg-primary bg-gradient shadow","data-bs-theme":"dark"},Ao={class:"navbar-brand me-0 mb-1 px-0 px-md-2"},Uo={class:"d-none d-md-inline"},Ho={class:"nav nav-pills flex-column mb-auto h-100 px-1"},Do={class:"nav-item mt-3"},Lo={class:"nav-item"},Eo={class:"nav-item"},qo={class:"nav-item"},Bo={class:"nav-item"},No={class:"nav-item"},Ro={class:"nav-item dropdown"},Fo={class:"dropdown-menu overflow-y-auto","aria-labelledby":"dropdown01"},zo=["onClick"],Go={__name:"sideNav",props:{appName:{type:String,default:"Arcadian-Sony FAST"}},setup(i){const{isActive:f,getCurrentBsTheme:_,changeBsTheme:V,getBootswatch:k,changeTheme:R,navigate:C,collapseNavbar:G}=Ye(),F=fe({bsTheme:"light",currentTheme:"",bootswatch:{}});de(async()=>{const Y=F;Y.bootswatch=await k();const M=_(Y.bsTheme);M&&(Y.bsTheme=M,V(Y.bsTheme));const H=localStorage.getItem("bootswatch-theme");H&&(Y.currentTheme=H,R(H))});const P=Y=>{R(Y),F.currentTheme=Y,G()},N=Y=>{V(Y),F.bsTheme=Y,G()};return(Y,M)=>{const H=ee("router-link");return t(),s("div",Po,[e("nav",Oo,[B(H,{to:"/",class:"text-decoration-none w-100 text-center"},{default:L(()=>[e("h1",Ao,[M[2]||(M[2]=e("span",{class:"fas fa-fw fa-home d-inline d-md-none"},null,-1)),e("span",Uo,v(i.appName),1)])]),_:1})]),e("ul",Ho,[e("li",Do,[B(H,{to:"/videos",onClick:o(G),class:"nav-link"},{default:L(()=>M[3]||(M[3]=[e("span",{class:"fas fa-fw fa-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Videos",-1)])),_:1},8,["onClick"])]),e("li",Lo,[B(H,{to:"/source-groups",onClick:o(G),class:"nav-link"},{default:L(()=>M[4]||(M[4]=[e("span",{class:"fas fa-fw fa-warehouse"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Groups",-1)])),_:1},8,["onClick"])]),e("li",Eo,[B(H,{to:"/source-locations",onClick:o(G),class:"nav-link"},{default:L(()=>M[5]||(M[5]=[e("span",{class:"fas fa-fw fa-building"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Locations",-1)])),_:1},8,["onClick"])]),e("li",qo,[B(H,{to:"/vod-sources",onClick:o(G),class:"nav-link"},{default:L(()=>M[6]||(M[6]=[e("span",{class:"fas fa-fw fa-tags"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"VODs",-1)])),_:1},8,["onClick"])]),e("li",Bo,[B(H,{to:"/program-templates",onClick:o(G),class:"nav-link"},{default:L(()=>M[7]||(M[7]=[e("span",{class:"fas fa-fw fa-file-video"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Program Templates",-1)])),_:1},8,["onClick"])]),e("li",No,[B(H,{to:"/channels",onClick:o(G),class:"nav-link"},{default:L(()=>M[8]||(M[8]=[e("span",{class:"fas fa-fw fa-tv"},null,-1),e("span",{class:"d-none d-md-inline ms-1"},"Channels",-1)])),_:1},8,["onClick"])]),e("li",Ro,[M[12]||(M[12]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles"}),e("span",{class:"d-none d-md-inline ms-1"},"Themes")],-1)),e("ul",Fo,[e("li",null,[F.bsTheme==="dark"?(t(),s("button",{key:0,onClick:M[0]||(M[0]=p=>N("light")),class:"dropdown-item"},M[9]||(M[9]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Dark Mode ")]))):(t(),s("button",{key:1,onClick:M[1]||(M[1]=p=>N("dark")),class:"dropdown-item"},M[10]||(M[10]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),z("Light Mode ")])))]),M[11]||(M[11]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),s(U,null,D(F.bootswatch.themes,p=>(t(),s("li",null,[e("button",{onClick:x=>P(p.cssCdn),class:le(["dropdown-item",{active:F.currentTheme===p.cssCdn}])},v(p.name),11,zo)]))),256))])])])])}}},jo={class:"footer sticky-bottom"},Yo={class:"d-sm-block navbar navbar-dark bg-dark bg-gradient1 py-1"},Wo={class:"container-md"},Ko={class:"navbar-text small p-0"},Jo={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(i){Ye();const f=Se("$config"),V=ye().user;let R=new Date().getFullYear();const C=fe({user:V,username:V?V.nameFull:"Guest",copyright:`2020-${R} ${f.appName}`});return de(async()=>{}),(G,F)=>(t(),s("footer",jo,[e("div",Yo,[e("div",Wo,[e("span",Ko,"©"+v(C.copyright),1)])])]))}},Qo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){je.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(i){i.message&&this.addMessage(i.title,i.message,i.type,i.options)},async addMessage(i,f,_,V={}){var k={id:this.count++,title:i,message:f,type:_,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};k=Object.assign({},k,V),this.messages.unshift(k),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),k.timeOut>0&&await this.startTimeout(k)},async startTimeout(i,f=0){const _=this,V=performance.now(),k=async()=>{i.animationFrame=requestAnimationFrame(async R=>{const C=R+f-V;if(!_.exists(i)||i.paused){cancelAnimationFrame(i.animationFrame);return}else if(C<i.timeOut){const G=C/i.timeOut;i.progress=G,await k()}else{i.progress=1,cancelAnimationFrame(i.animationFrame),_.remove(i);return}})};await k()},pauseProgress(i){i.timeOut<=0||(i.paused=!0)},async resumeProgress(i){i.timeOut<=0||(i.paused=!1,await this.startTimeout(i,i.timeOut*i.progress))},getCurrentProgress(i){return Math.round(i.progress*100)===100?100:i.progress*100},getIconClass(i){const f=i.type;let _="";switch(f){case"success":_="fas fa-fw fa-circle-check";break;case"info":_="fas fa-fw fa-circle-info";break;case"warning":_="fas fa-fw fa-circle-exclamation";break;case"danger":_="fas fa-fw fa-triangle-exclamation";break}let V=_;return i.rtl?"icon-right "+V:"icon-left "+V},async remove(i){const f=this.messages.findIndex(_=>_.id===i.id);this.messages.splice(f,1),typeof i.onClose=="function"&&await i.onClose()},exists(i){return this.messages.findIndex(_=>_.id===i.id)!==-1}}},Xo={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Zo=["onMouseover","onMouseout"],ea={class:"me-auto text-white"},ta=["onClick"],sa={class:"toast-body"},oa=["innerHTML"],aa={key:0,class:"progress m-1",style:{height:"4px"}};function la(i,f,_,V,k,R){return t(),ce(pe,null,{default:L(()=>[e("div",Xo,[B(_e,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:L(()=>[(t(!0),s(U,null,D(k.messages,C=>(t(),s("div",{key:C.id,class:le(["toast show mb-2 ms-auto",`border-${C.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:G=>R.pauseProgress(C),onMouseout:G=>R.resumeProgress(C)},[e("div",{class:le(["toast-header",`bg-${C.type}`])},[e("strong",ea,[e("i",{class:le([R.getIconClass(C),"me-1"])},null,2),z(v(C.title),1)]),C.closeable?(t(),s("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:G=>R.remove(C)},f[0]||(f[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,ta)):A("",!0)],2),e("div",sa,[e("div",{innerHTML:C.message},null,8,oa)]),C.timeOut>0&&C.showProgress?(t(),s("div",aa,[e("div",{class:le(`bg-${C.type}`),style:tt({width:R.getCurrentProgress(C)+"%"})},null,6)])):A("",!0)],42,Zo))),128))]),_:1})])]),_:1})}const na=Me(Qo,[["render",la],["__scopeId","data-v-5272bd9a"]]),ra={name:"AdminLayout",components:{TopNav:Vo,SideNav:Go,BottomNav:Jo},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},ia={class:"d-flex flex-row vh-100"},da={class:"d-flex flex-column w-100"};function ua(i,f,_,V,k,R){const C=ee("Toasts"),G=ee("SideNav"),F=ee("router-view");return t(),s("div",ia,[B(C),B(G),e("div",da,[B(F,{class:"vh-100 overflow-y-auto"})])])}const ca=Me(ra,[["render",ua]]),ma={class:"mt-2 container-md"},fa={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},pa=["innerHTML"],va={class:"row gx-2 mb-3"},ga={class:"col-md-4"},ba=["id"],ya={class:"col-md-8 overflow-x-auto"},$a={class:"d-flex flex-column align-items-start"},wa=["src"],ha={class:""},ka={class:"d-flex flex-row"},_a={class:"me-2 px-2 border-end border-secondary",style:{width:"10rem"}},Sa={class:"text-center"},Ta=["src"],Ma={class:"text-end"},Ia={class:"text-wrap text-truncate"},Ca={class:"overflow-y-auto"},xa={class:"badge bg-info me-2"},Va={key:0,class:"badge bg-warning mb-1"},Pa={class:"row mt-3 d-none"},Oa={class:"col-12 col-sm-6 offset-sm-3"},Aa={class:"card"},Ua={class:"card-body"},Ha={class:"card card-body mb-2 d-none"},Da={key:0,class:"fas fa-fw fa-circle-check text-success"},La={key:1,class:"fas fa-fw fa-times-circle text-danger"},Ea={key:0,class:"fas fa-fw fa-circle-check text-success"},qa={key:1,class:"fas fa-fw fa-times-circle text-danger"},Ba={__name:"Index",props:{urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,isDirty:k,validations:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,generateReturnUrl:p,security:x}=ve({appTitle:"ARC AIO",pageTitle:"Dashboard"});Se("$config"),ye().user;const W=fe({item:null});re("805630ed-f288-4f2f-83a4-6c71312f6970"),re(),de(async()=>{await g()});const X=async()=>{const I=W;if(!V.value)try{V.value=!0;const m="/api/v1/channels/epg/";I.item=[],await N.get(m).then(S=>{I.item=S.data}),I.item.forEach(S=>{K(S)})}catch(m){F.value=Y.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{V.value=!1}},d=async()=>{if(confirm("Are you sure you want to Reset All Data?"))try{await N.get("/api/v1/channels/reset/").then(S=>{M.success("Reset All Data","Reset data was successful.")})}catch(m){F.value=Y.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{V.value=!1}},g=async()=>{await X()},K=I=>{if(I.manifestUrl&&Hls.isSupported()){b(I);var m=document.getElementById(`video-${I.id}`);if(!m)return;I.hls&&I.hls.destroy(),I.hls=Y.createHlsStream(m,I.manifestUrl);return}},b=I=>{I.outputs&&I.outputs.forEach(S=>{if(S.hls){debugger;S.hls.detachMedia(),S.hls.destroy(),delete S.hls}S.playbackConfigurations.forEach(T=>{if(T.hls){debugger;T.hls.detachMedia(),T.hls.destroy(),delete T.hls}})})};return(I,m)=>{const S=ee("PageHeader"),T=ee("router-link");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(S,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:o(_)},{default:L(()=>[e("button",{onClick:m[0]||(m[0]=u=>d()),class:"ms-2 btn btn-danger"},m[2]||(m[2]=[e("span",{class:"fas fa-fw fa-recycle me-1"},null,-1),z("Reset All Data ")])),e("button",{onClick:m[1]||(m[1]=u=>g()),class:"ms-2 btn btn-secondary"},m[3]||(m[3]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))]),_:1},8,["pageTitle"]),e("div",ma,[o(F)?(t(),s("div",fa,[m[4]||(m[4]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:JSON.stringify(o(F))},null,8,pa)])):A("",!0),(t(!0),s(U,null,D(W.item,u=>(t(),s("div",null,[e("div",va,[e("div",ga,[u.manifestUrl?(t(),s("video",{key:0,id:`video-${u.id}`,controls:"",autoplay:"",class:"card-img-top object-fit-scale align-middle border"},null,8,ba)):A("",!0)]),e("div",ya,[e("div",$a,[e("div",null,[e("h4",null,[e("img",{src:u.logo,class:"img-fluid me-2",style:{height:"3rem"}},null,8,wa),B(T,{to:`${i.urlViewChannel}/${u.id}/${o(p)()}`},{default:L(()=>[z(v(u.title),1)]),_:2},1032,["to"])])]),e("div",ha,[e("div",ka,[(t(!0),s(U,null,D(u.programs,r=>(t(),s("div",_a,[e("div",Sa,[e("img",{src:r.image,class:"img-fluid border",style:{height:"64px"}},null,8,Ta)]),e("div",Ma,v(o(Y).moment(r.since).format("hh:mm a"))+"-"+v(o(Y).moment(r.till).format("hh:mm a")),1),e("div",Ia,v(r.title),1),e("div",Ca,[(t(!0),s(U,null,D(r.genres,a=>(t(),s("span",xa,v(a),1))),256))]),o(Y).moment().isAfter(r.since)&&o(Y).moment().isBefore(r.till)?(t(),s("span",Va,"Now Playing")):A("",!0)]))),256))])])])])])]))),256)),e("div",Pa,[e("div",Oa,[e("div",Aa,[m[14]||(m[14]=e("div",{class:"card-header"}," Standard Workflow ",-1)),e("div",Ua,[e("ol",null,[m[8]||(m[8]=e("li",null," Create and Publish Source Location. ",-1)),e("li",null,[B(T,{to:`/videos/add/${o(p)()}`},{default:L(()=>m[5]||(m[5]=[z(" Create a Video. ")])),_:1},8,["to"])]),m[9]||(m[9]=e("li",null," Create and Publish VOD Source. ",-1)),e("li",null,[B(T,{to:"/program-templates/add"},{default:L(()=>m[6]||(m[6]=[z(" ut Create Program Template. ")])),_:1}),m[7]||(m[7]=e("ul",null,[e("li",null,"Specify the VOD."),e("li",null,"(Optional) Setup theclip ranges.li"),e("li",null,"(Optional) Add/remove Ad breaks.")],-1))]),m[10]||(m[10]=e("li",null,[z(" Create and Publish Channel. "),e("ul",null,[e("li",null," Configure and Publish the Package Configuration for Ad Insertion. "),e("li",null," Start the channel. ")])],-1)),m[11]||(m[11]=e("li",null," Add/Remove Programs to Channel . ",-1)),m[12]||(m[12]=e("li",null," Publish Channel. ",-1)),m[13]||(m[13]=e("li",null," View the Channel's Playlist, see the Output/Playback tab in the channel's page. ",-1))])])])])]),e("div",Ha,[m[17]||(m[17]=z(" Security ")),e("ul",null,[e("li",null,[o(x).isAdministrator?(t(),s("span",Da)):(t(),s("span",La)),m[15]||(m[15]=z(" Administrator "))]),e("li",null,[o(x).isEmployee?(t(),s("span",Ea)):(t(),s("span",qa)),m[16]||(m[16]=z(" Employee "))])])])])])]),_:1})}}};function De(i){if(!i.cacheKey)throw Error("Cache Key required.");if(!i.baseUrl)throw Error("Base Url required.");const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,closeWithReturnUrl:M,generateReturnUrl:H,security:p}=ve({appTitle:i.appTitle,pageTitle:i.pageTitle}),x=JSON.parse(JSON.stringify(i.filter));x.pageIndex=x.pageIndex||1,x.pageSize=x.pageSize||5,x.sortField=x.sortField||"",x.sortOrder=x.sortOrder||1,x.updateUrl=x.updateUrl||!1,x.items=x.items||[],x.query=x.query||{},x.query.criteria=x.query.criteria||"";const h=re(x),W=()=>{var u;if(V.value){console.log("Paginated search is currently busy.");return}const m=JSON.parse(localStorage.getItem(i.cacheKey))||{},S=new URLSearchParams(window.location.search),T=h.value;T.query.criteria=S.get("c")||m.criteria||T.query.criteria||"",T.pageIndex=parseInt(S.get("p"),10)||m.pageIndex||T.pageIndex||1,T.pageSize=parseInt(S.get("s"),10)||m.pageSize||T.pageSize||5,T.sortField=S.get("sf")||m.sortField||T.sortField||"",T.sortOrder=parseInt(S.get("so"),10)||m.sortOrder||T.sortOrder||1,T.visible=m.visible||T.visible,(u=i.initializeFilter)==null||u.call(i,h,i.cacheKey)},X=()=>{if(i.getQuery)return i.getQuery(h.value);{const m=h.value;return["?c=",encodeURIComponent(m.query.criteria),"&p=",m.pageIndex,"&s=",m.pageSize,"&sf=",m.sortField,"&so=",m.sortOrder].join("")}},d=()=>{if(i.saveQuery)i.saveQuery(h.value,i.cacheKey);else{const m=h.value;localStorage.setItem(i.cacheKey,JSON.stringify({criteria:m.query.criteria,pageIndex:m.pageIndex,pageSize:m.pageSize,sortField:m.sortField,sortOrder:m.sortOrder,visible:m.visible}))}};return{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,closeWithReturnUrl:M,generateReturnUrl:H,security:p,filter:h,initializeFilter:W,getQuery:X,saveQuery:d,search:async m=>{var T;let S=h.value;if(V.value){console.log("Paginated search is currently busy.");return}m>0&&(S.pageIndex=m);try{V.value=!0,C.value="";const u=X();S.selected=null,await F(`${i.baseUrl}/${u}`).then(async r=>{var n;Array.isArray(r.data)?S.items=r.data:S=Object.assign(S,r.data);let a=location.pathname;a.endsWith("/")?a+=u:a+="/"+u,S.updateUrl&&window.history.replaceState(u,`${f}-search`,a),S.items.forEach($=>{$.expand=!1}),d(),(n=i.successAction)==null||n.call(i,h.value)})}catch(u){if(localStorage.removeItem(i.cacheKey),i.failAction)i.failAction(u);else{const r=P.getErrorMessageAsHtml(u);C.value=r,N.error("Error Occured",r)}}finally{V.value=!1,(T=i.finalAction)==null||T.call(i)}},getRowNumber:m=>{const S=h.value;return(S.pageIndex-1)*S.pageSize+(m+1)},setSelected:m=>{const S=h.value;S.selected&&m&&S.selected===m?S.selected=null:(S.selected&&(S.selected.expand=!1),S.selected=m,S.selected.expand=!0)},isSelected:m=>{const S=h.value;return m===null||S.selected===null?!1:m===S.selected}}}const Na=["disabled"],Ra={class:"row row-cols-1 row-cols-sm-3"},Fa={class:"col"},za={class:"form-floating mb-2"},Ga={key:0,class:"d-block invalid-feedback"},ja={class:"col"},Ya={class:"form-floating"},Wa={class:"col"},Ka={class:"form-floating"},Ja={class:"col"},Qa={class:"form-floating mb-2"},Xa={class:"row row-cols-1 row-cols-sm-2"},Za={class:"col"},el={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},tl={class:"col"},sl={class:"form-check"},ol=["onUpdate:modelValue","id"],al=["for"],ll={class:"col"},nl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 border g-2"},rl={class:"col"},il={class:"form-check"},dl=["onUpdate:modelValue","id"],ul=["for"],cl={class:"table-responsive mt-2"},ml={class:"text-end"},fl={class:"table table-sm mb-0 mt-2"},pl={class:"align-middle"},vl={class:"text-center"},gl=["onUpdate:modelValue"],bl=["onUpdate:modelValue"],yl=["onUpdate:modelValue"],$l={class:"text-start"},wl=["onClick"],hl={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Video"}),H=i,p=fe({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}]},durationTime:"00:00:00",item:{title:"Video # ",description:null,durationInMillis:12e4,dateReleased:P.moment().format("YYYY-MM-DD"),formats:[]}}),x={item:{title:{title:te.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("Duration is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:te.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},h=$e(x,p),W=he(()=>{const b=P.moment;if(p.durationTime&&p.durationTime!=="00:00:00"&&P.isValidTime(p.durationTime)){const I=b().startOf("day"),m=I.format("YYYY-MM-DD ")+p.durationTime,T=b(m).subtract(I);return p.item.durationInMillis=T.valueOf(),p.item.durationInMillis}return 0});de(async()=>{await d()});const X=async()=>{const b=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const m=P.clone(b.item);m.durationInMillis=W.value;const S=P.moment(b.item.dateReleased).utc(!0).format();m.dateReleased=S;const T=p.lookups.genres.filter(r=>r.selected).map(r=>r.id);m.genres=T;const u=p.lookups.categories.filter(r=>r.selected).map(r=>r.id);m.categories=u;debugger;await F.post("/api/v1/videos/",m).then(r=>{N.success("Add Video","Video added",{onClose:async()=>{const a=`${H.urlView}/${r.data}`;await G.push(a)}})})}catch(m){C.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{V.value=!1}},d=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(b=>{const m=b.data.filter(S=>S.id!==0);p.lookups.genres=m})}catch(b){C.value=P.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},g=()=>{const b={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};p.item.formats.push(b)},K=b=>{p.item.formats.splice(b,1)};return(b,I)=>{const m=ee("router-link"),S=ee("PageHeader"),T=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(S,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:I[0]||(I[0]=u=>X()),class:"btn btn-primary"},I[6]||(I[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Na),B(m,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>I[7]||(I[7]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(T,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[e("div",null,[e("div",Ra,[e("div",Fa,[e("div",za,[E(e("input",{"onUpdate:modelValue":I[1]||(I[1]=u=>p.item.title=u),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Q,p.item.title]]),I[8]||(I[8]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Ga,[(t(!0),s(U,null,D(o(h).item.title.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):A("",!0)])]),e("div",ja,[e("div",Ya,[E(e("input",{"onUpdate:modelValue":I[2]||(I[2]=u=>p.item.dateReleased=u),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Q,p.item.dateReleased]]),I[9]||(I[9]=e("label",{for:"dateReleased",class:"small fw-bold"},"Date Released",-1))])]),e("div",Wa,[e("div",Ka,[E(e("input",{"onUpdate:modelValue":I[3]||(I[3]=u=>p.durationTime=u),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Q,p.durationTime]]),I[10]||(I[10]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Ja,[e("div",Qa,[E(e("textarea",{"onUpdate:modelValue":I[4]||(I[4]=u=>p.item.description=u),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Q,p.item.description]]),I[11]||(I[11]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Xa,[e("div",Za,[I[12]||(I[12]=e("h5",null,"Genres",-1)),e("div",el,[(t(!0),s(U,null,D(p.lookups.genres,u=>(t(),s("div",tl,[e("div",sl,[E(e("input",{"onUpdate:modelValue":r=>u.selected=r,class:"form-check-input",type:"checkbox",id:u.name},null,8,ol),[[Ue,u.selected]]),e("label",{class:"form-check-label",for:u.name},v(u.name),9,al)])]))),256))])]),e("div",ll,[I[13]||(I[13]=e("h5",null,"Categories",-1)),e("div",nl,[(t(!0),s(U,null,D(p.lookups.categories,u=>(t(),s("div",rl,[e("div",il,[E(e("input",{"onUpdate:modelValue":r=>u.selected=r,class:"form-check-input",type:"checkbox",id:u.name},null,8,dl),[[Ue,u.selected]]),e("label",{class:"form-check-label",for:u.name},v(u.name),9,ul)])]))),256))])])]),e("div",cl,[e("div",ml,[e("button",{onClick:I[5]||(I[5]=u=>g()),class:"btn btn-outline-primary btn-sm"},I[14]||(I[14]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",fl,[I[17]||(I[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(p.item.formats,(u,r)=>(t(),s("tr",pl,[e("td",vl,v(r+1),1),e("td",null,[E(e("select",{"onUpdate:modelValue":a=>u.format=a,class:"form-control"},I[15]||(I[15]=[e("option",{value:"HLS"},"HLS",-1),e("option",{value:"HLS"},"DASH",-1)]),8,gl),[[ue,u.format]])]),e("td",null,[E(e("input",{"onUpdate:modelValue":a=>u.serverUrl=a,type:"text",class:"form-control"},null,8,bl),[[Q,u.serverUrl]])]),e("td",null,[E(e("input",{"onUpdate:modelValue":a=>u.path=a,type:"text",class:"form-control"},null,8,yl),[[Q,u.path]])]),e("td",$l,[e("button",{onClick:a=>K(r),class:"btn btn-outline-warning btn-sm"},I[16]||(I[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,wl)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},kl=["disabled"],_l={class:"row row-cols-1 row-cols-sm-3"},Sl={class:"col"},Tl={class:"form-floating mb-2"},Ml={key:0,class:"d-block invalid-feedback"},Il={class:"col"},Cl={class:"form-floating"},xl={class:"col"},Vl={class:"form-floating"},Pl={class:"col"},Ol={class:"form-floating mb-2"},Al={class:"col"},Ul={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Hl={class:"col"},Dl={class:"form-check"},Ll=["onUpdate:modelValue","id"],El=["for"],ql={class:"col"},Bl={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4"},Nl={class:"col"},Rl={class:"form-check"},Fl=["onUpdate:modelValue","id"],zl=["for"],Gl={class:"table-responsive mt-2"},jl={class:"text-end"},Yl={class:"table table-sm mb-0 mt-2"},Wl={class:"align-middle"},Kl={class:"text-center"},Jl=["onUpdate:modelValue"],Ql=["value"],Xl=["onUpdate:modelValue"],Zl=["onUpdate:modelValue"],en={class:"text-start"},tn=["onClick"],sn={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Video"}),H=i,p=fe({lookups:{genres:[],categories:[{id:1,name:"Ad Break"},{id:2,name:"Filler Slate"},{id:3,name:"Program Content"}],formats:[]},durationTime:"00:00:00",item:{title:null,description:null,rawBaseUrl:null,rawPath:null,hlsBaseUrl:null,hlsPath:null,durationInMillis:null,formats:[]}}),x={item:{title:{title:te.withMessage("title is required.",oe),$autoDirty:!0,$lazy:!0},durationInMillis:{title:te.withMessage("durationInMillis is required.",oe),$autoDirty:!0,$lazy:!0},dateReleased:{title:te.withMessage("Date Released is required.",oe),$autoDirty:!0,$lazy:!0}}},h=$e(x,p),W=he(()=>{const m=P.moment;if(p.durationTime&&p.durationTime!=="00:00:00"&&P.isValidTime(p.durationTime)){const S=m().startOf("day"),T=S.format("YYYY-MM-DD ")+p.durationTime,r=m(T).subtract(S);return p.item.durationInMillis=r.valueOf(),p.item.durationInMillis}return 0});de(async()=>{await d(),await g(),await X()});const X=async()=>{try{await F.get(`/api/v1/videos/${H.id}/`).then(m=>{p.item=m.data;const S=P.moment(p.item.dateReleased).format("YYYY-MM-DD");p.item.dateReleased=S;const T=p.lookups.genres,u=p.item.genres.map(n=>n.genre);T.forEach(n=>{n.selected=u.includes(n.id)});const r=p.lookups.categories,a=p.item.categories.map(n=>n.category);r.forEach(n=>{n.selected=a.includes(n.id)})})}catch(m){C.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},d=async()=>{try{await F.get("/api/v1/lookups/video-genres/").then(m=>{const T=m.data.filter(u=>u.id!==0);p.lookups.genres=T})}catch(m){C.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},g=async()=>{try{await F.get("/api/v1/lookups/video-formats/").then(m=>{const T=m.data.filter(u=>u.id!==0);p.lookups.formats=T})}catch(m){C.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},K=async()=>{const m=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const T=P.clone(m.item);T.durationInMillis=W.value;const u=P.moment(m.item.dateReleased).utc(!0).format();T.dateReleased=u;const r=p.lookups.genres.filter(n=>n.selected).map(n=>n.id);T.genres=r;const a=p.lookups.categories.filter(n=>n.selected).map(n=>n.id);T.categories=a;debugger;await F.put("/api/v1/videos/",T).then(n=>{N.success("Edit Video","Video edited.",{onClose:async()=>{const $=`${H.urlView}/${H.id}`;await G.push($)}})})}catch(T){C.value=P.getErrorMessageAsHtml(T),window.scrollTo(0,0)}finally{V.value=!1}},b=()=>{const m={format:"HLS",serverUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",path:"/sony-poc/vod-1/bbb_2mins.m3u8"};p.item.formats.push(m)},I=m=>{p.item.formats.splice(m,1)};return(m,S)=>{const T=ee("router-link"),u=ee("PageHeader"),r=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(u,{"page-icon":"fas fa-fw fa-video",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:S[0]||(S[0]=a=>K()),class:"btn btn-primary"},S[6]||(S[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,kl),e("button",{onClick:X,class:"btn btn-secondary ms-2"},S[7]||(S[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B(T,{to:`${i.urlView}/${i.id}`,class:"btn btn-secondary ms-2"},{default:L(()=>S[8]||(S[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(r,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[e("div",null,[e("div",_l,[e("div",Sl,[e("div",Tl,[E(e("input",{"onUpdate:modelValue":S[1]||(S[1]=a=>p.item.title=a),id:"name",class:"form-control",placeholder:"Title"},null,512),[[Q,p.item.title]]),S[9]||(S[9]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Ml,[(t(!0),s(U,null,D(o(h).item.title.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):A("",!0)])]),e("div",Il,[e("div",Cl,[E(e("input",{"onUpdate:modelValue":S[2]||(S[2]=a=>p.item.dateReleased=a),type:"date",step:"1",id:"dateReleased",class:"form-control"},null,512),[[Q,p.item.dateReleased]]),S[10]||(S[10]=e("label",{for:"dateReleased",class:"small fw-bold"},"Duration Time",-1))])]),e("div",xl,[e("div",Vl,[E(e("input",{"onUpdate:modelValue":S[3]||(S[3]=a=>p.durationTime=a),type:"time",step:"1",id:"durationTime",class:"form-control"},null,512),[[Q,p.durationTime]]),S[11]||(S[11]=e("label",{for:"durationTime",class:"small fw-bold"},"Duration Time",-1))])])]),e("div",Pl,[e("div",Ol,[E(e("textarea",{"onUpdate:modelValue":S[4]||(S[4]=a=>p.item.description=a),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[Q,p.item.description]]),S[12]||(S[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",Al,[S[13]||(S[13]=e("h5",null,"Genres",-1)),e("div",Ul,[(t(!0),s(U,null,D(p.lookups.genres,a=>(t(),s("div",Hl,[e("div",Dl,[E(e("input",{"onUpdate:modelValue":n=>a.selected=n,class:"form-check-input",type:"checkbox",id:a.name},null,8,Ll),[[Ue,a.selected]]),e("label",{class:"form-check-label",for:a.name},v(a.name),9,El)])]))),256))])]),e("div",ql,[S[14]||(S[14]=e("h5",null,"Categories",-1)),e("div",Bl,[(t(!0),s(U,null,D(p.lookups.categories,a=>(t(),s("div",Nl,[e("div",Rl,[E(e("input",{"onUpdate:modelValue":n=>a.selected=n,class:"form-check-input",type:"checkbox",id:a.name},null,8,Fl),[[Ue,a.selected]]),e("label",{class:"form-check-label",for:a.name},v(a.name),9,zl)])]))),256))])]),e("div",Gl,[e("div",jl,[e("button",{onClick:S[5]||(S[5]=a=>b()),class:"btn btn-outline-primary btn-sm"},S[15]||(S[15]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("table",Yl,[S[17]||(S[17]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Format"),e("th",null,"Server"),e("th",null,"Path"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(p.item.formats,(a,n)=>(t(),s("tr",Wl,[e("td",Kl,v(n+1),1),e("td",null,[E(e("select",{"onUpdate:modelValue":$=>a.format=$,class:"form-control"},[(t(!0),s(U,null,D(p.lookups.formats,$=>(t(),s("option",{value:$.id},v($.name),9,Ql))),256))],8,Jl),[[ue,a.format]])]),e("td",null,[E(e("input",{"onUpdate:modelValue":$=>a.serverUrl=$,type:"text",class:"form-control"},null,8,Xl),[[Q,a.serverUrl]])]),e("td",null,[E(e("input",{"onUpdate:modelValue":$=>a.path=$,type:"text",class:"form-control"},null,8,Zl),[[Q,a.path]])]),e("td",en,[e("button",{onClick:$=>I(n),class:"btn btn-outline-warning btn-sm"},S[16]||(S[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,tn)])]))),256))])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},on={class:"ms-2"},an={class:"input-group"},ln=["value"],nn={class:"ms-1"},rn={class:"input-group"},dn={class:"ms-1"},un={class:"input-group"},cn={class:"table-responsive border shadow-sm"},mn={class:"table table-hover mb-0"},fn=["textContent"],pn={class:"d-flex flex-row justify-content-between"},vn={key:0},gn={class:"badge bg-primary me-1"},bn={key:1},yn={class:"badge bg-info me-1"},$n={key:2},wn={class:"badge bg-secondary me-1"},hn={class:"ms-2"},kn={class:"mt-1"},_n=["src"],Sn={key:1,src:"https://placehold.co/600x400?text=No+Thumbnail",class:"img-fuild border",width:"128"},Tn={class:"text-end"},Mn={class:"text-end"},In="/api/v1/videos/search",Cn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(i){Se("$config");const _=ye().user,{appTitle:V,pageTitle:k,busy:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,security:p,filter:x,initializeFilter:h,getQuery:W,saveQuery:X,search:d,getRowNumber:g,setSelected:K,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Videos",cacheKey:`${_==null?void 0:_.userId}/videos/search`,baseUrl:In,filter:{updateUrl:!0,lookups:{genres:[]},query:{genre:0,category:0}},initializeFilter:(m,S)=>{const T=m.value,u=new URLSearchParams(window.location.search),r=JSON.parse(localStorage.getItem(S))||{};T.query.genre=u.get("genre")||r.genre||T.query.genre||0,T.query.category=u.get("category")||r.category||T.query.category||0},getQuery:m=>["?c=",encodeURIComponent(m.query.criteria),"&p=",m.pageIndex,"&s=",m.pageSize,"&sf=",m.sortField,"&so=",m.sortOrder,"&genre=",m.query.genre,"&category=",m.query.category].join(""),saveQuery:(m,S)=>{localStorage.setItem(S,JSON.stringify({criteria:m.query.criteria,pageIndex:m.pageIndex,pageSize:m.pageSize,sortField:m.sortField,sortOrder:m.sortOrder,visible:m.visible,genre:m.query.genre,category:m.query.category}))}});de(async()=>{h(),await I(),await d()});const I=async()=>{try{await N.get("/api/v1/lookups/video-genres/").then(m=>{const S=m.data;x.value.lookups.genres=S})}catch(m){F.value=Y.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}};return(m,S)=>{const T=ee("router-view"),u=ee("router-link"),r=ee("PageHeader"),a=ee("m-pagination"),n=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(T),B(r,{"page-icon":"fas fa-fw fa-video",pageTitle:o(k)},{default:L(()=>[B(u,{to:i.urlAdd,class:"btn btn-primary"},{default:L(()=>S[5]||(S[5]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",on,[e("div",an,[S[6]||(S[6]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),E(e("select",{"onUpdate:modelValue":S[0]||(S[0]=$=>o(x).query.genre=$),class:"form-select"},[(t(!0),s(U,null,D(o(x).lookups.genres,$=>(t(),s("option",{value:$.id},v($.name),9,ln))),256))],512),[[ue,o(x).query.genre]])])]),e("div",nn,[e("div",rn,[S[8]||(S[8]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),E(e("select",{"onUpdate:modelValue":S[1]||(S[1]=$=>o(x).query.category=$),class:"form-select"},S[7]||(S[7]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(x).query.category]])])]),e("div",dn,[e("div",un,[E(e("input",{"onUpdate:modelValue":S[2]||(S[2]=$=>o(x).query.criteria=$),onKeyup:S[3]||(S[3]=He($=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:S[4]||(S[4]=$=>o(d)(1))},S[9]||(S[9]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(n,{errorMessage:o(F)},{default:L(()=>[e("div",cn,[e("table",mn,[S[10]||(S[10]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"Released"),e("th",null,"Description")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(o(x).items,($,w)=>(t(),s("tr",{key:$.videoId},[e("td",{textContent:v(o(g)(w)),class:"text-center"},null,8,fn),e("td",null,[e("div",pn,[e("div",null,[B(u,{to:`${i.urlView}/${$.videoId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:L(()=>[z(v($.title),1)]),_:2},1032,["to"]),e("div",null,[$.categories.length>0?(t(),s("div",vn,[(t(!0),s(U,null,D($.categories,c=>(t(),s("span",gn,v(c.categoryName),1))),256))])):A("",!0),$.genres.length>0?(t(),s("div",bn,[(t(!0),s(U,null,D($.genres,c=>(t(),s("span",yn,v(c.genreName),1))),256))])):A("",!0),$.formats.length>0?(t(),s("div",$n,[(t(!0),s(U,null,D($.formats,c=>(t(),s("span",wn,v(c.formatName),1))),256))])):A("",!0)])]),e("div",hn,[$.thumbnails.length>0?(t(!0),s(U,{key:0},D($.thumbnails,c=>(t(),s("div",kn,[e("img",{src:c.url,class:"img-fuild border",width:"128"},null,8,_n)]))),256)):(t(),s("img",Sn))])])]),e("td",Tn,v(o(Y).moment.utc($.durationInMillis).format("HH:mm:ss")),1),e("td",Mn,v(o(Y).moment.utc($.dateReleased).format("l")),1),e("td",null,v($.description),1)]))),128))]),_:1},512),[[Te,o(x).items.length>0]])])]),B(a,{filter:o(x),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},xn={key:0},Vn={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Pn={class:"nav-item",role:"presentation"},On={class:"nav-item",role:"presentation"},An={class:"nav-item",role:"presentation"},Un={class:"nav-item",role:"presentation"},Hn={class:"tab-content",id:"myTabContent"},Dn={class:"mt-2"},Ln={class:"row row-cols-1 row-cols-sm-2"},En={class:"col"},qn=["id"],Bn={class:"text-end"},Nn={class:"col"},Rn={class:"col"},Fn={class:"form-floating mb-2"},zn={class:"row row-cols-1 row-cols-sm-2"},Gn={class:"col"},jn={class:"form-floating mb-2"},Yn={class:"col"},Wn={class:"form-floating mb-2"},Kn={class:"col"},Jn={class:"form-floating mb-2"},Qn={class:"mt-1"},Xn={class:"badge bg-info me-1"},Zn={class:"badge bg-primary me-1"},er={class:"mt-2"},tr={class:"table-responsive border"},sr={class:"table table-hover mb-0"},or={class:"table-group-divider"},ar={class:"align-middle"},lr={class:"text-center"},nr={class:"mt-2"},rr={class:"text-end"},ir={class:"table-responsive border mt-2"},dr={class:"table table-hover mb-0 caption-top"},ur={class:"mt-2"},cr={class:"table-responsive"},mr={class:"table table-hover mb-0 caption-top"},fr={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,default:"/videos/edit"},urlAddVodSource:{type:String,default:"/vod-sources/add"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(i){const f=i,{appTitle:_,pageTitle:V,busy:k,isDirty:R,validations:C,infoMessage:G,warningMessage:F,errorMessage:P,router:N,axios:Y,utils:M,toasts:H,close:p,closeWithReturnUrl:x,generateReturnUrl:h,security:W}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Video"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null,hls:null}),g=re();de(async()=>{await m(),g.value=M.getPageTab("video")||"information-tab"}),qe(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const K=r=>{M.setPageTab("video",r),g.value=r},b=r=>r!==g.value?"":"active",I=r=>r!==g.value?"":"show active",m=async()=>{const r=d;if(!k.value)try{k.value=!0,P.value="",d.item=null;const a=`/api/v1/videos/${f.id}/`;await Y.get(a).then(n=>{r.item=n.data,r.item.duration=M.moment.utc(r.item.durationInMillis).format("HH:mm:ss"),r.item.dateReleased=M.moment.utc(r.item.dateReleased).format("ll")}),T()}catch(a){P.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{await m()},T=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?"),d.hls&&d.hls.destroy();const a=`video-${d.item.videoId}`;var r=document.getElementById(a);const n=d.item.formats.find(w=>w.formatName==="HLS"),$=n.serverUrl+n.path;d.hls=M.createHlsStream(r,$,!1)}},u=async()=>{if(!k.value)try{k.value=!0,P.value="";const r=`/api/v1/videos/${f.id}/get-blank-frames/`;await Y.post(r).then(a=>{}),k.value=!1,await S()}catch(r){P.value=M.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{k.value=!1}};return(r,a)=>{const n=ee("router-link"),$=ee("PageHeader"),w=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B($,{"page-icon":"fas fa-fw fa-video",pageTitle:o(V)},{default:L(()=>[B(n,{to:`${i.urlAddVodSource}/${o(h)()}&videoId=${i.id}`,class:"btn btn-primary"},{default:L(()=>a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-plus"},null,-1),z("Create VOD ")])),_:1},8,["to"]),B(n,{to:`${i.urlEdit}/${i.id}`,class:"btn btn-primary ms-1"},{default:L(()=>a[13]||(a[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:a[0]||(a[0]=c=>S()),class:"ms-2 btn btn-secondary"},a[14]||(a[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[1]||(a[1]=c=>o(x)(f.urlMain)),class:"btn btn-secondary ms-1"},a[15]||(a[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(w,{errorMessage:o(P)},{default:L(()=>[d.item?(t(),s("div",xn,[e("div",null,[e("ul",Vn,[e("li",Pn,[e("button",{onClick:a[2]||(a[2]=c=>K("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",On,[e("button",{onClick:a[3]||(a[3]=c=>K("formats-tab")),class:le([b("formats-tab"),"nav-link"]),id:"formats-tab","data-bs-toggle":"tab","data-bs-target":"#formats",type:"button",role:"tab","aria-controls":"formats","aria-selected":"false"}," Formats ",2)]),e("li",An,[e("button",{onClick:a[4]||(a[4]=c=>K("blankFrames-tab")),class:le([b("blankFrames-tab"),"nav-link"]),id:"blankFrames-tab","data-bs-toggle":"tab","data-bs-target":"#blankFrames",type:"button",role:"tab","aria-controls":"blankFrames","aria-selected":"false"}," Blank Frames ",2)]),e("li",Un,[e("button",{onClick:a[5]||(a[5]=c=>K("vodSources-tab")),class:le([b("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)])]),e("div",Hn,[e("div",{class:le([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Dn,[e("div",Ln,[e("div",En,[e("video",{id:`video-${d.item.videoId}`,controls:"",muted:"",autoplay:"",class:"card-img-top object-fit-contain border"},null,8,qn),e("div",Bn,[e("button",{onClick:a[6]||(a[6]=c=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},a[16]||(a[16]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])]),e("div",Nn,[e("div",Rn,[e("div",Fn,[E(e("input",{"onUpdate:modelValue":a[7]||(a[7]=c=>d.item.title=c),type:"text",class:"form-control",id:"title",placeholder:"Title",readonly:""},null,512),[[Q,d.item.title]]),a[17]||(a[17]=e("label",{for:"title"},"Title",-1))])]),e("div",zn,[e("div",Gn,[e("div",jn,[E(e("input",{"onUpdate:modelValue":a[8]||(a[8]=c=>d.item.dateReleased=c),type:"text",class:"form-control",id:"dateReleased",placeholder:"Date Released",readonly:""},null,512),[[Q,d.item.dateReleased]]),a[18]||(a[18]=e("label",{for:"dateReleased"},"Date Released",-1))])]),e("div",Yn,[e("div",Wn,[E(e("input",{"onUpdate:modelValue":a[9]||(a[9]=c=>d.item.duration=c),type:"text",class:"form-control",id:"duration",placeholder:"Duration",readonly:""},null,512),[[Q,d.item.duration]]),a[19]||(a[19]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Kn,[e("div",Jn,[E(e("textarea",{"onUpdate:modelValue":a[10]||(a[10]=c=>d.item.description=c),type:"text",class:"form-control",id:"description",placeholder:"Description",readonly:"",style:{height:"7rem"}},null,512),[[Q,d.item.description]]),a[20]||(a[20]=e("label",{for:"description"},"Description",-1))])]),e("div",Qn,[(t(!0),s(U,null,D(d.item.genres,c=>(t(),s("span",Xn,v(c.genreName),1))),256)),(t(!0),s(U,null,D(d.item.categories,c=>(t(),s("span",Zn,v(c.categoryName),1))),256))])])])])],2),e("div",{class:le([I("formats-tab"),"tab-pane fade"]),id:"formats",role:"tabpanel","aria-labelledby":"formats-tab"},[e("div",er,[e("div",tr,[e("table",sr,[a[21]||(a[21]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",or,[(t(!0),s(U,null,D(d.item.formats,(c,Z)=>(t(),s("tr",ar,[e("td",lr,v(Z+1),1),e("td",null,v(c.formatName),1),e("td",null,v(c.serverUrl),1),e("td",null,v(c.path),1)]))),256))])])])])],2),e("div",{class:le([I("blankFrames-tab"),"tab-pane fade"]),id:"blankFrames",role:"tabpanel","aria-labelledby":"blankFrames-tab"},[e("div",nr,[e("div",null,[e("div",rr,[e("button",{onClick:a[11]||(a[11]=c=>u()),class:"btn btn-outline-primary btn-sm"},a[22]||(a[22]=[e("span",{class:"fas fa-fw fa-gear me-1"},null,-1),z("Process ")]))]),e("div",ir,[e("table",dr,[a[23]||(a[23]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Start"),e("th",null,"End"),e("th",null,"Duration")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.blankFrames,(c,Z)=>(t(),s("tr",{key:c.videoBlankFrameId},[e("td",null,v(Z+1),1),e("td",null,v(o(M).moment.utc(c.startInMillis).format("HH:mm:ss")),1),e("td",null,v(o(M).moment.utc(c.endInMillis).format("HH:mm:ss")),1),e("td",null,v(o(M).moment.utc(c.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,d.item.blankFrames.length>0]])])])])])],2),e("div",{class:le([I("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",ur,[e("div",cr,[e("table",mr,[a[24]||(a[24]=e("caption",null,"VOD Sources",-1)),a[25]||(a[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.vodSources,(c,Z)=>(t(),s("tr",{key:c.vodSourceId},[e("td",null,v(Z+1),1),e("td",null,[B(n,{to:`${f.urlViewVodSource}/${encodeURIComponent(c.vodSourceId)}/${o(h)()}`},{default:L(()=>[z(v(c.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,d.item.vodSources.length>0]])])])])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},pr=["disabled"],vr={class:"form-floating mb-2"},gr={key:0,class:"d-block invalid-feedback"},br={__name:"add",props:{urlView:{type:String,default:"/source-groups/view"},urlMain:{type:String,default:"/source-groups"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Group"}),H=i,p=fe({lookups:{},item:{name:null}}),x={item:{name:{required:te.withMessage("name is required.",oe),$autoDirty:!0,$lazy:!0}}},h=$e(x,p);de(async()=>{});const W=async()=>{const X=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const g=P.clone(X.item);await F.post("/api/v1/sourcegroups/",g).then(K=>{N.success("Add Source Group","Source group added.",{onClose:async()=>{const b=`${H.urlView}/${K.data}`;await G.push(b)}})})}catch(g){C.value=P.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{V.value=!1}};return(X,d)=>{const g=ee("router-link"),K=ee("PageHeader"),b=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(K,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:d[0]||(d[0]=I=>W()),class:"btn btn-primary"},d[2]||(d[2]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,pr),B(g,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(b,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[e("div",null,[e("div",vr,[E(e("input",{"onUpdate:modelValue":d[1]||(d[1]=I=>p.item.name=I),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Q,p.item.name]]),d[4]||(d[4]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",gr,[(t(!0),s(U,null,D(o(h).item.name.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):A("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yr={key:0,class:"d-flex justify-content-end"},$r=["disabled"],wr={key:0},hr={class:"row row-cols-1 row-cols-sm-2"},kr={class:"col"},_r={class:"form-floating mb-2"},Sr={key:0,class:"d-block invalid-feedback"},Tr={class:"col"},Mr={class:"form-floating mb-2"},Ir={key:0,class:"d-block invalid-feedback"},Cr={class:"row row-cols-sm-2"},xr={class:"col"},Vr={class:"form-floating mb-2"},Pr={class:"form-floating mb-2"},Or={key:0,class:"d-block invalid-feedback"},Ar={class:"form-floating mb-2"},Ur={key:0,class:"d-block invalid-feedback"},Hr={class:"col"},Dr={class:"form-floating mb-2"},We={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),H=i,p=fe({editorElementId:"editor",htmlContent:"",item:null}),x={item:{title:{required:te.withMessage("Title is required.",oe),$autoDirty:!0,$lazy:!0},eidr:{required:te.withMessage("eidr is required.",oe),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:te.withMessage("eidrPrefix is required.",oe),$autoDirty:!0,$lazy:!0}},htmlContent:{required:te.withMessage("Content is required.",oe),$autoDirty:!0,$lazy:!0}},h=$e(x,p);de(async()=>{await d()});const W=()=>{const K=p;var b=document.getElementById(K.editorElementId);b.innerHTML=K.htmlContent},X=K=>{const b=p;b.htmlContent=K.target.innerHTML;var I=document.getElementById(b.editorElementId);I.value=b.htmlContent},d=async()=>{const K=p;if(!V.value)try{V.value=!0,p.item=null,await F.get(`/api/v1/movies/${H.id}`).then(b=>{K.item=b.data,K.htmlContent=K.item.description}),W()}catch(b){C.value=P.getErrorMessageAsHtml(b)}finally{V.value=!1}},g=async()=>{const K=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const I=P.clone(K.item);I.description=K.htmlContent,await F.put("/api/v1/movies",I).then(m=>{N.success("Edit Movie","Movie edited",{onClose:async()=>{const S=`${H.urlView}/${H.id}`;await G.push(S)}})})}catch(I){C.value=P.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{V.value=!1}};return(K,b)=>{const I=ee("router-link"),m=ee("PageHeader"),S=ee("PageBody");return t(),s("div",null,[B(m,{"page-icon":"fas fa-fw fa-film",pageTitle:o(_),"header-break":"row row-cols-2 row-cols-sm-2"},{default:L(()=>[p.item?(t(),s("div",yr,[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:b[0]||(b[0]=T=>g()),class:"btn btn-primary"},b[7]||(b[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,$r),e("button",{onClick:d,class:"ms-2 btn btn-secondary"},b[8]||(b[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B(I,{to:`${H.urlView}/${H.id}`,class:"ms-1 btn btn-secondary"},{default:L(()=>b[9]||(b[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):A("",!0)]),_:1},8,["pageTitle"]),B(S,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[p.item?(t(),s("div",wr,[e("div",hr,[e("div",kr,[e("div",_r,[E(e("input",{"onUpdate:modelValue":b[1]||(b[1]=T=>p.item.eidrPrefix=T),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[Q,p.item.eidrPrefix]]),b[10]||(b[10]=e("label",{for:"title"},"Eidr Prefix",-1)),o(h).item.eidrPrefix.$error?(t(),s("div",Sr,[(t(!0),s(U,null,D(o(h).item.eidrPrefix.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):A("",!0)])]),e("div",Tr,[e("div",Mr,[E(e("input",{"onUpdate:modelValue":b[2]||(b[2]=T=>p.item.eidr=T),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[Q,p.item.eidr]]),b[11]||(b[11]=e("label",{for:"title"},"Eidr",-1)),o(h).item.eidr.$error?(t(),s("div",Ir,[(t(!0),s(U,null,D(o(h).item.eidr.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):A("",!0)])])]),e("div",Cr,[e("div",xr,[e("div",Vr,[E(e("input",{"onUpdate:modelValue":b[3]||(b[3]=T=>p.item.releaseYear=T),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[Q,p.item.releaseYear]]),b[12]||(b[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Pr,[E(e("input",{"onUpdate:modelValue":b[4]||(b[4]=T=>p.item.title=T),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[Q,p.item.title]]),b[13]||(b[13]=e("label",{for:"title"},"Title",-1)),o(h).item.title.$error?(t(),s("div",Or,[(t(!0),s(U,null,D(o(h).item.title.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):A("",!0)])])]),e("div",null,[e("div",Ar,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:b[5]||(b[5]=T=>X(T))},null,32),b[14]||(b[14]=e("label",{for:"editor"},"Content",-1)),o(h).htmlContent.$error?(t(),s("div",Ur,[(t(!0),s(U,null,D(o(h).htmlContent.$errors,T=>(t(),s("div",{key:T.$uid},v(T.$message),1))),128))])):A("",!0)])]),e("div",Hr,[e("div",Dr,[E(e("textarea",{"onUpdate:modelValue":b[6]||(b[6]=T=>p.item.metadata=T),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[Q,p.item.metadata]]),b[15]||(b[15]=e("label",{for:"title"},"Metadata",-1))])])])):A("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},Lr={components:{Page:We},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Er(i,f,_,V,k,R){const C=ee("Page");return t(),ce(C,{id:_.id,urlView:_.urlView},null,8,["id","urlView"])}const qr=Me(Lr,[["render",Er]]),Br={class:"ms-2"},Nr={class:"input-group"},Rr={class:"table-responsive border shadow-sm"},Fr={class:"table table-hover mb-0"},zr=["textContent"],Gr={key:0,class:"fas fa-fw fa-check-circle text-success"},jr="/api/v1/sourcegroups/search",Yr={__name:"index",props:{urlAdd:{type:String,default:"/source-groups/add"},urlView:{type:String,default:"/source-groups/view"}},setup(i){Se("$config");const _=ye().user,{appTitle:V,pageTitle:k,busy:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,security:p,filter:x,initializeFilter:h,getQuery:W,saveQuery:X,search:d,getRowNumber:g,setSelected:K,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Groups",cacheKey:`${_==null?void 0:_.userId}/source-groups/search`,baseUrl:jr,filter:{updateUrl:!0}});return de(async()=>{h(),await d()}),(I,m)=>{const S=ee("router-link"),T=ee("PageHeader"),u=ee("m-pagination"),r=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(T,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(k)},{default:L(()=>[B(S,{to:i.urlAdd,class:"btn btn-primary"},{default:L(()=>m[3]||(m[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Br,[e("div",Nr,[E(e("input",{"onUpdate:modelValue":m[0]||(m[0]=a=>o(x).query.criteria=a),onKeyup:m[1]||(m[1]=He(a=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria..."},null,544),[[Q,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:m[2]||(m[2]=a=>o(d)(1))},m[4]||(m[4]=[e("span",{class:"fas fa-fw fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(r,{errorMessage:o(F)},{default:L(()=>[e("div",Rr,[e("table",Fr,[m[5]||(m[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"# of Channel Outputs"),e("th",null,"# of Package Configurations")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(o(x).items,(a,n)=>(t(),s("tr",{key:a.sourceGroupId},[e("td",{textContent:v(o(g)(n)),class:"text-center"},null,8,zr),e("td",null,[B(S,{to:`${i.urlView}/${a.sourceGroupId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:L(()=>[a.arn?(t(),s("span",Gr)):A("",!0),z(" "+v(a.name),1)]),_:2},1032,["to"])]),e("td",null,v(a.channelOutputs),1),e("td",null,v(a.packageConfigurations),1)]))),128))]),_:1},512),[[Te,o(x).items.length>0]])])]),B(u,{filter:o(x),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Wr={key:0},Kr={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Jr={class:"nav-item",role:"presentation"},Qr={class:"nav-item",role:"presentation"},Xr={class:"nav-item",role:"presentation"},Zr={class:"tab-content",id:"myTabContent"},ei={class:"mt-2"},ti={class:"col"},si={class:"form-floating mb-2"},oi={class:"mt-2"},ai={class:"table-responsive border"},li={class:"table table-hover mb-0"},ni={class:"mt-2"},ri={class:"table-responsive border"},ii={class:"table table-hover mb-0"},di={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-groups"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const f=i,{appTitle:_,pageTitle:V,busy:k,isDirty:R,validations:C,infoMessage:G,warningMessage:F,errorMessage:P,router:N,axios:Y,utils:M,toasts:H,close:p,closeWithReturnUrl:x,generateReturnUrl:h,security:W}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Group"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null}),g=re();de(async()=>{await m(),g.value=M.getPageTab("sourceGroup")||"information-tab"});const K=u=>{M.setPageTab("sourceGroup",u),g.value=u},b=u=>u!==g.value?"":"active",I=u=>u!==g.value?"":"show active",m=async()=>{const u=d;if(!k.value)try{k.value=!0,P.value="",d.item=null;const r=`/api/v1/sourcegroups/${f.id}/`;await Y.get(r).then(a=>{u.item=a.data})}catch(r){P.value=M.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{if(!k.value)try{k.value=!0,P.value="";const u=`/api/v1/sourcegroups/${f.id}/`;await Y.delete(u).then(r=>{H.success("Delete Source Group","Source group was deleted.",{onClose:async()=>{const a=`${f.urlMain}/`;await N.push(a)}})})}catch(u){P.value=M.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{k.value=!1}},T=async()=>{await m()};return(u,r)=>{const a=ee("PageHeader"),n=ee("router-link"),$=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(a,{"page-icon":"fas fa-fw fa-warehouse",pageTitle:o(V)},{default:L(()=>[e("button",{onClick:r[0]||(r[0]=w=>S()),class:"ms-1 btn btn-warning"},r[7]||(r[7]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)])),e("button",{onClick:r[1]||(r[1]=w=>T()),class:"ms-2 btn btn-secondary"},r[8]||(r[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[2]||(r[2]=w=>o(x)(f.urlMain)),class:"btn btn-secondary ms-1"},r[9]||(r[9]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B($,{errorMessage:o(P)},{default:L(()=>[d.item?(t(),s("div",Wr,[e("div",null,[e("ul",Kr,[e("li",Jr,[e("button",{onClick:r[3]||(r[3]=w=>K("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Qr,[e("button",{onClick:r[4]||(r[4]=w=>K("channelOutputs-tab")),class:le([b("channelOutputs-tab"),"nav-link"]),id:"channelOutputs-tab","data-bs-toggle":"tab","data-bs-target":"#channelOutputs",type:"button",role:"tab","aria-controls":"channelOutputs","aria-selected":"false"}," Channel Outputs ",2)]),e("li",Xr,[e("button",{onClick:r[5]||(r[5]=w=>K("packageConfigurations-tab")),class:le([b("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)])]),e("div",Zr,[e("div",{class:le([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",ei,[e("div",ti,[e("div",si,[E(e("input",{"onUpdate:modelValue":r[6]||(r[6]=w=>d.item.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),r[10]||(r[10]=e("label",{for:"name"},"Name",-1))])])])],2),e("div",{class:le([I("channelOutputs-tab"),"tab-pane fade"]),id:"channelOutputs",role:"tabpanel","aria-labelledby":"channelOutputs-tab"},[e("div",oi,[e("div",ai,[e("table",li,[r[11]||(r[11]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Output Type")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.channelOutputs,(w,c)=>(t(),s("tr",{key:w.channelOutputId},[e("td",null,v(c+1),1),e("td",null,[B(n,{to:`${i.urlViewChannel}/${w.channelId}/${o(h)()}`},{default:L(()=>[z(v(w.manifestName),1)]),_:2},1032,["to"])]),e("td",null,v(w.outputType),1)]))),128))]),_:1},512),[[Te,d.item.channelOutputs.length>0]])])])])],2),e("div",{class:le([I("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",ni,[e("div",ri,[e("table",ii,[r[12]||(r[12]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"VOD Source"),e("th",null,"Path"),e("th",null,"Type")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.packageConfigurations,(w,c)=>(t(),s("tr",{key:w.packageConfigurationId},[e("td",null,v(c+1),1),e("td",null,[B(n,{to:`${i.urlViewVodSource}/${w.vodSourceId}/${o(h)()}`},{default:L(()=>[z(v(w.vodSource.name),1)]),_:2},1032,["to"])]),e("td",null,v(w.path),1),e("td",null,v(w.type),1)]))),128))]),_:1},512),[[Te,d.item.packageConfigurations.length>0]])])])])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},ui=["disabled"],ci={class:"form-floating mb-2"},mi={key:0,class:"d-block invalid-feedback"},fi={class:"form-floating mb-2"},pi={key:0,class:"d-block invalid-feedback"},vi={__name:"add",props:{urlView:{type:String,default:"/source-locations/view"},urlMain:{type:String,default:"/source-locations"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Source Location"}),H=i,p=fe({lookups:{},item:{name:null,httpConfigurationBaseUrl:null}}),x={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},httpConfigurationBaseUrl:{required:te.withMessage("HTTP Configuration Base Url is required.",oe),$autoDirty:!0,$lazy:!0}}},h=$e(x,p);de(async()=>{});const W=async()=>{const X=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const g=P.clone(X.item);await F.post("/api/v1/sourcelocations/",g).then(K=>{N.success("Add Source Location","Source location added.",{onClose:async()=>{const b=`${H.urlView}/${K.data}`;await G.push(b)}})})}catch(g){C.value=P.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{V.value=!1}};return(X,d)=>{const g=ee("router-link"),K=ee("PageHeader"),b=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(K,{"page-icon":"fas fa-fw fa-building",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:d[0]||(d[0]=I=>W()),class:"btn btn-primary"},d[3]||(d[3]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ui),B(g,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>d[4]||(d[4]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(b,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[e("div",null,[e("div",ci,[E(e("input",{"onUpdate:modelValue":d[1]||(d[1]=I=>p.item.name=I),type:"text",class:"form-control",id:"name",placeholder:"Name"},null,512),[[Q,p.item.name]]),d[5]||(d[5]=e("label",{for:"name"},"Name",-1)),o(h).item.name.$error?(t(),s("div",mi,[(t(!0),s(U,null,D(o(h).item.name.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):A("",!0)]),e("div",fi,[E(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=I=>p.item.httpConfigurationBaseUrl=I),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",placeholder:"HTTP Configuration Base Url",style:{height:"8rem"}},null,512),[[Q,p.item.httpConfigurationBaseUrl]]),d[6]||(d[6]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1)),o(h).item.httpConfigurationBaseUrl.$error?(t(),s("div",pi,[(t(!0),s(U,null,D(o(h).item.httpConfigurationBaseUrl.$errors,I=>(t(),s("div",{key:I.$uid},v(I.$message),1))),128))])):A("",!0)])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},gi={components:{Page:We},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function bi(i,f,_,V,k,R){const C=ee("Page");return t(),ce(C,{id:_.id,urlView:_.urlView},null,8,["id","urlView"])}const yi=Me(gi,[["render",bi]]),$i={class:"ms-1"},wi={class:"input-group"},hi={class:"table-responsive border shadow-sm"},ki={class:"table table-hover mb-0"},_i={class:"text-center"},Si=["textContent"],Ti={key:0,class:"fas fa-fw fa-check-circle text-success"},Mi={class:"text-center"},Ii=["onUpdate:modelValue"],Ci="/api/v1/sourcelocations/search",xi={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(i){Se("$config");const _=ye().user,{appTitle:V,pageTitle:k,busy:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,security:p,filter:x,initializeFilter:h,getQuery:W,saveQuery:X,search:d,getRowNumber:g,setSelected:K,isSelected:b}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Source Locations",cacheKey:`${_==null?void 0:_.userId}/source-locations/search`,baseUrl:Ci,filter:{updateUrl:!0}}),I=he(()=>{const T=x.value;return T&&T.items?T.items.filter(a=>a.selected):null});de(async()=>{h(),await d()});const m=async()=>{if(!(I.length<=0||!confirm("The selected Source Location(s) will be submitted to AWS MediaTailer. Are you sure you want to publish the selected Source Location(s)?"))&&!R.value){F.value=null;try{R.value=!0;const r={sourceLocationIds:I.value.map(a=>a.sourceLocationId)};await N.post("/api/v1/sourceLocations/publish/",r).then(a=>{M.success("Publish Source Location(s)","Source Location(s) was published.",{async onClose(){}})}),R.value=!1,await d()}catch(u){F.value=Y.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{R.value=!1}}},S=async()=>{if(!(I.length<=0||!confirm("The selected Source Location(s) will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected Source Location(s)?"))&&!R.value){F.value=null;try{R.value=!0;const r={sourceLocationIds:I.value.map(a=>a.sourceLocationId)};await N.post("/api/v1/sourceLocations/unpublish/",r).then(a=>{M.success("Unpublish Source Location(s)","Source Location(s) was inpublished.",{async onClose(){}})}),R.value=!1,await d()}catch(u){F.value=Y.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{R.value=!1}}};return(T,u)=>{const r=ee("router-link"),a=ee("PageHeader"),n=ee("m-pagination"),$=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(a,{"page-icon":"fas fa-fw fa-building",pageTitle:o(k)},{default:L(()=>[B(r,{to:i.urlAdd,class:"btn btn-primary ms-2"},{default:L(()=>u[3]||(u[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",$i,[e("div",wi,[E(e("input",{"onUpdate:modelValue":u[0]||(u[0]=w=>o(x).query.criteria=w),onKeyup:u[1]||(u[1]=He(w=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:u[2]||(u[2]=w=>o(d)(1))},u[4]||(u[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B($,{errorMessage:o(F)},{default:L(()=>[e("div",hi,[e("table",ki,[e("thead",null,[e("tr",null,[u[7]||(u[7]=e("td",{class:"text-center"},"#",-1)),u[8]||(u[8]=e("th",null,"Name",-1)),u[9]||(u[9]=e("th",null,"HTTP Configuration Base Url",-1)),e("td",_i,[I.value.length?(t(),s(U,{key:0},[e("button",{onClick:m,class:"btn btn-primary"},u[5]||(u[5]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:S,class:"btn btn-warning ms-1"},u[6]||(u[6]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):A("",!0)])])]),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(o(x).items,(w,c)=>(t(),s("tr",{key:w.sourceLocationId},[e("td",{textContent:v(o(g)(c)),class:"text-center"},null,8,Si),e("td",null,[B(r,{to:`${i.urlView}/${w.sourceLocationId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:L(()=>[w.arn?(t(),s("span",Ti)):A("",!0),z(" "+v(w.name),1)]),_:2},1032,["to"])]),e("td",null,v(w.httpConfigurationBaseUrl),1),e("td",Mi,[E(e("input",{"onUpdate:modelValue":Z=>w.selected=Z,type:"checkbox",class:"form-check-input"},null,8,Ii),[[Ue,w.selected]])])]))),128))]),_:1},512),[[Te,o(x).items.length>0]])])]),B(n,{filter:o(x),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Vi={key:0},Pi={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Oi={class:"nav-item",role:"presentation"},Ai={class:"nav-item",role:"presentation"},Ui={class:"nav-item",role:"presentation"},Hi={class:"tab-content",id:"myTabContent"},Di={class:"mt-2"},Li={class:"col"},Ei={class:"form-floating mb-2"},qi={class:"col"},Bi={class:"form-floating mb-2"},Ni={class:"mt-2"},Ri={class:"table-responsive border"},Fi={class:"table table-hover mb-0"},zi={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},Gi={class:"mt-2"},ji={class:"table-responsive border"},Yi={class:"table table-hover mb-0"},Wi={key:0,class:"fas fa-fw fa-check-circle text-success"},Ki={class:"badge bg-info"},Ji={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const f=i,{appTitle:_,pageTitle:V,busy:k,isDirty:R,validations:C,infoMessage:G,warningMessage:F,errorMessage:P,router:N,axios:Y,utils:M,toasts:H,close:p,closeWithReturnUrl:x,generateReturnUrl:h,security:W}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Source Location"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null}),g=re();de(async()=>{await m(),g.value=M.getPageTab("sourceLocation")||"information-tab"});const K=r=>{M.setPageTab("sourceLocation",r),g.value=r},b=r=>r!==g.value?"":"active",I=r=>r!==g.value?"":"show active",m=async()=>{const r=d;if(!k.value)try{k.value=!0,P.value="",d.item=null;const a=`/api/v1/sourcelocations/${f.id}/`;await Y.get(a).then(n=>{r.item=n.data})}catch(a){P.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{await m()},T=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!k.value){P.value=null;try{k.value=!0;const a={sourceLocationIds:[f.id]};await Y.post("/api/v1/sourcelocations/publish/",a).then(n=>{H.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),k.value=!1,await S()}catch(a){P.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}},u=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!k.value){P.value=null;try{k.value=!0;const a={sourceLocationIds:[f.id]};await Y.post("/api/v1/sourcelocations/unpublish/",a).then(n=>{H.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),k.value=!1,await S()}catch(a){P.value=M.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{k.value=!1}}};return(r,a)=>{const n=ee("PageHeader"),$=ee("router-link"),w=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(n,{"page-icon":"fas fa-fw fa-building",pageTitle:o(V)},{default:L(()=>[d.item?(t(),s(U,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:a[0]||(a[0]=c=>u()),class:"ms-1 btn btn-warning"},a[9]||(a[9]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:a[1]||(a[1]=c=>T()),class:"ms-1 btn btn-primary"},a[10]||(a[10]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):A("",!0),e("button",{onClick:a[2]||(a[2]=c=>S()),class:"ms-2 btn btn-secondary"},a[11]||(a[11]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:a[3]||(a[3]=c=>o(x)(f.urlMain)),class:"btn btn-secondary ms-1"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(w,{errorMessage:o(P)},{default:L(()=>[d.item?(t(),s("div",Vi,[e("div",null,[e("ul",Pi,[e("li",Oi,[e("button",{onClick:a[4]||(a[4]=c=>K("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",Ai,[e("button",{onClick:a[5]||(a[5]=c=>K("vodSources-tab")),class:le([b("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Ui,[e("button",{onClick:a[6]||(a[6]=c=>K("programs-tab")),class:le([b("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Hi,[e("div",{class:le([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Di,[e("div",Li,[e("div",Ei,[E(e("input",{"onUpdate:modelValue":a[7]||(a[7]=c=>d.item.name=c),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),a[13]||(a[13]=e("label",{for:"name"},"Name",-1))])]),e("div",qi,[e("div",Bi,[E(e("input",{"onUpdate:modelValue":a[8]||(a[8]=c=>d.item.httpConfigurationBaseUrl=c),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",readonly:""},null,512),[[Q,d.item.httpConfigurationBaseUrl]]),a[14]||(a[14]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:le([I("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Ni,[e("div",Ri,[e("table",Fi,[a[15]||(a[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.vodSources,(c,Z)=>(t(),s("tr",{key:c.vodSourceId},[e("td",null,v(Z+1),1),e("td",null,[c.arn?(t(),s("span",zi)):A("",!0),B($,{to:`${f.urlViewVodSource}/${encodeURIComponent(c.vodSourceId)}/${o(h)()}`},{default:L(()=>[z(v(c.name),1)]),_:2},1032,["to"])]),e("td",null,[B($,{to:`${f.urlViewVideo}/${encodeURIComponent(c.video.videoId)}/${o(h)()}`},{default:L(()=>[z(v(c.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,v(o(M).moment.utc(c.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[Te,d.item.vodSources.length>0]])])])])],2),e("div",{class:le([I("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Gi,[e("div",ji,[e("table",Yi,[a[17]||(a[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Channel"),e("th",null,"Name"),e("th",null,"Date Scheduled Start")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.programs,(c,Z)=>(t(),s("tr",{key:c.programId},[e("td",null,v(Z+1),1),e("td",null,[B($,{to:`${f.urlViewChannel}/${encodeURIComponent(c.channel.channelId)}/${o(h)()}`},{default:L(()=>[z(v(c.channel.name),1)]),_:2},1032,["to"])]),e("td",null,[c.arn?(t(),s("span",Wi)):A("",!0),z(" "+v(c.name)+" ",1),e("div",null," Start: "+v(o(M).moment.utc(c.startOffsetMillis).format("HH:mm:ss")),1),e("div",null," End: "+v(o(M).moment.utc(c.endOffsetMillis).format("HH:mm:ss")),1)]),e("td",null,[z(v(o(M).moment(c.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",Ki,v(o(M).moment(c.dateScheduledStart).fromNow()),1)])]),a[16]||(a[16]=e("td",null,null,-1))]))),128))]),_:1},512),[[Te,d.item.programs.length>0]])])])])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Qi=["disabled"],Xi={class:"col"},Zi={class:"form-floating mb-2"},ed={key:0,class:"d-block invalid-feedback"},td={class:"row row-cols-1 row-cols-sm-2"},sd={class:"col"},od={class:"form-floating mb-2"},ad=["value"],ld={key:0,class:"d-block invalid-feedback"},nd={class:"col"},rd={class:"form-floating mb-2"},id=["readonly"],dd=["value"],ud={key:0,class:"d-block invalid-feedback"},cd={key:0},md={class:"d-flex flex-row justify-content-between"},fd={key:0,class:"d-inline invalid-feedback"},pd={class:"table-responsive border mt-1"},vd={class:"table mb-0 caption-top"},gd={class:"align-middle"},bd=["onUpdate:modelValue"],yd=["value"],$d=["onUpdate:modelValue"],wd=["value"],hd=["onClick"],kd={__name:"add",props:{videoId:{type:String},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,route:F,axios:P,utils:N,toasts:Y,close:M,closeWithReturnUrl:H,security:p}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source"}),x=i,h=fe({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),W=(a,n,$)=>a.length>0,X={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",W),$each:te.forEach({path:{required:te.withMessage("Path is required.",oe)},sourceGroupId:{required:te.withMessage("Source Group is required.",oe)}}),$autoDirty:!0,$lazy:!0}}},d=$e(X,h);de(async()=>{await g(),await K()});const g=async()=>{try{await P.get("/api/v1/sourcegroups/lookup/").then(n=>{h.lookups.sourceGroups=n.data})}catch(a){C.value=N.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},K=async()=>{try{if(await P.get("/api/v1/sourcelocations/lookup/").then(n=>{h.lookups.sourceLocations=n.data}),h.lookups.sourceLocations.length===1){const n=h.lookups.sourceLocations[0];h.selected.sourceLocation=n,await b()}}catch(a){C.value=N.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},b=async()=>{const a=h.selected.sourceLocation;h.item.sourceLocationId=a.id,await I(a.baseUrl)},I=async a=>{try{const n=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await P.get(n).then(w=>{h.lookups.videos=w.data,h.lookups.videos.length===1&&(h.item.videoId=h.lookups.videos[0].id)});const $=F.query.videoId;if($){const w=h.lookups.videos.find(c=>c.id==$);w&&(h.selected.video=w,await m())}}catch(n){C.value=N.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},m=async()=>{h.item.videoId=h.selected.video.id,await S(h.item.videoId)},S=async a=>{try{const n=`/api/v1/videos/${a}/formats`;await P.get(n).then($=>{h.selected.video.formats=$.data})}catch(n){C.value=N.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},T=async()=>{const a=h;if(V.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const $=N.clone(a.item),w=a.item.packageConfigurations.filter(c=>c.selectedFormat&&c.sourceGroupId);w.forEach(c=>{const Z=c.selectedFormat;c.path=Z.path,c.format=Z.format,delete c.selectedFormat}),$.packageConfigurations=w,delete $.video,await P.post("/api/v1/vodSources/",$).then(c=>{debugger;Y.success("Add VOD Source","VOD source added",{onClose:async()=>{const Z=`${x.urlView}/${c.data}`;await G.push(Z)}})})}catch($){C.value=N.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{V.value=!1}},u=()=>{const a={sourceGroupId:null,selectedFormat:null},n=h.selected.video;if(n){const $=n.formats.find(w=>w.formatName==="HLS");a.path=`${$.serverUrl}${$.path}`}h.item.packageConfigurations.push(a)},r=a=>{h.item.packageConfigurations.splice(a,1)};return(a,n)=>{const $=ee("PageHeader"),w=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B($,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(d).$dirty&&o(d).$invalid,onClick:n[0]||(n[0]=c=>T()),class:"btn btn-primary"},n[6]||(n[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qi),e("button",{onClick:n[1]||(n[1]=c=>o(H)(x.urlMain)),class:"btn btn-secondary ms-1"},n[7]||(n[7]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(w,{errorMessage:o(C),vuelidate:o(d)},{default:L(()=>[e("div",null,[e("div",Xi,[e("div",Zi,[E(e("input",{"onUpdate:modelValue":n[2]||(n[2]=c=>h.item.name=c),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,h.item.name]]),n[8]||(n[8]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(d).item.name.$error?(t(),s("div",ed,[(t(!0),s(U,null,D(o(d).item.name.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):A("",!0)])]),e("div",td,[e("div",sd,[e("div",od,[E(e("select",{"onUpdate:modelValue":n[3]||(n[3]=c=>h.selected.sourceLocation=c),onChange:n[4]||(n[4]=c=>b()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,D(h.lookups.sourceLocations,c=>(t(),s("option",{value:c},v(c.name),9,ad))),256))],544),[[ue,h.selected.sourceLocation]]),n[9]||(n[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(d).item.sourceLocationId.$error?(t(),s("div",ld,[(t(!0),s(U,null,D(o(d).item.sourceLocationId.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):A("",!0)])]),e("div",nd,[e("div",rd,[E(e("select",{"onUpdate:modelValue":n[5]||(n[5]=c=>h.selected.video=c),onChange:m,class:"form-select",id:"videoId",readonly:h.item.packageConfigurations.length>0},[(t(!0),s(U,null,D(h.lookups.videos,c=>(t(),s("option",{value:c},v(c.name),9,dd))),256))],40,id),[[ue,h.selected.video]]),n[10]||(n[10]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(d).item.videoId.$error?(t(),s("div",ud,[(t(!0),s(U,null,D(o(d).item.videoId.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):A("",!0)])])]),h.item.videoId?(t(),s("div",cd,[e("div",md,[e("fieldset",null,[e("legend",null,[n[12]||(n[12]=z(" Package Configurations ")),o(d).item.packageConfigurations.$error?(t(),s("span",fd,n[11]||(n[11]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):A("",!0)])]),e("button",{onClick:u,class:"btn btn-outline-primary"},n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Package Configuration ")]))]),e("div",pd,[e("table",vd,[n[15]||(n[15]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Type"),e("th",null,"Source Group"),e("th")])],-1)),e("tbody",gd,[(t(!0),s(U,null,D(h.item.packageConfigurations,(c,Z)=>(t(),s("tr",null,[e("td",null,v(Z+1),1),e("td",null,[E(e("select",{"onUpdate:modelValue":J=>c.selectedFormat=J,class:"form-select",id:"videoId"},[(t(!0),s(U,null,D(h.selected.video.formats,J=>(t(),s("option",{value:J},v(J.path),9,yd))),256))],8,bd),[[ue,c.selectedFormat]]),o(d).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},D(o(d).item.packageConfigurations.$each.$response.$errors[Z].path,J=>(t(),s("div",{key:J,class:"d-block invalid-feedback"},v(J.$message),1))),128)):A("",!0)]),e("td",null,[c.selectedFormat?(t(),s(U,{key:0},[z(v(c.selectedFormat.formatName),1)],64)):A("",!0)]),e("td",null,[e("div",null,[E(e("select",{"onUpdate:modelValue":J=>c.sourceGroupId=J,class:"form-select",id:"sourceGroupId"},[(t(!0),s(U,null,D(h.lookups.sourceGroups,J=>(t(),s("option",{value:J.id},v(J.name),9,wd))),256))],8,$d),[[ue,c.sourceGroupId]]),o(d).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},D(o(d).item.packageConfigurations.$each.$response.$errors[Z].path,J=>(t(),s("div",{key:J,class:"d-block invalid-feedback"},v(J.$message),1))),128)):A("",!0)])]),e("td",null,[e("button",{onClick:J=>r(Z),class:"btn btn-outline-warning"},n[14]||(n[14]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,hd)])]))),256))])])])])):A("",!0)])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},_d=["disabled"],Sd={key:0},Td={class:"col"},Md={class:"form-floating mb-2"},Id={key:0,class:"d-block invalid-feedback"},Cd={class:"row row-cols-1 row-cols-sm-2"},xd={class:"col"},Vd={class:"form-floating mb-2"},Pd=["value"],Od={key:0,class:"d-block invalid-feedback"},Ad={class:"col"},Ud={class:"form-floating mb-2"},Hd=["disabled"],Dd=["value"],Ld={key:0,class:"d-block invalid-feedback"},Ed={key:0},qd={class:"d-flex flex-row justify-content-between mt-3"},Bd={key:0,class:"d-inline invalid-feedback"},Nd={class:"table-responsive border mt-1"},Rd={class:"table mb-0 caption-top"},Fd={class:"input-group mb-1"},zd=["onUpdate:modelValue"],Gd=["onUpdate:modelValue"],jd=["value"],Yd=["onUpdate:modelValue"],Wd=["onClick"],Kd={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit VOD Source"}),H=i,p=fe({lookups:{sourceLocations:[],sourceGroups:[]},selected:{sourceLocation:null,video:null},item:{name:null,videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),x=(a,n,$)=>a.length>0,h={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},videoId:{required:te.withMessage("Video is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("Source Locaton is required.",oe),$autoDirty:!0,$lazy:!0},packageConfigurations:{packageConfigurationRequired:te.withMessage("PackageConfigurations is required.",x),$each:te.forEach({path:{required:te.withMessage("Path is required.",oe)},sourceGroupId:{required:te.withMessage("Source Group is required.",oe)}})}}},W=$e(h,p);de(async()=>{await X(),await g(),await K()});const X=async()=>{await d()},d=async()=>{const a=p;if(!V.value)try{V.value=!0,C.value="",p.item=null;const n=`/api/v1/vodsources/${H.id}/`;await F.get(n).then($=>{a.item=$.data;const w=a.item,c=P.moment.utc(a.item.video.durationInMillis).format("HH:mm:ss");w.video.duration=c})}catch(n){C.value=P.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{V.value=!1}},g=async()=>{try{await F.get("/api/v1/sourcegroups/lookup/").then(n=>{p.lookups.sourceGroups=n.data})}catch(a){C.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},K=async()=>{try{if(await F.get("/api/v1/sourcelocations/lookup/").then(n=>{p.lookups.sourceLocations=n.data}),p.lookups.sourceLocations.length>0){const n=p.lookups.sourceLocations.find($=>$.id===p.item.sourceLocationId);p.selected.sourceLocation=n,await b()}}catch(a){C.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},b=async()=>{const a=p.selected.sourceLocation;p.item.sourceLocationId=a.id,await I(a.baseUrl)},I=async a=>{try{const n=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(a)}`;await F.get(n).then($=>{if(p.lookups.videos=$.data,p.lookups.videos.length>0){const w=p.lookups.videos.find(c=>c.id==p.item.videoId);p.selected.video=w}})}catch(n){C.value=P.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},m=async()=>{p.item.videoId=p.selected.video.id,await S(p.item.videoId)},S=async a=>{try{const n=`/api/v1/videos/${a}/formats`;await F.get(n).then($=>{p.selected.video.formats=$.data;debugger})}catch(n){C.value=P.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{}},T=async()=>{const a=p;if(V.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const $=P.clone(a.item);$.videoId=p.selected.video.id,delete $.video,await F.put("/api/v1/vodsources/",$).then(w=>{N.success("Edit VOD Source","VOD source edited.",{onClose:async()=>{const c=`${H.urlView}/${H.id}`;await G.push(c)}})})}catch($){C.value=P.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{V.value=!1}},u=()=>{debugger;const a={path:"",sourceGroupId:null,type:"HLS"},n=p.item.video;if(n){const $=n.formats.find(w=>w.formatName==="HLS");debugger;a.path=`${$.serverUrl}${$.path}`}p.item.packageConfigurations.push(a)},r=a=>{p.item.packageConfigurations.splice(a,1)};return(a,n)=>{const $=ee("router-link"),w=ee("PageHeader"),c=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(w,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:n[0]||(n[0]=Z=>T()),class:"btn btn-primary"},n[6]||(n[6]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,_d),e("button",{onClick:n[1]||(n[1]=Z=>X()),class:"btn btn-secondary ms-2"},n[7]||(n[7]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B($,{to:`${i.urlView}/${i.id}`,class:"btn btn-secondary ms-1"},{default:L(()=>n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(c,{errorMessage:o(C),vuelidate:o(W)},{default:L(()=>[p.item?(t(),s("div",Sd,[e("div",Td,[e("div",Md,[E(e("input",{"onUpdate:modelValue":n[2]||(n[2]=Z=>p.item.name=Z),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,p.item.name]]),n[9]||(n[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",Id,[(t(!0),s(U,null,D(o(W).item.name.$errors,Z=>(t(),s("div",{key:Z.$uid},v(Z.$message),1))),128))])):A("",!0)])]),e("div",Cd,[e("div",xd,[e("div",Vd,[E(e("select",{"onUpdate:modelValue":n[3]||(n[3]=Z=>p.selected.sourceLocation=Z),onChange:n[4]||(n[4]=Z=>b()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,D(p.lookups.sourceLocations,Z=>(t(),s("option",{value:Z},v(Z.name),9,Pd))),256))],544),[[ue,p.selected.sourceLocation]]),n[10]||(n[10]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",Od,[(t(!0),s(U,null,D(o(W).item.sourceLocationId.$errors,Z=>(t(),s("div",{key:Z.$uid},v(Z.$message),1))),128))])):A("",!0)])]),e("div",Ad,[e("div",Ud,[E(e("select",{"onUpdate:modelValue":n[5]||(n[5]=Z=>p.selected.video=Z),onChange:m,class:"form-select",id:"videoId",disabled:p.item.packageConfigurations.length>0},[(t(!0),s(U,null,D(p.lookups.videos,Z=>(t(),s("option",{value:Z},v(Z.name),9,Dd))),256))],40,Hd),[[ue,p.selected.video]]),n[11]||(n[11]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),o(W).item.videoId.$error?(t(),s("div",Ld,[(t(!0),s(U,null,D(o(W).item.videoId.$errors,Z=>(t(),s("div",{key:Z.$uid},v(Z.$message),1))),128))])):A("",!0)])])]),p.item.videoId?(t(),s("div",Ed,[e("div",qd,[e("div",null,[e("h5",null,[n[13]||(n[13]=z(" Package Configurations ")),o(W).item.packageConfigurations.$error?(t(),s("span",Bd,n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-exclamation-triangle text-warning"},null,-1)]))):A("",!0)])]),e("button",{onClick:u,class:"btn btn-outline-primary"},n[14]||(n[14]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Package Configuration ")]))]),e("div",Nd,[e("table",Rd,[n[17]||(n[17]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(p.item.packageConfigurations,(Z,J)=>(t(),s("tr",null,[e("td",null,v(J+1),1),e("td",null,[e("div",Fd,[E(e("input",{"onUpdate:modelValue":y=>Z.path=y,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,zd),[[Q,Z.path]])]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},D(o(W).item.packageConfigurations.$each.$response.$errors[J].path,y=>(t(),s("div",{key:y,class:"d-block invalid-feedback"},v(y.$message),1))),128)):A("",!0)]),e("td",null,[e("div",null,[E(e("select",{"onUpdate:modelValue":y=>Z.sourceGroupId=y,class:"form-select",id:"sourceGroupId"},[(t(!0),s(U,null,D(p.lookups.sourceGroups,y=>(t(),s("option",{value:y.id},v(y.name),9,jd))),256))],8,Gd),[[ue,Z.sourceGroupId]]),o(W).item.packageConfigurations.$each.$response?(t(!0),s(U,{key:0},D(o(W).item.packageConfigurations.$each.$response.$errors[J].path,y=>(t(),s("div",{key:y,class:"d-block invalid-feedback"},v(y.$message),1))),128)):A("",!0)])]),e("td",null,[E(e("select",{"onUpdate:modelValue":y=>Z.type=y,class:"form-select",id:"type"},n[15]||(n[15]=[e("option",{value:"HLS"}," HLS ",-1),e("option",{value:"DASH"}," DASH ",-1)]),8,Yd),[[ue,Z.type]])]),e("td",null,[e("button",{onClick:y=>r(J),class:"btn btn-outline-warning"},n[16]||(n[16]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Wd)])]))),256))])])])])):A("",!0)])):A("",!0)]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Jd={class:"ms-2"},Qd={class:"input-group"},Xd=["value"],Zd={class:"ms-1"},eu={class:"input-group"},tu=["value"],su={class:"ms-1"},ou={class:"input-group"},au={class:"ms-1"},lu={class:"input-group"},nu={class:"table-responsive border shadow-sm"},ru={class:"table table-hover mb-0"},iu={class:"text-center"},du=["textContent"],uu={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},cu={class:"badge bg-primary me-1"},mu={key:0},fu={class:"badge bg-info me-1"},pu={class:"d-flex flex-row justify-content-start"},vu={class:"mt-1"},gu=["src"],bu={class:"ms-2"},yu={class:"small"},$u={class:"badge bg-secondary me-1"},wu={class:"text-center"},hu=["onUpdate:modelValue"],ku="/api/v1/vodsources/search",_u={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(i){Se("$config");const _=ye().user,{appTitle:V,pageTitle:k,busy:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,closeWithReturnUrl:p,generateReturnUrl:x,security:h,filter:W,initializeFilter:X,getQuery:d,saveQuery:g,search:K,getRowNumber:b,setSelected:I,isSelected:m}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"VOD Sources",cacheKey:`${_==null?void 0:_.userId}/vod-sources/search`,baseUrl:ku,filter:{updateUrl:!0,lookups:{sourceLocations:[],genres:[]},query:{type:0,sourceLocationId:""}},initializeFilter:($,w)=>{const c=$.value,Z=new URLSearchParams(window.location.search),J=JSON.parse(localStorage.getItem(w))||{};c.query.category=Z.get("category")||J.category||c.query.category||0,c.query.genre=Z.get("genre")||J.genre||c.query.genre||0,c.query.sourceLocationId=Z.get("slid")||J.sourceLocationId||c.query.sourceLocationId||""},getQuery:$=>["?c=",encodeURIComponent($.query.criteria),"&p=",$.pageIndex,"&s=",$.pageSize,"&sf=",$.sortField,"&so=",$.sortOrder,"&category=",$.query.category,"&genre=",$.query.genre,"&slid=",$.query.sourceLocationId].join(""),saveQuery:($,w)=>{localStorage.setItem(w,JSON.stringify({criteria:$.query.criteria,pageIndex:$.pageIndex,pageSize:$.pageSize,sortField:$.sortField,sortOrder:$.sortOrder,visible:$.visible,category:$.query.category,genre:$.query.genre,sourceLocationId:$.query.sourceLocationId}))}}),S=he(()=>{const $=W.value;return $&&$.items?$.items.filter(Z=>Z.selected):[]});de(async()=>{X(),await a(),await n(),await K()});const T=async()=>{if(!(S.length<=0||!confirm("The selected VODs will be submitted to AWS MediaTailer. Are you sure you want to publish the selected VODs?"))&&!R.value){F.value=null;try{R.value=!0;const c={vodSourceIds:S.value.map(Z=>Z.vodSourceId)};await N.post("/api/v1/vodsources/publish/",c).then(Z=>{M.success("Publish VODs","VODs was published.",{async onClose(){}})}),R.value=!1,await K()}catch(w){F.value=Y.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{R.value=!1}}},u=async()=>{if(!(S.length<=0||!confirm("The selected VODs will be removed frpm AWS MediaTailer. Are you sure you want to unpublish the selected VODs?"))&&!R.value){F.value=null;try{R.value=!0;const c={vodSourceIds:S.value.map(Z=>Z.vodSourceId)};await N.post("/api/v1/vodsources/unpublish/",c).then(Z=>{M.success("Unpublish VODs","VODs was inpublished.",{async onClose(){}})}),R.value=!1,await K()}catch(w){F.value=Y.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{R.value=!1}}},r=()=>{const $=W.value.items;if($.length<1)return;const w=!$[0].selected;W.value.items.forEach(c=>{c.selected=w})},a=async()=>{try{await N.get("/api/v1/sourcelocations/lookup/").then(w=>{W.value.lookups.sourceLocations=w.data})}catch($){F.value=Y.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},n=async()=>{try{await N.get("/api/v1/lookups/video-genres/").then($=>{const w=$.data;W.value.lookups.genres=w})}catch($){F.value=Y.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return re(!1),($,w)=>{const c=ee("router-link"),Z=ee("PageHeader"),J=ee("m-pagination"),y=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(Z,{"page-icon":"fas fa-fw fa-tags",pageTitle:o(k)},{default:L(()=>[B(c,{to:i.urlAdd,class:"btn btn-primary"},{default:L(()=>w[6]||(w[6]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Jd,[e("div",Qd,[w[8]||(w[8]=e("span",{class:"input-group-text fw-bold"},"Source",-1)),E(e("select",{"onUpdate:modelValue":w[0]||(w[0]=l=>o(W).query.sourceLocationId=l),class:"form-select"},[w[7]||(w[7]=e("option",{value:""},"All",-1)),(t(!0),s(U,null,D(o(W).lookups.sourceLocations,l=>(t(),s("option",{value:l.id},v(l.name),9,Xd))),256))],512),[[ue,o(W).query.sourceLocationId]])])]),e("div",Zd,[e("div",eu,[w[9]||(w[9]=e("span",{class:"input-group-text fw-bold"},"Genre",-1)),E(e("select",{"onUpdate:modelValue":w[1]||(w[1]=l=>o(W).query.genre=l),class:"form-select"},[(t(!0),s(U,null,D(o(W).lookups.genres,l=>(t(),s("option",{value:l.id},v(l.name),9,tu))),256))],512),[[ue,o(W).query.genre]])])]),e("div",su,[e("div",ou,[w[11]||(w[11]=e("span",{class:"input-group-text fw-bold"},"Category",-1)),E(e("select",{"onUpdate:modelValue":w[2]||(w[2]=l=>o(W).query.category=l),class:"form-select"},w[10]||(w[10]=[e("option",{value:"0"},"All",-1),e("option",{value:"1"},"Ad Break",-1),e("option",{value:"2"},"Filler Slate",-1),e("option",{value:"3"},"Program Content",-1)]),512),[[ue,o(W).query.category]])])]),e("div",au,[e("div",lu,[E(e("input",{"onUpdate:modelValue":w[3]||(w[3]=l=>o(W).query.criteria=l),onKeyup:w[4]||(w[4]=He(l=>o(K)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(W).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:w[5]||(w[5]=l=>o(K)(1))},w[12]||(w[12]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(y,{errorMessage:o(F)},{default:L(()=>[e("div",nu,[e("table",ru,[e("thead",null,[e("tr",null,[w[16]||(w[16]=e("td",{class:"text-center"},"#",-1)),w[17]||(w[17]=e("th",null,"Name",-1)),w[18]||(w[18]=e("th",null,"Video Title",-1)),e("th",iu,[S.value.length?(t(),s(U,{key:0},[e("button",{onClick:T,class:"btn btn-sm btn-primary"},w[13]||(w[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])),e("button",{onClick:u,class:"btn btn-sm btn-warning ms-1"},w[14]||(w[14]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))],64)):A("",!0),e("button",{onClick:r,class:"btn btn-sm btn-outline-primary ms-2"},w[15]||(w[15]=[e("span",{class:"fas fa-fw fa-check-double"},null,-1)]))])])]),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(o(W).items,(l,q)=>(t(),s("tr",{key:l.vodSourceId},[e("td",{textContent:v(o(b)(q)),class:"text-center"},null,8,du),e("td",null,[B(c,{to:`${i.urlView}/${l.vodSourceId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:L(()=>[l.arn?(t(),s("span",uu)):A("",!0),z(v(l.name),1)]),_:2},1032,["to"]),e("div",null,[(t(!0),s(U,null,D(l.video.categories,se=>(t(),s("div",null,[e("span",cu,v(se.categoryName),1)]))),256)),l.video.genres.length>0?(t(),s("div",mu,[(t(!0),s(U,null,D(l.video.genres,se=>(t(),s("span",fu,v(se.genreName),1))),256))])):A("",!0)])]),e("td",null,[e("div",pu,[e("div",null,[l.video.thumbnails.length>0?(t(!0),s(U,{key:0},D(l.video.thumbnails,se=>(t(),s("div",vu,[e("img",{src:se.url,class:"img-fuild border",width:"128"},null,8,gu)]))),256)):A("",!0)]),e("div",bu,[B(c,{to:`${i.urlViewVideo}/${encodeURIComponent(l.video.videoId)}/${o(x)()}`,class:"text-decoration-none"},{default:L(()=>[z(v(l.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",yu,v(o(Y).moment.utc(l.video.durationInMillis).format("HH:mm:ss")),1)]),l.video.formats.length>0?(t(!0),s(U,{key:0},D(l.video.formats,se=>(t(),s("span",$u,v(se.formatName),1))),256)):A("",!0)])])]),e("td",wu,[E(e("input",{"onUpdate:modelValue":se=>l.selected=se,type:"checkbox",class:"form-check-input"},null,8,hu),[[Ue,l.selected]])])]))),128))]),_:1},512),[[Te,o(W).items.length>0]])])]),B(J,{filter:o(W),search:o(K),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Su=["id"],Tu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Mu={class:"modal-content"},Iu={class:"modal-header"},Cu={class:"modal-title"},xu={class:"modal-body"},Vu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Pu=["innerHTML"],Ou={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Au={class:"container"},Uu={class:"col"},Hu={class:"form-floating mb-2"},Du=["value"],Lu={key:0,class:"d-block invalid-feedback"},Eu={class:"col"},qu={class:"form-floating mb-2"},Bu={key:0,class:"d-block invalid-feedback"},Nu={class:"col"},Ru={class:"form-floating mb-2"},Fu={key:0,class:"d-block invalid-feedback"},zu={class:"modal-footer"},Gu=["disabled"],ju={__name:"_addPackageConfiguration",emits:["refresh"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add VOD Source Package Configuration"}),W=_;re();const X=re("modalAddChannelOutput"),d=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,vodSourceId:null,path:null,type:null}}),g={item:{sourceGroupId:{required:te.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("VOD Source is required.",oe),$autoDirty:!0,$lazy:!0},path:{required:te.withMessage("Path is required.",oe),$autoDirty:!0,$lazy:!0},type:{required:te.withMessage("Type is required.",oe),$autoDirty:!0,$lazy:!0}}},K=$e(g,d);de(async()=>{K.value.$reset()});const b=async()=>{await I()},I=async()=>{try{await M.get("/api/v1/sourceGroups/lookup/").then(r=>{d.lookups.sourceGroups=r.data,d.lookups.sourceGroups.length===1&&(d.item.sourceGroupId=d.lookups.sourceGroups[0].id)})}catch(u){N.value=H.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{}},m=async u=>{const r=d;G.value.clear(),N.value="",r.lookups={sourceGroups:[]},r.item={sourceGroupId:null,vodSourceId:u,path:null,type:null},await b(),K.value.$reset();var a=document.getElementById(X.value),n=ke.getOrCreateInstance(a);n.show()},S=async()=>{var u=document.getElementById(X.value),r=ke.getOrCreateInstance(u);r.hide(),W("refresh")},T=async()=>{const u=d;if(R.value)return;const r=await K.value.$validate();debugger;if(!r){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const a=u.item;await M.post("/api/v1/vodSources/package-configurations/",a).then(n=>{p.success("Add VOD Source Package Configuration","VOD Source package configuration added.")}),await S()}catch(a){N.value=H.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:m,close:S}),(u,r)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Tu,[e("div",Mu,[e("div",Iu,[e("h5",Cu,[r[5]||(r[5]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:r[0]||(r[0]=a=>S()),"aria-label":"Close"})]),e("div",xu,[o(N)?(t(),s("div",Vu,[r[6]||(r[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Pu)])):A("",!0),o(G).size>0?(t(),s("div",Ou,[r[7]||(r[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),a=>(t(),s("li",null,v(a),1))),256))])])):A("",!0),e("div",Au,[e("div",Uu,[e("div",Hu,[E(e("select",{"onUpdate:modelValue":r[1]||(r[1]=a=>d.item.sourceGroupId=a),class:"form-select",id:"sourceGroupId"},[(t(!0),s(U,null,D(d.lookups.sourceGroups,a=>(t(),s("option",{value:a.id},v(a.name),9,Du))),256))],512),[[ue,d.item.sourceGroupId]]),r[8]||(r[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(K).item.sourceGroupId.$error?(t(),s("div",Lu,[(t(!0),s(U,null,D(o(K).item.sourceGroupId.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):A("",!0)])]),e("div",Eu,[e("div",qu,[E(e("select",{"onUpdate:modelValue":r[2]||(r[2]=a=>d.item.type=a),class:"form-select",id:"type"},r[9]||(r[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,d.item.type]]),r[10]||(r[10]=e("label",{for:"type",class:"small fw-bold"},"Type",-1)),o(K).item.type.$error?(t(),s("div",Bu,[(t(!0),s(U,null,D(o(K).item.type.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):A("",!0)])]),e("div",Nu,[e("div",Ru,[E(e("input",{"onUpdate:modelValue":r[3]||(r[3]=a=>d.item.path=a),class:"form-control",id:"path"},null,512),[[Q,d.item.path]]),r[11]||(r[11]=e("label",{for:"path",class:"small fw-bold"},"Path",-1)),o(K).item.path.$error?(t(),s("div",Fu,[(t(!0),s(U,null,D(o(K).item.path.$errors,a=>(t(),s("div",{key:a.$uid},v(a.$message),1))),128))])):A("",!0)])])])]),e("div",zu,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:r[4]||(r[4]=a=>T()),class:"btn btn-primary",type:"button"},r[12]||(r[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Gu),r[13]||(r[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Su))}},Yu=["id"],Wu={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Ku={class:"modal-content"},Ju={class:"modal-header"},Qu={class:"modal-title"},Xu={class:"modal-body"},Zu={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ec=["innerHTML"],tc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},sc={class:"container"},oc={class:"col"},ac={class:"form-floating mb-2"},lc={class:"col"},nc={class:"form-floating mb-2"},rc={key:0,class:"d-block invalid-feedback"},ic={class:"col"},dc={class:"form-floating mb-2"},uc={key:0,class:"d-block invalid-feedback"},cc={class:"col"},mc={class:"form-floating mb-2"},fc={key:0,class:"d-block invalid-feedback"},pc={class:"modal-footer"},vc=["disabled"],gc={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Vod Source Playback Configuration"}),W=_,X=re(),d=re("modalAddPlaybackConfiguration"),g=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),K={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},b=$e(K,g);de(async()=>{b.value.$reset()});const I=async(T,u)=>{X.value=T;const r=g;G.value.clear(),N.value="";const a=u,n=a.lastIndexOf("/"),$=a.substring(0,n),w="ad_campaign_"+a.substring(n+1).replace(".","_");r.item={name:w,originalVideoContentSourceUrl:u,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},b.value.$reset();var c=document.getElementById(d.value),Z=ke.getOrCreateInstance(c);Z.show()},m=async()=>{var T=document.getElementById(d.value),u=ke.getOrCreateInstance(T);u.hide(),W("refresh")},S=async()=>{const T=g;if(R.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const r=T.item;r.vodSourceId=X.value,await M.post("/api/v1/playbackconfigurations/vodsource",r).then(a=>{p.success("Add Vod Source Playback Configuration","Vod Source playback configuration added.",{async onClose(){}})}),await m()}catch(r){N.value=H.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:I,close:m}),(T,u)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Wu,[e("div",Ku,[e("div",Ju,[e("h5",Qu,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=r=>m()),"aria-label":"Close"})]),e("div",Xu,[o(N)?(t(),s("div",Zu,[u[7]||(u[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,ec)])):A("",!0),o(G).size>0?(t(),s("div",tc,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),r=>(t(),s("li",null,v(r),1))),256))])])):A("",!0),e("div",sc,[e("div",oc,[e("div",ac,[E(e("input",{"onUpdate:modelValue":u[1]||(u[1]=r=>g.item.originalVideoContentSourceUrl=r),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[Q,g.item.originalVideoContentSourceUrl]]),u[9]||(u[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",lc,[e("div",nc,[E(e("input",{"onUpdate:modelValue":u[2]||(u[2]=r=>g.item.name=r),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),u[10]||(u[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",rc,[(t(!0),s(U,null,D(o(b).item.name.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):A("",!0)])]),e("div",ic,[e("div",dc,[E(e("input",{"onUpdate:modelValue":u[3]||(u[3]=r=>g.item.videoContentSourceUrl=r),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Q,g.item.videoContentSourceUrl]]),u[11]||(u[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),u[12]||(u[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(b).item.videoContentSourceUrl.$error?(t(),s("div",uc,[(t(!0),s(U,null,D(o(b).item.videoContentSourceUrl.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):A("",!0)])]),e("div",cc,[e("div",mc,[E(e("textarea",{"onUpdate:modelValue":u[4]||(u[4]=r=>g.item.adDecisionServerUrl=r),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Q,g.item.adDecisionServerUrl]]),u[13]||(u[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(b).item.adDecisionServerUrl.$error?(t(),s("div",fc,[(t(!0),s(U,null,D(o(b).item.adDecisionServerUrl.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):A("",!0)])])])]),e("div",pc,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:u[5]||(u[5]=r=>S()),class:"btn btn-primary",type:"button"},u[14]||(u[14]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,vc),u[15]||(u[15]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Yu))}},bc={key:0},yc={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},$c={class:"nav-item",role:"presentation"},wc={class:"nav-item",role:"presentation"},hc={class:"nav-item",role:"presentation"},kc={class:"nav-item",role:"presentation"},_c={class:"nav-item",role:"presentation"},Sc={class:"nav-item",role:"presentation"},Tc={class:"tab-content",id:"myTabContent"},Mc={class:"mt-2"},Ic={class:"col"},Cc={class:"form-floating mb-2"},xc={class:"mt-2"},Vc={class:"badge bg-info me-1"},Pc={class:"mt-2"},Oc={class:"row row-cols-sm-2"},Ac={class:"col"},Uc={class:"form-floating mb-2"},Hc={class:"form-control"},Dc={class:"col"},Lc={class:"form-floating mb-2"},Ec={class:"mt-1"},qc={class:"badge bg-info me-1"},Bc={class:"badge bg-primary me-1"},Nc={class:"table-responsive border mt-1"},Rc={class:"table table-hover mb-0"},Fc={class:"table-group-divider"},zc={class:"align-middle"},Gc={class:"text-center"},jc={class:"mt-2"},Yc={class:"mt-2 text-end"},Wc={class:"table-responsive border mt-2"},Kc={class:"table table-hover mb-0 caption-top"},Jc={class:"text-end"},Qc=["onClick"],Xc={class:"mt-2"},Zc={class:"mt-1"},em=["id"],tm={class:"text-end"},sm={__name:"view",props:{id:{type:String,required:!0},urlEdit:{type:String,default:"/vod-sources/edit"},urlMain:{type:String,default:"/vod-sources"},urlViewVideo:{type:String,default:"/videos/view"}},setup(i){const f=i,{appTitle:_,pageTitle:V,busy:k,isDirty:R,validations:C,infoMessage:G,warningMessage:F,errorMessage:P,router:N,axios:Y,utils:M,toasts:H,close:p,closeWithReturnUrl:x,generateReturnUrl:h,security:W}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View VOD Source"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null,hls:null}),g=re();re(null);const K=re();de(async()=>{await S();const w=M.getPageTab("vodSource")||"information-tab";b(w)}),qe(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const b=w=>{M.setPageTab("vodSource",w),g.value=w},I=w=>w!==g.value?"":"active",m=w=>w!==g.value?"":"show active",S=async()=>{const w=d;if(!k.value)try{k.value=!0,P.value="",d.item=null;const c=`/api/v1/vodsources/${f.id}/`;await Y.get(c).then(Z=>{w.item=Z.data;const J=w.item,y=M.moment.utc(w.item.video.durationInMillis).format("HH:mm:ss");J.video.duration=y}),$()}catch(c){P.value=M.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{k.value=!1}},T=async()=>{await S()},u=()=>{K.value.open(f.id)},r=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!k.value){P.value=null;try{k.value=!0;const c={vodSourceIds:[f.id]};await Y.post("/api/v1/vodsources/publish/",c).then(Z=>{H.success("Publish VOD","VOD was published.",{async onClose(){}})}),k.value=!1,await T()}catch(c){P.value=M.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{k.value=!1}}},a=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!k.value){P.value=null;try{k.value=!0;const c={vodSourceIds:[f.id]};await Y.post("/api/v1/vodsources/unpublish/",c).then(Z=>{H.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),k.value=!1,await T()}catch(c){P.value=M.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{k.value=!1}}},n=async w=>{if(confirm("Are you sure you want to remove the VOD Package configuration?")&&!k.value){P.value=null;try{k.value=!0,await Y.delete(`/api/v1/vodSources/package-configurations/${w}/`).then(Z=>{H.warning("Remove VOD Source Package Configuration","VOD Source package configuration was removed.")}),k.value=!1,await T()}catch(Z){P.value=M.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{k.value=!1}}},$=()=>{if(Hls.isSupported()){d.hls&&d.hls.destroy();const w=`video-${d.item.vodSourceId}`,c=document.getElementById(w),Z=d.item.video.formats.find(y=>y.formatName==="HLS"),J=`${Z.serverUrl}${Z.path}`;d.hls=M.createHlsStream(c,J,!1)}};return(w,c)=>{const Z=ee("router-link"),J=ee("PageHeader"),y=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(J,{"page-icon":"fas fa-fw fa-tag",pageTitle:o(V)},{default:L(()=>[d.item?(t(),s(U,{key:0},[d.item.arn?(t(),s("button",{key:0,onClick:c[0]||(c[0]=l=>a()),class:"ms-1 btn btn-warning"},c[15]||(c[15]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),s("button",{key:1,onClick:c[1]||(c[1]=l=>r()),class:"ms-1 btn btn-primary"},c[16]||(c[16]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):A("",!0),B(Z,{to:`${i.urlEdit}/${i.id}`,class:"ms-2 btn btn-primary"},{default:L(()=>c[17]||(c[17]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:c[2]||(c[2]=l=>T()),class:"ms-2 btn btn-secondary"},c[18]||(c[18]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:c[3]||(c[3]=l=>o(x)(f.urlMain)),class:"btn btn-secondary ms-1"},c[19]||(c[19]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(y,{errorMessage:o(P)},{default:L(()=>[d.item?(t(),s("div",bc,[e("div",null,[e("ul",yc,[e("li",$c,[e("button",{onClick:c[4]||(c[4]=l=>b("information-tab")),class:le([I("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",wc,[e("button",{onClick:c[5]||(c[5]=l=>b("packageConfigurations-tab")),class:le([I("packageConfigurations-tab"),"nav-link"]),id:"packageConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#packageConfigurations",type:"button",role:"tab","aria-controls":"packageConfigurations","aria-selected":"false"}," Package Configurations ",2)]),e("li",hc,[e("button",{onClick:c[6]||(c[6]=l=>b("viewStream-tab")),class:le([I("viewStream-tab"),"nav-link"]),id:"viewStream-tab","data-bs-toggle":"tab","data-bs-target":"#viewStream",type:"button",role:"tab","aria-controls":"viewStream","aria-selected":"false"}," View ",2)]),e("li",kc,[e("button",{onClick:c[7]||(c[7]=l=>b("channels-tab")),class:le([I("channels-tab"),"nav-link"]),id:"channels-tab","data-bs-toggle":"tab","data-bs-target":"#channels",type:"button",role:"tab","aria-controls":"channels","aria-selected":"false"},c[20]||(c[20]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),z("Channels ")]),2)]),e("li",_c,[e("button",{onClick:c[8]||(c[8]=l=>b("programs-tab")),class:le([I("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},c[21]||(c[21]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),z("Programs ")]),2)]),e("li",Sc,[e("button",{onClick:c[9]||(c[9]=l=>b("programTemplates-tab")),class:le([I("programTemplates-tab"),"nav-link"]),id:"programTemplates-tab","data-bs-toggle":"tab","data-bs-target":"#programTemplates",type:"button",role:"tab","aria-controls":"programTemplates","aria-selected":"false"},c[22]||(c[22]=[e("span",{class:"fas fa-fw fa-warning me-1"},null,-1),z("Program Templates ")]),2)])]),e("div",Tc,[e("div",{class:le([m("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Mc,[e("div",Ic,[e("div",Cc,[E(e("input",{"onUpdate:modelValue":c[10]||(c[10]=l=>d.item.name=l),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),c[23]||(c[23]=e("label",{for:"name"},"Name",-1))])]),e("div",xc,[e("div",null,[(t(!0),s(U,null,D(d.item.types,l=>(t(),s("span",Vc,v(l.typeName),1))),256))])]),e("div",Pc,[c[27]||(c[27]=e("fieldset",null,[e("legend",null,"Video Information")],-1)),e("div",null,[e("div",Oc,[e("div",Ac,[e("div",Uc,[e("div",Hc,[B(Z,{to:`${i.urlViewVideo}/${d.item.video.videoId}/${o(h)()}`},{default:L(()=>[z(v(d.item.video.title),1)]),_:1},8,["to"])]),c[24]||(c[24]=e("label",{for:"title"},"Title",-1))])]),e("div",Dc,[e("div",Lc,[E(e("input",{"onUpdate:modelValue":c[11]||(c[11]=l=>d.item.video.duration=l),type:"text",class:"form-control",id:"duration",readonly:""},null,512),[[Q,d.item.video.duration]]),c[25]||(c[25]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",Ec,[(t(!0),s(U,null,D(d.item.video.genres,l=>(t(),s("span",qc,v(l.genreName),1))),256)),(t(!0),s(U,null,D(d.item.video.categories,l=>(t(),s("span",Bc,v(l.categoryName),1))),256))]),e("div",Nc,[e("table",Rc,[c[26]||(c[26]=e("thead",null,[e("tr",null,[e("th",{class:"text-center"},"#"),e("th",null,"Type"),e("th",null,"Server"),e("th",null,"Path")])],-1)),e("tbody",Fc,[(t(!0),s(U,null,D(d.item.video.formats,(l,q)=>(t(),s("tr",zc,[e("td",Gc,v(q+1),1),e("td",null,v(l.formatName),1),e("td",null,v(l.serverUrl),1),e("td",null,v(l.path),1)]))),256))])])])])])])],2),e("div",{class:le([m("packageConfigurations-tab"),"tab-pane fade"]),id:"packageConfigurations",role:"tabpanel","aria-labelledby":"packageConfigurations-tab"},[e("div",jc,[e("div",Yc,[e("button",{onClick:c[12]||(c[12]=l=>u()),class:"btn btn-primary"},c[28]||(c[28]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Add ")]))]),e("div",Wc,[e("table",Kc,[c[30]||(c[30]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.packageConfigurations,(l,q)=>(t(),s("tr",{key:l.packageConfigurationId,class:"align-middle"},[e("td",null,v(q+1),1),e("td",null,v(l.path),1),e("td",null,v(l.sourceGroup.name),1),e("td",null,v(l.type),1),e("td",Jc,[e("button",{onClick:se=>n(l.packageConfigurationId),class:"btn btn-outline-warning btn-sm"},c[29]||(c[29]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Qc)])]))),128))]),_:1},512),[[Te,d.item.packageConfigurations.length>0]])])])])],2),e("div",{class:le([m("viewStream-tab"),"tab-pane fade"]),id:"viewStream",role:"tabpanel","aria-labelledby":"viewStream-tab"},[e("div",Xc,[e("div",Zc,[e("video",{id:`video-${d.item.vodSourceId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain border"},null,8,em),e("div",tm,[e("button",{onClick:c[13]||(c[13]=l=>d.hls.startLoad(-1)),class:"btn btn-outline-info btn-sm"},c[31]||(c[31]=[e("span",{class:"fas fa-fw fa-cloud-download"},null,-1)]))])])])],2),e("div",{class:le([m("channels-tab"),"tab-pane fade"]),id:"channels",role:"tabpanel","aria-labelledby":"channels-tab"},c[32]||(c[32]=[e("div",{class:"mt-2"}," TODO: List of Channels using this as filler slate ",-1)]),2),e("div",{class:le([m("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},c[33]||(c[33]=[e("div",{class:"mt-2"}," TODO: List of Programs using this as VOD source ",-1)]),2),e("div",{class:le([m("programTemplates-tab"),"tab-pane fade"]),id:"programTemplates",role:"tabpanel","aria-labelledby":"programTemplates-tab"},c[34]||(c[34]=[e("div",{class:"mt-2"}," TODO: List of Program Templates using this as VOD source ",-1)]),2)])])])):A("",!0)]),_:1},8,["errorMessage"]),B(ju,{ref_key:"modalAddPackageConfiguration",ref:K,onRefresh:T},null,512),B(gc,{ref:"modalAddPlaybackConfiguration",onRefresh:c[14]||(c[14]=l=>T())},null,512)])]),_:1})}}},om=["disabled"],am={class:"container1"},lm={class:"row"},nm={class:"col-12 col-lg-6"},rm={class:"col"},im={class:"form-floating mb-2"},dm=["value"],um={key:0,class:"d-block invalid-feedback"},cm={class:"col"},mm={class:"form-floating mb-2"},fm=["disabled"],pm=["value"],vm={key:0,class:"d-block invalid-feedback"},gm={class:"col-12 col-lg-6"},bm={class:"col"},ym={class:"form-floating mb-2"},$m={key:0,class:"d-block invalid-feedback"},wm={class:"row row-cols-1 row-cols-sm-3 mt-2"},hm={class:"col"},km={class:"form-floating mb-2"},_m={key:0},Sm={key:1},Tm={key:2},Mm={key:3,class:"d-block invalid-feedback"},Im={class:"col"},Cm={class:"form-floating mb-2"},xm={key:0},Vm={key:1},Pm={key:2,class:"d-block invalid-feedback"},Om={class:"col"},Am={class:"form-floating mb-2"},Um={key:0,class:"mt-3"},Hm={class:"table-responsive border mt-1"},Dm={class:"table table-borderless table-sm mb-0 align-middle"},Lm=["onUpdate:modelValue","onChange"],Em={key:0},qm=["onUpdate:modelValue","onChange"],Bm={class:"text-start"},Nm=["onClick"],Rm={class:"col mt-2"},Fm={class:"row row-cols-1 row-cols-sm-2"},zm={class:"col"},Gm={class:"form-floating mb-2"},jm={class:"col"},Ym={class:"form-floating mb-2"},Wm={__name:"add",props:{urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program Template"}),H=i,p=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{vodSource:null},vodSource:{},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:"program_template_",sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},hls:null}),x={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},h=$e(x,p),W=he(()=>{const y=P.moment;if(p.startOffsetTime&&p.startOffsetTime!=="00:00:00"&&P.isValidTime(p.startOffsetTime)){const l=y().startOf("day"),q=l.format("YYYY-MM-DD ")+p.startOffsetTime,ne=y(q).subtract(l);return p.item.startOffsetMillis=ne.valueOf(),p.item.startOffsetMillis}return 0}),X=he(()=>{const y=P.moment;if(p.endOffsetTime&&p.endOffsetTime!=="00:00:00"&&P.isValidTime(p.endOffsetTime)){const l=y().startOf("day"),q=l.format("YYYY-MM-DD ")+p.endOffsetTime,ne=y(q).subtract(l);return p.item.endOffsetMillis=ne.valueOf(),p.item.endOffsetMillis}return 0}),d=he(()=>p.item.endOffsetMillis-p.item.startOffsetMillis),g=he(()=>P.moment.utc(d.value).format("HH:mm:ss")),K=he(()=>{const y=p.item.adBreaks;return y&&y.length>0?y.reduce((q,se,ne)=>q+se.durationInMillis,0):0}),b=he(()=>{const y=d.value+K.value;return P.moment.utc(y).format("HH:mm:ss")}),I=he(()=>P.moment.utc(K.value).format("HH:mm:ss"));de(async()=>{await m()}),qe(()=>{p.hls&&(p.hls.stopLoad(),p.hls.destroy())});const m=async()=>{await S(),await n()},S=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{p.lookups.sourceLocations=l.data,p.lookups.sourceLocations.length===1&&(p.item.sourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.sourceLocationId&&await T(p.item.sourceLocationId)}catch(y){C.value=P.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},T=async y=>{try{const l=`/api/v1/vodSources/lookup/source-location/${y}/?category=3`;await F.get(l).then(q=>{p.lookups.vodSources=q.data})}catch(l){C.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},u=async()=>{const y=p.selected.vodSource;p.item.vodSourceId=y.id,p.endOffsetTime=P.moment.utc(y.durationInMillis).format("HH:mm:ss"),await Promise.all([r(y.id),a(y.id)])},r=async y=>{try{let l=`/api/v1/vodSources/${y}/hls`;const q=await F.get(l).then(ne=>ne.data);if(p.hls){p.hls.loadSource(q);return}const se=document.getElementById("video-add-program-template");p.hls=P.createHlsStream(se,q,"Previewing filler slate.")}catch(l){C.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},a=async y=>{try{let l=`/api/v1/vodSources/${y}/blank-frames`;const q=await F.get(l).then(se=>se.data);q&&q.length>0&&(p.item.adBreaks=q.map(se=>{const ne=(se.endInMillis-se.startInMillis)/2+se.startInMillis;return{offsetTime:P.moment.utc(ne).format("HH:mm:ss"),offsetMillis:ne,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null}}))}catch(l){C.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},n=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(l=>{p.lookups.adBreakSourceLocations=l.data})}catch(y){C.value=P.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},$=()=>{const y={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};p.item.adBreaks.push(y)},w=y=>{p.item.adBreaks.splice(y,1)},c=y=>{const l=P.moment,q=l().startOf("day"),se=q.format("YYYY-MM-DD ")+y.offsetTime,j=l(se).subtract(q);y.offsetMillis=j.valueOf()},Z=y=>{const l=P.moment,q=l().startOf("day"),se=q.format("YYYY-MM-DD ")+y.durationTime,j=l(se).subtract(q);y.durationInMillis=j.valueOf()},J=async()=>{const y=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const q=P.clone(y.item),se=q.adBreaks.filter(ne=>ne.durationInMillis>0);q.adBreaks=se,await F.post("/api/v1/programtemplates/",q).then(ne=>{N.success("Add Program Template","Program template added.",{onClose:async()=>{const j=`${H.urlView}/${ne.data}`;await G.push(j)}})})}catch(q){C.value=P.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{V.value=!1}};return(y,l)=>{const q=ee("router-link"),se=ee("PageHeader"),ne=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:l[0]||(l[0]=j=>J()),class:"btn btn-primary"},l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,om),B(q,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(ne,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[e("div",null,[e("div",am,[e("div",lm,[e("div",nm,[e("div",rm,[e("div",im,[E(e("select",{"onUpdate:modelValue":l[1]||(l[1]=j=>p.item.sourceLocationId=j),onChange:l[2]||(l[2]=j=>T(p.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,D(p.lookups.sourceLocations,j=>(t(),s("option",{value:j.id},v(j.name),9,dm))),256))],544),[[ue,p.item.sourceLocationId]]),l[13]||(l[13]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.sourceLocationId.$error?(t(),s("div",um,[(t(!0),s(U,null,D(o(h).item.sourceLocationId.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),e("div",cm,[e("div",mm,[E(e("select",{"onUpdate:modelValue":l[3]||(l[3]=j=>p.selected.vodSource=j),onChange:l[4]||(l[4]=j=>u()),class:"form-select",id:"vodSourceId",disabled:p.item.adBreaks.length>0},[(t(!0),s(U,null,D(p.lookups.vodSources,j=>(t(),s("option",{value:j},v(o(P).moment.utc(j.durationInMillis).format("HH:mm:ss"))+" - "+v(j.name),9,pm))),256))],40,fm),[[ue,p.selected.vodSource]]),l[14]||(l[14]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.vodSourceId.$error?(t(),s("div",vm,[(t(!0),s(U,null,D(o(h).item.vodSourceId.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),l[15]||(l[15]=e("div",{class:"col"},[e("div",null,[e("video",{id:"video-add-program-template",controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",gm,[e("div",bm,[e("div",ym,[E(e("input",{"onUpdate:modelValue":l[5]||(l[5]=j=>p.item.name=j),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,p.item.name]]),l[16]||(l[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",$m,[(t(!0),s(U,null,D(o(h).item.name.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),e("div",wm,[e("div",hm,[e("div",null,[e("div",km,[E(e("input",{"onUpdate:modelValue":l[6]||(l[6]=j=>p.startOffsetTime=j),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Q,p.startOffsetTime]]),l[17]||(l[17]=e("label",{for:"startOffsetTime",class:"small fw-bold"}," Start OffSet Time ",-1))]),W.value>0&&W.value<3e4?(t(),s("div",_m,l[18]||(l[18]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):A("",!0),W.value>X.value&&X.value>0?(t(),s("div",Sm,l[19]||(l[19]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):A("",!0),p.selected.vodSource&&W.value>=p.selected.vodSource.durationInMillis?(t(),s("div",Tm,l[20]||(l[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(h).item.startOffsetMillis.$error?(t(),s("div",Mm,[(t(!0),s(U,null,D(o(h).item.startOffsetMillis.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),e("div",Im,[e("div",null,[e("div",Cm,[E(e("input",{"onUpdate:modelValue":l[7]||(l[7]=j=>p.endOffsetTime=j),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Q,p.endOffsetTime]]),l[21]||(l[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"}," End OffSet Time ",-1))]),X.value>0&&X.value<3e4?(t(),s("div",xm,l[22]||(l[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):A("",!0),p.selected.vodSource&&X.value>p.selected.vodSource.durationInMillis?(t(),s("div",Vm,l[23]||(l[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(h).item.endOffsetMillis.$error?(t(),s("div",Pm,[(t(!0),s(U,null,D(o(h).item.endOffsetMillis.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),e("div",Om,[e("div",Am,[E(e("input",{"onUpdate:modelValue":l[8]||(l[8]=j=>g.value=j),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,g.value]]),l[24]||(l[24]=e("label",{for:"durationTime"},"Clip",-1))])])]),p.item.vodSourceId?(t(),s("div",Um,[e("div",{class:"d-flex flex-row justify-content-between"},[l[26]||(l[26]=e("div",null,[e("h5",null," Ad Break ")],-1)),e("button",{onClick:$,class:"btn btn-outline-primary btn-sm"},l[25]||(l[25]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",Hm,[e("table",Dm,[l[29]||(l[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(p.item.adBreaks,(j,we)=>(t(),s("tr",null,[e("td",null,v(we+1),1),e("td",null,[E(e("input",{"onUpdate:modelValue":ge=>j.offsetTime=ge,onChange:ge=>c(j),type:"time",step:"1",class:"form-control"},null,40,Lm),[[Q,j.offsetTime]]),j.offsetMillis>=p.selected.vodSource.durationInMillis?(t(),s("div",Em,l[27]||(l[27]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0)]),e("td",null,[E(e("input",{"onUpdate:modelValue":ge=>j.durationTime=ge,onChange:ge=>Z(j),type:"time",step:"1",class:"form-control"},null,40,qm),[[Q,j.durationTime]])]),e("td",Bm,[e("button",{onClick:ge=>w(we),class:"btn btn-outline-warning btn-sm"},l[28]||(l[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Nm)])]))),256))])]),l[30]||(l[30]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),z(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):A("",!0),e("div",Rm,[l[33]||(l[33]=e("h5",null," Duration ",-1)),e("div",Fm,[e("div",zm,[e("div",Gm,[E(e("input",{"onUpdate:modelValue":l[9]||(l[9]=j=>I.value=j),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Q,I.value]]),l[31]||(l[31]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",jm,[e("div",Ym,[E(e("input",{"onUpdate:modelValue":l[10]||(l[10]=j=>b.value=j),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Q,b.value]]),l[32]||(l[32]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Km=["disabled"],Jm={class:"container1"},Qm={class:"row"},Xm={class:"col-12 col-lg-6"},Zm={class:"col"},ef={class:"form-floating mb-2"},tf=["value"],sf={key:0,class:"d-block invalid-feedback"},of={class:"col"},af={class:"form-floating mb-2"},lf=["value"],nf={key:0,class:"d-block invalid-feedback"},rf={class:"col-12 col-lg-6"},df={class:"col"},uf={class:"form-floating mb-2"},cf={key:0,class:"d-block invalid-feedback"},mf={class:"row row-cols- row-cols-sm-3"},ff={class:"col"},pf={class:"form-floating mb-2"},vf={key:0},gf={key:1},bf={key:2},yf={key:3,class:"d-block invalid-feedback"},$f={class:"col"},wf={class:"form-floating"},hf={key:0},kf={key:1},_f={key:2,class:"d-block invalid-feedback"},Sf={class:"col"},Tf={class:"form-floating mb-2"},Mf={key:0,class:"mt-2"},If={class:"table-responsive border mt-1"},Cf={class:"table table-borderless table-sm mb-0 align-middle"},xf=["onUpdate:modelValue","onChange"],Vf={key:0},Pf=["onUpdate:modelValue","onChange"],Of=["onClick"],Af={class:"col mt-2"},Uf={class:"row row-cols-1 row-cols-sm-2"},Hf={class:"col"},Df={class:"form-floating mb-2"},Lf={class:"col"},Ef={class:"form-floating mb-2"},qf={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,default:"/program-templates/view"},urlMain:{type:String,default:"/program-templates"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,closeWithReturnUrl:M,security:H}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program Template"}),p=i,x=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[]},selected:{sourceLocation:null,vodSource:null},startOffsetTime:"00:00:00",endOffsetTime:"00:00:00",item:{name:null,sourceLocationId:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),h={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),$autoDirty:!0,$lazy:!0}}},W=$e(h,x),X=he(()=>{if(x.startOffsetTime&&x.startOffsetTime!=="00:00:00"&&P.isValidTime(x.startOffsetTime)){const l=P.moment,q=l().startOf("day"),ne=l(x.startOffsetTime,"hh:mm:ss").diff(q);return x.item.startOffsetMillis=ne.valueOf(),x.item.startOffsetMillis}return 0}),d=he(()=>{if(x.endOffsetTime&&x.endOffsetTime!=="00:00:00"&&P.isValidTime(x.endOffsetTime)){const l=P.moment,q=l().startOf("day"),ne=l(x.endOffsetTime,"hh:mm:ss").diff(q);return x.item.endOffsetMillis=ne.valueOf(),x.item.endOffsetMillis}return 0}),g=he(()=>x.item.endOffsetMillis-x.item.startOffsetMillis),K=he(()=>P.moment.utc(g.value).format("HH:mm:ss")),b=he(()=>{const l=x.item.adBreaks;return l&&l.length>0?l.reduce((se,ne,j)=>se+ne.durationInMillis,0):0}),I=he(()=>{const l=g.value+b.value;return P.moment.utc(l).format("HH:mm:ss")}),m=he(()=>P.moment.utc(b.value).format("HH:mm:ss"));de(async()=>{await S()});const S=async()=>{await T(),await u()},T=async()=>{try{const l=`/api/v1/programtemplates/${p.id}/`;await F.get(l).then(q=>{x.item=q.data,x.startOffsetTime=P.moment.utc(x.item.startOffsetMillis).format("HH:mm:ss"),x.endOffsetTime=P.moment.utc(x.item.endOffsetMillis).format("HH:mm:ss");const se=x.startOffsetTime,ne=x.endOffsetTime;x.item.adBreaks.forEach(j=>{j.offsetTime=P.moment.utc(j.offsetMillis).format("HH:mm:ss"),j.durationTime=P.moment.utc(j.durationInMillis).format("HH:mm:ss")})})}catch(l){C.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},u=async()=>{await r()},r=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(q=>{x.lookups.sourceLocations=q.data}),x.item.sourceLocationId&&await a(x.item.sourceLocationId)}catch(l){C.value=P.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},a=async l=>{try{const q=`/api/v1/vodSources/lookup/source-location/${l}/?type=3`;await F.get(q).then(ne=>{x.lookups.vodSources=ne.data});const se=x.lookups.vodSources.find(ne=>ne.id==x.item.vodSourceId);x.selected.vodSource=se,await n()}catch(q){C.value=P.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},n=async()=>{const l=x.selected.vodSource;l&&(x.item.vodSourceId!=l.id&&(x.startOffsetTime=P.moment.utc(0).format("HH:mm:ss"),x.endOffsetTime=P.moment.utc(l.durationInMillis).format("HH:mm:ss")),x.item.vodSourceId=l.id,await $(l.id))},$=async l=>{try{let q=`/api/v1/vodSources/${l}/hls`;const se=await F.get(q).then(j=>j.data);x.hls&&x.hls.destroy();const ne=document.getElementById("video-edit-program-template");x.hls=P.createHlsStream(ne,se,"Previewing VOD Content.")}catch(q){C.value=P.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{}},w=()=>{const l={offsetTime:"00:00:00",offsetMillis:0,durationTime:"00:00:00",durationInMillis:0,sourceLocationId:null,vodSourceId:null};x.item.adBreaks.push(l)},c=l=>{x.item.adBreaks.splice(l,1)},Z=l=>{const q=P.moment,se=q().startOf("day"),ne=se.format("YYYY-MM-DD ")+l.offsetTime,we=q(ne).subtract(se);l.offsetMillis=we.valueOf()},J=l=>{const q=P.moment,se=q().startOf("day"),ne=se.format("YYYY-MM-DD ")+l.durationTime,we=q(ne).subtract(se);l.durationInMillis=we.valueOf()},y=async()=>{const l=x;if(V.value)return;if(!await W.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const se=P.clone(l.item);debugger;se.startOffsetMillis=X.value,se.endOffsetMillis=d.value,await F.put("/api/v1/programtemplates/",se).then(ne=>{N.success("Edit Program Template","Program template edit.",{onClose:async()=>{const j=`${p.urlView}/${p.id}`;await G.push(j)}})})}catch(se){C.value=P.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{V.value=!1}};return(l,q)=>{const se=ee("PageHeader"),ne=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(se,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(W).$dirty&&o(W).$invalid,onClick:q[0]||(q[0]=j=>y()),class:"btn btn-primary"},q[13]||(q[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Km),e("button",{onClick:q[1]||(q[1]=j=>S()),class:"btn btn-secondary ms-2"},q[14]||(q[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:q[2]||(q[2]=j=>o(M)(p.urlMain)),class:"btn btn-secondary ms-1"},q[15]||(q[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(ne,{errorMessage:o(C),vuelidate:o(W)},{default:L(()=>[e("div",null,[e("div",Jm,[e("div",Qm,[e("div",Xm,[e("div",Zm,[e("div",ef,[E(e("select",{"onUpdate:modelValue":q[3]||(q[3]=j=>x.item.sourceLocationId=j),onChange:q[4]||(q[4]=j=>a(x.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,D(x.lookups.sourceLocations,j=>(t(),s("option",{value:j.id},v(j.name),9,tf))),256))],544),[[ue,x.item.sourceLocationId]]),q[16]||(q[16]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(W).item.sourceLocationId.$error?(t(),s("div",sf,[(t(!0),s(U,null,D(o(W).item.sourceLocationId.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),e("div",of,[e("div",af,[E(e("select",{"onUpdate:modelValue":q[5]||(q[5]=j=>x.selected.vodSource=j),onChange:q[6]||(q[6]=j=>n()),class:"form-select",id:"vodSourceId"},[(t(!0),s(U,null,D(x.lookups.vodSources,j=>(t(),s("option",{value:j},v(o(P).moment.utc(j.durationInMillis).format("HH:mm:ss"))+" - "+v(j.name),9,lf))),256))],544),[[ue,x.selected.vodSource]]),q[17]||(q[17]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(W).item.vodSourceId.$error?(t(),s("div",nf,[(t(!0),s(U,null,D(o(W).item.vodSourceId.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),q[18]||(q[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-edit-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",rf,[e("div",df,[e("div",uf,[E(e("input",{"onUpdate:modelValue":q[7]||(q[7]=j=>x.item.name=j),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,x.item.name]]),q[19]||(q[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(W).item.name.$error?(t(),s("div",cf,[(t(!0),s(U,null,D(o(W).item.name.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)])]),e("div",mf,[e("div",ff,[e("div",pf,[E(e("input",{"onUpdate:modelValue":q[8]||(q[8]=j=>x.startOffsetTime=j),type:"time",step:"1",id:"startOffsetTime",class:"form-control"},null,512),[[Q,x.startOffsetTime]]),q[20]||(q[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start OffSet Time",-1))]),X.value>0&&X.value<3e4?(t(),s("div",vf,q[21]||(q[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):A("",!0),X.value>d.value&&d.value>0?(t(),s("div",gf,q[22]||(q[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start offset time Exceeds End offset time ",-1)]))):A("",!0),x.selected.vodSource&&X.value>=x.selected.vodSource.durationInMillis?(t(),s("div",bf,q[23]||(q[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(W).item.startOffsetMillis.$error?(t(),s("div",yf,[(t(!0),s(U,null,D(o(W).item.startOffsetMillis.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)]),e("div",$f,[e("div",wf,[E(e("input",{"onUpdate:modelValue":q[9]||(q[9]=j=>x.endOffsetTime=j),type:"time",step:"1",id:"endOffsetTime",class:"form-control"},null,512),[[Q,x.endOffsetTime]]),q[24]||(q[24]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End OffSet Time",-1))]),d.value>0&&d.value<3e4?(t(),s("div",hf,q[25]||(q[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):A("",!0),x.selected.vodSource&&d.value>x.selected.vodSource.durationInMillis?(t(),s("div",kf,q[26]||(q[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0),o(W).item.endOffsetMillis.$error?(t(),s("div",_f,[(t(!0),s(U,null,D(o(W).item.endOffsetMillis.$errors,j=>(t(),s("div",{key:j.$uid},v(j.$message),1))),128))])):A("",!0)]),e("div",Sf,[e("div",Tf,[E(e("input",{"onUpdate:modelValue":q[10]||(q[10]=j=>K.value=j),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,K.value]]),q[27]||(q[27]=e("label",{for:"durationTime"},"Clip",-1))])])]),x.selected.vodSource?(t(),s("div",Mf,[e("div",{class:"d-flex flex-row justify-content-between"},[q[29]||(q[29]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary btn-sm"},q[28]||(q[28]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))]),e("div",If,[e("table",Cf,[q[32]||(q[32]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Time"),e("th",null,"Duration Time"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(x.item.adBreaks,(j,we)=>(t(),s("tr",null,[e("td",null,v(we+1),1),e("td",null,[E(e("input",{"onUpdate:modelValue":ge=>j.offsetTime=ge,onChange:ge=>Z(j),type:"time",step:"1",class:"form-control"},null,40,xf),[[Q,j.offsetTime]]),j.offsetMillis>=x.selected.vodSource.durationInMillis?(t(),s("div",Vf,q[30]||(q[30]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Ad Break Offset Time Exceeds VOD Source Duration ",-1)]))):A("",!0)]),e("td",null,[E(e("input",{"onUpdate:modelValue":ge=>j.durationTime=ge,onChange:ge=>J(j),type:"time",step:"1",class:"form-control"},null,40,Pf),[[Q,j.durationTime]])]),e("td",null,[e("button",{onClick:ge=>c(we),class:"btn btn-outline-warning btn-sm"},q[31]||(q[31]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Of)])]))),256))])]),q[33]||(q[33]=e("div",{class:"small m-2 text-end"},[e("div",null,[e("span",{class:"fas fa-fw fa-circle-info"}),z(" Vod source will be defined in Program Instance. Allowed VODs will be based on the channel's output type (HLS or DASH) and duration specified on this ad break. ")])],-1))])])):A("",!0),e("div",Af,[q[36]||(q[36]=e("h5",null," Duration ",-1)),e("div",Uf,[e("div",Hf,[e("div",Df,[E(e("input",{"onUpdate:modelValue":q[11]||(q[11]=j=>m.value=j),type:"text",class:"form-control",id:"totalAdBreakDurationTime",readonly:""},null,512),[[Q,m.value]]),q[34]||(q[34]=e("label",{for:"totalAdBreakDurationTime"},"Total Ad Breaks",-1))])]),e("div",Lf,[e("div",Ef,[E(e("input",{"onUpdate:modelValue":q[12]||(q[12]=j=>I.value=j),type:"text",class:"form-control",id:"totalProgramDuration",readonly:""},null,512),[[Q,I.value]]),q[35]||(q[35]=e("label",{for:"totalProgramDuration"},"Total Program Duration",-1))])])])])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Bf={class:"ms-1"},Nf={class:"input-group"},Rf={class:"table-responsive border shadow-sm"},Ff={class:"table table-hover mb-0"},zf=["textContent"],Gf={class:"d-flex flex-row"},jf={class:""},Yf={class:"mb-1"},Wf=["src"],Kf={class:"ms-2"},Jf={key:0,class:"fas fa-fw fa-check-circle text-success"},Qf={class:"text-wrap text-truncate",style:{width:"20px !important"}},Xf={class:"text-end me-0 me-sm-5"},Zf="/api/v1/programTemplates/search",ep={__name:"index",props:{urlAdd:{type:String,default:"/program-templates/add"},urlView:{type:String,default:"/program-templates/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(i){Se("$config");const _=ye().user,{appTitle:V,pageTitle:k,busy:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,generateReturnUrl:p,security:x,filter:h,initializeFilter:W,getQuery:X,saveQuery:d,search:g,getRowNumber:K,setSelected:b,isSelected:I}=De({appTitle:"Arcadian-Sony FAST",pageTitle:"Program Templates",cacheKey:`${_==null?void 0:_.userId}/program-templates/search`,baseUrl:Zf,filter:{updateUrl:!0}});return de(async()=>{W(),await g()}),(m,S)=>{const T=ee("router-link"),u=ee("PageHeader"),r=ee("m-pagination"),a=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(u,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(k)},{default:L(()=>[B(T,{to:i.urlAdd,class:"btn btn-primary"},{default:L(()=>S[3]||(S[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",Bf,[e("div",Nf,[E(e("input",{"onUpdate:modelValue":S[0]||(S[0]=n=>o(h).query.criteria=n),onKeyup:S[1]||(S[1]=He(n=>o(g)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(h).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:S[2]||(S[2]=n=>o(g)(1))},S[4]||(S[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(a,{errorMessage:o(F)},{default:L(()=>[e("div",Rf,[e("table",Ff,[S[5]||(S[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",{class:"text-center"},"Duration"),e("th",null,"Source Location"),e("th",null,"VOD Source")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(o(h).items,(n,$)=>(t(),s("tr",{key:n.programTemplateId},[e("td",{textContent:v(o(K)($)),class:"text-center"},null,8,zf),e("td",null,[e("div",Gf,[e("div",jf,[n.vodSource.video.thumbnails.length>0?(t(!0),s(U,{key:0},D(n.vodSource.video.thumbnails,w=>(t(),s("div",Yf,[e("img",{src:w.url,class:"img-fuild border",width:"128"},null,8,Wf)]))),256)):A("",!0)]),e("div",Kf,[B(T,{to:`${i.urlView}/${n.programTemplateId}`,class:"text-decoration-none"},{default:L(()=>[n.arn?(t(),s("span",Jf)):A("",!0),e("span",Qf,v(n.name),1)]),_:2},1032,["to"])])])]),e("td",Xf,v(o(Y).moment.utc(n.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1),e("td",null,[B(T,{to:`${i.urlViewSourceLocation}/${n.sourceLocationId}/${o(p)()}`,class:"text-decoration-none"},{default:L(()=>[z(v(n.sourceLocation.name),1)]),_:2},1032,["to"])]),e("td",null,[B(T,{to:`${i.urlViewVodSource}/${n.vodSourceId}/${o(p)()}`,class:"text-decoration-none"},{default:L(()=>[z(v(n.vodSource.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[Te,o(h).items.length>0]])])]),B(r,{filter:o(h),search:o(g),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},tp={key:0},sp={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},op={class:"nav-item",role:"presentation"},ap={class:"nav-item",role:"presentation"},lp={class:"nav-item d-none",role:"presentation"},np={class:"tab-content",id:"myTabContent"},rp={class:"mt-2"},ip={class:""},dp={class:"row row-cols-1 row-cols-lg-2"},up={class:"col"},cp={class:"col"},mp={class:"form-floating mb-2"},fp={class:"col"},pp={class:"form-floating mb-2"},vp={class:"col"},gp={class:"col"},bp={class:"form-floating mb-2"},yp={class:"row row-cols-1 row-cols-sm-3"},$p={class:"col"},wp={class:"form-floating mb-2"},hp={class:"col"},kp={class:"form-floating mb-2"},_p={class:"col"},Sp={class:"form-floating mb-2"},Tp={class:"row row-cols-1 row-cols-sm-2"},Mp={class:"col"},Ip={class:"form-floating mb-2"},Cp={class:"col"},xp={class:"form-floating mb-2"},Vp={class:"mt-2"},Pp={class:"table-responsive"},Op={class:"table table-hover mb-0"},Ap={class:"text-center"},Up={class:"mt-2"},Hp={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/program-templates"},urlEdit:{type:String,default:"/program-templates/edit"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(i){const f=i,{appTitle:_,pageTitle:V,busy:k,isDirty:R,validations:C,infoMessage:G,warningMessage:F,errorMessage:P,router:N,axios:Y,utils:M,toasts:H,close:p,closeWithReturnUrl:x,generateReturnUrl:h,security:W}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Program Template"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null,hls:null}),g=re();de(async()=>{await m(),g.value=M.getPageTab("programTemplate")||"information-tab"});const K=u=>{M.setPageTab("programTemplate",u),g.value=u},b=u=>u!==g.value?"":"active",I=u=>u!==g.value?"":"show active",m=async()=>{const u=d;if(!k.value)try{k.value=!0,P.value="",d.item=null;const r=`/api/v1/programTemplates/${f.id}/`;await Y.get(r).then(a=>{u.item=a.data;const n=u.item;n.startOffsetTime=M.moment.utc(n.startOffsetMillis).format("HH:mm:ss"),n.endOffsetTime=M.moment.utc(n.endOffsetMillis).format("HH:mm:ss"),n.durationTime=M.moment.utc(n.durationInMillis).format("HH:mm:ss"),n.adBreaksDurationTime=M.moment.utc(n.adBreaksDurationInMillis).format("HH:mm:ss"),n.totalProgramTemplateDurationTime=M.moment.utc(n.totalProgramTemplateDurationInMillis).format("HH:mm:ss");const $=n.vodSource.video,w=$.durationInMillis;$.durationInMillis=M.moment.utc(w).format("HH:mm:ss")}),d.item.vodSource&&await T(d.item.vodSourceId)}catch(r){P.value=M.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{k.value=!1}},S=async()=>{await m()},T=async u=>{try{let r=`/api/v1/vodSources/${u}/hls`;const a=await Y.get(r).then($=>$.data);d.hls&&d.hls.destroy();const n=document.getElementById("video-view-program-template");d.hls=M.createHlsStream(n,a,"Previewing VOD.")}catch(r){P.value=M.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}};return(u,r)=>{const a=ee("router-link"),n=ee("PageHeader"),$=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(n,{"page-icon":"fas fa-fw fa-file-video",pageTitle:o(V)},{default:L(()=>[B(a,{to:`${i.urlEdit}/${i.id}/${o(h)()}`,class:"ms-2 btn btn-primary"},{default:L(()=>r[13]||(r[13]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:r[0]||(r[0]=w=>S()),class:"ms-2 btn btn-secondary"},r[14]||(r[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:r[1]||(r[1]=w=>o(x)(f.urlMain)),class:"btn btn-secondary ms-1"},r[15]||(r[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B($,{errorMessage:o(P)},{default:L(()=>[d.item?(t(),s("div",tp,[e("div",null,[e("ul",sp,[e("li",op,[e("button",{onClick:r[2]||(r[2]=w=>K("information-tab")),class:le([b("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",ap,[e("button",{onClick:r[3]||(r[3]=w=>K("adBreaks-tab")),class:le([b("adBreaks-tab"),"nav-link"]),id:"adBreaks-tab","data-bs-toggle":"tab","data-bs-target":"#adBreaks",type:"button",role:"tab","aria-controls":"adBreaks","aria-selected":"false"}," Ad Breaks ",2)]),e("li",lp,[e("button",{onClick:r[4]||(r[4]=w=>K("programs-tab")),class:le([b("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",np,[e("div",{class:le([I("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",rp,[e("div",ip,[e("div",dp,[e("div",up,[e("div",cp,[e("div",mp,[E(e("input",{"onUpdate:modelValue":r[5]||(r[5]=w=>d.item.sourceLocation.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.sourceLocation.name]]),r[16]||(r[16]=e("label",{for:"name",class:"small fw-bold"},"Source Location",-1))])]),e("div",fp,[e("div",pp,[E(e("input",{"onUpdate:modelValue":r[6]||(r[6]=w=>d.item.vodSource.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.vodSource.name]]),r[17]||(r[17]=e("label",{for:"name",class:"small fw-bold"},"VOD Name",-1))])]),r[18]||(r[18]=e("div",{class:"col"},[e("div",{class:"rounded1"},[e("video",{id:"video-view-program-template",controls:"",class:"card-img-top object-fit-contain"})])],-1))]),e("div",vp,[e("div",gp,[e("div",bp,[E(e("input",{"onUpdate:modelValue":r[7]||(r[7]=w=>d.item.name=w),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),r[19]||(r[19]=e("label",{for:"name",class:"small fw-bold"},"Name",-1))])]),e("div",yp,[e("div",$p,[e("div",wp,[E(e("input",{"onUpdate:modelValue":r[8]||(r[8]=w=>d.item.startOffsetTime=w),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Q,d.item.startOffsetTime]]),r[20]||(r[20]=e("label",{for:"startOffsetTime",class:"small fw-bold"},"Start Offset",-1))])]),e("div",hp,[e("div",kp,[E(e("input",{"onUpdate:modelValue":r[9]||(r[9]=w=>d.item.endOffsetTime=w),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Q,d.item.endOffsetTime]]),r[21]||(r[21]=e("label",{for:"endOffsetTime",class:"small fw-bold"},"End Offset",-1))])]),e("div",_p,[e("div",Sp,[E(e("input",{"onUpdate:modelValue":r[10]||(r[10]=w=>d.item.durationTime=w),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,d.item.durationTime]]),r[22]||(r[22]=e("label",{for:"durationTime",class:"small fw-bold"},"Clip",-1))])])]),r[25]||(r[25]=e("h5",null," Duration ",-1)),e("div",Tp,[e("div",Mp,[e("div",Ip,[E(e("input",{"onUpdate:modelValue":r[11]||(r[11]=w=>d.item.adBreaksDurationTime=w),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Q,d.item.adBreaksDurationTime]]),r[23]||(r[23]=e("label",{for:"adBreaksDurationTime",class:"small fw-bold"},"Total Ad Breaks",-1))])]),e("div",Cp,[e("div",xp,[E(e("input",{"onUpdate:modelValue":r[12]||(r[12]=w=>d.item.totalProgramTemplateDurationTime=w),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Q,d.item.totalProgramTemplateDurationTime]]),r[24]||(r[24]=e("label",{for:"totalProgramTemplateDurationTime",class:"small fw-bold"},"Total Program Duration",-1))])])])])])])])],2),e("div",{class:le([I("adBreaks-tab"),"tab-pane fade"]),id:"adBreaks",role:"tabpanel","aria-labelledby":"adBreaks-tab"},[e("div",Vp,[e("div",Pp,[e("table",Op,[r[26]||(r[26]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Offset"),e("th",null,"Duration")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.adBreaks,(w,c)=>(t(),s("tr",{key:w.programTemplateAdBreakId},[e("td",Ap,v(c+1),1),e("td",null,v(o(M).moment.utc(w.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(M).moment.utc(w.durationInMillis).format("HH:mm:ss")),1)]))),128))]),_:1},512),[[Te,d.item.adBreaks.length>0]])])])])],2),e("div",{class:le([I("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Up,[e("pre",null,v(d.item.programs),1)])],2)])])])):A("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Dp=["disabled"],Lp={class:"row row-cols-1 row-cols-sm-3"},Ep={class:"col-sm-6"},qp={class:"form-floating mb-2"},Bp={key:0,class:"d-block invalid-feedback"},Np={class:"col-sm-3"},Rp={class:"form-floating mb-2"},Fp={key:0,class:"d-block invalid-feedback"},zp={class:"col-sm-3"},Gp={class:"form-floating mb-2"},jp={key:0,class:"d-block invalid-feedback"},Yp={class:"row row-cols-1 row-cols-sm-2"},Wp={class:"col"},Kp={class:"form-floating mb-2"},Jp=["value"],Qp={key:0,class:"d-block invalid-feedback"},Xp={class:"col"},Zp={class:"form-floating mb-2"},ev=["value"],tv={key:0,class:"d-block invalid-feedback"},sv={__name:"add",props:{urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel"}),H=i,p=fe({lookups:{sourceLocations:[],vodSources:[]},item:{name:"",tier:"STANDARD",playbackMode:"LINEAR",fillerSlateSourceLocationId:null,fillerSlateVodSourceId:null,policy:null}}),x={item:{name:{title:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},tier:{title:te.withMessage("Tier is required.",oe),$autoDirty:!0,$lazy:!0},playbackMode:{title:te.withMessage("PlaybackMode is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateSourceLocationId:{title:te.withMessage("Filler Slate Source Location is required.",oe),$autoDirty:!0,$lazy:!0},fillerSlateVodSourceId:{title:te.withMessage("Filler Slate Vod Source is required.",oe),$autoDirty:!0,$lazy:!0},policy:{title:te.withMessage("Policy is required.",oe),$autoDirty:!0,$lazy:!0}}},h=$e(x,p);de(async()=>{await W()});const W=async()=>{try{await F.get("/api/v1/sourcelocations/lookup/").then(I=>{p.lookups.sourceLocations=I.data,p.lookups.sourceLocations.length===1&&(p.item.fillerSlateSourceLocationId=p.lookups.sourceLocations[0].id)}),p.item.fillerSlateSourceLocationId&&await d(p.item.fillerSlateSourceLocationId)}catch(b){C.value=P.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{}},X=async()=>{p.item.fillerSlateVodSourceId=null,await d(p.item.fillerSlateSourceLocationId)},d=async b=>{try{let I=`/api/v1/vodSources/lookup/source-location/${b}/?category=2`;await F.get(I).then(m=>{p.lookups.vodSources=m.data})}catch(I){C.value=P.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},g=()=>{if(p.item.name){const b=`{"Version":"2012-10-17","Statement": [{"Sid":"AllowAnonymous","Effect":"Allow","Principal":"*","Action":"mediatailor:GetManifest","Resource":"arn:aws:mediatailor:us-west-2:799350865909:channel/${p.item.name}"}]}`;p.item.policy=b}else p.item.policy=null},K=async()=>{const b=p;if(V.value)return;if(!await h.value.$validate()){window.scrollTo(0,0);return}try{V.value=!0,C.value="";const m=P.clone(b.item);await F.post("/api/v1/channels/",m).then(S=>{N.success("Add Channel","Channel added.",{onClose:async()=>{const T=`${H.urlView}/${S.data}`;await G.push(T)}})})}catch(m){C.value=P.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{V.value=!1}};return(b,I)=>{const m=ee("router-link"),S=ee("PageHeader"),T=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(S,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(_)},{default:L(()=>[e("button",{disabled:o(h).$dirty&&o(h).$invalid,onClick:I[0]||(I[0]=u=>K()),class:"btn btn-primary"},I[8]||(I[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Dp),B(m,{to:H.urlMain,class:"btn btn-secondary ms-2"},{default:L(()=>I[9]||(I[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(T,{errorMessage:o(C),vuelidate:o(h)},{default:L(()=>[e("div",null,[e("div",Lp,[e("div",Ep,[e("div",qp,[E(e("input",{"onUpdate:modelValue":I[1]||(I[1]=u=>p.item.name=u),onChange:I[2]||(I[2]=u=>g()),id:"name",class:"form-control",placeholder:"name"},null,544),[[Q,p.item.name]]),I[10]||(I[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(h).item.name.$error?(t(),s("div",Bp,[(t(!0),s(U,null,D(o(h).item.name.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):A("",!0)])]),e("div",Np,[e("div",Rp,[E(e("input",{"onUpdate:modelValue":I[3]||(I[3]=u=>p.item.tier=u),id:"tier",class:"form-control",placeholder:"tier",readonly:""},null,512),[[Q,p.item.tier]]),I[11]||(I[11]=e("label",{for:"tier",class:"small fw-bold"},"Tier",-1)),o(h).item.tier.$error?(t(),s("div",Fp,[(t(!0),s(U,null,D(o(h).item.tier.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):A("",!0)])]),e("div",zp,[e("div",Gp,[E(e("input",{"onUpdate:modelValue":I[4]||(I[4]=u=>p.item.playbackMode=u),id:"playbackMode",class:"form-control",placeholder:"playbackMode",readonly:""},null,512),[[Q,p.item.playbackMode]]),I[12]||(I[12]=e("label",{for:"playbackMode",class:"small fw-bold"},"PlaybackMode",-1)),o(h).item.playbackMode.$error?(t(),s("div",jp,[(t(!0),s(U,null,D(o(h).item.playbackMode.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):A("",!0)])])]),I[15]||(I[15]=e("div",{class:"mt-2"},[e("h5",null,"Filler Slate")],-1)),e("div",Yp,[e("div",Wp,[e("div",Kp,[E(e("select",{"onUpdate:modelValue":I[5]||(I[5]=u=>p.item.fillerSlateSourceLocationId=u),onChange:I[6]||(I[6]=u=>X()),class:"form-select",id:"fillerSlateSourceLocationId"},[(t(!0),s(U,null,D(p.lookups.sourceLocations,u=>(t(),s("option",{value:u.id},v(u.name),9,Jp))),256))],544),[[ue,p.item.fillerSlateSourceLocationId]]),I[13]||(I[13]=e("label",{for:"fillerSlateSourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(h).item.fillerSlateSourceLocationId.$error?(t(),s("div",Qp,[(t(!0),s(U,null,D(o(h).item.fillerSlateSourceLocationId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):A("",!0)])]),e("div",Xp,[e("div",Zp,[E(e("select",{"onUpdate:modelValue":I[7]||(I[7]=u=>p.item.fillerSlateVodSourceId=u),class:"form-select",id:"fillerSlateVodSourceId"},[(t(!0),s(U,null,D(p.lookups.vodSources,u=>(t(),s("option",{value:u.id},v(u.name),9,ev))),256))],512),[[ue,p.item.fillerSlateVodSourceId]]),I[14]||(I[14]=e("label",{for:"fillerSlateVodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(h).item.fillerSlateVodSourceId.$error?(t(),s("div",tv,[(t(!0),s(U,null,D(o(h).item.fillerSlateVodSourceId.$errors,u=>(t(),s("div",{key:u.$uid},v(u.$message),1))),128))])):A("",!0)])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},ov={components:{Page:We},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function av(i,f,_,V,k,R){const C=ee("Page");return t(),ce(C,{id:_.id,urlView:_.urlView},null,8,["id","urlView"])}const lv=Me(ov,[["render",av]]),nv={class:"ms-1"},rv={class:"input-group"},iv={class:"table-responsive border shadow-sm"},dv={class:"table table-hover mb-0"},uv=["textContent"],cv={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},mv={key:0,class:"badge bg-success"},fv={key:1,class:"badge bg-secondary"},pv="/api/v1/channels/search",vv={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(i){Se("$config");const _=ye().user,{appTitle:V,pageTitle:k,busy:R,infoMessage:C,warningMessage:G,errorMessage:F,router:P,axios:N,utils:Y,toasts:M,close:H,security:p,filter:x,initializeFilter:h,getQuery:W,saveQuery:X,search:d,getRowNumber:g,setSelected:K,isSelected:b}=De({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${_==null?void 0:_.userId}/Channels/search`,baseUrl:pv,filter:{updateUrl:!0}});return de(async()=>{h(),await d()}),(I,m)=>{const S=ee("router-link"),T=ee("PageHeader"),u=ee("m-pagination"),r=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(T,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(k)},{default:L(()=>[B(S,{to:i.urlAdd,class:"btn btn-primary"},{default:L(()=>m[3]||(m[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",nv,[e("div",rv,[E(e("input",{"onUpdate:modelValue":m[0]||(m[0]=a=>o(x).query.criteria=a),onKeyup:m[1]||(m[1]=He(a=>o(d)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[Q,o(x).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:m[2]||(m[2]=a=>o(d)(1))},m[4]||(m[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])]),_:1},8,["pageTitle"]),B(r,{errorMessage:o(F)},{default:L(()=>[e("div",iv,[e("table",dv,[m[5]||(m[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(o(x).items,(a,n)=>(t(),s("tr",{key:a.channelId},[e("td",{textContent:v(o(g)(n)),class:"text-center"},null,8,uv),e("td",null,[B(S,{to:`${i.urlView}/${a.channelId}`,class:"d-inline-block text-truncate text-decoration-none"},{default:L(()=>[a.arn?(t(),s("span",cv)):A("",!0),z(v(a.name),1)]),_:2},1032,["to"]),e("div",null,[a.state==="RUNNING"?(t(),s("span",mv,v(a.state),1)):a.state==="STOPPED"?(t(),s("span",fv,v(a.state),1)):A("",!0)])]),e("td",null,v(a.playbackMode),1),e("td",null,v(a.tier),1)]))),128))]),_:1},512),[[Te,o(x).items.length>0]])])]),B(u,{filter:o(x),search:o(d),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},gv=["id"],bv={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},yv={class:"modal-content"},$v={class:"modal-header"},wv={class:"modal-title"},hv={class:"modal-body"},kv={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},_v=["innerHTML"],Sv={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Tv={class:"container"},Mv={class:"col"},Iv={class:"form-floating mb-2"},Cv=["value"],xv={class:"row row-cols-1 row-cols-sm-2"},Vv={class:"col"},Pv={class:"form-floating mb-2"},Ov={key:0,class:"d-block invalid-feedback"},Av={class:"col"},Uv={class:"form-floating mb-2"},Hv={key:0,class:"d-block invalid-feedback"},Dv={key:0},Lv={class:"row row-cols-1 row-cols-sm-3"},Ev={class:"col"},qv={class:"form-floating mb-2"},Bv={class:"col"},Nv={class:"form-floating mb-2"},Rv={class:"col"},Fv={class:"form-floating mb-2"},zv={class:"row row-cols-1 row-cols-sm-2"},Gv={class:"col"},jv={class:"form-floating mb-2"},Yv={class:"col"},Wv={class:"form-floating mb-2"},Kv={class:"row row-cols-1 row-cols-sm-2"},Jv={class:"col"},Qv={class:"form-floating mb-2"},Xv={class:"col"},Zv={class:"form-floating mb-2"},eg={key:1},tg={class:"table-responsive border mt-1"},sg={class:"table mb-0"},og=["onUpdate:modelValue"],ag=["value"],lg={class:"modal-footer"},ng=["disabled"],rg={__name:"_addProgramFromTemplate",emits:["onClose"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program from Template"}),W=_,X=re(),d=re("modalAddProgramFromTemplate"),g=fe({eventId:null,lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[],programTemplates:[]},selected:{programTemplatee:null,channel:null},item:{programTemplateId:null,name:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),K={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=$e(K,g);de(async()=>{b.value.$reset()});const I=async(J,y,l)=>{X.value=J;const q=g;G.value.clear(),N.value="";const se=H.moment(l),j=se.format("YYYY-MM-DD HH:mm"),we=se.format("YYYYMMDD_HHmm")+"_PRG_";q.eventId=y,q.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},q.selected={programTemplate:null},q.item={programTemplateId:null,name:we,dateScheduledStart:j,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await T(),await u(),b.value.$reset();var ge=document.getElementById(d.value),Le=ke.getOrCreateInstance(ge);Le.show()},m=async J=>{const y=g.selected.channel.programs;if(J&&y.find(Le=>Le.name===g.item.name)){alert(`Program name = [${g.item.name}] already exists.`);return}if(!J){W("onClose",{eventId:g.eventId},J);var j=document.getElementById(d.value),we=ke.getOrCreateInstance(j);we.hide();return}const l=g,q=H.moment(l.item.dateScheduledStart).utc().format(),se=H.moment(l.item.dateScheduledStart).add(l.selected.programTemplate.totalProgramTemplateDurationInMillis,"milliseconds").utc().format(),ne={eventId:l.eventId,programTemplateId:l.selected.programTemplate.programTemplateId,channelId:l.selected.channel.channelId,name:l.item.name,dateScheduledStart:q,dateScheduledEnd:se,adBreaks:l.selected.programTemplate.adBreaks.map(ge=>({sourceLocationId:l.selected.programTemplate.sourceLocationId,vodSourceId:ge.vodSourceId,offsetMillis:ge.offsetMillis,durationInMillis:ge.durationInMillis}))};W("onClose",ne,J);var j=document.getElementById(d.value),we=ke.getOrCreateInstance(j);we.hide()},S=async()=>{await m(!0)},T=async()=>{try{const J=`/api/v1/channels/${X.value}/`;await M.get(J).then(y=>{g.selected.channel=y.data})}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},u=async()=>{await $(),await Z(),await r()},r=async()=>{try{const J=`/api/v1/programTemplates/lookup/by-channel/${X.value}`;await M.get(J).then(y=>{g.lookups.programTemplates=y.data,g.lookups.programTemplates.length===1&&(g.item.programTemplateId=g.lookups.programTemplates[0].id)}),g.item.programTemplateId&&await a()}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},a=async()=>{await n(g.item.programTemplateId)},n=async J=>{try{const y=`/api/v1/programTemplates/${J}/`;await M.get(y).then(se=>{g.selected.programTemplate=se.data;const ne=g.selected.programTemplate;ne.startOffsetTime=H.moment.utc(ne.startOffsetMillis).format("HH:mm:ss"),ne.endOffsetTime=H.moment.utc(ne.endOffsetMillis).format("HH:mm:ss"),ne.durationTime=H.moment.utc(ne.durationInMillis).format("HH:mm:ss"),ne.adBreaksDurationTime=H.moment.utc(ne.adBreaksDurationInMillis).format("HH:mm:ss"),ne.totalProgramTemplateDurationTime=H.moment.utc(ne.totalProgramTemplateDurationInMillis).format("HH:mm:ss"),ne.adBreaks.forEach(j=>{j.vodSourceId=null})});const l=g,q=l.selected.channel.outputs[0].outputType;await c(l.selected.programTemplate.sourceLocationId,q)}catch(y){N.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},$=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(y=>{g.lookups.sourceLocations=y.data,g.lookups.sourceLocations.length===1&&(g.item.sourceLocationId=g.lookups.sourceLocations[0].id)}),g.item.sourceLocationId&&await w(g.item.sourceLocationId)}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},w=async J=>{try{let y=`/api/v1/vodSources/lookup/source-location/${J}`;await M.get(y).then(l=>{g.lookups.vodSources=l.data})}catch(y){N.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},c=async(J,y)=>{try{let l=`/api/v1/vodsources/lookup/source-location/${J}/output-type/${y}`;await M.get(l).then(q=>{g.lookups.adBreakVodSources=q.data})}catch(l){N.value=H.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{}},Z=async()=>{try{const J=`/api/v1/programs/lookup/?channelId=${X.value}`;await M.get(J).then(y=>{g.lookups.channelPrograms=y.data;const l=g.lookups.channelPrograms.length})}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}};return f({open:I,close:m}),(J,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-hidden":"true"},[e("div",bv,[e("div",yv,[e("div",$v,[e("h5",wv,[y[14]||(y[14]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=l=>m(!1)),"aria-label":"Close"})]),e("div",hv,[o(N)?(t(),s("div",kv,[y[15]||(y[15]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,_v)])):A("",!0),o(G).size>0?(t(),s("div",Sv,[y[16]||(y[16]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),l=>(t(),s("li",null,v(l),1))),256))])])):A("",!0),e("div",Tv,[e("div",Mv,[e("div",Iv,[E(e("select",{"onUpdate:modelValue":y[1]||(y[1]=l=>g.item.programTemplateId=l),class:"form-select",onChange:y[2]||(y[2]=l=>a()),id:"sourceLocationId"},[(t(!0),s(U,null,D(g.lookups.programTemplates,l=>(t(),s("option",{value:l.id}," ["+v(o(H).moment.utc(l.totalProgramTemplateDurationInMillis).format("HH:mm:ss"))+"] "+v(l.name),9,Cv))),256))],544),[[ue,g.item.programTemplateId]]),y[17]||(y[17]=e("label",{for:"programTemplateId",class:"small fw-bold"},"Program Template",-1))])]),e("div",xv,[e("div",Vv,[e("div",Pv,[E(e("input",{"onUpdate:modelValue":y[3]||(y[3]=l=>g.item.name=l),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),y[18]||(y[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Ov,[(t(!0),s(U,null,D(o(b).item.name.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])]),e("div",Av,[e("div",Uv,[E(e("input",{"onUpdate:modelValue":y[4]||(y[4]=l=>g.item.dateScheduledStart=l),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Q,g.item.dateScheduledStart]]),y[19]||(y[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",Hv,[(t(!0),s(U,null,D(o(b).item.dateScheduledStart.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])])]),g.selected.programTemplate?(t(),s("div",Dv,[e("div",Lv,[e("div",Ev,[e("div",qv,[E(e("input",{"onUpdate:modelValue":y[5]||(y[5]=l=>g.selected.programTemplate.startOffsetTime=l),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Q,g.selected.programTemplate.startOffsetTime]]),y[20]||(y[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Bv,[e("div",Nv,[E(e("input",{"onUpdate:modelValue":y[6]||(y[6]=l=>g.selected.programTemplate.endOffsetTime=l),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Q,g.selected.programTemplate.endOffsetTime]]),y[21]||(y[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Rv,[e("div",Fv,[E(e("input",{"onUpdate:modelValue":y[7]||(y[7]=l=>g.selected.programTemplate.durationTime=l),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,g.selected.programTemplate.durationTime]]),y[22]||(y[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",zv,[e("div",Gv,[e("div",jv,[E(e("input",{"onUpdate:modelValue":y[8]||(y[8]=l=>g.selected.programTemplate.adBreaksDurationTime=l),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Q,g.selected.programTemplate.adBreaksDurationTime]]),y[23]||(y[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Yv,[e("div",Wv,[E(e("input",{"onUpdate:modelValue":y[9]||(y[9]=l=>g.selected.programTemplate.totalProgramTemplateDurationTime=l),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Q,g.selected.programTemplate.totalProgramTemplateDurationTime]]),y[24]||(y[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])]),e("div",Kv,[e("div",Jv,[e("div",Qv,[E(e("input",{"onUpdate:modelValue":y[10]||(y[10]=l=>g.selected.programTemplate.sourceLocation.name=l),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.selected.programTemplate.sourceLocation.name]]),y[25]||(y[25]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])]),e("div",Xv,[e("div",Zv,[E(e("input",{"onUpdate:modelValue":y[11]||(y[11]=l=>g.selected.programTemplate.vodSource.name=l),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.selected.programTemplate.vodSource.name]]),y[26]||(y[26]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])])])):A("",!0),y[29]||(y[29]=e("hr",null,null,-1)),g.selected.programTemplate?(t(),s("div",eg,[y[28]||(y[28]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Break ")])],-1)),e("div",tg,[e("table",sg,[y[27]||(y[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(g.selected.programTemplate.adBreaks,(l,q)=>(t(),s("tr",null,[e("td",null,v(q+1),1),e("td",null,v(o(H).moment.utc(l.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(H).moment.utc(l.durationInMillis).format("HH:mm:ss")),1),e("td",null,[E(e("select",{"onUpdate:modelValue":se=>l.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,D(g.lookups.adBreakVodSources,se=>(t(),s(U,null,[se.durationInMillis===l.durationInMillis?(t(),s("option",{key:0,value:se.id}," ["+v(o(H).moment.utc(se.durationInMillis).format("HH:mm:ss"))+"] "+v(se.name),9,ag)):A("",!0)],64))),256))],8,og),[[ue,l.vodSourceId]])])]))),256))])])])])):A("",!0)])]),e("div",lg,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:y[12]||(y[12]=l=>S()),class:"btn btn-primary",type:"button"},y[30]||(y[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ng),e("button",{onClick:y[13]||(y[13]=l=>m(!1)),class:"btn btn-secondary ms-1"},y[31]||(y[31]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,gv))}},ig=["id"],dg={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ug={class:"modal-content"},cg={class:"modal-header"},mg={class:"modal-title"},fg={class:"modal-body"},pg={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},vg=["innerHTML"],gg={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},bg={key:2,class:"container"},yg={class:"row row-cols-1 row-cols-sm-2"},$g={key:0,class:"col"},wg={class:"form-floating mb-2"},hg={key:1,class:"col"},kg={class:"form-floating mb-2"},_g={class:"row row-cols-1 row-cols-sm-3"},Sg={class:"col"},Tg={class:"form-floating mb-2"},Mg={id:"name",class:"form-control",placeholder:"Name"},Ig={key:0,class:"text-wrap"},Cg={key:0,class:"d-block invalid-feedback"},xg={class:"col"},Vg={class:"form-floating mb-2"},Pg={key:0,class:"d-block invalid-feedback"},Og={class:"col"},Ag={class:"form-floating mb-2"},Ug={key:0,class:"d-block invalid-feedback"},Hg={class:"row row-cols-1 row-cols-sm-3"},Dg={class:"col"},Lg={class:"form-floating mb-2"},Eg={class:"col"},qg={class:"form-floating mb-2"},Bg={class:"col"},Ng={class:"form-floating mb-2"},Rg={class:"row row-cols-1 row-cols-sm-2"},Fg={class:"col"},zg={class:"form-floating mb-2"},Gg={class:"col"},jg={class:"form-floating mb-2"},Yg={key:0},Wg={class:"table-responsive border mt-1"},Kg={class:"table mb-0"},Jg=["onUpdate:modelValue"],Qg=["value"],Xg={class:"modal-footer"},Zg=["disabled"],lt={__name:"_editProgram",emits:["onClose"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Program"}),W=_,X=re(),d=re("modalEditProgram"),g=fe({lookups:{adBreakSourceLocations:[],adBreakVodSources:[]},item:{programTemplateId:null,name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),K={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=$e(K,g);de(async()=>{b.value.$reset()});const I=async(a,n)=>{X.value=a;const $=g;G.value.clear(),N.value="",$.lookups={adBreakSourceLocations:[],adBreakVodSources:[]},$.item=null,await T(),g.item.dateScheduledStart=null,await u(),b.value.$reset();var w=document.getElementById(d.value),c=ke.getOrCreateInstance(w);c.show()},m=async a=>{if(!a){W("onClose",a);var c=document.getElementById(d.value),Z=ke.getOrCreateInstance(c);Z.hide();return}const n=g,$=H.moment(n.item.dateScheduledStart).utc().format(),w={programId:X.value,name:n.item.name,dateScheduledStart:$,adBreaks:n.item.adBreaks.map(J=>({sourceLocationId:n.item.sourceLocationId,vodSourceId:J.vodSourceId,offsetMillis:J.offsetMillis,durationInMillis:J.durationInMillis}))};try{await M.put("/api/v1/programs/",w).then(y=>{p.success("Edit Program","Program was edited.")})}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0);return}finally{}W("onClose",a);var c=document.getElementById(d.value),Z=ke.getOrCreateInstance(c);Z.hide()},S=async()=>{await m(!0)},T=async()=>{try{const a=`/api/v1/programs/${X.value}/`;await M.get(a).then(w=>{g.item=w.data;const c=g.item,y=H.moment(c.dateScheduledStart).format("YYYY-MM-DD HH:mm");g.item.dateScheduledStart=y,c.startOffsetTime=H.moment.utc(c.startOffsetMillis).format("HH:mm:ss"),c.endOffsetTime=H.moment.utc(c.endOffsetMillis).format("HH:mm:ss"),c.durationTime=H.moment.utc(c.durationInMillis).format("HH:mm:ss"),c.adBreaksDurationTime=H.moment.utc(c.adBreaksDurationInMillis).format("HH:mm:ss"),c.totalProgramTemplateDurationTime=H.moment.utc(c.totalProgramTemplateDurationInMillis).format("HH:mm:ss")});const n=g,$=n.item.channel.outputs[0].outputType;await r(n.item.sourceLocationId,$)}catch(a){N.value=H.getErrorMessageAsHtml(a),window.scrollTo(0,0)}finally{}},u=async()=>{},r=async(a,n)=>{try{let $=`/api/v1/vodsources/lookup/source-location/${a}/output-type/${n}`;await M.get($).then(w=>{g.lookups.adBreakVodSources=w.data})}catch($){N.value=H.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}};return f({open:I,close:m}),(a,n)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",dg,[e("div",ug,[e("div",cg,[e("h5",mg,[n[12]||(n[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:n[0]||(n[0]=$=>m(!1)),"aria-label":"Close"})]),e("div",fg,[o(N)?(t(),s("div",pg,[n[13]||(n[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,vg)])):A("",!0),o(G).size>0?(t(),s("div",gg,[n[14]||(n[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),$=>(t(),s("li",null,v($),1))),256))])])):A("",!0),g.item?(t(),s("div",bg,[e("div",yg,[g.item.sourceLocation?(t(),s("div",$g,[e("div",wg,[E(e("input",{"onUpdate:modelValue":n[1]||(n[1]=$=>g.item.sourceLocation.name=$),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.item.sourceLocation.name]]),n[15]||(n[15]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1))])])):A("",!0),g.item.vodSource?(t(),s("div",hg,[e("div",kg,[E(e("input",{"onUpdate:modelValue":n[2]||(n[2]=$=>g.item.vodSource.name=$),id:"name",class:"form-control",readonly:""},null,512),[[Q,g.item.vodSource.name]]),n[16]||(n[16]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1))])])):A("",!0)]),e("div",_g,[e("div",Sg,[e("div",Tg,[e("div",Mg,[g.item.relativeProgram?(t(),s("span",Ig,v(g.item.relativeProgram.name),1)):A("",!0)]),n[17]||(n[17]=e("label",{for:"name",class:"small fw-bold"},"Relative Program",-1)),o(b).item.name.$error?(t(),s("div",Cg,[(t(!0),s(U,null,D(o(b).item.name.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):A("",!0)])]),e("div",xg,[e("div",Vg,[E(e("input",{"onUpdate:modelValue":n[3]||(n[3]=$=>g.item.name=$),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),n[18]||(n[18]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",Pg,[(t(!0),s(U,null,D(o(b).item.name.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):A("",!0)])]),e("div",Og,[e("div",Ag,[E(e("input",{"onUpdate:modelValue":n[4]||(n[4]=$=>g.item.dateScheduledStart=$),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Q,g.item.dateScheduledStart]]),n[19]||(n[19]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",Ug,[(t(!0),s(U,null,D(o(b).item.dateScheduledStart.$errors,$=>(t(),s("div",{key:$.$uid},v($.$message),1))),128))])):A("",!0)])])]),e("div",null,[e("div",Hg,[e("div",Dg,[e("div",Lg,[E(e("input",{"onUpdate:modelValue":n[5]||(n[5]=$=>g.item.startOffsetTime=$),type:"text",class:"form-control",id:"startOffsetTime",readonly:""},null,512),[[Q,g.item.startOffsetTime]]),n[20]||(n[20]=e("label",{for:"startOffsetTime"},"Start Offset",-1))])]),e("div",Eg,[e("div",qg,[E(e("input",{"onUpdate:modelValue":n[6]||(n[6]=$=>g.item.endOffsetTime=$),type:"text",class:"form-control",id:"endOffsetTime",readonly:""},null,512),[[Q,g.item.endOffsetTime]]),n[21]||(n[21]=e("label",{for:"endOffsetTime"},"End Offset",-1))])]),e("div",Bg,[e("div",Ng,[E(e("input",{"onUpdate:modelValue":n[7]||(n[7]=$=>g.item.durationTime=$),type:"text",class:"form-control",id:"durationTime",readonly:""},null,512),[[Q,g.item.durationTime]]),n[22]||(n[22]=e("label",{for:"durationTime"},"Clip Duration",-1))])])]),e("div",Rg,[e("div",Fg,[e("div",zg,[E(e("input",{"onUpdate:modelValue":n[8]||(n[8]=$=>g.item.adBreaksDurationTime=$),type:"text",class:"form-control",id:"adBreaksDurationTime",readonly:""},null,512),[[Q,g.item.adBreaksDurationTime]]),n[23]||(n[23]=e("label",{for:"adBreaksDurationTime"},"Ad Breaks Total Duration",-1))])]),e("div",Gg,[e("div",jg,[E(e("input",{"onUpdate:modelValue":n[9]||(n[9]=$=>g.item.totalProgramTemplateDurationTime=$),type:"text",class:"form-control",id:"totalProgramTemplateDurationTime",readonly:""},null,512),[[Q,g.item.totalProgramTemplateDurationTime]]),n[24]||(n[24]=e("label",{for:"totalProgramTemplateDurationTime"},"Program Total Duration",-1))])])])]),n[27]||(n[27]=e("hr",null,null,-1)),g.item?(t(),s("div",Yg,[n[26]||(n[26]=e("div",{class:"d-flex flex-row justify-content-between"},[e("fieldset",null,[e("legend",null," Ad Breaks ")])],-1)),e("div",Wg,[e("table",Kg,[n[25]||(n[25]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset"),e("th",null,"Duration"),e("th",null,"VOD Source")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(g.item.adBreaks,($,w)=>(t(),s("tr",null,[e("td",null,v(w+1),1),e("td",null,v(o(H).moment.utc($.offsetMillis).format("HH:mm:ss")),1),e("td",null,v(o(H).moment.utc($.durationInMillis).format("HH:mm:ss")),1),e("td",null,[E(e("select",{"onUpdate:modelValue":c=>$.vodSourceId=c,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,D(g.lookups.adBreakVodSources,c=>(t(),s(U,null,[c.durationInMillis===$.durationInMillis?(t(),s("option",{key:0,value:c.id}," ["+v(o(H).moment.utc(c.durationInMillis).format("HH:mm:ss"))+"] "+v(c.name),9,Qg)):A("",!0)],64))),256))],8,Jg),[[ue,$.vodSourceId]])])]))),256))])])])])):A("",!0)])):A("",!0)]),e("div",Xg,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:n[10]||(n[10]=$=>S()),class:"btn btn-primary ms-2",type:"button"},n[28]||(n[28]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Zg),e("button",{onClick:n[11]||(n[11]=$=>m(!1)),class:"btn btn-secondary ms-1"},n[29]||(n[29]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,ig))}},e1={__name:"index",props:{id:{type:String,required:!0},urlView:{type:String,default:"/channels/view"},urlMain:{type:String,default:"/channels"}},setup(i){const{appTitle:f,pageTitle:_,busy:V,infoMessage:k,warningMessage:R,errorMessage:C,router:G,axios:F,utils:P,toasts:N,close:Y,security:M}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Schedule Channel Programs"}),H=i,p=re(null),x=re(null),h=re(null),W={viewType:"Week",cellDuration:15,startDate:Pe.DayPilot.Date.today(),onTimeRangeSelected:T=>{var u=T.control;const r={start:T.start,end:T.end,id:Pe.DayPilot.guid(),text:"NEW",tags:{type:"new"}};u.events.add(r);var a=u.events.find(r.id);I(a)},onBeforeEventRender:T=>{if(T.data.barColor="green",!!T.data.tags)switch(T.data.tags.type){case"new":T.data.barColor="yellow";break;case"business":T.data.barColor="red";break;case"personal":T.data.barColor="greem";break;case"vacation":T.data.barColor="black";break;default:T.data.barColor="orange";break}},eventDeleteHandling:"Disabled",onEventMoved:async T=>{const u=T.newStart.value,r=T.e.id(),a=P.moment(u).utc().format();try{let n="/api/v1/programs/scheduled-date-start";const $={programId:r,dateScheduledStart:a};await F.put(n,$).then(w=>{N.success("Program date scheduled start was edited.")})}catch(n){C.value=P.getErrorMessageAsHtml(n),window.scrollTo(0,0);return}finally{}await K()},onEventResized:()=>{console.log("Event resized")},onEventClicked:async T=>{var u=T.e.id();S(u)},contextMenu:new Pe.DayPilot.Menu([{text:"Clone",onClick:async T=>{const u=T.source.id();try{let r=`/api/v1/programs/${u}/clone`;await F.post(r).then(a=>{N.success("Clone Program","Program was cloned.")})}catch(r){C.value=P.getErrorMessageAsHtml(r),window.scrollTo(0,0);return}finally{await K()}}},{text:"Delete",onClick:async T=>{if(!confirm("Do you want to remove this program?"))return;const r=T.source.id();try{let a=`/api/v1/programs/${r}/`;await F.delete(a).then(n=>{N.success("Delete Program","Program was deleted.")}),p.value.control.events.remove(T.source)}catch(a){C.value=P.getErrorMessageAsHtml(a),window.scrollTo(0,0);return}finally{await K()}}}])},X=re([]),d=()=>{p.value.control.update({events:X.value})},g=fe({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}});de(async()=>{await K()});const K=async()=>{await b(),await d()},b=async()=>{const T=g;if(!V.value)try{V.value=!0,C.value="";const u=`/api/v1/channels/${H.id}/`;await F.get(u).then(r=>{T.item=r.data;const a=T.item.outputs,n=T.item.programs.map($=>{let w=`${$.name}`,c=`[${$.name}]`;return $.relativeProgram&&(c+=` => [${$.relativeProgram.name}]`),{start:P.moment($.dateScheduledStart).utc(!0).format(),end:P.moment($.dateScheduledEnd).utc(!0).format(),id:$.programId,text:w,toolTip:c}});X.value=n})}catch(u){C.value=P.getErrorMessageAsHtml(u),window.scrollTo(0,0)}finally{V.value=!1}},I=T=>{x.value.open(H.id,T.id(),T.start().value)},m=async(T,u)=>{var r=p.value,a=r.control.events.find(T.eventId);if(!u&&a){p.value.control.events.remove(a);return}r.control.events.find(J=>J.text()==T.name)&&(alert("Program already exists in this channel. Removing in the calendar."),p.value.control.events.remove(a));const $=P.moment(T.dateScheduledStart).utc(!0).format(),w=P.moment(T.dateScheduledEnd).utc(!0).format(),c=new Pe.DayPilot.Date($),Z=new Pe.DayPilot.Date(w);a.text(T.name),a.start(new Pe.DayPilot.Date(c)),a.end(new Pe.DayPilot.Date(Z)),a.data.tags.program=T,a.commit(),p.value.control.update(),await F.post("/api/v1/programs/",T).then(J=>{N.success("Add New Program",`Program [${T.name}] was added to this channel.`)},J=>{const y=P.getErrorMessageAsHtml(J);alert(y)}),await K()},S=(T,u)=>{h.value.open(T,u)};return(T,u)=>{const r=ee("router-link"),a=ee("PageHeader"),n=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(a,{"page-icon":"fas fa-fw fa-calendar-plus",pageTitle:o(_)},{default:L(()=>[e("button",{onClick:u[0]||(u[0]=$=>K()),class:"btn btn-secondary ms-1"},u[1]||(u[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),B(r,{to:`${i.urlView}/${i.id}`,class:"btn btn-secondary ms-1"},{default:L(()=>u[2]||(u[2]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])]),_:1},8,["pageTitle"]),B(n,{errorMessage:o(C),vuelidate:T.v$},{default:L(()=>[e("div",null,[B(o(Pe.DayPilotCalendar),{id:"dp",config:W,ref_key:"calendarRef",ref:p},null,512),B(rg,{ref_key:"modalAddProgram",ref:x,onOnClose:m},null,512),B(lt,{ref_key:"modalEditProgram",ref:h,onOnClose:K},null,512)])]),_:1},8,["errorMessage","vuelidate"]),u[3]||(u[3]=z(" > "))])]),_:1})}}},t1=["id"],s1={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},o1={class:"modal-content"},a1={class:"modal-header"},l1={class:"modal-title"},n1={class:"modal-body"},r1={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},i1=["innerHTML"],d1={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},u1={class:"container"},c1={class:"row row-cols-1 row-cols-sm-3"},m1={class:"col"},f1={class:"form-floating mb-2"},p1=["disabled"],v1=["value"],g1={class:"col"},b1={class:"form-floating mb-2"},y1={key:0,class:"d-block invalid-feedback"},$1={class:"col"},w1={class:"form-floating mb-2"},h1={key:0,class:"d-block invalid-feedback"},k1={class:"row row-cols-sm-2"},_1={class:"col"},S1={class:"form-floating mb-2"},T1=["value"],M1={key:0,class:"d-block invalid-feedback"},I1={class:"col"},C1={class:"form-floating mb-2"},x1=["value"],V1={key:0,class:"d-block invalid-feedback"},P1={class:"col"},O1={class:"input-group mb-1"},A1={class:"form-floating"},U1={key:0,class:"input-group-text"},H1={key:0},D1={key:1},L1={key:2},E1={key:3,class:"d-block invalid-feedback"},q1={class:"col"},B1={class:"input-group mb-1"},N1={class:"form-floating"},R1={key:0,class:"input-group-text"},F1={key:0},z1={key:1},G1={key:2,class:"d-block invalid-feedback"},j1={class:"table-responsive border mt-1"},Y1={class:"table"},W1={class:"input-group mb-1"},K1=["onUpdate:modelValue"],J1={key:0,class:"input-group-text"},Q1=["onUpdate:modelValue"],X1=["value"],Z1=["onUpdate:modelValue"],eb=["value"],tb=["onClick"],sb={class:"modal-footer"},ob=["disabled"],ab={__name:"_addProgram",emits:["refresh"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Program"}),W=_,X=re(),d=re("modalAddProgram"),g=fe({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),K={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:te.withMessage("Date Scheduled Start is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:te.withMessage("startOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:te.withMessage("endOffsetMillis is required.",oe),minValue:Ae(0),$autoDirty:!0,$lazy:!0}}},b=$e(K,g);de(async()=>{b.value.$reset()});const I=async J=>{X.value=J;const y=g;G.value.clear(),N.value="";const l=H.moment().local().add(2,"m"),se=l.format("YYYY-MM-DD HH:mm"),ne=l.format("YYYY_MM_DD")+"_PROGRAM_";y.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},y.item={name:ne,relativeProgramId:null,dateScheduledStart:se,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await T(),b.value.$reset();var j=document.getElementById(d.value),we=ke.getOrCreateInstance(j);we.show()},m=async()=>{var J=document.getElementById(d.value),y=ke.getOrCreateInstance(J);y.hide(),W("refresh")},S=async()=>{const J=g;if(R.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const q=J.item;delete q.vodSource,q.channelId=X.value;var l=q.dateScheduledStart;q.dateScheduledStart=H.moment(l).utc().format(),await M.post("/api/v1/programs/",q).then(se=>{p.success("Add Program","Program added to Channel",{async onClose(){}})}),await m()}catch(q){N.value=H.getErrorMessageAsHtml(q),window.scrollTo(0,0)}finally{R.value=!1}},T=async()=>{await u(),await a(),await $()},u=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(y=>{g.lookups.sourceLocations=y.data,g.lookups.sourceLocations.length===1&&(g.item.sourceLocationId=g.lookups.sourceLocations[0].id)}),g.item.sourceLocationId&&await r(g.item.sourceLocationId)}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},r=async J=>{try{let y=`/api/v1/vodSources/lookup/source-location/${J}`;await M.get(y).then(l=>{g.lookups.vodSources=l.data})}catch(y){N.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},a=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(y=>{g.lookups.adBreakSourceLocations=y.data})}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},n=async J=>{try{let y=`/api/v1/vodSources/lookup/source-location/${J}`;await M.get(y).then(l=>{g.lookups.adBreakVodSources=l.data})}catch(y){N.value=H.getErrorMessageAsHtml(y),window.scrollTo(0,0)}finally{}},$=async()=>{try{const J=`/api/v1/programs/lookup/?channelId=${X.value}`;await M.get(J).then(y=>{if(g.lookups.channelPrograms=y.data,g.lookups.channelPrograms.length===1){const q=g.lookups.channelPrograms[0];g.item.relativeProgramId=q.id}})}catch(J){N.value=H.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},w=()=>{const J={offsetMillis:0,sourceLocationId:null,vodSourceId:null},y=g.item.adBreaks.length;if(y>0){const l=g.item.adBreaks[y-1];J.offsetMillis=l.offsetMillis+1e4}g.item.adBreaks.push(J)},c=J=>{g.item.adBreaks.splice(J,1)},Z=()=>{const J=g.item.vodSource;g.item.vodSourceId=J.id};return f({open:I,close:m}),(J,y)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",s1,[e("div",o1,[e("div",a1,[e("h5",l1,[y[12]||(y[12]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:y[0]||(y[0]=l=>m()),"aria-label":"Close"})]),e("div",n1,[o(N)?(t(),s("div",r1,[y[13]||(y[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,i1)])):A("",!0),o(G).size>0?(t(),s("div",d1,[y[14]||(y[14]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),l=>(t(),s("li",null,v(l),1))),256))])])):A("",!0),e("div",u1,[e("div",c1,[e("div",m1,[e("div",f1,[E(e("select",{"onUpdate:modelValue":y[1]||(y[1]=l=>g.item.relativeProgramId=l),class:"form-select",id:"sourceLocationId",disabled:g.lookups.channelPrograms.length<=0},[(t(!0),s(U,null,D(g.lookups.channelPrograms,l=>(t(),s("option",{value:l.id},v(l.name),9,v1))),256))],8,p1),[[ue,g.item.relativeProgramId]]),y[15]||(y[15]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",g1,[e("div",b1,[E(e("input",{"onUpdate:modelValue":y[2]||(y[2]=l=>g.item.name=l),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),y[16]||(y[16]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",y1,[(t(!0),s(U,null,D(o(b).item.name.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])]),e("div",$1,[e("div",w1,[E(e("input",{"onUpdate:modelValue":y[3]||(y[3]=l=>g.item.dateScheduledStart=l),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[Q,g.item.dateScheduledStart]]),y[17]||(y[17]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),o(b).item.dateScheduledStart.$error?(t(),s("div",h1,[(t(!0),s(U,null,D(o(b).item.dateScheduledStart.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])])]),e("div",k1,[e("div",_1,[e("div",S1,[E(e("select",{"onUpdate:modelValue":y[4]||(y[4]=l=>g.item.sourceLocationId=l),onChange:y[5]||(y[5]=l=>r(g.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,D(g.lookups.sourceLocations,l=>(t(),s("option",{value:l.id},v(l.name),9,T1))),256))],544),[[ue,g.item.sourceLocationId]]),y[18]||(y[18]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(b).item.sourceLocationId.$error?(t(),s("div",M1,[(t(!0),s(U,null,D(o(b).item.sourceLocationId.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])]),e("div",I1,[e("div",C1,[E(e("select",{"onUpdate:modelValue":y[6]||(y[6]=l=>g.item.vodSource=l),onChange:y[7]||(y[7]=l=>Z()),class:"form-select",id:"vodSourceId"},[(t(!0),s(U,null,D(g.lookups.vodSources,l=>(t(),s("option",{value:l},v(l.name),9,x1))),256))],544),[[ue,g.item.vodSource]]),y[19]||(y[19]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(b).item.vodSourceId.$error?(t(),s("div",V1,[(t(!0),s(U,null,D(o(b).item.vodSourceId.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])]),e("div",P1,[e("div",O1,[e("div",A1,[E(e("input",{"onUpdate:modelValue":y[8]||(y[8]=l=>g.item.startOffsetMillis=l),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[Q,g.item.startOffsetMillis]]),y[20]||(y[20]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),g.item.startOffsetMillis>0?(t(),s("span",U1,v(o(H).moment.utc(g.item.startOffsetMillis).format("HH:mm:ss")),1)):A("",!0)]),g.item.startOffsetMillis>0&&g.item.startOffsetMillis<3e4?(t(),s("div",H1,y[21]||(y[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):A("",!0),g.item.startOffsetMillis>g.item.endOffsetMillis&&g.item.endOffsetMillis>0?(t(),s("div",D1,y[22]||(y[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):A("",!0),g.item.vodSource&&g.item.startOffsetMillis>g.item.vodSource.durationInMillis?(t(),s("div",L1,y[23]||(y[23]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):A("",!0),o(b).item.startOffsetMillis.$error?(t(),s("div",E1,[(t(!0),s(U,null,D(o(b).item.startOffsetMillis.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)]),e("div",q1,[e("div",B1,[e("div",N1,[E(e("input",{"onUpdate:modelValue":y[9]||(y[9]=l=>g.item.endOffsetMillis=l),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[Q,g.item.endOffsetMillis]]),y[24]||(y[24]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),g.item.endOffsetMillis>0?(t(),s("span",R1,v(o(H).moment.utc(g.item.endOffsetMillis).format("HH:mm:ss")),1)):A("",!0)]),g.item.endOffsetMillis>0&&g.item.endOffsetMillis<3e4?(t(),s("div",F1,y[25]||(y[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):A("",!0),g.item.vodSource&&g.item.endOffsetMillis>g.item.vodSource.durationInMillis?(t(),s("div",z1,y[26]||(y[26]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):A("",!0),o(b).item.endOffsetMillis.$error?(t(),s("div",G1,[(t(!0),s(U,null,D(o(b).item.endOffsetMillis.$errors,l=>(t(),s("div",{key:l.$uid},v(l.$message),1))),128))])):A("",!0)])]),y[30]||(y[30]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[y[27]||(y[27]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",j1,[e("table",Y1,[y[29]||(y[29]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),s(U,null,D(g.item.adBreaks,(l,q)=>(t(),s("tr",null,[e("td",null,v(q+1),1),e("td",null,[e("div",W1,[E(e("input",{"onUpdate:modelValue":se=>l.offsetMillis=se,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,K1),[[Q,l.offsetMillis]]),l.offsetMillis>0?(t(),s("span",J1,v(o(H).moment.utc(l.offsetMillis).format("HH:mm:ss")),1)):A("",!0)])]),e("td",null,[E(e("select",{"onUpdate:modelValue":se=>l.sourceLocationId=se,onChange:y[10]||(y[10]=se=>n(g.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),s(U,null,D(g.lookups.adBreakSourceLocations,se=>(t(),s("option",{value:se.id},v(se.name),9,X1))),256))],40,Q1),[[ue,l.sourceLocationId]])]),e("td",null,[E(e("select",{"onUpdate:modelValue":se=>l.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),s(U,null,D(g.lookups.adBreakVodSources,se=>(t(),s("option",{value:se.id},v(se.name),9,eb))),256))],8,Z1),[[ue,l.vodSourceId]])]),e("td",null,[e("button",{onClick:se=>c(q),class:"btn btn-outline-warning"},y[28]||(y[28]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,tb)])]))),256))])])])])])]),e("div",sb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:y[11]||(y[11]=l=>S()),class:"btn btn-primary",type:"button"},y[31]||(y[31]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ob),y[32]||(y[32]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,t1))}},lb=["id"],nb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},rb={class:"modal-content"},ib={class:"modal-header"},db={class:"modal-title"},ub={class:"modal-body"},cb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},mb=["innerHTML"],fb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},pb={class:"container"},vb={class:"col"},gb={class:"form-floating mb-2"},bb={class:"col"},yb={class:"form-floating mb-2"},$b={key:0,class:"d-block invalid-feedback"},wb={class:"col"},hb={class:"form-floating mb-2 d-none"},kb={key:0,class:"d-block invalid-feedback"},_b={class:"col"},Sb={class:"form-floating mb-2"},Tb={key:0,class:"d-block invalid-feedback"},Mb={class:"modal-footer"},Ib=["disabled"],Cb={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output Playback Configuration"}),W=_,X=re(),d=re("modalAddPlaybackConfiguration"),g=fe({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),K={item:{name:{required:te.withMessage("Name is required.",oe),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:te.withMessage("adDecisionServerUrl is required.",oe),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:te.withMessage("videoContentSourceUrl is required.",oe),$autoDirty:!0,$lazy:!0}}},b=$e(K,g);de(async()=>{b.value.$reset()});const I=async(T,u)=>{X.value=T;const r=g;G.value.clear(),N.value="";const a=u;let n=a.lastIndexOf("/");const $=a.substring(0,n);let w=a.substring(n+1);n=w.lastIndexOf("."),w=w.substring(0,n)+"_ADCAMPAIGN_",r.item={name:w,originalVideoContentSourceUrl:u,videoContentSourceUrl:$,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},b.value.$reset();var c=document.getElementById(d.value),Z=ke.getOrCreateInstance(c);Z.show()},m=async()=>{var T=document.getElementById(d.value),u=ke.getOrCreateInstance(T);u.hide(),W("refresh")},S=async()=>{const T=g;if(R.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const r=T.item;r.channelOutputId=X.value,await M.put("/api/v1/channelOutputs/playback/",r).then(a=>{p.success("Add Channel Output Playback Configuration","Channel Output playback configuration added.",{async onClose(){}})}),await m()}catch(r){N.value=H.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:I,close:m}),(T,u)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",nb,[e("div",rb,[e("div",ib,[e("h5",db,[u[6]||(u[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:u[0]||(u[0]=r=>m()),"aria-label":"Close"})]),e("div",ub,[o(N)?(t(),s("div",cb,[u[7]||(u[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,mb)])):A("",!0),o(G).size>0?(t(),s("div",fb,[u[8]||(u[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),r=>(t(),s("li",null,v(r),1))),256))])])):A("",!0),e("div",pb,[e("div",vb,[e("div",gb,[E(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=r=>g.item.originalVideoContentSourceUrl=r),id:"originalVideoContentSourceUrl",class:"form-control",style:{height:"5rem"},placeholder:"originalVideoContentSourceUrl",readonly:""},null,512),[[Q,g.item.originalVideoContentSourceUrl]]),u[9]||(u[9]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",bb,[e("div",yb,[E(e("input",{"onUpdate:modelValue":u[2]||(u[2]=r=>g.item.name=r),id:"name",class:"form-control",placeholder:"Name"},null,512),[[Q,g.item.name]]),u[10]||(u[10]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),o(b).item.name.$error?(t(),s("div",$b,[(t(!0),s(U,null,D(o(b).item.name.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):A("",!0)])]),e("div",wb,[e("div",hb,[E(e("input",{"onUpdate:modelValue":u[3]||(u[3]=r=>g.item.videoContentSourceUrl=r),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[Q,g.item.videoContentSourceUrl]]),u[11]||(u[11]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),u[12]||(u[12]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),o(b).item.videoContentSourceUrl.$error?(t(),s("div",kb,[(t(!0),s(U,null,D(o(b).item.videoContentSourceUrl.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):A("",!0)])]),e("div",_b,[e("div",Sb,[E(e("textarea",{"onUpdate:modelValue":u[4]||(u[4]=r=>g.item.adDecisionServerUrl=r),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[Q,g.item.adDecisionServerUrl]]),u[13]||(u[13]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),o(b).item.adDecisionServerUrl.$error?(t(),s("div",Tb,[(t(!0),s(U,null,D(o(b).item.adDecisionServerUrl.$errors,r=>(t(),s("div",{key:r.$uid},v(r.$message),1))),128))])):A("",!0),u[14]||(u[14]=Ge('<div class="mt-2 ms-3"><span class="fas fa-fw fa-info-circle text-info"></span><span class="small">Sample value for the Ad Decision Server Url</span><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/pg/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:4rem;" readonly>https://basil79.github.io/vast-sample-tags/rama/vast.xml</textarea><label for="" class="small fw-bold">Sample VAST 2</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&amp;iu=/124319096/external/ad_rule_samples&amp;ciu_szs=300x250&amp;ad_rule=1&amp;impl=s&amp;gdfp_req=1&amp;env=vp&amp;output=vmap&amp;unviewed_position_start=1&amp;cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&amp;cmsid=496&amp;vid=short_onecue&amp;correlator=[avail.random]</textarea><label for="" class="small fw-bold">Sample VMAP 1</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_ad_samples&amp;sz=640x480&amp;cust_params=sample_ct%3Dlinear&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 2 (Linear)</label></div><div class="form-floating mb-2"><textarea class="form-control" style="height:8rem;" readonly>https://pubads.g.doubleclick.net/gampad/ads?iu=/21775744923/external/single_preroll_skippable&amp;sz=640x480&amp;ciu_szs=300x250%2C728x90&amp;gdfp_req=1&amp;output=vast&amp;unviewed_position_start=1&amp;env=vp&amp;impl=s&amp;correlator=</textarea><label for="" class="small fw-bold">Sample VMAP 3 (Skippable)</label></div></div>',1))])])])]),e("div",Mb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:u[5]||(u[5]=r=>S()),class:"btn btn-primary",type:"button"},u[15]||(u[15]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Ib),u[16]||(u[16]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,lb))}},xb=["id"],Vb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},Pb={class:"modal-content"},Ob={class:"modal-header"},Ab={class:"modal-title"},Ub={class:"modal-body"},Hb={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Db=["innerHTML"],Lb={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Eb={class:"container"},qb={class:"col"},Bb={class:"form-floating mb-2"},Nb=["value"],Rb={key:0,class:"d-block invalid-feedback"},Fb={class:"col"},zb={class:"form-floating mb-2"},Gb={key:0,class:"d-block invalid-feedback"},jb={class:"col"},Yb={class:"form-floating mb-2"},Wb={key:0,class:"d-block invalid-feedback"},Kb={class:"modal-footer"},Jb=["disabled"],Qb={__name:"_addChannelOutput",emits:["refresh"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Add Channel Output"}),W=_,X=re(),d=re("modalAddChannelOutput"),g=fe({lookups:{sourceGroups:[]},item:{sourceGroupId:null,manifestName:null,outputType:null}}),K={item:{sourceGroupId:{required:te.withMessage("Source Group is required.",oe),$autoDirty:!0,$lazy:!0},manifestName:{required:te.withMessage("Manifest Name is required.",oe),$autoDirty:!0,$lazy:!0},outputType:{required:te.withMessage("Output Type is required.",oe),$autoDirty:!0,$lazy:!0}}},b=$e(K,g);de(async()=>{b.value.$reset()});const I=async()=>{await m()},m=async()=>{try{await M.get("/api/v1/sourceGroups/lookup/").then(a=>{g.lookups.sourceGroups=a.data,g.lookups.sourceGroups.length===1&&(g.item.sourceGroupId=g.lookups.sourceGroups[0].id)})}catch(r){N.value=H.getErrorMessageAsHtml(r),window.scrollTo(0,0)}finally{}},S=async r=>{X.value=r;const a=g;G.value.clear(),N.value="",a.lookups={sourceGroups:[]},a.item={sourceGroupId:null,outputType:null},await I(),b.value.$reset();var n=document.getElementById(d.value),$=ke.getOrCreateInstance(n);$.show()},T=async()=>{var r=document.getElementById(d.value),a=ke.getOrCreateInstance(r);a.hide(),W("refresh")},u=async()=>{const r=g;if(R.value)return;if(!await b.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const n=r.item;n.channelId=X.value,await M.post("/api/v1/channelOutputs",n).then($=>{p.success("Add Channel Output","Channel output added.")}),await T()}catch(n){N.value=H.getErrorMessageAsHtml(n),window.scrollTo(0,0)}finally{R.value=!1}};return f({open:S,close:T}),(r,a)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:d.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Vb,[e("div",Pb,[e("div",Ob,[e("h5",Ab,[a[4]||(a[4]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),a[5]||(a[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Ub,[o(N)?(t(),s("div",Hb,[a[6]||(a[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,Db)])):A("",!0),o(G).size>0?(t(),s("div",Lb,[a[7]||(a[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),n=>(t(),s("li",null,v(n),1))),256))])])):A("",!0),e("div",Eb,[e("div",qb,[e("div",Bb,[E(e("select",{"onUpdate:modelValue":a[0]||(a[0]=n=>g.item.sourceGroupId=n),class:"form-select",id:"sourceGroupId"},[(t(!0),s(U,null,D(g.lookups.sourceGroups,n=>(t(),s("option",{value:n.id},v(n.name),9,Nb))),256))],512),[[ue,g.item.sourceGroupId]]),a[8]||(a[8]=e("label",{for:"sourceGroupId",class:"small fw-bold"},"Source Group",-1)),o(b).item.sourceGroupId.$error?(t(),s("div",Rb,[(t(!0),s(U,null,D(o(b).item.sourceGroupId.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):A("",!0)])]),e("div",Fb,[e("div",zb,[E(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>g.item.outputType=n),class:"form-select",id:"outputType"},a[9]||(a[9]=[e("option",{value:"HLS",selected:""},"HLS",-1),e("option",{value:"DASH"},"DASH",-1)]),512),[[ue,g.item.outputType]]),a[10]||(a[10]=e("label",{for:"outputType",class:"small fw-bold"},"Output Type",-1)),o(b).item.outputType.$error?(t(),s("div",Gb,[(t(!0),s(U,null,D(o(b).item.outputType.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):A("",!0)])]),e("div",jb,[e("div",Yb,[E(e("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>g.item.manifestName=n),class:"form-control",id:"manifestName"},null,512),[[Q,g.item.manifestName]]),a[11]||(a[11]=e("label",{for:"manifestName",class:"small fw-bold"},"Manifest Name",-1)),o(b).item.manifestName.$error?(t(),s("div",Wb,[(t(!0),s(U,null,D(o(b).item.manifestName.$errors,n=>(t(),s("div",{key:n.$uid},v(n.$message),1))),128))])):A("",!0)])])])]),e("div",Kb,[e("button",{disabled:o(b).$dirty&&o(b).$invalid,onClick:a[3]||(a[3]=n=>u()),class:"btn btn-primary",type:"button"},a[12]||(a[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Jb),a[13]||(a[13]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,xb))}},Xb=["id"],Zb={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl modal-fullscreen-lg-down"},ey={class:"modal-content"},ty={class:"modal-header"},sy={class:"modal-title"},oy={class:"modal-body"},ay={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ly=["innerHTML"],ny={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},ry={class:"container"},iy={class:"col"},dy={class:"form-floating mb-2"},uy=["value"],cy={key:0,class:"d-block invalid-feedback"},my={class:"col"},fy={class:"form-floating mb-2"},py=["value"],vy={key:0,class:"d-block invalid-feedback"},gy={class:"col"},by={class:"card h-100"},yy=["id"],$y={class:"modal-footer"},wy=["disabled"],hy={__name:"_editFillerSlate",emits:["refresh"],setup(i,{expose:f,emit:_}){const{appTitle:V,pageTitle:k,busy:R,isDirty:C,validations:G,infoMessage:F,warningMessage:P,errorMessage:N,router:Y,axios:M,utils:H,toasts:p,closeWithReturnUrl:x,security:h}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"Edit Filler Slate"}),W=_,X=re("modalEditFillerSlate"),d=fe({lookups:{sourceLocations:[],vodSources:[]},item:{channelId:null,sourceLocationId:null,vodSourceId:null},hls:null}),g={item:{channelId:{required:te.withMessage("channelId is required.",oe),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:te.withMessage("sourceLocationId is required.",oe),$autoDirty:!0,$lazy:!0},vodSourceId:{required:te.withMessage("vodSourceId is required.",oe),$autoDirty:!0,$lazy:!0}}},K=$e(g,d);de(async()=>{K.value.$reset()}),qe(()=>{d.hls&&(d.hls.stopLoad(),d.hls.destroy())});const b=async()=>{await I()},I=async()=>{try{await M.get("/api/v1/sourcelocations/lookup/").then(w=>{d.lookups.sourceLocations=w.data}),d.item.sourceLocationId&&await m(d.item.sourceLocationId)}catch($){N.value=H.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{}},m=async $=>{try{let w=`/api/v1/vodSources/lookup/source-Location/${$}/?type=2`;await M.get(w).then(c=>{d.lookups.vodSources=c.data})}catch(w){N.value=H.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}},S=async($,w,c)=>{const Z=d;G.value.clear(),N.value="",Z.lookups={sourceLocations:[],vodSources:[]},Z.item={channelId:$,sourceLocationId:w,vodSourceId:c},await b(),d.item.vodSourceId&&await n(d.item.vodSourceId),K.value.$reset();var J=document.getElementById(X.value),y=ke.getOrCreateInstance(J);y.show()},T=async()=>{var $=document.getElementById(X.value),w=ke.getOrCreateInstance($);w.hide(),d.hls&&(d.hls.stopLoad(),d.hls.destroy()),W("refresh")},u=async()=>{const $=d;if(R.value)return;if(!await K.value.$validate()){window.scrollTo(0,0);return}try{R.value=!0,N.value="";const c=$.item;await M.put("/api/v1/channels/filler-slate",c).then(Z=>{p.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await T()}catch(c){N.value=H.getErrorMessageAsHtml(c),window.scrollTo(0,0)}finally{R.value=!1}},r=async()=>{d.item.vodSourceId=null,await m(d.item.sourceLocationId)},a=async()=>{await n(d.item.vodSourceId)},n=async $=>{try{let w=`/api/v1/vodSources/${$}/hls`;const c=await M.get(w).then(J=>J.data);if(d.hls){d.hls.loadSource(c);return}const Z=document.getElementById(`video-${d.item.channelId}`);d.hls=H.createHlsStream(Z,c)}catch(w){N.value=H.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{}};return f({open:S,close:T}),($,w)=>(t(),s("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:X.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Zb,[e("div",ey,[e("div",ty,[e("h5",sy,[w[6]||(w[6]=e("span",{class:"fas fa-fw fa-pen-to-square me-1"},null,-1)),z(v(o(k)),1)]),e("button",{type:"button",class:"btn-close",onClick:w[0]||(w[0]=c=>T()),"aria-label":"Close"})]),e("div",oy,[o(N)?(t(),s("div",ay,[w[7]||(w[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:o(N)},null,8,ly)])):A("",!0),o(G).size>0?(t(),s("div",ny,[w[8]||(w[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(o(G).values(),c=>(t(),s("li",null,v(c),1))),256))])])):A("",!0),e("div",ry,[e("div",iy,[e("div",dy,[E(e("select",{"onUpdate:modelValue":w[1]||(w[1]=c=>d.item.sourceLocationId=c),onChange:w[2]||(w[2]=c=>r()),class:"form-select",id:"sourceLocationId"},[(t(!0),s(U,null,D(d.lookups.sourceLocations,c=>(t(),s("option",{value:c.id},v(c.name),9,uy))),256))],544),[[ue,d.item.sourceLocationId]]),w[9]||(w[9]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),o(K).item.sourceLocationId.$error?(t(),s("div",cy,[(t(!0),s(U,null,D(o(K).item.sourceLocationId.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):A("",!0)])]),e("div",my,[e("div",fy,[E(e("select",{"onUpdate:modelValue":w[3]||(w[3]=c=>d.item.vodSourceId=c),onChange:a,class:"form-select",id:"vodSourceId"},[(t(!0),s(U,null,D(d.lookups.vodSources,c=>(t(),s("option",{value:c.id},v(c.name),9,py))),256))],544),[[ue,d.item.vodSourceId]]),w[10]||(w[10]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),o(K).item.vodSourceId.$error?(t(),s("div",vy,[(t(!0),s(U,null,D(o(K).item.vodSourceId.$errors,c=>(t(),s("div",{key:c.$uid},v(c.$message),1))),128))])):A("",!0)])]),e("div",gy,[e("div",by,[e("video",{id:`video-${d.item.channelId}`,controls:"",autoplay:"",muted:"",class:"card-img-top object-fit-contain"},null,8,yy)])])])]),e("div",$y,[e("button",{disabled:o(K).$dirty&&o(K).$invalid,onClick:w[4]||(w[4]=c=>u()),class:"btn btn-primary",type:"button"},w[11]||(w[11]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,wy),e("button",{onClick:w[5]||(w[5]=c=>T()),class:"btn btn-secondary ms-1"},w[12]||(w[12]=[e("span",{class:"fas fa-fw fa-times"},null,-1)]))])])])],8,Xb))}},ky={key:0,class:"dropdown"},_y={key:0,class:"fas fa-fw fa-play"},Sy={key:1,class:"fas fa-fw fa-stop"},Ty={class:"dropdown-menu"},My={key:0},Iy={key:1},Cy={key:0},xy={class:"nav nav-tabs nav-fill",id:"myTab",role:"tablist"},Vy={class:"nav-item",role:"presentation"},Py={class:"nav-item",role:"presentation"},Oy={class:"nav-item",role:"presentation"},Ay={class:"nav-item",role:"presentation"},Uy={class:"nav-item",role:"presentation"},Hy={class:"tab-content",id:"myTabContent"},Dy={class:"mt-2"},Ly={class:"row row-cols-1 row-cols-sm-3"},Ey={class:"col"},qy={class:"form-floating mb-2"},By={class:"col"},Ny={class:"form-floating mb-2"},Ry={class:"col"},Fy={class:"form-floating mb-2"},zy={class:"d-flex flex-row justify-content-start align-items-center"},Gy={key:0,class:"ms-2"},jy={class:"row row-cols-sm-2 mt-1"},Yy={class:"col"},Wy={class:"form-floating mb-2"},Ky={class:"col"},Jy={class:"form-floating mb-2"},Qy={class:"mt-2"},Xy={class:"d-flex flex-row justify-content-start align-items-center"},Zy={class:"ms-2"},e$={key:0,class:"alert bg-warning mt-2"},t$={class:"table-responsive border mt-1"},s$={class:"table table-bordered1 mb-0"},o$={class:"badge bg-info"},a$={key:0,class:"text-wrap"},l$={key:1,class:"text-warning"},n$={key:0,class:"text-end"},r$={key:1,class:"text-end"},i$=["onClick"],d$={key:0},u$={colspan:"999"},c$={class:"d-flex flex-row justify-content-start align-items-center"},m$={class:"ms-2"},f$={if:"item.playbackUrl"},p$=["onClick"],v$={key:0,class:"table-responsive mt-2"},g$={class:"table table-borderless mb-0 table-sm"},b$={class:"align-middle1"},y$={class:"badge bg-success"},$$={class:"border p-2 mt-2 overflow-auto",style:{width:"50rem"}},w$={class:"text-end"},h$=["onClick"],k$=["onClick"],_$={class:"mt-2"},S$={class:"table-responsive border"},T$={class:"table mb-0 table-sm caption-top"},M$={key:0,class:"fas fa-fw fa-check-circle text-success"},I$={class:"badge bg-info"},C$={class:"badge bg-secondary"},x$={key:0,class:""},V$={key:1,class:"mt-1"},P$={class:"mt-1"},O$={class:"p-0 m-0"},A$={key:0,class:"table-responsive border1 small"},U$={class:"table table-sm table-borderless mb-0"},H$={class:"text-end"},D$={class:"text-end"},L$={class:"text-end"},E$={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},q$={key:1,class:"fas fa-fw fa-triangle-exclamation text-warning me-1"},B$={class:"text-end"},N$={class:"dropdown position-static"},R$={class:"dropdown-menu"},F$=["onClick"],z$={key:0},G$=["onClick"],j$=["onClick"],Y$=["onClick"],W$={class:"text-end mt-2 d-none"},K$={class:"mt-2"},J$={class:"text-end mb-2"},Q$={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4",id:"masonry"},X$={class:"col"},Z$={class:"card shadow-sm"},ew=["id"],tw={class:"p-1"},sw={class:"card-title1 text-center"},ow={class:"col"},aw={class:"card shadow-sm"},lw=["id"],nw={class:"p-1"},rw={class:"card-title1 text-center text-truncate"},iw={class:"small1"},dw={class:"mt-2"},uw={key:0,class:"fas fa-fw fa-check-circle text-success"},cw={key:1,class:"fas fa-fw fa-times-circle text-warning"},mw={key:0,class:"fas fa-fw fa-check-circle text-success"},fw={key:1,class:"fas fa-fw fa-times-circle text-warning"},pw={key:0,class:"fas fa-fw fa-check-circle text-success"},vw={key:1,class:"fas fa-fw fa-times-circle text-warning"},gw={key:0,class:"fas fa-fw fa-check text-warning"},bw={key:1,class:"fas fa-fw fa-circle-exclamation text-warning"},yw={key:0,class:"fas fa-fw fa-check-circle text-success"},$w={key:1,class:"fas fa-fw fa-times-circle text-warning"},ww={__name:"index",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceGroup:{type:String,default:"/source-groups/view"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlSchedulePrograms:{type:String,default:"/channels/schedule-programs"}},setup(i){const f=i,{appTitle:_,pageTitle:V,busy:k,isDirty:R,validations:C,infoMessage:G,warningMessage:F,errorMessage:P,router:N,axios:Y,utils:M,toasts:H,close:p,closeWithReturnUrl:x,generateReturnUrl:h,security:W}=ve({appTitle:"Arcadian-Sony FAST",pageTitle:"View Channel"});Se("$config");const X=ye();X.user;const d=fe({user:X.user,item:null}),g=re(null),K=re(null),b=re(null),I=re(null),m=re(null),S=re(),T=he(()=>d.item&&d.item.state==="RUNNING");de(async()=>{await n();const ie=M.getPageTab("channel")||"information-tab";u(ie)}),qe(()=>{Ee()});const u=ie=>{M.setPageTab("channel",ie),S.value=ie,ie==="preview-tab"&&setTimeout(()=>{var O=document.getElementById("masonry");new Je(O,{})},2e3)},r=ie=>ie===S.value?"active":"",a=ie=>ie===S.value?"show active":"",n=async()=>{const ie=d;if(Ee(),!k.value)try{k.value=!0,P.value="",d.item=null;const O=`/api/v1/channels/${f.id}/`;await Y.get(O).then(me=>{ie.item=me.data,ie.item.outputs.forEach(Ve=>{Ve.playbackConfigurations.forEach(ae=>{if(Ve.playbackUrl){const Ce=Ve.playbackUrl,be=Ce.lastIndexOf("/"),Be=Ce.substring(0,be),Fe=Ce.substring(be+1),Ke=ae.hlsConfigurationManifestEndpointPrefix;Ke&&(ae.hlsPlaylist=Ke+Fe)}})})})}catch(O){P.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}},$=async()=>{await n()},w=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!k.value){P.value=null;try{k.value=!0,await Y.post(`/api/v1/channels/${f.id}/publish/`).then(O=>{H.success("Publish Channel","Channel was published.")}),k.value=!1,await $()}catch(O){P.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}}},c=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!k.value){P.value=null;try{k.value=!0,await Y.delete(`/api/v1/channels/${f.id}/unpublish/`).then(O=>{H.warning("Remove Channel","Channel was removed.")}),k.value=!1,await $()}catch(O){P.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}}},Z=()=>{g.value.open(f.id)},J=ie=>{ie.outputType==="HLS"&&K.value.open(ie.channelOutputId,ie.playbackUrl)},y=()=>{b.value.open(f.id)},l=ie=>{I.value.open(ie)},q=(ie,O)=>{m.value.open(f.id,ie,O)},se=async ie=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!k.value){P.value=null;try{k.value=!0,await Y.delete(`/api/v1/programs/${ie}/`).then(me=>{H.success("Delete Program","Program was deleted..",{async onClose(){}})}),k.value=!1,await $()}catch(me){P.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{k.value=!1}}},ne=async ie=>{if(confirm("Channel output will be unpublished (if published) and will be deleted. Are you sure you want to delete this channel output?")&&!k.value){P.value=null;try{k.value=!0,await Y.delete(`/api/v1/channelOutputs/${ie}/`).then(me=>{H.success("Delete Channel Output","Channel output was deleted..")}),k.value=!1,await $()}catch(me){P.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{k.value=!1}}},j=async ie=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!k.value){P.value=null;try{k.value=!0,await Y.post(`/api/v1/programs/${ie}/publish/`).then(me=>{H.success("Publish Program","Program was published..",{async onClose(){}})}),k.value=!1,await $()}catch(me){P.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{k.value=!1}}},we=async ie=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!k.value){P.value=null;try{k.value=!0,await Y.delete(`/api/v1/programs/${ie}/unpublish/`).then(me=>{H.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),k.value=!1,await $()}catch(me){P.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{k.value=!1}}},ge=async ie=>{if(!k.value){P.value=null;try{k.value=!0,await Y.put(`/api/v1/channels/${f.id}/change-state/${ie}`).then(O=>{H.success("Update Channel state","Change state was updated")}),k.value=!1,ie==="STOPPED"&&S.value==="preview-tab"&&(Ee(),u("information-tab")),await $()}catch(O){P.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}}},Le=async ie=>{if(!k.value)try{k.value=!0,P.value="",await Y.post(`/api/v1/channelOutputs/${ie}/playback/publish/`).then(O=>{H.success("Publish Channel Output Playback Configuration","Channel Output playback configuration published.")}),k.value=!1,await $()}catch(O){P.value=M.getErrorMessageAsHtml(O),window.scrollTo(0,0)}finally{k.value=!1}},rt=async ie=>{if(confirm("Do you want to remove this Playback Configuration?")&&!k.value)try{k.value=!0,P.value="",await Y.delete(`/api/v1/channelOutputs/${ie}/playback/`).then(me=>{H.warning("Delete Channel Output Playback Configuration","Channel Output playback configuration deleted.")}),k.value=!1,await $()}catch(me){P.value=M.getErrorMessageAsHtml(me),window.scrollTo(0,0)}finally{k.value=!1}},it=()=>{if(Hls.isSupported()&&console.log("Hello HLS.js!"),Hls.isMSESupported()&&Hls.getMediaSource().isTypeSupported('video/mp4;codecs="av01.0.01M.08"')){console.log("Hello AV1 playback! AVC who?");const ie=d.item.outputs;Ee(),ie.forEach(O=>{var me=document.getElementById(`video-${O.channelOutputId}`);O.hls&&O.hls.destroy(),O.hls=M.createHlsStream(me,O.playbackUrl,"Main playlist started."),me.play(),O.playbackConfigurations.forEach(xe=>{if(xe.hls&&xe.hls.destroy(),xe.arn){var Ve=document.getElementById(`video-${xe.channelOutputPlaybackConfigurationId}`);try{xe.hls=M.createHlsStream(Ve,xe.hlsPlaylist,"Playback with Server-side Ad Insertion playlist started."),Ve.play()}catch(ae){H.error("Failed Stream SSAI Playlist",ae)}}})}),setTimeout(()=>{var O=document.getElementById("masonry");new Je(O,{})},2e3)}},Ee=()=>{d.item&&d.item.outputs&&d.item.outputs.forEach(O=>{O.hls&&(O.hls.detachMedia(),O.hls.destroy(),delete O.hls),O.playbackConfigurations.forEach(me=>{me.hls&&(me.hls.detachMedia(),me.hls.destroy(),delete me.hls)})})};return(ie,O)=>{const me=ee("router-link"),xe=ee("PageHeader"),Ve=ee("PageBody");return t(),ce(pe,null,{default:L(()=>[e("div",null,[B(xe,{"page-icon":"fas fa-fw fa-tv",pageTitle:o(V)},{default:L(()=>[d.item?(t(),s("div",ky,[e("button",{class:le([[T.value?"btn-success":"btn-secondary"],"btn dropdown-toggle"]),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[T.value?(t(),s("span",_y)):(t(),s("span",Sy)),z(" "+v(d.item.state),1)],2),e("ul",Ty,[d.item.arn?(t(),s("li",My,[T.value?(t(),s("button",{key:0,onClick:O[0]||(O[0]=ae=>ge("STOPPED")),class:"dropdown-item"},O[20]||(O[20]=[e("span",{class:"fas fa-fw fa-stop me-1"},null,-1),z("Stop ")]))):(t(),s("button",{key:1,onClick:O[1]||(O[1]=ae=>ge("RUNNING")),class:"dropdown-item"},O[21]||(O[21]=[e("span",{class:"fas fa-fw fa-play me-1"},null,-1),z("Start ")])))])):A("",!0),T.value?A("",!0):(t(),s("li",Iy,[d.item.arn?(t(),s("button",{key:0,onClick:O[2]||(O[2]=ae=>c()),class:"dropdown-item"},O[22]||(O[22]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),z("Unpublish ")]))):(t(),s("button",{key:1,onClick:O[3]||(O[3]=ae=>w()),class:"dropdown-item"},O[23]||(O[23]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),z("Publish ")])))])),d.item.arn?(t(),s(U,{key:2},[O[25]||(O[25]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{onClick:O[4]||(O[4]=ae=>w()),class:"dropdown-item"},O[24]||(O[24]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),z("Republish ")]))])],64)):A("",!0)])])):A("",!0),B(me,{to:`${i.urlSchedulePrograms}/${i.id}`,class:"ms-2 btn btn-primary"},{default:L(()=>O[26]||(O[26]=[e("span",{class:"fas fa-fw fa-calendar"},null,-1)])),_:1},8,["to"]),e("button",{onClick:O[5]||(O[5]=ae=>$()),class:"ms-2 btn btn-secondary"},O[27]||(O[27]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:O[6]||(O[6]=ae=>o(x)(f.urlMain)),class:"btn btn-secondary ms-1"},O[28]||(O[28]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))]),_:1},8,["pageTitle"]),B(Ve,{errorMessage:o(P)},{default:L(()=>[d.item?(t(),s("div",Cy,[e("ul",xy,[e("li",Vy,[e("button",{onClick:O[7]||(O[7]=ae=>u("information-tab")),class:le([r("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},O[29]||(O[29]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),z("Information ")]),2)]),e("li",Py,[e("button",{onClick:O[8]||(O[8]=ae=>u("outputPlayback-tab")),class:le([r("outputPlayback-tab"),"nav-link"]),id:"outputPlayback-tab","data-bs-toggle":"tab","data-bs-target":"#outputPlayback",type:"button",role:"tab","aria-controls":"outputPlayback","aria-selected":"false"},O[30]||(O[30]=[e("span",{class:"fas fa-fw fa-gears me-1"},null,-1),z("Output/Playback ")]),2)]),e("li",Oy,[e("button",{onClick:O[9]||(O[9]=ae=>u("programs-tab")),class:le([r("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},O[31]||(O[31]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),z("Programs ")]),2)]),e("li",Ay,[e("button",{onClick:O[10]||(O[10]=ae=>u("preview-tab")),class:le([[T.value?"":"disabled",r("preview-tab")],"nav-link"]),id:"preview-tab","data-bs-toggle":"tab","data-bs-target":"#preview",type:"button",role:"tab","aria-controls":"preview","aria-selected":"false"},O[32]||(O[32]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),z("Preview ")]),2)]),e("li",Uy,[e("button",{onClick:O[11]||(O[11]=ae=>u("checklist-tab")),class:le([r("checklist-tab"),"nav-link"]),id:"checklist-tab","data-bs-toggle":"tab","data-bs-target":"#checklist",type:"button",role:"tab","aria-controls":"checklist","aria-selected":"false"},O[33]||(O[33]=[e("span",{class:"fas fa-fw fa-list-check me-1"},null,-1),z("Checklist ")]),2)])]),e("div",Hy,[e("div",{class:le([a("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Dy,[e("div",Ly,[e("div",Ey,[e("div",qy,[E(e("input",{"onUpdate:modelValue":O[12]||(O[12]=ae=>d.item.name=ae),type:"text",class:"form-control",id:"name",readonly:""},null,512),[[Q,d.item.name]]),O[34]||(O[34]=e("label",{for:"name"},"Name",-1))])]),e("div",By,[e("div",Ny,[E(e("input",{"onUpdate:modelValue":O[13]||(O[13]=ae=>d.item.playbackMode=ae),type:"text",class:"form-control",id:"playbackMode",readonly:""},null,512),[[Q,d.item.playbackMode]]),O[35]||(O[35]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",Ry,[e("div",Fy,[E(e("input",{"onUpdate:modelValue":O[14]||(O[14]=ae=>d.item.tier=ae),type:"text",class:"form-control",id:"tier",readonly:""},null,512),[[Q,d.item.tier]]),O[36]||(O[36]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",null,[e("div",zy,[O[38]||(O[38]=e("div",null,[e("h5",{class:"m-0"},"Filler Slate")],-1)),T.value?A("",!0):(t(),s("div",Gy,[e("button",{onClick:O[15]||(O[15]=ae=>q(d.item.fillerSlateSourceLocation.sourceLocationId,d.item.fillerSlateVodSource.vodSourceId)),class:"btn btn-outline-primary btn-sm"},O[37]||(O[37]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)]))]))]),e("div",jy,[e("div",Yy,[e("div",Wy,[B(me,{to:`${i.urlViewSourceLocation}/${d.item.fillerSlateSourceLocation.sourceLocationId}/${o(h)()}`,class:le([[d.item.fillerSlateSourceLocation.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:L(()=>[z(v(d.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to","class"]),O[39]||(O[39]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",Ky,[e("div",Jy,[B(me,{to:`${i.urlViewVodSource}/${d.item.fillerSlateVodSource.vodSourceId}/${o(h)()}`,class:le([[d.item.fillerSlateVodSource.arn?"is-valid":"is-invalid"],"form-control"]),id:"fillerSlateSourceLocationName",readonly:""},{default:L(()=>[z(v(d.item.fillerSlateVodSource.name),1)]),_:1},8,["to","class"]),O[40]||(O[40]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])])])])],2),e("div",{class:le([a("outputPlayback-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Qy,[e("div",null,[e("div",Xy,[O[42]||(O[42]=e("div",null,[e("h5",{class:"m-0"},"Outputs")],-1)),e("div",Zy,[e("button",{onClick:O[16]||(O[16]=ae=>y()),class:"btn btn-outline-primary btn-sm"},O[41]||(O[41]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]))])]),d.item.outputs.length<=0?(t(),s("div",e$,O[43]||(O[43]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),z("Channel Output is required ")]))):A("",!0),e("div",t$,[e("table",s$,[O[53]||(O[53]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Manifest"),e("th",null,"Source Group"),e("th",null,"Playback Url")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.outputs,(ae,Ce)=>(t(),s(U,{key:ae.channelOutputId},[e("tr",null,[e("td",null,v(Ce+1),1),e("td",null,[e("div",null,v(ae.manifestName),1),e("div",null,[e("span",o$,v(ae.outputType),1)])]),e("td",null,[e("div",null,[B(me,{to:`${i.urlViewSourceGroup}/${ae.sourceGroupId}/${o(h)()}`},{default:L(()=>[z(v(ae.sourceGroup.name),1)]),_:2},1032,["to"])])]),e("td",null,[ae.playbackUrl?(t(),s("div",a$,v(ae.playbackUrl),1)):(t(),s("div",l$,O[44]||(O[44]=[e("span",{class:"fas fa-fw fa-info-circle"},null,-1),z("Publish channel to get the playback url ")])))]),T.value?(t(),s("td",n$)):(t(),s("td",r$,[e("button",{onClick:be=>ne(ae.channelOutputId),class:"btn btn-outline-warning btn-sm"},O[45]||(O[45]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,i$)]))]),ae.playbackUrl?(t(),s("tr",d$,[O[50]||(O[50]=e("td",null,null,-1)),O[51]||(O[51]=e("td",null,null,-1)),O[52]||(O[52]=e("td",null,null,-1)),e("td",u$,[e("div",c$,[O[47]||(O[47]=e("h5",null,[z("Configuration "),e("sub",null,"(SSAI)")],-1)),e("div",m$,[e("div",f$,[e("button",{onClick:be=>J(ae),class:"btn btn-outline-primary btn-sm"},O[46]||(O[46]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)]),8,p$)])])]),ae.playbackConfigurations.length>0?(t(),s("div",v$,[e("table",g$,[e("tbody",null,[(t(!0),s(U,null,D(ae.playbackConfigurations,(be,Be)=>(t(),s("tr",b$,[e("td",null,v(Be+1),1),e("td",null,[e("span",y$,v(be.name),1),e("div",$$,[e("span",null,v(be.adDecisionServerUrl),1)])]),e("td",w$,[be.arn?A("",!0):(t(),s("button",{key:0,onClick:Fe=>Le(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-1"},O[48]||(O[48]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,h$)),e("button",{onClick:Fe=>rt(be.channelOutputPlaybackConfigurationId),class:"btn btn-outline-warning btn-sm ms-2"},O[49]||(O[49]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,k$)])]))),256))])])])):A("",!0)])])):A("",!0)],64))),128))]),_:1},512),[[Te,d.item.outputs.length>0]])])])])])],2),e("div",{class:le([a("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",_$,[e("div",S$,[e("table",T$,[O[68]||(O[68]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),E(B(_e,{tag:"tbody",name:"list",class:"table-group-divider"},{default:L(()=>[(t(!0),s(U,null,D(d.item.programs,(ae,Ce)=>(t(),s("tr",{key:ae.programId},[e("td",null,v(Ce+1),1),e("td",null,[ae.arn?(t(),s("span",M$)):A("",!0),z(" "+v(ae.name)+" ",1),O[57]||(O[57]=e("br",null,null,-1)),e("div",null,[e("span",I$,v(o(M).moment(ae.dateScheduledStart).fromNow()),1),e("div",null,[O[54]||(O[54]=e("span",{class:"fas fa-fw fa-calendar-plus me-1"},null,-1)),z(v(o(M).moment(ae.dateScheduledStart).format("lll")),1)]),e("div",null,[O[55]||(O[55]=e("span",{class:"fas fa-fw fa-calendar-minus me-1"},null,-1)),z(v(o(M).moment(ae.dateScheduledEnd).format("llll")),1)])]),ae.relativeProgram?(t(),s(U,{key:1},[O[56]||(O[56]=z(" Relative Program: ")),e("span",C$,v(ae.relativeProgram.name),1)],64)):A("",!0)]),e("td",null,[ae.totalProgramTemplateDurationInMillis!==ae.durationInMillis?(t(),s("div",x$,[O[58]||(O[58]=e("span",{class:"fas fa-fw fa-scissors me-1"},null,-1)),z(" "+v(o(M).moment.utc(ae.startOffsetMillis).format("HH:mm:ss"))+" - "+v(o(M).moment.utc(ae.endOffsetMillis).format("HH:mm:ss")),1)])):A("",!0),ae.adBreaksDurationInMillis?(t(),s("div",V$,[O[59]||(O[59]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),z(" Ads: "+v(o(M).moment.utc(ae.adBreaksDurationInMillis).format("HH:mm:ss")),1)])):A("",!0),e("div",P$,[O[60]||(O[60]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),z(" Total: "+v(o(M).moment.utc(ae.totalProgramTemplateDurationInMillis).format("HH:mm:ss")),1)])]),e("td",null,[B(me,{to:`${i.urlViewVideo}/${ae.vodSource.video.videoId}/${o(h)()}`},{default:L(()=>[z(v(ae.vodSource.video.title),1)]),_:2},1032,["to"]),O[61]||(O[61]=e("br",null,null,-1)),z(" ("+v(o(M).moment.utc(ae.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",O$,[ae.adBreaks.length?(t(),s("div",A$,[e("table",U$,[e("tbody",null,[O[62]||(O[62]=e("tr",null,[e("th",{class:"text-center"},"#"),e("th",{class:"text-center"},"Offset"),e("th",{class:"text-center"},"Duration"),e("th",{class:"text-center"},"VOD")],-1)),(t(!0),s(U,null,D(ae.adBreaks,(be,Be)=>(t(),s("tr",null,[e("td",H$,v(Be+1),1),e("td",D$,v(o(M).moment.utc(be.offsetMillis).format("HH:mm:ss")),1),e("td",L$,v(o(M).moment.utc(be.durationInMillis).format("HH:mm:ss")),1),e("td",null,[B(me,{to:`${i.urlViewVodSource}/${be.vodSource.vodSourceId}/${o(h)()}`},{default:L(()=>[be.vodSource.arn?(t(),s("span",E$)):(t(),s("span",q$)),z(" "+v(be.vodSource.name),1)]),_:2},1032,["to"])])]))),256))])])])):A("",!0)]),e("td",B$,[e("div",N$,[O[67]||(O[67]=e("button",{class:"btn btn-secondary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Actions ",-1)),e("ul",R$,[e("li",null,[e("button",{onClick:be=>l(ae.programId),class:"dropdown-item"},O[63]||(O[63]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),z("Edit ")]),8,F$)]),ae.arn?(t(),s("li",z$,[e("button",{onClick:be=>we(ae.programId),class:"dropdown-item"},O[64]||(O[64]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),z("Unpublish ")]),8,G$)])):(t(),s(U,{key:1},[e("li",null,[e("button",{onClick:be=>j(ae.programId),class:"dropdown-item"},O[65]||(O[65]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),z("Publish ")]),8,j$)]),e("li",null,[e("button",{onClick:be=>se(ae.programId),class:"dropdown-item"},O[66]||(O[66]=[e("span",{class:"fas fa-fw fa-trash me-1"},null,-1),z("Remove ")]),8,Y$)])],64))])])])]))),128))]),_:1},512),[[Te,d.item.programs.length>0]])])]),e("div",W$,[e("button",{onClick:O[17]||(O[17]=ae=>Z()),class:"btn btn-outline-primary"},O[69]||(O[69]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),z("Program ")]))])])],2),T.value?(t(),s("div",{key:0,class:le([a("preview-tab"),"tab-pane fade"]),id:"preview",role:"tabpanel","aria-labelledby":"preview-tab"},[e("div",K$,[e("div",J$,[d.item.outputs[0].hls?(t(),s("button",{key:1,onClick:O[19]||(O[19]=ae=>Ee()),class:"btn btn-primary"},O[71]||(O[71]=[e("span",{class:"fas fa-fw fa-eye-slash"},null,-1)]))):(t(),s("button",{key:0,onClick:O[18]||(O[18]=ae=>it()),class:"btn btn-primary"},O[70]||(O[70]=[e("span",{class:"fas fa-fw fa-eye"},null,-1)])))]),e("div",Q$,[(t(!0),s(U,null,D(d.item.outputs,ae=>(t(),s(U,null,[e("div",X$,[e("div",Z$,[e("video",{id:`video-${ae.channelOutputId}`,controls:"",class:"card-img-top object-fit-cover shandow"},null,8,ew),e("div",tw,[e("div",sw,v(ae.manifestName),1)])])]),(t(!0),s(U,null,D(ae.playbackConfigurations,(Ce,be)=>(t(),s("div",ow,[e("div",aw,[e("video",{id:`video-${Ce.channelOutputPlaybackConfigurationId}`,controls:"",class:"card-img-top object-fit-cover"},null,8,lw),e("div",nw,[e("div",rw,[z(" #"+v(be+1)+" ",1),e("span",iw,v(Ce.name),1)])])])]))),256))],64))),256))])])],2)):A("",!0),e("div",{class:le([a("checklist-tab"),"tab-pane fade"]),id:"checklist",role:"tabpanel","aria-labelledby":"checklist-tab"},[e("div",dw,[O[77]||(O[77]=z(" Checklist ")),e("ul",null,[e("li",null,[d.item.fillerSlateSourceLocation.arn?(t(),s("span",uw)):(t(),s("span",cw)),O[72]||(O[72]=z(" Filler Slate Source Location "))]),e("li",null,[d.item.fillerSlateVodSource.arn?(t(),s("span",mw)):(t(),s("span",fw)),O[73]||(O[73]=z(" Filler Slate VOD Source "))]),e("li",null,[d.item.outputs.length>0?(t(),s("span",pw)):(t(),s("span",vw)),O[75]||(O[75]=z(" Outputs ")),e("ul",null,[e("li",null,[d.item.outputs.some(ae=>ae.playbackConfigurations.length>0)?(t(),s("span",gw)):(t(),s("span",bw)),O[74]||(O[74]=z(" Ad Insertion setup "))])])]),e("li",null,[d.item.programs.length>0?(t(),s("span",yw)):(t(),s("span",$w)),O[76]||(O[76]=z(" Programs "))])])])],2)])])):A("",!0)]),_:1},8,["errorMessage"]),B(ab,{ref_key:"modalAddProgram",ref:g,onRefresh:$},null,512),B(Cb,{ref_key:"modalAddPlaybackConfiguration",ref:K,onRefresh:$},null,512),B(Qb,{ref_key:"modalAddChannelOutput",ref:b,onRefresh:$},null,512),B(lt,{ref_key:"modalEditProgram",ref:I,onOnClose:$},null,512),B(hy,{ref_key:"modalEditFillerSlate",ref:m,onRefresh:$},null,512)])]),_:1})}}},hw={path:"/",component:ca,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:Ba},{path:"videos",children:[{path:"",component:Cn},{path:"view/:id",component:fr,props:!0},{path:"add",component:hl},{path:"edit/:id",component:sn,props:!0}]},{path:"source-groups",children:[{path:"add",component:br},{path:"edit/:id",component:qr,props:!0},{path:"",component:Yr},{path:"view/:id",component:di,props:!0}]},{path:"source-locations",children:[{path:"add",component:vi},{path:"edit/:id",component:yi,props:!0},{path:"",component:xi},{path:"view/:id",component:Ji,props:!0}]},{path:"vod-sources",children:[{path:"add",component:kd},{path:"edit/:id",component:Kd,props:!0},{path:"",component:_u},{path:"view/:id",component:sm,props:!0}]},{path:"channels",children:[{path:"add",component:sv},{path:"edit/:id",component:lv,props:!0},{path:"",component:vv},{path:"schedule-programs/:id",component:e1,props:!0},{path:"view/:id",component:ww,props:!0}]},{path:"program-templates",children:[{path:"add",component:Wm},{path:"edit/:id",component:qf,props:!0},{path:"",component:ep},{path:"view/:id",component:Hp,props:!0}]}]},nt=ft({history:pt("/"),linkActiveClass:"active",routes:[{...no},{path:"/administrator",redirect:"/"},{...hw}]}),kw={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const i=this,_=new vt().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();_.on("onNotificationCreated",function(V){let k=V.content;V.notificationEntityClassText==="Deposit"&&(k+="<br/>",k+=`<a href="${i.urlViewDeposit}${V.referenceId}">Click ${V.notificationEntityClassText} here</a>`),V.notificationEntityClassText==="Withdraw"&&(k+="<br/>",k+=`<a href="${i.urlViewWithdraw}${V.referenceId}">Click ${V.notificationEntityClassText} here</a>`),V.notificationEntityClassText==="ManualModeOfPayment"&&(k+="<br/>",k+=`<a href="${i.urlViewManualModeOfPayment}${V.referenceId}">Click ${V.notificationEntityClassText} here</a>`),V.iconClass;let R="secondary";switch(V.notificationType){case 1:R="success";break;case 3:R="info";break;case 3:R="success";break;case 4:R="info";break;case 5:R="warning";break;case 6:R="error";break}i.$toast[R](V.subject,k,{timeOut:1e4});const C=V.subject,P={body:k,icon:"/img/192x102.png"};new Notification(C,P)}),_.on("jobUpdated",function(V){i.$bus.$emit("event:job-updated",V)}),await _.start().then(function(){}).catch(function(V){})}}};function _w(i,f,_,V,k,R){return t(),s("div")}const Sw=Me(kw,[["render",_w],["__scopeId","data-v-5b4a9fa2"]]),Tw={class:"navbar bg-dark bg-gradient shadow","data-bs-theme":"dark"},Mw={class:"container"},Iw={class:"col-md"},Cw={class:"navbar-brand mb-0"},xw={class:"col-md-auto"},Vw={class:"d-flex flex-row align-items-center justify-content-end"},Pw={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:""}},setup(i){return(f,_)=>(t(),ce(pe,null,{default:L(()=>[e("nav",Tw,[e("div",Mw,[e("div",Iw,[Oe(f.$slots,"title",{},()=>[e("a",Cw,[e("i",{class:le([i.pageIcon,"me-1 me-lg-2"])},null,2),e("span",null,v(i.pageTitle),1)])])]),e("div",xw,[e("div",Vw,[Oe(f.$slots,"default")])])])])]),_:3}))}},Ow={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Aw=["innerHTML"],Uw={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},Hw={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(f,_)=>(t(),ce(pe,null,{default:L(()=>[Oe(f.$slots,"default",{},()=>[i.errorMessage?(t(),s("div",Ow,[_[0]||(_[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),z("Error ")],-1)),e("div",{innerHTML:i.errorMessage},null,8,Aw)])):A("",!0),i.vuelidate&&i.vuelidate.$error?(t(),s("div",Uw,[_[1]||(_[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),z("Validation Summary ")],-1)),e("ul",null,[(t(!0),s(U,null,D(i.vuelidate.$errors,V=>(t(),s("li",{key:V.$uid},[V.$validator==="$each"?(t(),s(U,{key:0},[z(" Check errors in '"+v(V.$property)+"' ",1)],64)):(t(),s(U,{key:1},[z(v(V.$message),1)],64))]))),128))])])):A("",!0)])]),_:3}))}},Dw={class:"my-3 container-md container"},Lw={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(i){return(f,_)=>{const V=ee("PageMessages");return t(),ce(pe,null,{default:L(()=>[e("div",Dw,[B(V,{errorMessage:i.errorMessage,vuelidate:i.vuelidate},null,8,["errorMessage","vuelidate"]),Oe(f.$slots,"default")])]),_:3})}}},Ew={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const i=this;i.busy||(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveFirst(){const i=this;if(i.busy)return;i.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await i.search(1))},async moveLast(){const i=this;if(i.busy)return;const f=i.filter;f.pageIndex!==f.totalPages&&(document.activeElement&&document.activeElement.blur(),await i.search(f.totalPages))},async move(i){const f=this;if(f.busy)return;const _=f.filter,V=_.pageIndex+i;V>=0&&V<=_.totalPages&&(document.activeElement&&document.activeElement.blur(),await f.search(V))}}},qw={class:"mt-2"},Bw={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},Nw={key:0,class:"col-sm order-2 order-sm-1"},Rw={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Fw={class:"me-1 fw-bold"},zw={class:"fw-bold"},Gw={class:"ms-1"},jw={class:"col-sm-auto ms-auto order-1 order-sm-2"},Yw={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Ww={key:0,class:"page-item"},Kw={key:1,class:"page-item"},Jw={key:2,class:"page-item"},Qw={class:"page-item active"},Xw={class:"page-link"},Zw={key:3,class:"page-item"},eh={key:4,class:"page-item"},th={key:5,class:"page-item"},sh={key:1,class:"text-info font-weight-bold text-center"},oh={key:0},ah={key:1};function lh(i,f,_,V,k,R){return t(),s("div",qw,[_.filter.items.length?(t(),s("div",Bw,[_.showPerPage?(t(),s("div",Nw,[e("div",Rw,[e("div",null,[e("span",Fw,v(_.filter.totalCount),1),f[8]||(f[8]=z("records in ")),e("span",zw,v(_.filter.totalPages),1),f[9]||(f[9]=z(" page(s) "))]),e("div",Gw,[E(e("select",{"onUpdate:modelValue":f[0]||(f[0]=C=>_.filter.pageSize=C),onChange:f[1]||(f[1]=(...C)=>R.changePagination&&R.changePagination(...C)),class:"form-select form-select-sm me-1"},f[10]||(f[10]=[Ge('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[ue,_.filter.pageSize]])]),f[11]||(f[11]=e("div",{class:"ms-1"},"per page",-1))])])):A("",!0),e("div",jw,[e("ul",Yw,[_.filter.pageIndex!==1?(t(),s("li",Ww,[e("button",{class:"page-link","aria-label":"Previous",onClick:f[2]||(f[2]=(...C)=>R.moveFirst&&R.moveFirst(...C))},f[12]||(f[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):A("",!0),_.filter.pageIndex>2?(t(),s("li",Kw,[e("button",{class:"page-link",onClick:f[3]||(f[3]=C=>R.move(-2))},v(_.filter.pageIndex-2),1)])):A("",!0),_.filter.pageIndex>1?(t(),s("li",Jw,[e("button",{class:"page-link",onClick:f[4]||(f[4]=C=>R.move(-1))},v(_.filter.pageIndex-1),1)])):A("",!0),e("li",Qw,[e("span",Xw,v(_.filter.pageIndex),1)]),_.filter.pageIndex<_.filter.totalPages?(t(),s("li",Zw,[e("button",{class:"page-link",onClick:f[5]||(f[5]=C=>R.move(1))},v(_.filter.pageIndex+1),1)])):A("",!0),_.filter.pageIndex<_.filter.totalPages-1?(t(),s("li",eh,[e("button",{class:"page-link",onClick:f[6]||(f[6]=C=>R.move(2))},v(_.filter.pageIndex+2),1)])):A("",!0),_.filter.pageIndex<_.filter.totalPages?(t(),s("li",th,[e("button",{class:"page-link","aria-label":"Next",onClick:f[7]||(f[7]=(...C)=>R.moveLast&&R.moveLast(...C))},f[13]||(f[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):A("",!0)])])])):(t(),s("div",sh,[_.noRecords?(t(),s("div",oh,v(_.noRecords),1)):(t(),s("div",ah,"No record(s) found."))]))])}const nh=Me(Ew,[["render",lh]]),rh={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let i=this;if(!i.enabled)return;let f=i.filter;f.sortField===i.field?f.sortOrder===0?f.sortField=null:f.sortOrder=f.sortOrder===0?1:0:(f.sortField=i.field,f.sortOrder=1),i.$emit("search")}}},ih={class:"align-self-center"};function dh(i,f,_,V,k,R){return t(),s("div",{onClick:f[0]||(f[0]=(...C)=>R.click&&R.click(...C)),class:"d-flex flex-row justify-content-start align-content-center",style:tt({cursor:_.enabled?"pointer":""})},[Oe(i.$slots,"default"),e("span",ih,[_.showSort?(t(),s("span",{key:0,class:le([{"fa-sort text-gray-500":!R.currentSortField(),"fa-sort-up":R.currentSortField()&&R.sortUp(),"fa-sort-down":R.currentSortField()&&!R.sortUp()},"fas fa-fw mr-1"])},null,2)):A("",!0)])],4)}const uh=Me(rh,[["render",dh]]),ch={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(i){const f=this;f.setSelected(i),f.$emit("onSelectedRow",i)}}},mh={class:"table-responsive m-0"},fh=["href"],ph={key:1},vh=["onClick"],gh={class:"form-group row no-gutters"},bh={class:"col-5 col-form-label"},yh={class:"col align-self-center"},$h=["href"],wh={key:1};function hh(i,f,_,V,k,R){return t(),s("div",null,[e("div",mh,[e("table",{class:le(["table table-hover d-none d-md-table card",_.tableCss])},[e("thead",null,[Oe(i.$slots,"header",{},()=>[f[0]||(f[0]=e("th",null,"#",-1)),(t(!0),s(U,null,D(_.header.columns,C=>(t(),s("th",null,v(C.title),1))),256))],!0)]),e("tbody",null,[(t(!0),s(U,null,D(_.items,(C,G)=>Oe(i.$slots,"table-row",{key:`row1-${C[_.header.key]}`,item:C,index:G},()=>[e("td",null,v(_.getRowNumber(G)),1),(t(!0),s(U,null,D(_.header.columns,F=>(t(),s("td",null,[F.href?(t(),s("a",{key:0,href:F.href(C[_.header.key]),class:"font-weight-bold"},v(C[F.field]),9,fh)):(t(),s("span",ph,v(C[F.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:le(["d-block d-md-none",_.rowCss])},[(t(!0),s(U,null,D(_.items,(C,G)=>(t(),s("div",{key:`row2-${C[_.header.key]}`,onClick:F=>R.onSelectedRow(C),class:"border"},[e("div",{class:le(["p-2",{"b-left":_.isSelected(C)}])},[Oe(i.$slots,"table-list",{item:C,index:G},()=>[(t(!0),s(U,null,D(_.header.columns,F=>(t(),s("div",gh,[e("label",bh,v(F.title),1),e("div",yh,[F.href?(t(),s("a",{key:0,href:F.href(C[_.header.key]),class:"font-weight-bold"},v(C[F.field]),9,$h)):(t(),s("span",wh,v(C[F.field]),1))])]))),256))],!0)],2)],8,vh))),128))],2)])}const kh=Me(ch,[["render",hh],["__scopeId","data-v-65929213"]]),Ie=gt(yt);Ie.use(bt());Ie.use(nt);Ie.component("m-notification",Sw);Ie.component("m-pagination",nh);Ie.component("sort-field",uh);Ie.component("table-list",kh);Ie.component("Toasts",na);Ie.component("PageHeader",Pw);Ie.component("PageMessages",Hw);Ie.component("PageBody",Lw);const _h="https://sonyfastpoc.azurewebsites.net/",Sh="Arcadian-Sony FAST",Th=void 0,Mh={API_URL:_h,appName:Sh,tenantId:Th};Ie.provide("$config",Mh);Ie.provide("$bus",je);Ie.mount("#app");
