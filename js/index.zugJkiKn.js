import{o as t,c as le,r as W,h as We,d as Oe,a as oe,e as Te,b as o,f as e,g as P,w as S,i as O,t as v,F as B,j as z,k as C,l as ne,m as Le,n as fe,p as He,q as Ie,u as Ge,s as Be,P as De,v as re,x as ee,y as te,z as ye,T as ie,A as i,B as Je,C as T,D as H,E as Ke,G as ae,H as qe,I as ve,J as he,K as be,L as me,M as we,N as Ue,O as Qe,Q as Xe,R as Ze,S as et,U as $e,V as tt,W as st}from"./vendor-LMzySn7w-chunk.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const x of c)if(x.type==="childList")for(const y of x.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&f(y)}).observe(document,{childList:!0,subtree:!0});function u(c){const x={};return c.integrity&&(x.integrity=c.integrity),c.referrerPolicy&&(x.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?x.credentials="include":c.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function f(c){if(c.ep)return;c.ep=!0;const x=u(c);fetch(c.href,x)}})();const ot={__name:"App",setup(a){return(n,u)=>{const f=W("router-view");return t(),le(f)}}};function Re(){const a=A=>{var R;let M=A,E=M.response,Y="";if(!M.response)return A.message;if(E.status===500){if(typeof E.data=="string")return E.data;if(E.data.content)return E.data.content;if(E.data.detail)return E.data.detail}if(E.status===401){const j=`${window.location.pathname}${window.location.search}`;Y=`You are not authorized or your session timed out. Please click <a href='${`/accounts/login/?returnUrl=${encodeURIComponent(j)}`}'>here</a> to login.`}else if(E.status===400){let j=M.response.data.errors;Y=M.response.data.title||M.response.data,j&&(Y+="<ul>");for(let N in j){let L=j[N];for(let d in j[N]){let G=L[d];Y+=`<li>${G}</li>`}}j&&(Y+="</ul>"),Y||(Y=M.message),Y&&Y.content&&(Y=Y.content)}else E.status===404?Y=((R=E==null?void 0:E.data)==null?void 0:R.title)||(E==null?void 0:E.data)||"Record not found.":typeof E.data=="string"&&(Y=M.message,Y===""&&(Y=`Error <b>Http ${E.status}</b>.<br/>Please contact the System Administrator.`));return Y},n=A=>JSON.parse(JSON.stringify(A)),u=A=>{if(typeof A!="number")return A;var M=new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2});return M.format(A)},f=(A,M,E)=>{const R={value:M,expiry:new Date().getTime()+E};debugger;localStorage.setItem(A,JSON.stringify(R))},c=A=>{debugger;const M=localStorage.getItem(A);if(!M)return null;const E=JSON.parse(M);return new Date().getTime()>E.expiry?(localStorage.removeItem(A),null):E.value},x="pageSelectedTabStorageKey";return{getErrorMessageAsHtml:a,clone:n,toCurrency:u,moment:We,localStorageSetWithExpiry:f,localStorageGetWithExpiry:c,setPageTab:(A,M)=>{var E=localStorage.getItem(x);E?E=JSON.parse(E):E={},E[A]=M,localStorage.setItem(x,JSON.stringify(E))},getPageTab:A=>{var M=localStorage.getItem(x);return M?M=JSON.parse(M):M={},M[A]}}}const lt=Re(),je=JSON.parse(localStorage.getItem("user"))||{},at=lt.moment.utc(je.exp*1e3),nt=at.isAfter()?je:null,de=Oe({id:"auth",state:()=>({user:nt,returnUrl:null}),actions:{async login(a){try{this.user=a,localStorage.setItem("user",JSON.stringify(a))}catch(n){debugger;alert(n)}},logout(){this.user=null,localStorage.removeItem("user"),Ye.push("/accounts/login")},logoutWithRedirect(){this.user=null,localStorage.removeItem("user")}}}),it="vue-3-pinia-registration-login-example-users";JSON.parse(localStorage.getItem(it));const rt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Ce=rt,ze=Oe("msal",()=>{const a=oe({auth:{clientId:Ce.VITE_AUTH_CLIENT_ID,authority:Ce.VITE_AUTH_AUTHORITY_URL,redirectUri:Ce.VITE_AUTH_REDIRECT_URI},cache:{cacheLocation:"localStorage"}}),n=oe("");return{msalConfig:a,accessToken:n,setAccessToken:f=>{n.value=f}}}),Ve={$on:(...a)=>Te.on(...a),$once:(...a)=>Te.once(...a),$off:(...a)=>Te.off(...a),$emit:(...a)=>Te.emit(...a)};function dt(){const a=(x,y,D,A)=>{Ve.$emit("toast-message",{title:x,message:y,type:D,options:A})};return{success:(x,y,D={})=>{a(x,y,"success",D)},warning:(x,y,D={})=>{a(x,y,"warning",D)},info:(x,y,D={})=>{a(x,y,"info",D)},error:(x,y,D={})=>{a(x,y,"danger",D)}}}const pe=(a,n)=>{const u=a.__vccOpts||a;for(const[f,c]of n)u[f]=c;return u},ut={data(){return{notifications:[],messages:[]}},async created(){const a=this;a.$bus.$on("event:notification-received",()=>{a.getUnreadNotifications()}),a.$bus.$on("event:notification-marked-as-read",n=>{a.notifications.some(f=>f.notificationId===n)&&a.getUnreadNotifications()}),a.$bus.$on("event:notification-removed",n=>{a.notifications.some(f=>f.notificationId===n)&&a.getUnreadNotifications()}),a.$bus.$on("event:chat-marked-as-read",a.onChatMarkedAsRead),a.$bus.$on("event:chat-message-received",a.onChatMessageReceived)},async mounted(){const a=this,n=a.$refs.notifications,u=a.$refs.messages;n&&n.offsetParent,u&&u.offsetParent&&await a.getUnreadChats()},methods:{async logout(){const a=this;try{await a.$util.axios.post("/api/accounts/logout").then(n=>{const u="/";a.$toast.warning("Logout","You have logged out of the system.",{timeOut:5e3,async onClose(){a.$util.href(u)}})})}catch(n){a.$util.handleError(n)}},async onChatMarkedAsRead(a){let n=this,u=n.messages.find(f=>f.chatId===a);if(u){let f=n.messages.indexOf(u);n.messages.splice(f,1)}},async onChatMessageReceived(a){let n=this,u=n.messages.find(c=>c.chatId===a.chatId);if(u)u.lastMessageText=a.content;else{var f={chatId:a.chatId,isRead:!1,lastDateSent:a.dateSent,lastMessageText:a.content,senderFirstLastName:`${a.sender.firstName} ${a.sender.lastName}`,senderInitials:a.sender.initials,senderProfilePicture32:a.sender.profilePicture32,urlPicture:n.$util.getProfilePictureUrl(a.sender.profilePicture32,a.sender.initials)};n.messages.push(f)}},async getUnreadNotifications(){const a=this;try{await a.$util.axios.get("api/accounts/unread-notifications").then(n=>{a.notifications=n.data})}catch(n){a.$util.handleError(n)}},async getUnreadChats(){const a=this;try{await a.$util.axios.get("api/accounts/unread-chats").then(n=>{a.messages=n.data;for(let u in a.messages){let f=a.messages[u];a.$set(f,"urlPicture",a.$util.getProfilePictureUrl(f.senderProfilePicture32,f.senderInitials))}})}catch(n){a.$util.handleError(n)}},viewNotification(a){this.$bus.$emit("event:open-notification",a)},viewChat(a){this.$bus.$emit("event:open-chat",a)},showHiddenElements(){let n=this.$el.getElementsByClassName("initialHidden");for(let u=0;u<n.length;u++)n[u].classList.remove("invisible")}}},ct={mixins:[ut],props:{uid:String,appName:{type:String,required:!0,default:"SCH2"},urlProfilePicture:String,menus:Array},components:{},data(){const n=de().user;return{user:n,username:n?n.nameFull:"Guest"}},async mounted(){},methods:{isActive(a){return window.location.href.indexOf(a)>-1},async openModalSearchUser747(a){this.$refs.refModalSearchUser747.open(a)}}},mt={class:"sticky-top navbar navbar-expand-sm navbar-dark bg-primary bg-gradient shadow-sm py-2","aria-label":"Offcanvas navbar large"},ft={class:"container-md"},pt={class:"navbar-collapse collapse",id:"navbarSideCollapse"},vt={class:"navbar-nav"},gt={class:"nav-item dropdown"},bt={class:"dropdown-menu","aria-labelledby":"dropdown01"},yt={class:"nav-item dropdown"},$t={class:"dropdown-menu","aria-labelledby":"dropdown01"},wt={class:"navbar-nav ms-auto"},ht={class:"nav-item dropdown"},_t={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},kt={class:"d-inline d-sm-none d-md-inline"},St={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},Mt={class:"text-capitalize"};function Tt(a,n,u,f,c,x){const y=W("router-link");return t(),o("nav",mt,[e("div",ft,[P(y,{class:"navbar-brand",to:"/member"},{default:S(()=>[O(v(u.appName),1)]),_:1}),n[14]||(n[14]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSideCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",pt,[e("ul",vt,[e("li",gt,[n[3]||(n[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Social")])],-1)),e("ul",bt,[e("li",null,[P(y,{class:"dropdown-item",to:"/member/announcements"},{default:S(()=>n[0]||(n[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),O(" Announcements ")])),_:1})]),e("li",null,[P(y,{class:"dropdown-item",to:"/member/posts"},{default:S(()=>n[1]||(n[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),O(" Posts ")])),_:1})]),e("li",null,[P(y,{class:"dropdown-item",to:"/member/yellow-pages"},{default:S(()=>n[2]||(n[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),O(" Yellow Pages ")])),_:1})])])]),e("li",yt,[n[5]||(n[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Home Owners")])],-1)),e("ul",$t,[e("li",null,[P(y,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:S(()=>n[4]||(n[4]=[O(" Property Monthly Dues ")])),_:1})])])])]),e("ul",wt,[e("li",ht,[e("a",_t,[e("span",null,[n[6]||(n[6]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",kt,v(c.username),1)])]),e("ul",St,[n[9]||(n[9]=e("li",null,[e("h6",{class:"dropdown-header"},"Settings")],-1)),n[10]||(n[10]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Profile ")],-1)),n[11]||(n[11]=e("li",null,[e("a",{class:"dropdown-item",href:"/member/account/changetheme"}," Theme ")],-1)),n[12]||(n[12]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),c.user&&c.user.roles.length>1?(t(!0),o(B,{key:0},z(c.user.roles,D=>(t(),o("li",null,[P(y,{to:`/${D.toLowerCase()}`,class:"dropdown-item"},{default:S(()=>[e("span",Mt,v(D),1)]),_:2},1032,["to"])]))),256)):C("",!0),e("li",null,[P(y,{to:"/",class:"dropdown-item"},{default:S(()=>n[7]||(n[7]=[O(" Main ")])),_:1})]),n[13]||(n[13]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[P(y,{to:"/account/logout",class:"dropdown-item"},{default:S(()=>n[8]||(n[8]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),O("Logout ")])),_:1})])])])])])])])}const It=pe(ct,[["render",Tt]]),Pt={props:{appName:{type:String,required:!1}},data(){return{busy:!1,enums:{orderStatuses:[{id:1,name:"Requested"},{id:2,name:"Placed"},{id:3,name:"Accepted"},{id:4,name:"Processed"},{id:5,name:"Delivered"},{id:6,name:"Completed"},{id:7,name:"Cancelled"}],promotionType:[{id:1,name:"Discounts"},{id:2,name:"Shipping"}],promotionProductApplicability:[{id:1,name:"All Products"},{id:2,name:"Specific Products"}],promotionOfferType:[{id:1,name:"No Code"},{id:2,name:"Generic Code"}],shipmentType:[{id:1,name:"Pickup"},{id:2,name:"Delivery"}]}}},async created(){},mounted(){this.showHiddenElements()},methods:{scrollIntoView(){const a=document.getElementById("top");a&&a.scrollIntoView({behavior:"smooth"})},showHiddenElements(){let a=this;if(!a.$el.getElementsByClassName)return;let n=a.$el.getElementsByClassName("initialHidden");for(let u=0;u<n.length;u++){let f=n[u];f.classList.remove("invisible"),f.classList.remove("d-none")}},close(){const a=this,n=document.referrer.toLowerCase();n&&n.includes("/account/login")?a.$router.go(-2):a.$router.go(-1)},toggle(a){const n=this;n.toggles[a]=!n.toggles[a],localStorage.setItem(n.togglesKey,JSON.stringify(n.toggles))}}},xt={mixins:[Pt],props:{uid:String},data(){return{copyright:`2020-${new Date().getFullYear()} HOAMS - UbePages`}},computed:{},async created(){},async mounted(){},methods:{isActive(a){return window.location.href.indexOf(a)>-1}}},Ct={class:"footer sticky-bottom"},Ut={class:"d-none d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},Vt={class:"container-md"},At={class:"navbar-text small p-0"},Et={class:"d-block d-sm-none navbar navbar-expand navbar-dark bg-primary bg-gradient py-1"},Nt={class:"container-md"},Ot={class:"navbar-nav nav-fill w-100"},Lt={class:"nav-item dropup"},Ht={class:"dropdown-menu","aria-labelledby":"dropdown01"},Bt={class:"nav-item dropup"},Dt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"};function qt(a,n,u,f,c,x){const y=W("router-link");return t(),o("footer",Ct,[e("div",Ut,[e("div",Vt,[e("span",At,"©"+v(c.copyright),1)])]),e("nav",Et,[e("div",Nt,[e("ul",Ot,[e("li",Lt,[n[3]||(n[3]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-user-group"})])],-1)),e("ul",Ht,[e("li",null,[P(y,{class:"dropdown-item",to:"/member/announcements"},{default:S(()=>n[0]||(n[0]=[e("i",{class:"fas fa-fw fa-bullhorn me-1"},null,-1),O(" Announcements ")])),_:1})]),e("li",null,[P(y,{class:"dropdown-item",to:"/member/posts"},{default:S(()=>n[1]||(n[1]=[e("i",{class:"fas fa-fw fa-signs-post me-1"},null,-1),O(" Posts ")])),_:1})]),e("li",null,[P(y,{class:"dropdown-item",to:"/member/yellow-pages"},{default:S(()=>n[2]||(n[2]=[e("i",{class:"fas fa-fw fa-address-book me-1"},null,-1),O(" Yellow Pages ")])),_:1})])])]),e("li",Bt,[n[5]||(n[5]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-house-chimney-user"})])],-1)),e("ul",Dt,[e("li",null,[P(y,{class:"dropdown-item",to:"/member/property-monthlydues"},{default:S(()=>n[4]||(n[4]=[O(" Property Monthly Dues ")])),_:1})])])])])])])])}const Rt=pe(xt,[["render",qt]]),jt={name:"AdminLayout",components:{TopNav:It,BottomNav:Rt},inject:["$config"],mounted(){const n=this.$config;document.title=`Account - ${n.appName}`}},zt={class:"d-flex flex-column vh-100"};function Ft(a,n,u,f,c,x){const y=W("Toasts"),D=W("router-view");return t(),o("div",zt,[P(y),P(D,{class:"flex-grow-1 mb-2"})])}const Yt=pe(jt,[["render",Ft]]),Wt={__name:"index",setup(a){return de().user,ne(()=>{}),(u,f)=>(t(),o("div",null,f[0]||(f[0]=[Le('<div class="mt-2 pb-2 shadow-sm"><div class="container-md"><div class="row align-items-center"><div class="col-md-auto"><h1><i class="fas fa-fw fa-dashboard me-1"></i>Dashboard </h1></div><div class="col-md"></div></div></div></div><div class="mt-2 container-md"> Dashboard contents here </div>',2)])))}},Gt={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"https://sonyfastpoc.azurewebsites.net/",VITE_APP_NAME:"Sony FAST",VITE_AUTH_AUTHORITY_URL:"https://login.microsoftonline.com/c0c53936-9e16-412b-839b-b364ff184d00",VITE_AUTH_CLIENT_ID:"0bdcd0e0-23b2-4e8f-b18c-f3b075f41dbc",VITE_AUTH_REDIRECT_URI:"/"},Jt=Gt;function Kt(){fe("$config");const a=Jt.VITE_API_URL,n=He.create({baseURL:a});return Ie.configure({template:'<div class="bar pt-1 bg-light" role="bar"><div class="peg1"></div></div><div class="spinner" role="spinner"><div class="fas fa-fw fa-spin fa-arrows-rotate text-white"></div></div>'}),n.interceptors.request.use(u=>{Ie.start();const{user:f}=de();return f&&f.token&&(u.headers?(u.headers.Authorization||(u.headers.Authorization=`Bearer ${f.token}`),u.headers["Access-Control-Allow-Origin"]||(u.headers["Access-Control-Allow-Origin"]="*")):u.headers={Authorization:`Bearer ${f.token}`,"Access-Control-Allow-Origin":"*"}),u}),n.interceptors.response.use(u=>(Ie.done(),u),u=>{throw Ie.done(),u}),n}function ue(a){if(!a.appTitle)throw Error("App Title is required.");if(!a.pageTitle)throw Error("Page Title is required.");const n=Ge(),u=Be(),f=Kt(),c=Re(),x=dt(),D=de().user,A=()=>D&&D.roles&&D.roles.includes("System"),M=()=>D&&D.roles&&D.roles.includes("administrator"),E=()=>D&&D.roles&&D.roles.includes("employee"),Y=()=>D&&D.roles&&D.roles.includes("Member"),R=()=>{let s=n.path;return n.query.returnUrl&&(s=n.query.returnUrl),s=`?returnUrl=${encodeURIComponent(s)}`,s},j=async()=>{const s=document.referrer.toLowerCase();s&&s.includes("/accounts/login")?await u.go(-2):await u.go(-1)},N=s=>{var q;const m=n.path,l=(q=n.query)==null?void 0:q.returnUrl;l&&!(m.startsWith(l)||l.startsWith(m))?u.push(l):u.push(s)},L=a.appTitle,d=a.pageTitle,G=oe(!1),F=oe(new Map),r=oe(""),w=oe(""),h=oe("");return{appTitle:L,pageTitle:d,busy:G,validations:F,infoMessage:r,warningMessage:w,errorMessage:h,router:u,route:n,axios:f,utils:c,toasts:x,close:j,closeWithReturnUrl:N,generateReturnUrl:R,security:{userId:D?D.userId:"",isSystem:A(),isAdministrator:M(),isEmployee:E(),isMember:Y()}}}const Qt={class:"h-100 d-flex align-items-center justify-content-center"},Xt={class:"form-signin w-100 m-auto"},Zt={class:"h3 mb-3 fw-normal"},es={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ts=["innerHTML"],ss={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},os={__name:"login",props:{urlReturn:{type:String,required:!1}},setup(a){fe("$config");const n=de(),u=ze(),f=new De(u.msalConfig),c=re({username:"",password:""}),x={username:{required:ee.withMessage("Username is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0}},y=ye(x,c),{appTitle:D,pageTitle:A,busy:M,isDirty:E,validations:Y,infoMessage:R,warningMessage:j,errorMessage:N,router:L,route:d,axios:G,utils:F,toasts:r,close:w,security:h}=ue({appTitle:"Sony FAST POC",pageTitle:"Sign On"});ne(async()=>{await f.initialize()});const s=async()=>{await f.loginPopup({}).then(()=>{debugger;const q=f.getAllAccounts()[0];f.setActiveAccount(q)}).catch(l=>{console.error(`error during authentication: ${l}`)});var m={account:f.getActiveAccount(),scopes:[]};await f.acquireTokenSilent(m).then(l=>{debugger;const p=l.account.idToken,V=Je(p);if(V.token=l.accessToken,console.log(l),!V.roles){debugger;V.roles=[]}V.userId=V.sub,n.login(V);var U=d.query.returnUrl;U?L.push(decodeURIComponent(U)):V.roles.length===1?L.push(`/${V.roles[0].toLowerCase()}`):L.push("/")}).catch(l=>{console.error(`error during acquireTokenSilent: ${l}`)})};return(m,l)=>(t(),le(ie,null,{default:S(()=>[e("div",Qt,[e("main",Xt,[e("div",null,[e("h1",Zt,v(i(D)),1),e("div",null,[i(N)?(t(),o("div",es,[l[1]||(l[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(N)},null,8,ts)])):C("",!0),i(y).$error?(t(),o("div",ss,[l[2]||(l[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(i(y).$errors,q=>(t(),o("li",{key:q.$uid},v(q.$message),1))),128))])])):C("",!0)]),e("button",{onClick:l[0]||(l[0]=q=>s()),class:"btn btn-primary w-100 py-2"}," Single Sign On ")])])])]),_:1}))}},ls=pe(os,[["__scopeId","data-v-896956d0"]]),as={class:"h-100 d-flex align-items-center justify-content-center"},ns={__name:"logout",setup(a){const n=de();return n.user,ne(async()=>{n.logoutWithRedirect()}),(u,f)=>(t(),o("div",as,f[0]||(f[0]=[e("div",{class:"card"},[e("div",{class:"card-header"}," Sign-Out "),e("div",{class:"card-body"},[O(" You have logged out from HOA MS."),e("br"),O(" Click "),e("a",{href:"/",class:"d-inline"},"here"),O(" to go back to home page. ")])],-1)])))}},is={class:"h-100 d-flex align-items-center justify-content-center"},rs={class:"card m-3"},ds={class:"card-header"},us={class:"card-body"},cs={class:"m-2"},ms={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},fs=["innerHTML"],ps={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},vs={class:"row row-cols-1 row-cols-sm-3"},gs={class:"col-sm"},bs={class:"form-group"},ys={key:0,class:"d-block invalid-feedback"},$s={class:"col-sm"},ws={class:"form-group"},hs={key:0,class:"d-block invalid-feedback"},_s={class:"col-sm"},ks={class:"form-group"},Ss={key:0,class:"d-block invalid-feedback"},Ms={class:"row row-cols-1 row-cols-sm-3"},Ts={class:"col"},Is={class:"form-group"},Ps={key:0,class:"d-block invalid-feedback"},xs={class:"col"},Cs={class:"form-group"},Us={key:0,class:"d-block invalid-feedback"},Vs={class:"row row-cols-1 row-cols-sm-3"},As={class:"col-sm"},Es={class:"form-group"},Ns={key:0,class:"d-block invalid-feedback"},Os={class:"col-sm"},Ls={class:"form-group"},Hs={key:0,class:"d-block invalid-feedback"},Bs={class:"mt-2 row row-cols-1 row-cols-sm-3 g-2"},Ds={class:"col"},qs=["disabled"],Rs={class:"col"},js={class:"col"},zs={__name:"register",props:{urlReturn:{type:String,required:!1}},setup(a){const n=re({firstName:"",middleName:"",lastName:"",phoneNumber:"",email:"",password:"",confirmPassword:""}),u=(h,s)=>h===s.password,f={firstName:{required:ee.withMessage("First name is required.",te),$autoDirty:!0,$lazy:!0},middleName:{required:ee.withMessage("Middle name is required.",te),$autoDirty:!0,$lazy:!0},lastName:{required:ee.withMessage("Last name is required.",te),$autoDirty:!0,$lazy:!0},phoneNumber:{required:ee.withMessage("Phone number is required.",te),$autoDirty:!0,$lazy:!0},email:{required:ee.withMessage("Email is required.",te),$autoDirty:!0,$lazy:!0},password:{required:ee.withMessage("Password is required.",te),$autoDirty:!0,$lazy:!0},confirmPassword:{required:ee.withMessage("Confirm password is required.",te),confirmSamePassword:ee.withMessage("Password and confirm passwrod are different.",u),$autoDirty:!0,$lazy:!0}},c=ye(f,n),{appTitle:x,pageTitle:y,busy:D,isDirty:A,validations:M,infoMessage:E,warningMessage:Y,errorMessage:R,router:j,axios:N,utils:L,toasts:d,close:G,security:F}=ue({appTitle:"HOA MS",pageTitle:"Register User"}),r=fe("$config");ne(()=>{});const w=async()=>{const h=n;if(D.value)return;if(!await c.value.$validate()){window.scrollTo(0,0);return}R.value=null;try{D.value=!0;const m=L.clone(h);m.tenantid=r.tenantId;debugger;await N({method:"post",url:"/api/v1/accounts/register",data:m}).then(l=>{d.success("Register","Registration was successfull.",{onClose:async()=>{await j.push("/accounts/login")}})})}catch(m){R.value=L.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{D.value=!1}};return(h,s)=>{const m=W("router-link");return t(),le(ie,null,{default:S(()=>[e("div",is,[e("div",rs,[e("h4",ds,v(i(y)),1),e("div",us,[e("div",cs,[i(R)?(t(),o("div",ms,[s[8]||(s[8]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(R)},null,8,fs)])):C("",!0),i(c).$error?(t(),o("div",ps,[s[9]||(s[9]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(i(c).$errors,l=>(t(),o("li",{key:l.$uid},v(l.$message),1))),128))])])):C("",!0)]),e("div",vs,[e("div",gs,[e("div",bs,[s[10]||(s[10]=e("label",null,"First Name",-1)),T(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>n.firstName=l),type:"text",class:"form-control"},null,512),[[H,n.firstName]]),i(c).firstName.$error?(t(),o("div",ys,[(t(!0),o(B,null,z(i(c).firstName.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])]),e("div",$s,[e("div",ws,[s[11]||(s[11]=e("label",null,"Middle Name",-1)),T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>n.middleName=l),type:"text",class:"form-control"},null,512),[[H,n.middleName]]),i(c).middleName.$error?(t(),o("div",hs,[(t(!0),o(B,null,z(i(c).middleName.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])]),e("div",_s,[e("div",ks,[s[12]||(s[12]=e("label",null,"Last Name",-1)),T(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>n.lastName=l),type:"text",class:"form-control"},null,512),[[H,n.lastName]]),i(c).lastName.$error?(t(),o("div",Ss,[(t(!0),o(B,null,z(i(c).lastName.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])])]),e("div",Ms,[e("div",Ts,[e("div",Is,[s[13]||(s[13]=e("label",null,"Phone Number",-1)),T(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>n.phoneNumber=l),type:"tel",class:"form-control"},null,512),[[H,n.phoneNumber]]),i(c).phoneNumber.$error?(t(),o("div",Ps,[(t(!0),o(B,null,z(i(c).phoneNumber.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])]),e("div",xs,[e("div",Cs,[s[14]||(s[14]=e("label",null,"Email",-1)),T(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>n.email=l),type:"email",class:"form-control"},null,512),[[H,n.email]]),i(c).email.$error?(t(),o("div",Us,[(t(!0),o(B,null,z(i(c).email.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])])]),e("div",Vs,[e("div",As,[e("div",Es,[s[15]||(s[15]=e("label",null,"Password",-1)),T(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>n.password=l),type:"password",class:"form-control"},null,512),[[H,n.password]]),i(c).password.$error?(t(),o("div",Ns,[(t(!0),o(B,null,z(i(c).password.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])]),e("div",Os,[e("div",Ls,[s[16]||(s[16]=e("label",null,"Confirm Password",-1)),T(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>n.confirmPassword=l),type:"password",class:"form-control"},null,512),[[H,n.confirmPassword]]),i(c).confirmPassword.$error?(t(),o("div",Hs,[(t(!0),o(B,null,z(i(c).confirmPassword.$errors,l=>(t(),o("div",{key:l.$uid},v(l.$message),1))),128))])):C("",!0)])])]),e("div",Bs,[e("div",Ds,[e("button",{disabled:i(c).$dirty&&i(c).$invalid,onClick:s[7]||(s[7]=l=>w()),class:"btn btn-primary w-100"},s[17]||(s[17]=[e("span",{class:"fas fa-fw fa-save me-1"},null,-1),O("Register ")]),8,qs)]),e("div",Rs,[P(m,{to:"/",class:"btn btn-outline-primary w-100"},{default:S(()=>s[18]||(s[18]=[O("Home")])),_:1})]),e("div",js,[P(m,{to:"/accounts/login",class:"btn btn-outline-primary w-100"},{default:S(()=>s[19]||(s[19]=[O("Login")])),_:1})])])])])])]),_:1})}}},Fs={path:"/accounts",component:Yt,props:!1,meta:{},children:[{path:"",component:Wt},{path:"login",component:ls},{path:"logout",component:ns},{path:"register",component:zs}]};function Fe(){const a=Be(),n=A=>window.location.href.indexOf(A)>-1,u=A=>localStorage.getItem("data-bs-theme")||A,f=A=>{document.documentElement.setAttribute("data-bs-theme",A),localStorage.setItem("data-bs-theme",A)},c=async()=>await He.get("https://bootswatch.com/api/5.json").then(A=>A.data),x=A=>{const M=document.querySelector("link[href*='https://cdn.jsdelivr.net/npm/bootswatch']");M&&A?(M.setAttribute("href",A),localStorage.setItem("bootswatch-theme",A)):alert("cannot query css link")},y=A=>{D(),a.push(A)},D=()=>{if(screen.width<576){const M=document.getElementById("navbarCollapse");if(M){const E=Ke.getInstance(M);E&&E.hide()}}};return{isActive:n,getCurrentBsTheme:u,changeBsTheme:f,getBootswatch:c,changeTheme:x,navigate:y,collapseNavbar:D}}const Ys={class:"sticky-top navbar navbar-expand-sm bg-primary","data-bs-theme":"dark"},Ws={class:"container-md"},Gs={class:"navbar-collapse collapse",id:"navbarCollapse"},Js={class:"navbar-nav"},Ks={class:"nav-item"},Qs={class:"nav-item"},Xs={class:"nav-item"},Zs={class:"d-none nav-item dropdown"},eo={class:"dropdown-menu","aria-labelledby":"dropdown01"},to={class:"nav-item"},so={class:"nav-item dropdown d-none"},oo={class:"dropdown-menu","aria-labelledby":"dropdown01"},lo={class:"nav-item dropdown d-none"},ao={class:"dropdown-menu","aria-labelledby":"dropdown01"},no={class:"navbar-nav ms-auto"},io={class:"nav-item dropdown"},ro={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},uo=["onClick"],co={class:"nav-item dropdown"},mo={class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},fo={class:"d-inline d-sm-none d-md-inline"},po={key:0},vo={key:1},go={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdown01"},bo={key:0},yo={key:1},$o={__name:"topNav",props:{appName:{type:String,default:"Sony FAST"}},setup(a){const n=ze(),{isActive:u,getCurrentBsTheme:f,changeBsTheme:c,getBootswatch:x,changeTheme:y,navigate:D,collapseNavbar:A}=Fe(),M=de(),E=M.user,Y=re({user:E,username:E?E.nameFull:"Guest",bsTheme:"dark",currentTheme:"",bootswatch:{}});ne(async()=>{const L=Y;L.bootswatch=await x();const d=f(L.bsTheme);d&&(L.bsTheme=d,c(L.bsTheme));const G=localStorage.getItem("bootswatch-theme");G&&(L.currentTheme=G,y(G))});const R=L=>{y(L),Y.currentTheme=L,A()},j=L=>{c(L),Y.bsTheme=L,A()},N=async()=>{M.logoutWithRedirect();const L=new De(n.msalConfig);await L.initialize();const d={mainWindowRedirectUri:"/"};await L.logoutPopup(d)};return(L,d)=>{const G=W("router-link");return t(),le(ie,null,{default:S(()=>[e("nav",Ys,[e("div",Ws,[P(G,{class:"navbar-brand",to:"/administrator"},{default:S(()=>[O(v(a.appName),1)]),_:1}),d[26]||(d[26]=e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarSideCollapse","aria-expanded":"false","aria-label":"Toggle Navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),e("div",Gs,[e("ul",Js,[e("li",Ks,[P(G,{to:"/videos",onClick:i(A),class:"nav-link"},{default:S(()=>d[3]||(d[3]=[O(" Videos ")])),_:1},8,["onClick"])]),e("li",Qs,[P(G,{to:"/source-locations",onClick:i(A),class:"nav-link"},{default:S(()=>d[4]||(d[4]=[O(" Source Locations ")])),_:1},8,["onClick"])]),e("li",Xs,[P(G,{to:"/vod-sources",onClick:i(A),class:"nav-link"},{default:S(()=>d[5]||(d[5]=[O(" Video on Demand (VOD) ")])),_:1},8,["onClick"])]),e("li",Zs,[d[8]||(d[8]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"}," Sources ",-1)),e("ul",eo,[e("li",null,[P(G,{to:"/source-locations",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[6]||(d[6]=[O(" Source Locations ")])),_:1},8,["onClick"])]),e("li",null,[P(G,{to:"/vod-sources",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[7]||(d[7]=[O(" Video on Demand (VOD) ")])),_:1},8,["onClick"])])])]),e("li",to,[P(G,{to:"/channels",onClick:i(A),class:"nav-link"},{default:S(()=>d[9]||(d[9]=[O(" Channels ")])),_:1},8,["onClick"])]),e("li",so,[d[13]||(d[13]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-film me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Movies")])],-1)),e("ul",oo,[e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[10]||(d[10]=[O(" Movies ")])),_:1},8,["onClick"])]),e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[11]||(d[11]=[O(" Movie Alphas ")])),_:1},8,["onClick"])]),e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[12]||(d[12]=[O(" Movie Alpha Media ")])),_:1},8,["onClick"])])])]),e("li",lo,[d[18]||(d[18]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",null,[e("span",{class:"fas fa-fw fa-tv me-1"}),e("span",{class:"d-inline d-sm-none d-md-inline"},"Series")])],-1)),e("ul",ao,[e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[14]||(d[14]=[O(" Series ")])),_:1},8,["onClick"])]),e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[15]||(d[15]=[O(" Seasons ")])),_:1},8,["onClick"])]),e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[16]||(d[16]=[O(" Episodes ")])),_:1},8,["onClick"])]),e("li",null,[P(G,{to:"/movies",onClick:i(A),class:"dropdown-item"},{default:S(()=>d[17]||(d[17]=[O(" Episode Alphas ")])),_:1},8,["onClick"])])])])]),e("ul",no,[e("li",io,[d[22]||(d[22]=e("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("span",{class:"fas fa-fw fa-wand-sparkles me-1"}),O("Themes ")],-1)),e("ul",ro,[e("li",null,[Y.bsTheme==="dark"?(t(),o("button",{key:0,onClick:d[0]||(d[0]=F=>j("light")),class:"dropdown-item"},d[19]||(d[19]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),O("Dark Mode ")]))):(t(),o("button",{key:1,onClick:d[1]||(d[1]=F=>j("dark")),class:"dropdown-item"},d[20]||(d[20]=[e("span",{class:"fas fa-fw fa-lightbulb me-1"},null,-1),O("Light Mode ")])))]),d[21]||(d[21]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),(t(!0),o(B,null,z(Y.bootswatch.themes,F=>(t(),o("li",null,[e("button",{onClick:r=>R(F.cssCdn),class:ae(["dropdown-item",{active:Y.currentTheme===F.cssCdn}])},v(F.name),11,uo)]))),256))])]),e("li",co,[e("a",mo,[e("span",null,[d[23]||(d[23]=e("span",{class:"fas fa-fw fa-circle-user me-1"},null,-1)),e("span",fo,[i(E)?(t(),o("span",po,v(i(E).name),1)):(t(),o("span",vo," Guest "))])])]),e("ul",go,[i(E)?(t(),o("li",bo,[e("button",{onClick:d[2]||(d[2]=F=>N()),class:"dropdown-item"},d[24]||(d[24]=[e("span",{class:"fas fa-fw fa-sign-out me-1"},null,-1),O("Logout ")]))])):(t(),o("li",yo,[P(G,{to:"/accounts/login",class:"dropdown-item"},{default:S(()=>d[25]||(d[25]=[e("span",{class:"fas fa-fw fa-sign-in me-1"},null,-1),O("Login ")])),_:1})]))])])])])])])]),_:1})}}},wo={class:"footer sticky-bottom"},ho={class:"d-sm-block navbar navbar-dark bg-primary bg-gradient py-1"},_o={class:"container-md"},ko={class:"navbar-text small p-0"},So={__name:"bottomNav",props:{appName:{type:String,default:"SCH2"}},setup(a){Fe();const n=fe("$config"),f=de().user;let x=new Date().getFullYear();const y=re({user:f,username:f?f.nameFull:"Guest",copyright:`2020-${x} ${n.appName}`});return ne(async()=>{}),(D,A)=>(t(),o("footer",wo,[e("div",ho,[e("div",_o,[e("span",ko,"©"+v(y.copyright),1)])])]))}},Mo={props:{showProgress:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},maxMessages:{type:Number,default:5},timeOut:{type:Number,default:3e3},closeable:{type:Boolean,default:!0}},data(){return{messages:[],count:0}},created(){Ve.$on("toast-message",this.handleMessageEvent)},methods:{handleMessageEvent(a){a.message&&this.addMessage(a.title,a.message,a.type,a.options)},async addMessage(a,n,u,f={}){var c={id:this.count++,title:a,message:n,type:u,showProgress:this.showProgress,timeOut:this.timeOut,closeable:this.closeable,rtl:this.rtl,progress:0,paused:!1,animationFrame:null};c=Object.assign({},c,f),this.messages.unshift(c),this.messages.length>this.maxMessages&&this.messages.splice(this.maxMessages),c.timeOut>0&&await this.startTimeout(c)},async startTimeout(a,n=0){const u=this,f=performance.now(),c=async()=>{a.animationFrame=requestAnimationFrame(async x=>{const y=x+n-f;if(!u.exists(a)||a.paused){cancelAnimationFrame(a.animationFrame);return}else if(y<a.timeOut){const D=y/a.timeOut;a.progress=D,await c()}else{a.progress=1,cancelAnimationFrame(a.animationFrame),u.remove(a);return}})};await c()},pauseProgress(a){a.timeOut<=0||(a.paused=!0)},async resumeProgress(a){a.timeOut<=0||(a.paused=!1,await this.startTimeout(a,a.timeOut*a.progress))},getCurrentProgress(a){return Math.round(a.progress*100)===100?100:a.progress*100},getIconClass(a){const n=a.type;let u="";switch(n){case"success":u="fas fa-fw fa-circle-check";break;case"info":u="fas fa-fw fa-circle-info";break;case"warning":u="fas fa-fw fa-circle-exclamation";break;case"danger":u="fas fa-fw fa-triangle-exclamation";break}let f=u;return a.rtl?"icon-right "+f:"icon-left "+f},async remove(a){const n=this.messages.findIndex(u=>u.id===a.id);this.messages.splice(n,1),typeof a.onClose=="function"&&await a.onClose()},exists(a){return this.messages.findIndex(u=>u.id===a.id)!==-1}}},To={"aria-live":"polite","aria-atomic":"true",class:"position-static"},Io=["onMouseover","onMouseout"],Po={class:"me-auto text-white"},xo=["onClick"],Co={class:"toast-body"},Uo=["innerHTML"],Vo={key:0,class:"progress m-1",style:{height:"4px"}};function Ao(a,n,u,f,c,x){return t(),le(ie,null,{default:S(()=>[e("div",To,[P(ve,{class:"toast-container top-0 end-0 p-3",name:"toast",tag:"div",appear:""},{default:S(()=>[(t(!0),o(B,null,z(c.messages,y=>(t(),o("div",{key:y.id,class:ae(["toast show mb-2 ms-auto",`border-${y.type}`]),role:"alert","aria-live":"assertive","aria-atomic":"true",onMouseover:D=>x.pauseProgress(y),onMouseout:D=>x.resumeProgress(y)},[e("div",{class:ae(["toast-header",`bg-${y.type}`])},[e("strong",Po,[e("i",{class:ae([x.getIconClass(y),"me-1"])},null,2),O(v(y.title),1)]),y.closeable?(t(),o("button",{key:0,type:"button",class:"mr-2 mb-1 btn-close","data-dismiss":"toast","aria-label":"Close",onClick:D=>x.remove(y)},n[0]||(n[0]=[e("span",{"aria-hidden":"true"},null,-1)]),8,xo)):C("",!0)],2),e("div",Co,[e("div",{innerHTML:y.message},null,8,Uo)]),y.timeOut>0&&y.showProgress?(t(),o("div",Vo,[e("div",{class:ae(`bg-${y.type}`),style:qe({width:x.getCurrentProgress(y)+"%"})},null,6)])):C("",!0)],42,Io))),128))]),_:1})])]),_:1})}const Eo=pe(Mo,[["render",Ao],["__scopeId","data-v-5272bd9a"]]),No={name:"AdminLayout",components:{TopNav:$o,BottomNav:So},inject:["$config"],mounted(){this.$config,document.title="Administrator"}},Oo={class:"d-flex flex-column vh-100"};function Lo(a,n,u,f,c,x){const y=W("Toasts"),D=W("TopNav"),A=W("router-view"),M=W("BottomNav");return t(),o("div",Oo,[P(y),P(D),P(A,{class:"flex-grow-1 mb-2"}),n[0]||(n[0]=e("div",{class:"pt-2"},null,-1)),P(M)])}const Ho=pe(No,[["render",Lo]]),Bo={class:"d-flex flex-row justify-content-end"},Do={class:"mt-2 container-md"},qo={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Ro=["innerHTML"],jo={class:"card card-body mb-2"},zo={key:0,class:"fas fa-fw fa-circle-check text-success"},Fo={key:1,class:"fas fa-fw fa-times-circle text-danger"},Yo={key:0,class:"fas fa-fw fa-circle-check text-success"},Wo={key:1,class:"fas fa-fw fa-times-circle text-danger"},Go={class:"d-none row row-cols-1 row-cols-sm-2 g-sm-4 g-2"},Jo={class:"col"},Ko={class:"card h-100 shadow-sm"},Qo={class:"card-body"},Xo={class:"col"},Zo={class:"card h-100 shadow-sm"},el={class:"card-body"},tl={__name:"Index",setup(a){const{appTitle:n,pageTitle:u,busy:f,isDirty:c,validations:x,infoMessage:y,warningMessage:D,errorMessage:A,router:M,axios:E,utils:Y,toasts:R,close:j,generateReturnUrl:N,security:L}=ue({appTitle:"ARC AIO",pageTitle:"Dashboard"});fe("$config"),de().user;const G=re({item:null});oe("805630ed-f288-4f2f-83a4-6c71312f6970"),oe(),ne(async()=>{});const F=async()=>{const w=G;if(!f.value)try{f.value=!0;const h="/api/v1/dashboard/administrators/";w.item=[],await E.get(h).then(s=>{w.item=s.data})}catch(h){A.value=Y.getErrorMessageAsHtml(h),window.scrollTo(0,0)}finally{f.value=!1}},r=async()=>{await F()};return(w,h)=>{const s=W("PageHeader"),m=W("router-link");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(s,{"page-icon":"fas fa-fw fa-dashboard",pageTitle:i(u),"header-break":"row row-cols-2"},{default:S(()=>[e("div",Bo,[e("button",{onClick:h[0]||(h[0]=l=>r()),class:"ms-2 btn btn-secondary"},h[1]||(h[1]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)]))])]),_:1},8,["pageTitle"]),e("div",Do,[i(A)?(t(),o("div",qo,[h[2]||(h[2]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:JSON.stringify(i(A))},null,8,Ro)])):C("",!0),h[14]||(h[14]=e("div",{class:"alert alert-warning"},[e("span",{class:"fas fa-fw fa-info-circle me-1"}),O("UNDER CONSTRUCTION ")],-1)),e("div",jo,[h[5]||(h[5]=O(" Security ")),e("ul",null,[e("li",null,[i(L).isAdministrator?(t(),o("span",zo)):(t(),o("span",Fo)),h[3]||(h[3]=O(" Administrator "))]),e("li",null,[i(L).isEmployee?(t(),o("span",Yo)):(t(),o("span",Wo)),h[4]||(h[4]=O(" Employee "))])])]),e("div",Go,[e("div",Jo,[e("div",Ko,[h[7]||(h[7]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-building me-1"}),O("Human Resources ")])],-1)),e("div",Qo,[e("ul",null,[e("li",null,[P(m,{to:"/movies"},{default:S(()=>h[6]||(h[6]=[O(" Employees ")])),_:1})])])])])]),e("div",Xo,[e("div",Zo,[h[13]||(h[13]=e("div",{class:"card-header"},[e("h4",null,[e("span",{class:"fas fa-fw fa-photo-film me-1"}),O("TBD ")])],-1)),e("div",el,[e("ul",null,[e("li",null,[P(m,{to:"/media-videos"},{default:S(()=>h[8]||(h[8]=[O(" TBD ")])),_:1})]),e("li",null,[P(m,{to:"/movies"},{default:S(()=>h[9]||(h[9]=[O(" TBD ")])),_:1})]),e("li",null,[P(m,{to:"/movies"},{default:S(()=>h[10]||(h[10]=[O(" TBD ")])),_:1})]),e("li",null,[P(m,{to:"/movies"},{default:S(()=>h[11]||(h[11]=[O(" TBD ")])),_:1})]),e("li",null,[P(m,{to:"/movies"},{default:S(()=>h[12]||(h[12]=[O(" TBD ")])),_:1})])])])])])])])])]),_:1})}}},sl={class:"d-flex justify-content-end"},ol=["disabled"],ll={class:"input-group"},al={class:"row row-cols-1 row-cols-sm-2 mt-3"},nl={class:"col text-center mb-2"},il=["src"],rl={class:"col"},dl={class:"form-floating mb-2"},ul={key:0,class:"d-block invalid-feedback"},cl={class:"form-floating mb-2"},ml={class:"row row-cols-sm-2"},fl={class:"col"},pl={class:"form-floating mb-2"},vl={class:"col"},gl={class:"form-floating mb-2"},bl={class:"row row-cols-sm-2"},yl={class:"col"},$l={class:"form-floating mb-2"},wl={class:"col"},hl={class:"form-floating mb-2"},_l={class:"col"},kl={class:"form-floating mb-2"},Sl={class:"col"},Ml={class:"form-floating mb-2"},Ae="YYYY-MM-DD HH:mm",Tl={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,security:R}=ue({appTitle:"ARC AIO",pageTitle:"Add User"}),j=a,N=M.moment().local();N.format(Ae),N.add(24,"hours").format(Ae);const L=oe("a22de760-358d-4a0e-83ad-2624a5c11f73"),d=re({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),G={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},F=ye(G,d);ne(async()=>{});const r=async()=>{const h=d;if(!f.value)try{f.value=!0,h.item=null;const s=`/api/v1/users/get-from-entra-id/${L.value}`;await A.get(s).then(m=>{h.item=m.data})}catch(s){y.value=M.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{f.value=!1}},w=async()=>{const h=d;if(f.value)return;if(!await F.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,y.value="",await A.post(`/api/v1/users/add-from-entra-id/${h.item.userId}`).then(m=>{E.success("Add User","User added",{onClose:async()=>{const l=`${j.urlView}/${m.data}`;await D.push(l)}})})}catch(m){y.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{f.value=!1}};return(h,s)=>{const m=W("router-link"),l=W("PageHeader"),q=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:i(u),"header-break":"row row-cols-2"},{default:S(()=>[e("div",sl,[e("button",{disabled:i(F).$dirty&&i(F).$invalid,onClick:s[0]||(s[0]=p=>w()),class:"btn btn-primary"},s[12]||(s[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ol),P(m,{to:j.urlMain,class:"btn btn-secondary ms-2"},{default:S(()=>s[13]||(s[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),P(q,{errorMessage:i(y),vuelidate:i(F)},{default:S(()=>[e("div",null,[e("div",null,[e("div",ll,[T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>L.value=p),onKeyup:s[2]||(s[2]=he(p=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[H,L.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:s[3]||(s[3]=p=>r())},s[14]||(s[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",al,[e("div",nl,[e("img",{src:d.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,il)]),e("div",rl,[e("div",dl,[T(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>d.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,d.item.userId]]),s[15]||(s[15]=e("label",{for:"userId"},"User Id",-1)),i(F).item.userId.$error?(t(),o("div",ul,[(t(!0),o(B,null,z(i(F).item.userId.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)]),e("div",cl,[T(e("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>d.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,d.item.displayName]]),s[16]||(s[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",ml,[e("div",fl,[e("div",pl,[T(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>d.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,d.item.givenName]]),s[17]||(s[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",vl,[e("div",gl,[T(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>d.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,d.item.surname]]),s[18]||(s[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",bl,[e("div",yl,[e("div",$l,[T(e("input",{"onUpdate:modelValue":s[8]||(s[8]=p=>d.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,d.item.email]]),s[19]||(s[19]=e("label",{for:"email"},"Email",-1))])]),e("div",wl,[e("div",hl,[T(e("input",{"onUpdate:modelValue":s[9]||(s[9]=p=>d.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,d.item.mobilePhone]]),s[20]||(s[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",_l,[e("div",kl,[T(e("input",{"onUpdate:modelValue":s[10]||(s[10]=p=>d.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,d.item.principalName]]),s[21]||(s[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Sl,[e("div",Ml,[T(e("input",{"onUpdate:modelValue":s[11]||(s[11]=p=>d.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,d.item.jobTitle]]),s[22]||(s[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}};function Me(a){if(!a.cacheKey)throw Error("Cache Key required.");if(!a.baseUrl)throw Error("Base Url required.");const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,closeWithReturnUrl:R,generateReturnUrl:j,security:N}=ue({appTitle:a.appTitle,pageTitle:a.pageTitle}),L=JSON.parse(JSON.stringify(a.filter));L.pageIndex=L.pageIndex||1,L.pageSize=L.pageSize||15,L.sortField=L.sortField||"",L.sortOrder=L.sortOrder||1,L.updateUrl=L.updateUrl||!1,L.items=L.items||[],L.query=L.query||{},L.query.criteria=L.query.criteria||"";const d=oe(L),G=()=>{var V;if(f.value){console.log("Paginated search is currently busy.");return}const l=JSON.parse(localStorage.getItem(a.cacheKey))||{},q=new URLSearchParams(window.location.search),p=d.value;p.query.criteria=q.get("c")||l.criteria||p.query.criteria||"",p.pageIndex=parseInt(q.get("p"),10)||l.pageIndex||p.pageIndex||1,p.pageSize=parseInt(q.get("s"),10)||l.pageSize||p.pageSize||5,p.sortField=q.get("sf")||l.sortField||p.sortField||"",p.sortOrder=parseInt(q.get("so"),10)||l.sortOrder||p.sortOrder||1,p.visible=l.visible||p.visible,(V=a.initializeFilter)==null||V.call(a,d,a.cacheKey)},F=()=>{if(a.getQuery)return a.getQuery(d.value);{const l=d.value;return["?c=",encodeURIComponent(l.query.criteria),"&p=",l.pageIndex,"&s=",l.pageSize,"&sf=",l.sortField,"&so=",l.sortOrder].join("")}},r=()=>{if(a.saveQuery)a.saveQuery(d.value,a.cacheKey);else{const l=d.value;localStorage.setItem(a.cacheKey,JSON.stringify({criteria:l.query.criteria,pageIndex:l.pageIndex,pageSize:l.pageSize,sortField:l.sortField,sortOrder:l.sortOrder,visible:l.visible}))}};return{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,closeWithReturnUrl:R,generateReturnUrl:j,security:N,filter:d,initializeFilter:G,getQuery:F,saveQuery:r,search:async l=>{var p;let q=d.value;if(f.value){console.log("Paginated search is currently busy.");return}l>0&&(q.pageIndex=l);try{f.value=!0,y.value="";const V=F();q.selected=null,await A(`${a.baseUrl}/${V}`).then(async U=>{var J;Array.isArray(U.data)?q.items=U.data:q=Object.assign(q,U.data);let _=location.pathname;_.endsWith("/")?_+=V:_+="/"+V,q.updateUrl&&window.history.replaceState(V,`${n}-search`,_),q.items.forEach(X=>{X.expand=!1}),r(),(J=a.successAction)==null||J.call(a,d.value)})}catch(V){if(localStorage.removeItem(a.cacheKey),a.failAction)a.failAction(V);else{const U=M.getErrorMessageAsHtml(V);y.value=U,E.error("Error Occured",U)}}finally{f.value=!1,(p=a.finalAction)==null||p.call(a)}},getRowNumber:l=>{const q=d.value;return(q.pageIndex-1)*q.pageSize+(l+1)},setSelected:l=>{const q=d.value;q.selected&&l&&q.selected===l?q.selected=null:(q.selected&&(q.selected.expand=!1),q.selected=l,q.selected.expand=!0)},isSelected:l=>{const q=d.value;return l===null||q.selected===null?!1:l===q.selected}}}const Il={class:"d-flex justify-content-end"},Pl={key:0},xl={class:"ms-1"},Cl={class:"input-group"},Ul={class:"table-responsive"},Vl={class:"table table-hover mb-0"},Al=["textContent"],El=["src"],Nl="/api/v1/users/search",Ol={__name:"index",props:{urlAdd:{type:String,default:"/users/add"},urlView:{type:String,default:"/users/view"}},setup(a){fe("$config");const u=de().user,{appTitle:f,pageTitle:c,busy:x,infoMessage:y,warningMessage:D,errorMessage:A,router:M,axios:E,utils:Y,toasts:R,close:j,security:N,filter:L,initializeFilter:d,getQuery:G,saveQuery:F,search:r,getRowNumber:w,setSelected:h,isSelected:s}=Me({appTitle:"ARC CMS",pageTitle:"Users",cacheKey:`${u==null?void 0:u.userId}/users/search`,baseUrl:Nl,filter:{updateUrl:!0}});return ne(async()=>{d(),await r()}),(m,l)=>{const q=W("router-link"),p=W("PageHeader"),V=W("m-pagination"),U=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(p,{"page-icon":"fas fa-fw fa-users",pageTitle:i(c)},{default:S(()=>[e("div",Il,[i(N).isAdministrator?(t(),o("div",Pl,[P(q,{to:a.urlAdd,class:"btn btn-primary"},{default:S(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",xl,[e("div",Cl,[T(e("input",{"onUpdate:modelValue":l[0]||(l[0]=_=>i(L).query.criteria=_),onKeyup:l[1]||(l[1]=he(_=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(L).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=_=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),P(U,{errorMessage:i(A)},{default:S(()=>[e("div",Ul,[e("table",Vl,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Display Name"),e("th",null,"Email"),e("th",null,"Job Title")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(i(L).items,(_,J)=>(t(),o("tr",{key:_.movieId},[e("td",{textContent:v(i(w)(J)),class:"text-center"},null,8,Al),e("td",null,[_.photoBase64?(t(),o("img",{key:0,src:_.photoBase64,style:{width:"4rem",height:"4rem"},class:"img-fluid img-thumbnail"},null,8,El)):C("",!0)]),e("td",null,[P(q,{to:`${a.urlView}/${_.userId}`,class:"d-inline-block text-truncate"},{default:S(()=>[O(v(_.displayName),1)]),_:2},1032,["to"])]),e("td",null,v(_.email),1),e("td",null,v(_.jobTitle),1)]))),128))]),_:1},512),[[be,i(L).items.length>0]])])]),P(V,{filter:i(L),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Ll={class:"d-flex flex-row justify-content-end"},Hl={key:0},Bl={class:"row row-cols-1 row-cols-sm-2 mt-3"},Dl={class:"col text-center mb-2"},ql=["src"],Rl={class:"col"},jl={class:"form-floating mb-2"},zl={class:"form-floating mb-2"},Fl={class:"row row-cols-sm-2"},Yl={class:"col"},Wl={class:"form-floating mb-2"},Gl={class:"col"},Jl={class:"form-floating mb-2"},Kl={class:"row row-cols-sm-2"},Ql={class:"col"},Xl={class:"form-floating mb-2"},Zl={class:"col"},ea={class:"form-floating mb-2"},ta={class:"col"},sa={class:"form-floating mb-2"},oa={class:"col"},la={class:"form-floating mb-2"},aa={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/users"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:x,validations:y,infoMessage:D,warningMessage:A,errorMessage:M,router:E,axios:Y,utils:R,toasts:j,close:N,closeWithReturnUrl:L,generateReturnUrl:d,security:G}=ue({appTitle:"ARC CMS",pageTitle:"View User"});fe("$config");const F=de();F.user;const r=re({user:F.user,item:null});ne(async()=>{await w()});const w=async()=>{const m=r;if(!c.value)try{c.value=!0,M.value="",r.item=null;const l=`/api/v1/users/get-from-db/${n.id}/`;await Y.get(l).then(q=>{m.item=q.data})}catch(l){M.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}},h=async()=>{await w()},s=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/users/${n.id}/`).then(l=>{j.warning("Delete User","User was deleted.",{async onClose(){await E.push(n.urlMain)}})})}catch(l){M.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}}};return(m,l)=>{const q=W("router-link"),p=W("PageHeader"),V=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(p,{"page-icon":"fas fa-fw fa-user",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:S(()=>[e("div",Ll,[i(G).isAdministrator?(t(),o(B,{key:0},[P(q,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:S(()=>l[11]||(l[11]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=U=>s()),class:"ms-1 btn btn-warning"},l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:l[1]||(l[1]=U=>h()),class:"ms-2 btn btn-secondary"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=U=>i(L)(n.urlMain)),class:"btn btn-secondary ms-1"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),P(V,{errorMessage:i(M)},{default:S(()=>[r.item?(t(),o("div",Hl,[e("div",null,[e("div",Bl,[e("div",Dl,[e("img",{src:r.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,ql)]),e("div",Rl,[e("div",jl,[T(e("input",{"onUpdate:modelValue":l[3]||(l[3]=U=>r.item.userId=U),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,r.item.userId]]),l[15]||(l[15]=e("label",{for:"userId"},"User Id",-1))]),e("div",zl,[T(e("input",{"onUpdate:modelValue":l[4]||(l[4]=U=>r.item.displayName=U),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,r.item.displayName]]),l[16]||(l[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Fl,[e("div",Yl,[e("div",Wl,[T(e("input",{"onUpdate:modelValue":l[5]||(l[5]=U=>r.item.givenName=U),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,r.item.givenName]]),l[17]||(l[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Gl,[e("div",Jl,[T(e("input",{"onUpdate:modelValue":l[6]||(l[6]=U=>r.item.surname=U),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,r.item.surname]]),l[18]||(l[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Kl,[e("div",Ql,[e("div",Xl,[T(e("input",{"onUpdate:modelValue":l[7]||(l[7]=U=>r.item.email=U),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,r.item.email]]),l[19]||(l[19]=e("label",{for:"email"},"Email",-1))])]),e("div",Zl,[e("div",ea,[T(e("input",{"onUpdate:modelValue":l[8]||(l[8]=U=>r.item.mobilePhone=U),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,r.item.mobilePhone]]),l[20]||(l[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",ta,[e("div",sa,[T(e("input",{"onUpdate:modelValue":l[9]||(l[9]=U=>r.item.principalName=U),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,r.item.principalName]]),l[21]||(l[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",oa,[e("div",la,[T(e("input",{"onUpdate:modelValue":l[10]||(l[10]=U=>r.item.jobTitle=U),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,r.item.jobTitle]]),l[22]||(l[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},na={class:"d-flex justify-content-end"},ia=["disabled"],ra={class:"row row-cols-1 row-cols-sm-2"},da={class:"col"},ua={class:"form-floating mb-2"},ca={key:0,class:"d-block invalid-feedback"},ma={class:"col"},fa={class:"input-group mb-2"},pa={class:"form-floating"},va={key:0,class:"d-block invalid-feedback"},ga={key:0,class:"input-group-text"},ba={class:"col"},ya={class:"form-floating mb-2"},$a={class:""},wa={class:"col"},ha={class:"form-floating mb-2"},_a={key:0,class:"d-block invalid-feedback"},ka={class:"col"},Sa={class:"form-floating mb-2"},Ma={key:0,class:"d-block invalid-feedback"},Ta={class:""},Ia={class:"col"},Pa={class:"form-floating mb-2"},xa={key:0,class:"d-block invalid-feedback"},Ca={class:"col"},Ua={class:"input-group mb-2"},Va={class:"form-floating"},Aa=["href"],Ea={key:0,class:"d-block invalid-feedback"},Na={__name:"add",props:{urlView:{type:String,default:"/videos/view"},urlMain:{type:String,default:"/videos"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,security:R}=ue({appTitle:"Sony FAST",pageTitle:"Add Video"}),j=a,N=re({lookups:{visibilityTypes:[]},item:{title:"Video # ",description:null,rawBaseUrl:"https://media-tailor-input.s3.us-west-2.amazonaws.com",rawPath:"/bbb_2mins.mp4",hlsBaseUrl:"https://media-tailor-output.s3.us-west-2.amazonaws.com",hlsPath:"/sony-poc/vod-1/bbb_2mins.m3u8",durationInMillis:12e4}}),L={item:{title:{title:ee.withMessage("title is required.",te),$autoDirty:!0,$lazy:!0},durationInMillis:{title:ee.withMessage("durationInMillis is required.",te),$autoDirty:!0,$lazy:!0},rawBaseUrl:{title:ee.withMessage("rawBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},rawPath:{title:ee.withMessage("rawPath is required.",te),$autoDirty:!0,$lazy:!0},hlsBaseUrl:{title:ee.withMessage("hlsBaseUrl is required.",te),$autoDirty:!0,$lazy:!0},hlsPath:{title:ee.withMessage("hlsPath is required.",te),$autoDirty:!0,$lazy:!0}}},d=ye(L,N);ne(async()=>{});const G=async()=>{const F=N;if(f.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,y.value="";const w=M.clone(F.item);debugger;await A.post("/api/v1/videos/",w).then(h=>{E.success("Add Video","Video added",{onClose:async()=>{const s=`${j.urlView}/${h.data}`;await D.push(s)}})})}catch(w){y.value=M.getErrorMessageAsHtml(w),window.scrollTo(0,0)}finally{f.value=!1}};return(F,r)=>{const w=W("router-link"),h=W("PageHeader"),s=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(h,{"page-icon":"fas fa-fw fa-video",pageTitle:i(u),"header-break":"row row-cols-2"},{default:S(()=>[e("div",na,[e("button",{disabled:i(d).$dirty&&i(d).$invalid,onClick:r[0]||(r[0]=m=>G()),class:"btn btn-primary"},r[8]||(r[8]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ia),P(w,{to:j.urlMain,class:"btn btn-secondary ms-2"},{default:S(()=>r[9]||(r[9]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),P(s,{errorMessage:i(y),vuelidate:i(d)},{default:S(()=>[e("div",null,[e("div",ra,[e("div",da,[e("div",ua,[T(e("input",{"onUpdate:modelValue":r[1]||(r[1]=m=>N.item.title=m),id:"name",class:"form-control",placeholder:"Title"},null,512),[[H,N.item.title]]),r[10]||(r[10]=e("label",{for:"title",class:"small fw-bold"},"Title",-1)),i(d).item.title.$error?(t(),o("div",ca,[(t(!0),o(B,null,z(i(d).item.title.$errors,m=>(t(),o("div",{key:m.$uid},v(m.$message),1))),128))])):C("",!0)])]),e("div",ma,[e("div",fa,[e("div",pa,[T(e("input",{"onUpdate:modelValue":r[2]||(r[2]=m=>N.item.durationInMillis=m),type:"number",id:"durationInMillis",class:"form-control",placeholder:"Duration In Millis"},null,512),[[H,N.item.durationInMillis]]),r[11]||(r[11]=e("label",{for:"durationInMillis",class:"small fw-bold"},"Duration In Millis",-1)),i(d).item.durationInMillis.$error?(t(),o("div",va,[(t(!0),o(B,null,z(i(d).item.durationInMillis.$errors,m=>(t(),o("div",{key:m.$uid},v(m.$message),1))),128))])):C("",!0)]),N.item.durationInMillis>0?(t(),o("span",ga,v(i(M).moment.utc(N.item.durationInMillis).format("HH:mm:ss")),1)):C("",!0)])])]),e("div",ba,[e("div",ya,[T(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=m=>N.item.description=m),id:"name",class:"form-control",placeholder:"Description",style:{height:"5rem"}},null,512),[[H,N.item.description]]),r[12]||(r[12]=e("label",{for:"description",class:"small fw-bold"},"Description",-1))])]),e("div",$a,[r[15]||(r[15]=e("fieldset",null,[e("legend",null,"RAW")],-1)),e("div",wa,[e("div",ha,[T(e("input",{"onUpdate:modelValue":r[4]||(r[4]=m=>N.item.rawBaseUrl=m),id:"rawBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[H,N.item.rawBaseUrl]]),r[13]||(r[13]=e("label",{for:"rawBaseUrl",class:"small fw-bold"},"Base Url",-1)),i(d).item.rawBaseUrl.$error?(t(),o("div",_a,[(t(!0),o(B,null,z(i(d).item.rawBaseUrl.$errors,m=>(t(),o("div",{key:m.$uid},v(m.$message),1))),128))])):C("",!0)])]),e("div",ka,[e("div",Sa,[T(e("input",{"onUpdate:modelValue":r[5]||(r[5]=m=>N.item.rawPath=m),id:"rawPath",class:"form-control",placeholder:"Path"},null,512),[[H,N.item.rawPath]]),r[14]||(r[14]=e("label",{for:"rawPath",class:"small fw-bold"},"Path",-1))]),i(d).item.rawPath.$error?(t(),o("div",Ma,[(t(!0),o(B,null,z(i(d).item.rawPath.$errors,m=>(t(),o("div",{key:m.$uid},v(m.$message),1))),128))])):C("",!0)])]),e("div",Ta,[r[19]||(r[19]=e("fieldset",null,[e("legend",null,"HLS")],-1)),e("div",Ia,[e("div",Pa,[T(e("input",{"onUpdate:modelValue":r[6]||(r[6]=m=>N.item.hlsBaseUrl=m),id:"hlsBaseUrl",class:"form-control",placeholder:"Base Url"},null,512),[[H,N.item.hlsBaseUrl]]),r[16]||(r[16]=e("label",{for:"hlsBaseUrl",class:"small fw-bold"},"Base Url",-1)),i(d).item.hlsBaseUrl.$error?(t(),o("div",xa,[(t(!0),o(B,null,z(i(d).item.hlsBaseUrl.$errors,m=>(t(),o("div",{key:m.$uid},v(m.$message),1))),128))])):C("",!0)])]),e("div",Ca,[e("div",Ua,[e("div",Va,[T(e("input",{"onUpdate:modelValue":r[7]||(r[7]=m=>N.item.hlsPath=m),id:"hlsPath",class:"form-control",placeholder:"Path"},null,512),[[H,N.item.hlsPath]]),r[17]||(r[17]=e("label",{for:"hlsPath",class:"small fw-bold"},"Path",-1))]),N.item.hlsBaseUrl&&N.item.hlsPath?(t(),o("a",{key:0,href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(N.item.hlsBaseUrl+N.item.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",role:"button",type:"button"},r[18]||(r[18]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),O("View ")],-1)]),8,Aa)):C("",!0)]),i(d).item.hlsPath.$error?(t(),o("div",Ea,[(t(!0),o(B,null,z(i(d).item.hlsPath.$errors,m=>(t(),o("div",{key:m.$uid},v(m.$message),1))),128))])):C("",!0)])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Oa={key:0,class:"d-flex justify-content-end"},La=["disabled"],Ha={key:0},Ba={class:"row row-cols-1 row-cols-sm-2"},Da={class:"col"},qa={class:"form-floating mb-2"},Ra={key:0,class:"d-block invalid-feedback"},ja={class:"col"},za={class:"form-floating mb-2"},Fa={key:0,class:"d-block invalid-feedback"},Ya={class:"row row-cols-sm-2"},Wa={class:"col"},Ga={class:"form-floating mb-2"},Ja={class:"form-floating mb-2"},Ka={key:0,class:"d-block invalid-feedback"},Qa={class:"form-floating mb-2"},Xa={key:0,class:"d-block invalid-feedback"},Za={class:"col"},en={class:"form-floating mb-2"},Pe={__name:"edit",props:{id:{type:String,required:!0},urlView:{type:String,required:!0}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,security:R}=ue({appTitle:"ARC CMS",pageTitle:"Edit Movie"}),j=a,N=re({editorElementId:"editor",htmlContent:"",item:null}),L={item:{title:{required:ee.withMessage("Title is required.",te),$autoDirty:!0,$lazy:!0},eidr:{required:ee.withMessage("eidr is required.",te),$autoDirty:!0,$lazy:!0},eidrPrefix:{required:ee.withMessage("eidrPrefix is required.",te),$autoDirty:!0,$lazy:!0}},htmlContent:{required:ee.withMessage("Content is required.",te),$autoDirty:!0,$lazy:!0}},d=ye(L,N);ne(async()=>{await r()});const G=()=>{const h=N;var s=document.getElementById(h.editorElementId);s.innerHTML=h.htmlContent},F=h=>{const s=N;s.htmlContent=h.target.innerHTML;var m=document.getElementById(s.editorElementId);m.value=s.htmlContent},r=async()=>{const h=N;if(!f.value)try{f.value=!0,N.item=null,await A.get(`/api/v1/movies/${j.id}`).then(s=>{h.item=s.data,h.htmlContent=h.item.description}),G()}catch(s){y.value=M.getErrorMessageAsHtml(s)}finally{f.value=!1}},w=async()=>{const h=N;if(f.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,y.value="";const m=M.clone(h.item);m.description=h.htmlContent,await A.put("/api/v1/movies",m).then(l=>{E.success("Edit Movie","Movie edited",{onClose:async()=>{const q=`${j.urlView}/${j.id}`;await D.push(q)}})})}catch(m){y.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{f.value=!1}};return(h,s)=>{const m=W("router-link"),l=W("PageHeader"),q=W("PageBody");return t(),o("div",null,[P(l,{"page-icon":"fas fa-fw fa-film",pageTitle:i(u),"header-break":"row row-cols-2 row-cols-sm-2"},{default:S(()=>[N.item?(t(),o("div",Oa,[e("button",{disabled:i(d).$dirty&&i(d).$invalid,onClick:s[0]||(s[0]=p=>w()),class:"btn btn-primary"},s[7]||(s[7]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,La),e("button",{onClick:r,class:"ms-2 btn btn-secondary"},s[8]||(s[8]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),P(m,{to:`${j.urlView}/${j.id}`,class:"ms-1 btn btn-secondary"},{default:S(()=>s[9]||(s[9]=[e("i",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])):C("",!0)]),_:1},8,["pageTitle"]),P(q,{errorMessage:i(y),vuelidate:i(d)},{default:S(()=>[N.item?(t(),o("div",Ha,[e("div",Ba,[e("div",Da,[e("div",qa,[T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>N.item.eidrPrefix=p),type:"text",class:"form-control",id:"eidrPrefix",placeholder:"Eidr Prefix"},null,512),[[H,N.item.eidrPrefix]]),s[10]||(s[10]=e("label",{for:"title"},"Eidr Prefix",-1)),i(d).item.eidrPrefix.$error?(t(),o("div",Ra,[(t(!0),o(B,null,z(i(d).item.eidrPrefix.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)])]),e("div",ja,[e("div",za,[T(e("input",{"onUpdate:modelValue":s[2]||(s[2]=p=>N.item.eidr=p),type:"text",class:"form-control",id:"eidr",placeholder:"Eidr"},null,512),[[H,N.item.eidr]]),s[11]||(s[11]=e("label",{for:"title"},"Eidr",-1)),i(d).item.eidr.$error?(t(),o("div",Fa,[(t(!0),o(B,null,z(i(d).item.eidr.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)])])]),e("div",Ya,[e("div",Wa,[e("div",Ga,[T(e("input",{"onUpdate:modelValue":s[3]||(s[3]=p=>N.item.releaseYear=p),type:"number",class:"form-control",id:"releaseYear",placeholder:"Release Year"},null,512),[[H,N.item.releaseYear]]),s[12]||(s[12]=e("label",{for:"title"},"Release Year",-1))])]),e("div",null,[e("div",Ja,[T(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>N.item.title=p),type:"text",class:"form-control",id:"title",placeholder:"Title"},null,512),[[H,N.item.title]]),s[13]||(s[13]=e("label",{for:"title"},"Title",-1)),i(d).item.title.$error?(t(),o("div",Ka,[(t(!0),o(B,null,z(i(d).item.title.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)])])]),e("div",null,[e("div",Qa,[e("div",{id:"editor",name:"editor",contenteditable:"true",role:"textbox",class:"form-control",spellcheck:"true",style:{"min-height":"100px",height:"auto",overflow:"auto","user-select":"text","white-space":"pre-wrap","word-break":"break-word"},onInput:s[5]||(s[5]=p=>F(p))},null,32),s[14]||(s[14]=e("label",{for:"editor"},"Content",-1)),i(d).htmlContent.$error?(t(),o("div",Xa,[(t(!0),o(B,null,z(i(d).htmlContent.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)])]),e("div",Za,[e("div",en,[T(e("textarea",{"onUpdate:modelValue":s[6]||(s[6]=p=>N.item.metadata=p),rows:"4",class:"form-control",id:"metadata",placeholder:"Metadata",style:{height:"125px"}},null,512),[[H,N.item.metadata]]),s[15]||(s[15]=e("label",{for:"title"},"Metadata",-1))])])])):C("",!0)]),_:1},8,["errorMessage","vuelidate"])])}}},tn={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function sn(a,n,u,f,c,x){const y=W("Page");return t(),le(y,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const on=pe(tn,[["render",sn]]),ln={class:"d-flex justify-content-end"},an={class:"ms-1"},nn={class:"input-group"},rn={class:"table-responsive"},dn={class:"table table-hover mb-0"},un=["textContent"],cn={class:"text-end ms-sm-5 pe-sm-5"},mn="/api/v1/videos/search",fn={__name:"index",props:{urlAdd:{type:String,default:"/videos/add"},urlView:{type:String,default:"/videos/view"}},setup(a){fe("$config");const u=de().user,{appTitle:f,pageTitle:c,busy:x,infoMessage:y,warningMessage:D,errorMessage:A,router:M,axios:E,utils:Y,toasts:R,close:j,security:N,filter:L,initializeFilter:d,getQuery:G,saveQuery:F,search:r,getRowNumber:w,setSelected:h,isSelected:s}=Me({appTitle:"Sony FAST",pageTitle:"Videos",cacheKey:`${u==null?void 0:u.userId}/videos/search`,baseUrl:mn,filter:{updateUrl:!0}});return ne(async()=>{d(),await r()}),(m,l)=>{const q=W("router-link"),p=W("PageHeader"),V=W("m-pagination"),U=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:i(c)},{default:S(()=>[e("div",ln,[P(q,{to:a.urlAdd,class:"btn btn-primary"},{default:S(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",an,[e("div",nn,[T(e("input",{"onUpdate:modelValue":l[0]||(l[0]=_=>i(L).query.criteria=_),onKeyup:l[1]||(l[1]=he(_=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(L).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=_=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),P(U,{errorMessage:i(A)},{default:S(()=>[e("div",rn,[e("table",dn,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Title"),e("th",null,"Description"),e("th",{class:"text-center"},"Duration")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(i(L).items,(_,J)=>(t(),o("tr",{key:_.movieId},[e("td",{textContent:v(i(w)(J)),class:"text-center"},null,8,un),e("td",null,[P(q,{to:`${a.urlView}/${_.videoId}`,class:"d-inline-block text-truncate"},{default:S(()=>[O(v(_.title),1)]),_:2},1032,["to"])]),e("td",null,v(_.description),1),e("td",cn,[e("div",null,v(i(Y).moment.utc(_.durationInMillis).format("HH:mm:ss")),1)])]))),128))]),_:1},512),[[be,i(L).items.length>0]])])]),P(V,{filter:i(L),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},pn={class:"d-flex flex-row justify-content-end"},vn={key:0},gn={class:"row row-cols-sm-2"},bn={class:"col"},yn={class:"form-floating mb-2"},$n={class:"col"},wn={class:"form-floating mb-2"},hn={class:"col"},_n={class:"form-floating mb-2"},kn={class:"row row-cols-sm-2"},Sn={class:"col"},Mn={class:"form-floating mb-2"},Tn={class:"col"},In={class:"form-floating mb-2"},Pn={class:"row row-cols-sm-2"},xn={class:"col"},Cn={class:"form-floating mb-2"},Un={class:"col"},Vn={class:"form-floating mb-2"},An={class:"row row-cols-sm-2"},En={class:"col"},Nn={class:"form-floating mb-2"},On={class:"col"},Ln={class:"form-floating mb-2"},Hn={class:"table-responsive"},Bn={class:"table table-hover mb-0 caption-top"},Dn={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/videos"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:x,validations:y,infoMessage:D,warningMessage:A,errorMessage:M,router:E,axios:Y,utils:R,toasts:j,close:N,closeWithReturnUrl:L,generateReturnUrl:d,security:G}=ue({appTitle:"Sony FAST",pageTitle:"View Video"});fe("$config");const F=de();F.user;const r=re({user:F.user,item:null});ne(async()=>{await w()});const w=async()=>{const m=r;if(!c.value)try{c.value=!0,M.value="",r.item=null;const l=`/api/v1/videos/${n.id}/`;await Y.get(l).then(q=>{m.item=q.data,m.item.duration=R.moment.utc(m.item.durationInMillis).format("HH:mm:ss")})}catch(l){M.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}},h=async()=>{await w()},s=async()=>{if(confirm("User will only be removed from this application. Are you sure you want to delete this user?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/users/${n.id}/`).then(l=>{j.warning("Delete User","User was deleted.",{async onClose(){await E.push(n.urlMain)}})})}catch(l){M.value=R.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{c.value=!1}}};return(m,l)=>{const q=W("router-link"),p=W("PageHeader"),V=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(p,{"page-icon":"fas fa-fw fa-file-video",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:S(()=>[e("div",pn,[i(G).isAdministrator?(t(),o(B,{key:0},[P(q,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:S(()=>l[12]||(l[12]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:l[0]||(l[0]=U=>s()),class:"ms-1 btn btn-warning"},l[13]||(l[13]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),e("button",{onClick:l[1]||(l[1]=U=>h()),class:"ms-2 btn btn-secondary"},l[14]||(l[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:l[2]||(l[2]=U=>i(L)(n.urlMain)),class:"btn btn-secondary ms-1"},l[15]||(l[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),P(V,{errorMessage:i(M)},{default:S(()=>[r.item?(t(),o("div",vn,[e("div",null,[e("div",gn,[e("div",bn,[e("div",yn,[T(e("input",{"onUpdate:modelValue":l[3]||(l[3]=U=>r.item.title=U),type:"text",class:"form-control",id:"userId",placeholder:"Title",disabled:""},null,512),[[H,r.item.title]]),l[16]||(l[16]=e("label",{for:"userId"},"Title",-1))])]),e("div",$n,[e("div",wn,[T(e("input",{"onUpdate:modelValue":l[4]||(l[4]=U=>r.item.duration=U),type:"text",class:"form-control",id:"Duration",placeholder:"Duration",disabled:""},null,512),[[H,r.item.duration]]),l[17]||(l[17]=e("label",{for:"givenName"},"Duration",-1))])])]),e("div",hn,[e("div",_n,[T(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=U=>r.item.description=U),type:"text",class:"form-control",id:"displayName",placeholder:"Description",disabled:"",style:{height:"5rem"}},null,512),[[H,r.item.description]]),l[18]||(l[18]=e("label",{for:"displayName"},"Description",-1))])]),e("div",kn,[e("div",Sn,[e("div",Mn,[T(e("input",{"onUpdate:modelValue":l[6]||(l[6]=U=>r.item.rawBaseUrl=U),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[H,r.item.rawBaseUrl]]),l[19]||(l[19]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",Tn,[e("div",In,[T(e("input",{"onUpdate:modelValue":l[7]||(l[7]=U=>r.item.rawPath=U),class:"form-control",id:"rawPath",disabled:""},null,512),[[H,r.item.rawPath]]),l[20]||(l[20]=e("label",{for:"rawPath"},"Raw Path",-1))])])]),e("div",Pn,[e("div",xn,[e("div",Cn,[T(e("input",{"onUpdate:modelValue":l[8]||(l[8]=U=>r.item.hlsBaseUrl=U),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[H,r.item.hlsBaseUrl]]),l[21]||(l[21]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Un,[e("div",Vn,[T(e("input",{"onUpdate:modelValue":l[9]||(l[9]=U=>r.item.hlsPath=U),class:"form-control",id:"hlsPath",disabled:""},null,512),[[H,r.item.hlsPath]]),l[22]||(l[22]=e("label",{for:"hlsPath"},"HLS Path",-1))])])]),e("div",An,[e("div",En,[e("div",Nn,[T(e("input",{"onUpdate:modelValue":l[10]||(l[10]=U=>r.item.dashBaseUrl=U),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[H,r.item.dashBaseUrl]]),l[23]||(l[23]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",On,[e("div",Ln,[T(e("input",{"onUpdate:modelValue":l[11]||(l[11]=U=>r.item.dashPath=U),class:"form-control",id:"dashPath",disabled:""},null,512),[[H,r.item.dashPath]]),l[24]||(l[24]=e("label",{for:"dashPath"},"DASH Path",-1))])])])]),e("div",Hn,[e("table",Bn,[l[25]||(l[25]=e("caption",null,"VOD Sources",-1)),l[26]||(l[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.vodSources,(U,_)=>(t(),o("tr",{key:U.vodSourceId},[e("td",null,v(_+1),1),e("td",null,[P(q,{to:`${n.urlViewVodSource}/${encodeURIComponent(U.vodSourceId)}/${i(d)()}`},{default:S(()=>[O(v(U.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[be,r.item.vodSources.length>0]])])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},qn={class:"d-flex justify-content-end"},Rn=["disabled"],jn={class:"input-group"},zn={class:"row row-cols-1 row-cols-sm-2 mt-3"},Fn={class:"col text-center mb-2"},Yn=["src"],Wn={class:"col"},Gn={class:"form-floating mb-2"},Jn={key:0,class:"d-block invalid-feedback"},Kn={class:"form-floating mb-2"},Qn={class:"row row-cols-sm-2"},Xn={class:"col"},Zn={class:"form-floating mb-2"},ei={class:"col"},ti={class:"form-floating mb-2"},si={class:"row row-cols-sm-2"},oi={class:"col"},li={class:"form-floating mb-2"},ai={class:"col"},ni={class:"form-floating mb-2"},ii={class:"col"},ri={class:"form-floating mb-2"},di={class:"col"},ui={class:"form-floating mb-2"},Ee="YYYY-MM-DD HH:mm",ci={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,security:R}=ue({appTitle:"ARC AIO",pageTitle:"Add User"}),j=a,N=M.moment().local();N.format(Ee),N.add(24,"hours").format(Ee);const L=oe("a22de760-358d-4a0e-83ad-2624a5c11f73"),d=re({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),G={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},F=ye(G,d);ne(async()=>{});const r=async()=>{const h=d;if(!f.value)try{f.value=!0,h.item=null;const s=`/api/v1/users/get-from-entra-id/${L.value}`;await A.get(s).then(m=>{h.item=m.data})}catch(s){y.value=M.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{f.value=!1}},w=async()=>{const h=d;if(f.value)return;if(!await F.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,y.value="",await A.post(`/api/v1/users/add-from-entra-id/${h.item.userId}`).then(m=>{E.success("Add User","User added",{onClose:async()=>{const l=`${j.urlView}/${m.data}`;await D.push(l)}})})}catch(m){y.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{f.value=!1}};return(h,s)=>{const m=W("router-link"),l=W("PageHeader"),q=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:i(u),"header-break":"row row-cols-2"},{default:S(()=>[e("div",qn,[e("button",{disabled:i(F).$dirty&&i(F).$invalid,onClick:s[0]||(s[0]=p=>w()),class:"btn btn-primary"},s[12]||(s[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Rn),P(m,{to:j.urlMain,class:"btn btn-secondary ms-2"},{default:S(()=>s[13]||(s[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),P(q,{errorMessage:i(y),vuelidate:i(F)},{default:S(()=>[e("div",null,[e("div",null,[e("div",jn,[T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>L.value=p),onKeyup:s[2]||(s[2]=he(p=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[H,L.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:s[3]||(s[3]=p=>r())},s[14]||(s[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",zn,[e("div",Fn,[e("img",{src:d.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,Yn)]),e("div",Wn,[e("div",Gn,[T(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>d.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,d.item.userId]]),s[15]||(s[15]=e("label",{for:"userId"},"User Id",-1)),i(F).item.userId.$error?(t(),o("div",Jn,[(t(!0),o(B,null,z(i(F).item.userId.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)]),e("div",Kn,[T(e("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>d.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,d.item.displayName]]),s[16]||(s[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",Qn,[e("div",Xn,[e("div",Zn,[T(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>d.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,d.item.givenName]]),s[17]||(s[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",ei,[e("div",ti,[T(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>d.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,d.item.surname]]),s[18]||(s[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",si,[e("div",oi,[e("div",li,[T(e("input",{"onUpdate:modelValue":s[8]||(s[8]=p=>d.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,d.item.email]]),s[19]||(s[19]=e("label",{for:"email"},"Email",-1))])]),e("div",ai,[e("div",ni,[T(e("input",{"onUpdate:modelValue":s[9]||(s[9]=p=>d.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,d.item.mobilePhone]]),s[20]||(s[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",ii,[e("div",ri,[T(e("input",{"onUpdate:modelValue":s[10]||(s[10]=p=>d.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,d.item.principalName]]),s[21]||(s[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",di,[e("div",ui,[T(e("input",{"onUpdate:modelValue":s[11]||(s[11]=p=>d.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,d.item.jobTitle]]),s[22]||(s[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},mi={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function fi(a,n,u,f,c,x){const y=W("Page");return t(),le(y,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const pi=pe(mi,[["render",fi]]),vi={class:"d-flex justify-content-end"},gi={key:0},bi={class:"ms-1"},yi={class:"input-group"},$i={class:"table-responsive"},wi={class:"table table-hover mb-0"},hi=["textContent"],_i={key:0,class:"fas fa-fw fa-check-circle text-success"},ki="/api/v1/sourcelocations/search",Si={__name:"index",props:{urlAdd:{type:String,default:"/source-locations/add"},urlView:{type:String,default:"/source-locations/view"}},setup(a){fe("$config");const u=de().user,{appTitle:f,pageTitle:c,busy:x,infoMessage:y,warningMessage:D,errorMessage:A,router:M,axios:E,utils:Y,toasts:R,close:j,security:N,filter:L,initializeFilter:d,getQuery:G,saveQuery:F,search:r,getRowNumber:w,setSelected:h,isSelected:s}=Me({appTitle:"Sony FAST",pageTitle:"Source Locations",cacheKey:`${u==null?void 0:u.userId}/source-locations/search`,baseUrl:ki,filter:{updateUrl:!0}});return ne(async()=>{d(),await r()}),(m,l)=>{const q=W("router-link"),p=W("PageHeader"),V=W("m-pagination"),U=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(p,{"page-icon":"fas fa-fw fa-building",pageTitle:i(c)},{default:S(()=>[e("div",vi,[i(N).isAdministrator?(t(),o("div",gi,[P(q,{to:a.urlAdd,class:"btn btn-primary"},{default:S(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",bi,[e("div",yi,[T(e("input",{"onUpdate:modelValue":l[0]||(l[0]=_=>i(L).query.criteria=_),onKeyup:l[1]||(l[1]=he(_=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(L).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=_=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),P(U,{errorMessage:i(A)},{default:S(()=>[e("div",$i,[e("table",wi,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"HTTP Configuration Base Url")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(i(L).items,(_,J)=>(t(),o("tr",{key:_.movieId},[e("td",{textContent:v(i(w)(J)),class:"text-center"},null,8,hi),e("td",null,[P(q,{to:`${a.urlView}/${_.sourceLocationId}`,class:"d-inline-block text-truncate"},{default:S(()=>[_.arn?(t(),o("span",_i)):C("",!0),O(" "+v(_.name),1)]),_:2},1032,["to"])]),e("td",null,v(_.httpConfigurationBaseUrl),1)]))),128))]),_:1},512),[[be,i(L).items.length>0]])])]),P(V,{filter:i(L),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Mi={class:"d-flex flex-row justify-content-end"},Ti={key:0},Ii={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},Pi={class:"nav-item",role:"presentation"},xi={class:"nav-item",role:"presentation"},Ci={class:"nav-item",role:"presentation"},Ui={class:"tab-content",id:"myTabContent"},Vi={class:"mt-2"},Ai={class:"col"},Ei={class:"form-floating mb-2"},Ni={class:"col"},Oi={class:"form-floating mb-2"},Li={class:"mt-2"},Hi={class:"table-responsive border"},Bi={class:"table table-hover mb-0"},Di={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},qi={class:"mt-2"},Ri={class:"table-responsive border"},ji={class:"table table-hover mb-0"},zi={key:0,class:"fas fa-fw fa-check-circle text-success"},Fi={key:1},Yi={key:2},Wi={key:0},Gi={class:"badge bg-info"},Ji={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/source-locations"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewVodSource:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"},urlViewChannel:{type:String,default:"/channels/view"}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:x,validations:y,infoMessage:D,warningMessage:A,errorMessage:M,router:E,axios:Y,utils:R,toasts:j,close:N,closeWithReturnUrl:L,generateReturnUrl:d,security:G}=ue({appTitle:"Sony FAST",pageTitle:"View Source Location"});fe("$config");const F=de();F.user;const r=re({user:F.user,item:null}),w=oe();ne(async()=>{await l(),w.value=R.getPageTab("sourceLocation")||"information-tab"});const h=U=>{R.setPageTab("sourceLocation",U),w.value=U},s=U=>U!==w.value?"":"active",m=U=>U!==w.value?"":"show active",l=async()=>{const U=r;if(!c.value)try{c.value=!0,M.value="",r.item=null;const _=`/api/v1/sourcelocations/${n.id}/`;await Y.get(_).then(J=>{U.item=J.data})}catch(_){M.value=R.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{c.value=!1}},q=async()=>{await l()},p=async()=>{if(confirm("Source Location will be submitted to AWS MediaTailer. Are you sure you want to publish the Source Location?")&&!c.value){M.value=null;try{c.value=!0,await Y.post(`/api/v1/sourcelocations/publish/${n.id}/`).then(_=>{j.success("Publish Source Location","Source Location was published.",{async onClose(){}})}),c.value=!1,await q()}catch(_){M.value=R.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{c.value=!1}}},V=async()=>{if(confirm("Source Location will be removed to AWS MediaTailer. Are you sure you want to remove the Source Location?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/sourcelocations/unpublish/${n.id}/`).then(_=>{j.warning("Remove Source Location","Source Location was removed.",{async onClose(){}})}),c.value=!1,await q()}catch(_){M.value=R.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{c.value=!1}}};return(U,_)=>{const J=W("router-link"),X=W("PageHeader"),ce=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(X,{"page-icon":"fas fa-fw fa-building",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:S(()=>[e("div",Mi,[i(G).isAdministrator?(t(),o(B,{key:0},[P(J,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:S(()=>_[10]||(_[10]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:_[0]||(_[0]=K=>U.remove()),class:"ms-1 btn btn-warning"},_[11]||(_[11]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),r.item?(t(),o(B,{key:1},[r.item.arn?(t(),o("button",{key:0,onClick:_[1]||(_[1]=K=>V()),class:"ms-1 btn btn-warning"},_[12]||(_[12]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),o("button",{key:1,onClick:_[2]||(_[2]=K=>p()),class:"ms-1 btn btn-primary"},_[13]||(_[13]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:_[3]||(_[3]=K=>q()),class:"ms-2 btn btn-secondary"},_[14]||(_[14]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:_[4]||(_[4]=K=>i(L)(n.urlMain)),class:"btn btn-secondary ms-1"},_[15]||(_[15]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),P(ce,{errorMessage:i(M)},{default:S(()=>[r.item?(t(),o("div",Ti,[e("div",null,[e("ul",Ii,[e("li",Pi,[e("button",{onClick:_[5]||(_[5]=K=>h("information-tab")),class:ae([s("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",xi,[e("button",{onClick:_[6]||(_[6]=K=>h("vodSources-tab")),class:ae([s("vodSources-tab"),"nav-link"]),id:"vodSources-tab","data-bs-toggle":"tab","data-bs-target":"#vodSources",type:"button",role:"tab","aria-controls":"vodSources","aria-selected":"false"}," VOD Sources ",2)]),e("li",Ci,[e("button",{onClick:_[7]||(_[7]=K=>h("programs-tab")),class:ae([s("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"}," Programs ",2)])]),e("div",Ui,[e("div",{class:ae([m("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",Vi,[e("div",Ai,[e("div",Ei,[T(e("input",{"onUpdate:modelValue":_[8]||(_[8]=K=>r.item.name=K),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[H,r.item.name]]),_[16]||(_[16]=e("label",{for:"name"},"Name",-1))])]),e("div",Ni,[e("div",Oi,[T(e("input",{"onUpdate:modelValue":_[9]||(_[9]=K=>r.item.httpConfigurationBaseUrl=K),type:"text",class:"form-control",id:"httpConfigurationBaseUrl",disabled:""},null,512),[[H,r.item.httpConfigurationBaseUrl]]),_[17]||(_[17]=e("label",{for:"httpConfigurationBaseUrl"},"HTTP Configuration Base Url",-1))])])])],2),e("div",{class:ae([m("vodSources-tab"),"tab-pane fade"]),id:"vodSources",role:"tabpanel","aria-labelledby":"vodSources-tab"},[e("div",Li,[e("div",Hi,[e("table",Bi,[_[18]||(_[18]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Video")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.vodSources,(K,k)=>(t(),o("tr",{key:K.vodSourceId},[e("td",null,v(k+1),1),e("td",null,[K.arn?(t(),o("span",Di)):C("",!0),P(J,{to:`${n.urlViewVodSource}/${encodeURIComponent(K.vodSourceId)}/${i(d)()}`},{default:S(()=>[O(v(K.name),1)]),_:2},1032,["to"])]),e("td",null,[P(J,{to:`${n.urlViewVideo}/${encodeURIComponent(K.video.videoId)}/${i(d)()}`},{default:S(()=>[O(v(K.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",null,v(i(R).moment.utc(K.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[be,r.item.vodSources.length>0]])])])])],2),e("div",{class:ae([m("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",qi,[e("div",Ri,[e("table",ji,[_[19]||(_[19]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Relative Program"),e("th",null,"Date Scheduled Start"),e("th",null,"Channel")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.programs,(K,k)=>(t(),o("tr",{key:K.programId},[e("td",null,v(k+1),1),e("td",null,[K.arn?(t(),o("span",zi)):C("",!0),O(" "+v(K.name)+" ("+v(K.transitionType)+") ",1),K.startOffsetMillis>0?(t(),o("div",Fi," Start Offset: "+v(K.startOffsetMillis/6e4)+" seconds ",1)):C("",!0),K.endOffsetMillis>0?(t(),o("div",Yi," End Offset: "+v(K.endOffsetMillis/6e4)+" seconds ",1)):C("",!0)]),e("td",null,[K.relativeProgram?(t(),o("div",Wi,v(K.relativeProgram.name)+" ["+v(K.relativePosition)+"] ",1)):C("",!0)]),e("td",null,[O(v(i(R).moment(K.dateScheduledStart).calendar())+" ",1),e("div",null,[e("span",Gi,v(i(R).moment(K.dateScheduledStart).fromNow()),1)])]),e("td",null,[P(J,{to:`${n.urlViewChannel}/${encodeURIComponent(K.channel.channelId)}/${i(d)()}`},{default:S(()=>[O(v(K.channel.name),1)]),_:2},1032,["to"])])]))),128))]),_:1},512),[[be,r.item.programs.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"])])]),_:1})}}},Ki={class:"d-flex justify-content-end"},Qi=["disabled"],Xi={class:"col"},Zi={class:"form-floating mb-2"},er={key:0,class:"d-block invalid-feedback"},tr={class:"row row-cols-1 row-cols-sm-2"},sr={class:"col"},or={class:"form-floating mb-2"},lr=["value"],ar={key:0,class:"d-block invalid-feedback"},nr={class:"col"},ir={class:"form-floating mb-2"},rr=["value"],dr={key:0,class:"d-block invalid-feedback"},ur={class:"table-responsive border mt-1"},cr={class:"table mb-0"},mr={class:"input-group mb-1"},fr=["onUpdate:modelValue"],pr={class:"input-group mb-1"},vr=["onUpdate:modelValue"],gr=["onClick"],br={__name:"add",props:{urlView:{type:String,default:"/vod-sources/view"},urlMain:{type:String,default:"/vod-sources"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,security:R}=ue({appTitle:"Sony FAST",pageTitle:"Add VOD Source"}),j=a,N=re({lookups:{sourceLocations:[]},item:{name:"vod_",videoId:null,video:null,sourceLocationId:null,sourceLocation:null,packageConfigurations:[]}}),L={item:{name:{required:ee.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0},videoId:{required:ee.withMessage("videoId is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("name is required.",te),$autoDirty:!0,$lazy:!0}}},d=ye(L,N);ne(async()=>{await G()});const G=async()=>{try{if(await A.get("/api/v1/sourcelocations/lookup/").then(m=>{N.lookups.sourceLocations=m.data}),N.lookups.sourceLocations.length===1){const m=N.lookups.sourceLocations[0];N.item.sourceLocationId=m.id,await F(m.baseUrl)}}catch(s){y.value=M.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{}},F=async s=>{try{const m=`/api/v1/videos/lookup/?baseUrl=${encodeURIComponent(s)}`;await A.get(m).then(l=>{N.lookups.videos=l.data,N.lookups.videos.length===1&&(N.item.videoId=N.lookups.videos[0].id)})}catch(m){y.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{}},r=async()=>{const s=N;if(f.value)return;if(!await d.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,y.value="";const l=M.clone(s.item);l.videoId=l.video.id,delete l.video,await A.post("/api/v1/vodSources/",l).then(q=>{debugger;E.success("Add VOD Source","VOD source added",{onClose:async()=>{const p=`${j.urlView}/${q.data}`;await D.push(p)}})})}catch(l){y.value=M.getErrorMessageAsHtml(l),window.scrollTo(0,0)}finally{f.value=!1}},w=()=>{const s={path:"",sourceGroup:"test_linear_group_1",type:"HLS"},m=N.item.video;m&&(s.path=m.hlsPath),N.item.packageConfigurations.push(s)},h=s=>{N.item.packageConfigurations.splice(s,1)};return(s,m)=>{const l=W("router-link"),q=W("PageHeader"),p=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(q,{"page-icon":"fas fa-fw fa-tag",pageTitle:i(u),"header-break":"row row-cols-2"},{default:S(()=>[e("div",Ki,[e("button",{disabled:i(d).$dirty&&i(d).$invalid,onClick:m[0]||(m[0]=V=>r()),class:"btn btn-primary"},m[5]||(m[5]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Qi),P(l,{to:j.urlMain,class:"btn btn-secondary ms-2"},{default:S(()=>m[6]||(m[6]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),P(p,{errorMessage:i(y),vuelidate:i(d)},{default:S(()=>[e("div",null,[e("div",Xi,[e("div",Zi,[T(e("input",{"onUpdate:modelValue":m[1]||(m[1]=V=>N.item.name=V),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,N.item.name]]),m[7]||(m[7]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(d).item.name.$error?(t(),o("div",er,[(t(!0),o(B,null,z(i(d).item.name.$errors,V=>(t(),o("div",{key:V.$uid},v(V.$message),1))),128))])):C("",!0)])]),e("div",tr,[e("div",sr,[e("div",or,[T(e("select",{"onUpdate:modelValue":m[2]||(m[2]=V=>N.item.sourceLocationId=V),class:"form-select",id:"sourceLocationId"},[(t(!0),o(B,null,z(N.lookups.sourceLocations,V=>(t(),o("option",{value:V.id},v(V.name),9,lr))),256))],512),[[me,N.item.sourceLocationId]]),m[8]||(m[8]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(d).item.sourceLocationId.$error?(t(),o("div",ar,[(t(!0),o(B,null,z(i(d).item.sourceLocationId.$errors,V=>(t(),o("div",{key:V.$uid},v(V.$message),1))),128))])):C("",!0)])]),e("div",nr,[e("div",ir,[T(e("select",{"onUpdate:modelValue":m[3]||(m[3]=V=>N.item.video=V),onChange:m[4]||(m[4]=V=>N.item.videoId=N.item.video.id),class:"form-select",id:"videoId"},[(t(!0),o(B,null,z(N.lookups.videos,V=>(t(),o("option",{value:V},v(V.name),9,rr))),256))],544),[[me,N.item.video]]),m[9]||(m[9]=e("label",{for:"videoId",class:"small fw-bold"},"Video",-1)),i(d).item.videoId.$error?(t(),o("div",dr,[(t(!0),o(B,null,z(i(d).item.videoId.$errors,V=>(t(),o("div",{key:V.$uid},v(V.$message),1))),128))])):C("",!0)])])]),m[14]||(m[14]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[m[11]||(m[11]=e("fieldset",null,[e("legend",null," HTTP Package Configurations ")],-1)),e("button",{onClick:w,class:"btn btn-outline-primary"},m[10]||(m[10]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Insert Package Configuration ")]))]),e("div",ur,[e("table",cr,[m[13]||(m[13]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type"),e("th")])],-1)),e("tbody",null,[(t(!0),o(B,null,z(N.item.packageConfigurations,(V,U)=>(t(),o("tr",null,[e("td",null,v(U+1),1),e("td",null,[e("div",mr,[T(e("input",{"onUpdate:modelValue":_=>V.path=_,type:"text",class:"form-control",placeholder:"Enter Relative Path, e.g. '/my/path/index.m3u8'"},null,8,fr),[[H,V.path]])])]),e("td",null,[e("div",pr,[T(e("input",{"onUpdate:modelValue":_=>V.sourceGroup=_,type:"text",class:"form-control",placeholder:"Enter Source Group."},null,8,vr),[[H,V.sourceGroup]])])]),e("td",null,v(V.type),1),e("td",null,[e("button",{onClick:_=>h(U),class:"btn btn-outline-warning"},m[12]||(m[12]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,gr)])]))),256))])])])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},yr={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function $r(a,n,u,f,c,x){const y=W("Page");return t(),le(y,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const wr=pe(yr,[["render",$r]]),hr={class:"d-flex justify-content-end"},_r={key:0},kr={class:"ms-1"},Sr={class:"input-group"},Mr={class:"table-responsive"},Tr={class:"table table-hover mb-0"},Ir=["textContent"],Pr={key:0,class:"fas fa-fw fa-check-circle text-success me-1"},xr={class:"small"},Cr="/api/v1/vodsources/search",Ur={__name:"index",props:{urlAdd:{type:String,default:"/vod-sources/add"},urlView:{type:String,default:"/vod-sources/view"},urlViewVideo:{type:String,default:"/videos/view"}},setup(a){fe("$config");const u=de().user,{appTitle:f,pageTitle:c,busy:x,infoMessage:y,warningMessage:D,errorMessage:A,router:M,axios:E,utils:Y,toasts:R,close:j,closeWithReturnUrl:N,generateReturnUrl:L,security:d,filter:G,initializeFilter:F,getQuery:r,saveQuery:w,search:h,getRowNumber:s,setSelected:m,isSelected:l}=Me({appTitle:"Sony FAST",pageTitle:"VOD Sources",cacheKey:`${u==null?void 0:u.userId}/vod-sources/search`,baseUrl:Cr,filter:{updateUrl:!0}});return ne(async()=>{F(),await h()}),(q,p)=>{const V=W("router-link"),U=W("PageHeader"),_=W("m-pagination"),J=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(U,{"page-icon":"fas fa-fw fa-bookmark",pageTitle:i(c)},{default:S(()=>[e("div",hr,[i(d).isAdministrator?(t(),o("div",_r,[P(V,{to:a.urlAdd,class:"btn btn-primary"},{default:S(()=>p[3]||(p[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),P(V,{to:a.urlAdd,class:"btn btn-primary"},{default:S(()=>p[4]||(p[4]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"]),e("div",kr,[e("div",Sr,[T(e("input",{"onUpdate:modelValue":p[0]||(p[0]=X=>i(G).query.criteria=X),onKeyup:p[1]||(p[1]=he(X=>i(h)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(G).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:p[2]||(p[2]=X=>i(h)(1))},p[5]||(p[5]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),P(J,{errorMessage:i(A)},{default:S(()=>[e("div",Mr,[e("table",Tr,[p[6]||(p[6]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Video Title")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(i(G).items,(X,ce)=>(t(),o("tr",{key:X.movieId},[e("td",{textContent:v(i(s)(ce)),class:"text-center"},null,8,Ir),e("td",null,[P(V,{to:`${a.urlView}/${X.vodSourceId}`,class:"d-inline-block text-truncate"},{default:S(()=>[X.arn?(t(),o("span",Pr)):C("",!0),O(v(X.name),1)]),_:2},1032,["to"])]),e("td",null,[P(V,{to:`${a.urlViewVideo}/${encodeURIComponent(X.video.videoId)}/${i(L)()}`},{default:S(()=>[O(v(X.video.title),1)]),_:2},1032,["to"]),e("div",null,[e("span",xr,"Duration: "+v(i(Y).moment.utc(X.video.durationInMillis).format("HH:mm:ss")),1)])])]))),128))]),_:1},512),[[be,i(G).items.length>0]])])]),P(_,{filter:i(G),search:i(h),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Vr=["id"],Ar={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Er={class:"modal-content"},Nr={class:"modal-header bg-primary text-white"},Or={class:"modal-title",id:"exampleModalLabel"},Lr={class:"modal-body"},Hr={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},Br=["innerHTML"],Dr={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},qr={class:"container"},Rr={class:"col"},jr={class:"form-floating mb-2"},zr={class:"col"},Fr={class:"form-floating mb-2"},Yr={key:0,class:"d-block invalid-feedback"},Wr={class:"col"},Gr={class:"form-floating mb-2"},Jr={key:0,class:"d-block invalid-feedback"},Kr={class:"col"},Qr={class:"form-floating mb-2"},Xr={key:0,class:"d-block invalid-feedback"},Zr={class:"modal-footer"},ed=["disabled"],td={__name:"_addPlaybackConfiguration",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:x,isDirty:y,validations:D,infoMessage:A,warningMessage:M,errorMessage:E,router:Y,axios:R,utils:j,toasts:N,closeWithReturnUrl:L,security:d}=ue({appTitle:"Sony FAST",pageTitle:"Add Playback Configuration"}),G=u,F=oe(),r=oe("modalAddPlaybackConfiguration"),w=re({lookups:{},item:{name:null,adDecisionServerUrl:null,videoContentSourceUrl:null}}),h={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},adDecisionServerUrl:{required:ee.withMessage("adDecisionServerUrl is required.",te),$autoDirty:!0,$lazy:!0},videoContentSourceUrl:{required:ee.withMessage("videoContentSourceUrl is required.",te),$autoDirty:!0,$lazy:!0}}},s=ye(h,w);ne(async()=>{s.value.$reset()});const m=async(p,V)=>{F.value=p;const U=w;D.value.clear(),E.value="";const _=V,J=_.lastIndexOf("/"),X=_.substring(0,J),ce="ad_campaign_"+_.substring(J+1).replace(".","_");U.item={name:ce,originalVideoContentSourceUrl:V,videoContentSourceUrl:X,adDecisionServerUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]"},s.value.$reset();var K=document.getElementById(r.value),k=we.getOrCreateInstance(K);k.show()},l=async()=>{var p=document.getElementById(r.value),V=we.getOrCreateInstance(p);V.hide(),G("refresh")},q=async()=>{const p=w;if(x.value)return;if(!await s.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,E.value="";const U=p.item;U.vodSourceId=F.value,await R.post("/api/v1/playbackconfigurations/",U).then(_=>{N.success("Add Playback Configuration","Playback configuration added to VOD Source.",{async onClose(){}})}),await l()}catch(U){E.value=j.getErrorMessageAsHtml(U),window.scrollTo(0,0)}finally{x.value=!1}};return n({open:m,close:l}),(p,V)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ar,[e("div",Er,[e("div",Nr,[e("h5",Or,v(i(f))+" - "+v(i(c)),1),V[5]||(V[5]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Lr,[i(E)?(t(),o("div",Hr,[V[6]||(V[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,Br)])):C("",!0),i(D).size>0?(t(),o("div",Dr,[V[7]||(V[7]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(i(D).values(),U=>(t(),o("li",null,v(U),1))),256))])])):C("",!0),e("div",qr,[e("div",Rr,[e("div",jr,[T(e("input",{"onUpdate:modelValue":V[0]||(V[0]=U=>w.item.originalVideoContentSourceUrl=U),id:"originalVideoContentSourceUrl",class:"form-control",placeholder:"originalVideoContentSourceUrl",disabled:""},null,512),[[H,w.item.originalVideoContentSourceUrl]]),V[8]||(V[8]=e("label",{for:"originalVideoContentSourceUrl",class:"small fw-bold"},"Original Video Content Source Url",-1))])]),e("div",zr,[e("div",Fr,[T(e("input",{"onUpdate:modelValue":V[1]||(V[1]=U=>w.item.name=U),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,w.item.name]]),V[9]||(V[9]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(s).item.name.$error?(t(),o("div",Yr,[(t(!0),o(B,null,z(i(s).item.name.$errors,U=>(t(),o("div",{key:U.$uid},v(U.$message),1))),128))])):C("",!0)])]),e("div",Wr,[e("div",Gr,[T(e("input",{"onUpdate:modelValue":V[2]||(V[2]=U=>w.item.videoContentSourceUrl=U),id:"videoContentSourceUrl",class:"form-control",placeholder:"videoContentSourceUrl"},null,512),[[H,w.item.videoContentSourceUrl]]),V[10]||(V[10]=e("label",{for:"videoContentSourceUrl",class:"small fw-bold"},"Video Content Source Url",-1)),V[11]||(V[11]=e("div",null,[e("span",{class:"fas fa-fw fa-info-circle"}),e("span",{class:"text-info small"},"The URL prefix for the parent manifest for the stream, minus the asset ID")],-1)),i(s).item.videoContentSourceUrl.$error?(t(),o("div",Jr,[(t(!0),o(B,null,z(i(s).item.videoContentSourceUrl.$errors,U=>(t(),o("div",{key:U.$uid},v(U.$message),1))),128))])):C("",!0)])]),e("div",Kr,[e("div",Qr,[T(e("textarea",{"onUpdate:modelValue":V[3]||(V[3]=U=>w.item.adDecisionServerUrl=U),id:"adDecisionServerUrl",class:"form-control",placeholder:"adDecisionServerUrl",style:{height:"10rem"}},null,512),[[H,w.item.adDecisionServerUrl]]),V[12]||(V[12]=e("label",{for:"adDecisionServerUrl",class:"small fw-bold"},"Ad Decision Server Url",-1)),i(s).item.adDecisionServerUrl.$error?(t(),o("div",Xr,[(t(!0),o(B,null,z(i(s).item.adDecisionServerUrl.$errors,U=>(t(),o("div",{key:U.$uid},v(U.$message),1))),128))])):C("",!0)])])])]),e("div",Zr,[e("button",{disabled:i(s).$dirty&&i(s).$invalid,onClick:V[4]||(V[4]=U=>q()),class:"btn btn-primary",type:"button"},V[13]||(V[13]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ed),V[14]||(V[14]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Vr))}},sd={class:"d-flex flex-row justify-content-end"},od={key:0},ld={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},ad={class:"nav-item",role:"presentation"},nd={class:"nav-item",role:"presentation"},id={class:"nav-item",role:"presentation"},rd={class:"tab-content",id:"myTabContent"},dd={class:"mt-2"},ud={class:"col"},cd={class:"form-floating mb-2"},md={class:"table-responsive border mt-2"},fd={class:"table table-hover mb-0 caption-top"},pd={class:"mt-2"},vd={class:"row row-cols-sm-2"},gd={class:"col"},bd={class:"form-floating mb-2"},yd={class:"col"},$d={class:"form-floating mb-2"},wd={class:"row row-cols-sm-2"},hd={class:"col"},_d={class:"form-floating mb-2"},kd={class:"col"},Sd={class:"input-group mb-2"},Md={class:"form-floating"},Td=["href"],Id={class:"row row-cols-sm-2"},Pd={class:"col"},xd={class:"form-floating mb-2"},Cd={class:"col"},Ud={class:"input-group mb-2"},Vd={class:"form-floating"},Ad=["href"],Ed={class:"row row-cols-sm-2"},Nd={class:"col"},Od={class:"form-floating mb-2"},Ld={class:"col"},Hd={class:"input-group mb-2"},Bd={class:"form-floating"},Dd={class:"mt-2"},qd={class:"table-responsive border mt-2"},Rd={class:"table mb-0"},jd={class:"row"},zd={class:"col-sm-9"},Fd={key:0,class:"fas fa-fw fa-check-circle text-success"},Yd={class:"col-sm-9"},Wd={class:"col-sm-9"},Gd={class:"text-break border p-2"},Jd={class:"col-sm-3"},Kd={class:"d-flex flex-row justify-content-between"},Qd=["href"],Xd={class:"col-sm-9"},Zd={class:"text-break border p-2"},eu=["href"],tu={class:"col-sm-3"},su={class:"d-flex flex-row justify-content-between"},ou=["href"],lu={class:"col-sm-9"},au={class:"text-break border p-2"},nu={class:"d-flex flex-row"},iu=["onClick"],ru=["onClick"],du=["onClick"],uu={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/vod-sources"},urlEdit:{type:String,required:!0},urlAddTrailer:{type:String,required:!0},urlViewMovieAlpha:{type:String,required:!0}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:x,validations:y,infoMessage:D,warningMessage:A,errorMessage:M,router:E,axios:Y,utils:R,toasts:j,close:N,closeWithReturnUrl:L,generateReturnUrl:d,security:G}=ue({appTitle:"Sony FAST",pageTitle:"View VOD Source"});fe("$config");const F=de();F.user;const r=re({user:F.user,item:null}),w=oe(),h=oe();ne(async()=>{await q(),w.value=R.getPageTab("vodSource")||"information-tab"});const s=K=>{R.setPageTab("vodSource",K),w.value=K},m=K=>K!==w.value?"":"active",l=K=>K!==w.value?"":"show active",q=async()=>{const K=r;if(!c.value)try{c.value=!0,M.value="",r.item=null;const k=`/api/v1/vodsources/${n.id}/`;await Y.get(k).then(Z=>{K.item=Z.data;const I=R.moment.utc(K.item.video.durationInMillis).format("HH:mm:ss");K.item.video.duration=I;const g=K.item.video.hlsPath,$=g.substring(g.lastIndexOf("/")+1);K.item.playbackConfigurations.forEach(b=>{b.dashConfigurationManifestEndpointPrefix&&(b.dashConfigurationManifestEndpointPrefix+=$),b.hlsConfigurationManifestEndpointPrefix&&(b.hlsConfigurationManifestEndpointPrefix+=$)})})}catch(k){M.value=R.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{c.value=!1}},p=async()=>{await q()},V=async()=>{if(confirm("VOD will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD?")&&!c.value){M.value=null;try{c.value=!0,await Y.post(`/api/v1/vodsources/publish/${n.id}/`).then(k=>{j.success("Publish VOD","VOD was published.",{async onClose(){}})}),c.value=!1,await p()}catch(k){M.value=R.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{c.value=!1}}},U=async()=>{if(confirm("VOD will be removed to AWS MediaTailer. Are you sure you want to remove the VOD?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/vodsources/unpublish/${n.id}/`).then(k=>{j.warning("Remove VOD","VOD was removed.",{async onClose(){}})}),c.value=!1,await p()}catch(k){M.value=R.getErrorMessageAsHtml(k),window.scrollTo(0,0)}finally{c.value=!1}}},_=K=>{if(K==="HLS"){const k=r.item.video.hlsBaseUrl+r.item.video.hlsPath;h.value.open(n.id,k)}},J=async K=>{if(confirm("VOD Playback configuration will be submitted to AWS MediaTailer. Are you sure you want to publish the VOD Playback configuration?")&&!c.value){M.value=null;try{c.value=!0,await Y.post(`/api/v1/playbackconfigurations/publish/${K}/`).then(Z=>{j.success("Publish VOD Playback configuration","VOD Playback configuration was published.",{async onClose(){}})}),c.value=!1,await p()}catch(Z){M.value=R.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{c.value=!1}}},X=async K=>{if(confirm("VOD Playback configuration will be removed to AWS MediaTailer. Are you sure you want to remove the VOD Playback configuration?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/playbackconfigurations/unpublish/${K}/`).then(Z=>{j.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),c.value=!1,await p()}catch(Z){M.value=R.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{c.value=!1}}},ce=async K=>{if(confirm("Are you sure you want to remove the VOD Playback configuration?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/playbackconfigurations/${K}/`).then(Z=>{j.warning("Remove VOD Playback configuration","VOD Playback configuration was removed.",{async onClose(){}})}),c.value=!1,await p()}catch(Z){M.value=R.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{c.value=!1}}};return(K,k)=>{const Z=W("router-link"),I=W("PageHeader"),g=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(I,{"page-icon":"fas fa-fw fa-bookmark",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:S(()=>[e("div",sd,[i(G).isAdministrator?(t(),o(B,{key:0},[P(Z,{to:`${a.urlEdit}/${a.id}`,class:"ms-2 btn btn-primary d-none"},{default:S(()=>k[20]||(k[20]=[e("span",{class:"fas fa-fw fa-edit"},null,-1)])),_:1},8,["to"]),e("button",{onClick:k[0]||(k[0]=$=>K.remove()),class:"ms-1 btn btn-warning"},k[21]||(k[21]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]))],64)):C("",!0),r.item?(t(),o(B,{key:1},[r.item.arn?(t(),o("button",{key:0,onClick:k[1]||(k[1]=$=>U()),class:"ms-1 btn btn-danger"},k[22]||(k[22]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]))):(t(),o("button",{key:1,onClick:k[2]||(k[2]=$=>V()),class:"ms-1 btn btn-primary"},k[23]||(k[23]=[e("span",{class:"fas fa-fw fa-link"},null,-1)])))],64)):C("",!0),e("button",{onClick:k[3]||(k[3]=$=>p()),class:"ms-2 btn btn-secondary"},k[24]||(k[24]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:k[4]||(k[4]=$=>i(L)(n.urlMain)),class:"btn btn-secondary ms-1"},k[25]||(k[25]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),P(g,{errorMessage:i(M)},{default:S(()=>[r.item?(t(),o("div",od,[e("div",null,[e("ul",ld,[e("li",ad,[e("button",{onClick:k[5]||(k[5]=$=>s("information-tab")),class:ae([m("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"}," Information ",2)]),e("li",nd,[e("button",{onClick:k[6]||(k[6]=$=>s("video-tab")),class:ae([m("video-tab"),"nav-link"]),id:"video-tab","data-bs-toggle":"tab","data-bs-target":"#video",type:"button",role:"tab","aria-controls":"video","aria-selected":"false"}," Video ",2)]),e("li",id,[e("button",{onClick:k[7]||(k[7]=$=>s("playbackConfigurations-tab")),class:ae([m("playbackConfigurations-tab"),"nav-link"]),id:"playbackConfigurations-tab","data-bs-toggle":"tab","data-bs-target":"#playbackConfigurations",type:"button",role:"tab","aria-controls":"playbackConfigurations","aria-selected":"false"}," Playback Configurations ",2)])]),e("div",rd,[e("div",{class:ae([l("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",dd,[e("div",ud,[e("div",cd,[T(e("input",{"onUpdate:modelValue":k[8]||(k[8]=$=>r.item.name=$),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[H,r.item.name]]),k[26]||(k[26]=e("label",{for:"name"},"Name",-1))])]),k[28]||(k[28]=e("fieldset",null,[e("legend",null,"HTTP Package Configurations")],-1)),e("div",md,[e("table",fd,[k[27]||(k[27]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Path"),e("th",null,"Source Group"),e("th",null,"Type")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.packageConfigurations,($,b)=>(t(),o("tr",{key:$.packageConfigurationId},[e("td",null,v(b+1),1),e("td",null,v($.path),1),e("td",null,v($.sourceGroup),1),e("td",null,v($.type),1)]))),128))]),_:1},512),[[be,r.item.packageConfigurations.length>0]])])])])],2),e("div",{class:ae([l("video-tab"),"tab-pane fade"]),id:"video",role:"tabpanel","aria-labelledby":"video-tab"},[e("div",pd,[e("div",null,[e("div",vd,[e("div",gd,[e("div",bd,[T(e("input",{"onUpdate:modelValue":k[9]||(k[9]=$=>r.item.video.title=$),type:"text",class:"form-control",id:"title",disabled:""},null,512),[[H,r.item.video.title]]),k[29]||(k[29]=e("label",{for:"title"},"Title",-1))])]),e("div",yd,[e("div",$d,[T(e("input",{"onUpdate:modelValue":k[10]||(k[10]=$=>r.item.video.duration=$),type:"text",class:"form-control",id:"duration",disabled:""},null,512),[[H,r.item.video.duration]]),k[30]||(k[30]=e("label",{for:"duration"},"Duration",-1))])])]),e("div",wd,[e("div",hd,[e("div",_d,[T(e("input",{"onUpdate:modelValue":k[11]||(k[11]=$=>r.item.video.rawBaseUrl=$),class:"form-control",id:"rawBaseUrl",disabled:""},null,512),[[H,r.item.video.rawBaseUrl]]),k[31]||(k[31]=e("label",{for:"rawBaseUrl"},"Raw Base Url",-1))])]),e("div",kd,[e("div",Sd,[e("div",Md,[T(e("input",{"onUpdate:modelValue":k[12]||(k[12]=$=>r.item.video.rawPath=$),class:"form-control",id:"rawPath",disabled:""},null,512),[[H,r.item.video.rawPath]]),k[32]||(k[32]=e("label",{for:"rawPath"},"Raw Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(r.item.video.rawBaseUrl+r.item.video.rawPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},k[33]||(k[33]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),O("View ")],-1)]),8,Td)])])]),e("div",Id,[e("div",Pd,[e("div",xd,[T(e("input",{"onUpdate:modelValue":k[13]||(k[13]=$=>r.item.video.hlsBaseUrl=$),class:"form-control",id:"hlsBaseUrl",disabled:""},null,512),[[H,r.item.video.hlsBaseUrl]]),k[34]||(k[34]=e("label",{for:"hlsBaseUrl"},"HLS Base Url",-1))])]),e("div",Cd,[e("div",Ud,[e("div",Vd,[T(e("input",{"onUpdate:modelValue":k[14]||(k[14]=$=>r.item.video.hlsPath=$),class:"form-control",id:"hlsPath",disabled:""},null,512),[[H,r.item.video.hlsPath]]),k[35]||(k[35]=e("label",{for:"hlsPath"},"HLS Path",-1))]),e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(r.item.video.hlsBaseUrl+r.item.video.hlsPath)}`,target:"_blank",class:"btn btn-outline-primary pt-3",type:"button"},k[36]||(k[36]=[e("span",{class:""},[e("span",{class:"fas fa-fw fa-tv me-1"}),O("View ")],-1)]),8,Ad),r.item.video.hlsPath?(t(),o("button",{key:0,onClick:k[15]||(k[15]=$=>_("HLS")),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},k[37]||(k[37]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Playback Config ")]))):C("",!0)])])]),e("div",Ed,[e("div",Nd,[e("div",Od,[T(e("input",{"onUpdate:modelValue":k[16]||(k[16]=$=>r.item.video.dashBaseUrl=$),class:"form-control",id:"dashBaseUrl",disabled:""},null,512),[[H,r.item.video.dashBaseUrl]]),k[38]||(k[38]=e("label",{for:"dashBaseUrl"},"DASH Base Url",-1))])]),e("div",Ld,[e("div",Hd,[e("div",Bd,[T(e("input",{"onUpdate:modelValue":k[17]||(k[17]=$=>r.item.video.dashPath=$),class:"form-control",id:"dashPath",disabled:""},null,512),[[H,r.item.video.dashPath]]),k[39]||(k[39]=e("label",{for:"dashPath"},"DASH Path",-1))]),r.item.video.dashPath?(t(),o("button",{key:0,onClick:k[18]||(k[18]=$=>_()),class:"btn btn-outline-primary",type:"button",id:"button-addon2"},k[40]||(k[40]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Playback Configuration ")]))):C("",!0)])])])])])],2),e("div",{class:ae([l("playbackConfigurations-tab"),"tab-pane fade"]),id:"playbackConfigurations",role:"tabpanel","aria-labelledby":"playbackConfigurations-tab"},[e("div",Dd,[e("div",qd,[e("table",Rd,[k[52]||(k[52]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Details"),e("td")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.playbackConfigurations,($,b)=>(t(),o("tr",{key:$.playbackConfigurationId},[e("td",null,v(b+1),1),e("td",null,[e("dl",jd,[k[46]||(k[46]=e("dt",{class:"col-sm-3"},"Name",-1)),e("dd",zd,[$.arn?(t(),o("span",Fd)):C("",!0),O(v($.name),1)]),k[47]||(k[47]=e("dt",{class:"col-sm-3"},"Video Content Source Url",-1)),e("dd",Yd,v($.videoContentSourceUrl),1),k[48]||(k[48]=e("dt",{class:"col-sm-3"},"Ad Decision Server Url",-1)),e("dd",Wd,[e("div",Gd,v($.adDecisionServerUrl),1)]),r.item.video.dashPath&&$.dashConfigurationManifestEndpointPrefix?(t(),o(B,{key:0},[e("dt",Jd,[e("div",Kd,[k[42]||(k[42]=e("div",null," DASH Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/dashjs?streamUrl=${encodeURIComponent($.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},k[41]||(k[41]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View DASH ")]),8,Qd)])])]),e("dd",Xd,[e("div",Zd,v($.dashConfigurationManifestEndpointPrefix),1),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent($.dashConfigurationManifestEndpointPrefix)}`,target:"_blank"},k[43]||(k[43]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View DASH ")]),8,eu)])])],64)):C("",!0),r.item.video.hlsPath&&$.hlsConfigurationManifestEndpointPrefix?(t(),o(B,{key:1},[e("dt",tu,[e("div",su,[k[45]||(k[45]=e("div",null," HLS Endpoint ",-1)),e("div",null,[e("a",{href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent($.hlsConfigurationManifestEndpointPrefix)}`,target:"_blank"},k[44]||(k[44]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View ")]),8,ou)])])]),e("dd",lu,[e("div",au,v($.hlsConfigurationManifestEndpointPrefix),1)])],64)):C("",!0)])]),e("td",null,[e("div",nu,[$.arn?(t(),o("button",{key:0,onClick:se=>X($.playbackConfigurationId),class:"btn btn-outline-warning"},k[49]||(k[49]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,iu)):(t(),o("button",{key:1,onClick:se=>J($.playbackConfigurationId),class:"btn btn-outline-primary"},k[50]||(k[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,ru)),$.arn?C("",!0):(t(),o("button",{key:2,onClick:se=>ce($.playbackConfigurationId),class:"btn btn-outline-danger ms-1"},k[51]||(k[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,du))])])]))),128))]),_:1},512),[[be,r.item.playbackConfigurations.length>0]])])])])],2)])])])):C("",!0)]),_:1},8,["errorMessage"]),P(td,{ref_key:"modalAddPlaybackConfiguration",ref:h,onRefresh:k[19]||(k[19]=$=>p())},null,512)])]),_:1})}}},cu={class:"d-flex justify-content-end"},mu=["disabled"],fu={class:"input-group"},pu={class:"row row-cols-1 row-cols-sm-2 mt-3"},vu={class:"col text-center mb-2"},gu=["src"],bu={class:"col"},yu={class:"form-floating mb-2"},$u={key:0,class:"d-block invalid-feedback"},wu={class:"form-floating mb-2"},hu={class:"row row-cols-sm-2"},_u={class:"col"},ku={class:"form-floating mb-2"},Su={class:"col"},Mu={class:"form-floating mb-2"},Tu={class:"row row-cols-sm-2"},Iu={class:"col"},Pu={class:"form-floating mb-2"},xu={class:"col"},Cu={class:"form-floating mb-2"},Uu={class:"col"},Vu={class:"form-floating mb-2"},Au={class:"col"},Eu={class:"form-floating mb-2"},Ne="YYYY-MM-DD HH:mm",Nu={__name:"add",props:{urlView:{type:String,default:"/users/view"},urlMain:{type:String,default:"/users"}},setup(a){const{appTitle:n,pageTitle:u,busy:f,infoMessage:c,warningMessage:x,errorMessage:y,router:D,axios:A,utils:M,toasts:E,close:Y,security:R}=ue({appTitle:"ARC AIO",pageTitle:"Add User"}),j=a,N=M.moment().local();N.format(Ne),N.add(24,"hours").format(Ne);const L=oe("a22de760-358d-4a0e-83ad-2624a5c11f73"),d=re({lookups:{visibilityTypes:[]},editorElementId:"editor",item:{userId:null,givenName:null,surname:null,displayName:null,email:null,mobilePhone:null,jobTitle:null}}),G={item:{userId:{required:ee.withMessage("User Id is required.",te),$autoDirty:!0,$lazy:!0}}},F=ye(G,d);ne(async()=>{});const r=async()=>{const h=d;if(!f.value)try{f.value=!0,h.item=null;const s=`/api/v1/users/get-from-entra-id/${L.value}`;await A.get(s).then(m=>{h.item=m.data})}catch(s){y.value=M.getErrorMessageAsHtml(s),window.scrollTo(0,0)}finally{f.value=!1}},w=async()=>{const h=d;if(f.value)return;if(!await F.value.$validate()){window.scrollTo(0,0);return}try{f.value=!0,y.value="",await A.post(`/api/v1/users/add-from-entra-id/${h.item.userId}`).then(m=>{E.success("Add User","User added",{onClose:async()=>{const l=`${j.urlView}/${m.data}`;await D.push(l)}})})}catch(m){y.value=M.getErrorMessageAsHtml(m),window.scrollTo(0,0)}finally{f.value=!1}};return(h,s)=>{const m=W("router-link"),l=W("PageHeader"),q=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(l,{"page-icon":"fas fa-fw fa-user-plus",pageTitle:i(u),"header-break":"row row-cols-2"},{default:S(()=>[e("div",cu,[e("button",{disabled:i(F).$dirty&&i(F).$invalid,onClick:s[0]||(s[0]=p=>w()),class:"btn btn-primary"},s[12]||(s[12]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,mu),P(m,{to:j.urlMain,class:"btn btn-secondary ms-2"},{default:S(()=>s[13]||(s[13]=[e("span",{class:"fas fa-fw fa-times"},null,-1)])),_:1},8,["to"])])]),_:1},8,["pageTitle"]),P(q,{errorMessage:i(y),vuelidate:i(F)},{default:S(()=>[e("div",null,[e("div",null,[e("div",fu,[T(e("input",{"onUpdate:modelValue":s[1]||(s[1]=p=>L.value=p),onKeyup:s[2]||(s[2]=he(p=>r(),["enter"])),type:"text",class:"form-control",placeholder:"Enter Entra Object ID","aria-label":"Enter Entra Object ID","aria-describedby":"button-addon2"},null,544),[[H,L.value]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:s[3]||(s[3]=p=>r())},s[14]||(s[14]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])]),e("div",pu,[e("div",vu,[e("img",{src:d.item.photoBase64,style:{width:"10rem",height:"10rem"},class:"img-fluid img-thumbnail"},null,8,gu)]),e("div",bu,[e("div",yu,[T(e("input",{"onUpdate:modelValue":s[4]||(s[4]=p=>d.item.userId=p),type:"text",class:"form-control",id:"userId",placeholder:"User Id",disabled:""},null,512),[[H,d.item.userId]]),s[15]||(s[15]=e("label",{for:"userId"},"User Id",-1)),i(F).item.userId.$error?(t(),o("div",$u,[(t(!0),o(B,null,z(i(F).item.userId.$errors,p=>(t(),o("div",{key:p.$uid},v(p.$message),1))),128))])):C("",!0)]),e("div",wu,[T(e("input",{"onUpdate:modelValue":s[5]||(s[5]=p=>d.item.displayName=p),type:"text",class:"form-control",id:"displayName",placeholder:"Display Name",disabled:""},null,512),[[H,d.item.displayName]]),s[16]||(s[16]=e("label",{for:"displayName"},"Display Name",-1))])])]),e("div",hu,[e("div",_u,[e("div",ku,[T(e("input",{"onUpdate:modelValue":s[6]||(s[6]=p=>d.item.givenName=p),type:"text",class:"form-control",id:"givenName",placeholder:"Given Name",disabled:""},null,512),[[H,d.item.givenName]]),s[17]||(s[17]=e("label",{for:"givenName"},"Given Name",-1))])]),e("div",Su,[e("div",Mu,[T(e("input",{"onUpdate:modelValue":s[7]||(s[7]=p=>d.item.surname=p),class:"form-control",id:"surname",placeholder:"Surname",disabled:""},null,512),[[H,d.item.surname]]),s[18]||(s[18]=e("label",{for:"surname"},"Surname",-1))])])]),e("div",Tu,[e("div",Iu,[e("div",Pu,[T(e("input",{"onUpdate:modelValue":s[8]||(s[8]=p=>d.item.email=p),type:"email",class:"form-control",id:"email",placeholder:"email",disabled:""},null,512),[[H,d.item.email]]),s[19]||(s[19]=e("label",{for:"email"},"Email",-1))])]),e("div",xu,[e("div",Cu,[T(e("input",{"onUpdate:modelValue":s[9]||(s[9]=p=>d.item.mobilePhone=p),class:"form-control",id:"mobilePhone",placeholder:"Mobile Phone",disabled:""},null,512),[[H,d.item.mobilePhone]]),s[20]||(s[20]=e("label",{for:"mobilePhone"},"Mobile Phone",-1))])])]),e("div",Uu,[e("div",Vu,[T(e("input",{"onUpdate:modelValue":s[10]||(s[10]=p=>d.item.principalName=p),class:"form-control",id:"principalName",placeholder:"Principal Name",disabled:""},null,512),[[H,d.item.principalName]]),s[21]||(s[21]=e("label",{for:"principalName"},"Principal Name",-1))])]),e("div",Au,[e("div",Eu,[T(e("input",{"onUpdate:modelValue":s[11]||(s[11]=p=>d.item.jobTitle=p),class:"form-control",id:"jobTitle",placeholder:"Job Title",disabled:""},null,512),[[H,d.item.jobTitle]]),s[22]||(s[22]=e("label",{for:"jobTitle"},"Job Title",-1))])])])]),_:1},8,["errorMessage","vuelidate"])])]),_:1})}}},Ou={components:{Page:Pe},props:{id:{type:String,required:!0},urlView:{type:String,default:"/movieAlphas/view"}}};function Lu(a,n,u,f,c,x){const y=W("Page");return t(),le(y,{id:u.id,urlView:u.urlView},null,8,["id","urlView"])}const Hu=pe(Ou,[["render",Lu]]),Bu={class:"d-flex justify-content-end"},Du={key:0},qu={class:"ms-1"},Ru={class:"input-group"},ju={class:"table-responsive"},zu={class:"table table-hover mb-0"},Fu=["textContent"],Yu="/api/v1/channels/search",Wu={__name:"index",props:{urlAdd:{type:String,default:"/channels/add"},urlView:{type:String,default:"/channels/view"}},setup(a){fe("$config");const u=de().user,{appTitle:f,pageTitle:c,busy:x,infoMessage:y,warningMessage:D,errorMessage:A,router:M,axios:E,utils:Y,toasts:R,close:j,security:N,filter:L,initializeFilter:d,getQuery:G,saveQuery:F,search:r,getRowNumber:w,setSelected:h,isSelected:s}=Me({appTitle:"ARC CMS",pageTitle:"Channels",cacheKey:`${u==null?void 0:u.userId}/Channels/search`,baseUrl:Yu,filter:{updateUrl:!0}});return ne(async()=>{d(),await r()}),(m,l)=>{const q=W("router-link"),p=W("PageHeader"),V=W("m-pagination"),U=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(p,{"page-icon":"fas fa-fw fa-microphone",pageTitle:i(c)},{default:S(()=>[e("div",Bu,[i(N).isAdministrator?(t(),o("div",Du,[P(q,{to:a.urlAdd,class:"btn btn-primary"},{default:S(()=>l[3]||(l[3]=[e("span",{class:"fas fa-fw fa-plus"},null,-1)])),_:1},8,["to"])])):C("",!0),e("div",qu,[e("div",Ru,[T(e("input",{"onUpdate:modelValue":l[0]||(l[0]=_=>i(L).query.criteria=_),onKeyup:l[1]||(l[1]=he(_=>i(r)(1),["enter"])),type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2"},null,544),[[H,i(L).query.criteria]]),e("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=_=>i(r)(1))},l[4]||(l[4]=[e("i",{class:"fa-solid fa-magnifying-glass"},null,-1)]))])])])]),_:1},8,["pageTitle"]),P(U,{errorMessage:i(A)},{default:S(()=>[e("div",ju,[e("table",zu,[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("td",{class:"text-center"},"#"),e("th",null,"Name"),e("th",null,"Playback Mode"),e("th",null,"Tier")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(i(L).items,(_,J)=>(t(),o("tr",{key:_.channelId},[e("td",{textContent:v(i(w)(J)),class:"text-center"},null,8,Fu),e("td",null,[P(q,{to:`${a.urlView}/${_.channelId}`,class:"d-inline-block text-truncate"},{default:S(()=>[O(v(_.name),1)]),_:2},1032,["to"])]),e("td",null,v(_.playbackMode),1),e("td",null,v(_.tier),1)]))),128))]),_:1},512),[[be,i(L).items.length>0]])])]),P(V,{filter:i(L),search:i(r),showPerPage:!0},null,8,["filter","search"])]),_:1},8,["errorMessage"])])]),_:1})}}},Gu=["id"],Ju={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Ku={class:"modal-content"},Qu={class:"modal-header bg-primary text-white"},Xu={class:"modal-title",id:"exampleModalLabel"},Zu={class:"modal-body"},ec={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},tc=["innerHTML"],sc={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},oc={class:"container"},lc={class:"row row-cols-1 row-cols-sm-3"},ac={class:"col"},nc={class:"form-floating mb-2"},ic=["disabled"],rc=["value"],dc={class:"col"},uc={class:"form-floating mb-2"},cc={key:0,class:"d-block invalid-feedback"},mc={class:"col"},fc={class:"form-floating mb-2"},pc={key:0,class:"d-block invalid-feedback"},vc={class:"row row-cols-sm-2"},gc={class:"col"},bc={class:"form-floating mb-2"},yc=["value"],$c={key:0,class:"d-block invalid-feedback"},wc={class:"col"},hc={class:"form-floating mb-2"},_c=["value"],kc={key:0,class:"d-block invalid-feedback"},Sc={class:"col"},Mc={class:"input-group mb-1"},Tc={class:"form-floating"},Ic={key:0,class:"input-group-text"},Pc={key:0},xc={key:1},Cc={key:2},Uc={key:3,class:"d-block invalid-feedback"},Vc={class:"col"},Ac={class:"input-group mb-1"},Ec={class:"form-floating"},Nc={key:0,class:"input-group-text"},Oc={key:0},Lc={key:1},Hc={key:2,class:"d-block invalid-feedback"},Bc={class:"table-responsive border mt-1"},Dc={class:"table"},qc={class:"input-group mb-1"},Rc=["onUpdate:modelValue"],jc={key:0,class:"input-group-text"},zc=["onUpdate:modelValue"],Fc=["value"],Yc=["onUpdate:modelValue"],Wc=["value"],Gc=["onClick"],Jc={class:"modal-footer"},Kc=["disabled"],Qc={__name:"_addProgram",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:x,isDirty:y,validations:D,infoMessage:A,warningMessage:M,errorMessage:E,router:Y,axios:R,utils:j,toasts:N,closeWithReturnUrl:L,security:d}=ue({appTitle:"Sony FAST",pageTitle:"Add Program"}),G=u,F=oe(),r=oe("modalAddProgram"),w=re({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,relativeProgramId:null,dateScheduledStart:null,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]}}),h={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},startOffsetMillis:{required:ee.withMessage("startOffsetMillis is required.",te),minValue:Ue(0),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ue(0),$autoDirty:!0,$lazy:!0}}},s=ye(h,w);ne(async()=>{s.value.$reset()});const m=async Z=>{F.value=Z;const I=w;D.value.clear(),E.value="";const g=j.moment().local().add(2,"m"),b=g.format("YYYY-MM-DD HH:mm"),se=g.format("YYYY_MM_DD")+"_PROGRAM_";I.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},I.item={name:se,relativeProgramId:null,dateScheduledStart:b,sourceLocationId:null,vodSource:null,vodSourceId:null,startOffsetMillis:0,endOffsetMillis:0,adBreaks:[]},await p(),s.value.$reset();var ke=document.getElementById(r.value),Se=we.getOrCreateInstance(ke);Se.show()},l=async()=>{var Z=document.getElementById(r.value),I=we.getOrCreateInstance(Z);I.hide(),G("refresh")},q=async()=>{const Z=w;if(x.value)return;if(!await s.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,E.value="";const $=Z.item;delete $.vodSource,$.channelId=F.value;var g=$.dateScheduledStart;$.dateScheduledStart=j.moment(g).utc().format(),await R.post("/api/v1/programs/",$).then(b=>{N.success("Add Program","Program added to Channel",{async onClose(){}})}),await l()}catch($){E.value=j.getErrorMessageAsHtml($),window.scrollTo(0,0)}finally{x.value=!1}},p=async()=>{await V(),await _(),await X()},V=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(I=>{w.lookups.sourceLocations=I.data,w.lookups.sourceLocations.length===1&&(w.item.sourceLocationId=w.lookups.sourceLocations[0].id)}),w.item.sourceLocationId&&await U(w.item.sourceLocationId)}catch(Z){E.value=j.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},U=async Z=>{try{let I="/api/v1/vodSources/lookup/";Z&&(I+=`?sourceLocationId=${Z}`),await R.get(I).then(g=>{w.lookups.vodSources=g.data})}catch(I){E.value=j.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},_=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(I=>{w.lookups.adBreakSourceLocations=I.data})}catch(Z){E.value=j.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},J=async Z=>{try{let I="/api/v1/vodSources/lookup/";Z&&(I+=`?sourceLocationId=${Z}`),await R.get(I).then(g=>{w.lookups.adBreakVodSources=g.data})}catch(I){E.value=j.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},X=async()=>{try{const Z=`/api/v1/programs/lookup/?channelId=${F.value}`;await R.get(Z).then(I=>{if(w.lookups.channelPrograms=I.data,w.lookups.channelPrograms.length===1){const $=w.lookups.channelPrograms[0];w.item.relativeProgramId=$.id}})}catch(Z){E.value=j.getErrorMessageAsHtml(Z),window.scrollTo(0,0)}finally{}},ce=()=>{const Z={offsetMillis:0,sourceLocationId:null,vodSourceId:null},I=w.item.adBreaks.length;if(I>0){const g=w.item.adBreaks[I-1];Z.offsetMillis=g.offsetMillis+1e4}w.item.adBreaks.push(Z)},K=Z=>{w.item.adBreaks.splice(Z,1)},k=()=>{const Z=w.item.vodSource;w.item.vodSourceId=Z.id};return n({open:m,close:l}),(Z,I)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Ju,[e("div",Ku,[e("div",Qu,[e("h5",Xu,v(i(f))+" - "+v(i(c)),1),I[11]||(I[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Zu,[i(E)?(t(),o("div",ec,[I[12]||(I[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,tc)])):C("",!0),i(D).size>0?(t(),o("div",sc,[I[13]||(I[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(i(D).values(),g=>(t(),o("li",null,v(g),1))),256))])])):C("",!0),e("div",oc,[e("div",lc,[e("div",ac,[e("div",nc,[T(e("select",{"onUpdate:modelValue":I[0]||(I[0]=g=>w.item.relativeProgramId=g),class:"form-select",id:"sourceLocationId",disabled:w.lookups.channelPrograms.length<=0},[(t(!0),o(B,null,z(w.lookups.channelPrograms,g=>(t(),o("option",{value:g.id},v(g.name),9,rc))),256))],8,ic),[[me,w.item.relativeProgramId]]),I[14]||(I[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",dc,[e("div",uc,[T(e("input",{"onUpdate:modelValue":I[1]||(I[1]=g=>w.item.name=g),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,w.item.name]]),I[15]||(I[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(s).item.name.$error?(t(),o("div",cc,[(t(!0),o(B,null,z(i(s).item.name.$errors,g=>(t(),o("div",{key:g.$uid},v(g.$message),1))),128))])):C("",!0)])]),e("div",mc,[e("div",fc,[T(e("input",{"onUpdate:modelValue":I[2]||(I[2]=g=>w.item.dateScheduledStart=g),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[H,w.item.dateScheduledStart]]),I[16]||(I[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),i(s).item.dateScheduledStart.$error?(t(),o("div",pc,[(t(!0),o(B,null,z(i(s).item.dateScheduledStart.$errors,g=>(t(),o("div",{key:g.$uid},v(g.$message),1))),128))])):C("",!0)])])]),e("div",vc,[e("div",gc,[e("div",bc,[T(e("select",{"onUpdate:modelValue":I[3]||(I[3]=g=>w.item.sourceLocationId=g),onChange:I[4]||(I[4]=g=>U(w.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),o(B,null,z(w.lookups.sourceLocations,g=>(t(),o("option",{value:g.id},v(g.name),9,yc))),256))],544),[[me,w.item.sourceLocationId]]),I[17]||(I[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(s).item.sourceLocationId.$error?(t(),o("div",$c,[(t(!0),o(B,null,z(i(s).item.sourceLocationId.$errors,g=>(t(),o("div",{key:g.$uid},v(g.$message),1))),128))])):C("",!0)])]),e("div",wc,[e("div",hc,[T(e("select",{"onUpdate:modelValue":I[5]||(I[5]=g=>w.item.vodSource=g),onChange:I[6]||(I[6]=g=>k()),class:"form-select",id:"vodSourceId"},[(t(!0),o(B,null,z(w.lookups.vodSources,g=>(t(),o("option",{value:g},v(g.name),9,_c))),256))],544),[[me,w.item.vodSource]]),I[18]||(I[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),i(s).item.vodSourceId.$error?(t(),o("div",kc,[(t(!0),o(B,null,z(i(s).item.vodSourceId.$errors,g=>(t(),o("div",{key:g.$uid},v(g.$message),1))),128))])):C("",!0)])]),e("div",Sc,[e("div",Mc,[e("div",Tc,[T(e("input",{"onUpdate:modelValue":I[7]||(I[7]=g=>w.item.startOffsetMillis=g),id:"startOffsetMillis",type:"number",class:"form-control",placeholder:"Start OffSet Millis"},null,512),[[H,w.item.startOffsetMillis]]),I[19]||(I[19]=e("label",{for:"startOffsetMillis",class:"small fw-bold"},"Start OffSet Millis",-1))]),w.item.startOffsetMillis>0?(t(),o("span",Ic,v(i(j).moment.utc(w.item.startOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),w.item.startOffsetMillis>0&&w.item.startOffsetMillis<3e4?(t(),o("div",Pc,I[20]||(I[20]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset must be at least 30 seconds ",-1)]))):C("",!0),w.item.startOffsetMillis>w.item.endOffsetMillis&&w.item.endOffsetMillis>0?(t(),o("div",xc,I[21]||(I[21]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Exceeds End Offset Millis ",-1)]))):C("",!0),w.item.vodSource&&w.item.startOffsetMillis>w.item.vodSource.durationInMillis?(t(),o("div",Cc,I[22]||(I[22]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," Start Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),i(s).item.startOffsetMillis.$error?(t(),o("div",Uc,[(t(!0),o(B,null,z(i(s).item.startOffsetMillis.$errors,g=>(t(),o("div",{key:g.$uid},v(g.$message),1))),128))])):C("",!0)]),e("div",Vc,[e("div",Ac,[e("div",Ec,[T(e("input",{"onUpdate:modelValue":I[8]||(I[8]=g=>w.item.endOffsetMillis=g),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[H,w.item.endOffsetMillis]]),I[23]||(I[23]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1))]),w.item.endOffsetMillis>0?(t(),o("span",Nc,v(i(j).moment.utc(w.item.endOffsetMillis).format("HH:mm:ss")),1)):C("",!0)]),w.item.endOffsetMillis>0&&w.item.endOffsetMillis<3e4?(t(),o("div",Oc,I[24]||(I[24]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset must be at least 30 seconds ",-1)]))):C("",!0),w.item.vodSource&&w.item.endOffsetMillis>w.item.vodSource.durationInMillis?(t(),o("div",Lc,I[25]||(I[25]=[e("span",{class:"fas fa-fw fa-triangle-exclamation text-warning"},null,-1),e("span",{class:"text-warning"}," End Offset Millis Exceeds VOD Source Duration ",-1)]))):C("",!0),i(s).item.endOffsetMillis.$error?(t(),o("div",Hc,[(t(!0),o(B,null,z(i(s).item.endOffsetMillis.$errors,g=>(t(),o("div",{key:g.$uid},v(g.$message),1))),128))])):C("",!0)])]),I[29]||(I[29]=e("hr",null,null,-1)),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[I[26]||(I[26]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),e("button",{onClick:ce,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Bc,[e("table",Dc,[I[28]||(I[28]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),o(B,null,z(w.item.adBreaks,(g,$)=>(t(),o("tr",null,[e("td",null,v($+1),1),e("td",null,[e("div",qc,[T(e("input",{"onUpdate:modelValue":b=>g.offsetMillis=b,type:"number",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Rc),[[H,g.offsetMillis]]),g.offsetMillis>0?(t(),o("span",jc,v(i(j).moment.utc(g.offsetMillis).format("HH:mm:ss")),1)):C("",!0)])]),e("td",null,[T(e("select",{"onUpdate:modelValue":b=>g.sourceLocationId=b,onChange:I[9]||(I[9]=b=>J(w.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),o(B,null,z(w.lookups.adBreakSourceLocations,b=>(t(),o("option",{value:b.id},v(b.name),9,Fc))),256))],40,zc),[[me,g.sourceLocationId]])]),e("td",null,[T(e("select",{"onUpdate:modelValue":b=>g.vodSourceId=b,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),o(B,null,z(w.lookups.adBreakVodSources,b=>(t(),o("option",{value:b.id},v(b.name),9,Wc))),256))],8,Yc),[[me,g.vodSourceId]])]),e("td",null,[e("button",{onClick:b=>K($),class:"btn btn-outline-warning"},I[27]||(I[27]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,Gc)])]))),256))])])])])])]),e("div",Jc,[e("button",{disabled:i(s).$dirty&&i(s).$invalid,onClick:I[10]||(I[10]=g=>q()),class:"btn btn-primary",type:"button"},I[30]||(I[30]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Kc),I[31]||(I[31]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Gu))}},Xc=["id"],Zc={class:"modal-dialog modal-xl modal-fullscreen-md-down"},em={class:"modal-content"},tm={class:"modal-header bg-primary text-white"},sm={class:"modal-title",id:"exampleModalLabel"},om={class:"modal-body"},lm={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},am=["innerHTML"],nm={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},im={class:"container"},rm={class:"row row-cols-1 row-cols-sm-3"},dm={class:"col"},um={class:"form-floating mb-2"},cm=["value"],mm={class:"col"},fm={class:"form-floating mb-2"},pm={key:0,class:"d-block invalid-feedback"},vm={class:"col"},gm={class:"form-floating mb-2"},bm={key:0,class:"d-block invalid-feedback"},ym={class:"row row-cols-sm-3"},$m={class:"col"},wm={class:"form-floating mb-2"},hm=["value"],_m={key:0,class:"d-block invalid-feedback"},km={class:"col"},Sm={class:"form-floating mb-2"},Mm=["value"],Tm={key:0,class:"d-block invalid-feedback"},Im={class:"col"},Pm={class:"form-floating mb-2"},xm={key:0,class:"badge bg-info"},Cm={key:1,class:"d-block invalid-feedback"},Um={class:"col"},Vm={class:"form-floating mb-2"},Am={class:"col"},Em={class:"form-floating mb-2"},Nm={class:"table-responsive"},Om={class:"table"},Lm=["onUpdate:modelValue"],Hm={class:"badge bg-info"},Bm=["onUpdate:modelValue"],Dm=["value"],qm=["onUpdate:modelValue"],Rm=["value"],jm=["onClick"],zm={class:"modal-footer"},Fm=["disabled"],Ym={__name:"_editProgram",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:x,isDirty:y,validations:D,infoMessage:A,warningMessage:M,errorMessage:E,router:Y,axios:R,utils:j,toasts:N,closeWithReturnUrl:L,security:d}=ue({appTitle:"Sony FAST",pageTitle:"Edit Program"}),G=u,F=oe("modalEditProgram"),r=oe(),w=oe(),h=re({lookups:{sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},item:{name:null,dateScheduledStart:null,sourceLocationId:null,vodSourceId:null,endOffsetMillis:0,adName:null,adsUrl:null,adBreaks:[]}}),s={item:{name:{required:ee.withMessage("Name is required.",te),$autoDirty:!0,$lazy:!0},dateScheduledStart:{required:ee.withMessage("Date Scheduled Start is required.",te),$autoDirty:!0,$lazy:!0},sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0},endOffsetMillis:{required:ee.withMessage("endOffsetMillis is required.",te),minValue:Ue(0),$autoDirty:!0,$lazy:!0}}},m=ye(s,h);ne(async()=>{m.value.$reset()});const l=async(I,g)=>{r.value=I,w.value=g;const $=h;D.value.clear(),E.value="";const ke=j.moment().local().format("YYYY-MM-DD HH:mm");$.lookups={sourceLocations:[],vodSources:[],adBreakSourceLocations:[],adBreakVodSources:[],channelPrograms:[]},$.item={name:null,dateScheduledStart:ke,sourceLocationId:null,vodSourceId:null,endOffsetMillis:0,adName:null,adsUrl:"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpost&cmsid=496&vid=short_onecue&correlator=[avail.random]",adBreaks:[]},await U(),await p(),await J($.item.sourceLocationId),await ce($.item.sourceLocationId),m.value.$reset();var Se=document.getElementById(F.value),Q=we.getOrCreateInstance(Se);Q.show()},q=async()=>{var I=document.getElementById(F.value),g=we.getOrCreateInstance(I);g.hide(),G("refresh")},p=async()=>{const I=h;if(!x.value)try{x.value=!0,E.value="",await R.get(`/api/v1/programs/${w.value}`).then(g=>{I.item=g.data;const se=j.moment(I.item.dateScheduledStart).local().format("YYYY-MM-DD HH:mm");I.item.dateScheduledStart=se})}catch(g){E.value=j.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{x.value=!1}},V=async()=>{const I=h;if(x.value)return;if(!await m.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,E.value="";const b=I.item;b.channelId=r.value;var $=b.dateScheduledStart;b.dateScheduledStart=j.moment($).utc().format(),await R.post("/api/v1/programs/",b).then(se=>{N.success("Add Program","Program added to Channel",{async onClose(){}})}),await q()}catch(b){E.value=j.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{x.value=!1}},U=async()=>{await _(),await X(),await K()},_=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(g=>{h.lookups.sourceLocations=g.data})}catch(I){E.value=j.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},J=async I=>{try{let g="/api/v1/vodSources/lookup/";I&&(g+=`?sourceLocationId=${I}`),await R.get(g).then($=>{h.lookups.vodSources=$.data})}catch(g){E.value=j.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},X=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(g=>{h.lookups.adBreakSourceLocations=g.data})}catch(I){E.value=j.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},ce=async I=>{try{let g="/api/v1/vodSources/lookup/";I&&(g+=`?sourceLocationId=${I}`),await R.get(g).then($=>{h.lookups.adBreakVodSources=$.data})}catch(g){E.value=j.getErrorMessageAsHtml(g),window.scrollTo(0,0)}finally{}},K=async()=>{try{const I=`/api/v1/programs/lookup/?channelId=${r.value}`;await R.get(I).then(g=>{h.lookups.channelPrograms=g.data})}catch(I){E.value=j.getErrorMessageAsHtml(I),window.scrollTo(0,0)}finally{}},k=()=>{const I={offsetMillis:"00:01",sourceLocationId:null,vodSourceId:null};h.item.adBreaks.push(I)},Z=I=>{h.item.adBreaks.splice(I,1)};return n({open:l,close:q}),(I,g)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:F.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Zc,[e("div",em,[e("div",tm,[e("h5",sm,v(i(f))+" - "+v(i(c)),1),g[11]||(g[11]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",om,[i(E)?(t(),o("div",lm,[g[12]||(g[12]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,am)])):C("",!0),i(D).size>0?(t(),o("div",nm,[g[13]||(g[13]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(i(D).values(),$=>(t(),o("li",null,v($),1))),256))])])):C("",!0),e("div",im,[e("pre",null,v(h.item),1),e("div",rm,[e("div",dm,[e("div",um,[T(e("select",{"onUpdate:modelValue":g[0]||(g[0]=$=>h.item.relativeProgramId=$),class:"form-select",id:"sourceLocationId"},[(t(!0),o(B,null,z(h.lookups.channelPrograms,$=>(t(),o("option",{value:$.id},v($.name),9,cm))),256))],512),[[me,h.item.relativeProgramId]]),g[14]||(g[14]=e("label",{for:"relativeProgramId",class:"small fw-bold"},"Relative Program",-1))])]),e("div",mm,[e("div",fm,[T(e("input",{"onUpdate:modelValue":g[1]||(g[1]=$=>h.item.name=$),id:"name",class:"form-control",placeholder:"Name"},null,512),[[H,h.item.name]]),g[15]||(g[15]=e("label",{for:"name",class:"small fw-bold"},"Name",-1)),i(m).item.name.$error?(t(),o("div",pm,[(t(!0),o(B,null,z(i(m).item.name.$errors,$=>(t(),o("div",{key:$.$uid},v($.$message),1))),128))])):C("",!0)])]),e("div",vm,[e("div",gm,[T(e("input",{"onUpdate:modelValue":g[2]||(g[2]=$=>h.item.dateScheduledStart=$),type:"datetime-local",id:"dateScheduledStart",class:"form-control"},null,512),[[H,h.item.dateScheduledStart]]),g[16]||(g[16]=e("label",{for:"dateScheduledStart",class:"small fw-bold"},"Date Scheduled Start",-1)),i(m).item.dateScheduledStart.$error?(t(),o("div",bm,[(t(!0),o(B,null,z(i(m).item.dateScheduledStart.$errors,$=>(t(),o("div",{key:$.$uid},v($.$message),1))),128))])):C("",!0)])])]),e("div",ym,[e("div",$m,[e("div",wm,[T(e("select",{"onUpdate:modelValue":g[3]||(g[3]=$=>h.item.sourceLocationId=$),onChange:g[4]||(g[4]=$=>J(h.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),o(B,null,z(h.lookups.sourceLocations,$=>(t(),o("option",{value:$.id},v($.name),9,hm))),256))],544),[[me,h.item.sourceLocationId]]),g[17]||(g[17]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(m).item.sourceLocationId.$error?(t(),o("div",_m,[(t(!0),o(B,null,z(i(m).item.sourceLocationId.$errors,$=>(t(),o("div",{key:$.$uid},v($.$message),1))),128))])):C("",!0)])]),e("div",km,[e("div",Sm,[T(e("select",{"onUpdate:modelValue":g[5]||(g[5]=$=>h.item.vodSourceId=$),class:"form-select",id:"vodSourceId"},[(t(!0),o(B,null,z(h.lookups.vodSources,$=>(t(),o("option",{value:$.id},v($.name),9,Mm))),256))],512),[[me,h.item.vodSourceId]]),g[18]||(g[18]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),i(m).item.vodSourceId.$error?(t(),o("div",Tm,[(t(!0),o(B,null,z(i(m).item.vodSourceId.$errors,$=>(t(),o("div",{key:$.$uid},v($.$message),1))),128))])):C("",!0)])]),e("div",Im,[e("div",Pm,[T(e("input",{"onUpdate:modelValue":g[6]||(g[6]=$=>h.item.endOffsetMillis=$),id:"endOffsetMillis",type:"number",class:"form-control",placeholder:"End OffSet Millis"},null,512),[[H,h.item.endOffsetMillis]]),g[19]||(g[19]=e("label",{for:"endOffsetMillis",class:"small fw-bold"},"End OffSet Millis",-1)),h.item.endOffsetMillis>0?(t(),o("span",xm,v(h.item.endOffsetMillis/6e4)+" minute ",1)):C("",!0),i(m).item.endOffsetMillis.$error?(t(),o("div",Cm,[(t(!0),o(B,null,z(i(m).item.endOffsetMillis.$errors,$=>(t(),o("div",{key:$.$uid},v($.$message),1))),128))])):C("",!0)])])]),e("div",null,[e("fieldset",null,[g[22]||(g[22]=e("legend",null,"Ads Information",-1)),e("div",Um,[e("div",Vm,[T(e("input",{"onUpdate:modelValue":g[7]||(g[7]=$=>h.item.adName=$),id:"adName",class:"form-control",placeholder:"adName"},null,512),[[H,h.item.adName]]),g[20]||(g[20]=e("label",{for:"adName",class:"small fw-bold"},"Ad Name",-1))])]),e("div",Am,[e("div",Em,[T(e("textarea",{"onUpdate:modelValue":g[8]||(g[8]=$=>h.item.adsUrl=$),id:"adsUrl",class:"form-control",placeholder:"adsUrl",style:{height:"6rem"}},null,512),[[H,h.item.adsUrl]]),g[21]||(g[21]=e("label",{for:"adsUrl",class:"small fw-bold"},"Ads URL",-1))])])])]),e("div",null,[e("div",{class:"d-flex flex-row justify-content-between"},[g[23]||(g[23]=e("fieldset",null,[e("legend",null," Ad Break ")],-1)),g[24]||(g[24]=O(" t> ")),e("button",{onClick:k,class:"btn btn-outline-primary"}," Insert Ad Break ")]),e("div",Nm,[e("table",Om,[g[26]||(g[26]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Offset Millis"),e("th",null,"Source Location"),e("th",null,"VOD Source"),e("th")])],-1)),e("tbody",null,[(t(!0),o(B,null,z(h.item.adBreaks,($,b)=>(t(),o("tr",null,[e("td",null,v(b+1),1),e("td",null,[T(e("input",{"onUpdate:modelValue":se=>$.offsetMillis=se,type:"number",id:"adName",class:"form-control",placeholder:"Enter Offset Millis..."},null,8,Lm),[[H,$.offsetMillis]]),e("span",Hm,v($.offsetMillis/6e4)+" minute ",1)]),e("td",null,[T(e("select",{"onUpdate:modelValue":se=>$.sourceLocationId=se,onChange:g[9]||(g[9]=se=>ce(h.item.sourceLocationId)),class:"form-select",id:"adBreakSourceLocationId"},[(t(!0),o(B,null,z(h.lookups.adBreakSourceLocations,se=>(t(),o("option",{value:se.id},v(se.name),9,Dm))),256))],40,Bm),[[me,$.sourceLocationId]])]),e("td",null,[T(e("select",{"onUpdate:modelValue":se=>$.vodSourceId=se,class:"form-select",id:"adBreakVodSourceId"},[(t(!0),o(B,null,z(h.lookups.adBreakVodSources,se=>(t(),o("option",{value:se.id},v(se.name),9,Rm))),256))],8,qm),[[me,$.vodSourceId]])]),e("td",null,[e("button",{onClick:se=>Z(b),class:"btn btn-outline-warning"},g[25]||(g[25]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,jm)])]))),256))])])])])])]),e("div",zm,[e("button",{disabled:i(m).$dirty&&i(m).$invalid,onClick:g[10]||(g[10]=$=>V()),class:"btn btn-primary",type:"button"},g[27]||(g[27]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,Fm),g[28]||(g[28]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Xc))}},Wm=["id"],Gm={class:"modal-dialog modal-xl modal-fullscreen-md-down"},Jm={class:"modal-content"},Km={class:"modal-header bg-primary text-white"},Qm={class:"modal-title",id:"exampleModalLabel"},Xm={class:"modal-body"},Zm={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},ef=["innerHTML"],tf={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},sf={class:"container"},of={class:"col"},lf={class:"form-floating mb-2"},af=["value"],nf={key:0,class:"d-block invalid-feedback"},rf={class:"col"},df={class:"form-floating mb-2"},uf=["value"],cf={key:0,class:"d-block invalid-feedback"},mf={class:"modal-footer"},ff=["disabled"],pf={__name:"_editFillerSlate",emits:["refresh"],setup(a,{expose:n,emit:u}){const{appTitle:f,pageTitle:c,busy:x,isDirty:y,validations:D,infoMessage:A,warningMessage:M,errorMessage:E,router:Y,axios:R,utils:j,toasts:N,closeWithReturnUrl:L,security:d}=ue({appTitle:"Sony FAST",pageTitle:"Edit Filler Slate"}),G=u,F=oe(),r=oe("modalEditFillerSlate"),w=re({lookups:{sourceLocations:[],vodSources:[]},item:{sourceLocationId:null,vodSourceId:null}}),h={item:{sourceLocationId:{required:ee.withMessage("sourceLocationId is required.",te),$autoDirty:!0,$lazy:!0},vodSourceId:{required:ee.withMessage("vodSourceId is required.",te),$autoDirty:!0,$lazy:!0}}},s=ye(h,w);ne(async()=>{s.value.$reset()});const m=async()=>{await l()},l=async()=>{try{await R.get("/api/v1/sourcelocations/lookup/").then(J=>{w.lookups.sourceLocations=J.data,w.lookups.sourceLocations.length===1&&(w.item.sourceLocationId=w.lookups.sourceLocations[0].id)}),w.item.sourceLocationId&&await q(w.item.sourceLocationId)}catch(_){E.value=j.getErrorMessageAsHtml(_),window.scrollTo(0,0)}finally{}},q=async _=>{try{let J="/api/v1/vodSources/lookup/";_&&(J+=`?sourceLocationId=${_}`),await R.get(J).then(X=>{w.lookups.vodSources=X.data})}catch(J){E.value=j.getErrorMessageAsHtml(J),window.scrollTo(0,0)}finally{}},p=async _=>{F.value=_;const J=w;D.value.clear(),E.value="",J.lookups={sourceLocations:[],vodSources:[]},J.item={sourceLocationId:null,vodSourceId:null},await m(),s.value.$reset();var X=document.getElementById(r.value),ce=we.getOrCreateInstance(X);ce.show()},V=async()=>{var _=document.getElementById(r.value),J=we.getOrCreateInstance(_);J.hide(),G("refresh")},U=async()=>{const _=w;if(x.value)return;if(!await s.value.$validate()){window.scrollTo(0,0);return}try{x.value=!0,E.value="";const X=_.item;X.channelId=F.value,await R.put("/api/v1/channels/filler-slate",X).then(ce=>{N.success("Update Channel Filler Slate","Channel's Filler slate was updated.")}),await V()}catch(X){E.value=j.getErrorMessageAsHtml(X),window.scrollTo(0,0)}finally{x.value=!1}};return n({open:p,close:V}),(_,J)=>(t(),o("div",{class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",id:r.value,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Gm,[e("div",Jm,[e("div",Km,[e("h5",Qm,v(i(f))+" - "+v(i(c)),1),J[4]||(J[4]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),e("div",Xm,[i(E)?(t(),o("div",Zm,[J[5]||(J[5]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:i(E)},null,8,ef)])):C("",!0),i(D).size>0?(t(),o("div",tf,[J[6]||(J[6]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(i(D).values(),X=>(t(),o("li",null,v(X),1))),256))])])):C("",!0),e("div",sf,[e("div",of,[e("div",lf,[T(e("select",{"onUpdate:modelValue":J[0]||(J[0]=X=>w.item.sourceLocationId=X),onChange:J[1]||(J[1]=X=>q(w.item.sourceLocationId)),class:"form-select",id:"sourceLocationId"},[(t(!0),o(B,null,z(w.lookups.sourceLocations,X=>(t(),o("option",{value:X.id},v(X.name),9,af))),256))],544),[[me,w.item.sourceLocationId]]),J[7]||(J[7]=e("label",{for:"sourceLocationId",class:"small fw-bold"},"Source Location",-1)),i(s).item.sourceLocationId.$error?(t(),o("div",nf,[(t(!0),o(B,null,z(i(s).item.sourceLocationId.$errors,X=>(t(),o("div",{key:X.$uid},v(X.$message),1))),128))])):C("",!0)])]),e("div",rf,[e("div",df,[T(e("select",{"onUpdate:modelValue":J[2]||(J[2]=X=>w.item.vodSourceId=X),class:"form-select",id:"vodSourceId"},[(t(!0),o(B,null,z(w.lookups.vodSources,X=>(t(),o("option",{value:X.id},v(X.name),9,uf))),256))],512),[[me,w.item.vodSourceId]]),J[8]||(J[8]=e("label",{for:"vodSourceId",class:"small fw-bold"},"VOD Source",-1)),i(s).item.vodSourceId.$error?(t(),o("div",cf,[(t(!0),o(B,null,z(i(s).item.vodSourceId.$errors,X=>(t(),o("div",{key:X.$uid},v(X.$message),1))),128))])):C("",!0)])])])]),e("div",mf,[e("button",{disabled:i(s).$dirty&&i(s).$invalid,onClick:J[3]||(J[3]=X=>U()),class:"btn btn-primary",type:"button"},J[9]||(J[9]=[e("span",{class:"fas fa-fw fa-save"},null,-1)]),8,ff),J[10]||(J[10]=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary ms-1"},[e("span",{class:"fas fa-fw fa-times"})],-1))])])])],8,Wm))}},vf={class:"d-flex flex-row justify-content-end"},gf={key:0},bf={class:"nav nav-underline nav-fill",id:"myTab",role:"tablist"},yf={class:"nav-item",role:"presentation"},$f={class:"nav-item",role:"presentation"},wf={class:"tab-content",id:"myTabContent"},hf={class:"mt-2"},_f={class:"row row-cols-1 row-cols-sm-3"},kf={class:"col"},Sf={class:"form-floating mb-2"},Mf={class:"col"},Tf={class:"form-floating mb-2"},If={class:"col"},Pf={class:"form-floating mb-2"},xf={class:"col"},Cf={class:"form-floating mb-2"},Uf={class:"d-flex flex-row justify-content-between"},Vf={key:0},Af={class:"row row-cols-sm-2"},Ef={class:"col"},Nf={class:"form-floating mb-2"},Of={class:"col"},Lf={class:"form-floating mb-2"},Hf={class:"table-responsive border"},Bf={class:"table mb-0"},Df={class:"text-wrap"},qf=["href"],Rf={class:"mt-2"},jf={class:"table-responsive border"},zf={class:"table table-hover mb-0 caption-top"},Ff={key:0,class:"fas fa-fw fa-check-circle text-success"},Yf={class:"badge bg-info"},Wf={key:0,class:"mb-1"},Gf={key:1,class:"mb-1"},Jf={key:2,class:"mb-1"},Kf={key:3,class:"mb-1"},Qf={key:4,class:"mb-1"},Xf={key:5,class:"mb-1"},Zf={class:"badge bg-info me-2"},ep={class:"text-end"},tp=["onClick"],sp=["onClick"],op=["onClick"],lp={class:"text-end mt-2"},ap={__name:"view",props:{id:{type:String,required:!0},urlMain:{type:String,default:"/channels"},urlViewSourceLocation:{type:String,default:"/source-locations/view"},urlViewVodSource:{type:String,default:"/vod-sources/view"}},setup(a){const n=a,{appTitle:u,pageTitle:f,busy:c,isDirty:x,validations:y,infoMessage:D,warningMessage:A,errorMessage:M,router:E,axios:Y,utils:R,toasts:j,close:N,closeWithReturnUrl:L,generateReturnUrl:d,security:G}=ue({appTitle:"Sony FAST",pageTitle:"View Channel"});fe("$config");const F=de();F.user;const r=re({user:F.user,item:null}),w=oe(null),h=oe(null),s=oe(null),m=oe(),l=Qe(()=>r.item&&r.item.state==="RUNNING");ne(async()=>{await U(),m.value=R.getPageTab("channel")||"information-tab"});const q=$=>{R.setPageTab("channel",$),m.value=$},p=$=>$===m.value?"active":"",V=$=>$===m.value?"show active":"",U=async()=>{const $=r;if(!c.value)try{c.value=!0,M.value="",r.item=null;const b=`/api/v1/channels/${n.id}/`;await Y.get(b).then(se=>{$.item=se.data})}catch(b){M.value=R.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{c.value=!1}},_=async()=>{await U()},J=async()=>{if(confirm("Channel will be submitted to AWS MediaTailer. Are you sure you want to publish the channel?")&&!c.value){M.value=null;try{c.value=!0,await Y.post(`/api/v1/channels/publish/${n.id}/`).then(b=>{j.success("Publish Channel","Channel was published.")}),c.value=!1,await _()}catch(b){M.value=R.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{c.value=!1}}},X=async()=>{if(confirm("Channel will be removed to AWS MediaTailer. Are you sure you want to remove the channel?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/channels/unpublish/${n.id}/`).then(b=>{j.warning("Remove Channel","Channel was removed.")}),c.value=!1,await _()}catch(b){M.value=R.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{c.value=!1}}},ce=()=>{w.value.open(n.id)},K=()=>{s.value.open(n.id)},k=async $=>{if(confirm("Program will be deleted. Are you sure you want to delete the program?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/programs/${$}/`).then(se=>{j.success("Delete Program","Program was deleted..",{async onClose(){}})}),c.value=!1,await _()}catch(se){M.value=R.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{c.value=!1}}},Z=async $=>{if(confirm("Program will be published to AWS MediaTailor. Are you sure you want to publish the program?")&&!c.value){M.value=null;try{c.value=!0,await Y.post(`/api/v1/programs/publish/${$}/`).then(se=>{j.success("Publish Program","Program was published..",{async onClose(){}})}),c.value=!1,await _()}catch(se){M.value=R.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{c.value=!1}}},I=async $=>{if(confirm("Program will be unpublished to AWS MediaTailor. Are you sure you want to unpublish the program?")&&!c.value){M.value=null;try{c.value=!0,await Y.delete(`/api/v1/programs/unpublish/${$}/`).then(se=>{j.success("Unpublish Program","Program was unpublished..",{async onClose(){}})}),c.value=!1,await _()}catch(se){M.value=R.getErrorMessageAsHtml(se),window.scrollTo(0,0)}finally{c.value=!1}}},g=async $=>{if(!c.value){M.value=null;try{c.value=!0,await Y.put(`/api/v1/channels/${n.id}/change-state/${$}`).then(b=>{j.success("Update Channel state","Change state was updated")}),c.value=!1,await _()}catch(b){M.value=R.getErrorMessageAsHtml(b),window.scrollTo(0,0)}finally{c.value=!1}}};return($,b)=>{const se=W("router-link"),ke=W("PageHeader"),Se=W("PageBody");return t(),le(ie,null,{default:S(()=>[e("div",null,[P(ke,{"page-icon":"fas fa-fw fa-microphone",pageTitle:i(f),"header-break":"row row-cols-2 row-cols-sm-2"},{default:S(()=>[e("div",vf,[(i(G).isAdministrator,C("",!0)),r.item?(t(),o(B,{key:1},[r.item.arn?(t(),o(B,{key:0},[l.value?l.value?(t(),o("button",{key:1,onClick:b[2]||(b[2]=Q=>g("STOPPED")),class:"ms-1 btn btn-warning"},b[19]||(b[19]=[e("span",{class:"fas fa-fw fa-stop"},null,-1)]))):C("",!0):(t(),o("button",{key:0,onClick:b[1]||(b[1]=Q=>g("RUNNING")),class:"ms-1 btn btn-success"},b[18]||(b[18]=[e("span",{class:"fas fa-fw fa-play"},null,-1)])))],64)):C("",!0),r.item.arn&&!l.value?(t(),o("button",{key:1,onClick:b[3]||(b[3]=Q=>J()),class:"ms-1 btn btn-primary"},b[20]||(b[20]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),O("Republish ")]))):C("",!0),l.value?C("",!0):(t(),o(B,{key:2},[r.item.arn?(t(),o("button",{key:0,onClick:b[4]||(b[4]=Q=>X()),class:"ms-1 btn btn-danger"},b[21]||(b[21]=[e("span",{class:"fas fa-fw fa-unlink me-1"},null,-1),O("Unpublish ")]))):(t(),o("button",{key:1,onClick:b[5]||(b[5]=Q=>J()),class:"ms-1 btn btn-primary"},b[22]||(b[22]=[e("span",{class:"fas fa-fw fa-link me-1"},null,-1),O("Publish ")])))],64))],64)):C("",!0),e("button",{onClick:b[6]||(b[6]=Q=>_()),class:"ms-2 btn btn-secondary"},b[23]||(b[23]=[e("span",{class:"fas fa-fw fa-sync"},null,-1)])),e("button",{onClick:b[7]||(b[7]=Q=>i(L)(n.urlMain)),class:"btn btn-secondary ms-1"},b[24]||(b[24]=[e("span",{class:"fas fa-fw fa-close"},null,-1)]))])]),_:1},8,["pageTitle"]),P(Se,{errorMessage:i(M)},{default:S(()=>[r.item?(t(),o("div",gf,[e("ul",bf,[e("li",yf,[e("button",{onClick:b[8]||(b[8]=Q=>q("information-tab")),class:ae([p("information-tab"),"nav-link"]),id:"information-tab","data-bs-toggle":"tab","data-bs-target":"#information",type:"button",role:"tab","aria-controls":"information","aria-selected":"false"},b[25]||(b[25]=[e("span",{class:"fas fa-fw fa-info-circle me-1"},null,-1),O("Information ")]),2)]),e("li",$f,[e("button",{onClick:b[9]||(b[9]=Q=>q("programs-tab")),class:ae([p("programs-tab"),"nav-link"]),id:"programs-tab","data-bs-toggle":"tab","data-bs-target":"#programs",type:"button",role:"tab","aria-controls":"programs","aria-selected":"false"},b[26]||(b[26]=[e("span",{class:"fas fa-fw fa-list me-1"},null,-1),O("Programs ")]),2)])]),e("div",wf,[e("div",{class:ae([V("information-tab"),"tab-pane fade"]),id:"information",role:"tabpanel","aria-labelledby":"information-tab"},[e("div",hf,[e("div",_f,[e("div",kf,[e("div",Sf,[T(e("input",{"onUpdate:modelValue":b[10]||(b[10]=Q=>r.item.name=Q),type:"text",class:"form-control",id:"name",disabled:""},null,512),[[H,r.item.name]]),b[27]||(b[27]=e("label",{for:"name"},"Name",-1))])]),e("div",Mf,[e("div",Tf,[T(e("input",{"onUpdate:modelValue":b[11]||(b[11]=Q=>r.item.playbackMode=Q),type:"text",class:"form-control",id:"playbackMode",disabled:""},null,512),[[H,r.item.playbackMode]]),b[28]||(b[28]=e("label",{for:"playbackMode"},"Playback Mode",-1))])]),e("div",If,[e("div",Pf,[T(e("input",{"onUpdate:modelValue":b[12]||(b[12]=Q=>r.item.tier=Q),type:"text",class:"form-control",id:"tier",disabled:""},null,512),[[H,r.item.tier]]),b[29]||(b[29]=e("label",{for:"tier"},"Tier",-1))])])]),e("div",xf,[e("div",Cf,[T(e("textarea",{"onUpdate:modelValue":b[13]||(b[13]=Q=>r.item.policy=Q),type:"text",class:"form-control",style:{height:"8rem"},id:"policy",disabled:""},null,512),[[H,r.item.policy]]),b[30]||(b[30]=e("label",{for:"policy"},"Policy",-1))])]),e("div",Uf,[b[32]||(b[32]=e("fieldset",null,[e("legend",null,"Filler Slate")],-1)),l.value?C("",!0):(t(),o("div",Vf,[e("button",{onClick:b[14]||(b[14]=Q=>K()),class:"btn btn-outline-primary btn-sm"},b[31]||(b[31]=[e("span",{class:"fas fa-fw fa-edit me-1"},null,-1),O(" Edit ")]))]))]),e("div",Af,[e("div",Ef,[e("div",Nf,[P(se,{to:`${a.urlViewSourceLocation}/${r.item.fillerSlateSourceLocation.sourceLocationId}/${i(d)()}`,class:"form-control",id:"fillerSlateSourceLocationName",disabled:""},{default:S(()=>[O(v(r.item.fillerSlateSourceLocation.name),1)]),_:1},8,["to"]),b[33]||(b[33]=e("label",{for:"fillerSlateSourceLocationName"},"Filler Slate Source LocationName",-1))])]),e("div",Of,[e("div",Lf,[P(se,{to:`${a.urlViewVodSource}/${r.item.fillerSlateVodSource.vodSourceId}/${i(d)()}`,class:"form-control",id:"fillerSlateSourceLocationName",disabled:""},{default:S(()=>[O(v(r.item.fillerSlateVodSource.name),1)]),_:1},8,["to"]),b[34]||(b[34]=e("label",{for:"fillerSlateVodSourceName"},"Filler Slate Vod SourceName",-1))])])]),e("fieldset",null,[b[37]||(b[37]=e("legend",null,"Outputs",-1)),e("div",Hf,[e("table",Bf,[b[36]||(b[36]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Type"),e("th",null,"Source Group"),e("th",null,"Playback Url"),e("th")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.outputs,(Q,xe)=>(t(),o("tr",{key:Q.channelOutputId},[e("td",null,v(xe+1),1),e("td",null,v(Q.outputType),1),e("td",null,v(Q.sourceGroup),1),e("td",null,[e("div",Df,v(Q.playbackUrl),1)]),e("td",null,[l.value?(t(),o("a",{key:0,href:`https://players.akamai.com/players/hlsjs?streamUrl=${encodeURIComponent(Q.playbackUrl)}`,target:"_blank",class:"btn btn-outline-info btn-sm"},b[35]||(b[35]=[e("span",{class:"fas fa-fw fa-tv me-1"},null,-1),O("View ")]),8,qf)):C("",!0)])]))),128))]),_:1},512),[[be,r.item.outputs.length>0]])])])])])],2),e("div",{class:ae([V("programs-tab"),"tab-pane fade"]),id:"programs",role:"tabpanel","aria-labelledby":"programs-tab"},[e("div",Rf,[e("div",jf,[e("table",zf,[b[52]||(b[52]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Duration"),e("th",null,"Video"),e("th",null,"Ad Breaks"),e("th")])],-1)),T(P(ve,{tag:"tbody",name:"list",class:"table-group-divider"},{default:S(()=>[(t(!0),o(B,null,z(r.item.programs,(Q,xe)=>(t(),o("tr",{key:Q.programId},[e("td",null,v(xe+1),1),e("td",null,[Q.arn?(t(),o("span",Ff)):C("",!0),O(" "+v(Q.name)+" ",1),b[40]||(b[40]=e("br",null,null,-1)),b[41]||(b[41]=e("span",{class:"fas fa-fw fa-calendar me-1"},null,-1)),O(v(i(R).moment(Q.dateScheduledStart).format("LLLL"))+" ",1),Q.relativeProgram?(t(),o(B,{key:1},[b[38]||(b[38]=e("br",null,null,-1)),b[39]||(b[39]=O(" Relative Program: ")),e("span",Yf,v(Q.relativeProgram.name),1)],64)):C("",!0)]),e("td",null,[Q.startOffsetMillis>0?(t(),o("div",Wf,[b[42]||(b[42]=e("span",{class:"fas fa-fw fa-hourglass-start me-1"},null,-1)),O(v(i(R).moment.utc(Q.startOffsetMillis).format("HH:mm:ss")),1)])):C("",!0),Q.endOffsetMillis>0?(t(),o("div",Gf,[b[43]||(b[43]=e("span",{class:"fas fa-fw fa-hourglass-end me-1"},null,-1)),O(v(i(R).moment.utc(Q.endOffsetMillis).format("HH:mm:ss")),1)])):C("",!0),Q.startOffsetMillis>0&&Q.endOffsetMillis>0?(t(),o("div",Jf,[b[44]||(b[44]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(v(i(R).moment.utc(Q.endOffsetMillis-Q.startOffsetMillis).format("HH:mm:ss")),1)])):Q.startOffsetMillis>0&&Q.endOffsetMillis<=0?(t(),o("div",Kf,[b[45]||(b[45]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(v(i(R).moment.utc(Q.vodSource.video.durationInMillis-Q.startOffsetMillis).format("HH:mm:ss")),1)])):Q.startOffsetMillis<=0&&Q.endOffsetMillis>0?(t(),o("div",Qf,[b[46]||(b[46]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(v(i(R).moment.utc(Q.endOffsetMillis).format("HH:mm:ss")),1)])):Q.startOffsetMillis<=0&&Q.endOffsetMillis<=0?(t(),o("div",Xf,[b[47]||(b[47]=e("span",{class:"fas fa-fw fa-clock me-1"},null,-1)),O(v(i(R).moment.utc(Q.vodSource.video.durationInMillis).format("HH:mm:ss")),1)])):C("",!0)]),e("td",null,[O(v(Q.vodSource.video.title)+" ",1),b[48]||(b[48]=e("br",null,null,-1)),O(" ("+v(i(R).moment.utc(Q.vodSource.video.durationInMillis).format("HH:mm:ss"))+") ",1)]),e("td",null,[e("ol",null,[(t(!0),o(B,null,z(Q.adBreaks,_e=>(t(),o("li",null,[e("span",Zf,v(i(R).moment.utc(_e.offsetMillis).format("HH:mm:ss")),1),P(se,{to:`${a.urlViewVodSource}/${_e.vodSource.vodSourceId}/${i(d)()}`},{default:S(()=>[O(v(_e.vodSource.name),1)]),_:2},1032,["to"])]))),256))])]),e("td",ep,[Q.arn?(t(),o("button",{key:0,onClick:_e=>I(Q.programId),class:"btn btn-sm btn-outline-warning"},b[49]||(b[49]=[e("span",{class:"fas fa-fw fa-unlink"},null,-1)]),8,tp)):(t(),o("button",{key:1,onClick:_e=>Z(Q.programId),class:"btn btn-sm btn-outline-primary ms-1"},b[50]||(b[50]=[e("span",{class:"fas fa-fw fa-link"},null,-1)]),8,sp)),Q.arn?C("",!0):(t(),o("button",{key:2,onClick:_e=>k(Q.programId),class:"btn btn-sm btn-outline-danger ms-2"},b[51]||(b[51]=[e("span",{class:"fas fa-fw fa-trash"},null,-1)]),8,op))])]))),128))]),_:1},512),[[be,r.item.programs.length>0]])])]),e("div",lp,[e("button",{onClick:b[15]||(b[15]=Q=>ce()),class:"btn btn-outline-primary"},b[53]||(b[53]=[e("span",{class:"fas fa-fw fa-plus me-1"},null,-1),O("Program ")]))])])],2)])])):C("",!0)]),_:1},8,["errorMessage"]),P(Qc,{ref_key:"modalAddProgram",ref:w,onRefresh:_},null,512),P(Ym,{ref_key:"modalEditProgram",ref:h,onRefresh:_},null,512),P(pf,{ref_key:"modalEditFillerSlate",ref:s,onRefresh:_},null,512)])]),_:1})}}},np={path:"/",component:Ho,props:!1,meta:{requiresAuth:!0},children:[{path:"",component:tl},{path:"users/add",component:Tl},{path:"users",component:Ol},{path:"users/view/:id",component:aa,props:!0},{path:"videos/add",component:Na},{path:"videos/edit/:id",component:on,props:!0},{path:"videos",component:fn},{path:"videos/view/:id",component:Dn,props:!0},{path:"source-locations/add",component:ci},{path:"source-locations/edit/:id",component:pi,props:!0},{path:"source-locations",component:Si},{path:"source-locations/view/:id",component:Ji,props:!0},{path:"vod-sources/add",component:br},{path:"vod-sources/edit/:id",component:wr,props:!0},{path:"vod-sources",component:Ur},{path:"vod-sources/view/:id",component:uu,props:!0},{path:"channels/add",component:Nu},{path:"channels/edit/:id",component:Hu,props:!0},{path:"channels",component:Wu},{path:"channels/view/:id",component:ap,props:!0}]},Ye=Xe({history:Ze("/"),linkActiveClass:"active",routes:[{...Fs},{path:"/administrator",redirect:"/"},{...np}]}),ip={props:{uid:{type:String,required:!0},urlViewDeposit:{type:String,required:!1},urlViewWithdraw:{type:String,required:!1},urlViewManualModeOfPayment:{type:String,required:!1}},data(){return{messages:[],count:0}},created(){},async mounted(){await this.connectNotificationHub()},methods:{async connectNotificationHub(){const a=this,u=new et().withUrl("https://sonyfastpoc.azurewebsites.net//notificationHub").withAutomaticReconnect().build();u.on("onNotificationCreated",function(f){let c=f.content;f.notificationEntityClassText==="Deposit"&&(c+="<br/>",c+=`<a href="${a.urlViewDeposit}${f.referenceId}">Click ${f.notificationEntityClassText} here</a>`),f.notificationEntityClassText==="Withdraw"&&(c+="<br/>",c+=`<a href="${a.urlViewWithdraw}${f.referenceId}">Click ${f.notificationEntityClassText} here</a>`),f.notificationEntityClassText==="ManualModeOfPayment"&&(c+="<br/>",c+=`<a href="${a.urlViewManualModeOfPayment}${f.referenceId}">Click ${f.notificationEntityClassText} here</a>`),f.iconClass;let x="secondary";switch(f.notificationType){case 1:x="success";break;case 3:x="info";break;case 3:x="success";break;case 4:x="info";break;case 5:x="warning";break;case 6:x="error";break}a.$toast[x](f.subject,c,{timeOut:1e4});const y=f.subject,M={body:c,icon:"/img/192x102.png"};new Notification(y,M)}),u.on("jobUpdated",function(f){a.$bus.$emit("event:job-updated",f)}),await u.start().then(function(){}).catch(function(f){})}}};function rp(a,n,u,f,c,x){return t(),o("div")}const dp=pe(ip,[["render",rp],["__scopeId","data-v-5b4a9fa2"]]),up={class:"navbar bg-light","data-bs-theme":"light"},cp={class:"container-md"},mp={class:"col-sm-auto"},fp={class:"navbar-brand mb-0"},pp={class:"col-sm flex-fill"},vp={__name:"_pageHeader",props:{pageIcon:{type:String,required:!0},pageTitle:{type:String,required:!0},headerBreak:{type:String,required:!1,default:"row row-cols-1 row-cols-sm-2"}},setup(a){return(n,u)=>(t(),le(ie,null,{default:S(()=>[e("div",null,[e("nav",up,[e("div",cp,[e("div",{class:ae([a.headerBreak,"align-items-center w-100 gx-0 gy-1"])},[e("div",mp,[$e(n.$slots,"title",{},()=>[e("h1",fp,[e("i",{class:ae([a.pageIcon,"me-1"])},null,2),e("span",null,v(a.pageTitle),1)])])]),e("div",pp,[$e(n.$slots,"default")])],2)])])])]),_:3}))}},gp={key:0,class:"alert alert-danger border-0 border-5 border-start border-danger",role:"alert"},bp=["innerHTML"],yp={key:1,class:"alert alert-warning border-0 border-5 border-start border-warning",role:"alert"},$p={__name:"_pageMessages",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(a){return(n,u)=>(t(),le(ie,null,{default:S(()=>[$e(n.$slots,"default",{},()=>[a.errorMessage?(t(),o("div",gp,[u[0]||(u[0]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-circle-exclamation me-1"}),O("Error ")],-1)),e("div",{innerHTML:a.errorMessage},null,8,bp)])):C("",!0),a.vuelidate&&a.vuelidate.$error?(t(),o("div",yp,[u[1]||(u[1]=e("h4",{class:"alert-heading"},[e("i",{class:"fas fa-triangle-exclamation me-1"}),O("Validation Summary ")],-1)),e("ul",null,[(t(!0),o(B,null,z(a.vuelidate.$errors,f=>(t(),o("li",{key:f.$uid},v(f.$message),1))),128))])])):C("",!0)])]),_:3}))}},wp={class:"mt-2 container-md"},hp={__name:"_pageBody",props:{errorMessage:{type:String,required:!1},vuelidate:{type:Object,required:!1}},setup(a){return(n,u)=>{const f=W("PageMessages");return t(),le(ie,null,{default:S(()=>[e("div",wp,[P(f,{errorMessage:a.errorMessage,vuelidate:a.vuelidate},null,8,["errorMessage","vuelidate"]),$e(n.$slots,"default")])]),_:3})}}},_p={props:{filter:Object,search:Function,noRecords:String,showPerPage:Boolean,busy:Boolean},data(){return{}},created(){},methods:{async changePagination(){const a=this;a.busy||(document.activeElement&&document.activeElement.blur(),await a.search(1))},async moveFirst(){const a=this;if(a.busy)return;a.filter.pageIndex!==1&&(document.activeElement&&document.activeElement.blur(),await a.search(1))},async moveLast(){const a=this;if(a.busy)return;const n=a.filter;n.pageIndex!==n.totalPages&&(document.activeElement&&document.activeElement.blur(),await a.search(n.totalPages))},async move(a){const n=this;if(n.busy)return;const u=n.filter,f=u.pageIndex+a;f>=0&&f<=u.totalPages&&(document.activeElement&&document.activeElement.blur(),await n.search(f))}}},kp={class:"mt-2"},Sp={key:0,class:"row row-cols-1 row-cols-sm-2 align-items-center w-100 gy-2 gx-0"},Mp={key:0,class:"col-sm order-2 order-sm-1"},Tp={class:"d-flex align-items-center small justify-content-center justify-content-sm-start"},Ip={class:"me-1 fw-bold"},Pp={class:"fw-bold"},xp={class:"ms-1"},Cp={class:"col-sm order-1 order-sm-2"},Up={class:"pagination m-0 ms-1 justify-content-center justify-content-sm-end"},Vp={key:0,class:"page-item"},Ap={key:1,class:"page-item"},Ep={key:2,class:"page-item"},Np={class:"page-item active"},Op={class:"page-link"},Lp={key:3,class:"page-item"},Hp={key:4,class:"page-item"},Bp={key:5,class:"page-item"},Dp={key:1,class:"text-info font-weight-bold text-center"},qp={key:0},Rp={key:1};function jp(a,n,u,f,c,x){return t(),o("div",kp,[u.filter.items.length?(t(),o("div",Sp,[u.showPerPage?(t(),o("div",Mp,[e("div",Tp,[e("div",null,[e("span",Ip,v(u.filter.totalCount),1),n[8]||(n[8]=O("records in ")),e("span",Pp,v(u.filter.totalPages),1),n[9]||(n[9]=O(" page(s) "))]),e("div",xp,[T(e("select",{"onUpdate:modelValue":n[0]||(n[0]=y=>u.filter.pageSize=y),onChange:n[1]||(n[1]=(...y)=>x.changePagination&&x.changePagination(...y)),class:"form-select form-select-sm me-1"},n[10]||(n[10]=[Le('<option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="5">5</option><option value="10">10</option><option value="15">15</option><option value="25">25</option><option value="50">50</option><option value="100">100</option>',9)]),544),[[me,u.filter.pageSize]])]),n[11]||(n[11]=e("div",{class:"ms-1"},"per page",-1))])])):C("",!0),e("div",Cp,[e("ul",Up,[u.filter.pageIndex!==1?(t(),o("li",Vp,[e("button",{class:"page-link","aria-label":"Previous",onClick:n[2]||(n[2]=(...y)=>x.moveFirst&&x.moveFirst(...y))},n[12]||(n[12]=[e("span",{class:"fas fa-fw fa-backward-step"},null,-1)]))])):C("",!0),u.filter.pageIndex>2?(t(),o("li",Ap,[e("button",{class:"page-link",onClick:n[3]||(n[3]=y=>x.move(-2))},v(u.filter.pageIndex-2),1)])):C("",!0),u.filter.pageIndex>1?(t(),o("li",Ep,[e("button",{class:"page-link",onClick:n[4]||(n[4]=y=>x.move(-1))},v(u.filter.pageIndex-1),1)])):C("",!0),e("li",Np,[e("span",Op,v(u.filter.pageIndex),1)]),u.filter.pageIndex<u.filter.totalPages?(t(),o("li",Lp,[e("button",{class:"page-link",onClick:n[5]||(n[5]=y=>x.move(1))},v(u.filter.pageIndex+1),1)])):C("",!0),u.filter.pageIndex<u.filter.totalPages-1?(t(),o("li",Hp,[e("button",{class:"page-link",onClick:n[6]||(n[6]=y=>x.move(2))},v(u.filter.pageIndex+2),1)])):C("",!0),u.filter.pageIndex<u.filter.totalPages?(t(),o("li",Bp,[e("button",{class:"page-link","aria-label":"Next",onClick:n[7]||(n[7]=(...y)=>x.moveLast&&x.moveLast(...y))},n[13]||(n[13]=[e("span",{class:"fas fa-fw fa-forward-step"},null,-1)]))])):C("",!0)])])])):(t(),o("div",Dp,[u.noRecords?(t(),o("div",qp,v(u.noRecords),1)):(t(),o("div",Rp,"No record(s) found."))]))])}const zp=pe(_p,[["render",jp]]),Fp={props:{filter:Object,field:String,showSort:Boolean,enabled:Boolean},data(){return{}},mounted(){},methods:{currentSortField(){return this.filter.sortField===this.field},sortUp(){return this.filter.sortOrder===1},click(){let a=this;if(!a.enabled)return;let n=a.filter;n.sortField===a.field?n.sortOrder===0?n.sortField=null:n.sortOrder=n.sortOrder===0?1:0:(n.sortField=a.field,n.sortOrder=1),a.$emit("search")}}},Yp={class:"align-self-center"};function Wp(a,n,u,f,c,x){return t(),o("div",{onClick:n[0]||(n[0]=(...y)=>x.click&&x.click(...y)),class:"d-flex flex-row justify-content-start align-content-center",style:qe({cursor:u.enabled?"pointer":""})},[$e(a.$slots,"default"),e("span",Yp,[u.showSort?(t(),o("span",{key:0,class:ae([{"fa-sort text-gray-500":!x.currentSortField(),"fa-sort-up":x.currentSortField()&&x.sortUp(),"fa-sort-down":x.currentSortField()&&!x.sortUp()},"fas fa-fw mr-1"])},null,2)):C("",!0)])],4)}const Gp=pe(Fp,[["render",Wp]]),Jp={props:{items:Array,header:Object,getRowNumber:Function,setSelected:Function,isSelected:Function,tableCss:String,rowCss:String},data(){return{}},mounted(){},methods:{onSelectedRow(a){const n=this;n.setSelected(a),n.$emit("onSelectedRow",a)}}},Kp={class:"table-responsive m-0"},Qp=["href"],Xp={key:1},Zp=["onClick"],ev={class:"form-group row no-gutters"},tv={class:"col-5 col-form-label"},sv={class:"col align-self-center"},ov=["href"],lv={key:1};function av(a,n,u,f,c,x){return t(),o("div",null,[e("div",Kp,[e("table",{class:ae(["table table-hover d-none d-md-table card",u.tableCss])},[e("thead",null,[$e(a.$slots,"header",{},()=>[n[0]||(n[0]=e("th",null,"#",-1)),(t(!0),o(B,null,z(u.header.columns,y=>(t(),o("th",null,v(y.title),1))),256))],!0)]),e("tbody",null,[(t(!0),o(B,null,z(u.items,(y,D)=>$e(a.$slots,"table-row",{key:`row1-${y[u.header.key]}`,item:y,index:D},()=>[e("td",null,v(u.getRowNumber(D)),1),(t(!0),o(B,null,z(u.header.columns,A=>(t(),o("td",null,[A.href?(t(),o("a",{key:0,href:A.href(y[u.header.key]),class:"font-weight-bold"},v(y[A.field]),9,Qp)):(t(),o("span",Xp,v(y[A.field]),1))]))),256))],!0)),128))])],2)]),e("div",{class:ae(["d-block d-md-none",u.rowCss])},[(t(!0),o(B,null,z(u.items,(y,D)=>(t(),o("div",{key:`row2-${y[u.header.key]}`,onClick:A=>x.onSelectedRow(y),class:"border"},[e("div",{class:ae(["p-2",{"b-left":u.isSelected(y)}])},[$e(a.$slots,"table-list",{item:y,index:D},()=>[(t(!0),o(B,null,z(u.header.columns,A=>(t(),o("div",ev,[e("label",tv,v(A.title),1),e("div",sv,[A.href?(t(),o("a",{key:0,href:A.href(y[u.header.key]),class:"font-weight-bold"},v(y[A.field]),9,ov)):(t(),o("span",lv,v(y[A.field]),1))])]))),256))],!0)],2)],8,Zp))),128))],2)])}const nv=pe(Jp,[["render",av],["__scopeId","data-v-65929213"]]),ge=tt(ot);ge.use(st());ge.use(Ye);ge.component("m-notification",dp);ge.component("m-pagination",zp);ge.component("sort-field",Gp);ge.component("table-list",nv);ge.component("Toasts",Eo);ge.component("PageHeader",vp);ge.component("PageMessages",$p);ge.component("PageBody",hp);const iv="https://sonyfastpoc.azurewebsites.net/",rv="Sony FAST",dv=void 0,uv={API_URL:iv,appName:rv,tenantId:dv};ge.provide("$config",uv);ge.provide("$bus",Ve);ge.mount("#app");
